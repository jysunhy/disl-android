cscope 15 $HOME/tdroid/tdroid-4.1.1_r6/dalvik               0003913591
	@dalvikvm/Main.cpp

19 
	~"jni.h
"

21 
	~<¡dlib.h
>

22 
	~<¡dio.h
>

23 
	~<¡ršg.h
>

24 
	~<sigÇl.h
>

25 
	~<as£¹.h
>

31 
	$blockSigpe
()

33 
sig£t_t
 
mask
;

35 
	`sigem±y£t
(&
mask
);

36 
	`sigadd£t
(&
mask
, 
SIGPIPE
);

37 ià(
	`sig´ocmask
(
SIG_BLOCK
, &
mask
, 
NULL
) != 0)

38 
	`årštf
(
¡d”r
, "WARNING: SIGPIPE‚ot blocked\n");

39 
	}
}

44 
jobjeùA¼ay
 
	$ü—‹SŒšgA¼ay
(
JNIEnv
* 
’v
, * cÚ¡ 
¬gv
[], 
¬gc
)

46 
jşass
 
¡ršgCÏss
 = 
NULL
;

47 
jobjeùA¼ay
 
¡rA¼ay
 = 
NULL
;

48 
jobjeùA¼ay
 
»suÉ
 = 
NULL
;

49 
i
;

51 
¡ršgCÏss
 = 
’v
->
	`FšdCÏss
("java/lang/String");

52 ià(
’v
->
	`Exû±iÚCheck
()) {

53 
	`årštf
(
¡d”r
, "Gotƒxception while finding class String\n");

54 
ba
;

56 
	`as£¹
(
¡ršgCÏss
 !ğ
NULL
);

57 
¡rA¼ay
 = 
’v
->
	`NewObjeùA¼ay
(
¬gc
, 
¡ršgCÏss
, 
NULL
);

58 ià(
’v
->
	`Exû±iÚCheck
()) {

59 
	`årštf
(
¡d”r
, "Gotƒxception while creating String‡rray\n");

60 
ba
;

62 
	`as£¹
(
¡rA¼ay
 !ğ
NULL
);

64 
i
 = 0; i < 
¬gc
; i++) {

65 
j¡ršg
 
¬gSŒ
;

67 
¬gSŒ
 = 
’v
->
	`NewSŒšgUTF
(
¬gv
[
i
]);

68 ià(
’v
->
	`Exû±iÚCheck
()) {

69 
	`årštf
(
¡d”r
, "Gotƒxception while‡llocating Strings\n");

70 
ba
;

72 
	`as£¹
(
¬gSŒ
 !ğ
NULL
);

73 
’v
->
	`S‘ObjeùA¼ayEËm’t
(
¡rA¼ay
, 
i
, 
¬gSŒ
);

74 
’v
->
	`D–‘eLoÿlRef
(
¬gSŒ
);

78 
»suÉ
 = 
¡rA¼ay
;

79 
¡rA¼ay
 = 
NULL
;

81 
ba
:

82 
’v
->
	`D–‘eLoÿlRef
(
¡ršgCÏss
);

83 
’v
->
	`D–‘eLoÿlRef
(
¡rA¼ay
);

84  
»suÉ
;

85 
	}
}

92 
	$m‘hodIsPublic
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodId
)

94 cÚ¡ 
PUBLIC
 = 0x0001;

95 
jobjeù
 
»fM‘hod
 = 
NULL
;

96 
jşass
 
m‘hodCÏss
 = 
NULL
;

97 
jm‘hodID
 
g‘Modif›rsId
;

98 
modif›rs
;

99 
»suÉ
 = 
JNI_FALSE
;

101 
»fM‘hod
 = 
’v
->
	`ToReæeùedM‘hod
(
şazz
, 
m‘hodId
, 
JNI_FALSE
);

102 ià(
»fM‘hod
 =ğ
NULL
) {

103 
	`årštf
(
¡d”r
, "Dalvik VM unableo get„eflected method\n");

104 
ba
;

111 
m‘hodCÏss
 = 
’v
->
	`FšdCÏss
("java/lang/reflect/Method");

112 ià(
m‘hodCÏss
 =ğ
NULL
) {

113 
	`årštf
(
¡d”r
, "Dalvik VM unableo find class Method\n");

114 
ba
;

116 
g‘Modif›rsId
 = 
’v
->
	`G‘M‘hodID
(
m‘hodCÏss
,

118 ià(
g‘Modif›rsId
 =ğ
NULL
) {

119 
	`årštf
(
¡d”r
, "Dalvik VM unableo find„eflect.Method.getModifiers\n");

120 
ba
;

123 
modif›rs
 = 
’v
->
	`C®lIÁM‘hod
(
»fM‘hod
, 
g‘Modif›rsId
);

124 ià((
modif›rs
 & 
PUBLIC
) == 0) {

125 
	`årštf
(
¡d”r
, "Dalvik VM: main() is‚ot…ublic\n");

126 
ba
;

129 
»suÉ
 = 
JNI_TRUE
;

131 
ba
:

132 
’v
->
	`D–‘eLoÿlRef
(
»fM‘hod
);

133 
’v
->
	`D–‘eLoÿlRef
(
m‘hodCÏss
);

134  
»suÉ
;

135 
	}
}

141 
	$maš
(
¬gc
, * cÚ¡ 
¬gv
[])

143 
JavaVM
* 
vm
 = 
NULL
;

144 
JNIEnv
* 
’v
 = 
NULL
;

145 
JavaVMIn™Args
 
š™Args
;

146 
JavaVMO±iÚ
* 
İtiÚs
 = 
NULL
;

147 * 
¦ashCÏss
 = 
NULL
;

148 
İtiÚCouÁ
, 
curO±
, 
i
, 
¬gIdx
;

149 
ÃedExŒa
 = 
JNI_FALSE
;

150 
»suÉ
 = 1;

152 
	`£tvbuf
(
¡dout
, 
NULL
, 
_IONBF
, 0);

155 
¬gv
++;

156 
¬gc
--;

165 
İtiÚCouÁ
 = 
¬gc
;

167 
İtiÚs
 = (
JavaVMO±iÚ
*è
	`m®loc
((JavaVMO±iÚè* 
İtiÚCouÁ
);

168 
	`mem£t
(
İtiÚs
, 0, (
JavaVMO±iÚ
è* 
İtiÚCouÁ
);

176 
curO±
 = 
¬gIdx
 = 0;‡rgIdx < 
¬gc
;‡rgIdx++) {

177 ià(
¬gv
[
¬gIdx
][0] !ğ'-' && !
ÃedExŒa
)

179 
İtiÚs
[
curO±
++].
İtiÚSŒšg
 = 
	`¡rdup
(
¬gv
[
¬gIdx
]);

182 
ÃedExŒa
 = 
JNI_FALSE
;

183 ià(
	`¡rcmp
(
¬gv
[
¬gIdx
], "-classpath") == 0 ||

184 
	`¡rcmp
(
¬gv
[
¬gIdx
], "-cp") == 0)

187 
ÃedExŒa
 = 
JNI_TRUE
;

191 ià(
ÃedExŒa
) {

192 
	`årštf
(
¡d”r
, "Dalvik VM„equires value‡fter†ast option flag\n");

193 
ba
;

198 
	`as£¹
(
curO±
 <ğ
İtiÚCouÁ
);

200 
š™Args
.
v”siÚ
 = 
JNI_VERSION_1_4
;

201 
š™Args
.
İtiÚs
 = options;

202 
š™Args
.
nO±iÚs
 = 
curO±
;

203 
š™Args
.
ignÜeUÄecognized
 = 
JNI_FALSE
;

207 
	`blockSigpe
();

212 ià(
	`JNI_C»©eJavaVM
(&
vm
, &
’v
, &
š™Args
) < 0) {

213 
	`årštf
(
¡d”r
, "Dalvik VM init failed (check†og file)\n");

214 
ba
;

222 ià(
¬gIdx
 =ğ
¬gc
) {

223 
	`årštf
(
¡d”r
, "Dalvik VM„equires‡ class‚ame\n");

224 
ba
;

231 
jobjeùA¼ay
 
¡rA¼ay
;

232 
¡rA¼ay
 = 
	`ü—‹SŒšgA¼ay
(
’v
, &
¬gv
[
¬gIdx
+1], 
¬gc
-argIdx-1);

233 ià(
¡rA¼ay
 =ğ
NULL
)

234 
ba
;

239 
jşass
 
¡¬tCÏss
;

240 
jm‘hodID
 
¡¬tM‘h
;

241 * 
ı
;

244 
¦ashCÏss
 = 
	`¡rdup
(
¬gv
[
¬gIdx
]);

245 
ı
 = 
¦ashCÏss
; *cp != '\0'; cp++)

246 ià(*
ı
 == '.')

247 *
ı
 = '/';

249 
¡¬tCÏss
 = 
’v
->
	`FšdCÏss
(
¦ashCÏss
);

250 ià(
¡¬tCÏss
 =ğ
NULL
) {

251 
	`årštf
(
¡d”r
, "D®vik VM uÇbËØloÿ‹ cÏs '%s'\n", 
¦ashCÏss
);

252 
ba
;

255 
¡¬tM‘h
 = 
’v
->
	`G‘SticM‘hodID
(
¡¬tCÏss
,

257 ià(
¡¬tM‘h
 =ğ
NULL
) {

258 
	`årštf
(
¡d”r
, "Dalvik VM unableo find static main(String[]) in '%s'\n",

259 
¦ashCÏss
);

260 
ba
;

267 ià(!
	`m‘hodIsPublic
(
’v
, 
¡¬tCÏss
, 
¡¬tM‘h
))

268 
ba
;

273 
’v
->
	`C®lSticVoidM‘hod
(
¡¬tCÏss
, 
¡¬tM‘h
, 
¡rA¼ay
);

275 ià(!
’v
->
	`Exû±iÚCheck
())

276 
»suÉ
 = 0;

278 
ba
:

280 ià(
vm
 !ğ
NULL
) {

285 ià(
vm
->
	`D‘achCu¼’tTh»ad
(è!ğ
JNI_OK
) {

286 
	`årštf
(
¡d”r
, "Warning: unableo detach mainhread\n");

287 
»suÉ
 = 1;

290 ià(
vm
->
	`De¡royJavaVM
() != 0)

291 
	`årštf
(
¡d”r
, "Warning: Dalvik VM did‚ot shut down cleanly\n");

295 
i
 = 0; i < 
İtiÚCouÁ
; i++)

296 
	`ä“
((*è
İtiÚs
[
i
].
İtiÚSŒšg
);

297 
	`ä“
(
İtiÚs
);

298 
	`ä“
(
¦ashCÏss
);

300  
»suÉ
;

301 
	}
}

	@dexdump/DexDump.cpp

33 
	~"libdex/DexFe.h
"

35 
	~"libdex/CmdUts.h
"

36 
	~"libdex/DexC©ch.h
"

37 
	~"libdex/DexCÏss.h
"

38 
	~"libdex/DexDebugInfo.h
"

39 
	~"libdex/DexOpcodes.h
"

40 
	~"libdex/DexPrÙo.h
"

41 
	~"libdex/In¡rUts.h
"

42 
	~"libdex/SysUt.h
"

44 
	~<¡dlib.h
>

45 
	~<¡dio.h
>

46 
	~<fú.h
>

47 
	~<¡ršg.h
>

48 
	~<uni¡d.h
>

49 
	~<g‘İt.h
>

50 
	~<”ºo.h
>

51 
	~<as£¹.h
>

53 cÚ¡ * 
	ggProgName
 = "dexdump";

55 
	eOuutFÜm©
 {

56 
	mOUTPUT_PLAIN
 = 0,

57 
	mOUTPUT_XML
,

61 
	sO±iÚs
 {

62 
boŞ
 
	mchecksumOÆy
;

63 
boŞ
 
	mdi§s£mbË
;

64 
boŞ
 
	mshowFeH—d”s
;

65 
boŞ
 
	mshowSeùiÚH—d”s
;

66 
boŞ
 
	mignÜeBadChecksum
;

67 
boŞ
 
	mdumpRegi¡”M­s
;

68 
OuutFÜm©
 
	mouutFÜm©
;

69 cÚ¡ * 
	m‹mpFeName
;

70 
boŞ
 
	mexpÜtsOÆy
;

71 
boŞ
 
	mv”bo£
;

74 
O±iÚs
 
	ggO±iÚs
;

77 
	sF›ldM‘hodInfo
 {

78 cÚ¡ * 
	mşassDesütÜ
;

79 cÚ¡ * 
	mÇme
;

80 cÚ¡ * 
	msigÇtu»
;

86 
šlše
 
u2
 
	$g‘2LE
(cÚ¡* 
pSrc
)

88  
pSrc
[0] | (pSrc[1] << 8);

89 
	}
}

94 
šlše
 
u4
 
	$g‘4LE
(cÚ¡* 
pSrc
)

96  
pSrc
[0] | (pSrc[1] << 8) | (pSrc[2] << 16) | (pSrc[3] << 24);

97 
	}
}

103 cÚ¡ * 
	$´im™iveTy³Lab–
(
ty³Ch¬
)

105 
ty³Ch¬
) {

118 
	}
}

126 * 
	$desütÜToDÙ
(cÚ¡ * 
¡r
)

128 
rg‘L’
 = 
	`¡¾’
(
¡r
);

129 
off£t
 = 0;

130 
¬¿yD•th
 = 0;

131 * 
ÃwSŒ
;

134 
rg‘L’
 > 1 && 
¡r
[
off£t
] == '[') {

135 
off£t
++;

136 
rg‘L’
--;

138 
¬¿yD•th
 = 
off£t
;

140 ià(
rg‘L’
 == 1) {

142 
¡r
 = 
	`´im™iveTy³Lab–
(¡r[
off£t
]);

143 
off£t
 = 0;

144 
rg‘L’
 = 
	`¡¾’
(
¡r
);

147 ià(
rg‘L’
 >ğ2 && 
¡r
[
off£t
] == 'L' &&

148 
¡r
[
off£t
+
rg‘L’
-1] == ';')

150 
rg‘L’
 -= 2;

151 
off£t
++;

155 
ÃwSŒ
 = (*)
	`m®loc
(
rg‘L’
 + 
¬¿yD•th
 * 2 +1);

158 
i
;

159 
i
 = 0; i < 
rg‘L’
; i++) {

160 
ch
 = 
¡r
[
off£t
 + 
i
];

161 
ÃwSŒ
[
i
] = (
ch
 == '/' || ch == '$') ? '.' : ch;

165 
¬¿yD•th
-- > 0) {

166 
ÃwSŒ
[
i
++] = '[';

167 
ÃwSŒ
[
i
++] = ']';

169 
ÃwSŒ
[
i
] = '\0';

170 
	`as£¹
(
i
 =ğ
rg‘L’
 + 
¬¿yD•th
 * 2);

172  
ÃwSŒ
;

173 
	}
}

181 * 
	$desütÜCÏssToDÙ
(cÚ¡ * 
¡r
)

183 cÚ¡ * 
Ï¡SÏsh
;

184 * 
ÃwSŒ
;

185 * 
ı
;

188 
Ï¡SÏsh
 = 
	`¡¼chr
(
¡r
, '/');

189 ià(
Ï¡SÏsh
 =ğ
NULL
)

190 
Ï¡SÏsh
 = 
¡r
 + 1;

192 
Ï¡SÏsh
++;

194 
ÃwSŒ
 = 
	`¡rdup
(
Ï¡SÏsh
);

195 
ÃwSŒ
[
	`¡¾’
(
Ï¡SÏsh
)-1] = '\0';

196 
ı
 = 
ÃwSŒ
; *cp != '\0'; cp++) {

197 ià(*
ı
 == '$')

198 *
ı
 = '.';

201  
ÃwSŒ
;

202 
	}
}

207 cÚ¡ * 
	$quÙedBoŞ
(
boŞ
 
v®
)

209 ià(
v®
)

213 
	}
}

215 cÚ¡ * 
	$quÙedVisib™y
(
u4
 
acûssFÏgs
)

217 ià((
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

219 ià((
acûssFÏgs
 & 
ACC_PROTECTED
) != 0)

221 ià((
acûssFÏgs
 & 
ACC_PRIVATE
) != 0)

225 
	}
}

230 
	$couÁOÃs
(
u4
 
v®
)

232 
couÁ
 = 0;

234 
v®
 = val - ((val >> 1) & 0x55555555);

235 
v®
 = (val & 0x33333333) + ((val >> 2) & 0x33333333);

236 
couÁ
 = (((
v®
 + (val >> 4)) & 0x0F0F0F0F) * 0x01010101) >> 24;

238  
couÁ
;

239 
	}
}

244 
	eAcûssFÜ
 {

245 
	mkAcûssFÜCÏss
 = 0, 
	mkAcûssFÜM‘hod
 = 1, 
	mkAcûssFÜF›ld
 = 2,

246 
	mkAcûssFÜMAX


255 * 
	$ü—‹AcûssFÏgSŒ
(
u4
 
æags
, 
AcûssFÜ
 
fÜWh©
)

257 
	#NUM_FLAGS
 18

	)

258 cÚ¡ * 
kAcûssSŒšgs
[
kAcûssFÜMAX
][
NUM_FLAGS
] = {

323 cÚ¡ 
kLÚge¡
 = 21;

324 
i
, 
couÁ
;

325 * 
¡r
;

326 * 
ı
;

333 
couÁ
 = 
	`couÁOÃs
(
æags
);

334 
ı
 = 
¡r
 = (*è
	`m®loc
(
couÁ
 * (
kLÚge¡
+1) +1);

336 
i
 = 0; i < 
NUM_FLAGS
; i++) {

337 ià(
æags
 & 0x01) {

338 cÚ¡ * 
acûssSŒ
 = 
kAcûssSŒšgs
[
fÜWh©
][
i
];

339 
Ën
 = 
	`¡¾’
(
acûssSŒ
);

340 ià(
ı
 !ğ
¡r
)

341 *
ı
++ = ' ';

343 
	`memıy
(
ı
, 
acûssSŒ
, 
Ën
);

344 
ı
 +ğ
Ën
;

346 
æags
 >>= 1;

348 *
ı
 = '\0';

350  
¡r
;

351 
	}
}

361 
	$asciify
(* 
out
, cÚ¡ * 
d©a
, 
size_t
 
Ën
)

363 
Ën
--) {

364 ià(*
d©a
 < 0x20) {

366 *
d©a
) {

368 *
out
++ = '\\';

369 *
out
++ = '0';

372 *
out
++ = '\\';

373 *
out
++ = 'n';

376 *
out
++ = '.';

379 } ià(*
d©a
 >= 0x80) {

380 *
out
++ = '?';

382 *
out
++ = *
d©a
;

384 
d©a
++;

386 *
out
 = '\0';

387 
	}
}

392 
	$dumpFeH—d”
(cÚ¡ 
DexFe
* 
pDexFe
)

394 cÚ¡ 
DexO±H—d”
* 
pO±H—d”
 = 
pDexFe
->pOptHeader;

395 cÚ¡ 
DexH—d”
* 
pH—d”
 = 
pDexFe
->pHeader;

396 
§n™ized
[(
pH—d”
->
magic
)*2 +1];

398 
	`as£¹
((
pH—d”
->
magic
è=ğ(
pO±H—d”
->magic));

400 ià(
pO±H—d”
 !ğ
NULL
) {

401 
	`´štf
("Optimized DEX file header:\n");

403 
	`asciify
(
§n™ized
, 
pO±H—d”
->
magic
, (pOptHeader->magic));

404 
	`´štf
("magiø : '%s'\n", 
§n™ized
);

405 
	`´štf
("dex_offset : %d (0x%06x)\n",

406 
pO±H—d”
->
dexOff£t
,…OptHeader->dexOffset);

407 
	`´štf
("dex_Ëngth : %d\n", 
pO±H—d”
->
dexL’gth
);

408 
	`´štf
("deps_offset : %d (0x%06x)\n",

409 
pO±H—d”
->
d•sOff£t
,…OptHeader->depsOffset);

410 
	`´štf
("d•s_Ëngth : %d\n", 
pO±H—d”
->
d•sL’gth
);

411 
	`´štf
("opt_offset : %d (0x%06x)\n",

412 
pO±H—d”
->
İtOff£t
,…OptHeader->optOffset);

413 
	`´štf
("İt_Ëngth : %d\n", 
pO±H—d”
->
İtL’gth
);

414 
	`´štf
("æag  : %08x\n", 
pO±H—d”
->
æags
);

415 
	`´štf
("checksum : %08x\n", 
pO±H—d”
->
checksum
);

416 
	`´štf
("\n");

419 
	`´štf
("DEX file header:\n");

420 
	`asciify
(
§n™ized
, 
pH—d”
->
magic
, (pHeader->magic));

421 
	`´štf
("magiø : '%s'\n", 
§n™ized
);

422 
	`´štf
("checksum : %08x\n", 
pH—d”
->
checksum
);

423 
	`´štf
("signature : %02x%02x...%02x%02x\n",

424 
pH—d”
->
sigÇtu»
[0],…Header->signature[1],

425 
pH—d”
->
sigÇtu»
[
kSHA1Dige¡L’
-2],

426 
pH—d”
->
sigÇtu»
[
kSHA1Dige¡L’
-1]);

427 
	`´štf
("fe_siz : %d\n", 
pH—d”
->
feSize
);

428 
	`´štf
("h—d”_siz : %d\n", 
pH—d”
->
h—d”Size
);

429 
	`´štf
("lšk_siz : %d\n", 
pH—d”
->
lškSize
);

430 
	`´štf
("link_off : %d (0x%06x)\n",

431 
pH—d”
->
lškOff
,…Header->linkOff);

432 
	`´štf
("¡ršg_ids_siz : %d\n", 
pH—d”
->
¡ršgIdsSize
);

433 
	`´štf
("string_ids_off : %d (0x%06x)\n",

434 
pH—d”
->
¡ršgIdsOff
,…Header->stringIdsOff);

435 
	`´štf
("ty³_ids_siz : %d\n", 
pH—d”
->
ty³IdsSize
);

436 
	`´štf
("type_ids_off : %d (0x%06x)\n",

437 
pH—d”
->
ty³IdsOff
,…Header->typeIdsOff);

438 
	`´štf
("f›ld_ids_siz : %d\n", 
pH—d”
->
f›ldIdsSize
);

439 
	`´štf
("field_ids_off : %d (0x%06x)\n",

440 
pH—d”
->
f›ldIdsOff
,…Header->fieldIdsOff);

441 
	`´štf
("m‘hod_ids_siz : %d\n", 
pH—d”
->
m‘hodIdsSize
);

442 
	`´štf
("method_ids_off : %d (0x%06x)\n",

443 
pH—d”
->
m‘hodIdsOff
,…Header->methodIdsOff);

444 
	`´štf
("şass_defs_siz : %d\n", 
pH—d”
->
şassDefsSize
);

445 
	`´štf
("class_defs_off : %d (0x%06x)\n",

446 
pH—d”
->
şassDefsOff
,…Header->classDefsOff);

447 
	`´štf
("d©a_siz : %d\n", 
pH—d”
->
d©aSize
);

448 
	`´štf
("data_off : %d (0x%06x)\n",

449 
pH—d”
->
d©aOff
,…Header->dataOff);

450 
	`´štf
("\n");

451 
	}
}

456 
	$dumpO±DœeùÜy
(cÚ¡ 
DexFe
* 
pDexFe
)

458 cÚ¡ 
DexO±H—d”
* 
pO±H—d”
 = 
pDexFe
->pOptHeader;

459 ià(
pO±H—d”
 =ğ
NULL
)

462 
	`´štf
("OPT section contents:\n");

464 cÚ¡ 
u4
* 
pO±
 = (cÚ¡ u4*è((
u1
*è
pO±H—d”
 +…O±H—d”->
İtOff£t
);

466 ià(*
pO±
 == 0) {

467 
	`´štf
("(1.0 format, only class†ookupable is…resent)\n\n");

475 *
pO±
 !ğ
kDexChunkEnd
) {

476 cÚ¡ * 
v”bo£SŒ
;

478 
u4
 
size
 = *(
pO±
+1);

480 *
pO±
) {

481 
kDexChunkCÏssLookup
:

482 
v”bo£SŒ
 = "class†ookup hashable";

484 
kDexChunkRegi¡”M­s
:

485 
v”bo£SŒ
 = "register maps";

488 
v”bo£SŒ
 = "(unknown chunkype)";

492 
	`´štf
("Chunk %08x (%c%c%c%cè- % (%d by‹s)\n", *
pO±
,

493 *
pO±
 >> 24, ()(*pOpt >> 16), ()(*pOpt >> 8), ()*pOpt,

494 
v”bo£SŒ
, 
size
);

496 
size
 = (size + 8 + 7) & ~7;

497 
pO±
 +ğ
size
 / (
u4
);

499 
	`´štf
("\n");

500 
	}
}

505 
	$dumpCÏssDef
(
DexFe
* 
pDexFe
, 
idx
)

507 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

508 cÚ¡ 
u1
* 
pEncodedD©a
;

509 
DexCÏssD©a
* 
pCÏssD©a
;

511 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

512 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

513 
pCÏssD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
pEncodedD©a
, 
NULL
);

515 ià(
pCÏssD©a
 =ğ
NULL
) {

516 
	`årštf
(
¡d”r
, "Trouble„eading class data\n");

520 
	`´štf
("CÏs #%d h—d”:\n", 
idx
);

521 
	`´štf
("şass_idx : %d\n", 
pCÏssDef
->
şassIdx
);

522 
	`´štf
("access_flags : %d (0x%04x)\n",

523 
pCÏssDef
->
acûssFÏgs
,…ClassDef->accessFlags);

524 
	`´štf
("su³rşass_idx : %d\n", 
pCÏssDef
->
su³rşassIdx
);

525 
	`´štf
("interfaces_off : %d (0x%06x)\n",

526 
pCÏssDef
->
š‹rçûsOff
,…ClassDef->interfacesOff);

527 
	`´štf
("sourû_fe_idx : %d\n", 
pCÏssDef
->
sourûFeIdx
);

528 
	`´štf
("annotations_off : %d (0x%06x)\n",

529 
pCÏssDef
->
ªnÙ©iÚsOff
,…ClassDef->annotationsOff);

530 
	`´štf
("class_data_off : %d (0x%06x)\n",

531 
pCÏssDef
->
şassD©aOff
,…ClassDef->classDataOff);

532 
	`´štf
("¡©ic_f›lds_siz : %d\n", 
pCÏssD©a
->
h—d”
.
¡©icF›ldsSize
);

533 
	`´štf
("instance_fields_size: %d\n",

534 
pCÏssD©a
->
h—d”
.
š¡ªûF›ldsSize
);

535 
	`´štf
("dœeù_m‘hods_siz: %d\n", 
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
);

536 
	`´štf
("virtual_methods_size: %d\n",

537 
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
);

538 
	`´štf
("\n");

540 
	`ä“
(
pCÏssD©a
);

541 
	}
}

546 
	$dumpIÁ”çû
(cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexTy³I‹m
* 
pTy³I‹m
,

547 
i
)

549 cÚ¡ * 
š‹rçûName
 =

550 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pTy³I‹m
->
ty³Idx
);

552 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
) {

553 
	`´štf
(" #%d : '%s'\n", 
i
, 
š‹rçûName
);

555 * 
dÙ‹d
 = 
	`desütÜToDÙ
(
š‹rçûName
);

556 
	`´štf
("<im¶em’t Çme=\"%s\">\n</im¶em’ts>\n", 
dÙ‹d
);

557 
	`ä“
(
dÙ‹d
);

559 
	}
}

564 
	$dumpC©ches
(
DexFe
* 
pDexFe
, cÚ¡ 
DexCode
* 
pCode
)

566 
u4
 
Œ›sSize
 = 
pCode
->triesSize;

568 ià(
Œ›sSize
 == 0) {

569 
	`´štf
(" catches : (none)\n");

573 
	`´štf
(" c©che  : %d\n", 
Œ›sSize
);

575 cÚ¡ 
DexTry
* 
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

576 
u4
 
i
;

578 
i
 = 0; i < 
Œ›sSize
; i++) {

579 cÚ¡ 
DexTry
* 
pTry
 = &
pTr›s
[
i
];

580 
u4
 
¡¬t
 = 
pTry
->
¡¬tAddr
;

581 
u4
 
’d
 = 
¡¬t
 + 
pTry
->
š¢CouÁ
;

582 
DexC©chI‹¿tÜ
 
™”©Ü
;

584 
	`´štf
(" 0x%04x - 0x%04x\n", 
¡¬t
, 
’d
);

586 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
pTry
->
hªdËrOff
);

589 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

590 cÚ¡ * 
desütÜ
;

592 ià(
hªdËr
 =ğ
NULL
) {

596 
desütÜ
 = (
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
) ? "<any>" :

597 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
hªdËr
->
ty³Idx
);

599 
	`´štf
(" % -> 0x%04x\n", 
desütÜ
,

600 
hªdËr
->
add»ss
);

603 
	}
}

605 
	$dumpPos™iÚsCb
(*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

607 
	`´štf
(" 0x%04x†še=%d\n", 
add»ss
, 
lšeNum
);

609 
	}
}

614 
	$dumpPos™iÚs
(
DexFe
* 
pDexFe
, cÚ¡ 
DexCode
* 
pCode
,

615 cÚ¡ 
DexM‘hod
 *
pDexM‘hod
)

617 
	`´štf
("…ositions : \n");

618 cÚ¡ 
DexM‘hodId
 *
pM‘hodId


619 ğ
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

620 cÚ¡ *
şassDesütÜ


621 ğ
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

623 
	`dexDecodeDebugInfo
(
pDexFe
, 
pCode
, 
şassDesütÜ
, 
pM‘hodId
->
´ÙoIdx
,

624 
pDexM‘hod
->
acûssFÏgs
, 
dumpPos™iÚsCb
, 
NULL
, NULL);

625 
	}
}

627 
	$dumpLoÿlsCb
(*
úxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
,

628 
u4
 
’dAdd»ss
, cÚ¡ *
Çme
, cÚ¡ *
desütÜ
,

629 cÚ¡ *
sigÇtu»
)

631 
	`´štf
(" 0x%04x - 0x%04x„eg=%d %s %s %s\n",

632 
¡¬tAdd»ss
, 
’dAdd»ss
, 
»g
, 
Çme
, 
desütÜ
,

633 
sigÇtu»
);

634 
	}
}

639 
	$dumpLoÿls
(
DexFe
* 
pDexFe
, cÚ¡ 
DexCode
* 
pCode
,

640 cÚ¡ 
DexM‘hod
 *
pDexM‘hod
)

642 
	`´štf
("†ocals : \n");

644 cÚ¡ 
DexM‘hodId
 *
pM‘hodId


645 ğ
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

646 cÚ¡ *
şassDesütÜ


647 ğ
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

649 
	`dexDecodeDebugInfo
(
pDexFe
, 
pCode
, 
şassDesütÜ
, 
pM‘hodId
->
´ÙoIdx
,

650 
pDexM‘hod
->
acûssFÏgs
, 
NULL
, 
dumpLoÿlsCb
, NULL);

651 
	}
}

656 
boŞ
 
	$g‘M‘hodInfo
(
DexFe
* 
pDexFe
, 
u4
 
m‘hodIdx
, 
F›ldM‘hodInfo
* 
pM‘hInfo
)

658 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

660 ià(
m‘hodIdx
 >ğ
pDexFe
->
pH—d”
->
m‘hodIdsSize
)

661  
çl£
;

663 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
m‘hodIdx
);

664 
pM‘hInfo
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

665 
pM‘hInfo
->
sigÇtu»
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

667 
pM‘hInfo
->
şassDesütÜ
 =

668 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

669  
Œue
;

670 
	}
}

675 
boŞ
 
	$g‘F›ldInfo
(
DexFe
* 
pDexFe
, 
u4
 
f›ldIdx
, 
F›ldM‘hodInfo
* 
pF›ldInfo
)

677 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

679 ià(
f›ldIdx
 >ğ
pDexFe
->
pH—d”
->
f›ldIdsSize
)

680  
çl£
;

682 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
f›ldIdx
);

683 
pF›ldInfo
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

684 
pF›ldInfo
->
sigÇtu»
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

685 
pF›ldInfo
->
şassDesütÜ
 =

686 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
);

687  
Œue
;

688 
	}
}

694 cÚ¡ * 
	$g‘CÏssDesütÜ
(
DexFe
* 
pDexFe
, 
u4
 
şassIdx
)

696  
	`dexSŒšgByTy³Idx
(
pDexFe
, 
şassIdx
);

697 
	}
}

708 * 
	$šdexSŒšg
(
DexFe
* 
pDexFe
,

709 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, * 
buf
, 
size_t
 
bufSize
)

711 
outSize
;

712 
u4
 
šdex
;

713 
u4
 
width
;

716 
	`dexG‘FÜm©FromOpcode
(
pDecIn¢
->
İcode
)) {

717 
kFmt20bc
:

718 
kFmt21c
:

719 
kFmt35c
:

720 
kFmt35ms
:

721 
kFmt3rc
:

722 
kFmt3rms
:

723 
kFmt35mi
:

724 
kFmt3rmi
:

725 
šdex
 = 
pDecIn¢
->
vB
;

726 
width
 = 4;

728 
kFmt31c
:

729 
šdex
 = 
pDecIn¢
->
vB
;

730 
width
 = 8;

732 
kFmt22c
:

733 
kFmt22cs
:

734 
šdex
 = 
pDecIn¢
->
vC
;

735 
width
 = 4;

738 
šdex
 = 0;

739 
width
 = 4;

743 
pDecIn¢
->
šdexTy³
) {

744 
kIndexUnknown
:

749 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<unknown-index>");

751 
kIndexNÚe
:

756 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<no-index>");

758 
kIndexV¬›s
:

763 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<index-varies> //hing@%0*x",

764 
width
, 
šdex
);

766 
kIndexTy³Ref
:

767 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "%s //ype@%0*x",

768 
	`g‘CÏssDesütÜ
(
pDexFe
, 
šdex
), 
width
, index);

770 
kIndexSŒšgRef
:

771 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "\"%s\" // string@%0*x",

772 
	`dexSŒšgById
(
pDexFe
, 
šdex
), 
width
, index);

774 
kIndexM‘hodRef
:

776 
F›ldM‘hodInfo
 
m‘hInfo
;

777 ià(
	`g‘M‘hodInfo
(
pDexFe
, 
šdex
, &
m‘hInfo
)) {

778 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "%s.%s:%s // method@%0*x",

779 
m‘hInfo
.
şassDesütÜ
, m‘hInfo.
Çme
,

780 
m‘hInfo
.
sigÇtu»
, 
width
, 
šdex
);

782 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<method?> // method@%0*x",

783 
width
, 
šdex
);

787 
kIndexF›ldRef
:

789 
F›ldM‘hodInfo
 
f›ldInfo
;

790 ià(
	`g‘F›ldInfo
(
pDexFe
, 
šdex
, &
f›ldInfo
)) {

791 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "%s.%s:%s // field@%0*x",

792 
f›ldInfo
.
şassDesütÜ
, f›ldInfo.
Çme
,

793 
f›ldInfo
.
sigÇtu»
, 
width
, 
šdex
);

795 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<field?> // field@%0*x",

796 
width
, 
šdex
);

800 
kIndexIÆšeM‘hod
:

801 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "[%0*x] // inline #%0*x",

802 
width
, 
šdex
, width, index);

804 
kIndexVbËOff£t
:

805 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "[%0*x] // vtable #%0*x",

806 
width
, 
šdex
, width, index);

808 
kIndexF›ldOff£t
:

809 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "[obj+%0*x]", 
width
, 
šdex
);

812 
outSize
 = 
	`¢´štf
(
buf
, 
bufSize
, "<?>");

816 ià(
outSize
 >ğ(è
bufSize
) {

822 
outSize
++;

823 
buf
 = (*)
	`m®loc
(
outSize
);

824 ià(
buf
 =ğ
NULL
) {

825  
NULL
;

827  
	`šdexSŒšg
(
pDexFe
, 
pDecIn¢
, 
buf
, 
outSize
);

829  
buf
;

831 
	}
}

836 
	$dumpIn¡ruùiÚ
(
DexFe
* 
pDexFe
, cÚ¡ 
DexCode
* 
pCode
, 
š¢Idx
,

837 
š¢Width
, cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
)

839 
šdexBufCh¬s
[200];

840 *
šdexBuf
 = 
šdexBufCh¬s
;

841 cÚ¡ 
u2
* 
š¢s
 = 
pCode
->insns;

842 
i
;

844 
	`´štf
("%06x:", ((
u1
*)
š¢s
 - 
pDexFe
->
ba£Addr
è+ 
š¢Idx
*2);

845 
i
 = 0; i < 8; i++) {

846 ià(
i
 < 
š¢Width
) {

847 ià(
i
 == 7) {

848 
	`´štf
(" ... ");

851 cÚ¡ 
u1
* 
by‹PŒ
 = (cÚ¡ u1*è&
š¢s
[
š¢Idx
+
i
];

852 
	`´štf
(" %02x%02x", 
by‹PŒ
[0], bytePtr[1]);

855 
	`åuts
(" ", 
¡dout
);

859 ià(
pDecIn¢
->
İcode
 =ğ
OP_NOP
) {

860 
u2
 
š¡r
 = 
	`g‘2LE
((cÚ¡ 
u1
*è&
š¢s
[
š¢Idx
]);

861 ià(
š¡r
 =ğ
kPackedSw™chSigÇtu»
) {

862 
	`´štf
("|%04x:…acked-switch-data (%d units)",

863 
š¢Idx
, 
š¢Width
);

864 } ià(
š¡r
 =ğ
kS·r£Sw™chSigÇtu»
) {

865 
	`´štf
("|%04x: sparse-switch-data (%d units)",

866 
š¢Idx
, 
š¢Width
);

867 } ià(
š¡r
 =ğ
kA¼ayD©aSigÇtu»
) {

868 
	`´štf
("|%04x:‡rray-data (%d units)",

869 
š¢Idx
, 
š¢Width
);

871 
	`´štf
("|%04x:‚İ // s·ûr", 
š¢Idx
);

874 
	`´štf
("|%04x: %s", 
š¢Idx
, 
	`dexG‘OpcodeName
(
pDecIn¢
->
İcode
));

877 ià(
pDecIn¢
->
šdexTy³
 !ğ
kIndexNÚe
) {

878 
šdexBuf
 = 
	`šdexSŒšg
(
pDexFe
, 
pDecIn¢
,

879 
šdexBufCh¬s
, (indexBufChars));

882 
	`dexG‘FÜm©FromOpcode
(
pDecIn¢
->
İcode
)) {

883 
kFmt10x
:

885 
kFmt12x
:

886 
	`´štf
(" v%d, v%d", 
pDecIn¢
->
vA
,…DecIn¢->
vB
);

888 
kFmt11n
:

889 
	`´štf
(" v%d, #int %d // #%x",

890 
pDecIn¢
->
vA
, (
s4
íDecIn¢->
vB
, (
u1
)pDecInsn->vB);

892 
kFmt11x
:

893 
	`´štf
(" v%d", 
pDecIn¢
->
vA
);

895 
kFmt10t
:

896 
kFmt20t
:

898 
s4
 
rg
 = (s4è
pDecIn¢
->
vA
;

899 
	`´štf
(" %04x // %c%04x",

900 
š¢Idx
 + 
rg
,

901 (
rg
 < 0) ? '-' : '+',

902 (
rg
 < 0) ? -targ :arg);

905 
kFmt22x
:

906 
	`´štf
(" v%d, v%d", 
pDecIn¢
->
vA
,…DecIn¢->
vB
);

908 
kFmt21t
:

910 
s4
 
rg
 = (s4è
pDecIn¢
->
vB
;

911 
	`´štf
(" v%d, %04x // %c%04x", 
pDecIn¢
->
vA
,

912 
š¢Idx
 + 
rg
,

913 (
rg
 < 0) ? '-' : '+',

914 (
rg
 < 0) ? -targ :arg);

917 
kFmt21s
:

918 
	`´štf
(" v%d, #int %d // #%x",

919 
pDecIn¢
->
vA
, (
s4
íDecIn¢->
vB
, (
u2
)pDecInsn->vB);

921 
kFmt21h
:

923 ià(
pDecIn¢
->
İcode
 =ğ
OP_CONST_HIGH16
) {

924 
s4
 
v®ue
 = 
pDecIn¢
->
vB
 << 16;

925 
	`´štf
(" v%d, #int %d // #%x",

926 
pDecIn¢
->
vA
, 
v®ue
, (
u2
íDecIn¢->
vB
);

928 
s8
 
v®ue
 = ((s8è
pDecIn¢
->
vB
) << 48;

929 
	`´štf
(" v%d, #long %lld // #%x",

930 
pDecIn¢
->
vA
, 
v®ue
, (
u2
íDecIn¢->
vB
);

933 
kFmt21c
:

934 
kFmt31c
:

935 
	`´štf
(" v%d, %s", 
pDecIn¢
->
vA
, 
šdexBuf
);

937 
kFmt23x
:

938 
	`´štf
(" v%d, v%d, v%d", 
pDecIn¢
->
vA
,…DecIn¢->
vB
,…DecIn¢->
vC
);

940 
kFmt22b
:

941 
	`´štf
(" v%d, v%d, #int %d // #%02x",

942 
pDecIn¢
->
vA
,…DecIn¢->
vB
, (
s4
íDecIn¢->
vC
, (
u1
)pDecInsn->vC);

944 
kFmt22t
:

946 
s4
 
rg
 = (s4è
pDecIn¢
->
vC
;

947 
	`´štf
(" v%d, v%d, %04x // %c%04x", 
pDecIn¢
->
vA
,…DecIn¢->
vB
,

948 
š¢Idx
 + 
rg
,

949 (
rg
 < 0) ? '-' : '+',

950 (
rg
 < 0) ? -targ :arg);

953 
kFmt22s
:

954 
	`´štf
(" v%d, v%d, #int %d // #%04x",

955 
pDecIn¢
->
vA
,…DecIn¢->
vB
, (
s4
íDecIn¢->
vC
, (
u2
)pDecInsn->vC);

957 
kFmt22c
:

958 
kFmt22cs
:

959 
	`´štf
(" v%d, v%d, %s", 
pDecIn¢
->
vA
,…DecIn¢->
vB
, 
šdexBuf
);

961 
kFmt30t
:

962 
	`´štf
(" #%08x", 
pDecIn¢
->
vA
);

964 
kFmt31i
:

968 
f
;

969 
u4
 
i
;

970 } 
cÚv
;

971 
cÚv
.
i
 = 
pDecIn¢
->
vB
;

972 
	`´štf
(" v%d, #float %f // #%08x",

973 
pDecIn¢
->
vA
, 
cÚv
.
f
,…DecIn¢->
vB
);

976 
kFmt31t
:

977 
	`´štf
(" v%d, %08x // +%08x",

978 
pDecIn¢
->
vA
, 
š¢Idx
 +…DecIn¢->
vB
,…DecInsn->vB);

980 
kFmt32x
:

981 
	`´štf
(" v%d, v%d", 
pDecIn¢
->
vA
,…DecIn¢->
vB
);

983 
kFmt35c
:

984 
kFmt35ms
:

985 
kFmt35mi
:

987 
	`åuts
(" {", 
¡dout
);

988 
i
 = 0; i < (è
pDecIn¢
->
vA
; i++) {

989 ià(
i
 == 0)

990 
	`´štf
("v%d", 
pDecIn¢
->
¬g
[
i
]);

992 
	`´štf
(", v%d", 
pDecIn¢
->
¬g
[
i
]);

994 
	`´štf
("}, %s", 
šdexBuf
);

997 
kFmt3rc
:

998 
kFmt3rms
:

999 
kFmt3rmi
:

1005 
	`åuts
(" {", 
¡dout
);

1006 
i
 = 0; i < (è
pDecIn¢
->
vA
; i++) {

1007 ià(
i
 == 0)

1008 
	`´štf
("v%d", 
pDecIn¢
->
vC
 + 
i
);

1010 
	`´štf
(", v%d", 
pDecIn¢
->
vC
 + 
i
);

1012 
	`´štf
("}, %s", 
šdexBuf
);

1015 
kFmt51l
:

1019 
d
;

1020 
u8
 
j
;

1021 } 
cÚv
;

1022 
cÚv
.
j
 = 
pDecIn¢
->
vB_wide
;

1023 
	`´štf
(" v%d, #double %f // #%016llx",

1024 
pDecIn¢
->
vA
, 
cÚv
.
d
,…DecIn¢->
vB_wide
);

1027 
kFmt00x
:

1030 
	`´štf
(" ???");

1034 
	`putch¬
('\n');

1036 ià(
šdexBuf
 !ğ
šdexBufCh¬s
) {

1037 
	`ä“
(
šdexBuf
);

1039 
	}
}

1044 
	$dumpBy‹codes
(
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
)

1046 cÚ¡ 
DexCode
* 
pCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

1047 cÚ¡ 
u2
* 
š¢s
;

1048 
š¢Idx
;

1049 
F›ldM‘hodInfo
 
m‘hInfo
;

1050 
¡¬tAddr
;

1051 * 
şassName
 = 
NULL
;

1053 
	`as£¹
(
pCode
->
š¢sSize
 > 0);

1054 
š¢s
 = 
pCode
->insns;

1056 
	`g‘M‘hodInfo
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
, &
m‘hInfo
);

1057 
¡¬tAddr
 = ((
u1
*)
pCode
 - 
pDexFe
->
ba£Addr
);

1058 
şassName
 = 
	`desütÜToDÙ
(
m‘hInfo
.
şassDesütÜ
);

1060 
	`´štf
("%06x: |[%06x] %s.%s:%s\n",

1061 
¡¬tAddr
, startAddr,

1062 
şassName
, 
m‘hInfo
.
Çme
, m‘hInfo.
sigÇtu»
);

1064 
š¢Idx
 = 0;

1065 
š¢Idx
 < (è
pCode
->
š¢sSize
) {

1066 
š¢Width
;

1067 
DecodedIn¡ruùiÚ
 
decIn¢
;

1068 
u2
 
š¡r
;

1078 
š¡r
 = 
	`g‘2LE
((cÚ¡ 
u1
*)
š¢s
);

1079 ià(
š¡r
 =ğ
kPackedSw™chSigÇtu»
) {

1080 
š¢Width
 = 4 + 
	`g‘2LE
((cÚ¡ 
u1
*)(
š¢s
+1)) * 2;

1081 } ià(
š¡r
 =ğ
kS·r£Sw™chSigÇtu»
) {

1082 
š¢Width
 = 2 + 
	`g‘2LE
((cÚ¡ 
u1
*)(
š¢s
+1)) * 4;

1083 } ià(
š¡r
 =ğ
kA¼ayD©aSigÇtu»
) {

1084 
width
 = 
	`g‘2LE
((cÚ¡ 
u1
*)(
š¢s
+1));

1085 
size
 = 
	`g‘2LE
((cÚ¡ 
u1
*)(
š¢s
+2)) |

1086 (
	`g‘2LE
((cÚ¡ 
u1
*)(
š¢s
+3))<<16);

1088 
š¢Width
 = 4 + ((
size
 * 
width
) + 1) / 2;

1090 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(
š¡r
);

1091 
š¢Width
 = 
	`dexG‘WidthFromOpcode
(
İcode
);

1092 ià(
š¢Width
 == 0) {

1093 
	`årštf
(
¡d”r
,

1094 "GLITCH: z”o-width in¡ruùiÚ‡ˆidx=0x%04x\n", 
š¢Idx
);

1099 
	`dexDecodeIn¡ruùiÚ
(
š¢s
, &
decIn¢
);

1100 
	`dumpIn¡ruùiÚ
(
pDexFe
, 
pCode
, 
š¢Idx
, 
š¢Width
, &
decIn¢
);

1102 
š¢s
 +ğ
š¢Width
;

1103 
š¢Idx
 +ğ
š¢Width
;

1106 
	`ä“
(
şassName
);

1107 
	}
}

1112 
	$dumpCode
(
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
)

1114 cÚ¡ 
DexCode
* 
pCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

1116 
	`´štf
("„egi¡”  : %d\n", 
pCode
->
»gi¡”sSize
);

1117 
	`´štf
(" in  : %d\n", 
pCode
->
šsSize
);

1118 
	`´štf
(" out  : %d\n", 
pCode
->
outsSize
);

1119 
	`´štf
(" in¢ siz : %d 16-b™ codun™s\n", 
pCode
->
š¢sSize
);

1121 ià(
gO±iÚs
.
di§s£mbË
)

1122 
	`dumpBy‹codes
(
pDexFe
, 
pDexM‘hod
);

1124 
	`dumpC©ches
(
pDexFe
, 
pCode
);

1126 
	`dumpPos™iÚs
(
pDexFe
, 
pCode
, 
pDexM‘hod
);

1127 
	`dumpLoÿls
(
pDexFe
, 
pCode
, 
pDexM‘hod
);

1128 
	}
}

1133 
	$dumpM‘hod
(
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
, 
i
)

1135 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

1136 cÚ¡ * 
backDesütÜ
;

1137 cÚ¡ * 
Çme
;

1138 * 
ty³DesütÜ
 = 
NULL
;

1139 * 
acûssSŒ
 = 
NULL
;

1141 ià(
gO±iÚs
.
expÜtsOÆy
 &&

1142 (
pDexM‘hod
->
acûssFÏgs
 & (
ACC_PUBLIC
 | 
ACC_PROTECTED
)) == 0)

1147 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

1148 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1149 
ty³DesütÜ
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

1151 
backDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

1153 
acûssSŒ
 = 
	`ü—‹AcûssFÏgSŒ
(
pDexM‘hod
->
acûssFÏgs
,

1154 
kAcûssFÜM‘hod
);

1156 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
) {

1157 
	`´štf
(" #%d : (š %s)\n", 
i
, 
backDesütÜ
);

1158 
	`´štf
("‚am : '%s'\n", 
Çme
);

1159 
	`´štf
("y³ : '%s'\n", 
ty³DesütÜ
);

1160 
	`´štf
("‡ccess : 0x%04x (%s)\n",

1161 
pDexM‘hod
->
acûssFÏgs
, 
acûssSŒ
);

1163 ià(
pDexM‘hod
->
codeOff
 == 0) {

1164 
	`´štf
(" code : (none)\n");

1166 
	`´štf
(" code -\n");

1167 
	`dumpCode
(
pDexFe
, 
pDexM‘hod
);

1170 ià(
gO±iÚs
.
di§s£mbË
)

1171 
	`putch¬
('\n');

1172 } ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
) {

1173 
boŞ
 
cÚ¡ruùÜ
 = (
Çme
[0] == '<');

1175 ià(
cÚ¡ruùÜ
) {

1176 * 
tmp
;

1178 
tmp
 = 
	`desütÜCÏssToDÙ
(
backDesütÜ
);

1179 
	`´štf
("<cÚ¡ruùÜ‚ame=\"%s\"\n", 
tmp
);

1180 
	`ä“
(
tmp
);

1182 
tmp
 = 
	`desütÜToDÙ
(
backDesütÜ
);

1183 
	`´štf
("y³=\"%s\"\n", 
tmp
);

1184 
	`ä“
(
tmp
);

1186 
	`´štf
("<m‘hod‚ame=\"%s\"\n", 
Çme
);

1188 cÚ¡ * 
»tuºTy³
 = 
	`¡¼chr
(
ty³DesütÜ
, ')');

1189 ià(
»tuºTy³
 =ğ
NULL
) {

1190 
	`årštf
(
¡d”r
, "bad methodype descriptor '%s'\n",

1191 
ty³DesütÜ
);

1192 
ba
;

1195 * 
tmp
 = 
	`desütÜToDÙ
(
»tuºTy³
+1);

1196 
	`´štf
("„‘uº=\"%s\"\n", 
tmp
);

1197 
	`ä“
(
tmp
);

1199 
	`´štf
("‡bstract=%s\n",

1200 
	`quÙedBoŞ
((
pDexM‘hod
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0));

1201 
	`´štf
("‚ative=%s\n",

1202 
	`quÙedBoŞ
((
pDexM‘hod
->
acûssFÏgs
 & 
ACC_NATIVE
) != 0));

1204 
boŞ
 
isSync
 =

1205 (
pDexM‘hod
->
acûssFÏgs
 & 
ACC_SYNCHRONIZED
) != 0 ||

1206 (
pDexM‘hod
->
acûssFÏgs
 & 
ACC_DECLARED_SYNCHRONIZED
) != 0;

1207 
	`´štf
(" synchrÚized=%s\n", 
	`quÙedBoŞ
(
isSync
));

1210 
	`´štf
(" static=%s\n",

1211 
	`quÙedBoŞ
((
pDexM‘hod
->
acûssFÏgs
 & 
ACC_STATIC
) != 0));

1212 
	`´štf
(" final=%s\n",

1213 
	`quÙedBoŞ
((
pDexM‘hod
->
acûssFÏgs
 & 
ACC_FINAL
) != 0));

1215 
	`´štf
(" visibility=%s\n",

1216 
	`quÙedVisib™y
(
pDexM‘hod
->
acûssFÏgs
));

1218 
	`´štf
(">\n");

1223 ià(
ty³DesütÜ
[0] != '(') {

1224 
	`årštf
(
¡d”r
, "ERROR: bad desütÜ '%s'\n", 
ty³DesütÜ
);

1225 
ba
;

1228 
tmpBuf
[
	`¡¾’
(
ty³DesütÜ
)+1];

1229 
¬gNum
 = 0;

1231 cÚ¡ * 
ba£
 = 
ty³DesütÜ
+1;

1233 *
ba£
 != ')') {

1234 * 
ı
 = 
tmpBuf
;

1236 *
ba£
 == '[')

1237 *
ı
++ = *
ba£
++;

1239 ià(*
ba£
 == 'L') {

1242 *
ı
 = *
ba£
++;

1243 } *
ı
++ != ';');

1246 ià(
	`¡rchr
("ZBCSIFJD", *
ba£
è=ğ
NULL
) {

1247 
	`årštf
(
¡d”r
, "ERROR: bad m‘hod sigÇtu» '%s'\n", 
ba£
);

1248 
ba
;

1250 *
ı
++ = *
ba£
++;

1254 *
ı
++ = '\0';

1256 * 
tmp
 = 
	`desütÜToDÙ
(
tmpBuf
);

1257 
	`´štf
("<parameter‚ame=\"arg%d\"ype=\"%s\">\n</parameter>\n",

1258 
¬gNum
++, 
tmp
);

1259 
	`ä“
(
tmp
);

1262 ià(
cÚ¡ruùÜ
)

1263 
	`´štf
("</constructor>\n");

1265 
	`´štf
("</method>\n");

1268 
ba
:

1269 
	`ä“
(
ty³DesütÜ
);

1270 
	`ä“
(
acûssSŒ
);

1271 
	}
}

1276 
	$dumpSF›ld
(cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexF›ld
* 
pSF›ld
, 
i
)

1278 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

1279 cÚ¡ * 
backDesütÜ
;

1280 cÚ¡ * 
Çme
;

1281 cÚ¡ * 
ty³DesütÜ
;

1282 * 
acûssSŒ
;

1284 ià(
gO±iÚs
.
expÜtsOÆy
 &&

1285 (
pSF›ld
->
acûssFÏgs
 & (
ACC_PUBLIC
 | 
ACC_PROTECTED
)) == 0)

1290 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
pSF›ld
->
f›ldIdx
);

1291 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

1292 
ty³DesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

1293 
backDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
);

1295 
acûssSŒ
 = 
	`ü—‹AcûssFÏgSŒ
(
pSF›ld
->
acûssFÏgs
, 
kAcûssFÜF›ld
);

1297 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
) {

1298 
	`´štf
(" #%d : (š %s)\n", 
i
, 
backDesütÜ
);

1299 
	`´štf
("‚am : '%s'\n", 
Çme
);

1300 
	`´štf
("y³ : '%s'\n", 
ty³DesütÜ
);

1301 
	`´štf
("‡ccess : 0x%04x (%s)\n",

1302 
pSF›ld
->
acûssFÏgs
, 
acûssSŒ
);

1303 } ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
) {

1304 * 
tmp
;

1306 
	`´štf
("<f›ld‚ame=\"%s\"\n", 
Çme
);

1308 
tmp
 = 
	`desütÜToDÙ
(
ty³DesütÜ
);

1309 
	`´štf
("y³=\"%s\"\n", 
tmp
);

1310 
	`ä“
(
tmp
);

1312 
	`´štf
("ransient=%s\n",

1313 
	`quÙedBoŞ
((
pSF›ld
->
acûssFÏgs
 & 
ACC_TRANSIENT
) != 0));

1314 
	`´štf
(" volatile=%s\n",

1315 
	`quÙedBoŞ
((
pSF›ld
->
acûssFÏgs
 & 
ACC_VOLATILE
) != 0));

1317 
	`´štf
(" static=%s\n",

1318 
	`quÙedBoŞ
((
pSF›ld
->
acûssFÏgs
 & 
ACC_STATIC
) != 0));

1319 
	`´štf
(" final=%s\n",

1320 
	`quÙedBoŞ
((
pSF›ld
->
acûssFÏgs
 & 
ACC_FINAL
) != 0));

1322 
	`´štf
(" visibility=%s\n",

1323 
	`quÙedVisib™y
(
pSF›ld
->
acûssFÏgs
));

1324 
	`´štf
(">\n</field>\n");

1327 
	`ä“
(
acûssSŒ
);

1328 
	}
}

1333 
	$dumpIF›ld
(cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexF›ld
* 
pIF›ld
, 
i
)

1335 
	`dumpSF›ld
(
pDexFe
, 
pIF›ld
, 
i
);

1336 
	}
}

1346 
	$dumpCÏss
(
DexFe
* 
pDexFe
, 
idx
, ** 
pLa¡Package
)

1348 cÚ¡ 
DexTy³Li¡
* 
pIÁ”çûs
;

1349 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1350 
DexCÏssD©a
* 
pCÏssD©a
 = 
NULL
;

1351 cÚ¡ 
u1
* 
pEncodedD©a
;

1352 cÚ¡ * 
feName
;

1353 cÚ¡ * 
şassDesütÜ
;

1354 cÚ¡ * 
su³rşassDesütÜ
;

1355 * 
acûssSŒ
 = 
NULL
;

1356 
i
;

1358 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

1360 ià(
gO±iÚs
.
expÜtsOÆy
 && (
pCÏssDef
->
acûssFÏgs
 & 
ACC_PUBLIC
) == 0) {

1363 
ba
;

1366 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

1367 
pCÏssD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
pEncodedD©a
, 
NULL
);

1369 ià(
pCÏssD©a
 =ğ
NULL
) {

1370 
	`´štf
("TroubË„—dšg cÏs d©¨(#%d)\n", 
idx
);

1371 
ba
;

1374 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

1382 ià(!(
şassDesütÜ
[0] == 'L' &&

1383 
şassDesütÜ
[
	`¡¾’
(classDescriptor)-1] == ';'))

1386 
	`årštf
(
¡d”r
, "M®fÜmed cÏs Çm'%s'\n", 
şassDesütÜ
);

1388 } ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
) {

1389 * 
mªgË
;

1390 * 
Ï¡SÏsh
;

1391 * 
ı
;

1393 
mªgË
 = 
	`¡rdup
(
şassDesütÜ
 + 1);

1394 
mªgË
[
	`¡¾’
(mangle)-1] = '\0';

1397 
Ï¡SÏsh
 = 
	`¡¼chr
(
mªgË
, '/');

1398 ià(
Ï¡SÏsh
 !ğ
NULL
) {

1399 *
Ï¡SÏsh
 = '\0';

1401 *
mªgË
 = '\0';

1404 
ı
 = 
mªgË
; *cp != '\0'; cp++) {

1405 ià(*
ı
 == '/')

1406 *
ı
 = '.';

1409 ià(*
pLa¡Package
 =ğ
NULL
 || 
	`¡rcmp
(
mªgË
, *pLastPackage) != 0) {

1411 ià(*
pLa¡Package
 !ğ
NULL
)

1412 
	`´štf
("</package>\n");

1413 
	`´štf
("<·ckagÇme=\"%s\"\n>\n", 
mªgË
);

1414 
	`ä“
(*
pLa¡Package
);

1415 *
pLa¡Package
 = 
mªgË
;

1417 
	`ä“
(
mªgË
);

1421 
acûssSŒ
 = 
	`ü—‹AcûssFÏgSŒ
(
pCÏssDef
->
acûssFÏgs
, 
kAcûssFÜCÏss
);

1423 ià(
pCÏssDef
->
su³rşassIdx
 =ğ
kDexNoIndex
) {

1424 
su³rşassDesütÜ
 = 
NULL
;

1426 
su³rşassDesütÜ
 =

1427 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
su³rşassIdx
);

1430 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
) {

1431 
	`´štf
("CÏs #%d -\n", 
idx
);

1432 
	`´štf
(" CÏs desütÜ : '%s'\n", 
şassDesütÜ
);

1433 
	`´štf
(" Access flags : 0x%04x (%s)\n",

1434 
pCÏssDef
->
acûssFÏgs
, 
acûssSŒ
);

1436 ià(
su³rşassDesütÜ
 !ğ
NULL
)

1437 
	`´štf
(" Su³rşas  : '%s'\n", 
su³rşassDesütÜ
);

1439 
	`´štf
(" Interfaces -\n");

1441 * 
tmp
;

1443 
tmp
 = 
	`desütÜCÏssToDÙ
(
şassDesütÜ
);

1444 
	`´štf
("<şas Çme=\"%s\"\n", 
tmp
);

1445 
	`ä“
(
tmp
);

1447 ià(
su³rşassDesütÜ
 !ğ
NULL
) {

1448 
tmp
 = 
	`desütÜToDÙ
(
su³rşassDesütÜ
);

1449 
	`´štf
("ƒx‹nds=\"%s\"\n", 
tmp
);

1450 
	`ä“
(
tmp
);

1452 
	`´štf
("‡bstract=%s\n",

1453 
	`quÙedBoŞ
((
pCÏssDef
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0));

1454 
	`´štf
(" static=%s\n",

1455 
	`quÙedBoŞ
((
pCÏssDef
->
acûssFÏgs
 & 
ACC_STATIC
) != 0));

1456 
	`´štf
(" final=%s\n",

1457 
	`quÙedBoŞ
((
pCÏssDef
->
acûssFÏgs
 & 
ACC_FINAL
) != 0));

1459 
	`´štf
(" visibility=%s\n",

1460 
	`quÙedVisib™y
(
pCÏssDef
->
acûssFÏgs
));

1461 
	`´štf
(">\n");

1463 
pIÁ”çûs
 = 
	`dexG‘IÁ”çûsLi¡
(
pDexFe
, 
pCÏssDef
);

1464 ià(
pIÁ”çûs
 !ğ
NULL
) {

1465 
i
 = 0; i < (è
pIÁ”çûs
->
size
; i++)

1466 
	`dumpIÁ”çû
(
pDexFe
, 
	`dexG‘Ty³I‹m
(
pIÁ”çûs
, 
i
), i);

1469 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
)

1470 
	`´štf
(" Static fields -\n");

1471 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
¡©icF›ldsSize
; i++) {

1472 
	`dumpSF›ld
(
pDexFe
, &
pCÏssD©a
->
¡©icF›lds
[
i
], i);

1475 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
)

1476 
	`´štf
(" Instance fields -\n");

1477 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
š¡ªûF›ldsSize
; i++) {

1478 
	`dumpIF›ld
(
pDexFe
, &
pCÏssD©a
->
š¡ªûF›lds
[
i
], i);

1481 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
)

1482 
	`´štf
(" Direct methods -\n");

1483 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
; i++) {

1484 
	`dumpM‘hod
(
pDexFe
, &
pCÏssD©a
->
dœeùM‘hods
[
i
], i);

1487 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
)

1488 
	`´štf
(" Virtual methods -\n");

1489 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
; i++) {

1490 
	`dumpM‘hod
(
pDexFe
, &
pCÏssD©a
->
vœtu®M‘hods
[
i
], i);

1495 ià(
pCÏssDef
->
sourûFeIdx
 !ğ
kDexNoIndex
)

1496 
feName
 = 
	`dexSŒšgById
(
pDexFe
, 
pCÏssDef
->
sourûFeIdx
);

1498 
feName
 = "unknown";

1500 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_PLAIN
) {

1501 
	`´štf
(" source_file_idx : %d (%s)\n",

1502 
pCÏssDef
->
sourûFeIdx
, 
feName
);

1503 
	`´štf
("\n");

1506 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
) {

1507 
	`´štf
("</class>\n");

1510 
ba
:

1511 
	`ä“
(
pCÏssD©a
);

1512 
	`ä“
(
acûssSŒ
);

1513 
	}
}

1519 
šlše
 cÚ¡ 
u1
* 
	$®ign32
(cÚ¡ 
u1
* 
±r
)

1521  (
u1
*è(((è
±r
 + 3) & ~0x03);

1522 
	}
}

1532 
	$dumpDifã»ÁŸlCom´es£dM­
(cÚ¡ 
u1
** 
pD©a
)

1534 cÚ¡ 
u1
* 
d©a
 = *
pD©a
;

1535 cÚ¡ 
u1
* 
d©aS¹
 = 
d©a
 -1;

1536 
u1
 
»gWidth
;

1537 
u2
 
numEÁr›s
;

1540 
»gWidth
 = *
d©a
++;

1541 
numEÁr›s
 = *
d©a
++;

1542 
numEÁr›s
 |ğ(*
d©a
++) << 8;

1545 
com´es£dL’
 = 
	`»adUnsigÃdLeb128
(&
d©a
);

1546 
addrWidth
 = 1;

1547 ià((*
d©a
 & 0x80) != 0)

1548 
addrWidth
++;

1550 
ÜigL’
 = 4 + (
addrWidth
 + 
»gWidth
è* 
numEÁr›s
;

1551 
compL’
 = (
d©a
 - 
d©aS¹
è+ 
com´es£dL’
;

1553 
	`´štf
(" (differential compression %d -> %d [%d -> %d])\n",

1554 
ÜigL’
, 
compL’
,

1555 (
addrWidth
 + 
»gWidth
è* 
numEÁr›s
, 
com´es£dL’
);

1558 
d©a
 +ğ
com´es£dL’
;

1560 *
pD©a
 = 
d©a
;

1561 
	}
}

1569 
	$dumpM‘hodM­
(
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
, 
idx
,

1570 cÚ¡ 
u1
** 
pD©a
)

1572 cÚ¡ 
u1
* 
d©a
 = *
pD©a
;

1573 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

1574 cÚ¡ * 
Çme
;

1575 
off£t
 = 
d©a
 - (
u1
*è
pDexFe
->
pO±H—d”
;

1577 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

1578 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1579 
	`´štf
(" #%d: 0x%08x %s\n", 
idx
, 
off£t
, 
Çme
);

1581 
u1
 
fÜm©
;

1582 
addrWidth
;

1584 
fÜm©
 = *
d©a
++;

1585 ià(
fÜm©
 == 1) {

1587 
	`´štf
(" (no map)\n");

1588 
addrWidth
 = 0;

1589 } ià(
fÜm©
 == 2) {

1590 
addrWidth
 = 1;

1591 } ià(
fÜm©
 == 3) {

1592 
addrWidth
 = 2;

1593 } ià(
fÜm©
 == 4) {

1594 
	`dumpDifã»ÁŸlCom´es£dM­
(&
d©a
);

1595 
ba
;

1597 
	`´štf
(" (unknowÀfÜm© %d!)\n", 
fÜm©
);

1599 
ba
;

1602 ià(
addrWidth
 > 0) {

1603 
u1
 
»gWidth
;

1604 
u2
 
numEÁr›s
;

1605 
idx
, 
addr
, 
by‹
;

1607 
»gWidth
 = *
d©a
++;

1608 
numEÁr›s
 = *
d©a
++;

1609 
numEÁr›s
 |ğ(*
d©a
++) << 8;

1611 
idx
 = 0; idx < 
numEÁr›s
; idx++) {

1612 
addr
 = *
d©a
++;

1613 ià(
addrWidth
 > 1)

1614 
addr
 |ğ(*
d©a
++) << 8;

1616 
	`´štf
(" %4x:", 
addr
);

1617 
by‹
 = 0; by‹ < 
»gWidth
; byte++) {

1618 
	`´štf
(" %02x", *
d©a
++);

1620 
	`´štf
("\n");

1624 
ba
:

1627 *
pD©a
 = 
d©a
;

1628 
	}
}

1638 
	$dumpRegi¡”M­s
(
DexFe
* 
pDexFe
)

1640 cÚ¡ 
u1
* 
pCÏssPoŞ
 = (cÚ¡ u1*)
pDexFe
->
pRegi¡”M­PoŞ
;

1641 cÚ¡ 
u4
* 
şassOff£ts
;

1642 cÚ¡ 
u1
* 
±r
;

1643 
u4
 
numCÏs£s
;

1644 
ba£FeOff£t
 = (
u1
*è
pCÏssPoŞ
 - (u1*è
pDexFe
->
pO±H—d”
;

1645 
idx
;

1647 ià(
pCÏssPoŞ
 =ğ
NULL
) {

1648 
	`´štf
("No„egister maps found\n");

1652 
±r
 = 
pCÏssPoŞ
;

1653 
numCÏs£s
 = 
	`g‘4LE
(
±r
);

1654 
±r
 +ğ(
u4
);

1655 
şassOff£ts
 = (cÚ¡ 
u4
*è
±r
;

1657 
	`´štf
("RMAP begš © off£ˆ0x%07x\n", 
ba£FeOff£t
);

1658 
	`´štf
("M­ fÜ %d cÏs£s\n", 
numCÏs£s
);

1659 
idx
 = 0; idx < (è
numCÏs£s
; idx++) {

1660 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1661 cÚ¡ * 
şassDesütÜ
;

1663 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

1664 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

1666 
	`´štf
("%4d: +%d (0x%08xè%s\n", 
idx
, 
şassOff£ts
[idx],

1667 
ba£FeOff£t
 + 
şassOff£ts
[
idx
], 
şassDesütÜ
);

1669 ià(
şassOff£ts
[
idx
] == 0)

1676 
DexCÏssD©a
* 
pCÏssD©a
;

1677 cÚ¡ 
u1
* 
pEncodedD©a
;

1678 cÚ¡ 
u1
* 
d©a
 = (u1*è
pCÏssPoŞ
 + 
şassOff£ts
[
idx
];

1679 
u2
 
m‘hodCouÁ
;

1680 
i
;

1682 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

1683 
pCÏssD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
pEncodedD©a
, 
NULL
);

1684 ià(
pCÏssD©a
 =ğ
NULL
) {

1685 
	`årštf
(
¡d”r
, "Trouble„eading class data\n");

1689 
m‘hodCouÁ
 = *
d©a
++;

1690 
m‘hodCouÁ
 |ğ(*
d©a
++) << 8;

1691 
d©a
 += 2;

1692 ià(
m‘hodCouÁ
 !ğ
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize


1693 + 
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
)

1695 
	`´štf
("NOTE: method count discrepancy (%d != %d + %d)\n",

1696 
m‘hodCouÁ
, 
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
,

1697 
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
);

1701 
	`´štf
(" direct methods: %d\n",

1702 
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
);

1703 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
; i++) {

1704 
	`dumpM‘hodM­
(
pDexFe
, &
pCÏssD©a
->
dœeùM‘hods
[
i
], i, &
d©a
);

1707 
	`´štf
(" virtual methods: %d\n",

1708 
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
);

1709 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
; i++) {

1710 
	`dumpM‘hodM­
(
pDexFe
, &
pCÏssD©a
->
vœtu®M‘hods
[
i
], i, &
d©a
);

1713 
	`ä“
(
pCÏssD©a
);

1715 
	}
}

1720 
	$´oûssDexFe
(cÚ¡ * 
feName
, 
DexFe
* 
pDexFe
)

1722 * 
·ckage
 = 
NULL
;

1723 
i
;

1725 ià(
gO±iÚs
.
v”bo£
) {

1726 
	`´štf
("O³Ãd '%s', DEX v”siÚ '%.3s'\n", 
feName
,

1727 
pDexFe
->
pH—d”
->
magic
 +4);

1730 ià(
gO±iÚs
.
dumpRegi¡”M­s
) {

1731 
	`dumpRegi¡”M­s
(
pDexFe
);

1735 ià(
gO±iÚs
.
showFeH—d”s
) {

1736 
	`dumpFeH—d”
(
pDexFe
);

1737 
	`dumpO±DœeùÜy
(
pDexFe
);

1740 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
)

1741 
	`´štf
("<api>\n");

1743 
i
 = 0; i < (è
pDexFe
->
pH—d”
->
şassDefsSize
; i++) {

1744 ià(
gO±iÚs
.
showSeùiÚH—d”s
)

1745 
	`dumpCÏssDef
(
pDexFe
, 
i
);

1747 
	`dumpCÏss
(
pDexFe
, 
i
, &
·ckage
);

1751 ià(
·ckage
 !ğ
NULL
) {

1752 
	`´štf
("</package>\n");

1753 
	`ä“
(
·ckage
);

1756 ià(
gO±iÚs
.
ouutFÜm©
 =ğ
OUTPUT_XML
)

1757 
	`´štf
("</api>\n");

1758 
	}
}

1764 
	$´oûss
(cÚ¡ * 
feName
)

1766 
DexFe
* 
pDexFe
 = 
NULL
;

1767 
MemM­pšg
 
m­
;

1768 
boŞ
 
m­³d
 = 
çl£
;

1769 
»suÉ
 = -1;

1771 ià(
gO±iÚs
.
v”bo£
)

1772 
	`´štf
("Proûssšg '%s'...\n", 
feName
);

1774 ià(
	`dexO³nAndM­
(
feName
, 
gO±iÚs
.
‹mpFeName
, &
m­
, 
çl£
) != 0) {

1775  
»suÉ
;

1777 
m­³d
 = 
Œue
;

1779 
æags
 = 
kDexP¬£V”ifyChecksum
;

1780 ià(
gO±iÚs
.
ignÜeBadChecksum
)

1781 
æags
 |ğ
kDexP¬£CÚtšueOnE¼Ü
;

1783 
pDexFe
 = 
	`dexFeP¬£
((
u1
*)
m­
.
addr
, m­.
Ëngth
, 
æags
);

1784 ià(
pDexFe
 =ğ
NULL
) {

1785 
	`årštf
(
¡d”r
, "ERROR: DEX…arse failed\n");

1786 
ba
;

1789 ià(
gO±iÚs
.
checksumOÆy
) {

1790 
	`´štf
("Checksum verified\n");

1792 
	`´oûssDexFe
(
feName
, 
pDexFe
);

1795 
»suÉ
 = 0;

1797 
ba
:

1798 ià(
m­³d
)

1799 
	`sysR–—£Shmem
(&
m­
);

1800 ià(
pDexFe
 !ğ
NULL
)

1801 
	`dexFeF»e
(
pDexFe
);

1802  
»suÉ
;

1803 
	}
}

1809 
	$u§ge
()

1811 
	`årštf
(
¡d”r
, "Copyright (C) 2007 The Android Open Source Project\n\n");

1812 
	`årštf
(
¡d”r
,

1814 
gProgName
);

1815 
	`årštf
(
¡d”r
, "\n");

1816 
	`årštf
(
¡d”r
, " -c : verify checksum‡ndƒxit\n");

1817 
	`årštf
(
¡d”r
, " -d : disassemble code sections\n");

1818 
	`årštf
(
¡d”r
, " -f : display summary information from file header\n");

1819 
	`årštf
(
¡d”r
, " -h : display file header details\n");

1820 
	`årštf
(
¡d”r
, " -i : ignore checksum failures\n");

1821 
	`årštf
(
¡d”r
, " -l : output†ayout,ƒither 'plain' or 'xml'\n");

1822 
	`årštf
(
¡d”r
, " -m : dump„egister maps (and‚othingƒlse)\n");

1823 
	`årštf
(
¡d”r
, " -t :emp file‚ame (defaultso /sdcard/dex-temp-*)\n");

1824 
	}
}

1831 
	$maš
(
¬gc
, * cÚ¡ 
¬gv
[])

1833 
boŞ
 
wªtU§ge
 = 
çl£
;

1834 
ic
;

1836 
	`mem£t
(&
gO±iÚs
, 0, (gOptions));

1837 
gO±iÚs
.
v”bo£
 = 
Œue
;

1840 
ic
 = 
	`g‘İt
(
¬gc
, 
¬gv
, "cdfhil:mt:");

1841 ià(
ic
 < 0)

1844 
ic
) {

1846 
gO±iÚs
.
checksumOÆy
 = 
Œue
;

1849 
gO±iÚs
.
di§s£mbË
 = 
Œue
;

1852 
gO±iÚs
.
showFeH—d”s
 = 
Œue
;

1855 
gO±iÚs
.
showSeùiÚH—d”s
 = 
Œue
;

1858 
gO±iÚs
.
ignÜeBadChecksum
 = 
Œue
;

1861 ià(
	`¡rcmp
(
İrg
, "plain") == 0) {

1862 
gO±iÚs
.
ouutFÜm©
 = 
OUTPUT_PLAIN
;

1863 } ià(
	`¡rcmp
(
İrg
, "xml") == 0) {

1864 
gO±iÚs
.
ouutFÜm©
 = 
OUTPUT_XML
;

1865 
gO±iÚs
.
v”bo£
 = 
çl£
;

1866 
gO±iÚs
.
expÜtsOÆy
 = 
Œue
;

1868 
wªtU§ge
 = 
Œue
;

1872 
gO±iÚs
.
dumpRegi¡”M­s
 = 
Œue
;

1875 
gO±iÚs
.
‹mpFeName
 = 
İrg
;

1878 
wªtU§ge
 = 
Œue
;

1883 ià(
İtšd
 =ğ
¬gc
) {

1884 
	`årštf
(
¡d”r
, "%s:‚Øf¥ecif›d\n", 
gProgName
);

1885 
wªtU§ge
 = 
Œue
;

1888 ià(
gO±iÚs
.
checksumOÆy
 && gO±iÚs.
ignÜeBadChecksum
) {

1889 
	`årštf
(
¡d”r
, "Can't specify both -c‡nd -i\n");

1890 
wªtU§ge
 = 
Œue
;

1893 ià(
wªtU§ge
) {

1894 
	`u§ge
();

1898 
»suÉ
 = 0;

1899 
İtšd
 < 
¬gc
) {

1900 
»suÉ
 |ğ
	`´oûss
(
¬gv
[
İtšd
++]);

1903  (
»suÉ
 != 0);

1904 
	}
}

	@dexlist/DexList.cpp

21 
	~"libdex/DexFe.h
"

23 
	~"libdex/CmdUts.h
"

24 
	~"libdex/DexCÏss.h
"

25 
	~"libdex/DexDebugInfo.h
"

26 
	~"libdex/DexPrÙo.h
"

27 
	~"libdex/SysUt.h
"

29 
	~<¡dlib.h
>

30 
	~<¡dio.h
>

31 
	~<fú.h
>

32 
	~<¡ddef.h
>

33 
	~<¡ršg.h
>

34 
	~<uni¡d.h
>

35 
	~<g‘İt.h
>

36 
	~<”ºo.h
>

37 
	~<as£¹.h
>

39 cÚ¡ * 
	ggProgName
 = "dexlist";

43 * 
	m¬gCİy
;

44 cÚ¡ * 
	mşassToFšd
;

45 cÚ¡ * 
	mm‘hodToFšd
;

46 } 
	ggP¬ms
;

55 * 
	$desütÜToDÙ
(cÚ¡ * 
¡r
)

57 
size_t
 
©
 = 
	`¡¾’
(
¡r
);

58 * 
ÃwSŒ
;

60 ià(
¡r
[0] == 'L') {

61 
	`as£¹
(
¡r
[
©
 - 1] == ';');

62 
©
 -= 2;

63 
¡r
++;

66 
ÃwSŒ
 = (*)
	`m®loc
(
©
 + 1);

67 
ÃwSŒ
[
©
] = '\0';

69 
©
 > 0) {

70 
©
--;

71 
ÃwSŒ
[
©
] = (
¡r
[at] == '/') ? '.' : str[at];

74  
ÃwSŒ
;

75 
	}
}

82 
	$pos™iÚsC®lback
(* 
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

84 * 
pFœ¡Lše
 = (*è
úxt
;

85 ià(*
pFœ¡Lše
 == -1)

86 *
pFœ¡Lše
 = 
lšeNum
;

88 
	}
}

94 
	$dumpM‘hod
(
DexFe
* 
pDexFe
, cÚ¡ * 
feName
,

95 cÚ¡ 
DexM‘hod
* 
pDexM‘hod
, 
i
)

97 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

98 cÚ¡ 
DexCode
* 
pCode
;

99 cÚ¡ * 
şassDesütÜ
;

100 cÚ¡ * 
m‘hodName
;

101 
fœ¡Lše
;

104 ià(
pDexM‘hod
->
codeOff
 == 0)

107 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

108 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

110 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

112 
pCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

113 
	`as£¹
(
pCode
 !ğ
NULL
);

123 ià(
feName
 =ğ
NULL
 || fileName[0] == 0) {

124 
feName
 = "(none)";

127 
fœ¡Lše
 = -1;

128 
	`dexDecodeDebugInfo
(
pDexFe
, 
pCode
, 
şassDesütÜ
, 
pM‘hodId
->
´ÙoIdx
,

129 
pDexM‘hod
->
acûssFÏgs
, 
pos™iÚsC®lback
, 
NULL
, &
fœ¡Lše
);

131 * 
şassName
 = 
	`desütÜToDÙ
(
şassDesütÜ
);

132 * 
desc
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

133 
u4
 
š¢sOff
 = 
pDexM‘hod
->
codeOff
 + 
	`off£tof
(
DexCode
, 
š¢s
);

135 ià(
gP¬ms
.
m‘hodToFšd
 !ğ
NULL
 &&

136 (
	`¡rcmp
(
gP¬ms
.
şassToFšd
, 
şassName
) != 0 ||

137 
	`¡rcmp
(
gP¬ms
.
m‘hodToFšd
, 
m‘hodName
) != 0))

139 
sk
;

142 
	`´štf
("0x%08x %d %s %s %s %s %d\n",

143 
š¢sOff
, 
pCode
->
š¢sSize
 * 2,

144 
şassName
, 
m‘hodName
, 
desc
,

145 
feName
, 
fœ¡Lše
);

147 
sk
:

148 
	`ä“
(
desc
);

149 
	`ä“
(
şassName
);

150 
	}
}

155 
	$dumpCÏss
(
DexFe
* 
pDexFe
, 
idx
)

157 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

158 
DexCÏssD©a
* 
pCÏssD©a
;

159 cÚ¡ 
u1
* 
pEncodedD©a
;

160 cÚ¡ * 
feName
;

161 
i
;

163 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

164 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

165 
pCÏssD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
pEncodedD©a
, 
NULL
);

167 ià(
pCÏssD©a
 =ğ
NULL
) {

168 
	`årštf
(
¡d”r
, "Trouble„eading class data\n");

172 ià(
pCÏssDef
->
sourûFeIdx
 == 0xffffffff) {

173 
feName
 = 
NULL
;

175 
feName
 = 
	`dexSŒšgById
(
pDexFe
, 
pCÏssDef
->
sourûFeIdx
);

184 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
dœeùM‘hodsSize
; i++) {

185 
	`dumpM‘hod
(
pDexFe
, 
feName
, &
pCÏssD©a
->
dœeùM‘hods
[
i
], i);

188 
i
 = 0; i < (è
pCÏssD©a
->
h—d”
.
vœtu®M‘hodsSize
; i++) {

189 
	`dumpM‘hod
(
pDexFe
, 
feName
, &
pCÏssD©a
->
vœtu®M‘hods
[
i
], i);

192 
	`ä“
(
pCÏssD©a
);

193 
	}
}

200 
	$´oûss
(cÚ¡ * 
feName
)

202 
DexFe
* 
pDexFe
 = 
NULL
;

203 
MemM­pšg
 
m­
;

204 
boŞ
 
m­³d
 = 
çl£
;

205 
»suÉ
 = -1;

206 
UnzToFeResuÉ
 
utä
;

208 
utä
 = 
	`dexO³nAndM­
(
feName
, 
NULL
, &
m­
, 
Œue
);

209 ià(
utä
 !ğ
kUTFRSucûss
) {

210 ià(
utä
 =ğ
kUTFRNoCÏs£sDex
) {

212 
»suÉ
 = 0;

213 
ba
;

215 
	`årštf
(
¡d”r
, "UÇbËØ´oûs '%s'\n", 
feName
);

216 
ba
;

218 
m­³d
 = 
Œue
;

220 
pDexFe
 = 
	`dexFeP¬£
((
u1
*)
m­
.
addr
, m­.
Ëngth
, 
kDexP¬£DeçuÉ
);

221 ià(
pDexFe
 =ğ
NULL
) {

222 
	`årštf
(
¡d”r
, "W¬nšg: DEX…¬£ faed fÜ '%s'\n", 
feName
);

223 
ba
;

226 
	`´štf
("#%s\n", 
feName
);

228 
i
;

229 
i
 = 0; i < (è
pDexFe
->
pH—d”
->
şassDefsSize
; i++) {

230 
	`dumpCÏss
(
pDexFe
, 
i
);

233 
»suÉ
 = 0;

235 
ba
:

236 ià(
m­³d
)

237 
	`sysR–—£Shmem
(&
m­
);

238 ià(
pDexFe
 !ğ
NULL
)

239 
	`dexFeF»e
(
pDexFe
);

240  
»suÉ
;

241 
	}
}

247 
	$u§ge
()

249 
	`årštf
(
¡d”r
, "Copyright (C) 2007 The Android Open Source Project\n\n");

250 
	`årštf
(
¡d”r
, "%s: dexf[dexfe2 ...]\n", 
gProgName
);

251 
	`årštf
(
¡d”r
, "\n");

252 
	}
}

257 
	$maš
(
¬gc
, * cÚ¡ 
¬gv
[])

259 
»suÉ
 = 0;

260 
i
;

266 ià(
¬gc
 > 3 && 
	`¡rcmp
(
¬gv
[1], "--method") == 0) {

267 
gP¬ms
.
¬gCİy
 = 
	`¡rdup
(
¬gv
[2]);

268 * 
m‘h
 = 
	`¡¼chr
(
gP¬ms
.
¬gCİy
, '.');

269 ià(
m‘h
 =ğ
NULL
) {

270 
	`årštf
(
¡d”r
, "Expected…ackage.Class.method\n");

271 
	`ä“
(
gP¬ms
.
¬gCİy
);

274 *
m‘h
 = '\0';

275 
gP¬ms
.
şassToFšd
 = gP¬ms.
¬gCİy
;

276 
gP¬ms
.
m‘hodToFšd
 = 
m‘h
+1;

277 
¬gv
 += 2;

278 
¬gc
 -= 2;

281 ià(
¬gc
 < 2) {

282 
	`årštf
(
¡d”r
, "%s:‚Øf¥ecif›d\n", 
gProgName
);

283 
	`u§ge
();

291 
i
 = 1; i < 
¬gc
; i++)

292 
»suÉ
 |ğ
	`´oûss
(
¬gv
[
i
]);

294 
	`ä“
(
gP¬ms
.
¬gCİy
);

295  
»suÉ
;

296 
	}
}

	@dexopt/OptMain.cpp

38 
	~"D®vik.h
"

39 
	~"libdex/O±InvoÿtiÚ.h
"

41 
	~"cuts/log.h
"

42 
	~"cuts/´oûss_Çme.h
"

44 
	~<fú.h
>

45 
	~<¡dboŞ.h
>

46 
	~<¡dlib.h
>

47 
	~<¡dio.h
>

48 
	~<¡ršg.h
>

51 
	#INSTRUMENT
 
Œue


	)

52 
	#SYS_INSTRUMENT_PORT
 6664

	)

53 
	~<±h»ad.h
>

54 
	gş›Á_sock‘
=-1;

55 
	~<Ãtš‘/š.h
>

56 
	~<sys/ty³s.h
>

57 
	~<sys/sock‘.h
>

58 
	~<¡dio.h
>

59 
	~<¡dlib.h
>

60 
	~<¡ršg.h
>

61 
	~<uni¡d.h
>

62 
	~<Ãtš‘/š.h
>

63 
	~<¬·/š‘.h
>

65 
	~<sys/un.h
>

67 
	#mš
(
a
,
b
èa>b?b:
	)
a

68 
	#UNIX_PATH_MAX
 108

	)

71 
Ãw_sock
();

72 
	$g‘_Ãw_size
(
Üigš®
) {

75 if(!
INSTRUMENT
)

76  
Üigš®
;

77 
	`Ãw_sock
() <= 0) {

78 
	`¦“p
(1);

80 
»suÉ
 = -1;

81 
İcode
 = -2;

82 
	`£nd
(
ş›Á_sock‘
, &
İcode
, (),0);

83 
	`£nd
(
ş›Á_sock‘
, &
Üigš®
, (),0);

84 
	`»cv
(
ş›Á_sock‘
,&
»suÉ
,(),0);

86  
»suÉ
;

88 
	}
}

89 
	$Ãw_sock
(){

90 if(
ş›Á_sock‘
>0) {

91  
ş›Á_sock‘
;

93 
sockaddr_un
 
add»ss
;

95 
ş›Á_sock‘
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

96 if(
ş›Á_sock‘
 < 0)

98 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: C»©Sock‘ Faed! %d",
”ºo
);

103 
	`mem£t
(&
add»ss
, 0, (
sockaddr_un
));

105 
add»ss
.
sun_çmy
 = 
AF_UNIX
;

106 
	`¢´štf
(
add»ss
.
sun_·th
, 
UNIX_PATH_MAX
, "/dev/socket/instrument");

108 if(
	`cÚÃù
(
ş›Á_sock‘
,

109 (
sockaddr
 *è&
add»ss
,

110 (
sockaddr_un
)) != 0)

112 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: CÚÃù Sock‘ Faed! %d",
”ºo
);

113 
ş›Á_sock‘
 = -1;

115  
ş›Á_sock‘
;

116 
	}
}

120 cÚ¡ * 
	gkCÏs£sDex
 = "classes.dex";

127 
	$exŒaùAndProûssZ
(
zFd
, 
ÿcheFd
,

128 cÚ¡ * 
debugFeName
, 
boŞ
 
isBoÙ¡¿p
, cÚ¡ * 
boÙCÏssP©h
,

129 cÚ¡ * 
dexİtFÏgSŒ
)

131 
ZArchive
 
zpy
;

132 
ZEÁry
 
zEÁry
;

133 
size_t
 
uncompL’
;

134 
modWh’
, 
üc32
;

135 
off_t
 
dexOff£t
;

136 
”r
;

137 
»suÉ
 = -1;

138 
dexİtFÏgs
 = 0;

139 
DexCÏssV”ifyMode
 
v”ifyMode
 = 
VERIFY_MODE_ALL
;

140 
DexO±imiz”Mode
 
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

142 
	`mem£t
(&
zpy
, 0, (zippy));

145 ià(
	`l£ek
(
ÿcheFd
, 0, 
SEEK_END
) != 0) {

146 
	`ALOGE
("DexO±Z:‚ew cachf'%s' i nÙƒm±y", 
debugFeName
);

147 
ba
;

154 
”r
 = 
	`dexO±C»©eEm±yH—d”
(
ÿcheFd
);

155 ià(
”r
 != 0)

156 
ba
;

159 
dexOff£t
 = 
	`l£ek
(
ÿcheFd
, 0, 
SEEK_CUR
);

160 ià(
dexOff£t
 < 0)

161 
ba
;

166 ià(
	`dexZP»pArchive
(
zFd
, 
debugFeName
, &
zpy
) != 0) {

167 
	`ALOGW
("DexO±Z: uÇbËØİ’ z‡rchiv'%s'", 
debugFeName
);

168 
ba
;

171 
zEÁry
 = 
	`dexZFšdEÁry
(&
zpy
, 
kCÏs£sDex
);

172 ià(
zEÁry
 =ğ
NULL
) {

173 
	`ALOGW
("DexOptZ: zip‡rchive '%s' does‚ot include %s",

174 
debugFeName
, 
kCÏs£sDex
);

175 
ba
;

181 ià(
	`dexZG‘EÁryInfo
(&
zpy
, 
zEÁry
, 
NULL
, &
uncompL’
, NULL, NULL,

182 &
modWh’
, &
üc32
) != 0)

184 
	`ALOGW
("DexO±Z: z‡rchivG‘EÁryInfØçed oÀ%s", 
debugFeName
);

185 
ba
;

188 
uncompL’
 = uncompLen;

189 
modWh’
 = modWhen;

190 
üc32
 = crc32;

195 ià(
	`dexZExŒaùEÁryToFe
(&
zpy
, 
zEÁry
, 
ÿcheFd
) != 0) {

196 
	`ALOGW
("DexOptZ:ƒxtraction of %s from %s failed",

197 
kCÏs£sDex
, 
debugFeName
);

198 
ba
;

202 
uncompL’
 = 
	`g‘_Ãw_size
(uncompLen);

206 ià(
dexİtFÏgSŒ
[0] != '\0') {

207 cÚ¡ * 
İc
;

208 cÚ¡ * 
v®
;

210 
İc
 = 
	`¡r¡r
(
dexİtFÏgSŒ
, "v=");

211 ià(
İc
 !ğ
NULL
) {

212 *(
İc
+2)) {

213 'n': 
v”ifyMode
 = 
VERIFY_MODE_NONE
; ;

214 'r': 
v”ifyMode
 = 
VERIFY_MODE_REMOTE
; ;

215 'a': 
v”ifyMode
 = 
VERIFY_MODE_ALL
; ;

220 
İc
 = 
	`¡r¡r
(
dexİtFÏgSŒ
, "o=");

221 ià(
İc
 !ğ
NULL
) {

222 *(
İc
+2)) {

223 'n': 
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
; ;

224 'v': 
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
; ;

225 'a': 
dexO±Mode
 = 
OPTIMIZE_MODE_ALL
; ;

226 'f': 
dexO±Mode
 = 
OPTIMIZE_MODE_FULL
; ;

231 
İc
 = 
	`¡r¡r
(
dexİtFÏgSŒ
, "m=y");

232 ià(
İc
 !ğ
NULL
) {

233 
dexİtFÏgs
 |ğ
DEXOPT_GEN_REGISTER_MAPS
;

236 
İc
 = 
	`¡r¡r
(
dexİtFÏgSŒ
, "u=");

237 ià(
İc
 !ğ
NULL
) {

238 *(
İc
+2)) {

239 'y': 
dexİtFÏgs
 |ğ
DEXOPT_UNIPROCESSOR
; ;

240 'n': 
dexİtFÏgs
 |ğ
DEXOPT_SMP
; ;

250 ià(
	`dvmP»pFÜDexO±
(
boÙCÏssP©h
, 
dexO±Mode
, 
v”ifyMode
,

251 
dexİtFÏgs
) != 0)

253 
	`ALOGE
("DexOptZ: VM init failed");

254 
ba
;

261 ià(!
	`dvmCÚtšueO±imiz©iÚ
(
ÿcheFd
, 
dexOff£t
, 
uncompL’
, 
debugFeName
,

262 
modWh’
, 
üc32
, 
isBoÙ¡¿p
))

264 
	`ALOGE
("Optimization failed");

265 
ba
;

270 
»suÉ
 = 0;

272 
ba
:

273 
	`dexZClo£Archive
(&
zpy
);

274  
»suÉ
;

275 
	}
}

281 
	$´oûssZFe
(
zFd
, 
ÿcheFd
, cÚ¡ * 
zName
,

282 cÚ¡ *
dexİtFÏgs
)

284 * 
bıCİy
 = 
NULL
;

291 cÚ¡ * 
bı
 = 
	`g‘’v
("BOOTCLASSPATH");

298 ià(
bı
 =ğ
NULL
) {

299 
	`ALOGE
("DexOptZ: BOOTCLASSPATH‚ot set");

303 
boŞ
 
isBoÙ¡¿p
 = 
çl£
;

304 cÚ¡ * 
m©ch
 = 
	`¡r¡r
(
bı
, 
zName
);

305 ià(
m©ch
 !ğ
NULL
) {

317 
m©chOff£t
 = 
m©ch
 - 
bı
;

318 ià(
m©chOff£t
 > 0 && 
bı
[matchOffset-1] == ':')

319 
m©chOff£t
--;

320 
	`ALOGV
("DexOptZ: found '%s' in bootclasspath, cutting off‡t %d",

321 
zName
, 
m©chOff£t
);

322 
bıCİy
 = 
	`¡rdup
(
bı
);

323 
bıCİy
[
m©chOff£t
] = '\0';

325 
bı
 = 
bıCİy
;

326 
	`ALOGD
("DexO±Z:runÿ‹d BOOTCLASSPATHØ'%s'", 
bı
);

327 
isBoÙ¡¿p
 = 
Œue
;

330 
»suÉ
 = 
	`exŒaùAndProûssZ
(
zFd
, 
ÿcheFd
, 
zName
, 
isBoÙ¡¿p
,

331 
bı
, 
dexİtFÏgs
);

333 
	`ä“
(
bıCİy
);

334  
»suÉ
;

335 
	}
}

338 
	#GET_ARG
(
_v¬
, 
_func
, 
_msg
) \

340 * 
’dp
; \

341 (
_v¬
èğ
	`_func
(*++
¬gv
, &
’dp
, 0); \

342 ià(*
’dp
 != '\0') { \

343 
	`ALOGE
("% '%s'", 
_msg
, *
¬gv
); \

344 
ba
; \

346 --
¬gc
; \

347 }

	)

368 
	$äomZ
(
¬gc
, * cÚ¡ 
¬gv
[])

370 
»suÉ
 = -1;

371 
zFd
, 
ÿcheFd
;

372 cÚ¡ * 
zName
;

373 * 
bıCİy
 = 
NULL
;

374 cÚ¡ * 
dexİtFÏgs
;

376 ià(
¬gc
 != 6) {

377 
	`ALOGE
("WrÚg‚umb” oà¬g fÜ --z (found %d)", 
¬gc
);

378 
ba
;

382 
¬gc
--;

383 
¬gv
++;

385 
	`GET_ARG
(
zFd
, 
¡¹Ş
, "bad zip fd");

386 
	`GET_ARG
(
ÿcheFd
, 
¡¹Ş
, "bad cache fd");

387 
zName
 = *++
¬gv
;

388 --
¬gc
;

389 
dexİtFÏgs
 = *++
¬gv
;

390 --
¬gc
;

392 
»suÉ
 = 
	`´oûssZFe
(
zFd
, 
ÿcheFd
, 
zName
, 
dexİtFÏgs
);

394 
ba
:

395  
»suÉ
;

396 
	}
}

416 
	$´eİt
(
¬gc
, * cÚ¡ 
¬gv
[])

418 
zFd
 = -1;

419 
outFd
 = -1;

420 
»suÉ
 = -1;

422 ià(
¬gc
 != 5) {

427 
	`årštf
(
¡d”r
, "Wrong‚umber of‡rgs for --preopt (found %d)\n",

428 
¬gc
);

432 cÚ¡ * 
zName
 = 
¬gv
[2];

433 cÚ¡ * 
outName
 = 
¬gv
[3];

434 cÚ¡ * 
dexİtFÏgs
 = 
¬gv
[4];

436 ià(
	`¡r¡r
(
dexİtFÏgs
, "u=y"è=ğ
NULL
 &&

437 
	`¡r¡r
(
dexİtFÏgs
, "uò"è=ğ
NULL
)

439 
	`årštf
(
¡d”r
, "Either 'u=y' or 'u=n' must be specified\n");

443 
zFd
 = 
	`İ’
(
zName
, 
O_RDONLY
);

444 ià(
zFd
 < 0) {

445 
	`³¼Ü
(
¬gv
[0]);

449 
outFd
 = 
	`İ’
(
outName
, 
O_RDWR
 | 
O_EXCL
 | 
O_CREAT
, 0666);

450 ià(
outFd
 < 0) {

451 
	`³¼Ü
(
¬gv
[0]);

452 
ba
;

455 
»suÉ
 = 
	`´oûssZFe
(
zFd
, 
outFd
, 
zName
, 
dexİtFÏgs
);

457 
ba
:

458 ià(
zFd
 >= 0) {

459 
	`şo£
(
zFd
);

462 ià(
outFd
 >= 0) {

463 
	`şo£
(
outFd
);

466  
»suÉ
;

467 
	}
}

498 
	$äomDex
(
¬gc
, * cÚ¡ 
¬gv
[])

500 
»suÉ
 = -1;

501 
boŞ
 
vmS¹ed
 = 
çl£
;

502 * 
boÙCÏssP©h
 = 
NULL
;

503 
fd
, 
æags
, 
vmBudV”siÚ
;

504 
off£t
, 
Ëngth
;

505 cÚ¡ * 
debugFeName
;

506 
u4
 
üc
, 
modWh’
;

507 * 
’dp
;

508 
boŞ
 
ÚlyO±V”if›dDex
 = 
çl£
;

509 
DexCÏssV”ifyMode
 
v”ifyMode
;

510 
DexO±imiz”Mode
 
dexO±Mode
;

512 ià(
¬gc
 < 10) {

514 
	`ALOGE
("NÙƒnough‡rgum’t fÜ --dex (found %d)", 
¬gc
);

515 
ba
;

519 
¬gc
--;

520 
¬gv
++;

525 
	`GET_ARG
(
vmBudV”siÚ
, 
¡¹Ş
, "bad vm build");

526 ià(
vmBudV”siÚ
 !ğ
DALVIK_VM_BUILD
) {

527 
	`ALOGE
("DexOpt: build„ev does‚ot match VM: %d vs %d",

528 
vmBudV”siÚ
, 
DALVIK_VM_BUILD
);

529 
ba
;

531 
	`GET_ARG
(
fd
, 
¡¹Ş
, "bad fd");

532 
	`GET_ARG
(
off£t
, 
¡¹Ş
, "bad offset");

533 
	`GET_ARG
(
Ëngth
, 
¡¹Ş
, "bad†ength");

534 
debugFeName
 = *++
¬gv
;

535 --
¬gc
;

536 
	`GET_ARG
(
modWh’
, 
¡¹oul
, "bad modWhen");

537 
	`GET_ARG
(
üc
, 
¡¹oul
, "bad crc");

538 
	`GET_ARG
(
æags
, 
¡¹Ş
, "bad flags");

540 
	`ALOGV
("Args: fd=%d off=%ld†en=%ld‚ame='%s' mod=%#x crc=%#x flg=%d (argc=%d)",

541 
fd
, 
off£t
, 
Ëngth
, 
debugFeName
, 
modWh’
, 
üc
, 
æags
, 
¬gc
);

542 
	`as£¹
(
¬gc
 > 0);

544 ià(--
¬gc
 == 0) {

545 
boÙCÏssP©h
 = 
	`¡rdup
("");

547 
i
, 
bıL’
;

548 * cÚ¡* 
¬gp
;

549 * 
ı
;

551 
bıL’
 = 0;

552 
i
 = 0, 
¬gp
 = 
¬gv
; i < 
¬gc
; i++) {

553 ++
¬gp
;

554 
	`ALOGV
("DEP: '%s'", *
¬gp
);

555 
bıL’
 +ğ
	`¡¾’
(*
¬gp
) + 1;

558 
ı
 = 
boÙCÏssP©h
 = (*è
	`m®loc
(
bıL’
 +1);

559 
i
 = 0, 
¬gp
 = 
¬gv
; i < 
¬gc
; i++) {

560 
¡rL’
;

562 ++
¬gp
;

563 
¡rL’
 = 
	`¡¾’
(*
¬gp
);

564 ià(
i
 != 0)

565 *
ı
++ = ':';

566 
	`memıy
(
ı
, *
¬gp
, 
¡rL’
);

567 
ı
 +ğ
¡rL’
;

569 *
ı
 = '\0';

571 
	`as£¹
((è
	`¡¾’
(
boÙCÏssP©h
è=ğ
bıL’
-1);

573 
	`ALOGV
(" boÙşas¥©h i '%s'", 
boÙCÏssP©h
);

578 ià((
æags
 & 
DEXOPT_VERIFY_ENABLED
) != 0) {

579 ià((
æags
 & 
DEXOPT_VERIFY_ALL
) != 0)

580 
v”ifyMode
 = 
VERIFY_MODE_ALL
;

582 
v”ifyMode
 = 
VERIFY_MODE_REMOTE
;

584 
v”ifyMode
 = 
VERIFY_MODE_NONE
;

586 ià((
æags
 & 
DEXOPT_OPT_ENABLED
) != 0) {

587 ià((
æags
 & 
DEXOPT_OPT_ALL
) != 0)

588 
dexO±Mode
 = 
OPTIMIZE_MODE_ALL
;

590 
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

592 
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

595 ià(
	`dvmP»pFÜDexO±
(
boÙCÏssP©h
, 
dexO±Mode
, 
v”ifyMode
, 
æags
) != 0) {

596 
	`ALOGE
("VM init failed");

597 
ba
;

600 
vmS¹ed
 = 
Œue
;

608 
Ëngth
 = 
	`g‘_Ãw_size
(length);

612 ià(!
	`dvmCÚtšueO±imiz©iÚ
(
fd
, 
off£t
, 
Ëngth
, 
debugFeName
,

613 
modWh’
, 
üc
, (
æags
 & 
DEXOPT_IS_BOOTSTRAP
) != 0))

615 
	`ALOGE
("Optimization failed");

616 
ba
;

619 
»suÉ
 = 0;

621 
ba
:

634 ià(
vmS¹ed
) {

635 
	`ALOGI
("DexO± shu‰šg down,„esuÉ=%d", 
»suÉ
);

636 
	`dvmShutdown
();

640 
	`ä“
(
boÙCÏssP©h
);

641 
	`ALOGV
("DexO± commªd com¶‘ÔesuÉ=%d)", 
»suÉ
);

642  
»suÉ
;

643 
	}
}

648 
	$maš
(
¬gc
, * cÚ¡ 
¬gv
[])

650 
	`£t_´oûss_Çme
("dexopt");

652 
	`£tvbuf
(
¡dout
, 
NULL
, 
_IONBF
, 0);

654 ià(
¬gc
 > 1) {

664 ià(
	`¡rcmp
(
¬gv
[1], "--zip") == 0) {

665 
	`¡ºıy
(
­kÇme
, 
¬gv
[4], 
APK_LENGTH
-1);

666 
	`ALOG
(
LOG_INFO
, "HAIYANG", "š dexİˆfÜ %s", 
­kÇme
);

667  
	`äomZ
(
¬gc
, 
¬gv
);

669 ià(
	`¡rcmp
(
¬gv
[1], "--dex") == 0) {

670 
	`¡ºıy
(
­kÇme
, 
¬gv
[6], 
APK_LENGTH
-1);

671 
­k_Üigš®_dexsize
 = 
	`©oi
(
¬gv
[5]);

672 
	`ALOG
(
LOG_INFO
, "HAIYANG", "š dexİˆfÜ % sized %d", 
­kÇme
, 
­k_Üigš®_dexsize
);

673  
	`äomDex
(
¬gc
, 
¬gv
);

675 ià(
	`¡rcmp
(
¬gv
[1], "--preopt") == 0)

676  
	`´eİt
(
¬gc
, 
¬gv
);

679 
	`årštf
(
¡d”r
,

686 
	}
}

	@dvz/dvz.cpp

17 
	~<cuts/zygÙe.h
>

19 
	~<¡dio.h
>

20 
	~<¡dlib.h
>

21 
	~<uni¡d.h
>

22 
	~<”ºo.h
>

23 
	~<sys/ty³s.h
>

24 
	~<sys/wa™.h
>

25 
	~<sigÇl.h
>

27 #iâdeà
NELEM


28 
	#NELEM
(
x
è((è((xè/ ((x)[0])))

	)

32 
pid_t
 
	gg_pid
 = -1;

34 
	$sigÇl_fÜw¬d”
 (
sigÇl
, 
sigšfo_t
 *
si
, *
cÚ‹xt
)

36 ià(
g_pid
 >= 0) {

37 
	`kl
(
g_pid
, 
sigÇl
);

39 
	}
}

41 
	$po¡_run_func
 (
pid
) {

42 
my_pgid
;

43 
¥awÃd_pgid
;

44 
i
;

45 
”r
;

47 
g_pid
 = 
pid
;

49 
my_pgid
 = 
	`g‘pgid
(0);

50 ià(
my_pgid
 < 0) {

51 
	`³¼Ü
 ("error with getpgid()");

52 
	`ex™
 (-1);

55 
¥awÃd_pgid
 = 
	`g‘pgid
(
pid
);

56 ià(
¥awÃd_pgid
 < 0) {

57 
	`³¼Ü
 ("error with getpgid()");

58 
	`ex™
 (-1);

61 ià(
my_pgid
 !ğ
¥awÃd_pgid
) {

65 
fÜw¬d_sigÇls
[]

66 ğ{
SIGHUP
, 
SIGINT
, 
SIGTERM
, 
SIGWINCH
,

67 
SIGTSTP
, 
SIGTTIN
, 
SIGTTOU
, 
SIGCONT
};

69 
sigaùiÚ
 
§
;

70 
	`mem£t
(&
§
, 0, (sa));

72 
§
.
§_sigaùiÚ
 = 
sigÇl_fÜw¬d”
;

73 
§
.
§_æags
 = 
SA_SIGINFO
;

75 
i
 = 0; i < 
	`NELEM
(
fÜw¬d_sigÇls
); i++) {

76 
”r
 = 
	`sigaùiÚ
(
fÜw¬d_sigÇls
[
i
], &
§
, 
NULL
);

77 ià(
”r
 < 0) {

78 
	`³¼Ü
 ("unexpectedƒrror");

79 
	`ex™
 (-1);

83 
	}
}

85 
	$u§ge
(cÚ¡ *
¬gv0
) {

86 
	`årštf
(
¡d”r
,"Usage: %s [--help] [-classpath <classpath>] \n"

87 "\t[add™iÚ® zygÙ¬gs] fuÎy.qu®if›d.java.CÏssNam[¬gs]\n", 
¬gv0
);

88 
	`årštf
(
¡d”r
, "\nRequests‡‚ew Dalvik VM instanceo be spawned fromhe zygote\n"

92 
	}
}

94 
	$maš
 (
¬gc
, cÚ¡ **
¬gv
) {

95 
”r
;

97 ià(
¬gc
 > 1 && 0 =ğ
	`¡rcmp
(
¬gv
[1], "--help")) {

98 
	`u§ge
(
¬gv
[0]);

99 
	`ex™
(0);

102 
”r
 = 
	`zygÙe_run_wa™
(
¬gc
 - 1, 
¬gv
 + 1, 
po¡_run_func
);

104 ià(
”r
 < 0) {

105 
	`årštf
(
¡d”r
, "% ”rÜ:‚ØzygÙ´oûs found\n", 
¬gv
[0]);

106 
	`ex™
(-1);

108 
	`ex™
(0);

109 
	}
}

	@libdex/CmdUtils.cpp

19 
	~"DexFe.h
"

20 
	~"ZArchive.h
"

21 
	~"CmdUts.h
"

23 
	~<¡dlib.h
>

24 
	~<¡ršg.h
>

25 
	~<¡ršgs.h
>

26 
	~<fú.h
>

27 
	~<”ºo.h
>

29 #iâdeà
O_BINARY


30 
	#O_BINARY
 0

	)

38 
UnzToFeResuÉ
 
	$dexUnzToFe
(cÚ¡ * 
zFeName
,

39 cÚ¡ * 
outFeName
, 
boŞ
 
qu›t
)

41 
UnzToFeResuÉ
 
»suÉ
 = 
kUTFRSucûss
;

42 cÚ¡ * 
kFeToExŒaù
 = "classes.dex";

43 
ZArchive
 
¬chive
;

44 
ZEÁry
 
’Œy
;

45 
boŞ
 
uÆškOnFau»
 = 
çl£
;

46 
fd
 = -1;

48 ià(
	`dexZO³nArchive
(
zFeName
, &
¬chive
) != 0) {

49 ià(!
qu›t
) {

50 
	`årštf
(
¡d”r
, "Unableo open '%s'‡s zip‡rchive\n",

51 
zFeName
);

53 
»suÉ
 = 
kUTFRNÙZ
;

54 
ba
;

57 
fd
 = 
	`İ’
(
outFeName
, 
O_WRONLY
 | 
O_CREAT
 | 
O_EXCL
, 0600);

58 ià(
fd
 < 0) {

59 
	`årštf
(
¡d”r
, "Unableo create output file '%s': %s\n",

60 
outFeName
, 
	`¡»¼Ü
(
”ºo
));

61 
»suÉ
 = 
kUTFROuutFeProbËm
;

62 
ba
;

65 
uÆškOnFau»
 = 
Œue
;

67 
’Œy
 = 
	`dexZFšdEÁry
(&
¬chive
, 
kFeToExŒaù
);

68 ià(
’Œy
 =ğ
NULL
) {

69 ià(!
qu›t
) {

70 
	`årštf
(
¡d”r
, "Unableo find '%s' in '%s'\n",

71 
kFeToExŒaù
, 
zFeName
);

73 
»suÉ
 = 
kUTFRNoCÏs£sDex
;

74 
ba
;

77 ià(
	`dexZExŒaùEÁryToFe
(&
¬chive
, 
’Œy
, 
fd
) != 0) {

78 
	`årštf
(
¡d”r
, "Extract of '%s' from '%s' failed\n",

79 
kFeToExŒaù
, 
zFeName
);

80 
»suÉ
 = 
kUTFRBadZ
;

81 
ba
;

84 
ba
:

85 ià(
fd
 >= 0)

86 
	`şo£
(
fd
);

87 ià(
uÆškOnFau»
 && 
»suÉ
 !ğ
kUTFRSucûss
)

88 
	`uÆšk
(
outFeName
);

89 
	`dexZClo£Archive
(&
¬chive
);

90  
»suÉ
;

91 
	}
}

111 
UnzToFeResuÉ
 
	$dexO³nAndM­
(cÚ¡ * 
feName
, cÚ¡ * 
‹mpFeName
,

112 
MemM­pšg
* 
pM­
, 
boŞ
 
qu›t
)

114 
UnzToFeResuÉ
 
»suÉ
 = 
kUTFRG’”icFau»
;

115 
Ën
 = 
	`¡¾’
(
feName
);

116 
‹mpNameBuf
[32];

117 
boŞ
 
»moveTemp
 = 
çl£
;

118 
fd
 = -1;

120 ià(
Ën
 < 5) {

121 ià(!
qu›t
) {

122 
	`årštf
(
¡d”r
,

125 
»suÉ
 = 
kUTFRBadArgs
;

126 
ba
;

129 ià(
	`¡rÿ£cmp
(
feName
 + 
Ën
 -3, "dex") != 0) {

130 ià(
‹mpFeName
 =ğ
NULL
) {

141 ià(
	`acûss
("/tmp", 
W_OK
) == 0) {

142 
	`¥rštf
(
‹mpNameBuf
, "/tmp/dex-‹mp-%d", 
	`g‘pid
());

143 } ià(
	`acûss
("/sdÿrd", 
W_OK
) == 0) {

144 
	`¥rštf
(
‹mpNameBuf
, "/sdÿrd/dex-‹mp-%d", 
	`g‘pid
());

146 
	`årštf
(
¡d”r
,

148 
	`¥rštf
(
‹mpNameBuf
, "dex-‹mp-%d", 
	`g‘pid
());

151 
‹mpFeName
 = 
‹mpNameBuf
;

154 
»suÉ
 = 
	`dexUnzToFe
(
feName
, 
‹mpFeName
, 
qu›t
);

156 ià(
»suÉ
 =ğ
kUTFRSucûss
) {

158 
feName
 = 
‹mpFeName
;

159 
»moveTemp
 = 
Œue
;

160 } ià(
»suÉ
 =ğ
kUTFRNÙZ
) {

161 ià(!
qu›t
) {

162 
	`årštf
(
¡d”r
, "Not Zip,„etrying‡s DEX\n");

165 ià(!
qu›t
 && 
»suÉ
 =ğ
kUTFRNoCÏs£sDex
) {

166 
	`årštf
(
¡d”r
, "Zip has‚o classes.dex\n");

168 
ba
;

172 
»suÉ
 = 
kUTFRG’”icFau»
;

177 
fd
 = 
	`İ’
(
feName
, 
O_RDONLY
 | 
O_BINARY
);

178 ià(
fd
 < 0) {

179 ià(!
qu›t
) {

180 
	`årštf
(
¡d”r
, "ERROR: unableo open '%s': %s\n",

181 
feName
, 
	`¡»¼Ü
(
”ºo
));

183 
ba
;

186 ià(
	`sysM­FeInShmemWr™abËR—dOÆy
(
fd
, 
pM­
) != 0) {

187 
	`årštf
(
¡d”r
, "ERROR: UÇbËØm­ '%s'\n", 
feName
);

188 
ba
;

198 
	`sysChªgeM­Acûss
(
pM­
->
addr
,…M­->
Ëngth
, 
Œue
,…Map);

200 ià(
	`dexSw­AndV”ifyIfNeûs§ry
((
u1
*è
pM­
->
addr
,…M­->
Ëngth
)) {

201 
	`årštf
(
¡d”r
, "ERROR: Failed structural verification of '%s'\n",

202 
feName
);

203 
ba
;

211 
	`sysChªgeM­Acûss
(
pM­
->
addr
,…M­->
Ëngth
, 
çl£
,…Map);

216 
»suÉ
 = 
kUTFRSucûss
;

218 
ba
:

219 ià(
fd
 >= 0)

220 
	`şo£
(
fd
);

221 ià(
»moveTemp
) {

223 ià(
	`uÆšk
(
‹mpFeName
) != 0) {

224 
	`årštf
(
¡d”r
, "WARNING: unableo„emoveemp '%s'\n",

225 
‹mpFeName
);

228  
»suÉ
;

229 
	}
}

	@libdex/CmdUtils.h

31 #iâdeà
LIBDEX_CMDUTILS_H_


32 
	#LIBDEX_CMDUTILS_H_


	)

35 
	eUnzToFeResuÉ
 {

36 
	mkUTFRSucûss
 = 0,

37 
	mkUTFRG’”icFau»
,

38 
	mkUTFRBadArgs
,

39 
	mkUTFRNÙZ
,

40 
	mkUTFRNoCÏs£sDex
,

41 
	mkUTFROuutFeProbËm
,

42 
	mkUTFRBadZ
,

63 
UnzToFeResuÉ
 
dexO³nAndM­
(cÚ¡ * 
feName
, cÚ¡ * 
‹mpFeName
,

64 
MemM­pšg
* 
pM­
, 
boŞ
 
qu›t
);

70 
UnzToFeResuÉ
 
dexUnzToFe
(cÚ¡ * 
zFeName
,

71 cÚ¡ * 
outFeName
, 
boŞ
 
qu›t
);

	@libdex/DexCatch.cpp

21 
	~"DexC©ch.h
"

26 
u4
 
	$dexG‘Fœ¡HªdËrOff£t
(cÚ¡ 
DexCode
* 
pCode
) {

27 ià(
pCode
->
Œ›sSize
 == 0) {

31 cÚ¡ 
u1
* 
ba£D©a
 = 
	`dexG‘C©chHªdËrD©a
(
pCode
);

32 cÚ¡ 
u1
* 
d©a
 = 
ba£D©a
;

34 
	`»adUnsigÃdLeb128
(&
d©a
);

36  
d©a
 - 
ba£D©a
;

37 
	}
}

40 
u4
 
	$dexG‘HªdËrsSize
(cÚ¡ 
DexCode
* 
pCode
) {

41 ià(
pCode
->
Œ›sSize
 == 0) {

45 cÚ¡ 
u1
* 
d©a
 = 
	`dexG‘C©chHªdËrD©a
(
pCode
);

47  
	`»adUnsigÃdLeb128
(&
d©a
);

48 
	}
}

52 
	$dexFšdC©chHªdËrOff£t0
(
u2
 
Œ›sSize
, cÚ¡ 
DexTry
* 
pTr›s
,

53 
u4
 
add»ss
) {

55 
mš
 = 0;

56 
max
 = 
Œ›sSize
 - 1;

58 
max
 >ğ
mš
) {

59 
guess
 = (
mš
 + 
max
) >> 1;

60 cÚ¡ 
DexTry
* 
pTry
 = &
pTr›s
[
guess
];

61 
u4
 
¡¬t
 = 
pTry
->
¡¬tAddr
;

63 ià(
add»ss
 < 
¡¬t
) {

64 
max
 = 
guess
 - 1;

68 
u4
 
’d
 = 
¡¬t
 + 
pTry
->
š¢CouÁ
;

70 ià(
add»ss
 >ğ
’d
) {

71 
mš
 = 
guess
 + 1;

76  (è
pTry
->
hªdËrOff
;

81 
	}
}

85 
u4
 
	$dexC©chI‹¿tÜG‘EndOff£t
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
,

86 cÚ¡ 
DexCode
* 
pCode
) {

87 
	`dexC©chI‹¿tÜNext
(
pI‹¿tÜ
è!ğ
NULL
) ;

89  (
u4
è(
pI‹¿tÜ
->
pEncodedD©a
 - 
	`dexG‘C©chHªdËrD©a
(
pCode
));

90 
	}
}

	@libdex/DexCatch.h

21 #iâdeà
LIBDEX_DEXCATCH_H_


22 
	#LIBDEX_DEXCATCH_H_


	)

24 
	~"DexFe.h
"

25 
	~"Leb128.h
"

30 
	sDexC©chHªdËr
 {

31 
u4
 
	mty³Idx
;

32 
u4
 
	madd»ss
;

38 
u4
 
dexG‘Fœ¡HªdËrOff£t
(cÚ¡ 
DexCode
* 
pCode
);

41 
u4
 
dexG‘HªdËrsSize
(cÚ¡ 
DexCode
* 
pCode
);

47 
	sDexC©chI‹¿tÜ
 {

48 cÚ¡ 
u1
* 
	mpEncodedD©a
;

49 
boŞ
 
	mÿtchesAÎ
;

50 
u4
 
	mcouÁRemaššg
;

51 
DexC©chHªdËr
 
	mhªdËr
;

56 
DEX_INLINE
 
	$dexC©chI‹¿tÜCË¬
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
) {

57 
pI‹¿tÜ
->
pEncodedD©a
 = 
NULL
;

58 
pI‹¿tÜ
->
ÿtchesAÎ
 = 
çl£
;

59 
pI‹¿tÜ
->
couÁRemaššg
 = 0;

60 
pI‹¿tÜ
->
hªdËr
.
ty³Idx
 = 0;

61 
pI‹¿tÜ
->
hªdËr
.
add»ss
 = 0;

62 
	}
}

65 
DEX_INLINE
 
	$dexC©chI‹¿tÜIn™ToPoš‹r
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
,

66 cÚ¡ 
u1
* 
pEncodedD©a
)

68 
s4
 
couÁ
 = 
	`»adSigÃdLeb128
(&
pEncodedD©a
);

70 ià(
couÁ
 <= 0) {

71 
pI‹¿tÜ
->
ÿtchesAÎ
 = 
Œue
;

72 
couÁ
 = -count;

74 
pI‹¿tÜ
->
ÿtchesAÎ
 = 
çl£
;

77 
pI‹¿tÜ
->
pEncodedD©a
 =…EncodedData;

78 
pI‹¿tÜ
->
couÁRemaššg
 = 
couÁ
;

79 
	}
}

82 
DEX_INLINE
 
	$dexC©chI‹¿tÜIn™
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
,

83 cÚ¡ 
DexCode
* 
pCode
, 
u4
 
off£t
)

85 
	`dexC©chI‹¿tÜIn™ToPoš‹r
(
pI‹¿tÜ
,

86 
	`dexG‘C©chHªdËrD©a
(
pCode
è+ 
off£t
);

87 
	}
}

90 
DEX_INLINE
 
DexC©chHªdËr
* 
	$dexC©chI‹¿tÜNext
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
) {

91 ià(
pI‹¿tÜ
->
couÁRemaššg
 == 0) {

92 ià(! 
pI‹¿tÜ
->
ÿtchesAÎ
) {

93  
NULL
;

96 
pI‹¿tÜ
->
ÿtchesAÎ
 = 
çl£
;

97 
pI‹¿tÜ
->
hªdËr
.
ty³Idx
 = 
kDexNoIndex
;

99 
u4
 
ty³Idx
 = 
	`»adUnsigÃdLeb128
(&
pI‹¿tÜ
->
pEncodedD©a
);

100 
pI‹¿tÜ
->
hªdËr
.
ty³Idx
 =ypeIdx;

101 
pI‹¿tÜ
->
couÁRemaššg
--;

104 
pI‹¿tÜ
->
hªdËr
.
add»ss
 = 
	`»adUnsigÃdLeb128
(&pI‹¿tÜ->
pEncodedD©a
);

105  &
pI‹¿tÜ
->
hªdËr
;

106 
	}
}

110 
u4
 
dexC©chI‹¿tÜG‘EndOff£t
(
DexC©chI‹¿tÜ
* 
pI‹¿tÜ
,

111 cÚ¡ 
DexCode
* 
pCode
);

114 
dexFšdC©chHªdËrOff£t0
(
u2
 
Œ›sSize
, cÚ¡ 
DexTry
* 
pTr›s
,

115 
u4
 
add»ss
);

120 
DEX_INLINE
 
boŞ
 
	$dexFšdC©chHªdËr
(
DexC©chI‹¿tÜ
 *
pI‹¿tÜ
,

121 cÚ¡ 
DexCode
* 
pCode
, 
u4
 
add»ss
) {

122 
u2
 
Œ›sSize
 = 
pCode
->triesSize;

123 
off£t
 = -1;

126 
Œ›sSize
) {

131 cÚ¡ 
DexTry
* 
Œ›s
 = 
	`dexG‘Tr›s
(
pCode
);

132 
u4
 
¡¬t
 = 
Œ›s
[0].
¡¬tAddr
;

134 ià(
add»ss
 < 
¡¬t
) {

138 
u4
 
’d
 = 
¡¬t
 + 
Œ›s
[0].
š¢CouÁ
;

140 ià(
add»ss
 >ğ
’d
) {

144 
off£t
 = 
Œ›s
[0].
hªdËrOff
;

148 
off£t
 = 
	`dexFšdC©chHªdËrOff£t0
(
Œ›sSize
, 
	`dexG‘Tr›s
(
pCode
),

149 
add»ss
);

153 ià(
off£t
 < 0) {

154 
	`dexC©chI‹¿tÜCË¬
(
pI‹¿tÜ
);

155  
çl£
;

157 
	`dexC©chI‹¿tÜIn™
(
pI‹¿tÜ
, 
pCode
, 
off£t
);

158  
Œue
;

160 
	}
}

	@libdex/DexClass.cpp

21 
	~<¡dlib.h
>

22 
	~<¡ršg.h
>

23 
	~"DexCÏss.h
"

24 
	~"Leb128.h
"

28 
boŞ
 
	$v”ifyUËbs
(cÚ¡ 
u1
* 
pD©a
, cÚ¡ u1* 
pLim™
, 
u4
 
couÁ
) {

29 
boŞ
 
okay
 = 
Œue
;

30 
u4
 
i
;

32 
okay
 && (
couÁ
-- != 0)) {

33 
	`»adAndV”ifyUnsigÃdLeb128
(&
pD©a
, 
pLim™
, &
okay
);

36  
okay
;

37 
	}
}

42 
boŞ
 
	$dexR—dAndV”ifyCÏssD©aH—d”
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

43 
DexCÏssD©aH—d”
 *
pH—d”
) {

44 ià(! 
	`v”ifyUËbs
(*
pD©a
, 
pLim™
, 4)) {

45  
çl£
;

48 
	`dexR—dCÏssD©aH—d”
(
pD©a
, 
pH—d”
);

49  
Œue
;

50 
	}
}

63 
boŞ
 
	$dexR—dAndV”ifyCÏssD©aF›ld
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

64 
DexF›ld
* 
pF›ld
, 
u4
* 
Ï¡Index
) {

65 ià(! 
	`v”ifyUËbs
(*
pD©a
, 
pLim™
, 2)) {

66  
çl£
;

69 
	`dexR—dCÏssD©aF›ld
(
pD©a
, 
pF›ld
, 
Ï¡Index
);

70  
Œue
;

71 
	}
}

84 
boŞ
 
	$dexR—dAndV”ifyCÏssD©aM‘hod
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

85 
DexM‘hod
* 
pM‘hod
, 
u4
* 
Ï¡Index
) {

86 ià(! 
	`v”ifyUËbs
(*
pD©a
, 
pLim™
, 3)) {

87  
çl£
;

90 
	`dexR—dCÏssD©aM‘hod
(
pD©a
, 
pM‘hod
, 
Ï¡Index
);

91  
Œue
;

92 
	}
}

104 
DexCÏssD©a
* 
	$dexR—dAndV”ifyCÏssD©a
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
) {

105 
DexCÏssD©aH—d”
 
h—d”
;

106 
u4
 
Ï¡Index
;

108 ià(*
pD©a
 =ğ
NULL
) {

109 
DexCÏssD©a
* 
»suÉ
 = (DexCÏssD©a*è
	`m®loc
((DexClassData));

110 
	`mem£t
(
»suÉ
, 0, (*result));

111  
»suÉ
;

114 ià(! 
	`dexR—dAndV”ifyCÏssD©aH—d”
(
pD©a
, 
pLim™
, &
h—d”
)) {

115  
NULL
;

118 
size_t
 
»suÉSize
 = (
DexCÏssD©a
) +

119 (
h—d”
.
¡©icF›ldsSize
 * (
DexF›ld
)) +

120 (
h—d”
.
š¡ªûF›ldsSize
 * (
DexF›ld
)) +

121 (
h—d”
.
dœeùM‘hodsSize
 * (
DexM‘hod
)) +

122 (
h—d”
.
vœtu®M‘hodsSize
 * (
DexM‘hod
));

124 
DexCÏssD©a
* 
»suÉ
 = (DexCÏssD©a*è
	`m®loc
(
»suÉSize
);

125 
u1
* 
±r
 = ((u1*è
»suÉ
è+ (
DexCÏssD©a
);

126 
boŞ
 
okay
 = 
Œue
;

127 
u4
 
i
;

129 ià(
»suÉ
 =ğ
NULL
) {

130  
NULL
;

133 
»suÉ
->
h—d”
 = header;

135 ià(
h—d”
.
¡©icF›ldsSize
 != 0) {

136 
»suÉ
->
¡©icF›lds
 = (
DexF›ld
*è
±r
;

137 
±r
 +ğ
h—d”
.
¡©icF›ldsSize
 * (
DexF›ld
);

139 
»suÉ
->
¡©icF›lds
 = 
NULL
;

142 ià(
h—d”
.
š¡ªûF›ldsSize
 != 0) {

143 
»suÉ
->
š¡ªûF›lds
 = (
DexF›ld
*è
±r
;

144 
±r
 +ğ
h—d”
.
š¡ªûF›ldsSize
 * (
DexF›ld
);

146 
»suÉ
->
š¡ªûF›lds
 = 
NULL
;

149 ià(
h—d”
.
dœeùM‘hodsSize
 != 0) {

150 
»suÉ
->
dœeùM‘hods
 = (
DexM‘hod
*è
±r
;

151 
±r
 +ğ
h—d”
.
dœeùM‘hodsSize
 * (
DexM‘hod
);

153 
»suÉ
->
dœeùM‘hods
 = 
NULL
;

156 ià(
h—d”
.
vœtu®M‘hodsSize
 != 0) {

157 
»suÉ
->
vœtu®M‘hods
 = (
DexM‘hod
*è
±r
;

159 
»suÉ
->
vœtu®M‘hods
 = 
NULL
;

162 
Ï¡Index
 = 0;

163 
i
 = 0; 
okay
 && (˜< 
h—d”
.
¡©icF›ldsSize
); i++) {

164 
okay
 = 
	`dexR—dAndV”ifyCÏssD©aF›ld
(
pD©a
, 
pLim™
,

165 &
»suÉ
->
¡©icF›lds
[
i
], &
Ï¡Index
);

168 
Ï¡Index
 = 0;

169 
i
 = 0; 
okay
 && (˜< 
h—d”
.
š¡ªûF›ldsSize
); i++) {

170 
okay
 = 
	`dexR—dAndV”ifyCÏssD©aF›ld
(
pD©a
, 
pLim™
,

171 &
»suÉ
->
š¡ªûF›lds
[
i
], &
Ï¡Index
);

174 
Ï¡Index
 = 0;

175 
i
 = 0; 
okay
 && (˜< 
h—d”
.
dœeùM‘hodsSize
); i++) {

176 
okay
 = 
	`dexR—dAndV”ifyCÏssD©aM‘hod
(
pD©a
, 
pLim™
,

177 &
»suÉ
->
dœeùM‘hods
[
i
], &
Ï¡Index
);

180 
Ï¡Index
 = 0;

181 
i
 = 0; 
okay
 && (˜< 
h—d”
.
vœtu®M‘hodsSize
); i++) {

182 
okay
 = 
	`dexR—dAndV”ifyCÏssD©aM‘hod
(
pD©a
, 
pLim™
,

183 &
»suÉ
->
vœtu®M‘hods
[
i
], &
Ï¡Index
);

186 ià(! 
okay
) {

187 
	`ä“
(
»suÉ
);

188  
NULL
;

191  
»suÉ
;

192 
	}
}

	@libdex/DexClass.h

21 #iâdeà
LIBDEX_DEXCLASS_H_


22 
	#LIBDEX_DEXCLASS_H_


	)

24 
	~"DexFe.h
"

25 
	~"Leb128.h
"

28 
	sDexCÏssD©aH—d”
 {

29 
u4
 
	m¡©icF›ldsSize
;

30 
u4
 
	mš¡ªûF›ldsSize
;

31 
u4
 
	mdœeùM‘hodsSize
;

32 
u4
 
	mvœtu®M‘hodsSize
;

36 
	sDexF›ld
 {

37 
u4
 
	mf›ldIdx
;

38 
u4
 
	macûssFÏgs
;

42 
	sDexM‘hod
 {

43 
u4
 
	mm‘hodIdx
;

44 
u4
 
	macûssFÏgs
;

45 
u4
 
	mcodeOff
;

51 
	sDexCÏssD©a
 {

52 
DexCÏssD©aH—d”
 
	mh—d”
;

53 
DexF›ld
* 
	m¡©icF›lds
;

54 
DexF›ld
* 
	mš¡ªûF›lds
;

55 
DexM‘hod
* 
	mdœeùM‘hods
;

56 
DexM‘hod
* 
	mvœtu®M‘hods
;

62 
boŞ
 
dexR—dAndV”ifyCÏssD©aH—d”
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

63 
DexCÏssD©aH—d”
 *
pH—d”
);

76 
boŞ
 
dexR—dAndV”ifyCÏssD©aF›ld
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

77 
DexF›ld
* 
pF›ld
, 
u4
* 
Ï¡Index
);

90 
boŞ
 
dexR—dAndV”ifyCÏssD©aM‘hod
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
,

91 
DexM‘hod
* 
pM‘hod
, 
u4
* 
Ï¡Index
);

103 
DexCÏssD©a
* 
dexR—dAndV”ifyCÏssD©a
(cÚ¡ 
u1
** 
pD©a
, cÚ¡ u1* 
pLim™
);

109 
DEX_INLINE
 cÚ¡ 
DexCode
* 
	$dexG‘Code
(cÚ¡ 
DexFe
* 
pDexFe
,

110 cÚ¡ 
DexM‘hod
* 
pDexM‘hod
)

112 ià(
pDexM‘hod
->
codeOff
 == 0)

113  
NULL
;

114  (cÚ¡ 
DexCode
*è(
pDexFe
->
ba£Addr
 + 
pDexM‘hod
->
codeOff
);

115 
	}
}

121 
DEX_INLINE
 
	$dexR—dCÏssD©aH—d”
(cÚ¡ 
u1
** 
pD©a
,

122 
DexCÏssD©aH—d”
 *
pH—d”
) {

123 
pH—d”
->
¡©icF›ldsSize
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

124 
pH—d”
->
š¡ªûF›ldsSize
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

125 
pH—d”
->
dœeùM‘hodsSize
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

126 
pH—d”
->
vœtu®M‘hodsSize
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

127 
	}
}

136 
DEX_INLINE
 
	$dexR—dCÏssD©aF›ld
(cÚ¡ 
u1
** 
pD©a
, 
DexF›ld
* 
pF›ld
,

137 
u4
* 
Ï¡Index
) {

138 
u4
 
šdex
 = *
Ï¡Index
 + 
	`»adUnsigÃdLeb128
(
pD©a
);

140 
pF›ld
->
acûssFÏgs
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

141 
pF›ld
->
f›ldIdx
 = 
šdex
;

142 *
Ï¡Index
 = 
šdex
;

143 
	}
}

152 
DEX_INLINE
 
	$dexR—dCÏssD©aM‘hod
(cÚ¡ 
u1
** 
pD©a
, 
DexM‘hod
* 
pM‘hod
,

153 
u4
* 
Ï¡Index
) {

154 
u4
 
šdex
 = *
Ï¡Index
 + 
	`»adUnsigÃdLeb128
(
pD©a
);

156 
pM‘hod
->
acûssFÏgs
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

157 
pM‘hod
->
codeOff
 = 
	`»adUnsigÃdLeb128
(
pD©a
);

158 
pM‘hod
->
m‘hodIdx
 = 
šdex
;

159 *
Ï¡Index
 = 
šdex
;

160 
	}
}

	@libdex/DexDataMap.cpp

21 
	~"DexD©aM­.h
"

22 
	~<§ã_iİ.h
>

23 
	~<¡dlib.h
>

28 
DexD©aM­
* 
	$dexD©aM­AÎoc
(
u4
 
maxCouÁ
) {

33 
size_t
 
size
 = 0;

34 
DexD©aM­
* 
m­
 = 
NULL
;

39 ià(!
	`§ã_mul
(&
size
, 
maxCouÁ
, (
u4
è+ (
u2
)) ||

40 !
	`§ã_add
(&
size
, size, (
DexD©aM­
))) {

41  
NULL
;

44 
m­
 = (
DexD©aM­
*è
	`m®loc
(
size
);

46 ià(
m­
 =ğ
NULL
) {

47  
NULL
;

50 
m­
->
couÁ
 = 0;

51 
m­
->
max
 = 
maxCouÁ
;

52 
m­
->
off£ts
 = (
u4
*) (map + 1);

53 
m­
->
ty³s
 = (
u2
*è(m­->
off£ts
 + 
maxCouÁ
);

55  
m­
;

56 
	}
}

61 
	$dexD©aM­F»e
(
DexD©aM­
* 
m­
) {

67 
	`ä“
(
m­
);

68 
	}
}

74 
	$dexD©aM­Add
(
DexD©aM­
* 
m­
, 
u4
 
off£t
, 
u2
 
ty³
) {

75 
	`as£¹
(
m­
 !ğ
NULL
);

76 
	`as£¹
(
m­
->
couÁ
 < m­->
max
);

78 ià((
m­
->
couÁ
 != 0) &&

79 (
m­
->
off£ts
[m­->
couÁ
 - 1] >ğ
off£t
)) {

80 
	`ALOGE
("Out-of-order data map offset: %#xhen %#x",

81 
m­
->
off£ts
[m­->
couÁ
 - 1], 
off£t
);

85 
m­
->
off£ts
[m­->
couÁ
] = 
off£t
;

86 
m­
->
ty³s
[m­->
couÁ
] = 
ty³
;

87 
m­
->
couÁ
++;

88 
	}
}

94 
	$dexD©aM­G‘
(
DexD©aM­
* 
m­
, 
u4
 
off£t
) {

95 
	`as£¹
(
m­
 !ğ
NULL
);

98 
mš
 = 0;

99 
max
 = 
m­
->
couÁ
 - 1;

100 
u4
* 
off£ts
 = 
m­
->offsets;

102 
max
 >ğ
mš
) {

103 
guessIdx
 = (
mš
 + 
max
) >> 1;

104 
u4
 
guess
 = 
off£ts
[
guessIdx
];

106 ià(
off£t
 < 
guess
) {

107 
max
 = 
guessIdx
 - 1;

108 } ià(
off£t
 > 
guess
) {

109 
mš
 = 
guessIdx
 + 1;

112  
m­
->
ty³s
[
guessIdx
];

118 
	}
}

125 
boŞ
 
	$dexD©aM­V”ify
(
DexD©aM­
* 
m­
, 
u4
 
off£t
, 
u2
 
ty³
) {

126 
found
 = 
	`dexD©aM­G‘
(
m­
, 
off£t
);

128 ià(
found
 =ğ
ty³
) {

129  
Œue
;

132 ià(
found
 < 0) {

133 
	`ALOGE
("No data mapƒntry found @ %#x;ƒxpected %x",

134 
off£t
, 
ty³
);

136 
	`ALOGE
("Unexpected data mapƒntry @ %#x:ƒxpected %x, found %x",

137 
off£t
, 
ty³
, 
found
);

140  
çl£
;

141 
	}
}

	@libdex/DexDataMap.h

21 #iâdeà
LIBDEX_DEXDATAMAP_H_


22 
	#LIBDEX_DEXDATAMAP_H_


	)

24 
	~"DexFe.h
"

26 
	sDexD©aM­
 {

27 
u4
 
	mcouÁ
;

28 
u4
 
	mmax
;

29 
u4
* 
	moff£ts
;

30 
u2
* 
	mty³s
;

36 
DexD©aM­
* 
dexD©aM­AÎoc
(
u4
 
maxCouÁ
);

41 
dexD©aM­F»e
(
DexD©aM­
* 
m­
);

47 
dexD©aM­Add
(
DexD©aM­
* 
m­
, 
u4
 
off£t
, 
u2
 
ty³
);

53 
dexD©aM­G‘
(
DexD©aM­
* 
m­
, 
u4
 
off£t
);

60 
boŞ
 
dexD©aM­V”ify
(
DexD©aM­
* 
m­
, 
u4
 
off£t
, 
u2
 
ty³
);

65 
DEX_INLINE
 
boŞ
 
	$dexD©aM­V”ify0Ok
(
DexD©aM­
* 
m­
, 
u4
 
off£t
, 
u2
 
ty³
) {

66 ià(
off£t
 == 0) {

67  
Œue
;

70  
	`dexD©aM­V”ify
(
m­
, 
off£t
, 
ty³
);

71 
	}
}

	@libdex/DexDebugInfo.cpp

21 
	~"DexDebugInfo.h
"

22 
	~"DexPrÙo.h
"

23 
	~"Leb128.h
"

25 
	~<¡dlib.h
>

26 
	~<¡ršg.h
>

36 
	$decodeSigÇtu»
(cÚ¡ ** 
pSig
)

38 cÚ¡ * 
sig
 = *
pSig
;

40 ià(*
sig
 == '(')

41 
sig
++;

43 ià(*
sig
 == 'L') {

45 *++
sig
 != ';')

47 *
pSig
 = 
sig
+1;

50 ià(*
sig
 == '[') {

52 *++
sig
 == '[')

54 ià(*
sig
 == 'L') {

55 *++
sig
 != ';')

58 *
pSig
 = 
sig
+1;

61 ià(*
sig
 == '\0')

62  *
sig
;

64 *
pSig
 = 
sig
+1;

65  *
sig
;

66 
	}
}

73 
	$ty³L’gth
(cÚ¡ *
ty³
) {

75 cÚ¡ *
’d
 = 
ty³
;

76 
	`decodeSigÇtu»
(&
’d
);

77  
’d
 - 
ty³
;

78 
	}
}

84 cÚ¡ * 
	$»adSŒšgIdx
(cÚ¡ 
DexFe
* 
pDexFe
,

85 cÚ¡ 
u1
** 
pSŒ—m
) {

86 
u4
 
¡ršgIdx
 = 
	`»adUnsigÃdLeb128
(
pSŒ—m
);

89 ià(
¡ršgIdx
 == 0) {

90  
NULL
;

92  
	`dexSŒšgById
(
pDexFe
, 
¡ršgIdx
 - 1);

94 
	}
}

100 cÚ¡ * 
	$»adTy³Idx
(cÚ¡ 
DexFe
* 
pDexFe
,

101 cÚ¡ 
u1
** 
pSŒ—m
) {

102 
u4
 
ty³Idx
 = 
	`»adUnsigÃdLeb128
(
pSŒ—m
);

105 ià(
ty³Idx
 == 0) {

106  
NULL
;

108  
	`dexSŒšgByTy³Idx
(
pDexFe
, 
ty³Idx
 - 1);

110 
	}
}

112 
	sLoÿlInfo
 {

113 cÚ¡ *
	mÇme
;

114 cÚ¡ *
	mdesütÜ
;

115 cÚ¡ *
	msigÇtu»
;

116 
u2
 
	m¡¬tAdd»ss
;

117 
boŞ
 
	mlive
;

120 
	$em™LoÿlCbIfLive
(*
úxt
, 
»g
, 
u4
 
’dAdd»ss
,

121 
LoÿlInfo
 *
loÿlInReg
, 
DexDebugNewLoÿlCb
 
loÿlCb
)

123 ià(
loÿlCb
 !ğ
NULL
 && 
loÿlInReg
[
»g
].
live
) {

124 
	`loÿlCb
(
úxt
, 
»g
, 
loÿlInReg
[»g].
¡¬tAdd»ss
, 
’dAdd»ss
,

125 
loÿlInReg
[
»g
].
Çme
,

126 
loÿlInReg
[
»g
].
desütÜ
,

127 
loÿlInReg
[
»g
].
sigÇtu»
 =ğ
NULL


128 ? "" : 
loÿlInReg
[
»g
].
sigÇtu»
 );

130 
	}
}

132 
	$šv®idSŒ—m
(cÚ¡ * 
şassDesütÜ
, cÚ¡ 
DexPrÙo
* 
´Ùo
) {

133 
	`IF_ALOGE
() {

134 * 
m‘hodDesütÜ
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(
´Ùo
);

135 
	`ALOGE
("Invalid debug info stream. class %s;…roto %s",

136 
şassDesütÜ
, 
m‘hodDesütÜ
);

137 
	`ä“
(
m‘hodDesütÜ
);

139 
	}
}

141 
	$dexDecodeDebugInfo0
(

142 cÚ¡ 
DexFe
* 
pDexFe
,

143 cÚ¡ 
DexCode
* 
pCode
,

144 cÚ¡ * 
şassDesütÜ
,

145 
u4
 
´ÙoIdx
,

146 
u4
 
acûssFÏgs
,

147 
DexDebugNewPos™iÚCb
 
posCb
, 
DexDebugNewLoÿlCb
 
loÿlCb
,

148 * 
úxt
,

149 cÚ¡ 
u1
* 
¡»am
,

150 
LoÿlInfo
* 
loÿlInReg
)

152 
DexPrÙo
 
´Ùo
 = { 
pDexFe
, 
´ÙoIdx
 };

153 
u4
 
š¢sSize
 = 
pCode
->insnsSize;

154 
u4
 
lše
 = 
	`»adUnsigÃdLeb128
(&
¡»am
);

155 
u4
 
·¿m‘”sSize
 = 
	`»adUnsigÃdLeb128
(&
¡»am
);

156 
u2
 
¬gReg
 = 
pCode
->
»gi¡”sSize
 -…Code->
šsSize
;

157 
u4
 
add»ss
 = 0;

159 ià((
acûssFÏgs
 & 
ACC_STATIC
) == 0) {

166 
	`as£¹
(
pCode
->
šsSize
 =ğ(
	`dexPrÙoCompu‹ArgsSize
(&
´Ùo
) + 1));

167 
loÿlInReg
[
¬gReg
].
Çme
 = "this";

168 
loÿlInReg
[
¬gReg
].
desütÜ
 = 
şassDesütÜ
;

169 
loÿlInReg
[
¬gReg
].
¡¬tAdd»ss
 = 0;

170 
loÿlInReg
[
¬gReg
].
live
 = 
Œue
;

171 
¬gReg
++;

173 
	`as£¹
(
pCode
->
šsSize
 =ğ
	`dexPrÙoCompu‹ArgsSize
(&
´Ùo
));

176 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

177 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
´Ùo
);

179 
·¿m‘”sSize
-- != 0) {

180 cÚ¡ * 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

181 cÚ¡ *
Çme
;

182 
»g
;

184 ià((
¬gReg
 >ğ
pCode
->
»gi¡”sSize
è|| (
desütÜ
 =ğ
NULL
)) {

185 
	`šv®idSŒ—m
(
şassDesütÜ
, &
´Ùo
);

189 
Çme
 = 
	`»adSŒšgIdx
(
pDexFe
, &
¡»am
);

190 
»g
 = 
¬gReg
;

192 
desütÜ
[0]) {

195 
¬gReg
 += 2;

198 
¬gReg
 += 1;

202 ià(
Çme
 !ğ
NULL
) {

203 
loÿlInReg
[
»g
].
Çme
 =‚ame;

204 
loÿlInReg
[
»g
].
desütÜ
 = descriptor;

205 
loÿlInReg
[
»g
].
sigÇtu»
 = 
NULL
;

206 
loÿlInReg
[
»g
].
¡¬tAdd»ss
 = 
add»ss
;

207 
loÿlInReg
[
»g
].
live
 = 
Œue
;

212 
u1
 
İcode
 = *
¡»am
++;

213 
u2
 
»g
;

215 
İcode
) {

216 
DBG_END_SEQUENCE
:

219 
DBG_ADVANCE_PC
:

220 
add»ss
 +ğ
	`»adUnsigÃdLeb128
(&
¡»am
);

223 
DBG_ADVANCE_LINE
:

224 
lše
 +ğ
	`»adSigÃdLeb128
(&
¡»am
);

227 
DBG_START_LOCAL
:

228 
DBG_START_LOCAL_EXTENDED
:

229 
»g
 = 
	`»adUnsigÃdLeb128
(&
¡»am
);

230 ià(
»g
 > 
pCode
->
»gi¡”sSize
) {

231 
	`šv®idSŒ—m
(
şassDesütÜ
, &
´Ùo
);

236 
	`em™LoÿlCbIfLive
(
úxt
, 
»g
, 
add»ss
,

237 
loÿlInReg
, 
loÿlCb
);

239 
loÿlInReg
[
»g
].
Çme
 = 
	`»adSŒšgIdx
(
pDexFe
, &
¡»am
);

240 
loÿlInReg
[
»g
].
desütÜ
 = 
	`»adTy³Idx
(
pDexFe
, &
¡»am
);

241 ià(
İcode
 =ğ
DBG_START_LOCAL_EXTENDED
) {

242 
loÿlInReg
[
»g
].
sigÇtu»


243 ğ
	`»adSŒšgIdx
(
pDexFe
, &
¡»am
);

245 
loÿlInReg
[
»g
].
sigÇtu»
 = 
NULL
;

247 
loÿlInReg
[
»g
].
¡¬tAdd»ss
 = 
add»ss
;

248 
loÿlInReg
[
»g
].
live
 = 
Œue
;

251 
DBG_END_LOCAL
:

252 
»g
 = 
	`»adUnsigÃdLeb128
(&
¡»am
);

253 ià(
»g
 > 
pCode
->
»gi¡”sSize
) {

254 
	`šv®idSŒ—m
(
şassDesütÜ
, &
´Ùo
);

258 
	`em™LoÿlCbIfLive
 (
úxt
, 
»g
, 
add»ss
, 
loÿlInReg
, 
loÿlCb
);

259 
loÿlInReg
[
»g
].
live
 = 
çl£
;

262 
DBG_RESTART_LOCAL
:

263 
»g
 = 
	`»adUnsigÃdLeb128
(&
¡»am
);

264 ià(
»g
 > 
pCode
->
»gi¡”sSize
) {

265 
	`šv®idSŒ—m
(
şassDesütÜ
, &
´Ùo
);

269 ià(
loÿlInReg
[
»g
].
Çme
 =ğ
NULL


270 || 
loÿlInReg
[
»g
].
desütÜ
 =ğ
NULL
) {

271 
	`šv®idSŒ—m
(
şassDesütÜ
, &
´Ùo
);

279 ià(!
loÿlInReg
[
»g
].
live
) {

280 
loÿlInReg
[
»g
].
¡¬tAdd»ss
 = 
add»ss
;

281 
loÿlInReg
[
»g
].
live
 = 
Œue
;

285 
DBG_SET_PROLOGUE_END
:

286 
DBG_SET_EPILOGUE_BEGIN
:

287 
DBG_SET_FILE
:

291 
adjİcode
 = 
İcode
 - 
DBG_FIRST_SPECIAL
;

293 
add»ss
 +ğ
adjİcode
 / 
DBG_LINE_RANGE
;

294 
lše
 +ğ
DBG_LINE_BASE
 + (
adjİcode
 % 
DBG_LINE_RANGE
);

296 ià(
posCb
 !ğ
NULL
) {

297 
dÚe
;

298 
dÚe
 = 
	`posCb
(
úxt
, 
add»ss
, 
lše
);

300 ià(
dÚe
) {

309 
	}
}

312 
	$dexDecodeDebugInfo
(

313 cÚ¡ 
DexFe
* 
pDexFe
,

314 cÚ¡ 
DexCode
* 
pCode
,

315 cÚ¡ * 
şassDesütÜ
,

316 
u4
 
´ÙoIdx
,

317 
u4
 
acûssFÏgs
,

318 
DexDebugNewPos™iÚCb
 
posCb
, 
DexDebugNewLoÿlCb
 
loÿlCb
,

319 * 
úxt
)

321 cÚ¡ 
u1
* 
¡»am
 = 
	`dexG‘DebugInfoSŒ—m
(
pDexFe
, 
pCode
);

322 
LoÿlInfo
 
loÿlInReg
[
pCode
->
»gi¡”sSize
];

324 
	`mem£t
(
loÿlInReg
, 0, (
LoÿlInfo
è* 
pCode
->
»gi¡”sSize
);

326 ià(
¡»am
 !ğ
NULL
) {

327 
	`dexDecodeDebugInfo0
(
pDexFe
, 
pCode
, 
şassDesütÜ
, 
´ÙoIdx
, 
acûssFÏgs
,

328 
posCb
, 
loÿlCb
, 
úxt
, 
¡»am
, 
loÿlInReg
);

331 
»g
 = 0;„eg < 
pCode
->
»gi¡”sSize
;„eg++) {

332 
	`em™LoÿlCbIfLive
(
úxt
, 
»g
, 
pCode
->
š¢sSize
, 
loÿlInReg
, 
loÿlCb
);

334 
	}
}

	@libdex/DexDebugInfo.h

21 #iâdeà
LIBDEX_DEXDEBUGINFO_H_


22 
	#LIBDEX_DEXDEBUGINFO_H_


	)

24 
	~"DexFe.h
"

30 (*
	tDexDebugNewPos™iÚCb
)(*
	túxt
, 
	tu4
 
	tadd»ss
, u4 
	tlšeNum
);

36 (*
	tDexDebugNewLoÿlCb
)(*
	túxt
, 
	tu2
 
	t»g
, 
	tu4
 
	t¡¬tAdd»ss
,

37 
	tu4
 
	t’dAdd»ss
, cÚ¡ *
	tÇme
, cÚ¡ *
	tdesütÜ
,

38 cÚ¡ *
	tsigÇtu»
);

46 
	`dexDecodeDebugInfo
(

47 cÚ¡ 
DexFe
* 
pDexFe
,

48 cÚ¡ 
DexCode
* 
pDexCode
,

49 cÚ¡ * 
şassDesütÜ
,

50 
u4
 
´ÙoIdx
,

51 
u4
 
acûssFÏgs
,

52 
DexDebugNewPos™iÚCb
 
posCb
, 
DexDebugNewLoÿlCb
 
loÿlCb
,

53 * 
úxt
);

	@libdex/DexFile.cpp

21 
	~"DexFe.h
"

22 
	~"DexO±D©a.h
"

23 
	~"DexPrÙo.h
"

24 
	~"DexC©ch.h
"

25 
	~"Leb128.h
"

26 
	~"sha1.h
"

27 
	~"ZArchive.h
"

29 
	~<zlib.h
>

31 
	~<¡dlib.h
>

32 
	~<¡ddef.h
>

33 
	~<¡ršg.h
>

34 
	~<fú.h
>

35 
	~<”ºo.h
>

43 cÚ¡ 
boŞ
 
	gkV”ifyChecksum
 = 
çl£
;

44 cÚ¡ 
boŞ
 
	gkV”ifySigÇtu»
 = 
çl£
;

47 
	$dexG‘Prim™iveTy³DesütÜCh¬
(
Prim™iveTy³
 
ty³
) {

48 cÚ¡ * 
¡ršg
 = 
	`dexG‘Prim™iveTy³DesütÜ
(
ty³
);

50  (
¡ršg
 =ğ
NULL
) ? '\0' : string[0];

51 
	}
}

54 cÚ¡ * 
	$dexG‘Prim™iveTy³DesütÜ
(
Prim™iveTy³
 
ty³
) {

55 
ty³
) {

56 
PRIM_VOID
:  "V";

57 
PRIM_BOOLEAN
:  "Z";

58 
PRIM_BYTE
:  "B";

59 
PRIM_SHORT
:  "S";

60 
PRIM_CHAR
:  "C";

61 
PRIM_INT
:  "I";

62 
PRIM_LONG
:  "J";

63 
PRIM_FLOAT
:  "F";

64 
PRIM_DOUBLE
:  "D";

65 :  
NULL
;

68  
NULL
;

69 
	}
}

72 cÚ¡ * 
	$dexG‘BoxedTy³DesütÜ
(
Prim™iveTy³
 
ty³
) {

73 
ty³
) {

74 
PRIM_VOID
:  
NULL
;

75 
PRIM_BOOLEAN
:  "Ljava/lang/Boolean;";

76 
PRIM_BYTE
:  "Ljava/lang/Byte;";

77 
PRIM_SHORT
:  "Ljava/lang/Short;";

78 
PRIM_CHAR
:  "Ljava/lang/Character;";

79 
PRIM_INT
:  "Ljava/lang/Integer;";

80 
PRIM_LONG
:  "Ljava/lang/Long;";

81 
PRIM_FLOAT
:  "Ljava/lang/Float;";

82 
PRIM_DOUBLE
:  "Ljava/lang/Double;";

83 :  
NULL
;

85 
	}
}

88 
Prim™iveTy³
 
	$dexG‘Prim™iveTy³FromDesütÜCh¬
(
desütÜCh¬
) {

89 
desütÜCh¬
) {

90 'V':  
PRIM_VOID
;

91 'Z':  
PRIM_BOOLEAN
;

92 'B':  
PRIM_BYTE
;

93 'S':  
PRIM_SHORT
;

94 'C':  
PRIM_CHAR
;

95 'I':  
PRIM_INT
;

96 'J':  
PRIM_LONG
;

97 'F':  
PRIM_FLOAT
;

98 'D':  
PRIM_DOUBLE
;

99 :  
PRIM_NOT
;

101 
	}
}

105 cÚ¡ * 
	$dexSŒšgAndSizeById
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
,

106 
u4
* 
utf16Size
) {

107 cÚ¡ 
DexSŒšgId
* 
pSŒšgId
 = 
	`dexG‘SŒšgId
(
pDexFe
, 
idx
);

108 cÚ¡ 
u1
* 
±r
 = 
pDexFe
->
ba£Addr
 + 
pSŒšgId
->
¡ršgD©aOff
;

110 *
utf16Size
 = 
	`»adUnsigÃdLeb128
(&
±r
);

111  (cÚ¡ *è
±r
;

112 
	}
}

118 cÚ¡ * 
dvmSHA1Dige¡ToSŒ
(cÚ¡ 
dige¡
[], * 
tmpBuf
);

123 
	$dexCompu‹SHA1Dige¡
(cÚ¡ * 
d©a
, 
size_t
 
Ëngth
,

124 
dige¡
[])

126 
SHA1_CTX
 
cÚ‹xt
;

127 
	`SHA1In™
(&
cÚ‹xt
);

128 
	`SHA1Upd©e
(&
cÚ‹xt
, 
d©a
, 
Ëngth
);

129 
	`SHA1Fš®
(
dige¡
, &
cÚ‹xt
);

130 
	}
}

136 cÚ¡ * 
	$dexSHA1Dige¡ToSŒ
(cÚ¡ 
dige¡
[],* 
tmpBuf
)

138 cÚ¡ 
hexDig™
[] = "0123456789abcdef";

139 * 
ı
;

140 
i
;

142 
ı
 = 
tmpBuf
;

143 
i
 = 0; i < 
kSHA1Dige¡L’
; i++) {

144 *
ı
++ = 
hexDig™
[
dige¡
[
i
] >> 4];

145 *
ı
++ = 
hexDig™
[
dige¡
[
i
] & 0x0f];

147 *
ı
++ = '\0';

149 
	`as£¹
(
ı
 =ğ
tmpBuf
 + 
kSHA1Dige¡OuutL’
);

151  
tmpBuf
;

152 
	}
}

163 
u4
 
	$şassDesütÜHash
(cÚ¡ * 
¡r
)

165 
u4
 
hash
 = 1;

167 *
¡r
 != '\0')

168 
hash
 = hash * 31 + *
¡r
++;

170  
hash
;

171 
	}
}

177 
	$şassLookupAdd
(
DexFe
* 
pDexFe
, 
DexCÏssLookup
* 
pLookup
,

178 
¡ršgOff
, 
şassDefOff
, * 
pNumProbes
)

180 cÚ¡ * 
şassDesütÜ
 =

181 (cÚ¡ *è(
pDexFe
->
ba£Addr
 + 
¡ršgOff
);

182 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
 =

183 (cÚ¡ 
DexCÏssDef
*è(
pDexFe
->
ba£Addr
 + 
şassDefOff
);

184 
u4
 
hash
 = 
	`şassDesütÜHash
(
şassDesütÜ
);

185 
mask
 = 
pLookup
->
numEÁr›s
-1;

186 
idx
 = 
hash
 & 
mask
;

192 
´obes
 = 0;

193 
pLookup
->
bË
[
idx
].
şassDesütÜOff£t
 != 0) {

194 
idx
 = (idx + 1è& 
mask
;

195 
´obes
++;

200 
pLookup
->
bË
[
idx
].
şassDesütÜHash
 = 
hash
;

201 
pLookup
->
bË
[
idx
].
şassDesütÜOff£t
 = 
¡ršgOff
;

202 
pLookup
->
bË
[
idx
].
şassDefOff£t
 = 
şassDefOff
;

203 *
pNumProbes
 = 
´obes
;

204 
	}
}

211 
DexCÏssLookup
* 
	$dexC»©eCÏssLookup
(
DexFe
* 
pDexFe
)

213 
DexCÏssLookup
* 
pLookup
;

214 
®locSize
;

215 
i
, 
numEÁr›s
;

216 
numProbes
, 
tÙ®Probes
, 
maxProbes
;

218 
numProbes
 = 
tÙ®Probes
 = 
maxProbes
 = 0;

220 
	`as£¹
(
pDexFe
 !ğ
NULL
);

229 
numEÁr›s
 = 
	`dexRoundUpPow”2
(
pDexFe
->
pH—d”
->
şassDefsSize
 * 2);

230 
®locSize
 = 
	`off£tof
(
DexCÏssLookup
, 
bË
)

231 + 
numEÁr›s
 * (
pLookup
->
bË
[0]);

233 
pLookup
 = (
DexCÏssLookup
*è
	`ÿÎoc
(1, 
®locSize
);

234 ià(
pLookup
 =ğ
NULL
)

235  
NULL
;

236 
pLookup
->
size
 = 
®locSize
;

237 
pLookup
->
numEÁr›s
 =‚umEntries;

239 
i
 = 0; i < ()
pDexFe
->
pH—d”
->
şassDefsSize
; i++) {

240 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

241 cÚ¡ * 
pSŒšg
;

243 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
i
);

244 
pSŒšg
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

246 
	`şassLookupAdd
(
pDexFe
, 
pLookup
,

247 (
u1
*)
pSŒšg
 - 
pDexFe
->
ba£Addr
,

248 (
u1
*)
pCÏssDef
 - 
pDexFe
->
ba£Addr
, &
numProbes
);

250 ià(
numProbes
 > 
maxProbes
)

251 
maxProbes
 = 
numProbes
;

252 
tÙ®Probes
 +ğ
numProbes
;

255 
	`ALOGV
("Class†ookup: classes=%d slots=%d (%d%% occ)‡lloc=%d"

257 
pDexFe
->
pH—d”
->
şassDefsSize
, 
numEÁr›s
,

258 (100 * 
pDexFe
->
pH—d”
->
şassDefsSize
è/ 
numEÁr›s
,

259 
®locSize
, 
tÙ®Probes
, 
maxProbes
);

261  
pLookup
;

262 
	}
}

269 
	$dexFeS‘upBasicPoš‹rs
(
DexFe
* 
pDexFe
, cÚ¡ 
u1
* 
d©a
) {

270 
DexH—d”
 *
pH—d”
 = (DexH—d”*è
d©a
;

272 
pDexFe
->
ba£Addr
 = 
d©a
;

273 
pDexFe
->
pH—d”
 =…Header;

274 
pDexFe
->
pSŒšgIds
 = (cÚ¡ 
DexSŒšgId
*è(
d©a
 + 
pH—d”
->
¡ršgIdsOff
);

275 
pDexFe
->
pTy³Ids
 = (cÚ¡ 
DexTy³Id
*è(
d©a
 + 
pH—d”
->
ty³IdsOff
);

276 
pDexFe
->
pF›ldIds
 = (cÚ¡ 
DexF›ldId
*è(
d©a
 + 
pH—d”
->
f›ldIdsOff
);

277 
pDexFe
->
pM‘hodIds
 = (cÚ¡ 
DexM‘hodId
*è(
d©a
 + 
pH—d”
->
m‘hodIdsOff
);

278 
pDexFe
->
pPrÙoIds
 = (cÚ¡ 
DexPrÙoId
*è(
d©a
 + 
pH—d”
->
´ÙoIdsOff
);

279 
pDexFe
->
pCÏssDefs
 = (cÚ¡ 
DexCÏssDef
*è(
d©a
 + 
pH—d”
->
şassDefsOff
);

280 
pDexFe
->
pLškD©a
 = (cÚ¡ 
DexLšk
*è(
d©a
 + 
pH—d”
->
lškOff
);

281 
	}
}

289 
DexFe
* 
	$dexFeP¬£
(cÚ¡ 
u1
* 
d©a
, 
size_t
 
Ëngth
, 
æags
)

291 
DexFe
* 
pDexFe
 = 
NULL
;

292 cÚ¡ 
DexH—d”
* 
pH—d”
;

293 cÚ¡ 
u1
* 
magic
;

294 
»suÉ
 = -1;

296 ià(
Ëngth
 < (
DexH—d”
)) {

297 
	`ALOGE
("too shorto be‡ valid .dex");

298 
ba
;

301 
pDexFe
 = (
DexFe
*è
	`m®loc
((DexFile));

302 ià(
pDexFe
 =ğ
NULL
)

303 
ba
;

304 
	`mem£t
(
pDexFe
, 0, (
DexFe
));

309 ià(
	`memcmp
(
d©a
, 
DEX_OPT_MAGIC
, 4) == 0) {

310 
magic
 = 
d©a
;

311 ià(
	`memcmp
(
magic
+4, 
DEX_OPT_MAGIC_VERS
, 4) != 0) {

312 
	`ALOGE
("bad opt version (0x%02x %02x %02x %02x)",

313 
magic
[4], magic[5], magic[6], magic[7]);

314 
ba
;

317 
pDexFe
->
pO±H—d”
 = (cÚ¡ 
DexO±H—d”
*è
d©a
;

318 
	`ALOGV
("Good opt header, DEX offset is %d, flags=0x%02x",

319 
pDexFe
->
pO±H—d”
->
dexOff£t
,…DexFe->pO±H—d”->
æags
);

322 ià(!
	`dexP¬£O±D©a
(
d©a
, 
Ëngth
, 
pDexFe
))

323 
ba
;

326 
d©a
 +ğ
pDexFe
->
pO±H—d”
->
dexOff£t
;

327 
Ëngth
 -ğ
pDexFe
->
pO±H—d”
->
dexOff£t
;

328 ià(
pDexFe
->
pO±H—d”
->
dexL’gth
 > 
Ëngth
) {

329 
	`ALOGE
("Fileruncated? stored†en=%d,„em†en=%d",

330 
pDexFe
->
pO±H—d”
->
dexL’gth
, (è
Ëngth
);

331 
ba
;

333 
Ëngth
 = 
pDexFe
->
pO±H—d”
->
dexL’gth
;

336 
	`dexFeS‘upBasicPoš‹rs
(
pDexFe
, 
d©a
);

337 
pH—d”
 = 
pDexFe
->pHeader;

339 ià(!
	`dexHasV®idMagic
(
pH—d”
)) {

340 
ba
;

348 ià(
æags
 & 
kDexP¬£V”ifyChecksum
) {

349 
u4
 
adËr
 = 
	`dexCompu‹Checksum
(
pH—d”
);

350 ià(
adËr
 !ğ
pH—d”
->
checksum
) {

351 
	`ALOGE
("ERROR: bad checksum (%08x vs %08x)",

352 
adËr
, 
pH—d”
->
checksum
);

353 ià(!(
æags
 & 
kDexP¬£CÚtšueOnE¼Ü
))

354 
ba
;

356 
	`ALOGV
("+++‡dËr32 checksum (%08xèv”if›d", 
adËr
);

359 cÚ¡ 
DexO±H—d”
* 
pO±H—d”
 = 
pDexFe
->pOptHeader;

360 ià(
pO±H—d”
 !ğ
NULL
) {

361 
adËr
 = 
	`dexCompu‹O±Checksum
(
pO±H—d”
);

362 ià(
adËr
 !ğ
pO±H—d”
->
checksum
) {

363 
	`ALOGE
("ERROR: bad opt checksum (%08x vs %08x)",

364 
adËr
, 
pO±H—d”
->
checksum
);

365 ià(!(
æags
 & 
kDexP¬£CÚtšueOnE¼Ü
))

366 
ba
;

368 
	`ALOGV
("+++‡dËr32 o± checksum (%08xèv”if›d", 
adËr
);

379 ià(
kV”ifySigÇtu»
) {

380 
sha1Dige¡
[
kSHA1Dige¡L’
];

381 cÚ¡ 
nÚSum
 = (
pH—d”
->
magic
è+ ÕH—d”->
checksum
) +

382 
kSHA1Dige¡L’
;

384 
	`dexCompu‹SHA1Dige¡
(
d©a
 + 
nÚSum
, 
Ëngth
 -‚ÚSum, 
sha1Dige¡
);

385 ià(
	`memcmp
(
sha1Dige¡
, 
pH—d”
->
sigÇtu»
, 
kSHA1Dige¡L’
) != 0) {

386 
tmpBuf1
[
kSHA1Dige¡OuutL’
];

387 
tmpBuf2
[
kSHA1Dige¡OuutL’
];

388 
	`ALOGE
("ERROR: bad SHA1 digest (%s vs %s)",

389 
	`dexSHA1Dige¡ToSŒ
(
sha1Dige¡
, 
tmpBuf1
),

390 
	`dexSHA1Dige¡ToSŒ
(
pH—d”
->
sigÇtu»
, 
tmpBuf2
));

391 ià(!(
æags
 & 
kDexP¬£CÚtšueOnE¼Ü
))

392 
ba
;

394 
	`ALOGV
("+++ sha1 digest verified");

398 ià(
pH—d”
->
feSize
 !ğ
Ëngth
) {

399 
	`ALOGE
("ERROR: stored file size (%d) !=ƒxpected (%d)",

400 (è
pH—d”
->
feSize
, (è
Ëngth
);

401 ià(!(
æags
 & 
kDexP¬£CÚtšueOnE¼Ü
))

402 
ba
;

405 ià(
pH—d”
->
şassDefsSize
 == 0) {

406 
	`ALOGE
("ERROR: DEX file has‚o classes in it, failing");

407 
ba
;

413 
»suÉ
 = 0;

415 
ba
:

416 ià(
»suÉ
 !ğ0 && 
pDexFe
 !ğ
NULL
) {

417 
	`dexFeF»e
(
pDexFe
);

418 
pDexFe
 = 
NULL
;

420  
pDexFe
;

421 
	}
}

428 
	$dexFeF»e
(
DexFe
* 
pDexFe
)

430 ià(
pDexFe
 =ğ
NULL
)

433 
	`ä“
(
pDexFe
);

434 
	}
}

441 cÚ¡ 
DexCÏssDef
* 
	$dexFšdCÏss
(cÚ¡ 
DexFe
* 
pDexFe
,

442 cÚ¡ * 
desütÜ
)

444 cÚ¡ 
DexCÏssLookup
* 
pLookup
 = 
pDexFe
->
pCÏssLookup
;

445 
u4
 
hash
;

446 
idx
, 
mask
;

448 
hash
 = 
	`şassDesütÜHash
(
desütÜ
);

449 
mask
 = 
pLookup
->
numEÁr›s
 - 1;

450 
idx
 = 
hash
 & 
mask
;

455 
Œue
) {

456 
off£t
;

458 
off£t
 = 
pLookup
->
bË
[
idx
].
şassDesütÜOff£t
;

459 ià(
off£t
 == 0)

460  
NULL
;

462 ià(
pLookup
->
bË
[
idx
].
şassDesütÜHash
 =ğ
hash
) {

463 cÚ¡ * 
¡r
;

465 
¡r
 = (cÚ¡ *è(
pDexFe
->
ba£Addr
 + 
off£t
);

466 ià(
	`¡rcmp
(
¡r
, 
desütÜ
) == 0) {

467  (cÚ¡ 
DexCÏssDef
*)

468 (
pDexFe
->
ba£Addr
 + 
pLookup
->
bË
[
idx
].
şassDefOff£t
);

472 
idx
 = (idx + 1è& 
mask
;

474 
	}
}

480 
u4
 
	$dexCompu‹Checksum
(cÚ¡ 
DexH—d”
* 
pH—d”
)

482 cÚ¡ 
u1
* 
¡¬t
 = (cÚ¡ u1*è
pH—d”
;

484 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

485 cÚ¡ 
nÚSum
 = (
pH—d”
->
magic
è+ ÕH—d”->
checksum
);

487  (
u4
è
	`adËr32
(
adËr
, 
¡¬t
 + 
nÚSum
, 
pH—d”
->
feSize
 -‚onSum);

488 
	}
}

493 
size_t
 
	$dexG‘DexCodeSize
(cÚ¡ 
DexCode
* 
pCode
)

499 
u4
 
hªdËrsSize
;

500 
u4
 
off£t
;

501 
u4
 
ui
;

503 ià(
pCode
->
Œ›sSize
 != 0) {

504 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

505 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

507 
hªdËrsSize
 = 0;

508 
off£t
 = 0;

511 
ui
 = 0; u˜< 
hªdËrsSize
; ui++) {

512 
DexC©chI‹¿tÜ
 
™”©Ü
;

513 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

514 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

517 cÚ¡ 
u1
* 
hªdËrD©a
 = 
	`dexG‘C©chHªdËrD©a
(
pCode
);

523  (
hªdËrD©a
 - (
u1
*è
pCode
è+ 
off£t
;

524 
	}
}

531 
u4
 
	$dexRoundUpPow”2
(
u4
 
v®
)

533 
v®
--;

534 
v®
 |= val >> 1;

535 
v®
 |= val >> 2;

536 
v®
 |= val >> 4;

537 
v®
 |= val >> 8;

538 
v®
 |= val >> 16;

539 
v®
++;

541  
v®
;

542 
	}
}

	@libdex/DexFile.h

33 #iâdeà
LIBDEX_DEXFILE_H_


34 
	#LIBDEX_DEXFILE_H_


	)

36 
	~"vm/CommÚ.h
"

37 
	~"libdex/SysUt.h
"

44 #iâdeà
_DEX_GEN_INLINES


45 
	#DEX_INLINE
 
__šlše__


	)

47 
	#DEX_INLINE


	)

51 
	#DEX_MAGIC
 "dex\n"

	)

54 
	#DEX_MAGIC_VERS
 "036\0"

	)

60 
	#DEX_MAGIC_VERS_API_13
 "035\0"

	)

63 
	#DEX_OPT_MAGIC
 "dey\n"

	)

64 
	#DEX_OPT_MAGIC_VERS
 "036\0"

	)

66 
	#DEX_DEP_MAGIC
 "d•s"

	)

71 ’um { 
kSHA1Dige¡L’
 = 20,

72 
kSHA1Dige¡OuutL’
 = 
kSHA1Dige¡L’
*2 +1 };

76 
	mkDexEndŸnCÚ¡ªt
 = 0x12345678,

77 
	mkDexNoIndex
 = 0xffffffff,

83 
	ePrim™iveTy³
 {

84 
	mPRIM_NOT
 = 0,

85 
	mPRIM_VOID
 = 1,

86 
	mPRIM_BOOLEAN
 = 2,

87 
	mPRIM_BYTE
 = 3,

88 
	mPRIM_SHORT
 = 4,

89 
	mPRIM_CHAR
 = 5,

90 
	mPRIM_INT
 = 6,

91 
	mPRIM_LONG
 = 7,

92 
	mPRIM_FLOAT
 = 8,

93 
	mPRIM_DOUBLE
 = 9,

103 
	mACC_PUBLIC
 = 0x00000001,

104 
	mACC_PRIVATE
 = 0x00000002,

105 
	mACC_PROTECTED
 = 0x00000004,

106 
	mACC_STATIC
 = 0x00000008,

107 
	mACC_FINAL
 = 0x00000010,

108 
	mACC_SYNCHRONIZED
 = 0x00000020,

109 
	mACC_SUPER
 = 0x00000020,

110 
	mACC_VOLATILE
 = 0x00000040,

111 
	mACC_BRIDGE
 = 0x00000040,

112 
	mACC_TRANSIENT
 = 0x00000080,

113 
	mACC_VARARGS
 = 0x00000080,

114 
	mACC_NATIVE
 = 0x00000100,

115 
	mACC_INTERFACE
 = 0x00000200,

116 
	mACC_ABSTRACT
 = 0x00000400,

117 
	mACC_STRICT
 = 0x00000800,

118 
	mACC_SYNTHETIC
 = 0x00001000,

119 
	mACC_ANNOTATION
 = 0x00002000,

120 
	mACC_ENUM
 = 0x00004000,

121 
	mACC_CONSTRUCTOR
 = 0x00010000,

122 
	mACC_DECLARED_SYNCHRONIZED
 =

124 
	mACC_CLASS_MASK
 =

125 (
ACC_PUBLIC
 | 
ACC_FINAL
 | 
ACC_INTERFACE
 | 
ACC_ABSTRACT


126 | 
ACC_SYNTHETIC
 | 
ACC_ANNOTATION
 | 
ACC_ENUM
),

127 
	mACC_INNER_CLASS_MASK
 =

128 (
ACC_CLASS_MASK
 | 
ACC_PRIVATE
 | 
ACC_PROTECTED
 | 
ACC_STATIC
),

129 
	mACC_FIELD_MASK
 =

130 (
ACC_PUBLIC
 | 
ACC_PRIVATE
 | 
ACC_PROTECTED
 | 
ACC_STATIC
 | 
ACC_FINAL


131 | 
ACC_VOLATILE
 | 
ACC_TRANSIENT
 | 
ACC_SYNTHETIC
 | 
ACC_ENUM
),

132 
	mACC_METHOD_MASK
 =

133 (
ACC_PUBLIC
 | 
ACC_PRIVATE
 | 
ACC_PROTECTED
 | 
ACC_STATIC
 | 
ACC_FINAL


134 | 
ACC_SYNCHRONIZED
 | 
ACC_BRIDGE
 | 
ACC_VARARGS
 | 
ACC_NATIVE


135 | 
ACC_ABSTRACT
 | 
ACC_STRICT
 | 
ACC_SYNTHETIC
 | 
ACC_CONSTRUCTOR


136 | 
ACC_DECLARED_SYNCHRONIZED
),

141 
	mkDexVisib™yBud
 = 0x00,

142 
	mkDexVisib™yRuÁime
 = 0x01,

143 
	mkDexVisib™ySy¡em
 = 0x02,

145 
	mkDexAÂÙ©iÚBy‹
 = 0x00,

146 
	mkDexAÂÙ©iÚShÜt
 = 0x02,

147 
	mkDexAÂÙ©iÚCh¬
 = 0x03,

148 
	mkDexAÂÙ©iÚIÁ
 = 0x04,

149 
	mkDexAÂÙ©iÚLÚg
 = 0x06,

150 
	mkDexAÂÙ©iÚFlßt
 = 0x10,

151 
	mkDexAÂÙ©iÚDoubË
 = 0x11,

152 
	mkDexAÂÙ©iÚSŒšg
 = 0x17,

153 
	mkDexAÂÙ©iÚTy³
 = 0x18,

154 
	mkDexAÂÙ©iÚF›ld
 = 0x19,

155 
	mkDexAÂÙ©iÚM‘hod
 = 0x1a,

156 
	mkDexAÂÙ©iÚEnum
 = 0x1b,

157 
	mkDexAÂÙ©iÚA¼ay
 = 0x1c,

158 
	mkDexAÂÙ©iÚAÂÙ©iÚ
 = 0x1d,

159 
	mkDexAÂÙ©iÚNuÎ
 = 0x1e,

160 
	mkDexAÂÙ©iÚBoŞ—n
 = 0x1f,

162 
	mkDexAÂÙ©iÚV®ueTy³Mask
 = 0x1f,

163 
	mkDexAÂÙ©iÚV®ueArgShiá
 = 5,

168 
	mkDexTy³H—d”I‹m
 = 0x0000,

169 
	mkDexTy³SŒšgIdI‹m
 = 0x0001,

170 
	mkDexTy³Ty³IdI‹m
 = 0x0002,

171 
	mkDexTy³PrÙoIdI‹m
 = 0x0003,

172 
	mkDexTy³F›ldIdI‹m
 = 0x0004,

173 
	mkDexTy³M‘hodIdI‹m
 = 0x0005,

174 
	mkDexTy³CÏssDefI‹m
 = 0x0006,

175 
	mkDexTy³M­Li¡
 = 0x1000,

176 
	mkDexTy³Ty³Li¡
 = 0x1001,

177 
	mkDexTy³AÂÙ©iÚS‘RefLi¡
 = 0x1002,

178 
	mkDexTy³AÂÙ©iÚS‘I‹m
 = 0x1003,

179 
	mkDexTy³CÏssD©aI‹m
 = 0x2000,

180 
	mkDexTy³CodeI‹m
 = 0x2001,

181 
	mkDexTy³SŒšgD©aI‹m
 = 0x2002,

182 
	mkDexTy³DebugInfoI‹m
 = 0x2003,

183 
	mkDexTy³AÂÙ©iÚI‹m
 = 0x2004,

184 
	mkDexTy³EncodedA¼ayI‹m
 = 0x2005,

185 
	mkDexTy³AÂÙ©iÚsDœeùÜyI‹m
 = 0x2006,

190 
	mkDexChunkCÏssLookup
 = 0x434c4b50,

191 
	mkDexChunkRegi¡”M­s
 = 0x524d4150,

193 
	mkDexChunkEnd
 = 0x41454e44,

198 
	mDBG_END_SEQUENCE
 = 0x00,

199 
	mDBG_ADVANCE_PC
 = 0x01,

200 
	mDBG_ADVANCE_LINE
 = 0x02,

201 
	mDBG_START_LOCAL
 = 0x03,

202 
	mDBG_START_LOCAL_EXTENDED
 = 0x04,

203 
	mDBG_END_LOCAL
 = 0x05,

204 
	mDBG_RESTART_LOCAL
 = 0x06,

205 
	mDBG_SET_PROLOGUE_END
 = 0x07,

206 
	mDBG_SET_EPILOGUE_BEGIN
 = 0x08,

207 
	mDBG_SET_FILE
 = 0x09,

208 
	mDBG_FIRST_SPECIAL
 = 0x0a,

209 
	mDBG_LINE_BASE
 = -4,

210 
	mDBG_LINE_RANGE
 = 15,

216 
	sDexH—d”
 {

217 
u1
 
	mmagic
[8];

218 
u4
 
	mchecksum
;

219 
u1
 
	msigÇtu»
[
kSHA1Dige¡L’
];

220 
u4
 
	mfeSize
;

221 
u4
 
	mh—d”Size
;

222 
u4
 
	m’dŸnTag
;

223 
u4
 
	mlškSize
;

224 
u4
 
	mlškOff
;

225 
u4
 
	mm­Off
;

226 
u4
 
	m¡ršgIdsSize
;

227 
u4
 
	m¡ršgIdsOff
;

228 
u4
 
	mty³IdsSize
;

229 
u4
 
	mty³IdsOff
;

230 
u4
 
	m´ÙoIdsSize
;

231 
u4
 
	m´ÙoIdsOff
;

232 
u4
 
	mf›ldIdsSize
;

233 
u4
 
	mf›ldIdsOff
;

234 
u4
 
	mm‘hodIdsSize
;

235 
u4
 
	mm‘hodIdsOff
;

236 
u4
 
	mşassDefsSize
;

237 
u4
 
	mşassDefsOff
;

238 
u4
 
	md©aSize
;

239 
u4
 
	md©aOff
;

245 
	sDexM­I‹m
 {

246 
u2
 
	mty³
;

247 
u2
 
	munu£d
;

248 
u4
 
	msize
;

249 
u4
 
	moff£t
;

255 
	sDexM­Li¡
 {

256 
u4
 
	msize
;

257 
DexM­I‹m
 
	mli¡
[1];

263 
	sDexSŒšgId
 {

264 
u4
 
	m¡ršgD©aOff
;

270 
	sDexTy³Id
 {

271 
u4
 
	mdesütÜIdx
;

277 
	sDexF›ldId
 {

278 
u2
 
	mşassIdx
;

279 
u2
 
	mty³Idx
;

280 
u4
 
	mÇmeIdx
;

286 
	sDexM‘hodId
 {

287 
u2
 
	mşassIdx
;

288 
u2
 
	m´ÙoIdx
;

289 
u4
 
	mÇmeIdx
;

295 
	sDexPrÙoId
 {

296 
u4
 
	mshÜtyIdx
;

297 
u4
 
	m»tuºTy³Idx
;

298 
u4
 
	m·¿m‘”sOff
;

304 
	sDexCÏssDef
 {

305 
u4
 
	mşassIdx
;

306 
u4
 
	macûssFÏgs
;

307 
u4
 
	msu³rşassIdx
;

308 
u4
 
	mš‹rçûsOff
;

309 
u4
 
	msourûFeIdx
;

310 
u4
 
	mªnÙ©iÚsOff
;

311 
u4
 
	mşassD©aOff
;

312 
u4
 
	m¡©icV®uesOff
;

318 
	sDexTy³I‹m
 {

319 
u2
 
	mty³Idx
;

325 
	sDexTy³Li¡
 {

326 
u4
 
	msize
;

327 
DexTy³I‹m
 
	mli¡
[1];

337 
	sDexCode
 {

338 
u2
 
	m»gi¡”sSize
;

339 
u2
 
	mšsSize
;

340 
u2
 
	moutsSize
;

341 
u2
 
	mŒ›sSize
;

342 
u4
 
	mdebugInfoOff
;

343 
u4
 
	mš¢sSize
;

344 
u2
 
	mš¢s
[1];

354 
	sDexTry
 {

355 
u4
 
	m¡¬tAddr
;

356 
u2
 
	mš¢CouÁ
;

357 
u2
 
	mhªdËrOff
;

363 
	sDexLšk
 {

364 
u1
 
	mbË¬gh
;

371 
	sDexAÂÙ©iÚsDœeùÜyI‹m
 {

372 
u4
 
	mşassAÂÙ©iÚsOff
;

373 
u4
 
	mf›ldsSize
;

374 
u4
 
	mm‘hodsSize
;

375 
u4
 
	m·¿m‘”sSize
;

384 
	sDexF›ldAÂÙ©iÚsI‹m
 {

385 
u4
 
	mf›ldIdx
;

386 
u4
 
	mªnÙ©iÚsOff
;

392 
	sDexM‘hodAÂÙ©iÚsI‹m
 {

393 
u4
 
	mm‘hodIdx
;

394 
u4
 
	mªnÙ©iÚsOff
;

400 
	sDexP¬am‘”AÂÙ©iÚsI‹m
 {

401 
u4
 
	mm‘hodIdx
;

402 
u4
 
	mªnÙ©iÚsOff
;

408 
	sDexAÂÙ©iÚS‘RefI‹m
 {

409 
u4
 
	mªnÙ©iÚsOff
;

415 
	sDexAÂÙ©iÚS‘RefLi¡
 {

416 
u4
 
	msize
;

417 
DexAÂÙ©iÚS‘RefI‹m
 
	mli¡
[1];

423 
	sDexAÂÙ©iÚS‘I‹m
 {

424 
u4
 
	msize
;

425 
u4
 
	m’Œ›s
[1];

433 
	sDexAÂÙ©iÚI‹m
 {

434 
u1
 
	mvisib™y
;

435 
u1
 
	mªnÙ©iÚ
[1];

443 
	sDexEncodedA¼ay
 {

444 
u1
 
	m¬¿y
[1];

456 
	sDexCÏssLookup
 {

457 
	msize
;

458 
	mnumEÁr›s
;

460 
u4
 
	mşassDesütÜHash
;

461 
	mşassDesütÜOff£t
;

462 
	mşassDefOff£t
;

463 } 
	mbË
[1];

474 
	sDexO±H—d”
 {

475 
u1
 
	mmagic
[8];

477 
u4
 
	mdexOff£t
;

478 
u4
 
	mdexL’gth
;

479 
u4
 
	md•sOff£t
;

480 
u4
 
	md•sL’gth
;

481 
u4
 
	mİtOff£t
;

482 
u4
 
	mİtL’gth
;

484 
u4
 
	mæags
;

485 
u4
 
	mchecksum
;

490 
	#DEX_OPT_FLAG_BIG
 (1<<1è

	)

492 
	#DEX_INTERFACE_CACHE_SIZE
 128

	)

500 
	sDexFe
 {

502 cÚ¡ 
DexO±H—d”
* 
	mpO±H—d”
;

505 cÚ¡ 
DexH—d”
* 
	mpH—d”
;

506 cÚ¡ 
DexSŒšgId
* 
	mpSŒšgIds
;

507 cÚ¡ 
DexTy³Id
* 
	mpTy³Ids
;

508 cÚ¡ 
DexF›ldId
* 
	mpF›ldIds
;

509 cÚ¡ 
DexM‘hodId
* 
	mpM‘hodIds
;

510 cÚ¡ 
DexPrÙoId
* 
	mpPrÙoIds
;

511 cÚ¡ 
DexCÏssDef
* 
	mpCÏssDefs
;

512 cÚ¡ 
DexLšk
* 
	mpLškD©a
;

518 cÚ¡ 
DexCÏssLookup
* 
	mpCÏssLookup
;

519 cÚ¡ * 
	mpRegi¡”M­PoŞ
;

522 cÚ¡ 
u1
* 
	mba£Addr
;

525 
	mov”h—d
;

534 
u4
 
dexRoundUpPow”2
(u4 
v®
);

541 
DexFe
* 
dexFeP¬£
(cÚ¡ 
u1
* 
d©a
, 
size_t
 
Ëngth
, 
æags
);

545 
	mkDexP¬£DeçuÉ
 = 0,

546 
	mkDexP¬£V”ifyChecksum
 = 1,

547 
	mkDexP¬£CÚtšueOnE¼Ü
 = (1 << 1),

557 
dexSw­AndV”ify
(
u1
* 
addr
, 
Ën
);

567 
dexSw­AndV”ifyIfNeûs§ry
(
u1
* 
addr
, 
Ën
);

574 
boŞ
 
dexHasV®idMagic
(cÚ¡ 
DexH—d”
* 
pH—d”
);

579 
u4
 
dexCompu‹Checksum
(cÚ¡ 
DexH—d”
* 
pH—d”
);

584 
dexFeF»e
(
DexFe
* 
pDexFe
);

589 
DexCÏssLookup
* 
dexC»©eCÏssLookup
(
DexFe
* 
pDexFe
);

594 cÚ¡ 
DexCÏssDef
* 
dexFšdCÏss
(cÚ¡ 
DexFe
* 
pFe
, cÚ¡ * 
desütÜ
);

600 
dexFeS‘upBasicPoš‹rs
(
DexFe
* 
pDexFe
, cÚ¡ 
u1
* 
d©a
);

603 
DEX_INLINE
 cÚ¡ 
DexM­Li¡
* 
	$dexG‘M­
(cÚ¡ 
DexFe
* 
pDexFe
) {

604 
u4
 
m­Off
 = 
pDexFe
->
pH—d”
->mapOff;

606 ià(
m­Off
 == 0) {

607  
NULL
;

609  (cÚ¡ 
DexM­Li¡
*è(
pDexFe
->
ba£Addr
 + 
m­Off
);

611 
	}
}

614 
DEX_INLINE
 cÚ¡ * 
	$dexG‘SŒšgD©a
(cÚ¡ 
DexFe
* 
pDexFe
,

615 cÚ¡ 
DexSŒšgId
* 
pSŒšgId
) {

616 cÚ¡ 
u1
* 
±r
 = 
pDexFe
->
ba£Addr
 + 
pSŒšgId
->
¡ršgD©aOff
;

619 *(
±r
++) > 0x7f) ;

621  (cÚ¡ *è
±r
;

622 
	}
}

624 
DEX_INLINE
 cÚ¡ 
DexSŒšgId
* 
	$dexG‘SŒšgId
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

625 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
¡ršgIdsSize
);

626  &
pDexFe
->
pSŒšgIds
[
idx
];

627 
	}
}

629 
DEX_INLINE
 cÚ¡ * 
	$dexSŒšgById
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

630 cÚ¡ 
DexSŒšgId
* 
pSŒšgId
 = 
	`dexG‘SŒšgId
(
pDexFe
, 
idx
);

631  
	`dexG‘SŒšgD©a
(
pDexFe
, 
pSŒšgId
);

632 
	}
}

636 cÚ¡ * 
dexSŒšgAndSizeById
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
,

637 
u4
* 
utf16Size
);

640 
DEX_INLINE
 cÚ¡ 
DexTy³Id
* 
	$dexG‘Ty³Id
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

641 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
ty³IdsSize
);

642  &
pDexFe
->
pTy³Ids
[
idx
];

643 
	}
}

649 
DEX_INLINE
 cÚ¡ * 
	$dexSŒšgByTy³Idx
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

650 cÚ¡ 
DexTy³Id
* 
ty³Id
 = 
	`dexG‘Ty³Id
(
pDexFe
, 
idx
);

651  
	`dexSŒšgById
(
pDexFe
, 
ty³Id
->
desütÜIdx
);

652 
	}
}

655 
DEX_INLINE
 cÚ¡ 
DexM‘hodId
* 
	$dexG‘M‘hodId
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

656 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
m‘hodIdsSize
);

657  &
pDexFe
->
pM‘hodIds
[
idx
];

658 
	}
}

661 
DEX_INLINE
 cÚ¡ 
DexF›ldId
* 
	$dexG‘F›ldId
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

662 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
f›ldIdsSize
);

663  &
pDexFe
->
pF›ldIds
[
idx
];

664 
	}
}

667 
DEX_INLINE
 cÚ¡ 
DexPrÙoId
* 
	$dexG‘PrÙoId
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

668 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
´ÙoIdsSize
);

669  &
pDexFe
->
pPrÙoIds
[
idx
];

670 
	}
}

676 
DEX_INLINE
 cÚ¡ 
DexTy³Li¡
* 
	$dexG‘PrÙoP¬am‘”s
(

677 cÚ¡ 
DexFe
 *
pDexFe
, cÚ¡ 
DexPrÙoId
* 
pPrÙoId
) {

678 ià(
pPrÙoId
->
·¿m‘”sOff
 == 0) {

679  
NULL
;

681  (cÚ¡ 
DexTy³Li¡
*)

682 (
pDexFe
->
ba£Addr
 + 
pPrÙoId
->
·¿m‘”sOff
);

683 
	}
}

686 
DEX_INLINE
 cÚ¡ 
DexCÏssDef
* 
	$dexG‘CÏssDef
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
idx
) {

687 
	`as£¹
(
idx
 < 
pDexFe
->
pH—d”
->
şassDefsSize
);

688  &
pDexFe
->
pCÏssDefs
[
idx
];

689 
	}
}

692 
DEX_INLINE
 
u4
 
	$dexG‘IndexFÜCÏssDef
(cÚ¡ 
DexFe
* 
pDexFe
,

693 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

695 
	`as£¹
(
pCÏssDef
 >ğ
pDexFe
->
pCÏssDefs
 &&

696 
pCÏssDef
 < 
pDexFe
->
pCÏssDefs
 +…DexFe->
pH—d”
->
şassDefsSize
);

697  
pCÏssDef
 - 
pDexFe
->
pCÏssDefs
;

698 
	}
}

701 
DEX_INLINE
 cÚ¡ 
DexTy³Li¡
* 
	$dexG‘IÁ”çûsLi¡
(cÚ¡ 
DexFe
* 
pDexFe
,

702 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

704 ià(
pCÏssDef
->
š‹rçûsOff
 == 0)

705  
NULL
;

706  (cÚ¡ 
DexTy³Li¡
*)

707 (
pDexFe
->
ba£Addr
 + 
pCÏssDef
->
š‹rçûsOff
);

708 
	}
}

710 
DEX_INLINE
 cÚ¡ 
DexTy³I‹m
* 
	$dexG‘Ty³I‹m
(cÚ¡ 
DexTy³Li¡
* 
pLi¡
,

711 
u4
 
idx
)

713 
	`as£¹
(
idx
 < 
pLi¡
->
size
);

714  &
pLi¡
->
li¡
[
idx
];

715 
	}
}

717 
DEX_INLINE
 
u4
 
	$dexTy³Li¡G‘Idx
(cÚ¡ 
DexTy³Li¡
* 
pLi¡
, 
u4
 
idx
) {

718 cÚ¡ 
DexTy³I‹m
* 
pI‹m
 = 
	`dexG‘Ty³I‹m
(
pLi¡
, 
idx
);

719  
pI‹m
->
ty³Idx
;

720 
	}
}

723 
DEX_INLINE
 cÚ¡ 
DexEncodedA¼ay
* 
	$dexG‘SticV®uesLi¡
(

724 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

726 ià(
pCÏssDef
->
¡©icV®uesOff
 == 0)

727  
NULL
;

728  (cÚ¡ 
DexEncodedA¼ay
*)

729 (
pDexFe
->
ba£Addr
 + 
pCÏssDef
->
¡©icV®uesOff
);

730 
	}
}

733 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
	$dexG‘AÂÙ©iÚsDœeùÜyI‹m
(

734 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

736 ià(
pCÏssDef
->
ªnÙ©iÚsOff
 == 0)

737  
NULL
;

738  (cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
*)

739 (
pDexFe
->
ba£Addr
 + 
pCÏssDef
->
ªnÙ©iÚsOff
);

740 
	}
}

743 
DEX_INLINE
 cÚ¡ * 
	$dexG‘SourûFe
(

744 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

746 ià(
pCÏssDef
->
sourûFeIdx
 == 0xffffffff)

747  
NULL
;

748  
	`dexSŒšgById
(
pDexFe
, 
pCÏssDef
->
sourûFeIdx
);

749 
	}
}

752 
size_t
 
dexG‘DexCodeSize
(cÚ¡ 
DexCode
* 
pCode
);

755 
DEX_INLINE
 cÚ¡ 
DexTry
* 
	$dexG‘Tr›s
(cÚ¡ 
DexCode
* 
pCode
) {

756 cÚ¡ 
u2
* 
š¢sEnd
 = &
pCode
->
š¢s
[pCode->
š¢sSize
];

759 ià((((
u4
è
š¢sEnd
) & 3) != 0) {

760 
š¢sEnd
++;

763  (cÚ¡ 
DexTry
*è
š¢sEnd
;

764 
	}
}

767 
DEX_INLINE
 cÚ¡ 
u1
* 
	$dexG‘C©chHªdËrD©a
(cÚ¡ 
DexCode
* 
pCode
) {

768 cÚ¡ 
DexTry
* 
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

769  (cÚ¡ 
u1
*è&
pTr›s
[
pCode
->
Œ›sSize
];

770 
	}
}

773 
DEX_INLINE
 cÚ¡ 
u1
* 
	$dexG‘DebugInfoSŒ—m
(cÚ¡ 
DexFe
* 
pDexFe
,

774 cÚ¡ 
DexCode
* 
pCode
)

776 ià(
pCode
->
debugInfoOff
 == 0) {

777  
NULL
;

779  
pDexFe
->
ba£Addr
 + 
pCode
->
debugInfoOff
;

781 
	}
}

784 
DEX_INLINE
 cÚ¡ * 
	$dexG‘CÏssDesütÜ
(cÚ¡ 
DexFe
* 
pDexFe
,

785 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

787  
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

788 
	}
}

791 
DEX_INLINE
 cÚ¡ * 
	$dexG‘Su³rCÏssDesütÜ
(cÚ¡ 
DexFe
* 
pDexFe
,

792 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

794 ià(
pCÏssDef
->
su³rşassIdx
 == 0)

795  
NULL
;

796  
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
su³rşassIdx
);

797 
	}
}

800 
DEX_INLINE
 cÚ¡ 
u1
* 
	$dexG‘CÏssD©a
(cÚ¡ 
DexFe
* 
pDexFe
,

801 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
)

803 ià(
pCÏssDef
->
şassD©aOff
 == 0)

804  
NULL
;

805  (cÚ¡ 
u1
*è(
pDexFe
->
ba£Addr
 + 
pCÏssDef
->
şassD©aOff
);

806 
	}
}

809 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$dexG‘AÂÙ©iÚS‘I‹m
(

810 cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
off£t
)

812  (cÚ¡ 
DexAÂÙ©iÚS‘I‹m
*è(
pDexFe
->
ba£Addr
 + 
off£t
);

813 
	}
}

815 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$dexG‘CÏssAÂÙ©iÚS‘
(

816 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

818 ià(
pAÂoDœ
->
şassAÂÙ©iÚsOff
 == 0)

819  
NULL
;

820  
	`dexG‘AÂÙ©iÚS‘I‹m
(
pDexFe
, 
pAÂoDœ
->
şassAÂÙ©iÚsOff
);

821 
	}
}

824 
DEX_INLINE
 cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
	$dexG‘F›ldAÂÙ©iÚs
(

825 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

827 ià(
pAÂoDœ
->
f›ldsSize
 == 0)

828  
NULL
;

831  (cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
*è&
pAÂoDœ
[1];

832 
	}
}

835 
DEX_INLINE
 
	$dexG‘F›ldAÂÙ©iÚsSize
(cÚ¡ 
DexFe
* 
pDexFe
,

836 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

838  
pAÂoDœ
->
f›ldsSize
;

839 
	}
}

842 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$dexG‘F›ldAÂÙ©iÚS‘I‹m
(

843 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
pI‹m
)

845  
	`dexG‘AÂÙ©iÚS‘I‹m
(
pDexFe
, 
pI‹m
->
ªnÙ©iÚsOff
);

846 
	}
}

849 
DEX_INLINE
 cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
	$dexG‘M‘hodAÂÙ©iÚs
(

850 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

852 ià(
pAÂoDœ
->
m‘hodsSize
 == 0)

853  
NULL
;

859 cÚ¡ 
u1
* 
addr
 = (cÚ¡ u1*è&
pAÂoDœ
[1];

860 
addr
 +ğ
pAÂoDœ
->
f›ldsSize
 *  (
DexF›ldAÂÙ©iÚsI‹m
);

861  (cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
*è
addr
;

862 
	}
}

865 
DEX_INLINE
 
	$dexG‘M‘hodAÂÙ©iÚsSize
(cÚ¡ 
DexFe
* 
pDexFe
,

866 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

868  
pAÂoDœ
->
m‘hodsSize
;

869 
	}
}

872 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$dexG‘M‘hodAÂÙ©iÚS‘I‹m
(

873 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
pI‹m
)

875  
	`dexG‘AÂÙ©iÚS‘I‹m
(
pDexFe
, 
pI‹m
->
ªnÙ©iÚsOff
);

876 
	}
}

879 
DEX_INLINE
 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
	$dexG‘P¬am‘”AÂÙ©iÚs
(

880 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

882 ià(
pAÂoDœ
->
·¿m‘”sSize
 == 0)

883  
NULL
;

889 cÚ¡ 
u1
* 
addr
 = (cÚ¡ u1*è&
pAÂoDœ
[1];

890 
addr
 +ğ
pAÂoDœ
->
f›ldsSize
 *  (
DexF›ldAÂÙ©iÚsI‹m
);

891 
addr
 +ğ
pAÂoDœ
->
m‘hodsSize
 *  (
DexM‘hodAÂÙ©iÚsI‹m
);

892  (cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
*è
addr
;

893 
	}
}

896 
DEX_INLINE
 
	$dexG‘P¬am‘”AÂÙ©iÚsSize
(cÚ¡ 
DexFe
* 
pDexFe
,

897 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
)

899  
pAÂoDœ
->
·¿m‘”sSize
;

900 
	}
}

903 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
	$dexG‘P¬am‘”AÂÙ©iÚS‘RefLi¡
(

904 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pI‹m
)

906  (cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
*)

907 (
pDexFe
->
ba£Addr
 + 
pI‹m
->
ªnÙ©iÚsOff
);

908 
	}
}

911 
DEX_INLINE
 
	$dexG‘P¬am‘”AÂÙ©iÚS‘RefSize
(cÚ¡ 
DexFe
* 
pDexFe
,

912 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pI‹m
)

914 ià(
pI‹m
->
ªnÙ©iÚsOff
 == 0)

916  
	`dexG‘P¬am‘”AÂÙ©iÚS‘RefLi¡
(
pDexFe
, 
pI‹m
)->
size
;

917 
	}
}

920 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘RefI‹m
* 
	$dexG‘P¬am‘”AÂÙ©iÚS‘Ref
(

921 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
pLi¡
, 
u4
 
idx
)

923 
	`as£¹
(
idx
 < 
pLi¡
->
size
);

924  &
pLi¡
->
li¡
[
idx
];

925 
	}
}

928 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$dexG‘S‘RefI‹mI‹m
(

929 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚS‘RefI‹m
* 
pI‹m
)

931  
	`dexG‘AÂÙ©iÚS‘I‹m
(
pDexFe
, 
pI‹m
->
ªnÙ©iÚsOff
);

932 
	}
}

935 
DEX_INLINE
 
u4
 
	$dexG‘AÂÙ©iÚOff
(

936 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, 
u4
 
idx
)

938 
	`as£¹
(
idx
 < 
pAÂoS‘
->
size
);

939  
pAÂoS‘
->
’Œ›s
[
idx
];

940 
	}
}

943 
DEX_INLINE
 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
	$dexG‘AÂÙ©iÚI‹m
(

944 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, 
u4
 
idx
)

946  (cÚ¡ 
DexAÂÙ©iÚI‹m
*)

947 (
pDexFe
->
ba£Addr
 + 
	`dexG‘AÂÙ©iÚOff
(
pAÂoS‘
, 
idx
));

948 
	}
}

954 
dexG‘Prim™iveTy³DesütÜCh¬
(
Prim™iveTy³
 
ty³
);

960 cÚ¡ * 
dexG‘Prim™iveTy³DesütÜ
(
Prim™iveTy³
 
ty³
);

968 cÚ¡ * 
dexG‘BoxedTy³DesütÜ
(
Prim™iveTy³
 
ty³
);

975 
Prim™iveTy³
 
dexG‘Prim™iveTy³FromDesütÜCh¬
(
desütÜCh¬
);

	@libdex/DexInlines.cpp

21 
	#_DEX_GEN_INLINES


	)

23 
	~"DexFe.h
"

25 
	~"DexC©ch.h
"

26 
	~"DexCÏss.h
"

27 
	~"DexD©aM­.h
"

28 
	~"DexUtf.h
"

29 
	~"DexOpcodes.h
"

30 
	~"DexPrÙo.h
"

31 
	~"In¡rUts.h
"

32 
	~"Leb128.h
"

33 
	~"ZArchive.h
"

	@libdex/DexOpcodes.cpp

25 
	~"DexOpcodes.h
"

26 
	~<as£¹.h
>

31 cÚ¡ * 
	ggOpNames
[
kNumPackedOpcodes
] = {

295 cÚ¡ * 
	$dexG‘OpcodeName
(
Opcode
 
İ
)

297 
	`as£¹
(
İ
 >ğ0 && o°< 
kNumPackedOpcodes
);

298  
gOpNames
[
İ
];

299 
	}
}

	@libdex/DexOpcodes.h

28 #iâdeà
LIBDEX_DEXOPCODES_H_


29 
	#LIBDEX_DEXOPCODES_H_


	)

31 
	~"DexFe.h
"

43 
	#kMaxOpcodeV®ue
 0xffff

	)

44 
	#kNumPackedOpcodes
 0x100

	)

52 
	#kPackedSw™chSigÇtu»
 0x0100

	)

53 
	#kS·r£Sw™chSigÇtu»
 0x0200

	)

54 
	#kA¼ayD©aSigÇtu»
 0x0300

	)

69 
	eOpcode
 {

71 
	mOP_NOP
 = 0x00,

72 
	mOP_MOVE
 = 0x01,

73 
	mOP_MOVE_FROM16
 = 0x02,

74 
	mOP_MOVE_16
 = 0x03,

75 
	mOP_MOVE_WIDE
 = 0x04,

76 
	mOP_MOVE_WIDE_FROM16
 = 0x05,

77 
	mOP_MOVE_WIDE_16
 = 0x06,

78 
	mOP_MOVE_OBJECT
 = 0x07,

79 
	mOP_MOVE_OBJECT_FROM16
 = 0x08,

80 
	mOP_MOVE_OBJECT_16
 = 0x09,

81 
	mOP_MOVE_RESULT
 = 0x0a,

82 
	mOP_MOVE_RESULT_WIDE
 = 0x0b,

83 
	mOP_MOVE_RESULT_OBJECT
 = 0x0c,

84 
	mOP_MOVE_EXCEPTION
 = 0x0d,

85 
	mOP_RETURN_VOID
 = 0x0e,

86 
	mOP_RETURN
 = 0x0f,

87 
	mOP_RETURN_WIDE
 = 0x10,

88 
	mOP_RETURN_OBJECT
 = 0x11,

89 
	mOP_CONST_4
 = 0x12,

90 
	mOP_CONST_16
 = 0x13,

91 
	mOP_CONST
 = 0x14,

92 
	mOP_CONST_HIGH16
 = 0x15,

93 
	mOP_CONST_WIDE_16
 = 0x16,

94 
	mOP_CONST_WIDE_32
 = 0x17,

95 
	mOP_CONST_WIDE
 = 0x18,

96 
	mOP_CONST_WIDE_HIGH16
 = 0x19,

97 
	mOP_CONST_STRING
 = 0x1a,

98 
	mOP_CONST_STRING_JUMBO
 = 0x1b,

99 
	mOP_CONST_CLASS
 = 0x1c,

100 
	mOP_MONITOR_ENTER
 = 0x1d,

101 
	mOP_MONITOR_EXIT
 = 0x1e,

102 
	mOP_CHECK_CAST
 = 0x1f,

103 
	mOP_INSTANCE_OF
 = 0x20,

104 
	mOP_ARRAY_LENGTH
 = 0x21,

105 
	mOP_NEW_INSTANCE
 = 0x22,

106 
	mOP_NEW_ARRAY
 = 0x23,

107 
	mOP_FILLED_NEW_ARRAY
 = 0x24,

108 
	mOP_FILLED_NEW_ARRAY_RANGE
 = 0x25,

109 
	mOP_FILL_ARRAY_DATA
 = 0x26,

110 
	mOP_THROW
 = 0x27,

111 
	mOP_GOTO
 = 0x28,

112 
	mOP_GOTO_16
 = 0x29,

113 
	mOP_GOTO_32
 = 0x2a,

114 
	mOP_PACKED_SWITCH
 = 0x2b,

115 
	mOP_SPARSE_SWITCH
 = 0x2c,

116 
	mOP_CMPL_FLOAT
 = 0x2d,

117 
	mOP_CMPG_FLOAT
 = 0x2e,

118 
	mOP_CMPL_DOUBLE
 = 0x2f,

119 
	mOP_CMPG_DOUBLE
 = 0x30,

120 
	mOP_CMP_LONG
 = 0x31,

121 
	mOP_IF_EQ
 = 0x32,

122 
	mOP_IF_NE
 = 0x33,

123 
	mOP_IF_LT
 = 0x34,

124 
	mOP_IF_GE
 = 0x35,

125 
	mOP_IF_GT
 = 0x36,

126 
	mOP_IF_LE
 = 0x37,

127 
	mOP_IF_EQZ
 = 0x38,

128 
	mOP_IF_NEZ
 = 0x39,

129 
	mOP_IF_LTZ
 = 0x3a,

130 
	mOP_IF_GEZ
 = 0x3b,

131 
	mOP_IF_GTZ
 = 0x3c,

132 
	mOP_IF_LEZ
 = 0x3d,

133 
	mOP_UNUSED_3E
 = 0x3e,

134 
	mOP_UNUSED_3F
 = 0x3f,

135 
	mOP_UNUSED_40
 = 0x40,

136 
	mOP_UNUSED_41
 = 0x41,

137 
	mOP_UNUSED_42
 = 0x42,

138 
	mOP_UNUSED_43
 = 0x43,

139 
	mOP_AGET
 = 0x44,

140 
	mOP_AGET_WIDE
 = 0x45,

141 
	mOP_AGET_OBJECT
 = 0x46,

142 
	mOP_AGET_BOOLEAN
 = 0x47,

143 
	mOP_AGET_BYTE
 = 0x48,

144 
	mOP_AGET_CHAR
 = 0x49,

145 
	mOP_AGET_SHORT
 = 0x4a,

146 
	mOP_APUT
 = 0x4b,

147 
	mOP_APUT_WIDE
 = 0x4c,

148 
	mOP_APUT_OBJECT
 = 0x4d,

149 
	mOP_APUT_BOOLEAN
 = 0x4e,

150 
	mOP_APUT_BYTE
 = 0x4f,

151 
	mOP_APUT_CHAR
 = 0x50,

152 
	mOP_APUT_SHORT
 = 0x51,

153 
	mOP_IGET
 = 0x52,

154 
	mOP_IGET_WIDE
 = 0x53,

155 
	mOP_IGET_OBJECT
 = 0x54,

156 
	mOP_IGET_BOOLEAN
 = 0x55,

157 
	mOP_IGET_BYTE
 = 0x56,

158 
	mOP_IGET_CHAR
 = 0x57,

159 
	mOP_IGET_SHORT
 = 0x58,

160 
	mOP_IPUT
 = 0x59,

161 
	mOP_IPUT_WIDE
 = 0x5a,

162 
	mOP_IPUT_OBJECT
 = 0x5b,

163 
	mOP_IPUT_BOOLEAN
 = 0x5c,

164 
	mOP_IPUT_BYTE
 = 0x5d,

165 
	mOP_IPUT_CHAR
 = 0x5e,

166 
	mOP_IPUT_SHORT
 = 0x5f,

167 
	mOP_SGET
 = 0x60,

168 
	mOP_SGET_WIDE
 = 0x61,

169 
	mOP_SGET_OBJECT
 = 0x62,

170 
	mOP_SGET_BOOLEAN
 = 0x63,

171 
	mOP_SGET_BYTE
 = 0x64,

172 
	mOP_SGET_CHAR
 = 0x65,

173 
	mOP_SGET_SHORT
 = 0x66,

174 
	mOP_SPUT
 = 0x67,

175 
	mOP_SPUT_WIDE
 = 0x68,

176 
	mOP_SPUT_OBJECT
 = 0x69,

177 
	mOP_SPUT_BOOLEAN
 = 0x6a,

178 
	mOP_SPUT_BYTE
 = 0x6b,

179 
	mOP_SPUT_CHAR
 = 0x6c,

180 
	mOP_SPUT_SHORT
 = 0x6d,

181 
	mOP_INVOKE_VIRTUAL
 = 0x6e,

182 
	mOP_INVOKE_SUPER
 = 0x6f,

183 
	mOP_INVOKE_DIRECT
 = 0x70,

184 
	mOP_INVOKE_STATIC
 = 0x71,

185 
	mOP_INVOKE_INTERFACE
 = 0x72,

186 
	mOP_UNUSED_73
 = 0x73,

187 
	mOP_INVOKE_VIRTUAL_RANGE
 = 0x74,

188 
	mOP_INVOKE_SUPER_RANGE
 = 0x75,

189 
	mOP_INVOKE_DIRECT_RANGE
 = 0x76,

190 
	mOP_INVOKE_STATIC_RANGE
 = 0x77,

191 
	mOP_INVOKE_INTERFACE_RANGE
 = 0x78,

192 
	mOP_UNUSED_79
 = 0x79,

193 
	mOP_UNUSED_7A
 = 0x7a,

194 
	mOP_NEG_INT
 = 0x7b,

195 
	mOP_NOT_INT
 = 0x7c,

196 
	mOP_NEG_LONG
 = 0x7d,

197 
	mOP_NOT_LONG
 = 0x7e,

198 
	mOP_NEG_FLOAT
 = 0x7f,

199 
	mOP_NEG_DOUBLE
 = 0x80,

200 
	mOP_INT_TO_LONG
 = 0x81,

201 
	mOP_INT_TO_FLOAT
 = 0x82,

202 
	mOP_INT_TO_DOUBLE
 = 0x83,

203 
	mOP_LONG_TO_INT
 = 0x84,

204 
	mOP_LONG_TO_FLOAT
 = 0x85,

205 
	mOP_LONG_TO_DOUBLE
 = 0x86,

206 
	mOP_FLOAT_TO_INT
 = 0x87,

207 
	mOP_FLOAT_TO_LONG
 = 0x88,

208 
	mOP_FLOAT_TO_DOUBLE
 = 0x89,

209 
	mOP_DOUBLE_TO_INT
 = 0x8a,

210 
	mOP_DOUBLE_TO_LONG
 = 0x8b,

211 
	mOP_DOUBLE_TO_FLOAT
 = 0x8c,

212 
	mOP_INT_TO_BYTE
 = 0x8d,

213 
	mOP_INT_TO_CHAR
 = 0x8e,

214 
	mOP_INT_TO_SHORT
 = 0x8f,

215 
	mOP_ADD_INT
 = 0x90,

216 
	mOP_SUB_INT
 = 0x91,

217 
	mOP_MUL_INT
 = 0x92,

218 
	mOP_DIV_INT
 = 0x93,

219 
	mOP_REM_INT
 = 0x94,

220 
	mOP_AND_INT
 = 0x95,

221 
	mOP_OR_INT
 = 0x96,

222 
	mOP_XOR_INT
 = 0x97,

223 
	mOP_SHL_INT
 = 0x98,

224 
	mOP_SHR_INT
 = 0x99,

225 
	mOP_USHR_INT
 = 0x9a,

226 
	mOP_ADD_LONG
 = 0x9b,

227 
	mOP_SUB_LONG
 = 0x9c,

228 
	mOP_MUL_LONG
 = 0x9d,

229 
	mOP_DIV_LONG
 = 0x9e,

230 
	mOP_REM_LONG
 = 0x9f,

231 
	mOP_AND_LONG
 = 0xa0,

232 
	mOP_OR_LONG
 = 0xa1,

233 
	mOP_XOR_LONG
 = 0xa2,

234 
	mOP_SHL_LONG
 = 0xa3,

235 
	mOP_SHR_LONG
 = 0xa4,

236 
	mOP_USHR_LONG
 = 0xa5,

237 
	mOP_ADD_FLOAT
 = 0xa6,

238 
	mOP_SUB_FLOAT
 = 0xa7,

239 
	mOP_MUL_FLOAT
 = 0xa8,

240 
	mOP_DIV_FLOAT
 = 0xa9,

241 
	mOP_REM_FLOAT
 = 0xaa,

242 
	mOP_ADD_DOUBLE
 = 0xab,

243 
	mOP_SUB_DOUBLE
 = 0xac,

244 
	mOP_MUL_DOUBLE
 = 0xad,

245 
	mOP_DIV_DOUBLE
 = 0xae,

246 
	mOP_REM_DOUBLE
 = 0xaf,

247 
	mOP_ADD_INT_2ADDR
 = 0xb0,

248 
	mOP_SUB_INT_2ADDR
 = 0xb1,

249 
	mOP_MUL_INT_2ADDR
 = 0xb2,

250 
	mOP_DIV_INT_2ADDR
 = 0xb3,

251 
	mOP_REM_INT_2ADDR
 = 0xb4,

252 
	mOP_AND_INT_2ADDR
 = 0xb5,

253 
	mOP_OR_INT_2ADDR
 = 0xb6,

254 
	mOP_XOR_INT_2ADDR
 = 0xb7,

255 
	mOP_SHL_INT_2ADDR
 = 0xb8,

256 
	mOP_SHR_INT_2ADDR
 = 0xb9,

257 
	mOP_USHR_INT_2ADDR
 = 0xba,

258 
	mOP_ADD_LONG_2ADDR
 = 0xbb,

259 
	mOP_SUB_LONG_2ADDR
 = 0xbc,

260 
	mOP_MUL_LONG_2ADDR
 = 0xbd,

261 
	mOP_DIV_LONG_2ADDR
 = 0xbe,

262 
	mOP_REM_LONG_2ADDR
 = 0xbf,

263 
	mOP_AND_LONG_2ADDR
 = 0xc0,

264 
	mOP_OR_LONG_2ADDR
 = 0xc1,

265 
	mOP_XOR_LONG_2ADDR
 = 0xc2,

266 
	mOP_SHL_LONG_2ADDR
 = 0xc3,

267 
	mOP_SHR_LONG_2ADDR
 = 0xc4,

268 
	mOP_USHR_LONG_2ADDR
 = 0xc5,

269 
	mOP_ADD_FLOAT_2ADDR
 = 0xc6,

270 
	mOP_SUB_FLOAT_2ADDR
 = 0xc7,

271 
	mOP_MUL_FLOAT_2ADDR
 = 0xc8,

272 
	mOP_DIV_FLOAT_2ADDR
 = 0xc9,

273 
	mOP_REM_FLOAT_2ADDR
 = 0xca,

274 
	mOP_ADD_DOUBLE_2ADDR
 = 0xcb,

275 
	mOP_SUB_DOUBLE_2ADDR
 = 0xcc,

276 
	mOP_MUL_DOUBLE_2ADDR
 = 0xcd,

277 
	mOP_DIV_DOUBLE_2ADDR
 = 0xce,

278 
	mOP_REM_DOUBLE_2ADDR
 = 0xcf,

279 
	mOP_ADD_INT_LIT16
 = 0xd0,

280 
	mOP_RSUB_INT
 = 0xd1,

281 
	mOP_MUL_INT_LIT16
 = 0xd2,

282 
	mOP_DIV_INT_LIT16
 = 0xd3,

283 
	mOP_REM_INT_LIT16
 = 0xd4,

284 
	mOP_AND_INT_LIT16
 = 0xd5,

285 
	mOP_OR_INT_LIT16
 = 0xd6,

286 
	mOP_XOR_INT_LIT16
 = 0xd7,

287 
	mOP_ADD_INT_LIT8
 = 0xd8,

288 
	mOP_RSUB_INT_LIT8
 = 0xd9,

289 
	mOP_MUL_INT_LIT8
 = 0xda,

290 
	mOP_DIV_INT_LIT8
 = 0xdb,

291 
	mOP_REM_INT_LIT8
 = 0xdc,

292 
	mOP_AND_INT_LIT8
 = 0xdd,

293 
	mOP_OR_INT_LIT8
 = 0xde,

294 
	mOP_XOR_INT_LIT8
 = 0xdf,

295 
	mOP_SHL_INT_LIT8
 = 0xe0,

296 
	mOP_SHR_INT_LIT8
 = 0xe1,

297 
	mOP_USHR_INT_LIT8
 = 0xe2,

298 
	mOP_IGET_VOLATILE
 = 0xe3,

299 
	mOP_IPUT_VOLATILE
 = 0xe4,

300 
	mOP_SGET_VOLATILE
 = 0xe5,

301 
	mOP_SPUT_VOLATILE
 = 0xe6,

302 
	mOP_IGET_OBJECT_VOLATILE
 = 0xe7,

303 
	mOP_IGET_WIDE_VOLATILE
 = 0xe8,

304 
	mOP_IPUT_WIDE_VOLATILE
 = 0xe9,

305 
	mOP_SGET_WIDE_VOLATILE
 = 0xea,

306 
	mOP_SPUT_WIDE_VOLATILE
 = 0xeb,

307 
	mOP_BREAKPOINT
 = 0xec,

308 
	mOP_THROW_VERIFICATION_ERROR
 = 0xed,

309 
	mOP_EXECUTE_INLINE
 = 0xee,

310 
	mOP_EXECUTE_INLINE_RANGE
 = 0xef,

311 
	mOP_INVOKE_OBJECT_INIT_RANGE
 = 0xf0,

312 
	mOP_RETURN_VOID_BARRIER
 = 0xf1,

313 
	mOP_IGET_QUICK
 = 0xf2,

314 
	mOP_IGET_WIDE_QUICK
 = 0xf3,

315 
	mOP_IGET_OBJECT_QUICK
 = 0xf4,

316 
	mOP_IPUT_QUICK
 = 0xf5,

317 
	mOP_IPUT_WIDE_QUICK
 = 0xf6,

318 
	mOP_IPUT_OBJECT_QUICK
 = 0xf7,

319 
	mOP_INVOKE_VIRTUAL_QUICK
 = 0xf8,

320 
	mOP_INVOKE_VIRTUAL_QUICK_RANGE
 = 0xf9,

321 
	mOP_INVOKE_SUPER_QUICK
 = 0xfa,

322 
	mOP_INVOKE_SUPER_QUICK_RANGE
 = 0xfb,

323 
	mOP_IPUT_OBJECT_VOLATILE
 = 0xfc,

324 
	mOP_SGET_OBJECT_VOLATILE
 = 0xfd,

325 
	mOP_SPUT_OBJECT_VOLATILE
 = 0xfe,

326 
	mOP_UNUSED_FF
 = 0xff,

334 
	#DEFINE_GOTO_TABLE
(
_Çme
) \

335 cÚ¡ * 
_Çme
[
kNumPackedOpcodes
] = { \

337 
	`H
(
OP_NOP
), \

338 
	`H
(
OP_MOVE
), \

339 
	`H
(
OP_MOVE_FROM16
), \

340 
	`H
(
OP_MOVE_16
), \

341 
	`H
(
OP_MOVE_WIDE
), \

342 
	`H
(
OP_MOVE_WIDE_FROM16
), \

343 
	`H
(
OP_MOVE_WIDE_16
), \

344 
	`H
(
OP_MOVE_OBJECT
), \

345 
	`H
(
OP_MOVE_OBJECT_FROM16
), \

346 
	`H
(
OP_MOVE_OBJECT_16
), \

347 
	`H
(
OP_MOVE_RESULT
), \

348 
	`H
(
OP_MOVE_RESULT_WIDE
), \

349 
	`H
(
OP_MOVE_RESULT_OBJECT
), \

350 
	`H
(
OP_MOVE_EXCEPTION
), \

351 
	`H
(
OP_RETURN_VOID
), \

352 
	`H
(
OP_RETURN
), \

353 
	`H
(
OP_RETURN_WIDE
), \

354 
	`H
(
OP_RETURN_OBJECT
), \

355 
	`H
(
OP_CONST_4
), \

356 
	`H
(
OP_CONST_16
), \

357 
	`H
(
OP_CONST
), \

358 
	`H
(
OP_CONST_HIGH16
), \

359 
	`H
(
OP_CONST_WIDE_16
), \

360 
	`H
(
OP_CONST_WIDE_32
), \

361 
	`H
(
OP_CONST_WIDE
), \

362 
	`H
(
OP_CONST_WIDE_HIGH16
), \

363 
	`H
(
OP_CONST_STRING
), \

364 
	`H
(
OP_CONST_STRING_JUMBO
), \

365 
	`H
(
OP_CONST_CLASS
), \

366 
	`H
(
OP_MONITOR_ENTER
), \

367 
	`H
(
OP_MONITOR_EXIT
), \

368 
	`H
(
OP_CHECK_CAST
), \

369 
	`H
(
OP_INSTANCE_OF
), \

370 
	`H
(
OP_ARRAY_LENGTH
), \

371 
	`H
(
OP_NEW_INSTANCE
), \

372 
	`H
(
OP_NEW_ARRAY
), \

373 
	`H
(
OP_FILLED_NEW_ARRAY
), \

374 
	`H
(
OP_FILLED_NEW_ARRAY_RANGE
), \

375 
	`H
(
OP_FILL_ARRAY_DATA
), \

376 
	`H
(
OP_THROW
), \

377 
	`H
(
OP_GOTO
), \

378 
	`H
(
OP_GOTO_16
), \

379 
	`H
(
OP_GOTO_32
), \

380 
	`H
(
OP_PACKED_SWITCH
), \

381 
	`H
(
OP_SPARSE_SWITCH
), \

382 
	`H
(
OP_CMPL_FLOAT
), \

383 
	`H
(
OP_CMPG_FLOAT
), \

384 
	`H
(
OP_CMPL_DOUBLE
), \

385 
	`H
(
OP_CMPG_DOUBLE
), \

386 
	`H
(
OP_CMP_LONG
), \

387 
	`H
(
OP_IF_EQ
), \

388 
	`H
(
OP_IF_NE
), \

389 
	`H
(
OP_IF_LT
), \

390 
	`H
(
OP_IF_GE
), \

391 
	`H
(
OP_IF_GT
), \

392 
	`H
(
OP_IF_LE
), \

393 
	`H
(
OP_IF_EQZ
), \

394 
	`H
(
OP_IF_NEZ
), \

395 
	`H
(
OP_IF_LTZ
), \

396 
	`H
(
OP_IF_GEZ
), \

397 
	`H
(
OP_IF_GTZ
), \

398 
	`H
(
OP_IF_LEZ
), \

399 
	`H
(
OP_UNUSED_3E
), \

400 
	`H
(
OP_UNUSED_3F
), \

401 
	`H
(
OP_UNUSED_40
), \

402 
	`H
(
OP_UNUSED_41
), \

403 
	`H
(
OP_UNUSED_42
), \

404 
	`H
(
OP_UNUSED_43
), \

405 
	`H
(
OP_AGET
), \

406 
	`H
(
OP_AGET_WIDE
), \

407 
	`H
(
OP_AGET_OBJECT
), \

408 
	`H
(
OP_AGET_BOOLEAN
), \

409 
	`H
(
OP_AGET_BYTE
), \

410 
	`H
(
OP_AGET_CHAR
), \

411 
	`H
(
OP_AGET_SHORT
), \

412 
	`H
(
OP_APUT
), \

413 
	`H
(
OP_APUT_WIDE
), \

414 
	`H
(
OP_APUT_OBJECT
), \

415 
	`H
(
OP_APUT_BOOLEAN
), \

416 
	`H
(
OP_APUT_BYTE
), \

417 
	`H
(
OP_APUT_CHAR
), \

418 
	`H
(
OP_APUT_SHORT
), \

419 
	`H
(
OP_IGET
), \

420 
	`H
(
OP_IGET_WIDE
), \

421 
	`H
(
OP_IGET_OBJECT
), \

422 
	`H
(
OP_IGET_BOOLEAN
), \

423 
	`H
(
OP_IGET_BYTE
), \

424 
	`H
(
OP_IGET_CHAR
), \

425 
	`H
(
OP_IGET_SHORT
), \

426 
	`H
(
OP_IPUT
), \

427 
	`H
(
OP_IPUT_WIDE
), \

428 
	`H
(
OP_IPUT_OBJECT
), \

429 
	`H
(
OP_IPUT_BOOLEAN
), \

430 
	`H
(
OP_IPUT_BYTE
), \

431 
	`H
(
OP_IPUT_CHAR
), \

432 
	`H
(
OP_IPUT_SHORT
), \

433 
	`H
(
OP_SGET
), \

434 
	`H
(
OP_SGET_WIDE
), \

435 
	`H
(
OP_SGET_OBJECT
), \

436 
	`H
(
OP_SGET_BOOLEAN
), \

437 
	`H
(
OP_SGET_BYTE
), \

438 
	`H
(
OP_SGET_CHAR
), \

439 
	`H
(
OP_SGET_SHORT
), \

440 
	`H
(
OP_SPUT
), \

441 
	`H
(
OP_SPUT_WIDE
), \

442 
	`H
(
OP_SPUT_OBJECT
), \

443 
	`H
(
OP_SPUT_BOOLEAN
), \

444 
	`H
(
OP_SPUT_BYTE
), \

445 
	`H
(
OP_SPUT_CHAR
), \

446 
	`H
(
OP_SPUT_SHORT
), \

447 
	`H
(
OP_INVOKE_VIRTUAL
), \

448 
	`H
(
OP_INVOKE_SUPER
), \

449 
	`H
(
OP_INVOKE_DIRECT
), \

450 
	`H
(
OP_INVOKE_STATIC
), \

451 
	`H
(
OP_INVOKE_INTERFACE
), \

452 
	`H
(
OP_UNUSED_73
), \

453 
	`H
(
OP_INVOKE_VIRTUAL_RANGE
), \

454 
	`H
(
OP_INVOKE_SUPER_RANGE
), \

455 
	`H
(
OP_INVOKE_DIRECT_RANGE
), \

456 
	`H
(
OP_INVOKE_STATIC_RANGE
), \

457 
	`H
(
OP_INVOKE_INTERFACE_RANGE
), \

458 
	`H
(
OP_UNUSED_79
), \

459 
	`H
(
OP_UNUSED_7A
), \

460 
	`H
(
OP_NEG_INT
), \

461 
	`H
(
OP_NOT_INT
), \

462 
	`H
(
OP_NEG_LONG
), \

463 
	`H
(
OP_NOT_LONG
), \

464 
	`H
(
OP_NEG_FLOAT
), \

465 
	`H
(
OP_NEG_DOUBLE
), \

466 
	`H
(
OP_INT_TO_LONG
), \

467 
	`H
(
OP_INT_TO_FLOAT
), \

468 
	`H
(
OP_INT_TO_DOUBLE
), \

469 
	`H
(
OP_LONG_TO_INT
), \

470 
	`H
(
OP_LONG_TO_FLOAT
), \

471 
	`H
(
OP_LONG_TO_DOUBLE
), \

472 
	`H
(
OP_FLOAT_TO_INT
), \

473 
	`H
(
OP_FLOAT_TO_LONG
), \

474 
	`H
(
OP_FLOAT_TO_DOUBLE
), \

475 
	`H
(
OP_DOUBLE_TO_INT
), \

476 
	`H
(
OP_DOUBLE_TO_LONG
), \

477 
	`H
(
OP_DOUBLE_TO_FLOAT
), \

478 
	`H
(
OP_INT_TO_BYTE
), \

479 
	`H
(
OP_INT_TO_CHAR
), \

480 
	`H
(
OP_INT_TO_SHORT
), \

481 
	`H
(
OP_ADD_INT
), \

482 
	`H
(
OP_SUB_INT
), \

483 
	`H
(
OP_MUL_INT
), \

484 
	`H
(
OP_DIV_INT
), \

485 
	`H
(
OP_REM_INT
), \

486 
	`H
(
OP_AND_INT
), \

487 
	`H
(
OP_OR_INT
), \

488 
	`H
(
OP_XOR_INT
), \

489 
	`H
(
OP_SHL_INT
), \

490 
	`H
(
OP_SHR_INT
), \

491 
	`H
(
OP_USHR_INT
), \

492 
	`H
(
OP_ADD_LONG
), \

493 
	`H
(
OP_SUB_LONG
), \

494 
	`H
(
OP_MUL_LONG
), \

495 
	`H
(
OP_DIV_LONG
), \

496 
	`H
(
OP_REM_LONG
), \

497 
	`H
(
OP_AND_LONG
), \

498 
	`H
(
OP_OR_LONG
), \

499 
	`H
(
OP_XOR_LONG
), \

500 
	`H
(
OP_SHL_LONG
), \

501 
	`H
(
OP_SHR_LONG
), \

502 
	`H
(
OP_USHR_LONG
), \

503 
	`H
(
OP_ADD_FLOAT
), \

504 
	`H
(
OP_SUB_FLOAT
), \

505 
	`H
(
OP_MUL_FLOAT
), \

506 
	`H
(
OP_DIV_FLOAT
), \

507 
	`H
(
OP_REM_FLOAT
), \

508 
	`H
(
OP_ADD_DOUBLE
), \

509 
	`H
(
OP_SUB_DOUBLE
), \

510 
	`H
(
OP_MUL_DOUBLE
), \

511 
	`H
(
OP_DIV_DOUBLE
), \

512 
	`H
(
OP_REM_DOUBLE
), \

513 
	`H
(
OP_ADD_INT_2ADDR
), \

514 
	`H
(
OP_SUB_INT_2ADDR
), \

515 
	`H
(
OP_MUL_INT_2ADDR
), \

516 
	`H
(
OP_DIV_INT_2ADDR
), \

517 
	`H
(
OP_REM_INT_2ADDR
), \

518 
	`H
(
OP_AND_INT_2ADDR
), \

519 
	`H
(
OP_OR_INT_2ADDR
), \

520 
	`H
(
OP_XOR_INT_2ADDR
), \

521 
	`H
(
OP_SHL_INT_2ADDR
), \

522 
	`H
(
OP_SHR_INT_2ADDR
), \

523 
	`H
(
OP_USHR_INT_2ADDR
), \

524 
	`H
(
OP_ADD_LONG_2ADDR
), \

525 
	`H
(
OP_SUB_LONG_2ADDR
), \

526 
	`H
(
OP_MUL_LONG_2ADDR
), \

527 
	`H
(
OP_DIV_LONG_2ADDR
), \

528 
	`H
(
OP_REM_LONG_2ADDR
), \

529 
	`H
(
OP_AND_LONG_2ADDR
), \

530 
	`H
(
OP_OR_LONG_2ADDR
), \

531 
	`H
(
OP_XOR_LONG_2ADDR
), \

532 
	`H
(
OP_SHL_LONG_2ADDR
), \

533 
	`H
(
OP_SHR_LONG_2ADDR
), \

534 
	`H
(
OP_USHR_LONG_2ADDR
), \

535 
	`H
(
OP_ADD_FLOAT_2ADDR
), \

536 
	`H
(
OP_SUB_FLOAT_2ADDR
), \

537 
	`H
(
OP_MUL_FLOAT_2ADDR
), \

538 
	`H
(
OP_DIV_FLOAT_2ADDR
), \

539 
	`H
(
OP_REM_FLOAT_2ADDR
), \

540 
	`H
(
OP_ADD_DOUBLE_2ADDR
), \

541 
	`H
(
OP_SUB_DOUBLE_2ADDR
), \

542 
	`H
(
OP_MUL_DOUBLE_2ADDR
), \

543 
	`H
(
OP_DIV_DOUBLE_2ADDR
), \

544 
	`H
(
OP_REM_DOUBLE_2ADDR
), \

545 
	`H
(
OP_ADD_INT_LIT16
), \

546 
	`H
(
OP_RSUB_INT
), \

547 
	`H
(
OP_MUL_INT_LIT16
), \

548 
	`H
(
OP_DIV_INT_LIT16
), \

549 
	`H
(
OP_REM_INT_LIT16
), \

550 
	`H
(
OP_AND_INT_LIT16
), \

551 
	`H
(
OP_OR_INT_LIT16
), \

552 
	`H
(
OP_XOR_INT_LIT16
), \

553 
	`H
(
OP_ADD_INT_LIT8
), \

554 
	`H
(
OP_RSUB_INT_LIT8
), \

555 
	`H
(
OP_MUL_INT_LIT8
), \

556 
	`H
(
OP_DIV_INT_LIT8
), \

557 
	`H
(
OP_REM_INT_LIT8
), \

558 
	`H
(
OP_AND_INT_LIT8
), \

559 
	`H
(
OP_OR_INT_LIT8
), \

560 
	`H
(
OP_XOR_INT_LIT8
), \

561 
	`H
(
OP_SHL_INT_LIT8
), \

562 
	`H
(
OP_SHR_INT_LIT8
), \

563 
	`H
(
OP_USHR_INT_LIT8
), \

564 
	`H
(
OP_IGET_VOLATILE
), \

565 
	`H
(
OP_IPUT_VOLATILE
), \

566 
	`H
(
OP_SGET_VOLATILE
), \

567 
	`H
(
OP_SPUT_VOLATILE
), \

568 
	`H
(
OP_IGET_OBJECT_VOLATILE
), \

569 
	`H
(
OP_IGET_WIDE_VOLATILE
), \

570 
	`H
(
OP_IPUT_WIDE_VOLATILE
), \

571 
	`H
(
OP_SGET_WIDE_VOLATILE
), \

572 
	`H
(
OP_SPUT_WIDE_VOLATILE
), \

573 
	`H
(
OP_BREAKPOINT
), \

574 
	`H
(
OP_THROW_VERIFICATION_ERROR
), \

575 
	`H
(
OP_EXECUTE_INLINE
), \

576 
	`H
(
OP_EXECUTE_INLINE_RANGE
), \

577 
	`H
(
OP_INVOKE_OBJECT_INIT_RANGE
), \

578 
	`H
(
OP_RETURN_VOID_BARRIER
), \

579 
	`H
(
OP_IGET_QUICK
), \

580 
	`H
(
OP_IGET_WIDE_QUICK
), \

581 
	`H
(
OP_IGET_OBJECT_QUICK
), \

582 
	`H
(
OP_IPUT_QUICK
), \

583 
	`H
(
OP_IPUT_WIDE_QUICK
), \

584 
	`H
(
OP_IPUT_OBJECT_QUICK
), \

585 
	`H
(
OP_INVOKE_VIRTUAL_QUICK
), \

586 
	`H
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
), \

587 
	`H
(
OP_INVOKE_SUPER_QUICK
), \

588 
	`H
(
OP_INVOKE_SUPER_QUICK_RANGE
), \

589 
	`H
(
OP_IPUT_OBJECT_VOLATILE
), \

590 
	`H
(
OP_SGET_OBJECT_VOLATILE
), \

591 
	`H
(
OP_SPUT_OBJECT_VOLATILE
), \

592 
	`H
(
OP_UNUSED_FF
), \

594 };

	)

603 
DEX_INLINE
 
Opcode
 
	$dexOpcodeFromCodeUn™
(
u2
 
codeUn™
) {

611 
lowBy‹
 = 
codeUn™
 & 0xff;

612 ià(
lowBy‹
 != 0xff) {

613  (
Opcode
è
lowBy‹
;

615  (
Opcode
è((
codeUn™
 >> 8) | 0x100);

617 
	}
}

622 cÚ¡ * 
dexG‘OpcodeName
(
Opcode
 
İ
);

	@libdex/DexOptData.cpp

22 
	~<zlib.h
>

24 
	~"DexO±D©a.h
"

31 
boŞ
 
	$isV®idPoš‹r
(cÚ¡ * 
±r
, cÚ¡ * 
¡¬t
, cÚ¡ * 
’d
)

33  (
±r
 >ğ
¡¬t
è&& (±¸< 
’d
è&& (((
u4
)…tr & 7) == 0);

34 
	}
}

37 
u4
 
	$dexCompu‹O±Checksum
(cÚ¡ 
DexO±H—d”
* 
pO±H—d”
)

39 cÚ¡ 
u1
* 
¡¬t
 = (cÚ¡ u1*è
pO±H—d”
 +…O±H—d”->
d•sOff£t
;

40 cÚ¡ 
u1
* 
’d
 = (cÚ¡ u1*è
pO±H—d”
 +

41 
pO±H—d”
->
İtOff£t
 +…O±H—d”->
İtL’gth
;

43 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

45  (
u4
è
	`adËr32
(
adËr
, 
¡¬t
, 
’d
 - start);

46 
	}
}

49 
boŞ
 
	$dexP¬£O±D©a
(cÚ¡ 
u1
* 
d©a
, 
size_t
 
Ëngth
, 
DexFe
* 
pDexFe
)

51 cÚ¡ * 
pO±S¹
 = 
d©a
 + 
pDexFe
->
pO±H—d”
->
İtOff£t
;

52 cÚ¡ * 
pO±End
 = 
d©a
 + 
Ëngth
;

53 cÚ¡ 
u4
* 
pO±
 = (cÚ¡ u4*è
pO±S¹
;

54 
u4
 
İtL’gth
 = (cÚ¡ 
u1
*è
pO±End
 - (cÚ¡ u1*è
pO±S¹
;

63 ià(!
	`isV®idPoš‹r
(
pO±
, 
pO±S¹
, 
pO±End
)) {

64 
	`ALOGE
("Bogus opt data start…ointer");

65  
çl£
;

69 ià((
İtL’gth
 & 3) != 0) {

70 
	`ALOGE
("Unaligned opt data‡reaƒnd");

71  
çl£
;

78 ià(
İtL’gth
 < 8) {

79 
	`ALOGE
("Und”sized o± d©¨¬— (%u)", 
İtL’gth
);

80  
çl£
;

84 *
pO±
 !ğ
kDexChunkEnd
) {

85 ià(!
	`isV®idPoš‹r
(
pO±
 + 2, 
pO±S¹
, 
pO±End
)) {

86 
	`ALOGE
("Bogus opt data content…ointer‡t offset %u",

87 ((cÚ¡ 
u1
*è
pO±
è- 
d©a
);

88  
çl£
;

91 
u4
 
size
 = *(
pO±
 + 1);

92 cÚ¡ 
u1
* 
pO±D©a
 = (cÚ¡ u1*è(
pO±
 + 2);

98 
u4
 
roundedSize
 = (
size
 + 8 + 7) & ~7;

99 cÚ¡ 
u4
* 
pNextO±
 = 
pO±
 + (
roundedSize
 / (u4));

101 ià(!
	`isV®idPoš‹r
(
pNextO±
, 
pO±S¹
, 
pO±End
)) {

102 
	`ALOGE
("Opt data‡rea…roblem for chunk of size %u‡t offset %u",

103 
size
, ((cÚ¡ 
u1
*è
pO±
è- 
d©a
);

104  
çl£
;

107 *
pO±
) {

108 
kDexChunkCÏssLookup
:

109 
pDexFe
->
pCÏssLookup
 = (cÚ¡ 
DexCÏssLookup
*è
pO±D©a
;

111 
kDexChunkRegi¡”M­s
:

112 
	`ALOGV
("+++ found„egi¡” m­s, size=%u", 
size
);

113 
pDexFe
->
pRegi¡”M­PoŞ
 = 
pO±D©a
;

116 
	`ALOGI
("Unknown chunk 0x%08x (%c%c%c%c), size=%d in opt data‡rea",

117 *
pO±
,

118 (è((*
pO±
) >> 24), () ((*pOpt) >> 16),

119 (è((*
pO±
) >> 8), () (*pOpt),

120 
size
);

124 
pO±
 = 
pNextO±
;

127  
Œue
;

128 
	}
}

	@libdex/DexOptData.h

22 #iâdeà
_LIBDEX_DEXOPTDATA


23 
	#_LIBDEX_DEXOPTDATA


	)

25 
	~"libdex/DexFe.h
"

34 
boŞ
 
dexP¬£O±D©a
(cÚ¡ 
u1
* 
d©a
, 
size_t
 
Ëngth
, 
DexFe
* 
pDexFe
);

40 
u4
 
dexCompu‹O±Checksum
(cÚ¡ 
DexO±H—d”
* 
pO±H—d”
);

	@libdex/DexProto.cpp

21 
	~"DexPrÙo.h
"

23 
	~<¡dlib.h
>

24 
	~<¡ršg.h
>

36 
	$dexSŒšgCacheAÎoc
(
DexSŒšgCache
* 
pCache
, 
size_t
 
Ëngth
) {

37 ià(
pCache
->
®loÿ‹dSize
 != 0) {

38 ià(
pCache
->
®loÿ‹dSize
 >ğ
Ëngth
) {

41 
	`ä“
((*è
pCache
->
v®ue
);

44 ià(
Ëngth
 <ğ(
pCache
->
bufãr
)) {

45 
pCache
->
v®ue
 =…Cache->
bufãr
;

46 
pCache
->
®loÿ‹dSize
 = 0;

48 
pCache
->
v®ue
 = (*è
	`m®loc
(
Ëngth
);

49 
pCache
->
®loÿ‹dSize
 = 
Ëngth
;

51 
	}
}

57 
	$dexSŒšgCacheIn™
(
DexSŒšgCache
* 
pCache
) {

58 
pCache
->
v®ue
 =…Cache->
bufãr
;

59 
pCache
->
®loÿ‹dSize
 = 0;

60 
pCache
->
bufãr
[0] = '\0';

61 
	}
}

67 
	$dexSŒšgCacheR–—£
(
DexSŒšgCache
* 
pCache
) {

68 ià(
pCache
->
®loÿ‹dSize
 != 0) {

69 
	`ä“
((*è
pCache
->
v®ue
);

70 
pCache
->
v®ue
 =…Cache->
bufãr
;

71 
pCache
->
®loÿ‹dSize
 = 0;

73 
	}
}

82 * 
	$dexSŒšgCacheEnsu»Cİy
(
DexSŒšgCache
* 
pCache
, cÚ¡ * 
v®ue
) {

83 ià(
v®ue
 !ğ
pCache
->value) {

84 
size_t
 
Ëngth
 = 
	`¡¾’
(
v®ue
) + 1;

85 
	`dexSŒšgCacheAÎoc
(
pCache
, 
Ëngth
);

86 
	`memıy
(
pCache
->
v®ue
, v®ue, 
Ëngth
);

89  
pCache
->
v®ue
;

90 
	}
}

99 * 
	$dexSŒšgCacheAbªdÚ
(
DexSŒšgCache
* 
pCache
, cÚ¡ * 
v®ue
) {

100 ià((
v®ue
 =ğ
pCache
->v®ueè&& (pCache->
®loÿ‹dSize
 != 0)) {

101 * 
»suÉ
 = 
pCache
->
v®ue
;

102 
pCache
->
®loÿ‹dSize
 = 0;

103 
pCache
->
v®ue
 =…Cache->
bufãr
;

104  
»suÉ
;

106  
	`¡rdup
(
v®ue
);

108 
	}
}

121 
šlše
 cÚ¡ 
DexPrÙoId
* 
	$g‘PrÙoId
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

122  
	`dexG‘PrÙoId
(
pPrÙo
->
dexFe
,…PrÙo->
´ÙoIdx
);

123 
	}
}

126 cÚ¡ * 
	$dexPrÙoG‘ShÜty
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

127 cÚ¡ 
DexPrÙoId
* 
´ÙoId
 = 
	`g‘PrÙoId
(
pPrÙo
);

129  
	`dexSŒšgById
(
pPrÙo
->
dexFe
, 
´ÙoId
->
shÜtyIdx
);

130 
	}
}

133 cÚ¡ * 
	$dexPrÙoG‘M‘hodDesütÜ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
,

134 
DexSŒšgCache
* 
pCache
) {

135 cÚ¡ 
DexFe
* 
dexFe
 = 
pPrÙo
->dexFile;

136 cÚ¡ 
DexPrÙoId
* 
´ÙoId
 = 
	`g‘PrÙoId
(
pPrÙo
);

137 cÚ¡ 
DexTy³Li¡
* 
ty³Li¡
 = 
	`dexG‘PrÙoP¬am‘”s
(
dexFe
, 
´ÙoId
);

138 
size_t
 
Ëngth
 = 3;

139 
u4
 
·¿mCouÁ
 = (
ty³Li¡
 =ğ
NULL
è? 0 :y³Li¡->
size
;

140 
u4
 
i
;

142 
i
 = 0; i < 
·¿mCouÁ
; i++) {

143 
u4
 
idx
 = 
	`dexTy³Li¡G‘Idx
(
ty³Li¡
, 
i
);

144 
Ëngth
 +ğ
	`¡¾’
(
	`dexSŒšgByTy³Idx
(
dexFe
, 
idx
));

147 
Ëngth
 +ğ
	`¡¾’
(
	`dexSŒšgByTy³Idx
(
dexFe
, 
´ÙoId
->
»tuºTy³Idx
));

149 
	`dexSŒšgCacheAÎoc
(
pCache
, 
Ëngth
);

151 *
©
 = (*è
pCache
->
v®ue
;

152 *(
©
++) = '(';

154 
i
 = 0; i < 
·¿mCouÁ
; i++) {

155 
u4
 
idx
 = 
	`dexTy³Li¡G‘Idx
(
ty³Li¡
, 
i
);

156 cÚ¡ * 
desc
 = 
	`dexSŒšgByTy³Idx
(
dexFe
, 
idx
);

157 
	`¡rıy
(
©
, 
desc
);

158 
©
 +ğ
	`¡¾’
(
desc
);

161 *(
©
++) = ')';

163 
	`¡rıy
(
©
, 
	`dexSŒšgByTy³Idx
(
dexFe
, 
´ÙoId
->
»tuºTy³Idx
));

164  
pCache
->
v®ue
;

165 
	}
}

168 * 
	$dexPrÙoCİyM‘hodDesütÜ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

169 
DexSŒšgCache
 
ÿche
;

171 
	`dexSŒšgCacheIn™
(&
ÿche
);

172  
	`dexSŒšgCacheAbªdÚ
(&
ÿche
,

173 
	`dexPrÙoG‘M‘hodDesütÜ
(
pPrÙo
, &
ÿche
));

174 
	}
}

177 cÚ¡ * 
	$dexPrÙoG‘P¬am‘”DesütÜs
(cÚ¡ 
DexPrÙo
* 
pPrÙo
,

178 
DexSŒšgCache
* 
pCache
) {

179 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

180 
size_t
 
Ëngth
 = 1;

182 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, 
pPrÙo
);

185 cÚ¡ * 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

186 ià(
desütÜ
 =ğ
NULL
) {

190 
Ëngth
 +ğ
	`¡¾’
(
desütÜ
);

193 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, 
pPrÙo
);

195 
	`dexSŒšgCacheAÎoc
(
pCache
, 
Ëngth
);

196 *
©
 = (*è
pCache
->
v®ue
;

199 cÚ¡ * 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

200 ià(
desütÜ
 =ğ
NULL
) {

204 
	`¡rıy
(
©
, 
desütÜ
);

205 
©
 +ğ
	`¡¾’
(
desütÜ
);

208  
pCache
->
v®ue
;

209 
	}
}

212 cÚ¡ * 
	$dexPrÙoG‘R‘uºTy³
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

213 cÚ¡ 
DexPrÙoId
* 
´ÙoId
 = 
	`g‘PrÙoId
(
pPrÙo
);

214  
	`dexSŒšgByTy³Idx
(
pPrÙo
->
dexFe
, 
´ÙoId
->
»tuºTy³Idx
);

215 
	}
}

218 
size_t
 
	$dexPrÙoG‘P¬am‘”CouÁ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

219 cÚ¡ 
DexPrÙoId
* 
´ÙoId
 = 
	`g‘PrÙoId
(
pPrÙo
);

220 cÚ¡ 
DexTy³Li¡
* 
ty³Li¡
 =

221 
	`dexG‘PrÙoP¬am‘”s
(
pPrÙo
->
dexFe
, 
´ÙoId
);

222  (
ty³Li¡
 =ğ
NULL
è? 0 :y³Li¡->
size
;

223 
	}
}

226 
	$dexPrÙoCompu‹ArgsSize
(cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

227 cÚ¡ * 
shÜty
 = 
	`dexPrÙoG‘ShÜty
(
pPrÙo
);

228 
couÁ
 = 0;

231 
shÜty
++;

234 *(
shÜty
++)) {

236  
couÁ
;

240 
couÁ
 += 2;

244 
couÁ
++;

249 
	}
}

254 
	$´ÙoCom·»
(cÚ¡ 
DexPrÙo
* 
pPrÙo1
, cÚ¡ DexPrÙo* 
pPrÙo2
,

255 
boŞ
 
com·»R‘uºTy³
) {

257 ià(
pPrÙo1
 =ğ
pPrÙo2
) {

261 cÚ¡ 
DexFe
* 
dexFe1
 = 
pPrÙo1
->
dexFe
;

262 cÚ¡ 
DexPrÙoId
* 
´ÙoId1
 = 
	`g‘PrÙoId
(
pPrÙo1
);

263 cÚ¡ 
DexTy³Li¡
* 
ty³Li¡1
 =

264 
	`dexG‘PrÙoP¬am‘”s
(
dexFe1
, 
´ÙoId1
);

265 
·¿mCouÁ1
 = (
ty³Li¡1
 =ğ
NULL
è? 0 :y³Li¡1->
size
;

267 cÚ¡ 
DexFe
* 
dexFe2
 = 
pPrÙo2
->
dexFe
;

268 cÚ¡ 
DexPrÙoId
* 
´ÙoId2
 = 
	`g‘PrÙoId
(
pPrÙo2
);

269 cÚ¡ 
DexTy³Li¡
* 
ty³Li¡2
 =

270 
	`dexG‘PrÙoP¬am‘”s
(
dexFe2
, 
´ÙoId2
);

271 
·¿mCouÁ2
 = (
ty³Li¡2
 =ğ
NULL
è? 0 :y³Li¡2->
size
;

273 ià(
´ÙoId1
 =ğ
´ÙoId2
) {

280 ià(
com·»R‘uºTy³
) {

281 
»suÉ
 =

282 
	`¡rcmp
(
	`dexSŒšgByTy³Idx
(
dexFe1
, 
´ÙoId1
->
»tuºTy³Idx
),

283 
	`dexSŒšgByTy³Idx
(
dexFe2
, 
´ÙoId2
->
»tuºTy³Idx
));

285 ià(
»suÉ
 != 0) {

286  
»suÉ
;

292 
mšP¬am
 = (
·¿mCouÁ1
 > 
·¿mCouÁ2
) ?…aramCount2 :…aramCount1;

293 
i
;

295 
i
 = 0; i < 
mšP¬am
; i++) {

296 
u4
 
idx1
 = 
	`dexTy³Li¡G‘Idx
(
ty³Li¡1
, 
i
);

297 
u4
 
idx2
 = 
	`dexTy³Li¡G‘Idx
(
ty³Li¡2
, 
i
);

298 
»suÉ
 =

299 
	`¡rcmp
(
	`dexSŒšgByTy³Idx
(
dexFe1
, 
idx1
),

300 
	`dexSŒšgByTy³Idx
(
dexFe2
, 
idx2
));

302 ià(
»suÉ
 != 0) {

303  
»suÉ
;

307 ià(
·¿mCouÁ1
 < 
·¿mCouÁ2
) {

309 } ià(
·¿mCouÁ1
 > 
·¿mCouÁ2
) {

315 
	}
}

318 
	$dexPrÙoCom·»
(cÚ¡ 
DexPrÙo
* 
pPrÙo1
, cÚ¡ DexPrÙo* 
pPrÙo2
) {

319  
	`´ÙoCom·»
(
pPrÙo1
, 
pPrÙo2
, 
Œue
);

320 
	}
}

323 
	$dexPrÙoCom·»P¬am‘”s
(cÚ¡ 
DexPrÙo
* 
pPrÙo1
, cÚ¡ DexPrÙo* 
pPrÙo2
){

324  
	`´ÙoCom·»
(
pPrÙo1
, 
pPrÙo2
, 
çl£
);

325 
	}
}

332 cÚ¡ * 
	$m‘hodDesütÜR‘uºTy³
(cÚ¡ * 
desütÜ
) {

333 cÚ¡ * 
»suÉ
 = 
	`¡rchr
(
desütÜ
, ')');

335 ià(
»suÉ
 =ğ
NULL
) {

336  
NULL
;

340  
»suÉ
 + 1;

341 
	}
}

349 cÚ¡ * 
	$m‘hodDesütÜNextTy³
(cÚ¡ * 
desütÜ
) {

352 *
desütÜ
 == '[') {

353 
desütÜ
++;

356 *
desütÜ
) {

359  
desütÜ
 + 1;

362 cÚ¡ * 
»suÉ
 = 
	`¡rchr
(
desütÜ
 + 1, ';');

363 ià(
»suÉ
 !ğ
NULL
) {

365  
»suÉ
 + 1;

370  
NULL
;

371 
	}
}

380 
	$´ÙoCom·»ToP¬am‘”DesütÜs
(cÚ¡ 
DexPrÙo
* 
´Ùo
,

381 cÚ¡ * 
desütÜ
, 
boŞ
 
ex³ùP¬’s
) {

382 
ex³ùedEndCh¬
 = 
ex³ùP¬’s
 ? ')' : '\0';

383 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

384 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, 
´Ùo
);

386 ià(
ex³ùP¬’s
) {

388 
	`as£¹
 (*
desütÜ
 == '(');

389 
desütÜ
++;

393 cÚ¡ * 
´ÙoDesc
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

395 ià(*
desütÜ
 =ğ
ex³ùedEndCh¬
) {

397 ià(
´ÙoDesc
 =ğ
NULL
) {

406 ià(
´ÙoDesc
 =ğ
NULL
) {

416 cÚ¡ * 
ÃxtDesc
 = 
	`m‘hodDesütÜNextTy³
(
desütÜ
);

417 
	`as£¹
(
ÃxtDesc
 !ğ
NULL
);

420 
c1
 = *(
´ÙoDesc
++);

421 
c2
 = (
desütÜ
 < 
ÃxtDesc
) ? *(descriptor++) : '\0';

423 ià(
c1
 < 
c2
) {

426 } ià(
c1
 > 
c2
) {

429 } ià(
c1
 == '\0') {

440 
	}
}

443 
	$dexPrÙoCom·»ToDesütÜ
(cÚ¡ 
DexPrÙo
* 
´Ùo
,

444 cÚ¡ * 
desütÜ
) {

447 cÚ¡ *
»tuºTy³
 = 
	`m‘hodDesütÜR‘uºTy³
(
desütÜ
);

448 
	`as£¹
(
»tuºTy³
 !ğ
NULL
);

450 
»suÉ
 = 
	`¡rcmp
(
	`dexPrÙoG‘R‘uºTy³
(
´Ùo
), 
»tuºTy³
);

452 ià(
»suÉ
 != 0) {

453  
»suÉ
;

457  
	`´ÙoCom·»ToP¬am‘”DesütÜs
(
´Ùo
, 
desütÜ
, 
Œue
);

458 
	}
}

461 
	$dexPrÙoCom·»ToP¬am‘”DesütÜs
(cÚ¡ 
DexPrÙo
* 
´Ùo
,

462 cÚ¡ * 
desütÜs
) {

463  
	`´ÙoCom·»ToP¬am‘”DesütÜs
(
´Ùo
, 
desütÜs
, 
çl£
);

464 
	}
}

481 
	$dexP¬am‘”I‹¿tÜIn™
(
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
,

482 cÚ¡ 
DexPrÙo
* 
pPrÙo
) {

483 
pI‹¿tÜ
->
´Ùo
 = 
pPrÙo
;

484 
pI‹¿tÜ
->
cursÜ
 = 0;

486 
pI‹¿tÜ
->
·¿m‘”s
 =

487 
	`dexG‘PrÙoP¬am‘”s
(
pPrÙo
->
dexFe
, 
	`g‘PrÙoId
(pProto));

488 
pI‹¿tÜ
->
·¿m‘”CouÁ
 = (pI‹¿tÜ->
·¿m‘”s
 =ğ
NULL
) ? 0

489 : 
pI‹¿tÜ
->
·¿m‘”s
->
size
;

490 
	}
}

496 
u4
 
	$dexP¬am‘”I‹¿tÜNextIndex
(
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
) {

497 
cursÜ
 = 
pI‹¿tÜ
->cursor;

498 
·¿m‘”CouÁ
 = 
pI‹¿tÜ
->parameterCount;

500 ià(
cursÜ
 >ğ
·¿m‘”CouÁ
) {

502  
kDexNoIndex
;

504 
u4
 
idx
 = 
	`dexTy³Li¡G‘Idx
(
pI‹¿tÜ
->
·¿m‘”s
, 
cursÜ
);

505 
pI‹¿tÜ
->
cursÜ
++;

506  
idx
;

508 
	}
}

514 cÚ¡ * 
	$dexP¬am‘”I‹¿tÜNextDesütÜ
(

515 
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
) {

516 
u4
 
idx
 = 
	`dexP¬am‘”I‹¿tÜNextIndex
(
pI‹¿tÜ
);

518 ià(
idx
 =ğ
kDexNoIndex
) {

519  
NULL
;

522  
	`dexSŒšgByTy³Idx
(
pI‹¿tÜ
->
´Ùo
->
dexFe
, 
idx
);

523 
	}
}

	@libdex/DexProto.h

21 #iâdeà
LIBDEX_DEXPROTO_H_


22 
	#LIBDEX_DEXPROTO_H_


	)

24 
	~"DexFe.h
"

33 
	sDexSŒšgCache
 {

34 * 
	mv®ue
;

35 
size_t
 
	m®loÿ‹dSize
;

36 
	mbufãr
[120];

43 
dexSŒšgCacheAÎoc
(
DexSŒšgCache
* 
pCache
, 
size_t
 
Ëngth
);

49 
dexSŒšgCacheIn™
(
DexSŒšgCache
* 
pCache
);

55 
dexSŒšgCacheR–—£
(
DexSŒšgCache
* 
pCache
);

64 * 
dexSŒšgCacheEnsu»Cİy
(
DexSŒšgCache
* 
pCache
, cÚ¡ * 
v®ue
);

73 * 
dexSŒšgCacheAbªdÚ
(
DexSŒšgCache
* 
pCache
, cÚ¡ * 
v®ue
);

79 
	sDexPrÙo
 {

80 cÚ¡ 
DexFe
* 
	mdexFe
;

81 
u4
 
	m´ÙoIdx
;

87 
DEX_INLINE
 
	$dexPrÙoS‘FromM‘hodId
(
DexPrÙo
* 
pPrÙo
,

88 cÚ¡ 
DexFe
* 
pDexFe
, cÚ¡ 
DexM‘hodId
* 
pM‘hodId
)

90 
pPrÙo
->
dexFe
 = 
pDexFe
;

91 
pPrÙo
->
´ÙoIdx
 = 
pM‘hodId
->protoIdx;

92 
	}
}

98 cÚ¡ * 
dexPrÙoG‘ShÜty
(cÚ¡ 
DexPrÙo
* 
pPrÙo
);

103 cÚ¡ * 
dexPrÙoG‘M‘hodDesütÜ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
,

104 
DexSŒšgCache
* 
pCache
);

110 * 
dexPrÙoCİyM‘hodDesütÜ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
);

117 cÚ¡ * 
dexPrÙoG‘P¬am‘”DesütÜs
(cÚ¡ 
DexPrÙo
* 
pPrÙo
,

118 
DexSŒšgCache
* 
pCache
);

123 
DEX_INLINE
 cÚ¡ * 
	$dexG‘DesütÜFromM‘hodId
(cÚ¡ 
DexFe
* 
pDexFe
,

124 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
, 
DexSŒšgCache
* 
pCache
)

126 
DexPrÙo
 
´Ùo
;

128 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

129  
	`dexPrÙoG‘M‘hodDesütÜ
(&
´Ùo
, 
pCache
);

130 
	}
}

137 
DEX_INLINE
 * 
	$dexCİyDesütÜFromM‘hodId
(cÚ¡ 
DexFe
* 
pDexFe
,

138 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
)

140 
DexPrÙo
 
´Ùo
;

142 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

143  
	`dexPrÙoCİyM‘hodDesütÜ
(&
´Ùo
);

144 
	}
}

149 cÚ¡ * 
dexPrÙoG‘R‘uºTy³
(cÚ¡ 
DexPrÙo
* 
pPrÙo
);

154 
size_t
 
dexPrÙoG‘P¬am‘”CouÁ
(cÚ¡ 
DexPrÙo
* 
pPrÙo
);

162 
dexPrÙoCompu‹ArgsSize
(cÚ¡ 
DexPrÙo
* 
pPrÙo
);

171 
dexPrÙoCom·»
(cÚ¡ 
DexPrÙo
* 
pPrÙo1
, cÚ¡ DexPrÙo* 
pPrÙo2
);

180 
dexPrÙoCom·»P¬am‘”s
(cÚ¡ 
DexPrÙo
* 
pPrÙo1
,

181 cÚ¡ 
DexPrÙo
* 
pPrÙo2
);

188 
dexPrÙoCom·»ToDesütÜ
(cÚ¡ 
DexPrÙo
* 
´Ùo
, cÚ¡ * 
desütÜ
);

195 
dexPrÙoCom·»ToP¬am‘”DesütÜs
(cÚ¡ 
DexPrÙo
* 
´Ùo
,

196 cÚ¡ * 
desütÜs
);

202 
	sDexP¬am‘”I‹¿tÜ
 {

203 cÚ¡ 
DexPrÙo
* 
	m´Ùo
;

204 cÚ¡ 
DexTy³Li¡
* 
	m·¿m‘”s
;

205 
	m·¿m‘”CouÁ
;

206 
	mcursÜ
;

213 
dexP¬am‘”I‹¿tÜIn™
(
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
,

214 cÚ¡ 
DexPrÙo
* 
pPrÙo
);

220 
u4
 
dexP¬am‘”I‹¿tÜNextIndex
(
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
);

226 cÚ¡ * 
dexP¬am‘”I‹¿tÜNextDesütÜ
(

227 
DexP¬am‘”I‹¿tÜ
* 
pI‹¿tÜ
);

	@libdex/DexSwapVerify.cpp

21 
	~"DexFe.h
"

22 
	~"DexCÏss.h
"

23 
	~"DexD©aM­.h
"

24 
	~"DexPrÙo.h
"

25 
	~"DexUtf.h
"

26 
	~"Leb128.h
"

28 
	~<§ã_iİ.h
>

29 
	~<zlib.h
>

31 
	~<¡dlib.h
>

32 
	~<¡ršg.h
>

34 #iâdeà
__BYTE_ORDER


38 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


39 
	#SWAP2
(
_v®ue
è(_v®ue)

	)

40 
	#SWAP4
(
_v®ue
è(_v®ue)

	)

41 
	#SWAP8
(
_v®ue
è(_v®ue)

	)

43 
	#SWAP2
(
_v®ue
è
	`’dŸnSw­U2
((_v®ue))

	)

44 
	#SWAP4
(
_v®ue
è
	`’dŸnSw­U4
((_v®ue))

	)

45 
	#SWAP8
(
_v®ue
è
	`’dŸnSw­U8
((_v®ue))

	)

46 
u2
 
	$’dŸnSw­U2
(
u2
 
v®ue
) {

47  (
v®ue
 >> 8) | (value << 8);

48 
	}
}

49 
u4
 
	$’dŸnSw­U4
(
u4
 
v®ue
) {

51 
v®ue
 = (value >> 16) | (value << 16);

52  ((
v®ue
 & 0xff00ff00) >> 8) | ((value << 8) & 0xff00ff00);

53 
	}
}

54 
u8
 
	$’dŸnSw­U8
(
u8
 
v®ue
) {

56 
v®ue
 = (value >> 32) | (value << 32);

57 
v®ue
 = ((value & 0xffff0000ffff0000ULL) >> 16) |

58 ((
v®ue
 << 16) & 0xffff0000ffff0000ULL);

59  ((
v®ue
 & 0xff00ff00ff00ff00ULL) >> 8) |

60 ((
v®ue
 << 8) & 0xff00ff00ff00ff00ULL);

61 
	}
}

64 
	#SWAP_FIELD2
(
_f›ld
è(_f›ldèğ
	`SWAP2
(_f›ld)

	)

65 
	#SWAP_FIELD4
(
_f›ld
è(_f›ldèğ
	`SWAP4
(_f›ld)

	)

66 
	#SWAP_FIELD8
(
_f›ld
è(_f›ldèğ
	`SWAP8
(_f›ld)

	)

71 
	sCheckS‹
 {

72 cÚ¡ 
DexH—d”
* 
	mpH—d”
;

73 cÚ¡ 
u1
* 
	mfeS¹
;

74 cÚ¡ 
u1
* 
	mfeEnd
;

75 
u4
 
	mfeL’
;

76 
DexD©aM­
* 
	mpD©aM­
;

77 cÚ¡ 
DexFe
* 
	mpDexFe
;

84 
u4
* 
	mpDefšedCÏssB™s
;

86 cÚ¡ * 
	m´eviousI‹m
;

92 
šlše
 
u4
 
	$feOff£t
(cÚ¡ 
CheckS‹
* 
¡©e
, cÚ¡ * 
±r
) {

93  ((cÚ¡ 
u1
*è
±r
è- 
¡©e
->
feS¹
;

94 
	}
}

99 
šlše
 * 
	$fePoš‹r
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
off£t
) {

100  (*è(
¡©e
->
feS¹
 + 
off£t
);

101 
	}
}

111 
šlše
 
boŞ
 
	$checkPŒRªge
(cÚ¡ 
CheckS‹
* 
¡©e
,

112 cÚ¡ * 
¡¬t
, cÚ¡ * 
’d
, cÚ¡ * 
Ïb–
) {

113 cÚ¡ * 
feS¹
 = 
¡©e
->fileStart;

114 cÚ¡ * 
feEnd
 = 
¡©e
->fileEnd;

115 ià((
¡¬t
 < 
feS¹
è|| (¡¬ˆ> 
feEnd
)

116 || (
’d
 < 
¡¬t
è|| (’d > 
feEnd
)) {

117 
	`ALOGW
("Bad off£ˆ¿ngfÜ %s: %#x..%#x", 
Ïb–
,

118 
	`feOff£t
(
¡©e
, 
¡¬t
), feOff£t(¡©e, 
’d
));

119  
çl£
;

121  
Œue
;

122 
	}
}

133 
	#CHECK_OFFSET_RANGE
(
_¡¬t
, 
_’d
) { \

134 cÚ¡ 
u1
* 
_¡¬tPŒ
 = (cÚ¡ u1*è
	`fePoš‹r
(
¡©e
, (
_¡¬t
)); \

135 cÚ¡ 
u1
* 
_’dPŒ
 = (cÚ¡ u1*è
	`fePoš‹r
(
¡©e
, (
_’d
)); \

136 ià(!
	`checkPŒRªge
(
¡©e
, 
_¡¬tPŒ
, 
_’dPŒ
, \

140 }

	)

152 
	#CHECK_PTR_RANGE
(
_¡¬t
, 
_’d
) { \

153 ià(!
	`checkPŒRªge
(
¡©e
, (
_¡¬t
), (
_’d
), #_start ".." #_end)) { \

156 }

	)

164 
	#CHECK_LIST_SIZE
(
_±r
, 
_couÁ
, 
_–emSize
) { \

165 cÚ¡ 
u1
* 
_¡¬t
 = (cÚ¡ u1*è(
_±r
); \

166 cÚ¡ 
u1
* 
_’d
 = 
_¡¬t
 + ((
_couÁ
è* (
_–emSize
)); \

167 ià(!
	`§ã_mul
(
NULL
, (
_couÁ
), (
_–emSize
)) || \

168 !
	`checkPŒRªge
(
¡©e
, 
_¡¬t
, 
_’d
, #_ptr)) { \

171 }

	)

181 
	#SWAP_OFFSET4
(
_f›ld
) { \

182 
	`SWAP_FIELD4
((
_f›ld
)); \

183 }

	)

188 
	#CHECK_INDEX
(
_f›ld
, 
_lim™
) { \

189 ià((
_f›ld
è>ğ(
_lim™
)) { \

190 
	`ALOGW
("Bad index: %s(%u) > %s(%u)", \

191 #_f›ld, (
u4
)(
_f›ld
), #_lim™, (u4)(
_lim™
)); \

194 }

	)

199 
	#SWAP_INDEX2
(
_f›ld
, 
_lim™
) { \

200 
	`SWAP_FIELD2
((
_f›ld
)); \

201 
	`CHECK_INDEX
((
_f›ld
), (
_lim™
)); \

202 }

	)

207 
	#CHECK_INDEX_OR_NOINDEX
(
_f›ld
, 
_lim™
) { \

208 ià((
_f›ld
è!ğ
kDexNoIndex
 && (_f›ldè>ğ(
_lim™
)) { \

209 
	`ALOGW
("Bad index: %s(%u) > %s(%u)", \

210 #_f›ld, (
u4
)(
_f›ld
), #_lim™, (u4)(
_lim™
)); \

213 }

	)

218 
	#SWAP_INDEX4
(
_f›ld
, 
_lim™
) { \

219 
	`SWAP_FIELD4
((
_f›ld
)); \

220 
	`CHECK_INDEX
((
_f›ld
), (
_lim™
)); \

221 }

	)

227 
	#SWAP_INDEX4_OR_NOINDEX
(
_f›ld
, 
_lim™
) { \

228 
	`SWAP_FIELD4
((
_f›ld
)); \

229 
	`CHECK_INDEX_OR_NOINDEX
((
_f›ld
), (
_lim™
)); \

230 }

	)

233 
boŞ
 
	$v”ifyF›ldDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
defššgCÏss
,

234 
u4
 
f›ldIdx
) {

235 cÚ¡ 
DexF›ldId
* 
f›ld
 = 
	`dexG‘F›ldId
(
¡©e
->
pDexFe
, 
f›ldIdx
);

236  
f›ld
->
şassIdx
 =ğ
defššgCÏss
;

237 
	}
}

240 
boŞ
 
	$v”ifyM‘hodDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
defššgCÏss
,

241 
u4
 
m‘hodIdx
) {

242 cÚ¡ 
DexM‘hodId
* 
m‘h
 = 
	`dexG‘M‘hodId
(
¡©e
->
pDexFe
, 
m‘hodIdx
);

243  
m‘h
->
şassIdx
 =ğ
defššgCÏss
;

244 
	}
}

250 
size_t
 
	$ÿlcDefšedCÏssB™sSize
(cÚ¡ 
CheckS‹
* 
¡©e
)

253  (
¡©e
->
pH—d”
->
ty³IdsSize
 + 0x1f) >> 5;

254 
	}
}

259 
boŞ
 
	$£tDefšedCÏssB™
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
ty³Idx
) {

260 
u4
 
¬¿yIdx
 = 
ty³Idx
 >> 5;

261 
u4
 
b™
 = 1 << (
ty³Idx
 & 0x1f);

262 
u4
* 
–em’t
 = &
¡©e
->
pDefšedCÏssB™s
[
¬¿yIdx
];

263 
boŞ
 
»suÉ
 = (*
–em’t
 & 
b™
) != 0;

265 *
–em’t
 |ğ
b™
;

267  
»suÉ
;

268 
	}
}

273 
boŞ
 
	$sw­DexH—d”
(cÚ¡ 
CheckS‹
* 
¡©e
, 
DexH—d”
* 
pH—d”
)

275 
	`CHECK_PTR_RANGE
(
pH—d”
,…Header + 1);

278 
	`SWAP_FIELD4
(
pH—d”
->
checksum
);

280 
	`SWAP_FIELD4
(
pH—d”
->
feSize
);

281 
	`SWAP_FIELD4
(
pH—d”
->
h—d”Size
);

282 
	`SWAP_FIELD4
(
pH—d”
->
’dŸnTag
);

283 
	`SWAP_FIELD4
(
pH—d”
->
lškSize
);

284 
	`SWAP_OFFSET4
(
pH—d”
->
lškOff
);

285 
	`SWAP_OFFSET4
(
pH—d”
->
m­Off
);

286 
	`SWAP_FIELD4
(
pH—d”
->
¡ršgIdsSize
);

287 
	`SWAP_OFFSET4
(
pH—d”
->
¡ršgIdsOff
);

288 
	`SWAP_FIELD4
(
pH—d”
->
ty³IdsSize
);

289 
	`SWAP_OFFSET4
(
pH—d”
->
ty³IdsOff
);

290 
	`SWAP_FIELD4
(
pH—d”
->
f›ldIdsSize
);

291 
	`SWAP_OFFSET4
(
pH—d”
->
f›ldIdsOff
);

292 
	`SWAP_FIELD4
(
pH—d”
->
m‘hodIdsSize
);

293 
	`SWAP_OFFSET4
(
pH—d”
->
m‘hodIdsOff
);

294 
	`SWAP_FIELD4
(
pH—d”
->
´ÙoIdsSize
);

295 
	`SWAP_OFFSET4
(
pH—d”
->
´ÙoIdsOff
);

296 
	`SWAP_FIELD4
(
pH—d”
->
şassDefsSize
);

297 
	`SWAP_OFFSET4
(
pH—d”
->
şassDefsOff
);

298 
	`SWAP_FIELD4
(
pH—d”
->
d©aSize
);

299 
	`SWAP_OFFSET4
(
pH—d”
->
d©aOff
);

301 ià(
pH—d”
->
’dŸnTag
 !ğ
kDexEndŸnCÚ¡ªt
) {

302 
	`ALOGE
("UÃx³ùedƒndŸn_g: %#x", 
pH—d”
->
’dŸnTag
);

303  
çl£
;

307 
u4
 
lškOff
 = 
pH—d”
->linkOff;

308 
u4
 
lškEnd
 = 
lškOff
 + 
pH—d”
->
lškSize
;

309 
u4
 
d©aOff
 = 
pH—d”
->dataOff;

310 
u4
 
d©aEnd
 = 
d©aOff
 + 
pH—d”
->
d©aSize
;

311 
	`CHECK_OFFSET_RANGE
(
lškOff
, 
lškEnd
);

312 
	`CHECK_OFFSET_RANGE
(
d©aOff
, 
d©aEnd
);

319  
Œue
;

320 
	}
}

323 
boŞ
 
	$checkH—d”SeùiÚ
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
£ùiÚOff£t
,

324 
u4
 
£ùiÚCouÁ
, u4* 
’dOff£t
) {

325 ià(
£ùiÚCouÁ
 != 1) {

326 
	`ALOGE
("Multiple header items");

327  
çl£
;

330 ià(
£ùiÚOff£t
 != 0) {

331 
	`ALOGE
("H—d”‡ˆ%#x;‚Ù‡ˆ¡¬ˆoàfe", 
£ùiÚOff£t
);

332  
çl£
;

335 cÚ¡ 
DexH—d”
* 
pH—d”
 = (cÚ¡ DexH—d”*è
	`fePoš‹r
(
¡©e
, 0);

336 *
’dOff£t
 = 
pH—d”
->
h—d”Size
;

337  
Œue
;

338 
	}
}

344 
u4
 
	$m­Ty³ToB™Mask
(
m­Ty³
) {

345 
m­Ty³
) {

346 
kDexTy³H—d”I‹m
:  1 << 0;

347 
kDexTy³SŒšgIdI‹m
:  1 << 1;

348 
kDexTy³Ty³IdI‹m
:  1 << 2;

349 
kDexTy³PrÙoIdI‹m
:  1 << 3;

350 
kDexTy³F›ldIdI‹m
:  1 << 4;

351 
kDexTy³M‘hodIdI‹m
:  1 << 5;

352 
kDexTy³CÏssDefI‹m
:  1 << 6;

353 
kDexTy³M­Li¡
:  1 << 7;

354 
kDexTy³Ty³Li¡
:  1 << 8;

355 
kDexTy³AÂÙ©iÚS‘RefLi¡
:  1 << 9;

356 
kDexTy³AÂÙ©iÚS‘I‹m
:  1 << 10;

357 
kDexTy³CÏssD©aI‹m
:  1 << 11;

358 
kDexTy³CodeI‹m
:  1 << 12;

359 
kDexTy³SŒšgD©aI‹m
:  1 << 13;

360 
kDexTy³DebugInfoI‹m
:  1 << 14;

361 
kDexTy³AÂÙ©iÚI‹m
:  1 << 15;

362 
kDexTy³EncodedA¼ayI‹m
:  1 << 16;

363 
kDexTy³AÂÙ©iÚsDœeùÜyI‹m
:  1 << 17;

365 
	`ALOGE
("UnknowÀm­ i‹my³ %04x", 
m­Ty³
);

369 
	}
}

375 
boŞ
 
	$isD©aSeùiÚTy³
(
m­Ty³
) {

376 
m­Ty³
) {

377 
kDexTy³H—d”I‹m
:

378 
kDexTy³SŒšgIdI‹m
:

379 
kDexTy³Ty³IdI‹m
:

380 
kDexTy³PrÙoIdI‹m
:

381 
kDexTy³F›ldIdI‹m
:

382 
kDexTy³M‘hodIdI‹m
:

383 
kDexTy³CÏssDefI‹m
: {

384  
çl£
;

388  
Œue
;

389 
	}
}

395 
boŞ
 
	$sw­M­
(
CheckS‹
* 
¡©e
, 
DexM­Li¡
* 
pM­
)

397 
DexM­I‹m
* 
™em
 = 
pM­
->
li¡
;

398 
u4
 
couÁ
;

399 
u4
 
d©aI‹mCouÁ
 = 0;

400 
u4
 
d©aI‹msLeá
 = 
¡©e
->
pH—d”
->
d©aSize
;

401 
u4
 
u£dB™s
 = 0;

402 
boŞ
 
fœ¡
 = 
Œue
;

403 
u4
 
Ï¡Off£t
 = 0;

405 
	`SWAP_FIELD4
(
pM­
->
size
);

406 
couÁ
 = 
pM­
->
size
;

408 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
DexM­I‹m
));

410 
couÁ
--) {

411 
	`SWAP_FIELD2
(
™em
->
ty³
);

412 
	`SWAP_FIELD2
(
™em
->
unu£d
);

413 
	`SWAP_FIELD4
(
™em
->
size
);

414 
	`SWAP_OFFSET4
(
™em
->
off£t
);

416 ià(
fœ¡
) {

417 
fœ¡
 = 
çl£
;

418 } ià(
Ï¡Off£t
 >ğ
™em
->
off£t
) {

419 
	`ALOGE
("Out-of-order map item: %#xhen %#x",

420 
Ï¡Off£t
, 
™em
->
off£t
);

421  
çl£
;

424 ià(
™em
->
off£t
 >ğ
¡©e
->
pH—d”
->
feSize
) {

425 
	`ALOGE
("Map item‡fterƒnd of file: %x, size %#x",

426 
™em
->
off£t
, 
¡©e
->
pH—d”
->
feSize
);

427  
çl£
;

430 ià(
	`isD©aSeùiÚTy³
(
™em
->
ty³
)) {

431 
u4
 
icouÁ
 = 
™em
->
size
;

438 ià(
icouÁ
 > 
d©aI‹msLeá
) {

439 
	`ALOGE
("Unrealistically many items inhe data section: "

440 "©†—¡ %d", 
d©aI‹mCouÁ
 + 
icouÁ
);

441  
çl£
;

444 
d©aI‹msLeá
 -ğ
icouÁ
;

445 
d©aI‹mCouÁ
 +ğ
icouÁ
;

448 
u4
 
b™
 = 
	`m­Ty³ToB™Mask
(
™em
->
ty³
);

450 ià(
b™
 == 0) {

451  
çl£
;

454 ià((
u£dB™s
 & 
b™
) != 0) {

455 
	`ALOGE
("Du¶iÿ‹ m­ seùiÚ oàty³ %#x", 
™em
->
ty³
);

456  
çl£
;

459 
u£dB™s
 |ğ
b™
;

460 
Ï¡Off£t
 = 
™em
->
off£t
;

461 
™em
++;

464 ià((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³H—d”I‹m
)) == 0) {

465 
	`ALOGE
("Map is missing headerƒntry");

466  
çl£
;

469 ià((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³M­Li¡
)) == 0) {

470 
	`ALOGE
("Map is missing map_listƒntry");

471  
çl£
;

474 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³SŒšgIdI‹m
)) == 0)

475 && ((
¡©e
->
pH—d”
->
¡ršgIdsOff
 != 0)

476 || (
¡©e
->
pH—d”
->
¡ršgIdsSize
 != 0))) {

477 
	`ALOGE
("Map is missing string_idsƒntry");

478  
çl£
;

481 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³Ty³IdI‹m
)) == 0)

482 && ((
¡©e
->
pH—d”
->
ty³IdsOff
 != 0)

483 || (
¡©e
->
pH—d”
->
ty³IdsSize
 != 0))) {

484 
	`ALOGE
("Map is missingype_idsƒntry");

485  
çl£
;

488 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³PrÙoIdI‹m
)) == 0)

489 && ((
¡©e
->
pH—d”
->
´ÙoIdsOff
 != 0)

490 || (
¡©e
->
pH—d”
->
´ÙoIdsSize
 != 0))) {

491 
	`ALOGE
("Map is missing…roto_idsƒntry");

492  
çl£
;

495 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³F›ldIdI‹m
)) == 0)

496 && ((
¡©e
->
pH—d”
->
f›ldIdsOff
 != 0)

497 || (
¡©e
->
pH—d”
->
f›ldIdsSize
 != 0))) {

498 
	`ALOGE
("Map is missing field_idsƒntry");

499  
çl£
;

502 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³M‘hodIdI‹m
)) == 0)

503 && ((
¡©e
->
pH—d”
->
m‘hodIdsOff
 != 0)

504 || (
¡©e
->
pH—d”
->
m‘hodIdsSize
 != 0))) {

505 
	`ALOGE
("Map is missing method_idsƒntry");

506  
çl£
;

509 ià(((
u£dB™s
 & 
	`m­Ty³ToB™Mask
(
kDexTy³CÏssDefI‹m
)) == 0)

510 && ((
¡©e
->
pH—d”
->
şassDefsOff
 != 0)

511 || (
¡©e
->
pH—d”
->
şassDefsSize
 != 0))) {

512 
	`ALOGE
("Map is missing class_defsƒntry");

513  
çl£
;

516 
¡©e
->
pD©aM­
 = 
	`dexD©aM­AÎoc
(
d©aI‹mCouÁ
);

517 ià(
¡©e
->
pD©aM­
 =ğ
NULL
) {

518 
	`ALOGE
("UÇbËØ®loÿ‹ d©¨m­ (siz%#x)", 
d©aI‹mCouÁ
);

519  
çl£
;

522  
Œue
;

523 
	}
}

526 
boŞ
 
	$checkM­SeùiÚ
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
£ùiÚOff£t
,

527 
u4
 
£ùiÚCouÁ
, u4* 
’dOff£t
) {

528 ià(
£ùiÚCouÁ
 != 1) {

529 
	`ALOGE
("Multiple map†ist items");

530  
çl£
;

533 ià(
£ùiÚOff£t
 !ğ
¡©e
->
pH—d”
->
m­Off
) {

534 
	`ALOGE
("Map‚ot‡t header-defined offset: %#x,ƒxpected %#x",

535 
£ùiÚOff£t
, 
¡©e
->
pH—d”
->
m­Off
);

536  
çl£
;

539 cÚ¡ 
DexM­Li¡
* 
pM­
 = (cÚ¡ DexM­Li¡*è
	`fePoš‹r
(
¡©e
, 
£ùiÚOff£t
);

541 *
’dOff£t
 =

542 
£ùiÚOff£t
 + (
u4
è+ (
pM­
->
size
 * (
DexM­I‹m
));

543  
Œue
;

544 
	}
}

547 * 
	$sw­SŒšgIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

548 
DexSŒšgId
* 
™em
 = (DexSŒšgId*è
±r
;

550 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

551 
	`SWAP_OFFSET4
(
™em
->
¡ršgD©aOff
);

553  
™em
 + 1;

554 
	}
}

557 * 
	$üossV”ifySŒšgIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

558 cÚ¡ 
DexSŒšgId
* 
™em
 = (cÚ¡ DexSŒšgId*è
±r
;

560 ià(!
	`dexD©aM­V”ify
(
¡©e
->
pD©aM­
,

561 
™em
->
¡ršgD©aOff
, 
kDexTy³SŒšgD©aI‹m
)) {

562  
NULL
;

565 cÚ¡ 
DexSŒšgId
* 
™em0
 = (cÚ¡ DexSŒšgId*è
¡©e
->
´eviousI‹m
;

566 ià(
™em0
 !ğ
NULL
) {

568 cÚ¡ * 
s0
 = 
	`dexG‘SŒšgD©a
(
¡©e
->
pDexFe
, 
™em0
);

569 cÚ¡ * 
s1
 = 
	`dexG‘SŒšgD©a
(
¡©e
->
pDexFe
, 
™em
);

570 ià(
	`dexUtf8Cmp
(
s0
, 
s1
) >= 0) {

571 
	`ALOGE
("Out-of-Üd” sŒšg_ids: '%s'h’ '%s'", 
s0
, 
s1
);

572  
NULL
;

576  (*è(
™em
 + 1);

577 
	}
}

580 * 
	$sw­Ty³IdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

581 
DexTy³Id
* 
™em
 = (DexTy³Id*è
±r
;

583 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

584 
	`SWAP_INDEX4
(
™em
->
desütÜIdx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

586  
™em
 + 1;

587 
	}
}

590 * 
	$üossV”ifyTy³IdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

591 cÚ¡ 
DexTy³Id
* 
™em
 = (cÚ¡ DexTy³Id*è
±r
;

592 cÚ¡ * 
desütÜ
 =

593 
	`dexSŒšgById
(
¡©e
->
pDexFe
, 
™em
->
desütÜIdx
);

595 ià(!
	`dexIsV®idTy³DesütÜ
(
desütÜ
)) {

596 
	`ALOGE
("Inv®idy³ desütÜ: '%s'", 
desütÜ
);

597  
NULL
;

600 cÚ¡ 
DexTy³Id
* 
™em0
 = (cÚ¡ DexTy³Id*è
¡©e
->
´eviousI‹m
;

601 ià(
™em0
 !ğ
NULL
) {

603 ià(
™em0
->
desütÜIdx
 >ğ
™em
->descriptorIdx) {

604 
	`ALOGE
("Out-of-orderype_ids: %#xhen %#x",

605 
™em0
->
desütÜIdx
, 
™em
->descriptorIdx);

606  
NULL
;

610  (*è(
™em
 + 1);

611 
	}
}

614 * 
	$sw­PrÙoIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

615 
DexPrÙoId
* 
™em
 = (DexPrÙoId*è
±r
;

617 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

618 
	`SWAP_INDEX4
(
™em
->
shÜtyIdx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

619 
	`SWAP_INDEX4
(
™em
->
»tuºTy³Idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

620 
	`SWAP_OFFSET4
(
™em
->
·¿m‘”sOff
);

622  
™em
 + 1;

623 
	}
}

628 
boŞ
 
	$shÜtyDescM©ch
(
shÜty
, cÚ¡ * 
desütÜ
, 
boŞ


629 
isR‘uºTy³
) {

630 
shÜty
) {

632 ià(!
isR‘uºTy³
) {

633 
	`ALOGE
("Invalid use of void");

634  
çl£
;

646 ià((
desütÜ
[0] !ğ
shÜty
) || (descriptor[1] != '\0')) {

647 
	`ALOGE
("Shorty vs.…rimitiveype mismatch: '%c', '%s'",

648 
shÜty
, 
desütÜ
);

649  
çl£
;

654 ià((
desütÜ
[0] != 'L') && (descriptor[0] != '[')) {

655 
	`ALOGE
("Shorty vs.ype mismatch: '%c', '%s'",

656 
shÜty
, 
desütÜ
);

657  
çl£
;

662 
	`ALOGE
("Bogu shÜty: '%c'", 
shÜty
);

663  
çl£
;

667  
Œue
;

668 
	}
}

671 * 
	$üossV”ifyPrÙoIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

672 cÚ¡ 
DexPrÙoId
* 
™em
 = (cÚ¡ DexPrÙoId*è
±r
;

673 cÚ¡ * 
shÜty
 =

674 
	`dexSŒšgById
(
¡©e
->
pDexFe
, 
™em
->
shÜtyIdx
);

676 ià(!
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

677 
™em
->
·¿m‘”sOff
, 
kDexTy³Ty³Li¡
)) {

678  
NULL
;

681 ià(!
	`shÜtyDescM©ch
(*
shÜty
,

682 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
™em
->
»tuºTy³Idx
),

683 
Œue
)) {

684  
NULL
;

687 
u4
 
´ÙoIdx
 = 
™em
 - 
¡©e
->
pDexFe
->
pPrÙoIds
;

688 
DexPrÙo
 
´Ùo
 = { 
¡©e
->
pDexFe
, 
´ÙoIdx
 };

689 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

691 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
´Ùo
);

692 
shÜty
++;

695 cÚ¡ *
desc
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

697 ià(
desc
 =ğ
NULL
) {

701 ià(*
shÜty
 == '\0') {

702 
	`ALOGE
("Shorty isoo short");

703  
NULL
;

706 ià(!
	`shÜtyDescM©ch
(*
shÜty
, 
desc
, 
çl£
)) {

707  
NULL
;

710 
shÜty
++;

713 ià(*
shÜty
 != '\0') {

714 
	`ALOGE
("Shorty isoo†ong");

715  
NULL
;

718 cÚ¡ 
DexPrÙoId
* 
™em0
 = (cÚ¡ DexPrÙoId*è
¡©e
->
´eviousI‹m
;

719 ià(
™em0
 !ğ
NULL
) {

721 ià(
™em0
->
»tuºTy³Idx
 > 
™em
->returnTypeIdx) {

722 
	`ALOGE
("Out-of-order…roto_id„eturnypes");

723  
NULL
;

724 } ià(
™em0
->
»tuºTy³Idx
 =ğ
™em
->returnTypeIdx) {

725 
boŞ
 
badOrd”
 = 
çl£
;

726 
DexPrÙo
 
´Ùo0
 = { 
¡©e
->
pDexFe
, 
´ÙoIdx
 - 1 };

727 
DexP¬am‘”I‹¿tÜ
 
™”©Ü0
;

729 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
´Ùo
);

730 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü0
, &
´Ùo0
);

733 
u4
 
idx0
 = 
	`dexP¬am‘”I‹¿tÜNextIndex
(&
™”©Ü0
);

734 
u4
 
idx1
 = 
	`dexP¬am‘”I‹¿tÜNextIndex
(&
™”©Ü
);

736 ià(
idx1
 =ğ
kDexNoIndex
) {

737 
badOrd”
 = 
Œue
;

741 ià(
idx0
 =ğ
kDexNoIndex
) {

745 ià(
idx0
 < 
idx1
) {

747 } ià(
idx0
 > 
idx1
) {

748 
badOrd”
 = 
Œue
;

753 ià(
badOrd”
) {

754 
	`ALOGE
("Out-of-order…roto_id‡rguments");

755  
NULL
;

760  (*è(
™em
 + 1);

761 
	}
}

764 * 
	$sw­F›ldIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

765 
DexF›ldId
* 
™em
 = (DexF›ldId*è
±r
;

767 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

768 
	`SWAP_INDEX2
(
™em
->
şassIdx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

769 
	`SWAP_INDEX2
(
™em
->
ty³Idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

770 
	`SWAP_INDEX4
(
™em
->
ÇmeIdx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

772  
™em
 + 1;

773 
	}
}

776 * 
	$üossV”ifyF›ldIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

777 cÚ¡ 
DexF›ldId
* 
™em
 = (cÚ¡ DexF›ldId*è
±r
;

778 cÚ¡ * 
s
;

780 
s
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
™em
->
şassIdx
);

781 ià(!
	`dexIsCÏssDesütÜ
(
s
)) {

782 
	`ALOGE
("Inv®id desütÜ fÜ cÏss_idx: '%s'", 
s
);

783  
NULL
;

786 
s
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
™em
->
ty³Idx
);

787 ià(!
	`dexIsF›ldDesütÜ
(
s
)) {

788 
	`ALOGE
("Inv®id desütÜ fÜy³_idx: '%s'", 
s
);

789  
NULL
;

792 
s
 = 
	`dexSŒšgById
(
¡©e
->
pDexFe
, 
™em
->
ÇmeIdx
);

793 ià(!
	`dexIsV®idMemb”Name
(
s
)) {

794 
	`ALOGE
("Inv®id‚ame: '%s'", 
s
);

795  
NULL
;

798 cÚ¡ 
DexF›ldId
* 
™em0
 = (cÚ¡ DexF›ldId*è
¡©e
->
´eviousI‹m
;

799 ià(
™em0
 !ğ
NULL
) {

801 
boŞ
 
dÚe
 = 
çl£
;

802 
boŞ
 
bogus
 = 
çl£
;

804 ià(
™em0
->
şassIdx
 > 
™em
->classIdx) {

805 
bogus
 = 
Œue
;

806 
dÚe
 = 
Œue
;

807 } ià(
™em0
->
şassIdx
 < 
™em
->classIdx) {

808 
dÚe
 = 
Œue
;

811 ià(!
dÚe
) {

812 ià(
™em0
->
ÇmeIdx
 > 
™em
->nameIdx) {

813 
bogus
 = 
Œue
;

814 
dÚe
 = 
Œue
;

815 } ià(
™em0
->
ÇmeIdx
 < 
™em
->nameIdx) {

816 
dÚe
 = 
Œue
;

820 ià(!
dÚe
) {

821 ià(
™em0
->
ty³Idx
 >ğ
™em
->typeIdx) {

822 
bogus
 = 
Œue
;

826 ià(
bogus
) {

827 
	`ALOGE
("Out-of-order field_ids");

828  
NULL
;

832  (*è(
™em
 + 1);

833 
	}
}

836 * 
	$sw­M‘hodIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

837 
DexM‘hodId
* 
™em
 = (DexM‘hodId*è
±r
;

839 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

840 
	`SWAP_INDEX2
(
™em
->
şassIdx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

841 
	`SWAP_INDEX2
(
™em
->
´ÙoIdx
, 
¡©e
->
pH—d”
->
´ÙoIdsSize
);

842 
	`SWAP_INDEX4
(
™em
->
ÇmeIdx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

844  
™em
 + 1;

845 
	}
}

848 * 
	$üossV”ifyM‘hodIdI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

849 cÚ¡ 
DexM‘hodId
* 
™em
 = (cÚ¡ DexM‘hodId*è
±r
;

850 cÚ¡ * 
s
;

852 
s
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
™em
->
şassIdx
);

853 ià(!
	`dexIsReã»nûDesütÜ
(
s
)) {

854 
	`ALOGE
("Inv®id desütÜ fÜ cÏss_idx: '%s'", 
s
);

855  
NULL
;

858 
s
 = 
	`dexSŒšgById
(
¡©e
->
pDexFe
, 
™em
->
ÇmeIdx
);

859 ià(!
	`dexIsV®idMemb”Name
(
s
)) {

860 
	`ALOGE
("Inv®id‚ame: '%s'", 
s
);

861  
NULL
;

864 cÚ¡ 
DexM‘hodId
* 
™em0
 = (cÚ¡ DexM‘hodId*è
¡©e
->
´eviousI‹m
;

865 ià(
™em0
 !ğ
NULL
) {

867 
boŞ
 
dÚe
 = 
çl£
;

868 
boŞ
 
bogus
 = 
çl£
;

870 ià(
™em0
->
şassIdx
 > 
™em
->classIdx) {

871 
bogus
 = 
Œue
;

872 
dÚe
 = 
Œue
;

873 } ià(
™em0
->
şassIdx
 < 
™em
->classIdx) {

874 
dÚe
 = 
Œue
;

877 ià(!
dÚe
) {

878 ià(
™em0
->
ÇmeIdx
 > 
™em
->nameIdx) {

879 
bogus
 = 
Œue
;

880 
dÚe
 = 
Œue
;

881 } ià(
™em0
->
ÇmeIdx
 < 
™em
->nameIdx) {

882 
dÚe
 = 
Œue
;

886 ià(!
dÚe
) {

887 ià(
™em0
->
´ÙoIdx
 >ğ
™em
->protoIdx) {

888 
bogus
 = 
Œue
;

892 ià(
bogus
) {

893 
	`ALOGE
("Out-of-order method_ids");

894  
NULL
;

898  (*è(
™em
 + 1);

899 
	}
}

902 * 
	$sw­CÏssDefI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

903 
DexCÏssDef
* 
™em
 = (DexCÏssDef*è
±r
;

905 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

906 
	`SWAP_INDEX4
(
™em
->
şassIdx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

907 
	`SWAP_FIELD4
(
™em
->
acûssFÏgs
);

908 
	`SWAP_INDEX4_OR_NOINDEX
(
™em
->
su³rşassIdx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

909 
	`SWAP_OFFSET4
(
™em
->
š‹rçûsOff
);

910 
	`SWAP_INDEX4_OR_NOINDEX
(
™em
->
sourûFeIdx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

911 
	`SWAP_OFFSET4
(
™em
->
ªnÙ©iÚsOff
);

912 
	`SWAP_OFFSET4
(
™em
->
şassD©aOff
);

914  
™em
 + 1;

915 
	}
}

918 
u4
 
fšdFœ¡CÏssD©aDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
,

919 
DexCÏssD©a
* 
şassD©a
);

920 
u4
 
fšdFœ¡AÂÙ©iÚsDœeùÜyDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
,

921 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
dœ
);

925 
boŞ
 
	$v”ifyCÏssD©aIsFÜDef
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
off£t
,

926 
u4
 
defš”Idx
) {

927 ià(
off£t
 == 0) {

928  
Œue
;

931 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
	`fePoš‹r
(
¡©e
, 
off£t
);

932 
DexCÏssD©a
* 
şassD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
d©a
, 
NULL
);

934 ià(
şassD©a
 =ğ
NULL
) {

936  
çl£
;

944 
u4
 
d©aDefš”
 = 
	`fšdFœ¡CÏssD©aDefš”
(
¡©e
, 
şassD©a
);

945 
boŞ
 
»suÉ
 = (
d©aDefš”
 =ğ
defš”Idx
è|| (d©aDefš” =ğ
kDexNoIndex
);

947 
	`ä“
(
şassD©a
);

948  
»suÉ
;

949 
	}
}

954 
boŞ
 
	$v”ifyAÂÙ©iÚsDœeùÜyIsFÜDef
(cÚ¡ 
CheckS‹
* 
¡©e
,

955 
u4
 
off£t
, u4 
defš”Idx
) {

956 ià(
off£t
 == 0) {

957  
Œue
;

960 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
dœ
 =

961 (cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
*è
	`fePoš‹r
(
¡©e
, 
off£t
);

962 
u4
 
ªnoDefš”
 = 
	`fšdFœ¡AÂÙ©iÚsDœeùÜyDefš”
(
¡©e
, 
dœ
);

964  (
ªnoDefš”
 =ğ
defš”Idx
è|| (ªnoDefš” =ğ
kDexNoIndex
);

965 
	}
}

968 * 
	$üossV”ifyCÏssDefI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

969 cÚ¡ 
DexCÏssDef
* 
™em
 = (cÚ¡ DexCÏssDef*è
±r
;

970 
u4
 
şassIdx
 = 
™em
->classIdx;

971 cÚ¡ * 
desütÜ
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
şassIdx
);

973 ià(!
	`dexIsCÏssDesütÜ
(
desütÜ
)) {

974 
	`ALOGE
("Inv®id cÏss: '%s'", 
desütÜ
);

975  
NULL
;

978 ià(
	`£tDefšedCÏssB™
(
¡©e
, 
şassIdx
)) {

979 
	`ALOGE
("Du¶iÿ‹ cÏs defš™iÚ: '%s'", 
desütÜ
);

980  
NULL
;

983 
boŞ
 
okay
 =

984 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

985 
™em
->
š‹rçûsOff
, 
kDexTy³Ty³Li¡
)

986 && 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

987 
™em
->
ªnÙ©iÚsOff
, 
kDexTy³AÂÙ©iÚsDœeùÜyI‹m
)

988 && 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

989 
™em
->
şassD©aOff
, 
kDexTy³CÏssD©aI‹m
)

990 && 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

991 
™em
->
¡©icV®uesOff
, 
kDexTy³EncodedA¼ayI‹m
);

993 ià(!
okay
) {

994  
NULL
;

997 ià(
™em
->
su³rşassIdx
 !ğ
kDexNoIndex
) {

998 
desütÜ
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
™em
->
su³rşassIdx
);

999 ià(!
	`dexIsCÏssDesütÜ
(
desütÜ
)) {

1000 
	`ALOGE
("Inv®id su³rşass: '%s'", 
desütÜ
);

1001  
NULL
;

1005 cÚ¡ 
DexTy³Li¡
* 
š‹rçûs
 =

1006 
	`dexG‘IÁ”çûsLi¡
(
¡©e
->
pDexFe
, 
™em
);

1007 ià(
š‹rçûs
 !ğ
NULL
) {

1008 
u4
 
size
 = 
š‹rçûs
->size;

1009 
u4
 
i
;

1015 
i
 = 0; i < 
size
; i++) {

1016 
desütÜ
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
,

1017 
	`dexTy³Li¡G‘Idx
(
š‹rçûs
, 
i
));

1018 ià(!
	`dexIsCÏssDesütÜ
(
desütÜ
)) {

1019 
	`ALOGE
("Inv®id iÁ”çû: '%s'", 
desütÜ
);

1020  
NULL
;

1031 
i
 = 1; i < 
size
; i++) {

1032 
u4
 
idx1
 = 
	`dexTy³Li¡G‘Idx
(
š‹rçûs
, 
i
);

1033 
u4
 
j
;

1034 
j
 = 0; j < 
i
; j++) {

1035 
u4
 
idx2
 = 
	`dexTy³Li¡G‘Idx
(
š‹rçûs
, 
j
);

1036 ià(
idx1
 =ğ
idx2
) {

1037 
	`ALOGE
("Duplicate interface: '%s'",

1038 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
idx1
));

1039  
NULL
;

1045 ià(!
	`v”ifyCÏssD©aIsFÜDef
(
¡©e
, 
™em
->
şassD©aOff
, i‹m->
şassIdx
)) {

1046 
	`ALOGE
("Invalid class_data_item");

1047  
NULL
;

1050 ià(!
	`v”ifyAÂÙ©iÚsDœeùÜyIsFÜDef
(
¡©e
, 
™em
->
ªnÙ©iÚsOff
,

1051 
™em
->
şassIdx
)) {

1052 
	`ALOGE
("Invalid‡nnotations_directory_item");

1053  
NULL
;

1056  (*è(
™em
 + 1);

1057 
	}
}

1062 
u1
* 
	$sw­F›ldAÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
couÁ
, 
u1
* 
addr
) {

1063 
DexF›ldAÂÙ©iÚsI‹m
* 
™em
 = (DexF›ldAÂÙ©iÚsI‹m*è
addr
;

1064 
boŞ
 
fœ¡
 = 
Œue
;

1065 
u4
 
Ï¡Idx
 = 0;

1067 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
DexF›ldAÂÙ©iÚsI‹m
));

1069 
couÁ
--) {

1070 
	`SWAP_INDEX4
(
™em
->
f›ldIdx
, 
¡©e
->
pH—d”
->
f›ldIdsSize
);

1071 
	`SWAP_OFFSET4
(
™em
->
ªnÙ©iÚsOff
);

1073 ià(
fœ¡
) {

1074 
fœ¡
 = 
çl£
;

1075 } ià(
Ï¡Idx
 >ğ
™em
->
f›ldIdx
) {

1076 
	`ALOGE
("Out-of-Üd” f›ld_idx: %#xh’ %#x", 
Ï¡Idx
,

1077 
™em
->
f›ldIdx
);

1078  
NULL
;

1081 
Ï¡Idx
 = 
™em
->
f›ldIdx
;

1082 
™em
++;

1085  (
u1
*è
™em
;

1086 
	}
}

1091 
u1
* 
	$sw­M‘hodAÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
couÁ
, 
u1
* 
addr
) {

1092 
DexM‘hodAÂÙ©iÚsI‹m
* 
™em
 = (DexM‘hodAÂÙ©iÚsI‹m*è
addr
;

1093 
boŞ
 
fœ¡
 = 
Œue
;

1094 
u4
 
Ï¡Idx
 = 0;

1096 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
DexM‘hodAÂÙ©iÚsI‹m
));

1098 
couÁ
--) {

1099 
	`SWAP_INDEX4
(
™em
->
m‘hodIdx
, 
¡©e
->
pH—d”
->
m‘hodIdsSize
);

1100 
	`SWAP_OFFSET4
(
™em
->
ªnÙ©iÚsOff
);

1102 ià(
fœ¡
) {

1103 
fœ¡
 = 
çl£
;

1104 } ià(
Ï¡Idx
 >ğ
™em
->
m‘hodIdx
) {

1105 
	`ALOGE
("Out-of-Üd” m‘hod_idx: %#xh’ %#x", 
Ï¡Idx
,

1106 
™em
->
m‘hodIdx
);

1107  
NULL
;

1110 
Ï¡Idx
 = 
™em
->
m‘hodIdx
;

1111 
™em
++;

1114  (
u1
*è
™em
;

1115 
	}
}

1120 
u1
* 
	$sw­P¬am‘”AÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
couÁ
,

1121 
u1
* 
addr
) {

1122 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
™em
 = (DexP¬am‘”AÂÙ©iÚsI‹m*è
addr
;

1123 
boŞ
 
fœ¡
 = 
Œue
;

1124 
u4
 
Ï¡Idx
 = 0;

1126 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
DexP¬am‘”AÂÙ©iÚsI‹m
));

1128 
couÁ
--) {

1129 
	`SWAP_INDEX4
(
™em
->
m‘hodIdx
, 
¡©e
->
pH—d”
->
m‘hodIdsSize
);

1130 
	`SWAP_OFFSET4
(
™em
->
ªnÙ©iÚsOff
);

1132 ià(
fœ¡
) {

1133 
fœ¡
 = 
çl£
;

1134 } ià(
Ï¡Idx
 >ğ
™em
->
m‘hodIdx
) {

1135 
	`ALOGE
("Out-of-Üd” m‘hod_idx: %#xh’ %#x", 
Ï¡Idx
,

1136 
™em
->
m‘hodIdx
);

1137  
NULL
;

1140 
Ï¡Idx
 = 
™em
->
m‘hodIdx
;

1141 
™em
++;

1144  (
u1
*è
™em
;

1145 
	}
}

1149 * 
	$sw­AÂÙ©iÚsDœeùÜyI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1150 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
™em
 = (DexAÂÙ©iÚsDœeùÜyI‹m*è
±r
;

1152 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

1153 
	`SWAP_OFFSET4
(
™em
->
şassAÂÙ©iÚsOff
);

1154 
	`SWAP_FIELD4
(
™em
->
f›ldsSize
);

1155 
	`SWAP_FIELD4
(
™em
->
m‘hodsSize
);

1156 
	`SWAP_FIELD4
(
™em
->
·¿m‘”sSize
);

1158 
u1
* 
addr
 = (u1*è(
™em
 + 1);

1160 ià(
™em
->
f›ldsSize
 != 0) {

1161 
addr
 = 
	`sw­F›ldAÂÙ©iÚs
(
¡©e
, 
™em
->
f›ldsSize
,‡ddr);

1162 ià(
addr
 =ğ
NULL
) {

1163  
NULL
;

1167 ià(
™em
->
m‘hodsSize
 != 0) {

1168 
addr
 = 
	`sw­M‘hodAÂÙ©iÚs
(
¡©e
, 
™em
->
m‘hodsSize
,‡ddr);

1169 ià(
addr
 =ğ
NULL
) {

1170  
NULL
;

1174 ià(
™em
->
·¿m‘”sSize
 != 0) {

1175 
addr
 = 
	`sw­P¬am‘”AÂÙ©iÚs
(
¡©e
, 
™em
->
·¿m‘”sSize
,‡ddr);

1176 ià(
addr
 =ğ
NULL
) {

1177  
NULL
;

1181  
addr
;

1182 
	}
}

1186 cÚ¡ 
u1
* 
	$üossV”ifyF›ldAÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
couÁ
,

1187 cÚ¡ 
u1
* 
addr
, 
u4
 
defššgCÏss
) {

1188 cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
™em
 = (DexF›ldAÂÙ©iÚsI‹m*è
addr
;

1190 
couÁ
--) {

1191 ià(!
	`v”ifyF›ldDefš”
(
¡©e
, 
defššgCÏss
, 
™em
->
f›ldIdx
)) {

1192  
NULL
;

1194 ià(!
	`dexD©aM­V”ify
(
¡©e
->
pD©aM­
, 
™em
->
ªnÙ©iÚsOff
,

1195 
kDexTy³AÂÙ©iÚS‘I‹m
)) {

1196  
NULL
;

1198 
™em
++;

1201  (cÚ¡ 
u1
*è
™em
;

1202 
	}
}

1206 cÚ¡ 
u1
* 
	$üossV”ifyM‘hodAÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
,

1207 
u4
 
couÁ
, cÚ¡ 
u1
* 
addr
, u4 
defššgCÏss
) {

1208 cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
™em
 = (DexM‘hodAÂÙ©iÚsI‹m*è
addr
;

1210 
couÁ
--) {

1211 ià(!
	`v”ifyM‘hodDefš”
(
¡©e
, 
defššgCÏss
, 
™em
->
m‘hodIdx
)) {

1212  
NULL
;

1214 ià(!
	`dexD©aM­V”ify
(
¡©e
->
pD©aM­
, 
™em
->
ªnÙ©iÚsOff
,

1215 
kDexTy³AÂÙ©iÚS‘I‹m
)) {

1216  
NULL
;

1218 
™em
++;

1221  (cÚ¡ 
u1
*è
™em
;

1222 
	}
}

1226 cÚ¡ 
u1
* 
	$üossV”ifyP¬am‘”AÂÙ©iÚs
(cÚ¡ 
CheckS‹
* 
¡©e
,

1227 
u4
 
couÁ
, cÚ¡ 
u1
* 
addr
, u4 
defššgCÏss
) {

1228 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
™em
 =

1229 (
DexP¬am‘”AÂÙ©iÚsI‹m
*è
addr
;

1231 
couÁ
--) {

1232 ià(!
	`v”ifyM‘hodDefš”
(
¡©e
, 
defššgCÏss
, 
™em
->
m‘hodIdx
)) {

1233  
NULL
;

1235 ià(!
	`dexD©aM­V”ify
(
¡©e
->
pD©aM­
, 
™em
->
ªnÙ©iÚsOff
,

1236 
kDexTy³AÂÙ©iÚS‘RefLi¡
)) {

1237  
NULL
;

1239 
™em
++;

1242  (cÚ¡ 
u1
*è
™em
;

1243 
	}
}

1248 
u4
 
	$fšdFœ¡AÂÙ©iÚsDœeùÜyDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
,

1249 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
dœ
) {

1250 ià(
dœ
->
f›ldsSize
 != 0) {

1251 cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
f›lds
 =

1252 
	`dexG‘F›ldAÂÙ©iÚs
(
¡©e
->
pDexFe
, 
dœ
);

1253 cÚ¡ 
DexF›ldId
* 
f›ld
 =

1254 
	`dexG‘F›ldId
(
¡©e
->
pDexFe
, 
f›lds
[0].
f›ldIdx
);

1255  
f›ld
->
şassIdx
;

1258 ià(
dœ
->
m‘hodsSize
 != 0) {

1259 cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
m‘hods
 =

1260 
	`dexG‘M‘hodAÂÙ©iÚs
(
¡©e
->
pDexFe
, 
dœ
);

1261 cÚ¡ 
DexM‘hodId
* 
m‘hod
 =

1262 
	`dexG‘M‘hodId
(
¡©e
->
pDexFe
, 
m‘hods
[0].
m‘hodIdx
);

1263  
m‘hod
->
şassIdx
;

1266 ià(
dœ
->
·¿m‘”sSize
 != 0) {

1267 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
·¿m‘”s
 =

1268 
	`dexG‘P¬am‘”AÂÙ©iÚs
(
¡©e
->
pDexFe
, 
dœ
);

1269 cÚ¡ 
DexM‘hodId
* 
m‘hod
 =

1270 
	`dexG‘M‘hodId
(
¡©e
->
pDexFe
, 
·¿m‘”s
[0].
m‘hodIdx
);

1271  
m‘hod
->
şassIdx
;

1274  
kDexNoIndex
;

1275 
	}
}

1278 * 
	$üossV”ifyAÂÙ©iÚsDœeùÜyI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
,

1279 * 
±r
) {

1280 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
™em
 = (cÚ¡ DexAÂÙ©iÚsDœeùÜyI‹m*è
±r
;

1281 
u4
 
defššgCÏss
 = 
	`fšdFœ¡AÂÙ©iÚsDœeùÜyDefš”
(
¡©e
, 
™em
);

1283 ià(!
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

1284 
™em
->
şassAÂÙ©iÚsOff
, 
kDexTy³AÂÙ©iÚS‘I‹m
)) {

1285  
NULL
;

1288 cÚ¡ 
u1
* 
addr
 = (cÚ¡ u1*è(
™em
 + 1);

1290 ià(
™em
->
f›ldsSize
 != 0) {

1291 
addr
 = 
	`üossV”ifyF›ldAÂÙ©iÚs
(
¡©e
, 
™em
->
f›ldsSize
,‡ddr,

1292 
defššgCÏss
);

1293 ià(
addr
 =ğ
NULL
) {

1294  
NULL
;

1298 ià(
™em
->
m‘hodsSize
 != 0) {

1299 
addr
 = 
	`üossV”ifyM‘hodAÂÙ©iÚs
(
¡©e
, 
™em
->
m‘hodsSize
,‡ddr,

1300 
defššgCÏss
);

1301 ià(
addr
 =ğ
NULL
) {

1302  
NULL
;

1306 ià(
™em
->
·¿m‘”sSize
 != 0) {

1307 
addr
 = 
	`üossV”ifyP¬am‘”AÂÙ©iÚs
(
¡©e
, 
™em
->
·¿m‘”sSize
,

1308 
addr
, 
defššgCÏss
);

1309 ià(
addr
 =ğ
NULL
) {

1310  
NULL
;

1314  (*è
addr
;

1315 
	}
}

1318 * 
	$sw­Ty³Li¡
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
)

1320 
DexTy³Li¡
* 
pTy³Li¡
 = (DexTy³Li¡*è
±r
;

1321 
DexTy³I‹m
* 
pTy³
;

1322 
u4
 
couÁ
;

1324 
	`CHECK_PTR_RANGE
(
pTy³Li¡
,…TypeList + 1);

1325 
	`SWAP_FIELD4
(
pTy³Li¡
->
size
);

1326 
couÁ
 = 
pTy³Li¡
->
size
;

1327 
pTy³
 = 
pTy³Li¡
->
li¡
;

1328 
	`CHECK_LIST_SIZE
(
pTy³
, 
couÁ
, (
DexTy³I‹m
));

1330 
couÁ
--) {

1331 
	`SWAP_INDEX2
(
pTy³
->
ty³Idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

1332 
pTy³
++;

1335  
pTy³
;

1336 
	}
}

1340 * 
	$sw­AÂÙ©iÚS‘RefLi¡
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1341 
DexAÂÙ©iÚS‘RefLi¡
* 
li¡
 = (DexAÂÙ©iÚS‘RefLi¡*è
±r
;

1342 
DexAÂÙ©iÚS‘RefI‹m
* 
™em
;

1343 
u4
 
couÁ
;

1345 
	`CHECK_PTR_RANGE
(
li¡
,†ist + 1);

1346 
	`SWAP_FIELD4
(
li¡
->
size
);

1347 
couÁ
 = 
li¡
->
size
;

1348 
™em
 = 
li¡
->list;

1349 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
DexAÂÙ©iÚS‘RefI‹m
));

1351 
couÁ
--) {

1352 
	`SWAP_OFFSET4
(
™em
->
ªnÙ©iÚsOff
);

1353 
™em
++;

1356  
™em
;

1357 
	}
}

1360 * 
	$üossV”ifyAÂÙ©iÚS‘RefLi¡
(cÚ¡ 
CheckS‹
* 
¡©e
,

1361 * 
±r
) {

1362 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
li¡
 = (cÚ¡ DexAÂÙ©iÚS‘RefLi¡*è
±r
;

1363 cÚ¡ 
DexAÂÙ©iÚS‘RefI‹m
* 
™em
 = 
li¡
->list;

1364 
couÁ
 = 
li¡
->
size
;

1366 
couÁ
--) {

1367 ià(!
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

1368 
™em
->
ªnÙ©iÚsOff
, 
kDexTy³AÂÙ©iÚS‘I‹m
)) {

1369  
NULL
;

1371 
™em
++;

1374  (*è
™em
;

1375 
	}
}

1379 * 
	$sw­AÂÙ©iÚS‘I‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1380 
DexAÂÙ©iÚS‘I‹m
* 
£t
 = (DexAÂÙ©iÚS‘I‹m*è
±r
;

1381 
u4
* 
™em
;

1382 
u4
 
couÁ
;

1384 
	`CHECK_PTR_RANGE
(
£t
, set + 1);

1385 
	`SWAP_FIELD4
(
£t
->
size
);

1386 
couÁ
 = 
£t
->
size
;

1387 
™em
 = 
£t
->
’Œ›s
;

1388 
	`CHECK_LIST_SIZE
(
™em
, 
couÁ
, (
u4
));

1390 
couÁ
--) {

1391 
	`SWAP_OFFSET4
(*
™em
);

1392 
™em
++;

1395  
™em
;

1396 
	}
}

1400 
u4
 
	$ªnÙ©iÚI‹mTy³Idx
(cÚ¡ 
DexAÂÙ©iÚI‹m
* 
™em
) {

1401 cÚ¡ 
u1
* 
d©a
 = 
™em
->
ªnÙ©iÚ
;

1402  
	`»adUnsigÃdLeb128
(&
d©a
);

1403 
	}
}

1406 * 
	$üossV”ifyAÂÙ©iÚS‘I‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1407 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
£t
 = (cÚ¡ DexAÂÙ©iÚS‘I‹m*è
±r
;

1408 
couÁ
 = 
£t
->
size
;

1409 
u4
 
Ï¡Idx
 = 0;

1410 
boŞ
 
fœ¡
 = 
Œue
;

1411 
i
;

1413 
i
 = 0; i < 
couÁ
; i++) {

1414 ià(!
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
,

1415 
	`dexG‘AÂÙ©iÚOff
(
£t
, 
i
), 
kDexTy³AÂÙ©iÚI‹m
)) {

1416  
NULL
;

1419 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
ªnÙ©iÚ
 =

1420 
	`dexG‘AÂÙ©iÚI‹m
(
¡©e
->
pDexFe
, 
£t
, 
i
);

1421 
u4
 
idx
 = 
	`ªnÙ©iÚI‹mTy³Idx
(
ªnÙ©iÚ
);

1423 ià(
fœ¡
) {

1424 
fœ¡
 = 
çl£
;

1425 } ià(
Ï¡Idx
 >ğ
idx
) {

1426 
	`ALOGE
("Out-of-orderƒntryypes: %#xhen %#x",

1427 
Ï¡Idx
, 
idx
);

1428  
NULL
;

1431 
Ï¡Idx
 = 
idx
;

1434  (*è(
£t
->
’Œ›s
 + 
couÁ
);

1435 
	}
}

1438 
boŞ
 
	$v”ifyF›lds
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
size
,

1439 
DexF›ld
* 
f›lds
, 
boŞ
 
ex³ùStic
) {

1440 
u4
 
i
;

1442 
i
 = 0; i < 
size
; i++) {

1443 
DexF›ld
* 
f›ld
 = &
f›lds
[
i
];

1444 
u4
 
acûssFÏgs
 = 
f›ld
->accessFlags;

1445 
boŞ
 
isStic
 = (
acûssFÏgs
 & 
ACC_STATIC
) != 0;

1447 
	`CHECK_INDEX
(
f›ld
->
f›ldIdx
, 
¡©e
->
pH—d”
->
f›ldIdsSize
);

1449 ià(
isStic
 !ğ
ex³ùStic
) {

1450 
	`ALOGE
("F›ld iÀwrÚg†i¡ @ %d", 
i
);

1451  
çl£
;

1454 ià((
acûssFÏgs
 & ~
ACC_FIELD_MASK
) != 0) {

1455 
	`ALOGE
("Bogu f›ld‡cûs æag %x @ %d", 
acûssFÏgs
, 
i
);

1456  
çl£
;

1460  
Œue
;

1461 
	}
}

1464 
boŞ
 
	$v”ifyM‘hods
(cÚ¡ 
CheckS‹
* 
¡©e
, 
u4
 
size
,

1465 
DexM‘hod
* 
m‘hods
, 
boŞ
 
ex³ùDœeù
) {

1466 
u4
 
i
;

1468 
i
 = 0; i < 
size
; i++) {

1469 
DexM‘hod
* 
m‘hod
 = &
m‘hods
[
i
];

1471 
	`CHECK_INDEX
(
m‘hod
->
m‘hodIdx
, 
¡©e
->
pH—d”
->
m‘hodIdsSize
);

1473 
u4
 
acûssFÏgs
 = 
m‘hod
->accessFlags;

1474 
boŞ
 
isDœeù
 =

1475 (
acûssFÏgs
 & (
ACC_STATIC
 | 
ACC_PRIVATE
 | 
ACC_CONSTRUCTOR
)) != 0;

1476 
boŞ
 
ex³ùCode
 = (
acûssFÏgs
 & (
ACC_NATIVE
 | 
ACC_ABSTRACT
)) == 0;

1477 
boŞ
 
isSynchrÚized
 = (
acûssFÏgs
 & 
ACC_SYNCHRONIZED
) != 0;

1478 
boŞ
 
®lowSynchrÚized
 = (
acûssFÏgs
 & 
ACC_NATIVE
) != 0;

1480 ià(
isDœeù
 !ğ
ex³ùDœeù
) {

1481 
	`ALOGE
("M‘hod iÀwrÚg†i¡ @ %d", 
i
);

1482  
çl£
;

1485 ià(((
acûssFÏgs
 & ~
ACC_METHOD_MASK
) != 0)

1486 || (
isSynchrÚized
 && !
®lowSynchrÚized
)) {

1487 
	`ALOGE
("Bogu m‘hod‡cûs æag %x @ %d", 
acûssFÏgs
, 
i
);

1488  
çl£
;

1491 ià(
ex³ùCode
) {

1492 ià(
m‘hod
->
codeOff
 == 0) {

1493 
	`ALOGE
("Unexpected zero code_off for‡ccess_flags %x",

1494 
acûssFÏgs
);

1495  
çl£
;

1497 } ià(
m‘hod
->
codeOff
 != 0) {

1498 
	`ALOGE
("Unexpected‚on-zero code_off %#x for‡ccess_flags %x",

1499 
m‘hod
->
codeOff
, 
acûssFÏgs
);

1500  
çl£
;

1504  
Œue
;

1505 
	}
}

1508 
boŞ
 
	$v”ifyCÏssD©aI‹m0
(cÚ¡ 
CheckS‹
* 
¡©e
,

1509 
DexCÏssD©a
* 
şassD©a
) {

1510 
boŞ
 
okay
;

1512 
okay
 = 
	`v”ifyF›lds
(
¡©e
, 
şassD©a
->
h—d”
.
¡©icF›ldsSize
,

1513 
şassD©a
->
¡©icF›lds
, 
Œue
);

1515 ià(!
okay
) {

1516 
	`ALOGE
("Trouble with static fields");

1517  
çl£
;

1520 
	`v”ifyF›lds
(
¡©e
, 
şassD©a
->
h—d”
.
š¡ªûF›ldsSize
,

1521 
şassD©a
->
š¡ªûF›lds
, 
çl£
);

1523 ià(!
okay
) {

1524 
	`ALOGE
("Trouble with instance fields");

1525  
çl£
;

1528 
okay
 = 
	`v”ifyM‘hods
(
¡©e
, 
şassD©a
->
h—d”
.
dœeùM‘hodsSize
,

1529 
şassD©a
->
dœeùM‘hods
, 
Œue
);

1531 ià(!
okay
) {

1532 
	`ALOGE
("Trouble with direct methods");

1533  
çl£
;

1536 
okay
 = 
	`v”ifyM‘hods
(
¡©e
, 
şassD©a
->
h—d”
.
vœtu®M‘hodsSize
,

1537 
şassD©a
->
vœtu®M‘hods
, 
çl£
);

1539 ià(!
okay
) {

1540 
	`ALOGE
("Trouble with virtual methods");

1541  
çl£
;

1544  
Œue
;

1545 
	}
}

1548 * 
	$šŒaV”ifyCÏssD©aI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1549 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

1550 
DexCÏssD©a
* 
şassD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
d©a
, 
¡©e
->
feEnd
);

1552 ià(
şassD©a
 =ğ
NULL
) {

1553 
	`ALOGE
("Unableo…arse class_data_item");

1554  
NULL
;

1557 
boŞ
 
okay
 = 
	`v”ifyCÏssD©aI‹m0
(
¡©e
, 
şassD©a
);

1559 
	`ä“
(
şassD©a
);

1561 ià(!
okay
) {

1562  
NULL
;

1565  (*è
d©a
;

1566 
	}
}

1571 
u4
 
	$fšdFœ¡CÏssD©aDefš”
(cÚ¡ 
CheckS‹
* 
¡©e
,

1572 
DexCÏssD©a
* 
şassD©a
) {

1573 ià(
şassD©a
->
h—d”
.
¡©icF›ldsSize
 != 0) {

1574 
u4
 
f›ldIdx
 = 
şassD©a
->
¡©icF›lds
[0].fieldIdx;

1575 cÚ¡ 
DexF›ldId
* 
f›ld
 = 
	`dexG‘F›ldId
(
¡©e
->
pDexFe
, 
f›ldIdx
);

1576  
f›ld
->
şassIdx
;

1579 ià(
şassD©a
->
h—d”
.
š¡ªûF›ldsSize
 != 0) {

1580 
u4
 
f›ldIdx
 = 
şassD©a
->
š¡ªûF›lds
[0].fieldIdx;

1581 cÚ¡ 
DexF›ldId
* 
f›ld
 = 
	`dexG‘F›ldId
(
¡©e
->
pDexFe
, 
f›ldIdx
);

1582  
f›ld
->
şassIdx
;

1585 ià(
şassD©a
->
h—d”
.
dœeùM‘hodsSize
 != 0) {

1586 
u4
 
m‘hodIdx
 = 
şassD©a
->
dœeùM‘hods
[0].methodIdx;

1587 cÚ¡ 
DexM‘hodId
* 
m‘h
 = 
	`dexG‘M‘hodId
(
¡©e
->
pDexFe
, 
m‘hodIdx
);

1588  
m‘h
->
şassIdx
;

1591 ià(
şassD©a
->
h—d”
.
vœtu®M‘hodsSize
 != 0) {

1592 
u4
 
m‘hodIdx
 = 
şassD©a
->
vœtu®M‘hods
[0].methodIdx;

1593 cÚ¡ 
DexM‘hodId
* 
m‘h
 = 
	`dexG‘M‘hodId
(
¡©e
->
pDexFe
, 
m‘hodIdx
);

1594  
m‘h
->
şassIdx
;

1597  
kDexNoIndex
;

1598 
	}
}

1601 * 
	$üossV”ifyCÏssD©aI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1602 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

1603 
DexCÏssD©a
* 
şassD©a
 = 
	`dexR—dAndV”ifyCÏssD©a
(&
d©a
, 
¡©e
->
feEnd
);

1604 
u4
 
defššgCÏss
 = 
	`fšdFœ¡CÏssD©aDefš”
(
¡©e
, 
şassD©a
);

1605 
boŞ
 
okay
 = 
Œue
;

1606 
u4
 
i
;

1608 
i
 = 
şassD©a
->
h—d”
.
¡©icF›ldsSize
; 
okay
 && (i > 0); ) {

1609 
i
--;

1610 cÚ¡ 
DexF›ld
* 
f›ld
 = &
şassD©a
->
¡©icF›lds
[
i
];

1611 
okay
 = 
	`v”ifyF›ldDefš”
(
¡©e
, 
defššgCÏss
, 
f›ld
->
f›ldIdx
);

1614 
i
 = 
şassD©a
->
h—d”
.
š¡ªûF›ldsSize
; 
okay
 && (i > 0); ) {

1615 
i
--;

1616 cÚ¡ 
DexF›ld
* 
f›ld
 = &
şassD©a
->
š¡ªûF›lds
[
i
];

1617 
okay
 = 
	`v”ifyF›ldDefš”
(
¡©e
, 
defššgCÏss
, 
f›ld
->
f›ldIdx
);

1620 
i
 = 
şassD©a
->
h—d”
.
dœeùM‘hodsSize
; 
okay
 && (i > 0); ) {

1621 
i
--;

1622 cÚ¡ 
DexM‘hod
* 
m‘h
 = &
şassD©a
->
dœeùM‘hods
[
i
];

1623 
okay
 = 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
, 
m‘h
->
codeOff
,

1624 
kDexTy³CodeI‹m
)

1625 && 
	`v”ifyM‘hodDefš”
(
¡©e
, 
defššgCÏss
, 
m‘h
->
m‘hodIdx
);

1628 
i
 = 
şassD©a
->
h—d”
.
vœtu®M‘hodsSize
; 
okay
 && (i > 0); ) {

1629 
i
--;

1630 cÚ¡ 
DexM‘hod
* 
m‘h
 = &
şassD©a
->
vœtu®M‘hods
[
i
];

1631 
okay
 = 
	`dexD©aM­V”ify0Ok
(
¡©e
->
pD©aM­
, 
m‘h
->
codeOff
,

1632 
kDexTy³CodeI‹m
)

1633 && 
	`v”ifyM‘hodDefš”
(
¡©e
, 
defššgCÏss
, 
m‘h
->
m‘hodIdx
);

1636 
	`ä“
(
şassD©a
);

1638 ià(!
okay
) {

1639  
NULL
;

1642  (*è
d©a
;

1643 
	}
}

1648 
u4
 
	$£tHªdËrOffsAndV”ify
(cÚ¡ 
CheckS‹
* 
¡©e
,

1649 
DexCode
* 
code
, 
u4
 
fœ¡Off£t
, u4 
hªdËrsSize
, u4* 
hªdËrOffs
) {

1650 cÚ¡ 
u1
* 
feEnd
 = 
¡©e
->fileEnd;

1651 cÚ¡ 
u1
* 
hªdËrsBa£
 = 
	`dexG‘C©chHªdËrD©a
(
code
);

1652 
u4
 
off£t
 = 
fœ¡Off£t
;

1653 
boŞ
 
okay
 = 
Œue
;

1654 
u4
 
i
;

1656 
i
 = 0; i < 
hªdËrsSize
; i++) {

1657 cÚ¡ 
u1
* 
±r
 = 
hªdËrsBa£
 + 
off£t
;

1658 
size
 = 
	`»adAndV”ifySigÃdLeb128
(&
±r
, 
feEnd
, &
okay
);

1659 
boŞ
 
ÿtchAÎ
;

1661 ià(!
okay
) {

1662 
	`ALOGE
("Bogus size");

1666 ià((
size
 < -65536) || (size > 65536)) {

1667 
	`ALOGE
("Inv®id size: %d", 
size
);

1671 ià(
size
 <= 0) {

1672 
ÿtchAÎ
 = 
Œue
;

1673 
size
 = -size;

1675 
ÿtchAÎ
 = 
çl£
;

1678 
hªdËrOffs
[
i
] = 
off£t
;

1680 
size
-- > 0) {

1681 
u4
 
ty³Idx
 =

1682 
	`»adAndV”ifyUnsigÃdLeb128
(&
±r
, 
feEnd
, &
okay
);

1684 ià(!
okay
) {

1685 
	`ALOGE
("Bogusype_idx");

1689 
	`CHECK_INDEX
(
ty³Idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

1691 
u4
 
addr
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
±r
, 
feEnd
, &
okay
);

1693 ià(!
okay
) {

1694 
	`ALOGE
("Bogus‡ddr");

1698 ià(
addr
 >ğ
code
->
š¢sSize
) {

1699 
	`ALOGE
("Inv®id‡ddr: %#x", 
addr
);

1704 ià(
ÿtchAÎ
) {

1705 
u4
 
addr
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
±r
, 
feEnd
, &
okay
);

1707 ià(!
okay
) {

1708 
	`ALOGE
("Bogus catch_all_addr");

1712 ià(
addr
 >ğ
code
->
š¢sSize
) {

1713 
	`ALOGE
("Inv®id c©ch_®l_addr: %#x", 
addr
);

1718 
off£t
 = 
±r
 - 
hªdËrsBa£
;

1721  
off£t
;

1722 
	}
}

1726 * 
	$sw­Tr›sAndC©ches
(cÚ¡ 
CheckS‹
* 
¡©e
, 
DexCode
* 
code
) {

1727 cÚ¡ 
u1
* 
’codedHªdËrs
 = 
	`dexG‘C©chHªdËrD©a
(
code
);

1728 cÚ¡ 
u1
* 
’codedPŒ
 = 
’codedHªdËrs
;

1729 
boŞ
 
okay
 = 
Œue
;

1730 
u4
 
hªdËrsSize
 =

1731 
	`»adAndV”ifyUnsigÃdLeb128
(&
’codedPŒ
, 
¡©e
->
feEnd
, &
okay
);

1733 ià(!
okay
) {

1734 
	`ALOGE
("Bogus handlers_size");

1735  
NULL
;

1738 ià((
hªdËrsSize
 == 0) || (handlersSize >= 65536)) {

1739 
	`ALOGE
("Inv®id hªdËrs_size: %d", 
hªdËrsSize
);

1740  
NULL
;

1743 
u4
 
hªdËrOffs
[
hªdËrsSize
];

1744 
u4
 
’dOff£t
 = 
	`£tHªdËrOffsAndV”ify
(
¡©e
, 
code
,

1745 
’codedPŒ
 - 
’codedHªdËrs
,

1746 
hªdËrsSize
, 
hªdËrOffs
);

1748 ià(
’dOff£t
 == 0) {

1749  
NULL
;

1752 
DexTry
* 
Œ›s
 = (DexTry*è
	`dexG‘Tr›s
(
code
);

1753 
u4
 
couÁ
 = 
code
->
Œ›sSize
;

1754 
u4
 
Ï¡End
 = 0;

1756 
	`CHECK_LIST_SIZE
(
Œ›s
, 
couÁ
, (
DexTry
));

1758 
couÁ
--) {

1759 
u4
 
i
;

1761 
	`SWAP_FIELD4
(
Œ›s
->
¡¬tAddr
);

1762 
	`SWAP_FIELD2
(
Œ›s
->
š¢CouÁ
);

1763 
	`SWAP_FIELD2
(
Œ›s
->
hªdËrOff
);

1765 ià(
Œ›s
->
¡¬tAddr
 < 
Ï¡End
) {

1766 
	`ALOGE
("Out-of-orderry");

1767  
NULL
;

1770 ià(
Œ›s
->
¡¬tAddr
 >ğ
code
->
š¢sSize
) {

1771 
	`ALOGE
("Inv®id s¹_addr: %#x", 
Œ›s
->
¡¬tAddr
);

1772  
NULL
;

1775 
i
 = 0; i < 
hªdËrsSize
; i++) {

1776 ià(
Œ›s
->
hªdËrOff
 =ğ
hªdËrOffs
[
i
]) {

1781 ià(
i
 =ğ
hªdËrsSize
) {

1782 
	`ALOGE
("Bogu hªdË¸off£t: %#x", 
Œ›s
->
hªdËrOff
);

1783  
NULL
;

1786 
Ï¡End
 = 
Œ›s
->
¡¬tAddr
 +r›s->
š¢CouÁ
;

1788 ià(
Ï¡End
 > 
code
->
š¢sSize
) {

1789 
	`ALOGE
("Invalid insn_count: %#x (end‡ddr %#x)",

1790 
Œ›s
->
š¢CouÁ
, 
Ï¡End
);

1791  
NULL
;

1794 
Œ›s
++;

1797  (
u1
*è
’codedHªdËrs
 + 
’dOff£t
;

1798 
	}
}

1801 * 
	$sw­CodeI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1802 
DexCode
* 
™em
 = (DexCode*è
±r
;

1803 
u2
* 
š¢s
;

1804 
u4
 
couÁ
;

1806 
	`CHECK_PTR_RANGE
(
™em
, item + 1);

1807 
	`SWAP_FIELD2
(
™em
->
»gi¡”sSize
);

1808 
	`SWAP_FIELD2
(
™em
->
šsSize
);

1809 
	`SWAP_FIELD2
(
™em
->
outsSize
);

1810 
	`SWAP_FIELD2
(
™em
->
Œ›sSize
);

1811 
	`SWAP_OFFSET4
(
™em
->
debugInfoOff
);

1812 
	`SWAP_FIELD4
(
™em
->
š¢sSize
);

1814 ià(
™em
->
šsSize
 > i‹m->
»gi¡”sSize
) {

1815 
	`ALOGE
("šsSiz(%uè>„egi¡”sSiz(%u)", 
™em
->
šsSize
,

1816 
™em
->
»gi¡”sSize
);

1817  
NULL
;

1820 ià((
™em
->
outsSize
 > 5è&& (™em->outsSiz> i‹m->
»gi¡”sSize
)) {

1828 
	`ALOGE
("outsSiz(%uè>„egi¡”sSiz(%u)", 
™em
->
outsSize
,

1829 
™em
->
»gi¡”sSize
);

1830  
NULL
;

1833 
couÁ
 = 
™em
->
š¢sSize
;

1834 
š¢s
 = 
™em
->insns;

1835 
	`CHECK_LIST_SIZE
(
š¢s
, 
couÁ
, (
u2
));

1837 
couÁ
--) {

1838 *
š¢s
 = 
	`SWAP2
(*insns);

1839 
š¢s
++;

1842 ià(
™em
->
Œ›sSize
 == 0) {

1843 
±r
 = 
š¢s
;

1845 ià((((
u4
è
š¢s
) & 3) != 0) {

1847 ià(*
š¢s
 != 0) {

1848 
	`ALOGE
("NÚ-z”Ø·ddšg: %#x", (
u4
è*
š¢s
);

1849  
NULL
;

1853 
±r
 = 
	`sw­Tr›sAndC©ches
(
¡©e
, 
™em
);

1856  
±r
;

1857 
	}
}

1860 * 
	$šŒaV”ifySŒšgD©aI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1861 cÚ¡ 
u1
* 
feEnd
 = 
¡©e
->fileEnd;

1862 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

1863 
boŞ
 
okay
 = 
Œue
;

1864 
u4
 
utf16Size
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

1865 
u4
 
i
;

1867 ià(!
okay
) {

1868 
	`ALOGE
("Bogus utf16_size");

1869  
NULL
;

1872 
i
 = 0; i < 
utf16Size
; i++) {

1873 ià(
d©a
 >ğ
feEnd
) {

1874 
	`ALOGE
("String data would go beyondƒnd-of-file");

1875  
NULL
;

1878 
u1
 
by‹1
 = *(
d©a
++);

1881 
by‹1
 >> 4) {

1884 ià(
by‹1
 == 0) {

1885 
	`ALOGE
("String shorterhan indicated utf16_size %#x",

1886 
utf16Size
);

1887  
NULL
;

1911 
	`ALOGE
("IÎeg® s¹ by‹ %#x", 
by‹1
);

1912  
NULL
;

1916 
u1
 
by‹2
 = *(
d©a
++);

1917 ià((
by‹2
 & 0xc0) != 0x80) {

1918 
	`ALOGE
("IÎeg® cÚtšu©iÚ by‹ %#x", 
by‹2
);

1919  
NULL
;

1921 
u1
 
by‹3
 = *(
d©a
++);

1922 ià((
by‹3
 & 0xc0) != 0x80) {

1923 
	`ALOGE
("IÎeg® cÚtšu©iÚ by‹ %#x", 
by‹3
);

1924  
NULL
;

1926 
u2
 
v®ue
 = ((
by‹1
 & 0x0fè<< 12è| ((
by‹2
 & 0x3f) << 6)

1927 | (
by‹3
 & 0x3f);

1928 ià(
v®ue
 < 0x800) {

1929 
	`ALOGE
("IÎeg®„•»£Á©iÚ fÜ v®u%x", 
v®ue
);

1930  
NULL
;

1937 
u1
 
by‹2
 = *(
d©a
++);

1938 ià((
by‹2
 & 0xc0) != 0x80) {

1939 
	`ALOGE
("IÎeg® cÚtšu©iÚ by‹ %#x", 
by‹2
);

1940  
NULL
;

1942 
u2
 
v®ue
 = ((
by‹1
 & 0x1fè<< 6è| (
by‹2
 & 0x3f);

1943 ià((
v®ue
 != 0) && (value < 0x80)) {

1944 
	`ALOGE
("IÎeg®„•»£Á©iÚ fÜ v®u%x", 
v®ue
);

1945  
NULL
;

1952 ià(*(
d©a
++) != '\0') {

1953 
	`ALOGE
("SŒšg†Úg”hª indiÿ‹d utf16_siz%#x", 
utf16Size
);

1954  
NULL
;

1957  (*è
d©a
;

1958 
	}
}

1961 * 
	$šŒaV”ifyDebugInfoI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

1962 cÚ¡ 
u1
* 
feEnd
 = 
¡©e
->fileEnd;

1963 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

1964 
boŞ
 
okay
 = 
Œue
;

1965 
u4
 
i
;

1967 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

1969 ià(!
okay
) {

1970 
	`ALOGE
("Bogus†ine_start");

1971  
NULL
;

1974 
u4
 
·¿m‘”sSize
 =

1975 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

1977 ià(!
okay
) {

1978 
	`ALOGE
("Bogus…arameters_size");

1979  
NULL
;

1982 ià(
·¿m‘”sSize
 > 65536) {

1983 
	`ALOGE
("Inv®id…¬am‘”s_size: %#x", 
·¿m‘”sSize
);

1984  
NULL
;

1987 
i
 = 0; i < 
·¿m‘”sSize
; i++) {

1988 
u4
 
·¿m‘”Name
 =

1989 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

1991 ià(!
okay
) {

1992 
	`ALOGE
("Bogus…arameter_name");

1993  
NULL
;

1996 ià(
·¿m‘”Name
 != 0) {

1997 
·¿m‘”Name
--;

1998 
	`CHECK_INDEX
(
·¿m‘”Name
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2002 
boŞ
 
dÚe
 = 
çl£
;

2003 !
dÚe
) {

2004 
u1
 
İcode
 = *(
d©a
++);

2006 
İcode
) {

2007 
DBG_END_SEQUENCE
: {

2008 
dÚe
 = 
Œue
;

2011 
DBG_ADVANCE_PC
: {

2012 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2015 
DBG_ADVANCE_LINE
: {

2016 
	`»adAndV”ifySigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2019 
DBG_START_LOCAL
: {

2020 
u4
 
idx
;

2021 
u4
 
»gNum
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2022 ià(!
okay
) ;

2023 ià(
»gNum
 >= 65536) {

2024 
okay
 = 
çl£
;

2027 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2028 ià(!
okay
) ;

2029 ià(
idx
 != 0) {

2030 
idx
--;

2031 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2033 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2034 ià(!
okay
) ;

2035 ià(
idx
 != 0) {

2036 
idx
--;

2037 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2041 
DBG_END_LOCAL
:

2042 
DBG_RESTART_LOCAL
: {

2043 
u4
 
»gNum
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2044 ià(!
okay
) ;

2045 ià(
»gNum
 >= 65536) {

2046 
okay
 = 
çl£
;

2051 
DBG_START_LOCAL_EXTENDED
: {

2052 
u4
 
idx
;

2053 
u4
 
»gNum
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2054 ià(!
okay
) ;

2055 ià(
»gNum
 >= 65536) {

2056 
okay
 = 
çl£
;

2059 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2060 ià(!
okay
) ;

2061 ià(
idx
 != 0) {

2062 
idx
--;

2063 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2065 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2066 ià(!
okay
) ;

2067 ià(
idx
 != 0) {

2068 
idx
--;

2069 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2071 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2072 ià(!
okay
) ;

2073 ià(
idx
 != 0) {

2074 
idx
--;

2075 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2079 
DBG_SET_FILE
: {

2080 
u4
 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2081 ià(!
okay
) ;

2082 ià(
idx
 != 0) {

2083 
idx
--;

2084 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2093 ià(!
okay
) {

2094 
	`ALOGE
("Bogu syÁax fÜ opcod%02x", 
İcode
);

2095  
NULL
;

2099  (*è
d©a
;

2100 
	}
}

2103 cÚ¡ 
u1
* 
v”ifyEncodedV®ue
(cÚ¡ 
CheckS‹
* 
¡©e
, cÚ¡ u1* 
d©a
,

2104 
boŞ
 
üossV”ify
);

2105 cÚ¡ 
u1
* 
v”ifyEncodedAÂÙ©iÚ
(cÚ¡ 
CheckS‹
* 
¡©e
,

2106 cÚ¡ 
u1
* 
d©a
, 
boŞ
 
üossV”ify
);

2110 
u4
 
	$»adUnsigÃdL™eEndŸn
(cÚ¡ 
CheckS‹
* 
¡©e
, cÚ¡ 
u1
** 
pD©a
,

2111 
u4
 
size
) {

2112 cÚ¡ 
u1
* 
d©a
 = *
pD©a
;

2113 
u4
 
»suÉ
 = 0;

2114 
u4
 
i
;

2116 
	`CHECK_PTR_RANGE
(
d©a
, d©¨+ 
size
);

2118 
i
 = 0; i < 
size
; i++) {

2119 
»suÉ
 |ğ((
u4
è*(
d©a
++)è<< (
i
 * 8);

2122 *
pD©a
 = 
d©a
;

2123  
»suÉ
;

2124 
	}
}

2128 cÚ¡ 
u1
* 
	$v”ifyEncodedA¼ay
(cÚ¡ 
CheckS‹
* 
¡©e
,

2129 cÚ¡ 
u1
* 
d©a
, 
boŞ
 
üossV”ify
) {

2130 
boŞ
 
okay
 = 
Œue
;

2131 
u4
 
size
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
¡©e
->
feEnd
, &
okay
);

2133 ià(!
okay
) {

2134 
	`ALOGE
("Bogusƒncoded_array size");

2135  
NULL
;

2138 
size
--) {

2139 
d©a
 = 
	`v”ifyEncodedV®ue
(
¡©e
, d©a, 
üossV”ify
);

2140 ià(
d©a
 =ğ
NULL
) {

2141 
	`ALOGE
("Bogusƒncoded_array value");

2142  
NULL
;

2146  
d©a
;

2147 
	}
}

2151 cÚ¡ 
u1
* 
	$v”ifyEncodedV®ue
(cÚ¡ 
CheckS‹
* 
¡©e
,

2152 cÚ¡ 
u1
* 
d©a
, 
boŞ
 
üossV”ify
) {

2153 
	`CHECK_PTR_RANGE
(
d©a
, data + 1);

2155 
u1
 
h—d”By‹
 = *(
d©a
++);

2156 
u4
 
v®ueTy³
 = 
h—d”By‹
 & 
kDexAÂÙ©iÚV®ueTy³Mask
;

2157 
u4
 
v®ueArg
 = 
h—d”By‹
 >> 
kDexAÂÙ©iÚV®ueArgShiá
;

2159 
v®ueTy³
) {

2160 
kDexAÂÙ©iÚBy‹
: {

2161 ià(
v®ueArg
 != 0) {

2162 
	`ALOGE
("Bogu by‹ siz%#x", 
v®ueArg
);

2163  
NULL
;

2165 
d©a
++;

2168 
kDexAÂÙ©iÚShÜt
:

2169 
kDexAÂÙ©iÚCh¬
: {

2170 ià(
v®ueArg
 > 1) {

2171 
	`ALOGE
("Bogu ch¬/shÜˆsiz%#x", 
v®ueArg
);

2172  
NULL
;

2174 
d©a
 +ğ
v®ueArg
 + 1;

2177 
kDexAÂÙ©iÚIÁ
:

2178 
kDexAÂÙ©iÚFlßt
: {

2179 ià(
v®ueArg
 > 3) {

2180 
	`ALOGE
("Bogu št/æßˆsiz%#x", 
v®ueArg
);

2181  
NULL
;

2183 
d©a
 +ğ
v®ueArg
 + 1;

2186 
kDexAÂÙ©iÚLÚg
:

2187 
kDexAÂÙ©iÚDoubË
: {

2188 
d©a
 +ğ
v®ueArg
 + 1;

2191 
kDexAÂÙ©iÚSŒšg
: {

2192 ià(
v®ueArg
 > 3) {

2193 
	`ALOGE
("Bogu ¡ršg siz%#x", 
v®ueArg
);

2194  
NULL
;

2196 
u4
 
idx
 = 
	`»adUnsigÃdL™eEndŸn
(
¡©e
, &
d©a
, 
v®ueArg
 + 1);

2197 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2200 
kDexAÂÙ©iÚTy³
: {

2201 ià(
v®ueArg
 > 3) {

2202 
	`ALOGE
("Bogu ty³ siz%#x", 
v®ueArg
);

2203  
NULL
;

2205 
u4
 
idx
 = 
	`»adUnsigÃdL™eEndŸn
(
¡©e
, &
d©a
, 
v®ueArg
 + 1);

2206 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

2209 
kDexAÂÙ©iÚF›ld
:

2210 
kDexAÂÙ©iÚEnum
: {

2211 ià(
v®ueArg
 > 3) {

2212 
	`ALOGE
("Bogu f›ld/’um siz%#x", 
v®ueArg
);

2213  
NULL
;

2215 
u4
 
idx
 = 
	`»adUnsigÃdL™eEndŸn
(
¡©e
, &
d©a
, 
v®ueArg
 + 1);

2216 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
f›ldIdsSize
);

2219 
kDexAÂÙ©iÚM‘hod
: {

2220 ià(
v®ueArg
 > 3) {

2221 
	`ALOGE
("Bogu m‘hod siz%#x", 
v®ueArg
);

2222  
NULL
;

2224 
u4
 
idx
 = 
	`»adUnsigÃdL™eEndŸn
(
¡©e
, &
d©a
, 
v®ueArg
 + 1);

2225 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
m‘hodIdsSize
);

2228 
kDexAÂÙ©iÚA¼ay
: {

2229 ià(
v®ueArg
 != 0) {

2230 
	`ALOGE
("Bogu ¬¿y v®ue_¬g %#x", 
v®ueArg
);

2231  
NULL
;

2233 
d©a
 = 
	`v”ifyEncodedA¼ay
(
¡©e
, d©a, 
üossV”ify
);

2236 
kDexAÂÙ©iÚAÂÙ©iÚ
: {

2237 ià(
v®ueArg
 != 0) {

2238 
	`ALOGE
("Bogu ªnÙ©iÚ v®ue_¬g %#x", 
v®ueArg
);

2239  
NULL
;

2241 
d©a
 = 
	`v”ifyEncodedAÂÙ©iÚ
(
¡©e
, d©a, 
üossV”ify
);

2244 
kDexAÂÙ©iÚNuÎ
: {

2245 ià(
v®ueArg
 != 0) {

2246 
	`ALOGE
("Bogu nuÎ v®ue_¬g %#x", 
v®ueArg
);

2247  
NULL
;

2252 
kDexAÂÙ©iÚBoŞ—n
: {

2253 ià(
v®ueArg
 > 1) {

2254 
	`ALOGE
("Bogu boŞ—Àv®ue_¬g %#x", 
v®ueArg
);

2255  
NULL
;

2261 
	`ALOGE
("Bogu v®ue_ty³ %#x", 
v®ueTy³
);

2262  
NULL
;

2266  
d©a
;

2267 
	}
}

2271 cÚ¡ 
u1
* 
	$v”ifyEncodedAÂÙ©iÚ
(cÚ¡ 
CheckS‹
* 
¡©e
,

2272 cÚ¡ 
u1
* 
d©a
, 
boŞ
 
üossV”ify
) {

2273 cÚ¡ 
u1
* 
feEnd
 = 
¡©e
->fileEnd;

2274 
boŞ
 
okay
 = 
Œue
;

2275 
u4
 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2277 ià(!
okay
) {

2278 
	`ALOGE
("Bogusƒncoded_annotationype_idx");

2279  
NULL
;

2282 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
ty³IdsSize
);

2284 ià(
üossV”ify
) {

2285 cÚ¡ * 
desütÜ
 = 
	`dexSŒšgByTy³Idx
(
¡©e
->
pDexFe
, 
idx
);

2286 ià(!
	`dexIsCÏssDesütÜ
(
desütÜ
)) {

2287 
	`ALOGE
("Bogu ªnÙ©iÚy³: '%s'", 
desütÜ
);

2288  
NULL
;

2292 
u4
 
size
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2293 
u4
 
Ï¡Idx
 = 0;

2294 
boŞ
 
fœ¡
 = 
Œue
;

2296 ià(!
okay
) {

2297 
	`ALOGE
("Bogusƒncoded_annotation size");

2298  
NULL
;

2301 
size
--) {

2302 
idx
 = 
	`»adAndV”ifyUnsigÃdLeb128
(&
d©a
, 
feEnd
, &
okay
);

2304 ià(!
okay
) {

2305 
	`ALOGE
("Bogusƒncoded_annotation‚ame_idx");

2306  
NULL
;

2309 
	`CHECK_INDEX
(
idx
, 
¡©e
->
pH—d”
->
¡ršgIdsSize
);

2311 ià(
üossV”ify
) {

2312 cÚ¡ * 
Çme
 = 
	`dexSŒšgById
(
¡©e
->
pDexFe
, 
idx
);

2313 ià(!
	`dexIsV®idMemb”Name
(
Çme
)) {

2314 
	`ALOGE
("Bogu ªnÙ©iÚ memb”‚ame: '%s'", 
Çme
);

2315  
NULL
;

2319 ià(
fœ¡
) {

2320 
fœ¡
 = 
çl£
;

2321 } ià(
Ï¡Idx
 >ğ
idx
) {

2322 
	`ALOGE
("Out-of-orderƒncoded_annotation‚ame_idx: %#xhen %#x",

2323 
Ï¡Idx
, 
idx
);

2324  
NULL
;

2327 
d©a
 = 
	`v”ifyEncodedV®ue
(
¡©e
, d©a, 
üossV”ify
);

2328 
Ï¡Idx
 = 
idx
;

2330 ià(
d©a
 =ğ
NULL
) {

2331  
NULL
;

2335  
d©a
;

2336 
	}
}

2339 * 
	$šŒaV”ifyEncodedA¼ayI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

2340  (*è
	`v”ifyEncodedA¼ay
(
¡©e
, (cÚ¡ 
u1
*è
±r
, 
çl£
);

2341 
	}
}

2344 * 
	$šŒaV”ifyAÂÙ©iÚI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

2345 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

2347 
	`CHECK_PTR_RANGE
(
d©a
, data + 1);

2349 *(
d©a
++)) {

2350 
kDexVisib™yBud
:

2351 
kDexVisib™yRuÁime
:

2352 
kDexVisib™ySy¡em
: {

2356 
	`ALOGE
("Bogu ªnÙ©iÚ visib™y: %#x", *
d©a
);

2357  
NULL
;

2361  (*è
	`v”ifyEncodedAÂÙ©iÚ
(
¡©e
, 
d©a
, 
çl£
);

2362 
	}
}

2365 * 
	$üossV”ifyAÂÙ©iÚI‹m
(cÚ¡ 
CheckS‹
* 
¡©e
, * 
±r
) {

2366 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
±r
;

2369 
d©a
++;

2371  (*è
	`v”ifyEncodedAÂÙ©iÚ
(
¡©e
, 
d©a
, 
Œue
);

2372 
	}
}

2380 * 
	tI‹mVis™ÜFunùiÚ
(cÚ¡ 
	tCheckS‹
* 
	t¡©e
, * 
	t±r
);

2387 
boŞ
 
	$™”©eSeùiÚW™hO±iÚ®Upd©e
(
CheckS‹
* 
¡©e
,

2388 
u4
 
off£t
, u4 
couÁ
, 
I‹mVis™ÜFunùiÚ
* 
func
, u4 
®ignm’t
,

2389 
u4
* 
ÃxtOff£t
, 
m­Ty³
) {

2390 
u4
 
®ignm’tMask
 = 
®ignm’t
 - 1;

2391 
u4
 
i
;

2393 
¡©e
->
´eviousI‹m
 = 
NULL
;

2395 
i
 = 0; i < 
couÁ
; i++) {

2396 
u4
 
ÃwOff£t
 = (
off£t
 + 
®ignm’tMask
) & ~alignmentMask;

2397 
u1
* 
±r
 = (u1*è
	`fePoš‹r
(
¡©e
, 
ÃwOff£t
);

2399 ià(
off£t
 < 
ÃwOff£t
) {

2400 
±r
 = (
u1
*è
	`fePoš‹r
(
¡©e
, 
off£t
);

2401 ià(
off£t
 < 
ÃwOff£t
) {

2402 
	`CHECK_OFFSET_RANGE
(
off£t
, 
ÃwOff£t
);

2403 
off£t
 < 
ÃwOff£t
) {

2404 ià(*
±r
 != '\0') {

2405 
	`ALOGE
("NÚ-z”Ø·ddšg 0x%02x @ %x", *
±r
, 
off£t
);

2406  
çl£
;

2408 
±r
++;

2409 
off£t
++;

2414 
u1
* 
ÃwPŒ
 = (u1*è
	`func
(
¡©e
, 
±r
);

2415 
ÃwOff£t
 = 
	`feOff£t
(
¡©e
, 
ÃwPŒ
);

2417 ià(
ÃwPŒ
 =ğ
NULL
) {

2418 
	`ALOGE
("TroubË w™h i‹m %d @ off£ˆ%#x", 
i
, 
off£t
);

2419  
çl£
;

2422 ià(
ÃwOff£t
 > 
¡©e
->
feL’
) {

2423 
	`ALOGE
("I‹m %d @ off£ˆ%#xƒnd ouˆoàbounds", 
i
, 
off£t
);

2424  
çl£
;

2427 ià(
m­Ty³
 >= 0) {

2428 
	`dexD©aM­Add
(
¡©e
->
pD©aM­
, 
off£t
, 
m­Ty³
);

2431 
¡©e
->
´eviousI‹m
 = 
±r
;

2432 
off£t
 = 
ÃwOff£t
;

2435 ià(
ÃxtOff£t
 !ğ
NULL
) {

2436 *
ÃxtOff£t
 = 
off£t
;

2439  
Œue
;

2440 
	}
}

2447 
boŞ
 
	$™”©eSeùiÚ
(
CheckS‹
* 
¡©e
, 
u4
 
off£t
, u4 
couÁ
,

2448 
I‹mVis™ÜFunùiÚ
* 
func
, 
u4
 
®ignm’t
, u4* 
ÃxtOff£t
) {

2449  
	`™”©eSeùiÚW™hO±iÚ®Upd©e
(
¡©e
, 
off£t
, 
couÁ
, 
func
,

2450 
®ignm’t
, 
ÃxtOff£t
, -1);

2451 
	}
}

2457 
boŞ
 
	$checkBoundsAndI‹¿‹SeùiÚ
(
CheckS‹
* 
¡©e
,

2458 
u4
 
off£t
, u4 
couÁ
, u4 
ex³ùedOff£t
, u4 
ex³ùedCouÁ
,

2459 
I‹mVis™ÜFunùiÚ
* 
func
, 
u4
 
®ignm’t
, u4* 
ÃxtOff£t
) {

2460 ià(
off£t
 !ğ
ex³ùedOff£t
) {

2461 
	`ALOGE
("Bogus offset for section: got %#x;ƒxpected %#x",

2462 
off£t
, 
ex³ùedOff£t
);

2463  
çl£
;

2466 ià(
couÁ
 !ğ
ex³ùedCouÁ
) {

2467 
	`ALOGE
("Bogus size for section: got %#x;ƒxpected %#x",

2468 
couÁ
, 
ex³ùedCouÁ
);

2469  
çl£
;

2472  
	`™”©eSeùiÚ
(
¡©e
, 
off£t
, 
couÁ
, 
func
, 
®ignm’t
, 
ÃxtOff£t
);

2473 
	}
}

2479 
boŞ
 
	$™”©eD©aSeùiÚ
(
CheckS‹
* 
¡©e
, 
u4
 
off£t
, u4 
couÁ
,

2480 
I‹mVis™ÜFunùiÚ
* 
func
, 
u4
 
®ignm’t
, u4* 
ÃxtOff£t
, 
m­Ty³
) {

2481 
u4
 
d©aS¹
 = 
¡©e
->
pH—d”
->
d©aOff
;

2482 
u4
 
d©aEnd
 = 
d©aS¹
 + 
¡©e
->
pH—d”
->
d©aSize
;

2484 
	`as£¹
(
ÃxtOff£t
 !ğ
NULL
);

2486 ià((
off£t
 < 
d©aS¹
è|| (off£ˆ>ğ
d©aEnd
)) {

2487 
	`ALOGE
("Bogu off£ˆfÜ d©¨sub£ùiÚ: %#x", 
off£t
);

2488  
çl£
;

2491 ià(!
	`™”©eSeùiÚW™hO±iÚ®Upd©e
(
¡©e
, 
off£t
, 
couÁ
, 
func
,

2492 
®ignm’t
, 
ÃxtOff£t
, 
m­Ty³
)) {

2493  
çl£
;

2496 ià(*
ÃxtOff£t
 > 
d©aEnd
) {

2497 
	`ALOGE
("Out-of-bound ’d oàd©¨sub£ùiÚ: %#x", *
ÃxtOff£t
);

2498  
çl£
;

2501  
Œue
;

2502 
	}
}

2513 
boŞ
 
	$sw­Ev”ythšgButH—d”AndM­
(
CheckS‹
* 
¡©e
,

2514 
DexM­Li¡
* 
pM­
) {

2515 cÚ¡ 
DexM­I‹m
* 
™em
 = 
pM­
->
li¡
;

2516 
u4
 
Ï¡Off£t
 = 0;

2517 
u4
 
couÁ
 = 
pM­
->
size
;

2518 
boŞ
 
okay
 = 
Œue
;

2520 
okay
 && 
couÁ
--) {

2521 
u4
 
£ùiÚOff£t
 = 
™em
->
off£t
;

2522 
u4
 
£ùiÚCouÁ
 = 
™em
->
size
;

2523 
u2
 
ty³
 = 
™em
->type;

2525 ià(
Ï¡Off£t
 < 
£ùiÚOff£t
) {

2526 
	`CHECK_OFFSET_RANGE
(
Ï¡Off£t
, 
£ùiÚOff£t
);

2527 cÚ¡ 
u1
* 
±r
 = (cÚ¡ u1*è
	`fePoš‹r
(
¡©e
, 
Ï¡Off£t
);

2528 
Ï¡Off£t
 < 
£ùiÚOff£t
) {

2529 ià(*
±r
 != '\0') {

2530 
	`ALOGE
("Non-zero…adding 0x%02x before section start @ %x",

2531 *
±r
, 
Ï¡Off£t
);

2532 
okay
 = 
çl£
;

2535 
±r
++;

2536 
Ï¡Off£t
++;

2538 } ià(
Ï¡Off£t
 > 
£ùiÚOff£t
) {

2539 
	`ALOGE
("Section overlap or out-of-order map: %x, %x",

2540 
Ï¡Off£t
, 
£ùiÚOff£t
);

2541 
okay
 = 
çl£
;

2544 ià(!
okay
) {

2548 
ty³
) {

2549 
kDexTy³H—d”I‹m
: {

2554 
okay
 = 
	`checkH—d”SeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2555 &
Ï¡Off£t
);

2558 
kDexTy³SŒšgIdI‹m
: {

2559 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2560 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
¡ršgIdsOff
,

2561 
¡©e
->
pH—d”
->
¡ršgIdsSize
, 
sw­SŒšgIdI‹m
,

2562 (
u4
), &
Ï¡Off£t
);

2565 
kDexTy³Ty³IdI‹m
: {

2566 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2567 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
ty³IdsOff
,

2568 
¡©e
->
pH—d”
->
ty³IdsSize
, 
sw­Ty³IdI‹m
,

2569 (
u4
), &
Ï¡Off£t
);

2572 
kDexTy³PrÙoIdI‹m
: {

2573 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2574 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
´ÙoIdsOff
,

2575 
¡©e
->
pH—d”
->
´ÙoIdsSize
, 
sw­PrÙoIdI‹m
,

2576 (
u4
), &
Ï¡Off£t
);

2579 
kDexTy³F›ldIdI‹m
: {

2580 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2581 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
f›ldIdsOff
,

2582 
¡©e
->
pH—d”
->
f›ldIdsSize
, 
sw­F›ldIdI‹m
,

2583 (
u4
), &
Ï¡Off£t
);

2586 
kDexTy³M‘hodIdI‹m
: {

2587 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2588 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
m‘hodIdsOff
,

2589 
¡©e
->
pH—d”
->
m‘hodIdsSize
, 
sw­M‘hodIdI‹m
,

2590 (
u4
), &
Ï¡Off£t
);

2593 
kDexTy³CÏssDefI‹m
: {

2594 
okay
 = 
	`checkBoundsAndI‹¿‹SeùiÚ
(
¡©e
, 
£ùiÚOff£t
,

2595 
£ùiÚCouÁ
, 
¡©e
->
pH—d”
->
şassDefsOff
,

2596 
¡©e
->
pH—d”
->
şassDefsSize
, 
sw­CÏssDefI‹m
,

2597 (
u4
), &
Ï¡Off£t
);

2600 
kDexTy³M­Li¡
: {

2605 
okay
 = 
	`checkM­SeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2606 &
Ï¡Off£t
);

2609 
kDexTy³Ty³Li¡
: {

2610 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2611 
sw­Ty³Li¡
, (
u4
), &
Ï¡Off£t
, 
ty³
);

2614 
kDexTy³AÂÙ©iÚS‘RefLi¡
: {

2615 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2616 
sw­AÂÙ©iÚS‘RefLi¡
, (
u4
), &
Ï¡Off£t
,

2617 
ty³
);

2620 
kDexTy³AÂÙ©iÚS‘I‹m
: {

2621 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2622 
sw­AÂÙ©iÚS‘I‹m
, (
u4
), &
Ï¡Off£t
, 
ty³
);

2625 
kDexTy³CÏssD©aI‹m
: {

2626 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2627 
šŒaV”ifyCÏssD©aI‹m
, (
u1
), &
Ï¡Off£t
,

2628 
ty³
);

2631 
kDexTy³CodeI‹m
: {

2632 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2633 
sw­CodeI‹m
, (
u4
), &
Ï¡Off£t
, 
ty³
);

2636 
kDexTy³SŒšgD©aI‹m
: {

2637 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2638 
šŒaV”ifySŒšgD©aI‹m
, (
u1
), &
Ï¡Off£t
,

2639 
ty³
);

2642 
kDexTy³DebugInfoI‹m
: {

2643 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2644 
šŒaV”ifyDebugInfoI‹m
, (
u1
), &
Ï¡Off£t
,

2645 
ty³
);

2648 
kDexTy³AÂÙ©iÚI‹m
: {

2649 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2650 
šŒaV”ifyAÂÙ©iÚI‹m
, (
u1
), &
Ï¡Off£t
,

2651 
ty³
);

2654 
kDexTy³EncodedA¼ayI‹m
: {

2655 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2656 
šŒaV”ifyEncodedA¼ayI‹m
, (
u1
), &
Ï¡Off£t
,

2657 
ty³
);

2660 
kDexTy³AÂÙ©iÚsDœeùÜyI‹m
: {

2661 
okay
 = 
	`™”©eD©aSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2662 
sw­AÂÙ©iÚsDœeùÜyI‹m
, (
u4
), &
Ï¡Off£t
,

2663 
ty³
);

2667 
	`ALOGE
("UnknowÀm­ i‹my³ %04x", 
ty³
);

2668  
çl£
;

2672 ià(!
okay
) {

2673 
	`ALOGE
("Sw­ oà£ùiÚy³ %04x faed", 
ty³
);

2676 
™em
++;

2679  
okay
;

2680 
	}
}

2687 
boŞ
 
	$üossV”ifyEv”ythšg
(
CheckS‹
* 
¡©e
, 
DexM­Li¡
* 
pM­
)

2689 cÚ¡ 
DexM­I‹m
* 
™em
 = 
pM­
->
li¡
;

2690 
u4
 
couÁ
 = 
pM­
->
size
;

2691 
boŞ
 
okay
 = 
Œue
;

2693 
okay
 && 
couÁ
--) {

2694 
u4
 
£ùiÚOff£t
 = 
™em
->
off£t
;

2695 
u4
 
£ùiÚCouÁ
 = 
™em
->
size
;

2697 
™em
->
ty³
) {

2698 
kDexTy³H—d”I‹m
:

2699 
kDexTy³M­Li¡
:

2700 
kDexTy³Ty³Li¡
:

2701 
kDexTy³CodeI‹m
:

2702 
kDexTy³SŒšgD©aI‹m
:

2703 
kDexTy³DebugInfoI‹m
:

2704 
kDexTy³AÂÙ©iÚI‹m
:

2705 
kDexTy³EncodedA¼ayI‹m
: {

2709 
kDexTy³SŒšgIdI‹m
: {

2710 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2711 
üossV”ifySŒšgIdI‹m
, (
u4
), 
NULL
);

2714 
kDexTy³Ty³IdI‹m
: {

2715 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2716 
üossV”ifyTy³IdI‹m
, (
u4
), 
NULL
);

2719 
kDexTy³PrÙoIdI‹m
: {

2720 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2721 
üossV”ifyPrÙoIdI‹m
, (
u4
), 
NULL
);

2724 
kDexTy³F›ldIdI‹m
: {

2725 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2726 
üossV”ifyF›ldIdI‹m
, (
u4
), 
NULL
);

2729 
kDexTy³M‘hodIdI‹m
: {

2730 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2731 
üossV”ifyM‘hodIdI‹m
, (
u4
), 
NULL
);

2734 
kDexTy³CÏssDefI‹m
: {

2736 
size_t
 
¬¿ySize
 = 
	`ÿlcDefšedCÏssB™sSize
(
¡©e
);

2737 
u4
 
defšedCÏssB™s
[
¬¿ySize
];

2738 
	`mem£t
(
defšedCÏssB™s
, 0, 
¬¿ySize
 * (
u4
));

2739 
¡©e
->
pDefšedCÏssB™s
 = 
defšedCÏssB™s
;

2741 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2742 
üossV”ifyCÏssDefI‹m
, (
u4
), 
NULL
);

2744 
¡©e
->
pDefšedCÏssB™s
 = 
NULL
;

2747 
kDexTy³AÂÙ©iÚS‘RefLi¡
: {

2748 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2749 
üossV”ifyAÂÙ©iÚS‘RefLi¡
, (
u4
), 
NULL
);

2752 
kDexTy³AÂÙ©iÚS‘I‹m
: {

2753 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2754 
üossV”ifyAÂÙ©iÚS‘I‹m
, (
u4
), 
NULL
);

2757 
kDexTy³CÏssD©aI‹m
: {

2758 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2759 
üossV”ifyCÏssD©aI‹m
, (
u1
), 
NULL
);

2762 
kDexTy³AÂÙ©iÚsDœeùÜyI‹m
: {

2763 
okay
 = 
	`™”©eSeùiÚ
(
¡©e
, 
£ùiÚOff£t
, 
£ùiÚCouÁ
,

2764 
üossV”ifyAÂÙ©iÚsDœeùÜyI‹m
, (
u4
), 
NULL
);

2768 
	`ALOGE
("UnknowÀm­ i‹my³ %04x", 
™em
->
ty³
);

2769  
çl£
;

2773 ià(!
okay
) {

2774 
	`ALOGE
("Cross-item verify of sectionype %04x failed",

2775 
™em
->
ty³
);

2778 
™em
++;

2781  
okay
;

2782 
	}
}

2785 
boŞ
 
	$dexHasV®idMagic
(cÚ¡ 
DexH—d”
* 
pH—d”
)

2787 cÚ¡ 
u1
* 
magic
 = 
pH—d”
->magic;

2788 cÚ¡ 
u1
* 
v”siÚ
 = &
magic
[4];

2790 ià(
	`memcmp
(
magic
, 
DEX_MAGIC
, 4) != 0) {

2791 
	`ALOGE
("ERROR: unrecognized magic‚umber (%02x %02x %02x %02x)",

2792 
magic
[0], magic[1], magic[2], magic[3]);

2793  
çl£
;

2796 ià((
	`memcmp
(
v”siÚ
, 
DEX_MAGIC_VERS
, 4) != 0) &&

2797 (
	`memcmp
(
v”siÚ
, 
DEX_MAGIC_VERS_API_13
, 4) != 0)) {

2802 
	`ALOGE
("ERROR: unsupported dex version (%02x %02x %02x %02x)",

2803 
v”siÚ
[0], version[1], version[2], version[3]);

2804  
çl£
;

2807  
Œue
;

2808 
	}
}

2817 
	$dexSw­AndV”ify
(
u1
* 
addr
, 
Ën
)

2819 
DexH—d”
* 
pH—d”
;

2820 
CheckS‹
 
¡©e
;

2821 
boŞ
 
okay
 = 
Œue
;

2823 
	`mem£t
(&
¡©e
, 0, (state));

2824 
	`ALOGV
("+++ swapping‡nd verifying");

2830 
pH—d”
 = (
DexH—d”
*è
addr
;

2832 ià(!
	`dexHasV®idMagic
(
pH—d”
)) {

2833 
okay
 = 
çl£
;

2836 ià(
okay
) {

2837 
ex³ùedL’
 = (è
	`SWAP4
(
pH—d”
->
feSize
);

2838 ià(
Ën
 < 
ex³ùedL’
) {

2839 
	`ALOGE
("ERROR: Bad†’gth:ƒx³ùed %d, gÙ %d", 
ex³ùedL’
, 
Ën
);

2840 
okay
 = 
çl£
;

2841 } ià(
Ën
 !ğ
ex³ùedL’
) {

2842 
	`ALOGW
("WARNING: Odd†’gth:ƒx³ùed %d, gÙ %d", 
ex³ùedL’
,

2843 
Ën
);

2848 ià(
okay
) {

2858 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

2859 cÚ¡ 
nÚSum
 = (
pH—d”
->
magic
è+ ÕH—d”->
checksum
);

2860 
u4
 
¡ÜedFeSize
 = 
	`SWAP4
(
pH—d”
->
feSize
);

2861 
u4
 
ex³ùedChecksum
 = 
	`SWAP4
(
pH—d”
->
checksum
);

2863 
adËr
 = 
	`adËr32
×dËr, ((cÚ¡ 
u1
*è
pH—d”
è+ 
nÚSum
,

2864 
¡ÜedFeSize
 - 
nÚSum
);

2866 ià(
adËr
 !ğ
ex³ùedChecksum
) {

2867 
	`ALOGE
("ERROR: bad checksum (%08lx,ƒxpected %08x)",

2868 
adËr
, 
ex³ùedChecksum
);

2869 
okay
 = 
çl£
;

2873 ià(
okay
) {

2874 
¡©e
.
feS¹
 = 
addr
;

2875 
¡©e
.
feEnd
 = 
addr
 + 
Ën
;

2876 
¡©e
.
feL’
 = 
Ën
;

2877 
¡©e
.
pDexFe
 = 
NULL
;

2878 
¡©e
.
pD©aM­
 = 
NULL
;

2879 
¡©e
.
pDefšedCÏssB™s
 = 
NULL
;

2880 
¡©e
.
´eviousI‹m
 = 
NULL
;

2885 
okay
 = 
	`sw­DexH—d”
(&
¡©e
, 
pH—d”
);

2888 ià(
okay
) {

2889 
¡©e
.
pH—d”
 =…Header;

2891 ià(
pH—d”
->
h—d”Size
 < (
DexH—d”
)) {

2892 
	`ALOGE
("ERROR: Small header size %d, struct %d",

2893 
pH—d”
->
h—d”Size
, (è(
DexH—d”
));

2894 
okay
 = 
çl£
;

2895 } ià(
pH—d”
->
h—d”Size
 > (
DexH—d”
)) {

2896 
	`ALOGW
("WARNING: Large header size %d, struct %d",

2897 
pH—d”
->
h—d”Size
, (è(
DexH—d”
));

2902 ià(
okay
) {

2907 ià(
pH—d”
->
m­Off
 != 0) {

2908 
DexFe
 
dexFe
;

2909 
DexM­Li¡
* 
pDexM­
 = (DexM­Li¡*è(
addr
 + 
pH—d”
->
m­Off
);

2911 
okay
 = okay && 
	`sw­M­
(&
¡©e
, 
pDexM­
);

2912 
okay
 = okay && 
	`sw­Ev”ythšgButH—d”AndM­
(&
¡©e
, 
pDexM­
);

2914 
	`dexFeS‘upBasicPoš‹rs
(&
dexFe
, 
addr
);

2915 
¡©e
.
pDexFe
 = &
dexFe
;

2917 
okay
 = okay && 
	`üossV”ifyEv”ythšg
(&
¡©e
, 
pDexM­
);

2919 
	`ALOGE
("ERROR: No map found; impossibleo byte-swap‡nd verify");

2920 
okay
 = 
çl£
;

2924 ià(!
okay
) {

2925 
	`ALOGE
("ERROR: Byte swap + verify failed");

2928 ià(
¡©e
.
pD©aM­
 !ğ
NULL
) {

2929 
	`dexD©aM­F»e
(
¡©e
.
pD©aM­
);

2932  !
okay
;

2933 
	}
}

2943 
	$dexSw­AndV”ifyIfNeûs§ry
(
u1
* 
addr
, 
Ën
)

2945 ià(
	`memcmp
(
addr
, 
DEX_OPT_MAGIC
, 4) == 0) {

2950 ià(
	`memcmp
(
addr
, 
DEX_MAGIC
, 4) == 0) {

2952  
	`dexSw­AndV”ify
(
addr
, 
Ën
);

2955 
	`ALOGE
("ERROR: Bad magic‚umber (0x%02x %02x %02x %02x)",

2956 
addr
[0],‡ddr[1],‡ddr[2],‡ddr[3]);

2959 
	}
}

	@libdex/DexUtf.cpp

21 
	~"DexUtf.h
"

28 
	$dexUtf8Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
) {

30 ià(*
s1
 == '\0') {

31 ià(*
s2
 == '\0') {

35 } ià(*
s2
 == '\0') {

39 
utf1
 = 
	`dexG‘Utf16FromUtf8
(&
s1
);

40 
utf2
 = 
	`dexG‘Utf16FromUtf8
(&
s2
);

41 
diff
 = 
utf1
 - 
utf2
;

43 ià(
diff
 != 0) {

44  
diff
;

47 
	}
}

50 
u4
 
	gDEX_MEMBER_VALID_LOW_ASCII
[4] = {

58 
boŞ
 
	$dexIsV®idMemb”NameUtf8_0
(cÚ¡ ** 
pUtf8PŒ
) {

69 
u2
 
utf16
 = 
	`dexG‘Utf16FromUtf8
(
pUtf8PŒ
);

72 
utf16
 >> 8) {

75  (
utf16
 > 0x00a0);

85 
utf16
 = 
	`dexG‘Utf16FromUtf8
(
pUtf8PŒ
);

86  (
utf16
 >= 0xdc00) && (utf16 <= 0xdfff);

93  
çl£
;

98 
utf16
 & 0xfff8) {

104  
çl£
;

111  
Œue
;

112 
	}
}

115 
boŞ
 
	$dexIsV®idMemb”Name
(cÚ¡ * 
s
) {

116 
boŞ
 
ªgËName
 = 
çl£
;

118 *
s
) {

121  
çl£
;

128 
ªgËName
 = 
Œue
;

129 
s
++;

135 *
s
) {

137  !
ªgËName
;

140  
ªgËName
 && 
s
[1] == '\0';

143 ià(!
	`dexIsV®idMemb”NameUtf8
(&
s
)) {

144  
çl£
;

147 
	}
}

151 
boŞ
 
	$isV®idTy³DesütÜOrCÏssName
(cÚ¡ * 
s
, 
boŞ
 
isCÏssName
,

152 
boŞ
 
dÙS•¬©Ü
) {

153 
¬¿yCouÁ
 = 0;

155 *
s
 == '[') {

156 
¬¿yCouÁ
++;

157 
s
++;

160 ià(
¬¿yCouÁ
 > 255) {

162  
çl£
;

165 ià(
¬¿yCouÁ
 != 0) {

172 
isCÏssName
 = 
çl£
;

175 ià(!
isCÏssName
) {

181 *(
s
++)) {

191  (*
s
 == '\0');

195  (
¬¿yCouÁ
 =ğ0è&& (*
s
 == '\0');

203  
çl£
;

214 
boŞ
 
£pOrFœ¡
 = 
Œue
;

216 
u1
 
c
 = (u1è*
s
;

217 
c
) {

225  
isCÏssName
 && !
£pOrFœ¡
;

235  !
isCÏssName
 && !
£pOrFœ¡
 && (
s
[1] == '\0');

239 ià(
dÙS•¬©Ü
 !ğ(
c
 == '.')) {

241  
çl£
;

243 ià(
£pOrFœ¡
) {

245  
çl£
;

247 
£pOrFœ¡
 = 
Œue
;

248 
s
++;

252 ià(!
	`dexIsV®idMemb”NameUtf8
(&
s
)) {

253  
çl£
;

255 
£pOrFœ¡
 = 
çl£
;

260 
	}
}

263 
boŞ
 
	$dexIsV®idTy³DesütÜ
(cÚ¡ * 
s
) {

264  
	`isV®idTy³DesütÜOrCÏssName
(
s
, 
çl£
, false);

265 
	}
}

268 
boŞ
 
	$dexIsV®idCÏssName
(cÚ¡ * 
s
, 
boŞ
 
dÙS•¬©Ü
) {

269  
	`isV®idTy³DesütÜOrCÏssName
(
s
, 
Œue
, 
dÙS•¬©Ü
);

270 
	}
}

275 
boŞ
 
	$dexIsReã»nûDesütÜ
(cÚ¡ * 
s
) {

276 ià(!
	`dexIsV®idTy³DesütÜ
(
s
)) {

277  
çl£
;

280  (
s
[0] == 'L') || (s[0] == '[');

281 
	}
}

286 
boŞ
 
	$dexIsCÏssDesütÜ
(cÚ¡ * 
s
) {

287 ià(!
	`dexIsV®idTy³DesütÜ
(
s
)) {

288  
çl£
;

291  
s
[0] == 'L';

292 
	}
}

297 
boŞ
 
	$dexIsF›ldDesütÜ
(cÚ¡ * 
s
) {

298 ià(!
	`dexIsV®idTy³DesütÜ
(
s
)) {

299  
çl£
;

302  
s
[0] != 'V';

303 
	}
}

	@libdex/DexUtf.h

21 #iâdeà
LIBDEX_DEXUTF_H_


22 
	#LIBDEX_DEXUTF_H_


	)

24 
	~"DexFe.h
"

40 
DEX_INLINE
 
u2
 
	$dexG‘Utf16FromUtf8
(cÚ¡ ** 
pUtf8PŒ
)

42 
Úe
, 
two
, 
th»e
;

44 
Úe
 = *(*
pUtf8PŒ
)++;

45 ià((
Úe
 & 0x80) != 0) {

47 
two
 = *(*
pUtf8PŒ
)++;

48 ià((
Úe
 & 0x20) != 0) {

50 
th»e
 = *(*
pUtf8PŒ
)++;

51  ((
Úe
 & 0x0f) << 12) |

52 ((
two
 & 0x3f) << 6) |

53 (
th»e
 & 0x3f);

56  ((
Úe
 & 0x1f) << 6) |

57 (
two
 & 0x3f);

61  
Úe
;

63 
	}
}

70 
dexUtf8Cmp
(cÚ¡ * 
s1
, cÚ¡ * 
s2
);

73 
u4
 
DEX_MEMBER_VALID_LOW_ASCII
[4];

76 
boŞ
 
dexIsV®idMemb”NameUtf8_0
(cÚ¡ ** 
pUtf8PŒ
);

84 
DEX_INLINE
 
boŞ
 
	$dexIsV®idMemb”NameUtf8
(cÚ¡ ** 
pUtf8PŒ
) {

85 
u1
 
c
 = (u1è**
pUtf8PŒ
;

86 ià(
c
 <= 0x7f) {

88 
u4
 
wÜdIdx
 = 
c
 >> 5;

89 
u4
 
b™Idx
 = 
c
 & 0x1f;

90 (*
pUtf8PŒ
)++;

91  (
DEX_MEMBER_VALID_LOW_ASCII
[
wÜdIdx
] & (1 << 
b™Idx
)) != 0;

98  
	`dexIsV®idMemb”NameUtf8_0
(
pUtf8PŒ
);

99 
	}
}

102 
boŞ
 
dexIsV®idMemb”Name
(cÚ¡ * 
s
);

105 
boŞ
 
dexIsV®idTy³DesütÜ
(cÚ¡ * 
s
);

114 
boŞ
 
dexIsV®idCÏssName
(cÚ¡ * 
s
, boŞ 
dÙS•¬©Ü
);

119 
boŞ
 
dexIsReã»nûDesütÜ
(cÚ¡ * 
s
);

124 
boŞ
 
dexIsCÏssDesütÜ
(cÚ¡ * 
s
);

129 
boŞ
 
dexIsF›ldDesütÜ
(cÚ¡ * 
s
);

	@libdex/InstrUtils.cpp

25 
	~"In¡rUts.h
"

26 
	~<¡dlib.h
>

33 
In¡ruùiÚWidth
 
	ggIn¡ruùiÚWidthTabË
[
kNumPackedOpcodes
] = {

58 
u1
 
	ggOpcodeFÏgsTabË
[
kNumPackedOpcodes
] = {

60 
kIn¡rCªCÚtšue
,

61 
kIn¡rCªCÚtšue
,

62 
kIn¡rCªCÚtšue
,

63 
kIn¡rCªCÚtšue
,

64 
kIn¡rCªCÚtšue
,

65 
kIn¡rCªCÚtšue
,

66 
kIn¡rCªCÚtšue
,

67 
kIn¡rCªCÚtšue
,

68 
kIn¡rCªCÚtšue
,

69 
kIn¡rCªCÚtšue
,

70 
kIn¡rCªCÚtšue
,

71 
kIn¡rCªCÚtšue
,

72 
kIn¡rCªCÚtšue
,

73 
kIn¡rCªCÚtšue
,

74 
kIn¡rCªR‘uº
,

75 
kIn¡rCªR‘uº
,

76 
kIn¡rCªR‘uº
,

77 
kIn¡rCªR‘uº
,

78 
kIn¡rCªCÚtšue
,

79 
kIn¡rCªCÚtšue
,

80 
kIn¡rCªCÚtšue
,

81 
kIn¡rCªCÚtšue
,

82 
kIn¡rCªCÚtšue
,

83 
kIn¡rCªCÚtšue
,

84 
kIn¡rCªCÚtšue
,

85 
kIn¡rCªCÚtšue
,

86 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

87 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

88 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

89 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

90 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

91 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

92 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

93 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

94 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

95 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

96 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

97 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

98 
kIn¡rCªCÚtšue
,

99 
kIn¡rCªThrow
,

100 
kIn¡rCªB¿nch
,

101 
kIn¡rCªB¿nch
,

102 
kIn¡rCªB¿nch
,

103 
kIn¡rCªCÚtšue
|
kIn¡rCªSw™ch
,

104 
kIn¡rCªCÚtšue
|
kIn¡rCªSw™ch
,

105 
kIn¡rCªCÚtšue
,

106 
kIn¡rCªCÚtšue
,

107 
kIn¡rCªCÚtšue
,

108 
kIn¡rCªCÚtšue
,

109 
kIn¡rCªCÚtšue
,

110 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

111 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

112 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

113 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

114 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

115 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

116 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

117 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

118 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

119 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

120 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

121 
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
,

128 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

129 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

130 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

131 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

132 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

133 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

134 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

135 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

136 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

137 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

138 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

139 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

140 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

141 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

142 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

143 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

144 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

145 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

146 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

147 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

148 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

149 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

150 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

151 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

152 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

153 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

154 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

155 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

156 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

157 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

158 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

159 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

160 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

161 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

162 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

163 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

164 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

165 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

166 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

167 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

168 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

169 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

170 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

171 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

172 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

173 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

174 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

176 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

177 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

178 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

179 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

180 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

183 
kIn¡rCªCÚtšue
,

184 
kIn¡rCªCÚtšue
,

185 
kIn¡rCªCÚtšue
,

186 
kIn¡rCªCÚtšue
,

187 
kIn¡rCªCÚtšue
,

188 
kIn¡rCªCÚtšue
,

189 
kIn¡rCªCÚtšue
,

190 
kIn¡rCªCÚtšue
,

191 
kIn¡rCªCÚtšue
,

192 
kIn¡rCªCÚtšue
,

193 
kIn¡rCªCÚtšue
,

194 
kIn¡rCªCÚtšue
,

195 
kIn¡rCªCÚtšue
,

196 
kIn¡rCªCÚtšue
,

197 
kIn¡rCªCÚtšue
,

198 
kIn¡rCªCÚtšue
,

199 
kIn¡rCªCÚtšue
,

200 
kIn¡rCªCÚtšue
,

201 
kIn¡rCªCÚtšue
,

202 
kIn¡rCªCÚtšue
,

203 
kIn¡rCªCÚtšue
,

204 
kIn¡rCªCÚtšue
,

205 
kIn¡rCªCÚtšue
,

206 
kIn¡rCªCÚtšue
,

207 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

208 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

209 
kIn¡rCªCÚtšue
,

210 
kIn¡rCªCÚtšue
,

211 
kIn¡rCªCÚtšue
,

212 
kIn¡rCªCÚtšue
,

213 
kIn¡rCªCÚtšue
,

214 
kIn¡rCªCÚtšue
,

215 
kIn¡rCªCÚtšue
,

216 
kIn¡rCªCÚtšue
,

217 
kIn¡rCªCÚtšue
,

218 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

219 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

220 
kIn¡rCªCÚtšue
,

221 
kIn¡rCªCÚtšue
,

222 
kIn¡rCªCÚtšue
,

223 
kIn¡rCªCÚtšue
,

224 
kIn¡rCªCÚtšue
,

225 
kIn¡rCªCÚtšue
,

226 
kIn¡rCªCÚtšue
,

227 
kIn¡rCªCÚtšue
,

228 
kIn¡rCªCÚtšue
,

229 
kIn¡rCªCÚtšue
,

230 
kIn¡rCªCÚtšue
,

231 
kIn¡rCªCÚtšue
,

232 
kIn¡rCªCÚtšue
,

233 
kIn¡rCªCÚtšue
,

234 
kIn¡rCªCÚtšue
,

235 
kIn¡rCªCÚtšue
,

236 
kIn¡rCªCÚtšue
,

237 
kIn¡rCªCÚtšue
,

238 
kIn¡rCªCÚtšue
,

239 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

240 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

241 
kIn¡rCªCÚtšue
,

242 
kIn¡rCªCÚtšue
,

243 
kIn¡rCªCÚtšue
,

244 
kIn¡rCªCÚtšue
,

245 
kIn¡rCªCÚtšue
,

246 
kIn¡rCªCÚtšue
,

247 
kIn¡rCªCÚtšue
,

248 
kIn¡rCªCÚtšue
,

249 
kIn¡rCªCÚtšue
,

250 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

251 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

252 
kIn¡rCªCÚtšue
,

253 
kIn¡rCªCÚtšue
,

254 
kIn¡rCªCÚtšue
,

255 
kIn¡rCªCÚtšue
,

256 
kIn¡rCªCÚtšue
,

257 
kIn¡rCªCÚtšue
,

258 
kIn¡rCªCÚtšue
,

259 
kIn¡rCªCÚtšue
,

260 
kIn¡rCªCÚtšue
,

261 
kIn¡rCªCÚtšue
,

262 
kIn¡rCªCÚtšue
,

263 
kIn¡rCªCÚtšue
,

264 
kIn¡rCªCÚtšue
,

265 
kIn¡rCªCÚtšue
,

266 
kIn¡rCªCÚtšue
,

267 
kIn¡rCªCÚtšue
,

268 
kIn¡rCªCÚtšue
,

269 
kIn¡rCªCÚtšue
,

270 
kIn¡rCªCÚtšue
,

271 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

272 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

273 
kIn¡rCªCÚtšue
,

274 
kIn¡rCªCÚtšue
,

275 
kIn¡rCªCÚtšue
,

276 
kIn¡rCªCÚtšue
,

277 
kIn¡rCªCÚtšue
,

278 
kIn¡rCªCÚtšue
,

279 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

280 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

281 
kIn¡rCªCÚtšue
,

282 
kIn¡rCªCÚtšue
,

283 
kIn¡rCªCÚtšue
,

284 
kIn¡rCªCÚtšue
,

285 
kIn¡rCªCÚtšue
,

286 
kIn¡rCªCÚtšue
,

287 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

288 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

289 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

290 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

291 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

292 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

293 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

294 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

295 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

297 
kIn¡rCªThrow
,

298 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

299 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

300 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

301 
kIn¡rCªR‘uº
,

302 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

303 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

304 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

305 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

306 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

307 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

308 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

309 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

310 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

311 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
|
kIn¡rInvoke
,

312 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

313 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

314 
kIn¡rCªCÚtšue
|
kIn¡rCªThrow
,

323 
u1
 
	ggIn¡ruùiÚFÜm©TabË
[
kNumPackedOpcodes
] = {

325 
kFmt10x
, 
kFmt12x
, 
kFmt22x
, 
kFmt32x
, kFmt12x, kFmt22x, kFmt32x,

326 
kFmt12x
, 
kFmt22x
, 
kFmt32x
, 
kFmt11x
, kFmt11x, kFmt11x, kFmt11x,

327 
kFmt10x
, 
kFmt11x
, kFmt11x, kFmt11x, 
kFmt11n
, 
kFmt21s
, 
kFmt31i
,

328 
kFmt21h
, 
kFmt21s
, 
kFmt31i
, 
kFmt51l
, kFmt21h, 
kFmt21c
, 
kFmt31c
,

329 
kFmt21c
, 
kFmt11x
, kFmt11x, kFmt21c, 
kFmt22c
, 
kFmt12x
, kFmt21c,

330 
kFmt22c
, 
kFmt35c
, 
kFmt3rc
, 
kFmt31t
, 
kFmt11x
, 
kFmt10t
, 
kFmt20t
,

331 
kFmt30t
, 
kFmt31t
, kFmt31t, 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x,

332 
kFmt23x
, 
kFmt22t
, kFmt22t, kFmt22t, kFmt22t, kFmt22t, kFmt22t,

333 
kFmt21t
, kFmt21t, kFmt21t, kFmt21t, kFmt21t, kFmt21t, 
kFmt00x
,

334 
kFmt00x
, kFmt00x, kFmt00x, kFmt00x, kFmt00x, 
kFmt23x
, kFmt23x,

335 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x,

336 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, 
kFmt22c
, kFmt22c,

337 
kFmt22c
, kFmt22c, kFmt22c, kFmt22c, kFmt22c, kFmt22c, kFmt22c,

338 
kFmt22c
, kFmt22c, kFmt22c, kFmt22c, kFmt22c, 
kFmt21c
, kFmt21c,

339 
kFmt21c
, kFmt21c, kFmt21c, kFmt21c, kFmt21c, kFmt21c, kFmt21c,

340 
kFmt21c
, kFmt21c, kFmt21c, kFmt21c, kFmt21c, 
kFmt35c
, kFmt35c,

341 
kFmt35c
, kFmt35c, kFmt35c, 
kFmt00x
, 
kFmt3rc
, kFmt3rc, kFmt3rc,

342 
kFmt3rc
, kFmt3rc, 
kFmt00x
, kFmt00x, 
kFmt12x
, kFmt12x, kFmt12x,

343 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

344 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

345 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, 
kFmt23x
, kFmt23x, kFmt23x,

346 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x,

347 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x,

348 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x,

349 
kFmt23x
, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x, kFmt23x,

350 
kFmt23x
, 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

351 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

352 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

353 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x, kFmt12x,

354 
kFmt12x
, kFmt12x, kFmt12x, kFmt12x, kFmt12x, 
kFmt22s
, kFmt22s,

355 
kFmt22s
, kFmt22s, kFmt22s, kFmt22s, kFmt22s, kFmt22s, 
kFmt22b
,

356 
kFmt22b
, kFmt22b, kFmt22b, kFmt22b, kFmt22b, kFmt22b, kFmt22b,

357 
kFmt22b
, kFmt22b, kFmt22b, 
kFmt22c
, kFmt22c, 
kFmt21c
, kFmt21c,

358 
kFmt22c
, kFmt22c, kFmt22c, 
kFmt21c
, kFmt21c, 
kFmt00x
, 
kFmt20bc
,

359 
kFmt35mi
, 
kFmt3rmi
, 
kFmt35c
, 
kFmt10x
, 
kFmt22cs
, kFmt22cs, kFmt22cs,

360 
kFmt22cs
, kFmt22cs, kFmt22cs, 
kFmt35ms
, 
kFmt3rms
, kFmt35ms, kFmt3rms,

361 
kFmt22c
, 
kFmt21c
, kFmt21c, 
kFmt00x
,

369 
u1
 
	ggIn¡ruùiÚIndexTy³TabË
[
kNumPackedOpcodes
] = {

371 
kIndexNÚe
, kIndexNone, kIndexNone,

372 
kIndexNÚe
, kIndexNone, kIndexNone,

373 
kIndexNÚe
, kIndexNone, kIndexNone,

374 
kIndexNÚe
, kIndexNone, kIndexNone,

375 
kIndexNÚe
, kIndexNone, kIndexNone,

376 
kIndexNÚe
, kIndexNone, kIndexNone,

377 
kIndexNÚe
, kIndexNone, kIndexNone,

378 
kIndexNÚe
, kIndexNone, kIndexNone,

379 
kIndexNÚe
, kIndexNÚe, 
kIndexSŒšgRef
,

380 
kIndexSŒšgRef
, 
kIndexTy³Ref
, 
kIndexNÚe
,

381 
kIndexNÚe
, 
kIndexTy³Ref
, kIndexTypeRef,

382 
kIndexNÚe
, 
kIndexTy³Ref
, kIndexTypeRef,

383 
kIndexTy³Ref
, kIndexTy³Ref, 
kIndexNÚe
,

384 
kIndexNÚe
, kIndexNone, kIndexNone,

385 
kIndexNÚe
, kIndexNone, kIndexNone,

386 
kIndexNÚe
, kIndexNone, kIndexNone,

387 
kIndexNÚe
, kIndexNone, kIndexNone,

388 
kIndexNÚe
, kIndexNone, kIndexNone,

389 
kIndexNÚe
, kIndexNone, kIndexNone,

390 
kIndexNÚe
, kIndexNone, kIndexNone,

391 
kIndexNÚe
, kIndexNÚe, 
kIndexUnknown
,

392 
kIndexUnknown
, kIndexUnknown, kIndexUnknown,

393 
kIndexUnknown
, kIndexUnknown, 
kIndexNÚe
,

394 
kIndexNÚe
, kIndexNone, kIndexNone,

395 
kIndexNÚe
, kIndexNone, kIndexNone,

396 
kIndexNÚe
, kIndexNone, kIndexNone,

397 
kIndexNÚe
, kIndexNone, kIndexNone,

398 
kIndexNÚe
, 
kIndexF›ldRef
, kIndexFieldRef,

399 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

400 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

401 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

402 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

403 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

404 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

405 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

406 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

407 
kIndexF›ldRef
, kIndexF›ldRef, 
kIndexM‘hodRef
,

408 
kIndexM‘hodRef
, kIndexMethodRef, kIndexMethodRef,

409 
kIndexM‘hodRef
, 
kIndexUnknown
, kIndexMethodRef,

410 
kIndexM‘hodRef
, kIndexMethodRef, kIndexMethodRef,

411 
kIndexM‘hodRef
, 
kIndexUnknown
, kIndexUnknown,

412 
kIndexNÚe
, kIndexNone, kIndexNone,

413 
kIndexNÚe
, kIndexNone, kIndexNone,

414 
kIndexNÚe
, kIndexNone, kIndexNone,

415 
kIndexNÚe
, kIndexNone, kIndexNone,

416 
kIndexNÚe
, kIndexNone, kIndexNone,

417 
kIndexNÚe
, kIndexNone, kIndexNone,

418 
kIndexNÚe
, kIndexNone, kIndexNone,

419 
kIndexNÚe
, kIndexNone, kIndexNone,

420 
kIndexNÚe
, kIndexNone, kIndexNone,

421 
kIndexNÚe
, kIndexNone, kIndexNone,

422 
kIndexNÚe
, kIndexNone, kIndexNone,

423 
kIndexNÚe
, kIndexNone, kIndexNone,

424 
kIndexNÚe
, kIndexNone, kIndexNone,

425 
kIndexNÚe
, kIndexNone, kIndexNone,

426 
kIndexNÚe
, kIndexNone, kIndexNone,

427 
kIndexNÚe
, kIndexNone, kIndexNone,

428 
kIndexNÚe
, kIndexNone, kIndexNone,

429 
kIndexNÚe
, kIndexNone, kIndexNone,

430 
kIndexNÚe
, kIndexNone, kIndexNone,

431 
kIndexNÚe
, kIndexNone, kIndexNone,

432 
kIndexNÚe
, kIndexNone, kIndexNone,

433 
kIndexNÚe
, kIndexNone, kIndexNone,

434 
kIndexNÚe
, kIndexNone, kIndexNone,

435 
kIndexNÚe
, kIndexNone, kIndexNone,

436 
kIndexNÚe
, kIndexNone, kIndexNone,

437 
kIndexNÚe
, kIndexNone, kIndexNone,

438 
kIndexNÚe
, kIndexNone, kIndexNone,

439 
kIndexNÚe
, kIndexNone, kIndexNone,

440 
kIndexNÚe
, kIndexNone, kIndexNone,

441 
kIndexNÚe
, kIndexNone, kIndexNone,

442 
kIndexNÚe
, kIndexNone, kIndexNone,

443 
kIndexNÚe
, kIndexNone, kIndexNone,

444 
kIndexNÚe
, kIndexNone, kIndexNone,

445 
kIndexNÚe
, kIndexNone, kIndexNone,

446 
kIndexNÚe
, kIndexNÚe, 
kIndexF›ldRef
,

447 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

448 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

449 
kIndexF›ldRef
, kIndexF›ldRef, 
kIndexUnknown
,

450 
kIndexV¬›s
, 
kIndexIÆšeM‘hod
, kIndexInlineMethod,

451 
kIndexM‘hodRef
, 
kIndexNÚe
, 
kIndexF›ldOff£t
,

452 
kIndexF›ldOff£t
, kIndexFieldOffset, kIndexFieldOffset,

453 
kIndexF›ldOff£t
, kIndexF›ldOff£t, 
kIndexVbËOff£t
,

454 
kIndexVbËOff£t
, kIndexVtableOffset, kIndexVtableOffset,

455 
kIndexF›ldRef
, kIndexFieldRef, kIndexFieldRef,

456 
kIndexUnknown
,

463 
In¡ruùiÚInfoTabËs
 
	ggDexOpcodeInfo
 = {

464 
gIn¡ruùiÚFÜm©TabË
,

465 
gIn¡ruùiÚIndexTy³TabË
,

466 
gOpcodeFÏgsTabË
,

467 
gIn¡ruùiÚWidthTabË


473 
	#FETCH
(
_off£t
è(
š¢s
[(_off£t)])

	)

474 
	#FETCH_u4
(
_off£t
è(
	`ãtch_u4_im¶
((_off£t), 
š¢s
))

	)

475 
	#INST_A
(
_š¡
è(((
u2
)(_š¡è>> 8è& 0x0f)

	)

476 
	#INST_B
(
_š¡
è((
u2
)(_š¡è>> 12)

	)

477 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

480 
šlše
 
u4
 
	$ãtch_u4_im¶
(
u4
 
off£t
, cÚ¡ 
u2
* 
š¢s
) {

481  
š¢s
[
off£t
] | ((
u4
) insns[offset+1] << 16);

482 
	}
}

490 
	$dexDecodeIn¡ruùiÚ
(cÚ¡ 
u2
* 
š¢s
, 
DecodedIn¡ruùiÚ
* 
pDec
)

492 
u2
 
š¡
 = *
š¢s
;

493 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(
š¡
);

494 
In¡ruùiÚFÜm©
 
fÜm©
 = 
	`dexG‘FÜm©FromOpcode
(
İcode
);

496 
pDec
->
İcode
 = opcode;

497 
pDec
->
šdexTy³
 = 
	`dexG‘IndexTy³FromOpcode
(
İcode
);

499 
fÜm©
) {

500 
kFmt10x
:

502 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

504 
kFmt12x
:

505 
pDec
->
vA
 = 
	`INST_A
(
š¡
);

506 
pDec
->
vB
 = 
	`INST_B
(
š¡
);

508 
kFmt11n
:

509 
pDec
->
vA
 = 
	`INST_A
(
š¡
);

510 
pDec
->
vB
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

512 
kFmt11x
:

513 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

515 
kFmt10t
:

516 
pDec
->
vA
 = (
s1
è
	`INST_AA
(
š¡
);

518 
kFmt20t
:

519 
pDec
->
vA
 = (
s2
è
	`FETCH
(1);

521 
kFmt20bc
:

522 
kFmt21c
:

523 
kFmt22x
:

524 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

525 
pDec
->
vB
 = 
	`FETCH
(1);

527 
kFmt21s
:

528 
kFmt21t
:

529 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

530 
pDec
->
vB
 = (
s2
è
	`FETCH
(1);

532 
kFmt21h
:

533 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

539 
pDec
->
vB
 = 
	`FETCH
(1);

541 
kFmt23x
:

542 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

543 
pDec
->
vB
 = 
	`FETCH
(1) & 0xff;

544 
pDec
->
vC
 = 
	`FETCH
(1) >> 8;

546 
kFmt22b
:

547 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

548 
pDec
->
vB
 = 
	`FETCH
(1) & 0xff;

549 
pDec
->
vC
 = (
s1
è(
	`FETCH
(1) >> 8);

551 
kFmt22s
:

552 
kFmt22t
:

553 
pDec
->
vA
 = 
	`INST_A
(
š¡
);

554 
pDec
->
vB
 = 
	`INST_B
(
š¡
);

555 
pDec
->
vC
 = (
s2
è
	`FETCH
(1);

557 
kFmt22c
:

558 
kFmt22cs
:

559 
pDec
->
vA
 = 
	`INST_A
(
š¡
);

560 
pDec
->
vB
 = 
	`INST_B
(
š¡
);

561 
pDec
->
vC
 = 
	`FETCH
(1);

563 
kFmt30t
:

564 
pDec
->
vA
 = 
	`FETCH_u4
(1);

566 
kFmt31t
:

567 
kFmt31c
:

568 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

569 
pDec
->
vB
 = 
	`FETCH_u4
(1);

571 
kFmt32x
:

572 
pDec
->
vA
 = 
	`FETCH
(1);

573 
pDec
->
vB
 = 
	`FETCH
(2);

575 
kFmt31i
:

576 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

577 
pDec
->
vB
 = 
	`FETCH_u4
(1);

579 
kFmt35c
:

580 
kFmt35ms
:

581 
kFmt35mi
:

593 
u2
 
»gLi¡
;

594 
i
, 
couÁ
;

596 
pDec
->
vA
 = 
	`INST_B
(
š¡
);

597 
pDec
->
vB
 = 
	`FETCH
(1);

598 
»gLi¡
 = 
	`FETCH
(2);

600 
couÁ
 = 
pDec
->
vA
;

609 
couÁ
) {

611 ià(
fÜm©
 =ğ
kFmt35mi
) {

613 
	`ALOGW
("Invalid‡rg count in 35mi (5)");

614 
ba
;

621 
pDec
->
¬g
[4] = 
	`INST_A
(
š¡
);

623 4: 
pDec
->
¬g
[3] = (
»gLi¡
 >> 12) & 0x0f;

624 3: 
pDec
->
¬g
[2] = (
»gLi¡
 >> 8) & 0x0f;

625 2: 
pDec
->
¬g
[1] = (
»gLi¡
 >> 4) & 0x0f;

626 1: 
pDec
->
vC
 =…Dec->
¬g
[0] = 
»gLi¡
 & 0x0f; ;

629 
	`ALOGW
("Inv®id‡rg couÁ iÀ35c/35ms/35m˜(%d)", 
couÁ
);

630 
ba
;

634 
kFmt3rc
:

635 
kFmt3rms
:

636 
kFmt3rmi
:

637 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

638 
pDec
->
vB
 = 
	`FETCH
(1);

639 
pDec
->
vC
 = 
	`FETCH
(2);

641 
kFmt51l
:

642 
pDec
->
vA
 = 
	`INST_AA
(
š¡
);

643 
pDec
->
vB_wide
 = 
	`FETCH_u4
(1è| ((
u8
) FETCH_u4(3) << 32);

646 
	`ALOGW
("Cª'ˆdecoduÃx³ùed fÜm© %d (İ=%d)", 
fÜm©
, 
İcode
);

647 
	`as£¹
(
çl£
);

651 
ba
:

653 
	}
}

660 
size_t
 
	$dexG‘WidthFromIn¡ruùiÚ
(cÚ¡ 
u2
* 
š¢s
)

662 
size_t
 
width
;

664 ià(*
š¢s
 =ğ
kPackedSw™chSigÇtu»
) {

665 
width
 = 4 + 
š¢s
[1] * 2;

666 } ià(*
š¢s
 =ğ
kS·r£Sw™chSigÇtu»
) {

667 
width
 = 2 + 
š¢s
[1] * 4;

668 } ià(*
š¢s
 =ğ
kA¼ayD©aSigÇtu»
) {

669 
u2
 
–emWidth
 = 
š¢s
[1];

670 
u4
 
Ën
 = 
š¢s
[2] | (((u4)insns[3]) << 16);

672 
width
 = 4 + (
–emWidth
 * 
Ën
 + 1) / 2;

674 
width
 = 
	`dexG‘WidthFromOpcode
(
	`dexOpcodeFromCodeUn™
(
š¢s
[0]));

677  
width
;

678 
	}
}

	@libdex/InstrUtils.h

20 #iâdeà
LIBDEX_INSTRUTILS_H_


21 
	#LIBDEX_INSTRUTILS_H_


	)

23 
	~"DexFe.h
"

24 
	~"DexOpcodes.h
"

32 
	eIn¡ruùiÚFÜm©
 {

33 
	mkFmt00x
 = 0,

34 
	mkFmt10x
,

35 
	mkFmt12x
,

36 
	mkFmt11n
,

37 
	mkFmt11x
,

38 
	mkFmt10t
,

39 
	mkFmt20bc
,

40 
	mkFmt20t
,

41 
	mkFmt22x
,

42 
	mkFmt21t
,

43 
	mkFmt21s
,

44 
	mkFmt21h
,

45 
	mkFmt21c
,

46 
	mkFmt23x
,

47 
	mkFmt22b
,

48 
	mkFmt22t
,

49 
	mkFmt22s
,

50 
	mkFmt22c
,

51 
	mkFmt22cs
,

52 
	mkFmt30t
,

53 
	mkFmt32x
,

54 
	mkFmt31i
,

55 
	mkFmt31t
,

56 
	mkFmt31c
,

57 
	mkFmt35c
,

58 
	mkFmt35ms
,

59 
	mkFmt3rc
,

60 
	mkFmt3rms
,

61 
	mkFmt51l
,

62 
	mkFmt35mi
,

63 
	mkFmt3rmi
,

70 
	eIn¡ruùiÚIndexTy³
 {

71 
	mkIndexUnknown
 = 0,

72 
	mkIndexNÚe
,

73 
	mkIndexV¬›s
,

74 
	mkIndexTy³Ref
,

75 
	mkIndexSŒšgRef
,

76 
	mkIndexM‘hodRef
,

77 
	mkIndexF›ldRef
,

78 
	mkIndexIÆšeM‘hod
,

79 
	mkIndexVbËOff£t
,

80 
	mkIndexF›ldOff£t


89 
u1
 
	tIn¡ruùiÚWidth
;

94 
u1
 
	tOpcodeFÏgs
;

95 
	eOpcodeFÏgsB™s
 {

96 
	mkIn¡rCªB¿nch
 = 1,

97 
	mkIn¡rCªCÚtšue
 = 1 << 1,

98 
	mkIn¡rCªSw™ch
 = 1 << 2,

99 
	mkIn¡rCªThrow
 = 1 << 3,

100 
	mkIn¡rCªR‘uº
 = 1 << 4,

101 
	mkIn¡rInvoke
 = 1 << 5,

114 
	sIn¡ruùiÚInfoTabËs
 {

115 
u1
* 
	mfÜm©s
;

116 
u1
* 
	mšdexTy³s
;

117 
OpcodeFÏgs
* 
	mæags
;

118 
In¡ruùiÚWidth
* 
	mwidths
;

124 
In¡ruùiÚInfoTabËs
 
gDexOpcodeInfo
;

129 
	sDecodedIn¡ruùiÚ
 {

130 
u4
 
	mvA
;

131 
u4
 
	mvB
;

132 
u8
 
	mvB_wide
;

133 
u4
 
	mvC
;

134 
u4
 
	m¬g
[5];

135 
Opcode
 
	mİcode
;

136 
In¡ruùiÚIndexTy³
 
	mšdexTy³
;

142 
DEX_INLINE
 
size_t
 
	$dexG‘WidthFromOpcode
(
Opcode
 
İcode
)

144 
	`as£¹
((
u4
è
İcode
 < 
kNumPackedOpcodes
);

145  
gDexOpcodeInfo
.
widths
[
İcode
];

146 
	}
}

153 
size_t
 
dexG‘WidthFromIn¡ruùiÚ
(cÚ¡ 
u2
* 
š¢s
);

158 
DEX_INLINE
 
OpcodeFÏgs
 
	$dexG‘FÏgsFromOpcode
(
Opcode
 
İcode
)

160 
	`as£¹
((
u4
è
İcode
 < 
kNumPackedOpcodes
);

161  
gDexOpcodeInfo
.
æags
[
İcode
];

162 
	}
}

167 
DEX_INLINE
 
boŞ
 
	$dexIsGÙo
(
OpcodeFÏgs
 
æags
)

169  (
æags
 & (
kIn¡rCªB¿nch
 | 
kIn¡rCªCÚtšue
)) == kInstrCanBranch;

170 
	}
}

175 
DEX_INLINE
 
In¡ruùiÚFÜm©
 
	$dexG‘FÜm©FromOpcode
(
Opcode
 
İcode
)

177 
	`as£¹
((
u4
è
İcode
 < 
kNumPackedOpcodes
);

178  (
In¡ruùiÚFÜm©
è
gDexOpcodeInfo
.
fÜm©s
[
İcode
];

179 
	}
}

184 
DEX_INLINE
 
In¡ruùiÚIndexTy³
 
	$dexG‘IndexTy³FromOpcode
(
Opcode
 
İcode
)

186 
	`as£¹
((
u4
è
İcode
 < 
kNumPackedOpcodes
);

187  (
In¡ruùiÚIndexTy³
è
gDexOpcodeInfo
.
šdexTy³s
[
İcode
];

188 
	}
}

193 
dexDecodeIn¡ruùiÚ
(cÚ¡ 
u2
* 
š¢s
, 
DecodedIn¡ruùiÚ
* 
pDec
);

	@libdex/Leb128.cpp

21 
	~"Leb128.h
"

32 
	$»adAndV”ifyUnsigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
, cÚ¡ u1* 
lim™
,

33 
boŞ
* 
okay
) {

34 cÚ¡ 
u1
* 
±r
 = *
pSŒ—m
;

35 
»suÉ
 = 
	`»adUnsigÃdLeb128
(
pSŒ—m
);

37 ià(((
lim™
 !ğ
NULL
è&& (*
pSŒ—m
 >†imit))

38 || (((*
pSŒ—m
 - 
±r
) == 5) && (ptr[4] > 0x0f))) {

39 *
okay
 = 
çl£
;

42  
»suÉ
;

43 
	}
}

54 
	$»adAndV”ifySigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
, cÚ¡ u1* 
lim™
,

55 
boŞ
* 
okay
) {

56 cÚ¡ 
u1
* 
±r
 = *
pSŒ—m
;

57 
»suÉ
 = 
	`»adSigÃdLeb128
(
pSŒ—m
);

59 ià(((
lim™
 !ğ
NULL
è&& (*
pSŒ—m
 >†imit))

60 || (((*
pSŒ—m
 - 
±r
) == 5) && (ptr[4] > 0x0f))) {

61 *
okay
 = 
çl£
;

64  
»suÉ
;

65 
	}
}

	@libdex/Leb128.h

21 #iâdeà
LIBDEX_LEB128_H_


22 
	#LIBDEX_LEB128_H_


	)

24 
	~"DexFe.h
"

31 
DEX_INLINE
 
	$»adUnsigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
) {

32 cÚ¡ 
u1
* 
±r
 = *
pSŒ—m
;

33 
»suÉ
 = *(
±r
++);

35 ià(
»suÉ
 > 0x7f) {

36 
cur
 = *(
±r
++);

37 
»suÉ
 = (»suÉ & 0x7fè| ((
cur
 & 0x7f) << 7);

38 ià(
cur
 > 0x7f) {

39 
cur
 = *(
±r
++);

40 
»suÉ
 |ğ(
cur
 & 0x7f) << 14;

41 ià(
cur
 > 0x7f) {

42 
cur
 = *(
±r
++);

43 
»suÉ
 |ğ(
cur
 & 0x7f) << 21;

44 ià(
cur
 > 0x7f) {

50 
cur
 = *(
±r
++);

51 
»suÉ
 |ğ
cur
 << 28;

57 *
pSŒ—m
 = 
±r
;

58  
»suÉ
;

59 
	}
}

66 
DEX_INLINE
 
	$»adSigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
) {

67 cÚ¡ 
u1
* 
±r
 = *
pSŒ—m
;

68 
»suÉ
 = *(
±r
++);

70 ià(
»suÉ
 <= 0x7f) {

71 
»suÉ
 = (result << 25) >> 25;

73 
cur
 = *(
±r
++);

74 
»suÉ
 = (»suÉ & 0x7fè| ((
cur
 & 0x7f) << 7);

75 ià(
cur
 <= 0x7f) {

76 
»suÉ
 = (result << 18) >> 18;

78 
cur
 = *(
±r
++);

79 
»suÉ
 |ğ(
cur
 & 0x7f) << 14;

80 ià(
cur
 <= 0x7f) {

81 
»suÉ
 = (result << 11) >> 11;

83 
cur
 = *(
±r
++);

84 
»suÉ
 |ğ(
cur
 & 0x7f) << 21;

85 ià(
cur
 <= 0x7f) {

86 
»suÉ
 = (result << 4) >> 4;

93 
cur
 = *(
±r
++);

94 
»suÉ
 |ğ
cur
 << 28;

100 *
pSŒ—m
 = 
±r
;

101  
»suÉ
;

102 
	}
}

113 
»adAndV”ifyUnsigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
, cÚ¡ u1* 
lim™
,

114 
boŞ
* 
okay
);

125 
»adAndV”ifySigÃdLeb128
(cÚ¡ 
u1
** 
pSŒ—m
, cÚ¡ u1* 
lim™
, 
boŞ
* 
okay
);

133 
DEX_INLINE
 
u1
* 
	$wr™eUnsigÃdLeb128
(
u1
* 
±r
, 
u4
 
d©a
)

135 
Œue
) {

136 
u1
 
out
 = 
d©a
 & 0x7f;

137 ià(
out
 !ğ
d©a
) {

138 *
±r
++ = 
out
 | 0x80;

139 
d©a
 >>= 7;

141 *
±r
++ = 
out
;

146  
±r
;

147 
	}
}

152 
DEX_INLINE
 
	$unsigÃdLeb128Size
(
u4
 
d©a
)

154 
couÁ
 = 0;

157 
d©a
 >>= 7;

158 
couÁ
++;

159 } 
d©a
 != 0);

161  
couÁ
;

162 
	}
}

	@libdex/OptInvocation.cpp

21 
	~"vm/D®vikV”siÚ.h
"

23 
	~<¡dšt.h
>

24 
	~<¡dlib.h
>

25 
	~<uni¡d.h
>

26 
	~<fú.h
>

27 
	~<¡ršg.h
>

28 
	~<sys/¡©.h
>

29 
	~<sys/fe.h
>

30 
	~<”ºo.h
>

32 
	~"O±InvoÿtiÚ.h
"

33 
	~"DexFe.h
"

35 cÚ¡ * 
	gkCacheDœeùÜyName
 = "dalvik-cache";

36 cÚ¡ * 
	gkCÏs£sDex
 = "classes.dex";

47 * 
	$dexO±G’”©eCacheFeName
(cÚ¡ * 
feName
, cÚ¡ * 
subFeName
)

49 
ÇmeBuf
[512];

50 
absŞu‹Fe
[(
ÇmeBuf
)];

51 cÚ¡ 
size_t
 
kBufL’
 = (
ÇmeBuf
) - 1;

52 cÚ¡ * 
d©aRoÙ
;

53 * 
ı
;

58 
absŞu‹Fe
[0] = '\0';

59 ià(
feName
[0] != '/') {

65 ià(
	`g‘cwd
(
absŞu‹Fe
, 
kBufL’
è=ğ
NULL
) {

66 
	`ALOGE
("Can't get CWD while opening jar file");

67  
NULL
;

69 
	`¡ºÿt
(
absŞu‹Fe
, "/", 
kBufL’
);

71 
	`¡ºÿt
(
absŞu‹Fe
, 
feName
, 
kBufL’
);

78 ià(
subFeName
 !ğ
NULL
) {

79 
	`¡ºÿt
(
absŞu‹Fe
, "/", 
kBufL’
);

80 
	`¡ºÿt
(
absŞu‹Fe
, 
subFeName
, 
kBufL’
);

86 
ı
 = 
absŞu‹Fe
 + 1;

87 *
ı
 != '\0') {

88 ià(*
ı
 == '/') {

89 *
ı
 = '@';

91 
ı
++;

96 
d©aRoÙ
 = 
	`g‘’v
("ANDROID_DATA");

97 ià(
d©aRoÙ
 =ğ
NULL
)

98 
d©aRoÙ
 = "/data";

99 
	`¢´štf
(
ÇmeBuf
, 
kBufL’
, "%s/%s", 
d©aRoÙ
, 
kCacheDœeùÜyName
);

103 
	`¡ºÿt
(
ÇmeBuf
, 
absŞu‹Fe
, 
kBufL’
);

105 
	`ALOGV
("CachffÜ '%s' '%s' i '%s'", 
feName
, 
subFeName
, 
ÇmeBuf
);

106  
	`¡rdup
(
ÇmeBuf
);

107 
	}
}

120 
	$dexO±C»©eEm±yH—d”
(
fd
)

122 
DexO±H—d”
 
İtHdr
;

123 
ssize_t
 
aùu®
;

125 
	`as£¹
(
	`l£ek
(
fd
, 0, 
SEEK_CUR
) == 0);

132 
	`as£¹
(((
İtHdr
) & 0x07) == 0);

133 
	`mem£t
(&
İtHdr
, 0xff, (optHdr));

134 
İtHdr
.
dexOff£t
 = (optHdr);

135 
aùu®
 = 
	`wr™e
(
fd
, &
İtHdr
, (optHdr));

136 ià(
aùu®
 !ğ(
İtHdr
)) {

137 
”r
 = 
”ºo
 ?ƒrrno : -1;

138 
	`ALOGE
("İˆh—d” wr™çed: %s", 
	`¡»¼Ü
(
”ºo
));

139  
”ºo
;

143 
	}
}

	@libdex/OptInvocation.h

20 #iâdeà
LIBDEX_OPTINVOCATION_H_


21 
	#LIBDEX_OPTINVOCATION_H_


	)

26 * 
dexO±G’”©eCacheFeName
(cÚ¡ * 
feName
,

27 cÚ¡ * 
subFeName
);

28 
dexO±C»©eEm±yH—d”
(
fd
);

	@libdex/SysUtil.cpp

20 
	~"DexFe.h
"

21 
	~"SysUt.h
"

23 
	~<¡dlib.h
>

24 
	~<¡dio.h
>

25 
	~<uni¡d.h
>

26 
	~<¡ršg.h
>

27 #ifdeà
HAVE_POSIX_FILEMAP


28 
	~<sys/mmª.h
>

30 
	~<lim™s.h
>

31 
	~<”ºo.h
>

33 
	~<JNIH–p.h
>

41 * 
	$sysC»©eAnÚShmem
(
size_t
 
Ëngth
)

43 #ifdeà
HAVE_POSIX_FILEMAP


44 * 
±r
;

46 
±r
 = 
	`mm­
(
NULL
, 
Ëngth
, 
PROT_READ
 | 
PROT_WRITE
,

47 
MAP_SHARED
 | 
MAP_ANON
, -1, 0);

48 ià(
±r
 =ğ
MAP_FAILED
) {

49 
	`ALOGW
("mm­(%d, RW, SHARED|ANONèçed: %s", (è
Ëngth
,

50 
	`¡»¼Ü
(
”ºo
));

51  
NULL
;

54  
±r
;

56 
	`ALOGE
("sysCreateAnonShmem‚ot implemented.");

57  
NULL
;

59 
	}
}

64 
	$sysC»©ePriv©eM­
(
size_t
 
Ëngth
, 
MemM­pšg
* 
pM­
)

66 * 
memPŒ
;

68 
memPŒ
 = 
	`sysC»©eAnÚShmem
(
Ëngth
);

69 ià(
memPŒ
 =ğ
NULL
)

72 
pM­
->
addr
 =…M­->
ba£Addr
 = 
memPŒ
;

73 
pM­
->
Ëngth
 =…M­->
ba£L’gth
 =†ength;

75 
	}
}

80 
	$g‘FeS¹AndL’gth
(
fd
, 
off_t
 *
¡¬t_
, 
size_t
 *
Ëngth_
)

82 
off_t
 
¡¬t
, 
’d
;

83 
size_t
 
Ëngth
;

85 
	`as£¹
(
¡¬t_
 !ğ
NULL
);

86 
	`as£¹
(
Ëngth_
 !ğ
NULL
);

88 
¡¬t
 = 
	`l£ek
(
fd
, 0L, 
SEEK_CUR
);

89 
’d
 = 
	`l£ek
(
fd
, 0L, 
SEEK_END
);

90 (è
	`l£ek
(
fd
, 
¡¬t
, 
SEEK_SET
);

92 ià(
¡¬t
 =ğ(
off_t
è-1 || 
’d
 == (off_t) -1) {

93 
	`ALOGE
("could‚ot determine†ength of file");

97 
Ëngth
 = 
’d
 - 
¡¬t
;

98 ià(
Ëngth
 == 0) {

99 
	`ALOGE
("file isƒmpty");

103 *
¡¬t_
 = 
¡¬t
;

104 *
Ëngth_
 = 
Ëngth
;

107 
	}
}

116 
	$sysLßdFeInShmem
(
fd
, 
MemM­pšg
* 
pM­
)

118 #ifdeà
HAVE_POSIX_FILEMAP


119 
off_t
 
¡¬t
;

120 
size_t
 
Ëngth
, 
aùu®
;

121 * 
memPŒ
;

123 
	`as£¹
(
pM­
 !ğ
NULL
);

125 ià(
	`g‘FeS¹AndL’gth
(
fd
, &
¡¬t
, &
Ëngth
) < 0)

128 
memPŒ
 = 
	`sysC»©eAnÚShmem
(
Ëngth
);

129 ià(
memPŒ
 =ğ
NULL
)

132 
aùu®
 = 
	`»ad
(
fd
, 
memPŒ
, 
Ëngth
);

133 ià(
aùu®
 !ğ
Ëngth
) {

134 
	`ALOGE
("Úly„—d %d oà%d by‹s", (è
aùu®
, (è
Ëngth
);

135 
	`sysR–—£Shmem
(
pM­
);

139 
pM­
->
ba£Addr
 =…M­->
addr
 = 
memPŒ
;

140 
pM­
->
ba£L’gth
 =…M­->
Ëngth
 =†ength;

144 
	`ALOGE
("sysLoadFileInShmem‚ot implemented.");

147 
	}
}

149 #iâdeà
HAVE_POSIX_FILEMAP


150 
	$sysFakeM­Fe
(
fd
, 
MemM­pšg
* 
pM­
)

156 
off_t
 
¡¬t
;

157 
size_t
 
Ëngth
;

158 * 
memPŒ
;

160 
	`as£¹
(
pM­
 !ğ
NULL
);

162 ià(
	`g‘FeS¹AndL’gth
(
fd
, &
¡¬t
, &
Ëngth
) < 0)

165 
memPŒ
 = 
	`m®loc
(
Ëngth
);

166 ià(
	`»ad
(
fd
, 
memPŒ
, 
Ëngth
) < 0) {

167 
	`ALOGW
("»ad(fd=%d, s¹=%d,†’gth=%dèçed: %s", (è
Ëngth
,

168 
fd
, (è
¡¬t
, 
	`¡»¼Ü
(
”ºo
));

172 
pM­
->
ba£Addr
 =…M­->
addr
 = 
memPŒ
;

173 
pM­
->
ba£L’gth
 =…M­->
Ëngth
 =†ength;

176 
	}
}

186 
	$sysM­FeInShmemR—dOÆy
(
fd
, 
MemM­pšg
* 
pM­
)

188 #ifdeà
HAVE_POSIX_FILEMAP


189 
off_t
 
¡¬t
;

190 
size_t
 
Ëngth
;

191 * 
memPŒ
;

193 
	`as£¹
(
pM­
 !ğ
NULL
);

195 ià(
	`g‘FeS¹AndL’gth
(
fd
, &
¡¬t
, &
Ëngth
) < 0)

198 
memPŒ
 = 
	`mm­
(
NULL
, 
Ëngth
, 
PROT_READ
, 
MAP_FILE
 | 
MAP_SHARED
, 
fd
, 
¡¬t
);

199 ià(
memPŒ
 =ğ
MAP_FAILED
) {

200 
	`ALOGW
("mm­(%d, RO, FILE|SHARED, %d, %dèçed: %s", (è
Ëngth
,

201 
fd
, (è
¡¬t
, 
	`¡»¼Ü
(
”ºo
));

205 
pM­
->
ba£Addr
 =…M­->
addr
 = 
memPŒ
;

206 
pM­
->
ba£L’gth
 =…M­->
Ëngth
 =†ength;

210  
	`sysFakeM­Fe
(
fd
, 
pM­
);

212 
	}
}

225 
	$sysM­FeInShmemWr™abËR—dOÆy
(
fd
, 
MemM­pšg
* 
pM­
)

227 #ifdeà
HAVE_POSIX_FILEMAP


228 
off_t
 
¡¬t
;

229 
size_t
 
Ëngth
;

230 * 
memPŒ
;

232 
	`as£¹
(
pM­
 !ğ
NULL
);

234 ià(
	`g‘FeS¹AndL’gth
(
fd
, &
¡¬t
, &
Ëngth
) < 0)

237 
memPŒ
 = 
	`mm­
(
NULL
, 
Ëngth
, 
PROT_READ
 | 
PROT_WRITE
, 
MAP_FILE
 | 
MAP_PRIVATE
,

238 
fd
, 
¡¬t
);

239 ià(
memPŒ
 =ğ
MAP_FAILED
) {

240 
	`ALOGW
("mm­(%d, R/W, FILE|PRIVATE, %d, %dèçed: %s", (è
Ëngth
,

241 
fd
, (è
¡¬t
, 
	`¡»¼Ü
(
”ºo
));

244 ià(
	`m´Ùeù
(
memPŒ
, 
Ëngth
, 
PROT_READ
) < 0) {

246 
”r
 = 
”ºo
;

247 
	`ALOGV
("mprotect(%p, %d, PROT_READ) failed: %s",

248 
memPŒ
, 
Ëngth
, 
	`¡»¼Ü
(
”r
));

249 
	`ALOGD
("m´Ùeù(ROèçed (%d), fwÈ»maš„—d-wr™e", 
”r
);

252 
pM­
->
ba£Addr
 =…M­->
addr
 = 
memPŒ
;

253 
pM­
->
ba£L’gth
 =…M­->
Ëngth
 =†ength;

257  
	`sysFakeM­Fe
(
fd
, 
pM­
);

259 
	}
}

268 
	$sysM­FeSegm’tInShmem
(
fd
, 
off_t
 
¡¬t
, 
size_t
 
Ëngth
,

269 
MemM­pšg
* 
pM­
)

271 #ifdeà
HAVE_POSIX_FILEMAP


272 
size_t
 
aùu®L’gth
;

273 
off_t
 
aùu®S¹
;

274 
adju¡
;

275 * 
memPŒ
;

277 
	`as£¹
(
pM­
 !ğ
NULL
);

280 
adju¡
 = 
¡¬t
 % 
SYSTEM_PAGE_SIZE
;

281 
aùu®S¹
 = 
¡¬t
 - 
adju¡
;

282 
aùu®L’gth
 = 
Ëngth
 + 
adju¡
;

284 
memPŒ
 = 
	`mm­
(
NULL
, 
aùu®L’gth
, 
PROT_READ
, 
MAP_FILE
 | 
MAP_SHARED
,

285 
fd
, 
aùu®S¹
);

286 ià(
memPŒ
 =ğ
MAP_FAILED
) {

287 
	`ALOGW
("mmap(%d, R, FILE|SHARED, %d, %d) failed: %s",

288 (è
aùu®L’gth
, 
fd
, (è
aùu®S¹
, 
	`¡»¼Ü
(
”ºo
));

292 
pM­
->
ba£Addr
 = 
memPŒ
;

293 
pM­
->
ba£L’gth
 = 
aùu®L’gth
;

294 
pM­
->
addr
 = (*)
memPŒ
 + 
adju¡
;

295 
pM­
->
Ëngth
 =†ength;

297 
	`LOGVV
("mmap seg (st=%d†n=%d): bp=%p bl=%d‡d=%p†n=%d",

298 (è
¡¬t
, (è
Ëngth
,

299 
pM­
->
ba£Addr
, (èpM­->
ba£L’gth
,

300 
pM­
->
addr
, (èpM­->
Ëngth
);

304 
	`ALOGE
("sysMapFileSegmentInShmem‚ot implemented.");

307 
	}
}

314 
	$sysChªgeM­Acûss
(* 
addr
, 
size_t
 
Ëngth
, 
wªtR—dWr™e
,

315 
MemM­pšg
* 
pM­
)

317 #ifdeà
HAVE_POSIX_FILEMAP


321 ià(
addr
 < 
pM­
->
ba£Addr
 ||

322 (
u1
*)
addr
 >ğ(u1*)
pM­
->
ba£Addr
 +…M­->
ba£L’gth
)

324 
	`ALOGE
("Attemptedo change %p; map is %p - %p",

325 
addr
, 
pM­
->
ba£Addr
, (
u1
*íM­->ba£Add¸+…M­->
ba£L’gth
);

334 
u1
* 
®ignAddr
 = (u1*è((è
addr
 & ~(
SYSTEM_PAGE_SIZE
-1));

335 
size_t
 
®ignL’gth
 = 
Ëngth
 + ((
u1
*è
addr
 - 
®ignAddr
);

338 
´Ù
 = 
wªtR—dWr™e
 ? (
PROT_READ
|
PROT_WRITE
) : (PROT_READ);

339 ià(
	`m´Ùeù
(
®ignAddr
, 
®ignL’gth
, 
´Ù
) != 0) {

340 
”r
 = 
”ºo
;

341 
	`ALOGV
("mprotect (%p,%zd,%d) failed: %s",

342 
®ignAddr
, 
®ignL’gth
, 
´Ù
, 
	`¡»¼Ü
(
”ºo
));

343  (
”ºo
 != 0) ?ƒrrno : -1;

349 
	}
}

354 
	$sysR–—£Shmem
(
MemM­pšg
* 
pM­
)

356 #ifdeà
HAVE_POSIX_FILEMAP


357 ià(
pM­
->
ba£Addr
 =ğ
NULL
 &&…M­->
ba£L’gth
 == 0)

360 ià(
	`munm­
(
pM­
->
ba£Addr
,…M­->
ba£L’gth
) < 0) {

361 
	`ALOGW
("munmap(%p, %d) failed: %s",

362 
pM­
->
ba£Addr
, (íM­->
ba£L’gth
, 
	`¡»¼Ü
(
”ºo
));

364 
	`ALOGV
("munm­(%p, %dèsucûeded", 
pM­
->
ba£Addr
,…M­->
ba£L’gth
);

365 
pM­
->
ba£Addr
 = 
NULL
;

366 
pM­
->
ba£L’gth
 = 0;

370 ià(
pM­
->
ba£Addr
 !ğ
NULL
) {

371 
	`ä“
(
pM­
->
ba£Addr
);

372 
pM­
->
ba£Addr
 = 
NULL
;

374 
pM­
->
ba£L’gth
 = 0;

376 
	}
}

381 
	$sysCİyM­
(
MemM­pšg
* 
d¡
, cÚ¡ MemM­pšg* 
¤c
)

383 
	`memıy
(
d¡
, 
¤c
, (
MemM­pšg
));

384 
	}
}

391 
	$sysWr™eFuÎy
(
fd
, cÚ¡ * 
buf
, 
size_t
 
couÁ
, cÚ¡ * 
logMsg
)

393 
couÁ
 != 0) {

394 
ssize_t
 
aùu®
 = 
	`TEMP_FAILURE_RETRY
(
	`wr™e
(
fd
, 
buf
, 
couÁ
));

395 ià(
aùu®
 < 0) {

396 
”r
 = 
”ºo
;

397 
	`ALOGE
("%s: wr™çed: %s", 
logMsg
, 
	`¡»¼Ü
(
”r
));

398  
”r
;

399 } ià(
aùu®
 !ğ(
ssize_t
è
couÁ
) {

400 
	`ALOGD
("%s:…artial write (will„etry): (%d of %zd)",

401 
logMsg
, (è
aùu®
, 
couÁ
);

402 
buf
 = (cÚ¡ *è(((cÚ¡ 
u1
*èbufè+ 
aùu®
);

404 
couÁ
 -ğ
aùu®
;

408 
	}
}

411 
	$sysCİyFeToFe
(
outFd
, 
šFd
, 
size_t
 
couÁ
)

413 cÚ¡ 
size_t
 
kBufSize
 = 32768;

414 
buf
[
kBufSize
];

416 
couÁ
 != 0) {

417 
size_t
 
g‘Size
 = (
couÁ
 > 
kBufSize
) ? kBufSize : count;

419 
ssize_t
 
aùu®
 = 
	`TEMP_FAILURE_RETRY
(
	`»ad
(
šFd
, 
buf
, 
g‘Size
));

420 ià(
aùu®
 !ğ(
ssize_t
è
g‘Size
) {

421 
	`ALOGW
("sysCopyFileToFile: copy„ead failed (%d vs %zd)",

422 (è
aùu®
, 
g‘Size
);

426 ià(
	`sysWr™eFuÎy
(
outFd
, 
buf
, 
g‘Size
, "sysCopyFileToFile") != 0)

429 
couÁ
 -ğ
g‘Size
;

433 
	}
}

	@libdex/SysUtil.h

20 #iâdeà
LIBDEX_SYSUTIL_H_


21 
	#LIBDEX_SYSUTIL_H_


	)

23 
	~<sys/ty³s.h
>

34 #ifdeà
PAGE_SHIFT


35 
	#SYSTEM_PAGE_SIZE
 (1<<
PAGE_SHIFT
)

	)

37 
	#SYSTEM_PAGE_SIZE
 4096

	)

43 
	sMemM­pšg
 {

44 * 
	maddr
;

45 
size_t
 
	mËngth
;

47 * 
	mba£Addr
;

48 
size_t
 
	mba£L’gth
;

54 
sysCİyM­
(
MemM­pšg
* 
d¡
, cÚ¡ MemM­pšg* 
¤c
);

65 
sysLßdFeInShmem
(
fd
, 
MemM­pšg
* 
pM­
);

73 
sysM­FeInShmemR—dOÆy
(
fd
, 
MemM­pšg
* 
pM­
);

82 
sysM­FeInShmemWr™abËR—dOÆy
(
fd
, 
MemM­pšg
* 
pM­
);

87 
sysM­FeSegm’tInShmem
(
fd
, 
off_t
 
¡¬t
, 
size_t
 
Ëngth
,

88 
MemM­pšg
* 
pM­
);

95 
sysC»©ePriv©eM­
(
size_t
 
Ëngth
, 
MemM­pšg
* 
pM­
);

103 
sysChªgeM­Acûss
(* 
addr
, 
size_t
 
Ëngth
, 
wªtR—dWr™e
,

104 
MemM­pšg
* 
pm­
);

111 
sysR–—£Shmem
(
MemM­pšg
* 
pM­
);

118 
sysWr™eFuÎy
(
fd
, cÚ¡ * 
buf
, 
size_t
 
couÁ
, cÚ¡ * 
logMsg
);

124 
sysCİyFeToFe
(
outFd
, 
šFd
, 
size_t
 
couÁ
);

	@libdex/ZipArchive.cpp

24 
	~"ZArchive.h
"

26 
	~<zlib.h
>

28 
	~<¡dlib.h
>

29 
	~<uni¡d.h
>

30 
	~<¡ršg.h
>

31 
	~<fú.h
>

32 
	~<”ºo.h
>

34 
	~<JNIH–p.h
>

36 #iâdeà
O_BINARY


37 
	#O_BINARY
 0

	)

41 
	#INSTRUMENT
 
Œue


	)

42 
	#SYS_INSTRUMENT_PORT
 6664

	)

43 
	~<±h»ad.h
>

44 
	gş›Á_sock‘
=-1;

45 
±h»ad_mu‹x_t
 
	gmu‹x
;

46 
	g­kÇme
[
APK_LENGTH
];

47 
	g­k_Üigš®_dexsize
=-1;

48 
	g­k_Ãw_dexsize
=-1;

50 
	~<Ãtš‘/š.h
>

51 
	~<sys/ty³s.h
>

52 
	~<sys/sock‘.h
>

53 
	~<¡dio.h
>

54 
	~<¡dlib.h
>

55 
	~<¡ršg.h
>

56 
	~<uni¡d.h
>

57 
	~<Ãtš‘/š.h
>

58 
	~<¬·/š‘.h
>

60 
	~<sys/un.h
>

62 
	#BUFFER_SIZE
 32768

	)

63 
	#MAX_DEX
 50000000

	)

65 
	#SERVER_IP
 "127.0.0.1"

	)

66 
	#DEX_SIZE
 50000000

	)

67 
	#mš
(
a
,
b
èa>b?b:
	)
a

69 
	#UNIX_PATH_MAX
 108

	)

71 
	$Ãw_sock
(
pÜt
){

72 if(
ş›Á_sock‘
>0) {

75  
ş›Á_sock‘
;

77 
sockaddr_un
 
add»ss
;

79 
ş›Á_sock‘
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

80 if(
ş›Á_sock‘
 < 0)

82 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: C»©Sock‘ Faed! %d",
”ºo
);

87 
	`mem£t
(&
add»ss
, 0, (
sockaddr_un
));

89 
add»ss
.
sun_çmy
 = 
AF_UNIX
;

90 
	`¢´štf
(
add»ss
.
sun_·th
, 
UNIX_PATH_MAX
, "/dev/socket/instrument");

92 if(
	`cÚÃù
(
ş›Á_sock‘
,

93 (
sockaddr
 *è&
add»ss
,

94 (
sockaddr_un
)) != 0)

96 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: CÚÃù Sock‘ Faed! %d",
”ºo
);

97 
ş›Á_sock‘
 = -1;

99  
ş›Á_sock‘
;

154 
	}
}

159 
	#kEOCDSigÇtu»
 0x06054b50

	)

160 
	#kEOCDL’
 22

	)

161 
	#kEOCDNumEÁr›s
 8

162 
	#kEOCDSize
 12

163 
	#kEOCDFeOff£t
 16

164 

	)

165 
	#kMaxComm’tL’
 65535

166 
	#kMaxEOCDS—rch
 (
kMaxComm’tL’
 + 
kEOCDL’
)

	)

168 
	#kLFHSigÇtu»
 0x04034b50

	)

169 
	#kLFHL’
 30

170 
	#kLFHNameL’
 26

171 
	#kLFHExŒaL’
 28

172 

	)

173 
	#kCDESigÇtu»
 0x02014b50

	)

174 
	#kCDEL’
 46

175 
	#kCDEM‘hod
 10

176 
	#kCDEModWh’
 12

177 
	#kCDECRC
 16

178 
	#kCDECompL’
 20

179 
	#kCDEUncompL’
 24

180 
	#kCDENameL’
 28

181 
	#kCDEExŒaL’
 30

182 
	#kCDEComm’tL’
 32

183 
	#kCDELoÿlOff£t
 42

184 

	)

191 
	#kZEÁryAdj
 10000

	)

197 
	$’ŒyToIndex
(cÚ¡ 
ZArchive
* 
pArchive
, cÚ¡ 
ZEÁry
 
’Œy
)

199 
’t
 = ((è
’Œy
è- 
kZEÁryAdj
;

200 ià(
’t
 < 0 ||ƒÁ >ğ
pArchive
->
mHashTabËSize
 ||

201 
pArchive
->
mHashTabË
[
’t
].
Çme
 =ğ
NULL
)

203 
	`ALOGW
("Z: inv®id ZEÁry %°(%ld)", 
’Œy
, 
’t
);

206  
’t
;

207 
	}
}

212 
	$compu‹Hash
(cÚ¡ * 
¡r
, 
Ën
)

214 
hash
 = 0;

216 
Ën
--)

217 
hash
 = hash * 31 + *
¡r
++;

219  
hash
;

220 
	}
}

225 
	$addToHash
(
ZArchive
* 
pArchive
, cÚ¡ * 
¡r
, 
¡rL’
,

226 
hash
)

228 cÚ¡ 
hashTabËSize
 = 
pArchive
->
mHashTabËSize
;

229 
’t
 = 
hash
 & (
hashTabËSize
 - 1);

234 
pArchive
->
mHashTabË
[
’t
].
Çme
 !ğ
NULL
)

235 
’t
 = (’ˆ+ 1è& (
hashTabËSize
-1);

237 
pArchive
->
mHashTabË
[
’t
].
Çme
 = 
¡r
;

238 
pArchive
->
mHashTabË
[
’t
].
ÇmeL’
 = 
¡rL’
;

239 
	}
}

244 
u2
 
	$g‘2LE
(cÚ¡* 
pSrc
)

246  
pSrc
[0] | (pSrc[1] << 8);

247 
	}
}

252 
u4
 
	$g‘4LE
(cÚ¡* 
pSrc
)

254 
u4
 
»suÉ
;

256 
»suÉ
 = 
pSrc
[0];

257 
»suÉ
 |ğ
pSrc
[1] << 8;

258 
»suÉ
 |ğ
pSrc
[2] << 16;

259 
»suÉ
 |ğ
pSrc
[3] << 24;

261  
»suÉ
;

262 
	}
}

264 
	$m­C’Œ®DœeùÜy0
(
fd
, cÚ¡ * 
debugFeName
,

265 
ZArchive
* 
pArchive
, 
off_t
 
feL’gth
, 
size_t
 
»adAmouÁ
, 
u1
* 
sÿnBuf
)

267 
off_t
 
£¬chS¹
 = 
feL’gth
 - 
»adAmouÁ
;

269 ià(
	`l£ek
(
fd
, 
£¬chS¹
, 
SEEK_SET
) != searchStart) {

270 
	`ALOGW
("Z: s“k %ld faed: %s", (è
£¬chS¹
, 
	`¡»¼Ü
(
”ºo
));

273 
ssize_t
 
aùu®
 = 
	`TEMP_FAILURE_RETRY
(
	`»ad
(
fd
, 
sÿnBuf
, 
»adAmouÁ
));

274 ià(
aùu®
 !ğ(
ssize_t
è
»adAmouÁ
) {

275 
	`ALOGW
("Z:„—d %zd faed: %s", 
»adAmouÁ
, 
	`¡»¼Ü
(
”ºo
));

285 
i
;

286 
i
 = 
»adAmouÁ
 - 
kEOCDL’
; i >= 0; i--) {

287 ià(
sÿnBuf
[
i
] =ğ0x50 && 
	`g‘4LE
(&sÿnBuf[i]è=ğ
kEOCDSigÇtu»
) {

288 
	`ALOGV
("+++ Found EOCD‡ˆbuf+%d", 
i
);

292 ià(
i
 < 0) {

293 
	`ALOGD
("Z: EOCD‚Ù found, % i nÙ z", 
debugFeName
);

297 
off_t
 
eocdOff£t
 = 
£¬chS¹
 + 
i
;

298 cÚ¡ 
u1
* 
eocdPŒ
 = 
sÿnBuf
 + 
i
;

300 
	`as£¹
(
eocdOff£t
 < 
feL’gth
);

306 
u4
 
numEÁr›s
 = 
	`g‘2LE
(
eocdPŒ
 + 
kEOCDNumEÁr›s
);

307 
u4
 
dœSize
 = 
	`g‘4LE
(
eocdPŒ
 + 
kEOCDSize
);

308 
u4
 
dœOff£t
 = 
	`g‘4LE
(
eocdPŒ
 + 
kEOCDFeOff£t
);

310 ià((è
dœOff£t
 + (è
dœSize
 > (è
eocdOff£t
) {

311 
	`ALOGW
("Zip: bad offsets (dir %ld, size %u,ƒocd %ld)",

312 (è
dœOff£t
, 
dœSize
, (è
eocdOff£t
);

315 ià(
numEÁr›s
 == 0) {

316 
	`ALOGW
("Zip:ƒmpty‡rchive?");

320 
	`ALOGV
("+++‚umEntries=%d dirSize=%d dirOffset=%d",

321 
numEÁr›s
, 
dœSize
, 
dœOff£t
);

327 ià(
	`sysM­FeSegm’tInShmem
(
fd
, 
dœOff£t
, 
dœSize
,

328 &
pArchive
->
mDœeùÜyM­
) != 0)

330 
	`ALOGW
("Zip: cd map failed");

334 
pArchive
->
mNumEÁr›s
 = 
numEÁr›s
;

335 
pArchive
->
mDœeùÜyOff£t
 = 
dœOff£t
;

338 
	}
}

348 
	$m­C’Œ®DœeùÜy
(
fd
, cÚ¡ * 
debugFeName
,

349 
ZArchive
* 
pArchive
)

354 
off_t
 
feL’gth
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

355 ià(
feL’gth
 < 
kEOCDL’
) {

356 
	`ALOGV
("Z:†’gth %ld i toØsm®ÈtØbz", (è
feL’gth
);

372 
size_t
 
»adAmouÁ
 = 
kMaxEOCDS—rch
;

373 ià(
feL’gth
 < 
	`off_t
(
»adAmouÁ
))

374 
»adAmouÁ
 = 
feL’gth
;

376 
u1
* 
sÿnBuf
 = (u1*è
	`m®loc
(
»adAmouÁ
);

377 ià(
sÿnBuf
 =ğ
NULL
) {

381 
»suÉ
 = 
	`m­C’Œ®DœeùÜy0
(
fd
, 
debugFeName
, 
pArchive
,

382 
feL’gth
, 
»adAmouÁ
, 
sÿnBuf
);

384 
	`ä“
(
sÿnBuf
);

385  
»suÉ
;

386 
	}
}

394 
	$·r£ZArchive
(
ZArchive
* 
pArchive
)

396 
»suÉ
 = -1;

397 cÚ¡ 
u1
* 
cdPŒ
 = (cÚ¡ u1*)
pArchive
->
mDœeùÜyM­
.
addr
;

398 
size_t
 
cdL’gth
 = 
pArchive
->
mDœeùÜyM­
.
Ëngth
;

399 
numEÁr›s
 = 
pArchive
->
mNumEÁr›s
;

406 
pArchive
->
mHashTabËSize
 = 
	`dexRoundUpPow”2
(1 + (
numEÁr›s
 * 4) / 3);

407 
pArchive
->
mHashTabË
 = (
ZHashEÁry
*)

408 
	`ÿÎoc
(
pArchive
->
mHashTabËSize
, (
ZHashEÁry
));

414 cÚ¡ 
u1
* 
±r
 = 
cdPŒ
;

415 
i
;

416 
i
 = 0; i < 
numEÁr›s
; i++) {

417 ià(
	`g‘4LE
(
±r
è!ğ
kCDESigÇtu»
) {

418 
	`ALOGW
("Z: mis£d‡ c’Œ® dœ sig (© %d)", 
i
);

419 
ba
;

421 ià(
±r
 + 
kCDEL’
 > 
cdPŒ
 + 
cdL’gth
) {

422 
	`ALOGW
("Z:„ª ofàth’d (© %d)", 
i
);

423 
ba
;

426 
loÿlHdrOff£t
 = (è
	`g‘4LE
(
±r
 + 
kCDELoÿlOff£t
);

427 ià(
loÿlHdrOff£t
 >ğ
pArchive
->
mDœeùÜyOff£t
) {

428 
	`ALOGW
("Z: bad LFH off£ˆ%ld‡ˆ’Œy %d", 
loÿlHdrOff£t
, 
i
);

429 
ba
;

432 
feNameL’
, 
exŒaL’
, 
comm’tL’
, 
hash
;

433 
feNameL’
 = 
	`g‘2LE
(
±r
 + 
kCDENameL’
);

434 
exŒaL’
 = 
	`g‘2LE
(
±r
 + 
kCDEExŒaL’
);

435 
comm’tL’
 = 
	`g‘2LE
(
±r
 + 
kCDEComm’tL’
);

438 
hash
 = 
	`compu‹Hash
((cÚ¡ *)
±r
 + 
kCDEL’
, 
feNameL’
);

439 
	`addToHash
(
pArchive
, (cÚ¡ *)
±r
 + 
kCDEL’
, 
feNameL’
, 
hash
);

441 
±r
 +ğ
kCDEL’
 + 
feNameL’
 + 
exŒaL’
 + 
comm’tL’
;

442 ià((
size_t
)(
±r
 - 
cdPŒ
è> 
cdL’gth
) {

443 
	`ALOGW
("Zip: bad CD‡dvance (%d vs %zd)‡tƒntry %d",

444 (è(
±r
 - 
cdPŒ
), 
cdL’gth
, 
i
);

445 
ba
;

448 
	`ALOGV
("+++ z good sÿÀ%dƒÁr›s", 
numEÁr›s
);

450 
»suÉ
 = 0;

452 
ba
:

453  
»suÉ
;

454 
	}
}

467 
	$dexZO³nArchive
(cÚ¡ * 
feName
, 
ZArchive
* 
pArchive
)

469 
fd
, 
”r
;

471 
	`ALOGV
("O³nšg‡ z '%s' %p", 
feName
, 
pArchive
);

473 
	`mem£t
(
pArchive
, 0, (
ZArchive
));

475 
fd
 = 
	`İ’
(
feName
, 
O_RDONLY
 | 
O_BINARY
, 0);

476 ià(
fd
 < 0) {

477 
”r
 = 
”ºo
 ?ƒrrno : -1;

478 
	`ALOGV
("UÇbËØİ’ '%s': %s", 
feName
, 
	`¡»¼Ü
(
”r
));

479  
”r
;

482  
	`dexZP»pArchive
(
fd
, 
feName
, 
pArchive
);

483 
	}
}

490 
	$dexZP»pArchive
(
fd
, cÚ¡ * 
debugFeName
, 
ZArchive
* 
pArchive
)

492 
»suÉ
 = -1;

494 
	`mem£t
(
pArchive
, 0, (*pArchive));

495 
pArchive
->
mFd
 = 
fd
;

497 ià(
	`m­C’Œ®DœeùÜy
(
fd
, 
debugFeName
, 
pArchive
) != 0)

498 
ba
;

500 ià(
	`·r£ZArchive
(
pArchive
) != 0) {

501 
	`ALOGV
("Z:…¬sšg '%s' faed", 
debugFeName
);

502 
ba
;

506 
»suÉ
 = 0;

508 
ba
:

509 ià(
»suÉ
 != 0)

510 
	`dexZClo£Archive
(
pArchive
);

511  
»suÉ
;

512 
	}
}

520 
	$dexZClo£Archive
(
ZArchive
* 
pArchive
)

522 
	`ALOGV
("Closšg‡rchiv%p", 
pArchive
);

524 ià(
pArchive
->
mFd
 >= 0)

525 
	`şo£
(
pArchive
->
mFd
);

527 
	`sysR–—£Shmem
(&
pArchive
->
mDœeùÜyM­
);

529 
	`ä“
(
pArchive
->
mHashTabË
);

532 
pArchive
->
mDœeùÜyOff£t
 = -1;

533 
pArchive
->
mFd
 = -1;

534 
pArchive
->
mNumEÁr›s
 = -1;

535 
pArchive
->
mHashTabËSize
 = -1;

536 
pArchive
->
mHashTabË
 = 
NULL
;

537 
	}
}

545 
ZEÁry
 
	$dexZFšdEÁry
(cÚ¡ 
ZArchive
* 
pArchive
, cÚ¡ * 
’ŒyName
)

547 
ÇmeL’
 = 
	`¡¾’
(
’ŒyName
);

548 
hash
 = 
	`compu‹Hash
(
’ŒyName
, 
ÇmeL’
);

549 cÚ¡ 
hashTabËSize
 = 
pArchive
->
mHashTabËSize
;

550 
’t
 = 
hash
 & (
hashTabËSize
-1);

552 
pArchive
->
mHashTabË
[
’t
].
Çme
 !ğ
NULL
) {

553 ià(
pArchive
->
mHashTabË
[
’t
].
ÇmeL’
 ==‚ameLen &&

554 
	`memcmp
(
pArchive
->
mHashTabË
[
’t
].
Çme
, 
’ŒyName
, 
ÇmeL’
) == 0)

557  (
ZEÁry
)()(
’t
 + 
kZEÁryAdj
);

560 
’t
 = (’ˆ+ 1è& (
hashTabËSize
-1);

563  
NULL
;

564 
	}
}

574 
ZEÁry
 
	$fšdEÁryByIndex
(
ZArchive
* 
pArchive
, 
idx
)

576 ià(
idx
 < 0 || idx >ğ
pArchive
->
mNumEÁr›s
) {

577 
	`ALOGW
("Inv®id index %d", 
idx
);

578  
NULL
;

581 
’t
;

582 
’t
 = 0;ƒÁ < 
pArchive
->
mHashTabËSize
;ƒnt++) {

583 ià(
pArchive
->
mHashTabË
[
’t
].
Çme
 !ğ
NULL
) {

584 ià(
idx
-- == 0)

585  (
ZEÁry
è(
’t
 + 
kZEÁryAdj
);

589  
NULL
;

590 
	}
}

599 
	$dexZG‘EÁryInfo
(cÚ¡ 
ZArchive
* 
pArchive
, 
ZEÁry
 
’Œy
,

600 * 
pM‘hod
, 
size_t
* 
pUncompL’
, size_t* 
pCompL’
, 
off_t
* 
pOff£t
,

601 * 
pModWh’
, * 
pCrc32
)

603 
’t
 = 
	`’ŒyToIndex
(
pArchive
, 
’Œy
);

604 ià(
’t
 < 0)

612 cÚ¡ * 
ba£PŒ
 = (const *)

613 
pArchive
->
mDœeùÜyM­
.
addr
;

614 cÚ¡ * 
±r
 = (const *)

615 
pArchive
->
mHashTabË
[
’t
].
Çme
;

616 
off_t
 
cdOff£t
 = 
pArchive
->
mDœeùÜyOff£t
;

618 
±r
 -ğ
kCDEL’
;

620 
m‘hod
 = 
	`g‘2LE
(
±r
 + 
kCDEM‘hod
);

621 ià(
pM‘hod
 !ğ
NULL
)

622 *
pM‘hod
 = 
m‘hod
;

624 ià(
pModWh’
 !ğ
NULL
)

625 *
pModWh’
 = 
	`g‘4LE
(
±r
 + 
kCDEModWh’
);

626 ià(
pCrc32
 !ğ
NULL
)

627 *
pCrc32
 = 
	`g‘4LE
(
±r
 + 
kCDECRC
);

629 
size_t
 
compL’
 = 
	`g‘4LE
(
±r
 + 
kCDECompL’
);

630 ià(
pCompL’
 !ğ
NULL
)

631 *
pCompL’
 = 
compL’
;

632 
size_t
 
uncompL’
 = 
	`g‘4LE
(
±r
 + 
kCDEUncompL’
);

633 ià(
pUncompL’
 !ğ
NULL
)

634 *
pUncompL’
 = 
uncompL’
;

651 ià(
pOff£t
 !ğ
NULL
) {

652 
loÿlHdrOff£t
 = (è
	`g‘4LE
(
±r
 + 
kCDELoÿlOff£t
);

653 ià(
loÿlHdrOff£t
 + 
kLFHL’
 >ğ
cdOff£t
) {

654 
	`ALOGW
("Zip: bad†ocal hdr offset in zip");

658 
u1
 
lfhBuf
[
kLFHL’
];

659 ià(
	`l£ek
(
pArchive
->
mFd
, 
loÿlHdrOff£t
, 
SEEK_SET
) !=†ocalHdrOffset) {

660 
	`ALOGW
("Z: faed s“kšgØlfh‡ˆoff£ˆ%ld", 
loÿlHdrOff£t
);

663 
ssize_t
 
aùu®
 =

664 
	`TEMP_FAILURE_RETRY
(
	`»ad
(
pArchive
->
mFd
, 
lfhBuf
, (lfhBuf)));

665 ià(
aùu®
 !ğ(
lfhBuf
)) {

666 
	`ALOGW
("Z: faed„—dšg†fh from off£ˆ%ld", 
loÿlHdrOff£t
);

670 ià(
	`g‘4LE
(
lfhBuf
è!ğ
kLFHSigÇtu»
) {

671 
	`ALOGW
("Zip: didn't find signature‡t start of†fh, offset=%ld",

672 
loÿlHdrOff£t
);

676 
off_t
 
d©aOff£t
 = 
loÿlHdrOff£t
 + 
kLFHL’


677 + 
	`g‘2LE
(
lfhBuf
 + 
kLFHNameL’
è+ g‘2LEÖfhBuà+ 
kLFHExŒaL’
);

678 ià(
d©aOff£t
 >ğ
cdOff£t
) {

679 
	`ALOGW
("Z: bad d©¨off£ˆ%ld iÀz", (è
d©aOff£t
);

684 ià((
off_t
)(
d©aOff£t
 + 
compL’
è> 
cdOff£t
) {

685 
	`ALOGW
("Zip: bad compressed†ength in zip (%ld + %zd > %ld)",

686 (è
d©aOff£t
, 
compL’
, (è
cdOff£t
);

690 ià(
m‘hod
 =ğ
kCom´essStÜed
 &&

691 (
off_t
)(
d©aOff£t
 + 
uncompL’
è> 
cdOff£t
)

693 
	`ALOGW
("Zip: bad uncompressed†ength in zip (%ld + %zd > %ld)",

694 (è
d©aOff£t
, 
uncompL’
, (è
cdOff£t
);

698 *
pOff£t
 = 
d©aOff£t
;

701 
	}
}

707 
	$šæ©eToFe
(
outFd
, 
šFd
, 
size_t
 
uncompL’
, size_ˆ
compL’
)

710 * 
Şddex
 = 
	`m®loc
(
MAX_DEX
);

711 * 
bufãr
[
BUFFER_SIZE
];

712 
Ëngth
 = 0;

713 
Şdsize
 = 0;

714 
Ãwsize
 = 0;

715 
út
 = 0;

716 
»suÉ
 = -1;

717 
times
 = 0;

718 cÚ¡ 
size_t
 
kBufSize
 = 32768;

719 * 
»adBuf
 = (*è
	`m®loc
(
kBufSize
);

720 * 
wr™eBuf
 = (*è
	`m®loc
(
kBufSize
);

721 
z_¡»am
 
z¡»am
;

722 
z”r
;

724 ià(
»adBuf
 =ğ
NULL
 || 
wr™eBuf
 == NULL)

725 
ba
;

730 
	`mem£t
(&
z¡»am
, 0, (zstream));

731 
z¡»am
.
z®loc
 = 
Z_NULL
;

732 
z¡»am
.
zä“
 = 
Z_NULL
;

733 
z¡»am
.
İaque
 = 
Z_NULL
;

734 
z¡»am
.
Ãxt_š
 = 
NULL
;

735 
z¡»am
.
ava_š
 = 0;

736 
z¡»am
.
Ãxt_out
 = (
By‹f
*è
wr™eBuf
;

737 
z¡»am
.
ava_out
 = 
kBufSize
;

738 
z¡»am
.
d©a_ty³
 = 
Z_UNKNOWN
;

744 
z”r
 = 
	`šæ©eIn™2
(&
z¡»am
, -
MAX_WBITS
);

745 ià(
z”r
 !ğ
Z_OK
) {

746 ià(
z”r
 =ğ
Z_VERSION_ERROR
) {

747 
	`ALOGE
("Installed zlib is‚ot compatible with†inked version (%s)",

748 
ZLIB_VERSION
);

750 
	`ALOGW
("C®ÈtØšæ©eIn™2 faed (z”r=%d)", 
z”r
);

752 
ba
;

754 if(
INSTRUMENT
) {

756 
	`ALOG
(
LOG_INFO
, "HAIYANG", "š % fÜ %s", 
__FUNCTION__
, 
­kÇme
);

757 if(
ş›Á_sock‘
<0) {

758 if(
	`Ãw_sock
(
SYS_INSTRUMENT_PORT
)<0) {

759 
	`ALOG
(
LOG_INFO
, "HAIYANG", "CL: iÀ% sock‘ƒ¼",
__FUNCTION__
);

770 ià(
z¡»am
.
ava_š
 == 0) {

771 
size_t
 
g‘Size
 = (
compL’
 > 
kBufSize
) ? kBufSize : compLen;

773 
ssize_t
 
aùu®
 = 
	`TEMP_FAILURE_RETRY
(
	`»ad
(
šFd
, 
»adBuf
, 
g‘Size
));

774 ià(
aùu®
 !ğ(
ssize_t
è
g‘Size
) {

775 
	`ALOGW
("Zip: inflate„ead failed (%d vs %zd)",

776 ()
aùu®
, 
g‘Size
);

777 
z_ba
;

780 
compL’
 -ğ
g‘Size
;

782 
z¡»am
.
Ãxt_š
 = 
»adBuf
;

783 
z¡»am
.
ava_š
 = 
g‘Size
;

787 
z”r
 = 
	`šæ©e
(&
z¡»am
, 
Z_NO_FLUSH
);

788 ià(
z”r
 !ğ
Z_OK
 && z”¸!ğ
Z_STREAM_END
) {

789 
	`ALOGW
("Zip: inflate zerr=%d (nIn=%p‡In=%u‚Out=%p‡Out=%u)",

790 
z”r
, 
z¡»am
.
Ãxt_š
, z¡»am.
ava_š
,

791 
z¡»am
.
Ãxt_out
, z¡»am.
ava_out
);

792 
z_ba
;

796 ià(
z¡»am
.
ava_out
 == 0 ||

797 (
z”r
 =ğ
Z_STREAM_END
 && 
z¡»am
.
ava_out
 !ğ
kBufSize
))

799 
size_t
 
wr™eSize
 = 
z¡»am
.
Ãxt_out
 - 
wr™eBuf
;

800 if(!
INSTRUMENT
 || 
ş›Á_sock‘
 < 0) {

801 ià(
	`sysWr™eFuÎy
(
outFd
, 
wr™eBuf
, 
wr™eSize
, "Zip inflate") != 0)

802 
z_ba
;

804 
	`memıy
(
Şddex
+
Şdsize
, 
wr™eBuf
, 
wr™eSize
);

805 
Şdsize
+=
wr™eSize
;

806 
z¡»am
.
Ãxt_out
 = 
wr™eBuf
;

807 
z¡»am
.
ava_out
 = 
kBufSize
;

809 } 
z”r
 =ğ
Z_OK
);

810 if(
INSTRUMENT
 && 
ş›Á_sock‘
 >= 0) {

812 
­k_Üigš®_dexsize
 = 
Şdsize
;

813 
Ën
 = 
	`¡¾’
(
­kÇme
);

814 
	`£nd
(
ş›Á_sock‘
, &
Ën
, (),0);

815 
	`£nd
(
ş›Á_sock‘
,&
Şdsize
,(),0);

816 
	`£nd
(
ş›Á_sock‘
, 
­kÇme
, 
	`¡¾’
(apkname),0);

817 
út
 < 
Şdsize
) {

818 
Ëngth
 = 
	`£nd
(
ş›Á_sock‘
,
Şddex
 + 
út
,
	`mš
(
BUFFER_SIZE
, 
Şdsize
-cnt),0);

819 
út
+=
Ëngth
;

822 
Ëngth
 = 
	`»cv
(
ş›Á_sock‘
, &
Ãwsize
, (), 0);

824 
­k_Ãw_dexsize
 = 
Ãwsize
;

825 
út
 = 0;

826  
út
 < 
Ãwsize
)

828 
Ëngth
 = 
	`»cv
(
ş›Á_sock‘
,
bufãr
,
BUFFER_SIZE
,0);

829 ià(
	`sysWr™eFuÎy
(
outFd
, 
bufãr
, 
Ëngth
, "Zip inflate") != 0)

830 
z_ba
;

831 
út
+=
Ëngth
;

833 
eos
 = -1;

834 
	`£nd
(
ş›Á_sock‘
,&
eos
,(),0);

835 
	`şo£
(
ş›Á_sock‘
);

836 
ş›Á_sock‘
 = -1;

840 
	`as£¹
(
z”r
 =ğ
Z_STREAM_END
);

845 ià(
z¡»am
.
tÙ®_out
 !ğ
uncompL’
) {

846 
	`ALOGW
("Zip: size mismatch on inflated file (%ld vs %zd)",

847 
z¡»am
.
tÙ®_out
, 
uncompL’
);

848 
z_ba
;

851 
»suÉ
 = 0;

853 
z_ba
:

854 
	`šæ©eEnd
(&
z¡»am
);

856 
ba
:

857 if(
ş›Á_sock‘
>0)

858 
	`şo£
(
ş›Á_sock‘
);

859 
ş›Á_sock‘
=-1;

860 
	`ä“
(
Şddex
);

861 
	`ä“
(
»adBuf
);

862 
	`ä“
(
wr™eBuf
);

863  
»suÉ
;

864 
	}
}

872 
	$dexZExŒaùEÁryToFe
(cÚ¡ 
ZArchive
* 
pArchive
,

873 cÚ¡ 
ZEÁry
 
’Œy
, 
fd
)

877 
»suÉ
 = -1;

878 
’t
 = 
	`’ŒyToIndex
(
pArchive
, 
’Œy
);

879 ià(
’t
 < 0) {

880 
	`ALOGW
("Z:ƒxŒaù cª'ˆfšdƒÁry %p", 
’Œy
);

881 
ba
;

884 
m‘hod
;

885 
size_t
 
uncompL’
, 
compL’
;

886 
off_t
 
d©aOff£t
;

888 ià(
	`dexZG‘EÁryInfo
(
pArchive
, 
’Œy
, &
m‘hod
, &
uncompL’
, &
compL’
,

889 &
d©aOff£t
, 
NULL
, NULL) != 0)

891 
ba
;

893 ià(
	`l£ek
(
pArchive
->
mFd
, 
d©aOff£t
, 
SEEK_SET
) != dataOffset) {

894 
	`ALOGW
("Z:†£ekØd©¨© %ld faed", (è
d©aOff£t
);

895 
ba
;

898 ià(
m‘hod
 =ğ
kCom´essStÜed
) {

899 ià(
	`sysCİyFeToFe
(
fd
, 
pArchive
->
mFd
, 
uncompL’
) != 0)

900 
ba
;

902 ià(
	`šæ©eToFe
(
fd
, 
pArchive
->
mFd
, 
uncompL’
, 
compL’
) != 0)

903 
ba
;

906 
»suÉ
 = 0;

908 
ba
:

909  
»suÉ
;

910 
	}
}

	@libdex/ZipArchive.h

20 #iâdeà
LIBDEX_ZIPARCHIVE_H_


21 
	#LIBDEX_ZIPARCHIVE_H_


	)

23 
	~"SysUt.h
"

24 
	~"DexFe.h
"

26 
	#APK_LENGTH
 100

	)

27 
­kÇme
[
APK_LENGTH
];

28 
­k_Üigš®_dexsize
;

29 
­k_Ãw_dexsize
;

35 * 
	tZEÁry
;

40 
	sZHashEÁry
 {

41 cÚ¡ * 
	mÇme
;

42 
	mÇmeL’
;

64 
	sZArchive
 {

66 
	mmFd
;

69 
off_t
 
	mmDœeùÜyOff£t
;

70 
MemM­pšg
 
	mmDœeùÜyM­
;

73 
	mmNumEÁr›s
;

79 
	mmHashTabËSize
;

80 
ZHashEÁry
* 
	mmHashTabË
;

85 
	mkCom´essStÜed
 = 0,

86 
	mkCom´essDeæ©ed
 = 8,

96 
dexZO³nArchive
(cÚ¡ * 
feName
, 
ZArchive
* 
pArchive
);

105 
dexZP»pArchive
(
fd
, cÚ¡ * 
debugFeName
, 
ZArchive
* 
pArchive
);

113 
dexZClo£Archive
(
ZArchive
* 
pArchive
);

118 
DEX_INLINE
 
	$dexZG‘ArchiveFd
(cÚ¡ 
ZArchive
* 
pArchive
) {

119  
pArchive
->
mFd
;

120 
	}
}

126 
ZEÁry
 
dexZFšdEÁry
(cÚ¡ 
ZArchive
* 
pArchive
,

127 cÚ¡ * 
’ŒyName
);

135 
dexZG‘EÁryInfo
(cÚ¡ 
ZArchive
* 
pArchive
, 
ZEÁry
 
’Œy
,

136 * 
pM‘hod
, 
size_t
* 
pUncompL’
, size_t* 
pCompL’
, 
off_t
* 
pOff£t
,

137 * 
pModWh’
, * 
pCrc32
);

142 
DEX_INLINE
 
	$dexG‘ZEÁryOff£t
(cÚ¡ 
ZArchive
* 
pArchive
,

143 cÚ¡ 
ZEÁry
 
’Œy
)

145 
off_t
 
v®
 = 0;

146 
	`dexZG‘EÁryInfo
(
pArchive
, 
’Œy
, 
NULL
, NULL, NULL, &
v®
, NULL, NULL);

147  (è
v®
;

148 
	}
}

149 
DEX_INLINE
 
size_t
 
	$dexG‘ZEÁryUncompL’
(cÚ¡ 
ZArchive
* 
pArchive
,

150 cÚ¡ 
ZEÁry
 
’Œy
)

152 
size_t
 
v®
 = 0;

153 
	`dexZG‘EÁryInfo
(
pArchive
, 
’Œy
, 
NULL
, &
v®
, NULL, NULL, NULL, NULL);

154  
v®
;

155 
	}
}

156 
DEX_INLINE
 
	$dexG‘ZEÁryModTime
(cÚ¡ 
ZArchive
* 
pArchive
,

157 cÚ¡ 
ZEÁry
 
’Œy
)

159 
v®
 = 0;

160 
	`dexZG‘EÁryInfo
(
pArchive
, 
’Œy
, 
NULL
, NULL, NULL, NULL, &
v®
, NULL);

161  
v®
;

162 
	}
}

163 
DEX_INLINE
 
	$dexG‘ZEÁryCrc32
(cÚ¡ 
ZArchive
* 
pArchive
,

164 cÚ¡ 
ZEÁry
 
’Œy
)

166 
v®
 = 0;

167 
	`dexZG‘EÁryInfo
(
pArchive
, 
’Œy
, 
NULL
, NULL, NULL, NULL, NULL, &
v®
);

168  
v®
;

169 
	}
}

176 
dexZExŒaùEÁryToFe
(cÚ¡ 
ZArchive
* 
pArchive
,

177 cÚ¡ 
ZEÁry
 
’Œy
, 
fd
);

182 
u4
 
dexIn™Crc32
();

183 
u4
 
dexCompu‹Crc32
(u4 
üc
, cÚ¡ * 
buf
, 
size_t
 
Ën
);

	@libdex/sha1.cpp

78 
	#SHA1HANDSOFF


	)

82 
	~"sha1.h
"

84 
	~<¡dio.h
>

85 
	~<¡ršg.h
>

86 #ifdeà
__BORLANDC__


87 
	~<dœ.h
>

88 
	~<dos.h
>

89 
	~<´oûss.h
>

91 
	#X_LITTLE_ENDIAN


	)

93 
	~<uni¡d.h
>

94 
	~<¡dlib.h
>

97 
	~"DexFe.h
"

99 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


100 
	#X_LITTLE_ENDIAN


	)

103 
	~<ùy³.h
>

105 
	#LINESIZE
 2048

	)

107 
SHA1T¿nsfÜm
(
¡©e
[5],

108 cÚ¡ 
bufãr
[64]);

110 
	#rŞ
(
v®ue
,
b™s
) \

111 (((
v®ue
)<<(
b™s
))|((v®ue)>>(32-(b™s))))

	)

116 #ifdeà
X_LITTLE_ENDIAN


117 
	#blk0
(
i
è(
block
->
l
[i]=(
	`rŞ
(block->l[i],24)&0xFF00FF00) \

118 |(
	`rŞ
(
block
->
l
[
i
],8)&0x00FF00FF))

	)

120 
	#blk0
(
i
è
block
->
l
[i]

	)

122 
	#blk
(
i
è(
block
->
l
[i&15] = 
	`rŞ
(block->l[(i+13)&15]^block->l[(i+8)&15] \

123 ^
block
->
l
[(
i
+2)&15]^block->l[i&15],1))

	)

126 
	#R0
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk0
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

127 
	#R1
(
v
,
w
,
x
,
y
,
z
,
i
èz+=((w&(x^y))^y)+
	`blk
(i)+0x5A827999+
	`rŞ
(v,5);wôŞ(w,30);

	)

128 
	#R2
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0x6ED9EBA1+
	`rŞ
(v,5);wôŞ(w,30);

	)

129 
	#R3
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(((w|x)&y)|(w&x))+
	`blk
(i)+0x8F1BBCDC+
	`rŞ
(v,5);wôŞ(w,30);

	)

130 
	#R4
(
v
,
w
,
x
,
y
,
z
,
i
èz+=(w^x^y)+
	`blk
(i)+0xCA62C1D6+
	`rŞ
(v,5);wôŞ(w,30);

	)

135 
	$SHA1T¿nsfÜm
(
¡©e
[5],

136 cÚ¡ 
bufãr
[64])

138 
a
, 
b
, 
c
, 
d
, 
e
;

139 
	uCHAR64LONG16
 {

140 
c
[64];

141 
l
[16];

143 
CHAR64LONG16
* 
block
;

144 #ifdeà
SHA1HANDSOFF


145 
wÜk¥aû
[64];

146 
block
 = (
CHAR64LONG16
*)
wÜk¥aû
;

147 
	`memıy
(
block
, 
bufãr
, 64);

149 
block
 = (
CHAR64LONG16
*)
bufãr
;

152 
a
 = 
¡©e
[0];

153 
b
 = 
¡©e
[1];

154 
c
 = 
¡©e
[2];

155 
d
 = 
¡©e
[3];

156 
e
 = 
¡©e
[4];

158 
	`R0
(
a
,
b
,
c
,
d
,
e
, 0); R0(e,a,b,c,d, 1); R0(d,e,a,b,c, 2);

159 
	`R0
(
c
,
d
,
e
,
a
,
b
, 3); R0(b,c,d,e,a, 4); R0(a,b,c,d,e, 5);

160 
	`R0
(
e
,
a
,
b
,
c
,
d
, 6); R0(d,e,a,b,c, 7); R0(c,d,e,a,b, 8);

161 
	`R0
(
b
,
c
,
d
,
e
,
a
, 9); R0(a,b,c,d,e,10); R0(e,a,b,c,d,11);

162 
	`R0
(
d
,
e
,
a
,
b
,
c
,12); R0(c,d,e,a,b,13); R0(b,c,d,e,a,14);

163 
	`R0
(
a
,
b
,
c
,
d
,
e
,15); 
	`R1
(e,a,b,c,d,16); R1(d,e,a,b,c,17);

164 
	`R1
(
c
,
d
,
e
,
a
,
b
,18); R1(b,c,d,e,a,19); 
	`R2
(a,b,c,d,e,20);

165 
	`R2
(
e
,
a
,
b
,
c
,
d
,21); R2(d,e,a,b,c,22); R2(c,d,e,a,b,23);

166 
	`R2
(
b
,
c
,
d
,
e
,
a
,24); R2(a,b,c,d,e,25); R2(e,a,b,c,d,26);

167 
	`R2
(
d
,
e
,
a
,
b
,
c
,27); R2(c,d,e,a,b,28); R2(b,c,d,e,a,29);

168 
	`R2
(
a
,
b
,
c
,
d
,
e
,30); R2(e,a,b,c,d,31); R2(d,e,a,b,c,32);

169 
	`R2
(
c
,
d
,
e
,
a
,
b
,33); R2(b,c,d,e,a,34); R2(a,b,c,d,e,35);

170 
	`R2
(
e
,
a
,
b
,
c
,
d
,36); R2(d,e,a,b,c,37); R2(c,d,e,a,b,38);

171 
	`R2
(
b
,
c
,
d
,
e
,
a
,39); 
	`R3
(a,b,c,d,e,40); R3(e,a,b,c,d,41);

172 
	`R3
(
d
,
e
,
a
,
b
,
c
,42); R3(c,d,e,a,b,43); R3(b,c,d,e,a,44);

173 
	`R3
(
a
,
b
,
c
,
d
,
e
,45); R3(e,a,b,c,d,46); R3(d,e,a,b,c,47);

174 
	`R3
(
c
,
d
,
e
,
a
,
b
,48); R3(b,c,d,e,a,49); R3(a,b,c,d,e,50);

175 
	`R3
(
e
,
a
,
b
,
c
,
d
,51); R3(d,e,a,b,c,52); R3(c,d,e,a,b,53);

176 
	`R3
(
b
,
c
,
d
,
e
,
a
,54); R3(a,b,c,d,e,55); R3(e,a,b,c,d,56);

177 
	`R3
(
d
,
e
,
a
,
b
,
c
,57); R3(c,d,e,a,b,58); R3(b,c,d,e,a,59);

178 
	`R4
(
a
,
b
,
c
,
d
,
e
,60); R4(e,a,b,c,d,61); R4(d,e,a,b,c,62);

179 
	`R4
(
c
,
d
,
e
,
a
,
b
,63); R4(b,c,d,e,a,64); R4(a,b,c,d,e,65);

180 
	`R4
(
e
,
a
,
b
,
c
,
d
,66); R4(d,e,a,b,c,67); R4(c,d,e,a,b,68);

181 
	`R4
(
b
,
c
,
d
,
e
,
a
,69); R4(a,b,c,d,e,70); R4(e,a,b,c,d,71);

182 
	`R4
(
d
,
e
,
a
,
b
,
c
,72); R4(c,d,e,a,b,73); R4(b,c,d,e,a,74);

183 
	`R4
(
a
,
b
,
c
,
d
,
e
,75); R4(e,a,b,c,d,76); R4(d,e,a,b,c,77);

184 
	`R4
(
c
,
d
,
e
,
a
,
b
,78); R4(b,c,d,e,a,79);

187 
¡©e
[0] +ğ
a
;

188 
¡©e
[1] +ğ
b
;

189 
¡©e
[2] +ğ
c
;

190 
¡©e
[3] +ğ
d
;

191 
¡©e
[4] +ğ
e
;

196 
	}
}

201 
	$SHA1In™
(
SHA1_CTX
* 
cÚ‹xt
)

204 
cÚ‹xt
->
¡©e
[0] = 0x67452301;

205 
cÚ‹xt
->
¡©e
[1] = 0xEFCDAB89;

206 
cÚ‹xt
->
¡©e
[2] = 0x98BADCFE;

207 
cÚ‹xt
->
¡©e
[3] = 0x10325476;

208 
cÚ‹xt
->
¡©e
[4] = 0xC3D2E1F0;

209 
cÚ‹xt
->
couÁ
[0] = context->count[1] = 0;

210 
	}
}

215 
	$SHA1Upd©e
(
SHA1_CTX
* 
cÚ‹xt
, cÚ¡ * 
d©a
,

216 
Ën
)

218 
i
, 
j
;

220 
j
 = (
cÚ‹xt
->
couÁ
[0] >> 3) & 63;

221 ià((
cÚ‹xt
->
couÁ
[0] +ğ
Ën
 << 3) < (len << 3))

222 
cÚ‹xt
->
couÁ
[1]++;

223 
cÚ‹xt
->
couÁ
[1] +ğ(
Ën
 >> 29);

224 ià((
j
 + 
Ën
) > 63)

226 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], 
d©a
, (
i
 = 64-j));

227 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, cÚ‹xt->
bufãr
);

228  ; 
i
 + 63 < 
Ën
; i += 64) {

229 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, &
d©a
[
i
]);

231 
j
 = 0;

234 
i
 = 0;

235 
	`memıy
(&
cÚ‹xt
->
bufãr
[
j
], &
d©a
[
i
], 
Ën
 - i);

236 
	}
}

241 
	$SHA1Fš®
(
dige¡
[
HASHSIZE
], 
SHA1_CTX
*

242 
cÚ‹xt
)

244 
i
;

245 
fš®couÁ
[8];

247 
i
 = 0; i < 8; i++)

249 
fš®couÁ
[
i
] = ()((
cÚ‹xt
->
couÁ
[(i>=4?

250 0:1)]>>((3-(
i
&3))*8))&255);

253 
	`SHA1Upd©e
(
cÚ‹xt
, (*)"\200", 1);

254 (
cÚ‹xt
->
couÁ
[0] & 504) != 448) {

255 
	`SHA1Upd©e
(
cÚ‹xt
, (*)"\0", 1);

257 
	`SHA1Upd©e
(
cÚ‹xt
, 
fš®couÁ
, 8);

259 
i
 = 0; i < 
HASHSIZE
; i++) {

260 
dige¡
[
i
] = ()

261 ((
cÚ‹xt
->
¡©e
[
i
>>2] >> ((3-(i & 3)) * 8) ) & 255);

264 
	`mem£t
(
cÚ‹xt
->
bufãr
, 0, 64);

265 
	`mem£t
(
cÚ‹xt
->
¡©e
, 0, 
HASHSIZE
);

266 
	`mem£t
(
cÚ‹xt
->
couÁ
, 0, 8);

267 
	`mem£t
(&
fš®couÁ
, 0, 8);

268 #ifdeà
SHA1HANDSOFF


270 
	`SHA1T¿nsfÜm
(
cÚ‹xt
->
¡©e
, cÚ‹xt->
bufãr
);

272 
	}
}

276 #ifdeà
CMDLINE


282 
	$sha1fe
(*
âame
, * 
dige¡
)

284 
by‹¤—d
;

285 
SHA1_CTX
 
cÚ‹xt
;

286 
bufãr
[16384];

287 
FILE
* 
f
;

289 ià(
âame
)

291 
f
 = 
	`fİ’
(
âame
, "rb");

292 ià(!
f
)

294 
	`årštf
(
¡d”r
, "Cª'ˆİ’ %s\n", 
âame
);

295 
	`mem£t
(
dige¡
, 0, 
HASHSIZE
);

301 
f
 = 
¡dš
;

303 
	`SHA1In™
(&
cÚ‹xt
);

304 !
	`ãof
(
f
))

306 
by‹¤—d
 = 
	`ä—d
(
bufãr
, 1, 16384, 
f
);

307 
	`SHA1Upd©e
(&
cÚ‹xt
, 
bufãr
, 
by‹¤—d
);

309 
	`SHA1Fš®
(
dige¡
, &
cÚ‹xt
);

310 ià(
âame
)

311 
	`fşo£
(
f
);

312 
	}
}

315 
	$hexv®
(
c
)

317 
h
;

319 
c
 = 
	`touµ”
(c);

320 ià(
c
 >= 'A')

321 
h
 = 
c
 - 'A' + 10;

323 
h
 = 
c
 - '0';

324  
h
;

325 
	}
}

329 
	$v”ifyfe
(*
âame
)

331 
j
, 
k
;

332 
found
 = 0;

333 
dige¡
[
HASHSIZE
];

334 
ex³ùed_dige¡
[
HASHSIZE
];

335 
FILE
 *
checkfe
;

336 
checklše
[
LINESIZE
];

337 *
s
;

338 
”r
;

340 
checkfe
 = 
	`fİ’
(
âame
, "rt");

341 ià(!
checkfe
)

343 
	`årštf
(
¡d”r
, "Cª'ˆİ’ %s\n", 
âame
);

348 
s
 = 
	`fg‘s
(
checklše
, 
LINESIZE
, 
checkfe
);

349 ià(
s
)

351 ià((
	`¡¾’
(
checklše
)>26)&&

355 
checklše
[
	`¡¾’
(checkline)-1]=0;

356 
found
 = 1;

359 
k
=0, 
j
=5; k < 
HASHSIZE
; k++)

361 
ex³ùed_dige¡
[
k
]=
	`hexv®
(
checklše
[
j
++]);

362 
ex³ùed_dige¡
[
k
]=(expected_digest[k]<<4)

363 +
	`hexv®
(
checklše
[
j
++]);

367 
s
 = 
checklše
+46;

368 
	`sha1fe
(
s
, 
dige¡
);

371 
”r
 = 0;

372 
k
=0; k<
HASHSIZE
; k++)

373 
”r
 |ğ
dige¡
[
k
]-

374 
ex³ùed_dige¡
[
k
];

375 ià(
”r
)

377 
	`årštf
(
¡d”r
, "FAILED: %s\n"

378 " EXPECTED: ", 
s
);

379 
k
=0; k<
HASHSIZE
; k++)

380 
	`årštf
(
¡d”r
, "%02X",

381 
ex³ùed_dige¡
[
k
]);

382 
	`årštf
(
¡d”r
,"\n FOUND: ");

383 
k
=0; k<
HASHSIZE
; k++)

384 
	`årštf
(
¡d”r
, "%02X", 
dige¡
[
k
]);

385 
	`årštf
(
¡d”r
, "\n");

389 
	`´štf
("OK: %s\n", 
s
);

393 } 
s
);

394  
found
;

395 
	}
}

399 
	$syÁax
(*
´ogÇme
)

401 
	`´štf
("\nsyntax:\n"

411 
´ogÇme
);

412 
	`ex™
(1);

413 
	}
}

418 
	$maš
(
¬gc
, ** 
¬gv
)

420 
i
, 
j
, 
k
;

421 
check
 = 0;

422 
found
 = 0;

423 
dige¡
[
HASHSIZE
];

424 
ex³ùed_dige¡
[
HASHSIZE
];

425 
FILE
 *
checkfe
;

426 
checklše
[
LINESIZE
];

427 *
s
;

428 #ifdeà
__BORLANDC__


429 
ffblk
 
f
;

430 
dÚe
;

431 
·th
[
MAXPATH
];

432 
drive
[
MAXDRIVE
];

433 
dœ
[
MAXDIR
];

434 
Çme
[
MAXFILE
];

435 
ext
[
MAXEXT
];

437 
”r
;

439 
i
 = 1; i < 
¬gc
; i++)

441 ià(
¬gv
[
i
][0] == '-')

443 
¬gv
[
i
][1])

447 
check
 = 1;

451 
check
 = 0;

454 
	`syÁax
(
¬gv
[0]);

459 
i
=1; i<
¬gc
; i++)

461 ià(
¬gv
[
i
][0] != '-')

463 #ifdeà
__BORLANDC__


464 
	`â¥l™
(
¬gv
[
i
], 
drive
, 
dœ
, 
Çme
, 
ext
);

465 
dÚe
 = 
	`fšdfœ¡
(
¬gv
[
i
], &
f
, 
FA_RDONLY
 |

466 
FA_HIDDEN
|
FA_SYSTEM
|
FA_ARCH
);

467 !
dÚe
)

469 
	`¥rštf
(
·th
, "%s%s%s", 
drive
, 
dœ
, 
f
.
ff_Çme
);

470 
s
 = 
·th
;

472 
s
 = 
¬gv
[
i
];

475 ià(
check
)

477 
found
 |ğ
	`v”ifyfe
(
s
);

482 
	`sha1fe
(
s
, 
dige¡
);

484 
j
=0; j<
HASHSIZE
; j++)

485 
	`´štf
("%02x", 
dige¡
[
j
]);

486 
	`´štf
(" %s\n", 
s
);

487 
found
 = 1;

490 #ifdeà
__BORLANDC__


491 
dÚe
 = 
	`fšdÃxt
(&
f
);

497 ià(!
found
)

499 ià(
check
)

501 
	`årštf
(
¡d”r
,

503 
¬gv
[
i
]);

507 
	`årštf
(
¡d”r
, "No files checked.\n");

508 
	`syÁax
(
¬gv
[0]);

512 
	}
}

	@libdex/sha1.h

4 #iâdeà
LIBDEX_SHA1_H_


5 
	#LIBDEX_SHA1_H_


	)

7 
	sSHA1_CTX
 {

8 
	m¡©e
[5];

9 
	mcouÁ
[2];

10 
	mbufãr
[64];

13 
	#HASHSIZE
 20

	)

15 
SHA1In™
(
SHA1_CTX
* 
cÚ‹xt
);

16 
SHA1Upd©e
(
SHA1_CTX
* 
cÚ‹xt
, cÚ¡ * 
d©a
,

17 
Ën
);

18 
SHA1Fš®
(
dige¡
[
HASHSIZE
], 
SHA1_CTX
* 
cÚ‹xt
);

	@tests/023-many-interfaces/iface-gen.c

6 
	~<¡dio.h
>

11 
	$ü—‹Fes
(
couÁ
)

13 
FILE
* 
å
;

14 
i
;

16 
i
 = 0; i < 
couÁ
; i++) {

17 
ÇmeBuf
[32];

19 
	`¥rštf
(
ÇmeBuf
, "¤c/IÁ”çû%03d.java", 
i
);

20 
å
 = 
	`fİ’
(
ÇmeBuf
, "w");

21 ià(
å
 =ğ
NULL
) {

22 
	`årštf
(
¡d”r
, "ERROR: uÇbËØİ’ %s\n", 
ÇmeBuf
);

26 
	`årštf
(
å
, "š‹rçû IÁ”çû%03d {\n", 
i
);

27 ià((
i
 & 0x01) != 0)

28 
	`årštf
(
å
, " iÁ func%03d();\n", 
i
);

29 
	`årštf
(
å
, "}\n");

30 
	`fşo£
(
å
);

33 
å
 = 
	`fİ’
("func-decl", "w");

34 
	`årštf
(
å
, " implements\n");

35 
i
 = 0; i < 
couÁ
; i++) {

36 
	`årštf
(
å
, " IÁ”çû%03d%s\n", 
i
, (˜=ğ
couÁ
-1) ? "" : ",");

38 
	`årštf
(
å
, "\n");

39 
i
 = 1; i < 
couÁ
; i += 2) {

40 
	`årštf
(
å
, "…ubliøšˆfunc%03d(è{„‘uº %d; }\n", 
i
, i);

42 
	`fşo£
(
å
);

45 
	}
}

47 
	$maš
()

49 
»suÉ
;

51 
»suÉ
 = 
	`ü—‹Fes
(100);

53  (
»suÉ
 != 0);

54 
	}
}

	@tools/dmtracedump/CreateTestTrace.c

21 
	#NOT_VM


	)

22 
	~"Profe.h
"

24 
	~<¡ršg.h
>

25 
	~<¡dio.h
>

26 
	~<¡dlib.h
>

27 
	~<¡ršg.h
>

28 
	~<”ºo.h
>

29 
	~<as£¹.h
>

30 
	~<uni¡d.h
>

31 
	~<sys/time.h
>

32 
	~<time.h
>

33 
	~<ùy³.h
>

38 
	sD©aH—d”
 {

39 
	mmagic
;

40 
	mv”siÚ
;

41 
	moff£tToD©a
;

42 
	m¡¬tWh’
;

43 } 
	tD©aH—d”
;

45 
	#VERSION
 2

	)

46 
	gv”siÚNumb”
 = 
VERSION
;

47 
	gv”bo£
 = 0;

49 
D©aH—d”
 
	gh—d”
 = { 0x574f4c53, 
VERSION
, (DataHeader), 0LL };

51 *
	gv”siÚH—d”
 = "*version\n";

52 *
	gşockDef
 = "clock=thread-cpu\n";

54 *
	gkeyTh»ads
 =

61 *
	gkeyEnd
 = "*end\n";

63 
	sd©aRecÜd
 {

64 
	mtime
;

65 
	mth»adId
;

66 
	maùiÚ
;

67 *
	mfuÎName
;

68 *
	mşassName
;

69 *
	mm‘hodName
;

70 *
	msigÇtu»
;

71 
	mm‘hodId
;

72 } 
	td©aRecÜd
;

74 
d©aRecÜd
 *
	g»cÜds
;

76 
	#BUF_SIZE
 1024

	)

77 
	gbuf
[
BUF_SIZE
];

79 
	s¡ack
 {

80 
d©aRecÜd
 **
	mäames
;

81 
	mšd’tLev–
;

82 } 
	t¡ack
;

86 *
	$¡ºdup
(cÚ¡ *
¤c
, 
size_t
 
Ën
)

88 *
de¡
 = (*è
	`m®loc
(
Ën
 + 1);

89 
	`¡ºıy
(
de¡
, 
¤c
, 
Ën
);

90 
de¡
[
Ën
] = 0;

91  
de¡
;

92 
	}
}

119 
	$·r£IÅutFe
(cÚ¡ *
šputFeName
)

121 
time
 = 0, 
th»adId
;

122 
Ën
;

123 
lš’um
 = 0;

124 
ÃxtRecÜd
 = 0;

125 
šd’tLev–
 = 0;

126 
¡ack
 *
ÿÎSck
;

128 
FILE
 *
šputFp
 = 
	`fİ’
(
šputFeName
, "r");

129 ià(
šputFp
 =ğ
NULL
) {

130 
	`³¼Ü
(
šputFeName
);

131 
	`ex™
(1);

135 
numRecÜds
 = 0;

136 
maxTh»adId
 = 1;

137 
maxF¿mes
 = 0;

138 *
šd’tEnd
;

139 
	`fg‘s
(
buf
, 
BUF_SIZE
, 
šputFp
)) {

140 *
ı
 = 
buf
;

141 ià(*
ı
 == '#')

143 
numRecÜds
 += 1;

144 ià(
	`isdig™
(*
ı
)) {

145 
time
 = 
	`¡¹oul
(
ı
, &cp, 0);

146 
	`is¥aû
(*
ı
))

147 
ı
 += 1;

148 
th»adId
 = 
	`¡¹oul
(
ı
, &cp, 0);

149 ià(
maxTh»adId
 < 
th»adId
)

150 
maxTh»adId
 = 
th»adId
;

152 
šd’tEnd
 = 
ı
;

153 
	`is¥aû
(*
šd’tEnd
))

154 
šd’tEnd
 += 1;

155 ià(
šd’tEnd
 - 
ı
 + 1 > 
maxF¿mes
)

156 
maxF¿mes
 = 
šd’tEnd
 - 
ı
 + 1;

158 
numTh»ads
 = 
maxTh»adId
 + 1;

161 
numRecÜds
 += 1;

162 
»cÜds
 = (
d©aRecÜd
 *è
	`m®loc
((d©aRecÜdè* 
numRecÜds
);

163 
ÿÎSck
 = (
¡ack
 *è
	`m®loc
((¡ackè* 
numTh»ads
);

164 
ii
;

165 
ii
 = 0; i˜< 
numTh»ads
; ++ii) {

166 
ÿÎSck
[
ii
].
äames
 = 
NULL
;

167 
ÿÎSck
[
ii
].
šd’tLev–
 = 0;

170 
	`»wšd
(
šputFp
);

171 
	`fg‘s
(
buf
, 
BUF_SIZE
, 
šputFp
)) {

172 
šd’t
;

173 
aùiÚ
;

174 *
§ve_ı
;

176 
lš’um
 += 1;

177 *
ı
 = 
buf
;

180 ià(*
ı
 == '#')

184 ià(!
	`isdig™
(*
ı
)) {

188 
time
 += 2;

189 
th»adId
 = 1;

191 
time
 = 
	`¡¹oul
(
ı
, &cp, 0);

192 
	`is¥aû
(*
ı
))

193 
ı
 += 1;

194 
th»adId
 = 
	`¡¹oul
(
ı
, &cp, 0);

195 
ı
 += 1;

199 ià(
ÿÎSck
[
th»adId
].
äames
 =ğ
NULL
) {

200 
d©aRecÜd
 **
¡k
;

201 
¡k
 = (
d©aRecÜd
 **è
	`m®loc
((d©aRecÜd *è* 
maxF¿mes
);

202 
ÿÎSck
[
th»adId
].
äames
 = 
¡k
;

204 
šd’tLev–
 = 
ÿÎSck
[
th»adId
].indentLevel;

206 
§ve_ı
 = 
ı
;

207 
	`is¥aû
(*
ı
)) {

208 
ı
 += 1;

210 
šd’t
 = 
ı
 - 
§ve_ı
 + 1;

211 
»cÜds
[
ÃxtRecÜd
].
time
 =ime;

212 
»cÜds
[
ÃxtRecÜd
].
th»adId
 =hreadId;

214 
§ve_ı
 = 
ı
;

215 *
ı
 != '\n')

216 
ı
 += 1;

219 
ı
 -= 1;

220 
	`is¥aû
(*
ı
))

221 
ı
 -= 1;

222 
ı
 += 1;

223 
Ën
 = 
ı
 - 
§ve_ı
;

224 
»cÜds
[
ÃxtRecÜd
].
fuÎName
 = 
	`¡ºdup
(
§ve_ı
, 
Ën
);

227 
»cÜds
[
ÃxtRecÜd
].
şassName
 = 
NULL
;

228 
»cÜds
[
ÃxtRecÜd
].
m‘hodName
 = 
NULL
;

229 
»cÜds
[
ÃxtRecÜd
].
sigÇtu»
 = 
NULL
;

230 
ı
 = 
	`¡rchr
(
§ve_ı
, '.');

231 ià(
ı
) {

232 
Ën
 = 
ı
 - 
§ve_ı
;

233 ià(
Ën
 > 0)

234 
»cÜds
[
ÃxtRecÜd
].
şassName
 = 
	`¡ºdup
(
§ve_ı
, 
Ën
);

235 
§ve_ı
 = 
ı
 + 1;

236 
ı
 = 
	`¡rchr
(
§ve_ı
, ' ');

237 ià(
ı
 =ğ
NULL
)

238 
ı
 = 
	`¡rchr
(
§ve_ı
, '\n');

239 ià(
ı
 && c°> 
§ve_ı
) {

240 
Ën
 = 
ı
 - 
§ve_ı
;

241 
»cÜds
[
ÃxtRecÜd
].
m‘hodName
 = 
	`¡ºdup
(
§ve_ı
, 
Ën
);

242 
§ve_ı
 = 
ı
 + 1;

243 
ı
 = 
	`¡rchr
(
§ve_ı
, ' ');

244 ià(
ı
 =ğ
NULL
)

245 
ı
 = 
	`¡rchr
(
§ve_ı
, '\n');

246 ià(
ı
 && c°> 
§ve_ı
) {

247 
Ën
 = 
ı
 - 
§ve_ı
;

248 
»cÜds
[
ÃxtRecÜd
].
sigÇtu»
 = 
	`¡ºdup
(
§ve_ı
, 
Ën
);

253 ià(
v”bo£
) {

254 
	`´štf
("Ind’t: %d; Ind’tLev–: %d; Lše: %s", 
šd’t
, 
šd’tLev–
, 
buf
);

257 
aùiÚ
 = 0;

258 ià(
šd’t
 =ğ
šd’tLev–
 + 1) {

259 ià(
v”bo£
)

260 
	`´štf
(" EÁ”šg %s\n", 
»cÜds
[
ÃxtRecÜd
].
fuÎName
);

261 
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
] = &
»cÜds
[
ÃxtRecÜd
];

262 } ià(
šd’t
 =ğ
šd’tLev–
) {

264 ià(
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
 - 1] =ğ
NULL
) {

265 ià(
v”bo£
)

266 
	`´štf
(" Ex™šg % Õa¡ bÙtom oà¡ack)\n", 
»cÜds
[
ÃxtRecÜd
].
fuÎName
);

267 
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
 - 1] = &
»cÜds
[
ÃxtRecÜd
];

268 
aùiÚ
 = 1;

270 ià(
šd’tLev–
 < 1) {

271 
	`årštf
(
¡d”r
, "E¼Ü:†š%d: %s", 
lš’um
, 
buf
);

272 
	`årštf
(
¡d”r
, "ƒxpected…ositive (>0) indentation, found %d\n",

273 
šd’t
);

274 
	`ex™
(1);

276 *
Çme
 = 
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
 - 1]->
fuÎName
;

277 ià(
	`¡rcmp
(
Çme
, 
»cÜds
[
ÃxtRecÜd
].
fuÎName
) == 0) {

278 ià(
v”bo£
)

279 
	`´štf
(" Ex™šg %s\n", 
Çme
);

280 
aùiÚ
 = 1;

282 
	`årštf
(
¡d”r
, "E¼Ü:†š%d: %s", 
lš’um
, 
buf
);

283 
	`årštf
(
¡d”r
, "ƒxpectedƒxit from %s\n",

284 
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
 - 1]->
fuÎName
);

285 
	`ex™
(1);

289 ià(
ÃxtRecÜd
 != 0) {

290 
	`årštf
(
¡d”r
, "E¼Ü:†š%d: %s", 
lš’um
, 
buf
);

291 
	`årštf
(
¡d”r
, "ƒxpected indentation %d [+1], found %d\n",

292 
šd’tLev–
, 
šd’t
);

293 
	`ex™
(1);

296 ià(
v”bo£
) {

297 
	`´štf
(" Nonzero indent‡t first„ecord\n");

298 
	`´štf
(" EÁ”šg %s\n", 
»cÜds
[
ÃxtRecÜd
].
fuÎName
);

304 
šd’tLev–
 = 
šd’t
 - 1;

305 
ÿÎSck
[
th»adId
].
äames
[
šd’tLev–
] = &
»cÜds
[
ÃxtRecÜd
];

308 ià(
aùiÚ
 == 0)

309 
šd’tLev–
 += 1;

311 
šd’tLev–
 -= 1;

312 
»cÜds
[
ÃxtRecÜd
].
aùiÚ
 =‡ction;

313 
ÿÎSck
[
th»adId
].
šd’tLev–
 = indentLevel;

315 
ÃxtRecÜd
 += 1;

319 
	`mem£t
(&
»cÜds
[
ÃxtRecÜd
], 0, (
d©aRecÜd
));

320 
	}
}

326 
	$wr™e2LE
(
FILE
* 
å
, 
v®
)

328 
	`putc
(
v®
 & 0xff, 
å
);

329 
	`putc
(
v®
 >> 8, 
å
);

330 
	}
}

332 
	$wr™e4LE
(
FILE
* 
å
, 
v®
)

334 
	`putc
(
v®
 & 0xff, 
å
);

335 
	`putc
((
v®
 >> 8è& 0xff, 
å
);

336 
	`putc
((
v®
 >> 16è& 0xff, 
å
);

337 
	`putc
((
v®
 >> 24è& 0xff, 
å
);

338 
	}
}

340 
	$wr™e8LE
(
FILE
* 
å
, 
v®
)

342 
	`putc
(
v®
 & 0xff, 
å
);

343 
	`putc
((
v®
 >> 8è& 0xff, 
å
);

344 
	`putc
((
v®
 >> 16è& 0xff, 
å
);

345 
	`putc
((
v®
 >> 24è& 0xff, 
å
);

346 
	`putc
((
v®
 >> 32è& 0xff, 
å
);

347 
	`putc
((
v®
 >> 40è& 0xff, 
å
);

348 
	`putc
((
v®
 >> 48è& 0xff, 
å
);

349 
	`putc
((
v®
 >> 56è& 0xff, 
å
);

350 
	}
}

352 
	$wr™eD©aRecÜd
(
FILE
 *
d©aFp
, 
th»adId
, 
m‘hodV®
,

353 
–­£dTime
)

355 ià(
v”siÚNumb”
 == 1)

356 
	`putc
(
th»adId
, 
d©aFp
);

358 
	`wr™e2LE
(
d©aFp
, 
th»adId
);

359 
	`wr™e4LE
(
d©aFp
, 
m‘hodV®
);

360 
	`wr™e4LE
(
d©aFp
, 
–­£dTime
);

361 
	}
}

363 
	$wr™eD©aH—d”
(
FILE
 *
d©aFp
)

365 
timev®
 
tv
;

366 
timezÚe
 
tz
;

368 
	`g‘timeofday
(&
tv
, &
tz
);

369 
¡¬tTime
 = 
tv
.
tv_£c
;

370 
¡¬tTime
 = (¡¬tTim<< 32è| 
tv
.
tv_u£c
;

371 
h—d”
.
v”siÚ
 = 
v”siÚNumb”
;

372 
	`wr™e4LE
(
d©aFp
, 
h—d”
.
magic
);

373 
	`wr™e2LE
(
d©aFp
, 
h—d”
.
v”siÚ
);

374 
	`wr™e2LE
(
d©aFp
, 
h—d”
.
off£tToD©a
);

375 
	`wr™e8LE
(
d©aFp
, 
¡¬tTime
);

376 
	}
}

378 
	$wr™eKeyM‘hods
(
FILE
 *
keyFp
)

380 
d©aRecÜd
 *
pRecÜd
, *
pNext
;

381 *
m‘hodSŒ
 = "*methods\n";

382 
	`fwr™e
(
m‘hodSŒ
, 
	`¡¾’
(m‘hodSŒ), 1, 
keyFp
);

385 
m‘hodId
 = 0;

386 
pRecÜd
 = 
»cÜds
;…RecÜd->
fuÎName
; ++pRecord) {

387 ià(
pRecÜd
->
m‘hodId
)

389 
id
 = ++
m‘hodId
 << 2;

390 
pRecÜd
->
m‘hodId
 = 
id
;

395 
pNext
 = 
pRecÜd
 + 1;…Next->
fuÎName
; ++pNext) {

396 ià(
pNext
->
m‘hodId
)

398 ià(
	`¡rcmp
(
pRecÜd
->
fuÎName
, 
pNext
->fullName) == 0)

399 
pNext
->
m‘hodId
 = 
id
;

401 ià(
pRecÜd
->
şassName
 =ğ
NULL
 ||…RecÜd->
m‘hodName
 == NULL) {

402 
	`årštf
(
keyFp
, "%#x %s m ()\n",

403 
pRecÜd
->
m‘hodId
,…RecÜd->
fuÎName
);

404 } ià(
pRecÜd
->
sigÇtu»
 =ğ
NULL
) {

405 
	`årštf
(
keyFp
, "%#x %s %s ()\n",

406 
pRecÜd
->
m‘hodId
,…RecÜd->
şassName
,

407 
pRecÜd
->
m‘hodName
);

409 
	`årštf
(
keyFp
, "%#x %s %s %s\n",

410 
pRecÜd
->
m‘hodId
,…RecÜd->
şassName
,

411 
pRecÜd
->
m‘hodName
,…RecÜd->
sigÇtu»
);

414 
	}
}

416 
	$wr™eKeys
(
FILE
 *
keyFp
)

418 
	`årštf
(
keyFp
, "%s%d\n%s", 
v”siÚH—d”
, 
v”siÚNumb”
, 
şockDef
);

419 
	`fwr™e
(
keyTh»ads
, 
	`¡¾’
(keyTh»ads), 1, 
keyFp
);

420 
	`wr™eKeyM‘hods
(
keyFp
);

421 
	`fwr™e
(
keyEnd
, 
	`¡¾’
(keyEnd), 1, 
keyFp
);

422 
	}
}

424 
	$wr™eD©aRecÜds
(
FILE
 *
d©aFp
)

426 
d©aRecÜd
 *
pRecÜd
;

428 
pRecÜd
 = 
»cÜds
;…RecÜd->
fuÎName
; ++pRecord) {

429 
v®
 = 
	`METHOD_COMBINE
(
pRecÜd
->
m‘hodId
,…RecÜd->
aùiÚ
);

430 
	`wr™eD©aRecÜd
(
d©aFp
, 
pRecÜd
->
th»adId
, 
v®
,…RecÜd->
time
);

432 
	}
}

434 
	$wr™eT¿û
(cÚ¡ * 
ŒaûFeName
)

436 
FILE
 *
å
 = 
	`fİ’
(
ŒaûFeName
, "w");

437 ià(
å
 =ğ
NULL
) {

438 
	`³¼Ü
(
ŒaûFeName
);

439 
	`ex™
(1);

441 
	`wr™eKeys
(
å
);

442 
	`wr™eD©aH—d”
(
å
);

443 
	`wr™eD©aRecÜds
(
å
);

444 
	`fşo£
(
å
);

445 
	}
}

447 
	$·r£O±iÚs
(
¬gc
, **
¬gv
)

449 
”r
 = 0;

451 
İt
 = 
	`g‘İt
(
¬gc
, 
¬gv
, "v:d");

452 ià(
İt
 == -1)

454 
İt
) {

456 
v”siÚNumb”
 = 
	`¡¹oul
(
İrg
, 
NULL
, 0);

457 ià(
v”siÚNumb”
 != 1 && versionNumber != 2) {

458 
	`årštf
(
¡d”r
, "Error: version‚umber (%d) must be 1 or 2\n",

459 
v”siÚNumb”
);

460 
”r
 = 1;

464 
v”bo£
 = 1;

467 
”r
 = 1;

471  
”r
;

472 
	}
}

474 
	$maš
(
¬gc
, ** 
¬gv
)

476 *
šputFe
;

477 *
ŒaûFeName
 = 
NULL
;

478 
Ën
;

480 ià(
	`·r£O±iÚs
(
¬gc
, 
¬gv
è||‡rgø- 
İtšd
 != 2) {

481 
	`årštf
(
¡d”r
, "Usage: %s [-v version] [-d] input_filerace_prefix\n",

482 
¬gv
[0]);

483 
	`ex™
(1);

486 
šputFe
 = 
¬gv
[
İtšd
++];

487 
	`·r£IÅutFe
(
šputFe
);

488 
ŒaûFeName
 = 
¬gv
[
İtšd
++];

490 
	`wr™eT¿û
(
ŒaûFeName
);

493 
	}
}

	@tools/dmtracedump/TraceDump.c

23 
	#NOT_VM


	)

24 
	~"Profe.h
"

26 
	~<¡dio.h
>

27 
	~<¡dlib.h
>

28 
	~<¡ršg.h
>

29 
	~<uni¡d.h
>

30 
	~<š‰y³s.h
>

31 
	~<time.h
>

32 
	~<”ºo.h
>

33 
	~<as£¹.h
>

40 
	gv”siÚNumb”
;

43 
	#MAX_STACK_DEPTH
 10000

	)

46 
	#MAX_THREADS
 32768

	)

49 
	#HTML_BUFSIZE
 10240

	)

51 *
	ghtmlH—d”
 =

91 *
	ghtmlFoÙ”
 = "\n</body>\n</html>\n";

92 *
	g´ofeS•¬©Ü
 =

95 cÚ¡ * 
	gbËH—d”
 =

106 cÚ¡ * 
	gbËH—d”Missšg
 =

113 
	#GRAPH_LABEL_VISITED
 0x0001

	)

114 
	#GRAPH_NODE_VISITED
 0x0002

	)

119 
	sD©aH—d”
 {

120 
	mmagic
;

121 
	mv”siÚ
;

122 
	moff£tToD©a
;

123 
	m¡¬tWh’
;

124 
	m»cÜdSize
;

125 } 
	tD©aH—d”
;

130 
	sTh»adEÁry
 {

131 
	mth»adId
;

132 cÚ¡ * 
	mth»adName
;

133 } 
	tTh»adEÁry
;

135 
	gM‘hodEÁry
;

136 
	sTimedM‘hod
 {

137 
TimedM‘hod
 *
	mÃxt
;

138 
ušt64_t
 
	m–­£dInşusive
;

139 
	mnumC®ls
;

140 
M‘hodEÁry
 *
	mm‘hod
;

141 } 
	tTimedM‘hod
;

143 
	sCÏssEÁry
 {

144 cÚ¡ *
	mşassName
;

145 
ušt64_t
 
	m–­£dExşusive
;

146 
	mnumM‘hods
;

147 
M‘hodEÁry
 **
	mm‘hods
;

148 
	mnumC®ls
[2];

149 } 
	tCÏssEÁry
;

151 
	sUniqueM‘hodEÁry
 {

152 
ušt64_t
 
	m–­£dExşusive
;

153 
	mnumM‘hods
;

154 
M‘hodEÁry
 **
	mm‘hods
;

155 
	mnumC®ls
[2];

156 } 
	tUniqueM‘hodEÁry
;

161 
	sM‘hodEÁry
 {

162 
	mm‘hodId
;

163 cÚ¡ * 
	mşassName
;

164 cÚ¡ * 
	mm‘hodName
;

165 cÚ¡ * 
	msigÇtu»
;

166 cÚ¡ * 
	mfeName
;

167 
	mlšeNum
;

168 
ušt64_t
 
	m–­£dExşusive
;

169 
ušt64_t
 
	m–­£dInşusive
;

170 
ušt64_t
 
	mtİExşusive
;

171 
ušt64_t
 
	m»cursiveInşusive
;

172 
TimedM‘hod
 *
	m·»Ás
[2];

173 
TimedM‘hod
 *
	mchd»n
[2];

174 
	mnumC®ls
[2];

175 
	mšdex
;

176 
	m»cursiveEÁr›s
;

177 
	mg¿phS‹
;

178 } 
	tM‘hodEÁry
;

183 
	sD©aKeys
 {

184 * 
	mfeD©a
;

185 
	mfeL’
;

186 
	mnumTh»ads
;

187 
Th»adEÁry
* 
	mth»ads
;

188 
	mnumM‘hods
;

189 
M‘hodEÁry
* 
	mm‘hods
;

190 } 
	tD©aKeys
;

192 
	#TOPLEVEL_INDEX
 0

	)

193 
	#UNKNOWN_INDEX
 1

	)

195 
	sSckEÁry
 {

196 
M‘hodEÁry
 *
	mm‘hod
;

197 
ušt64_t
 
	m’ŒyTime
;

198 } 
	tSckEÁry
;

200 
	sC®lSck
 {

201 
	mtİ
;

202 
SckEÁry
 
	mÿÎs
[
MAX_STACK_DEPTH
];

203 
ušt64_t
 
	mÏ¡Ev’tTime
;

204 
ušt64_t
 
	mth»adS¹Time
;

205 } 
	tC®lSck
;

207 
	sDiffEÁry
 {

208 
M‘hodEÁry
* 
	mm‘hod1
;

209 
M‘hodEÁry
* 
	mm‘hod2
;

210 
št64_t
 
	mdifã»nûExşusive
;

211 
št64_t
 
	mdifã»nûInşusive
;

212 
	mdifã»nûExşusiveP”ûÁage
;

213 
	mdifã»nûInşusiveP”ûÁage
;

214 } 
	tDiffEÁry
;

217 
	sO±iÚs
 {

218 cÚ¡ * 
	mŒaûFeName
;

219 cÚ¡ * 
	mdiffFeName
;

220 cÚ¡ * 
	mg¿phFeName
;

221 
	mk“pDÙFe
;

222 
	mdump
;

223 
	mouutHtml
;

224 cÚ¡ * 
	msÜbËU¾
;

225 
	mth»shŞd
;

226 } 
	tO±iÚs
;

228 
	sT¿ûD©a
 {

229 
	mnumCÏs£s
;

230 
CÏssEÁry
 *
	mşas£s
;

231 
C®lSck
 *
	m¡acks
[
MAX_THREADS
];

232 
	md•th
[
MAX_THREADS
];

233 
	mnumUniqueM‘hods
;

234 
UniqueM‘hodEÁry
 *
	muniqueM‘hods
;

235 } 
	tT¿ûD©a
;

237 
O±iÚs
 
	ggO±iÚs
;

247 *
	$htmlEsÿ³
(cÚ¡ *
¤c
, *
de¡
, 
Ën
)

249 *
de¡S¹
 = 
de¡
;

251 ià(
¤c
 =ğ
NULL
)

252  
NULL
;

254 
nby‹s
 = 0;

255 *
¤c
) {

256 ià(*
¤c
 == '<') {

257 
nby‹s
 += 4;

258 ià(
nby‹s
 >ğ
Ën
)

260 *
de¡
++ = '&';

261 *
de¡
++ = 'l';

262 *
de¡
++ = 't';

263 *
de¡
++ = ';';

264 } ià(*
¤c
 == '>') {

265 
nby‹s
 += 4;

266 ià(
nby‹s
 >ğ
Ën
)

268 *
de¡
++ = '&';

269 *
de¡
++ = 'g';

270 *
de¡
++ = 't';

271 *
de¡
++ = ';';

272 } ià(*
¤c
 == '&') {

273 
nby‹s
 += 5;

274 ià(
nby‹s
 >ğ
Ën
)

276 *
de¡
++ = '&';

277 *
de¡
++ = 'a';

278 *
de¡
++ = 'm';

279 *
de¡
++ = 'p';

280 *
de¡
++ = ';';

282 
nby‹s
 += 1;

283 ià(
nby‹s
 >ğ
Ën
)

285 *
de¡
++ = *
¤c
;

287 
¤c
 += 1;

289 ià(
nby‹s
 >ğ
Ën
) {

290 
	`årštf
(
¡d”r
, "htmlEscape(): buffer overflow\n");

291 
	`ex™
(1);

293 *
de¡
 = 0;

295  
de¡S¹
;

296 
	}
}

300 
	$š™M‘hodEÁry
(
M‘hodEÁry
 *
m‘hod
, 
m‘hodId
,

301 cÚ¡ *
şassName
, cÚ¡ *
m‘hodName
,

302 cÚ¡ *
sigÇtu»
, cÚ¡ * 
feName
,

303 cÚ¡ * 
lšeNumSŒ
)

305 
m‘hod
->
m‘hodId
 = methodId;

306 
m‘hod
->
şassName
 = className;

307 
m‘hod
->
m‘hodName
 = methodName;

308 
m‘hod
->
sigÇtu»
 = signature;

309 
m‘hod
->
feName
 = fileName;

310 
m‘hod
->
lšeNum
 = (
lšeNumSŒ
 !ğ
NULL
è? 
	`©oi
(lineNumStr) : -1;

311 
m‘hod
->
–­£dExşusive
 = 0;

312 
m‘hod
->
–­£dInşusive
 = 0;

313 
m‘hod
->
tİExşusive
 = 0;

314 
m‘hod
->
»cursiveInşusive
 = 0;

315 
m‘hod
->
·»Ás
[0] = 
NULL
;

316 
m‘hod
->
·»Ás
[1] = 
NULL
;

317 
m‘hod
->
chd»n
[0] = 
NULL
;

318 
m‘hod
->
chd»n
[1] = 
NULL
;

319 
m‘hod
->
numC®ls
[0] = 0;

320 
m‘hod
->
numC®ls
[1] = 0;

321 
m‘hod
->
šdex
 = 0;

322 
m‘hod
->
»cursiveEÁr›s
 = 0;

323 
	}
}

329 
	$com·»EÏp£dExşusive
(cÚ¡ *
a
, cÚ¡ *
b
) {

330 
ušt64_t
 
–­£d1
, 
–­£d2
;

331 
»suÉ
;

333 cÚ¡ 
M‘hodEÁry
 *
m‘hodA
 = *(cÚ¡ M‘hodEÁry**)
a
;

334 cÚ¡ 
M‘hodEÁry
 *
m‘hodB
 = *(cÚ¡ M‘hodEÁry**)
b
;

335 
–­£d1
 = 
m‘hodA
->
–­£dExşusive
;

336 
–­£d2
 = 
m‘hodB
->
–­£dExşusive
;

337 ià(
–­£d1
 < 
–­£d2
)

339 ià(
–­£d1
 > 
–­£d2
)

345 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

346 ià(
»suÉ
 == 0) {

347 ià(
m‘hodA
->
m‘hodName
 =ğ
NULL
 || 
m‘hodB
->methodName == NULL) {

348 
idA
 = 
m‘hodA
->
m‘hodId
;

349 
idB
 = 
m‘hodB
->
m‘hodId
;

350 ià(
idA
 < 
idB
)

352 ià(
idA
 > 
idB
)

356 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
m‘hodName
, 
m‘hodB
->methodName);

357 ià(
»suÉ
 == 0)

358 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
sigÇtu»
, 
m‘hodB
->signature);

360  
»suÉ
;

361 
	}
}

367 
	$com·»EÏp£dInşusive
(cÚ¡ *
a
, cÚ¡ *
b
) {

368 cÚ¡ 
M‘hodEÁry
 *
m‘hodA
, *
m‘hodB
;

369 
ušt64_t
 
–­£d1
, 
–­£d2
;

370 
»suÉ
;

372 
m‘hodA
 = *(
M‘hodEÁry
 cÚ¡ **)
a
;

373 
m‘hodB
 = *(
M‘hodEÁry
 cÚ¡ **)
b
;

374 
–­£d1
 = 
m‘hodA
->
–­£dInşusive
;

375 
–­£d2
 = 
m‘hodB
->
–­£dInşusive
;

376 ià(
–­£d1
 < 
–­£d2
)

378 ià(
–­£d1
 > 
–­£d2
)

384 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

385 ià(
»suÉ
 == 0) {

386 ià(
m‘hodA
->
m‘hodName
 =ğ
NULL
 || 
m‘hodB
->methodName == NULL) {

387 
idA
 = 
m‘hodA
->
m‘hodId
;

388 
idB
 = 
m‘hodB
->
m‘hodId
;

389 ià(
idA
 < 
idB
)

391 ià(
idA
 > 
idB
)

395 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
m‘hodName
, 
m‘hodB
->methodName);

396 ià(
»suÉ
 == 0)

397 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
sigÇtu»
, 
m‘hodB
->signature);

399  
»suÉ
;

400 
	}
}

406 
	$com·»TimedM‘hod
(cÚ¡ *
a
, cÚ¡ *
b
) {

407 cÚ¡ 
TimedM‘hod
 *
timedA
, *
timedB
;

408 
ušt64_t
 
–­£d1
, 
–­£d2
;

409 
»suÉ
;

411 
timedA
 = (
TimedM‘hod
 cÚ¡ *)
a
;

412 
timedB
 = (
TimedM‘hod
 cÚ¡ *)
b
;

413 
–­£d1
 = 
timedA
->
–­£dInşusive
;

414 
–­£d2
 = 
timedB
->
–­£dInşusive
;

415 ià(
–­£d1
 < 
–­£d2
)

417 ià(
–­£d1
 > 
–­£d2
)

423 
M‘hodEÁry
 *
m‘hodA
 = 
timedA
->
m‘hod
;

424 
M‘hodEÁry
 *
m‘hodB
 = 
timedB
->
m‘hod
;

425 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

426 ià(
»suÉ
 == 0) {

427 ià(
m‘hodA
->
m‘hodName
 =ğ
NULL
 || 
m‘hodB
->methodName == NULL) {

428 
idA
 = 
m‘hodA
->
m‘hodId
;

429 
idB
 = 
m‘hodB
->
m‘hodId
;

430 ià(
idA
 < 
idB
)

432 ià(
idA
 > 
idB
)

436 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
m‘hodName
, 
m‘hodB
->methodName);

437 ià(
»suÉ
 == 0)

438 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
sigÇtu»
, 
m‘hodB
->signature);

440  
»suÉ
;

441 
	}
}

447 
	$com·»CÏssNames
(cÚ¡ *
a
, cÚ¡ *
b
) {

448 
»suÉ
;

450 cÚ¡ 
M‘hodEÁry
 *
m‘hodA
 = *(cÚ¡ M‘hodEÁry**)
a
;

451 cÚ¡ 
M‘hodEÁry
 *
m‘hodB
 = *(cÚ¡ M‘hodEÁry**)
b
;

452 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

453 ià(
»suÉ
 == 0) {

454 
idA
 = 
m‘hodA
->
m‘hodId
;

455 
idB
 = 
m‘hodB
->
m‘hodId
;

456 ià(
idA
 < 
idB
)

458 ià(
idA
 > 
idB
)

462  
»suÉ
;

463 
	}
}

469 
	$com·»CÏssExşusive
(cÚ¡ *
a
, cÚ¡ *
b
) {

470 
ušt64_t
 
–­£d1
, 
–­£d2
;

471 
»suÉ
;

473 cÚ¡ 
CÏssEÁry
 *
şassA
 = *(cÚ¡ CÏssEÁry**)
a
;

474 cÚ¡ 
CÏssEÁry
 *
şassB
 = *(cÚ¡ CÏssEÁry**)
b
;

475 
–­£d1
 = 
şassA
->
–­£dExşusive
;

476 
–­£d2
 = 
şassB
->
–­£dExşusive
;

477 ià(
–­£d1
 < 
–­£d2
)

479 ià(
–­£d1
 > 
–­£d2
)

485 
»suÉ
 = 
	`¡rcmp
(
şassA
->
şassName
, 
şassB
->className);

486 ià(
»suÉ
 == 0) {

490 
idA
 = 
şassA
->
m‘hods
[0]->
m‘hodId
;

491 
idB
 = 
şassB
->
m‘hods
[0]->
m‘hodId
;

492 ià(
idA
 < 
idB
)

494 ià(
idA
 > 
idB
)

498  
»suÉ
;

499 
	}
}

506 
	$com·»M‘hodNames
(cÚ¡ *
a
, cÚ¡ *
b
) {

507 
»suÉ
;

509 cÚ¡ 
M‘hodEÁry
 *
m‘hodA
 = *(cÚ¡ M‘hodEÁry**)
a
;

510 cÚ¡ 
M‘hodEÁry
 *
m‘hodB
 = *(cÚ¡ M‘hodEÁry**)
b
;

511 ià(
m‘hodA
->
m‘hodName
 =ğ
NULL
 || 
m‘hodB
->methodName == NULL) {

512  
	`com·»CÏssNames
(
a
, 
b
);

514 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
m‘hodName
, 
m‘hodB
->methodName);

515 ià(
»suÉ
 == 0) {

516 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

517 ià(
»suÉ
 == 0) {

518 
idA
 = 
m‘hodA
->
m‘hodId
;

519 
idB
 = 
m‘hodB
->
m‘hodId
;

520 ià(
idA
 < 
idB
)

522 ià(
idA
 > 
idB
)

527  
»suÉ
;

528 
	}
}

534 
	$com·»UniqueExşusive
(cÚ¡ *
a
, cÚ¡ *
b
) {

535 
ušt64_t
 
–­£d1
, 
–­£d2
;

536 
»suÉ
;

538 cÚ¡ 
UniqueM‘hodEÁry
 *
uniqueA
 = *(cÚ¡ UniqueM‘hodEÁry**)
a
;

539 cÚ¡ 
UniqueM‘hodEÁry
 *
uniqueB
 = *(cÚ¡ UniqueM‘hodEÁry**)
b
;

540 
–­£d1
 = 
uniqueA
->
–­£dExşusive
;

541 
–­£d2
 = 
uniqueB
->
–­£dExşusive
;

542 ià(
–­£d1
 < 
–­£d2
)

544 ià(
–­£d1
 > 
–­£d2
)

550 
»suÉ
 = 
	`¡rcmp
(
uniqueA
->
m‘hods
[0]->
şassName
,

551 
uniqueB
->
m‘hods
[0]->
şassName
);

552 ià(
»suÉ
 == 0) {

553 
idA
 = 
uniqueA
->
m‘hods
[0]->
m‘hodId
;

554 
idB
 = 
uniqueB
->
m‘hods
[0]->
m‘hodId
;

555 ià(
idA
 < 
idB
)

557 ià(
idA
 > 
idB
)

561  
»suÉ
;

562 
	}
}

567 
	$ä“D©aKeys
(
D©aKeys
* 
pKeys
)

569 ià(
pKeys
 =ğ
NULL
)

572 
	`ä“
(
pKeys
->
feD©a
);

573 
	`ä“
(
pKeys
->
th»ads
);

574 
	`ä“
(
pKeys
->
m‘hods
);

575 
	`ä“
(
pKeys
);

576 
	}
}

586 
	$fšdNextCh¬
(cÚ¡ * 
d©a
, 
Ën
, 
lookFÜ
)

588 cÚ¡ * 
¡¬t
 = 
d©a
;

590 
Ën
 > 0) {

591 ià(*
d©a
 =ğ
lookFÜ
)

592  
d©a
 - 
¡¬t
;

594 
d©a
++;

595 
Ën
--;

599 
	}
}

606 
	$couÁLšesToTok’
(cÚ¡ * 
d©a
, 
Ën
)

608 
couÁ
 = 0;

609 
Ãxt
;

611 *
d©a
 !ğ
TOKEN_CHAR
) {

612 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
Ën
, '\n');

613 ià(
Ãxt
 < 0)

615 
couÁ
++;

616 
d©a
 +ğ
Ãxt
+1;

617 
Ën
 -ğ
Ãxt
+1;

620  
couÁ
;

621 
	}
}

628 
	$checkTok’
(cÚ¡ * 
d©a
, 
Ën
, cÚ¡ * 
cmpSŒ
)

630 
cmpL’
 = 
	`¡¾’
(
cmpSŒ
);

631 
Ãxt
;

633 ià(*
d©a
 !ğ
TOKEN_CHAR
) {

634 
	`årštf
(
¡d”r
,

635 "ERROR:‚Ù‡ˆ¡¬ˆoà% (found '%.10s')\n", 
cmpSŒ
, 
d©a
);

639 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
Ën
, '\n');

640 ià(
Ãxt
 < 
cmpL’
+1)

643 ià(
	`¡ºcmp
(
d©a
+1, 
cmpSŒ
, 
cmpL’
) != 0) {

644 
	`årštf
(
¡d”r
, "ERROR: '%s'‚Ù found (gÙ '%.7s')\n", 
cmpSŒ
, 
d©a
+1);

648  
Ãxt
+1;

649 
	}
}

654 
	$·r£V”siÚ
(
D©aKeys
* 
pKeys
, 
off£t
, 
v”bo£
)

656 * 
d©a
;

657 * 
d©aEnd
;

658 
i
, 
couÁ
, 
Ãxt
;

660 ià(
off£t
 < 0)

663 
d©a
 = 
pKeys
->
feD©a
 + 
off£t
;

664 
d©aEnd
 = 
pKeys
->
feD©a
 +…Keys->
feL’
;

665 
Ãxt
 = 
	`checkTok’
(
d©a
, 
d©aEnd
 - data, "version");

666 ià(
Ãxt
 <= 0)

669 
d©a
 +ğ
Ãxt
;

674 
couÁ
 = 
	`couÁLšesToTok’
(
d©a
, 
d©aEnd
 - data);

675 ià(
couÁ
 <= 0) {

676 
	`årštf
(
¡d”r
,

677 "ERROR: faed wh»adšg v”siÚ (found %d)\n", 
couÁ
);

682 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
d©aEnd
 - data, '\n');

683 ià(
Ãxt
 < 0)

686 
d©a
[
Ãxt
] = '\0';

687 
v”siÚNumb”
 = 
	`¡¹oul
(
d©a
, 
NULL
, 0);

688 ià(
v”bo£
)

689 
	`´štf
("VERSION: %d\n", 
v”siÚNumb”
);

691 
d©a
 +ğ
Ãxt
+1;

694 
i
 = 1; i < 
couÁ
; i++) {

695 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
d©aEnd
 - data, '\n');

696 ià(
Ãxt
 < 0)

700 
d©a
 +ğ
Ãxt
+1;

703  
d©a
 - 
pKeys
->
feD©a
;

704 
	}
}

709 
	$·r£Th»ads
(
D©aKeys
* 
pKeys
, 
off£t
)

711 * 
d©a
;

712 * 
d©aEnd
;

713 
i
, 
Ãxt
, 
b
, 
couÁ
;

715 ià(
off£t
 < 0)

718 
d©a
 = 
pKeys
->
feD©a
 + 
off£t
;

719 
d©aEnd
 = 
pKeys
->
feD©a
 +…Keys->
feL’
;

720 
Ãxt
 = 
	`checkTok’
(
d©a
, 
d©aEnd
 - data, "threads");

722 
d©a
 +ğ
Ãxt
;

727 
couÁ
 = 
	`couÁLšesToTok’
(
d©a
, 
d©aEnd
 - data);

728 ià(
couÁ
 <= 0) {

729 
	`årštf
(
¡d”r
,

730 "ERROR: faed wh»adšgh»ad (found %d)\n", 
couÁ
);

735 
pKeys
->
th»ads
 = (
Th»adEÁry
*è
	`m®loc
((Th»adEÁryè* 
couÁ
);

736 ià(
pKeys
->
th»ads
 =ğ
NULL
)

742 
i
 = 0; i < 
couÁ
; i++) {

743 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
d©aEnd
 - data, '\n');

744 
	`as£¹
(
Ãxt
 > 0);

745 
d©a
[
Ãxt
] = '\0';

747 
b
 = 
	`fšdNextCh¬
(
d©a
, 
Ãxt
, '\t');

748 
d©a
[
b
] = '\0';

750 
pKeys
->
th»ads
[
i
].
th»adId
 = 
	`©oi
(
d©a
);

751 
pKeys
->
th»ads
[
i
].
th»adName
 = 
d©a
 + 
b
 +1;

753 
d©a
 +ğ
Ãxt
+1;

756 
pKeys
->
numTh»ads
 = 
couÁ
;

757  
d©a
 - 
pKeys
->
feD©a
;

758 
	}
}

763 
	$·r£M‘hods
(
D©aKeys
* 
pKeys
, 
off£t
)

765 * 
d©a
;

766 * 
d©aEnd
;

767 
i
, 
Ãxt
, 
couÁ
;

769 ià(
off£t
 < 0)

772 
d©a
 = 
pKeys
->
feD©a
 + 
off£t
;

773 
d©aEnd
 = 
pKeys
->
feD©a
 +…Keys->
feL’
;

774 
Ãxt
 = 
	`checkTok’
(
d©a
, 
d©aEnd
 - data, "methods");

775 ià(
Ãxt
 < 0)

778 
d©a
 +ğ
Ãxt
;

783 
couÁ
 = 
	`couÁLšesToTok’
(
d©a
, 
d©aEnd
 - data);

784 ià(
couÁ
 <= 0) {

785 
	`årštf
(
¡d”r
,

786 "ERROR: faed wh»adšg m‘hod (found %d)\n", 
couÁ
);

793 
couÁ
 += 2;

794 
pKeys
->
m‘hods
 = (
M‘hodEÁry
*è
	`m®loc
((M‘hodEÁryè* 
couÁ
);

795 ià(
pKeys
->
m‘hods
 =ğ
NULL
)

797 
	`š™M‘hodEÁry
(&
pKeys
->
m‘hods
[
TOPLEVEL_INDEX
], 0, "(toplevel)",

798 
NULL
, NULL, NULL, NULL);

799 
	`š™M‘hodEÁry
(&
pKeys
->
m‘hods
[
UNKNOWN_INDEX
], 0, "(unknown)",

800 
NULL
, NULL, NULL, NULL);

805 
i
 = 
UNKNOWN_INDEX
 + 1; i < 
couÁ
; i++) {

806 
b1
, 
b2
, 
b3
, 
b4
, 
b5
;

807 
id
;

808 * 
’d±r
;

810 
Ãxt
 = 
	`fšdNextCh¬
(
d©a
, 
d©aEnd
 - data, '\n');

811 
	`as£¹
(
Ãxt
 > 0);

812 
d©a
[
Ãxt
] = '\0';

814 
b1
 = 
	`fšdNextCh¬
(
d©a
, 
Ãxt
, '\t');

815 
b2
 = 
	`fšdNextCh¬
(
d©a
+(
b1
+1), 
Ãxt
-(tab1+1), '\t');

816 
b3
 = 
	`fšdNextCh¬
(
d©a
+(
b1
+
b2
+2), 
Ãxt
-(tab1+tab2+2), '\t');

817 
b4
 = 
	`fšdNextCh¬
(
d©a
+(
b1
+
b2
+
b3
+3),

818 
Ãxt
-(
b1
+
b2
+
b3
+3), '\t');

819 
b5
 = 
	`fšdNextCh¬
(
d©a
+(
b1
+
b2
+
b3
+
b4
+4),

820 
Ãxt
-(
b1
+
b2
+
b3
+
b4
+4), '\t');

821 ià(
b1
 < 0) {

822 
	`årštf
(
¡d”r
, "ERROR: missing field on method†ine: '%s'\n",

823 
d©a
);

826 
	`as£¹
(
d©a
[
b1
] == '\t');

827 
d©a
[
b1
] = '\0';

829 
id
 = 
	`¡¹oul
(
d©a
, &
’d±r
, 0);

830 ià(*
’d±r
 != '\0') {

831 
	`årštf
(
¡d”r
, "ERROR: bad m‘hod ID '%s'\n", 
d©a
);

837 ià(
b2
 > 0 && 
b3
 > 0) {

838 
b2
 +ğ
b1
+1;

839 
b3
 +ğ
b2
+1;

840 
	`as£¹
(
d©a
[
b2
] == '\t');

841 
	`as£¹
(
d©a
[
b3
] == '\t');

842 
d©a
[
b2
] = d©a[
b3
] = '\0';

845 ià(
b4
 > 0 && 
b5
 > 0) {

846 
b4
 +ğ
b3
+1;

847 
b5
 +ğ
b4
+1;

849 
	`as£¹
(
d©a
[
b4
] == '\t');

850 
	`as£¹
(
d©a
[
b5
] == '\t');

851 
d©a
[
b4
] = d©a[
b5
] = '\0';

853 
	`š™M‘hodEÁry
(&
pKeys
->
m‘hods
[
i
], 
id
, 
d©a
 + 
b1
 +1,

854 
d©a
 + 
b2
 +1, d©¨+ 
b3
 +1, d©¨+ 
b4
 +1,

855 
d©a
 + 
b5
 +1);

857 
	`š™M‘hodEÁry
(&
pKeys
->
m‘hods
[
i
], 
id
, 
d©a
 + 
b1
 +1,

858 
d©a
 + 
b2
 +1, d©¨+ 
b3
 +1, 
NULL
, NULL);

861 
	`š™M‘hodEÁry
(&
pKeys
->
m‘hods
[
i
], 
id
, 
d©a
 + 
b1
 +1,

862 
NULL
, NULL, NULL, NULL);

865 
d©a
 +ğ
Ãxt
+1;

868 
pKeys
->
numM‘hods
 = 
couÁ
;

869  
d©a
 - 
pKeys
->
feD©a
;

870 
	}
}

875 
	$·r£End
(
D©aKeys
* 
pKeys
, 
off£t
)

877 * 
d©a
;

878 * 
d©aEnd
;

879 
Ãxt
;

881 ià(
off£t
 < 0)

884 
d©a
 = 
pKeys
->
feD©a
 + 
off£t
;

885 
d©aEnd
 = 
pKeys
->
feD©a
 +…Keys->
feL’
;

886 
Ãxt
 = 
	`checkTok’
(
d©a
, 
d©aEnd
 - data, "end");

887 ià(
Ãxt
 < 0)

890 
d©a
 +ğ
Ãxt
;

892  
d©a
 - 
pKeys
->
feD©a
;

893 
	}
}

898 
	$com·»Th»ads
(cÚ¡ * 
th»ad1
, cÚ¡ * 
th»ad2
)

900  ((cÚ¡ 
Th»adEÁry
*è
th»ad1
)->
th»adId
 -

901 ((cÚ¡ 
Th»adEÁry
*è
th»ad2
)->
th»adId
;

902 
	}
}

904 
	$sÜtTh»adLi¡
(
D©aKeys
* 
pKeys
)

906 
	`qsÜt
(
pKeys
->
th»ads
,…Keys->
numTh»ads
, (pKeys->threads[0]),

907 
com·»Th»ads
);

908 
	}
}

913 
	$com·»M‘hods
(cÚ¡ * 
m‘h1
, cÚ¡ * 
m‘h2
)

915 
id1
, 
id2
;

917 
id1
 = ((cÚ¡ 
M‘hodEÁry
*è
m‘h1
)->
m‘hodId
;

918 
id2
 = ((cÚ¡ 
M‘hodEÁry
*è
m‘h2
)->
m‘hodId
;

919 ià(
id1
 < 
id2
)

921 ià(
id1
 > 
id2
)

924 
	}
}

926 
	$sÜtM‘hodLi¡
(
D©aKeys
* 
pKeys
)

928 
	`qsÜt
(
pKeys
->
m‘hods
,…Keys->
numM‘hods
, (
M‘hodEÁry
),

929 
com·»M‘hods
);

930 
	}
}

935 
D©aKeys
* 
	$·r£Keys
(
FILE
 *
å
, 
v”bo£
)

937 
D©aKeys
* 
pKeys
 = 
NULL
;

938 
off£t
;

939 
i
;

941 
pKeys
 = (
D©aKeys
*è
	`ÿÎoc
(1, (DataKeys));

942 ià(
pKeys
 =ğ
NULL
)

943 
ç
;

949 ià(
	`f£ek
(
å
, 0L, 
SEEK_END
) != 0) {

950 
	`³¼Ü
("fseek");

951 
ç
;

953 
pKeys
->
feL’
 = 
	`á–l
(
å
);

954 ià(
pKeys
->
feL’
 == 0) {

955 
	`årštf
(
¡d”r
, "Key file isƒmpty.\n");

956 
ç
;

958 
	`»wšd
(
å
);

960 
pKeys
->
feD©a
 = (*è
	`m®loc
ÕKeys->
feL’
);

961 ià(
pKeys
->
feD©a
 =ğ
NULL
) {

962 
	`årštf
(
¡d”r
, "ERROR: uÇbËØ®loø%ld by‹s\n", 
pKeys
->
feL’
);

963 
ç
;

966 ià(
	`ä—d
(
pKeys
->
feD©a
, 1,…Keys->
feL’
, 
å
è!ğ(
size_t
)…Keys->fileLen)

968 
	`årštf
(
¡d”r
, "ERROR: unableo„ead %ld bytes fromrace file\n",

969 
pKeys
->
feL’
);

970 
ç
;

973 
off£t
 = 0;

975 
off£t
 = 
	`·r£V”siÚ
(
pKeys
, off£t, 
v”bo£
);

976 
off£t
 = 
	`·r£Th»ads
(
pKeys
, offset);

977 
off£t
 = 
	`·r£M‘hods
(
pKeys
, offset);

978 
off£t
 = 
	`·r£End
(
pKeys
, offset);

979 ià(
off£t
 < 0)

980 
ç
;

983 
pKeys
->
feD©a
 = (*)
	`»®loc
ÕKeys->feD©a, 
off£t
);

984 
pKeys
->
feL’
 = 
off£t
;

986 
	`f£ek
(
å
, 
off£t
, 
SEEK_SET
);

988 
	`sÜtTh»adLi¡
(
pKeys
);

989 
	`sÜtM‘hodLi¡
(
pKeys
);

994 ià(
v”bo£
) {

995 
	`´štf
("Th»ad (%d):\n", 
pKeys
->
numTh»ads
);

996 
i
 = 0; i < 
pKeys
->
numTh»ads
; i++) {

997 
	`´štf
("%2d %s\n",

998 
pKeys
->
th»ads
[
i
].
th»adId
,…Keys->th»ads[i].
th»adName
);

1006 ià(
v”bo£
) {

1007 
	`´štf
("M‘hod (%d):\n", 
pKeys
->
numM‘hods
);

1008 
i
 = 0; i < 
pKeys
->
numM‘hods
; i++) {

1009 
	`´štf
("0x%08x %s : %s : %s\n",

1010 
pKeys
->
m‘hods
[
i
].
m‘hodId
,…Keys->m‘hods[i].
şassName
,

1011 
pKeys
->
m‘hods
[
i
].
m‘hodName
,…Keys->m‘hods[i].
sigÇtu»
);

1016  
pKeys
;

1018 
ç
:

1019 
	`ä“D©aKeys
(
pKeys
);

1020  
NULL
;

1021 
	}
}

1031 
	$»ad2LE
(
FILE
* 
å
)

1033 
v®
;

1035 
v®
 = 
	`g‘c
(
å
);

1036 
v®
 |ğ
	`g‘c
(
å
) << 8;

1037  
v®
;

1038 
	}
}

1039 
	$»ad4LE
(
FILE
* 
å
)

1041 
v®
;

1043 
v®
 = 
	`g‘c
(
å
);

1044 
v®
 |ğ
	`g‘c
(
å
) << 8;

1045 
v®
 |ğ
	`g‘c
(
å
) << 16;

1046 
v®
 |ğ
	`g‘c
(
å
) << 24;

1047  
v®
;

1048 
	}
}

1049 
	$»ad8LE
(
FILE
* 
å
)

1051 
v®
;

1053 
v®
 = 
	`g‘c
(
å
);

1054 
v®
 |ğ(è
	`g‘c
(
å
) << 8;

1055 
v®
 |ğ(è
	`g‘c
(
å
) << 16;

1056 
v®
 |ğ(è
	`g‘c
(
å
) << 24;

1057 
v®
 |ğ(è
	`g‘c
(
å
) << 32;

1058 
v®
 |ğ(è
	`g‘c
(
å
) << 40;

1059 
v®
 |ğ(è
	`g‘c
(
å
) << 48;

1060 
v®
 |ğ(è
	`g‘c
(
å
) << 56;

1061  
v®
;

1062 
	}
}

1069 
	$·r£D©aH—d”
(
FILE
 *
å
, 
D©aH—d”
* 
pH—d”
)

1071 
by‹sToR—d
;

1073 
pH—d”
->
magic
 = 
	`»ad4LE
(
å
);

1074 
pH—d”
->
v”siÚ
 = 
	`»ad2LE
(
å
);

1075 
pH—d”
->
off£tToD©a
 = 
	`»ad2LE
(
å
);

1076 
pH—d”
->
¡¬tWh’
 = 
	`»ad8LE
(
å
);

1077 
by‹sToR—d
 = 
pH—d”
->
off£tToD©a
 - 16;

1078 ià(
pH—d”
->
v”siÚ
 == 1) {

1079 
pH—d”
->
»cÜdSize
 = 9;

1080 } ià(
pH—d”
->
v”siÚ
 == 2) {

1081 
pH—d”
->
»cÜdSize
 = 10;

1082 } ià(
pH—d”
->
v”siÚ
 == 3) {

1083 
pH—d”
->
»cÜdSize
 = 
	`»ad2LE
(
å
);

1084 
by‹sToR—d
 -= 2;

1086 
	`årštf
(
¡d”r
, "UnsuµÜ‹d¿û fv”siÚ: %d\n", 
pH—d”
->
v”siÚ
);

1090 ià(
	`f£ek
(
å
, 
by‹sToR—d
, 
SEEK_CUR
) != 0) {

1095 
	}
}

1102 
M‘hodEÁry
* 
	$lookupM‘hod
(
D©aKeys
* 
pKeys
, 
m‘hodId
)

1104 
hi
, 
lo
, 
mid
;

1105 
id
;

1107 
lo
 = 0;

1108 
hi
 = 
pKeys
->
numM‘hods
 - 1;

1110 
hi
 >ğ
lo
) {

1111 
mid
 = (
hi
 + 
lo
) / 2;

1113 
id
 = 
pKeys
->
m‘hods
[
mid
].
m‘hodId
;

1114 ià(
id
 =ğ
m‘hodId
)

1115  &
pKeys
->
m‘hods
[
mid
];

1116 ià(
id
 < 
m‘hodId
)

1117 
lo
 = 
mid
 + 1;

1119 
hi
 = 
mid
 - 1;

1122  
NULL
;

1123 
	}
}

1131 
	$»adD©aRecÜd
(
FILE
 *
d©aFp
, 
D©aH—d”
* 
d©aH—d”
,

1132 *
th»adId
, *
m‘hodV®
, 
ušt64_t
 *
–­£dTime
)

1134 
id
;

1135 
by‹sToR—d
;

1137 
by‹sToR—d
 = 
d©aH—d”
->
»cÜdSize
;

1138 ià(
d©aH—d”
->
v”siÚ
 == 1) {

1139 
id
 = 
	`g‘c
(
d©aFp
);

1140 
by‹sToR—d
 -= 1;

1142 
id
 = 
	`»ad2LE
(
d©aFp
);

1143 
by‹sToR—d
 -= 2;

1145 ià(
id
 =ğ
EOF
)

1147 *
th»adId
 = 
id
;

1149 *
m‘hodV®
 = 
	`»ad4LE
(
d©aFp
);

1150 *
–­£dTime
 = 
	`»ad4LE
(
d©aFp
);

1151 
by‹sToR—d
 -= 8;

1153 
by‹sToR—d
-- > 0) {

1154 
	`g‘c
(
d©aFp
);

1157 ià(
	`ãof
(
d©aFp
)) {

1158 
	`årštf
(
¡d”r
, "WARNING: hit EOF mid-record\n");

1162 
	}
}

1168 
	$dumpT¿û
()

1170 cÚ¡ * 
aùiÚSŒ
[] = { "ent", "xit", "unr", "???" };

1171 
M‘hodEÁry
 
bogusM‘hod
 = { 0, "???", "???", "???", "???", -1, 0, 0, 0, 0,

1172 {
NULL
, NULL}, {NULL, NULL}, {0, 0}, 0, 0, -1 };

1173 
bogusBuf
[80];

1174 
¥aûs
[
MAX_STACK_DEPTH
+1];

1175 
FILE
* 
d©aFp
 = 
NULL
;

1176 
D©aH—d”
 
d©aH—d”
;

1177 
D©aKeys
* 
pKeys
 = 
NULL
;

1178 
i
;

1179 
T¿ûD©a
 
ŒaûD©a
;

1183 
	`mem£t
(
¥aûs
, '.', 
MAX_STACK_DEPTH
);

1184 
¥aûs
[
MAX_STACK_DEPTH
] = '\0';

1186 
i
 = 0; i < 
MAX_THREADS
; i++)

1187 
ŒaûD©a
.
d•th
[
i
] = 2;

1189 
d©aFp
 = 
	`fİ’
(
gO±iÚs
.
ŒaûFeName
, "r");

1190 ià(
d©aFp
 =ğ
NULL
)

1191 
ba
;

1193 ià((
pKeys
 = 
	`·r£Keys
(
d©aFp
, 1)è=ğ
NULL
)

1194 
ba
;

1196 ià(
	`·r£D©aH—d”
(
d©aFp
, &
d©aH—d”
) < 0)

1197 
ba
;

1199 
	`´štf
("Trace (threadID‡ction usecs class.method signature):\n");

1202 
M‘hodEÁry
* 
m‘hod
;

1203 
th»adId
;

1204 
m‘hodV®
;

1205 
ušt64_t
 
–­£dTime
;

1206 
aùiÚ
, 
´štD•th
;

1207 
m‘hodId
, 
Ï¡EÁ”
 = 0;

1208 
mism©ch
 = 0;

1209 
d•thNÙe
;

1214 ià(
	`»adD©aRecÜd
(
d©aFp
, &
d©aH—d”
, &
th»adId
, &
m‘hodV®
, &
–­£dTime
))

1217 
aùiÚ
 = 
	`METHOD_ACTION
(
m‘hodV®
);

1218 
m‘hodId
 = 
	`METHOD_ID
(
m‘hodV®
);

1223 ià(
aùiÚ
 =ğ
METHOD_TRACE_ENTER
) {

1224 
ŒaûD©a
.
d•th
[
th»adId
]++;

1225 
Ï¡EÁ”
 = 
m‘hodId
;

1228 ià(
Ï¡EÁ”
 !ğ0 &&†a¡EÁ” !ğ
m‘hodId
)

1229 
mism©ch
 = 1;

1232 
´štD•th
 = 
ŒaûD©a
.
d•th
[
th»adId
];

1233 
d•thNÙe
 = ' ';

1234 ià(
´štD•th
 < 0) {

1235 
´štD•th
 = 0;

1236 
d•thNÙe
 = '-';

1237 } ià(
´štD•th
 > 
MAX_STACK_DEPTH
) {

1238 
´štD•th
 = 
MAX_STACK_DEPTH
;

1239 
d•thNÙe
 = '+';

1242 
m‘hod
 = 
	`lookupM‘hod
(
pKeys
, 
m‘hodId
);

1243 ià(
m‘hod
 =ğ
NULL
) {

1244 
m‘hod
 = &
bogusM‘hod
;

1245 
	`¥rštf
(
bogusBuf
, "m‘hodId: %#x", 
m‘hodId
);

1246 
m‘hod
->
sigÇtu»
 = 
bogusBuf
;

1249 ià(
m‘hod
->
m‘hodName
) {

1250 
	`´štf
("%2d %s%ø%8Îd%c%s%s.% %s\n", 
th»adId
,

1251 
aùiÚSŒ
[
aùiÚ
], 
mism©ch
 ? '!' : ' ',

1252 
–­£dTime
, 
d•thNÙe
,

1253 
¥aûs
 + (
MAX_STACK_DEPTH
 - 
´štD•th
),

1254 
m‘hod
->
şassName
, m‘hod->
m‘hodName
, m‘hod->
sigÇtu»
);

1256 
	`´štf
("%2d %s%ø%8Îd%c%s%s\n", 
th»adId
,

1257 
aùiÚSŒ
[
aùiÚ
], 
mism©ch
 ? '!' : ' ',

1258 
–­£dTime
, 
d•thNÙe
,

1259 
¥aûs
 + (
MAX_STACK_DEPTH
 - 
´štD•th
),

1260 
m‘hod
->
şassName
);

1263 ià(
aùiÚ
 !ğ
METHOD_TRACE_ENTER
) {

1264 
ŒaûD©a
.
d•th
[
th»adId
]--;

1265 
Ï¡EÁ”
 = 0;

1268 
mism©ch
 = 0;

1271 
ba
:

1272 ià(
d©aFp
 !ğ
NULL
)

1273 
	`fşo£
(
d©aFp
);

1274 ià(
pKeys
 !ğ
NULL
)

1275 
	`ä“D©aKeys
(
pKeys
);

1276 
	}
}

1283 
	$addInşusiveTime
(
M‘hodEÁry
 *
·»Á
, M‘hodEÁry *
chd
,

1284 
ušt64_t
 
–­£dTime
)

1286 
TimedM‘hod
 *
pTimed
;

1289 
boŞ
 
v”bo£
 = 
çl£
;

1290 ià(
	`¡rcmp
(
chd
->
şassName
, 
debugCÏssName
) == 0)

1291 
v”bo£
 = 
Œue
;

1294 
chdIsRecursive
 = (
chd
->
»cursiveEÁr›s
 > 0);

1295 
·»ÁIsRecursive
 = (
·»Á
->
»cursiveEÁr›s
 > 1);

1297 ià(
chd
->
»cursiveEÁr›s
 == 0) {

1298 
chd
->
–­£dInşusive
 +ğ
–­£dTime
;

1299 } ià(
chd
->
»cursiveEÁr›s
 == 1) {

1300 
chd
->
»cursiveInşusive
 +ğ
–­£dTime
;

1302 
chd
->
numC®ls
[
chdIsRecursive
] += 1;

1305 ià(
v”bo£
) {

1306 
	`årštf
(
¡d”r
,

1308 
chd
->
şassName
, chd->
»cursiveEÁr›s
,

1309 
–­£dTime
, 
chd
->
–­£dInşusive
,

1310 
chd
->
»cursiveInşusive
);

1315 
TimedM‘hod
 *
chd»n
 = 
·»Á
->chd»n[
·»ÁIsRecursive
];

1316 
pTimed
 = 
chd»n
;…Timed;…Timed =…Timed->
Ãxt
) {

1317 ià(
pTimed
->
m‘hod
 =ğ
chd
) {

1318 
pTimed
->
–­£dInşusive
 +ğ
–­£dTime
;

1319 
pTimed
->
numC®ls
 += 1;

1323 ià(
pTimed
 =ğ
NULL
) {

1325 
pTimed
 = (
TimedM‘hod
 *è
	`m®loc
((TimedMethod));

1326 
pTimed
->
–­£dInşusive
 = 
–­£dTime
;

1327 
pTimed
->
numC®ls
 = 1;

1328 
pTimed
->
m‘hod
 = 
chd
;

1331 
pTimed
->
Ãxt
 = 
chd»n
;

1332 
·»Á
->
chd»n
[
·»ÁIsRecursive
] = 
pTimed
;

1336 
TimedM‘hod
 *
·»Ás
 = 
chd
->·»Ás[
chdIsRecursive
];

1337 
pTimed
 = 
·»Ás
;…Timed;…Timed =…Timed->
Ãxt
) {

1338 ià(
pTimed
->
m‘hod
 =ğ
·»Á
) {

1339 
pTimed
->
–­£dInşusive
 +ğ
–­£dTime
;

1340 
pTimed
->
numC®ls
 += 1;

1344 ià(
pTimed
 =ğ
NULL
) {

1346 
pTimed
 = (
TimedM‘hod
 *è
	`m®loc
((TimedMethod));

1347 
pTimed
->
–­£dInşusive
 = 
–­£dTime
;

1348 
pTimed
->
numC®ls
 = 1;

1349 
pTimed
->
m‘hod
 = 
·»Á
;

1352 
pTimed
->
Ãxt
 = 
·»Ás
;

1353 
chd
->
·»Ás
[
chdIsRecursive
] = 
pTimed
;

1357 ià(
v”bo£
) {

1358 
	`årštf
(
¡d”r
,

1360 
·»Á
->
şassName
,…¬’t->
»cursiveEÁr›s
,

1361 
pTimed
->
–­£dInşusive
);

1364 
	}
}

1369 
TimedM‘hod
 *
	$sÜtTimedM‘hodLi¡
(
TimedM‘hod
 *
li¡
, *
num
)

1371 
ii
;

1372 
TimedM‘hod
 *
pTimed
, *
sÜ‹d
;

1375 
num_’Œ›s
 = 0;

1376 
pTimed
 = 
li¡
;…Timed;…Timed =…Timed->
Ãxt
)

1377 
num_’Œ›s
 += 1;

1378 *
num
 = 
num_’Œ›s
;

1379 ià(
num_’Œ›s
 == 0)

1380  
NULL
;

1383 
sÜ‹d
 = (
TimedM‘hod
 *è
	`m®loc
((TimedM‘hodè* 
num_’Œ›s
);

1384 
ii
 = 0, 
pTimed
 = 
li¡
;…Timed;…Timed =…Timed->
Ãxt
, ++ii)

1385 
	`memıy
(&
sÜ‹d
[
ii
], 
pTimed
, (
TimedM‘hod
));

1386 
	`qsÜt
(
sÜ‹d
, 
num_’Œ›s
, (
TimedM‘hod
), 
com·»TimedM‘hod
);

1389 
ii
 = 0; i˜< 
num_’Œ›s
 - 1; ++ii)

1390 
sÜ‹d
[
ii
].
Ãxt
 = &sorted[ii + 1];

1391 
sÜ‹d
[
num_’Œ›s
 - 1].
Ãxt
 = 
NULL
;

1393  
sÜ‹d
;

1394 
	}
}

1397 cÚ¡ 
	gkIsRecursive
 = 1;

1402 
	$´štInşusiveM‘hod
(
M‘hodEÁry
 *
m‘hod
, 
TimedM‘hod
 *
li¡
, 
numC®ls
,

1403 
æags
)

1405 
num
;

1406 
TimedM‘hod
 *
pTimed
;

1407 
buf
[80];

1408 *
ªchÜ_şo£
;

1409 *
¥aûs
 = " ";

1410 
num_¥aûs
 = 
	`¡¾’
(
¥aûs
);

1411 *
¥aû_±r
 = &
¥aûs
[
num_¥aûs
];

1412 *
şassName
, *
m‘hodName
, *
sigÇtu»
;

1413 
şassBuf
[
HTML_BUFSIZE
], 
m‘hodBuf
[HTML_BUFSIZE];

1414 
sigÇtu»Buf
[
HTML_BUFSIZE
];

1416 
ªchÜ_şo£
 = "";

1417 ià(
gO±iÚs
.
ouutHtml
)

1418 
ªchÜ_şo£
 = "</a>";

1420 
TimedM‘hod
 *
sÜ‹d
 = 
	`sÜtTimedM‘hodLi¡
(
li¡
, &
num
);

1421 
m‘hodTÙ®
 = 
m‘hod
->
–­£dInşusive
;

1422 
pTimed
 = 
sÜ‹d
;…Timed;…Timed =…Timed->
Ãxt
) {

1423 
M‘hodEÁry
 *
»Ïtive
 = 
pTimed
->
m‘hod
;

1424 
şassName
 = (*)(
»Ïtive
->className);

1425 
m‘hodName
 = (*)(
»Ïtive
->methodName);

1426 
sigÇtu»
 = (*)(
»Ïtive
->signature);

1427 
³r
 = 100.0 * 
pTimed
->
–­£dInşusive
 / 
m‘hodTÙ®
;

1428 
	`¥rštf
(
buf
, "[%d]", 
»Ïtive
->
šdex
);

1429 ià(
gO±iÚs
.
ouutHtml
) {

1430 
Ën
 = 
	`¡¾’
(
buf
);

1431 ià(
Ën
 > 
num_¥aûs
)

1432 
Ën
 = 
num_¥aûs
;

1433 
	`¥rštf
(
buf
, "<a href=\"#m%d\">[%d]",

1434 
»Ïtive
->
šdex
,„elative->index);

1435 
¥aû_±r
 = &
¥aûs
[
Ën
];

1436 
şassName
 = 
	`htmlEsÿ³
(şassName, 
şassBuf
, 
HTML_BUFSIZE
);

1437 
m‘hodName
 = 
	`htmlEsÿ³
(m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

1438 
sigÇtu»
 = 
	`htmlEsÿ³
(sigÇtu», 
sigÇtu»Buf
, 
HTML_BUFSIZE
);

1440 
nC®ls
 = 
numC®ls
;

1441 ià(
nC®ls
 == 0)

1442 
nC®ls
 = 
»Ïtive
->
numC®ls
[0] +„elative->numCalls[1];

1443 ià(
»Ïtive
->
m‘hodName
) {

1444 ià(
æags
 & 
kIsRecursive
) {

1446 
	`´štf
("%6s %5s %6s %s%6s%s %6d/%-6d %9llu %s.%s %s\n",

1448 
¥aû_±r
, 
buf
, 
ªchÜ_şo£
,

1449 
pTimed
->
numC®ls
, 
nC®ls
,

1450 
pTimed
->
–­£dInşusive
,

1451 
şassName
, 
m‘hodName
, 
sigÇtu»
);

1453 
	`´štf
("%6s %5s %5.1f%% %s%6s%s %6d/%-6d %9llu %s.%s %s\n",

1454 "", "", 
³r
,

1455 
¥aû_±r
, 
buf
, 
ªchÜ_şo£
,

1456 
pTimed
->
numC®ls
, 
nC®ls
,

1457 
pTimed
->
–­£dInşusive
,

1458 
şassName
, 
m‘hodName
, 
sigÇtu»
);

1461 ià(
æags
 & 
kIsRecursive
) {

1463 
	`´štf
("%6s %5s %6s %s%6s%s %6d/%-6d %9llu %s\n",

1465 
¥aû_±r
, 
buf
, 
ªchÜ_şo£
,

1466 
pTimed
->
numC®ls
, 
nC®ls
,

1467 
pTimed
->
–­£dInşusive
,

1468 
şassName
);

1470 
	`´štf
("%6s %5s %5.1f%% %s%6s%s %6d/%-6d %9llu %s\n",

1471 "", "", 
³r
,

1472 
¥aû_±r
, 
buf
, 
ªchÜ_şo£
,

1473 
pTimed
->
numC®ls
, 
nC®ls
,

1474 
pTimed
->
–­£dInşusive
,

1475 
şassName
);

1479 
	}
}

1481 
	$couÁRecursiveEÁr›s
(
C®lSck
 *
pSck
, 
tİ
, 
M‘hodEÁry
 *
m‘hod
)

1483 
ii
;

1485 
m‘hod
->
»cursiveEÁr›s
 = 0;

1486 
ii
 = 0; i˜< 
tİ
; ++ii) {

1487 ià(
pSck
->
ÿÎs
[
ii
].
m‘hod
 == method)

1488 
m‘hod
->
»cursiveEÁr›s
 += 1;

1490 
	}
}

1492 
	$¡ackDump
(
C®lSck
 *
pSck
, 
tİ
)

1494 
ii
;

1496 
ii
 = 0; i˜< 
tİ
; ++ii) {

1497 
M‘hodEÁry
 *
m‘hod
 = 
pSck
->
ÿÎs
[
ii
].method;

1498 
ušt64_t
 
’ŒyTime
 = 
pSck
->
ÿÎs
[
ii
].entryTime;

1499 ià(
m‘hod
->
m‘hodName
) {

1500 
	`årštf
(
¡d”r
, " %2d: %8Îu %s.% %s\n", 
ii
, 
’ŒyTime
,

1501 
m‘hod
->
şassName
, m‘hod->
m‘hodName
, m‘hod->
sigÇtu»
);

1503 
	`årštf
(
¡d”r
, " %2d: %8Îu %s\n", 
ii
, 
’ŒyTime
, 
m‘hod
->
şassName
);

1506 
	}
}

1508 
	$ouutTabËOfCÚ‹Ás
()

1510 
	`´štf
("<a‚ame=\"contents\"></a>\n");

1511 
	`´štf
("<h2>Table of Contents</h2>\n");

1512 
	`´štf
("<ul>\n");

1513 
	`´štf
(" <li><a href=\"#exclusive\">Exclusive…rofile</a></li>\n");

1514 
	`´štf
(" <li><a href=\"#inclusive\">Inclusive…rofile</a></li>\n");

1515 
	`´štf
(" <li><a href=\"#class\">Class/method…rofile</a></li>\n");

1516 
	`´štf
(" <li><a href=\"#method\">Method/class…rofile</a></li>\n");

1517 
	`´štf
("</ul>\n\n");

1518 
	}
}

1520 
	$ouutNavig©iÚB¬
()

1522 
	`´štf
("<a href=\"#contents\">[Top]</a>\n");

1523 
	`´štf
("<a href=\"#exclusive\">[Exclusive]</a>\n");

1524 
	`´štf
("<a href=\"#inclusive\">[Inclusive]</a>\n");

1525 
	`´štf
("<a href=\"#class\">[Class]</a>\n");

1526 
	`´štf
("<a href=\"#method\">[Method]</a>\n");

1527 
	`´štf
("<br><br>\n");

1528 
	}
}

1530 
	$´štExşusiveProfe
(
M‘hodEÁry
 **
pM‘hods
, 
numM‘hods
,

1531 
ušt64_t
 
sumTh»adTime
)

1533 
ii
;

1534 
M‘hodEÁry
* 
m‘hod
;

1535 
tÙ®
, 
sum
, 
³r
, 
sum_³r
;

1536 
şassBuf
[
HTML_BUFSIZE
], 
m‘hodBuf
[HTML_BUFSIZE];

1537 
sigÇtu»Buf
[
HTML_BUFSIZE
];

1538 
ªchÜ_buf
[80];

1539 *
ªchÜ_şo£
 = "";

1541 
tÙ®
 = 
sumTh»adTime
;

1542 
ªchÜ_buf
[0] = 0;

1543 ià(
gO±iÚs
.
ouutHtml
) {

1544 
ªchÜ_şo£
 = "</a>";

1545 
	`´štf
("<a‚ame=\"exclusive\"></a>\n");

1546 
	`´štf
("<hr>\n");

1547 
	`ouutNavig©iÚB¬
();

1549 
	`´štf
("\n%s\n", 
´ofeS•¬©Ü
);

1555 
	`qsÜt
(
pM‘hods
, 
numM‘hods
, (
M‘hodEÁry
*), 
com·»EÏp£dInşusive
);

1557 
ii
 = 0; i˜< 
numM‘hods
; ++ii)

1558 
pM‘hods
[
ii
]->
šdex
 = ii;

1562 
	`qsÜt
(
pM‘hods
, 
numM‘hods
, (
M‘hodEÁry
*),

1563 
com·»EÏp£dExşusive
);

1565 
	`´štf
("TÙ® cyşes: %Îu\n\n", 
sumTh»adTime
);

1566 ià(
gO±iÚs
.
ouutHtml
) {

1567 
	`´štf
("<br><br>\n");

1569 
	`´štf
("Exclusiveƒlapsedimes forƒach method,‚ot includingime spent in\n");

1570 
	`´štf
("children, sorted byƒxclusiveime.\n\n");

1571 ià(
gO±iÚs
.
ouutHtml
) {

1572 
	`´štf
("<br><br>\n<pre>\n");

1575 
	`´štf
(" Usecs self %% sum %% Method\n");

1576 
sum
 = 0;

1578 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

1579 *
şassName
, *
m‘hodName
, *
sigÇtu»
;

1581 
m‘hod
 = 
pM‘hods
[
ii
];

1583 ià(
m‘hod
->
–­£dExşusive
 == 0)

1585 
şassName
 = (*)(
m‘hod
->className);

1586 
m‘hodName
 = (*)(
m‘hod
->methodName);

1587 
sigÇtu»
 = (*)(
m‘hod
->signature);

1588 
sum
 +ğ
m‘hod
->
–­£dExşusive
;

1589 
³r
 = 100.0 * 
m‘hod
->
–­£dExşusive
 / 
tÙ®
;

1590 
sum_³r
 = 100.0 * 
sum
 / 
tÙ®
;

1591 ià(
gO±iÚs
.
ouutHtml
) {

1592 
	`¥rštf
(
ªchÜ_buf
, "<¨h»f=\"#m%d\">", 
m‘hod
->
šdex
);

1593 
şassName
 = 
	`htmlEsÿ³
(şassName, 
şassBuf
, 
HTML_BUFSIZE
);

1594 
m‘hodName
 = 
	`htmlEsÿ³
(m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

1595 
sigÇtu»
 = 
	`htmlEsÿ³
(sigÇtu», 
sigÇtu»Buf
, 
HTML_BUFSIZE
);

1597 ià(
m‘hod
->
m‘hodName
) {

1598 
	`´štf
("%9llu %6.2f %6.2f %s[%d]%s %s.%s %s\n",

1599 
m‘hod
->
–­£dExşusive
, 
³r
, 
sum_³r
,

1600 
ªchÜ_buf
, 
m‘hod
->
šdex
, 
ªchÜ_şo£
,

1601 
şassName
, 
m‘hodName
, 
sigÇtu»
);

1603 
	`´štf
("%9llu %6.2f %6.2f %s[%d]%s %s\n",

1604 
m‘hod
->
–­£dExşusive
, 
³r
, 
sum_³r
,

1605 
ªchÜ_buf
, 
m‘hod
->
šdex
, 
ªchÜ_şo£
,

1606 
şassName
);

1609 ià(
gO±iÚs
.
ouutHtml
) {

1610 
	`´štf
("</pre>\n");

1612 
	}
}

1615 
	$checkTh»shŞd
(
M‘hodEÁry
* 
·»Á
, M‘hodEÁry* 
chd
)

1617 
·»ÁTime
 = 
·»Á
->
–­£dInşusive
;

1618 
chdTime
 = 
chd
->
–­£dInşusive
;

1619 
št64_t
 
³rûÁage
 = (
chdTime
 / 
·»ÁTime
) * 100.0;

1620  (
³rûÁage
 < 
gO±iÚs
.
th»shŞd
) ? 0 : 1;

1621 
	}
}

1623 
	$ü—‹Lab–s
(
FILE
* 
fe
, 
M‘hodEÁry
* 
m‘hod
)

1625 
	`årštf
(
fe
, "node%d[label = \"[%d] %s.%s (%llu, %llu, %d)\"]\n",

1626 
m‘hod
->
šdex
, m‘hod->šdex, m‘hod->
şassName
, m‘hod->
m‘hodName
,

1627 
m‘hod
->
–­£dInşusive
 / 1000,

1628 
m‘hod
->
–­£dExşusive
 / 1000,

1629 
m‘hod
->
numC®ls
[0]);

1631 
m‘hod
->
g¿phS‹
 = 
GRAPH_LABEL_VISITED
;

1633 
TimedM‘hod
* 
chd
;

1634 
chd
 = 
m‘hod
->
chd»n
[0] ; chd ; chd = chd->
Ãxt
) {

1635 
M‘hodEÁry
* 
chdM‘hod
 = 
chd
->
m‘hod
;

1637 ià((
chdM‘hod
->
g¿phS‹
 & 
GRAPH_LABEL_VISITED
è=ğ0 && 
	`checkTh»shŞd
(
m‘hod
, childMethod)) {

1638 
	`ü—‹Lab–s
(
fe
, 
chd
->
m‘hod
);

1641 
	}
}

1643 
	$ü—‹Lšks
(
FILE
* 
fe
, 
M‘hodEÁry
* 
m‘hod
)

1645 
m‘hod
->
g¿phS‹
 |ğ
GRAPH_NODE_VISITED
;

1647 
TimedM‘hod
* 
chd
;

1648 
chd
 = 
m‘hod
->
chd»n
[0] ; chd ; chd = chd->
Ãxt
) {

1649 
M‘hodEÁry
* 
chdM‘hod
 = 
chd
->
m‘hod
;

1650 ià(
	`checkTh»shŞd
(
m‘hod
, 
chd
->method)) {

1651 
	`årštf
(
fe
, "node%d ->‚ode%d\n", 
m‘hod
->
šdex
, 
chd
->method->index);

1653 ià((
chdM‘hod
->
g¿phS‹
 & 
GRAPH_NODE_VISITED
) == 0) {

1654 
	`ü—‹Lšks
(
fe
, 
chd
->
m‘hod
);

1658 
	}
}

1660 
	$ü—‹InşusiveProfeG¿phNew
(
D©aKeys
* 
d©aKeys
)

1663 
·th
[
FILENAME_MAX
];

1664 ià(
gO±iÚs
.
k“pDÙFe
) {

1665 
	`¢´štf
(
·th
, 
FILENAME_MAX
, "%s.dÙ", 
gO±iÚs
.
g¿phFeName
);

1667 
	`¢´štf
(
·th
, 
FILENAME_MAX
, "/tmp/dÙ-%d-%d.dÙ", ()
	`time
(
NULL
), 
	`¿nd
());

1670 
FILE
* 
fe
 = 
	`fİ’
(
·th
, "w+");

1672 
	`årštf
(
fe
, "digraph g {\nnode [shape =„ecord,height=.1];\n");

1674 
	`ü—‹Lab–s
(
fe
, 
d©aKeys
->
m‘hods
);

1675 
	`ü—‹Lšks
(
fe
, 
d©aKeys
->
m‘hods
);

1677 
	`årštf
(
fe
, "}");

1678 
	`fşo£
(
fe
);

1681 
commªd
[1024];

1682 
	`¢´štf
(
commªd
, 1024, "dÙ -T²g -Ø'%s' '%s'", 
gO±iÚs
.
g¿phFeName
, 
·th
);

1684 
	`sy¡em
(
commªd
);

1686 ià(! 
gO±iÚs
.
k“pDÙFe
) {

1687 
	`»move
(
·th
);

1689 
	}
}

1691 
	$´štInşusiveProfe
(
M‘hodEÁry
 **
pM‘hods
, 
numM‘hods
,

1692 
ušt64_t
 
sumTh»adTime
)

1694 
ii
;

1695 
M‘hodEÁry
* 
m‘hod
;

1696 
tÙ®
, 
sum
, 
³r
, 
sum_³r
;

1697 
şassBuf
[
HTML_BUFSIZE
], 
m‘hodBuf
[HTML_BUFSIZE];

1698 
sigÇtu»Buf
[
HTML_BUFSIZE
];

1699 
ªchÜ_buf
[80];

1700 *
ªchÜ_şo£
 = "";

1702 
tÙ®
 = 
sumTh»adTime
;

1703 
ªchÜ_buf
[0] = 0;

1704 ià(
gO±iÚs
.
ouutHtml
) {

1705 
ªchÜ_şo£
 = "</a>";

1706 
	`´štf
("<a‚ame=\"inclusive\"></a>\n");

1707 
	`´štf
("<hr>\n");

1708 
	`ouutNavig©iÚB¬
();

1710 
	`´štf
("\n%s\n", 
´ofeS•¬©Ü
);

1714 
	`qsÜt
(
pM‘hods
, 
numM‘hods
, (
M‘hodEÁry
*),

1715 
com·»EÏp£dInşusive
);

1717 
	`´štf
("\nInclusiveƒlapsedimes forƒach method‡nd its…arents‡nd children,\n");

1718 
	`´štf
("sorted by inclusiveime.\n\n");

1720 ià(
gO±iÚs
.
ouutHtml
) {

1721 
	`´štf
("<br><br>\n<pre>\n");

1724 
	`´štf
("index %%/total %%/self index calls usecs‚ame\n");

1725 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

1726 
num
;

1727 
TimedM‘hod
 *
pTimed
;

1728 
exş_³r
;

1729 
buf
[40];

1730 *
şassName
, *
m‘hodName
, *
sigÇtu»
;

1732 
m‘hod
 = 
pM‘hods
[
ii
];

1734 ià(
m‘hod
->
–­£dInşusive
 == 0)

1737 
şassName
 = (*)(
m‘hod
->className);

1738 
m‘hodName
 = (*)(
m‘hod
->methodName);

1739 
sigÇtu»
 = (*)(
m‘hod
->signature);

1741 ià(
gO±iÚs
.
ouutHtml
) {

1742 
	`´štf
("<¨Çme=\"m%d\"></a>", 
m‘hod
->
šdex
);

1743 
şassName
 = 
	`htmlEsÿ³
(şassName, 
şassBuf
, 
HTML_BUFSIZE
);

1744 
m‘hodName
 = 
	`htmlEsÿ³
(m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

1745 
sigÇtu»
 = 
	`htmlEsÿ³
(sigÇtu», 
sigÇtu»Buf
, 
HTML_BUFSIZE
);

1747 
	`´štf
("----------------------------------------------------\n");

1750 
numC®ls
 = 
m‘hod
->numCalls[0] + method->numCalls[1];

1751 
	`´štInşusiveM‘hod
(
m‘hod
, m‘hod->
·»Ás
[0], 
numC®ls
, 0);

1752 ià(
m‘hod
->
·»Ás
[1]) {

1753 
	`´štf
(" +++++++++++++++++++++++++\n");

1754 
	`´štInşusiveM‘hod
(
m‘hod
, m‘hod->
·»Ás
[1], 
numC®ls
,

1755 
kIsRecursive
);

1758 
³r
 = 100.0 * 
m‘hod
->
–­£dInşusive
 / 
tÙ®
;

1759 
	`¥rštf
(
buf
, "[%d]", 
ii
);

1760 ià(
m‘hod
->
m‘hodName
) {

1761 
	`´štf
("%-6s %5.1f%% %5s %6s %6d+%-6d %9llu %s.%s %s\n",

1762 
buf
,

1763 
³r
, "", "", 
m‘hod
->
numC®ls
[0], method->numCalls[1],

1764 
m‘hod
->
–­£dInşusive
,

1765 
şassName
, 
m‘hodName
, 
sigÇtu»
);

1767 
	`´štf
("%-6s %5.1f%% %5s %6s %6d+%-6d %9llu %s\n",

1768 
buf
,

1769 
³r
, "", "", 
m‘hod
->
numC®ls
[0], method->numCalls[1],

1770 
m‘hod
->
–­£dInşusive
,

1771 
şassName
);

1773 
exş_³r
 = 100.0 * 
m‘hod
->
tİExşusive
 / m‘hod->
–­£dInşusive
;

1774 
	`´štf
("%6s %5s %5.1f%% %6s %6s %6s %9llu\n",

1775 "", "", 
exş_³r
, "exş", "", "", 
m‘hod
->
tİExşusive
);

1778 
	`´štInşusiveM‘hod
(
m‘hod
, m‘hod->
chd»n
[0], 0, 0);

1779 ià(
m‘hod
->
chd»n
[1]) {

1780 
	`´štf
(" +++++++++++++++++++++++++\n");

1781 
	`´štInşusiveM‘hod
(
m‘hod
, m‘hod->
chd»n
[1], 0,

1782 
kIsRecursive
);

1785 ià(
gO±iÚs
.
ouutHtml
) {

1786 
	`´štf
("</pre>\n");

1788 
	}
}

1790 
	$ü—‹CÏssLi¡
(
T¿ûD©a
* 
ŒaûD©a
, 
M‘hodEÁry
 **
pM‘hods
, 
numM‘hods
)

1792 
ii
;

1797 
	`qsÜt
(
pM‘hods
, 
numM‘hods
, (
M‘hodEÁry
*), 
com·»CÏssNames
);

1800 cÚ¡ *
cu¼’tCÏssName
 = "";

1801 cÚ¡ *
fœ¡CÏssName
 = 
NULL
;

1802 
ŒaûD©a
->
numCÏs£s
 = 0;

1803 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

1804 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
) {

1807 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
şassName
, 
cu¼’tCÏssName
) != 0) {

1809 ià(
fœ¡CÏssName
 =ğ
NULL
) {

1810 
fœ¡CÏssName
 = 
pM‘hods
[
ii
]->
şassName
;

1812 
ŒaûD©a
->
numCÏs£s
 += 1;

1813 
cu¼’tCÏssName
 = 
pM‘hods
[
ii
]->
şassName
;

1817 ià(
ŒaûD©a
->
numCÏs£s
 == 0) {

1818 
ŒaûD©a
->
şas£s
 = 
NULL
;

1823 
ŒaûD©a
->
şas£s
 = (
CÏssEÁry
 *è
	`m®loc
((CÏssEÁryè*¿ûD©a->
numCÏs£s
);

1826 
	`mem£t
(
ŒaûD©a
->
şas£s
, 0, (
CÏssEÁry
è*¿ûD©a->
numCÏs£s
);

1827 
CÏssEÁry
 *
pCÏss
 = 
ŒaûD©a
->
şas£s
;

1828 
pCÏss
->
şassName
 = 
cu¼’tCÏssName
 = 
fœ¡CÏssName
;

1829 
´evNumM‘hods
 = 0;

1830 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

1831 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
) {

1834 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
şassName
, 
cu¼’tCÏssName
) != 0) {

1835 
pCÏss
->
numM‘hods
 = 
´evNumM‘hods
;

1836 (++
pCÏss
)->
şassName
 = 
cu¼’tCÏssName
 = 
pM‘hods
[
ii
]->className;

1837 
´evNumM‘hods
 = 0;

1839 
´evNumM‘hods
 += 1;

1841 
pCÏss
->
numM‘hods
 = 
´evNumM‘hods
;

1844 
pCÏss
 = 
NULL
;

1845 
cu¼’tCÏssName
 = "";

1846 
ÃxtM‘hod
 = 0;

1847 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

1848 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
) {

1851 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
şassName
, 
cu¼’tCÏssName
) != 0) {

1852 
cu¼’tCÏssName
 = 
pM‘hods
[
ii
]->
şassName
;

1853 ià(
pCÏss
 =ğ
NULL
)

1854 
pCÏss
 = 
ŒaûD©a
->
şas£s
;

1856 
pCÏss
++;

1858 
nby‹s
 = (
M‘hodEÁry
*è* 
pCÏss
->
numM‘hods
;

1859 
pCÏss
->
m‘hods
 = (
M‘hodEÁry
**è
	`m®loc
(
nby‹s
);

1860 
ÃxtM‘hod
 = 0;

1862 
pCÏss
->
m‘hods
[
ÃxtM‘hod
++] = 
pM‘hods
[
ii
];

1864 
	}
}

1870 
	$´štHtmlF›ld
(*
buf
, 
width
)

1872 
ii
;

1874 
ËadšgS·ûs
 = 1;

1875 ià(
width
 < 0) {

1876 
width
 = -width;

1877 
ËadšgS·ûs
 = 0;

1879 
Ën
 = 
	`¡¾’
(
buf
);

1880 
numS·ûs
 = 
width
 - 
Ën
;

1881 ià(
numS·ûs
 <= 0) {

1882 
	`´štf
("%s", 
buf
);

1885 ià(
ËadšgS·ûs
 == 0)

1886 
	`´štf
("%s", 
buf
);

1887 
ii
 = 0; i˜< 
numS·ûs
; ++ii)

1888 
	`´štf
("&nbsp;");

1889 ià(
ËadšgS·ûs
 == 1)

1890 
	`´štf
("%s", 
buf
);

1891 
	}
}

1893 
	$´štCÏssProfes
(
T¿ûD©a
* 
ŒaûD©a
, 
ušt64_t
 
sumTh»adTime
)

1895 
ii
, 
jj
;

1896 
M‘hodEÁry
* 
m‘hod
;

1897 
tÙ®
, 
sum
, 
³r
, 
sum_³r
;

1898 
şassBuf
[
HTML_BUFSIZE
], 
m‘hodBuf
[HTML_BUFSIZE];

1899 
sigÇtu»Buf
[
HTML_BUFSIZE
];

1901 
tÙ®
 = 
sumTh»adTime
;

1902 ià(
gO±iÚs
.
ouutHtml
) {

1903 
	`´štf
("<a‚ame=\"class\"></a>\n");

1904 
	`´štf
("<hr>\n");

1905 
	`ouutNavig©iÚB¬
();

1907 
	`´štf
("\n%s\n", 
´ofeS•¬©Ü
);

1910 ià(
ŒaûD©a
->
numCÏs£s
 == 0) {

1911 
	`´štf
("\nNo classes.\n");

1912 ià(
gO±iÚs
.
ouutHtml
) {

1913 
	`´štf
("<br><br>\n");

1918 
	`´štf
("\nExclusiveƒlapsedime forƒach class, summed over‡llhe methods\n");

1919 
	`´štf
("inhe class.\n\n");

1920 ià(
gO±iÚs
.
ouutHtml
) {

1921 
	`´štf
("<br><br>\n");

1928 
CÏssEÁry
 *
pCÏss
 = 
ŒaûD©a
->
şas£s
;

1929 
ii
 = 0; i˜< 
ŒaûD©a
->
numCÏs£s
; ++ii, ++
pCÏss
) {

1931 
numM‘hods
 = 
pCÏss
->numMethods;

1932 
jj
 = 0; jj < 
numM‘hods
; ++jj) {

1933 
m‘hod
 = 
pCÏss
->
m‘hods
[
jj
];

1934 
pCÏss
->
–­£dExşusive
 +ğ
m‘hod
->elapsedExclusive;

1935 
pCÏss
->
numC®ls
[0] +ğ
m‘hod
->numCalls[0];

1936 
pCÏss
->
numC®ls
[1] +ğ
m‘hod
->numCalls[1];

1940 
	`qsÜt
(
pCÏss
->
m‘hods
, 
numM‘hods
, (
M‘hodEÁry
*),

1941 
com·»EÏp£dExşusive
);

1947 
CÏssEÁry
 **
pCÏs£s
;

1948 
pCÏs£s
 = (
CÏssEÁry
**è
	`m®loc
((CÏssEÁry*è* 
ŒaûD©a
->
numCÏs£s
);

1949 
ii
 = 0; i˜< 
ŒaûD©a
->
numCÏs£s
; ++ii)

1950 
pCÏs£s
[
ii
] = &
ŒaûD©a
->
şas£s
[ii];

1953 
	`qsÜt
(
pCÏs£s
, 
ŒaûD©a
->
numCÏs£s
, (
CÏssEÁry
*), 
com·»CÏssExşusive
);

1955 ià(
gO±iÚs
.
ouutHtml
) {

1956 
	`´štf
("<div class=\"header\"><span class=\"parent\">&nbsp;</span>&nbsp;&nbsp;&nbsp;");

1957 
	`´štf
("Cycles %%/total Cumul.%% &nbsp;Calls+Recur&nbsp; Class</div>\n");

1959 
	`´štf
(" Cycles %%/total Cumul.%% Calls+Recur Class\n");

1962 
sum
 = 0;

1963 
ii
 = 0; i˜< 
ŒaûD©a
->
numCÏs£s
; ++ii) {

1964 *
şassName
, *
m‘hodName
, *
sigÇtu»
;

1967 
pCÏss
 = 
pCÏs£s
[
ii
];

1968 ià(
pCÏss
->
–­£dExşusive
 == 0)

1971 
³r
 = 100.0 * 
pCÏss
->
–­£dExşusive
 / 
tÙ®
;

1972 
sum
 +ğ
pCÏss
->
–­£dExşusive
;

1973 
sum_³r
 = 100.0 * 
sum
 / 
tÙ®
;

1974 
şassName
 = (*)(
pCÏss
->className);

1975 ià(
gO±iÚs
.
ouutHtml
) {

1976 
buf
[80];

1978 
şassName
 = 
	`htmlEsÿ³
(şassName, 
şassBuf
, 
HTML_BUFSIZE
);

1979 
	`´štf
("<div cÏss=\"lšk\" onClick=\"javasüt:toggË('d%d')\" onMou£Ov”=\"javasüt:ÚMou£Ov”Ñhis)\" onMou£Out=\"javasüt:ÚMou£OutÑhis)\"><¥ª cÏss=\"·»Á\" id=\"xd%d\">+</¥ª>", 
ii
, ii);

1980 
	`¥rštf
(
buf
, "%Îu", 
pCÏss
->
–­£dExşusive
);

1981 
	`´štHtmlF›ld
(
buf
, 9);

1982 
	`´štf
(" ");

1983 
	`¥rštf
(
buf
, "%.1f", 
³r
);

1984 
	`´štHtmlF›ld
(
buf
, 7);

1985 
	`´štf
(" ");

1986 
	`¥rštf
(
buf
, "%.1f", 
sum_³r
);

1987 
	`´štHtmlF›ld
(
buf
, 7);

1988 
	`´štf
(" ");

1989 
	`¥rštf
(
buf
, "%d", 
pCÏss
->
numC®ls
[0]);

1990 
	`´štHtmlF›ld
(
buf
, 6);

1991 
	`´štf
("+");

1992 
	`¥rštf
(
buf
, "%d", 
pCÏss
->
numC®ls
[1]);

1993 
	`´štHtmlF›ld
(
buf
, -6);

1994 
	`´štf
(" ");

1995 
	`´štf
("%s", 
şassName
);

1996 
	`´štf
("</div>\n");

1997 
	`´štf
("<div cÏss=\"·»Á\" id=\"d%d\">\n", 
ii
);

1999 
	`´štf
("---------------------------------------------\n");

2000 
	`´štf
("%9llu %7.1f %7.1f %6d+%-6d %s\n",

2001 
pCÏss
->
–­£dExşusive
, 
³r
, 
sum_³r
,

2002 
pCÏss
->
numC®ls
[0],…Class->numCalls[1],

2003 
şassName
);

2006 
numM‘hods
 = 
pCÏss
->numMethods;

2007 
şassExşusive
 = 
pCÏss
->
–­£dExşusive
;

2008 
sumM‘hods
 = 0;

2009 
jj
 = 0; jj < 
numM‘hods
; ++jj) {

2010 
m‘hod
 = 
pCÏss
->
m‘hods
[
jj
];

2011 
m‘hodName
 = (*)(
m‘hod
->methodName);

2012 
sigÇtu»
 = (*)(
m‘hod
->signature);

2013 
³r
 = 100.0 * 
m‘hod
->
–­£dExşusive
 / 
şassExşusive
;

2014 
sumM‘hods
 +ğ
m‘hod
->
–­£dExşusive
;

2015 
sum_³r
 = 100.0 * 
sumM‘hods
 / 
şassExşusive
;

2016 ià(
gO±iÚs
.
ouutHtml
) {

2017 
buf
[80];

2019 
m‘hodName
 = 
	`htmlEsÿ³
(m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

2020 
sigÇtu»
 = 
	`htmlEsÿ³
(sigÇtu», 
sigÇtu»Buf
, 
HTML_BUFSIZE
);

2021 
	`´štf
("<div class=\"leaf\"><span class=\"leaf\">&nbsp;</span>");

2022 
	`¥rštf
(
buf
, "%Îu", 
m‘hod
->
–­£dExşusive
);

2023 
	`´štHtmlF›ld
(
buf
, 9);

2024 
	`´štf
("&nbsp;");

2025 
	`¥rštf
(
buf
, "%Îu", 
m‘hod
->
–­£dInşusive
);

2026 
	`´štHtmlF›ld
(
buf
, 9);

2027 
	`´štf
("&nbsp;");

2028 
	`¥rštf
(
buf
, "%.1f", 
³r
);

2029 
	`´štHtmlF›ld
(
buf
, 7);

2030 
	`´štf
("&nbsp;");

2031 
	`¥rštf
(
buf
, "%.1f", 
sum_³r
);

2032 
	`´štHtmlF›ld
(
buf
, 7);

2033 
	`´štf
("&nbsp;");

2034 
	`¥rštf
(
buf
, "%d", 
m‘hod
->
numC®ls
[0]);

2035 
	`´štHtmlF›ld
(
buf
, 6);

2036 
	`´štf
("+");

2037 
	`¥rštf
(
buf
, "%d", 
m‘hod
->
numC®ls
[1]);

2038 
	`´štHtmlF›ld
(
buf
, -6);

2039 
	`´štf
("&nbsp;");

2040 
	`´štf
("<a href=\"#m%d\">[%d]</a>&nbsp;%s&nbsp;%s",

2041 
m‘hod
->
šdex
, m‘hod->šdex, 
m‘hodName
, 
sigÇtu»
);

2042 
	`´štf
("</div>\n");

2044 
	`´štf
("%9llu %9llu %7.1f %7.1f %6d+%-6d [%d] %s %s\n",

2045 
m‘hod
->
–­£dExşusive
,

2046 
m‘hod
->
–­£dInşusive
,

2047 
³r
, 
sum_³r
,

2048 
m‘hod
->
numC®ls
[0], method->numCalls[1],

2049 
m‘hod
->
šdex
, 
m‘hodName
, 
sigÇtu»
);

2052 ià(
gO±iÚs
.
ouutHtml
) {

2053 
	`´štf
("</div>\n");

2056 
	}
}

2058 
	$ü—‹UniqueM‘hodLi¡
(
T¿ûD©a
* 
ŒaûD©a
, 
M‘hodEÁry
 **
pM‘hods
, 
numM‘hods
)

2060 
ii
;

2065 
	`qsÜt
(
pM‘hods
, 
numM‘hods
, (
M‘hodEÁry
*), 
com·»M‘hodNames
);

2070 cÚ¡ *
cu¼’tM‘hodName
 = "";

2071 
ŒaûD©a
->
numUniqueM‘hods
 = 0;

2072 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

2073 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
)

2075 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
m‘hodName
, 
cu¼’tM‘hodName
) != 0) {

2076 
ŒaûD©a
->
numUniqueM‘hods
 += 1;

2077 
cu¼’tM‘hodName
 = 
pM‘hods
[
ii
]->
m‘hodName
;

2080 ià(
ŒaûD©a
->
numUniqueM‘hods
 == 0)

2084 
nby‹s
 = (
UniqueM‘hodEÁry
è* 
ŒaûD©a
->
numUniqueM‘hods
;

2085 
ŒaûD©a
->
uniqueM‘hods
 = (
UniqueM‘hodEÁry
 *è
	`m®loc
(
nby‹s
);

2088 
	`mem£t
(
ŒaûD©a
->
uniqueM‘hods
, 0, 
nby‹s
);

2089 
UniqueM‘hodEÁry
 *
pUnique
 = 
ŒaûD©a
->
uniqueM‘hods
;

2090 
cu¼’tM‘hodName
 = 
NULL
;

2091 
´evNumM‘hods
 = 0;

2092 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

2093 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
)

2095 ià(
cu¼’tM‘hodName
 =ğ
NULL
)

2096 
cu¼’tM‘hodName
 = 
pM‘hods
[
ii
]->
m‘hodName
;

2097 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
m‘hodName
, 
cu¼’tM‘hodName
) != 0) {

2098 
cu¼’tM‘hodName
 = 
pM‘hods
[
ii
]->
m‘hodName
;

2099 
pUnique
->
numM‘hods
 = 
´evNumM‘hods
;

2100 
pUnique
++;

2101 
´evNumM‘hods
 = 0;

2103 
´evNumM‘hods
 += 1;

2105 
pUnique
->
numM‘hods
 = 
´evNumM‘hods
;

2108 
pUnique
 = 
NULL
;

2109 
cu¼’tM‘hodName
 = "";

2110 
ÃxtM‘hod
 = 0;

2111 
ii
 = 0; i˜< 
numM‘hods
; ++ii) {

2112 ià(
pM‘hods
[
ii
]->
m‘hodName
 =ğ
NULL
)

2114 ià(
	`¡rcmp
(
pM‘hods
[
ii
]->
m‘hodName
, 
cu¼’tM‘hodName
) != 0) {

2115 
cu¼’tM‘hodName
 = 
pM‘hods
[
ii
]->
m‘hodName
;

2116 ià(
pUnique
 =ğ
NULL
)

2117 
pUnique
 = 
ŒaûD©a
->
uniqueM‘hods
;

2119 
pUnique
++;

2121 
nby‹s
 = (
M‘hodEÁry
*è* 
pUnique
->
numM‘hods
;

2122 
pUnique
->
m‘hods
 = (
M‘hodEÁry
**è
	`m®loc
(
nby‹s
);

2123 
ÃxtM‘hod
 = 0;

2125 
pUnique
->
m‘hods
[
ÃxtM‘hod
++] = 
pM‘hods
[
ii
];

2127 
	}
}

2129 
	$´štM‘hodProfes
(
T¿ûD©a
* 
ŒaûD©a
, 
ušt64_t
 
sumTh»adTime
)

2131 
ii
, 
jj
;

2132 
M‘hodEÁry
* 
m‘hod
;

2133 
tÙ®
, 
sum
, 
³r
, 
sum_³r
;

2134 
şassBuf
[
HTML_BUFSIZE
], 
m‘hodBuf
[HTML_BUFSIZE];

2135 
sigÇtu»Buf
[
HTML_BUFSIZE
];

2137 ià(
ŒaûD©a
->
numUniqueM‘hods
 == 0)

2140 
tÙ®
 = 
sumTh»adTime
;

2141 ià(
gO±iÚs
.
ouutHtml
) {

2142 
	`´štf
("<a‚ame=\"method\"></a>\n");

2143 
	`´štf
("<hr>\n");

2144 
	`ouutNavig©iÚB¬
();

2146 
	`´štf
("\n%s\n", 
´ofeS•¬©Ü
);

2149 
	`´štf
("\nExclusiveƒlapsedime forƒach method, summed over‡llhe classes\n");

2150 
	`´štf
("that contain‡ method withhe same‚ame.\n\n");

2151 ià(
gO±iÚs
.
ouutHtml
) {

2152 
	`´štf
("<br><br>\n");

2159 
UniqueM‘hodEÁry
 *
pUnique
 = 
ŒaûD©a
->
uniqueM‘hods
;

2160 
ii
 = 0; i˜< 
ŒaûD©a
->
numUniqueM‘hods
; ++ii, ++
pUnique
) {

2161 
numM‘hods
 = 
pUnique
->numMethods;

2162 
jj
 = 0; jj < 
numM‘hods
; ++jj) {

2163 
m‘hod
 = 
pUnique
->
m‘hods
[
jj
];

2164 
pUnique
->
–­£dExşusive
 +ğ
m‘hod
->elapsedExclusive;

2165 
pUnique
->
numC®ls
[0] +ğ
m‘hod
->numCalls[0];

2166 
pUnique
->
numC®ls
[1] +ğ
m‘hod
->numCalls[1];

2170 
	`qsÜt
(
pUnique
->
m‘hods
, 
numM‘hods
, (
M‘hodEÁry
*),

2171 
com·»EÏp£dExşusive
);

2177 
UniqueM‘hodEÁry
 **
pUniqueM‘hods
;

2178 
nby‹s
 = (
UniqueM‘hodEÁry
*è* 
ŒaûD©a
->
numUniqueM‘hods
;

2179 
pUniqueM‘hods
 = (
UniqueM‘hodEÁry
**è
	`m®loc
(
nby‹s
);

2180 
ii
 = 0; i˜< 
ŒaûD©a
->
numUniqueM‘hods
; ++ii)

2181 
pUniqueM‘hods
[
ii
] = &
ŒaûD©a
->
uniqueM‘hods
[ii];

2184 
	`qsÜt
(
pUniqueM‘hods
, 
ŒaûD©a
->
numUniqueM‘hods
, (
UniqueM‘hodEÁry
*),

2185 
com·»UniqueExşusive
);

2187 ià(
gO±iÚs
.
ouutHtml
) {

2188 
	`´štf
("<div class=\"header\"><span class=\"parent\">&nbsp;</span>&nbsp;&nbsp;&nbsp;");

2189 
	`´štf
("Cycles %%/total Cumul.%% &nbsp;Calls+Recur&nbsp; Method</div>\n");

2191 
	`´štf
(" Cycles %%/total Cumul.%% Calls+Recur Method\n");

2194 
sum
 = 0;

2195 
ii
 = 0; i˜< 
ŒaûD©a
->
numUniqueM‘hods
; ++ii) {

2196 *
şassName
, *
m‘hodName
, *
sigÇtu»
;

2199 
pUnique
 = 
pUniqueM‘hods
[
ii
];

2200 ià(
pUnique
->
–­£dExşusive
 == 0)

2203 
³r
 = 100.0 * 
pUnique
->
–­£dExşusive
 / 
tÙ®
;

2204 
sum
 +ğ
pUnique
->
–­£dExşusive
;

2205 
sum_³r
 = 100.0 * 
sum
 / 
tÙ®
;

2206 
m‘hodName
 = (*)(
pUnique
->
m‘hods
[0]->methodName);

2207 ià(
gO±iÚs
.
ouutHtml
) {

2208 
buf
[80];

2210 
m‘hodName
 = 
	`htmlEsÿ³
(m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

2211 
	`´štf
("<div cÏss=\"lšk\" onClick=\"javasüt:toggË('e%d')\" onMou£Ov”=\"javasüt:ÚMou£Ov”Ñhis)\" onMou£Out=\"javasüt:ÚMou£OutÑhis)\"><¥ª cÏss=\"·»Á\" id=\"xe%d\">+</¥ª>", 
ii
, ii);

2212 
	`¥rštf
(
buf
, "%Îu", 
pUnique
->
–­£dExşusive
);

2213 
	`´štHtmlF›ld
(
buf
, 9);

2214 
	`´štf
(" ");

2215 
	`¥rštf
(
buf
, "%.1f", 
³r
);

2216 
	`´štHtmlF›ld
(
buf
, 7);

2217 
	`´štf
(" ");

2218 
	`¥rštf
(
buf
, "%.1f", 
sum_³r
);

2219 
	`´štHtmlF›ld
(
buf
, 7);

2220 
	`´štf
(" ");

2221 
	`¥rštf
(
buf
, "%d", 
pUnique
->
numC®ls
[0]);

2222 
	`´štHtmlF›ld
(
buf
, 6);

2223 
	`´štf
("+");

2224 
	`¥rštf
(
buf
, "%d", 
pUnique
->
numC®ls
[1]);

2225 
	`´štHtmlF›ld
(
buf
, -6);

2226 
	`´štf
(" ");

2227 
	`´štf
("%s", 
m‘hodName
);

2228 
	`´štf
("</div>\n");

2229 
	`´štf
("<div cÏss=\"·»Á\" id=\"e%d\">\n", 
ii
);

2231 
	`´štf
("---------------------------------------------\n");

2232 
	`´štf
("%9llu %7.1f %7.1f %6d+%-6d %s\n",

2233 
pUnique
->
–­£dExşusive
, 
³r
, 
sum_³r
,

2234 
pUnique
->
numC®ls
[0],…Unique->numCalls[1],

2235 
m‘hodName
);

2237 
numM‘hods
 = 
pUnique
->numMethods;

2238 
m‘hodExşusive
 = 
pUnique
->
–­£dExşusive
;

2239 
sumM‘hods
 = 0;

2240 
jj
 = 0; jj < 
numM‘hods
; ++jj) {

2241 
m‘hod
 = 
pUnique
->
m‘hods
[
jj
];

2242 
şassName
 = (*)(
m‘hod
->className);

2243 
sigÇtu»
 = (*)(
m‘hod
->signature);

2244 
³r
 = 100.0 * 
m‘hod
->
–­£dExşusive
 / 
m‘hodExşusive
;

2245 
sumM‘hods
 +ğ
m‘hod
->
–­£dExşusive
;

2246 
sum_³r
 = 100.0 * 
sumM‘hods
 / 
m‘hodExşusive
;

2247 ià(
gO±iÚs
.
ouutHtml
) {

2248 
buf
[80];

2250 
şassName
 = 
	`htmlEsÿ³
(şassName, 
şassBuf
, 
HTML_BUFSIZE
);

2251 
sigÇtu»
 = 
	`htmlEsÿ³
(sigÇtu», 
sigÇtu»Buf
, 
HTML_BUFSIZE
);

2252 
	`´štf
("<div class=\"leaf\"><span class=\"leaf\">&nbsp;</span>");

2253 
	`¥rštf
(
buf
, "%Îu", 
m‘hod
->
–­£dExşusive
);

2254 
	`´štHtmlF›ld
(
buf
, 9);

2255 
	`´štf
("&nbsp;");

2256 
	`¥rštf
(
buf
, "%Îu", 
m‘hod
->
–­£dInşusive
);

2257 
	`´štHtmlF›ld
(
buf
, 9);

2258 
	`´štf
("&nbsp;");

2259 
	`¥rštf
(
buf
, "%.1f", 
³r
);

2260 
	`´štHtmlF›ld
(
buf
, 7);

2261 
	`´štf
("&nbsp;");

2262 
	`¥rštf
(
buf
, "%.1f", 
sum_³r
);

2263 
	`´štHtmlF›ld
(
buf
, 7);

2264 
	`´štf
("&nbsp;");

2265 
	`¥rštf
(
buf
, "%d", 
m‘hod
->
numC®ls
[0]);

2266 
	`´štHtmlF›ld
(
buf
, 6);

2267 
	`´štf
("+");

2268 
	`¥rštf
(
buf
, "%d", 
m‘hod
->
numC®ls
[1]);

2269 
	`´štHtmlF›ld
(
buf
, -6);

2270 
	`´štf
("&nbsp;");

2271 
	`´štf
("<a href=\"#m%d\">[%d]</a>&nbsp;%s.%s&nbsp;%s",

2272 
m‘hod
->
šdex
, method->index,

2273 
şassName
, 
m‘hodName
, 
sigÇtu»
);

2274 
	`´štf
("</div>\n");

2276 
	`´štf
("%9llu %9llu %7.1f %7.1f %6d+%-6d [%d] %s.%s %s\n",

2277 
m‘hod
->
–­£dExşusive
,

2278 
m‘hod
->
–­£dInşusive
,

2279 
³r
, 
sum_³r
,

2280 
m‘hod
->
numC®ls
[0], method->numCalls[1],

2281 
m‘hod
->
šdex
, 
şassName
, 
m‘hodName
, 
sigÇtu»
);

2284 ià(
gO±iÚs
.
ouutHtml
) {

2285 
	`´štf
("</div>\n");

2288 
	}
}

2293 
D©aKeys
* 
	$·r£D©aKeys
(
T¿ûD©a
* 
ŒaûD©a
, cÚ¡ * 
ŒaûFeName
, 
ušt64_t
* 
th»adTime
)

2295 
D©aKeys
* 
d©aKeys
 = 
NULL
;

2296 
M‘hodEÁry
 **
pM‘hods
 = 
NULL
;

2297 
M‘hodEÁry
* 
m‘hod
;

2298 
FILE
* 
d©aFp
 = 
NULL
;

2299 
D©aH—d”
 
d©aH—d”
;

2300 
ii
;

2301 
ušt64_t
 
cu¼’tTime
;

2302 
M‘hodEÁry
* 
ÿÎ”
;

2304 
d©aFp
 = 
	`fİ’
(
ŒaûFeName
, "r");

2305 ià(
d©aFp
 =ğ
NULL
)

2306 
ba
;

2308 ià((
d©aKeys
 = 
	`·r£Keys
(
d©aFp
, 0)è=ğ
NULL
)

2309 
ba
;

2311 ià(
	`·r£D©aH—d”
(
d©aFp
, &
d©aH—d”
) < 0)

2312 
ba
;

2315 
FILE
 *
dumpSŒ—m
 = 
	`fİ’
("debug", "w");

2318 
th»adId
;

2319 
m‘hodV®
;

2320 
aùiÚ
;

2321 
m‘hodId
;

2322 
C®lSck
 *
pSck
;

2326 ià(
	`»adD©aRecÜd
(
d©aFp
, &
d©aH—d”
, &
th»adId
, &
m‘hodV®
, &
cu¼’tTime
))

2329 
aùiÚ
 = 
	`METHOD_ACTION
(
m‘hodV®
);

2330 
m‘hodId
 = 
	`METHOD_ID
(
m‘hodV®
);

2333 
pSck
 = 
ŒaûD©a
->
¡acks
[
th»adId
];

2336 ià(
pSck
 =ğ
NULL
) {

2337 
pSck
 = 
	`m®loc
((
C®lSck
));

2338 
pSck
->
tİ
 = 0;

2339 
pSck
->
Ï¡Ev’tTime
 = 
cu¼’tTime
;

2340 
pSck
->
th»adS¹Time
 = 
cu¼’tTime
;

2341 
ŒaûD©a
->
¡acks
[
th»adId
] = 
pSck
;

2345 
m‘hod
 = 
	`lookupM‘hod
(
d©aKeys
, 
m‘hodId
);

2346 ià(
m‘hod
 =ğ
NULL
)

2347 
m‘hod
 = &
d©aKeys
->
m‘hods
[
UNKNOWN_INDEX
];

2350 ià(
m‘hod
->
m‘hodName
) {

2351 
	`årštf
(
dumpSŒ—m
, "%2d %-8llu %d %8llu„ %d c %d %s.%s %s\n",

2352 
th»adId
, 
cu¼’tTime
, 
aùiÚ
, 
pSck
->
th»adS¹Time
,

2353 
m‘hod
->
»cursiveEÁr›s
,

2354 
pSck
->
tİ
, 
m‘hod
->
şassName
, m‘hod->
m‘hodName
,

2355 
m‘hod
->
sigÇtu»
);

2357 
	`årštf
(
dumpSŒ—m
, "%2d %-8llu %d %8llu„ %d c %d %s\n",

2358 
th»adId
, 
cu¼’tTime
, 
aùiÚ
, 
pSck
->
th»adS¹Time
,

2359 
m‘hod
->
»cursiveEÁr›s
,

2360 
pSck
->
tİ
, 
m‘hod
->
şassName
);

2364 ià(
aùiÚ
 =ğ
METHOD_TRACE_ENTER
) {

2366 ià(
pSck
->
tİ
 >ğ
MAX_STACK_DEPTH
) {

2367 
	`årštf
(
¡d”r
, "Stack overflow (exceeded %d frames)\n",

2368 
MAX_STACK_DEPTH
);

2369 
	`ex™
(1);

2373 ià(
pSck
->
tİ
 >= 1)

2374 
ÿÎ”
 = 
pSck
->
ÿÎs
[pSck->
tİ
 - 1].
m‘hod
;

2376 
ÿÎ”
 = &
d©aKeys
->
m‘hods
[
TOPLEVEL_INDEX
];

2377 
	`couÁRecursiveEÁr›s
(
pSck
,…Sck->
tİ
, 
ÿÎ”
);

2378 
ÿÎ”
->
–­£dExşusive
 +ğ
cu¼’tTime
 - 
pSck
->
Ï¡Ev’tTime
;

2380 ià(
ÿÎ”
->
–­£dExşusive
 > 10000000)

2381 
	`årštf
(
dumpSŒ—m
, "%llu current %llu†ast %llu diff %llu\n",

2382 
ÿÎ”
->
–­£dExşusive
, 
cu¼’tTime
,

2383 
pSck
->
Ï¡Ev’tTime
,

2384 
cu¼’tTime
 - 
pSck
->
Ï¡Ev’tTime
);

2386 ià(
ÿÎ”
->
»cursiveEÁr›s
 <= 1) {

2387 
ÿÎ”
->
tİExşusive
 +ğ
cu¼’tTime
 - 
pSck
->
Ï¡Ev’tTime
;

2391 
pSck
->
ÿÎs
[pSck->
tİ
].
m‘hod
 = method;

2392 
pSck
->
ÿÎs
[pSck->
tİ
++].
’ŒyTime
 = 
cu¼’tTime
;

2395 
ušt64_t
 
’ŒyTime
 = 0;

2398 ià(
pSck
->
tİ
 > 0) {

2399 
pSck
->
tİ
 -= 1;

2400 
’ŒyTime
 = 
pSck
->
ÿÎs
[pSck->
tİ
].entryTime;

2401 ià(
m‘hod
 !ğ
pSck
->
ÿÎs
[pSck->
tİ
].method) {

2402 ià(
m‘hod
->
m‘hodName
) {

2403 
	`årštf
(
¡d”r
,

2405 
m‘hod
->
şassName
, m‘hod->
m‘hodName
,

2406 
m‘hod
->
sigÇtu»
);

2408 
	`årštf
(
¡d”r
,

2410 
m‘hod
->
şassName
);

2412 
	`¡ackDump
(
pSck
,…Sck->
tİ
 + 1);

2413 
	`ex™
(1);

2418 ià(
pSck
->
tİ
 >= 1)

2419 
ÿÎ”
 = 
pSck
->
ÿÎs
[pSck->
tİ
 - 1].
m‘hod
;

2421 
ÿÎ”
 = &
d©aKeys
->
m‘hods
[
TOPLEVEL_INDEX
];

2422 
	`couÁRecursiveEÁr›s
(
pSck
,…Sck->
tİ
, 
ÿÎ”
);

2423 
	`couÁRecursiveEÁr›s
(
pSck
,…Sck->
tİ
, 
m‘hod
);

2424 
ušt64_t
 
–­£d
 = 
cu¼’tTime
 - 
’ŒyTime
;

2425 
	`addInşusiveTime
(
ÿÎ”
, 
m‘hod
, 
–­£d
);

2426 
m‘hod
->
–­£dExşusive
 +ğ
cu¼’tTime
 - 
pSck
->
Ï¡Ev’tTime
;

2427 ià(
m‘hod
->
»cursiveEÁr›s
 == 0) {

2428 
m‘hod
->
tİExşusive
 +ğ
cu¼’tTime
 - 
pSck
->
Ï¡Ev’tTime
;

2432 
pSck
->
Ï¡Ev’tTime
 = 
cu¼’tTime
;

2439 
C®lSck
 *
pSck
;

2440 
th»adId
;

2441 
ušt64_t
 
sumTh»adTime
 = 0;

2442 
th»adId
 = 0;h»adId < 
MAX_THREADS
; ++threadId) {

2443 
pSck
 = 
ŒaûD©a
->
¡acks
[
th»adId
];

2446 ià(
pSck
 =ğ
NULL
)

2450 
sumTh»adTime
 +ğ
pSck
->
Ï¡Ev’tTime
 -…Sck->
th»adS¹Time
;

2452 
ii
 = 0; i˜< 
pSck
->
tİ
; ++ii) {

2453 ià(
ii
 == 0)

2454 
ÿÎ”
 = &
d©aKeys
->
m‘hods
[
TOPLEVEL_INDEX
];

2456 
ÿÎ”
 = 
pSck
->
ÿÎs
[
ii
 - 1].
m‘hod
;

2457 
m‘hod
 = 
pSck
->
ÿÎs
[
ii
].method;

2458 
	`couÁRecursiveEÁr›s
(
pSck
, 
ii
, 
ÿÎ”
);

2459 
	`couÁRecursiveEÁr›s
(
pSck
, 
ii
, 
m‘hod
);

2461 
ušt64_t
 
’ŒyTime
 = 
pSck
->
ÿÎs
[
ii
].entryTime;

2462 
ušt64_t
 
–­£d
 = 
pSck
->
Ï¡Ev’tTime
 - 
’ŒyTime
;

2463 
	`addInşusiveTime
(
ÿÎ”
, 
m‘hod
, 
–­£d
);

2466 
ÿÎ”
 = &
d©aKeys
->
m‘hods
[
TOPLEVEL_INDEX
];

2467 
ÿÎ”
->
–­£dInşusive
 = 
sumTh»adTime
;

2470 
	`fşo£
(
dumpSŒ—m
);

2473 ià(
th»adTime
 !ğ
NULL
) {

2474 *
th»adTime
 = 
sumTh»adTime
;

2477 
ba
:

2478 ià(
d©aFp
 !ğ
NULL
)

2479 
	`fşo£
(
d©aFp
);

2481  
d©aKeys
;

2482 
	}
}

2484 
M‘hodEÁry
** 
	$·r£M‘hodEÁr›s
(
D©aKeys
* 
d©aKeys
)

2486 
ii
;

2492 
M‘hodEÁry
** 
pM‘hods
 = (M‘hodEÁry**è
	`m®loc
((M‘hodEÁry*è* 
d©aKeys
->
numM‘hods
);

2493 
ii
 = 0; i˜< 
d©aKeys
->
numM‘hods
; ++ii) {

2494 
M‘hodEÁry
* 
’Œy
 = &
d©aKeys
->
m‘hods
[
ii
];

2495 
pM‘hods
[
ii
] = 
’Œy
;

2498  
pM‘hods
;

2499 
	}
}

2504 
	$´ofeT¿û
(
T¿ûD©a
* 
ŒaûD©a
, 
M‘hodEÁry
 **
pM‘hods
, 
numM‘hods
, 
ušt64_t
 
sumTh»adTime
)

2507 ià(
gO±iÚs
.
ouutHtml
) {

2508 
	`´štf
(
htmlH—d”
, 
gO±iÚs
.
sÜbËU¾
);

2509 
	`ouutTabËOfCÚ‹Ás
();

2512 
	`´štExşusiveProfe
(
pM‘hods
, 
numM‘hods
, 
sumTh»adTime
);

2513 
	`´štInşusiveProfe
(
pM‘hods
, 
numM‘hods
, 
sumTh»adTime
);

2515 
	`ü—‹CÏssLi¡
(
ŒaûD©a
, 
pM‘hods
, 
numM‘hods
);

2516 
	`´štCÏssProfes
(
ŒaûD©a
, 
sumTh»adTime
);

2518 
	`ü—‹UniqueM‘hodLi¡
(
ŒaûD©a
, 
pM‘hods
, 
numM‘hods
);

2519 
	`´štM‘hodProfes
(
ŒaûD©a
, 
sumTh»adTime
);

2521 ià(
gO±iÚs
.
ouutHtml
) {

2522 
	`´štf
("%s", 
htmlFoÙ”
);

2524 
	}
}

2526 
	$com·»M‘hodNamesFÜDiff
(cÚ¡ *
a
, cÚ¡ *
b
)

2528 
»suÉ
;

2530 cÚ¡ 
M‘hodEÁry
 *
m‘hodA
 = *(cÚ¡ M‘hodEÁry**)
a
;

2531 cÚ¡ 
M‘hodEÁry
 *
m‘hodB
 = *(cÚ¡ M‘hodEÁry**)
b
;

2532 ià(
m‘hodA
->
m‘hodName
 =ğ
NULL
 || 
m‘hodB
->methodName == NULL) {

2533  
	`com·»CÏssNames
(
a
, 
b
);

2535 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
m‘hodName
, 
m‘hodB
->methodName);

2536 ià(
»suÉ
 == 0) {

2537 
»suÉ
 = 
	`¡rcmp
(
m‘hodA
->
sigÇtu»
, 
m‘hodB
->signature);

2538 ià(
»suÉ
 == 0) {

2539  
	`¡rcmp
(
m‘hodA
->
şassName
, 
m‘hodB
->className);

2542  
»suÉ
;

2543 
	}
}

2545 
	$fšdM©ch
(
M‘hodEÁry
** 
m‘hods
, 
size
, M‘hodEÁry* 
m©chThis
)

2547 
i
;

2549 
i
 = 0 ; i < 
size
 ; i++) {

2550 
M‘hodEÁry
* 
m‘hod
 = 
m‘hods
[
i
];

2552 ià(
m‘hod
 !ğ
NULL
 && !
	`com·»M‘hodNamesFÜDiff
(&m‘hod, &
m©chThis
)) {

2556  
i
;

2564 
	}
}

2566 
	$com·»DiffEÁr›sExculsive
(cÚ¡ *
a
, cÚ¡ *
b
)

2568 
»suÉ
;

2570 cÚ¡ 
DiffEÁry
* 
’ŒyA
 = (cÚ¡ DiffEÁry*)
a
;

2571 cÚ¡ 
DiffEÁry
* 
’ŒyB
 = (cÚ¡ DiffEÁry*)
b
;

2573 ià(
’ŒyA
->
difã»nûExşusive
 < 
’ŒyB
->differenceExclusive) {

2575 } ià(
’ŒyA
->
difã»nûExşusive
 > 
’ŒyB
->differenceExclusive) {

2580 
	}
}

2582 
	$com·»DiffEÁr›sInculsive
(cÚ¡ *
a
, cÚ¡ *
b
)

2584 
»suÉ
;

2586 cÚ¡ 
DiffEÁry
* 
’ŒyA
 = (cÚ¡ DiffEÁry*)
a
;

2587 cÚ¡ 
DiffEÁry
* 
’ŒyB
 = (cÚ¡ DiffEÁry*)
b
;

2589 ià(
’ŒyA
->
difã»nûInşusive
 < 
’ŒyB
->differenceInclusive) {

2591 } ià(
’ŒyA
->
difã»nûInşusive
 > 
’ŒyB
->differenceInclusive) {

2596 
	}
}

2598 
	$´štMissšgM‘hod
(
M‘hodEÁry
* 
m‘hod
)

2600 
şassBuf
[
HTML_BUFSIZE
];

2601 
m‘hodBuf
[
HTML_BUFSIZE
];

2602 * 
şassName
;

2603 * 
m‘hodName
;

2605 
şassName
 = 
	`htmlEsÿ³
(
m‘hod
->şassName, 
şassBuf
, 
HTML_BUFSIZE
);

2606 
m‘hodName
 = 
	`htmlEsÿ³
(
m‘hod
->m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

2608 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("<tr><td>\n");

2610 
	`´štf
("%s.% ", 
şassName
, 
m‘hodName
);

2611 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2613 
	`´štf
("%Îd ", 
m‘hod
->
–­£dExşusive
);

2614 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2616 
	`´štf
("%Îd ", 
m‘hod
->
–­£dInşusive
);

2617 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2619 
	`´štf
("%d\n", 
m‘hod
->
numC®ls
[0]);

2620 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>\n");

2621 
	}
}

2624 
	$ü—‹Diff
(
D©aKeys
* 
d1
, 
ušt64_t
 
sum1
, D©aKeys* 
d2
, ušt64_ˆ
sum2
)

2626 
M‘hodEÁry
** 
m‘hods1
 = 
	`·r£M‘hodEÁr›s
(
d1
);

2627 
M‘hodEÁry
** 
m‘hods2
 = 
	`·r£M‘hodEÁr›s
(
d2
);

2630 
i
;

2631 
	`qsÜt
(
m‘hods1
, 
d1
->
numM‘hods
, (
M‘hodEÁry
*), 
com·»EÏp£dInşusive
);

2632 
i
 = 0; i < 
d1
->
numM‘hods
; ++i) {

2633 
m‘hods1
[
i
]->
šdex
 = i;

2636 
	`qsÜt
(
m‘hods2
, 
d2
->
numM‘hods
, (
M‘hodEÁry
*), 
com·»EÏp£dInşusive
);

2637 
i
 = 0; i < 
d2
->
numM‘hods
; ++i) {

2638 
m‘hods2
[
i
]->
šdex
 = i;

2641 
max
 = (
d1
->
numM‘hods
 < 
d2
->numMethods) ? d2->numMethods : d1->numMethods;

2642 
max
++;

2643 
DiffEÁry
* 
diffs
 = (DiffEÁry*)
	`m®loc
(
max
 * (DiffEntry));

2644 
	`mem£t
(
diffs
, 0, 
max
 * (
DiffEÁry
));

2645 
DiffEÁry
* 
±r
 = 
diffs
;

2649 
m©ches
 = 0;

2651 
i
 = 0 ; i < 
d1
->
numM‘hods
 ; i++) {

2652 
m©ch
 = 
	`fšdM©ch
(
m‘hods2
, 
d2
->
numM‘hods
, 
m‘hods1
[
i
]);

2653 ià(
m©ch
 >= 0) {

2654 
±r
->
m‘hod1
 = 
m‘hods1
[
i
];

2655 
±r
->
m‘hod2
 = 
m‘hods2
[
m©ch
];

2657 
ušt64_t
 
e1
 = 
±r
->
m‘hod1
->
–­£dExşusive
;

2658 
ušt64_t
 
e2
 = 
±r
->
m‘hod2
->
–­£dExşusive
;

2659 ià(
e1
 > 0) {

2660 
±r
->
difã»nûExşusive
 = 
e2
 - 
e1
;

2661 
±r
->
difã»nûExşusiveP”ûÁage
 = (()
e2
 / ()
e1
) * 100.0;

2664 
ušt64_t
 
i1
 = 
±r
->
m‘hod1
->
–­£dInşusive
;

2665 
ušt64_t
 
i2
 = 
±r
->
m‘hod2
->
–­£dInşusive
;

2666 ià(
i1
 > 0) {

2667 
±r
->
difã»nûInşusive
 = 
i2
 - 
i1
;

2668 
±r
->
difã»nûInşusiveP”ûÁage
 = (()
i2
 / ()
i1
) * 100.0;

2673 
m‘hods1
[
i
] = 
NULL
;

2674 
m‘hods2
[
m©ch
] = 
NULL
;

2675 
±r
++;

2677 
m©ches
++;

2680 
±r
->
m‘hod1
 = 
NULL
;

2681 
±r
->
m‘hod2
 = 
NULL
;

2683 
	`qsÜt
(
diffs
, 
m©ches
, (
DiffEÁry
), 
com·»DiffEÁr›sExculsive
);

2684 
±r
 = 
diffs
;

2686 ià(
gO±iÚs
.
ouutHtml
) {

2687 
	`´štf
(
htmlH—d”
, 
gO±iÚs
.
sÜbËU¾
);

2688 
	`´štf
("<h3>Table of Contents</h3>\n");

2689 
	`´štf
("<ul>\n");

2690 
	`´štf
("<li><a href='#exclusive'>Exclusive</a>\n");

2691 
	`´štf
("<li><a href='#inclusive'>Inclusive</a>\n");

2692 
	`´štf
("</ul>\n");

2693 
	`´štf
("RuÀ1: %s<br>\n", 
gO±iÚs
.
diffFeName
);

2694 
	`´štf
("RuÀ2: %s<br>\n", 
gO±iÚs
.
ŒaûFeName
);

2695 
	`´štf
("<a‚ame=\"exclusive\"></a><h3 id=\"exclusive\">Exclusive</h3>\n");

2696 
	`´štf
(
bËH—d”
, "exclusive_table");

2699 
şassBuf
[
HTML_BUFSIZE
];

2700 
m‘hodBuf
[
HTML_BUFSIZE
];

2701 * 
şassName
;

2702 * 
m‘hodName
;

2704 
±r
->
m‘hod1
 !ğ
NULL
 &&…Œ->
m‘hod2
 != NULL) {

2705 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("<tr><td>\n");

2707 
şassName
 = 
	`htmlEsÿ³
(
±r
->
m‘hod1
->şassName, 
şassBuf
, 
HTML_BUFSIZE
);

2708 
m‘hodName
 = 
	`htmlEsÿ³
(
±r
->
m‘hod1
->m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

2710 
	`´štf
("%s.% ", 
şassName
, 
m‘hodName
);

2711 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2713 
	`´štf
("%Îd ", 
±r
->
m‘hod1
->
–­£dExşusive
);

2714 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2716 
	`´štf
("%Îu ", 
±r
->
m‘hod2
->
–­£dExşusive
);

2717 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2719 
	`´štf
("%Îd ", 
±r
->
difã»nûExşusive
);

2720 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2722 
	`´štf
("%.2f\n", 
±r
->
difã»nûExşusiveP”ûÁage
);

2723 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>\n");

2725 
	`´štf
("%d\n", 
±r
->
m‘hod1
->
numC®ls
[0]);

2726 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>\n");

2728 
	`´štf
("%d\n", 
±r
->
m‘hod2
->
numC®ls
[0]);

2729 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td></tr>\n");

2731 
±r
++;

2734 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</table>\n");

2736 ià(
gO±iÚs
.
ouutHtml
) {

2737 
	`´štf
(
htmlH—d”
, 
gO±iÚs
.
sÜbËU¾
);

2738 
	`´štf
("RuÀ1: %s<br>\n", 
gO±iÚs
.
diffFeName
);

2739 
	`´štf
("RuÀ2: %s<br>\n", 
gO±iÚs
.
ŒaûFeName
);

2740 
	`´štf
("<a‚ame=\"inclusive\"></a><h3 id=\"inculisve\">Inclusive</h3>\n");

2741 
	`´štf
(
bËH—d”
, "inclusive_table");

2744 
	`qsÜt
(
diffs
, 
m©ches
, (
DiffEÁry
), 
com·»DiffEÁr›sInculsive
);

2745 
±r
 = 
diffs
;

2747 
±r
->
m‘hod1
 !ğ
NULL
 &&…Œ->
m‘hod2
 != NULL) {

2748 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("<tr><td>\n");

2750 
şassName
 = 
	`htmlEsÿ³
(
±r
->
m‘hod1
->şassName, 
şassBuf
, 
HTML_BUFSIZE
);

2751 
m‘hodName
 = 
	`htmlEsÿ³
(
±r
->
m‘hod1
->m‘hodName, 
m‘hodBuf
, 
HTML_BUFSIZE
);

2753 
	`´štf
("%s.% ", 
şassName
, 
m‘hodName
);

2754 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2756 
	`´štf
("%Îd ", 
±r
->
m‘hod1
->
–­£dInşusive
);

2757 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2759 
	`´štf
("%Îu ", 
±r
->
m‘hod2
->
–­£dInşusive
);

2760 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2762 
	`´štf
("%Îd ", 
±r
->
difã»nûInşusive
);

2763 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>");

2765 
	`´štf
("%.2f\n", 
±r
->
difã»nûInşusiveP”ûÁage
);

2766 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>\n");

2768 
	`´štf
("%d\n", 
±r
->
m‘hod1
->
numC®ls
[0]);

2769 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td><td>\n");

2771 
	`´štf
("%d\n", 
±r
->
m‘hod2
->
numC®ls
[0]);

2772 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</td></tr>\n");

2774 
±r
++;

2777 ià(
gO±iÚs
.
ouutHtml
) {

2778 
	`´štf
("</table>\n");

2779 
	`´štf
("<h3>Run 1 methods‚ot found in Run 2</h3>");

2780 
	`´štf
(
bËH—d”Missšg
, "?");

2783 
i
 = 0; i < 
d1
->
numM‘hods
; ++i) {

2784 ià(
m‘hods1
[
i
] !ğ
NULL
) {

2785 
	`´štMissšgM‘hod
(
m‘hods1
[
i
]);

2789 ià(
gO±iÚs
.
ouutHtml
) {

2790 
	`´štf
("</table>\n");

2791 
	`´štf
("<h3>Run 2 methods‚ot found in Run 1</h3>");

2792 
	`´štf
(
bËH—d”Missšg
, "?");

2795 
i
 = 0; i < 
d2
->
numM‘hods
; ++i) {

2796 ià(
m‘hods2
[
i
] !ğ
NULL
) {

2797 
	`´štMissšgM‘hod
(
m‘hods2
[
i
]);

2801 ià(
gO±iÚs
.
ouutHtml
è
	`´štf
("</body></html\n");

2802 
	}
}

2804 
	$u§ge
(cÚ¡ *
´og¿m
)

2806 
	`årštf
(
¡d”r
, "Copyright (C) 2006 The Android Open Source Project\n\n");

2807 
	`årštf
(
¡d”r
, "u§ge: % [-ho] [- sÜbË] [-d¿û-fe-Çme] [-g outfe]¿û-fe-Çme\n", 
´og¿m
);

2808 
	`årštf
(
¡d”r
, " -drace-file-name - Diff withhisrace\n");

2809 
	`årštf
(
¡d”r
, " -g outfile - Write grapho 'outfile'\n");

2810 
	`årštf
(
¡d”r
, " -k - When writing‡ graph, keephe intermediate DOT file\n");

2811 
	`årštf
(
¡d”r
, " -h - Turn on HTML output\n");

2812 
	`årštf
(
¡d”r
, " -o - Dumphe dmtrace file instead of…rofiling\n");

2813 
	`årštf
(
¡d”r
, " -s - URL baseo wherehe sortable javascript file\n");

2814 
	`årštf
(
¡d”r
, " -threshold - Threshold…ercentage for including‚odes inhe graph\n");

2816 
	}
}

2819 
	$·r£O±iÚs
(
¬gc
, **
¬gv
)

2822 
İt
 = 
	`g‘İt
(
¬gc
, 
¬gv
, "d:hg:kos:t:");

2823 ià(
İt
 == -1)

2825 
İt
) {

2827 
gO±iÚs
.
diffFeName
 = 
İrg
;

2830 
gO±iÚs
.
g¿phFeName
 = 
İrg
;

2833 
gO±iÚs
.
k“pDÙFe
 = 1;

2836 
gO±iÚs
.
ouutHtml
 = 1;

2839 
gO±iÚs
.
dump
 = 1;

2842 
gO±iÚs
.
sÜbËU¾
 = 
İrg
;

2845 
gO±iÚs
.
th»shŞd
 = 
	`©oi
(
İrg
);

2852 
	}
}

2857 
	$maš
(
¬gc
, ** 
¬gv
)

2859 
gO±iÚs
.
th»shŞd
 = -1;

2862 ià(
	`·r£O±iÚs
(
¬gc
, 
¬gv
è||‡rgø- 
İtšd
 != 1)

2863  
	`u§ge
(
¬gv
[0]);

2865 
gO±iÚs
.
ŒaûFeName
 = 
¬gv
[
İtšd
];

2867 ià(
gO±iÚs
.
th»shŞd
 < 0 || 100 <= gOptions.threshold) {

2868 
gO±iÚs
.
th»shŞd
 = 20;

2871 ià(
gO±iÚs
.
dump
) {

2872 
	`dumpT¿û
();

2876 
ušt64_t
 
sumTh»adTime
 = 0;

2878 
T¿ûD©a
 
d©a1
;

2879 
D©aKeys
* 
d©aKeys
 = 
	`·r£D©aKeys
(&
d©a1
, 
gO±iÚs
.
ŒaûFeName
,

2880 &
sumTh»adTime
);

2881 ià(
d©aKeys
 =ğ
NULL
) {

2882 
	`årštf
(
¡d”r
, "Cannot„eadrace.\n");

2883 
	`ex™
(1);

2886 ià(
gO±iÚs
.
diffFeName
 !ğ
NULL
) {

2887 
ušt64_t
 
sum2
;

2888 
T¿ûD©a
 
d©a2
;

2889 
D©aKeys
* 
d2
 = 
	`·r£D©aKeys
(&
d©a2
, 
gO±iÚs
.
diffFeName
, &
sum2
);

2891 
	`ü—‹Diff
(
d2
, 
sum2
, 
d©aKeys
, 
sumTh»adTime
);

2893 
	`ä“D©aKeys
(
d2
);

2895 
M‘hodEÁry
** 
m‘hods
 = 
	`·r£M‘hodEÁr›s
(
d©aKeys
);

2896 
	`´ofeT¿û
(&
d©a1
, 
m‘hods
, 
d©aKeys
->
numM‘hods
, 
sumTh»adTime
);

2897 ià(
gO±iÚs
.
g¿phFeName
 !ğ
NULL
) {

2898 
	`ü—‹InşusiveProfeG¿phNew
(
d©aKeys
);

2900 
	`ä“
(
m‘hods
);

2903 
	`ä“D©aKeys
(
d©aKeys
);

2906 
	}
}

	@tools/gdbjithelper/gdbjithelper.c

17 
	~<uni¡d.h
>

18 
	~<¡dio.h
>

19 
	~<m®loc.h
>

20 
	~<¡ršg.h
>

23 
	#NUM_DUMPED_WORDS
 20

	)

25 vŞ©
	gdÚe
;

53 
	gcodePC
[] = {

62 
	gcodeLR
[] = {

72 
	#START_PC_PAGE_OFFSET
 0x1e4

	)

75 
	#START_LR_PAGE_OFFSET
 0x1a8

	)

78 *
	gcodePCCache
, *
	gcodeLRCache
;

80 
	$dumpCode
(*
pc
, *
Ì
)

82 
i
;

84 
i
 = 0; i < 
NUM_DUMPED_WORDS
; i++) {

85 
	`´štf
("%°codePC[%d]: %#010x\n", 
pc
 + 
i
, i,…c[i]);

88 
i
 = 0; i < 
NUM_DUMPED_WORDS
; i++) {

89 
	`´štf
("%°codeLR[%d]: %#010x\n", 
Ì
 + 
i
, i,†r[i]);

91 
	}
}

93 
	$maš
()

95 
codePCCache
 = 
	`mem®ign
(4096, 8192);

96 
codeLRCache
 = 
	`mem®ign
(4096, 8192);

98 
	`memıy
(
codePCCache
 + 
START_PC_PAGE_OFFSET
, 
codePC
, 4 * 
NUM_DUMPED_WORDS
);

99 
	`memıy
(
codeLRCache
 + 
START_LR_PAGE_OFFSET
, 
codeLR
, 4 * 
NUM_DUMPED_WORDS
);

101 
	`dumpCode
((*è(
codePCCache
 + 
START_PC_PAGE_OFFSET
),

102 (*è(
codeLRCache
 + 
START_LR_PAGE_OFFSET
));

104 !
dÚe
) {

105 
	`¦“p
(1000);

108 
	}
}

	@tools/hprof-conv/HprofConv.c

22 
	~<¡dio.h
>

23 
	~<¡ršg.h
>

24 
	~<¡dlib.h
>

25 
	~<¡dšt.h
>

26 
	~<”ºo.h
>

27 
	~<as£¹.h
>

30 #ifdeà
VERBOSE_DEBUG


31 
	#DBUG
(...è
	`årštf
(
¡d”r
, 
__VA_ARGS__
)

	)

33 
	#DBUG
(...)

	)

36 #iâdeà
FALSE


37 
	#FALSE
 0

	)

38 
	#TRUE
 (!
FALSE
)

	)

41 
	eH´ofBasicTy³
 {

42 
	mHPROF_BASIC_OBJECT
 = 2,

43 
	mHPROF_BASIC_BOOLEAN
 = 4,

44 
	mHPROF_BASIC_CHAR
 = 5,

45 
	mHPROF_BASIC_FLOAT
 = 6,

46 
	mHPROF_BASIC_DOUBLE
 = 7,

47 
	mHPROF_BASIC_BYTE
 = 8,

48 
	mHPROF_BASIC_SHORT
 = 9,

49 
	mHPROF_BASIC_INT
 = 10,

50 
	mHPROF_BASIC_LONG
 = 11,

51 } 
	tH´ofBasicTy³
;

53 
	eH´ofTag
 {

55 
	mHPROF_TAG_HEAP_DUMP
 = 0x0c,

56 
	mHPROF_TAG_HEAP_DUMP_SEGMENT
 = 0x1c,

57 } 
	tH´ofTag
;

59 
	eH´ofH—pTag
 {

61 
	mHPROF_ROOT_UNKNOWN
 = 0xff,

62 
	mHPROF_ROOT_JNI_GLOBAL
 = 0x01,

63 
	mHPROF_ROOT_JNI_LOCAL
 = 0x02,

64 
	mHPROF_ROOT_JAVA_FRAME
 = 0x03,

65 
	mHPROF_ROOT_NATIVE_STACK
 = 0x04,

66 
	mHPROF_ROOT_STICKY_CLASS
 = 0x05,

67 
	mHPROF_ROOT_THREAD_BLOCK
 = 0x06,

68 
	mHPROF_ROOT_MONITOR_USED
 = 0x07,

69 
	mHPROF_ROOT_THREAD_OBJECT
 = 0x08,

70 
	mHPROF_CLASS_DUMP
 = 0x20,

71 
	mHPROF_INSTANCE_DUMP
 = 0x21,

72 
	mHPROF_OBJECT_ARRAY_DUMP
 = 0x22,

73 
	mHPROF_PRIMITIVE_ARRAY_DUMP
 = 0x23,

76 
	mHPROF_HEAP_DUMP_INFO
 = 0xfe,

77 
	mHPROF_ROOT_INTERNED_STRING
 = 0x89,

78 
	mHPROF_ROOT_FINALIZING
 = 0x8a,

79 
	mHPROF_ROOT_DEBUGGER
 = 0x8b,

80 
	mHPROF_ROOT_REFERENCE_CLEANUP
 = 0x8c,

81 
	mHPROF_ROOT_VM_INTERNAL
 = 0x8d,

82 
	mHPROF_ROOT_JNI_MONITOR
 = 0x8e,

83 
	mHPROF_UNREACHABLE
 = 0x90,

84 
	mHPROF_PRIMITIVE_ARRAY_NODATA_DUMP
 = 0xc3,

85 } 
	tH´ofH—pTag
;

87 
	#kId’tSize
 4

	)

88 
	#kRecHdrL’
 9

	)

99 * 
	m¡Üage
;

100 
size_t
 
	mcurL’
;

101 
size_t
 
	mmaxL’
;

102 } 
	tEx·ndBuf
;

107 
Ex·ndBuf
* 
	$ebAÎoc
()

109 cÚ¡ 
kIn™ŸlSize
 = 64;

111 
Ex·ndBuf
* 
ÃwBuf
 = (Ex·ndBuf*è
	`m®loc
((ExpandBuf));

112 ià(
ÃwBuf
 =ğ
NULL
)

113  
NULL
;

114 
ÃwBuf
->
¡Üage
 = (*è
	`m®loc
(
kIn™ŸlSize
);

115 
ÃwBuf
->
curL’
 = 0;

116 
ÃwBuf
->
maxL’
 = 
kIn™ŸlSize
;

118  
ÃwBuf
;

119 
	}
}

124 
	$ebF»e
(
Ex·ndBuf
* 
pBuf
)

126 ià(
pBuf
 !ğ
NULL
) {

127 
	`ä“
(
pBuf
->
¡Üage
);

128 
	`ä“
(
pBuf
);

130 
	}
}

138 
šlše
 * 
	$ebG‘Bufãr
(
Ex·ndBuf
* 
pBuf
)

140  
pBuf
->
¡Üage
;

141 
	}
}

146 
šlše
 
size_t
 
	$ebG‘L’gth
(
Ex·ndBuf
* 
pBuf
)

148  
pBuf
->
curL’
;

149 
	}
}

154 
	$ebCË¬
(
Ex·ndBuf
* 
pBuf
)

156 
pBuf
->
curL’
 = 0;

157 
	}
}

162 
	$ebEnsu»C­ac™y
(
Ex·ndBuf
* 
pBuf
, 
size
)

164 
	`as£¹
(
size
 > 0);

166 ià(
pBuf
->
curL’
 + 
size
 >…Buf->
maxL’
) {

167 
ÃwSize
 = 
pBuf
->
curL’
 + 
size
 + 128;

168 * 
ÃwStÜage
 = 
	`»®loc
(
pBuf
->
¡Üage
, 
ÃwSize
);

169 ià(
ÃwStÜage
 =ğ
NULL
) {

170 
	`årštf
(
¡d”r
, "ERROR:„—Îoøçed oÀsize=%d\n", 
ÃwSize
);

174 
pBuf
->
¡Üage
 = 
ÃwStÜage
;

175 
pBuf
->
maxL’
 = 
ÃwSize
;

178 
	`as£¹
(
pBuf
->
curL’
 + 
size
 <ğpBuf->
maxL’
);

180 
	}
}

185 
	$ebAddD©a
(
Ex·ndBuf
* 
pBuf
, cÚ¡ * 
d©a
, 
size_t
 
couÁ
)

187 
	`ebEnsu»C­ac™y
(
pBuf
, 
couÁ
);

188 
	`memıy
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
d©a
, 
couÁ
);

189 
pBuf
->
curL’
 +ğ
couÁ
;

191 
	}
}

196 
	$ebR—dSŒšg
(
Ex·ndBuf
* 
pBuf
, 
FILE
* 
š
)

198 
ic
;

201 
	`ebEnsu»C­ac™y
(
pBuf
, 1);

203 
ic
 = 
	`g‘c
(
š
);

204 ià(
	`ãof
(
š
è|| 
	`ã¼Ü
(in)) {

205 
	`årštf
(
¡d”r
, "ERROR: failed„eading input\n");

209 
pBuf
->
¡Üage
[pBuf->
curL’
++] = (è
ic
;

210 } 
ic
 != 0);

213 
	}
}

221 
	$ebR—dD©a
(
Ex·ndBuf
* 
pBuf
, 
FILE
* 
š
, 
size_t
 
couÁ
, 
eofEx³ùed
)

223 
size_t
 
aùu®
;

225 
	`as£¹
(
couÁ
 > 0);

227 
	`ebEnsu»C­ac™y
(
pBuf
, 
couÁ
);

228 
aùu®
 = 
	`ä—d
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 1, 
couÁ
, 
š
);

229 ià(
aùu®
 !ğ
couÁ
) {

230 ià(
eofEx³ùed
 && 
	`ãof
(
š
è&& !
	`ã¼Ü
(in)) {

233 
	`årštf
(
¡d”r
, "ERROR:„—d %d oà%d by‹s\n", 
aùu®
, 
couÁ
);

238 
pBuf
->
curL’
 +ğ
couÁ
;

239 
	`as£¹
(
pBuf
->
curL’
 <ğpBuf->
maxL’
);

242 
	}
}

247 
	$ebWr™eD©a
(
Ex·ndBuf
* 
pBuf
, 
FILE
* 
out
)

249 
size_t
 
aùu®
;

251 
	`as£¹
(
pBuf
->
curL’
 > 0);

252 
	`as£¹
(
pBuf
->
curL’
 <ğpBuf->
maxL’
);

254 
aùu®
 = 
	`fwr™e
(
pBuf
->
¡Üage
, 1,…Buf->
curL’
, 
out
);

255 ià(
aùu®
 !ğ
pBuf
->
curL’
) {

256 
	`årštf
(
¡d”r
, "ERROR: wr™%d oà%d by‹s\n", 
aùu®
, 
pBuf
->
curL’
);

260 
pBuf
->
curL’
 = 0;

263 
	}
}

275 
ušt16_t
 
	$g‘2BE
(cÚ¡ * 
buf
)

277 
ušt16_t
 
v®
;

279 
v®
 = (
buf
[0] << 8) | buf[1];

280  
v®
;

281 
	}
}

286 
ušt32_t
 
	$g‘4BE
(cÚ¡ * 
buf
)

288 
ušt32_t
 
v®
;

290 
v®
 = (
buf
[0] << 24) | (buf[1] << 16) | (buf[2] << 8) | buf[3];

291  
v®
;

292 
	}
}

297 
	$£t4BE
(* 
buf
, 
ušt32_t
 
v®
)

299 
buf
[0] = 
v®
 >> 24;

300 
buf
[1] = 
v®
 >> 16;

301 
buf
[2] = 
v®
 >> 8;

302 
buf
[3] = 
v®
;

303 
	}
}

308 
	$compu‹BasicL’
(
H´ofBasicTy³
 
basicTy³
)

310 cÚ¡ 
sizes
[] = { -1, -1, 4, -1, 1, 2, 4, 8, 1, 2, 4, 8 };

311 cÚ¡ 
size_t
 
maxSize
 = (
sizes
) / (sizes[0]);

313 
	`as£¹
(
basicTy³
 >= 0);

314 ià(
basicTy³
 >ğ
maxSize
)

316  
sizes
[
basicTy³
];

317 
	}
}

322 
	$compu‹CÏssDumpL’
(cÚ¡ * 
ÜigBuf
, 
Ën
)

324 cÚ¡ * 
buf
 = 
ÜigBuf
;

325 
blockL’
 = 0;

326 
i
, 
couÁ
;

328 
blockL’
 +ğ
kId’tSize
 * 7 + 8;

329 
buf
 +ğ
blockL’
;

330 
Ën
 -ğ
blockL’
;

332 ià(
Ën
 < 0)

335 
couÁ
 = 
	`g‘2BE
(
buf
);

336 
buf
 += 2;

337 
Ën
 -= 2;

338 
	`DBUG
("CDL: 1¡ couÁ i %d\n", 
couÁ
);

339 
i
 = 0; i < 
couÁ
; i++) {

340 
H´ofBasicTy³
 
basicTy³
;

341 
basicL’
;

343 
basicTy³
 = 
buf
[2];

344 
basicL’
 = 
	`compu‹BasicL’
(
basicTy³
);

345 ià(
basicL’
 < 0) {

346 
	`DBUG
("ERROR: inv®id basicTy³ %d\n", 
basicTy³
);

350 
buf
 +ğ2 + 1 + 
basicL’
;

351 
Ën
 -ğ2 + 1 + 
basicL’
;

352 ià(
Ën
 < 0)

356 
couÁ
 = 
	`g‘2BE
(
buf
);

357 
buf
 += 2;

358 
Ën
 -= 2;

359 
	`DBUG
("CDL: 2nd couÁ i %d\n", 
couÁ
);

360 
i
 = 0; i < 
couÁ
; i++) {

361 
H´ofBasicTy³
 
basicTy³
;

362 
basicL’
;

364 
basicTy³
 = 
buf
[
kId’tSize
];

365 
basicL’
 = 
	`compu‹BasicL’
(
basicTy³
);

366 ià(
basicL’
 < 0) {

367 
	`årštf
(
¡d”r
, "ERROR: inv®id basicTy³ %d\n", 
basicTy³
);

371 
buf
 +ğ
kId’tSize
 + 1 + 
basicL’
;

372 
Ën
 -ğ
kId’tSize
 + 1 + 
basicL’
;

373 ià(
Ën
 < 0)

377 
couÁ
 = 
	`g‘2BE
(
buf
);

378 
buf
 += 2;

379 
Ën
 -= 2;

380 
	`DBUG
("CDL: 3rd couÁ i %d\n", 
couÁ
);

381 
i
 = 0; i < 
couÁ
; i++) {

382 
buf
 +ğ
kId’tSize
 + 1;

383 
Ën
 -ğ
kId’tSize
 + 1;

384 ià(
Ën
 < 0)

388 
	`DBUG
("TÙ® cÏs dum°Ën: %d\n", 
buf
 - 
ÜigBuf
);

389  
buf
 - 
ÜigBuf
;

390 
	}
}

395 
	$compu‹In¡ªûDumpL’
(cÚ¡ * 
ÜigBuf
, 
Ën
)

397 
exŒaCouÁ
 = 
	`g‘4BE
(
ÜigBuf
 + 
kId’tSize
 * 2 + 4);

398  
kId’tSize
 * 2 + 8 + 
exŒaCouÁ
;

399 
	}
}

404 
	$compu‹ObjeùA¼ayDumpL’
(cÚ¡ * 
ÜigBuf
, 
Ën
)

406 
¬¿yCouÁ
 = 
	`g‘4BE
(
ÜigBuf
 + 
kId’tSize
 + 4);

407  
kId’tSize
 * 2 + 8 + 
¬¿yCouÁ
 * kIdentSize;

408 
	}
}

413 
	$compu‹Prim™iveA¼ayDumpL’
(cÚ¡ * 
ÜigBuf
, 
Ën
)

415 
¬¿yCouÁ
 = 
	`g‘4BE
(
ÜigBuf
 + 
kId’tSize
 + 4);

416 
H´ofBasicTy³
 
basicTy³
 = 
ÜigBuf
[
kId’tSize
 + 8];

417 
basicL’
 = 
	`compu‹BasicL’
(
basicTy³
);

419  
kId’tSize
 + 9 + 
¬¿yCouÁ
 * 
basicL’
;

420 
	}
}

426 
	$´oûssH—pDump
(
Ex·ndBuf
* 
pBuf
, 
FILE
* 
out
)

428 
Ex·ndBuf
* 
pOutBuf
 = 
	`ebAÎoc
();

429 * 
ÜigBuf
 = 
	`ebG‘Bufãr
(
pBuf
);

430 * 
buf
 = 
ÜigBuf
;

431 
Ën
 = 
	`ebG‘L’gth
(
pBuf
);

432 
»suÉ
 = -1;

434 
pBuf
 = 
NULL
;

437 ià(
	`ebAddD©a
(
pOutBuf
, 
buf
, 
kRecHdrL’
) != 0)

438 
ba
;

440 
buf
 +ğ
kRecHdrL’
;

441 
Ën
 -ğ
kRecHdrL’
;

443 
Ën
 > 0) {

444 
subTy³
 = 
buf
[0];

445 
ju¡Cİy
 = 
TRUE
;

446 
subL’
;

448 
	`DBUG
("--- 0x%02x ", 
subTy³
);

449 
subTy³
) {

451 
HPROF_ROOT_UNKNOWN
:

452 
subL’
 = 
kId’tSize
;

454 
HPROF_ROOT_JNI_GLOBAL
:

455 
subL’
 = 
kId’tSize
 * 2;

457 
HPROF_ROOT_JNI_LOCAL
:

458 
subL’
 = 
kId’tSize
 + 8;

460 
HPROF_ROOT_JAVA_FRAME
:

461 
subL’
 = 
kId’tSize
 + 8;

463 
HPROF_ROOT_NATIVE_STACK
:

464 
subL’
 = 
kId’tSize
 + 4;

466 
HPROF_ROOT_STICKY_CLASS
:

467 
subL’
 = 
kId’tSize
;

469 
HPROF_ROOT_THREAD_BLOCK
:

470 
subL’
 = 
kId’tSize
 + 4;

472 
HPROF_ROOT_MONITOR_USED
:

473 
subL’
 = 
kId’tSize
;

475 
HPROF_ROOT_THREAD_OBJECT
:

476 
subL’
 = 
kId’tSize
 + 8;

478 
HPROF_CLASS_DUMP
:

479 
subL’
 = 
	`compu‹CÏssDumpL’
(
buf
+1, 
Ën
-1);

481 
HPROF_INSTANCE_DUMP
:

482 
subL’
 = 
	`compu‹In¡ªûDumpL’
(
buf
+1, 
Ën
-1);

484 
HPROF_OBJECT_ARRAY_DUMP
:

485 
subL’
 = 
	`compu‹ObjeùA¼ayDumpL’
(
buf
+1, 
Ën
-1);

487 
HPROF_PRIMITIVE_ARRAY_DUMP
:

488 
subL’
 = 
	`compu‹Prim™iveA¼ayDumpL’
(
buf
+1, 
Ën
-1);

492 
HPROF_HEAP_DUMP_INFO
:

493 
ju¡Cİy
 = 
FALSE
;

494 
subL’
 = 
kId’tSize
 + 4;

497 
HPROF_ROOT_INTERNED_STRING
:

498 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

499 
subL’
 = 
kId’tSize
;

501 
HPROF_ROOT_FINALIZING
:

502 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

503 
subL’
 = 
kId’tSize
;

505 
HPROF_ROOT_DEBUGGER
:

506 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

507 
subL’
 = 
kId’tSize
;

509 
HPROF_ROOT_REFERENCE_CLEANUP
:

510 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

511 
subL’
 = 
kId’tSize
;

513 
HPROF_ROOT_VM_INTERNAL
:

514 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

515 
subL’
 = 
kId’tSize
;

517 
HPROF_ROOT_JNI_MONITOR
:

519 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

520 
ju¡Cİy
 = 
FALSE
;

521 
	`ebAddD©a
(
pOutBuf
, 
buf
, 1 + 
kId’tSize
);

522 
subL’
 = 
kId’tSize
 + 8;

524 
HPROF_UNREACHABLE
:

525 
buf
[0] = 
HPROF_ROOT_UNKNOWN
;

526 
subL’
 = 
kId’tSize
;

528 
HPROF_PRIMITIVE_ARRAY_NODATA_DUMP
:

529 
buf
[0] = 
HPROF_PRIMITIVE_ARRAY_DUMP
;

530 
buf
[5] = buf[6] = buf[7] = buf[8] = 0;

531 
subL’
 = 
kId’tSize
 + 9;

536 
	`årštf
(
¡d”r
, "ERROR: unexpected subtype 0x%02x‡t offset %d\n",

537 
subTy³
, 
buf
 - 
ÜigBuf
);

538 
ba
;

541 ià(
ju¡Cİy
) {

543 
	`DBUG
("(%d)\n", 1 + 
subL’
);

544 
	`ebAddD©a
(
pOutBuf
, 
buf
, 1 + 
subL’
);

547 
	`DBUG
("×dv %d)\n", 1 + 
subL’
);

551 
buf
 +ğ1 + 
subL’
;

552 
Ën
 -ğ1 + 
subL’
;

558 
	`£t4BE
(
	`ebG‘Bufãr
(
pOutBuf
è+ 5, 
	`ebG‘L’gth
ÕOutBufè- 
kRecHdrL’
);

560 ià(
	`ebWr™eD©a
(
pOutBuf
, 
out
) != 0)

561 
ba
;

563 
»suÉ
 = 0;

565 
ba
:

566 
	`ebF»e
(
pOutBuf
);

567  
»suÉ
;

568 
	}
}

573 
	$f‹rD©a
(
FILE
* 
š
, FILE* 
out
)

575 cÚ¡ *
magicSŒšg
;

576 
Ex·ndBuf
* 
pBuf
;

577 
»suÉ
 = -1;

579 
pBuf
 = 
	`ebAÎoc
();

580 ià(
pBuf
 =ğ
NULL
)

581 
ba
;

586 ià(
	`ebR—dSŒšg
(
pBuf
, 
š
) != 0)

587 
ba
;

589 
magicSŒšg
 = (cÚ¡ *)
	`ebG‘Bufãr
(
pBuf
);

590 ià(
	`¡rcmp
(
magicSŒšg
, "JAVA PROFILE 1.0.3") != 0) {

591 ià(
	`¡rcmp
(
magicSŒšg
, "JAVA PROFILE 1.0.2") == 0) {

592 
	`årštf
(
¡d”r
, "ERROR: HPROF file‡lready in 1.0.2 format.\n");

594 
	`årštf
(
¡d”r
, "ERROR:ƒxpecting HPROF file format 1.0.3\n");

596 
ba
;

600 (
	`ebG‘Bufãr
(
pBuf
))[17] = '2';

601 ià(
	`ebWr™eD©a
(
pBuf
, 
out
) != 0)

602 
ba
;

609 ià(
	`ebR—dD©a
(
pBuf
, 
š
, 12, 
FALSE
) != 0)

610 
ba
;

611 ià(
	`ebWr™eD©a
(
pBuf
, 
out
) != 0)

612 
ba
;

621 
	`as£¹
(
	`ebG‘L’gth
(
pBuf
) == 0);

624 ià(
	`ebR—dD©a
(
pBuf
, 
š
, 1, 
TRUE
) != 0)

625 
ba
;

626 ià(
	`ãof
(
š
))

630 ià(
	`ebR—dD©a
(
pBuf
, 
š
, 
kRecHdrL’
-1, 
FALSE
) != 0)

631 
ba
;

633 * 
buf
 = 
	`ebG‘Bufãr
(
pBuf
);

634 
ty³
;

635 
time¡amp
, 
Ëngth
;

637 
ty³
 = 
buf
[0];

638 
time¡amp
 = 
	`g‘4BE
(
buf
 + 1);

639 
Ëngth
 = 
	`g‘4BE
(
buf
 + 5);

640 
buf
 = 
NULL
;

643 ià(
Ëngth
 != 0) {

644 ià(
	`ebR—dD©a
(
pBuf
, 
š
, 
Ëngth
, 
FALSE
) != 0)

645 
ba
;

648 ià(
ty³
 =ğ
HPROF_TAG_HEAP_DUMP
 ||

649 
ty³
 =ğ
HPROF_TAG_HEAP_DUMP_SEGMENT
)

651 
	`DBUG
("Processing heap dump 0x%02x (%d bytes)\n",

652 
ty³
, 
Ëngth
);

653 ià(
	`´oûssH—pDump
(
pBuf
, 
out
) != 0)

654 
ba
;

655 
	`ebCË¬
(
pBuf
);

658 
	`DBUG
("K“pšg 0x%02x (%d by‹s)\n", 
ty³
, 
Ëngth
);

659 ià(
	`ebWr™eD©a
(
pBuf
, 
out
) != 0)

660 
ba
;

664 
»suÉ
 = 0;

666 
ba
:

667 
	`ebF»e
(
pBuf
);

668  
»suÉ
;

669 
	}
}

674 
	$maš
(
¬gc
, ** 
¬gv
)

676 
FILE
* 
š
 = 
¡dš
;

677 
FILE
* 
out
 = 
¡dout
;

678 
cc
;

680 ià(
¬gc
 != 3) {

681 
	`årštf
(
¡d”r
, "Usage: hprof-conf infile outfile\n\n");

682 
	`årštf
(
¡d”r
,

685 
	`årštf
(
¡d”r
,

698 ià(
	`¡rcmp
(
¬gv
[1], "-") != 0) {

699 
š
 = 
	`fİ’
(
¬gv
[1], "rb");

700 ià(
š
 =ğ
NULL
) {

701 
	`årštf
(
¡d”r
, "ERROR: failedo open input '%s': %s\n",

702 
¬gv
[1], 
	`¡»¼Ü
(
”ºo
));

706 ià(
	`¡rcmp
(
¬gv
[2], "-") != 0) {

707 
out
 = 
	`fİ’
(
¬gv
[2], "wb");

708 ià(
out
 =ğ
NULL
) {

709 
	`årštf
(
¡d”r
, "ERROR: failedo open output '%s': %s\n",

710 
¬gv
[2], 
	`¡»¼Ü
(
”ºo
));

711 ià(
š
 !ğ
¡dš
)

712 
	`fşo£
(
š
);

717 
cc
 = 
	`f‹rD©a
(
š
, 
out
);

719 ià(
š
 !ğ
¡dš
)

720 
	`fşo£
(
š
);

721 ià(
out
 !ğ
¡dout
)

722 
	`fşo£
(
out
);

723  (
cc
 != 0);

724 
	}
}

	@unit-tests/dvmHumanReadableDescriptor_test.cpp

1 
	~<g‹¡/g‹¡.h
>

3 
	~"D®vik.h
"

5 
	$TEST
(
dvmHumªR—dabËDesütÜ
, 
A¼ayReã»nûs
) {

6 
	`ASSERT_EQ
("java.Ïng.CÏss[]", 
	`dvmHumªR—dabËDesütÜ
("[Ljava/lang/Class;"));

7 
	`ASSERT_EQ
("java.Ïng.CÏss[][]", 
	`dvmHumªR—dabËDesütÜ
("[[Ljava/lang/Class;"));

8 
	}
}

10 
	$TEST
(
dvmHumªR—dabËDesütÜ
, 
SÿÏrReã»nûs
) {

11 
	`ASSERT_EQ
("java.Ïng.SŒšg", 
	`dvmHumªR—dabËDesütÜ
("Ljava.lang.String;"));

12 
	`ASSERT_EQ
("java.Ïng.SŒšg", 
	`dvmHumªR—dabËDesütÜ
("Ljava/lang/String;"));

13 
	}
}

15 
	$TEST
(
dvmHumªR—dabËDesütÜ
, 
Prim™iveA¼ays
) {

16 
	`ASSERT_EQ
("boŞ—n[]", 
	`dvmHumªR—dabËDesütÜ
("[Z"));

17 
	`ASSERT_EQ
("boŞ—n[][]", 
	`dvmHumªR—dabËDesütÜ
("[[Z"));

18 
	`ASSERT_EQ
("by‹[]", 
	`dvmHumªR—dabËDesütÜ
("[B"));

19 
	`ASSERT_EQ
("by‹[][]", 
	`dvmHumªR—dabËDesütÜ
("[[B"));

20 
	`ASSERT_EQ
("ch¬[]", 
	`dvmHumªR—dabËDesütÜ
("[C"));

21 
	`ASSERT_EQ
("ch¬[][]", 
	`dvmHumªR—dabËDesütÜ
("[[C"));

22 
	`ASSERT_EQ
("doubË[]", 
	`dvmHumªR—dabËDesütÜ
("[D"));

23 
	`ASSERT_EQ
("doubË[][]", 
	`dvmHumªR—dabËDesütÜ
("[[D"));

24 
	`ASSERT_EQ
("æßt[]", 
	`dvmHumªR—dabËDesütÜ
("[F"));

25 
	`ASSERT_EQ
("æßt[][]", 
	`dvmHumªR—dabËDesütÜ
("[[F"));

26 
	`ASSERT_EQ
("št[]", 
	`dvmHumªR—dabËDesütÜ
("[I"));

27 
	`ASSERT_EQ
("št[][]", 
	`dvmHumªR—dabËDesütÜ
("[[I"));

28 
	`ASSERT_EQ
("lÚg[]", 
	`dvmHumªR—dabËDesütÜ
("[J"));

29 
	`ASSERT_EQ
("lÚg[][]", 
	`dvmHumªR—dabËDesütÜ
("[[J"));

30 
	`ASSERT_EQ
("shÜt[]", 
	`dvmHumªR—dabËDesütÜ
("[S"));

31 
	`ASSERT_EQ
("shÜt[][]", 
	`dvmHumªR—dabËDesütÜ
("[[S"));

32 
	}
}

34 
	$TEST
(
dvmHumªR—dabËDesütÜ
, 
Prim™iveSÿÏrs
) {

35 
	`ASSERT_EQ
("boŞ—n", 
	`dvmHumªR—dabËDesütÜ
("Z"));

36 
	`ASSERT_EQ
("by‹", 
	`dvmHumªR—dabËDesütÜ
("B"));

37 
	`ASSERT_EQ
("ch¬", 
	`dvmHumªR—dabËDesütÜ
("C"));

38 
	`ASSERT_EQ
("doubË", 
	`dvmHumªR—dabËDesütÜ
("D"));

39 
	`ASSERT_EQ
("æßt", 
	`dvmHumªR—dabËDesütÜ
("F"));

40 
	`ASSERT_EQ
("št", 
	`dvmHumªR—dabËDesütÜ
("I"));

41 
	`ASSERT_EQ
("lÚg", 
	`dvmHumªR—dabËDesütÜ
("J"));

42 
	`ASSERT_EQ
("shÜt", 
	`dvmHumªR—dabËDesütÜ
("S"));

43 
	}
}

	@vm/AllocTracker.cpp

44 
	~"D®vik.h
"

46 
	#kMaxAÎocRecÜdSckD•th
 16

	)

47 
	#kNumAÎocRecÜds
 512

	)

52 
	sAÎocRecÜd
 {

53 
CÏssObjeù
* 
	mşazz
;

54 
u4
 
	msize
;

55 
u2
 
	mth»adId
;

59 cÚ¡ 
M‘hod
* 
	mm‘hod
;

60 
	mpc
;

61 } 
	m¡ackEËm
[
kMaxAÎocRecÜdSckD•th
];

76 
boŞ
 
	$dvmAÎocT¿ck”S¹up
()

79 
	`dvmIn™Mu‹x
(&
gDvm
.
®locT¿ck”Lock
);

82 
	`as£¹
(
gDvm
.
®locRecÜds
 =ğ
NULL
);

84  
Œue
;

85 
	}
}

90 
	$dvmAÎocT¿ck”Shutdown
()

92 
	`ä“
(
gDvm
.
®locRecÜds
);

93 
	`dvmDe¡royMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

94 
	}
}

108 
boŞ
 
	$dvmEÇbËAÎocT¿ck”
()

110 
boŞ
 
»suÉ
 = 
Œue
;

111 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

113 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
) {

114 
	`ALOGI
("Enabling‡llocracker (%dƒntries, %d frames --> %d bytes)",

115 
kNumAÎocRecÜds
, 
kMaxAÎocRecÜdSckD•th
,

116 (
AÎocRecÜd
è* 
kNumAÎocRecÜds
);

117 
gDvm
.
®locRecÜdH—d
 = gDvm.
®locRecÜdCouÁ
 = 0;

118 
gDvm
.
®locRecÜds
 =

119 (
AÎocRecÜd
*è
	`m®loc
((AÎocRecÜdè* 
kNumAÎocRecÜds
);

121 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
)

122 
»suÉ
 = 
çl£
;

125 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

126  
»suÉ
;

127 
	}
}

132 
	$dvmDi§bËAÎocT¿ck”
()

134 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

136 ià(
gDvm
.
®locRecÜds
 !ğ
NULL
) {

137 
	`ä“
(
gDvm
.
®locRecÜds
);

138 
gDvm
.
®locRecÜds
 = 
NULL
;

141 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

142 
	}
}

147 
	$g‘SckF¿mes
(
Th»ad
* 
£lf
, 
AÎocRecÜd
* 
pRec
)

149 
¡ackD•th
 = 0;

150 * 
å
;

152 
å
 = 
£lf
->
š‹½Save
.
curF¿me
;

154 (
å
 !ğ
NULL
è&& (
¡ackD•th
 < 
kMaxAÎocRecÜdSckD•th
)) {

155 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

156 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

158 ià(!
	`dvmIsB»akF¿me
((
u4
*è
å
)) {

159 
pRec
->
¡ackEËm
[
¡ackD•th
].
m‘hod
 = method;

160 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

161 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 = 0;

163 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 &&

164 
§veA»a
->
xŒa
.
cu¼’tPc
 <

165 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

166 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 =

167 (è(
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
);

169 
¡ackD•th
++;

172 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

173 
å
 = 
§veA»a
->
´evF¿me
;

177 
¡ackD•th
 < 
kMaxAÎocRecÜdSckD•th
) {

178 
pRec
->
¡ackEËm
[
¡ackD•th
].
m‘hod
 = 
NULL
;

179 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 = 0;

180 
¡ackD•th
++;

182 
	}
}

187 
	$dvmDoT¿ckAÎoÿtiÚ
(
CÏssObjeù
* 
şazz
, 
size_t
 
size
)

189 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

190 ià(
£lf
 =ğ
NULL
) {

191 
	`ALOGW
("allocracker:‚ohread");

195 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

196 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
) {

197 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

202 ià(++
gDvm
.
®locRecÜdH—d
 =ğ
kNumAÎocRecÜds
)

203 
gDvm
.
®locRecÜdH—d
 = 0;

205 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[gDvm.
®locRecÜdH—d
];

207 
pRec
->
şazz
 = clazz;

208 
pRec
->
size
 = size;

209 
pRec
->
th»adId
 = 
£lf
->threadId;

210 
	`g‘SckF¿mes
(
£lf
, 
pRec
);

212 ià(
gDvm
.
®locRecÜdCouÁ
 < 
kNumAÎocRecÜds
)

213 
gDvm
.
®locRecÜdCouÁ
++;

215 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

216 
	}
}

267 cÚ¡ 
	gkMes§geH—d”L’
 = 15;

268 cÚ¡ 
	gkEÁryH—d”L’
 = 9;

269 cÚ¡ 
	gkSckF¿meL’
 = 8;

281 
šlše
 
	$h—dIndex
()

283  (
gDvm
.
®locRecÜdH—d
+1 + 
kNumAÎocRecÜds
 - gDvm.
®locRecÜdCouÁ
)

284 & (
kNumAÎocRecÜds
-1);

285 
	}
}

290 
	$dumpSŒšgTabË
(
Poš‹rS‘
* 
¡ršgs
)

292 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

293 
i
;

295 
i
 = 0; i < 
couÁ
; i++)

296 
	`´štf
(" %s\n", (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
));

297 
	}
}

303 cÚ¡ * 
	$g‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘hod
)

305 cÚ¡ * 
feName
 = 
	`dvmG‘M‘hodSourûFe
(
m‘hod
);

306 ià(
feName
 =ğ
NULL
)

307 
feName
 = "";

308  
feName
;

309 
	}
}

322 
boŞ
 
	$pİuÏ‹SŒšgTabËs
(
Poš‹rS‘
* 
şassNames
,

323 
Poš‹rS‘
* 
m‘hodNames
, Poš‹rS‘* 
feNames
)

325 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

326 
idx
 = 
	`h—dIndex
();

327 
şassCouÁ
, 
m‘hodCouÁ
, 
feCouÁ
;

329 
şassCouÁ
 = 
m‘hodCouÁ
 = 
feCouÁ
 = 0;

331 
couÁ
--) {

332 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

334 
	`dvmPoš‹rS‘AddEÁry
(
şassNames
, 
pRec
->
şazz
->
desütÜ
);

335 
şassCouÁ
++;

337 
i
;

338 
i
 = 0; i < 
kMaxAÎocRecÜdSckD•th
; i++) {

339 ià(
pRec
->
¡ackEËm
[
i
].
m‘hod
 =ğ
NULL
)

342 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

343 
	`dvmPoš‹rS‘AddEÁry
(
şassNames
, 
m‘hod
->
şazz
->
desütÜ
);

344 
şassCouÁ
++;

345 
	`dvmPoš‹rS‘AddEÁry
(
m‘hodNames
, 
m‘hod
->
Çme
);

346 
m‘hodCouÁ
++;

347 
	`dvmPoš‹rS‘AddEÁry
(
feNames
, 
	`g‘M‘hodSourûFe
(
m‘hod
));

348 
feCouÁ
++;

351 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

354 
	`ALOGI
("class %d/%d, method %d/%d, file %d/%d",

355 
	`dvmPoš‹rS‘G‘CouÁ
(
şassNames
), 
şassCouÁ
,

356 
	`dvmPoš‹rS‘G‘CouÁ
(
m‘hodNames
), 
m‘hodCouÁ
,

357 
	`dvmPoš‹rS‘G‘CouÁ
(
feNames
), 
feCouÁ
);

359  
Œue
;

360 
	}
}

372 
size_t
 
	$g’”©eBa£Ouut
(
u1
* 
±r
, 
size_t
 
ba£L’
,

373 cÚ¡ 
Poš‹rS‘
* 
şassNames
, cÚ¡ Poš‹rS‘* 
m‘hodNames
,

374 cÚ¡ 
Poš‹rS‘
* 
feNames
)

376 
u1
* 
ÜigPŒ
 = 
±r
;

377 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

378 
idx
 = 
	`h—dIndex
();

380 ià(
ÜigPŒ
 !ğ
NULL
) {

381 
	`£t1
(&
±r
[0], 
kMes§geH—d”L’
);

382 
	`£t1
(&
±r
[1], 
kEÁryH—d”L’
);

383 
	`£t1
(&
±r
[2], 
kSckF¿meL’
);

384 
	`£t2BE
(&
±r
[3], 
couÁ
);

385 
	`£t4BE
(&
±r
[5], 
ba£L’
);

386 
	`£t2BE
(&
±r
[9], 
	`dvmPoš‹rS‘G‘CouÁ
(
şassNames
));

387 
	`£t2BE
(&
±r
[11], 
	`dvmPoš‹rS‘G‘CouÁ
(
m‘hodNames
));

388 
	`£t2BE
(&
±r
[13], 
	`dvmPoš‹rS‘G‘CouÁ
(
feNames
));

390 
±r
 +ğ
kMes§geH—d”L’
;

392 
couÁ
--) {

393 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

396 
d•th
;

397 
d•th
 = 0; d•th < 
kMaxAÎocRecÜdSckD•th
; depth++) {

398 ià(
pRec
->
¡ackEËm
[
d•th
].
m‘hod
 =ğ
NULL
)

403 ià(
ÜigPŒ
 !ğ
NULL
) {

404 
	`£t4BE
(&
±r
[0], 
pRec
->
size
);

405 
	`£t2BE
(&
±r
[4], 
pRec
->
th»adId
);

406 
	`£t2BE
(&
±r
[6],

407 
	`dvmPoš‹rS‘Fšd
(
şassNames
, 
pRec
->
şazz
->
desütÜ
));

408 
	`£t1
(&
±r
[8], 
d•th
);

410 
±r
 +ğ
kEÁryH—d”L’
;

413 
i
;

414 
i
 = 0; i < 
d•th
; i++) {

415 ià(
ÜigPŒ
 !ğ
NULL
) {

416 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

417 
lšeNum
;

419 
lšeNum
 = 
	`dvmLšeNumFromPC
(
m‘hod
, 
pRec
->
¡ackEËm
[
i
].
pc
);

420 ià(
lšeNum
 > 32767)

421 
lšeNum
 = 32767;

423 
	`£t2BE
(&
±r
[0], 
	`dvmPoš‹rS‘Fšd
(
şassNames
,

424 
m‘hod
->
şazz
->
desütÜ
));

425 
	`£t2BE
(&
±r
[2], 
	`dvmPoš‹rS‘Fšd
(
m‘hodNames
,

426 
m‘hod
->
Çme
));

427 
	`£t2BE
(&
±r
[4], 
	`dvmPoš‹rS‘Fšd
(
feNames
,

428 
	`g‘M‘hodSourûFe
(
m‘hod
)));

429 
	`£t2BE
(&
±r
[6], (
u2
)
lšeNum
);

431 
±r
 +ğ
kSckF¿meL’
;

434 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

437  
±r
 - 
ÜigPŒ
;

438 
	}
}

444 
size_t
 
	$compu‹SŒšgTabËSize
(
Poš‹rS‘
* 
¡ršgs
)

446 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

447 
size_t
 
size
 = 0;

448 
i
;

450 
i
 = 0; i < 
couÁ
; i++) {

451 cÚ¡ * 
¡r
 = (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
);

453 
size
 +ğ4 + 
	`dvmUtf8L’
(
¡r
) * 2;

456  
size
;

457 
	}
}

465 
	$cÚv”tUtf8ToUtf16BEUA
(
u1
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
)

467 
u1
* 
ÜigUtf16SŒ
 = 
utf16SŒ
;

469 *
utf8SŒ
 != '\0') {

470 
u2
 
utf16
 = 
	`dexG‘Utf16FromUtf8
(&
utf8SŒ
);

471 
	`£t2BE
(
utf16SŒ
, 
utf16
);

472 
utf16SŒ
 += 2;

475  (
utf16SŒ
 - 
ÜigUtf16SŒ
) / 2;

476 
	}
}

481 
size_t
 
	$ouutSŒšgTabË
(
Poš‹rS‘
* 
¡ršgs
, 
u1
* 
±r
)

483 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

484 
u1
* 
ÜigPŒ
 = 
±r
;

485 
i
;

487 
i
 = 0; i < 
couÁ
; i++) {

488 cÚ¡ * 
¡r
 = (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
);

489 
ch¬L’
;

492 
ch¬L’
 = 
	`cÚv”tUtf8ToUtf16BEUA
(&
±r
[4], 
¡r
);

493 
	`£t4BE
(&
±r
[0], 
ch¬L’
);

495 
±r
 +ğ4 + 
ch¬L’
 * 2;

498  
±r
 - 
ÜigPŒ
;

499 
	}
}

506 
boŞ
 
	$dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(
u1
** 
pD©a
, 
size_t
* 
pD©aL’
)

508 
boŞ
 
»suÉ
 = 
çl£
;

509 
u1
* 
bufãr
 = 
NULL
;

511 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

516 
Poš‹rS‘
* 
şassNames
 = 
NULL
;

517 
Poš‹rS‘
* 
m‘hodNames
 = 
NULL
;

518 
Poš‹rS‘
* 
feNames
 = 
NULL
;

526 
şassNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

527 
m‘hodNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

528 
feNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

529 ià(
şassNames
 =ğ
NULL
 || 
m‘hodNames
 =ğNULL || 
feNames
 == NULL) {

530 
	`ALOGE
("Failed‡llocating…ointer sets");

531 
ba
;

534 ià(!
	`pİuÏ‹SŒšgTabËs
(
şassNames
, 
m‘hodNames
, 
feNames
))

535 
ba
;

537 ià(
çl£
) {

538 
	`´štf
("Classes:\n");

539 
	`dumpSŒšgTabË
(
şassNames
);

540 
	`´štf
("Methods:\n");

541 
	`dumpSŒšgTabË
(
m‘hodNames
);

542 
	`´štf
("Files:\n");

543 
	`dumpSŒšgTabË
(
feNames
);

551 
size_t
 
ba£Size
, 
tÙ®Size
;

552 
ba£Size
 = 
	`g’”©eBa£Ouut
(
NULL
, 0, 
şassNames
, 
m‘hodNames
, 
feNames
);

553 
	`as£¹
(
ba£Size
 > 0);

554 
tÙ®Size
 = 
ba£Size
;

555 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
şassNames
);

556 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
m‘hodNames
);

557 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
feNames
);

558 
	`ALOGI
("G’”©ed AT, sizi %zd/%zd", 
ba£Size
, 
tÙ®Size
);

563 
u1
* 
¡rPŒ
;

565 
bufãr
 = (
u1
*è
	`m®loc
(
tÙ®Size
);

566 
¡rPŒ
 = 
bufãr
 + 
ba£Size
;

567 
	`g’”©eBa£Ouut
(
bufãr
, 
ba£Size
, 
şassNames
, 
m‘hodNames
, 
feNames
);

568 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
şassNames
, strPtr);

569 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
m‘hodNames
, strPtr);

570 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
feNames
, strPtr);

571 ià(
¡rPŒ
 - 
bufãr
 !ğ()
tÙ®Size
) {

572 
	`ALOGE
("sizmism©ch (%d v %zd)", 
¡rPŒ
 - 
bufãr
, 
tÙ®Size
);

573 
	`dvmAbÜt
();

577 *
pD©a
 = 
bufãr
;

578 *
pD©aL’
 = 
tÙ®Size
;

579 
bufãr
 = 
NULL
;

580 
»suÉ
 = 
Œue
;

582 
ba
:

583 
	`dvmPoš‹rS‘F»e
(
şassNames
);

584 
	`dvmPoš‹rS‘F»e
(
m‘hodNames
);

585 
	`dvmPoš‹rS‘F»e
(
feNames
);

586 
	`ä“
(
bufãr
);

587 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

589  
»suÉ
;

590 
	}
}

598 
	$dvmDumpT¿ckedAÎoÿtiÚs
(
boŞ
 
’abË
)

600 ià(
’abË
)

601 
	`dvmEÇbËAÎocT¿ck”
();

603 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

604 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
) {

605 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

613 
idx
 = 
	`h—dIndex
();

614 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

616 
	`ALOGI
("Tracked‡llocations, (head=%d count=%d)",

617 
gDvm
.
®locRecÜdH—d
, 
couÁ
);

618 
couÁ
--) {

619 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

620 
	`ALOGI
(" T=%-2d %6d %s",

621 
pRec
->
th»adId
,…Rec->
size
,…Rec->
şazz
->
desütÜ
);

623 ià(
Œue
) {

624 
i
 = 0; i < 
kMaxAÎocRecÜdSckD•th
; i++) {

625 ià(
pRec
->
¡ackEËm
[
i
].
m‘hod
 =ğ
NULL
)

628 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

629 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

630 
	`ALOGI
(" %s.%s (Native)",

631 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

633 
	`ALOGI
(" %s.%s +%d",

634 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

635 
pRec
->
¡ackEËm
[
i
].
pc
);

641 ià((
couÁ
 % 5) == 0)

642 
	`u¦“p
(40000);

644 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

647 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

648 ià(
çl£
) {

649 
u1
* 
d©a
;

650 
size_t
 
d©aL’
;

651 ià(
	`dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(&
d©a
, &
d©aL’
))

652 
	`ä“
(
d©a
);

654 
	}
}

	@vm/AllocTracker.h

19 #iâdeà
DALVIK_ALLOCTRACKER_H_


20 
	#DALVIK_ALLOCTRACKER_H_


	)

23 
boŞ
 
dvmAÎocT¿ck”S¹up
();

24 
dvmAÎocT¿ck”Shutdown
();

26 
	gAÎocRecÜd
;

31 
boŞ
 
dvmEÇbËAÎocT¿ck”
();

36 
dvmDi§bËAÎocT¿ck”
();

41 
	#dvmT¿ckAÎoÿtiÚ
(
_şazz
, 
_size
) \

43 ià(
gDvm
.
®locRecÜds
 !ğ
NULL
) \

44 
	`dvmDoT¿ckAÎoÿtiÚ
(
_şazz
, 
_size
); \

45 }

	)

46 
dvmDoT¿ckAÎoÿtiÚ
(
CÏssObjeù
* 
şazz
, 
size_t
 
size
);

54 
boŞ
 
dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(
u1
** 
pD©a
, 
size_t
* 
pD©aL’
);

60 
dvmDumpT¿ckedAÎoÿtiÚs
(
boŞ
 
’abË
);

	@vm/Atomic.cpp

17 
	~"D®vik.h
"

19 
	~<cuts/©omic.h
>

29 #ià
defšed
(
HAVE_MACOSX_IPC
)

31 
	~<libk”n/OSAtomic.h
>

33 #ià
defšed
(
__µc__
) \

34 || 
defšed
(
__PPC__
) \

35 || 
defšed
(
__pow”pc__
) \

36 || 
defšed
(
__pow”pc
) \

37 || 
defšed
(
__POWERPC__
) \

38 || 
defšed
(
_M_PPC
) \

39 || 
	$defšed
(
__PPC
)

40 
	#NEED_QUASIATOMICS
 1

	)

43 
	$dvmQuasiAtomicCas64
(
št64_t
 
Şdv®ue
, iÁ64_ˆ
Ãwv®ue
,

44 vŞ©
št64_t
* 
addr
)

46  
	`OSAtomicCom·»AndSw­64B¬r›r
(
Şdv®ue
, 
Ãwv®ue
,

47 (
št64_t
*)
addr
) == 0;

48 
	}
}

51 
šlše
 
št64_t
 
	$dvmQuasiAtomicSw­64Body
(
št64_t
 
v®ue
,

52 vŞ©
št64_t
* 
addr
)

54 
št64_t
 
ŞdV®ue
;

56 
ŞdV®ue
 = *
addr
;

57 } 
	`dvmQuasiAtomicCas64
(
ŞdV®ue
, 
v®ue
, 
addr
));

58  
ŞdV®ue
;

59 
	}
}

61 
št64_t
 
	$dvmQuasiAtomicSw­64
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

63  
	`dvmQuasiAtomicSw­64Body
(
v®ue
, 
addr
);

64 
	}
}

66 
št64_t
 
	$dvmQuasiAtomicSw­64Sync
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

68 
št64_t
 
ŞdV®ue
;

69 
	`ANDROID_MEMBAR_STORE
();

70 
ŞdV®ue
 = 
	`dvmQuasiAtomicSw­64Body
(
v®ue
, 
addr
);

72 
	`ANDROID_MEMBAR_FULL
();

73  
ŞdV®ue
;

74 
	}
}

76 
št64_t
 
	$dvmQuasiAtomicR—d64
(vŞ©cÚ¡ 
št64_t
* 
addr
)

78  
	`OSAtomicAdd64B¬r›r
(0, 
addr
);

79 
	}
}

82 #–ià
defšed
(
__i386__
è|| defšed(
__x86_64__
)

83 
	#NEED_QUASIATOMICS
 1

	)

85 #–ià
__¬m__


86 
	~<machše/ıu-ã©u»s.h
>

89 #ià
defšed
(
__ARM_HAVE_LDREXD
è&& !defšed(
__şªg__
)

90 
šlše
 
št64_t
 
	$dvmQuasiAtomicSw­64Body
(
št64_t
 
Ãwv®ue
,

91 vŞ©
št64_t
* 
addr
)

93 
št64_t
 
´ev
;

94 
¡©us
;

96 
__asm__
 
	`__vŞ©e__
 ("@ dvmQuasiAtomicSwap64\n"

99 : "=&r" (
´ev
), "=&r" (
¡©us
), "+m"(*
addr
)

100 : "r" (
addr
), "r" (
Ãwv®ue
)

102 } 
	`__butš_ex³ù
(
¡©us
 != 0, 0));

103  
´ev
;

104 
	}
}

106 
št64_t
 
	$dvmQuasiAtomicSw­64
(
št64_t
 
Ãwv®ue
, vŞ©št64_t* 
addr
)

108  
	`dvmQuasiAtomicSw­64Body
(
Ãwv®ue
, 
addr
);

109 
	}
}

111 
št64_t
 
	$dvmQuasiAtomicSw­64Sync
(
št64_t
 
Ãwv®ue
, vŞ©št64_t* 
addr
)

113 
št64_t
 
´ev
;

114 
	`ANDROID_MEMBAR_STORE
();

115 
´ev
 = 
	`dvmQuasiAtomicSw­64Body
(
Ãwv®ue
, 
addr
);

116 
	`ANDROID_MEMBAR_FULL
();

117  
´ev
;

118 
	}
}

120 
	$dvmQuasiAtomicCas64
(
št64_t
 
Şdv®ue
, iÁ64_ˆ
Ãwv®ue
,

121 vŞ©
št64_t
* 
addr
)

123 
št64_t
 
´ev
;

124 
¡©us
;

126 
__asm__
 
	`__vŞ©e__
 ("@ dvmQuasiAtomicCas64\n"

132 : "=&r" (
´ev
), "=&r" (
¡©us
), "+m"(*
addr
)

133 : "r" (
addr
), "Ir" (
Şdv®ue
), "r" (
Ãwv®ue
)

135 } 
	`__butš_ex³ù
(
¡©us
 != 0, 0));

136  
´ev
 !ğ
Şdv®ue
;

137 
	}
}

139 
št64_t
 
	$dvmQuasiAtomicR—d64
(vŞ©cÚ¡ 
št64_t
* 
addr
)

141 
št64_t
 
v®ue
;

142 
__asm__
 
	`__vŞ©e__
 ("@ dvmQuasiAtomicRead64\n"

144 : "=&r" (
v®ue
)

145 : "r" (
addr
));

146  
v®ue
;

147 
	}
}

166 
	~<±h»ad.h
>

168 
	#SWAP_LOCK_COUNT
 32U

	)

169 
±h»ad_mu‹x_t
 
	g_sw­_locks
[
SWAP_LOCK_COUNT
];

171 
	#SWAP_LOCK
(
addr
) \

172 &
_sw­_locks
[(()(*)(
addr
è>> 3Uè% 
SWAP_LOCK_COUNT
]

	)

175 
št64_t
 
	$dvmQuasiAtomicSw­64
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

177 
št64_t
 
ŞdV®ue
;

178 
±h»ad_mu‹x_t
* 
lock
 = 
	`SWAP_LOCK
(
addr
);

180 
	`±h»ad_mu‹x_lock
(
lock
);

182 
ŞdV®ue
 = *
addr
;

183 *
addr
 = 
v®ue
;

185 
	`±h»ad_mu‹x_uÆock
(
lock
);

186  
ŞdV®ue
;

187 
	}
}

190 
št64_t
 
	$dvmQuasiAtomicSw­64Sync
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

192  
	`dvmQuasiAtomicSw­64
(
v®ue
, 
addr
);

193 
	}
}

195 
	$dvmQuasiAtomicCas64
(
št64_t
 
Şdv®ue
, iÁ64_ˆ
Ãwv®ue
,

196 vŞ©
št64_t
* 
addr
)

198 
»suÉ
;

199 
±h»ad_mu‹x_t
* 
lock
 = 
	`SWAP_LOCK
(
addr
);

201 
	`±h»ad_mu‹x_lock
(
lock
);

203 ià(*
addr
 =ğ
Şdv®ue
) {

204 *
addr
 = 
Ãwv®ue
;

205 
»suÉ
 = 0;

207 
»suÉ
 = 1;

209 
	`±h»ad_mu‹x_uÆock
(
lock
);

210  
»suÉ
;

211 
	}
}

213 
št64_t
 
	$dvmQuasiAtomicR—d64
(vŞ©cÚ¡ 
št64_t
* 
addr
)

215 
št64_t
 
»suÉ
;

216 
±h»ad_mu‹x_t
* 
lock
 = 
	`SWAP_LOCK
(
addr
);

218 
	`±h»ad_mu‹x_lock
(
lock
);

219 
»suÉ
 = *
addr
;

220 
	`±h»ad_mu‹x_uÆock
(
lock
);

221  
»suÉ
;

222 
	}
}

227 #–ià
__sh__


228 
	#NEED_QUASIATOMICS
 1

	)

235 #ià
NEED_QUASIATOMICS


257 
št32_t
 
	gquasŸtomic_¥šlock
 = 0;

259 
	$dvmQuasiAtomicCas64
(
št64_t
 
Şdv®ue
, iÁ64_ˆ
Ãwv®ue
,

260 vŞ©
št64_t
* 
addr
)

262 
»suÉ
;

264 
	`ªdroid_©omic_acquœe_ÿs
(0, 1, &
quasŸtomic_¥šlock
)) {

265 #ifdeà
HAVE_WIN32_THREADS


266 
	`SË•
(0);

268 
	`sched_y›ld
();

272 ià(*
addr
 =ğ
Şdv®ue
) {

273 *
addr
 = 
Ãwv®ue
;

274 
»suÉ
 = 0;

276 
»suÉ
 = 1;

279 
	`ªdroid_©omic_»Ëa£_¡Üe
(0, &
quasŸtomic_¥šlock
);

281  
»suÉ
;

282 
	}
}

284 
št64_t
 
	$dvmQuasiAtomicR—d64
(vŞ©cÚ¡ 
št64_t
* 
addr
)

286 
št64_t
 
»suÉ
;

288 
	`ªdroid_©omic_acquœe_ÿs
(0, 1, &
quasŸtomic_¥šlock
)) {

289 #ifdeà
HAVE_WIN32_THREADS


290 
	`SË•
(0);

292 
	`sched_y›ld
();

296 
»suÉ
 = *
addr
;

297 
	`ªdroid_©omic_»Ëa£_¡Üe
(0, &
quasŸtomic_¥šlock
);

299  
»suÉ
;

300 
	}
}

302 
št64_t
 
	$dvmQuasiAtomicSw­64
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

304 
št64_t
 
»suÉ
;

306 
	`ªdroid_©omic_acquœe_ÿs
(0, 1, &
quasŸtomic_¥šlock
)) {

307 #ifdeà
HAVE_WIN32_THREADS


308 
	`SË•
(0);

310 
	`sched_y›ld
();

314 
»suÉ
 = *
addr
;

315 *
addr
 = 
v®ue
;

316 
	`ªdroid_©omic_»Ëa£_¡Üe
(0, &
quasŸtomic_¥šlock
);

318  
»suÉ
;

319 
	}
}

322 
št64_t
 
	$dvmQuasiAtomicSw­64Sync
(
št64_t
 
v®ue
, vŞ©št64_t* 
addr
)

324  
	`dvmQuasiAtomicSw­64
(
v®ue
, 
addr
);

325 
	}
}

	@vm/Atomic.h

20 #iâdeà
DALVIK_ATOMIC_H_


21 
	#DALVIK_ATOMIC_H_


	)

23 
	~<cuts/©omic.h
>

24 
	~<cuts/©omic-šlše.h
>

41 "C" 
št64_t
 
dvmQuasiAtomicSw­64
(št64_ˆ
v®ue
, vŞ©št64_t* 
addr
);

47 "C" 
št64_t
 
dvmQuasiAtomicSw­64Sync
(št64_ˆ
v®ue
,

48 vŞ©
št64_t
* 
addr
);

53 "C" 
št64_t
 
dvmQuasiAtomicR—d64
(vŞ©cÚ¡ iÁ64_t* 
addr
);

59 
dvmQuasiAtomicCas64
(
št64_t
 
Şdv®ue
, iÁ64_ˆ
Ãwv®ue
,

60 vŞ©
št64_t
* 
addr
);

	@vm/AtomicCache.cpp

21 
	~"D®vik.h
"

23 
	~<¡dlib.h
>

29 
	#BOOL_TO_INT
(
x
è(x)

	)

32 
	#CPU_CACHE_WIDTH
 32

	)

33 
	#CPU_CACHE_WIDTH_1
 (
CPU_CACHE_WIDTH
-1)

	)

35 
	#ATOMIC_LOCK_FLAG
 (1 << 31)

	)

40 
AtomicCache
* 
	$dvmAÎocAtomicCache
(
numEÁr›s
)

42 
AtomicCache
* 
ÃwCache
;

44 
ÃwCache
 = (
AtomicCache
*è
	`ÿÎoc
(1, (AtomicCache));

45 ià(
ÃwCache
 =ğ
NULL
)

46  
NULL
;

48 
ÃwCache
->
numEÁr›s
 =‚umEntries;

50 
ÃwCache
->
’ŒyAÎoc
 = 
	`ÿÎoc
(1,

51 (
AtomicCacheEÁry
è* 
numEÁr›s
 + 
CPU_CACHE_WIDTH
);

52 ià(
ÃwCache
->
’ŒyAÎoc
 =ğ
NULL
)

53  
NULL
;

60 
	`as£¹
((
AtomicCacheEÁry
) == 16);

61 
ÃwCache
->
’Œ›s
 = (
AtomicCacheEÁry
*)

62 (((è
ÃwCache
->
’ŒyAÎoc
 + 
CPU_CACHE_WIDTH_1
) & ~CPU_CACHE_WIDTH_1);

64  
ÃwCache
;

65 
	}
}

70 
	$dvmF»eAtomicCache
(
AtomicCache
* 
ÿche
)

72 ià(
ÿche
 !ğ
NULL
) {

73 
	`ä“
(
ÿche
->
’ŒyAÎoc
);

74 
	`ä“
(
ÿche
);

76 
	}
}

86 
dvmUpd©eAtomicCache
(
u4
 
key1
, u4 
key2
, u4 
v®ue
, 
AtomicCacheEÁry
* 
pEÁry
,

87 
u4
 
fœ¡V”siÚ


88 #ià
CALC_CACHE_STATS
 > 0

89 , 
AtomicCache
* 
pCache


108 ià((
	gfœ¡V”siÚ
 & 
	gATOMIC_LOCK_FLAG
) != 0 ||

109 
ªdroid_©omic_»Ëa£_ÿs
(

110 
fœ¡V”siÚ
, fœ¡V”siÚ | 
ATOMIC_LOCK_FLAG
,

111 (vŞ©
s4
*è&
pEÁry
->
v”siÚ
) != 0)

116 #ià
CALC_CACHE_STATS
 > 0

117 
pCache
->
ç
++;

123 
as£¹
((
fœ¡V”siÚ
 & 0x01) == 0);

125 #ià
CALC_CACHE_STATS
 > 0

127 ià(
	gpEÁry
->
	gkey1
 == 0)

128 
pCache
->
fls
++;

130 
	gpCache
->
	gmis£s
++;

138 
u4
 
	gÃwV”siÚ
 = (
fœ¡V”siÚ
 | 
ATOMIC_LOCK_FLAG
) + 1;

139 
as£¹
((
ÃwV”siÚ
 & 0x01) == 1);

141 
	gpEÁry
->
	gv”siÚ
 = 
ÃwV”siÚ
;

143 
ªdroid_©omic_»Ëa£_¡Üe
(
key1
, (
št32_t
*è&
pEÁry
->key1);

144 
	gpEÁry
->
	gkey2
 = 
key2
;

145 
	gpEÁry
->
	gv®ue
 = 
v®ue
;

147 
	gÃwV”siÚ
++;

148 
ªdroid_©omic_»Ëa£_¡Üe
(
ÃwV”siÚ
, (
št32_t
*è&
pEÁry
->
v”siÚ
);

154 
as£¹
(
ÃwV”siÚ
 =ğ((
fœ¡V”siÚ
 + 2è| 
ATOMIC_LOCK_FLAG
));

155 ià(
ªdroid_©omic_»Ëa£_ÿs
(

156 
ÃwV”siÚ
,‚ewV”siÚ & ~
ATOMIC_LOCK_FLAG
,

157 (vŞ©
s4
*è&
pEÁry
->
v”siÚ
) != 0)

160 
dvmAbÜt
();

168 
	$dvmDumpAtomicCacheSts
(cÚ¡ 
AtomicCache
* 
pCache
)

170 ià(
pCache
 =ğ
NULL
)

172 
	`dvmF´štf
(
¡dout
,

174 
pCache
->
ŒivŸl
,…Cache->
ç
,…Cache->
h™s
,

175 
pCache
->
mis£s
,…Cache->
fls
,

176 (
pCache
->
h™s
 == 0) ? 0 :

177 
pCache
->
h™s
 * 100 /

178 (
pCache
->
ç
 +…Cache->
h™s
 +…Cache->
mis£s
 +…Cache->
fls
),

179 
pCache
->
numEÁr›s
);

180 
	}
}

	@vm/AtomicCache.h

19 #iâdeà
DALVIK_ATOMICCACHE_H_


20 
	#DALVIK_ATOMICCACHE_H_


	)

25 
	#CALC_CACHE_STATS
 0

	)

34 
	sAtomicCacheEÁry
 {

35 
u4
 
	mkey1
;

36 
u4
 
	mkey2
;

37 
u4
 
	mv®ue
;

38 vŞ©
u4
 
	mv”siÚ
;

48 
	sAtomicCache
 {

49 
AtomicCacheEÁry
* 
	m’Œ›s
;

50 
	mnumEÁr›s
;

52 * 
	m’ŒyAÎoc
;

55 
	mŒivŸl
;

56 
	mç
;

57 
	mh™s
;

58 
	mmis£s
;

59 
	mfls
;

90 #ià
CALC_CACHE_STATS
 > 0

91 
	#CACHE_XARG
(
_v®ue
è,
	)
_value

93 
	#CACHE_XARG
(
_v®ue
)

	)

95 
	#ATOMIC_CACHE_LOOKUP
(
_ÿche
, 
_ÿcheSize
, 
_key1
, 
_key2
) ({ \

96 
AtomicCacheEÁry
* 
pEÁry
; \

97 
hash
; \

98 
u4
 
fœ¡V”siÚ
, 
£cÚdV”siÚ
; \

99 
u4
 
v®ue
; \

102 
hash
 = (((
u4
)(
_key1
è>> 2è^ (u4)(
_key2
)è& ((
_ÿcheSize
)-1); \

103 
pEÁry
 = (
_ÿche
)->
’Œ›s
 + 
hash
; \

105 
fœ¡V”siÚ
 = 
	`ªdroid_©omic_acquœe_lßd
((
št32_t
*)&
pEÁry
->
v”siÚ
); \

107 ià(
pEÁry
->
key1
 =ğ(
u4
)(
_key1
è&&…EÁry->
key2
 =ğ(u4)(
_key2
)) { \

114 
v®ue
 = 
	`ªdroid_©omic_acquœe_lßd
((
št32_t
*è&
pEÁry
->value); \

115 
£cÚdV”siÚ
 = 
pEÁry
->
v”siÚ
; \

117 ià((
fœ¡V”siÚ
 & 0x01è!ğ0 || fœ¡V”siÚ !ğ
£cÚdV”siÚ
) { \

123 ià(
CALC_CACHE_STATS
) \

124 (
_ÿche
)->
ç
++; \

125 
v®ue
 = (
u4
è
ATOMIC_CACHE_CALC
; \

128 ià(
CALC_CACHE_STATS
) \

129 (
_ÿche
)->
h™s
++; \

138 
v®ue
 = (
u4
è
ATOMIC_CACHE_CALC
; \

139 
	`dvmUpd©eAtomicCache
((
u4
è(
_key1
), (u4è(
_key2
), 
v®ue
, 
pEÁry
, \

140 
fœ¡V”siÚ
 
	`CACHE_XARG
(
_ÿche
) ); \

142 
v®ue
; \

143 })

	)

148 
AtomicCache
* 
dvmAÎocAtomicCache
(
numEÁr›s
);

153 
dvmF»eAtomicCache
(
AtomicCache
* 
ÿche
);

161 
dvmUpd©eAtomicCache
(
u4
 
key1
, u4 
key2
, u4 
v®ue
, 
AtomicCacheEÁry
* 
pEÁry
,

162 
u4
 
fœ¡V”siÚ


163 #ià
CALC_CACHE_STATS
 > 0

164 , 
AtomicCache
* 
pCache


171 
dvmDumpAtomicCacheSts
(cÚ¡ 
AtomicCache
* 
pCache
);

	@vm/BitVector.cpp

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

23 
	~<¡ršgs.h
>

25 
	#kB™VeùÜGrowth
 4

	)

32 
B™VeùÜ
* 
	$dvmAÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
)

34 
B™VeùÜ
* 
bv
;

35 
couÁ
;

37 
	`as£¹
((
bv
->
¡Üage
[0]) == 4);

39 
bv
 = (
B™VeùÜ
*è
	`m®loc
((BitVector));

41 
couÁ
 = (
¡¬tB™s
 + 31) >> 5;

43 
bv
->
¡ÜageSize
 = 
couÁ
;

44 
bv
->
ex·ndabË
 =ƒxpandable;

45 
bv
->
¡Üage
 = (
u4
*è
	`ÿÎoc
(
couÁ
, (u4));

46  
bv
;

47 
	}
}

52 
	$dvmF»eB™VeùÜ
(
B™VeùÜ
* 
pB™s
)

54 ià(
pB™s
 =ğ
NULL
)

57 
	`ä“
(
pB™s
->
¡Üage
);

58 
	`ä“
(
pB™s
);

59 
	}
}

68 
	$dvmAÎocB™
(
B™VeùÜ
* 
pB™s
)

70 
wÜd
, 
b™
;

72 
»Œy
:

73 
wÜd
 = 0; wÜd < 
pB™s
->
¡ÜageSize
; word++) {

74 ià(
pB™s
->
¡Üage
[
wÜd
] != 0xffffffff) {

78 
b™
 = 
	`ffs
(~(
pB™s
->
¡Üage
[
wÜd
])) -1;

79 
	`as£¹
(
b™
 < 32);

80 
pB™s
->
¡Üage
[
wÜd
] |ğ1 << 
b™
;

81  (
wÜd
 << 5è| 
b™
;

88 ià(!
pB™s
->
ex·ndabË
)

91 
pB™s
->
¡Üage
 = (
u4
*)
	`»®loc
(pBits->storage,

92 (
pB™s
->
¡ÜageSize
 + 
kB™VeùÜGrowth
è* (
u4
));

93 
	`mem£t
(&
pB™s
->
¡Üage
[pB™s->
¡ÜageSize
], 0x00,

94 
kB™VeùÜGrowth
 * (
u4
));

95 
pB™s
->
¡ÜageSize
 +ğ
kB™VeùÜGrowth
;

96 
»Œy
;

97 
	}
}

102 
	$dvmS‘B™
(
B™VeùÜ
* 
pB™s
, 
num
)

104 ià(
num
 >ğ
pB™s
->
¡ÜageSize
 * (
u4
) * 8) {

105 ià(!
pB™s
->
ex·ndabË
) {

106 
	`ALOGE
("Attempto set bit outside valid„ange (%d,†imit is %d)",

107 
num
, 
pB™s
->
¡ÜageSize
 * (
u4
) * 8);

108 
	`dvmAbÜt
();

112 
ÃwSize
 = (
num
 + 1 + 31) >> 5;

113 
	`as£¹
(
ÃwSize
 > 
pB™s
->
¡ÜageSize
);

114 
pB™s
->
¡Üage
 = (
u4
*)
	`»®loc
ÕB™s->¡Üage, 
ÃwSize
 * (u4));

115 ià(
pB™s
->
¡Üage
 =ğ
NULL
) {

116 
	`ALOGE
("B™VeùÜƒx·nsiÚØ%d faed", 
ÃwSize
 * (
u4
));

117 
	`dvmAbÜt
();

119 
	`mem£t
(&
pB™s
->
¡Üage
[pB™s->
¡ÜageSize
], 0x00,

120 (
ÃwSize
 - 
pB™s
->
¡ÜageSize
è* (
u4
));

121 
pB™s
->
¡ÜageSize
 = 
ÃwSize
;

124 
pB™s
->
¡Üage
[
num
 >> 5] |= 1 << (num & 0x1f);

125 
	}
}

130 
	$dvmCË¬B™
(
B™VeùÜ
* 
pB™s
, 
num
)

132 
	`as£¹
(
num
 < 
pB™s
->
¡ÜageSize
 * (
u4
) * 8);

134 
pB™s
->
¡Üage
[
num
 >> 5] &= ~(1 << (num & 0x1f));

135 
	}
}

140 
	$dvmCË¬AÎB™s
(
B™VeùÜ
* 
pB™s
)

142 
couÁ
 = 
pB™s
->
¡ÜageSize
;

143 
	`mem£t
(
pB™s
->
¡Üage
, 0, 
couÁ
 * (
u4
));

144 
	}
}

151 
	$dvmS‘In™ŸlB™s
(
B™VeùÜ
* 
pB™s
, 
numB™s
)

153 
idx
;

154 
	`as£¹
(((
numB™s
 + 31è>> 5è<ğ
pB™s
->
¡ÜageSize
);

155 
idx
 = 0; idx < (
numB™s
 >> 5); idx++) {

156 
pB™s
->
¡Üage
[
idx
] = -1;

158 
»mNumB™s
 = 
numB™s
 & 0x1f;

159 ià(
»mNumB™s
) {

160 
pB™s
->
¡Üage
[
idx
] = (1 << 
»mNumB™s
) - 1;

162 
	}
}

167 
boŞ
 
	$dvmIsB™S‘
(cÚ¡ 
B™VeùÜ
* 
pB™s
, 
num
)

169 
	`as£¹
(
num
 < 
pB™s
->
¡ÜageSize
 * (
u4
) * 8);

171 
v®
 = 
pB™s
->
¡Üage
[
num
 >> 5] & (1 << (num & 0x1f));

172  (
v®
 != 0);

173 
	}
}

178 
	$dvmCouÁS‘B™s
(cÚ¡ 
B™VeùÜ
* 
pB™s
)

180 
wÜd
;

181 
couÁ
 = 0;

183 
wÜd
 = 0; wÜd < 
pB™s
->
¡ÜageSize
; word++) {

184 
u4
 
v®
 = 
pB™s
->
¡Üage
[
wÜd
];

186 ià(
v®
 != 0) {

187 ià(
v®
 == 0xffffffff) {

188 
couÁ
 += 32;

191 
v®
 != 0) {

192 
v®
 &= val - 1;

193 
couÁ
++;

199  
couÁ
;

200 
	}
}

205 
	$checkSizes
(cÚ¡ 
B™VeùÜ
* 
bv1
, cÚ¡ B™VeùÜ* 
bv2
)

207 ià(
bv1
->
¡ÜageSize
 !ğ
bv2
->storageSize) {

208 
	`ALOGE
("Mismatched vector sizes (%d, %d)",

209 
bv1
->
¡ÜageSize
, 
bv2
->storageSize);

210 
	`dvmAbÜt
();

212 
	}
}

218 
	$dvmCİyB™VeùÜ
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c
)

221 
	`checkSizes
(
de¡
, 
¤c
);

223 
	`memıy
(
de¡
->
¡Üage
, 
¤c
->¡Üage, (
u4
è* de¡->
¡ÜageSize
);

224 
	}
}

229 
boŞ
 
	$dvmIÁ”£ùB™VeùÜs
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c1
,

230 cÚ¡ 
B™VeùÜ
 *
¤c2
)

232 ià(
de¡
->
¡ÜageSize
 !ğ
¤c1
->storageSize ||

233 
de¡
->
¡ÜageSize
 !ğ
¤c2
->storageSize ||

234 
de¡
->
ex·ndabË
 !ğ
¤c1
->expandable ||

235 
de¡
->
ex·ndabË
 !ğ
¤c2
->expandable)

236  
çl£
;

238 
idx
;

239 
idx
 = 0; idx < 
de¡
->
¡ÜageSize
; idx++) {

240 
de¡
->
¡Üage
[
idx
] = 
¤c1
->¡Üage[idx] & 
¤c2
->storage[idx];

242  
Œue
;

243 
	}
}

248 
boŞ
 
	$dvmUnifyB™VeùÜs
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c1
,

249 cÚ¡ 
B™VeùÜ
 *
¤c2
)

251 ià(
de¡
->
¡ÜageSize
 !ğ
¤c1
->storageSize ||

252 
de¡
->
¡ÜageSize
 !ğ
¤c2
->storageSize ||

253 
de¡
->
ex·ndabË
 !ğ
¤c1
->expandable ||

254 
de¡
->
ex·ndabË
 !ğ
¤c2
->expandable)

255  
çl£
;

257 
idx
;

258 
idx
 = 0; idx < 
de¡
->
¡ÜageSize
; idx++) {

259 
de¡
->
¡Üage
[
idx
] = 
¤c1
->¡Üage[idx] | 
¤c2
->storage[idx];

261  
Œue
;

262 
	}
}

267 
boŞ
 
	$dvmCom·»B™VeùÜs
(cÚ¡ 
B™VeùÜ
 *
¤c1
, cÚ¡ B™VeùÜ *
¤c2
)

269 ià(
¤c1
->
¡ÜageSize
 !ğ
¤c2
->storageSize ||

270 
¤c1
->
ex·ndabË
 !ğ
¤c2
->expandable)

271  
Œue
;

273 
idx
;

274 
idx
 = 0; idx < 
¤c1
->
¡ÜageSize
; idx++) {

275 ià(
¤c1
->
¡Üage
[
idx
] !ğ
¤c2
->¡Üage[idx]è 
Œue
;

277  
çl£
;

278 
	}
}

281 
	$dvmB™VeùÜI‹¿tÜIn™
(
B™VeùÜ
* 
pB™s
, 
B™VeùÜI‹¿tÜ
* 
™”©Ü
)

283 
™”©Ü
->
pB™s
 =…Bits;

284 
™”©Ü
->
b™Size
 = 
pB™s
->
¡ÜageSize
 * (
u4
) * 8;

285 
™”©Ü
->
idx
 = 0;

286 
	}
}

289 
	$dvmB™VeùÜI‹¿tÜNext
(
B™VeùÜI‹¿tÜ
* 
™”©Ü
)

291 cÚ¡ 
B™VeùÜ
* 
pB™s
 = 
™”©Ü
->pBits;

292 
u4
 
b™Index
 = 
™”©Ü
->
idx
;

294 
	`as£¹
(
™”©Ü
->
b™Size
 =ğ
pB™s
->
¡ÜageSize
 * (
u4
) * 8);

295 ià(
b™Index
 >ğ
™”©Ü
->
b™Size
)  -1;

297 ; 
b™Index
 < 
™”©Ü
->
b™Size
; bitIndex++) {

298 
wÜdIndex
 = 
b™Index
 >> 5;

299 
mask
 = 1 << (
b™Index
 & 0x1f);

300 ià(
pB™s
->
¡Üage
[
wÜdIndex
] & 
mask
) {

301 
™”©Ü
->
idx
 = 
b™Index
+1;

302  
b™Index
;

307 
	}
}

316 
boŞ
 
	$dvmCheckM”geB™VeùÜs
(
B™VeùÜ
* 
d¡
, cÚ¡ B™VeùÜ* 
¤c
)

318 
boŞ
 
chªged
 = 
çl£
;

320 
	`checkSizes
(
d¡
, 
¤c
);

322 
idx
;

323 
idx
 = 0; idx < 
d¡
->
¡ÜageSize
; idx++) {

324 
u4
 
m”ged
 = 
¤c
->
¡Üage
[
idx
] | 
d¡
->storage[idx];

325 ià(
d¡
->
¡Üage
[
idx
] !ğ
m”ged
) {

326 
d¡
->
¡Üage
[
idx
] = 
m”ged
;

327 
chªged
 = 
Œue
;

331  
chªged
;

332 
	}
}

	@vm/BitVector.h

20 #iâdeà
DALVIK_BITVECTOR_H_


21 
	#DALVIK_BITVECTOR_H_


	)

29 
	sB™VeùÜ
 {

30 
boŞ
 
	mex·ndabË
;

31 
u4
 
	m¡ÜageSize
;

32 
u4
* 
	m¡Üage
;

36 
	sB™VeùÜI‹¿tÜ
 {

37 
B™VeùÜ
 *
	mpB™s
;

38 
u4
 
	midx
;

39 
u4
 
	mb™Size
;

43 
B™VeùÜ
* 
dvmAÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
);

44 
dvmF»eB™VeùÜ
(
B™VeùÜ
* 
pB™s
);

59 
dvmAÎocB™
(
B™VeùÜ
* 
pB™s
);

60 
dvmS‘B™
(
B™VeùÜ
* 
pB™s
, 
num
);

61 
dvmCË¬B™
(
B™VeùÜ
* 
pB™s
, 
num
);

62 
dvmCË¬AÎB™s
(
B™VeùÜ
* 
pB™s
);

63 
dvmS‘In™ŸlB™s
(
B™VeùÜ
* 
pB™s
, 
numB™s
);

64 
boŞ
 
dvmIsB™S‘
(cÚ¡ 
B™VeùÜ
* 
pB™s
, 
num
);

67 
dvmCouÁS‘B™s
(cÚ¡ 
B™VeùÜ
* 
pB™s
);

70 
dvmCİyB™VeùÜ
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c
);

75 
boŞ
 
dvmIÁ”£ùB™VeùÜs
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c1
,

76 cÚ¡ 
B™VeùÜ
 *
¤c2
);

81 
boŞ
 
dvmUnifyB™VeùÜs
(
B™VeùÜ
 *
de¡
, cÚ¡ B™VeùÜ *
¤c1
,

82 cÚ¡ 
B™VeùÜ
 *
¤c2
);

90 
boŞ
 
dvmCheckM”geB™VeùÜs
(
B™VeùÜ
* 
d¡
, cÚ¡ B™VeùÜ* 
¤c
);

95 
boŞ
 
dvmCom·»B™VeùÜs
(cÚ¡ 
B™VeùÜ
 *
¤c1
, cÚ¡ B™VeùÜ *
¤c2
);

98 
dvmB™VeùÜI‹¿tÜIn™
(
B™VeùÜ
* 
pB™s
, 
B™VeùÜI‹¿tÜ
* 
™”©Ü
);

101 
dvmB™VeùÜI‹¿tÜNext
(
B™VeùÜI‹¿tÜ
* 
™”©Ü
);

	@vm/Bits.h

21 #iâdeà
DALVIK_BITS_H_


22 
	#DALVIK_BITS_H_


	)

24 
	~"CommÚ.h
"

25 
	~"IÆšes.h
"

27 
	~<¡dlib.h
>

28 
	~<¡ršg.h
>

33 
INLINE
 
u1
 
	$g‘1
(cÚ¡ * 
pSrc
)

35  *
pSrc
;

36 
	}
}

41 
INLINE
 
u2
 
	$g‘2BE
(cÚ¡* 
pSrc
)

43  (
pSrc
[0] << 8) |…Src[1];

44 
	}
}

49 
INLINE
 
u4
 
	$g‘4BE
(cÚ¡* 
pSrc
)

51  (
pSrc
[0] << 24) | (pSrc[1] << 16) | (pSrc[2] << 8) |…Src[3];

52 
	}
}

57 
INLINE
 
u8
 
	$g‘8BE
(cÚ¡* 
pSrc
)

59 
u4
 
low
, 
high
;

61 
high
 = 
pSrc
[0];

62 
high
 = (high << 8è| 
pSrc
[1];

63 
high
 = (high << 8è| 
pSrc
[2];

64 
high
 = (high << 8è| 
pSrc
[3];

65 
low
 = 
pSrc
[4];

66 
low
 = (low << 8è| 
pSrc
[5];

67 
low
 = (low << 8è| 
pSrc
[6];

68 
low
 = (low << 8è| 
pSrc
[7];

70  ((
u8
è
high
 << 32è| (u8è
low
;

71 
	}
}

76 
INLINE
 
u2
 
	$g‘2LE
(cÚ¡* 
pSrc
)

78  
pSrc
[0] | (pSrc[1] << 8);

79 
	}
}

84 
INLINE
 
u4
 
	$g‘4LE
(cÚ¡* 
pSrc
)

86 
u4
 
»suÉ
;

88 
»suÉ
 = 
pSrc
[0];

89 
»suÉ
 |ğ
pSrc
[1] << 8;

90 
»suÉ
 |ğ
pSrc
[2] << 16;

91 
»suÉ
 |ğ
pSrc
[3] << 24;

93  
»suÉ
;

94 
	}
}

99 
INLINE
 
u8
 
	$g‘8LE
(cÚ¡* 
pSrc
)

101 
u4
 
low
, 
high
;

103 
low
 = 
pSrc
[0];

104 
low
 |ğ
pSrc
[1] << 8;

105 
low
 |ğ
pSrc
[2] << 16;

106 
low
 |ğ
pSrc
[3] << 24;

107 
high
 = 
pSrc
[4];

108 
high
 |ğ
pSrc
[5] << 8;

109 
high
 |ğ
pSrc
[6] << 16;

110 
high
 |ğ
pSrc
[7] << 24;

111  ((
u8
è
high
 << 32è| (u8è
low
;

112 
	}
}

117 
INLINE
 
u1
 
	$»ad1
(cÚ¡ ** 
µSrc
)

119  *(*
µSrc
)++;

120 
	}
}

125 
INLINE
 
u2
 
	$»ad2BE
(cÚ¡** 
µSrc
)

127 cÚ¡ * 
pSrc
 = *
µSrc
;

129 *
µSrc
 = 
pSrc
 + 2;

130  
pSrc
[0] << 8 |…Src[1];

131 
	}
}

136 
INLINE
 
u4
 
	$»ad4BE
(cÚ¡** 
µSrc
)

138 cÚ¡ * 
pSrc
 = *
µSrc
;

139 
u4
 
»suÉ
;

141 
»suÉ
 = 
pSrc
[0] << 24;

142 
»suÉ
 |ğ
pSrc
[1] << 16;

143 
»suÉ
 |ğ
pSrc
[2] << 8;

144 
»suÉ
 |ğ
pSrc
[3];

146 *
µSrc
 = 
pSrc
 + 4;

147  
»suÉ
;

148 
	}
}

153 
INLINE
 
u8
 
	$»ad8BE
(cÚ¡** 
µSrc
)

155 cÚ¡ * 
pSrc
 = *
µSrc
;

156 
u4
 
low
, 
high
;

158 
high
 = 
pSrc
[0];

159 
high
 = (high << 8è| 
pSrc
[1];

160 
high
 = (high << 8è| 
pSrc
[2];

161 
high
 = (high << 8è| 
pSrc
[3];

162 
low
 = 
pSrc
[4];

163 
low
 = (low << 8è| 
pSrc
[5];

164 
low
 = (low << 8è| 
pSrc
[6];

165 
low
 = (low << 8è| 
pSrc
[7];

167 *
µSrc
 = 
pSrc
 + 8;

168  ((
u8
è
high
 << 32è| (u8è
low
;

169 
	}
}

174 
INLINE
 
u2
 
	$»ad2LE
(cÚ¡** 
µSrc
)

176 cÚ¡ * 
pSrc
 = *
µSrc
;

177 *
µSrc
 = 
pSrc
 + 2;

178  
pSrc
[0] |…Src[1] << 8;

179 
	}
}

184 
INLINE
 
u4
 
	$»ad4LE
(cÚ¡** 
µSrc
)

186 cÚ¡ * 
pSrc
 = *
µSrc
;

187 
u4
 
»suÉ
;

189 
»suÉ
 = 
pSrc
[0];

190 
»suÉ
 |ğ
pSrc
[1] << 8;

191 
»suÉ
 |ğ
pSrc
[2] << 16;

192 
»suÉ
 |ğ
pSrc
[3] << 24;

194 *
µSrc
 = 
pSrc
 + 4;

195  
»suÉ
;

196 
	}
}

201 
INLINE
 
u8
 
	$»ad8LE
(cÚ¡** 
µSrc
)

203 cÚ¡ * 
pSrc
 = *
µSrc
;

204 
u4
 
low
, 
high
;

206 
low
 = 
pSrc
[0];

207 
low
 |ğ
pSrc
[1] << 8;

208 
low
 |ğ
pSrc
[2] << 16;

209 
low
 |ğ
pSrc
[3] << 24;

210 
high
 = 
pSrc
[4];

211 
high
 |ğ
pSrc
[5] << 8;

212 
high
 |ğ
pSrc
[6] << 16;

213 
high
 |ğ
pSrc
[7] << 24;

215 *
µSrc
 = 
pSrc
 + 8;

216  ((
u8
è
high
 << 32è| (u8è
low
;

217 
	}
}

222 
INLINE
 
	$skUtf8SŒšg
(cÚ¡** 
µSrc
)

224 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

226 (*
µSrc
è+ğ
Ëngth
;

227 
	}
}

234 
INLINE
 
	$»adUtf8SŒšg
(cÚ¡** 
µSrc
, * 
buf
, 
size_t
 
bufL’
)

236 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

237 
size_t
 
cİyL’
 = (
Ëngth
 < 
bufL’
) ?†ength : bufLen-1;

239 
	`memıy
(
buf
, *
µSrc
, 
cİyL’
);

240 
buf
[
cİyL’
] = '\0';

242 (*
µSrc
è+ğ
Ëngth
;

243  
Ëngth
;

244 
	}
}

252 
INLINE
 * 
	$»adNewUtf8SŒšg
(cÚ¡** 
µSrc
, 
size_t
* 
pL’gth
)

254 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

255 * 
buf
;

257 
buf
 = (*è
	`m®loc
(
Ëngth
+1);

259 
	`memıy
(
buf
, *
µSrc
, 
Ëngth
);

260 
buf
[
Ëngth
] = '\0';

262 (*
µSrc
è+ğ
Ëngth
;

264 *
pL’gth
 = 
Ëngth
;

265  
buf
;

266 
	}
}

272 
INLINE
 
	$£t1
(
u1
* 
buf
, u1 
v®
)

274 *
buf
 = (
u1
)(
v®
);

275 
	}
}

280 
INLINE
 
	$£t2BE
(
u1
* 
buf
, 
u2
 
v®
)

282 *
buf
++ = (
u1
)(
v®
 >> 8);

283 *
buf
 = (
u1
)(
v®
);

284 
	}
}

289 
INLINE
 
	$£t4BE
(
u1
* 
buf
, 
u4
 
v®
)

291 *
buf
++ = (
u1
)(
v®
 >> 24);

292 *
buf
++ = (
u1
)(
v®
 >> 16);

293 *
buf
++ = (
u1
)(
v®
 >> 8);

294 *
buf
 = (
u1
)(
v®
);

295 
	}
}

300 
INLINE
 
	$£t8BE
(
u1
* 
buf
, 
u8
 
v®
)

302 *
buf
++ = (
u1
)(
v®
 >> 56);

303 *
buf
++ = (
u1
)(
v®
 >> 48);

304 *
buf
++ = (
u1
)(
v®
 >> 40);

305 *
buf
++ = (
u1
)(
v®
 >> 32);

306 *
buf
++ = (
u1
)(
v®
 >> 24);

307 *
buf
++ = (
u1
)(
v®
 >> 16);

308 *
buf
++ = (
u1
)(
v®
 >> 8);

309 *
buf
 = (
u1
)(
v®
);

310 
	}
}

315 
INLINE
 
	$£t2LE
(
u1
* 
buf
, 
u2
 
v®
)

317 *
buf
++ = (
u1
)(
v®
);

318 *
buf
 = (
u1
)(
v®
 >> 8);

319 
	}
}

324 
INLINE
 
	$£t4LE
(
u1
* 
buf
, 
u4
 
v®
)

326 *
buf
++ = (
u1
)(
v®
);

327 *
buf
++ = (
u1
)(
v®
 >> 8);

328 *
buf
++ = (
u1
)(
v®
 >> 16);

329 *
buf
 = (
u1
)(
v®
 >> 24);

330 
	}
}

335 
INLINE
 
	$£t8LE
(
u1
* 
buf
, 
u8
 
v®
)

337 *
buf
++ = (
u1
)(
v®
);

338 *
buf
++ = (
u1
)(
v®
 >> 8);

339 *
buf
++ = (
u1
)(
v®
 >> 16);

340 *
buf
++ = (
u1
)(
v®
 >> 24);

341 *
buf
++ = (
u1
)(
v®
 >> 32);

342 *
buf
++ = (
u1
)(
v®
 >> 40);

343 *
buf
++ = (
u1
)(
v®
 >> 48);

344 *
buf
 = (
u1
)(
v®
 >> 56);

345 
	}
}

350 
INLINE
 
	$£tUtf8SŒšg
(
u1
* 
buf
, cÚ¡ u1* 
¡r
)

352 
u4
 
¡rL’
 = 
	`¡¾’
((cÚ¡ *)
¡r
);

354 
	`£t4BE
(
buf
, 
¡rL’
);

355 
	`memıy
(
buf
 + (
u4
), 
¡r
, 
¡rL’
);

356 
	}
}

	@vm/CheckJni.cpp

26 
	~"D®vik.h
"

27 
	~"JniIÁ”Çl.h
"

29 
	~<sys/mmª.h
>

30 
	~<zlib.h
>

35 
	$abÜtMaybe
() {

36 ià(!
gDvmJni
.
w¬nOÆy
) {

37 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

38 
	`dvmAbÜt
();

40 
	}
}

64 
	$checkC®lResuÉCommÚ
(cÚ¡ 
u4
* 
¬gs
, cÚ¡ 
JV®ue
* 
pResuÉ
,

65 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

67 
	`as£¹
(
pResuÉ
->
l
 !ğ
NULL
);

68 cÚ¡ 
Objeù
* 
»suÉObj
 = (cÚ¡ Objeù*è
pResuÉ
->
l
;

70 ià(
»suÉObj
 =ğ
kInv®idIndœeùRefObjeù
) {

71 
	`ALOGW
("JNI WARNING: invalid„eference„eturned from‚ative code");

72 cÚ¡ 
M‘hod
* 
m‘hod
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

73 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

74 
	`ALOGW
(" iÀ%s.%s:%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

75 
	`ä“
(
desc
);

76 
	`abÜtMaybe
();

80 
CÏssObjeù
* 
objCÏzz
 = 
»suÉObj
->
şazz
;

86 cÚ¡ * 
deşTy³
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘hod
->
´ÙÙy³
);

87 cÚ¡ * 
objTy³
 = 
objCÏzz
->
desütÜ
;

88 ià(
	`¡rcmp
(
deşTy³
, 
objTy³
) == 0) {

90 
	`ALOGV
("Check %s.%s: %s io %s (FAST-OK)",

91 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
objTy³
, 
deşTy³
);

104 
CÏssObjeù
* 
deşCÏzz
 = 
	`dvmFšdCÏssNoIn™
(
deşTy³
, 
m‘hod
->
şazz
->
şassLßd”
);

105 ià(
deşCÏzz
 =ğ
NULL
) {

106 
	`ALOGW
("JNI WARNING: method declaredo„eturn '%s'„eturned '%s'",

107 
deşTy³
, 
objTy³
);

108 
	`ALOGW
(" failed in %s.%s ('%s'‚ot found)",

109 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
deşTy³
);

110 
	`abÜtMaybe
();

113 ià(!
	`dvmIn¡ªûof
(
objCÏzz
, 
deşCÏzz
)) {

114 
	`ALOGW
("JNI WARNING: method declaredo„eturn '%s'„eturned '%s'",

115 
deşTy³
, 
objTy³
);

116 
	`ALOGW
(" failed in %s.%s",

117 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

118 
	`abÜtMaybe
();

121 
	`ALOGV
("Check %s.%s: %s io %s (SLOW-OK)",

122 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
objTy³
, 
deşTy³
);

125 
	}
}

133 
šlše
 
boŞ
 
	$ÿÎN“dsCheck
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

134 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

136  (
m‘hod
->
shÜty
[0] =ğ'L' && !
	`dvmCheckExû±iÚ
(
£lf
è&& 
pResuÉ
->
l
 !ğ
NULL
);

137 
	}
}

142 
	$dvmCheckC®lJNIM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

143 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

145 
	`dvmC®lJNIM‘hod
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

146 ià(
	`ÿÎN“dsCheck
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
)) {

147 
	`checkC®lResuÉCommÚ
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

149 
	}
}

157 
šlše
 cÚ¡ 
JNIN©iveIÁ”çû
* 
	$ba£Env
(
JNIEnv
* 
’v
) {

158  ((
JNIEnvExt
*è
’v
)->
ba£FuncTabË
;

159 
	}
}

161 
šlše
 cÚ¡ 
JNIInvokeIÁ”çû
* 
	$ba£Vm
(
JavaVM
* 
vm
) {

162  ((
JavaVMExt
*è
vm
)->
ba£FuncTabË
;

163 
	}
}

165 şas 
	cScİedCheckJniTh»adS‹
 {

166 
	mpublic
:

167 
ex¶ic™
 
	$ScİedCheckJniTh»adS‹
(
JNIEnv
* 
’v
) {

168 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

171 ~
	$ScİedCheckJniTh»adS‹
() {

172 
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
);

173 
	}
}

175 
	g´iv©e
:

177 
ScİedCheckJniTh»adS‹
(const ScopedCheckJniThreadState&);

178 
	gİ”©Ü
=(cÚ¡ 
ScİedCheckJniTh»adS‹
&);

184 
	#kFÏg_DeçuÉ
 0x0000

	)

186 
	#kFÏg_Cr™Bad
 0x0000

	)

187 
	#kFÏg_Cr™Okay
 0x0001

	)

188 
	#kFÏg_Cr™G‘
 0x0002

	)

189 
	#kFÏg_Cr™R–—£
 0x0003

	)

190 
	#kFÏg_Cr™Mask
 0x0003

	)

192 
	#kFÏg_ExûpBad
 0x0000

	)

193 
	#kFÏg_ExûpOkay
 0x0004

	)

195 
	#kFÏg_R–—£
 0x0010

	)

196 
	#kFÏg_NuÎabËUtf
 0x0020

	)

198 
	#kFÏg_InvoÿtiÚ
 0x8000

	)

200 cÚ¡ * 
	$šdœeùRefKšdName
(
IndœeùRef
 
œef
)

202  
	`šdœeùRefKšdToSŒšg
(
	`šdœeùRefKšd
(
œef
));

203 
	}
}

205 şas 
	cScİedCheck
 {

206 
	mpublic
:

208 
ex¶ic™
 
	$ScİedCheck
(
JNIEnv
* 
’v
, 
æags
, cÚ¡ * 
funùiÚName
) {

209 
	`š™
(
’v
, 
æags
, 
funùiÚName
, 
Œue
);

210 
	`checkTh»ad
(
æags
);

214 
ex¶ic™
 
	$ScİedCheck
(
boŞ
 
hasM‘hod
, cÚ¡ * 
funùiÚName
) {

215 
	`š™
(
NULL
, 
kFÏg_InvoÿtiÚ
, 
funùiÚName
, 
hasM‘hod
);

216 
	}
}

231 
	$checkCÏssName
(cÚ¡ * 
şassName
) {

232 ià(!
	`dexIsV®idCÏssName
(
şassName
, 
çl£
)) {

233 
	`ALOGW
("JNI WARNING: iÎeg® cÏs Çm'%s' (%s)", 
şassName
, 
mFunùiÚName
);

234 
	`ALOGW
(" (should be formed†ike 'dalvik/system/DexFile')");

235 
	`ALOGW
(" or '[Ldalvik/system/DexFile;' or '[[B')");

236 
	`abÜtMaybe
();

238 
	}
}

240 
	$checkF›ldTy³FÜG‘
(
jf›ldID
 
fid
, cÚ¡ * 
ex³ùedSigÇtu»
, 
boŞ
 
isStic
) {

241 ià(
fid
 =ğ
NULL
) {

242 
	`ALOGW
("JNI WARNING:‚ull jfieldID");

243 
	`showLoÿtiÚ
();

244 
	`abÜtMaybe
();

247 
boŞ
 
´štW¬n
 = 
çl£
;

248 
F›ld
* 
f›ld
 = (F›ld*è
fid
;

249 cÚ¡ * 
aùu®SigÇtu»
 = 
f›ld
->
sigÇtu»
;

250 ià(*
ex³ùedSigÇtu»
 == 'L') {

253 ià(*
aùu®SigÇtu»
 != 'L' && *actualSignature != '[') {

254 
´štW¬n
 = 
Œue
;

256 } ià(*
aùu®SigÇtu»
 !ğ*
ex³ùedSigÇtu»
) {

257 
´štW¬n
 = 
Œue
;

260 ià(!
´štW¬n
 && 
isStic
 && !
	`dvmIsSticF›ld
(
f›ld
)) {

261 ià(
isStic
) {

262 
	`ALOGW
("JNI WARNING:‡cûssšg‚Ú-¡©iøf›ld % a ¡©ic", 
f›ld
->
Çme
);

264 
	`ALOGW
("JNI WARNING:‡cûssšg stiøf›ld % a nÚ-¡©ic", 
f›ld
->
Çme
);

266 
´štW¬n
 = 
Œue
;

269 ià(
´štW¬n
) {

270 
	`ALOGW
("JNI WARNING: %s for field '%s' ofƒxpectedype %s, got %s",

271 
mFunùiÚName
, 
f›ld
->
Çme
, 
ex³ùedSigÇtu»
, 
aùu®SigÇtu»
);

272 
	`showLoÿtiÚ
();

273 
	`abÜtMaybe
();

275 
	}
}

283 
	$checkF›ldTy³FÜS‘
(
jobjeù
 
jobj
, 
jf›ldID
 
f›ldID
, 
Prim™iveTy³
 
´im
, 
boŞ
 
isStic
) {

284 ià(
f›ldID
 =ğ
NULL
) {

285 
	`ALOGW
("JNI WARNING:‚ull jfieldID");

286 
	`showLoÿtiÚ
();

287 
	`abÜtMaybe
();

290 
boŞ
 
´štW¬n
 = 
çl£
;

291 
F›ld
* 
f›ld
 = (F›ld*è
f›ldID
;

292 ià((
f›ld
->
sigÇtu»
[0] =ğ'L' || f›ld->sigÇtu»[0] =ğ'['è&& 
jobj
 !ğ
NULL
) {

293 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

294 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jobj
);

300 ià(
obj
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(obj)) {

301 
	`ALOGW
("JNI WARNING: field operation on invalid %s„eference (%p)",

302 
	`šdœeùRefKšdName
(
jobj
), jobj);

303 
´štW¬n
 = 
Œue
;

305 
CÏssObjeù
* 
f›ldCÏss
 = 
	`dvmFšdLßdedCÏss
(
f›ld
->
sigÇtu»
);

306 
CÏssObjeù
* 
objCÏss
 = 
obj
->
şazz
;

308 
	`as£¹
(
f›ldCÏss
 !ğ
NULL
);

309 
	`as£¹
(
objCÏss
 !ğ
NULL
);

311 ià(!
	`dvmIn¡ªûof
(
objCÏss
, 
f›ldCÏss
)) {

312 
	`ALOGW
("JNI WARNING: set field '%s'ƒxpectedype %s, got %s",

313 
f›ld
->
Çme
, f›ld->
sigÇtu»
, 
objCÏss
->
desütÜ
);

314 
´štW¬n
 = 
Œue
;

317 } ià(
	`dexG‘Prim™iveTy³FromDesütÜCh¬
(
f›ld
->
sigÇtu»
[0]è!ğ
´im
) {

318 
	`ALOGW
("JNI WARNING: %s for field '%s'ƒxpectedype %s, got %s",

319 
mFunùiÚName
, 
f›ld
->
Çme
, f›ld->
sigÇtu»
, 
	`´im™iveTy³ToName
(
´im
));

320 
´štW¬n
 = 
Œue
;

321 } ià(
isStic
 && !
	`dvmIsSticF›ld
(
f›ld
)) {

322 ià(
isStic
) {

323 
	`ALOGW
("JNI WARNING:‡cûssšg‚Ú-¡©iøf›ld % a ¡©ic", 
f›ld
->
Çme
);

325 
	`ALOGW
("JNI WARNING:‡cûssšg stiøf›ld % a nÚ-¡©ic", 
f›ld
->
Çme
);

327 
´štW¬n
 = 
Œue
;

330 ià(
´štW¬n
) {

331 
	`showLoÿtiÚ
();

332 
	`abÜtMaybe
();

334 
	}
}

341 
	$checkIn¡ªûF›ldID
(
jobjeù
 
jobj
, 
jf›ldID
 
f›ldID
) {

342 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

344 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jobj
);

345 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

346 
	`ALOGW
("JNI ERROR: f›ld o³¿tiÚ oÀšv®id„eã»nû (%p)", 
jobj
);

347 
	`dvmAbÜt
();

354 
CÏssObjeù
* 
şazz
 = 
obj
->clazz;

355 
şazz
 !ğ
NULL
) {

356 ià((
In¡F›ld
*è
f›ldID
 >ğ
şazz
->
if›lds
 &&

357 (
In¡F›ld
*è
f›ldID
 < 
şazz
->
if›lds
 + cÏzz->
if›ldCouÁ
) {

361 
şazz
 = cÏzz->
su³r
;

364 
	`ALOGW
("JNI WARNING: instance fieldID %p‚ot valid for class %s",

365 
f›ldID
, 
obj
->
şazz
->
desütÜ
);

366 
	`showLoÿtiÚ
();

367 
	`abÜtMaybe
();

368 
	}
}

373 
	$checkNÚNuÎ
(cÚ¡ * 
±r
) {

374 ià(
±r
 =ğ
NULL
) {

375 
	`ALOGW
("JNI WARNING: inv®id‚uÎ…oš‹¸(%s)", 
mFunùiÚName
);

376 
	`abÜtMaybe
();

378 
	}
}

384 
	$checkSig
(
jm‘hodID
 
m‘hodID
, cÚ¡ * 
ex³ùedTy³
, 
boŞ
 
isStic
) {

385 cÚ¡ 
M‘hod
* 
m‘hod
 = (cÚ¡ M‘hod*è
m‘hodID
;

386 
boŞ
 
´štW¬n
 = 
çl£
;

388 ià(*
ex³ùedTy³
 !ğ
m‘hod
->
shÜty
[0]) {

389 
	`ALOGW
("JNI WARNING:ƒx³ùed„‘uºy³ '%s'", 
ex³ùedTy³
);

390 
´štW¬n
 = 
Œue
;

391 } ià(
isStic
 && !
	`dvmIsSticM‘hod
(
m‘hod
)) {

392 ià(
isStic
) {

393 
	`ALOGW
("JNI WARNING: calling‚on-static method with static call");

395 
	`ALOGW
("JNI WARNING: calling static method with‚on-static call");

397 
´štW¬n
 = 
Œue
;

400 ià(
´štW¬n
) {

401 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

402 
	`ALOGW
(" c®lšg %s.% %s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

403 
	`ä“
(
desc
);

404 
	`showLoÿtiÚ
();

405 
	`abÜtMaybe
();

407 
	}
}

414 
	$checkSticF›ldID
(
jşass
 
jşazz
, 
jf›ldID
 
f›ldID
) {

415 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

416 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jşazz
);

417 
SticF›ld
* 
ba£
 = &
şazz
->
sf›lds
[0];

418 
f›ldCouÁ
 = 
şazz
->
sf›ldCouÁ
;

419 ià((
SticF›ld
*è
f›ldID
 < 
ba£
 || (SticF›ld*èf›ldID >ğba£ + 
f›ldCouÁ
) {

420 
	`ALOGW
("JNI WARNING: static fieldID %p‚ot valid for class %s",

421 
f›ldID
, 
şazz
->
desütÜ
);

422 
	`ALOGW
(" ba£=%°couÁ=%d", 
ba£
, 
f›ldCouÁ
);

423 
	`showLoÿtiÚ
();

424 
	`abÜtMaybe
();

426 
	}
}

437 
	$checkSticM‘hod
(
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
) {

438 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

440 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jşazz
);

441 cÚ¡ 
M‘hod
* 
m‘hod
 = (cÚ¡ M‘hod*è
m‘hodID
;

443 ià(!
	`dvmIn¡ªûof
(
şazz
, 
m‘hod
->clazz)) {

444 
	`ALOGW
("JNI WARNING: can't call static %s.%s on class %s",

445 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, clazz->descriptor);

446 
	`showLoÿtiÚ
();

449 
	}
}

458 
	$checkVœtu®M‘hod
(
jobjeù
 
jobj
, 
jm‘hodID
 
m‘hodID
) {

459 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

461 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jobj
);

462 cÚ¡ 
M‘hod
* 
m‘hod
 = (cÚ¡ M‘hod*è
m‘hodID
;

464 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, 
m‘hod
->clazz)) {

465 
	`ALOGW
("JNI WARNING: can't call %s.%s on instance of %s",

466 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
obj
->clazz->descriptor);

467 
	`showLoÿtiÚ
();

468 
	`abÜtMaybe
();

470 
	}
}

508 
	$check
(
boŞ
 
’Œy
, cÚ¡ * 
fmt0
, ...) {

509 
va_li¡
 
­
;

511 
boŞ
 
shouldT¿û
 = 
çl£
;

512 cÚ¡ 
M‘hod
* 
m‘hod
 = 
NULL
;

513 ià((
gDvm
.
jniT¿û
 || 
gDvmJni
.
logThœdP¬tyJni
è&& 
mHasM‘hod
) {

516 ià((
mFÏgs
 & 
kFÏg_InvoÿtiÚ
è=ğ0 || 
	`dvmTh»adS–f
(è!ğ
NULL
) {

517 
m‘hod
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

520 ià(
m‘hod
 !ğ
NULL
) {

524 ià(
gDvm
.
jniT¿û
 && 
	`¡r¡r
(
m‘hod
->
şazz
->
desütÜ
, gDvm.jniT¿ûè!ğ
NULL
) {

525 
shouldT¿û
 = 
Œue
;

529 ià(
gDvmJni
.
logThœdP¬tyJni
) {

530 
shouldT¿û
 |ğ
m‘hod
->shouldTrace;

534 ià(
shouldT¿û
) {

535 
	`va_¡¬t
(
­
, 
fmt0
);

536 
¡d
::
¡ršg
 
msg
;

537 cÚ¡ * 
fmt
 = 
fmt0
; *fmt;) {

538 
ch
 = *
fmt
++;

539 ià(
ch
 == 'B') {

540 
jby‹
 
b
 = 
	`va_¬g
(
­
, );

541 ià(
b
 >= 0 && b < 10) {

542 
	`SŒšgAµ’dF
(&
msg
, "%d", 
b
);

544 
	`SŒšgAµ’dF
(&
msg
, "%#x (%d)", 
b
, b);

546 } ià(
ch
 == 'C') {

547 
jch¬
 
c
 = 
	`va_¬g
(
­
, );

548 ià(
c
 < 0x7f && c >= ' ') {

549 
	`SŒšgAµ’dF
(&
msg
, "U+%x ('%c')", 
c
, c);

551 
	`SŒšgAµ’dF
(&
msg
, "U+%x", 
c
);

553 } ià(
ch
 == 'F' || ch == 'D') {

554 
	`SŒšgAµ’dF
(&
msg
, "%g", 
	`va_¬g
(
­
, ));

555 } ià(
ch
 == 'I' || ch == 'S') {

556 
	`SŒšgAµ’dF
(&
msg
, "%d", 
	`va_¬g
(
­
, ));

557 } ià(
ch
 == 'J') {

558 
	`SŒšgAµ’dF
(&
msg
, "%Îd", 
	`va_¬g
(
­
, 
jlÚg
));

559 } ià(
ch
 == 'Z') {

560 
	`SŒšgAµ’dF
(&
msg
, "%s", 
	`va_¬g
(
­
, ) ? "true" : "false");

561 } ià(
ch
 == 'V') {

562 
msg
 += "void";

563 } ià(
ch
 == 'v') {

564 
JavaVM
* 
vm
 = 
	`va_¬g
(
­
, JavaVM*);

565 
	`SŒšgAµ’dF
(&
msg
, "(JavaVM*)%p", 
vm
);

566 } ià(
ch
 == 'E') {

567 
JNIEnv
* 
’v
 = 
	`va_¬g
(
­
, JNIEnv*);

568 
	`SŒšgAµ’dF
(&
msg
, "(JNIEnv*)%p", 
’v
);

569 } ià(
ch
 == 'L' || ch == 'a' || ch == 's') {

571 
jobjeù
 
o
 = 
	`va_¬g
(
­
, jobject);

572 ià(
o
 =ğ
NULL
) {

573 
msg
 += "NULL";

575 
	`SŒšgAµ’dF
(&
msg
, "%p", 
o
);

577 } ià(
ch
 == 'b') {

578 
jboŞ—n
 
b
 = 
	`va_¬g
(
­
, );

579 
msg
 +ğ(
b
 ? "JNI_TRUE" : "JNI_FALSE");

580 } ià(
ch
 == 'c') {

581 
jşass
 
jc
 = 
	`va_¬g
(
­
, jclass);

582 
Objeù
* 
c
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jc
);

583 ià(
c
 =ğ
NULL
) {

584 
msg
 += "NULL";

585 } ià(
c
 =ğ
kInv®idIndœeùRefObjeù
 || !
	`dvmIsH—pAdd»ss
(c)) {

586 
	`SŒšgAµ’dF
(&
msg
, "%p(INVALID)", 
jc
);

588 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËTy³
(
c
));

589 
	`SŒšgAµ’dF
(&
msg
, "%s", 
şassName
.
	`c_¡r
());

590 ià(!
’Œy
) {

591 
	`SŒšgAµ’dF
(&
msg
, " (%p)", 
jc
);

594 } ià(
ch
 == 'f') {

595 
jf›ldID
 
fid
 = 
	`va_¬g
(
­
, jfieldID);

596 
¡d
::
¡ršg
 
	`Çme
(
	`dvmHumªR—dabËF›ld
((
F›ld
*è
fid
));

597 
	`SŒšgAµ’dF
(&
msg
, "%s", 
Çme
.
	`c_¡r
());

598 ià(!
’Œy
) {

599 
	`SŒšgAµ’dF
(&
msg
, " (%p)", 
fid
);

601 } ià(
ch
 == 'z') {

605 
jšt
 
i
 = 
	`va_¬g
(
­
, jint);

606 
	`SŒšgAµ’dF
(&
msg
, "%d", 
i
);

607 } ià(
ch
 == 'm') {

608 
jm‘hodID
 
mid
 = 
	`va_¬g
(
­
, jmethodID);

609 
¡d
::
¡ršg
 
	`Çme
(
	`dvmHumªR—dabËM‘hod
((
M‘hod
*è
mid
, 
Œue
));

610 
	`SŒšgAµ’dF
(&
msg
, "%s", 
Çme
.
	`c_¡r
());

611 ià(!
’Œy
) {

612 
	`SŒšgAµ’dF
(&
msg
, " (%p)", 
mid
);

614 } ià(
ch
 == 'p') {

615 * 
p
 = 
	`va_¬g
(
­
, *);

616 ià(
p
 =ğ
NULL
) {

617 
msg
 += "NULL";

619 
	`SŒšgAµ’dF
(&
msg
, "(void*è%p", 
p
);

621 } ià(
ch
 == 'r') {

622 
jšt
 
»Ëa£Mode
 = 
	`va_¬g
(
­
, jint);

623 ià(
»Ëa£Mode
 == 0) {

624 
msg
 += "0";

625 } ià(
»Ëa£Mode
 =ğ
JNI_ABORT
) {

626 
msg
 += "JNI_ABORT";

627 } ià(
»Ëa£Mode
 =ğ
JNI_COMMIT
) {

628 
msg
 += "JNI_COMMIT";

630 
	`SŒšgAµ’dF
(&
msg
, "šv®id„–—£ mod%d", 
»Ëa£Mode
);

632 } ià(
ch
 == 'u') {

633 cÚ¡ * 
utf
 = 
	`va_¬g
(
­
, const *);

634 ià(
utf
 =ğ
NULL
) {

635 
msg
 += "NULL";

637 
	`SŒšgAµ’dF
(&
msg
, "\"%s\"", 
utf
);

639 } ià(
ch
 == '.') {

640 
msg
 += "...";

642 
	`ALOGE
("unknowÀŒaû fÜm© s³cif›¸%c", 
ch
);

643 
	`dvmAbÜt
();

645 ià(*
fmt
) {

646 
	`SŒšgAµ’dF
(&
msg
, ", ");

649 
	`va_’d
(
­
);

651 ià(
’Œy
) {

652 ià(
mHasM‘hod
) {

653 
¡d
::
¡ršg
 
	`m‘hodName
(
	`dvmHumªR—dabËM‘hod
(
m‘hod
, 
çl£
));

654 
	`ALOGI
("JNI: % -> %s(%s)", 
m‘hodName
.
	`c_¡r
(), 
mFunùiÚName
, 
msg
.c_str());

655 
mInd’t
 = 
m‘hodName
.
	`size
() + 1;

657 
	`ALOGI
("JNI: -> %s(%s)", 
mFunùiÚName
, 
msg
.
	`c_¡r
());

658 
mInd’t
 = 0;

661 
	`ALOGI
("JNI: %*s<- % »tuºed %s", 
mInd’t
, "", 
mFunùiÚName
, 
msg
.
	`c_¡r
());

666 ià(
’Œy
) {

667 
	`va_¡¬t
(
­
, 
fmt0
);

668 cÚ¡ * 
fmt
 = 
fmt0
; *fmt; ++fmt) {

669 
ch
 = *
fmt
;

670 ià(
ch
 == 'a') {

671 
	`checkA¼ay
(
	`va_¬g
(
­
, 
j¬¿y
));

672 } ià(
ch
 == 'c') {

673 
	`checkCÏss
(
	`va_¬g
(
­
, 
jşass
));

674 } ià(
ch
 == 'L') {

675 
	`checkObjeù
(
	`va_¬g
(
­
, 
jobjeù
));

676 } ià(
ch
 == 'r') {

677 
	`checkR–—£Mode
(
	`va_¬g
(
­
, 
jšt
));

678 } ià(
ch
 == 's') {

679 
	`checkSŒšg
(
	`va_¬g
(
­
, 
j¡ršg
));

680 } ià(
ch
 == 'u') {

681 ià((
mFÏgs
 & 
kFÏg_R–—£
) != 0) {

682 
	`checkNÚNuÎ
(
	`va_¬g
(
­
, const *));

684 
boŞ
 
nuÎabË
 = ((
mFÏgs
 & 
kFÏg_NuÎabËUtf
) != 0);

685 
	`checkUtfSŒšg
(
	`va_¬g
(
­
, cÚ¡ *), 
nuÎabË
);

687 } ià(
ch
 == 'z') {

688 
	`checkL’gthPos™ive
(
	`va_¬g
(
­
, 
jsize
));

689 } ià(
	`¡rchr
("BCISZbfmpEv", 
ch
è!ğ
NULL
) {

690 
	`va_¬g
(
­
, );

691 } ià(
ch
 == 'D' || ch == 'F') {

692 
	`va_¬g
(
­
, );

693 } ià(
ch
 == 'J') {

694 
	`va_¬g
(
­
, );

695 } ià(
ch
 == '.') {

697 
	`ALOGE
("unknowÀcheck fÜm© s³cif›¸%c", 
ch
);

698 
	`dvmAbÜt
();

701 
	`va_’d
(
­
);

703 
	}
}

706 
Th»ad
* 
	$£lf
() {

707  ((
JNIEnvExt
*è
mEnv
)->
£lf
;

708 
	}
}

710 
	g´iv©e
:

711 
JNIEnv
* 
mEnv
;

712 cÚ¡ * 
	gmFunùiÚName
;

713 
	gmFÏgs
;

714 
boŞ
 
	gmHasM‘hod
;

715 
size_t
 
	gmInd’t
;

717 
	$š™
(
JNIEnv
* 
’v
, 
æags
, cÚ¡ * 
funùiÚName
, 
boŞ
 
hasM‘hod
) {

718 
mEnv
 = 
’v
;

719 
mFÏgs
 = 
æags
;

722 
mFunùiÚName
 = 
funùiÚName
 + 6;

727 
mHasM‘hod
 = 
hasM‘hod
;

728 
	}
}

735 
	$checkA¼ay
(
j¬¿y
 
j¬r
) {

736 ià(
j¬r
 =ğ
NULL
) {

737 
	`ALOGW
("JNI WARNING:„eceived‚ull‡rray");

738 
	`showLoÿtiÚ
();

739 
	`abÜtMaybe
();

743 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

744 
boŞ
 
´štW¬n
 = 
çl£
;

746 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
j¬r
);

747 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

748 
	`ALOGW
("JNI WARNING: jarray is‡n invalid %s„eference (%p)",

749 
	`šdœeùRefKšdName
(
j¬r
), jarr);

750 
´štW¬n
 = 
Œue
;

751 } ià(
obj
->
şazz
->
desütÜ
[0] != '[') {

752 
	`ALOGW
("JNI WARNING: jarray‡rg has wrongype (expected‡rray, got %s)",

753 
obj
->
şazz
->
desütÜ
);

754 
´štW¬n
 = 
Œue
;

757 ià(
´štW¬n
) {

758 
	`showLoÿtiÚ
();

759 
	`abÜtMaybe
();

761 
	}
}

763 
	$checkCÏss
(
jşass
 
c
) {

764 
	`checkIn¡ªû
(
c
, 
gDvm
.
şassJavaLªgCÏss
, "jclass");

765 
	}
}

767 
	$checkL’gthPos™ive
(
jsize
 
Ëngth
) {

768 ià(
Ëngth
 < 0) {

769 
	`ALOGW
("JNI WARNING:‚eg©ivjsiz(%s)", 
mFunùiÚName
);

770 
	`abÜtMaybe
();

772 
	}
}

780 
	$checkObjeù
(
jobjeù
 
jobj
) {

781 ià(
jobj
 =ğ
NULL
) {

785 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

787 
boŞ
 
´štW¬n
 = 
çl£
;

788 ià(
	`dvmG‘JNIRefTy³
(
	`£lf
(), 
jobj
è=ğ
JNIInv®idRefTy³
) {

789 
	`ALOGW
("JNI WARNING: %°i nÙ‡ v®id JNI„eã»nû", 
jobj
);

790 
´štW¬n
 = 
Œue
;

792 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jobj
);

793 ià(
obj
 =ğ
kInv®idIndœeùRefObjeù
) {

794 
	`ALOGW
("JNI WARNING:‚©ivcod·ssšg iÀšv®id„eã»nû %p", 
jobj
);

795 
´štW¬n
 = 
Œue
;

796 } ià(
obj
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(obj)) {

798 
	`ALOGW
("JNI WARNING:‚ative code…assing in„eferenceo invalid object %p %p",

799 
jobj
, 
obj
);

800 
´štW¬n
 = 
Œue
;

804 ià(
´štW¬n
) {

805 
	`showLoÿtiÚ
();

806 
	`abÜtMaybe
();

808 
	}
}

814 
	$checkR–—£Mode
(
jšt
 
mode
) {

815 ià(
mode
 !ğ0 && mod!ğ
JNI_COMMIT
 && mod!ğ
JNI_ABORT
) {

816 
	`ALOGW
("JNI WARNING: bad v®ufÜ mod(%dè(%s)", 
mode
, 
mFunùiÚName
);

817 
	`abÜtMaybe
();

819 
	}
}

821 
	$checkSŒšg
(
j¡ršg
 
s
) {

822 
	`checkIn¡ªû
(
s
, 
gDvm
.
şassJavaLªgSŒšg
, "jstring");

823 
	}
}

825 
	$checkTh»ad
(
æags
) {

827 
JNIEnvExt
* 
th»adEnv
 = 
	`dvmG‘JNIEnvFÜTh»ad
();

833 
boŞ
 
´štW¬n
 = 
çl£
;

834 ià(
th»adEnv
 =ğ
NULL
) {

835 
	`ALOGE
("JNI ERROR:‚on-VMhread making JNI calls");

837 
	`dvmAbÜt
();

838 } ià((
JNIEnvExt
*è
mEnv
 !ğ
th»adEnv
) {

839 ià(
	`dvmTh»adS–f
()->
th»adId
 !ğ
th»adEnv
->
’vTh»adId
) {

840 
	`ALOGE
("JNI:hreadEnv !=hread->env?");

841 
	`dvmAbÜt
();

844 
	`ALOGW
("JNI WARNING:hreadid=%d usingƒnv fromhreadid=%d",

845 
th»adEnv
->
’vTh»adId
, ((
JNIEnvExt
*è
mEnv
)->envThreadId);

846 
´štW¬n
 = 
Œue
;

849 ià(
gDvmJni
.
wÜkAroundAµJniBugs
) {

850 
´štW¬n
 = 
çl£
;

855 } ià(((
JNIEnvExt
*è
mEnv
)->
£lf
 !ğ
	`dvmTh»adS–f
()) {

857 
	`ALOGE
("JNI ERROR:ƒnv->self !=hread-self (%p vs. %p)",

858 ((
JNIEnvExt
*è
mEnv
)->
£lf
, 
	`dvmTh»adS–f
());

859 
	`dvmAbÜt
();

866 
æags
 & 
kFÏg_Cr™Mask
) {

867 
kFÏg_Cr™Okay
:

869 
kFÏg_Cr™Bad
:

870 ià(
th»adEnv
->
ü™iÿl
) {

871 
	`ALOGW
("JNI WARNING:hreadid=%d using JNI‡fter critical get",

872 
th»adEnv
->
’vTh»adId
);

873 
´štW¬n
 = 
Œue
;

876 
kFÏg_Cr™G‘
:

878 
th»adEnv
->
ü™iÿl
++;

880 
kFÏg_Cr™R–—£
:

881 
th»adEnv
->
ü™iÿl
--;

882 ià(
th»adEnv
->
ü™iÿl
 < 0) {

883 
	`ALOGW
("JNI WARNING:hreadid=%d calledoo many crit„eleases",

884 
th»adEnv
->
’vTh»adId
);

885 
´štW¬n
 = 
Œue
;

889 
	`as£¹
(
çl£
);

896 
boŞ
 
´štExû±iÚ
 = 
çl£
;

897 ià((
æags
 & 
kFÏg_ExûpOkay
è=ğ0 && 
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

898 
	`ALOGW
("JNI WARNING: JNI method called withƒxception…ending");

899 
´štW¬n
 = 
Œue
;

900 
´štExû±iÚ
 = 
Œue
;

903 ià(
´štW¬n
) {

904 
	`showLoÿtiÚ
();

906 ià(
´štExû±iÚ
) {

907 
	`ALOGW
("Pendingƒxception is:");

908 
	`dvmLogExû±iÚSckT¿û
();

910 ià(
´štW¬n
) {

911 
	`abÜtMaybe
();

913 
	}
}

918 
	$checkUtfSŒšg
(cÚ¡ * 
by‹s
, 
boŞ
 
nuÎabË
) {

919 ià(
by‹s
 =ğ
NULL
) {

920 ià(!
nuÎabË
) {

921 
	`ALOGW
("JNI WARNING:‚on-nullable const char* was NULL");

922 
	`showLoÿtiÚ
();

923 
	`abÜtMaybe
();

928 cÚ¡ * 
”rÜKšd
 = 
NULL
;

929 
u1
 
utf8
 = 
	`checkUtfBy‹s
(
by‹s
, &
”rÜKšd
);

930 ià(
”rÜKšd
 !ğ
NULL
) {

931 
	`ALOGW
("JNI WARNING: iÅuˆi nÙ v®id Modif›d UTF-8: iÎeg® % by‹ %#x", 
”rÜKšd
, 
utf8
);

932 
	`ALOGW
(" sŒšg: '%s'", 
by‹s
);

933 
	`showLoÿtiÚ
();

934 
	`abÜtMaybe
();

936 
	}
}

945 
	$checkIn¡ªû
(
jobjeù
 
jobj
, 
CÏssObjeù
* 
ex³ùedCÏss
, cÚ¡ * 
¬gName
) {

946 ià(
jobj
 =ğ
NULL
) {

947 
	`ALOGW
("JNI WARNING:„eûived‚uÎ %s", 
¬gName
);

948 
	`showLoÿtiÚ
();

949 
	`abÜtMaybe
();

953 
ScİedCheckJniTh»adS‹
 
	`ts
(
mEnv
);

954 
boŞ
 
´štW¬n
 = 
çl£
;

956 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
	`£lf
(), 
jobj
);

957 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

958 
	`ALOGW
("JNI WARNING: %s is‡n invalid %s„eference (%p)",

959 
¬gName
, 
	`šdœeùRefKšdName
(
jobj
), jobj);

960 
´štW¬n
 = 
Œue
;

961 } ià(
obj
->
şazz
 !ğ
ex³ùedCÏss
) {

962 
	`ALOGW
("JNI WARNING: %s‡rg has wrongype (expected %s, got %s)",

963 
¬gName
, 
ex³ùedCÏss
->
desütÜ
, 
obj
->
şazz
->descriptor);

964 
´štW¬n
 = 
Œue
;

967 ià(
´štW¬n
) {

968 
	`showLoÿtiÚ
();

969 
	`abÜtMaybe
();

971 
	}
}

973 
u1
 
	$checkUtfBy‹s
(cÚ¡ * 
by‹s
, cÚ¡ ** 
”rÜKšd
) {

974 *
by‹s
 != '\0') {

975 
u1
 
utf8
 = *(
by‹s
++);

977 
utf8
 >> 4) {

998 *
”rÜKšd
 = "start";

999  
utf8
;

1002 
utf8
 = *(
by‹s
++);

1003 ià((
utf8
 & 0xc0) != 0x80) {

1004 *
”rÜKšd
 = "continuation";

1005  
utf8
;

1011 
utf8
 = *(
by‹s
++);

1012 ià((
utf8
 & 0xc0) != 0x80) {

1013 *
”rÜKšd
 = "continuation";

1014  
utf8
;

1020 
	}
}

1025 cÚ¡ * 
	$´im™iveTy³ToName
(
Prim™iveTy³
 
´imTy³
) {

1026 
´imTy³
) {

1027 
PRIM_VOID
:  "void";

1028 
PRIM_BOOLEAN
:  "boolean";

1029 
PRIM_BYTE
:  "byte";

1030 
PRIM_SHORT
:  "short";

1031 
PRIM_CHAR
:  "char";

1032 
PRIM_INT
:  "int";

1033 
PRIM_LONG
:  "long";

1034 
PRIM_FLOAT
:  "float";

1035 
PRIM_DOUBLE
:  "double";

1036 
PRIM_NOT
:  "Object/array";

1039 
	}
}

1041 
	$showLoÿtiÚ
() {

1042 cÚ¡ 
M‘hod
* 
m‘hod
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

1043 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1044 
	`ALOGW
(" iÀ%s.%s:% (%s)", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
, 
mFunùiÚName
);

1045 
	`ä“
(
desc
);

1046 
	}
}

1049 
ScİedCheck
(const ScopedCheck&);

1050 
	gİ”©Ü
=(cÚ¡ 
ScİedCheck
&);

1059 
	#kGu¬dL’
 512

	)

1060 
	#kGu¬dP©‹º
 0xd5e3

	)

1061 
	#kGu¬dMagic
 0xffd5¯96

	)

1064 
	sGu¬dedCİy
 {

1065 
u4
 
	mmagic
;

1066 
uLÚg
 
	madËr
;

1067 
size_t
 
	mÜigš®L’
;

1068 cÚ¡ * 
	mÜigš®PŒ
;

1071 
šlše
 cÚ¡ 
Gu¬dedCİy
* 
äomD©a
(cÚ¡ * 
d©aBuf
) {

1072  
	m»š‹½»t_ÿ¡
<cÚ¡ 
	mGu¬dedCİy
*>(
aùu®Bufãr
(
d©aBuf
));

1081 * 
ü—‹
(cÚ¡ * 
buf
, 
size_t
 
Ën
, 
boŞ
 
modOkay
) {

1082 
size_t
 
	mÃwL’
 = 
aùu®L’gth
(
Ën
);

1083 
u1
* 
	mÃwBuf
 = 
debugAÎoc
(
ÃwL’
);

1086 
u2
* 
	m·t
 = (u2*è
ÃwBuf
;

1087 
size_t
 
	mi
 = 0; i < 
	mÃwL’
 / 2; i++) {

1088 *
	m·t
++ = 
kGu¬dP©‹º
;

1092 
memıy
(
ÃwBuf
 + 
kGu¬dL’
 / 2, 
buf
, 
Ën
);

1095 
uLÚg
 
	madËr
 = 0;

1096 ià(!
	mmodOkay
) {

1097 
	madËr
 = 
adËr32
(0L, 
Z_NULL
, 0);

1098 
	madËr
 = 
adËr32
(
adËr
, (cÚ¡ 
By‹f
*)
buf
, 
Ën
);

1099 *(
	muLÚg
*)
	mÃwBuf
 = 
adËr
;

1102 
Gu¬dedCİy
* 
	mpExŒa
 = 
»š‹½»t_ÿ¡
<Gu¬dedCİy*>(
ÃwBuf
);

1103 
	mpExŒa
->
	mmagic
 = 
kGu¬dMagic
;

1104 
	mpExŒa
->
	madËr
 = 
adËr
;

1105 
	mpExŒa
->
	mÜigš®PŒ
 = 
buf
;

1106 
	mpExŒa
->
	mÜigš®L’
 = 
Ën
;

1108  
	mÃwBuf
 + 
	mkGu¬dL’
 / 2;

1114 * 
de¡roy
(* 
d©aBuf
) {

1115 cÚ¡ 
Gu¬dedCİy
* 
	mpExŒa
 = Gu¬dedCİy::
äomD©a
(
d©aBuf
);

1116 * 
	mÜigš®PŒ
 = (*è
pExŒa
->
Üigš®PŒ
;

1117 
size_t
 
	mËn
 = 
pExŒa
->
Üigš®L’
;

1118 
debugF»e
(
d©aBuf
, 
Ën
);

1119  
	mÜigš®PŒ
;

1128 
boŞ
 
check
(cÚ¡ * 
d©aBuf
, boŞ 
modOkay
) {

1129 cÚ¡ 
u4
 
	mkMagicCmp
 = 
kGu¬dMagic
;

1130 cÚ¡ 
u1
* 
	mfuÎBuf
 = 
aùu®Bufãr
(
d©aBuf
);

1131 cÚ¡ 
Gu¬dedCİy
* 
	mpExŒa
 = Gu¬dedCİy::
äomD©a
(
d©aBuf
);

1139 ià(
memcmp
(&
pExŒa
->
magic
, &
kMagicCmp
, 4) != 0) {

1140 
u1
 
buf
[4];

1141 
memıy
(
buf
, &
pExŒa
->
magic
, 4);

1142 
ALOGE
("JNI: guard magic does‚ot match (found 0x%02x%02x%02x%02x) -- incorrect data…ointer %p?",

1143 
buf
[3], buf[2], buf[1], buf[0], 
d©aBuf
);

1144  
	mçl£
;

1147 
size_t
 
	mËn
 = 
pExŒa
->
Üigš®L’
;

1150 cÚ¡ 
u2
* 
	m·t
 = (u2*è
fuÎBuf
;

1151 
size_t
 
	mi
 = (
Gu¬dedCİy
è/ 2; i < (
	mkGu¬dL’
 / 2 - (
	mGu¬dedCİy
)) / 2; i++) {

1152 ià(
	m·t
[
i
] !ğ
kGu¬dP©‹º
) {

1153 
ALOGE
("JNI: gu¬d…©‹º(1èdi¡urbed‡ˆ%°+ %d", 
fuÎBuf
, 
i
*2);

1154  
	mçl£
;

1158 
	moff£t
 = 
kGu¬dL’
 / 2 + 
Ën
;

1159 ià(
	moff£t
 & 0x01) {

1161 cÚ¡ 
u2
 
	m·tSam¶e
 = 
kGu¬dP©‹º
;

1162 ià(
	mfuÎBuf
[
off£t
] !ğ((cÚ¡ 
u1
*è&
·tSam¶e
)[1]) {

1163 
ALOGE
("JNI: guard…attern disturbed in odd byte‡fter %p (+%d) 0x%02x 0x%02x",

1164 
fuÎBuf
, 
off£t
, fuÎBuf[off£t], ((cÚ¡ 
u1
*è&
·tSam¶e
)[1]);

1165  
	mçl£
;

1167 
	moff£t
++;

1171 
	m·t
 = (
u2
*è(
fuÎBuf
 + 
off£t
);

1172 
size_t
 
	mi
 = 0; i < 
	mkGu¬dL’
 / 4; i++) {

1173 ià(
	m·t
[
i
] !ğ
kGu¬dP©‹º
) {

1174 
ALOGE
("JNI: gu¬d…©‹º(2èdi¡urbed‡ˆ%°+ %d", 
fuÎBuf
, 
off£t
 + 
i
*2);

1175  
	mçl£
;

1184 ià(!
	mmodOkay
) {

1185 
uLÚg
 
	madËr
 = 
adËr32
(0L, 
Z_NULL
, 0);

1186 
	madËr
 = 
adËr32
(
adËr
, (cÚ¡ 
By‹f
*)
d©aBuf
, 
Ën
);

1187 ià(
	mpExŒa
->
	madËr
 !ğ
adËr
) {

1188 
ALOGE
("JNI: buffer modified (0x%08lx vs 0x%08lx)‡t‡ddr %p",

1189 
pExŒa
->
adËr
,‡dËr, 
d©aBuf
);

1190  
	mçl£
;

1194  
	mŒue
;

1197 
	m´iv©e
:

1198 
u1
* 
debugAÎoc
(
size_t
 
Ën
) {

1199 * 
»suÉ
 = 
mm­
(
NULL
, 
Ën
, 
PROT_READ
|
PROT_WRITE
, 
MAP_PRIVATE
|
MAP_ANON
, -1, 0);

1200 ià(
	m»suÉ
 =ğ
MAP_FAILED
) {

1201 
ALOGE
("Gu¬dedCİy::ü—‹ mm­(%dèçed: %s", 
Ën
, 
¡»¼Ü
(
”ºo
));

1202 
dvmAbÜt
();

1204  
	m»š‹½»t_ÿ¡
<
	mu1
*>(
	m»suÉ
);

1207 
debugF»e
(* 
d©aBuf
, 
size_t
 
Ën
) {

1208 
u1
* 
	mfuÎBuf
 = 
aùu®Bufãr
(
d©aBuf
);

1209 
size_t
 
	mtÙ®By‹CouÁ
 = 
aùu®L’gth
(
Ën
);

1215 ià(
munm­
(
fuÎBuf
, 
tÙ®By‹CouÁ
) != 0) {

1216 
ALOGW
("munm­ faed: %s", 
¡»¼Ü
(
”ºo
));

1217 
dvmAbÜt
();

1221 cÚ¡ 
u1
* 
aùu®Bufãr
(cÚ¡ * 
d©aBuf
) {

1222  
	m»š‹½»t_ÿ¡
<cÚ¡ 
	mu1
*>(
	md©aBuf
è- 
	mkGu¬dL’
 / 2;

1225 
u1
* 
aùu®Bufãr
(* 
d©aBuf
) {

1226  
	m»š‹½»t_ÿ¡
<
	mu1
*>(
	md©aBuf
è- 
	mkGu¬dL’
 / 2;

1230 
size_t
 
aùu®L’gth
(size_ˆ
Ëngth
) {

1231  (
	mËngth
 + 
	mkGu¬dL’
 + 1) & ~0x01;

1238 
	$dvmPrim™iveTy³Width
(
Prim™iveTy³
 
´imTy³
) {

1239 
´imTy³
) {

1240 
PRIM_BOOLEAN
:  1;

1241 
PRIM_BYTE
:  1;

1242 
PRIM_SHORT
:  2;

1243 
PRIM_CHAR
:  2;

1244 
PRIM_INT
:  4;

1245 
PRIM_LONG
:  8;

1246 
PRIM_FLOAT
:  4;

1247 
PRIM_DOUBLE
:  8;

1248 
PRIM_VOID
:

1250 
	`as£¹
(
çl£
);

1254 
	}
}

1260 * 
	$ü—‹Gu¬dedPACİy
(
JNIEnv
* 
’v
, cÚ¡ 
j¬¿y
 
j¬r
, 
jboŞ—n
* 
isCİy
) {

1261 
ScİedCheckJniTh»adS‹
 
	`ts
(
’v
);

1263 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
	`dvmTh»adS–f
(), 
j¬r
);

1264 
Prim™iveTy³
 
´imTy³
 = 
¬rObj
->
şazz
->
–em’tCÏss
->
´im™iveTy³
;

1265 
Ën
 = 
¬rObj
->
Ëngth
 * 
	`dvmPrim™iveTy³Width
(
´imTy³
);

1266 * 
»suÉ
 = 
Gu¬dedCİy
::
	`ü—‹
(
¬rObj
->
cÚ‹Ás
, 
Ën
, 
Œue
);

1267 ià(
isCİy
 !ğ
NULL
) {

1268 *
isCİy
 = 
JNI_TRUE
;

1270  
»suÉ
;

1271 
	}
}

1277 * 
	$»Ëa£Gu¬dedPACİy
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
, * 
d©aBuf
, 
mode
) {

1278 
ScİedCheckJniTh»adS‹
 
	`ts
(
’v
);

1279 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
	`dvmTh»adS–f
(), 
j¬r
);

1281 ià(!
Gu¬dedCİy
::
	`check
(
d©aBuf
, 
Œue
)) {

1282 
	`ALOGE
("JNI: failed guarded copy check in„eleaseGuardedPACopy");

1283 
	`abÜtMaybe
();

1284  
NULL
;

1287 ià(
mode
 !ğ
JNI_ABORT
) {

1288 
size_t
 
Ën
 = 
Gu¬dedCİy
::
	`äomD©a
(
d©aBuf
)->
Üigš®L’
;

1289 
	`memıy
(
¬rObj
->
cÚ‹Ás
, 
d©aBuf
, 
Ën
);

1292 
u1
* 
»suÉ
 = 
NULL
;

1293 ià(
mode
 !ğ
JNI_COMMIT
) {

1294 
»suÉ
 = (
u1
*è
Gu¬dedCİy
::
	`de¡roy
(
d©aBuf
);

1296 
»suÉ
 = (
u1
*è(*è
Gu¬dedCİy
::
	`äomD©a
(
d©aBuf
)->
Üigš®PŒ
;

1300 
»suÉ
 -ğ
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

1301  
»suÉ
;

1302 
	}
}

1311 
	#CHECK_JNI_ENTRY
(
æags
, 
ty³s
, 
¬gs
...) \

1312 
ScİedCheck
 
	`sc
(
’v
, 
æags
, 
__FUNCTION__
); \

1313 
sc
.
	`check
(
Œue
, 
ty³s
, ##
¬gs
)

	)

1315 
	#CHECK_JNI_EXIT
(
ty³
, 
exp
) ({ \

1316 
	`ty³of
 (
exp
è
_rc
 = (exp); \

1317 
sc
.
	`check
(
çl£
, 
ty³
, 
_rc
); \

1318 
_rc
; })

	)

1319 
	#CHECK_JNI_EXIT_VOID
() \

1320 
sc
.
	`check
(
çl£
, "V")

	)

1322 
jšt
 
	$Check_G‘V”siÚ
(
JNIEnv
* 
’v
) {

1323 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "E", 
’v
);

1324  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘V”siÚ
(env));

1325 
	}
}

1327 
jşass
 
	$Check_DefšeCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
, 
jobjeù
 
lßd”
,

1328 cÚ¡ 
jby‹
* 
buf
, 
jsize
 
bufL’
)

1330 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EuLpz", 
’v
, 
Çme
, 
lßd”
, 
buf
, 
bufL’
);

1331 
sc
.
	`checkCÏssName
(
Çme
);

1332  
	`CHECK_JNI_EXIT
("c", 
	`ba£Env
(
’v
)->
	`DefšeCÏss
Ónv, 
Çme
, 
lßd”
, 
buf
, 
bufL’
));

1333 
	}
}

1335 
jşass
 
	$Check_FšdCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
) {

1336 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Eu", 
’v
, 
Çme
);

1337 
sc
.
	`checkCÏssName
(
Çme
);

1338  
	`CHECK_JNI_EXIT
("c", 
	`ba£Env
(
’v
)->
	`FšdCÏss
Ónv, 
Çme
));

1339 
	}
}

1341 
jşass
 
	$Check_G‘Su³rşass
(
JNIEnv
* 
’v
, 
jşass
 
şazz
) {

1342 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ec", 
’v
, 
şazz
);

1343  
	`CHECK_JNI_EXIT
("c", 
	`ba£Env
(
’v
)->
	`G‘Su³rşass
Ónv, 
şazz
));

1344 
	}
}

1346 
jboŞ—n
 
	$Check_IsAssigÇbËFrom
(
JNIEnv
* 
’v
, 
jşass
 
şazz1
, jşas 
şazz2
) {

1347 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecc", 
’v
, 
şazz1
, 
şazz2
);

1348  
	`CHECK_JNI_EXIT
("b", 
	`ba£Env
(
’v
)->
	`IsAssigÇbËFrom
Ónv, 
şazz1
, 
şazz2
));

1349 
	}
}

1351 
jm‘hodID
 
	$Check_FromReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
m‘hod
) {

1352 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
m‘hod
);

1354  
	`CHECK_JNI_EXIT
("m", 
	`ba£Env
(
’v
)->
	`FromReæeùedM‘hod
Ónv, 
m‘hod
));

1355 
	}
}

1357 
jf›ldID
 
	$Check_FromReæeùedF›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
f›ld
) {

1358 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
f›ld
);

1360  
	`CHECK_JNI_EXIT
("f", 
	`ba£Env
(
’v
)->
	`FromReæeùedF›ld
Ónv, 
f›ld
));

1361 
	}
}

1363 
jobjeù
 
	$Check_ToReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jşass
 
şs
,

1364 
jm‘hodID
 
m‘hodID
, 
jboŞ—n
 
isStic
)

1366 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecmb", 
’v
, 
şs
, 
m‘hodID
, 
isStic
);

1367  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`ToReæeùedM‘hod
Ónv, 
şs
, 
m‘hodID
, 
isStic
));

1368 
	}
}

1370 
jobjeù
 
	$Check_ToReæeùedF›ld
(
JNIEnv
* 
’v
, 
jşass
 
şs
,

1371 
jf›ldID
 
f›ldID
, 
jboŞ—n
 
isStic
)

1373 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecfb", 
’v
, 
şs
, 
f›ldID
, 
isStic
);

1374  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`ToReæeùedF›ld
Ónv, 
şs
, 
f›ldID
, 
isStic
));

1375 
	}
}

1377 
jšt
 
	$Check_Throw
(
JNIEnv
* 
’v
, 
jthrowabË
 
obj
) {

1378 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1380  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`Throw
Ónv, 
obj
));

1381 
	}
}

1383 
jšt
 
	$Check_ThrowNew
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ * 
mes§ge
) {

1384 
	`CHECK_JNI_ENTRY
(
kFÏg_NuÎabËUtf
, "Ecu", 
’v
, 
şazz
, 
mes§ge
);

1385  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`ThrowNew
Ónv, 
şazz
, 
mes§ge
));

1386 
	}
}

1388 
jthrowabË
 
	$Check_Exû±iÚOccu¼ed
(
JNIEnv
* 
’v
) {

1389 
	`CHECK_JNI_ENTRY
(
kFÏg_ExûpOkay
, "E", 
’v
);

1390  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`Exû±iÚOccu¼ed
(env));

1391 
	}
}

1393 
	$Check_Exû±iÚDesüibe
(
JNIEnv
* 
’v
) {

1394 
	`CHECK_JNI_ENTRY
(
kFÏg_ExûpOkay
, "E", 
’v
);

1395 
	`ba£Env
(
’v
)->
	`Exû±iÚDesüibe
(env);

1396 
	`CHECK_JNI_EXIT_VOID
();

1397 
	}
}

1399 
	$Check_Exû±iÚCË¬
(
JNIEnv
* 
’v
) {

1400 
	`CHECK_JNI_ENTRY
(
kFÏg_ExûpOkay
, "E", 
’v
);

1401 
	`ba£Env
(
’v
)->
	`Exû±iÚCË¬
(env);

1402 
	`CHECK_JNI_EXIT_VOID
();

1403 
	}
}

1405 
	$Check_F©®E¼Ü
(
JNIEnv
* 
’v
, cÚ¡ * 
msg
) {

1406 
	`CHECK_JNI_ENTRY
(
kFÏg_NuÎabËUtf
, "Eu", 
’v
, 
msg
);

1407 
	`ba£Env
(
’v
)->
	`F©®E¼Ü
Ónv, 
msg
);

1408 
	`CHECK_JNI_EXIT_VOID
();

1409 
	}
}

1411 
jšt
 
	$Check_PushLoÿlF¿me
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
) {

1412 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EI", 
’v
, 
ÿ·c™y
);

1413  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`PushLoÿlF¿me
Ónv, 
ÿ·c™y
));

1414 
	}
}

1416 
jobjeù
 
	$Check_PİLoÿlF¿me
(
JNIEnv
* 
’v
, 
jobjeù
 
»s
) {

1417 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EL", 
’v
, 
»s
);

1418  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`PİLoÿlF¿me
Ónv, 
»s
));

1419 
	}
}

1421 
jobjeù
 
	$Check_NewGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1422 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1423  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewGlob®Ref
Ónv, 
obj
));

1424 
	}
}

1426 
	$Check_D–‘eGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
glob®Ref
) {

1427 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EL", 
’v
, 
glob®Ref
);

1428 ià(
glob®Ref
 !ğ
NULL
 && 
	`dvmG‘JNIRefTy³
(
sc
.
	`£lf
(), glob®Refè!ğ
JNIGlob®RefTy³
) {

1429 
	`ALOGW
("JNI WARNING: DeleteGlobalRef on‚on-global %p (type=%d)",

1430 
glob®Ref
, 
	`dvmG‘JNIRefTy³
(
sc
.
	`£lf
(), globalRef));

1431 
	`abÜtMaybe
();

1433 
	`ba£Env
(
’v
)->
	`D–‘eGlob®Ref
Ónv, 
glob®Ref
);

1434 
	`CHECK_JNI_EXIT_VOID
();

1436 
	}
}

1438 
jobjeù
 
	$Check_NewLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
»f
) {

1439 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
»f
);

1440  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewLoÿlRef
Ónv, 
»f
));

1441 
	}
}

1443 
	$Check_D–‘eLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
loÿlRef
) {

1444 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EL", 
’v
, 
loÿlRef
);

1445 ià(
loÿlRef
 !ğ
NULL
 && 
	`dvmG‘JNIRefTy³
(
sc
.
	`£lf
(),†oÿlRefè!ğ
JNILoÿlRefTy³
) {

1446 
	`ALOGW
("JNI WARNING: DeleteLocalRef on‚on-local %p (type=%d)",

1447 
loÿlRef
, 
	`dvmG‘JNIRefTy³
(
sc
.
	`£lf
(),†ocalRef));

1448 
	`abÜtMaybe
();

1450 
	`ba£Env
(
’v
)->
	`D–‘eLoÿlRef
Ónv, 
loÿlRef
);

1451 
	`CHECK_JNI_EXIT_VOID
();

1453 
	}
}

1455 
jšt
 
	$Check_Ensu»LoÿlC­ac™y
(
JNIEnv
 *
’v
, 
jšt
 
ÿ·c™y
) {

1456 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EI", 
’v
, 
ÿ·c™y
);

1457  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`Ensu»LoÿlC­ac™y
Ónv, 
ÿ·c™y
));

1458 
	}
}

1460 
jboŞ—n
 
	$Check_IsSameObjeù
(
JNIEnv
* 
’v
, 
jobjeù
 
»f1
, jobjeù 
»f2
) {

1461 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELL", 
’v
, 
»f1
, 
»f2
);

1462  
	`CHECK_JNI_EXIT
("b", 
	`ba£Env
(
’v
)->
	`IsSameObjeù
Ónv, 
»f1
, 
»f2
));

1463 
	}
}

1465 
jobjeù
 
	$Check_AÎocObjeù
(
JNIEnv
* 
’v
, 
jşass
 
şazz
) {

1466 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ec", 
’v
, 
şazz
);

1467  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`AÎocObjeù
Ónv, 
şazz
));

1468 
	}
}

1470 
jobjeù
 
	$Check_NewObjeù
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, ...) {

1471 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
);

1472 
va_li¡
 
¬gs
;

1473 
	`va_¡¬t
(
¬gs
, 
m‘hodID
);

1474 
jobjeù
 
»suÉ
 = 
	`ba£Env
(
’v
)->
	`NewObjeùV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
);

1475 
	`va_’d
(
¬gs
);

1476  
	`CHECK_JNI_EXIT
("L", 
»suÉ
);

1477 
	}
}

1479 
jobjeù
 
	$Check_NewObjeùV
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) {

1480 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
);

1481  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewObjeùV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
));

1482 
	}
}

1484 
jobjeù
 
	$Check_NewObjeùA
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) {

1485 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
);

1486  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewObjeùA
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
));

1487 
	}
}

1489 
jşass
 
	$Check_G‘ObjeùCÏss
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1490 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1491  
	`CHECK_JNI_EXIT
("c", 
	`ba£Env
(
’v
)->
	`G‘ObjeùCÏss
Ónv, 
obj
));

1492 
	}
}

1494 
jboŞ—n
 
	$Check_IsIn¡ªûOf
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, 
jşass
 
şazz
) {

1495 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELc", 
’v
, 
obj
, 
şazz
);

1496  
	`CHECK_JNI_EXIT
("b", 
	`ba£Env
(
’v
)->
	`IsIn¡ªûOf
Ónv, 
obj
, 
şazz
));

1497 
	}
}

1499 
jm‘hodID
 
	$Check_G‘M‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1500 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecuu", 
’v
, 
şazz
, 
Çme
, 
sig
);

1501  
	`CHECK_JNI_EXIT
("m", 
	`ba£Env
(
’v
)->
	`G‘M‘hodID
Ónv, 
şazz
, 
Çme
, 
sig
));

1502 
	}
}

1504 
jf›ldID
 
	$Check_G‘F›ldID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1505 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecuu", 
’v
, 
şazz
, 
Çme
, 
sig
);

1506  
	`CHECK_JNI_EXIT
("f", 
	`ba£Env
(
’v
)->
	`G‘F›ldID
Ónv, 
şazz
, 
Çme
, 
sig
));

1507 
	}
}

1509 
jm‘hodID
 
	$Check_G‘SticM‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1510 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

1512 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecuu", 
’v
, 
şazz
, 
Çme
, 
sig
);

1513  
	`CHECK_JNI_EXIT
("m", 
	`ba£Env
(
’v
)->
	`G‘SticM‘hodID
Ónv, 
şazz
, 
Çme
, 
sig
));

1514 
	}
}

1516 
jf›ldID
 
	$Check_G‘SticF›ldID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1517 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

1519 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecuu", 
’v
, 
şazz
, 
Çme
, 
sig
);

1520  
	`CHECK_JNI_EXIT
("f", 
	`ba£Env
(
’v
)->
	`G‘SticF›ldID
Ónv, 
şazz
, 
Çme
, 
sig
));

1521 
	}
}

1523 
	#FIELD_ACCESSORS
(
_ùy³
, 
_jÇme
, 
_áy³
, 
_ty³
) \

1524 
_ùy³
 
Check_G‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jf›ldID
 
f›ldID
) { \

1525 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecf", 
’v
, 
şazz
, 
f›ldID
); \

1526 
sc
.
	`checkSticF›ldID
(
şazz
, 
f›ldID
); \

1527 
sc
.
	`checkF›ldTy³FÜG‘
(
f›ldID
, 
_ty³
, 
Œue
); \

1528  
	`CHECK_JNI_EXIT
(
_ty³
, 
	`ba£Env
(
’v
)->
G‘Stic
##
_jÇme
##
	`F›ld
Ónv, 
şazz
, 
f›ldID
)); \

1530 
_ùy³
 
Check_G‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, 
jf›ldID
 
f›ldID
) { \

1531 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELf", 
’v
, 
obj
, 
f›ldID
); \

1532 
sc
.
	`checkIn¡ªûF›ldID
(
obj
, 
f›ldID
); \

1533 
sc
.
	`checkF›ldTy³FÜG‘
(
f›ldID
, 
_ty³
, 
çl£
); \

1534  
	`CHECK_JNI_EXIT
(
_ty³
, 
	`ba£Env
(
’v
)->
G‘
##
_jÇme
##
	`F›ld
Ónv, 
obj
, 
f›ldID
)); \

1536 
Check_S‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) { \

1537 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecf" 
_ty³
, 
’v
, 
şazz
, 
f›ldID
, 
v®ue
); \

1538 
sc
.
	`checkSticF›ldID
(
şazz
, 
f›ldID
); \

1540 
sc
.
	`checkF›ldTy³FÜS‘
((
jobjeù
)(
u4
)
v®ue
, 
f›ldID
, 
_áy³
, 
Œue
); \

1541 
	`ba£Env
(
’v
)->
S‘Stic
##
_jÇme
##
	`F›ld
Ónv, 
şazz
, 
f›ldID
, 
v®ue
); \

1542 
	`CHECK_JNI_EXIT_VOID
(); \

1544 
Check_S‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) { \

1545 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELf" 
_ty³
, 
’v
, 
obj
, 
f›ldID
, 
v®ue
); \

1546 
sc
.
	`checkIn¡ªûF›ldID
(
obj
, 
f›ldID
); \

1548 
sc
.
	`checkF›ldTy³FÜS‘
((
jobjeù
)(
u4
è
v®ue
, 
f›ldID
, 
_áy³
, 
çl£
); \

1549 
	`ba£Env
(
’v
)->
S‘
##
_jÇme
##
	`F›ld
Ónv, 
obj
, 
f›ldID
, 
v®ue
); \

1550 
	`CHECK_JNI_EXIT_VOID
(); \

1551 }

	)

1553 
FIELD_ACCESSORS
(
jobjeù
, 
Objeù
, 
PRIM_NOT
, "L");

1554 
FIELD_ACCESSORS
(
jboŞ—n
, 
BoŞ—n
, 
PRIM_BOOLEAN
, "Z");

1555 
FIELD_ACCESSORS
(
jby‹
, 
By‹
, 
PRIM_BYTE
, "B");

1556 
FIELD_ACCESSORS
(
jch¬
, 
Ch¬
, 
PRIM_CHAR
, "C");

1557 
FIELD_ACCESSORS
(
jshÜt
, 
ShÜt
, 
PRIM_SHORT
, "S");

1558 
FIELD_ACCESSORS
(
jšt
, 
IÁ
, 
PRIM_INT
, "I");

1559 
FIELD_ACCESSORS
(
jlÚg
, 
LÚg
, 
PRIM_LONG
, "J");

1560 
FIELD_ACCESSORS
(
jæßt
, 
Flßt
, 
PRIM_FLOAT
, "F");

1561 
FIELD_ACCESSORS
(
jdoubË
, 
DoubË
, 
PRIM_DOUBLE
, "D");

1563 
	#CALL
(
_ùy³
, 
_jÇme
, 
_»tdeş
, 
_»sgn
, 
_»tok
, 
_»tsig
) \

1565 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1566 
jm‘hodID
 
m‘hodID
, ...) \

1568 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELm.", 
’v
, 
obj
, 
m‘hodID
); \

1569 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1570 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1571 
_»tdeş
; \

1572 
va_li¡
 
¬gs
; \

1573 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1574 
_»sgn
 
	`ba£Env
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
m‘hodID
, 
¬gs
); \

1575 
	`va_’d
(
¬gs
); \

1576 
_»tok
; \

1578 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1579 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1581 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELm.", 
’v
, 
obj
, 
m‘hodID
); \

1582 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1583 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1584 
_»tdeş
; \

1585 
_»sgn
 
	`ba£Env
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
m‘hodID
, 
¬gs
); \

1586 
_»tok
; \

1588 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1589 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1591 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELm.", 
’v
, 
obj
, 
m‘hodID
); \

1592 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1593 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1594 
_»tdeş
; \

1595 
_»sgn
 
	`ba£Env
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodA
Ónv, 
obj
, 
m‘hodID
, 
¬gs
); \

1596 
_»tok
; \

1599 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, \

1600 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, ...) \

1602 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELcm.", 
’v
, 
obj
, 
şazz
, 
m‘hodID
); \

1603 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1604 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1605 
_»tdeş
; \

1606 
va_li¡
 
¬gs
; \

1607 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1608 
_»sgn
 
	`ba£Env
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
şazz
, 
m‘hodID
, 
¬gs
); \

1609 
	`va_’d
(
¬gs
); \

1610 
_»tok
; \

1612 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, \

1613 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1615 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELcm.", 
’v
, 
obj
, 
şazz
, 
m‘hodID
); \

1616 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1617 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1618 
_»tdeş
; \

1619 
_»sgn
 
	`ba£Env
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
şazz
, 
m‘hodID
, 
¬gs
); \

1620 
_»tok
; \

1622 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, \

1623 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1625 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "ELcm.", 
’v
, 
obj
, 
şazz
, 
m‘hodID
); \

1626 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
çl£
); \

1627 
sc
.
	`checkVœtu®M‘hod
(
obj
, 
m‘hodID
); \

1628 
_»tdeş
; \

1629 
_»sgn
 
	`ba£Env
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
Ónv, 
obj
, 
şazz
, 
m‘hodID
, 
¬gs
); \

1630 
_»tok
; \

1633 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, \

1634 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, ...) \

1636 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
); \

1637 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
Œue
); \

1638 
sc
.
	`checkSticM‘hod
(
şazz
, 
m‘hodID
); \

1639 
_»tdeş
; \

1640 
va_li¡
 
¬gs
; \

1641 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1642 
_»sgn
 
	`ba£Env
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
); \

1643 
	`va_’d
(
¬gs
); \

1644 
_»tok
; \

1646 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, \

1647 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1649 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
); \

1650 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
Œue
); \

1651 
sc
.
	`checkSticM‘hod
(
şazz
, 
m‘hodID
); \

1652 
_»tdeş
; \

1653 
_»sgn
 
	`ba£Env
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
); \

1654 
_»tok
; \

1656 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, \

1657 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1659 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ecm.", 
’v
, 
şazz
, 
m‘hodID
); \

1660 
sc
.
	`checkSig
(
m‘hodID
, 
_»tsig
, 
Œue
); \

1661 
sc
.
	`checkSticM‘hod
(
şazz
, 
m‘hodID
); \

1662 
_»tdeş
; \

1663 
_»sgn
 
	`ba£Env
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodA
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
); \

1664 
_»tok
; \

1665 }

	)

1667 
	#NON_VOID_RETURN
(
_»tsig
, 
_ùy³
è 
	`CHECK_JNI_EXIT
(_»tsig, (_ùy³è
»suÉ
)

	)

1668 
	#VOID_RETURN
 
	`CHECK_JNI_EXIT_VOID
()

	)

1670 
CALL
(
jobjeù
, 
Objeù
, Objeù* 
»suÉ
,„esuÉ=(Objeù*), 
NON_VOID_RETURN
("L", jobject), "L");

1671 
CALL
(
jboŞ—n
, 
BoŞ—n
, jboŞ—À
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("Z", jboolean), "Z");

1672 
CALL
(
jby‹
, 
By‹
, jby‹ 
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("B", jbyte), "B");

1673 
CALL
(
jch¬
, 
Ch¬
, jch¬ 
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("C", jchar), "C");

1674 
CALL
(
jshÜt
, 
ShÜt
, jshÜˆ
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("S", jshort), "S");

1675 
CALL
(
jšt
, 
IÁ
, jšˆ
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("I", jint), "I");

1676 
CALL
(
jlÚg
, 
LÚg
, jlÚg 
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("J", jlong), "J");

1677 
CALL
(
jæßt
, 
Flßt
, jæßˆ
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("F", jfloat), "F");

1678 
CALL
(
jdoubË
, 
DoubË
, jdoubË 
»suÉ
,„esuÉ=, 
NON_VOID_RETURN
("D", jdouble), "D");

1679 
CALL
(, 
Void
, , , 
VOID_RETURN
, "V");

1681 
j¡ršg
 
	$Check_NewSŒšg
(
JNIEnv
* 
’v
, cÚ¡ 
jch¬
* 
unicodeCh¬s
, 
jsize
 
Ën
) {

1682 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Epz", 
’v
, 
unicodeCh¬s
, 
Ën
);

1683  
	`CHECK_JNI_EXIT
("s", 
	`ba£Env
(
’v
)->
	`NewSŒšg
Ónv, 
unicodeCh¬s
, 
Ën
));

1684 
	}
}

1686 
jsize
 
	$Check_G‘SŒšgL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
) {

1687 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "Es", 
’v
, 
¡ršg
);

1688  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘SŒšgL’gth
Ónv, 
¡ršg
));

1689 
	}
}

1691 cÚ¡ 
jch¬
* 
	$Check_G‘SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, 
jboŞ—n
* 
isCİy
) {

1692 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "E¥", 
’v
, 
¡ršg
, 
isCİy
);

1693 cÚ¡ 
jch¬
* 
»suÉ
 = 
	`ba£Env
(
’v
)->
	`G‘SŒšgCh¬s
Ónv, 
¡ršg
, 
isCİy
);

1694 ià(
gDvmJni
.
fÜûCİy
 && 
»suÉ
 !ğ
NULL
) {

1695 
ScİedCheckJniTh»adS‹
 
	`ts
(
’v
);

1696 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
	`dvmTh»adS–f
(), 
¡ršg
);

1697 
by‹CouÁ
 = 
¡rObj
->
	`Ëngth
() * 2;

1698 
»suÉ
 = (cÚ¡ 
jch¬
*è
Gu¬dedCİy
::
	`ü—‹
ÔesuÉ, 
by‹CouÁ
, 
çl£
);

1699 ià(
isCİy
 !ğ
NULL
) {

1700 *
isCİy
 = 
JNI_TRUE
;

1703  
	`CHECK_JNI_EXIT
("p", 
»suÉ
);

1704 
	}
}

1706 
	$Check_R–—£SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, cÚ¡ 
jch¬
* 
ch¬s
) {

1707 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "E¥", 
’v
, 
¡ršg
, 
ch¬s
);

1708 
sc
.
	`checkNÚNuÎ
(
ch¬s
);

1709 ià(
gDvmJni
.
fÜûCİy
) {

1710 ià(!
Gu¬dedCİy
::
	`check
(
ch¬s
, 
çl£
)) {

1711 
	`ALOGE
("JNI: failed guarded copy check in ReleaseStringChars");

1712 
	`abÜtMaybe
();

1715 
ch¬s
 = (cÚ¡ 
jch¬
*è
Gu¬dedCİy
::
	`de¡roy
((jchar*)chars);

1717 
	`ba£Env
(
’v
)->
	`R–—£SŒšgCh¬s
Ónv, 
¡ršg
, 
ch¬s
);

1718 
	`CHECK_JNI_EXIT_VOID
();

1719 
	}
}

1721 
j¡ršg
 
	$Check_NewSŒšgUTF
(
JNIEnv
* 
’v
, cÚ¡ * 
by‹s
) {

1722 
	`CHECK_JNI_ENTRY
(
kFÏg_NuÎabËUtf
, "Eu", 
’v
, 
by‹s
);

1723  
	`CHECK_JNI_EXIT
("s", 
	`ba£Env
(
’v
)->
	`NewSŒšgUTF
Ónv, 
by‹s
));

1724 
	}
}

1726 
jsize
 
	$Check_G‘SŒšgUTFL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
) {

1727 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "Es", 
’v
, 
¡ršg
);

1728  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘SŒšgUTFL’gth
Ónv, 
¡ršg
));

1729 
	}
}

1731 cÚ¡ * 
	$Check_G‘SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, 
jboŞ—n
* 
isCİy
) {

1732 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "E¥", 
’v
, 
¡ršg
, 
isCİy
);

1733 cÚ¡ * 
»suÉ
 = 
	`ba£Env
(
’v
)->
	`G‘SŒšgUTFCh¬s
Ónv, 
¡ršg
, 
isCİy
);

1734 ià(
gDvmJni
.
fÜûCİy
 && 
»suÉ
 !ğ
NULL
) {

1735 
»suÉ
 = (cÚ¡ *è
Gu¬dedCİy
::
	`ü—‹
ÔesuÉ, 
	`¡¾’
ÔesuÉè+ 1, 
çl£
);

1736 ià(
isCİy
 !ğ
NULL
) {

1737 *
isCİy
 = 
JNI_TRUE
;

1740  
	`CHECK_JNI_EXIT
("u", 
»suÉ
);

1741 
	}
}

1743 
	$Check_R–—£SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, cÚ¡ * 
utf
) {

1744 
	`CHECK_JNI_ENTRY
(
kFÏg_ExûpOkay
 | 
kFÏg_R–—£
, "Esu", 
’v
, 
¡ršg
, 
utf
);

1745 ià(
gDvmJni
.
fÜûCİy
) {

1746 ià(!
Gu¬dedCİy
::
	`check
(
utf
, 
çl£
)) {

1747 
	`ALOGE
("JNI: failed guarded copy check in ReleaseStringUTFChars");

1748 
	`abÜtMaybe
();

1751 
utf
 = (cÚ¡ *è
Gu¬dedCİy
::
	`de¡roy
((*)utf);

1753 
	`ba£Env
(
’v
)->
	`R–—£SŒšgUTFCh¬s
Ónv, 
¡ršg
, 
utf
);

1754 
	`CHECK_JNI_EXIT_VOID
();

1755 
	}
}

1757 
jsize
 
	$Check_G‘A¼ayL’gth
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
) {

1758 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "Ea", 
’v
, 
¬¿y
);

1759  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘A¼ayL’gth
Ónv, 
¬¿y
));

1760 
	}
}

1762 
jobjeùA¼ay
 
	$Check_NewObjeùA¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
,

1763 
jşass
 
–em’tCÏss
, 
jobjeù
 
š™ŸlEËm’t
)

1765 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EzcL", 
’v
, 
Ëngth
, 
–em’tCÏss
, 
š™ŸlEËm’t
);

1766  
	`CHECK_JNI_EXIT
("a", 
	`ba£Env
(
’v
)->
	`NewObjeùA¼ay
Ónv, 
Ëngth
, 
–em’tCÏss
, 
š™ŸlEËm’t
));

1767 
	}
}

1769 
jobjeù
 
	$Check_G‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
¬¿y
, 
jsize
 
šdex
) {

1770 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EaI", 
’v
, 
¬¿y
, 
šdex
);

1771  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`G‘ObjeùA¼ayEËm’t
Ónv, 
¬¿y
, 
šdex
));

1772 
	}
}

1774 
	$Check_S‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
¬¿y
, 
jsize
 
šdex
, 
jobjeù
 
v®ue
)

1776 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EaIL", 
’v
, 
¬¿y
, 
šdex
, 
v®ue
);

1777 
	`ba£Env
(
’v
)->
	`S‘ObjeùA¼ayEËm’t
Ónv, 
¬¿y
, 
šdex
, 
v®ue
);

1778 
	`CHECK_JNI_EXIT_VOID
();

1779 
	}
}

1781 
	#NEW_PRIMITIVE_ARRAY
(
_¬ty³
, 
_jÇme
) \

1782 
_¬ty³
 
Check_New
##
_jÇme
##
	`A¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
) { \

1783 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ez", 
’v
, 
Ëngth
); \

1784  
	`CHECK_JNI_EXIT
("a", 
	`ba£Env
(
’v
)->
New
##
_jÇme
##
	`A¼ay
Ónv, 
Ëngth
)); \

1785 }

	)

1786 
NEW_PRIMITIVE_ARRAY
(
jboŞ—nA¼ay
, 
BoŞ—n
);

1787 
NEW_PRIMITIVE_ARRAY
(
jby‹A¼ay
, 
By‹
);

1788 
NEW_PRIMITIVE_ARRAY
(
jch¬A¼ay
, 
Ch¬
);

1789 
NEW_PRIMITIVE_ARRAY
(
jshÜtA¼ay
, 
ShÜt
);

1790 
NEW_PRIMITIVE_ARRAY
(
jštA¼ay
, 
IÁ
);

1791 
NEW_PRIMITIVE_ARRAY
(
jlÚgA¼ay
, 
LÚg
);

1792 
NEW_PRIMITIVE_ARRAY
(
jæßtA¼ay
, 
Flßt
);

1793 
NEW_PRIMITIVE_ARRAY
(
jdoubËA¼ay
, 
DoubË
);

1802 
	#kNoCİyMagic
 0xd5¯b57f

	)

1804 
	#GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

1805 
_ùy³
* 
Check_G‘
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

1806 
_ùy³
##
A¼ay
 
¬¿y
, 
jboŞ—n
* 
isCİy
) \

1808 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "E­", 
’v
, 
¬¿y
, 
isCİy
); \

1809 
u4
 
noCİy
 = 0; \

1810 ià(
gDvmJni
.
fÜûCİy
 && 
isCİy
 !ğ
NULL
) { \

1812 
noCİy
 = *(
u4
*è
isCİy
; \

1814 
_ùy³
* 
»suÉ
 = 
	`ba£Env
(
’v
)->
G‘
##
_jÇme
##
	`A¼ayEËm’ts
Ónv, 
¬¿y
, 
isCİy
); \

1815 ià(
gDvmJni
.
fÜûCİy
 && 
»suÉ
 !ğ
NULL
) { \

1816 ià(
noCİy
 =ğ
kNoCİyMagic
) { \

1817 
	`ALOGV
("FC:‚Ù cİyšg %°%x", 
¬¿y
, 
noCİy
); \

1819 
»suÉ
 = (
_ùy³
*è
	`ü—‹Gu¬dedPACİy
(
’v
, 
¬¿y
, 
isCİy
); \

1822  
	`CHECK_JNI_EXIT
("p", 
»suÉ
); \

1823 }

	)

1825 
	#RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

1826 
Check_R–—£
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

1827 
_ùy³
##
A¼ay
 
¬¿y
, _ùy³* 
–ems
, 
jšt
 
mode
) \

1829 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "E­r", 
’v
, 
¬¿y
, 
–ems
, 
mode
); \

1830 
sc
.
	`checkNÚNuÎ
(
–ems
); \

1831 ià(
gDvmJni
.
fÜûCİy
) { \

1832 ià((
ušŒ_t
)
–ems
 =ğ
kNoCİyMagic
) { \

1833 
	`ALOGV
("FC:‚Ù f»ešg %p", 
¬¿y
); \

1834 
–ems
 = 
NULL
; \

1836 
–ems
 = (
_ùy³
*è
	`»Ëa£Gu¬dedPACİy
(
’v
, 
¬¿y
,ƒËms, 
mode
); \

1839 
	`ba£Env
(
’v
)->
R–—£
##
_jÇme
##
	`A¼ayEËm’ts
Ónv, 
¬¿y
, 
–ems
, 
mode
); \

1840 
	`CHECK_JNI_EXIT_VOID
(); \

1841 }

	)

1843 
	#GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

1844 
Check_G‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

1845 
_ùy³
##
A¼ay
 
¬¿y
, 
jsize
 
¡¬t
, jsiz
Ën
, _ùy³* 
buf
) { \

1846 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EaIIp", 
’v
, 
¬¿y
, 
¡¬t
, 
Ën
, 
buf
); \

1847 
	`ba£Env
(
’v
)->
G‘
##
_jÇme
##
	`A¼ayRegiÚ
Ónv, 
¬¿y
, 
¡¬t
, 
Ën
, 
buf
); \

1848 
	`CHECK_JNI_EXIT_VOID
(); \

1849 }

	)

1851 
	#SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

1852 
Check_S‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

1853 
_ùy³
##
A¼ay
 
¬¿y
, 
jsize
 
¡¬t
, jsiz
Ën
, cÚ¡ _ùy³* 
buf
) { \

1854 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EaIIp", 
’v
, 
¬¿y
, 
¡¬t
, 
Ën
, 
buf
); \

1855 
	`ba£Env
(
’v
)->
S‘
##
_jÇme
##
	`A¼ayRegiÚ
Ónv, 
¬¿y
, 
¡¬t
, 
Ën
, 
buf
); \

1856 
	`CHECK_JNI_EXIT_VOID
(); \

1857 }

	)

1859 
	#PRIMITIVE_ARRAY_FUNCTIONS
(
_ùy³
, 
_jÇme
, 
_ty³ch¬
) \

1860 
	`GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

1861 
	`RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

1862 
	`GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
); \

1863 
	`SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
);

	)

1866 
PRIMITIVE_ARRAY_FUNCTIONS
(
jboŞ—n
, 
BoŞ—n
, 'Z');

1867 
PRIMITIVE_ARRAY_FUNCTIONS
(
jby‹
, 
By‹
, 'B');

1868 
PRIMITIVE_ARRAY_FUNCTIONS
(
jch¬
, 
Ch¬
, 'C');

1869 
PRIMITIVE_ARRAY_FUNCTIONS
(
jshÜt
, 
ShÜt
, 'S');

1870 
PRIMITIVE_ARRAY_FUNCTIONS
(
jšt
, 
IÁ
, 'I');

1871 
PRIMITIVE_ARRAY_FUNCTIONS
(
jlÚg
, 
LÚg
, 'J');

1872 
PRIMITIVE_ARRAY_FUNCTIONS
(
jæßt
, 
Flßt
, 'F');

1873 
PRIMITIVE_ARRAY_FUNCTIONS
(
jdoubË
, 
DoubË
, 'D');

1875 
jšt
 
	$Check_Regi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ 
JNIN©iveM‘hod
* 
m‘hods
,

1876 
jšt
 
nM‘hods
)

1878 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EıI", 
’v
, 
şazz
, 
m‘hods
, 
nM‘hods
);

1879  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`Regi¡”N©ives
Ónv, 
şazz
, 
m‘hods
, 
nM‘hods
));

1880 
	}
}

1882 
jšt
 
	$Check_UÄegi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
şazz
) {

1883 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ec", 
’v
, 
şazz
);

1884  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`UÄegi¡”N©ives
Ónv, 
şazz
));

1885 
	}
}

1887 
jšt
 
	$Check_MÚ™ÜEÁ”
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1888 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1889  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`MÚ™ÜEÁ”
Ónv, 
obj
));

1890 
	}
}

1892 
jšt
 
	$Check_MÚ™ÜEx™
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1893 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EL", 
’v
, 
obj
);

1894  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`MÚ™ÜEx™
Ónv, 
obj
));

1895 
	}
}

1897 
jšt
 
	$Check_G‘JavaVM
(
JNIEnv
 *
’v
, 
JavaVM
 **
vm
) {

1898 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "Ep", 
’v
, 
vm
);

1899  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘JavaVM
Ónv, 
vm
));

1900 
	}
}

1902 
	$Check_G‘SŒšgRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡r
, 
jsize
 
¡¬t
, jsiz
Ën
, 
jch¬
* 
buf
) {

1903 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "EsIIp", 
’v
, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

1904 
	`ba£Env
(
’v
)->
	`G‘SŒšgRegiÚ
Ónv, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

1905 
	`CHECK_JNI_EXIT_VOID
();

1906 
	}
}

1908 
	$Check_G‘SŒšgUTFRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡r
, 
jsize
 
¡¬t
, jsiz
Ën
, * 
buf
) {

1909 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
, "EsIIp", 
’v
, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

1910 
	`ba£Env
(
’v
)->
	`G‘SŒšgUTFRegiÚ
Ónv, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

1911 
	`CHECK_JNI_EXIT_VOID
();

1912 
	}
}

1914 * 
	$Check_G‘Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
, 
jboŞ—n
* 
isCİy
) {

1915 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™G‘
, "E­", 
’v
, 
¬¿y
, 
isCİy
);

1916 * 
»suÉ
 = 
	`ba£Env
(
’v
)->
	`G‘Prim™iveA¼ayCr™iÿl
Ónv, 
¬¿y
, 
isCİy
);

1917 ià(
gDvmJni
.
fÜûCİy
 && 
»suÉ
 !ğ
NULL
) {

1918 
»suÉ
 = 
	`ü—‹Gu¬dedPACİy
(
’v
, 
¬¿y
, 
isCİy
);

1920  
	`CHECK_JNI_EXIT
("p", 
»suÉ
);

1921 
	}
}

1923 
	$Check_R–—£Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
, * 
ÿ¼ay
, 
jšt
 
mode
)

1925 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™R–—£
 | 
kFÏg_ExûpOkay
, "E­r", 
’v
, 
¬¿y
, 
ÿ¼ay
, 
mode
);

1926 
sc
.
	`checkNÚNuÎ
(
ÿ¼ay
);

1927 ià(
gDvmJni
.
fÜûCİy
) {

1928 
ÿ¼ay
 = 
	`»Ëa£Gu¬dedPACİy
(
’v
, 
¬¿y
, c¬¿y, 
mode
);

1930 
	`ba£Env
(
’v
)->
	`R–—£Prim™iveA¼ayCr™iÿl
Ónv, 
¬¿y
, 
ÿ¼ay
, 
mode
);

1931 
	`CHECK_JNI_EXIT_VOID
();

1932 
	}
}

1934 cÚ¡ 
jch¬
* 
	$Check_G‘SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, 
jboŞ—n
* 
isCİy
) {

1935 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™G‘
, "E¥", 
’v
, 
¡ršg
, 
isCİy
);

1936 cÚ¡ 
jch¬
* 
»suÉ
 = 
	`ba£Env
(
’v
)->
	`G‘SŒšgCr™iÿl
Ónv, 
¡ršg
, 
isCİy
);

1937 ià(
gDvmJni
.
fÜûCİy
 && 
»suÉ
 !ğ
NULL
) {

1938 
ScİedCheckJniTh»adS‹
 
	`ts
(
’v
);

1939 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
	`dvmTh»adS–f
(), 
¡ršg
);

1940 
by‹CouÁ
 = 
¡rObj
->
	`Ëngth
() * 2;

1941 
»suÉ
 = (cÚ¡ 
jch¬
*è
Gu¬dedCİy
::
	`ü—‹
ÔesuÉ, 
by‹CouÁ
, 
çl£
);

1942 ià(
isCİy
 !ğ
NULL
) {

1943 *
isCİy
 = 
JNI_TRUE
;

1946  
	`CHECK_JNI_EXIT
("p", 
»suÉ
);

1947 
	}
}

1949 
	$Check_R–—£SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
, cÚ¡ 
jch¬
* 
ÿ¼ay
) {

1950 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™R–—£
 | 
kFÏg_ExûpOkay
, "E¥", 
’v
, 
¡ršg
, 
ÿ¼ay
);

1951 
sc
.
	`checkNÚNuÎ
(
ÿ¼ay
);

1952 ià(
gDvmJni
.
fÜûCİy
) {

1953 ià(!
Gu¬dedCİy
::
	`check
(
ÿ¼ay
, 
çl£
)) {

1954 
	`ALOGE
("JNI: failed guarded copy check in ReleaseStringCritical");

1955 
	`abÜtMaybe
();

1958 
ÿ¼ay
 = (cÚ¡ 
jch¬
*è
Gu¬dedCİy
::
	`de¡roy
((jchar*)carray);

1960 
	`ba£Env
(
’v
)->
	`R–—£SŒšgCr™iÿl
Ónv, 
¡ršg
, 
ÿ¼ay
);

1961 
	`CHECK_JNI_EXIT_VOID
();

1962 
	}
}

1964 
jw—k
 
	$Check_NewW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1965 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1966  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewW—kGlob®Ref
Ónv, 
obj
));

1967 
	}
}

1969 
	$Check_D–‘eW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jw—k
 
obj
) {

1970 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
, "EL", 
’v
, 
obj
);

1971 
	`ba£Env
(
’v
)->
	`D–‘eW—kGlob®Ref
Ónv, 
obj
);

1972 
	`CHECK_JNI_EXIT_VOID
();

1973 
	}
}

1975 
jboŞ—n
 
	$Check_Exû±iÚCheck
(
JNIEnv
* 
’v
) {

1976 
	`CHECK_JNI_ENTRY
(
kFÏg_Cr™Okay
 | 
kFÏg_ExûpOkay
, "E", 
’v
);

1977  
	`CHECK_JNI_EXIT
("b", 
	`ba£Env
(
’v
)->
	`Exû±iÚCheck
(env));

1978 
	}
}

1980 
jobjeùRefTy³
 
	$Check_G‘ObjeùRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
) {

1981 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
obj
);

1983  
	`CHECK_JNI_EXIT
("I", 
	`ba£Env
(
’v
)->
	`G‘ObjeùRefTy³
Ónv, 
obj
));

1984 
	}
}

1986 
jobjeù
 
	$Check_NewDœeùBy‹Bufãr
(
JNIEnv
* 
’v
, * 
add»ss
, 
jlÚg
 
ÿ·c™y
) {

1987 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EpJ", 
’v
, 
add»ss
, 
ÿ·c™y
);

1988 ià(
add»ss
 =ğ
NULL
 || 
ÿ·c™y
 < 0) {

1989 
	`ALOGW
("JNI WARNING: invalid values for‡ddress (%p) or capacity (%ld)",

1990 
add»ss
, (è
ÿ·c™y
);

1991 
	`abÜtMaybe
();

1992  
NULL
;

1994  
	`CHECK_JNI_EXIT
("L", 
	`ba£Env
(
’v
)->
	`NewDœeùBy‹Bufãr
Ónv, 
add»ss
, 
ÿ·c™y
));

1995 
	}
}

1997 * 
	$Check_G‘DœeùBufãrAdd»ss
(
JNIEnv
* 
’v
, 
jobjeù
 
buf
) {

1998 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
buf
);

2000  
	`CHECK_JNI_EXIT
("p", 
	`ba£Env
(
’v
)->
	`G‘DœeùBufãrAdd»ss
Ónv, 
buf
));

2001 
	}
}

2003 
jlÚg
 
	$Check_G‘DœeùBufãrC­ac™y
(
JNIEnv
* 
’v
, 
jobjeù
 
buf
) {

2004 
	`CHECK_JNI_ENTRY
(
kFÏg_DeçuÉ
, "EL", 
’v
, 
buf
);

2006  
	`CHECK_JNI_EXIT
("J", 
	`ba£Env
(
’v
)->
	`G‘DœeùBufãrC­ac™y
Ónv, 
buf
));

2007 
	}
}

2016 
jšt
 
	$Check_De¡royJavaVM
(
JavaVM
* 
vm
) {

2017 
ScİedCheck
 
	`sc
(
çl£
, 
__FUNCTION__
);

2018 
sc
.
	`check
(
Œue
, "v", 
vm
);

2019  
	`CHECK_JNI_EXIT
("I", 
	`ba£Vm
(
vm
)->
	`De¡royJavaVM
(vm));

2020 
	}
}

2022 
jšt
 
	$Check_A‰achCu¼’tTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
) {

2023 
ScİedCheck
 
	`sc
(
çl£
, 
__FUNCTION__
);

2024 
sc
.
	`check
(
Œue
, "vµ", 
vm
, 
p_’v
, 
thr_¬gs
);

2025  
	`CHECK_JNI_EXIT
("I", 
	`ba£Vm
(
vm
)->
	`A‰achCu¼’tTh»ad
(vm, 
p_’v
, 
thr_¬gs
));

2026 
	}
}

2028 
jšt
 
	$Check_A‰achCu¼’tTh»adAsD«mÚ
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
) {

2029 
ScİedCheck
 
	`sc
(
çl£
, 
__FUNCTION__
);

2030 
sc
.
	`check
(
Œue
, "vµ", 
vm
, 
p_’v
, 
thr_¬gs
);

2031  
	`CHECK_JNI_EXIT
("I", 
	`ba£Vm
(
vm
)->
	`A‰achCu¼’tTh»adAsD«mÚ
(vm, 
p_’v
, 
thr_¬gs
));

2032 
	}
}

2034 
jšt
 
	$Check_D‘achCu¼’tTh»ad
(
JavaVM
* 
vm
) {

2035 
ScİedCheck
 
	`sc
(
Œue
, 
__FUNCTION__
);

2036 
sc
.
	`check
(
Œue
, "v", 
vm
);

2037  
	`CHECK_JNI_EXIT
("I", 
	`ba£Vm
(
vm
)->
	`D‘achCu¼’tTh»ad
(vm));

2038 
	}
}

2040 
jšt
 
	$Check_G‘Env
(
JavaVM
* 
vm
, ** 
’v
, 
jšt
 
v”siÚ
) {

2041 
ScİedCheck
 
	`sc
(
Œue
, 
__FUNCTION__
);

2042 
sc
.
	`check
(
Œue
, "v", 
vm
);

2043  
	`CHECK_JNI_EXIT
("I", 
	`ba£Vm
(
vm
)->
	`G‘Env
(vm, 
’v
, 
v”siÚ
));

2044 
	}
}

2053 cÚ¡ 
JNIN©iveIÁ”çû
 
	ggCheckN©iveIÁ”çû
 = {

2054 
NULL
,

2055 
NULL
,

2056 
NULL
,

2057 
NULL
,

2059 
Check_G‘V”siÚ
,

2061 
Check_DefšeCÏss
,

2062 
Check_FšdCÏss
,

2064 
Check_FromReæeùedM‘hod
,

2065 
Check_FromReæeùedF›ld
,

2066 
Check_ToReæeùedM‘hod
,

2068 
Check_G‘Su³rşass
,

2069 
Check_IsAssigÇbËFrom
,

2071 
Check_ToReæeùedF›ld
,

2073 
Check_Throw
,

2074 
Check_ThrowNew
,

2075 
Check_Exû±iÚOccu¼ed
,

2076 
Check_Exû±iÚDesüibe
,

2077 
Check_Exû±iÚCË¬
,

2078 
Check_F©®E¼Ü
,

2080 
Check_PushLoÿlF¿me
,

2081 
Check_PİLoÿlF¿me
,

2083 
Check_NewGlob®Ref
,

2084 
Check_D–‘eGlob®Ref
,

2085 
Check_D–‘eLoÿlRef
,

2086 
Check_IsSameObjeù
,

2087 
Check_NewLoÿlRef
,

2088 
Check_Ensu»LoÿlC­ac™y
,

2090 
Check_AÎocObjeù
,

2091 
Check_NewObjeù
,

2092 
Check_NewObjeùV
,

2093 
Check_NewObjeùA
,

2095 
Check_G‘ObjeùCÏss
,

2096 
Check_IsIn¡ªûOf
,

2098 
Check_G‘M‘hodID
,

2100 
Check_C®lObjeùM‘hod
,

2101 
Check_C®lObjeùM‘hodV
,

2102 
Check_C®lObjeùM‘hodA
,

2103 
Check_C®lBoŞ—nM‘hod
,

2104 
Check_C®lBoŞ—nM‘hodV
,

2105 
Check_C®lBoŞ—nM‘hodA
,

2106 
Check_C®lBy‹M‘hod
,

2107 
Check_C®lBy‹M‘hodV
,

2108 
Check_C®lBy‹M‘hodA
,

2109 
Check_C®lCh¬M‘hod
,

2110 
Check_C®lCh¬M‘hodV
,

2111 
Check_C®lCh¬M‘hodA
,

2112 
Check_C®lShÜtM‘hod
,

2113 
Check_C®lShÜtM‘hodV
,

2114 
Check_C®lShÜtM‘hodA
,

2115 
Check_C®lIÁM‘hod
,

2116 
Check_C®lIÁM‘hodV
,

2117 
Check_C®lIÁM‘hodA
,

2118 
Check_C®lLÚgM‘hod
,

2119 
Check_C®lLÚgM‘hodV
,

2120 
Check_C®lLÚgM‘hodA
,

2121 
Check_C®lFlßtM‘hod
,

2122 
Check_C®lFlßtM‘hodV
,

2123 
Check_C®lFlßtM‘hodA
,

2124 
Check_C®lDoubËM‘hod
,

2125 
Check_C®lDoubËM‘hodV
,

2126 
Check_C®lDoubËM‘hodA
,

2127 
Check_C®lVoidM‘hod
,

2128 
Check_C®lVoidM‘hodV
,

2129 
Check_C®lVoidM‘hodA
,

2131 
Check_C®lNÚvœtu®ObjeùM‘hod
,

2132 
Check_C®lNÚvœtu®ObjeùM‘hodV
,

2133 
Check_C®lNÚvœtu®ObjeùM‘hodA
,

2134 
Check_C®lNÚvœtu®BoŞ—nM‘hod
,

2135 
Check_C®lNÚvœtu®BoŞ—nM‘hodV
,

2136 
Check_C®lNÚvœtu®BoŞ—nM‘hodA
,

2137 
Check_C®lNÚvœtu®By‹M‘hod
,

2138 
Check_C®lNÚvœtu®By‹M‘hodV
,

2139 
Check_C®lNÚvœtu®By‹M‘hodA
,

2140 
Check_C®lNÚvœtu®Ch¬M‘hod
,

2141 
Check_C®lNÚvœtu®Ch¬M‘hodV
,

2142 
Check_C®lNÚvœtu®Ch¬M‘hodA
,

2143 
Check_C®lNÚvœtu®ShÜtM‘hod
,

2144 
Check_C®lNÚvœtu®ShÜtM‘hodV
,

2145 
Check_C®lNÚvœtu®ShÜtM‘hodA
,

2146 
Check_C®lNÚvœtu®IÁM‘hod
,

2147 
Check_C®lNÚvœtu®IÁM‘hodV
,

2148 
Check_C®lNÚvœtu®IÁM‘hodA
,

2149 
Check_C®lNÚvœtu®LÚgM‘hod
,

2150 
Check_C®lNÚvœtu®LÚgM‘hodV
,

2151 
Check_C®lNÚvœtu®LÚgM‘hodA
,

2152 
Check_C®lNÚvœtu®FlßtM‘hod
,

2153 
Check_C®lNÚvœtu®FlßtM‘hodV
,

2154 
Check_C®lNÚvœtu®FlßtM‘hodA
,

2155 
Check_C®lNÚvœtu®DoubËM‘hod
,

2156 
Check_C®lNÚvœtu®DoubËM‘hodV
,

2157 
Check_C®lNÚvœtu®DoubËM‘hodA
,

2158 
Check_C®lNÚvœtu®VoidM‘hod
,

2159 
Check_C®lNÚvœtu®VoidM‘hodV
,

2160 
Check_C®lNÚvœtu®VoidM‘hodA
,

2162 
Check_G‘F›ldID
,

2164 
Check_G‘ObjeùF›ld
,

2165 
Check_G‘BoŞ—nF›ld
,

2166 
Check_G‘By‹F›ld
,

2167 
Check_G‘Ch¬F›ld
,

2168 
Check_G‘ShÜtF›ld
,

2169 
Check_G‘IÁF›ld
,

2170 
Check_G‘LÚgF›ld
,

2171 
Check_G‘FlßtF›ld
,

2172 
Check_G‘DoubËF›ld
,

2173 
Check_S‘ObjeùF›ld
,

2174 
Check_S‘BoŞ—nF›ld
,

2175 
Check_S‘By‹F›ld
,

2176 
Check_S‘Ch¬F›ld
,

2177 
Check_S‘ShÜtF›ld
,

2178 
Check_S‘IÁF›ld
,

2179 
Check_S‘LÚgF›ld
,

2180 
Check_S‘FlßtF›ld
,

2181 
Check_S‘DoubËF›ld
,

2183 
Check_G‘SticM‘hodID
,

2185 
Check_C®lSticObjeùM‘hod
,

2186 
Check_C®lSticObjeùM‘hodV
,

2187 
Check_C®lSticObjeùM‘hodA
,

2188 
Check_C®lSticBoŞ—nM‘hod
,

2189 
Check_C®lSticBoŞ—nM‘hodV
,

2190 
Check_C®lSticBoŞ—nM‘hodA
,

2191 
Check_C®lSticBy‹M‘hod
,

2192 
Check_C®lSticBy‹M‘hodV
,

2193 
Check_C®lSticBy‹M‘hodA
,

2194 
Check_C®lSticCh¬M‘hod
,

2195 
Check_C®lSticCh¬M‘hodV
,

2196 
Check_C®lSticCh¬M‘hodA
,

2197 
Check_C®lSticShÜtM‘hod
,

2198 
Check_C®lSticShÜtM‘hodV
,

2199 
Check_C®lSticShÜtM‘hodA
,

2200 
Check_C®lSticIÁM‘hod
,

2201 
Check_C®lSticIÁM‘hodV
,

2202 
Check_C®lSticIÁM‘hodA
,

2203 
Check_C®lSticLÚgM‘hod
,

2204 
Check_C®lSticLÚgM‘hodV
,

2205 
Check_C®lSticLÚgM‘hodA
,

2206 
Check_C®lSticFlßtM‘hod
,

2207 
Check_C®lSticFlßtM‘hodV
,

2208 
Check_C®lSticFlßtM‘hodA
,

2209 
Check_C®lSticDoubËM‘hod
,

2210 
Check_C®lSticDoubËM‘hodV
,

2211 
Check_C®lSticDoubËM‘hodA
,

2212 
Check_C®lSticVoidM‘hod
,

2213 
Check_C®lSticVoidM‘hodV
,

2214 
Check_C®lSticVoidM‘hodA
,

2216 
Check_G‘SticF›ldID
,

2218 
Check_G‘SticObjeùF›ld
,

2219 
Check_G‘SticBoŞ—nF›ld
,

2220 
Check_G‘SticBy‹F›ld
,

2221 
Check_G‘SticCh¬F›ld
,

2222 
Check_G‘SticShÜtF›ld
,

2223 
Check_G‘SticIÁF›ld
,

2224 
Check_G‘SticLÚgF›ld
,

2225 
Check_G‘SticFlßtF›ld
,

2226 
Check_G‘SticDoubËF›ld
,

2228 
Check_S‘SticObjeùF›ld
,

2229 
Check_S‘SticBoŞ—nF›ld
,

2230 
Check_S‘SticBy‹F›ld
,

2231 
Check_S‘SticCh¬F›ld
,

2232 
Check_S‘SticShÜtF›ld
,

2233 
Check_S‘SticIÁF›ld
,

2234 
Check_S‘SticLÚgF›ld
,

2235 
Check_S‘SticFlßtF›ld
,

2236 
Check_S‘SticDoubËF›ld
,

2238 
Check_NewSŒšg
,

2240 
Check_G‘SŒšgL’gth
,

2241 
Check_G‘SŒšgCh¬s
,

2242 
Check_R–—£SŒšgCh¬s
,

2244 
Check_NewSŒšgUTF
,

2245 
Check_G‘SŒšgUTFL’gth
,

2246 
Check_G‘SŒšgUTFCh¬s
,

2247 
Check_R–—£SŒšgUTFCh¬s
,

2249 
Check_G‘A¼ayL’gth
,

2250 
Check_NewObjeùA¼ay
,

2251 
Check_G‘ObjeùA¼ayEËm’t
,

2252 
Check_S‘ObjeùA¼ayEËm’t
,

2254 
Check_NewBoŞ—nA¼ay
,

2255 
Check_NewBy‹A¼ay
,

2256 
Check_NewCh¬A¼ay
,

2257 
Check_NewShÜtA¼ay
,

2258 
Check_NewIÁA¼ay
,

2259 
Check_NewLÚgA¼ay
,

2260 
Check_NewFlßtA¼ay
,

2261 
Check_NewDoubËA¼ay
,

2263 
Check_G‘BoŞ—nA¼ayEËm’ts
,

2264 
Check_G‘By‹A¼ayEËm’ts
,

2265 
Check_G‘Ch¬A¼ayEËm’ts
,

2266 
Check_G‘ShÜtA¼ayEËm’ts
,

2267 
Check_G‘IÁA¼ayEËm’ts
,

2268 
Check_G‘LÚgA¼ayEËm’ts
,

2269 
Check_G‘FlßtA¼ayEËm’ts
,

2270 
Check_G‘DoubËA¼ayEËm’ts
,

2272 
Check_R–—£BoŞ—nA¼ayEËm’ts
,

2273 
Check_R–—£By‹A¼ayEËm’ts
,

2274 
Check_R–—£Ch¬A¼ayEËm’ts
,

2275 
Check_R–—£ShÜtA¼ayEËm’ts
,

2276 
Check_R–—£IÁA¼ayEËm’ts
,

2277 
Check_R–—£LÚgA¼ayEËm’ts
,

2278 
Check_R–—£FlßtA¼ayEËm’ts
,

2279 
Check_R–—£DoubËA¼ayEËm’ts
,

2281 
Check_G‘BoŞ—nA¼ayRegiÚ
,

2282 
Check_G‘By‹A¼ayRegiÚ
,

2283 
Check_G‘Ch¬A¼ayRegiÚ
,

2284 
Check_G‘ShÜtA¼ayRegiÚ
,

2285 
Check_G‘IÁA¼ayRegiÚ
,

2286 
Check_G‘LÚgA¼ayRegiÚ
,

2287 
Check_G‘FlßtA¼ayRegiÚ
,

2288 
Check_G‘DoubËA¼ayRegiÚ
,

2289 
Check_S‘BoŞ—nA¼ayRegiÚ
,

2290 
Check_S‘By‹A¼ayRegiÚ
,

2291 
Check_S‘Ch¬A¼ayRegiÚ
,

2292 
Check_S‘ShÜtA¼ayRegiÚ
,

2293 
Check_S‘IÁA¼ayRegiÚ
,

2294 
Check_S‘LÚgA¼ayRegiÚ
,

2295 
Check_S‘FlßtA¼ayRegiÚ
,

2296 
Check_S‘DoubËA¼ayRegiÚ
,

2298 
Check_Regi¡”N©ives
,

2299 
Check_UÄegi¡”N©ives
,

2301 
Check_MÚ™ÜEÁ”
,

2302 
Check_MÚ™ÜEx™
,

2304 
Check_G‘JavaVM
,

2306 
Check_G‘SŒšgRegiÚ
,

2307 
Check_G‘SŒšgUTFRegiÚ
,

2309 
Check_G‘Prim™iveA¼ayCr™iÿl
,

2310 
Check_R–—£Prim™iveA¼ayCr™iÿl
,

2312 
Check_G‘SŒšgCr™iÿl
,

2313 
Check_R–—£SŒšgCr™iÿl
,

2315 
Check_NewW—kGlob®Ref
,

2316 
Check_D–‘eW—kGlob®Ref
,

2318 
Check_Exû±iÚCheck
,

2320 
Check_NewDœeùBy‹Bufãr
,

2321 
Check_G‘DœeùBufãrAdd»ss
,

2322 
Check_G‘DœeùBufãrC­ac™y
,

2324 
Check_G‘ObjeùRefTy³


2327 cÚ¡ 
JNIInvokeIÁ”çû
 
	ggCheckInvokeIÁ”çû
 = {

2328 
NULL
,

2329 
NULL
,

2330 
NULL
,

2332 
Check_De¡royJavaVM
,

2333 
Check_A‰achCu¼’tTh»ad
,

2334 
Check_D‘achCu¼’tTh»ad
,

2336 
Check_G‘Env
,

2338 
Check_A‰achCu¼’tTh»adAsD«mÚ
,

2344 
	$dvmU£CheckedJniEnv
(
JNIEnvExt
* 
pEnv
) {

2345 
	`as£¹
(
pEnv
->
funcTabË
 !ğ&
gCheckN©iveIÁ”çû
);

2346 
pEnv
->
ba£FuncTabË
 =…Env->
funcTabË
;

2347 
pEnv
->
funcTabË
 = &
gCheckN©iveIÁ”çû
;

2348 
	}
}

2353 
	$dvmU£CheckedJniVm
(
JavaVMExt
* 
pVm
) {

2354 
	`as£¹
(
pVm
->
funcTabË
 !ğ&
gCheckInvokeIÁ”çû
);

2355 
pVm
->
ba£FuncTabË
 =…Vm->
funcTabË
;

2356 
pVm
->
funcTabË
 = &
gCheckInvokeIÁ”çû
;

2357 
	}
}

	@vm/Common.h

20 #iâdeà
DALVIK_COMMON_H_


21 
	#DALVIK_COMMON_H_


	)

23 #iâdeà
LOG_TAG


24 
	#LOG_TAG
 "d®vikvm"

	)

27 
	~<¡dboŞ.h
>

28 
	~<¡dšt.h
>

29 
	~<¡dio.h
>

30 
	~<as£¹.h
>

31 
	~"cuts/log.h
"

33 #ià
defšed
(
HAVE_ENDIAN_H
)

34 
	~<’dŸn.h
>

36 
	#__BIG_ENDIAN
 4321

	)

37 
	#__LITTLE_ENDIAN
 1234

	)

38 #ià
defšed
(
HAVE_LITTLE_ENDIAN
)

39 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

41 
	#__BYTE_ORDER
 
__BIG_ENDIAN


	)

45 #ià!
defšed
(
NDEBUG
è&& defšed(
WITH_DALVIK_ASSERT
)

46 #undeà
as£¹


47 
	#as£¹
(
x
) \

48 ((
x
è? (()0è: (
	`ALOGE
("ASSERT FAILED (%s:%d): %s", \

49 
__FILE__
, 
__LINE__
, #x), *(*)39=39, ()0è)

	)

52 
	#MIN
(
x
,
y
è(((xè< (y)è? (xè: (y))

	)

53 
	#MAX
(
x
,
y
è(((xè> (y)è? (xè: (y))

	)

55 
	#LIKELY
(
exp
è(
	`__butš_ex³ù
(Óxpè!ğ0, 
Œue
))

	)

56 
	#UNLIKELY
(
exp
è(
	`__butš_ex³ù
(Óxpè!ğ0, 
çl£
))

	)

58 
	#ALIGN_UP
(
x
, 
n
è(((
size_t
)(xè+ (nè- 1è& ~(Òè- 1))

	)

59 
	#ALIGN_DOWN
(
x
, 
n
è((
size_t
)(xè& -Ò))

	)

60 
	#ALIGN_UP_TO_PAGE_SIZE
(
p
è
	`ALIGN_UP
Õ, 
SYSTEM_PAGE_SIZE
)

	)

61 
	#ALIGN_DOWN_TO_PAGE_SIZE
(
p
è
	`ALIGN_DOWN
Õ, 
SYSTEM_PAGE_SIZE
)

	)

63 
	#CLZ
(
x
è
	`__butš_şz
(x)

	)

73 #ià
defšed
(
VERY_VERBOSE_LOG
)

74 
	#LOGVV
 
ALOGV


	)

75 
	#IF_LOGVV
(è
	`IF_ALOGV
()

	)

77 
	#LOGVV
(...è(()0)

	)

78 
	#IF_LOGVV
(èià(
çl£
)

	)

85 
ušt8_t
 
	tu1
;

86 
ušt16_t
 
	tu2
;

87 
ušt32_t
 
	tu4
;

88 
ušt64_t
 
	tu8
;

89 
št8_t
 
	ts1
;

90 
št16_t
 
	ts2
;

91 
št32_t
 
	ts4
;

92 
št64_t
 
	ts8
;

102 
	gObjeù
;

104 
	uJV®ue
 {

105 
u1
 
	mz
;

106 
s1
 
	mb
;

107 
u2
 
	mc
;

108 
s2
 
	ms
;

109 
s4
 
	mi
;

110 
s8
 
	mj
;

111 
	mf
;

112 
	md
;

113 
Objeù
* 
	ml
;

116 
	#OFFSETOF_MEMBER
(
t
, 
f
) \

117 (
»š‹½»t_ÿ¡
<*>( \

118 &
»š‹½»t_ÿ¡
<
t
*>(16)->
f
) - \

119 
»š‹½»t_ÿ¡
<*>(16))

	)

121 
	#NELEM
(
x
è((è((xè/ ((x)[0])))

	)

	@vm/Dalvik.h

20 #iâdeà
DALVIK_DALVIK_H_


21 
	#DALVIK_DALVIK_H_


	)

23 
	~"CommÚ.h
"

24 
	~"IÆšes.h
"

25 
	~"Misc.h
"

26 
	~"B™s.h
"

27 
	~"B™VeùÜ.h
"

28 
	~"libdex/SysUt.h
"

29 
	~"libdex/DexDebugInfo.h
"

30 
	~"libdex/DexFe.h
"

31 
	~"libdex/DexPrÙo.h
"

32 
	~"libdex/DexUtf.h
"

33 
	~"libdex/ZArchive.h
"

34 
	~"DvmDex.h
"

35 
	~"RawDexFe.h
"

36 
	~"Sync.h
"

37 
	~"oo/Objeù.h
"

38 
	~"N©ive.h
"

39 
	~"Çtive/IÁ”ÇlN©ive.h
"

41 
	~"D®vikV”siÚ.h
"

42 
	~"Debugg”.h
"

43 
	~"Profe.h
"

44 
	~"UtfSŒšg.h
"

45 
	~"IÁ”n.h
"

46 
	~"Reã»nûTabË.h
"

47 
	~"IndœeùRefTabË.h
"

48 
	~"AtomicCache.h
"

49 
	~"Th»ad.h
"

50 
	~"Ddm.h
"

51 
	~"Hash.h
"

52 
	~"š‹½/Sck.h
"

53 
	~"oo/CÏss.h
"

54 
	~"oo/ResŞve.h
"

55 
	~"oo/A¼ay.h
"

56 
	~"Exû±iÚ.h
"

57 
	~"®loc/AÎoc.h
"

58 
	~"®loc/C¬dTabË.h
"

59 
	~"®loc/H—pDebug.h
"

60 
	~"®loc/Wr™eB¬r›r.h
"

61 
	~"oo/AcûssCheck.h
"

62 
	~"J¬Fe.h
"

63 
	~"jdwp/Jdwp.h
"

64 
	~"SigÇlC©ch”.h
"

65 
	~"StdioCÚv”‹r.h
"

66 
	~"JniIÁ”Çl.h
"

67 
	~"Lš—rAÎoc.h
"

68 
	~"ª®ysis/DexV”ify.h
"

69 
	~"ª®ysis/DexP»·».h
"

70 
	~"ª®ysis/Regi¡”M­.h
"

71 
	~"In™.h
"

72 
	~"libdex/DexOpcodes.h
"

73 
	~"libdex/In¡rUts.h
"

74 
	~"AÎocT¿ck”.h
"

75 
	~"Poš‹rS‘.h
"

76 #ià
defšed
(
WITH_JIT
)

77 
	~"comp”/Comp”.h
"

79 
	~"Glob®s.h
"

80 
	~"»æeù/Reæeù.h
"

81 
	~"oo/Ty³Check.h
"

82 
	~"Atomic.h
"

83 
	~"š‹½/IÁ”p.h
"

84 
	~"IÆšeN©ive.h
"

85 
	~"oo/ObjeùIÆšes.h
"

	@vm/DalvikVersion.h

20 #iâdeà
DALVIK_VERSION_H_


21 
	#DALVIK_VERSION_H_


	)

26 
	#DALVIK_MAJOR_VERSION
 1

	)

27 
	#DALVIK_MINOR_VERSION
 6

	)

28 
	#DALVIK_BUG_VERSION
 0

	)

35 
	#DALVIK_VM_BUILD
 27

	)

	@vm/Ddm.cpp

23 
	~"D®vik.h
"

25 
	~<fú.h
>

26 
	~<”ºo.h
>

39 
boŞ
 
	$dvmDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

40 * 
pR•lyL’
)

42 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

43 cÚ¡ 
kChunkHdrL’
 = 8;

44 
A¼ayObjeù
* 
d©aA¼ay
 = 
NULL
;

45 
Objeù
* 
chunk
 = 
NULL
;

46 
boŞ
 
»suÉ
 = 
çl£
;

48 
	`as£¹
(
d©aL’
 >= 0);

50 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcChunk
)) {

51 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcChunk
)) {

52 
	`dvmLogExû±iÚSckT¿û
();

53 
	`dvmCË¬Exû±iÚ
(
£lf
);

54 
ba
;

62 
d©aA¼ay
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
d©aL’
, 
ALLOC_DEFAULT
);

63 ià(
d©aA¼ay
 =ğ
NULL
) {

64 
	`ALOGW
("¬¿y‡Îoøçed (%d)", 
d©aL’
);

65 
	`dvmCË¬Exû±iÚ
(
£lf
);

66 
ba
;

68 
	`memıy
(
d©aA¼ay
->
cÚ‹Ás
, 
buf
, 
d©aL’
);

73 
off£t
, 
Ëngth
, 
ty³
;

74 
ty³
 = 
	`g‘4BE
((
u1
*)
d©aA¼ay
->
cÚ‹Ás
 + 0);

75 
Ëngth
 = 
	`g‘4BE
((
u1
*)
d©aA¼ay
->
cÚ‹Ás
 + 4);

76 
off£t
 = 
kChunkHdrL’
;

77 ià(
off£t
+
Ëngth
 > (è
d©aL’
) {

78 
	`ALOGW
("WARNING: bad chunk found (Ën=%u…ktL’=%d)", 
Ëngth
, 
d©aL’
);

79 
ba
;

85 
JV®ue
 
ÿÎRes
;

86 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hD®vikDdmcS”v”_di¥©ch
, 
NULL
, &
ÿÎRes
,

87 
ty³
, 
d©aA¼ay
, 
off£t
, 
Ëngth
);

88 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

89 
	`ALOGI
("Exû±iÚhrowÀby di¥©ch” fÜ 0x%08x", 
ty³
);

90 
	`dvmLogExû±iÚSckT¿û
();

91 
	`dvmCË¬Exû±iÚ
(
£lf
);

92 
ba
;

95 
A¼ayObjeù
* 
»¶yD©a
;

96 
chunk
 = (
Objeù
*è
ÿÎRes
.
l
;

97 ià(
chunk
 =ğ
NULL
)

98 
ba
;

101 
	`dvmAddT¿ckedAÎoc
(
chunk
, 
£lf
);

115 
ty³
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
gDvm
.
offD®vikDdmcChunk_ty³
);

116 
»¶yD©a
 =

117 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
chunk
, 
gDvm
.
offD®vikDdmcChunk_d©a
);

118 
off£t
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
gDvm
.
offD®vikDdmcChunk_off£t
);

119 
Ëngth
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
gDvm
.
offD®vikDdmcChunk_Ëngth
);

121 
	`ALOGV
("DDM„eply:ype=0x%08x data=%p offset=%d†ength=%d",

122 
ty³
, 
»¶yD©a
, 
off£t
, 
Ëngth
);

124 ià(
Ëngth
 =ğ0 || 
»¶yD©a
 =ğ
NULL
)

125 
ba
;

126 ià(
off£t
 + 
Ëngth
 > 
»¶yD©a
->length) {

127 
	`ALOGW
("WARNING: chunk off=%d†en=%dƒxceeds„eply‡rray†en %d",

128 
off£t
, 
Ëngth
, 
»¶yD©a
->length);

129 
ba
;

132 
u1
* 
»¶y
;

133 
»¶y
 = (
u1
*è
	`m®loc
(
Ëngth
 + 
kChunkHdrL’
);

134 ià(
»¶y
 =ğ
NULL
) {

135 
	`ALOGW
("m®loø%d faed", 
Ëngth
+
kChunkHdrL’
);

136 
ba
;

138 
	`£t4BE
(
»¶y
 + 0, 
ty³
);

139 
	`£t4BE
(
»¶y
 + 4, 
Ëngth
);

140 
	`memıy
(
»¶y
+
kChunkHdrL’
, (cÚ¡ 
u1
*)
»¶yD©a
->
cÚ‹Ás
 + 
off£t
, 
Ëngth
);

142 *
pR•lyBuf
 = 
»¶y
;

143 *
pR•lyL’
 = 
Ëngth
 + 
kChunkHdrL’
;

144 
»suÉ
 = 
Œue
;

146 
	`ALOGV
("dvmHandleDdm„eturningype=%.4s buf=%p†en=%d",

147 (*è
»¶y
,„•ly, 
Ëngth
);

149 
ba
:

150 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
d©aA¼ay
, 
£lf
);

151 
	`dvmR–—£T¿ckedAÎoc
(
chunk
, 
£lf
);

152  
»suÉ
;

153 
	}
}

156 
	#CONNECTED
 1

	)

157 
	#DISCONNECTED
 2

	)

162 
	$brßdÿ¡
(
ev’t
)

164 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

166 ià(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
) {

167 
	`ALOGE
("ERROR: DDM brßdÿ¡ w™hh»ad stus=%d", 
£lf
->
¡©us
);

171 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcDdmS”v”
)) {

172 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcDdmS”v”
)) {

173 
	`dvmLogExû±iÚSckT¿û
();

174 
	`dvmCË¬Exû±iÚ
(
£lf
);

179 
JV®ue
 
unu£d
;

180 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hD®vikDdmcS”v”_brßdÿ¡
, 
NULL
, &
unu£d
,

181 
ev’t
);

182 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

183 
	`ALOGI
("Exû±iÚhrowÀby brßdÿ¡(%d)", 
ev’t
);

184 
	`dvmLogExû±iÚSckT¿û
();

185 
	`dvmCË¬Exû±iÚ
(
£lf
);

188 
	}
}

195 
	$dvmDdmCÚÃùed
()

199 
	`ALOGV
("Broadcasting DDM connect");

200 
	`brßdÿ¡
(
CONNECTED
);

201 
	}
}

208 
	$dvmDdmDiscÚÃùed
()

210 
	`ALOGV
("Broadcasting DDM disconnect");

211 
	`brßdÿ¡
(
DISCONNECTED
);

213 
gDvm
.
ddmTh»adNÙifiÿtiÚ
 = 
çl£
;

214 
	}
}

220 
	$dvmDdmS‘Th»adNÙifiÿtiÚ
(
boŞ
 
’abË
)

227 
	`dvmLockTh»adLi¡
(
NULL
);

228 
gDvm
.
ddmTh»adNÙifiÿtiÚ
 = 
’abË
;

230 ià(
’abË
) {

231 
Th»ad
* 
th»ad
;

232 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

234 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
Œue
);

238 
	`dvmUÆockTh»adLi¡
();

239 
	}
}

247 
	$dvmDdmS’dTh»adNÙifiÿtiÚ
(
Th»ad
* 
th»ad
, 
boŞ
 
¡¬‹d
)

249 ià(!
gDvm
.
ddmTh»adNÙifiÿtiÚ
) {

253 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

254 
Objeù
* 
th»adObj
 = 
th»ad
->threadObj;

256 ià(
th»adObj
 !ğ
NULL
) {

257 
ÇmeObj
 = (
SŒšgObjeù
*)

258 
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_Çme
);

261 
ty³
, 
Ën
;

262 
u1
 
buf
[256];

264 ià(
¡¬‹d
) {

265 cÚ¡ 
u2
* 
ch¬s
;

266 
u2
* 
outCh¬s
;

267 
size_t
 
¡ršgL’
;

269 
ty³
 = 
	`CHUNK_TYPE
("THCR");

271 ià(
ÇmeObj
 !ğ
NULL
) {

272 
¡ršgL’
 = 
ÇmeObj
->
	`Ëngth
();

273 
ch¬s
 = 
ÇmeObj
->
	`ch¬s
();

275 
¡ršgL’
 = 0;

276 
ch¬s
 = 
NULL
;

280 ià(
¡ršgL’
 > ((
buf
è- (
u4
)*2) / 2) {

281 
¡ršgL’
 = ((
buf
è- (
u4
)*2) / 2;

283 
Ën
 = 
¡ršgL’
*2 + (
u4
)*2;

285 
	`£t4BE
(&
buf
[0x00], 
th»ad
->
th»adId
);

286 
	`£t4BE
(&
buf
[0x04], 
¡ršgL’
);

289 
outCh¬s
 = (
u2
*)(*)&
buf
[0x08];

290 
¡ršgL’
--) {

291 
	`£t2BE
((
u1
*è(
outCh¬s
++), *
ch¬s
++);

294 
ty³
 = 
	`CHUNK_TYPE
("THDE");

296 
Ën
 = 4;

298 
	`£t4BE
(&
buf
[0x00], 
th»ad
->
th»adId
);

301 
	`dvmDbgDdmS’dChunk
(
ty³
, 
Ën
, 
buf
);

302 
	}
}

307 
	$dvmDdmS’dTh»adNameChªge
(
th»adId
, 
SŒšgObjeù
* 
ÃwName
)

309 ià(!
gDvm
.
ddmTh»adNÙifiÿtiÚ
) {

313 
size_t
 
¡ršgL’
 = 
ÃwName
->
	`Ëngth
();

314 cÚ¡ 
u2
* 
ch¬s
 = 
ÃwName
->
	`ch¬s
();

322 
bufL’
 = 4 + 4 + (
¡ršgL’
 * 2);

323 
u1
 
buf
[
bufL’
];

325 
	`£t4BE
(&
buf
[0x00], 
th»adId
);

326 
	`£t4BE
(&
buf
[0x04], 
¡ršgL’
);

327 
u2
* 
outCh¬s
 = (u2*)(*)&
buf
[0x08];

328 
¡ršgL’
--) {

329 
	`£t2BE
((
u1
*è(
outCh¬s
++), *
ch¬s
++);

332 
	`dvmDbgDdmS’dChunk
(
	`CHUNK_TYPE
("THNM"), 
bufL’
, 
buf
);

333 
	}
}

359 
A¼ayObjeù
* 
	$dvmDdmG’”©eTh»adSts
()

361 cÚ¡ 
kH—d”L’
 = 4;

362 cÚ¡ 
kBy‹sP”EÁry
 = 18;

364 
	`dvmLockTh»adLi¡
(
NULL
);

366 
Th»ad
* 
th»ad
;

367 
th»adCouÁ
 = 0;

368 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
)

369 
th»adCouÁ
++;

376 
bufL’
 = 
kH—d”L’
 + 
th»adCouÁ
 * 
kBy‹sP”EÁry
;

377 
u1
 
tmpBuf
[
bufL’
];

378 
u1
* 
buf
 = 
tmpBuf
;

380 
	`£t1
(
buf
+0, 
kH—d”L’
);

381 
	`£t1
(
buf
+1, 
kBy‹sP”EÁry
);

382 
	`£t2BE
(
buf
+2, (
u2
è
th»adCouÁ
);

383 
buf
 +ğ
kH—d”L’
;

385 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

386 
boŞ
 
isD«mÚ
 = 
çl£
;

388 
ProcStD©a
 
´ocStD©a
;

389 ià(!
	`dvmG‘Th»adSts
(&
´ocStD©a
, 
th»ad
->
sy¡emTid
)) {

391 
	`mem£t
(&
´ocStD©a
, 0, (procStatData));

394 
Objeù
* 
th»adObj
 = 
th»ad
->threadObj;

395 ià(
th»adObj
 !ğ
NULL
) {

396 
isD«mÚ
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
,

397 
gDvm
.
offJavaLªgTh»ad_d«mÚ
);

400 
	`£t4BE
(
buf
+0, 
th»ad
->
th»adId
);

401 
	`£t1
(
buf
+4, 
th»ad
->
¡©us
);

402 
	`£t4BE
(
buf
+5, 
th»ad
->
sy¡emTid
);

403 
	`£t4BE
(
buf
+9, 
´ocStD©a
.
utime
);

404 
	`£t4BE
(
buf
+13, 
´ocStD©a
.
¡ime
);

405 
	`£t1
(
buf
+17, 
isD«mÚ
);

407 
buf
 +ğ
kBy‹sP”EÁry
;

409 
	`dvmUÆockTh»adLi¡
();

415 
A¼ayObjeù
* 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
bufL’
, 
ALLOC_DEFAULT
);

416 ià(
¬¿yObj
 !ğ
NULL
)

417 
	`memıy
(
¬¿yObj
->
cÚ‹Ás
, 
tmpBuf
, 
bufL’
);

418  
¬¿yObj
;

419 
	}
}

426 
A¼ayObjeù
* 
	$dvmDdmG‘SckT¿ûById
(
u4
 
th»adId
)

428 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

429 
Th»ad
* 
th»ad
;

430 * 
ŒaûBuf
;

432 
	`dvmLockTh»adLi¡
(
£lf
);

434 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

435 ià(
th»ad
->
th»adId
 ==hreadId)

438 ià(
th»ad
 =ğ
NULL
) {

439 
	`ALOGI
("dvmDdmG‘SckT¿ûById:h»adid=%d‚Ù found", 
th»adId
);

440 
	`dvmUÆockTh»adLi¡
();

441  
NULL
;

449 
size_t
 
¡ackD•th
;

450 ià(
th»ad
 !ğ
£lf
)

451 
	`dvmSu¥’dTh»ad
(
th»ad
);

452 
ŒaûBuf
 = 
	`dvmFlInSckT¿ûRaw
(
th»ad
, &
¡ackD•th
);

453 ià(
th»ad
 !ğ
£lf
)

454 
	`dvmResumeTh»ad
(
th»ad
);

455 
	`dvmUÆockTh»adLi¡
();

460 
A¼ayObjeù
* 
Œaû
 = 
	`dvmG‘SckT¿ûRaw
(
ŒaûBuf
, 
¡ackD•th
);

461 
	`ä“
(
ŒaûBuf
);

462  
Œaû
;

463 
	}
}

470 
A¼ayObjeù
* 
	$dvmDdmG‘ReûÁAÎoÿtiÚs
()

472 
u1
* 
d©a
;

473 
size_t
 
Ën
;

475 ià(!
	`dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(&
d©a
, &
Ën
)) {

477 
	`dvmThrowOutOfMemÜyE¼Ü
("recent‡lloc‚ative");

478  
NULL
;

481 
A¼ayObjeù
* 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
Ën
, 
ALLOC_DEFAULT
);

482 ià(
¬¿yObj
 !ğ
NULL
)

483 
	`memıy
(
¬¿yObj
->
cÚ‹Ás
, 
d©a
, 
Ën
);

484  
¬¿yObj
;

485 
	}
}

	@vm/Ddm.h

19 #iâdeà
DALVIK_DDM_H_


20 
	#DALVIK_DDM_H_


	)

28 
boŞ
 
dvmDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

29 * 
pR•lyL’
);

34 
dvmDdmCÚÃùed
();

35 
dvmDdmDiscÚÃùed
();

40 
dvmDdmS‘Th»adNÙifiÿtiÚ
(
boŞ
 
’abË
);

46 
dvmDdmS’dTh»adNÙifiÿtiÚ
(
Th»ad
* 
th»ad
, 
boŞ
 
¡¬‹d
);

52 
dvmDdmS’dTh»adNameChªge
(
th»adId
, 
SŒšgObjeù
* 
ÃwName
);

57 
A¼ayObjeù
* 
dvmDdmG’”©eTh»adSts
();

64 
boŞ
 
dvmDdmHªdËHpifChunk
(
wh’
);

73 
boŞ
 
dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, boŞ 
Çtive
);

78 
A¼ayObjeù
* 
dvmDdmG‘SckT¿ûById
(
u4
 
th»adId
);

85 
A¼ayObjeù
* 
dvmDdmG‘ReûÁAÎoÿtiÚs
();

	@vm/Debugger.cpp

25 
	~"D®vik.h
"

90 
	#THREAD_GROUP_ALL
 ((
ObjeùId
) 0x12345)

91 

	)

92 
	#kSlÙ0Sub
 1000

93 

	)

98 
boŞ
 
	$dvmDebugg”S¹up
()

100 ià(!
	`dvmB»akpoštS¹up
())

101  
çl£
;

103 
gDvm
.
dbgRegi¡ry
 = 
	`dvmHashTabËC»©e
(1000, 
NULL
);

104  (
gDvm
.
dbgRegi¡ry
 !ğ
NULL
);

105 
	}
}

110 
	$dvmDebugg”Shutdown
()

112 
	`dvmHashTabËF»e
(
gDvm
.
dbgRegi¡ry
);

113 
gDvm
.
dbgRegi¡ry
 = 
NULL
;

114 
	`dvmB»akpoštShutdown
();

115 
	}
}

122 
	$dvmDbgIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

124 
	`dvmIn™Mu‹x
(
pMu‹x
);

125 
	}
}

126 
	$dvmDbgLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

128 
	`dvmLockMu‹x
(
pMu‹x
);

129 
	}
}

130 
	$dvmDbgUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

132 
	`dvmUÆockMu‹x
(
pMu‹x
);

133 
	}
}

134 
	$dvmDbgIn™CÚd
(
±h»ad_cÚd_t
* 
pCÚd
)

136 
	`±h»ad_cÚd_š™
(
pCÚd
, 
NULL
);

137 
	}
}

138 
	$dvmDbgCÚdWa™
(
±h»ad_cÚd_t
* 
pCÚd
, 
±h»ad_mu‹x_t
* 
pMu‹x
)

140 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_wa™
(
pCÚd
, 
pMu‹x
);

141 
	`as£¹
(
cc
 == 0);

142 
	}
}

143 
	$dvmDbgCÚdSigÇl
(
±h»ad_cÚd_t
* 
pCÚd
)

145 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_sigÇl
(
pCÚd
);

146 
	`as£¹
(
cc
 == 0);

147 
	}
}

148 
	$dvmDbgCÚdBrßdÿ¡
(
±h»ad_cÚd_t
* 
pCÚd
)

150 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_brßdÿ¡
(
pCÚd
);

151 
	`as£¹
(
cc
 == 0);

152 
	}
}

156 
	eRegi¡ryTy³
 {

157 
	mkObjeùId
 = 0xc1, 
	mkRefTy³Id


165 
šlše
 
u4
 
	$»gi¡ryHash
(
u4
 
v®
)

167  
v®
 >> 4;

168 
	}
}

173 
	$»gi¡ryCom·»
(cÚ¡ * 
obj1
, cÚ¡ * 
obj2
)

175  (è
obj1
 - (è
obj2
;

176 
	}
}

186 #iâdeà
NDEBUG


187 
boŞ
 
	$lookupId
(
ObjeùId
 
id
)

189 * 
found
;

191 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
dbgRegi¡ry
, 
	`»gi¡ryHash
((
u4
è
id
),

192 (*)(
u4
è
id
, 
»gi¡ryCom·»
, 
çl£
);

193 ià(
found
 =ğ
NULL
)

194  
çl£
;

195 
	`as£¹
(
found
 =ğ(*)(
u4
è
id
);

196  
Œue
;

197 
	}
}

209 
ObjeùId
 
	$»gi¡”Objeù
(cÚ¡ 
Objeù
* 
obj
, 
Regi¡ryTy³
 
ty³
, 
boŞ
 
»g
)

211 
ObjeùId
 
id
;

213 ià(
obj
 =ğ
NULL
)

216 
	`as£¹
((
u4
è
obj
 != 0xcccccccc);

217 
	`as£¹
((
u4
è
obj
 > 0x100);

219 
id
 = (
ObjeùId
)(
u4
)
obj
 | ((
u8
è
ty³
) << 32;

220 ià(!
»g
)

221  
id
;

223 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

224 ià(!
gDvm
.
debugg”CÚÃùed
) {

226 
	`ALOGI
("ignoring„egisterObject„equest inhread=%d",

227 
	`dvmTh»adS–f
()->
th»adId
);

229 
ba
;

232 
	`dvmHashTabËLookup
(
gDvm
.
dbgRegi¡ry
, 
	`»gi¡ryHash
((
u4
è
id
),

233 (*)(
u4
è
id
, 
»gi¡ryCom·»
, 
Œue
);

235 
ba
:

236 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

237  
id
;

238 
	}
}

250 #iâdeà
NDEBUG


251 
boŞ
 
	$objeùIsRegi¡”ed
(
ObjeùId
 
id
, 
Regi¡ryTy³
 
ty³
)

253 
	`UNUSED_PARAMETER
(
ty³
);

255 ià(
id
 == 0)

256  
Œue
;

258 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

259 
boŞ
 
»suÉ
 = 
	`lookupId
(
id
);

260 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

261  
»suÉ
;

262 
	}
}

270 
RefTy³Id
 
	$şassObjeùToRefTy³Id
(
CÏssObjeù
* 
şazz
)

272  (
RefTy³Id
è
	`»gi¡”Objeù
((
Objeù
*è
şazz
, 
kRefTy³Id
, 
Œue
);

273 
	}
}

275 
RefTy³Id
 
	$şassObjeùToRefTy³IdNoReg
(
CÏssObjeù
* 
şazz
)

277  (
RefTy³Id
è
	`»gi¡”Objeù
((
Objeù
*è
şazz
, 
kRefTy³Id
, 
çl£
);

278 
	}
}

280 
CÏssObjeù
* 
	$»fTy³IdToCÏssObjeù
(
RefTy³Id
 
id
)

282 
	`as£¹
(
	`objeùIsRegi¡”ed
(
id
, 
kRefTy³Id
è|| !
gDvm
.
debugg”CÚÃùed
);

283  (
CÏssObjeù
*)(
u4
è
id
;

284 
	}
}

289 
ObjeùId
 
	$objeùToObjeùId
(cÚ¡ 
Objeù
* 
obj
)

291  
	`»gi¡”Objeù
(
obj
, 
kObjeùId
, 
Œue
);

292 
	}
}

293 
ObjeùId
 
	$objeùToObjeùIdNoReg
(cÚ¡ 
Objeù
* 
obj
)

295  
	`»gi¡”Objeù
(
obj
, 
kObjeùId
, 
çl£
);

296 
	}
}

297 
Objeù
* 
	$objeùIdToObjeù
(
ObjeùId
 
id
)

299 
	`as£¹
(
	`objeùIsRegi¡”ed
(
id
, 
kObjeùId
è|| !
gDvm
.
debugg”CÚÃùed
);

300  (
Objeù
*)(
u4
è
id
;

301 
	}
}

310 
	$dvmDbgRegi¡”ObjeùId
(
ObjeùId
 
id
)

312 
Objeù
* 
obj
 = (Objeù*)(
u4
è
id
;

313 
	`ALOGV
("+++„egi¡”šg %°(%s)", 
obj
, obj->
şazz
->
desütÜ
);

314 
	`»gi¡”Objeù
(
obj
, 
kObjeùId
, 
Œue
);

315 
	}
}

323 
M‘hodId
 
	$m‘hodToM‘hodId
(cÚ¡ 
M‘hod
* 
m‘h
)

325  (
M‘hodId
)(
u4
è
m‘h
;

326 
	}
}

327 
M‘hod
* 
	$m‘hodIdToM‘hod
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
)

330  (
M‘hod
*)(
u4
è
id
;

331 
	}
}

339 
F›ldId
 
	$f›ldToF›ldId
(cÚ¡ 
F›ld
* 
f›ld
)

341  (
F›ldId
)(
u4
è
f›ld
;

342 
	}
}

343 
F›ld
* 
	$f›ldIdToF›ld
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
id
)

346  (
F›ld
*)(
u4
è
id
;

347 
	}
}

354 
F¿meId
 
	$äameToF¿meId
(cÚ¡ * 
äame
)

356  (
F¿meId
)(
u4
è
äame
;

357 
	}
}

358 
u4
* 
	$äameIdToF¿me
(
F¿meId
 
id
)

360  (
u4
*)(u4è
id
;

361 
	}
}

367 
DebugInvokeReq
* 
	$dvmDbgG‘InvokeReq
()

369  &
	`dvmTh»adS–f
()->
švokeReq
;

370 
	}
}

377 
	$dvmDbgCÚÃùed
()

379 
	`as£¹
(!
gDvm
.
debugg”CÚÃùed
);

381 
	`ALOGV
("JDWP has‡ttached");

382 
	`as£¹
(
	`dvmHashTabËNumEÁr›s
(
gDvm
.
dbgRegi¡ry
) == 0);

383 
gDvm
.
debugg”CÚÃùed
 = 
Œue
;

384 
	}
}

393 
	$dvmDbgAùive
()

395 ià(
gDvm
.
debugg”Aùive
)

398 
	`ALOGI
("Debugger is‡ctive");

399 
	`dvmIn™B»akpošts
();

400 
gDvm
.
debugg”Aùive
 = 
Œue
;

401 
	`dvmEÇbËAÎSubMode
(
kSubModeDebugg”Aùive
);

402 #ià
	`defšed
(
WITH_JIT
)

403 
	`dvmComp”Upd©eGlob®S‹
();

405 
	}
}

415 
	$dvmDbgDiscÚÃùed
()

417 
	`as£¹
(
gDvm
.
debugg”CÚÃùed
);

419 
gDvm
.
debugg”Aùive
 = 
çl£
;

420 
	`dvmDi§bËAÎSubMode
(
kSubModeDebugg”Aùive
);

421 #ià
	`defšed
(
WITH_JIT
)

422 
	`dvmComp”Upd©eGlob®S‹
();

425 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

426 
gDvm
.
debugg”CÚÃùed
 = 
çl£
;

428 
	`ALOGD
("Debugger has detached; object„egistry had %dƒntries",

429 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
dbgRegi¡ry
));

434 
	`dvmHashTabËCË¬
(
gDvm
.
dbgRegi¡ry
);

435 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

436 
	}
}

443 
boŞ
 
	$dvmDbgIsDebugg”CÚÃùed
()

445  
gDvm
.
debugg”Aùive
;

446 
	}
}

452 
s8
 
	$dvmDbgLa¡Debugg”Aùiv™y
()

454  
	`dvmJdwpLa¡Debugg”Aùiv™y
(
gDvm
.
jdwpS‹
);

455 
	}
}

460 
	$dvmDbgTh»adRuÂšg
()

462 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

463  
¡©ic_ÿ¡
<>(
ŞdStus
);

464 
	}
}

469 
	$dvmDbgTh»adWa™šg
()

471 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

472  
¡©ic_ÿ¡
<>(
ŞdStus
);

473 
	}
}

478 
	$dvmDbgTh»adCÚtšušg
(
¡©us
)

480 
Th»adStus
 
ÃwStus
 = 
¡©ic_ÿ¡
<Th»adStus>(
¡©us
);

481 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
ÃwStus
);

482  
¡©ic_ÿ¡
<>(
ŞdStus
);

483 
	}
}

488 
	$dvmDbgEx™
(
¡©us
)

492 
	`ALOGI
("GC†iãtim®loÿtiÚ: %d by‹s", 
gDvm
.
®locProf
.
®locCouÁ
);

493 ià(
CALC_CACHE_STATS
) {

494 
	`dvmDumpAtomicCacheSts
(
gDvm
.
š¡ªûofCache
);

495 
	`dvmDumpBoÙCÏssP©h
();

497 
	`ex™
(
¡©us
);

498 
	}
}

510 cÚ¡ * 
	$dvmDbgG‘CÏssDesütÜ
(
RefTy³Id
 
id
)

512 
CÏssObjeù
* 
şazz
;

514 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

515  
şazz
->
desütÜ
;

516 
	}
}

521 
ObjeùId
 
	$dvmDbgG‘CÏssObjeù
(
RefTy³Id
 
id
)

523 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

524  
	`objeùToObjeùId
((
Objeù
*è
şazz
);

525 
	}
}

530 
RefTy³Id
 
	$dvmDbgG‘Su³rşass
(
RefTy³Id
 
id
)

532 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

533  
	`şassObjeùToRefTy³Id
(
şazz
->
su³r
);

534 
	}
}

539 
RefTy³Id
 
	$dvmDbgG‘CÏssLßd”
(
RefTy³Id
 
id
)

541 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

542  
	`objeùToObjeùId
(
şazz
->
şassLßd”
);

543 
	}
}

548 
u4
 
	$dvmDbgG‘AcûssFÏgs
(
RefTy³Id
 
id
)

550 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

551  
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
;

552 
	}
}

557 
boŞ
 
	$dvmDbgIsIÁ”çû
(
RefTy³Id
 
id
)

559 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

560  
	`dvmIsIÁ”çûCÏss
(
şazz
);

561 
	}
}

566 
	$cİyRefTy³
(* 
vşazz
, * 
v¬g
)

568 
RefTy³Id
** 
pRefTy³
 = (RefTy³Id**)
v¬g
;

569 **
pRefTy³
 = 
	`şassObjeùToRefTy³Id
((
CÏssObjeù
*è
vşazz
);

570 (*
pRefTy³
)++;

572 
	}
}

580 
	$dvmDbgG‘CÏssLi¡
(
u4
* 
pNumCÏs£s
, 
RefTy³Id
** 
pCÏssRefBuf
)

582 
RefTy³Id
* 
pRefTy³
;

584 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

585 *
pNumCÏs£s
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

586 
pRefTy³
 = *
pCÏssRefBuf
 =

587 (
RefTy³Id
*)
	`m®loc
((RefTy³Idè* *
pNumCÏs£s
);

589 ià(
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
cİyRefTy³
, &
pRefTy³
) != 0) {

590 
	`ALOGW
("Warning:…roblem getting class†ist");

593 
	`as£¹
(
pRefTy³
 - *
pCÏssRefBuf
 =ğ(è*
pNumCÏs£s
);

596 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

597 
	}
}

606 
	$dvmDbgG‘VisibËCÏssLi¡
(
ObjeùId
 
şassLßd”Id
, 
u4
* 
pNumCÏs£s
,

607 
RefTy³Id
** 
pCÏssRefBuf
)

609 
Objeù
* 
şassLßd”
;

610 
numCÏs£s
 = 0, 
maxCÏs£s
;

612 
şassLßd”
 = 
	`objeùIdToObjeù
(
şassLßd”Id
);

615 
	`LOGVV
("G‘VisibËLi¡: com·ršgØ%p", 
şassLßd”
);

617 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

620 
maxCÏs£s
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

621 *
pCÏssRefBuf
 = (
RefTy³Id
*)
	`m®loc
((RefTy³Idè* 
maxCÏs£s
);

626 
HashI‹r
 
™”
;

627 
	`dvmHashI‹rBegš
(
gDvm
.
lßdedCÏs£s
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

628 
	`dvmHashI‹rNext
(&
™”
))

630 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmHashI‹rD©a
(&
™”
);

632 ià(
şazz
->
şassLßd”
 == classLoader ||

633 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
şassLßd”
))

635 
	`LOGVV
(" m©ch '%s'", 
şazz
->
desütÜ
);

636 (*
pCÏssRefBuf
)[
numCÏs£s
++] = 
	`şassObjeùToRefTy³Id
(
şazz
);

639 *
pNumCÏs£s
 = 
numCÏs£s
;

641 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

642 
	}
}

649 cÚ¡ * 
	$jniSigÇtu»
(
CÏssObjeù
* 
şazz
)

651  
şazz
->
desütÜ
;

652 
	}
}

660 
	$dvmDbgG‘CÏssInfo
(
RefTy³Id
 
şassId
, 
u1
* 
pTy³Tag
, 
u4
* 
pStus
,

661 cÚ¡ ** 
pSigÇtu»
)

663 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

665 ià(
şazz
->
desütÜ
[0] == '[') {

667 *
pStus
 = 
CS_VERIFIED
 | 
CS_PREPARED
;

668 *
pTy³Tag
 = 
TT_ARRAY
;

670 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
)

671 *
pStus
 = 
CS_ERROR
;

673 *
pStus
 = 
CS_VERIFIED
 | 
CS_PREPARED
 | 
CS_INITIALIZED
;

674 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

675 *
pTy³Tag
 = 
TT_INTERFACE
;

677 *
pTy³Tag
 = 
TT_CLASS
;

679 ià(
pSigÇtu»
 !ğ
NULL
)

680 *
pSigÇtu»
 = 
	`jniSigÇtu»
(
şazz
);

681 
	}
}

686 
boŞ
 
	$dvmDbgFšdLßdedCÏssBySigÇtu»
(cÚ¡ * 
şassDesütÜ
,

687 
RefTy³Id
* 
pRefTy³Id
)

689 
CÏssObjeù
* 
şazz
;

691 
şazz
 = 
	`dvmFšdLßdedCÏss
(
şassDesütÜ
);

692 ià(
şazz
 !ğ
NULL
) {

693 *
pRefTy³Id
 = 
	`şassObjeùToRefTy³Id
(
şazz
);

694  
Œue
;

696  
çl£
;

697 
	}
}

703 
	$dvmDbgG‘ObjeùTy³
(
ObjeùId
 
objeùId
, 
u1
* 
pRefTy³Tag
,

704 
RefTy³Id
* 
pRefTy³Id
)

706 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

708 ià(
	`dvmIsA¼ayCÏss
(
obj
->
şazz
))

709 *
pRefTy³Tag
 = 
TT_ARRAY
;

710 ià(
	`dvmIsIÁ”çûCÏss
(
obj
->
şazz
))

711 *
pRefTy³Tag
 = 
TT_INTERFACE
;

713 *
pRefTy³Tag
 = 
TT_CLASS
;

714 *
pRefTy³Id
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

715 
	}
}

720 
u1
 
	$dvmDbgG‘CÏssObjeùTy³
(
RefTy³Id
 
»fTy³Id
)

722 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

724 ià(
	`dvmIsA¼ayCÏss
(
şazz
))

725  
TT_ARRAY
;

726 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

727  
TT_INTERFACE
;

729  
TT_CLASS
;

730 
	}
}

735 cÚ¡ * 
	$dvmDbgG‘SigÇtu»
(
RefTy³Id
 
»fTy³Id
)

737 
CÏssObjeù
* 
şazz
;

739 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

740 
	`as£¹
(
şazz
 !ğ
NULL
);

742  
	`jniSigÇtu»
(
şazz
);

743 
	}
}

750 cÚ¡ * 
	$dvmDbgG‘SourûFe
(
RefTy³Id
 
»fTy³Id
)

752 
CÏssObjeù
* 
şazz
;

754 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

755 
	`as£¹
(
şazz
 !ğ
NULL
);

757  
şazz
->
sourûFe
;

758 
	}
}

763 cÚ¡ * 
	$dvmDbgG‘ObjeùTy³Name
(
ObjeùId
 
objeùId
)

765 ià(
objeùId
 == 0)

768 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

769  
	`jniSigÇtu»
(
obj
->
şazz
);

770 
	}
}

775 
boŞ
 
	$isTagPrim™ive
(
u1
 
g
)

777 
g
) {

778 
JT_BYTE
:

779 
JT_CHAR
:

780 
JT_FLOAT
:

781 
JT_DOUBLE
:

782 
JT_INT
:

783 
JT_LONG
:

784 
JT_SHORT
:

785 
JT_VOID
:

786 
JT_BOOLEAN
:

787  
Œue
;

788 
JT_ARRAY
:

789 
JT_OBJECT
:

790 
JT_STRING
:

791 
JT_CLASS_OBJECT
:

792 
JT_THREAD
:

793 
JT_THREAD_GROUP
:

794 
JT_CLASS_LOADER
:

795  
çl£
;

797 
	`ALOGE
("ERROR: unhªdËdag '%c'", 
g
);

798 
	`as£¹
(
çl£
);

799  
çl£
;

801 
	}
}

806 
u1
 
	$gFromCÏss
(
CÏssObjeù
* 
şazz
)

808 ià(
	`dvmIsA¼ayCÏss
(
şazz
))

809  
JT_ARRAY
;

811 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
) {

812  
JT_STRING
;

813 } ià(
	`dvmIsTheCÏssCÏss
(
şazz
)) {

814  
JT_CLASS_OBJECT
;

815 } ià(
	`dvmIn¡ªûof
(
şazz
, 
gDvm
.
şassJavaLªgTh»ad
)) {

816  
JT_THREAD
;

817 } ià(
	`dvmIn¡ªûof
(
şazz
, 
gDvm
.
şassJavaLªgTh»adGroup
)) {

818  
JT_THREAD_GROUP
;

819 } ià(
	`dvmIn¡ªûof
(
şazz
, 
gDvm
.
şassJavaLªgCÏssLßd”
)) {

820  
JT_CLASS_LOADER
;

822  
JT_OBJECT
;

824 
	}
}

833 
u1
 
	$basicTagFromDesütÜ
(cÚ¡ * 
desütÜ
)

835  
desütÜ
[0];

836 
	}
}

846 
u1
 
	$gFromObjeù
(cÚ¡ 
Objeù
* 
obj
)

848 ià(
obj
 =ğ
NULL
)

849  
JT_OBJECT
;

850  
	`gFromCÏss
(
obj
->
şazz
);

851 
	}
}

858 
u1
 
	$dvmDbgG‘ObjeùTag
(
ObjeùId
 
objeùId
)

860  
	`gFromObjeù
(
	`objeùIdToObjeù
(
objeùId
));

861 
	}
}

866 
	$dvmDbgG‘TagWidth
(
g
)

868 
g
) {

869 
JT_VOID
:

871 
JT_BYTE
:

872 
JT_BOOLEAN
:

874 
JT_CHAR
:

875 
JT_SHORT
:

877 
JT_FLOAT
:

878 
JT_INT
:

880 
JT_ARRAY
:

881 
JT_OBJECT
:

882 
JT_STRING
:

883 
JT_THREAD
:

884 
JT_THREAD_GROUP
:

885 
JT_CLASS_LOADER
:

886 
JT_CLASS_OBJECT
:

887  (
ObjeùId
);

888 
JT_DOUBLE
:

889 
JT_LONG
:

892 
	`ALOGE
("ERROR: unhªdËdag '%c'", 
g
);

893 
	`as£¹
(
çl£
);

896 
	}
}

902 
	$dvmDbgG‘A¼ayL’gth
(
ObjeùId
 
¬¿yId
)

904 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

905 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

906  
¬¿yObj
->
Ëngth
;

907 
	}
}

912 
u1
 
	$dvmDbgG‘A¼ayEËm’tTag
(
ObjeùId
 
¬¿yId
)

914 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

916 
CÏssObjeù
* 
¬¿yCÏss
 = 
¬¿yObj
->
şazz
;

917 
u1
 
g
 = 
	`basicTagFromDesütÜ
(
¬¿yCÏss
->
desütÜ
 + 1);

918 ià(!
	`isTagPrim™ive
(
g
)) {

920 
g
 = 
	`gFromCÏss
(
¬¿yCÏss
->
–em’tCÏss
);

923  
g
;

924 
	}
}

930 
	$cİyV®uesToBE
(
u1
* 
out
, cÚ¡ u1* 
š
, 
couÁ
, 
width
)

932 
i
;

934 
width
) {

936 
	`memıy
(
out
, 
š
, 
couÁ
);

939 
i
 = 0; i < 
couÁ
; i++)

940 *(((
u2
*è
out
)+
i
èğ
	`g‘2BE
(
š
 + i*2);

943 
i
 = 0; i < 
couÁ
; i++)

944 *(((
u4
*è
out
)+
i
èğ
	`g‘4BE
(
š
 + i*4);

947 
i
 = 0; i < 
couÁ
; i++)

948 *(((
u8
*è
out
)+
i
èğ
	`g‘8BE
(
š
 + i*8);

951 
	`as£¹
(
çl£
);

953 
	}
}

959 
	$cİyV®uesFromBE
(
u1
* 
out
, cÚ¡ u1* 
š
, 
couÁ
, 
width
)

961 
i
;

963 
width
) {

965 
	`memıy
(
out
, 
š
, 
couÁ
);

968 
i
 = 0; i < 
couÁ
; i++)

969 
	`£t2BE
(
out
 + 
i
*2, *((
u2
*)
š
 + i));

972 
i
 = 0; i < 
couÁ
; i++)

973 
	`£t4BE
(
out
 + 
i
*4, *((
u4
*)
š
 + i));

976 
i
 = 0; i < 
couÁ
; i++)

977 
	`£t8BE
(
out
 + 
i
*8, *((
u8
*)
š
 + i));

980 
	`as£¹
(
çl£
);

982 
	}
}

989 
boŞ
 
	$dvmDbgOuutA¼ay
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

990 
Ex·ndBuf
* 
pR•ly
)

992 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

993 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*)
¬¿yObj
->
cÚ‹Ás
;

994 
u1
 
g
;

996 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

998 ià(
fœ¡Index
 + 
couÁ
 > ()
¬¿yObj
->
Ëngth
) {

999 
	`ALOGW
("Request for index=%d + count=%dƒxcceds†ength=%d",

1000 
fœ¡Index
, 
couÁ
, 
¬¿yObj
->
Ëngth
);

1001  
çl£
;

1004 
g
 = 
	`basicTagFromDesütÜ
(
¬¿yObj
->
şazz
->
desütÜ
 + 1);

1006 ià(
	`isTagPrim™ive
(
g
)) {

1007 
width
 = 
	`dvmDbgG‘TagWidth
(
g
);

1008 
u1
* 
outBuf
;

1010 
outBuf
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
couÁ
 * 
width
);

1012 
	`cİyV®uesToBE
(
outBuf
, 
d©a
 + 
fœ¡Index
*
width
, 
couÁ
, width);

1014 
Objeù
** 
pObjeùs
;

1015 
i
;

1017 
pObjeùs
 = (
Objeù
**è
d©a
;

1018 
pObjeùs
 +ğ
fœ¡Index
;

1020 
	`ALOGV
(" --> cİyšg %d objeù IDs", 
couÁ
);

1023 
i
 = 0; i < 
couÁ
; i++, 
pObjeùs
++) {

1024 
u1
 
thisTag
;

1025 ià(*
pObjeùs
 !ğ
NULL
)

1026 
thisTag
 = 
	`gFromObjeù
(*
pObjeùs
);

1028 
thisTag
 = 
g
;

1029 
	`ex·ndBufAdd1
(
pR•ly
, 
thisTag
);

1030 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`objeùToObjeùId
(*
pObjeùs
));

1034  
Œue
;

1035 
	}
}

1040 
boŞ
 
	$dvmDbgS‘A¼ayEËm’ts
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

1041 cÚ¡ 
u1
* 
buf
)

1043 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

1044 
u1
* 
d©a
 = (u1*)
¬¿yObj
->
cÚ‹Ás
;

1045 
u1
 
g
;

1047 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

1049 ià(
fœ¡Index
 + 
couÁ
 > ()
¬¿yObj
->
Ëngth
) {

1050 
	`ALOGW
("Attempto set index=%d + count=%dƒxcceds†ength=%d",

1051 
fœ¡Index
, 
couÁ
, 
¬¿yObj
->
Ëngth
);

1052  
çl£
;

1055 
g
 = 
	`basicTagFromDesütÜ
(
¬¿yObj
->
şazz
->
desütÜ
 + 1);

1057 ià(
	`isTagPrim™ive
(
g
)) {

1058 
width
 = 
	`dvmDbgG‘TagWidth
(
g
);

1060 
	`ALOGV
(" --> s‘tšg %d '%c' width=%d", 
couÁ
, 
g
, 
width
);

1062 
	`cİyV®uesFromBE
(
d©a
 + 
fœ¡Index
*
width
, 
buf
, 
couÁ
, width);

1064 
Objeù
** 
pObjeùs
;

1065 
i
;

1067 
pObjeùs
 = (
Objeù
**è
d©a
;

1068 
pObjeùs
 +ğ
fœ¡Index
;

1070 
	`ALOGV
(" --> s‘tšg %d objeùs", 
couÁ
);

1073 
i
 = 0; i < 
couÁ
; i++) {

1074 
ObjeùId
 
id
 = 
	`dvmR—dObjeùId
(&
buf
);

1075 *
pObjeùs
++ = 
	`objeùIdToObjeù
(
id
);

1079  
Œue
;

1080 
	}
}

1087 
ObjeùId
 
	$dvmDbgC»©eSŒšg
(cÚ¡ * 
¡r
)

1089 
SŒšgObjeù
* 
¡rObj
;

1091 
¡rObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
¡r
);

1092 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡rObj
, 
NULL
);

1093  
	`objeùToObjeùId
((
Objeù
*è
¡rObj
);

1094 
	}
}

1101 
ObjeùId
 
	$dvmDbgC»©eObjeù
(
RefTy³Id
 
şassId
)

1103 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

1104 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DEFAULT
);

1105 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

1106  
	`objeùToObjeùId
(
ÃwObj
);

1107 
	}
}

1115 
ObjeùId
 
	$dvmDbgC»©eA¼ayObjeù
(
RefTy³Id
 
¬¿yTy³Id
, 
u4
 
Ëngth
)

1117 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
¬¿yTy³Id
);

1118 
Objeù
* 
ÃwObj
 = (Objeù*è
	`dvmAÎocA¼ayByCÏss
(
şazz
, 
Ëngth
, 
ALLOC_DEFAULT
);

1119 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

1120  
	`objeùToObjeùId
(
ÃwObj
);

1121 
	}
}

1126 
boŞ
 
	$dvmDbgM©chTy³
(
RefTy³Id
 
š¡CÏssId
, RefTy³Id 
şassId
)

1128 
CÏssObjeù
* 
š¡CÏzz
 = 
	`»fTy³IdToCÏssObjeù
(
š¡CÏssId
);

1129 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

1131  
	`dvmIn¡ªûof
(
š¡CÏzz
, 
şazz
);

1132 
	}
}

1144 cÚ¡ * 
	$dvmDbgG‘M‘hodName
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
)

1146 
M‘hod
* 
m‘h
;

1148 
m‘h
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
id
);

1149  
m‘h
->
Çme
;

1150 
	}
}

1157 
u4
 
	$augm’‹dAcûssFÏgs
(
u4
 
acûssFÏgs
)

1159 
acûssFÏgs
 &ğ
JAVA_FLAGS_MASK
;

1161 ià((
acûssFÏgs
 & 
ACC_SYNTHETIC
) != 0) {

1162  
acûssFÏgs
 | 0xf0000000;

1164  
acûssFÏgs
;

1166 
	}
}

1173 
	$dvmDbgOuutAÎF›lds
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

1174 
Ex·ndBuf
* 
pR•ly
)

1176 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1177 
	`as£¹
(
şazz
 !ğ
NULL
);

1179 
u4
 
deş¬ed
 = 
şazz
->
sf›ldCouÁ
 + cÏzz->
if›ldCouÁ
;

1180 
	`ex·ndBufAdd4BE
(
pR•ly
, 
deş¬ed
);

1182 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

1183 
F›ld
* 
f›ld
 = &
şazz
->
sf›lds
[
i
];

1184 
	`ex·ndBufAddF›ldId
(
pR•ly
, 
	`f›ldToF›ldId
(
f›ld
));

1185 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
Çme
);

1186 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
sigÇtu»
);

1187 ià(
w™hG’”ic
) {

1188 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

1189 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1191 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`augm’‹dAcûssFÏgs
(
f›ld
->
acûssFÏgs
));

1193 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

1194 
F›ld
* 
f›ld
 = &
şazz
->
if›lds
[
i
];

1195 
	`ex·ndBufAddF›ldId
(
pR•ly
, 
	`f›ldToF›ldId
(
f›ld
));

1196 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
Çme
);

1197 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
sigÇtu»
);

1198 ià(
w™hG’”ic
) {

1199 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

1200 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1202 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`augm’‹dAcûssFÏgs
(
f›ld
->
acûssFÏgs
));

1204 
	}
}

1211 
	$dvmDbgOuutAÎM‘hods
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

1212 
Ex·ndBuf
* 
pR•ly
)

1214 
DexSŒšgCache
 
¡ršgCache
;

1215 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

1216 
CÏssObjeù
* 
şazz
;

1217 
M‘hod
* 
m‘h
;

1218 
u4
 
deş¬ed
;

1219 
i
;

1221 
	`dexSŒšgCacheIn™
(&
¡ršgCache
);

1223 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1224 
	`as£¹
(
şazz
 !ğ
NULL
);

1226 
deş¬ed
 = 
şazz
->
dœeùM‘hodCouÁ
 + cÏzz->
vœtu®M‘hodCouÁ
;

1227 
	`ex·ndBufAdd4BE
(
pR•ly
, 
deş¬ed
);

1229 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

1230 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

1232 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
	`m‘hodToM‘hodId
(
m‘h
));

1233 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
m‘h
->
Çme
);

1235 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
,

1236 (cÚ¡ 
u1
*è
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
,

1237 &
¡ršgCache
));

1239 ià(
w™hG’”ic
)

1240 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1241 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`augm’‹dAcûssFÏgs
(
m‘h
->
acûssFÏgs
));

1243 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

1244 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

1246 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
	`m‘hodToM‘hodId
(
m‘h
));

1247 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
m‘h
->
Çme
);

1249 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
,

1250 (cÚ¡ 
u1
*è
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
,

1251 &
¡ršgCache
));

1253 ià(
w™hG’”ic
)

1254 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1255 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`augm’‹dAcûssFÏgs
(
m‘h
->
acûssFÏgs
));

1258 
	`dexSŒšgCacheR–—£
(&
¡ršgCache
);

1259 
	}
}

1264 
	$dvmDbgOuutAÎIÁ”çûs
(
RefTy³Id
 
»fTy³Id
, 
Ex·ndBuf
* 
pR•ly
)

1266 
CÏssObjeù
* 
şazz
;

1267 
i
, 
couÁ
;

1269 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1270 
	`as£¹
(
şazz
 !ğ
NULL
);

1272 
couÁ
 = 
şazz
->
š‹rçûCouÁ
;

1273 
	`ex·ndBufAdd4BE
(
pR•ly
, 
couÁ
);

1274 
i
 = 0; i < 
couÁ
; i++) {

1275 
CÏssObjeù
* 
içû
 = 
şazz
->
š‹rçûs
[
i
];

1276 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
	`şassObjeùToRefTy³Id
(
içû
));

1278 
	}
}

1280 
	sDebugC®lbackCÚ‹xt
 {

1281 
	mnumI‹ms
;

1282 
Ex·ndBuf
* 
	mpR•ly
;

1284 
boŞ
 
	mw™hG’”ic
;

1287 
	$lšeTabËPos™iÚsCb
(*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

1289 
DebugC®lbackCÚ‹xt
 *
pCÚ‹xt
 = (DebugC®lbackCÚ‹xˆ*)
úxt
;

1291 
	`ex·ndBufAdd8BE
(
pCÚ‹xt
->
pR•ly
, 
add»ss
);

1292 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
lšeNum
);

1293 
pCÚ‹xt
->
numI‹ms
++;

1296 
	}
}

1303 
	$dvmDbgOuutLšeTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

1304 
Ex·ndBuf
* 
pR•ly
)

1306 
M‘hod
* 
m‘hod
;

1307 
u8
 
¡¬t
, 
’d
;

1308 
DebugC®lbackCÚ‹xt
 
cÚ‹xt
;

1310 
	`mem£t
 (&
cÚ‹xt
, 0, (
DebugC®lbackCÚ‹xt
));

1312 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
m‘hodId
);

1313 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1314 
¡¬t
 = (
u8
) -1;

1315 
’d
 = (
u8
) -1;

1317 
¡¬t
 = 0;

1318 
’d
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

1321 
	`ex·ndBufAdd8BE
(
pR•ly
, 
¡¬t
);

1322 
	`ex·ndBufAdd8BE
(
pR•ly
, 
’d
);

1325 
size_t
 
numLšesOff£t
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
);

1326 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1328 
cÚ‹xt
.
pR•ly
 =…Reply;

1330 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

1331 
	`dvmG‘M‘hodCode
(
m‘hod
),

1332 
m‘hod
->
şazz
->
desütÜ
,

1333 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1334 
m‘hod
->
acûssFÏgs
,

1335 
lšeTabËPos™iÚsCb
, 
NULL
, &
cÚ‹xt
);

1337 
	`£t4BE
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
numLšesOff£t
, 
cÚ‹xt
.
numI‹ms
);

1338 
	}
}

1349 
	$tw—kSlÙ
(
¦Ù
, cÚ¡ * 
Çme
)

1351 
ÃwSlÙ
 = 
¦Ù
;

1353 ià(
	`¡rcmp
(
Çme
, "this") == 0)

1354 
ÃwSlÙ
 = 0;

1355 ià(
¦Ù
 == 0)

1356 
ÃwSlÙ
 = 
kSlÙ0Sub
;

1358 
	`ALOGV
("uÁw—k: %dØ%d", 
¦Ù
, 
ÃwSlÙ
);

1359  
ÃwSlÙ
;

1360 
	}
}

1365 
	$uÁw—kSlÙ
(
¦Ù
, cÚ¡ * 
äamePŒ
)

1367 
ÃwSlÙ
 = 
¦Ù
;

1369 ià(
¦Ù
 =ğ
kSlÙ0Sub
) {

1370 
ÃwSlÙ
 = 0;

1371 } ià(
¦Ù
 == 0) {

1372 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1373 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

1374 
ÃwSlÙ
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

1377 
	`ALOGV
("uÁw—k: %dØ%d", 
¦Ù
, 
ÃwSlÙ
);

1378  
ÃwSlÙ
;

1379 
	}
}

1381 
	$v¬ŸbËTabËCb
 (*
úxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
,

1382 
u4
 
’dAdd»ss
, cÚ¡ *
Çme
, cÚ¡ *
desütÜ
,

1383 cÚ¡ *
sigÇtu»
)

1385 
DebugC®lbackCÚ‹xt
 *
pCÚ‹xt
 = (DebugC®lbackCÚ‹xˆ*)
úxt
;

1387 
»g
 = (
u2
è
	`tw—kSlÙ
Ôeg, 
Çme
);

1389 
	`ALOGV
(" %2d: %d(%d) '%s' '%s' slot=%d",

1390 
pCÚ‹xt
->
numI‹ms
, 
¡¬tAdd»ss
, 
’dAdd»ss
 - startAddress,

1391 
Çme
, 
desütÜ
, 
»g
);

1393 
	`ex·ndBufAdd8BE
(
pCÚ‹xt
->
pR•ly
, 
¡¬tAdd»ss
);

1394 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*)
Çme
);

1395 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*)
desütÜ
);

1396 ià(
pCÚ‹xt
->
w™hG’”ic
) {

1397 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

1399 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
’dAdd»ss
 - 
¡¬tAdd»ss
);

1400 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
»g
);

1402 
pCÚ‹xt
->
numI‹ms
++;

1403 
	}
}

1409 
	$dvmDbgOuutV¬ŸbËTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

1410 
boŞ
 
w™hG’”ic
, 
Ex·ndBuf
* 
pR•ly
)

1412 
M‘hod
* 
m‘hod
;

1413 
DebugC®lbackCÚ‹xt
 
cÚ‹xt
;

1415 
	`mem£t
 (&
cÚ‹xt
, 0, (
DebugC®lbackCÚ‹xt
));

1417 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
m‘hodId
);

1419 
	`ex·ndBufAdd4BE
(
pR•ly
, 
m‘hod
->
šsSize
);

1422 
size_t
 
numLoÿlsOff£t
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
);

1423 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1425 
cÚ‹xt
.
pR•ly
 =…Reply;

1426 
cÚ‹xt
.
w™hG’”ic
 = withGeneric;

1427 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

1428 
	`dvmG‘M‘hodCode
(
m‘hod
),

1429 
m‘hod
->
şazz
->
desütÜ
,

1430 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1431 
m‘hod
->
acûssFÏgs
,

1432 
NULL
, 
v¬ŸbËTabËCb
, &
cÚ‹xt
);

1434 
	`£t4BE
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
numLoÿlsOff£t
, 
cÚ‹xt
.
numI‹ms
);

1435 
	}
}

1440 
u1
 
	$dvmDbgG‘F›ldBasicTag
(
ObjeùId
 
objId
, 
F›ldId
 
f›ldId
)

1442 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objId
);

1443 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1444 cÚ¡ 
F›ld
* 
f›ld
 = 
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1445  
	`basicTagFromDesütÜ
(
f›ld
->
sigÇtu»
);

1446 
	}
}

1451 
u1
 
	$dvmDbgG‘SticF›ldBasicTag
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
)

1453 cÚ¡ 
F›ld
* 
f›ld
 = 
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1454  
	`basicTagFromDesütÜ
(
f›ld
->
sigÇtu»
);

1455 
	}
}

1463 
	$dvmDbgG‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
Ex·ndBuf
* 
pR•ly
)

1465 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

1466 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1467 
In¡F›ld
* 
if›ld
 = (In¡F›ld*è
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1468 
u1
 
g
 = 
	`basicTagFromDesütÜ
(
if›ld
->
sigÇtu»
);

1470 ià(
g
 =ğ
JT_ARRAY
 ||ag =ğ
JT_OBJECT
) {

1471 
Objeù
* 
objV®
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
if›ld
->
by‹Off£t
);

1472 
g
 = 
	`gFromObjeù
(
objV®
);

1473 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1474 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`objeùToObjeùId
(
objV®
));

1475 
	`ALOGV
(" --> if›ldId %x -->ag '%c' %p", 
f›ldId
, 
g
, 
objV®
);

1477 
	`ALOGV
(" --> if›ldId %x -->ag '%c'", 
f›ldId
, 
g
);

1478 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1480 
g
) {

1481 
JT_BOOLEAN
:

1482 
	`ex·ndBufAdd1
(
pR•ly
, 
	`dvmG‘F›ldBoŞ—n
(
obj
, 
if›ld
->
by‹Off£t
));

1484 
JT_BYTE
:

1485 
	`ex·ndBufAdd1
(
pR•ly
, 
	`dvmG‘F›ldBy‹
(
obj
, 
if›ld
->
by‹Off£t
));

1487 
JT_SHORT
:

1488 
	`ex·ndBufAdd2BE
(
pR•ly
, 
	`dvmG‘F›ldShÜt
(
obj
, 
if›ld
->
by‹Off£t
));

1490 
JT_CHAR
:

1491 
	`ex·ndBufAdd2BE
(
pR•ly
, 
	`dvmG‘F›ldCh¬
(
obj
, 
if›ld
->
by‹Off£t
));

1493 
JT_INT
:

1494 
JT_FLOAT
:

1495 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`dvmG‘F›ldIÁ
(
obj
, 
if›ld
->
by‹Off£t
));

1497 
JT_LONG
:

1498 
JT_DOUBLE
:

1499 
	`ex·ndBufAdd8BE
(
pR•ly
, 
	`dvmG‘F›ldLÚg
(
obj
, 
if›ld
->
by‹Off£t
));

1502 
	`ALOGE
("ERROR: unhªdËd f›ldy³ '%s'", 
if›ld
->
sigÇtu»
);

1503 
	`as£¹
(
çl£
);

1507 
	}
}

1512 
	$dvmDbgS‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
u8
 
v®ue
,

1513 
width
)

1515 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

1516 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1517 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1519 
f›ld
->
sigÇtu»
[0]) {

1520 
JT_BOOLEAN
:

1521 
	`as£¹
(
width
 == 1);

1522 
	`dvmS‘F›ldBoŞ—n
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
 != 0);

1524 
JT_BYTE
:

1525 
	`as£¹
(
width
 == 1);

1526 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1528 
JT_SHORT
:

1529 
JT_CHAR
:

1530 
	`as£¹
(
width
 == 2);

1531 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1533 
JT_INT
:

1534 
JT_FLOAT
:

1535 
	`as£¹
(
width
 == 4);

1536 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1538 
JT_ARRAY
:

1539 
JT_OBJECT
:

1540 
	`as£¹
(
width
 =ğ(
ObjeùId
));

1541 
	`dvmS‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
, 
	`objeùIdToObjeù
(
v®ue
));

1543 
JT_DOUBLE
:

1544 
JT_LONG
:

1545 
	`as£¹
(
width
 == 8);

1546 
	`dvmS‘F›ldLÚg
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1549 
	`ALOGE
("ERROR: unhªdËd cÏs ty³ '%s'", 
f›ld
->
sigÇtu»
);

1550 
	`as£¹
(
çl£
);

1553 
	}
}

1560 
	$dvmDbgG‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

1561 
Ex·ndBuf
* 
pR•ly
)

1563 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1564 
u1
 
g
 = 
	`basicTagFromDesütÜ
(
sf›ld
->
sigÇtu»
);

1566 ià(
g
 =ğ
JT_ARRAY
 ||ag =ğ
JT_OBJECT
) {

1567 
Objeù
* 
objV®
 = 
	`dvmG‘SticF›ldObjeù
(
sf›ld
);

1568 
g
 = 
	`gFromObjeù
(
objV®
);

1569 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1570 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`objeùToObjeùId
(
objV®
));

1571 
	`ALOGV
(" --> sf›ldId %x -->ag '%c' %p", 
f›ldId
, 
g
, 
objV®
);

1573 
JV®ue
 
v®ue
;

1575 
	`ALOGV
(" --> sf›ldId %x -->ag '%c'", 
f›ldId
, 
g
);

1576 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1578 
g
) {

1579 
JT_BOOLEAN
:

1580 
	`ex·ndBufAdd1
(
pR•ly
, 
	`dvmG‘SticF›ldBoŞ—n
(
sf›ld
));

1582 
JT_BYTE
:

1583 
	`ex·ndBufAdd1
(
pR•ly
, 
	`dvmG‘SticF›ldBy‹
(
sf›ld
));

1585 
JT_SHORT
:

1586 
	`ex·ndBufAdd2BE
(
pR•ly
, 
	`dvmG‘SticF›ldShÜt
(
sf›ld
));

1588 
JT_CHAR
:

1589 
	`ex·ndBufAdd2BE
(
pR•ly
, 
	`dvmG‘SticF›ldCh¬
(
sf›ld
));

1591 
JT_INT
:

1592 
	`ex·ndBufAdd4BE
(
pR•ly
, 
	`dvmG‘SticF›ldIÁ
(
sf›ld
));

1594 
JT_FLOAT
:

1595 
v®ue
.
f
 = 
	`dvmG‘SticF›ldFlßt
(
sf›ld
);

1596 
	`ex·ndBufAdd4BE
(
pR•ly
, 
v®ue
.
i
);

1598 
JT_LONG
:

1599 
	`ex·ndBufAdd8BE
(
pR•ly
, 
	`dvmG‘SticF›ldLÚg
(
sf›ld
));

1601 
JT_DOUBLE
:

1602 
v®ue
.
d
 = 
	`dvmG‘SticF›ldDoubË
(
sf›ld
);

1603 
	`ex·ndBufAdd8BE
(
pR•ly
, 
v®ue
.
j
);

1606 
	`ALOGE
("ERROR: unhªdËd f›ldy³ '%s'", 
sf›ld
->
sigÇtu»
);

1607 
	`as£¹
(
çl£
);

1611 
	}
}

1616 
	$dvmDbgS‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

1617 
u8
 
¿wV®ue
, 
width
)

1619 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1620 
Objeù
* 
objV®
;

1621 
JV®ue
 
v®ue
;

1623 
v®ue
.
j
 = 
¿wV®ue
;

1625 
sf›ld
->
sigÇtu»
[0]) {

1626 
JT_BOOLEAN
:

1627 
	`as£¹
(
width
 == 1);

1628 
	`dvmS‘SticF›ldBoŞ—n
(
sf›ld
, 
v®ue
.
z
);

1630 
JT_BYTE
:

1631 
	`as£¹
(
width
 == 1);

1632 
	`dvmS‘SticF›ldBy‹
(
sf›ld
, 
v®ue
.
b
);

1634 
JT_SHORT
:

1635 
	`as£¹
(
width
 == 2);

1636 
	`dvmS‘SticF›ldShÜt
(
sf›ld
, 
v®ue
.
s
);

1638 
JT_CHAR
:

1639 
	`as£¹
(
width
 == 2);

1640 
	`dvmS‘SticF›ldCh¬
(
sf›ld
, 
v®ue
.
c
);

1642 
JT_INT
:

1643 
	`as£¹
(
width
 == 4);

1644 
	`dvmS‘SticF›ldIÁ
(
sf›ld
, 
v®ue
.
i
);

1646 
JT_FLOAT
:

1647 
	`as£¹
(
width
 == 4);

1648 
	`dvmS‘SticF›ldFlßt
(
sf›ld
, 
v®ue
.
f
);

1650 
JT_ARRAY
:

1651 
JT_OBJECT
:

1652 
	`as£¹
(
width
 =ğ(
ObjeùId
));

1653 
objV®
 = 
	`objeùIdToObjeù
(
¿wV®ue
);

1654 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, 
objV®
);

1656 
JT_LONG
:

1657 
	`as£¹
(
width
 == 8);

1658 
	`dvmS‘SticF›ldLÚg
(
sf›ld
, 
v®ue
.
j
);

1660 
JT_DOUBLE
:

1661 
	`as£¹
(
width
 == 8);

1662 
	`dvmS‘SticF›ldDoubË
(
sf›ld
, 
v®ue
.
d
);

1665 
	`ALOGE
("ERROR: unhªdËd cÏs ty³ '%s'", 
sf›ld
->
sigÇtu»
);

1666 
	`as£¹
(
çl£
);

1669 
	}
}

1676 * 
	$dvmDbgSŒšgToUtf8
(
ObjeùId
 
¡rId
)

1678 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`objeùIdToObjeù
(
¡rId
);

1680  
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

1681 
	}
}

1698 
Th»ad
* 
	$th»adObjToTh»ad
(
Objeù
* 
th»adObj
)

1700 
Th»ad
* 
th»ad
;

1702 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1703 ià(
th»ad
->
th»adObj
 ==hreadObj)

1707  
th»ad
;

1708 
	}
}

1713 
boŞ
 
	$dvmDbgG‘Th»adStus
(
ObjeùId
 
th»adId
, 
u4
* 
pTh»adStus
,

1714 
u4
* 
pSu¥’dStus
)

1716 
Objeù
* 
th»adObj
;

1717 
Th»ad
* 
th»ad
;

1718 
boŞ
 
»suÉ
 = 
çl£
;

1720 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1721 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1724 
	`dvmLockTh»adLi¡
(
NULL
);

1726 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1727 ià(
th»ad
 =ğ
NULL
)

1728 
ba
;

1730 
th»ad
->
¡©us
) {

1731 
THREAD_ZOMBIE
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1732 
THREAD_RUNNING
: *
pTh»adStus
 = 
TS_RUNNING
; ;

1733 
THREAD_TIMED_WAIT
: *
pTh»adStus
 = 
TS_SLEEPING
; ;

1734 
THREAD_MONITOR
: *
pTh»adStus
 = 
TS_MONITOR
; ;

1735 
THREAD_WAIT
: *
pTh»adStus
 = 
TS_WAIT
; ;

1736 
THREAD_INITIALIZING
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1737 
THREAD_STARTING
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1738 
THREAD_NATIVE
: *
pTh»adStus
 = 
TS_RUNNING
; ;

1739 
THREAD_VMWAIT
: *
pTh»adStus
 = 
TS_WAIT
; ;

1740 
THREAD_SUSPENDED
: *
pTh»adStus
 = 
TS_RUNNING
; ;

1742 
	`as£¹
(
çl£
);

1743 *
pTh»adStus
 = 
THREAD_ZOMBIE
;

1747 ià(
	`dvmIsSu¥’ded
(
th»ad
))

1748 *
pSu¥’dStus
 = 
SUSPEND_STATUS_SUSPENDED
;

1750 *
pSu¥’dStus
 = 0;

1752 
»suÉ
 = 
Œue
;

1754 
ba
:

1755 
	`dvmUÆockTh»adLi¡
();

1756  
»suÉ
;

1757 
	}
}

1762 
u4
 
	$dvmDbgG‘Th»adSu¥’dCouÁ
(
ObjeùId
 
th»adId
)

1764 
Objeù
* 
th»adObj
;

1765 
Th»ad
* 
th»ad
;

1766 
u4
 
»suÉ
 = 0;

1768 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1769 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1772 
	`dvmLockTh»adLi¡
(
NULL
);

1774 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1775 ià(
th»ad
 =ğ
NULL
)

1776 
ba
;

1778 
»suÉ
 = 
th»ad
->
su¥’dCouÁ
;

1780 
ba
:

1781 
	`dvmUÆockTh»adLi¡
();

1782  
»suÉ
;

1783 
	}
}

1790 
boŞ
 
	$dvmDbgTh»adExi¡s
(
ObjeùId
 
th»adId
)

1792 
Objeù
* 
th»adObj
;

1793 
Th»ad
* 
th»ad
;

1794 
boŞ
 
»suÉ
;

1796 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1797 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1800 
	`dvmLockTh»adLi¡
(
NULL
);

1802 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1803 ià(
th»ad
 =ğ
NULL
)

1804 
»suÉ
 = 
çl£
;

1806 
»suÉ
 = 
Œue
;

1808 
	`dvmUÆockTh»adLi¡
();

1809  
»suÉ
;

1810 
	}
}

1817 
boŞ
 
	$dvmDbgIsSu¥’ded
(
ObjeùId
 
th»adId
)

1819 
Objeù
* 
th»adObj
;

1820 
Th»ad
* 
th»ad
;

1821 
boŞ
 
»suÉ
 = 
çl£
;

1823 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1824 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1827 
	`dvmLockTh»adLi¡
(
NULL
);

1829 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1830 ià(
th»ad
 =ğ
NULL
)

1831 
ba
;

1833 
»suÉ
 = 
	`dvmIsSu¥’ded
(
th»ad
);

1835 
ba
:

1836 
	`dvmUÆockTh»adLi¡
();

1837  
»suÉ
;

1838 
	}
}

1843 
ObjeùId
 
	$dvmDbgG‘Sy¡emTh»adGroupId
()

1845 
Objeù
* 
groupObj
 = 
	`dvmG‘Sy¡emTh»adGroup
();

1846  
	`objeùToObjeùId
(
groupObj
);

1847 
	}
}

1852 
ObjeùId
 
	$dvmDbgG‘MašTh»adGroupId
()

1854 
Objeù
* 
groupObj
 = 
	`dvmG‘MašTh»adGroup
();

1855  
	`objeùToObjeùId
(
groupObj
);

1856 
	}
}

1863 * 
	$dvmDbgG‘Th»adName
(
ObjeùId
 
th»adId
)

1865 
Objeù
* 
th»adObj
;

1866 
SŒšgObjeù
* 
ÇmeSŒ
;

1867 * 
¡r
;

1868 * 
»suÉ
;

1870 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1871 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1873 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

1874 
gDvm
.
offJavaLªgTh»ad_Çme
);

1875 
¡r
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

1876 
»suÉ
 = (*è
	`m®loc
(
	`¡¾’
(
¡r
) + 20);

1879 
	`dvmLockTh»adLi¡
(
NULL
);

1880 
Th»ad
* 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1881 ià(
th»ad
 !ğ
NULL
)

1882 
	`¥rštf
(
»suÉ
, "<%d> %s", 
th»ad
->
th»adId
, 
¡r
);

1884 
	`¥rštf
(
»suÉ
, "%s", 
¡r
);

1885 
	`dvmUÆockTh»adLi¡
();

1887 
	`ä“
(
¡r
);

1888  
»suÉ
;

1889 
	}
}

1894 
ObjeùId
 
	$dvmDbgG‘Th»adGroup
(
ObjeùId
 
th»adId
)

1896 
Objeù
* 
th»adObj
;

1897 
Objeù
* 
group
;

1899 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1900 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1902 
group
 = 
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_group
);

1903  
	`objeùToObjeùId
(
group
);

1904 
	}
}

1912 * 
	$dvmDbgG‘Th»adGroupName
(
ObjeùId
 
th»adGroupId
)

1914 
Objeù
* 
th»adGroup
;

1915 
SŒšgObjeù
* 
ÇmeSŒ
;

1917 
th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1918 
	`as£¹
(
th»adGroup
 !ğ
NULL
);

1920 
ÇmeSŒ
 = (
SŒšgObjeù
*)

1921 
	`dvmG‘F›ldObjeù
(
th»adGroup
, 
gDvm
.
offJavaLªgTh»adGroup_Çme
);

1922  
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

1923 
	}
}

1930 
ObjeùId
 
	$dvmDbgG‘Th»adGroupP¬’t
(
ObjeùId
 
th»adGroupId
)

1932 
Objeù
* 
th»adGroup
;

1933 
Objeù
* 
·»Á
;

1935 
th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1936 
	`as£¹
(
th»adGroup
 !ğ
NULL
);

1938 
·»Á
 = 
	`dvmG‘F›ldObjeù
(
th»adGroup
, 
gDvm
.
offJavaLªgTh»adGroup_·»Á
);

1939  
	`objeùToObjeùId
(
·»Á
);

1940 
	}
}

1953 
	$dvmDbgG‘Th»adGroupTh»ads
(
ObjeùId
 
th»adGroupId
,

1954 
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
)

1956 
Objeù
* 
rg‘Th»adGroup
 = 
NULL
;

1957 
Th»ad
* 
th»ad
;

1958 
couÁ
;

1960 ià(
th»adGroupId
 !ğ
THREAD_GROUP_ALL
) {

1961 
rg‘Th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1962 
	`as£¹
(
rg‘Th»adGroup
 !ğ
NULL
);

1965 
	`dvmLockTh»adLi¡
(
NULL
);

1967 
th»ad
 = 
gDvm
.
th»adLi¡
;

1968 
couÁ
 = 0;

1969 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1970 
Objeù
* 
group
;

1977 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

1983 ià(
th»ad
->
th»adObj
 =ğ
NULL
)

1986 
group
 = 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
,

1987 
gDvm
.
offJavaLªgTh»ad_group
);

1988 ià(
th»adGroupId
 =ğ
THREAD_GROUP_ALL
 || 
group
 =ğ
rg‘Th»adGroup
)

1989 
couÁ
++;

1992 *
pTh»adCouÁ
 = 
couÁ
;

1994 ià(
couÁ
 == 0) {

1995 *
µTh»adIds
 = 
NULL
;

1997 
ObjeùId
* 
±r
;

1998 
±r
 = *
µTh»adIds
 = (
ObjeùId
*è
	`m®loc
((ObjeùIdè* 
couÁ
);

2000 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2001 
Objeù
* 
group
;

2008 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2014 ià(
th»ad
->
th»adObj
 =ğ
NULL
)

2017 
group
 = 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
,

2018 
gDvm
.
offJavaLªgTh»ad_group
);

2019 ià(
th»adGroupId
 =ğ
THREAD_GROUP_ALL
 || 
group
 =ğ
rg‘Th»adGroup
)

2021 *
±r
++ = 
	`objeùToObjeùId
(
th»ad
->
th»adObj
);

2022 
couÁ
--;

2026 
	`as£¹
(
couÁ
 == 0);

2029 
	`dvmUÆockTh»adLi¡
();

2030 
	}
}

2037 
	$dvmDbgG‘AÎTh»ads
(
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
)

2039 
	`dvmDbgG‘Th»adGroupTh»ads
(
THREAD_GROUP_ALL
, 
µTh»adIds
, 
pTh»adCouÁ
);

2040 
	}
}

2048 
	$dvmDbgG‘Th»adF¿meCouÁ
(
ObjeùId
 
th»adId
)

2050 
Objeù
* 
th»adObj
;

2051 
Th»ad
* 
th»ad
;

2052 
couÁ
 = -1;

2054 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2056 
	`dvmLockTh»adLi¡
(
NULL
);

2057 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2058 ià(
th»ad
 !ğ
NULL
) {

2059 
couÁ
 = 
	`dvmCompu‹ExaùF¿meD•th
(
th»ad
->
š‹½Save
.
curF¿me
);

2061 
	`dvmUÆockTh»adLi¡
();

2063  
couÁ
;

2064 
	}
}

2069 
boŞ
 
	$dvmDbgG‘Th»adF¿me
(
ObjeùId
 
th»adId
, 
num
, 
F¿meId
* 
pF¿meId
,

2070 
JdwpLoÿtiÚ
* 
pLoc
)

2072 
Objeù
* 
th»adObj
;

2073 
Th»ad
* 
th»ad
;

2074 * 
äamePŒ
;

2075 
couÁ
;

2077 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2079 
	`dvmLockTh»adLi¡
(
NULL
);

2081 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2082 ià(
th»ad
 =ğ
NULL
)

2083 
ba
;

2085 
äamePŒ
 = 
th»ad
->
š‹½Save
.
curF¿me
;

2086 
couÁ
 = 0;

2087 
äamePŒ
 !ğ
NULL
) {

2088 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

2089 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

2091 ià(!
	`dvmIsB»akF¿me
((
u4
*)
äamePŒ
)) {

2092 ià(
couÁ
 =ğ
num
) {

2093 *
pF¿meId
 = 
	`äameToF¿meId
(
äamePŒ
);

2094 ià(
	`dvmIsIÁ”çûCÏss
(
m‘hod
->
şazz
))

2095 
pLoc
->
ty³Tag
 = 
TT_INTERFACE
;

2097 
pLoc
->
ty³Tag
 = 
TT_CLASS
;

2098 
pLoc
->
şassId
 = 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2099 
pLoc
->
m‘hodId
 = 
	`m‘hodToM‘hodId
(
m‘hod
);

2100 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
))

2101 
pLoc
->
idx
 = (
u8
)-1;

2103 
pLoc
->
idx
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

2104 
	`dvmUÆockTh»adLi¡
();

2105  
Œue
;

2108 
couÁ
++;

2111 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

2114 
ba
:

2115 
	`dvmUÆockTh»adLi¡
();

2116  
çl£
;

2117 
	}
}

2122 
ObjeùId
 
	$dvmDbgG‘Th»adS–fId
()

2124 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2125  
	`objeùToObjeùId
(
£lf
->
th»adObj
);

2126 
	}
}

2131 
	$dvmDbgSu¥’dVM
(
boŞ
 
isEv’t
)

2133 
	`dvmSu¥’dAÎTh»ads
(
isEv’t
 ? 
SUSPEND_FOR_DEBUG_EVENT
 : 
SUSPEND_FOR_DEBUG
);

2134 
	}
}

2139 
	$dvmDbgResumeVM
()

2141 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_DEBUG
);

2142 
	}
}

2147 
	$dvmDbgSu¥’dTh»ad
(
ObjeùId
 
th»adId
)

2149 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2150 
Th»ad
* 
th»ad
;

2152 
	`dvmLockTh»adLi¡
(
NULL
);

2154 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2155 ià(
th»ad
 =ğ
NULL
) {

2157 
	`ALOGW
("WARNING:h»adid=%Îx obj=%°nØm©ch", 
th»adId
, 
th»adObj
);

2159 
	`dvmSu¥’dTh»ad
(
th»ad
);

2162 
	`dvmUÆockTh»adLi¡
();

2163 
	}
}

2168 
	$dvmDbgResumeTh»ad
(
ObjeùId
 
th»adId
)

2170 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2171 
Th»ad
* 
th»ad
;

2173 
	`dvmLockTh»adLi¡
(
NULL
);

2175 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2176 ià(
th»ad
 =ğ
NULL
) {

2177 
	`ALOGW
("WARNING:h»adid=%Îx obj=%°nØm©ch", 
th»adId
, 
th»adObj
);

2179 
	`dvmResumeTh»ad
(
th»ad
);

2182 
	`dvmUÆockTh»adLi¡
();

2183 
	}
}

2188 
	$dvmDbgSu¥’dS–f
()

2190 
	`dvmSu¥’dS–f
(
Œue
);

2191 
	}
}

2196 
Objeù
* 
	$g‘ThisObjeù
(cÚ¡ 
u4
* 
äamePŒ
)

2198 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

2199 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

2200 
¬gOff£t
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

2201 
Objeù
* 
thisObj
;

2203 ià(
m‘hod
 =ğ
NULL
) {

2205 
	`as£¹
(
çl£
);

2206  
NULL
;

2209 
	`LOGVV
(" PuÎšghi objeù fÜ f¿m© %p", 
äamePŒ
);

2210 
	`LOGVV
(" Method='%s'‚ative=%d static=%dhis=%p",

2211 
m‘hod
->
Çme
, 
	`dvmIsN©iveM‘hod
(method),

2212 
	`dvmIsSticM‘hod
(
m‘hod
), (
Objeù
*è
äamePŒ
[
¬gOff£t
]);

2218 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è|| 
	`dvmIsSticM‘hod
(method))

2219 
thisObj
 = 
NULL
;

2221 
thisObj
 = (
Objeù
*è
äamePŒ
[
¬gOff£t
];

2223 ià(
thisObj
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(thisObj)) {

2224 
	`ALOGW
("Debugger: invalid 'this'…ointer %p in %s.%s;„eturning NULL",

2225 
äamePŒ
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

2226 
thisObj
 = 
NULL
;

2229  
thisObj
;

2230 
	}
}

2236 
boŞ
 
	$dvmDbgG‘ThisObjeù
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, ObjeùId* 
pThisId
)

2238 cÚ¡ 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2239 
Objeù
* 
thisObj
;

2241 
	`UNUSED_PARAMETER
(
th»adId
);

2243 
thisObj
 = 
	`g‘ThisObjeù
(
äamePŒ
);

2245 *
pThisId
 = 
	`objeùToObjeùId
(
thisObj
);

2246  
Œue
;

2247 
	}
}

2256 
	$dvmDbgG‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

2257 
u1
 
g
, u1* 
buf
, 
ex³ùedL’
)

2259 cÚ¡ 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2260 
Objeù
* 
objV®
;

2261 
u4
 
štV®
;

2262 
u8
 
lÚgV®
;

2264 
	`UNUSED_PARAMETER
(
th»adId
);

2266 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
);

2268 
g
) {

2269 
JT_BOOLEAN
:

2270 
	`as£¹
(
ex³ùedL’
 == 1);

2271 
štV®
 = 
äamePŒ
[
¦Ù
];

2272 
	`£t1
(
buf
+1, 
štV®
 != 0);

2274 
JT_BYTE
:

2275 
	`as£¹
(
ex³ùedL’
 == 1);

2276 
štV®
 = 
äamePŒ
[
¦Ù
];

2277 
	`£t1
(
buf
+1, 
štV®
);

2279 
JT_SHORT
:

2280 
JT_CHAR
:

2281 
	`as£¹
(
ex³ùedL’
 == 2);

2282 
štV®
 = 
äamePŒ
[
¦Ù
];

2283 
	`£t2BE
(
buf
+1, 
štV®
);

2285 
JT_INT
:

2286 
JT_FLOAT
:

2287 
	`as£¹
(
ex³ùedL’
 == 4);

2288 
štV®
 = 
äamePŒ
[
¦Ù
];

2289 
	`£t4BE
(
buf
+1, 
štV®
);

2291 
JT_ARRAY
:

2292 
	`as£¹
(
ex³ùedL’
 =ğ(
ObjeùId
));

2295 
objV®
 = (
Objeù
*)
äamePŒ
[
¦Ù
];

2296 ià(
objV®
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(objVal)) {

2297 
	`ALOGW
("JDWP: slot %dƒxpectedo hold‡rray, %p invalid",

2298 
¦Ù
, 
objV®
);

2299 
	`dvmAbÜt
();

2300 
objV®
 = 
NULL
;

2301 
g
 = 
JT_OBJECT
;

2303 
	`dvmS‘ObjeùId
(
buf
+1, 
	`objeùToObjeùId
(
objV®
));

2306 
JT_OBJECT
:

2307 
	`as£¹
(
ex³ùedL’
 =ğ(
ObjeùId
));

2310 
objV®
 = (
Objeù
*)
äamePŒ
[
¦Ù
];

2312 ià(
objV®
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(objVal)) {

2313 
	`ALOGW
("JDWP: slot %dƒxpectedo hold object, %p invalid",

2314 
¦Ù
, 
objV®
);

2315 
	`dvmAbÜt
();

2316 
objV®
 = 
NULL
;

2318 
g
 = 
	`gFromObjeù
(
objV®
);

2319 
	`dvmS‘ObjeùId
(
buf
+1, 
	`objeùToObjeùId
(
objV®
));

2322 
JT_DOUBLE
:

2323 
JT_LONG
:

2324 
	`as£¹
(
ex³ùedL’
 == 8);

2325 
	`memıy
(&
lÚgV®
, &
äamePŒ
[
¦Ù
], 8);

2326 
	`£t8BE
(
buf
+1, 
lÚgV®
);

2329 
	`ALOGE
("ERROR: unhªdËdag '%c'", 
g
);

2330 
	`as£¹
(
çl£
);

2335 
	`£t1
(
buf
, 
g
);

2336 
	}
}

2341 
	$dvmDbgS‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
, 
u1
 
g
,

2342 
u8
 
v®ue
, 
width
)

2344 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2346 
	`UNUSED_PARAMETER
(
th»adId
);

2348 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
);

2350 
g
) {

2351 
JT_BOOLEAN
:

2352 
	`as£¹
(
width
 == 1);

2353 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2355 
JT_BYTE
:

2356 
	`as£¹
(
width
 == 1);

2357 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2359 
JT_SHORT
:

2360 
JT_CHAR
:

2361 
	`as£¹
(
width
 == 2);

2362 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2364 
JT_INT
:

2365 
JT_FLOAT
:

2366 
	`as£¹
(
width
 == 4);

2367 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2369 
JT_STRING
:

2373 
JT_ARRAY
:

2374 
JT_OBJECT
:

2375 
	`as£¹
(
width
 =ğ(
ObjeùId
));

2376 
äamePŒ
[
¦Ù
] = (
u4
è
	`objeùIdToObjeù
(
v®ue
);

2378 
JT_DOUBLE
:

2379 
JT_LONG
:

2380 
	`as£¹
(
width
 == 8);

2381 
	`memıy
(&
äamePŒ
[
¦Ù
], &
v®ue
, 8);

2383 
JT_VOID
:

2384 
JT_CLASS_OBJECT
:

2385 
JT_THREAD
:

2386 
JT_THREAD_GROUP
:

2387 
JT_CLASS_LOADER
:

2390 
	`ALOGE
("ERROR: unhªdËdag '%c'", 
g
);

2391 
	`as£¹
(
çl£
);

2394 
	}
}

2409 
	$dvmDbgPo¡LoÿtiÚEv’t
(cÚ¡ 
M‘hod
* 
m‘hod
, 
pcOff£t
,

2410 
Objeù
* 
thisPŒ
, 
ev’tFÏgs
)

2412 
JdwpLoÿtiÚ
 
loc
;

2414 ià(
	`dvmIsIÁ”çûCÏss
(
m‘hod
->
şazz
))

2415 
loc
.
ty³Tag
 = 
TT_INTERFACE
;

2417 
loc
.
ty³Tag
 = 
TT_CLASS
;

2418 
loc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2419 
loc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
m‘hod
);

2420 
loc
.
idx
 = 
pcOff£t
;

2428 ià(
	`dvmJdwpPo¡LoÿtiÚEv’t
(
gDvm
.
jdwpS‹
, &
loc
,

2429 
	`objeùToObjeùIdNoReg
(
thisPŒ
), 
ev’tFÏgs
))

2431 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2432 
	`objeùToObjeùId
(
thisPŒ
);

2434 
	}
}

2439 
	$dvmDbgPo¡Exû±iÚ
(* 
throwFp
, 
throwR–Pc
, * 
ÿtchFp
,

2440 
ÿtchR–Pc
, 
Objeù
* 
exû±iÚ
)

2442 
JdwpLoÿtiÚ
 
throwLoc
, 
ÿtchLoc
;

2443 cÚ¡ 
M‘hod
* 
throwM‘h
;

2444 cÚ¡ 
M‘hod
* 
ÿtchM‘h
;

2446 
throwM‘h
 = 
	`SAVEAREA_FROM_FP
(
throwFp
)->
m‘hod
;

2447 ià(
	`dvmIsIÁ”çûCÏss
(
throwM‘h
->
şazz
))

2448 
throwLoc
.
ty³Tag
 = 
TT_INTERFACE
;

2450 
throwLoc
.
ty³Tag
 = 
TT_CLASS
;

2451 
throwLoc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
throwM‘h
->
şazz
);

2452 
throwLoc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
throwM‘h
);

2453 
throwLoc
.
idx
 = 
throwR–Pc
;

2455 ià(
ÿtchR–Pc
 < 0) {

2456 
	`mem£t
(&
ÿtchLoc
, 0, (catchLoc));

2458 
ÿtchM‘h
 = 
	`SAVEAREA_FROM_FP
(
ÿtchFp
)->
m‘hod
;

2459 ià(
	`dvmIsIÁ”çûCÏss
(
ÿtchM‘h
->
şazz
))

2460 
ÿtchLoc
.
ty³Tag
 = 
TT_INTERFACE
;

2462 
ÿtchLoc
.
ty³Tag
 = 
TT_CLASS
;

2463 
ÿtchLoc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
ÿtchM‘h
->
şazz
);

2464 
ÿtchLoc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
ÿtchM‘h
);

2465 
ÿtchLoc
.
idx
 = 
ÿtchR–Pc
;

2469 
Objeù
* 
thisObj
 = 
	`g‘ThisObjeù
((
u4
*)
throwFp
);

2480 
	`dvmJdwpPo¡Exû±iÚ
(
gDvm
.
jdwpS‹
, &
throwLoc
,

2481 
	`objeùToObjeùIdNoReg
(
exû±iÚ
),

2482 
	`şassObjeùToRefTy³Id
(
exû±iÚ
->
şazz
), &
ÿtchLoc
,

2483 
	`objeùToObjeùId
(
thisObj
));

2484 
	}
}

2489 
	$dvmDbgPo¡Th»adS¹
(
Th»ad
* 
th»ad
)

2491 ià(
gDvm
.
debugg”Aùive
) {

2492 
	`dvmJdwpPo¡Th»adChªge
(
gDvm
.
jdwpS‹
,

2493 
	`objeùToObjeùId
(
th»ad
->
th»adObj
), 
Œue
);

2495 ià(
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

2496 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
Œue
);

2497 
	}
}

2502 
	$dvmDbgPo¡Th»adD—th
(
Th»ad
* 
th»ad
)

2504 ià(
gDvm
.
debugg”Aùive
) {

2505 
	`dvmJdwpPo¡Th»adChªge
(
gDvm
.
jdwpS‹
,

2506 
	`objeùToObjeùId
(
th»ad
->
th»adObj
), 
çl£
);

2508 ià(
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

2509 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
çl£
);

2510 
	}
}

2515 
	$dvmDbgPo¡CÏssP»·»
(
CÏssObjeù
* 
şazz
)

2517 cÚ¡ * 
sigÇtu»
;

2518 
g
;

2520 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

2521 
g
 = 
TT_INTERFACE
;

2523 
g
 = 
TT_CLASS
;

2528 
sigÇtu»
 = 
	`jniSigÇtu»
(
şazz
);

2529 
	`dvmJdwpPo¡CÏssP»·»
(
gDvm
.
jdwpS‹
, 
g
, 
	`şassObjeùToRefTy³Id
(
şazz
),

2530 
sigÇtu»
, 
CS_VERIFIED
 | 
CS_PREPARED
);

2531 
	}
}

2538 
boŞ
 
	$dvmDbgW©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

2540 
M‘hod
* 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
pLoc
->
şassId
,…Loc->
m‘hodId
);

2541 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

2542 
	`dvmAddB»akAddr
(
m‘hod
, 
pLoc
->
idx
);

2543  
Œue
;

2544 
	}
}

2549 
	$dvmDbgUnw©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

2551 
M‘hod
* 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
pLoc
->
şassId
,…Loc->
m‘hodId
);

2552 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

2553 
	`dvmCË¬B»akAddr
(
m‘hod
, 
pLoc
->
idx
);

2554 
	}
}

2560 
boŞ
 
	$dvmDbgCÚfigu»S‹p
(
ObjeùId
 
th»adId
, 
JdwpS‹pSize
 
size
,

2561 
JdwpS‹pD•th
 
d•th
)

2563 
Objeù
* 
th»adObj
;

2564 
Th»ad
* 
th»ad
;

2565 
boŞ
 
»suÉ
 = 
çl£
;

2567 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2568 
	`as£¹
(
th»adObj
 !ğ
NULL
);

2575 
	`dvmLockTh»adLi¡
(
NULL
);

2576 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2578 ià(
th»ad
 =ğ
NULL
) {

2579 
	`ALOGE
("Thread for single-step‚ot found");

2580 
ba
;

2582 ià(!
	`dvmIsSu¥’ded
(
th»ad
)) {

2583 
	`ALOGE
("Thread for single-step‚ot suspended");

2584 
	`as£¹
(!"non-susp step");

2585 
ba
;

2588 
	`as£¹
(
	`dvmIsSu¥’ded
(
th»ad
));

2589 ià(!
	`dvmAddSšgËS‹p
(
th»ad
, 
size
, 
d•th
))

2590 
ba
;

2592 
»suÉ
 = 
Œue
;

2594 
ba
:

2595 
	`dvmUÆockTh»adLi¡
();

2596  
»suÉ
;

2597 
	}
}

2602 
	$dvmDbgUncÚfigu»S‹p
(
ObjeùId
 
th»adId
)

2604 
	`UNUSED_PARAMETER
(
th»adId
);

2607 
	`dvmCË¬SšgËS‹p
(
NULL
);

2608 
	}
}

2616 
JdwpE¼Ü
 
	$dvmDbgInvokeM‘hod
(
ObjeùId
 
th»adId
, ObjeùId 
objeùId
,

2617 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
, 
u4
 
numArgs
, 
ObjeùId
* 
¬gA¼ay
,

2618 
u4
 
İtiÚs
, 
u1
* 
pResuÉTag
, 
u8
* 
pResuÉV®ue
, 
ObjeùId
* 
pExû±Obj
)

2620 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2622 
	`dvmLockTh»adLi¡
(
NULL
);

2624 
Th»ad
* 
rg‘Th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2625 ià(
rg‘Th»ad
 =ğ
NULL
) {

2626 
	`dvmUÆockTh»adLi¡
();

2627  
ERR_INVALID_THREAD
;

2629 ià(!
rg‘Th»ad
->
švokeReq
.
»ady
) {

2630 
	`dvmUÆockTh»adLi¡
();

2631  
ERR_INVALID_THREAD
;

2648 ià(
rg‘Th»ad
->
su¥’dCouÁ
 > 1) {

2649 
	`ALOGW
("threadid=%d: suspend count onhreadid=%d is %d,oo deep "

2651 
	`dvmTh»adS–f
()->
th»adId
, 
rg‘Th»ad
->threadId,

2652 
rg‘Th»ad
->
su¥’dCouÁ
);

2653 
	`dvmUÆockTh»adLi¡
();

2654  
ERR_THREAD_SUSPENDED
;

2662 
rg‘Th»ad
->
švokeReq
.
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

2663 
rg‘Th»ad
->
švokeReq
.
th»ad
 = 
th»adObj
;

2664 
rg‘Th»ad
->
švokeReq
.
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

2665 
rg‘Th»ad
->
švokeReq
.
m‘hod
 = 
	`m‘hodIdToM‘hod
(
şassId
, 
m‘hodId
);

2666 
rg‘Th»ad
->
švokeReq
.
numArgs
 =‚umArgs;

2667 
rg‘Th»ad
->
švokeReq
.
¬gA¼ay
 =‡rgArray;

2668 
rg‘Th»ad
->
švokeReq
.
İtiÚs
 = options;

2669 
rg‘Th»ad
->
švokeReq
.
švokeN“ded
 = 
Œue
;

2676 
	`dvmUÆockTh»adLi¡
();

2684 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2685 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

2687 
	`ALOGV
(" Transferring controloƒventhread");

2688 
	`dvmLockMu‹x
(&
rg‘Th»ad
->
švokeReq
.
lock
);

2690 ià((
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) == 0) {

2691 
	`ALOGV
(" Resuming‡llhreads");

2692 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_DEBUG_EVENT
);

2694 
	`ALOGV
(" Resumingƒventhread only");

2695 
	`dvmResumeTh»ad
(
rg‘Th»ad
);

2701 
rg‘Th»ad
->
švokeReq
.
švokeN“ded
) {

2702 
	`±h»ad_cÚd_wa™
(&
rg‘Th»ad
->
švokeReq
.
cv
,

2703 &
rg‘Th»ad
->
švokeReq
.
lock
);

2705 
	`dvmUÆockMu‹x
(&
rg‘Th»ad
->
švokeReq
.
lock
);

2706 
	`ALOGV
(" Control has„eturned fromƒventhread");

2709 
	`dvmWa™FÜSu¥’d
(
rg‘Th»ad
);

2714 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

2723 ià((
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) == 0) {

2724 
	`ALOGV
(" Suspending‡llhreads");

2725 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_DEBUG_EVENT
);

2726 
	`ALOGV
(" Resumingƒventhreado balancehe count");

2727 
	`dvmResumeTh»ad
(
rg‘Th»ad
);

2733 *
pResuÉTag
 = 
rg‘Th»ad
->
švokeReq
.
»suÉTag
;

2734 ià(
	`isTagPrim™ive
(
rg‘Th»ad
->
švokeReq
.
»suÉTag
))

2735 *
pResuÉV®ue
 = 
rg‘Th»ad
->
švokeReq
.
»suÉV®ue
.
j
;

2737 
Objeù
* 
tmpObj
 = (Objeù*)
rg‘Th»ad
->
švokeReq
.
»suÉV®ue
.
l
;

2738 *
pResuÉV®ue
 = 
	`objeùToObjeùId
(
tmpObj
);

2740 *
pExû±Obj
 = 
rg‘Th»ad
->
švokeReq
.
exû±Obj
;

2741  
rg‘Th»ad
->
švokeReq
.
”r
;

2742 
	}
}

2747 
u1
 
	$g‘R‘uºTy³BasicTag
(cÚ¡ 
M‘hod
* 
m‘hod
)

2749 cÚ¡ * 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘hod
->
´ÙÙy³
);

2750  
	`basicTagFromDesütÜ
(
desütÜ
);

2751 
	}
}

2759 
	$dvmDbgExecu‹M‘hod
(
DebugInvokeReq
* 
pReq
)

2761 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2762 cÚ¡ 
M‘hod
* 
m‘h
;

2763 
Objeù
* 
ŞdExû±
;

2764 
Th»adStus
 
ŞdStus
;

2770 
ŞdExû±
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

2771 ià(
ŞdExû±
 !ğ
NULL
) {

2772 
	`dvmAddT¿ckedAÎoc
(
ŞdExû±
, 
£lf
);

2773 
	`dvmCË¬Exû±iÚ
(
£lf
);

2776 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

2782 ià((
pReq
->
İtiÚs
 & 
INVOKE_NONVIRTUAL
è!ğ0 ||…Req->
obj
 =ğ
NULL
 ||

2783 
	`dvmIsDœeùM‘hod
(
pReq
->
m‘hod
))

2785 
m‘h
 = 
pReq
->
m‘hod
;

2787 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
pReq
->
şazz
,…Req->
m‘hod
);

2789 
	`as£¹
(
m‘h
 !ğ
NULL
);

2791 
	`as£¹
((
jv®ue
è=ğ(
u8
));

2793 
	`IF_ALOGV
() {

2794 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2795 
	`ALOGV
("JDWP invoking method %p/%p %s.%s:%s",

2796 
pReq
->
m‘hod
, 
m‘h
, m‘h->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

2797 
	`ä“
(
desc
);

2800 
	`dvmC®lM‘hodA
(
£lf
, 
m‘h
, 
pReq
->
obj
, 
çl£
, &pReq->
»suÉV®ue
,

2801 (
jv®ue
*)
pReq
->
¬gA¼ay
);

2802 
pReq
->
exû±Obj
 = 
	`objeùToObjeùId
(
	`dvmG‘Exû±iÚ
(
£lf
));

2803 
pReq
->
»suÉTag
 = 
	`g‘R‘uºTy³BasicTag
(
m‘h
);

2804 ià(
pReq
->
exû±Obj
 != 0) {

2805 
Objeù
* 
exc
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

2806 
	`ALOGD
(" JDWP invocation„eturning withƒxceptObj=%p (%s)",

2807 
exc
,ƒxc->
şazz
->
desütÜ
);

2809 
	`dvmCË¬Exû±iÚ
(
£lf
);

2814 
pReq
->
»suÉV®ue
.
j
 = 0;

2815 } ià(
pReq
->
»suÉTag
 =ğ
JT_OBJECT
) {

2817 
u1
 
ÃwTag
 = 
	`gFromObjeù
((
Objeù
*)
pReq
->
»suÉV®ue
.
l
);

2818 ià(
ÃwTag
 !ğ
pReq
->
»suÉTag
) {

2819 
	`LOGVV
(" JDWP…romoted„esult from %do %d",

2820 
pReq
->
»suÉTag
, 
ÃwTag
);

2821 
pReq
->
»suÉTag
 = 
ÃwTag
;

2833 
	`objeùToObjeùId
((
Objeù
*)
pReq
->
»suÉV®ue
.
l
);

2836 ià(
ŞdExû±
 !ğ
NULL
) {

2837 
	`dvmS‘Exû±iÚ
(
£lf
, 
ŞdExû±
);

2838 
	`dvmR–—£T¿ckedAÎoc
(
ŞdExû±
, 
£lf
);

2840 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

2841 
	}
}

2844 
	sAdd»ssS‘CÚ‹xt
 {

2845 
boŞ
 
	mÏ¡Add»ssV®id
;

2846 
u4
 
	mÏ¡Add»ss
;

2847 
u4
 
	mlšeNum
;

2848 
Add»ssS‘
 *
	mpS‘
;

2852 
	$add»ssS‘Cb
 (*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

2854 
Add»ssS‘CÚ‹xt
 *
pCÚ‹xt
 = (Add»ssS‘CÚ‹xˆ*)
úxt
;

2856 ià(
lšeNum
 =ğ
pCÚ‹xt
->lineNum) {

2857 ià(!
pCÚ‹xt
->
Ï¡Add»ssV®id
) {

2859 
pCÚ‹xt
->
Ï¡Add»ss
 = 
add»ss
;

2860 
pCÚ‹xt
->
Ï¡Add»ssV®id
 = 
Œue
;

2864 } ià(
pCÚ‹xt
->
Ï¡Add»ssV®id
) {

2865 
u4
 
i
;

2867 
i
 = 
pCÚ‹xt
->
Ï¡Add»ss
; i < 
add»ss
; i++) {

2868 
	`dvmAdd»ssS‘S‘
(
pCÚ‹xt
->
pS‘
, 
i
);

2871 
pCÚ‹xt
->
Ï¡Add»ssV®id
 = 
çl£
;

2876 
	}
}

2880 cÚ¡ 
Add»ssS‘
 *
	$dvmAdd»ssS‘FÜLše
(cÚ¡ 
M‘hod
* 
m‘hod
, 
lše
)

2882 
Add»ssS‘
 *
»suÉ
;

2883 cÚ¡ 
DexFe
 *
pDexFe
 = 
m‘hod
->
şazz
->
pDvmDex
->pDexFile;

2884 
u4
 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

2885 
Add»ssS‘CÚ‹xt
 
cÚ‹xt
;

2887 
»suÉ
 = (
Add»ssS‘
*)
	`ÿÎoc
(1, (Add»ssS‘è+ (
š¢sSize
/8) + 1);

2888 
»suÉ
->
£tSize
 = 
š¢sSize
;

2890 
	`mem£t
(&
cÚ‹xt
, 0, (context));

2891 
cÚ‹xt
.
pS‘
 = 
»suÉ
;

2892 
cÚ‹xt
.
lšeNum
 = 
lše
;

2893 
cÚ‹xt
.
Ï¡Add»ssV®id
 = 
çl£
;

2895 
	`dexDecodeDebugInfo
(
pDexFe
, 
	`dvmG‘M‘hodCode
(
m‘hod
),

2896 
m‘hod
->
şazz
->
desütÜ
,

2897 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

2898 
m‘hod
->
acûssFÏgs
,

2899 
add»ssS‘Cb
, 
NULL
, &
cÚ‹xt
);

2902 ià(
cÚ‹xt
.
Ï¡Add»ssV®id
) {

2903 
u4
 
i
;

2904 
i
 = 
cÚ‹xt
.
Ï¡Add»ss
; i < 
š¢sSize
; i++) {

2905 
	`dvmAdd»ssS‘S‘
(
»suÉ
, 
i
);

2909  
»suÉ
;

2910 
	}
}

2922 
boŞ
 
	$dvmDbgDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

2923 * 
pR•lyL’
)

2925  
	`dvmDdmHªdËPack‘
(
buf
, 
d©aL’
, 
pR•lyBuf
, 
pR•lyL’
);

2926 
	}
}

2931 
	$dvmDbgDdmCÚÃùed
()

2933 
	`dvmDdmCÚÃùed
();

2934 
	}
}

2939 
	$dvmDbgDdmDiscÚÃùed
()

2941 
	`dvmDdmDiscÚÃùed
();

2942 
	}
}

2947 
	$dvmDbgDdmS’dChunk
(
ty³
, 
size_t
 
Ën
, cÚ¡ 
u1
* 
buf
)

2949 
	`as£¹
(
buf
 !ğ
NULL
);

2950 
iovec
 
vec
[1] = { {(*)
buf
, 
Ën
} };

2951 
	`dvmDbgDdmS’dChunkV
(
ty³
, 
vec
, 1);

2952 
	}
}

2958 
	$dvmDbgDdmS’dChunkV
(
ty³
, cÚ¡ 
iovec
* 
iov
, 
iovút
)

2960 ià(
gDvm
.
jdwpS‹
 =ğ
NULL
) {

2961 
	`ALOGV
("Debuggerhread‚ot‡ctive, ignoring DDM send (t=0x%08x)",

2962 
ty³
);

2966 
	`dvmJdwpDdmS’dChunkV
(
gDvm
.
jdwpS‹
, 
ty³
, 
iov
, 
iovút
);

2967 
	}
}

	@vm/Debugger.h

21 #iâdeà
DALVIK_DEBUGGER_H_


22 
	#DALVIK_DEBUGGER_H_


	)

24 
	~<±h»ad.h
>

25 
	~"CommÚ.h
"

26 
	~"Misc.h
"

27 
	~"jdwp/Jdwp.h
"

30 
	gObjeù
;

31 
	gCÏssObjeù
;

32 
	gM‘hod
;

33 
	gTh»ad
;

39 
	sAdd»ssS‘
 {

40 
u4
 
	m£tSize
;

41 
u1
 
	m£t
[1];

44 
INLINE
 
	$dvmAdd»ssS‘S‘
(
Add»ssS‘
 *
pS‘
, 
u4
 
toS‘
)

46 ià(
toS‘
 < 
pS‘
->
£tSize
) {

47 
pS‘
->
£t
[
toS‘
/8] |= 1 << (toSet % 8);

49 
	}
}

51 
INLINE
 
boŞ
 
	$dvmAdd»ssS‘G‘
(cÚ¡ 
Add»ssS‘
 *
pS‘
, 
u4
 
toG‘
)

53 ià(
toG‘
 < 
pS‘
->
£tSize
) {

54  (
pS‘
->
£t
[
toG‘
/8] & (1 << (toGet % 8))) != 0;

56  
çl£
;

58 
	}
}

63 
	sS‹pCÚŒŞ
 {

65 
JdwpS‹pSize
 
	msize
;

66 
JdwpS‹pD•th
 
	md•th
;

67 
Th»ad
* 
	mth»ad
;

70 
boŞ
 
	maùive
;

71 cÚ¡ 
M‘hod
* 
	mm‘hod
;

72 
	mlše
;

73 cÚ¡ 
Add»ssS‘
* 
	mpAdd»ssS‘
;

74 
	mäameD•th
;

80 
	sDebugInvokeReq
 {

82 
boŞ
 
	m»ady
;

85 
boŞ
 
	mšvokeN“ded
;

88 
Objeù
* 
	mobj
;

89 
Objeù
* 
	mth»ad
;

90 
CÏssObjeù
* 
	mşazz
;

91 
M‘hod
* 
	mm‘hod
;

92 
u4
 
	mnumArgs
;

93 
u8
* 
	m¬gA¼ay
;

94 
u4
 
	mİtiÚs
;

97 
JdwpE¼Ü
 
	m”r
;

98 
u1
 
	m»suÉTag
;

99 
JV®ue
 
	m»suÉV®ue
;

100 
ObjeùId
 
	mexû±Obj
;

103 
±h»ad_mu‹x_t
 
	mlock
;

104 
±h»ad_cÚd_t
 
	mcv
;

108 
boŞ
 
dvmDebugg”S¹up
();

109 
dvmDebugg”Shutdown
();

111 
dvmDbgIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

112 
dvmDbgLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

113 
dvmDbgUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

114 
dvmDbgIn™CÚd
(
±h»ad_cÚd_t
* 
pCÚd
);

115 
dvmDbgCÚdWa™
(
±h»ad_cÚd_t
* 
pCÚd
, 
±h»ad_mu‹x_t
* 
pMu‹x
);

116 
dvmDbgCÚdSigÇl
(
±h»ad_cÚd_t
* 
pCÚd
);

117 
dvmDbgCÚdBrßdÿ¡
(
±h»ad_cÚd_t
* 
pCÚd
);

122 
DebugInvokeReq
* 
dvmDbgG‘InvokeReq
();

128 
dvmDbgCÚÃùed
();

129 
dvmDbgAùive
();

130 
dvmDbgDiscÚÃùed
();

136 
boŞ
 
dvmDbgIsDebugg”CÚÃùed
();

143 
s8
 
dvmDbgLa¡Debugg”Aùiv™y
();

150 
dvmDbgTh»adRuÂšg
();

151 
dvmDbgTh»adWa™šg
();

152 
dvmDbgTh»adCÚtšušg
(
¡©us
);

157 
dvmDbgEx™
(
¡©us
);

162 cÚ¡ * 
dvmDbgG‘CÏssDesütÜ
(
RefTy³Id
 
id
);

163 
ObjeùId
 
dvmDbgG‘CÏssObjeù
(
RefTy³Id
 
id
);

164 
RefTy³Id
 
dvmDbgG‘Su³rşass
(RefTy³Id 
id
);

165 
ObjeùId
 
dvmDbgG‘CÏssLßd”
(
RefTy³Id
 
id
);

166 
u4
 
dvmDbgG‘AcûssFÏgs
(
RefTy³Id
 
id
);

167 
boŞ
 
dvmDbgIsIÁ”çû
(
RefTy³Id
 
id
);

168 
dvmDbgG‘CÏssLi¡
(
u4
* 
pNumCÏs£s
, 
RefTy³Id
** 
pCÏssRefBuf
);

169 
dvmDbgG‘VisibËCÏssLi¡
(
ObjeùId
 
şassLßd”Id
, 
u4
* 
pNumCÏs£s
,

170 
RefTy³Id
** 
pCÏssRefBuf
);

171 
dvmDbgG‘CÏssInfo
(
RefTy³Id
 
şassId
, 
u1
* 
pTy³Tag
, 
u4
* 
pStus
,

172 cÚ¡ ** 
pSigÇtu»
);

173 
boŞ
 
dvmDbgFšdLßdedCÏssBySigÇtu»
(cÚ¡ * 
şassDesütÜ
,

174 
RefTy³Id
* 
pRefTy³Id
);

175 
dvmDbgG‘ObjeùTy³
(
ObjeùId
 
objeùId
, 
u1
* 
pRefTy³Tag
,

176 
RefTy³Id
* 
pRefTy³Id
);

177 
u1
 
dvmDbgG‘CÏssObjeùTy³
(
RefTy³Id
 
»fTy³Id
);

178 cÚ¡ * 
dvmDbgG‘SigÇtu»
(
RefTy³Id
 
»fTy³Id
);

179 cÚ¡ * 
dvmDbgG‘SourûFe
(
RefTy³Id
 
»fTy³Id
);

180 cÚ¡ * 
dvmDbgG‘ObjeùTy³Name
(
ObjeùId
 
objeùId
);

181 
u1
 
dvmDbgG‘ObjeùTag
(
ObjeùId
 
objeùId
);

182 
dvmDbgG‘TagWidth
(
g
);

184 
dvmDbgG‘A¼ayL’gth
(
ObjeùId
 
¬¿yId
);

185 
u1
 
dvmDbgG‘A¼ayEËm’tTag
(
ObjeùId
 
¬¿yId
);

186 
boŞ
 
dvmDbgOuutA¼ay
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

187 
Ex·ndBuf
* 
pR•ly
);

188 
boŞ
 
dvmDbgS‘A¼ayEËm’ts
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

189 cÚ¡ 
u1
* 
buf
);

191 
ObjeùId
 
dvmDbgC»©eSŒšg
(cÚ¡ * 
¡r
);

192 
ObjeùId
 
dvmDbgC»©eObjeù
(
RefTy³Id
 
şassId
);

193 
ObjeùId
 
dvmDbgC»©eA¼ayObjeù
(
RefTy³Id
 
¬¿yTy³Id
, 
u4
 
Ëngth
);

195 
boŞ
 
dvmDbgM©chTy³
(
RefTy³Id
 
š¡CÏssId
, RefTy³Id 
şassId
);

200 cÚ¡ * 
dvmDbgG‘M‘hodName
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
);

201 
dvmDbgOuutAÎF›lds
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

202 
Ex·ndBuf
* 
pR•ly
);

203 
dvmDbgOuutAÎM‘hods
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

204 
Ex·ndBuf
* 
pR•ly
);

205 
dvmDbgOuutAÎIÁ”çûs
(
RefTy³Id
 
»fTy³Id
, 
Ex·ndBuf
* 
pR•ly
);

206 
dvmDbgOuutLšeTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

207 
Ex·ndBuf
* 
pR•ly
);

208 
dvmDbgOuutV¬ŸbËTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
,

209 
boŞ
 
w™hG’”ic
, 
Ex·ndBuf
* 
pR•ly
);

211 
u1
 
dvmDbgG‘F›ldBasicTag
(
ObjeùId
 
objId
, 
F›ldId
 
f›ldId
);

212 
u1
 
dvmDbgG‘SticF›ldBasicTag
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
);

213 
dvmDbgG‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
Ex·ndBuf
* 
pR•ly
);

214 
dvmDbgS‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
u8
 
v®ue
,

215 
width
);

216 
dvmDbgG‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

217 
Ex·ndBuf
* 
pR•ly
);

218 
dvmDbgS‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

219 
u8
 
¿wV®ue
, 
width
);

221 * 
dvmDbgSŒšgToUtf8
(
ObjeùId
 
¡rId
);

226 * 
dvmDbgG‘Th»adName
(
ObjeùId
 
th»adId
);

227 
ObjeùId
 
dvmDbgG‘Th»adGroup
(ObjeùId 
th»adId
);

228 * 
dvmDbgG‘Th»adGroupName
(
ObjeùId
 
th»adGroupId
);

229 
ObjeùId
 
dvmDbgG‘Th»adGroupP¬’t
(ObjeùId 
th»adGroupId
);

230 
ObjeùId
 
dvmDbgG‘Sy¡emTh»adGroupId
();

231 
ObjeùId
 
dvmDbgG‘MašTh»adGroupId
();

233 
boŞ
 
dvmDbgG‘Th»adStus
(
ObjeùId
 
th»adId
, 
u4
* 
th»adStus
,

234 
u4
* 
su¥’dStus
);

235 
u4
 
dvmDbgG‘Th»adSu¥’dCouÁ
(
ObjeùId
 
th»adId
);

236 
boŞ
 
dvmDbgTh»adExi¡s
(
ObjeùId
 
th»adId
);

237 
boŞ
 
dvmDbgIsSu¥’ded
(
ObjeùId
 
th»adId
);

239 
dvmDbgG‘Th»adGroupTh»ads
(
ObjeùId
 
th»adGroupId
,

240 
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
);

241 
dvmDbgG‘AÎTh»ads
(
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
);

242 
dvmDbgG‘Th»adF¿meCouÁ
(
ObjeùId
 
th»adId
);

243 
boŞ
 
dvmDbgG‘Th»adF¿me
(
ObjeùId
 
th»adId
, 
num
, 
F¿meId
* 
pF¿meId
,

244 
JdwpLoÿtiÚ
* 
pLoc
);

246 
ObjeùId
 
dvmDbgG‘Th»adS–fId
();

247 
dvmDbgSu¥’dVM
(
boŞ
 
isEv’t
);

248 
dvmDbgResumeVM
();

249 
dvmDbgSu¥’dTh»ad
(
ObjeùId
 
th»adId
);

250 
dvmDbgResumeTh»ad
(
ObjeùId
 
th»adId
);

251 
dvmDbgSu¥’dS–f
();

253 
boŞ
 
dvmDbgG‘ThisObjeù
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, ObjeùId* 
pThisId
);

254 
dvmDbgG‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

255 
u1
 
g
, u1* 
buf
, 
ex³ùedL’
);

256 
dvmDbgS‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

257 
u1
 
g
, 
u8
 
v®ue
, 
width
);

263 
dvmDbgPo¡LoÿtiÚEv’t
(cÚ¡ 
M‘hod
* 
m‘hod
, 
pcOff£t
,

264 
Objeù
* 
thisPŒ
, 
ev’tFÏgs
);

265 
dvmDbgPo¡Exû±iÚ
(* 
throwFp
, 
throwR–Pc
, * 
ÿtchFp
,

266 
ÿtchR–Pc
, 
Objeù
* 
exû±iÚ
);

267 
dvmDbgPo¡Th»adS¹
(
Th»ad
* 
th»ad
);

268 
dvmDbgPo¡Th»adD—th
(
Th»ad
* 
th»ad
);

269 
dvmDbgPo¡CÏssP»·»
(
CÏssObjeù
* 
şazz
);

273 
	mDBG_BREAKPOINT
 = 0x01,

274 
	mDBG_SINGLE_STEP
 = 0x02,

275 
	mDBG_METHOD_ENTRY
 = 0x04,

276 
	mDBG_METHOD_EXIT
 = 0x08,

279 
boŞ
 
dvmDbgW©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

280 
dvmDbgUnw©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

281 
boŞ
 
dvmDbgCÚfigu»S‹p
(
ObjeùId
 
th»adId
, 
JdwpS‹pSize
 
size
,

282 
JdwpS‹pD•th
 
d•th
);

283 
dvmDbgUncÚfigu»S‹p
(
ObjeùId
 
th»adId
);

285 
JdwpE¼Ü
 
dvmDbgInvokeM‘hod
(
ObjeùId
 
th»adId
, ObjeùId 
objeùId
,

286 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
, 
u4
 
numArgs
, 
u8
* 
¬gA¼ay
,

287 
u4
 
İtiÚs
, 
u1
* 
pResuÉTag
, 
u8
* 
pResuÉV®ue
, 
ObjeùId
* 
pExû±Obj
);

288 
dvmDbgExecu‹M‘hod
(
DebugInvokeReq
* 
pReq
);

291 cÚ¡ 
Add»ssS‘
 *
dvmAdd»ssS‘FÜLše
(cÚ¡ 
M‘hod
* 
m‘hod
, 
lše
);

294 
dvmDbgRegi¡”ObjeùId
(
ObjeùId
 
id
);

299 
boŞ
 
dvmDbgDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

300 * 
pR•lyL’
);

301 
dvmDbgDdmCÚÃùed
();

302 
dvmDbgDdmDiscÚÃùed
();

303 
dvmDbgDdmS’dChunk
(
ty³
, 
size_t
 
Ën
, cÚ¡ 
u1
* 
buf
);

304 
dvmDbgDdmS’dChunkV
(
ty³
, cÚ¡ 
iovec
* 
iov
, 
iovút
);

306 
	#CHUNK_TYPE
(
_Çme
) \

307 ((
_Çme
)[0] << 24 | (_Çme)[1] << 16 | (_Çme)[2] << 8 | (_Çme)[3])

	)

	@vm/DvmDex.cpp

20 
	~"D®vik.h
"

21 
	~<sys/mmª.h
>

41 
DvmDex
* 
	$®loÿ‹AuxSŒuùu»s
(
DexFe
* 
pDexFe
)

43 
DvmDex
* 
pDvmDex
;

44 cÚ¡ 
DexH—d”
* 
pH—d”
;

45 
u4
 
¡ršgSize
, 
şassSize
, 
m‘hodSize
, 
f›ldSize
;

47 
pH—d”
 = 
pDexFe
->pHeader;

49 
¡ršgSize
 = 
pH—d”
->
¡ršgIdsSize
 * (
SŒšgObjeù
*);

50 
şassSize
 = 
pH—d”
->
ty³IdsSize
 * (
CÏssObjeù
*);

51 
m‘hodSize
 = 
pH—d”
->
m‘hodIdsSize
 * (
M‘hod
*);

52 
f›ldSize
 = 
pH—d”
->
f›ldIdsSize
 * (
F›ld
*);

54 
u4
 
tÙ®Size
 = (
DvmDex
) +

55 
¡ršgSize
 + 
şassSize
 + 
m‘hodSize
 + 
f›ldSize
;

57 
u1
 *
blob
 = (u1 *)
	`dvmAÎocRegiÚ
(
tÙ®Size
,

58 
PROT_READ
 | 
PROT_WRITE
, "dalvik-aux-structure");

59 ià((*)
blob
 =ğ
MAP_FAILED
)

60  
NULL
;

62 
pDvmDex
 = (
DvmDex
*)
blob
;

63 
blob
 +ğ(
DvmDex
);

65 
pDvmDex
->
pDexFe
 =…DexFile;

66 
pDvmDex
->
pH—d”
 =…Header;

68 
pDvmDex
->
pResSŒšgs
 = (
SŒšgObjeù
**)
blob
;

69 
blob
 +ğ
¡ršgSize
;

70 
pDvmDex
->
pResCÏs£s
 = (
CÏssObjeù
**)
blob
;

71 
blob
 +ğ
şassSize
;

72 
pDvmDex
->
pResM‘hods
 = (
M‘hod
**)
blob
;

73 
blob
 +ğ
m‘hodSize
;

74 
pDvmDex
->
pResF›lds
 = (
F›ld
**)
blob
;

76 
	`ALOGV
("+++ DEX %p:‡llocateAux (%d+%d+%d+%d)*4 = %d bytes",

77 
pDvmDex
, 
¡ršgSizei
/4, 
şassSize
/4, 
m‘hodSize
/4, 
f›ldSize
/4,

78 
¡ršgSize
 + 
şassSize
 + 
m‘hodSize
 + 
f›ldSize
);

80 
pDvmDex
->
pIÁ”çûCache
 = 
	`dvmAÎocAtomicCache
(
DEX_INTERFACE_CACHE_SIZE
);

82  
pDvmDex
;

83 
	}
}

91 
	$dvmDexFeO³nFromFd
(
fd
, 
DvmDex
** 
µDvmDex
)

93 
DvmDex
* 
pDvmDex
;

94 
DexFe
* 
pDexFe
;

95 
MemM­pšg
 
memM­
;

96 
·r£FÏgs
 = 
kDexP¬£DeçuÉ
;

97 
»suÉ
 = -1;

99 ià(
gDvm
.
v”ifyDexChecksum
)

100 
·r£FÏgs
 |ğ
kDexP¬£V”ifyChecksum
;

102 ià(
	`l£ek
(
fd
, 0, 
SEEK_SET
) < 0) {

103 
	`ALOGE
("lseek„ewind failed");

104 
ba
;

107 ià(
	`sysM­FeInShmemWr™abËR—dOÆy
(
fd
, &
memM­
) != 0) {

108 
	`ALOGE
("Unableo map file");

109 
ba
;

112 
pDexFe
 = 
	`dexFeP¬£
((
u1
*)
memM­
.
addr
, memM­.
Ëngth
, 
·r£FÏgs
);

113 ià(
pDexFe
 =ğ
NULL
) {

114 
	`ALOGE
("DEX…arse failed");

115 
	`sysR–—£Shmem
(&
memM­
);

116 
ba
;

119 
pDvmDex
 = 
	`®loÿ‹AuxSŒuùu»s
(
pDexFe
);

120 ià(
pDvmDex
 =ğ
NULL
) {

121 
	`dexFeF»e
(
pDexFe
);

122 
	`sysR–—£Shmem
(&
memM­
);

123 
ba
;

127 
	`sysCİyM­
(&
pDvmDex
->
memM­
, &memMap);

128 
pDvmDex
->
isM­³dR—dOÆy
 = 
Œue
;

129 *
µDvmDex
 = 
pDvmDex
;

130 
»suÉ
 = 0;

132 
ba
:

133  
»suÉ
;

134 
	}
}

144 
	$dvmDexFeO³nP¬tŸl
(cÚ¡ * 
addr
, 
Ën
, 
DvmDex
** 
µDvmDex
)

146 
DvmDex
* 
pDvmDex
;

147 
DexFe
* 
pDexFe
;

148 
·r£FÏgs
 = 
kDexP¬£DeçuÉ
;

149 
»suÉ
 = -1;

156 
pDexFe
 = 
	`dexFeP¬£
((
u1
*)
addr
, 
Ën
, 
·r£FÏgs
);

157 ià(
pDexFe
 =ğ
NULL
) {

158 
	`ALOGE
("DEX…arse failed");

159 
ba
;

161 
pDvmDex
 = 
	`®loÿ‹AuxSŒuùu»s
(
pDexFe
);

162 ià(
pDvmDex
 =ğ
NULL
) {

163 
	`dexFeF»e
(
pDexFe
);

164 
ba
;

167 
pDvmDex
->
isM­³dR—dOÆy
 = 
çl£
;

168 *
µDvmDex
 = 
pDvmDex
;

169 
»suÉ
 = 0;

171 
ba
:

172  
»suÉ
;

173 
	}
}

180 
	$dvmDexFeF»e
(
DvmDex
* 
pDvmDex
)

182 
u4
 
tÙ®Size
;

184 ià(
pDvmDex
 =ğ
NULL
)

187 
tÙ®Size
 = 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
 * (
SŒšgObjeù
*);

188 
tÙ®Size
 +ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
 * (
CÏssObjeù
*);

189 
tÙ®Size
 +ğ
pDvmDex
->
pH—d”
->
m‘hodIdsSize
 * (
M‘hod
*);

190 
tÙ®Size
 +ğ
pDvmDex
->
pH—d”
->
f›ldIdsSize
 * (
F›ld
*);

191 
tÙ®Size
 +ğ(
DvmDex
);

193 
	`dexFeF»e
(
pDvmDex
->
pDexFe
);

195 
	`ALOGV
("+++ DEX %p: f»ešg‡ux sŒuùs", 
pDvmDex
);

196 
	`dvmF»eAtomicCache
(
pDvmDex
->
pIÁ”çûCache
);

197 
	`sysR–—£Shmem
(&
pDvmDex
->
memM­
);

198 
	`munm­
(
pDvmDex
, 
tÙ®Size
);

199 
	}
}

223 
boŞ
 
	$dvmDexChªgeDex1
(
DvmDex
* 
pDvmDex
, 
u1
* 
addr
, u1 
ÃwV®
)

225 ià(*
addr
 =ğ
ÃwV®
) {

226 
	`ALOGV
("+++ by‹‡ˆ%°i ®»ady 0x%02x", 
addr
, 
ÃwV®
);

227  
Œue
;

234 
	`dvmLockMu‹x
(&
pDvmDex
->
modLock
);

236 
	`ALOGV
("+++ chªgby‹‡ˆ%°äom 0x%02xØ0x%02x", 
addr
, *addr, 
ÃwV®
);

237 ià(
	`sysChªgeM­Acûss
(
addr
, 1, 
Œue
, &
pDvmDex
->
memM­
) != 0) {

238 
	`ALOGD
("NOTE: DEX…age‡ccess change (->RW) failed");

242 *
addr
 = 
ÃwV®
;

244 ià(
	`sysChªgeM­Acûss
(
addr
, 1, 
çl£
, &
pDvmDex
->
memM­
) != 0) {

245 
	`ALOGD
("NOTE: DEX…age‡ccess change (->RO) failed");

249 
	`dvmUÆockMu‹x
(&
pDvmDex
->
modLock
);

251  
Œue
;

252 
	}
}

260 
boŞ
 
	$dvmDexChªgeDex2
(
DvmDex
* 
pDvmDex
, 
u2
* 
addr
, u2 
ÃwV®
)

262 ià(*
addr
 =ğ
ÃwV®
) {

263 
	`ALOGV
("+++ v®u© %°i ®»ady 0x%04x", 
addr
, 
ÃwV®
);

264  
Œue
;

271 
	`dvmLockMu‹x
(&
pDvmDex
->
modLock
);

273 
	`ALOGV
("+++ chªg2by‹‡ˆ%°äom 0x%04xØ0x%04x", 
addr
, *addr, 
ÃwV®
);

274 ià(
	`sysChªgeM­Acûss
(
addr
, 2, 
Œue
, &
pDvmDex
->
memM­
) != 0) {

275 
	`ALOGD
("NOTE: DEX…age‡ccess change (->RW) failed");

279 *
addr
 = 
ÃwV®
;

281 ià(
	`sysChªgeM­Acûss
(
addr
, 2, 
çl£
, &
pDvmDex
->
memM­
) != 0) {

282 
	`ALOGD
("NOTE: DEX…age‡ccess change (->RO) failed");

286 
	`dvmUÆockMu‹x
(&
pDvmDex
->
modLock
);

288  
Œue
;

289 
	}
}

	@vm/DvmDex.h

21 #iâdeà
DALVIK_DVMDEX_H_


22 
	#DALVIK_DVMDEX_H_


	)

24 
	~"libdex/DexFe.h
"

27 
	gCÏssObjeù
;

28 
	gHashTabË
;

29 
	gIn¡F›ld
;

30 
	gM‘hod
;

31 
	gSŒšgObjeù
;

37 
	sDvmDex
 {

39 
DexFe
* 
	mpDexFe
;

42 cÚ¡ 
DexH—d”
* 
	mpH—d”
;

45 
SŒšgObjeù
** 
	mpResSŒšgs
;

48 
CÏssObjeù
** 
	mpResCÏs£s
;

51 
M‘hod
** 
	mpResM‘hods
;

55 
F›ld
** 
	mpResF›lds
;

58 
AtomicCache
* 
	mpIÁ”çûCache
;

61 
boŞ
 
	misM­³dR—dOÆy
;

62 
MemM­pšg
 
	mmemM­
;

65 
±h»ad_mu‹x_t
 
	mmodLock
;

76 
dvmDexFeO³nFromFd
(
fd
, 
DvmDex
** 
µDvmDex
);

81 
dvmDexFeO³nP¬tŸl
(cÚ¡ * 
addr
, 
Ën
, 
DvmDex
** 
µDvmDex
);

86 
dvmDexFeF»e
(
DvmDex
* 
pDvmDex
);

100 
boŞ
 
dvmDexChªgeDex1
(
DvmDex
* 
pDvmDex
, 
u1
* 
addr
, u1 
ÃwV®
);

101 
boŞ
 
dvmDexChªgeDex2
(
DvmDex
* 
pDvmDex
, 
u2
* 
addr
, u2 
ÃwV®
);

107 
INLINE
 
SŒšgObjeù
* 
	$dvmDexG‘ResŞvedSŒšg
(cÚ¡ 
DvmDex
* 
pDvmDex
,

108 
u4
 
¡ršgIdx
)

110 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

111  
pDvmDex
->
pResSŒšgs
[
¡ršgIdx
];

112 
	}
}

113 
INLINE
 
CÏssObjeù
* 
	$dvmDexG‘ResŞvedCÏss
(cÚ¡ 
DvmDex
* 
pDvmDex
,

114 
u4
 
şassIdx
)

116 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

117  
pDvmDex
->
pResCÏs£s
[
şassIdx
];

118 
	}
}

119 
INLINE
 
M‘hod
* 
	$dvmDexG‘ResŞvedM‘hod
(cÚ¡ 
DvmDex
* 
pDvmDex
,

120 
u4
 
m‘hodIdx
)

122 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

123  
pDvmDex
->
pResM‘hods
[
m‘hodIdx
];

124 
	}
}

125 
INLINE
 
F›ld
* 
	$dvmDexG‘ResŞvedF›ld
(cÚ¡ 
DvmDex
* 
pDvmDex
,

126 
u4
 
f›ldIdx
)

128 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

129  
pDvmDex
->
pResF›lds
[
f›ldIdx
];

130 
	}
}

136 
INLINE
 
	$dvmDexS‘ResŞvedSŒšg
(
DvmDex
* 
pDvmDex
, 
u4
 
¡ršgIdx
,

137 
SŒšgObjeù
* 
¡r
)

139 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

140 
pDvmDex
->
pResSŒšgs
[
¡ršgIdx
] = 
¡r
;

141 
	}
}

142 
INLINE
 
	$dvmDexS‘ResŞvedCÏss
(
DvmDex
* 
pDvmDex
, 
u4
 
şassIdx
,

143 
CÏssObjeù
* 
şazz
)

145 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

146 
pDvmDex
->
pResCÏs£s
[
şassIdx
] = 
şazz
;

147 
	}
}

148 
INLINE
 
	$dvmDexS‘ResŞvedM‘hod
(
DvmDex
* 
pDvmDex
, 
u4
 
m‘hodIdx
,

149 
M‘hod
* 
m‘hod
)

151 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

152 
pDvmDex
->
pResM‘hods
[
m‘hodIdx
] = 
m‘hod
;

153 
	}
}

154 
INLINE
 
	$dvmDexS‘ResŞvedF›ld
(
DvmDex
* 
pDvmDex
, 
u4
 
f›ldIdx
,

155 
F›ld
* 
f›ld
)

157 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

158 
pDvmDex
->
pResF›lds
[
f›ldIdx
] = 
f›ld
;

159 
	}
}

	@vm/Exception.cpp

19 
	~"D®vik.h
"

20 
	~"libdex/DexC©ch.h
"

22 
	~<¡dlib.h
>

99 
boŞ
 
š™Exû±iÚ
(
Objeù
* 
exû±iÚ
, cÚ¡ * 
msg
, Objeù* 
ÿu£
,

100 
Th»ad
* 
£lf
);

102 
	$dvmThrowExû±iÚFmtV
(
CÏssObjeù
* 
exû±iÚCÏss
,

103 cÚ¡ * 
fmt
, 
va_li¡
 
¬gs
)

105 
msgBuf
[512];

107 
	`v¢´štf
(
msgBuf
, (msgBuf), 
fmt
, 
¬gs
);

108 
	`dvmThrowChašedExû±iÚ
(
exû±iÚCÏss
, 
msgBuf
, 
NULL
);

109 
	}
}

111 
	$dvmThrowChašedExû±iÚ
(
CÏssObjeù
* 
exûpCÏss
, cÚ¡ * 
msg
,

112 
Objeù
* 
ÿu£
)

114 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

115 
Objeù
* 
exû±iÚ
;

117 ià(
exûpCÏss
 =ğ
NULL
) {

123 
	`ALOGE
("F©®ƒ¼Ü: %s", 
msg
);

124 
	`dvmAbÜt
();

128 ià(!
	`dvmIsCÏssIn™Ÿlized
(
exûpCÏss
è&& !
	`dvmIn™CÏss
(excepClass)) {

129 
	`ALOGE
("ERROR: unableo initializeƒxception class '%s'",

130 
exûpCÏss
->
desütÜ
);

131 ià(
	`¡rcmp
(
exûpCÏss
->
desütÜ
, "Ljava/lang/InternalError;") == 0)

132 
	`dvmAbÜt
();

133 
	`dvmThrowChašedExû±iÚ
(
gDvm
.
exIÁ”ÇlE¼Ü
,

134 "çedØš™ origš®ƒxû±iÚ cÏss", 
ÿu£
);

138 
exû±iÚ
 = 
	`dvmAÎocObjeù
(
exûpCÏss
, 
ALLOC_DEFAULT
);

139 ià(
exû±iÚ
 =ğ
NULL
) {

148 ià(
	`dvmCheckExû±iÚ
(
£lf
))

149 
ba
;

150 
	`ALOGE
("FATAL: unableo‡llocateƒxception '%s' '%s'",

151 
exûpCÏss
->
desütÜ
, 
msg
 !ğ
NULL
 ? msg : "(no msg)");

152 
	`dvmAbÜt
();

158 ià(
gDvm
.
İtimizšg
) {

160 
	`ALOGV
("Skipping init ofƒxception %s '%s'",

161 
exûpCÏss
->
desütÜ
, 
msg
);

163 
	`as£¹
(
exûpCÏss
 =ğ
exû±iÚ
->
şazz
);

164 ià(!
	`š™Exû±iÚ
(
exû±iÚ
, 
msg
, 
ÿu£
, 
£lf
)) {

170 ià(!
	`dvmCheckExû±iÚ
(
£lf
)) {

175 
£lf
->
exû±iÚ
 = 
gDvm
.
š‹º®E¼ÜObj
;

177 
ba
;

181 
£lf
->
exû±iÚ
 =ƒxception;

183 
ba
:

184 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

185 
	}
}

187 
	$dvmThrowChašedExû±iÚW™hCÏssMes§ge
(

188 
CÏssObjeù
* 
exû±iÚCÏss
, cÚ¡ * 
mes§geDesütÜ
,

189 
Objeù
* 
ÿu£
)

191 * 
mes§ge
 = 
	`dvmDesütÜToName
(
mes§geDesütÜ
);

193 
	`dvmThrowChašedExû±iÚ
(
exû±iÚCÏss
, 
mes§ge
, 
ÿu£
);

194 
	`ä“
(
mes§ge
);

195 
	}
}

201 
M‘hod
* 
	$fšdExû±iÚIn™M‘hod
(
CÏssObjeù
* 
exûpCÏss
,

202 
boŞ
 
hasMes§ge
, boŞ 
hasCau£
)

204 ià(
hasMes§ge
) {

205 
M‘hod
* 
»suÉ
;

207 ià(
hasCau£
) {

208 
»suÉ
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(

209 
exûpCÏss
, "<init>",

212 
»suÉ
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(

213 
exûpCÏss
, "<init>", "(Ljava/lang/String;)V");

216 ià(
»suÉ
 !ğ
NULL
) {

217  
»suÉ
;

220 ià(
hasCau£
) {

221  
	`dvmFšdDœeùM‘hodByDesütÜ
(

222 
exûpCÏss
, "<init>",

225  
	`dvmFšdDœeùM‘hodByDesütÜ
(

226 
exûpCÏss
, "<init>", "(Ljava/lang/Object;)V");

228 } ià(
hasCau£
) {

229  
	`dvmFšdDœeùM‘hodByDesütÜ
(

230 
exûpCÏss
, "<init>", "(Ljava/lang/Throwable;)V");

232  
	`dvmFšdDœeùM‘hodByDesütÜ
(
exûpCÏss
, "<init>", "()V");

234 
	}
}

247 
boŞ
 
	$š™Exû±iÚ
(
Objeù
* 
exû±iÚ
, cÚ¡ * 
msg
, Objeù* 
ÿu£
,

248 
Th»ad
* 
£lf
)

251 
kIn™Unknown
,

252 
kIn™Nßrg
,

253 
kIn™Msg
,

254 
kIn™MsgThrow
,

255 
kIn™Throw


256 } 
š™Kšd
 = 
kIn™Unknown
;

257 
M‘hod
* 
š™M‘hod
 = 
NULL
;

258 
CÏssObjeù
* 
exûpCÏss
 = 
exû±iÚ
->
şazz
;

259 
SŒšgObjeù
* 
msgSŒ
 = 
NULL
;

260 
boŞ
 
»suÉ
 = 
çl£
;

261 
boŞ
 
ÃedIn™Cau£
 = 
çl£
;

263 
	`as£¹
(
£lf
 !ğ
NULL
);

264 
	`as£¹
(
£lf
->
exû±iÚ
 =ğ
NULL
);

267 ià(
msg
 =ğ
NULL
)

268 
msgSŒ
 = 
NULL
;

270 
msgSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
msg
);

271 ià(
msgSŒ
 =ğ
NULL
) {

272 
	`ALOGW
("Could‚ot‡llocate message string \"%s\" while "

274 
msg
, 
exûpCÏss
->
desütÜ
);

275 
ba
;

279 ià(
ÿu£
 !ğ
NULL
) {

280 ià(!
	`dvmIn¡ªûof
(
ÿu£
->
şazz
, 
gDvm
.
exThrowabË
)) {

281 
	`ALOGE
("Triedo initƒxception with cause '%s'",

282 
ÿu£
->
şazz
->
desütÜ
);

283 
	`dvmAbÜt
();

324 ià(
ÿu£
 =ğ
NULL
) {

325 ià(
msgSŒ
 =ğ
NULL
) {

326 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, false);

327 
š™Kšd
 = 
kIn™Nßrg
;

329 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
, 
çl£
);

330 ià(
š™M‘hod
 !ğ
NULL
) {

331 
š™Kšd
 = 
kIn™Msg
;

334 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
,rue);

335 ià(
š™M‘hod
 !ğ
NULL
) {

336 
š™Kšd
 = 
kIn™MsgThrow
;

341 ià(
msgSŒ
 =ğ
NULL
) {

342 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, 
Œue
);

343 ià(
š™M‘hod
 !ğ
NULL
) {

344 
š™Kšd
 = 
kIn™Throw
;

346 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, false);

347 
š™Kšd
 = 
kIn™Nßrg
;

348 
ÃedIn™Cau£
 = 
Œue
;

351 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
,rue);

352 ià(
š™M‘hod
 !ğ
NULL
) {

353 
š™Kšd
 = 
kIn™MsgThrow
;

355 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
, 
çl£
);

356 
š™Kšd
 = 
kIn™Msg
;

357 
ÃedIn™Cau£
 = 
Œue
;

362 ià(
š™M‘hod
 =ğ
NULL
) {

369 
	`ALOGW
("WARNING:ƒxception class '%s' missing constructor "

371 
exûpCÏss
->
desütÜ
, 
msg
, 
š™Kšd
);

372 
	`as£¹
(
	`¡rcmp
(
exûpCÏss
->
desütÜ
,

374 
	`dvmThrowChašedExû±iÚ
(
gDvm
.
exRuÁimeExû±iÚ
,

375 "»-throw oÀexû±iÚ cÏs missšg cÚ¡ruùÜ", 
NULL
);

376 
ba
;

382 
JV®ue
 
unu£d
;

383 
š™Kšd
) {

384 
kIn™Nßrg
:

385 
	`LOGVV
("+++ƒxønßrg (ic=%d)", 
ÃedIn™Cau£
);

386 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
);

388 
kIn™Msg
:

389 
	`LOGVV
("+++ƒxømsg (ic=%d)", 
ÃedIn™Cau£
);

390 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
msgSŒ
);

392 
kIn™Throw
:

393 
	`LOGVV
("+++ƒxchrow");

394 
	`as£¹
(!
ÃedIn™Cau£
);

395 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
ÿu£
);

397 
kIn™MsgThrow
:

398 
	`LOGVV
("+++ƒxc msg+throw");

399 
	`as£¹
(!
ÃedIn™Cau£
);

400 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
msgSŒ
, 
ÿu£
);

403 
	`as£¹
(
çl£
);

404 
ba
;

411 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

412 
	`ALOGW
("Exceptionhrown (%s) whilehrowing internalƒxception (%s)",

413 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
,ƒxception->clazz->descriptor);

414 
ba
;

422 ià(
ÃedIn™Cau£
) {

423 
M‘hod
* 
š™Cau£
;

424 
š™Cau£
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
exûpCÏss
, "initCause",

426 ià(
š™Cau£
 !ğ
NULL
) {

427 
	`dvmC®lM‘hod
(
£lf
, 
š™Cau£
, 
exû±iÚ
, &
unu£d
, 
ÿu£
);

428 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

432 
	`ALOGW
("Exceptionhrown (%s) during initCause() "

434 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
,

435 
exû±iÚ
->
şazz
->
desütÜ
);

436 
ba
;

439 
	`ALOGW
("WARNING: couldn't find initCause in '%s'",

440 
exûpCÏss
->
desütÜ
);

445 
»suÉ
 = 
Œue
;

447 
ba
:

448 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

449  
»suÉ
;

450 
	}
}

460 
	$dvmCË¬O±Exû±iÚ
(
Th»ad
* 
£lf
)

462 
£lf
->
exû±iÚ
 = 
NULL
;

463 
	}
}

469 
boŞ
 
	$dvmIsCheckedExû±iÚ
(cÚ¡ 
Objeù
* 
exû±iÚ
)

471 ià(
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
exE¼Ü
) ||

472 
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
exRuÁimeExû±iÚ
))

474  
çl£
;

476  
Œue
;

478 
	}
}

488 
	$dvmW¿pExû±iÚ
(cÚ¡ * 
ÃwExûpSŒ
)

490 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

491 
Objeù
* 
ÜigExûp
;

492 
CÏssObjeù
* 
™eCÏss
;

494 
ÜigExûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

495 
	`dvmAddT¿ckedAÎoc
(
ÜigExûp
, 
£lf
);

497 
	`dvmCË¬Exû±iÚ
(
£lf
);

498 
™eCÏss
 = 
	`dvmFšdSy¡emCÏss
(
ÃwExûpSŒ
);

499 ià(
™eCÏss
 !ğ
NULL
) {

500 
Objeù
* 
™eExûp
;

501 
M‘hod
* 
š™M‘hod
;

503 
™eExûp
 = 
	`dvmAÎocObjeù
(
™eCÏss
, 
ALLOC_DEFAULT
);

504 ià(
™eExûp
 !ğ
NULL
) {

505 
š™M‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
™eCÏss
, "<init>",

507 ià(
š™M‘hod
 !ğ
NULL
) {

508 
JV®ue
 
unu£d
;

509 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
™eExûp
, &
unu£d
,

510 
ÜigExûp
);

513 ià(!
	`dvmCheckExû±iÚ
(
£lf
))

514 
	`dvmS‘Exû±iÚ
(
£lf
, 
™eExûp
);

516 
	`dvmR–—£T¿ckedAÎoc
(
™eExûp
, 
NULL
);

519 ià(!
	`dvmCheckExû±iÚ
(
£lf
))

520 
	`dvmS‘Exû±iÚ
(
£lf
, 
ÜigExûp
);

528 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

529 
	`dvmR–—£T¿ckedAÎoc
(
ÜigExûp
, 
£lf
);

530 
	}
}

539 
Objeù
* 
	$dvmG‘Exû±iÚCau£
(cÚ¡ 
Objeù
* 
exû±iÚ
)

541 ià(!
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
exThrowabË
)) {

542 
	`ALOGE
("Triedo get cause from object ofype '%s'",

543 
exû±iÚ
->
şazz
->
desütÜ
);

544 
	`dvmAbÜt
();

546 
Objeù
* 
ÿu£
 =

547 
	`dvmG‘F›ldObjeù
(
exû±iÚ
, 
gDvm
.
offJavaLªgThrowabË_ÿu£
);

548 ià(
ÿu£
 =ğ
exû±iÚ
)

549  
NULL
;

551  
ÿu£
;

552 
	}
}

564 
	$dvmPrštExû±iÚSckT¿û
()

566 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

567 
Objeù
* 
exû±iÚ
;

568 
M‘hod
* 
´štM‘hod
;

570 
exû±iÚ
 = 
£lf
->exception;

571 ià(
exû±iÚ
 =ğ
NULL
)

574 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

575 
£lf
->
exû±iÚ
 = 
NULL
;

576 
´štM‘hod
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
exû±iÚ
->
şazz
,

578 ià(
´štM‘hod
 !ğ
NULL
) {

579 
JV®ue
 
unu£d
;

580 
	`dvmC®lM‘hod
(
£lf
, 
´štM‘hod
, 
exû±iÚ
, &
unu£d
);

582 
	`ALOGW
("WARNING: could‚ot find…rintStackTrace in %s",

583 
exû±iÚ
->
şazz
->
desütÜ
);

586 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

587 
	`ALOGW
("NOTE:ƒxceptionhrown while…rinting stackrace: %s",

588 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
);

591 
£lf
->
exû±iÚ
 =ƒxception;

592 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

593 
	}
}

600 
	$fšdC©chInM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
»lPc
,

601 
CÏssObjeù
* 
exûpCÏss
)

607 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
£lf
));

608 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

610 
	`LOGVV
("findCatchInMethod %s.%sƒxcep=%s depth=%d",

611 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
exûpCÏss
->descriptor,

612 
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
š‹½Save
.
curF¿me
));

614 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

615 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

616 
DexC©chI‹¿tÜ
 
™”©Ü
;

618 ià(
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
pCode
, 
»lPc
)) {

620 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

622 ià(
hªdËr
 =ğ
NULL
) {

626 ià(
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
) {

628 
	`ALOGV
("Match on catch-all block‡t 0x%02x in %s.%s for %s",

629 
»lPc
, 
m‘hod
->
şazz
->
desütÜ
,

630 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

631  
hªdËr
->
add»ss
;

634 
CÏssObjeù
* 
throwabË
 =

635 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
hªdËr
->
ty³Idx
);

636 ià(
throwabË
 =ğ
NULL
) {

664 
throwabË
 = 
	`dvmResŞveCÏss
(
m‘hod
->
şazz
, 
hªdËr
->
ty³Idx
,

665 
Œue
);

666 ià(
throwabË
 =ğ
NULL
) {

674 
	`ALOGW
("Could‚ot„esolve class„ef'ed inƒxception "

676 
hªdËr
->
ty³Idx
,

677 (
£lf
->
exû±iÚ
 !ğ
NULL
) ?

678 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
 : "(none)");

679 
	`dvmCË¬Exû±iÚ
(
£lf
);

687 ià(
	`dvmIn¡ªûof
(
exûpCÏss
, 
throwabË
)) {

688 
	`ALOGV
("Match on catch block‡t 0x%02x in %s.%s for %s",

689 
»lPc
, 
m‘hod
->
şazz
->
desütÜ
,

690 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

691  
hªdËr
->
add»ss
;

696 
	`ALOGV
("No matching catch block‡t 0x%02x in %s for %s",

697 
»lPc
, 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

699 
	}
}

715 
	$dvmFšdC©chBlock
(
Th»ad
* 
£lf
, 
»lPc
, 
Objeù
* 
exû±iÚ
,

716 
boŞ
 
sÿnOÆy
, ** 
ÃwF¿me
)

718 
u4
* 
å
 = 
£lf
->
š‹½Save
.
curF¿me
;

719 
ÿtchAddr
 = -1;

721 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
£lf
));

723 
Œue
) {

724 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

725 
ÿtchAddr
 = 
	`fšdC©chInM‘hod
(
£lf
, 
§veA»a
->
m‘hod
, 
»lPc
,

726 
exû±iÚ
->
şazz
);

727 ià(
ÿtchAddr
 >= 0)

737 ià(!
sÿnOÆy
) {

738 
	`TRACE_METHOD_UNROLL
(
£lf
, 
§veA»a
->
m‘hod
);

747 
	`as£¹
(
§veA»a
->
´evF¿me
 !ğ
NULL
);

748 ià(
	`dvmIsB»akF¿me
((
u4
*)
§veA»a
->
´evF¿me
)) {

749 ià(!
sÿnOÆy
)

761 
å
 = 
§veA»a
->
´evF¿me
;

762 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

763 
å
 = 
§veA»a
->
´evF¿me
;

764 
å
 !ğ
NULL
) {

765 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
)) {

766 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

767 ià(!
	`dvmIsN©iveM‘hod
(
§veA»a
->
m‘hod
))

771 
å
 = 
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
;

773 ià(
å
 =ğ
NULL
)

781 
»lPc
 =

782 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
->
š¢s
;

784 
å
 = 
§veA»a
->
´evF¿me
;

787 
»lPc
 = 
§veA»a
->
§vedPc
 - 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
->
š¢s
;

791 ià(!
sÿnOÆy
)

792 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

798 
£lf
->
exû±iÚ
 = 
NULL
;

800 *
ÃwF¿me
 = 
å
;

801  
ÿtchAddr
;

802 
	}
}

823 * 
	$dvmFlInSckT¿ûIÁ”Çl
(
Th»ad
* 
th»ad
, 
boŞ
 
wªtObjeù
, 
size_t
* 
pCouÁ
)

825 
A¼ayObjeù
* 
¡ackD©a
 = 
NULL
;

826 * 
sim¶eD©a
 = 
NULL
;

827 * 
å
;

828 * 
¡¬tFp
;

829 
size_t
 
¡ackD•th
;

830 * 
štPŒ
;

832 ià(
pCouÁ
 !ğ
NULL
)

833 *
pCouÁ
 = 0;

834 
å
 = 
th»ad
->
š‹½Save
.
curF¿me
;

836 
	`as£¹
(
th»ad
 =ğ
	`dvmTh»adS–f
(è|| 
	`dvmIsSu¥’ded
(thread));

848 
å
 !ğ
NULL
) {

849 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

850 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

852 ià(
	`dvmIsB»akF¿me
((
u4
*)
å
))

854 ià(!
	`dvmIn¡ªûof
(
m‘hod
->
şazz
, 
gDvm
.
exThrowabË
))

858 
å
 = 
§veA»a
->
´evF¿me
;

860 
¡¬tFp
 = 
å
;

865 
¡ackD•th
 = 0;

866 
å
 !ğ
NULL
) {

867 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

869 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
))

870 
¡ackD•th
++;

872 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

873 
å
 = 
§veA»a
->
´evF¿me
;

877 ià(!
¡ackD•th
)

878 
ba
;

884 ià(
wªtObjeù
) {

885 
	`as£¹
((
M‘hod
*) == 4);

886 
¡ackD©a
 = 
	`dvmAÎocPrim™iveA¼ay
('I', 
¡ackD•th
*2, 
ALLOC_DEFAULT
);

887 ià(
¡ackD©a
 =ğ
NULL
) {

888 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

889 
ba
;

891 
štPŒ
 = (*)(*)
¡ackD©a
->
cÚ‹Ás
;

894 
	`as£¹
((
M‘hod
*) == ());

895 
sim¶eD©a
 = (*è
	`m®loc
((è* 
¡ackD•th
*2);

896 ià(
sim¶eD©a
 =ğ
NULL
)

897 
ba
;

899 
	`as£¹
(
pCouÁ
 !ğ
NULL
);

900 
štPŒ
 = 
sim¶eD©a
;

902 ià(
pCouÁ
 !ğ
NULL
)

903 *
pCouÁ
 = 
¡ackD•th
;

905 
å
 = 
¡¬tFp
;

906 
å
 !ğ
NULL
) {

907 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

908 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

910 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
)) {

914 *
štPŒ
++ = (è
m‘hod
;

915 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

916 *
štPŒ
++ = 0;

918 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 &&

919 
§veA»a
->
xŒa
.
cu¼’tPc
 <

920 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

921 *
štPŒ
++ = (è(
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
);

924 
¡ackD•th
--;

927 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

928 
å
 = 
§veA»a
->
´evF¿me
;

930 
	`as£¹
(
¡ackD•th
 == 0);

932 
ba
:

933 ià(
wªtObjeù
) {

934 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡ackD©a
, 
	`dvmTh»adS–f
());

935  
¡ackD©a
;

937  
sim¶eD©a
;

939 
	}
}

949 
A¼ayObjeù
* 
	$dvmG‘SckT¿û
(cÚ¡ 
Objeù
* 
o¡ackD©a
)

951 cÚ¡ 
A¼ayObjeù
* 
¡ackD©a
 = (cÚ¡ A¼ayObjeù*è
o¡ackD©a
;

952 
size_t
 
¡ackSize
 = 
¡ackD©a
->
Ëngth
 / 2;

953 cÚ¡ * 
štV®s
 = (cÚ¡ *)(*)
¡ackD©a
->
cÚ‹Ás
;

954  
	`dvmG‘SckT¿ûRaw
(
štV®s
, 
¡ackSize
);

955 
	}
}

965 
A¼ayObjeù
* 
	$dvmG‘SckT¿ûRaw
(cÚ¡ * 
štV®s
, 
size_t
 
¡ackD•th
)

968 
CÏssObjeù
* 
kÏss
 = 
gDvm
.
şassJavaLªgSckT¿ûEËm’tA¼ay
;

969 
A¼ayObjeù
* 
¬¿y
 = 
	`dvmAÎocA¼ayByCÏss
(
kÏss
, 
¡ackD•th
, 
ALLOC_DEFAULT
);

970 ià(
¬¿y
 !ğ
NULL
){

971 
	`dvmFlSckT¿ûEËm’ts
(
štV®s
, 
¡ackD•th
, 
¬¿y
);

972 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬¿y
, 
NULL
);

974  
¬¿y
;

975 
	}
}

983 
	$dvmFlSckT¿ûEËm’ts
(cÚ¡ * 
štV®s
, 
size_t
 
¡ackD•th
, 
A¼ayObjeù
* 
¡eA¼ay
)

985 
i
;

988 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
))

989 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
);

995 
i
 = 0; i < 
¡ackD•th
; i++) {

996 
Objeù
* 
¡e
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
,
ALLOC_DEFAULT
);

997 ià(
¡e
 =ğ
NULL
) {

1001 
M‘hod
* 
m‘h
 = (M‘hod*è*
štV®s
++;

1002 
pc
 = *
štV®s
++;

1004 
lšeNumb”
;

1005 ià(
pc
 == -1)

1006 
lšeNumb”
 = 0;

1008 
lšeNumb”
 = 
	`dvmLšeNumFromPC
(
m‘h
, 
pc
);

1010 
¡d
::
¡ršg
 
	`dÙName
(
	`dvmHumªR—dabËDesütÜ
(
m‘h
->
şazz
->
desütÜ
));

1011 
SŒšgObjeù
* 
şassName
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
);

1013 
SŒšgObjeù
* 
m‘hodName
 = 
	`dvmC»©eSŒšgFromC¡r
(
m‘h
->
Çme
);

1015 cÚ¡ * 
sourûFe
 = 
	`dvmG‘M‘hodSourûFe
(
m‘h
);

1016 
SŒšgObjeù
* 
feName
 = (
sourûFe
 !ğ
NULL
è? 
	`dvmC»©eSŒšgFromC¡r
(sourceFile) : NULL;

1024 
JV®ue
 
unu£d
;

1025 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgSckT¿ûEËm’t_š™
,

1026 
¡e
, &
unu£d
, 
şassName
, 
m‘hodName
, 
feName
, 
lšeNumb”
);

1028 
	`dvmR–—£T¿ckedAÎoc
(
¡e
, 
NULL
);

1029 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

1030 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hodName
, 
NULL
);

1031 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
feName
, 
NULL
);

1033 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

1037 
	`dvmS‘ObjeùA¼ayEËm’t
(
¡eA¼ay
, 
i
, 
¡e
);

1039 
	}
}

1044 
	$dvmLogRawSckT¿û
(cÚ¡ * 
štV®s
, 
¡ackD•th
) {

1048 
i
 = 0; i < 
¡ackD•th
; i++) {

1049 
M‘hod
* 
m‘h
 = (M‘hod*è*
štV®s
++;

1050 
pc
 = *
štV®s
++;

1052 
¡d
::
¡ršg
 
	`dÙName
(
	`dvmHumªR—dabËDesütÜ
(
m‘h
->
şazz
->
desütÜ
));

1053 ià(
	`dvmIsN©iveM‘hod
(
m‘h
)) {

1054 
	`ALOGI
("\ˆ%s.%s(N©ivM‘hod)", 
dÙName
.
	`c_¡r
(), 
m‘h
->
Çme
);

1056 
	`ALOGI
("\tat %s.%s(%s:%d)",

1057 
dÙName
.
	`c_¡r
(), 
m‘h
->
Çme
, 
	`dvmG‘M‘hodSourûFe
(meth),

1058 
	`dvmLšeNumFromPC
(
m‘h
, 
pc
));

1061 
	}
}

1072 
SŒšgObjeù
* 
	$g‘Exû±iÚMes§ge
(
Objeù
* 
exû±iÚ
)

1074 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1075 
M‘hod
* 
g‘Mes§geM‘hod
;

1076 
SŒšgObjeù
* 
mes§geSŒ
 = 
NULL
;

1077 
Objeù
* 
³ndšgExû±iÚ
;

1083 
³ndšgExû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1084 ià(
³ndšgExû±iÚ
 !ğ
NULL
) {

1085 
	`dvmAddT¿ckedAÎoc
(
³ndšgExû±iÚ
, 
£lf
);

1086 
	`dvmCË¬Exû±iÚ
(
£lf
);

1089 
g‘Mes§geM‘hod
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
exû±iÚ
->
şazz
,

1091 ià(
g‘Mes§geM‘hod
 !ğ
NULL
) {

1093 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1094 
JV®ue
 
»suÉ
;

1096 
	`dvmC®lM‘hod
(
£lf
, 
g‘Mes§geM‘hod
, 
exû±iÚ
, &
»suÉ
);

1097 
mes§geSŒ
 = (
SŒšgObjeù
*è
»suÉ
.
l
;

1098 ià(
mes§geSŒ
 !ğ
NULL
)

1099 
	`dvmAddT¿ckedAÎoc
((
Objeù
*è
mes§geSŒ
, 
£lf
);

1101 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1103 
	`ALOGW
("WARNING: could‚ot find getMessage in %s",

1104 
exû±iÚ
->
şazz
->
desütÜ
);

1107 ià(
	`dvmG‘Exû±iÚ
(
£lf
è!ğ
NULL
) {

1108 
	`ALOGW
("NOTE:ƒxceptionhrown while„etrievingƒxception message: %s",

1109 
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
->
desütÜ
);

1113 
	`dvmS‘Exû±iÚ
(
£lf
, 
³ndšgExû±iÚ
);

1114 ià(
³ndšgExû±iÚ
 !ğ
NULL
) {

1115 
	`dvmR–—£T¿ckedAÎoc
(
³ndšgExû±iÚ
, 
£lf
);

1117  
mes§geSŒ
;

1118 
	}
}

1123 
	$logSckT¿ûOf
(
Objeù
* 
exû±iÚ
) {

1124 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËDesütÜ
(
exû±iÚ
->
şazz
->
desütÜ
));

1125 
SŒšgObjeù
* 
mes§geSŒ
 = 
	`g‘Exû±iÚMes§ge
(
exû±iÚ
);

1126 ià(
mes§geSŒ
 !ğ
NULL
) {

1127 * 
ı
 = 
	`dvmC»©eC¡rFromSŒšg
(
mes§geSŒ
);

1128 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
mes§geSŒ
, 
	`dvmTh»adS–f
());

1129 
mes§geSŒ
 = 
NULL
;

1131 
	`ALOGI
("%s: %s", 
şassName
.
	`c_¡r
(), 
ı
);

1132 
	`ä“
(
ı
);

1134 
	`ALOGI
("%s:", 
şassName
.
	`c_¡r
());

1143 cÚ¡ 
A¼ayObjeù
* 
¡ackD©a
 = (cÚ¡ A¼ayObjeù*è
	`dvmG‘F›ldObjeù
(
exû±iÚ
,

1144 
gDvm
.
offJavaLªgThrowabË_¡ackS‹
);

1145 ià(
¡ackD©a
 =ğ
NULL
) {

1146 
	`ALOGI
(" (raw stackrace‚ot found)");

1150 
¡ackSize
 = 
¡ackD©a
->
Ëngth
 / 2;

1151 cÚ¡ * 
štV®s
 = (cÚ¡ *)(*)
¡ackD©a
->
cÚ‹Ás
;

1153 
	`dvmLogRawSckT¿û
(
štV®s
, 
¡ackSize
);

1154 
	}
}

1162 
	$dvmLogExû±iÚSckT¿û
()

1164 
Objeù
* 
exû±iÚ
 = 
	`dvmTh»adS–f
()->exception;

1165 
Objeù
* 
ÿu£
;

1167 ià(
exû±iÚ
 =ğ
NULL
) {

1168 
	`ALOGW
("triedo†og‡‚ullƒxception?");

1173 
	`logSckT¿ûOf
(
exû±iÚ
);

1174 
ÿu£
 = 
	`dvmG‘Exû±iÚCau£
(
exû±iÚ
);

1175 ià(
ÿu£
 =ğ
NULL
) {

1178 
	`ALOGI
("Caused by:");

1179 
exû±iÚ
 = 
ÿu£
;

1181 
	}
}

1189 
	$throwTy³E¼Ü
(
CÏssObjeù
* 
exû±iÚCÏss
, cÚ¡ * 
fmt
,

1190 
CÏssObjeù
* 
aùu®
, CÏssObjeù* 
desœed
)

1192 
¡d
::
¡ršg
 
	`aùu®CÏssName
(
	`dvmHumªR—dabËDesütÜ
(
aùu®
->
desütÜ
));

1193 
¡d
::
¡ršg
 
	`desœedCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
desœed
->
desütÜ
));

1194 
	`dvmThrowExû±iÚFmt
(
exû±iÚCÏss
, 
fmt
, 
aùu®CÏssName
.
	`c_¡r
(), 
desœedCÏssName
.c_str());

1195 
	}
}

1197 
	$dvmThrowAb¡¿ùM‘hodE¼Ü
(cÚ¡ * 
msg
) {

1198 
	`dvmThrowExû±iÚ
(
gDvm
.
exAb¡¿ùM‘hodE¼Ü
, 
msg
);

1199 
	}
}

1201 
	$dvmThrowAr™hm‘icExû±iÚ
(cÚ¡ * 
msg
) {

1202 
	`dvmThrowExû±iÚ
(
gDvm
.
exAr™hm‘icExû±iÚ
, 
msg
);

1203 
	}
}

1205 
	$dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(
Ëngth
, 
šdex
)

1207 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exA¼ayIndexOutOfBoundsExû±iÚ
,

1208 "Ëngth=%d; index=%d", 
Ëngth
, 
šdex
);

1209 
	}
}

1211 
	$dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
CÏssObjeù
* 
objeùTy³
,

1212 
CÏssObjeù
* 
¬¿yTy³
)

1214 
	`throwTy³E¼Ü
(
gDvm
.
exA¼ayStÜeExû±iÚ
,

1216 
objeùTy³
, 
¬¿yTy³
);

1217 
	}
}

1219 
	$dvmThrowA¼ayStÜeExû±iÚNÙA¼ay
(
CÏssObjeù
* 
aùu®
, cÚ¡ * 
Ïb–
) {

1220 
¡d
::
¡ršg
 
	`aùu®CÏssName
(
	`dvmHumªR—dabËDesütÜ
(
aùu®
->
desütÜ
));

1221 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exA¼ayStÜeExû±iÚ
, "%s ofype %s is‚ot‡n‡rray",

1222 
Ïb–
, 
aùu®CÏssName
.
	`c_¡r
());

1223 
	}
}

1225 
	$dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ays
(
CÏssObjeù
* 
sourû
, CÏssObjeù* 
de¡š©iÚ
)

1227 
	`throwTy³E¼Ü
(
gDvm
.
exA¼ayStÜeExû±iÚ
,

1229 
sourû
, 
de¡š©iÚ
);

1230 
	}
}

1232 
	$dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ayEËm’t
(
s4
 
šdex
, 
CÏssObjeù
* 
objeùTy³
,

1233 
CÏssObjeù
* 
¬¿yTy³
)

1235 
¡d
::
¡ršg
 
	`objeùCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
objeùTy³
->
desütÜ
));

1236 
¡d
::
¡ršg
 
	`¬¿yCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
¬¿yTy³
->
desütÜ
));

1237 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exA¼ayStÜeExû±iÚ
,

1239 
šdex
, 
objeùCÏssName
.
	`c_¡r
(), 
¬¿yCÏssName
.c_str());

1240 
	}
}

1242 
	$dvmThrowCÏssCa¡Exû±iÚ
(
CÏssObjeù
* 
aùu®
, CÏssObjeù* 
desœed
)

1244 
	`throwTy³E¼Ü
(
gDvm
.
exCÏssCa¡Exû±iÚ
,

1245 "% ÿÂÙ bÿ¡Ø%s", 
aùu®
, 
desœed
);

1246 
	}
}

1248 
	$dvmThrowCÏssCœcuÏr™yE¼Ü
(cÚ¡ * 
desütÜ
) {

1249 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(
gDvm
.
exCÏssCœcuÏr™yE¼Ü
,

1250 
desütÜ
);

1251 
	}
}

1253 
	$dvmThrowCÏssFÜm©E¼Ü
(cÚ¡ * 
msg
) {

1254 
	`dvmThrowExû±iÚ
(
gDvm
.
exCÏssFÜm©E¼Ü
, 
msg
);

1255 
	}
}

1257 
	$dvmThrowCÏssNÙFoundExû±iÚ
(cÚ¡ * 
Çme
) {

1258 
	`dvmThrowChašedCÏssNÙFoundExû±iÚ
(
Çme
, 
NULL
);

1259 
	}
}

1261 
	$dvmThrowChašedCÏssNÙFoundExû±iÚ
(cÚ¡ * 
Çme
, 
Objeù
* 
ÿu£
) {

1268 
	`dvmThrowChašedExû±iÚ
(
gDvm
.
exCÏssNÙFoundExû±iÚ
, 
Çme
, 
ÿu£
);

1269 
	}
}

1271 
	$dvmThrowExû±iÚInIn™Ÿliz”E¼Ü
()

1280 ià(
gDvm
.
exExû±iÚInIn™Ÿliz”E¼Ü
 =ğ
NULL
) {

1289 
	`ALOGE
("Fatalƒrror duringƒarly class initialization:");

1290 
	`dvmLogExû±iÚSckT¿û
();

1291 
	`dvmAbÜt
();

1294 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1295 
Objeù
* 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1297 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1298 
	`dvmCË¬Exû±iÚ
(
£lf
);

1300 
	`dvmThrowChašedExû±iÚ
(
gDvm
.
exExû±iÚInIn™Ÿliz”E¼Ü
,

1301 
NULL
, 
exû±iÚ
);

1302 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1303 
	}
}

1305 
	$dvmThrowFeNÙFoundExû±iÚ
(cÚ¡ * 
msg
) {

1306 
	`dvmThrowExû±iÚ
(
gDvm
.
exFeNÙFoundExû±iÚ
, 
msg
);

1307 
	}
}

1309 
	$dvmThrowIOExû±iÚ
(cÚ¡ * 
msg
) {

1310 
	`dvmThrowExû±iÚ
(
gDvm
.
exIOExû±iÚ
, 
msg
);

1311 
	}
}

1313 
	$dvmThrowIÎeg®AcûssExû±iÚ
(cÚ¡ * 
msg
) {

1314 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®AcûssExû±iÚ
, 
msg
);

1315 
	}
}

1317 
	$dvmThrowIÎeg®AcûssE¼Ü
(cÚ¡ * 
msg
) {

1318 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®AcûssE¼Ü
, 
msg
);

1319 
	}
}

1321 
	$dvmThrowIÎeg®Argum’tExû±iÚ
(cÚ¡ * 
msg
) {

1322 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®Argum’tExû±iÚ
, 
msg
);

1323 
	}
}

1325 
	$dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(cÚ¡ * 
msg
) {

1326 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®MÚ™ÜS‹Exû±iÚ
, 
msg
);

1327 
	}
}

1329 
	$dvmThrowIÎeg®S‹Exû±iÚ
(cÚ¡ * 
msg
) {

1330 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®S‹Exû±iÚ
, 
msg
);

1331 
	}
}

1333 
	$dvmThrowIÎeg®Th»adS‹Exû±iÚ
(cÚ¡ * 
msg
) {

1334 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÎeg®Th»adS‹Exû±iÚ
, 
msg
);

1335 
	}
}

1337 
	$dvmThrowIncom·tibËCÏssChªgeE¼Ü
(cÚ¡ * 
msg
) {

1338 
	`dvmThrowExû±iÚ
(
gDvm
.
exIncom·tibËCÏssChªgeE¼Ü
, 
msg
);

1339 
	}
}

1341 
	$dvmThrowIncom·tibËCÏssChªgeE¼ÜW™hCÏssMes§ge
(

1342 cÚ¡ * 
desütÜ
)

1344 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

1345 
gDvm
.
exIncom·tibËCÏssChªgeE¼Ü
, 
desütÜ
);

1346 
	}
}

1348 
	$dvmThrowIn¡ªtŸtiÚExû±iÚ
(
CÏssObjeù
* 
şazz
, cÚ¡ * 
exŒaD‘a
) {

1349 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËDesütÜ
(
şazz
->
desütÜ
));

1350 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exIn¡ªtŸtiÚExû±iÚ
,

1351 "ÿn'ˆš¡ªtŸ‹ cÏs %s%s%s", 
şassName
.
	`c_¡r
(),

1352 (
exŒaD‘a
 =ğ
NULL
) ? "" : "; ",

1353 (
exŒaD‘a
 =ğ
NULL
) ? "" :ƒxtraDetail);

1354 
	}
}

1356 
	$dvmThrowIÁ”ÇlE¼Ü
(cÚ¡ * 
msg
) {

1357 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÁ”ÇlE¼Ü
, 
msg
);

1358 
	}
}

1360 
	$dvmThrowIÁ”ru±edExû±iÚ
(cÚ¡ * 
msg
) {

1361 
	`dvmThrowExû±iÚ
(
gDvm
.
exIÁ”ru±edExû±iÚ
, 
msg
);

1362 
	}
}

1364 
	$dvmThrowLškageE¼Ü
(cÚ¡ * 
msg
) {

1365 
	`dvmThrowExû±iÚ
(
gDvm
.
exLškageE¼Ü
, 
msg
);

1366 
	}
}

1368 
	$dvmThrowNeg©iveA¼aySizeExû±iÚ
(
s4
 
size
) {

1369 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNeg©iveA¼aySizeExû±iÚ
, "%d", 
size
);

1370 
	}
}

1372 
	$dvmThrowNoCÏssDefFoundE¼Ü
(cÚ¡ * 
desütÜ
) {

1373 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(
gDvm
.
exNoCÏssDefFoundE¼Ü
,

1374 
desütÜ
);

1375 
	}
}

1377 
	$dvmThrowChašedNoCÏssDefFoundE¼Ü
(cÚ¡ * 
desütÜ
,

1378 
Objeù
* 
ÿu£
) {

1379 
	`dvmThrowChašedExû±iÚW™hCÏssMes§ge
(

1380 
gDvm
.
exNoCÏssDefFoundE¼Ü
, 
desütÜ
, 
ÿu£
);

1381 
	}
}

1383 
	$dvmThrowNoSuchF›ldE¼Ü
(cÚ¡ * 
msg
) {

1384 
	`dvmThrowExû±iÚ
(
gDvm
.
exNoSuchF›ldE¼Ü
, 
msg
);

1385 
	}
}

1387 
	$dvmThrowNoSuchF›ldExû±iÚ
(cÚ¡ * 
msg
) {

1388 
	`dvmThrowExû±iÚ
(
gDvm
.
exNoSuchF›ldExû±iÚ
, 
msg
);

1389 
	}
}

1391 
	$dvmThrowNoSuchM‘hodE¼Ü
(cÚ¡ * 
msg
) {

1392 
	`dvmThrowExû±iÚ
(
gDvm
.
exNoSuchM‘hodE¼Ü
, 
msg
);

1393 
	}
}

1395 
	$dvmThrowNuÎPoš‹rExû±iÚ
(cÚ¡ * 
msg
) {

1396 
	`dvmThrowExû±iÚ
(
gDvm
.
exNuÎPoš‹rExû±iÚ
, 
msg
);

1397 
	}
}

1399 
	$dvmThrowOutOfMemÜyE¼Ü
(cÚ¡ * 
msg
) {

1400 
	`dvmThrowExû±iÚ
(
gDvm
.
exOutOfMemÜyE¼Ü
, 
msg
);

1401 
	}
}

1403 
	$dvmThrowRuÁimeExû±iÚ
(cÚ¡ * 
msg
) {

1404 
	`dvmThrowExû±iÚ
(
gDvm
.
exRuÁimeExû±iÚ
, 
msg
);

1405 
	}
}

1407 
	$dvmThrowSËDexCacheE¼Ü
(cÚ¡ * 
msg
) {

1408 
	`dvmThrowExû±iÚ
(
gDvm
.
exSËDexCacheE¼Ü
, 
msg
);

1409 
	}
}

1411 
	$dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hIndex
(
jsize
 
¡ršgL’gth
,

1412 
jsize
 
»que¡Index
) {

1413 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exSŒšgIndexOutOfBoundsExû±iÚ
,

1414 "Ëngth=%d; index=%d", 
¡ršgL’gth
, 
»que¡Index
);

1415 
	}
}

1417 
	$dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hRegiÚ
(
jsize
 
¡ršgL’gth
,

1418 
jsize
 
»que¡S¹
, jsiz
»que¡L’gth
) {

1419 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exSŒšgIndexOutOfBoundsExû±iÚ
,

1421 
¡ršgL’gth
, 
»que¡S¹
, 
»que¡L’gth
);

1422 
	}
}

1424 
	$dvmThrowTy³NÙP»£ÁExû±iÚ
(cÚ¡ * 
desütÜ
) {

1425 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(
gDvm
.
exTy³NÙP»£ÁExû±iÚ
,

1426 
desütÜ
);

1427 
	}
}

1429 
	$dvmThrowUn§tisf›dLškE¼Ü
(cÚ¡ * 
msg
) {

1430 
	`dvmThrowExû±iÚ
(
gDvm
.
exUn§tisf›dLškE¼Ü
, 
msg
);

1431 
	}
}

1433 
	$dvmThrowUn§tisf›dLškE¼Ü
(cÚ¡ * 
msg
, cÚ¡ 
M‘hod
* 
m‘hod
) {

1434 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1435 * 
şassName
 = 
	`dvmDesütÜToDÙ
(
m‘hod
->
şazz
->
desütÜ
);

1436 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exUn§tisf›dLškE¼Ü
, "%s: %s.%s:%s",

1437 
msg
, 
şassName
, 
m‘hod
->
Çme
, 
desc
);

1438 
	`ä“
(
şassName
);

1439 
	`ä“
(
desc
);

1440 
	}
}

1442 
	$dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
(cÚ¡ * 
msg
) {

1443 
	`dvmThrowExû±iÚ
(
gDvm
.
exUnsuµÜ‹dO³¿tiÚExû±iÚ
, 
msg
);

1444 
	}
}

1446 
	$dvmThrowV”ifyE¼Ü
(cÚ¡ * 
desütÜ
) {

1447 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(
gDvm
.
exV”ifyE¼Ü
, 
desütÜ
);

1448 
	}
}

1450 
	$dvmThrowVœtu®MachšeE¼Ü
(cÚ¡ * 
msg
) {

1451 
	`dvmThrowExû±iÚ
(
gDvm
.
exVœtu®MachšeE¼Ü
, 
msg
);

1452 
	}
}

	@vm/Exception.h

20 #iâdeà
DALVIK_EXCEPTION_H_


21 
	#DALVIK_EXCEPTION_H_


	)

41 
dvmThrowChašedExû±iÚ
(
CÏssObjeù
* 
exû±iÚCÏss
,

42 cÚ¡ * 
msg
, 
Objeù
* 
ÿu£
);

43 
INLINE
 
	$dvmThrowExû±iÚ
(
CÏssObjeù
* 
exû±iÚCÏss
,

44 cÚ¡ * 
msg
)

46 
	`dvmThrowChašedExû±iÚ
(
exû±iÚCÏss
, 
msg
, 
NULL
);

47 
	}
}

52 
dvmThrowExû±iÚFmtV
(
CÏssObjeù
* 
exû±iÚCÏss
,

53 cÚ¡ * 
fmt
, 
va_li¡
 
¬gs
);

54 
	$dvmThrowExû±iÚFmt
(
CÏssObjeù
* 
exû±iÚCÏss
,

55 cÚ¡ * 
fmt
, ...)

56 #ià
	`defšed
(
__GNUC__
)

57 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

60 
INLINE
 
	$dvmThrowExû±iÚFmt
(
CÏssObjeù
* 
exû±iÚCÏss
,

61 cÚ¡ * 
fmt
, ...)

63 
va_li¡
 
¬gs
;

64 
	`va_¡¬t
(
¬gs
, 
fmt
);

65 
	`dvmThrowExû±iÚFmtV
(
exû±iÚCÏss
, 
fmt
, 
¬gs
);

66 
	`va_’d
(
¬gs
);

67 
	}
}

74 
dvmThrowChašedExû±iÚW™hCÏssMes§ge
(

75 
CÏssObjeù
* 
exû±iÚCÏss
, cÚ¡ * 
mes§geDesütÜ
,

76 
Objeù
* 
ÿu£
);

82 
INLINE
 
	$dvmThrowExû±iÚW™hCÏssMes§ge
(

83 
CÏssObjeù
* 
exû±iÚCÏss
, cÚ¡ * 
mes§geDesütÜ
)

85 
	`dvmThrowChašedExû±iÚW™hCÏssMes§ge
(
exû±iÚCÏss
,

86 
mes§geDesütÜ
, 
NULL
);

87 
	}
}

93 
INLINE
 
Objeù
* 
	$dvmG‘Exû±iÚ
(
Th»ad
* 
£lf
) {

94  
£lf
->
exû±iÚ
;

95 
	}
}

100 
INLINE
 
	$dvmS‘Exû±iÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
exû±iÚ
)

102 
	`as£¹
(
exû±iÚ
 !ğ
NULL
);

103 
£lf
->
exû±iÚ
 =ƒxception;

104 
	}
}

113 
INLINE
 
	$dvmCË¬Exû±iÚ
(
Th»ad
* 
£lf
) {

114 
£lf
->
exû±iÚ
 = 
NULL
;

115 
	}
}

122 
dvmCË¬O±Exû±iÚ
(
Th»ad
* 
£lf
);

128 
INLINE
 
boŞ
 
	$dvmCheckExû±iÚ
(
Th»ad
* 
£lf
) {

129  (
£lf
->
exû±iÚ
 !ğ
NULL
);

130 
	}
}

136 
boŞ
 
dvmIsCheckedExû±iÚ
(cÚ¡ 
Objeù
* 
exû±iÚ
);

144 
dvmW¿pExû±iÚ
(cÚ¡ * 
ÃwExûpSŒ
);

151 
Objeù
* 
dvmG‘Exû±iÚCau£
(cÚ¡ Objeù* 
exû±iÚ
);

157 
dvmPrštExû±iÚSckT¿û
();

163 
dvmLogExû±iÚSckT¿û
();

176 "C" 
dvmFšdC©chBlock
(
Th»ad
* 
£lf
, 
»lPc
, 
Objeù
* 
exû±iÚ
,

177 
boŞ
 
doUÄŞl
, ** 
ÃwF¿me
);

187 * 
dvmFlInSckT¿ûIÁ”Çl
(
Th»ad
* 
th»ad
, 
boŞ
 
wªtObjeù
, 
size_t
* 
pCouÁ
);

189 
INLINE
 
Objeù
* 
	$dvmFlInSckT¿û
(
Th»ad
* 
th»ad
) {

190  (
Objeù
*è
	`dvmFlInSckT¿ûIÁ”Çl
(
th»ad
, 
Œue
, 
NULL
);

191 
	}
}

192 
A¼ayObjeù
* 
dvmG‘SckT¿û
(cÚ¡ 
Objeù
* 
¡ackS‹
);

194 
INLINE
 * 
	$dvmFlInSckT¿ûRaw
(
Th»ad
* 
th»ad
, 
size_t
* 
pCouÁ
) {

195  (*è
	`dvmFlInSckT¿ûIÁ”Çl
(
th»ad
, 
çl£
, 
pCouÁ
);

196 
	}
}

197 
A¼ayObjeù
* 
dvmG‘SckT¿ûRaw
(cÚ¡ * 
štV®s
, 
size_t
 
¡ackD•th
);

198 
dvmFlSckT¿ûEËm’ts
(cÚ¡ * 
štV®s
, 
size_t
 
¡ackD•th
, 
A¼ayObjeù
* 
¡eA¼ay
);

203 
dvmLogRawSckT¿û
(cÚ¡ * 
štV®s
, 
¡ackD•th
);

209 
dvmThrowAb¡¿ùM‘hodE¼Ü
(cÚ¡ * 
msg
);

215 "C" 
dvmThrowAr™hm‘icExû±iÚ
(cÚ¡ * 
msg
);

221 "C" 
dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(
Ëngth
, 
šdex
);

228 "C" 
dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
CÏssObjeù
* 
objeùTy³
, CÏssObjeù* 
¬¿yTy³
);

235 
dvmThrowA¼ayStÜeExû±iÚNÙA¼ay
(
CÏssObjeù
* 
aùu®
, cÚ¡ * 
Ïb–
);

242 
dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ays
(
CÏssObjeù
* 
sourû
, CÏssObjeù* 
de¡š©iÚ
);

250 
dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ayEËm’t
(
s4
 
šdex
, 
CÏssObjeù
* 
objeùTy³
,

251 
CÏssObjeù
* 
¬¿yTy³
);

257 "C" 
dvmThrowCÏssCa¡Exû±iÚ
(
CÏssObjeù
* 
aùu®
, CÏssObjeù* 
desœed
);

263 
dvmThrowCÏssCœcuÏr™yE¼Ü
(cÚ¡ * 
desütÜ
);

269 
dvmThrowCÏssFÜm©E¼Ü
(cÚ¡ * 
msg
);

275 
dvmThrowCÏssNÙFoundExû±iÚ
(cÚ¡ * 
Çme
);

281 
dvmThrowChašedCÏssNÙFoundExû±iÚ
(cÚ¡ * 
Çme
, 
Objeù
* 
ÿu£
);

288 
dvmThrowExû±iÚInIn™Ÿliz”E¼Ü
();

294 
dvmThrowFeNÙFoundExû±iÚ
(cÚ¡ * 
msg
);

300 
dvmThrowIOExû±iÚ
(cÚ¡ * 
msg
);

306 
dvmThrowIÎeg®AcûssE¼Ü
(cÚ¡ * 
msg
);

312 
dvmThrowIÎeg®AcûssExû±iÚ
(cÚ¡ * 
msg
);

318 
dvmThrowIÎeg®Argum’tExû±iÚ
(cÚ¡ * 
msg
);

324 
dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(cÚ¡ * 
msg
);

330 
dvmThrowIÎeg®S‹Exû±iÚ
(cÚ¡ * 
msg
);

336 
dvmThrowIÎeg®Th»adS‹Exû±iÚ
(cÚ¡ * 
msg
);

342 
dvmThrowIncom·tibËCÏssChªgeE¼Ü
(cÚ¡ * 
msg
);

348 
dvmThrowIncom·tibËCÏssChªgeE¼ÜW™hCÏssMes§ge
(

349 cÚ¡ * 
desütÜ
);

356 
dvmThrowIn¡ªtŸtiÚExû±iÚ
(
CÏssObjeù
* 
şazz
,

357 cÚ¡ * 
exŒaD‘a
);

363 "C" 
dvmThrowIÁ”ÇlE¼Ü
(cÚ¡ * 
msg
);

369 
dvmThrowIÁ”ru±edExû±iÚ
(cÚ¡ * 
msg
);

375 
dvmThrowLškageE¼Ü
(cÚ¡ * 
msg
);

381 "C" 
dvmThrowNeg©iveA¼aySizeExû±iÚ
(
s4
 
size
);

387 "C" 
dvmThrowNoCÏssDefFoundE¼Ü
(cÚ¡ * 
desütÜ
);

394 
dvmThrowChašedNoCÏssDefFoundE¼Ü
(cÚ¡ * 
desütÜ
,

395 
Objeù
* 
ÿu£
);

401 "C" 
dvmThrowNoSuchF›ldE¼Ü
(cÚ¡ * 
msg
);

407 
dvmThrowNoSuchF›ldExû±iÚ
(cÚ¡ * 
msg
);

413 "C" 
dvmThrowNoSuchM‘hodE¼Ü
(cÚ¡ * 
msg
);

419 "C" 
dvmThrowNuÎPoš‹rExû±iÚ
(cÚ¡ * 
msg
);

425 
dvmThrowOutOfMemÜyE¼Ü
(cÚ¡ * 
msg
);

431 
dvmThrowRuÁimeExû±iÚ
(cÚ¡ * 
msg
);

437 
dvmThrowSËDexCacheE¼Ü
(cÚ¡ * 
msg
);

444 
dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hIndex
(
jsize
 
¡ršgL’gth
,

445 
jsize
 
»que¡Index
);

452 
dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hRegiÚ
(
jsize
 
¡ršgL’gth
,

453 
jsize
 
»que¡S¹
, jsiz
»que¡L’gth
);

459 
dvmThrowTy³NÙP»£ÁExû±iÚ
(cÚ¡ * 
desütÜ
);

465 
dvmThrowUn§tisf›dLškE¼Ü
(cÚ¡ * 
msg
);

466 
dvmThrowUn§tisf›dLškE¼Ü
(cÚ¡ * 
msg
, cÚ¡ 
M‘hod
* 
m‘hod
);

472 
dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
(cÚ¡ * 
msg
);

478 
dvmThrowV”ifyE¼Ü
(cÚ¡ * 
desütÜ
);

484 
dvmThrowVœtu®MachšeE¼Ü
(cÚ¡ * 
msg
);

	@vm/Globals.h

29 #iâdeà
DALVIK_GLOBALS_H_


30 
	#DALVIK_GLOBALS_H_


	)

32 
	~<¡ršg
>

33 
	~<veùÜ
>

35 
	~<¡d¬g.h
>

36 
	~<±h»ad.h
>

39 
	gGcH—p
;

40 
	gB»akpoštS‘
;

41 
	gIÆšeSub
;

46 
	sAs£¹iÚCÚŒŞ
 {

47 * 
	mpkgOrCÏss
;

48 
	mpkgOrCÏssL’
;

49 
boŞ
 
	m’abË
;

50 
boŞ
 
	misPackage
;

63 
	eRegi¡”M­Mode
 {

64 
	mkRegi¡”M­ModeUnknown
 = 0,

65 
	mkRegi¡”M­ModeTy³P»ci£
,

66 
	mkRegi¡”M­ModeLiveP»ci£


72 
	eProf”ClockSourû
 {

73 
	mkProf”ClockSourûTh»adCpu
,

74 
	mkProf”ClockSourûW®l
,

75 
	mkProf”ClockSourûDu®
,

83 
	sDvmGlob®s
 {

87 * 
	mboÙCÏssP©hSŒ
;

88 * 
	mşassP©hSŒ
;

90 
size_t
 
	mh—pS¹šgSize
;

91 
size_t
 
	mh—pMaximumSize
;

92 
size_t
 
	mh—pGrowthLim™
;

93 
size_t
 
	m¡ackSize
;

94 
size_t
 
	mmašTh»adSckSize
;

96 
boŞ
 
	mv”bo£Gc
;

97 
boŞ
 
	mv”bo£Jni
;

98 
boŞ
 
	mv”bo£CÏss
;

99 
boŞ
 
	mv”bo£Shutdown
;

101 
boŞ
 
	mjdwpAÎowed
;

102 
boŞ
 
	mjdwpCÚfigu»d
;

103 
JdwpT¿n¥ÜtTy³
 
	mjdwpT¿n¥Üt
;

104 
boŞ
 
	mjdwpS”v”
;

105 * 
	mjdwpHo¡
;

106 
	mjdwpPÜt
;

107 
boŞ
 
	mjdwpSu¥’d
;

109 
Prof”ClockSourû
 
	m´of”ClockSourû
;

117 
u4
 
	mlockProfTh»shŞd
;

119 (*
	mvårštfHook
)(
	mFILE
*, cÚ¡ *, 
	mva_li¡
);

120 (*
	mex™Hook
)();

121 (*
	mabÜtHook
)();

122 
boŞ
 (*
isS’s™iveTh»adHook
)();

124 
	mjniG»fLim™
;

125 * 
	mjniT¿û
;

126 
boŞ
 
	m»duûSigÇls
;

127 
boŞ
 
	mnoQu™HªdËr
;

128 
boŞ
 
	mv”ifyDexChecksum
;

129 * 
	m¡ackT¿ûFe
;

131 
boŞ
 
	mlogStdio
;

133 
DexO±imiz”Mode
 
	mdexO±Mode
;

134 
DexCÏssV”ifyMode
 
	mşassV”ifyMode
;

136 
boŞ
 
	mg’”©eRegi¡”M­s
;

137 
Regi¡”M­Mode
 
	m»gi¡”M­Mode
;

139 
boŞ
 
	mmÚ™ÜV”ifiÿtiÚ
;

141 
boŞ
 
	mdexO±FÜSmp
;

146 
boŞ
 
	m´eci£Gc
;

147 
boŞ
 
	m´eV”ify
;

148 
boŞ
 
	mpo¡V”ify
;

149 
boŞ
 
	mcÚcu¼’tM¬kSw“p
;

150 
boŞ
 
	mv”ifyC¬dTabË
;

151 
boŞ
 
	mdi§bËEx¶ic™Gc
;

153 
	mas£¹iÚCŒlCouÁ
;

154 
As£¹iÚCÚŒŞ
* 
	mas£¹iÚCŒl
;

156 
ExecutiÚMode
 
	mexecutiÚMode
;

161 
boŞ
 
	mš™Ÿlizšg
;

162 
boŞ
 
	mİtimizšg
;

169 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
>* 
´İ”t›s
;

174 
CÏssP©hEÁry
* 
	mboÙCÏssP©h
;

176 
DvmDex
* 
	mboÙCÏssP©hO±ExŒa
;

177 
boŞ
 
	mİtimizšgBoÙ¡¿pCÏss
;

183 
HashTabË
* 
	mlßdedCÏs£s
;

192 vŞ©
	mşassS”ŸlNumb”
;

199 
In™ŸtšgLßd”Li¡
* 
	mš™ŸtšgLßd”Li¡
;

206 
±h»ad_mu‹x_t
 
	mš‹ºLock
;

209 
HashTabË
* 
	mš‹ºedSŒšgs
;

212 
HashTabË
* 
	ml™”®SŒšgs
;

219 
CÏssObjeù
* 
	mşassJavaLªgCÏss
;

222 
CÏssObjeù
* 
	mty³Void
;

223 
CÏssObjeù
* 
	mty³BoŞ—n
;

224 
CÏssObjeù
* 
	mty³By‹
;

225 
CÏssObjeù
* 
	mty³ShÜt
;

226 
CÏssObjeù
* 
	mty³Ch¬
;

227 
CÏssObjeù
* 
	mty³IÁ
;

228 
CÏssObjeù
* 
	mty³LÚg
;

229 
CÏssObjeù
* 
	mty³Flßt
;

230 
CÏssObjeù
* 
	mty³DoubË
;

233 
CÏssObjeù
* 
	mşassA¼ayBoŞ—n
;

234 
CÏssObjeù
* 
	mşassA¼ayBy‹
;

235 
CÏssObjeù
* 
	mşassA¼ayShÜt
;

236 
CÏssObjeù
* 
	mşassA¼ayCh¬
;

237 
CÏssObjeù
* 
	mşassA¼ayIÁ
;

238 
CÏssObjeù
* 
	mşassA¼ayLÚg
;

239 
CÏssObjeù
* 
	mşassA¼ayFlßt
;

240 
CÏssObjeù
* 
	mşassA¼ayDoubË
;

245 
CÏssObjeù
* 
	mşassJavaLªgCÏssA¼ay
;

246 
CÏssObjeù
* 
	mşassJavaLªgCÏssLßd”
;

247 
CÏssObjeù
* 
	mşassJavaLªgObjeù
;

248 
CÏssObjeù
* 
	mşassJavaLªgObjeùA¼ay
;

249 
CÏssObjeù
* 
	mşassJavaLªgSŒšg
;

250 
CÏssObjeù
* 
	mşassJavaLªgTh»ad
;

251 
CÏssObjeù
* 
	mşassJavaLªgVMTh»ad
;

252 
CÏssObjeù
* 
	mşassJavaLªgTh»adGroup
;

253 
CÏssObjeù
* 
	mşassJavaLªgSckT¿ûEËm’t
;

254 
CÏssObjeù
* 
	mşassJavaLªgSckT¿ûEËm’tA¼ay
;

255 
CÏssObjeù
* 
	mşassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
;

256 
CÏssObjeù
* 
	mşassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
;

257 
CÏssObjeù
* 
	mşassJavaLªgReæeùAcûssibËObjeù
;

258 
CÏssObjeù
* 
	mşassJavaLªgReæeùCÚ¡ruùÜ
;

259 
CÏssObjeù
* 
	mşassJavaLªgReæeùCÚ¡ruùÜA¼ay
;

260 
CÏssObjeù
* 
	mşassJavaLªgReæeùF›ld
;

261 
CÏssObjeù
* 
	mşassJavaLªgReæeùF›ldA¼ay
;

262 
CÏssObjeù
* 
	mşassJavaLªgReæeùM‘hod
;

263 
CÏssObjeù
* 
	mşassJavaLªgReæeùM‘hodA¼ay
;

264 
CÏssObjeù
* 
	mşassJavaLªgReæeùProxy
;

265 
CÏssObjeù
* 
	mşassJavaNioR—dWr™eDœeùBy‹Bufãr
;

266 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
;

267 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
;

268 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
;

269 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyD®vikDdmcChunk
;

270 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyD®vikDdmcDdmS”v”
;

271 
CÏssObjeù
* 
	mşassJavaLªgRefFš®iz”Reã»nû
;

278 
CÏssObjeù
* 
	mexAb¡¿ùM‘hodE¼Ü
;

279 
CÏssObjeù
* 
	mexAr™hm‘icExû±iÚ
;

280 
CÏssObjeù
* 
	mexA¼ayIndexOutOfBoundsExû±iÚ
;

281 
CÏssObjeù
* 
	mexA¼ayStÜeExû±iÚ
;

282 
CÏssObjeù
* 
	mexCÏssCa¡Exû±iÚ
;

283 
CÏssObjeù
* 
	mexCÏssCœcuÏr™yE¼Ü
;

284 
CÏssObjeù
* 
	mexCÏssFÜm©E¼Ü
;

285 
CÏssObjeù
* 
	mexCÏssNÙFoundExû±iÚ
;

286 
CÏssObjeù
* 
	mexE¼Ü
;

287 
CÏssObjeù
* 
	mexExû±iÚInIn™Ÿliz”E¼Ü
;

288 
CÏssObjeù
* 
	mexFeNÙFoundExû±iÚ
;

289 
CÏssObjeù
* 
	mexIOExû±iÚ
;

290 
CÏssObjeù
* 
	mexIÎeg®AcûssE¼Ü
;

291 
CÏssObjeù
* 
	mexIÎeg®AcûssExû±iÚ
;

292 
CÏssObjeù
* 
	mexIÎeg®Argum’tExû±iÚ
;

293 
CÏssObjeù
* 
	mexIÎeg®MÚ™ÜS‹Exû±iÚ
;

294 
CÏssObjeù
* 
	mexIÎeg®S‹Exû±iÚ
;

295 
CÏssObjeù
* 
	mexIÎeg®Th»adS‹Exû±iÚ
;

296 
CÏssObjeù
* 
	mexIncom·tibËCÏssChªgeE¼Ü
;

297 
CÏssObjeù
* 
	mexIn¡ªtŸtiÚE¼Ü
;

298 
CÏssObjeù
* 
	mexIn¡ªtŸtiÚExû±iÚ
;

299 
CÏssObjeù
* 
	mexIÁ”ÇlE¼Ü
;

300 
CÏssObjeù
* 
	mexIÁ”ru±edExû±iÚ
;

301 
CÏssObjeù
* 
	mexLškageE¼Ü
;

302 
CÏssObjeù
* 
	mexNeg©iveA¼aySizeExû±iÚ
;

303 
CÏssObjeù
* 
	mexNoCÏssDefFoundE¼Ü
;

304 
CÏssObjeù
* 
	mexNoSuchF›ldE¼Ü
;

305 
CÏssObjeù
* 
	mexNoSuchF›ldExû±iÚ
;

306 
CÏssObjeù
* 
	mexNoSuchM‘hodE¼Ü
;

307 
CÏssObjeù
* 
	mexNuÎPoš‹rExû±iÚ
;

308 
CÏssObjeù
* 
	mexOutOfMemÜyE¼Ü
;

309 
CÏssObjeù
* 
	mexRuÁimeExû±iÚ
;

310 
CÏssObjeù
* 
	mexSckOv”æowE¼Ü
;

311 
CÏssObjeù
* 
	mexSËDexCacheE¼Ü
;

312 
CÏssObjeù
* 
	mexSŒšgIndexOutOfBoundsExû±iÚ
;

313 
CÏssObjeù
* 
	mexThrowabË
;

314 
CÏssObjeù
* 
	mexTy³NÙP»£ÁExû±iÚ
;

315 
CÏssObjeù
* 
	mexUn§tisf›dLškE¼Ü
;

316 
CÏssObjeù
* 
	mexUnsuµÜ‹dO³¿tiÚExû±iÚ
;

317 
CÏssObjeù
* 
	mexV”ifyE¼Ü
;

318 
CÏssObjeù
* 
	mexVœtu®MachšeE¼Ü
;

321 
	mvoffJavaLªgObjeù_equ®s
;

322 
	mvoffJavaLªgObjeù_hashCode
;

323 
	mvoffJavaLªgObjeù_toSŒšg
;

326 
	moffJavaLªgSŒšg_v®ue
;

327 
	moffJavaLªgSŒšg_couÁ
;

328 
	moffJavaLªgSŒšg_off£t
;

329 
	moffJavaLªgSŒšg_hashCode
;

332 
	moffJavaLªgTh»ad_vmTh»ad
;

333 
	moffJavaLªgTh»ad_group
;

334 
	moffJavaLªgTh»ad_d«mÚ
;

335 
	moffJavaLªgTh»ad_Çme
;

336 
	moffJavaLªgTh»ad_´iÜ™y
;

337 
	moffJavaLªgTh»ad_unÿughtHªdËr
;

338 
	moffJavaLªgTh»ad_cÚ‹xtCÏssLßd”
;

339 
	moffJavaLªgTh»ad_by·ss
;

342 
	mvoffJavaLªgTh»ad_run
;

345 
	moffJavaLªgTh»adGroup_Çme
;

346 
	moffJavaLªgTh»adGroup_·»Á
;

349 
	moffJavaLªgVMTh»ad_th»ad
;

350 
	moffJavaLªgVMTh»ad_vmD©a
;

353 
	mvoffJavaLªgTh»adGroup_»moveTh»ad
;

356 
	moffJavaLªgThrowabË_¡ackS‹
;

357 
	moffJavaLªgThrowabË_ÿu£
;

360 
	mvoffJavaLªgCÏssLßd”_lßdCÏss
;

363 
M‘hod
* 
	mm‘hJavaLªgCÏssLßd”_g‘Sy¡emCÏssLßd”
;

366 
	moffJavaLªgReæeùCÚ¡ruùÜ_¦Ù
;

367 
	moffJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
;

368 
	moffJavaLªgReæeùF›ld_¦Ù
;

369 
	moffJavaLªgReæeùF›ld_deşCÏss
;

370 
	moffJavaLªgReæeùM‘hod_¦Ù
;

371 
	moffJavaLªgReæeùM‘hod_deşCÏss
;

374 
	moffJavaLªgRefReã»nû_»ã»Á
;

375 
	moffJavaLªgRefReã»nû_queue
;

376 
	moffJavaLªgRefReã»nû_queueNext
;

377 
	moffJavaLªgRefReã»nû_³ndšgNext
;

380 
	moffJavaLªgRefFš®iz”Reã»nû_zomb›
;

383 
M‘hod
* 
	mm‘hJavaLªgRefReã»nûQueueAdd
;

386 
M‘hod
* 
	mm‘hJavaLªgRefFš®iz”Reã»nûAdd
;

389 
M‘hod
* 
	mm‘hJavaLªgSckT¿ûEËm’t_š™
;

390 
M‘hod
* 
	mm‘hJavaLªgReæeùCÚ¡ruùÜ_š™
;

391 
M‘hod
* 
	mm‘hJavaLªgReæeùF›ld_š™
;

392 
M‘hod
* 
	mm‘hJavaLªgReæeùM‘hod_š™
;

393 
M‘hod
* 
	mm‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
;

396 
M‘hod
*

397 
	mm‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
;

400 
M‘hod
* 
	mm‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
;

403 
	moffJavaLªgReæeùProxy_h
;

406 
	moffJavaIoFeDesütÜ_desütÜ
;

409 
M‘hod
* 
	mm‘hD®vikSy¡emN©iveS¹_maš
;

410 
M‘hod
* 
	mm‘hD®vikSy¡emN©iveS¹_run
;

413 
M‘hod
* 
	mm‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
;

414 
	moffJavaNioBufãr_ÿ·c™y
;

415 
	moffJavaNioBufãr_efãùiveDœeùAdd»ss
;

418 
M‘hod
* 
	mm‘hD®vikDdmcS”v”_di¥©ch
;

419 
M‘hod
* 
	mm‘hD®vikDdmcS”v”_brßdÿ¡
;

422 
	moffD®vikDdmcChunk_ty³
;

423 
	moffD®vikDdmcChunk_d©a
;

424 
	moffD®vikDdmcChunk_off£t
;

425 
	moffD®vikDdmcChunk_Ëngth
;

440 
Th»ad
* 
	mth»adLi¡
;

441 
±h»ad_mu‹x_t
 
	mth»adLi¡Lock
;

443 
±h»ad_cÚd_t
 
	mth»adS¹CÚd
;

461 
±h»ad_mu‹x_t
 
	m_th»adSu¥’dLock
;

471 
±h»ad_mu‹x_t
 
	mth»adSu¥’dCouÁLock
;

479 
±h»ad_cÚd_t
 
	mth»adSu¥’dCouÁCÚd
;

485 
	msumTh»adSu¥’dCouÁ
;

501 
B™VeùÜ
* 
	mth»adIdM­
;

508 
	mnÚD«mÚTh»adCouÁ
;

509 
±h»ad_cÚd_t
 
	mvmEx™CÚd
;

514 
HashTabË
* 
	mu£rDexFes
;

519 
IndœeùRefTabË
 
	mjniGlob®RefTabË
;

520 
IndœeùRefTabË
 
	mjniW—kGlob®RefTabË
;

521 
±h»ad_mu‹x_t
 
	mjniGlob®RefLock
;

522 
±h»ad_mu‹x_t
 
	mjniW—kGlob®RefLock
;

523 
	mjniGlob®RefHiM¬k
;

524 
	mjniGlob®RefLoM¬k
;

529 
Reã»nûTabË
 
	mjniPšRefTabË
;

530 
±h»ad_mu‹x_t
 
	mjniPšRefLock
;

535 
HashTabË
* 
	mÇtiveLibs
;

541 
±h»ad_mu‹x_t
 
	mgcH—pLock
;

547 
±h»ad_cÚd_t
 
	mgcH—pCÚd
;

550 
GcH—p
* 
	mgcH—p
;

553 
u1
* 
	mbŸ£dC¬dTabËBa£
;

558 
Objeù
* 
	moutOfMemÜyObj
;

559 
Objeù
* 
	mš‹º®E¼ÜObj
;

560 
Objeù
* 
	mnoCÏssDefFoundE¼ÜObj
;

563  
MÚ™Ü
* 
	mmÚ™ÜLi¡
;

566 
MÚ™Ü
* 
	mth»adSË•MÚ
;

569 
boŞ
 
	mÃwZygÙeH—pAÎoÿ‹d
;

574 
±h»ad_key_t
 
	m±h»adKeyS–f
;

579 
AtomicCache
* 
	mš¡ªûofCache
;

582 
IÆšeSub
* 
	mšlšeSubs
;

587 
Lš—rAÎocHdr
* 
	mpBoÙLßd”AÎoc
;

592 
	mnumLßdedCÏs£s
;

593 
	mnumDeş¬edM‘hods
;

594 
	mnumDeş¬edIn¡F›lds
;

595 
	mnumDeş¬edSticF›lds
;

598 
boŞ
 
	mÇtiveDebugg”Aùive
;

607 
boŞ
 
	mdebugg”CÚÃùed
;

608 
boŞ
 
	mdebugg”Aùive
;

609 
JdwpS‹
* 
	mjdwpS‹
;

614 
HashTabË
* 
	mdbgRegi¡ry
;

619 
B»akpoštS‘
* 
	mb»akpoštS‘
;

626 
S‹pCÚŒŞ
 
	m¡•CÚŒŞ
;

631 
boŞ
 
	mddmTh»adNÙifiÿtiÚ
;

636 
boŞ
 
	mzygÙe
;

643 
±h»ad_mu‹x_t
 
	m®locT¿ck”Lock
;

644 
AÎocRecÜd
* 
	m®locRecÜds
;

645 
	m®locRecÜdH—d
;

646 
	m®locRecÜdCouÁ
;

657 vŞ©
	maùiveProf”s
;

662 
M‘hodT¿ûS‹
 
	mm‘hodT¿û
;

663 
M‘hod
* 
	mm‘hodT¿ûGcM‘hod
;

664 
M‘hod
* 
	mm‘hodT¿ûCÏssP»pM‘hod
;

669 * 
	memuÏtÜT¿ûPage
;

670 
	memuÏtÜT¿ûEÇbËCouÁ
;

675 
AÎocProfS‹
 
	m®locProf
;

683 
M‘hod
** 
	mšlšedM‘hods
;

688 * 
	mexecu‹dIn¡rCouÁs
;

689 
	mš¡ruùiÚCouÁEÇbËCouÁ
;

694 
±h»ad_t
 
	msigÇlC©ch”HªdË
;

695 
boŞ
 
	mh®tSigÇlC©ch”
;

700 
boŞ
 
	mh®tStdioCÚv”‹r
;

701 
boŞ
 
	m¡dioCÚv”‹rR—dy
;

702 
±h»ad_t
 
	m¡dioCÚv”‹rHªdË
;

703 
±h»ad_mu‹x_t
 
	m¡dioCÚv”‹rLock
;

704 
±h»ad_cÚd_t
 
	m¡dioCÚv”‹rCÚd
;

705 
	m¡doutPe
[2];

706 
	m¡d”rPe
[2];

712 
pid_t
 
	msy¡emS”v”Pid
;

714 
	mk”ÃlGroupSchedulšg
;

717 #ifdeà
COUNT_PRECISE_METHODS


718 
Poš‹rS‘
* 
	m´eci£M‘hods
;

722 * 
	m»gi¡”M­Sts
;

724 #ifdeà
VERIFIER_STATS


725 
V”if›rSts
 
	mv”if›rSts
;

729 cÚ¡ *
	mÏ¡Mes§ge
;

730 (*
	mshadowHook
)(
	mObjeù
*);

731 (*
	mÃwObjHook
)(
	mObjeù
*);

732 (*
	mä“ObjHook
)(
	mObjeù
*, 
	mTh»ad
*);

733 (*
	mth»adEndHook
)(
	mTh»ad
*);

734 (*
	mvmS¹Hook
)(
	mJavaVM
*);

735 (*
	mvmEndHook
)(
	mJavaVM
*);

736 (*
	mvmIn™Hook
)(
	mJavaVM
*);

737 (*
	mşassfeLßdHook
)(const *, );

738 (*
	mşassIn™Hook
)(
CÏssObjeù
* 
	mşazz
);

739 
boŞ
 
	misShadow
;

740 
±h»ad_mu‹x_t
 
	ms_mtx
;

743 
DvmGlob®s
 
gDvm
;

745 #ià
defšed
(
WITH_JIT
)

748 
	eT¿ûProfšgModes
 {

749 
	mkT¿ûProfšgDi§bËd
 = 0,

750 
	mkT¿ûProfšgP”iodicOff
 = 1,

751 
	mkT¿ûProfšgCÚtšuous
 = 2,

752 
	mkT¿ûProfšgP”iodicOn
 = 3

760 
	eNoChašEx™s
 {

761 
	mkIÆšeCacheMiss
 = 0,

762 
	mkC®ls™eIÁ”´‘ed
,

763 
	mkSw™chOv”æow
,

764 
	mkH—vyweightMÚ™Ü
,

765 
	mkNoChašEx™La¡
,

771 
	sDvmJ™Glob®s
 {

787 
±h»ad_mu‹x_t
 
	mbËLock
;

791 
J™EÁry
 *
	mpJ™EÁryTabË
;

794 *
	mpProfTabË
;

797 
J™T¿ûProfCouÁ”s
 *
	mpJ™T¿ûProfCouÁ”s
;

800 *
	mpProfTabËCİy
;

803 
	mj™TabËSize
;

806 
	mj™TabËMask
;

809 
	mj™TabËEÁr›sU£d
;

812 
	mcodeCacheSize
;

815 
	mth»shŞd
;

818 
boŞ
 
	mh®tComp”Th»ad
;

819 
boŞ
 
	mblockšgMode
;

820 
boŞ
 
	mm‘hodT¿ûSuµÜt
;

821 
boŞ
 
	mg’Su¥’dPŞl
;

822 
Th»ad
* 
	mcomp”Th»ad
;

823 
±h»ad_t
 
	mcomp”HªdË
;

824 
±h»ad_mu‹x_t
 
	mcomp”Lock
;

825 
±h»ad_mu‹x_t
 
	mcomp”ICP©chLock
;

826 
±h»ad_cÚd_t
 
	mcomp”QueueAùiv™y
;

827 
±h»ad_cÚd_t
 
	mcomp”QueueEm±y
;

828 vŞ©
	mcomp”QueueL’gth
;

829 
	mcomp”HighW©”
;

830 
	mcomp”WÜkEnqueueIndex
;

831 
	mcomp”WÜkDequeueIndex
;

832 
	mcomp”ICP©chIndex
;

835 
	mcomp”MaxQueued
;

836 
	mŒª¦©iÚChašs
;

839 * 
	mcodeCache
;

850 *
	mšæightBa£Addr
;

853 
	mÿcheV”siÚ
;

856 
	m‹m¶©eSize
;

859 
	mcodeCacheBy‹U£d
;

862 
	mnumComp©iÚs
;

865 
boŞ
 
	mcodeCacheFuÎ
;

868 
	m·geSizeMask
;

871 
±h»ad_mu‹x_t
 
	mcodeCachePrÙeùiÚLock
;

874 
	mnumCodeCacheRe£t
;

877 
	mnumCodeCacheRe£tD–ayed
;

880 
boŞ
 
	mšşudeS–eùedOp
;

883 
boŞ
 
	mšşudeS–eùedM‘hod
;

886 
	mİLi¡
[(
kNumPackedOpcodes
+7)/8];

889 
HashTabË
 *
	mm‘hodTabË
;

892 
boŞ
 
	m´štMe
;

895 
boŞ
 
	m»ûivedSIGUSR2
;

898 
T¿ûProfšgModes
 
	m´ofeMode
;

901 
	m´ofeCouÁdown
;

904 
	mdi§bËO±
;

907 
HashTabË
* 
	mm‘hodStsTabË
;

910 
boŞ
 
	mcheckC®lG¿ph
;

913 vŞ©
boŞ
 
	mhasNewChaš
;

915 #ià
defšed
(
WITH_SELF_VERIFICATION
)

917 vŞ©
boŞ
 
	m£lfV”ifiÿtiÚSpš
;

921 
boŞ
 
	mruÂšgInAndroidF¿mewÜk
;

924 
boŞ
 
	m®»adyEÇbËdVŸF¿mewÜk
;

927 
boŞ
 
	mdi§bËJ™
;

929 #ià
defšed
(
SIGNATURE_BREAKPOINT
)

931 
u4
 
	msigÇtu»B»akpoštSize
;

932 
u4
 *
	msigÇtu»B»akpošt
;

935 #ià
defšed
(
WITH_JIT_TUNING
)

937 
	maddrLookupsFound
;

938 
	maddrLookupsNÙFound
;

939 
	mnoChašEx™
[
kNoChašEx™La¡
];

940 
	mnÜm®Ex™
;

941 
	mpuÁEx™
;

942 
	mšvokeMÚomÜphic
;

943 
	mšvokePŞymÜphic
;

944 
	mšvokeN©ive
;

945 
	mšvokeMÚoG‘‹rIÆšed
;

946 
	mšvokeMÚoS‘‹rIÆšed
;

947 
	mšvokePŞyG‘‹rIÆšed
;

948 
	mšvokePŞyS‘‹rIÆšed
;

949 
	m»tuºOp
;

950 
	micP©chIn™
;

951 
	micP©chLockF»e
;

952 
	micP©chQueued
;

953 
	micP©chRejeùed
;

954 
	micP©chDrİ³d
;

955 
	mcodeCacheP©ches
;

956 
	mnumComp”Th»adBlockGC
;

957 
u8
 
	mj™Time
;

958 
u8
 
	mcomp”Th»adBlockGCS¹
;

959 
u8
 
	mcomp”Th»adBlockGCTime
;

960 
u8
 
	mmaxComp”Th»adBlockGCTime
;

966 
Comp”WÜkOrd”
 
	mcomp”WÜkQueue
[
COMPILER_WORK_QUEUE_SIZE
];

969 
ICP©chWÜkOrd”
 
	mcomp”ICP©chQueue
[
COMPILER_IC_PATCH_QUEUE_SIZE
];

972 
DvmJ™Glob®s
 
gDvmJ™
;

974 #ià
defšed
(
WITH_JIT_TUNING
)

975 
gDvmICH™CouÁ
;

980 
	sDvmJniGlob®s
 {

981 
boŞ
 
	mu£CheckJni
;

982 
boŞ
 
	mw¬nOÆy
;

983 
boŞ
 
	mfÜûCİy
;

986 
boŞ
 
	mwÜkAroundAµJniBugs
;

989 
boŞ
 
	mlogThœdP¬tyJni
;

992 
JavaVM
* 
	mjniVm
;

995 
DvmJniGlob®s
 
gDvmJni
;

	@vm/Hash.cpp

21 
	~"D®vik.h
"

23 
	~<¡dlib.h
>

28 
	#LOAD_NUMER
 5

29 
	#LOAD_DENOM
 8

	)

36 
size_t
 
	$dvmHashSize
(
size_t
 
size
) {

37  (
size
 * 
LOAD_DENOM
è/ 
LOAD_NUMER
 +1;

38 
	}
}

44 
HashTabË
* 
	$dvmHashTabËC»©e
(
size_t
 
š™ŸlSize
, 
HashF»eFunc
 
ä“Func
)

46 
HashTabË
* 
pHashTabË
;

48 
	`as£¹
(
š™ŸlSize
 > 0);

50 
pHashTabË
 = (
HashTabË
*è
	`m®loc
((*pHashTable));

51 ià(
pHashTabË
 =ğ
NULL
)

52  
NULL
;

54 
	`dvmIn™Mu‹x
(&
pHashTabË
->
lock
);

56 
pHashTabË
->
bËSize
 = 
	`dexRoundUpPow”2
(
š™ŸlSize
);

57 
pHashTabË
->
numEÁr›s
 =…HashTabË->
numD—dEÁr›s
 = 0;

58 
pHashTabË
->
ä“Func
 = freeFunc;

59 
pHashTabË
->
pEÁr›s
 =

60 (
HashEÁry
*è
	`ÿÎoc
(
pHashTabË
->
bËSize
, (HashEntry));

61 ià(
pHashTabË
->
pEÁr›s
 =ğ
NULL
) {

62 
	`ä“
(
pHashTabË
);

63  
NULL
;

66  
pHashTabË
;

67 
	}
}

72 
	$dvmHashTabËCË¬
(
HashTabË
* 
pHashTabË
)

74 
HashEÁry
* 
pEÁ
;

75 
i
;

77 
pEÁ
 = 
pHashTabË
->
pEÁr›s
;

78 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++, 
pEÁ
++) {

79 ià(
pEÁ
->
d©a
 =ğ
HASH_TOMBSTONE
) {

81 
pEÁ
->
d©a
 = 
NULL
;

82 } ià(
pEÁ
->
d©a
 !ğ
NULL
) {

84 ià(
pHashTabË
->
ä“Func
 !ğ
NULL
)

85 (*
pHashTabË
->
ä“Func
)(
pEÁ
->
d©a
);

86 
pEÁ
->
d©a
 = 
NULL
;

90 
pHashTabË
->
numEÁr›s
 = 0;

91 
pHashTabË
->
numD—dEÁr›s
 = 0;

92 
	}
}

97 
	$dvmHashTabËF»e
(
HashTabË
* 
pHashTabË
)

99 ià(
pHashTabË
 =ğ
NULL
)

101 
	`dvmHashTabËCË¬
(
pHashTabË
);

102 
	`ä“
(
pHashTabË
->
pEÁr›s
);

103 
	`ä“
(
pHashTabË
);

104 
	}
}

106 #iâdeà
NDEBUG


110 
	$couÁTombStÚes
(
HashTabË
* 
pHashTabË
)

112 
i
, 
couÁ
;

114 
couÁ
 = 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

115 ià(
pHashTabË
->
pEÁr›s
[
i
].
d©a
 =ğ
HASH_TOMBSTONE
)

116 
couÁ
++;

118  
couÁ
;

119 
	}
}

132 
boŞ
 
	$»sizeHash
(
HashTabË
* 
pHashTabË
, 
ÃwSize
)

134 
HashEÁry
* 
pNewEÁr›s
;

135 
i
;

137 
	`as£¹
(
	`couÁTombStÚes
(
pHashTabË
è=ğpHashTabË->
numD—dEÁr›s
);

140 
pNewEÁr›s
 = (
HashEÁry
*è
	`ÿÎoc
(
ÃwSize
, (HashEntry));

141 ià(
pNewEÁr›s
 =ğ
NULL
)

142  
çl£
;

144 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

145 * 
d©a
 = 
pHashTabË
->
pEÁr›s
[
i
].data;

146 ià(
d©a
 !ğ
NULL
 && d©¨!ğ
HASH_TOMBSTONE
) {

147 
hashV®ue
 = 
pHashTabË
->
pEÁr›s
[
i
].hashValue;

148 
ÃwIdx
;

151 
ÃwIdx
 = 
hashV®ue
 & (
ÃwSize
-1);

152 
pNewEÁr›s
[
ÃwIdx
].
d©a
 !ğ
NULL
)

153 
ÃwIdx
 = (ÃwIdx + 1è& (
ÃwSize
-1);

155 
pNewEÁr›s
[
ÃwIdx
].
hashV®ue
 = hashValue;

156 
pNewEÁr›s
[
ÃwIdx
].
d©a
 = data;

160 
	`ä“
(
pHashTabË
->
pEÁr›s
);

161 
pHashTabË
->
pEÁr›s
 = 
pNewEÁr›s
;

162 
pHashTabË
->
bËSize
 = 
ÃwSize
;

163 
pHashTabË
->
numD—dEÁr›s
 = 0;

165 
	`as£¹
(
	`couÁTombStÚes
(
pHashTabË
) == 0);

166  
Œue
;

167 
	}
}

174 * 
	$dvmHashTabËLookup
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
,

175 
HashCom·»Func
 
cmpFunc
, 
boŞ
 
doAdd
)

177 
HashEÁry
* 
pEÁry
;

178 
HashEÁry
* 
pEnd
;

179 * 
»suÉ
 = 
NULL
;

181 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

182 
	`as£¹
(
™em
 !ğ
HASH_TOMBSTONE
);

183 
	`as£¹
(
™em
 !ğ
NULL
);

186 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

187 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

188 
pEÁry
->
d©a
 !ğ
NULL
) {

189 ià(
pEÁry
->
d©a
 !ğ
HASH_TOMBSTONE
 &&

190 
pEÁry
->
hashV®ue
 =ğ
™emHash
 &&

191 (*
cmpFunc
)(
pEÁry
->
d©a
, 
™em
) == 0)

198 
pEÁry
++;

199 ià(
pEÁry
 =ğ
pEnd
) {

200 ià(
pHashTabË
->
bËSize
 == 1)

202 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

208 ià(
pEÁry
->
d©a
 =ğ
NULL
) {

209 ià(
doAdd
) {

210 
pEÁry
->
hashV®ue
 = 
™emHash
;

211 
pEÁry
->
d©a
 = 
™em
;

212 
pHashTabË
->
numEÁr›s
++;

217 ià((
pHashTabË
->
numEÁr›s
+pHashTabË->
numD—dEÁr›s
è* 
LOAD_DENOM


218 > 
pHashTabË
->
bËSize
 * 
LOAD_NUMER
)

220 ià(!
	`»sizeHash
(
pHashTabË
,…HashTabË->
bËSize
 * 2)) {

222 
	`ALOGE
("Dalvik hash„esize failure");

223 
	`dvmAbÜt
();

233 
	`as£¹
(
pHashTabË
->
numEÁr›s
 <…HashTabË->
bËSize
);

234 
»suÉ
 = 
™em
;

236 
	`as£¹
(
»suÉ
 =ğ
NULL
);

239 
»suÉ
 = 
pEÁry
->
d©a
;

242  
»suÉ
;

243 
	}
}

250 
boŞ
 
	$dvmHashTabËRemove
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
)

252 
HashEÁry
* 
pEÁry
;

253 
HashEÁry
* 
pEnd
;

255 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

258 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

259 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

260 
pEÁry
->
d©a
 !ğ
NULL
) {

261 ià(
pEÁry
->
d©a
 =ğ
™em
) {

263 
pEÁry
->
d©a
 = 
HASH_TOMBSTONE
;

264 
pHashTabË
->
numEÁr›s
--;

265 
pHashTabË
->
numD—dEÁr›s
++;

266  
Œue
;

269 
pEÁry
++;

270 ià(
pEÁry
 =ğ
pEnd
) {

271 ià(
pHashTabË
->
bËSize
 == 1)

273 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

279  
çl£
;

280 
	}
}

291 
	$dvmHashFÜ—chRemove
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chRemoveFunc
 
func
)

293 
i
, 
v®
;

295 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

296 
HashEÁry
* 
pEÁ
 = &
pHashTabË
->
pEÁr›s
[
i
];

298 ià(
pEÁ
->
d©a
 !ğ
NULL
 &&…EÁ->d©¨!ğ
HASH_TOMBSTONE
) {

299 
v®
 = (*
func
)(
pEÁ
->
d©a
);

300 ià(
v®
 == 1) {

301 
pEÁ
->
d©a
 = 
HASH_TOMBSTONE
;

302 
pHashTabË
->
numEÁr›s
--;

303 
pHashTabË
->
numD—dEÁr›s
++;

305 ià(
v®
 != 0) {

306  
v®
;

311 
	}
}

319 
	$dvmHashFÜ—ch
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chFunc
 
func
, * 
¬g
)

321 
i
, 
v®
;

323 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

324 
HashEÁry
* 
pEÁ
 = &
pHashTabË
->
pEÁr›s
[
i
];

326 ià(
pEÁ
->
d©a
 !ğ
NULL
 &&…EÁ->d©¨!ğ
HASH_TOMBSTONE
) {

327 
v®
 = (*
func
)(
pEÁ
->
d©a
, 
¬g
);

328 ià(
v®
 != 0)

329  
v®
;

334 
	}
}

342 
	$couÁProbes
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, cÚ¡ * 
™em
,

343 
HashCom·»Func
 
cmpFunc
)

345 
HashEÁry
* 
pEÁry
;

346 
HashEÁry
* 
pEnd
;

347 
couÁ
 = 0;

349 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

350 
	`as£¹
(
™em
 !ğ
HASH_TOMBSTONE
);

351 
	`as£¹
(
™em
 !ğ
NULL
);

354 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

355 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

356 
pEÁry
->
d©a
 !ğ
NULL
) {

357 ià(
pEÁry
->
d©a
 !ğ
HASH_TOMBSTONE
 &&

358 
pEÁry
->
hashV®ue
 =ğ
™emHash
 &&

359 (*
cmpFunc
)(
pEÁry
->
d©a
, 
™em
) == 0)

365 
pEÁry
++;

366 ià(
pEÁry
 =ğ
pEnd
) {

367 ià(
pHashTabË
->
bËSize
 == 1)

369 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

372 
couÁ
++;

374 ià(
pEÁry
->
d©a
 =ğ
NULL
)

377  
couÁ
;

378 
	}
}

388 
	$dvmHashTabËProbeCouÁ
(
HashTabË
* 
pHashTabË
, 
HashC®cFunc
 
ÿlcFunc
,

389 
HashCom·»Func
 
cmpFunc
)

391 
numEÁr›s
, 
mšProbe
, 
maxProbe
, 
tÙ®Probe
;

392 
HashI‹r
 
™”
;

394 
numEÁr›s
 = 
maxProbe
 = 
tÙ®Probe
 = 0;

395 
mšProbe
 = 65536*32767;

397 
	`dvmHashI‹rBegš
(
pHashTabË
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

398 
	`dvmHashI‹rNext
(&
™”
))

400 cÚ¡ * 
d©a
 = (cÚ¡ *)
	`dvmHashI‹rD©a
(&
™”
);

401 
couÁ
;

403 
couÁ
 = 
	`couÁProbes
(
pHashTabË
, (*
ÿlcFunc
)(
d©a
), d©a, 
cmpFunc
);

405 
numEÁr›s
++;

407 ià(
couÁ
 < 
mšProbe
)

408 
mšProbe
 = 
couÁ
;

409 ià(
couÁ
 > 
maxProbe
)

410 
maxProbe
 = 
couÁ
;

411 
tÙ®Probe
 +ğ
couÁ
;

414 
	`ALOGI
("Probe: min=%d max=%d,otal=%d in %d (%d),‡vg=%.3f",

415 
mšProbe
, 
maxProbe
, 
tÙ®Probe
, 
numEÁr›s
, 
pHashTabË
->
bËSize
,

416 (è
tÙ®Probe
 / (è
numEÁr›s
);

417 
	}
}

	@vm/Hash.h

22 #iâdeà
DALVIK_HASH_H_


23 
	#DALVIK_HASH_H_


	)

26 
	$u4
 (*
	tHashCompu‹
)(cÚ¡ * 
	t™em
);

33 (*
	tHashCom·»Func
)(cÚ¡ * 
	tbËI‹m
, cÚ¡ * 
	tloo£I‹m
);

39 (*
	tHashF»eFunc
)(* 
	t±r
);

44 (*
	tHashFÜ—chFunc
)(* 
	td©a
, * 
	t¬g
);

49 (*
	tHashFÜ—chRemoveFunc
)(* 
	td©a
);

61 
	sHashEÁry
 {

62 
u4
 
hashV®ue
;

63 * 
d©a
;

66 
	#HASH_TOMBSTONE
 ((*) 0xcbcacccd)

67 

	)

73 
	sHashTabË
 {

74 
bËSize
;

75 
numEÁr›s
;

76 
numD—dEÁr›s
;

77 
HashEÁry
* 
pEÁr›s
;

78 
HashF»eFunc
 
ä“Func
;

79 
±h»ad_mu‹x_t
 
lock
;

90 
HashTabË
* 
	`dvmHashTabËC»©e
(
size_t
 
š™ŸlSize
, 
HashF»eFunc
 
ä“Func
);

98 
size_t
 
	`dvmHashSize
(size_ˆ
size
);

103 
	`dvmHashTabËCË¬
(
HashTabË
* 
pHashTabË
);

108 
	`dvmHashTabËF»e
(
HashTabË
* 
pHashTabË
);

114 
INLINE
 
	$dvmHashTabËLock
(
HashTabË
* 
pHashTabË
) {

115 
	`dvmLockMu‹x
(&
pHashTabË
->
lock
);

116 
	}
}

117 
INLINE
 
	$dvmHashTabËUÆock
(
HashTabË
* 
pHashTabË
) {

118 
	`dvmUÆockMu‹x
(&
pHashTabË
->
lock
);

119 
	}
}

124 
INLINE
 
	$dvmHashTabËNumEÁr›s
(
HashTabË
* 
pHashTabË
) {

125  
pHashTabË
->
numEÁr›s
;

126 
	}
}

131 
INLINE
 
	$dvmHashTabËMemU§ge
(
HashTabË
* 
pHashTabË
) {

132  (
HashTabË
è+ 
pHashTabË
->
bËSize
 * (
HashEÁry
);

133 
	}
}

145 * 
dvmHashTabËLookup
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
,

146 
HashCom·»Func
 
cmpFunc
, 
boŞ
 
doAdd
);

152 
boŞ
 
dvmHashTabËRemove
(
HashTabË
* 
pHashTabË
, 
u4
 
hash
, * 
™em
);

159 
dvmHashFÜ—ch
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chFunc
 
func
, * 
¬g
);

169 
dvmHashFÜ—chRemove
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chRemoveFunc
 
func
);

182 
	sHashI‹r
 {

183 * 
	md©a
;

184 
HashTabË
* 
	mpHashTabË
;

185 
	midx
;

187 
INLINE
 
	$dvmHashI‹rNext
(
HashI‹r
* 
pI‹r
) {

188 
i
 = 
pI‹r
->
idx
 +1;

189 
lim
 = 
pI‹r
->
pHashTabË
->
bËSize
;

190  ; 
i
 < 
lim
; i++) {

191 * 
d©a
 = 
pI‹r
->
pHashTabË
->
pEÁr›s
[
i
].data;

192 ià(
d©a
 !ğ
NULL
 && d©¨!ğ
HASH_TOMBSTONE
)

195 
pI‹r
->
idx
 = 
i
;

196 
	}
}

197 
INLINE
 
	$dvmHashI‹rBegš
(
HashTabË
* 
pHashTabË
, 
HashI‹r
* 
pI‹r
) {

198 
pI‹r
->
pHashTabË
 =…HashTable;

199 
pI‹r
->
idx
 = -1;

200 
	`dvmHashI‹rNext
(
pI‹r
);

201 
	}
}

202 
INLINE
 
boŞ
 
	$dvmHashI‹rDÚe
(
HashI‹r
* 
pI‹r
) {

203  (
pI‹r
->
idx
 >ğpI‹r->
pHashTabË
->
bËSize
);

204 
	}
}

205 
INLINE
 * 
	$dvmHashI‹rD©a
(
HashI‹r
* 
pI‹r
) {

206 
	`as£¹
(
pI‹r
->
idx
 >ğ0 &&…I‹r->idx <…I‹r->
pHashTabË
->
bËSize
);

207  
pI‹r
->
pHashTabË
->
pEÁr›s
[pI‹r->
idx
].
d©a
;

208 
	}
}

217 
	$u4
 (*
	tHashC®cFunc
)(cÚ¡ * 
	t™em
);

218 
	`dvmHashTabËProbeCouÁ
(
HashTabË
* 
pHashTabË
, 
HashC®cFunc
 
ÿlcFunc
,

219 
HashCom·»Func
 
cmpFunc
);

	@vm/IndirectRefTable.cpp

20 
	~"D®vik.h
"

22 
	$abÜtMaybe
() {

25 ià(!
gDvmJni
.
u£CheckJni
) {

26 
	`dvmAbÜt
();

28 
	}
}

30 
boŞ
 
	gIndœeùRefTabË
::
	$š™
(
size_t
 
š™ŸlCouÁ
,

31 
size_t
 
maxCouÁ
, 
IndœeùRefKšd
 
desœedKšd
)

33 
	`as£¹
(
š™ŸlCouÁ
 > 0);

34 
	`as£¹
(
š™ŸlCouÁ
 <ğ
maxCouÁ
);

35 
	`as£¹
(
desœedKšd
 !ğ
kIndœeùKšdInv®id
);

37 
bË_
 = (
IndœeùRefSlÙ
*è
	`m®loc
(
š™ŸlCouÁ
 * (IndirectRefSlot));

38 ià(
bË_
 =ğ
NULL
) {

39  
çl£
;

41 
	`mem£t
(
bË_
, 0xd1, 
š™ŸlCouÁ
 * (
IndœeùRefSlÙ
));

43 
£gm’tS‹
.
®l
 = 
IRT_FIRST_SEGMENT
;

44 
®loc_’Œ›s_
 = 
š™ŸlCouÁ
;

45 
max_’Œ›s_
 = 
maxCouÁ
;

46 
kšd_
 = 
desœedKšd
;

48  
Œue
;

49 
	}
}

54 
	gIndœeùRefTabË
::
	$de¡roy
()

56 
	`ä“
(
bË_
);

57 
bË_
 = 
NULL
;

58 
®loc_’Œ›s_
 = 
max_’Œ›s_
 = -1;

59 
	}
}

61 
IndœeùRef
 
	gIndœeùRefTabË
::
	$add
(
u4
 
cook›
, 
Objeù
* 
obj
)

63 
IRTSegm’tS‹
 
´evS‹
;

64 
´evS‹
.
®l
 = 
cook›
;

65 
size_t
 
tİIndex
 = 
£gm’tS‹
.
·¹s
.topIndex;

67 
	`as£¹
(
obj
 !ğ
NULL
);

68 
	`as£¹
(
	`dvmIsH—pAdd»ss
(
obj
));

69 
	`as£¹
(
bË_
 !ğ
NULL
);

70 
	`as£¹
(
®loc_’Œ›s_
 <ğ
max_’Œ›s_
);

71 
	`as£¹
(
£gm’tS‹
.
·¹s
.
numHŞes
 >ğ
´evS‹
.parts.numHoles);

78 
IndœeùRef
 
»suÉ
;

79 
IndœeùRefSlÙ
* 
¦Ù
;

80 
numHŞes
 = 
£gm’tS‹
.
·¹s
.numHŞe - 
´evS‹
.parts.numHoles;

81 ià(
numHŞes
 > 0) {

82 
	`as£¹
(
tİIndex
 > 1);

85 
¦Ù
 = &
bË_
[
tİIndex
 - 1];

86 
	`as£¹
(
¦Ù
->
obj
 !ğ
NULL
);

87 (--
¦Ù
)->
obj
 !ğ
NULL
) {

88 
	`as£¹
(
¦Ù
 >ğ
bË_
 + 
´evS‹
.
·¹s
.
tİIndex
);

90 
£gm’tS‹
.
·¹s
.
numHŞes
--;

93 ià(
tİIndex
 =ğ
®loc_’Œ›s_
) {

95 ià(
tİIndex
 =ğ
max_’Œ›s_
) {

96 
	`ALOGE
("JNI ERROR (app bug): %s„eferenceable overflow (max=%d)",

97 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
max_’Œ›s_
);

98  
NULL
;

101 
size_t
 
ÃwSize
 = 
®loc_’Œ›s_
 * 2;

102 ià(
ÃwSize
 > 
max_’Œ›s_
) {

103 
ÃwSize
 = 
max_’Œ›s_
;

105 
	`as£¹
(
ÃwSize
 > 
®loc_’Œ›s_
);

107 
IndœeùRefSlÙ
* 
ÃwTabË
 =

108 (
IndœeùRefSlÙ
*è
	`»®loc
(
bË_
, 
ÃwSize
 * (IndirectRefSlot));

109 ià(
bË_
 =ğ
NULL
) {

110 
	`ALOGE
("JNI ERROR (app bug): unableoƒxpand %s„eferenceable "

112 
	`šdœeùRefKšdToSŒšg
(
kšd_
),

113 
®loc_’Œ›s_
, 
ÃwSize
, 
max_’Œ›s_
);

114  
NULL
;

117 
	`mem£t
(
ÃwTabË
 + 
®loc_’Œ›s_
, 0xd1,

118 (
ÃwSize
 - 
®loc_’Œ›s_
è* (
IndœeùRefSlÙ
));

120 
®loc_’Œ›s_
 = 
ÃwSize
;

121 
bË_
 = 
ÃwTabË
;

123 
¦Ù
 = &
bË_
[
tİIndex
++];

124 
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex;

127 
¦Ù
->
obj
 = obj;

128 
¦Ù
->
£rŸl
 = 
	`ÃxtS”Ÿl
(slot->serial);

129 
»suÉ
 = 
	`toIndœeùRef
(
¦Ù
 - 
bË_
, slÙ->
£rŸl
, 
kšd_
);

131 
	`as£¹
(
»suÉ
 !ğ
NULL
);

132  
»suÉ
;

133 
	}
}

140 
Objeù
* 
	gIndœeùRefTabË
::
	$g‘
(
IndœeùRef
 
œef
) const {

141 
IndœeùRefKšd
 
kšd
 = 
	`šdœeùRefKšd
(
œef
);

142 ià(
kšd
 !ğ
kšd_
) {

143 ià(
œef
 =ğ
NULL
) {

144 
	`ALOGW
("A‰em±Ølook u°NULL % »ã»nû", 
	`šdœeùRefKšdToSŒšg
(
kšd_
));

145  
kInv®idIndœeùRefObjeù
;

147 ià(
kšd
 =ğ
kIndœeùKšdInv®id
) {

148 
	`ALOGE
("JNI ERROR (app bug): invalid %s„eference %p",

149 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
);

150 
	`abÜtMaybe
();

151  
kInv®idIndœeùRefObjeù
;

154  
kInv®idIndœeùRefObjeù
;

157 
u4
 
tİIndex
 = 
£gm’tS‹
.
·¹s
.topIndex;

158 
u4
 
šdex
 = 
	`exŒaùIndex
(
œef
);

159 ià(
šdex
 >ğ
tİIndex
) {

161 
	`ALOGE
("JNI ERROR (app bug):‡ccessed stale %s„eference %p (index %d in‡able of size %d)",

162 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
, 
šdex
, 
tİIndex
);

163 
	`abÜtMaybe
();

164  
kInv®idIndœeùRefObjeù
;

167 
Objeù
* 
obj
 = 
bË_
[
šdex
].obj;

168 ià(
obj
 =ğ
NULL
) {

169 
	`ALOGI
("JNI ERROR (app bug):‡ccessed deleted %s„eference %p",

170 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
);

171 
	`abÜtMaybe
();

172  
kInv®idIndœeùRefObjeù
;

175 
u4
 
£rŸl
 = 
	`exŒaùS”Ÿl
(
œef
);

176 ià(
£rŸl
 !ğ
bË_
[
šdex
].serial) {

177 
	`ALOGE
("JNI ERROR (app bug):‡ttempto use stale %s„eference %p",

178 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
);

179 
	`abÜtMaybe
();

180  
kInv®idIndœeùRefObjeù
;

183  
obj
;

184 
	}
}

186 
	$fšdObjeù
(cÚ¡ 
Objeù
* 
obj
, 
bÙtomIndex
, 
tİIndex
,

187 cÚ¡ 
IndœeùRefSlÙ
* 
bË
) {

188 
i
 = 
bÙtomIndex
; i < 
tİIndex
; ++i) {

189 ià(
bË
[
i
].
obj
 == obj) {

190  
i
;

194 
	}
}

196 
boŞ
 
	gIndœeùRefTabË
::
	$cÚšs
(cÚ¡ 
Objeù
* 
obj
) const {

197  
	`fšdObjeù
(
obj
, 0, 
£gm’tS‹
.
·¹s
.
tİIndex
, 
bË_
) >= 0;

198 
	}
}

213 
boŞ
 
	gIndœeùRefTabË
::
	$»move
(
u4
 
cook›
, 
IndœeùRef
 
œef
)

215 
IRTSegm’tS‹
 
´evS‹
;

216 
´evS‹
.
®l
 = 
cook›
;

217 
u4
 
tİIndex
 = 
£gm’tS‹
.
·¹s
.topIndex;

218 
u4
 
bÙtomIndex
 = 
´evS‹
.
·¹s
.
tİIndex
;

220 
	`as£¹
(
bË_
 !ğ
NULL
);

221 
	`as£¹
(
®loc_’Œ›s_
 <ğ
max_’Œ›s_
);

222 
	`as£¹
(
£gm’tS‹
.
·¹s
.
numHŞes
 >ğ
´evS‹
.parts.numHoles);

224 
IndœeùRefKšd
 
kšd
 = 
	`šdœeùRefKšd
(
œef
);

225 
u4
 
šdex
;

226 ià(
kšd
 =ğ
kšd_
) {

227 
šdex
 = 
	`exŒaùIndex
(
œef
);

228 ià(
šdex
 < 
bÙtomIndex
) {

230 
	`ALOGV
("Attempto„emove index outside index‡rea (%ud vs %ud-%ud)",

231 
šdex
, 
bÙtomIndex
, 
tİIndex
);

232  
çl£
;

234 ià(
šdex
 >ğ
tİIndex
) {

236 
	`ALOGD
("Attempto„emove invalid index %ud (bottom=%udop=%ud)",

237 
šdex
, 
bÙtomIndex
, 
tİIndex
);

238  
çl£
;

240 ià(
bË_
[
šdex
].
obj
 =ğ
NULL
) {

241 
	`ALOGD
("Attempto„emove cleared %s„eference %p",

242 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
);

243  
çl£
;

245 
u4
 
£rŸl
 = 
	`exŒaùS”Ÿl
(
œef
);

246 ià(
bË_
[
šdex
].
£rŸl
 != serial) {

247 
	`ALOGD
("Attempto„emove stale %s„eference %p",

248 
	`šdœeùRefKšdToSŒšg
(
kšd_
), 
œef
);

249  
çl£
;

251 } ià(
kšd
 =ğ
kIndœeùKšdInv®id
 && 
gDvmJni
.
wÜkAroundAµJniBugs
) {

253 
i
 = 
	`fšdObjeù
(
»š‹½»t_ÿ¡
<
Objeù
*>(
œef
), 
bÙtomIndex
, 
tİIndex
, 
bË_
);

254 ià(
i
 < 0) {

255 
	`ALOGW
("ŒyšgØwÜk‡round‡µ JNI bugs, buˆdidn'ˆfšd %°šabË!", 
œef
);

256  
çl£
;

258 
šdex
 = 
i
;

261  
çl£
;

264 ià(
šdex
 =ğ
tİIndex
 - 1) {

266 
numHŞes
 = 
£gm’tS‹
.
·¹s
.numHŞe - 
´evS‹
.parts.numHoles;

267 ià(
numHŞes
 != 0) {

268 --
tİIndex
 > 
bÙtomIndex
 && 
numHŞes
 != 0) {

269 
	`ALOGV
("+++ checking for hole‡t %d (cookie=0x%08x) val=%p",

270 
tİIndex
-1, 
cook›
, 
bË_
[tİIndex-1].
obj
);

271 ià(
bË_
[
tİIndex
-1].
obj
 !ğ
NULL
) {

274 
	`ALOGV
("+++‡‹ hŞ© %d", 
tİIndex
-1);

275 
numHŞes
--;

277 
£gm’tS‹
.
·¹s
.
numHŞes
 =‚umHŞe + 
´evS‹
.parts.numHoles;

278 
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex;

280 
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex-1;

281 
	`ALOGV
("+++‡‹†a¡ƒÁry %d", 
tİIndex
-1);

289 
bË_
[
šdex
].
obj
 = 
NULL
;

290 
£gm’tS‹
.
·¹s
.
numHŞes
++;

291 
	`ALOGV
("+++†eá hŞ© %d, hŞes=%d", 
šdex
, 
£gm’tS‹
.
·¹s
.
numHŞes
);

294  
Œue
;

295 
	}
}

297 cÚ¡ * 
	$šdœeùRefKšdToSŒšg
(
IndœeùRefKšd
 
kšd
)

299 
kšd
) {

300 
kIndœeùKšdInv®id
:  "invalid";

301 
kIndœeùKšdLoÿl
:  "local";

302 
kIndœeùKšdGlob®
:  "global";

303 
kIndœeùKšdW—kGlob®
:  "weak global";

306 
	}
}

308 
	gIndœeùRefTabË
::
	$dump
(cÚ¡ * 
desü
) const

310 
size_t
 
couÁ
 = 
	`ÿ·c™y
();

311 
Objeù
** 
cİy
 = 
Ãw
 Objeù*[
couÁ
];

312 
size_t
 
i
 = 0; i < 
couÁ
; i++) {

313 
cİy
[
i
] = 
bË_
[i].
obj
;

315 
	`dvmDumpReã»nûTabËCÚ‹Ás
(
cİy
, 
couÁ
, 
desü
);

316 
d–‘e
[] 
cİy
;

317 
	}
}

	@vm/IndirectRefTable.h

17 #iâdeà
DALVIK_INDIRECTREFTABLE_H_


18 
	#DALVIK_INDIRECTREFTABLE_H_


	)

88 * 
	tIndœeùRef
;

91 
	#kInv®idIndœeùRefObjeù
 
»š‹½»t_ÿ¡
<
Objeù
*>(0xd—d4321)

	)

93 
	#kCË¬edJniW—kGlob®
 
»š‹½»t_ÿ¡
<
Objeù
*>(0xd—d1234)

	)

100 
	eIndœeùRefKšd
 {

101 
	mkIndœeùKšdInv®id
 = 0,

102 
	mkIndœeùKšdLoÿl
 = 1,

103 
	mkIndœeùKšdGlob®
 = 2,

104 
	mkIndœeùKšdW—kGlob®
 = 3

106 cÚ¡ * 
šdœeùRefKšdToSŒšg
(
IndœeùRefKšd
 
kšd
);

111 
INLINE
 
IndœeùRefKšd
 
	$šdœeùRefKšd
(
IndœeùRef
 
œef
)

113  (
IndœeùRefKšd
)((
u4
è
œef
 & 0x03);

114 
	}
}

119 
	sIndœeùRefSlÙ
 {

120 
Objeù
* 
	mobj
;

121 
u4
 
	m£rŸl
;

125 
	#IRT_FIRST_SEGMENT
 0

	)

194 
	uIRTSegm’tS‹
 {

195 
u4
 
	m®l
;

197 
u4
 
	mtİIndex
:16;

198 
u4
 
	mnumHŞes
:16;

199 } 
	m·¹s
;

202 şas 
	cœef_™”©Ü
 {

203 
	mpublic
:

204 
ex¶ic™
 
	$œef_™”©Ü
(
IndœeùRefSlÙ
* 
bË
, 
size_t
 
i
, size_ˆ
ÿ·c™y
) :

205 
	`bË_
(
bË
), 
	`i_
(
i
), 
	$ÿ·c™y_
(
ÿ·c™y
) {

206 
	`skNuÎsAndTomb¡Úes
();

209 
œef_™”©Ü
& 
İ”©Ü
++() {

210 ++
i_
;

211 
	`skNuÎsAndTomb¡Úes
();

212  *
this
;

213 
	}
}

215 
Objeù
** 
	gİ”©Ü
*() {

216  &
	gbË_
[
i_
].
	gobj
;

219 
boŞ
 
	$equ®s
(cÚ¡ 
œef_™”©Ü
& 
rhs
) const {

220  (
i_
 =ğ
rhs
.i_ && 
bË_
 ==„hs.table_);

221 
	}
}

223 
	g´iv©e
:

224 
	$skNuÎsAndTomb¡Úes
() {

226 
i_
 < 
ÿ·c™y_
 && (
bË_
[i_].
obj
 =ğ
NULL


227 || 
bË_
[
i_
].
obj
 =ğ
kCË¬edJniW—kGlob®
)) {

228 ++
i_
;

230 
	}
}

232 
IndœeùRefSlÙ
* 
	gbË_
;

233 
size_t
 
	gi_
;

234 
size_t
 
	gÿ·c™y_
;

237 
boŞ
 
šlše
 
	gİ”©Ü
!=(cÚ¡ 
œef_™”©Ü
& 
lhs
, cÚ¡ 
	gœef_™”©Ü
& 
	grhs
) {

238  !
	glhs
.
equ®s
(
rhs
);

241 
	sIndœeùRefTabË
 {

242 
	mpublic
:

243 
œef_™”©Ü
 
	t™”©Ü
;

246 
IRTSegm’tS‹
 
	m£gm’tS‹
;

255 
IndœeùRefSlÙ
* 
	mbË_
;

257 
IndœeùRefKšd
 
	mkšd_
;

259 
size_t
 
	m®loc_’Œ›s_
;

261 
size_t
 
	mmax_’Œ›s_
;

274 
IndœeùRef
 
add
(
u4
 
cook›
, 
Objeù
* 
obj
);

281 
Objeù
* 
g‘
(
IndœeùRef
 
œef
) const;

286 
boŞ
 
cÚšs
(cÚ¡ 
Objeù
* 
obj
) const;

297 
boŞ
 
»move
(
u4
 
cook›
, 
IndœeùRef
 
œef
);

309 
boŞ
 
š™
(
size_t
 
š™ŸlCouÁ
, size_ˆ
maxCouÁ
, 
IndœeùRefKšd
 
kšd
);

318 
de¡roy
();

328 
dump
(cÚ¡ * 
desü
) const;

334 
size_t
 
ÿ·c™y
() const {

335  
	m£gm’tS‹
.
	m·¹s
.
	mtİIndex
;

338 
™”©Ü
 
begš
() {

339  
™”©Ü
(
bË_
, 0, 
ÿ·c™y
());

342 
™”©Ü
 
’d
() {

343  
™”©Ü
(
bË_
, 
ÿ·c™y
(), capacity());

346 
	m´iv©e
:

347 
šlše
 
u4
 
exŒaùIndex
(
IndœeùRef
 
œef
) {

348 
u4
 
u»f
 = (u4è
œef
;

349  (
	mu»f
 >> 2) & 0xffff;

352 
šlše
 
u4
 
exŒaùS”Ÿl
(
IndœeùRef
 
œef
) {

353 
u4
 
	mu»f
 = (u4è
œef
;

354  
	mu»f
 >> 20;

357 
šlše
 
u4
 
ÃxtS”Ÿl
(u4 
£rŸl
) {

358  (
	m£rŸl
 + 1) & 0xfff;

361 
šlše
 
IndœeùRef
 
toIndœeùRef
(
u4
 
šdex
, u4 
£rŸl
, 
IndœeùRefKšd
 
kšd
) {

362 
as£¹
(
šdex
 < 65536);

363  
	m»š‹½»t_ÿ¡
<
	mIndœeùRef
>((
	m£rŸl
 << 20è| (
	mšdex
 << 2è| 
	mkšd
);

	@vm/Init.cpp

20 
	#__STDC_LIMIT_MACROS


	)

21 
	~<¡dlib.h
>

22 
	~<¡dio.h
>

23 
	~<sigÇl.h
>

24 
	~<lim™s.h
>

25 
	~<ùy³.h
>

26 
	~<sys/wa™.h
>

27 
	~<uni¡d.h
>

29 
	~"D®vik.h
"

30 
	~"‹¡/Te¡.h
"

31 
	~"m‹½/M‹½.h
"

32 
	~"Hash.h
"

33 
	~"shadowlib/ShadowLib.h
"

35 
	#kMšH—pS¹Size
 (1*1024*1024)

	)

36 
	#kMšH—pSize
 (2*1024*1024)

	)

37 
	#kMaxH—pSize
 (1*1024*1024*1024)

	)

42 
jniRegi¡”Sy¡emM‘hods
(
JNIEnv
* 
’v
);

45 
boŞ
 
»gi¡”Sy¡emN©ives
(
JNIEnv
* 
pEnv
);

46 
boŞ
 
š™Jdwp
();

47 
boŞ
 
š™ZygÙe
();

51 
DvmGlob®s
 
	ggDvm
;

52 
DvmJniGlob®s
 
	ggDvmJni
;

55 #ià
defšed
(
WITH_JIT
)

56 
DvmJ™Glob®s
 
	ggDvmJ™
;

58 #ià
defšed
(
WITH_JIT_TUNING
)

63 
	ggDvmICH™CouÁ
;

73 
	$u§ge
(cÚ¡ * 
´ogName
)

75 
	`dvmF´štf
(
¡d”r
, "%s: [İtiÚs] cÏs [¬gum’ˆ...]\n", 
´ogName
);

76 
	`dvmF´štf
(
¡d”r
, "%s: [İtiÚs] -j¬ fe.j¬ [¬gum’ˆ...]\n",
´ogName
);

77 
	`dvmF´štf
(
¡d”r
, "\n");

78 
	`dvmF´štf
(
¡d”r
, "The following standard options‡re„ecognized:\n");

79 
	`dvmF´štf
(
¡d”r
, " -classpath classpath\n");

80 
	`dvmF´štf
(
¡d”r
, " -Dproperty=value\n");

81 
	`dvmF´štf
(
¡d”r
, " -verbose:tag ('gc', 'jni', or 'class')\n");

82 
	`dvmF´štf
(
¡d”r
, " -ea[:<package‚ame>... |:<class‚ame>]\n");

83 
	`dvmF´štf
(
¡d”r
, " -da[:<package‚ame>... |:<class‚ame>]\n");

84 
	`dvmF´štf
(
¡d”r
, " (-enableassertions, -disableassertions)\n");

85 
	`dvmF´štf
(
¡d”r
, " -esa\n");

86 
	`dvmF´štf
(
¡d”r
, " -dsa\n");

87 
	`dvmF´štf
(
¡d”r
,

89 
	`dvmF´štf
(
¡d”r
, " -showversion\n");

90 
	`dvmF´štf
(
¡d”r
, " -help\n");

91 
	`dvmF´štf
(
¡d”r
, "\n");

92 
	`dvmF´štf
(
¡d”r
, "The followingƒxtended options‡re„ecognized:\n");

93 
	`dvmF´štf
(
¡d”r
, " -Xrunjdwp:<options>\n");

94 
	`dvmF´štf
(
¡d”r
, " -Xbootclasspath:bootclasspath\n");

95 
	`dvmF´štf
(
¡d”r
, " -Xcheck:tag (e.g. 'jni')\n");

96 
	`dvmF´štf
(
¡d”r
, " -XmsN (min heap, must be multiple of 1K, >= 1MB)\n");

97 
	`dvmF´štf
(
¡d”r
, " -XmxN (max heap, must be multiple of 1K, >= 2MB)\n");

98 
	`dvmF´štf
(
¡d”r
, " -XssN (stack size, >= %dKB, <= %dKB)\n",

99 
kMšSckSize
 / 1024, 
kMaxSckSize
 / 1024);

100 
	`dvmF´štf
(
¡d”r
, " -Xverify:{none,remote,all}\n");

101 
	`dvmF´štf
(
¡d”r
, " -Xrs\n");

102 #ià
	`defšed
(
WITH_JIT
)

103 
	`dvmF´štf
(
¡d”r
,

106 
	`dvmF´štf
(
¡d”r
,

109 
	`dvmF´štf
(
¡d”r
, "\n");

110 
	`dvmF´štf
(
¡d”r
, "These‡re uniqueo Dalvik:\n");

111 
	`dvmF´štf
(
¡d”r
, " -Xzygote\n");

112 
	`dvmF´štf
(
¡d”r
, " -Xdexopt:{none,verified,all,full}\n");

113 
	`dvmF´štf
(
¡d”r
, " -Xnoquithandler\n");

114 
	`dvmF´štf
(
¡d”r
,

116 
	`dvmF´štf
(
¡d”r
, " -Xjniopts:{warnonly,forcecopy}\n");

117 
	`dvmF´štf
(
¡d”r
, " -Xjnitrace:substring (eg NativeClass or‚ativeMethod)\n");

118 
	`dvmF´štf
(
¡d”r
, " -Xstacktracefile:<filename>\n");

119 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]precise\n");

120 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]preverify\n");

121 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]postverify\n");

122 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]concurrent\n");

123 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]verifycardtable\n");

124 
	`dvmF´štf
(
¡d”r
, " -XX:+DisableExplicitGC\n");

125 
	`dvmF´štf
(
¡d”r
, " -X[no]genregmap\n");

126 
	`dvmF´štf
(
¡d”r
, " -Xverifyopt:[no]checkmon\n");

127 
	`dvmF´štf
(
¡d”r
, " -Xcheckdexsum\n");

128 #ià
	`defšed
(
WITH_JIT
)

129 
	`dvmF´štf
(
¡d”r
, " -Xincludeselectedop\n");

130 
	`dvmF´štf
(
¡d”r
, " -Xjitop:hexopvalue[-endvalue]"

132 
	`dvmF´štf
(
¡d”r
, " -Xincludeselectedmethod\n");

133 
	`dvmF´štf
(
¡d”r
, " -Xjitthreshold:decimalvalue\n");

134 
	`dvmF´štf
(
¡d”r
, " -Xjitblocking\n");

135 
	`dvmF´štf
(
¡d”r
, " -Xjitmethod:signature[,signature]* "

137 
	`dvmF´štf
(
¡d”r
, " -Xjitcheckcg\n");

138 
	`dvmF´štf
(
¡d”r
, " -Xjitverbose\n");

139 
	`dvmF´štf
(
¡d”r
, " -Xjitprofile\n");

140 
	`dvmF´štf
(
¡d”r
, " -Xjitdisableopt\n");

141 
	`dvmF´štf
(
¡d”r
, " -Xjitsuspendpoll\n");

143 
	`dvmF´štf
(
¡d”r
, "\n");

144 
	`dvmF´štf
(
¡d”r
, "Configured with:"

148 #ifdeà
WITH_TRACKREF_CHECKS


151 #ifdeà
WITH_INSTR_CHECKS


154 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


157 #ifdeà
WITH_EXTRA_GC_CHECKS


160 #ià!
	`defšed
(
NDEBUG
è&& defšed(
WITH_DALVIK_ASSERT
)

163 #ifdeà
WITH_JNI_STACK_CHECK


166 #ifdeà
EASY_GDB


169 #ifdeà
CHECK_MUTEX


172 #ià
	`defšed
(
WITH_JIT
)

173 " j™(" 
ARCH_VARIANT
 ")"

175 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

178 #ià
ANDROID_SMP
 != 0

182 #ifdeà
DVM_SHOW_EXCEPTION


183 
	`dvmF´štf
(
¡d”r
, " show_exû±iÚ=%d", 
DVM_SHOW_EXCEPTION
);

185 
	`dvmF´štf
(
¡d”r
, "\n\n");

186 
	}
}

191 
	$showJdwpH–p
()

193 
	`dvmF´štf
(
¡d”r
,

195 
	`dvmF´štf
(
¡d”r
,

197 
	}
}

202 
	$showV”siÚ
()

204 
	`dvmF´štf
(
¡dout
, "DalvikVM version %d.%d.%d\n",

205 
DALVIK_MAJOR_VERSION
, 
DALVIK_MINOR_VERSION
, 
DALVIK_BUG_VERSION
);

206 
	`dvmF´štf
(
¡dout
,

215 
	}
}

233 
size_t
 
	$·r£MemO±iÚ
(cÚ¡ *
s
, 
size_t
 
div
)

238 ià(
	`isdig™
(*
s
)) {

239 cÚ¡ *
s2
;

240 
size_t
 
v®
;

242 
v®
 = 
	`¡¹oul
(
s
, (**)&
s2
, 10);

243 ià(
s2
 !ğ
s
) {

250 ià(*
s2
 != '\0') {

251 
c
;

257 
c
 = *
s2
++;

258 ià(*
s2
 == '\0') {

259 
size_t
 
mul
;

261 ià(
c
 == '\0') {

262 
mul
 = 1;

263 } ià(
c
 == 'k' || c == 'K') {

264 
mul
 = 1024;

265 } ià(
c
 == 'm' || c == 'M') {

266 
mul
 = 1024 * 1024;

267 } ià(
c
 == 'g' || c == 'G') {

268 
mul
 = 1024 * 1024 * 1024;

275 ià(
v®
 <ğ
SIZE_MAX
 / 
mul
) {

276 
v®
 *ğ
mul
;

280 
v®
 = 
SIZE_MAX
 & ~(1024-1);

293 ià(
v®
 % 
div
 == 0) {

294  
v®
;

300 
	}
}

319 
boŞ
 
	$hªdËJdwpO±iÚ
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
)

321 ià(
	`¡rcmp
(
Çme
, "transport") == 0) {

322 ià(
	`¡rcmp
(
v®ue
, "dt_socket") == 0) {

323 
gDvm
.
jdwpT¿n¥Üt
 = 
kJdwpT¿n¥ÜtSock‘
;

324 } ià(
	`¡rcmp
(
v®ue
, "dt_android_adb") == 0) {

325 
gDvm
.
jdwpT¿n¥Üt
 = 
kJdwpT¿n¥ÜtAndroidAdb
;

327 
	`ALOGE
("JDWP¿n¥Üˆ'%s'‚Ù suµÜ‹d", 
v®ue
);

328  
çl£
;

330 } ià(
	`¡rcmp
(
Çme
, "server") == 0) {

331 ià(*
v®ue
 == 'n')

332 
gDvm
.
jdwpS”v”
 = 
çl£
;

333 ià(*
v®ue
 == 'y')

334 
gDvm
.
jdwpS”v”
 = 
Œue
;

336 
	`ALOGE
("JDWP option 'server' must be 'y' or 'n'");

337  
çl£
;

339 } ià(
	`¡rcmp
(
Çme
, "suspend") == 0) {

340 ià(*
v®ue
 == 'n')

341 
gDvm
.
jdwpSu¥’d
 = 
çl£
;

342 ià(*
v®ue
 == 'y')

343 
gDvm
.
jdwpSu¥’d
 = 
Œue
;

345 
	`ALOGE
("JDWP option 'suspend' must be 'y' or 'n'");

346  
çl£
;

348 } ià(
	`¡rcmp
(
Çme
, "address") == 0) {

350 cÚ¡ * 
cŞÚ
 = 
	`¡rchr
(
v®ue
, ':');

351 * 
’d
;

352 
pÜt
;

354 ià(
cŞÚ
 !ğ
NULL
) {

355 
	`ä“
(
gDvm
.
jdwpHo¡
);

356 
gDvm
.
jdwpHo¡
 = (*è
	`m®loc
(
cŞÚ
 - 
v®ue
 +1);

357 
	`¡ºıy
(
gDvm
.
jdwpHo¡
, 
v®ue
, 
cŞÚ
 - value +1);

358 
gDvm
.
jdwpHo¡
[
cŞÚ
-
v®ue
] = '\0';

359 
v®ue
 = 
cŞÚ
 + 1;

361 ià(*
v®ue
 == '\0') {

362 
	`ALOGE
("JDWP‡ddress missing…ort");

363  
çl£
;

365 
pÜt
 = 
	`¡¹Ş
(
v®ue
, &
’d
, 10);

366 ià(*
’d
 != '\0') {

367 
	`ALOGE
("JDWP‡dd»s ha junk iÀpÜˆf›ld '%s'", 
v®ue
);

368  
çl£
;

370 
gDvm
.
jdwpPÜt
 = 
pÜt
;

371 } ià(
	`¡rcmp
(
Çme
, "launch") == 0 ||

372 
	`¡rcmp
(
Çme
, "onthrow") == 0 ||

373 
	`¡rcmp
(
Çme
, "oncaught") == 0 ||

374 
	`¡rcmp
(
Çme
, "timeout") == 0)

377 
	`ALOGI
("IgnÜšg JDWP o±iÚ '%s'='%s'", 
Çme
, 
v®ue
);

379 
	`ALOGI
("IgnÜšg uÄecognized JDWP o±iÚ '%s'='%s'", 
Çme
, 
v®ue
);

382  
Œue
;

383 
	}
}

389 
boŞ
 
	$·r£JdwpO±iÚs
(cÚ¡ * 
¡r
)

391 * 
mªgË
 = 
	`¡rdup
(
¡r
);

392 * 
Çme
 = 
mªgË
;

393 
boŞ
 
»suÉ
 = 
çl£
;

398 
Œue
) {

399 * 
v®ue
;

400 * 
comma
;

402 
v®ue
 = 
	`¡rchr
(
Çme
, '=');

403 ià(
v®ue
 =ğ
NULL
) {

404 
	`ALOGE
("JDWP o±s: g¬bag© '%s'", 
Çme
);

405 
ba
;

408 
comma
 = 
	`¡rchr
(
Çme
, ',');

409 ià(
comma
 !ğ
NULL
) {

410 ià(
comma
 < 
v®ue
) {

411 
	`ALOGE
("JDWP o±s: found comm¨befÜ'=' iÀ'%s'", 
mªgË
);

412 
ba
;

414 *
comma
 = '\0';

417 *
v®ue
++ = '\0';

419 ià(!
	`hªdËJdwpO±iÚ
(
Çme
, 
v®ue
))

420 
ba
;

422 ià(
comma
 =ğ
NULL
) {

426 
Çme
 = 
comma
+1;

432 ià(
gDvm
.
jdwpT¿n¥Üt
 =ğ
kJdwpT¿n¥ÜtUnknown
) {

433 
	`ALOGE
("JDWP opts: must specifyransport");

434 
ba
;

436 ià(!
gDvm
.
jdwpS”v”
 && (gDvm.
jdwpHo¡
 =ğ
NULL
 || gDvm.
jdwpPÜt
 == 0)) {

437 
	`ALOGE
("JDWP opts: when server=n, must specify host‡nd…ort");

438 
ba
;

443 
gDvm
.
jdwpCÚfigu»d
 = 
Œue
;

444 
»suÉ
 = 
Œue
;

446 
ba
:

447 
	`ä“
(
mªgË
);

448  
»suÉ
;

449 
	}
}

464 
boŞ
 
	$’abËAs£¹iÚs
(cÚ¡ * 
pkgOrCÏss
, 
boŞ
 
’abË
)

466 
As£¹iÚCÚŒŞ
* 
pCŒl
 = &
gDvm
.
as£¹iÚCŒl
[gDvm.
as£¹iÚCŒlCouÁ
++];

467 
pCŒl
->
’abË
 =ƒnable;

469 ià(
pkgOrCÏss
 =ğ
NULL
) {

471 
pCŒl
->
isPackage
 = 
çl£
;

472 
pCŒl
->
pkgOrCÏss
 = 
NULL
;

473 
pCŒl
->
pkgOrCÏssL’
 = 0;

475 ià(*
pkgOrCÏss
 == '\0') {

477 
pCŒl
->
isPackage
 = 
çl£
;

478 
pCŒl
->
pkgOrCÏss
 = 
	`¡rdup
("");

479 
pCŒl
->
pkgOrCÏssL’
 = 0;

481 
pCŒl
->
pkgOrCÏss
 = 
	`dvmDÙToSÏsh
(pkgOrClass+1);

482 ià(
pCŒl
->
pkgOrCÏss
 =ğ
NULL
) {

484 
	`ALOGW
("UÇbËØ´oûs as£¹iÚ‡rg '%s'", 
pkgOrCÏss
);

485  
çl£
;

488 
Ën
 = 
	`¡¾’
(
pCŒl
->
pkgOrCÏss
);

489 ià(
Ën
 >ğ3 && 
	`¡rcmp
(
pCŒl
->
pkgOrCÏss
 +†en-3, "///") == 0) {

491 
pCŒl
->
isPackage
 = 
Œue
;

492 *(
pCŒl
->
pkgOrCÏss
 + 
Ën
-2) = '\0';

493 
pCŒl
->
pkgOrCÏssL’
 = 
Ën
 - 2;

496 
pCŒl
->
isPackage
 = 
çl£
;

497 
pCŒl
->
pkgOrCÏssL’
 = 
Ën
;

502  
Œue
;

503 
	}
}

518 
	$dvmL©eEÇbËAs£¹iÚs
()

520 ià(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
) {

521 
	`ALOGD
("Not†ate-enabling‡ssertions:‚o‡ssertionCtrl‡rray");

523 } ià(
gDvm
.
as£¹iÚCŒlCouÁ
 != 0) {

524 
	`ALOGD
("Not†ate-enabling‡ssertions: some‡sserts‡lready configured");

527 
	`ALOGD
("Late-enabling‡ssertions");

530 
As£¹iÚCÚŒŞ
* 
pCŒl
 = 
gDvm
.
as£¹iÚCŒl
;

531 
pCŒl
->
pkgOrCÏss
 = 
	`¡rdup
("");

532 
pCŒl
->
pkgOrCÏssL’
 = 0;

533 
pCŒl
->
isPackage
 = 
çl£
;

534 
pCŒl
->
’abË
 = 
Œue
;

535 
gDvm
.
as£¹iÚCŒlCouÁ
 = 1;

536 
	}
}

542 
	$ä“As£¹iÚCŒl
()

544 
i
;

546 
i
 = 0; i < 
gDvm
.
as£¹iÚCŒlCouÁ
; i++)

547 
	`ä“
(
gDvm
.
as£¹iÚCŒl
[
i
].
pkgOrCÏss
);

548 
	`ä“
(
gDvm
.
as£¹iÚCŒl
);

549 
	}
}

551 #ià
defšed
(
WITH_JIT
)

553 
	$´oûssXj™İ
(cÚ¡ *
İt
)

555 ià(
İt
[7] == ':') {

556 cÚ¡ *
¡¬tPŒ
 = &
İt
[8];

557 *
’dPŒ
 = 
NULL
;

560 
¡¬tV®ue
, 
’dV®ue
;

562 
¡¬tV®ue
 = 
	`¡¹Ş
(
¡¬tPŒ
, &
’dPŒ
, 16);

563 ià(
¡¬tPŒ
 !ğ
’dPŒ
) {

565 
¡¬tV®ue
 %ğ
kNumPackedOpcodes
;

567 ià(*
’dPŒ
 == '-') {

568 
’dV®ue
 = 
	`¡¹Ş
(
’dPŒ
+1, &endPtr, 16);

569 
’dV®ue
 %ğ
kNumPackedOpcodes
;

571 
’dV®ue
 = 
¡¬tV®ue
;

574 ; 
¡¬tV®ue
 <ğ
’dV®ue
; startValue++) {

575 
	`ALOGW
("Dalvik opcode %x is selected for debugging",

576 (è
¡¬tV®ue
);

578 
gDvmJ™
.
İLi¡
[
¡¬tV®ue
 >> 3] |= 1 << (startValue & 0x7);

581 ià(*
’dPŒ
 == 0) {

585 
¡¬tPŒ
 = 
’dPŒ
 + 1;

589 ià(*
’dPŒ
 != 0) {

590 
	`dvmF´štf
(
¡d”r
,

592 "%s\n", 
’dPŒ
);

598 
i
;

599 
i
 = 0; i < (
kNumPackedOpcodes
+7)/8; i++) {

600 
gDvmJ™
.
İLi¡
[
i
] = 0xff;

602 
	`dvmF´štf
(
¡d”r
, "Warning: select‡ll opcodes\n");

604 
	}
}

607 
	$´oûssXj™m‘hod
(cÚ¡ *
İt
)

609 *
buf
 = 
	`¡rdup
(&
İt
[12]);

610 *
¡¬t
, *
’d
;

612 
gDvmJ™
.
m‘hodTabË
 = 
	`dvmHashTabËC»©e
(8, 
NULL
);

614 
¡¬t
 = 
buf
;

620 
hashV®ue
;

622 
’d
 = 
	`¡rchr
(
¡¬t
, ',');

623 ià(
’d
) {

624 *
’d
 = 0;

627 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
¡¬t
);

629 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

630 
	`¡rdup
(
¡¬t
),

631 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

632 ià(
’d
) {

633 
¡¬t
 = 
’d
 + 1;

638 
	`ä“
(
buf
);

639 
	}
}

653 
	$´oûssO±iÚs
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[],

654 
boŞ
 
ignÜeUÄecognized
)

656 
i
;

658 
	`ALOGV
("VM o±iÚ (%d):", 
¬gc
);

659 
i
 = 0; i < 
¬gc
; i++)

660 
	`ALOGV
(" %d: '%s'", 
i
, 
¬gv
[i]);

667 
	`as£¹
(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
);

668 ià(
¬gc
 > 0) {

669 
gDvm
.
as£¹iÚCŒl
 =

670 (
As£¹iÚCÚŒŞ
*è
	`m®loc
((As£¹iÚCÚŒŞè* 
¬gc
);

671 ià(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
)

673 
	`as£¹
(
gDvm
.
as£¹iÚCŒlCouÁ
 == 0);

676 
i
 = 0; i < 
¬gc
; i++) {

677 ià(
	`¡rcmp
(
¬gv
[
i
], "-help") == 0) {

681 } ià(
	`¡rcmp
(
¬gv
[
i
], "-version") == 0) {

683 
	`showV”siÚ
();

685 } ià(
	`¡rcmp
(
¬gv
[
i
], "-showversion") == 0) {

687 
	`showV”siÚ
();

689 } ià(
	`¡rcmp
(
¬gv
[
i
], "-classpath") == 0 ||

690 
	`¡rcmp
(
¬gv
[
i
], "-cp") == 0)

693 ià(
i
 =ğ
¬gc
-1) {

694 
	`dvmF´štf
(
¡d”r
, "Missing classpath…ath†ist\n");

697 
	`ä“
(
gDvm
.
şassP©hSŒ
);

698 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(
¬gv
[++
i
]);

700 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xbootclasspath:",

704 cÚ¡ * 
·th
 = 
¬gv
[
i
] + ("-Xbootclasspath:")-1;

706 ià(*
·th
 == '\0') {

707 
	`dvmF´štf
(
¡d”r
, "Missing bootclasspath…ath†ist\n");

710 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

711 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
·th
);

713 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xbootclasspath/a:",

715 cÚ¡ * 
­pP©h
 = 
¬gv
[
i
] + ("-Xbootclasspath/a:")-1;

717 ià(*(
­pP©h
) == '\0') {

718 
	`dvmF´štf
(
¡d”r
, "Missing‡ppending bootclasspath…ath†ist\n");

721 * 
®lP©h
;

723 ià(
	`a¥rštf
(&
®lP©h
, "%s:%s", 
gDvm
.
boÙCÏssP©hSŒ
, 
­pP©h
) < 0) {

724 
	`dvmF´štf
(
¡d”r
, "Can't‡ppendo bootclasspath…ath†ist\n");

727 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

728 
gDvm
.
boÙCÏssP©hSŒ
 = 
®lP©h
;

730 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xbootclasspath/p:",

732 cÚ¡ * 
´eP©h
 = 
¬gv
[
i
] + ("-Xbootclasspath/p:")-1;

734 ià(*(
´eP©h
) == '\0') {

735 
	`dvmF´štf
(
¡d”r
, "Missing…repending bootclasspath…ath†ist\n");

738 * 
®lP©h
;

740 ià(
	`a¥rštf
(&
®lP©h
, "%s:%s", 
´eP©h
, 
gDvm
.
boÙCÏssP©hSŒ
) < 0) {

741 
	`dvmF´štf
(
¡d”r
, "Can't…rependo bootclasspath…ath†ist\n");

744 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

745 
gDvm
.
boÙCÏssP©hSŒ
 = 
®lP©h
;

747 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-D", 2) == 0) {

749 ià(
	`¡rchr
(
¬gv
[
i
], '='è=ğ
NULL
) {

750 
	`dvmF´štf
(
¡d”r
, "Bad system…roperty setting: \"%s\"\n",

751 
¬gv
[
i
]);

754 
gDvm
.
´İ”t›s
->
	`push_back
(
¬gv
[
i
] + 2);

756 } ià(
	`¡rcmp
(
¬gv
[
i
], "-jar") == 0) {

758 
	`dvmF´štf
(
¡d”r
, "-jar‚ot yet handled\n");

759 
	`as£¹
(
çl£
);

761 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xms", 4) == 0) {

762 
size_t
 
v®
 = 
	`·r£MemO±iÚ
(
¬gv
[
i
]+4, 1024);

763 ià(
v®
 != 0) {

764 ià(
v®
 >ğ
kMšH—pS¹Size
 && v® <ğ
kMaxH—pSize
) {

765 
gDvm
.
h—pS¹šgSize
 = 
v®
;

767 
	`dvmF´štf
(
¡d”r
,

769 
¬gv
[
i
], 
kMšH—pS¹Size
/1024, 
kMaxH—pSize
/1024);

773 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xm İtiÚ '%s'\n", 
¬gv
[
i
]);

776 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xmx", 4) == 0) {

777 
size_t
 
v®
 = 
	`·r£MemO±iÚ
(
¬gv
[
i
]+4, 1024);

778 ià(
v®
 != 0) {

779 ià(
v®
 >ğ
kMšH—pSize
 && v® <ğ
kMaxH—pSize
) {

780 
gDvm
.
h—pMaximumSize
 = 
v®
;

782 
	`dvmF´štf
(
¡d”r
,

784 
¬gv
[
i
], 
kMšH—pSize
/1024, 
kMaxH—pSize
/1024);

788 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xmx o±iÚ '%s'\n", 
¬gv
[
i
]);

791 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-XX:HeapGrowthLimit=", 20) == 0) {

792 
size_t
 
v®
 = 
	`·r£MemO±iÚ
(
¬gv
[
i
] + 20, 1024);

793 ià(
v®
 != 0) {

794 
gDvm
.
h—pGrowthLim™
 = 
v®
;

796 
	`dvmF´štf
(
¡d”r
, "Inv®id -XX:H—pGrowthLim™ o±iÚ '%s'\n", 
¬gv
[
i
]);

799 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xss", 4) == 0) {

800 
size_t
 
v®
 = 
	`·r£MemO±iÚ
(
¬gv
[
i
]+4, 1);

801 ià(
v®
 != 0) {

802 ià(
v®
 >ğ
kMšSckSize
 && v® <ğ
kMaxSckSize
) {

803 
gDvm
.
¡ackSize
 = 
v®
;

804 ià(
v®
 > 
gDvm
.
mašTh»adSckSize
) {

805 
gDvm
.
mašTh»adSckSize
 = 
v®
;

808 
	`dvmF´štf
(
¡d”r
, "Invalid -Xss '%s',„ange is %do %d\n",

809 
¬gv
[
i
], 
kMšSckSize
, 
kMaxSckSize
);

813 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xs İtiÚ '%s'\n", 
¬gv
[
i
]);

817 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-XX:mašTh»adSckSize=", 
	`¡¾’
("-XX:mainThreadStackSize=")) == 0) {

818 
size_t
 
v®
 = 
	`·r£MemO±iÚ
(
¬gv
[
i
] + 
	`¡¾’
("-XX:mainThreadStackSize="), 1);

819 ià(
v®
 != 0) {

820 ià(
v®
 >ğ
kMšSckSize
 && v® <ğ
kMaxSckSize
) {

821 
gDvm
.
mašTh»adSckSize
 = 
v®
;

823 
	`dvmF´štf
(
¡d”r
, "Invalid -XX:mainThreadStackSize '%s',„ange is %do %d\n",

824 
¬gv
[
i
], 
kMšSckSize
, 
kMaxSckSize
);

828 
	`dvmF´štf
(
¡d”r
, "Inv®id -XX:mašTh»adSckSizİtiÚ '%s'\n", 
¬gv
[
i
]);

832 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-XX:+DisableExplicitGC", 22) == 0) {

833 
gDvm
.
di§bËEx¶ic™Gc
 = 
Œue
;

834 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose") == 0 ||

835 
	`¡rcmp
(
¬gv
[
i
], "-verbose:class") == 0)

839 
gDvm
.
v”bo£CÏss
 = 
Œue
;

840 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose:jni") == 0) {

841 
gDvm
.
v”bo£Jni
 = 
Œue
;

842 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose:gc") == 0) {

843 
gDvm
.
v”bo£Gc
 = 
Œue
;

844 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose:shutdown") == 0) {

845 
gDvm
.
v”bo£Shutdown
 = 
Œue
;

847 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-enableassertions", 17) == 0) {

848 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 17, 
Œue
);

849 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-ea", 3) == 0) {

850 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 3, 
Œue
);

851 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-disableassertions", 18) == 0) {

852 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 18, 
çl£
);

853 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-da", 3) == 0) {

854 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 3, 
çl£
);

855 } ià(
	`¡rcmp
(
¬gv
[
i
], "-enablesystemassertions") == 0 ||

856 
	`¡rcmp
(
¬gv
[
i
], "-esa") == 0)

858 
	`’abËAs£¹iÚs
(
NULL
, 
Œue
);

859 } ià(
	`¡rcmp
(
¬gv
[
i
], "-disablesystemassertions") == 0 ||

860 
	`¡rcmp
(
¬gv
[
i
], "-dsa") == 0)

862 
	`’abËAs£¹iÚs
(
NULL
, 
çl£
);

864 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xcheck:jni", 11) == 0) {

867 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xdebug") == 0) {

870 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xrunjdwp:", 10) == 0 ||

871 
	`¡ºcmp
(
¬gv
[
i
], "-agentlib:jdwp=", 15) == 0)

873 cÚ¡ * 

;

875 ià(
¬gv
[
i
][1] == 'X')

876 

 = 
¬gv
[
i
] + 10;

878 

 = 
¬gv
[
i
] + 15;

880 ià(
	`¡ºcmp
(

, "h–p", 4è=ğ0 || !
	`·r£JdwpO±iÚs
(tail)) {

881 
	`showJdwpH–p
();

884 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xrs") == 0) {

885 
gDvm
.
»duûSigÇls
 = 
Œue
;

886 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xnoquithandler") == 0) {

889 
gDvm
.
noQu™HªdËr
 = 
Œue
;

890 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xzygote") == 0) {

891 
gDvm
.
zygÙe
 = 
Œue
;

892 #ià
	`defšed
(
WITH_JIT
)

893 
gDvmJ™
.
ruÂšgInAndroidF¿mewÜk
 = 
Œue
;

895 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xdexopt:", 9) == 0) {

896 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "none") == 0)

897 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

898 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "verified") == 0)

899 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

900 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "all") == 0)

901 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_ALL
;

902 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "full") == 0)

903 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_FULL
;

905 
	`dvmF´štf
(
¡d”r
, "UÄecognized dexİˆİtiÚ '%s'\n",
¬gv
[
i
]);

908 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xverify:", 9) == 0) {

909 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "none") == 0)

910 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_NONE
;

911 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "remote") == 0)

912 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_REMOTE
;

913 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "all") == 0)

914 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_ALL
;

916 
	`dvmF´štf
(
¡d”r
, "UÄecognized v”ify o±iÚ '%s'\n",
¬gv
[
i
]);

919 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjnigreflimit:", 15) == 0) {

920 
lim
 = 
	`©oi
(
¬gv
[
i
] + 15);

921 ià(
lim
 < 200 || (lim % 100) != 0) {

922 
	`dvmF´štf
(
¡d”r
, "Bad value for -Xjnigreflimit: '%s'\n",

923 
¬gv
[
i
]+15);

926 
gDvm
.
jniG»fLim™
 = 
lim
;

927 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjnitrace:", 11) == 0) {

928 
gDvm
.
jniT¿û
 = 
	`¡rdup
(
¬gv
[
i
] + 11);

929 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xlog-stdio") == 0) {

930 
gDvm
.
logStdio
 = 
Œue
;

932 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xint", 5) == 0) {

933 ià(
¬gv
[
i
][5] == ':') {

934 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "portable") == 0)

935 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pPÜbË
;

936 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "fast") == 0)

937 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

938 #ifdeà
WITH_JIT


939 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "jit") == 0)

940 
gDvm
.
executiÚMode
 = 
kExecutiÚModeJ™
;

943 
	`dvmF´štf
(
¡d”r
,

944 "W¬nšg: UÄecognized iÁ”´‘” mod%s\n",
¬gv
[
i
]);

949 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

952 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xlockprofthreshold:", 20) == 0) {

953 
gDvm
.
lockProfTh»shŞd
 = 
	`©oi
(
¬gv
[
i
] + 20);

955 #ifdeà
WITH_JIT


956 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitop", 7) == 0) {

957 
	`´oûssXj™İ
(
¬gv
[
i
]);

958 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitmethod", 11) == 0) {

959 
	`´oûssXj™m‘hod
(
¬gv
[
i
]);

960 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitblocking", 13) == 0) {

961 
gDvmJ™
.
blockšgMode
 = 
Œue
;

962 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitthreshold:", 15) == 0) {

963 
gDvmJ™
.
th»shŞd
 = 
	`©oi
(
¬gv
[
i
] + 15);

964 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xincludeselectedop", 19) == 0) {

965 
gDvmJ™
.
šşudeS–eùedOp
 = 
Œue
;

966 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xincludeselectedmethod", 23) == 0) {

967 
gDvmJ™
.
šşudeS–eùedM‘hod
 = 
Œue
;

968 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitcheckcg", 12) == 0) {

969 
gDvmJ™
.
checkC®lG¿ph
 = 
Œue
;

971 
gDvmJ™
.
blockšgMode
 = 
Œue
;

972 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitverbose", 12) == 0) {

973 
gDvmJ™
.
´štMe
 = 
Œue
;

974 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitprofile", 12) == 0) {

975 
gDvmJ™
.
´ofeMode
 = 
kT¿ûProfšgCÚtšuous
;

976 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitdisableopt", 15) == 0) {

978 ià(
¬gv
[
i
][15] == ':') {

979 
	`ssÿnf
(
¬gv
[
i
] + 16, "%x", &
gDvmJ™
.
di§bËO±
);

982 
gDvmJ™
.
di§bËO±
 = -1;

984 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitsuspendpoll", 16) == 0) {

985 
gDvmJ™
.
g’Su¥’dPŞl
 = 
Œue
;

988 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xstacktracefile:", 17) == 0) {

989 
gDvm
.
¡ackT¿ûFe
 = 
	`¡rdup
(
¬gv
[
i
]+17);

991 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xgenregmap") == 0) {

992 
gDvm
.
g’”©eRegi¡”M­s
 = 
Œue
;

993 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xnogenregmap") == 0) {

994 
gDvm
.
g’”©eRegi¡”M­s
 = 
çl£
;

996 } ià(
	`¡rcmp
(
¬gv
[
i
], "Xverifyopt:checkmon") == 0) {

997 
gDvm
.
mÚ™ÜV”ifiÿtiÚ
 = 
Œue
;

998 } ià(
	`¡rcmp
(
¬gv
[
i
], "Xverifyopt:nocheckmon") == 0) {

999 
gDvm
.
mÚ™ÜV”ifiÿtiÚ
 = 
çl£
;

1001 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xgc:", 5) == 0) {

1002 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "precise") == 0)

1003 
gDvm
.
´eci£Gc
 = 
Œue
;

1004 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "noprecise") == 0)

1005 
gDvm
.
´eci£Gc
 = 
çl£
;

1006 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "preverify") == 0)

1007 
gDvm
.
´eV”ify
 = 
Œue
;

1008 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "nopreverify") == 0)

1009 
gDvm
.
´eV”ify
 = 
çl£
;

1010 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "postverify") == 0)

1011 
gDvm
.
po¡V”ify
 = 
Œue
;

1012 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "nopostverify") == 0)

1013 
gDvm
.
po¡V”ify
 = 
çl£
;

1014 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "concurrent") == 0)

1015 
gDvm
.
cÚcu¼’tM¬kSw“p
 = 
Œue
;

1016 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "noconcurrent") == 0)

1017 
gDvm
.
cÚcu¼’tM¬kSw“p
 = 
çl£
;

1018 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "verifycardtable") == 0)

1019 
gDvm
.
v”ifyC¬dTabË
 = 
Œue
;

1020 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "noverifycardtable") == 0)

1021 
gDvm
.
v”ifyC¬dTabË
 = 
çl£
;

1023 
	`dvmF´štf
(
¡d”r
, "Bad value for -Xgc");

1026 
	`ALOGV
("P»ci£ GC cÚfigu»d %s", 
gDvm
.
´eci£Gc
 ? "ON" : "OFF");

1028 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xcheckdexsum") == 0) {

1029 
gDvm
.
v”ifyDexChecksum
 = 
Œue
;

1031 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xprofile:threadcpuclock") == 0) {

1032 
gDvm
.
´of”ClockSourû
 = 
kProf”ClockSourûTh»adCpu
;

1033 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xprofile:wallclock") == 0) {

1034 
gDvm
.
´of”ClockSourû
 = 
kProf”ClockSourûW®l
;

1035 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xprofile:dualclock") == 0) {

1036 
gDvm
.
´of”ClockSourû
 = 
kProf”ClockSourûDu®
;

1039 ià(!
ignÜeUÄecognized
) {

1040 
	`dvmF´štf
(
¡d”r
, "UÄecognized o±iÚ '%s'\n", 
¬gv
[
i
]);

1044 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_NONE
;

1048 
	}
}

1055 
	$£tCommªdLšeDeçuÉs
()

1057 cÚ¡ * 
’vSŒ
 = 
	`g‘’v
("CLASSPATH");

1058 ià(
’vSŒ
 !ğ
NULL
) {

1059 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(
’vSŒ
);

1061 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(".");

1063 
’vSŒ
 = 
	`g‘’v
("BOOTCLASSPATH");

1064 ià(
’vSŒ
 !ğ
NULL
) {

1065 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
’vSŒ
);

1067 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(".");

1070 
gDvm
.
´İ”t›s
 = 
Ãw
 
¡d
::
veùÜ
<¡d::
¡ršg
>();

1075 
gDvm
.
h—pS¹šgSize
 = 2 * 1024 * 1024;

1076 
gDvm
.
h—pMaximumSize
 = 16 * 1024 * 1024;

1077 
gDvm
.
h—pGrowthLim™
 = 0;

1078 
gDvm
.
¡ackSize
 = 
kDeçuÉSckSize
;

1079 
gDvm
.
mašTh»adSckSize
 = 
kDeçuÉSckSize
;

1081 
gDvm
.
cÚcu¼’tM¬kSw“p
 = 
Œue
;

1086 
gDvm
.
jdwpAÎowed
 = 
Œue
;

1089 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_ALL
;

1090 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

1091 
gDvm
.
mÚ™ÜV”ifiÿtiÚ
 = 
çl£
;

1092 
gDvm
.
g’”©eRegi¡”M­s
 = 
Œue
;

1093 
gDvm
.
»gi¡”M­Mode
 = 
kRegi¡”M­ModeTy³P»ci£
;

1102 #ià
	`defšed
(
WITH_JIT
)

1103 
gDvm
.
executiÚMode
 = 
kExecutiÚModeJ™
;

1105 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

1112 
gDvm
.
dexO±FÜSmp
 = (
ANDROID_SMP
 != 0);

1117 
gDvm
.
´of”ClockSourû
 = 
kProf”ClockSourûDu®
;

1118 
	}
}

1125 
	$busC©ch”
(
signum
, 
sigšfo_t
* 
šfo
, * 
cÚ‹xt
)

1127 * 
addr
 = 
šfo
->
si_addr
;

1129 
	`ALOGE
("Caughˆ¨SIGBUS (%d),‡ddr=%p", 
signum
, 
addr
);

1137 
	`sigÇl
(
SIGBUS
, 
SIG_DFL
);

1138 
	}
}

1146 
	$blockSigÇls
()

1148 
sig£t_t
 
mask
;

1149 
cc
;

1151 
	`sigem±y£t
(&
mask
);

1152 
	`sigadd£t
(&
mask
, 
SIGQUIT
);

1153 
	`sigadd£t
(&
mask
, 
SIGUSR1
);

1154 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

1155 
	`sigadd£t
(&
mask
, 
SIGUSR2
);

1158 
cc
 = 
	`sig´ocmask
(
SIG_BLOCK
, &
mask
, 
NULL
);

1159 
	`as£¹
(
cc
 == 0);

1161 ià(
çl£
) {

1163 
sigaùiÚ
 
§
;

1164 
	`mem£t
(&
§
, 0, (sa));

1165 
§
.
§_sigaùiÚ
 = 
busC©ch”
;

1166 
§
.
§_æags
 = 
SA_SIGINFO
;

1167 
cc
 = 
	`sigaùiÚ
(
SIGBUS
, &
§
, 
NULL
);

1168 
	`as£¹
(
cc
 == 0);

1170 
	}
}

1172 şas 
	cScİedShutdown
 {

1173 
	mpublic
:

1174 
	$ScİedShutdown
(è: 
	$¬med_
(
Œue
) {

1177 ~
	$ScİedShutdown
() {

1178 ià(
¬med_
) {

1179 
	`dvmShutdown
();

1181 
	}
}

1183 
	$di§rm
() {

1184 
¬med_
 = 
çl£
;

1185 
	}
}

1187 
	g´iv©e
:

1188 
boŞ
 
¬med_
;

1197 
	g¡d
::
¡ršg
 
	$dvmS¹up
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[],

1198 
boŞ
 
ignÜeUÄecognized
, 
JNIEnv
* 
pEnv
)

1200 
ScİedShutdown
 
scİedShutdown
;

1202 
	`as£¹
(
gDvm
.
š™Ÿlizšg
);

1204 
	`ALOGV
("VM in™‡rg (%d):", 
¬gc
);

1205 
i
 = 0; i < 
¬gc
; i++) {

1206 
	`ALOGV
(" %d: '%s'", 
i
, 
¬gv
[i]);

1208 
	`£tCommªdLšeDeçuÉs
();

1213 
cc
 = 
	`´oûssO±iÚs
(
¬gc
, 
¬gv
, 
ignÜeUÄecognized
);

1214 ià(
cc
 != 0) {

1215 ià(
cc
 < 0) {

1216 
	`dvmF´štf
(
¡d”r
, "\n");

1217 
	`u§ge
("dalvikvm");

1222 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1224 ià(
gDvm
.
executiÚMode
 !ğ
kExecutiÚModeIÁ”pPÜbË
) {

1225 
	`ALOGI
("Switchingo 'portable' interpreter for GC checks");

1226 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pPÜbË
;

1231 ià(!
	`acûss
("/dev/ıuùl/sks", 
F_OK
)) {

1232 
	`ALOGV
("Using kernel group scheduling");

1233 
gDvm
.
k”ÃlGroupSchedulšg
 = 1;

1235 
	`ALOGV
("Using kernel scheduler…olicies");

1239 ià(!
gDvm
.
»duûSigÇls
)

1240 
	`blockSigÇls
();

1243 ià(
	`syscÚf
(
_SC_PAGESIZE
è!ğ
SYSTEM_PAGE_SIZE
) {

1244  
	`SŒšgPrštf
("expected…age size %d, got %d",

1245 
SYSTEM_PAGE_SIZE
, (è
	`syscÚf
(
_SC_PAGESIZE
));

1249 
	`ALOGV
("UsšgƒxecutiÚMod%d", 
gDvm
.
executiÚMode
);

1250 
	`dvmCheckAsmCÚ¡ªts
();

1255 ià(!
	`dvmAÎocT¿ck”S¹up
()) {

1258 ià(!
	`dvmGcS¹up
()) {

1261 ià(!
	`dvmTh»adS¹up
()) {

1264 ià(!
	`dvmIÆšeN©iveS¹up
()) {

1267 ià(!
	`dvmRegi¡”M­S¹up
()) {

1270 ià(!
	`dvmIn¡ªûofS¹up
()) {

1273 ià(!
	`dvmCÏssS¹up
()) {

1283 ià(!
	`dvmFšdRequœedCÏs£sAndMemb”s
()) {

1287 ià(!
	`dvmSŒšgIÁ”nS¹up
()) {

1290 ià(!
	`dvmN©iveS¹up
()) {

1293 ià(!
	`dvmIÁ”ÇlN©iveS¹up
()) {

1296 ià(!
	`dvmJniS¹up
()) {

1299 ià(!
	`dvmProfšgS¹up
()) {

1308 ià(!
	`dvmC»©eIÆšeSubsTabË
()) {

1315 ià(!
	`dvmV®id©eBoxCÏs£s
()) {

1323 ià(!
	`dvmP»pMašFÜJni
(
pEnv
)) {

1334 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgCÏss
)) {

1342 ià(!
	`»gi¡”Sy¡emN©ives
(
pEnv
)) {

1345 
	`ALOG
(
LOG_DEBUG
,"INITNATIVE","BEFORE CALL REGISTER SHADOW NATIVES");

1346 
	`»gi¡”ShadowN©ives
(
pEnv
);

1347 
	`ALOG
(
LOG_DEBUG
,"INITNATIVE","AFTER CALL REGISTER SHADOW NATIVES");

1353 ià(!
	`dvmC»©eStockExû±iÚs
()) {

1363 ià(!
	`dvmP»pMašTh»ad
()) {

1371 ià(
	`dvmReã»nûTabËEÁr›s
(&
	`dvmTh»adS–f
()->
š‹º®LoÿlRefTabË
) != 0)

1373 
	`ALOGW
("Warning:racked„eferences„emain…ost-initialization");

1374 
	`dvmDumpReã»nûTabË
(&
	`dvmTh»adS–f
()->
š‹º®LoÿlRefTabË
, "MAIN");

1378 ià(!
	`dvmDebugg”S¹up
()) {

1382 ià(!
	`dvmGcS¹upCÏs£s
()) {

1390 ià(
gDvm
.
zygÙe
) {

1391 ià(!
	`š™ZygÙe
()) {

1395 ià(!
	`dvmIn™Aá”ZygÙe
()) {

1401 #iâdeà
NDEBUG


1402 ià(!
	`dvmTe¡Hash
())

1403 
	`ALOGE
("dvmTestHash FAILED");

1404 ià(
çl£
 && !
	`dvmTe¡IndœeùRefTabË
())

1405 
	`ALOGE
("dvmTestIndirectRefTable FAILED");

1408 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

1409 
	`dvmLogExû±iÚSckT¿û
();

1413 
scİedShutdown
.
	`di§rm
();

1415 
	}
}

1417 
	$lßdJniLib¿ry
(cÚ¡ * 
Çme
) {

1418 
¡d
::
¡ršg
 
	`m­³dName
(
	`SŒšgPrštf
(
OS_SHARED_LIB_FORMAT_STR
, 
Çme
));

1419 * 
»asÚ
 = 
NULL
;

1420 ià(!
	`dvmLßdN©iveCode
(
m­³dName
.
	`c_¡r
(), 
NULL
, &
»asÚ
)) {

1421 
	`ALOGE
("dvmLßdN©iveCodçed fÜ \"%s\": %s", 
Çme
, 
»asÚ
);

1422 
	`dvmAbÜt
();

1424 
	}
}

1438 
boŞ
 
	$»gi¡”Sy¡emN©ives
(
JNIEnv
* 
pEnv
)

1441 
Th»ad
* 
£lf
 = 
gDvm
.
th»adLi¡
;

1444 
£lf
->
¡©us
 = 
THREAD_NATIVE
;

1448 
	`lßdJniLib¿ry
("javacore");

1449 
	`lßdJniLib¿ry
("nativehelper");

1452 
£lf
->
¡©us
 = 
THREAD_RUNNING
;

1454  
Œue
;

1455 
	}
}

1461 
boŞ
 
	$š™ZygÙe
()

1464 
	`£gid
(0,0);

1466  
Œue
;

1467 
	}
}

1473 
boŞ
 
	$dvmIn™Aá”ZygÙe
()

1475 
u8
 
¡¬tH—p
, 
¡¬tQu™
, 
¡¬tJdwp
;

1476 
u8
 
’dH—p
, 
’dQu™
, 
’dJdwp
;

1478 
¡¬tH—p
 = 
	`dvmG‘R–©iveTimeU£c
();

1484 ià(!
	`dvmGcS¹upAá”ZygÙe
())

1485  
çl£
;

1487 
’dH—p
 = 
	`dvmG‘R–©iveTimeU£c
();

1488 
¡¬tQu™
 = 
	`dvmG‘R–©iveTimeU£c
();

1491 ià(!
gDvm
.
»duûSigÇls
 && !gDvm.
noQu™HªdËr
) {

1492 ià(!
	`dvmSigÇlC©ch”S¹up
())

1493  
çl£
;

1497 ià(
gDvm
.
logStdio
) {

1498 ià(!
	`dvmStdioCÚv”‹rS¹up
())

1499  
çl£
;

1502 
’dQu™
 = 
	`dvmG‘R–©iveTimeU£c
();

1503 
¡¬tJdwp
 = 
	`dvmG‘R–©iveTimeU£c
();

1510 ià(!
	`š™Jdwp
()) {

1511 
	`ALOGD
("JDWP init failed; continuing‡nyway");

1514 
’dJdwp
 = 
	`dvmG‘R–©iveTimeU£c
();

1516 
	`ALOGV
("thread-start heap=%d quit=%d jdwp=%dotal=%d usec",

1517 ()(
’dH—p
-
¡¬tH—p
), ()(
’dQu™
-
¡¬tQu™
),

1518 ()(
’dJdwp
-
¡¬tJdwp
), ()ÓndJdwp-
¡¬tH—p
));

1520 #ifdeà
WITH_JIT


1521 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
) {

1522 ià(!
	`dvmComp”S¹up
())

1523  
çl£
;

1527  
Œue
;

1528 
	}
}

1549 
boŞ
 
	$š™Jdwp
()

1551 
	`as£¹
(!
gDvm
.
zygÙe
);

1558 ià(
gDvm
.
jdwpAÎowed
 && gDvm.
jdwpCÚfigu»d
) {

1559 
JdwpS¹upP¬ams
 
·¿ms
;

1561 ià(
gDvm
.
jdwpHo¡
 !ğ
NULL
) {

1562 ià(
	`¡¾’
(
gDvm
.
jdwpHo¡
è>ğ(
·¿ms
.
ho¡
)-1) {

1563 
	`ALOGE
("ERROR: ho¡ÇmtoØlÚg: '%s'", 
gDvm
.
jdwpHo¡
);

1564  
çl£
;

1566 
	`¡rıy
(
·¿ms
.
ho¡
, 
gDvm
.
jdwpHo¡
);

1568 
·¿ms
.
ho¡
[0] = '\0';

1570 
·¿ms
.
Œª¥Üt
 = 
gDvm
.
jdwpT¿n¥Üt
;

1571 
·¿ms
.
£rv”
 = 
gDvm
.
jdwpS”v”
;

1572 
·¿ms
.
su¥’d
 = 
gDvm
.
jdwpSu¥’d
;

1573 
·¿ms
.
pÜt
 = 
gDvm
.
jdwpPÜt
;

1575 
gDvm
.
jdwpS‹
 = 
	`dvmJdwpS¹up
(&
·¿ms
);

1576 ià(
gDvm
.
jdwpS‹
 =ğ
NULL
) {

1577 
	`ALOGW
("WARNING: debuggerhread failedo initialize");

1586 ià(
	`dvmJdwpIsAùive
(
gDvm
.
jdwpS‹
)) {

1588 ià(!
	`dvmJdwpPo¡VMS¹
(
gDvm
.
jdwpS‹
, gDvm.
jdwpSu¥’d
)) {

1589 
	`ALOGW
("WARNING: failedo…ost 'start' messageo debugger");

1595  
Œue
;

1596 
	}
}

1610 
	$dvmP»pFÜDexO±
(cÚ¡ * 
boÙCÏssP©h
, 
DexO±imiz”Mode
 
dexO±Mode
,

1611 
DexCÏssV”ifyMode
 
v”ifyMode
, 
dexİtFÏgs
)

1613 
gDvm
.
š™Ÿlizšg
 = 
Œue
;

1614 
gDvm
.
İtimizšg
 = 
Œue
;

1617 
	`blockSigÇls
();

1620 
	`£tCommªdLšeDeçuÉs
();

1621 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

1622 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
boÙCÏssP©h
);

1625 
gDvm
.
dexO±Mode
 = dexOptMode;

1626 
gDvm
.
şassV”ifyMode
 = 
v”ifyMode
;

1627 
gDvm
.
g’”©eRegi¡”M­s
 = (
dexİtFÏgs
 & 
DEXOPT_GEN_REGISTER_MAPS
) != 0;

1628 ià(
dexİtFÏgs
 & 
DEXOPT_SMP
) {

1629 
	`as£¹
((
dexİtFÏgs
 & 
DEXOPT_UNIPROCESSOR
) == 0);

1630 
gDvm
.
dexO±FÜSmp
 = 
Œue
;

1631 } ià(
dexİtFÏgs
 & 
DEXOPT_UNIPROCESSOR
) {

1632 
gDvm
.
dexO±FÜSmp
 = 
çl£
;

1634 
gDvm
.
dexO±FÜSmp
 = (
ANDROID_SMP
 != 0);

1644 ià(!
	`dvmGcS¹up
())

1645 
ç
;

1646 ià(!
	`dvmTh»adS¹up
())

1647 
ç
;

1648 ià(!
	`dvmIÆšeN©iveS¹up
())

1649 
ç
;

1650 ià(!
	`dvmRegi¡”M­S¹up
())

1651 
ç
;

1652 ià(!
	`dvmIn¡ªûofS¹up
())

1653 
ç
;

1654 ià(!
	`dvmCÏssS¹up
())

1655 
ç
;

1665 
ç
:

1666 
	`dvmShutdown
();

1668 
	}
}

1687 
	$dvmShutdown
()

1689 
	`ALOGV
("VM shutting down");

1691 ià(
CALC_CACHE_STATS
)

1692 
	`dvmDumpAtomicCacheSts
(
gDvm
.
š¡ªûofCache
);

1697 
	`dvmGcTh»adShutdown
();

1699 ià(
gDvm
.
jdwpS‹
 !ğ
NULL
)

1700 
	`dvmJdwpShutdown
(
gDvm
.
jdwpS‹
);

1701 
	`ä“
(
gDvm
.
jdwpHo¡
);

1702 
gDvm
.
jdwpHo¡
 = 
NULL
;

1703 
	`ä“
(
gDvm
.
jniT¿û
);

1704 
gDvm
.
jniT¿û
 = 
NULL
;

1705 
	`ä“
(
gDvm
.
¡ackT¿ûFe
);

1706 
gDvm
.
¡ackT¿ûFe
 = 
NULL
;

1709 
	`dvmSigÇlC©ch”Shutdown
();

1712 
	`dvmStdioCÚv”‹rShutdown
();

1714 #ifdeà
WITH_JIT


1715 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
) {

1717 
	`dvmComp”Shutdown
();

1726 
	`dvmSÏyD«mÚs
();

1728 ià(
gDvm
.
v”bo£Shutdown
)

1729 
	`ALOGD
("VM cleaning up");

1731 
	`dvmDebugg”Shutdown
();

1732 
	`dvmProfšgShutdown
();

1733 
	`dvmJniShutdown
();

1734 
	`dvmSŒšgIÁ”nShutdown
();

1735 
	`dvmTh»adShutdown
();

1736 
	`dvmCÏssShutdown
();

1737 
	`dvmRegi¡”M­Shutdown
();

1738 
	`dvmIn¡ªûofShutdown
();

1739 
	`dvmIÆšeN©iveShutdown
();

1740 
	`dvmGcShutdown
();

1741 
	`dvmAÎocT¿ck”Shutdown
();

1744 
	`dvmN©iveShutdown
();

1745 
	`dvmIÁ”ÇlN©iveShutdown
();

1747 
	`dvmF»eIÆšeSubsTabË
();

1749 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

1750 
	`ä“
(
gDvm
.
şassP©hSŒ
);

1751 
d–‘e
 
gDvm
.
´İ”t›s
;

1753 
	`ä“As£¹iÚCŒl
();

1763 
	`mem£t
(&
gDvm
, 0xcd, (gDvm));

1764 
	}
}

1771 
	$dvmF´štf
(
FILE
* 
å
, cÚ¡ * 
fÜm©
, ...)

1773 
va_li¡
 
¬gs
;

1774 
»suÉ
;

1776 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

1777 ià(
gDvm
.
vårštfHook
 !ğ
NULL
)

1778 
»suÉ
 = (*
gDvm
.
vårštfHook
)(
å
, 
fÜm©
, 
¬gs
);

1780 
»suÉ
 = 
	`vårštf
(
å
, 
fÜm©
, 
¬gs
);

1781 
	`va_’d
(
¬gs
);

1783  
»suÉ
;

1784 
	}
}

1786 #ifdeà
__GLIBC__


1787 
	~<execšfo.h
>

1793 
	$dvmPrštN©iveBackT¿û
()

1795 
size_t
 
MAX_STACK_FRAMES
 = 64;

1796 * 
¡ackF¿mes
[
MAX_STACK_FRAMES
];

1797 
size_t
 
äameCouÁ
 = 
	`backŒaû
(
¡ackF¿mes
, 
MAX_STACK_FRAMES
);

1803 ** 
¡ršgs
 = 
	`backŒaû_symbŞs
(
¡ackF¿mes
, 
äameCouÁ
);

1804 ià(
¡ršgs
 =ğ
NULL
) {

1805 
	`ALOGE
("backŒaû_symbŞ çed: %s", 
	`¡»¼Ü
(
”ºo
));

1809 
size_t
 
i
;

1810 
i
 = 0; i < 
äameCouÁ
; ++i) {

1811 
	`ALOGW
("#%-2d %s", 
i
, 
¡ršgs
[i]);

1813 
	`ä“
(
¡ršgs
);

1814 
	}
}

1816 
	$dvmPrštN©iveBackT¿û
() {

1818 
	}
}

1825 
	$dvmAbÜt
()

1853 cÚ¡ 
mes§geL’gth
 = 512;

1854 
mes§geBufãr
[
mes§geL’gth
] = {0};

1855 
»suÉ
 = 0;

1857 
	`¢´štf
(
mes§geBufãr
, 
mes§geL’gth
, "%s", 
gDvm
.
Ï¡Mes§ge
);

1860 
i
 = 0; i < 
mes§geL’gth
 && 
mes§geBufãr
[i]; i++) {

1861 
»suÉ
 +ğ
mes§geBufãr
[
i
];

1864 
	`ALOGE
("VM‡borting");

1866 
	`fæush
(
NULL
);

1869 ià(
gDvm
.
abÜtHook
 !ğ
NULL
)

1870 (*
gDvm
.
abÜtHook
)();

1876 
	`dvmPrštN©iveBackT¿û
();

1888 *((*)0xd—dd00dèğ
»suÉ
;

1889 
	`abÜt
();

1892 
	}
}

	@vm/Init.h

20 #iâdeà
DALVIK_INIT_H_


21 
	#DALVIK_INIT_H_


	)

26 
	g¡d
::
¡ršg
 
dvmS¹up
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[],

27 
boŞ
 
ignÜeUÄecognized
, 
JNIEnv
* 
pEnv
);

28 
dvmShutdown
();

29 
boŞ
 
dvmIn™Aá”ZygÙe
();

34 
dvmL©eEÇbËAs£¹iÚs
();

40 
dvmP»pFÜDexO±
(cÚ¡ * 
boÙCÏssP©h
, 
DexO±imiz”Mode
 
dexO±Mode
,

41 
DexCÏssV”ifyMode
 
v”ifyMode
, 
dexİtFÏgs
);

51 
boŞ
 
dvmFšdRequœedCÏs£sAndMemb”s
();

59 
boŞ
 
dvmFšdReã»nûMemb”s
(
CÏssObjeù
* 
şassReã»nû
);

66 
	$dvmF´štf
(
FILE
* 
å
, cÚ¡ * 
fÜm©
, ...)

67 #ià
	`defšed
(
__GNUC__
)

68 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

	@vm/InitRefs.cpp

22 
	~"D®vik.h
"

24 
boŞ
 
	$š™CÏssReã»nû
(
CÏssObjeù
** 
pCÏss
, cÚ¡ * 
Çme
) {

25 
CÏssObjeù
* 
»suÉ
;

27 
	`as£¹
(*
pCÏss
 =ğ
NULL
);

29 ià(
Çme
[0] == '[') {

30 
»suÉ
 = 
	`dvmFšdA¼ayCÏss
(
Çme
, 
NULL
);

32 
»suÉ
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
Çme
);

35 ià(
»suÉ
 =ğ
NULL
) {

36 
	`ALOGE
("Could‚Ù fšdƒs£ÁŸÈşas %s", 
Çme
);

37  
çl£
;

40 *
pCÏss
 = 
»suÉ
;

41  
Œue
;

42 
	}
}

44 
boŞ
 
	$š™CÏssReã»nûs
() {

45 ¡ruù { 
CÏssObjeù
** 
»f
; cÚ¡ * 
Çme
; } 
şas£s
[] = {

52 { &
gDvm
.
şassJavaLªgObjeù
, "Ljava/lang/Object;" },

53 { &
gDvm
.
exThrowabË
, "Ljava/lang/Throwable;" },

56 { &
gDvm
.
şassJavaLªgCÏssA¼ay
, "[Ljava/lang/Class;" },

57 { &
gDvm
.
şassJavaLªgCÏssLßd”
, "Ljava/lang/ClassLoader;" },

58 { &
gDvm
.
şassJavaLªgObjeùA¼ay
, "[Ljava/lang/Object;"},

59 { &
gDvm
.
şassJavaLªgSckT¿ûEËm’t
, "Ljava/lang/StackTraceElement;" },

60 { &
gDvm
.
şassJavaLªgSckT¿ûEËm’tA¼ay
, "[Ljava/lang/StackTraceElement;" },

61 { &
gDvm
.
şassJavaLªgSŒšg
, "Ljava/lang/String;" },

62 { &
gDvm
.
şassJavaLªgTh»ad
, "Ljava/lang/Thread;" },

63 { &
gDvm
.
şassJavaLªgTh»adGroup
, "Ljava/lang/ThreadGroup;" },

64 { &
gDvm
.
şassJavaLªgVMTh»ad
, "Ljava/lang/VMThread;" },

67 { &
gDvm
.
şassA¼ayBoŞ—n
, "[Z" },

68 { &
gDvm
.
şassA¼ayBy‹
, "[B" },

69 { &
gDvm
.
şassA¼ayShÜt
, "[S" },

70 { &
gDvm
.
şassA¼ayCh¬
, "[C" },

71 { &
gDvm
.
şassA¼ayIÁ
, "[I" },

72 { &
gDvm
.
şassA¼ayLÚg
, "[J" },

73 { &
gDvm
.
şassA¼ayFlßt
, "[F" },

74 { &
gDvm
.
şassA¼ayDoubË
, "[D" },

77 { &
gDvm
.
exAb¡¿ùM‘hodE¼Ü
, "Ljava/lang/AbstractMethodError;" },

78 { &
gDvm
.
exAr™hm‘icExû±iÚ
, "Ljava/lang/ArithmeticException;" },

79 { &
gDvm
.
exA¼ayIndexOutOfBoundsExû±iÚ
, "Ljava/lang/ArrayIndexOutOfBoundsException;" },

80 { &
gDvm
.
exA¼ayStÜeExû±iÚ
, "Ljava/lang/ArrayStoreException;" },

81 { &
gDvm
.
exCÏssCa¡Exû±iÚ
, "Ljava/lang/ClassCastException;" },

82 { &
gDvm
.
exCÏssCœcuÏr™yE¼Ü
, "Ljava/lang/ClassCircularityError;" },

83 { &
gDvm
.
exCÏssNÙFoundExû±iÚ
, "Ljava/lang/ClassNotFoundException;" },

84 { &
gDvm
.
exCÏssFÜm©E¼Ü
, "Ljava/lang/ClassFormatError;" },

85 { &
gDvm
.
exE¼Ü
, "Ljava/lang/Error;" },

86 { &
gDvm
.
exExû±iÚInIn™Ÿliz”E¼Ü
, "Ljava/lang/ExceptionInInitializerError;" },

87 { &
gDvm
.
exFeNÙFoundExû±iÚ
, "Ljava/io/FileNotFoundException;" },

88 { &
gDvm
.
exIOExû±iÚ
, "Ljava/io/IOException;" },

89 { &
gDvm
.
exIÎeg®AcûssE¼Ü
, "Ljava/lang/IllegalAccessError;" },

90 { &
gDvm
.
exIÎeg®AcûssExû±iÚ
, "Ljava/lang/IllegalAccessException;" },

91 { &
gDvm
.
exIÎeg®Argum’tExû±iÚ
, "Ljava/lang/IllegalArgumentException;" },

92 { &
gDvm
.
exIÎeg®MÚ™ÜS‹Exû±iÚ
, "Ljava/lang/IllegalMonitorStateException;" },

93 { &
gDvm
.
exIÎeg®S‹Exû±iÚ
, "Ljava/lang/IllegalStateException;" },

94 { &
gDvm
.
exIÎeg®Th»adS‹Exû±iÚ
, "Ljava/lang/IllegalThreadStateException;" },

95 { &
gDvm
.
exIncom·tibËCÏssChªgeE¼Ü
, "Ljava/lang/IncompatibleClassChangeError;" },

96 { &
gDvm
.
exIn¡ªtŸtiÚE¼Ü
, "Ljava/lang/InstantiationError;" },

97 { &
gDvm
.
exIn¡ªtŸtiÚExû±iÚ
, "Ljava/lang/InstantiationException;" },

98 { &
gDvm
.
exIÁ”ÇlE¼Ü
, "Ljava/lang/InternalError;" },

99 { &
gDvm
.
exIÁ”ru±edExû±iÚ
, "Ljava/lang/InterruptedException;" },

100 { &
gDvm
.
exLškageE¼Ü
, "Ljava/lang/LinkageError;" },

101 { &
gDvm
.
exNeg©iveA¼aySizeExû±iÚ
, "Ljava/lang/NegativeArraySizeException;" },

102 { &
gDvm
.
exNoCÏssDefFoundE¼Ü
, "Ljava/lang/NoClassDefFoundError;" },

103 { &
gDvm
.
exNoSuchF›ldE¼Ü
, "Ljava/lang/NoSuchFieldError;" },

104 { &
gDvm
.
exNoSuchF›ldExû±iÚ
, "Ljava/lang/NoSuchFieldException;" },

105 { &
gDvm
.
exNoSuchM‘hodE¼Ü
, "Ljava/lang/NoSuchMethodError;" },

106 { &
gDvm
.
exNuÎPoš‹rExû±iÚ
, "Ljava/lang/NullPointerException;" },

107 { &
gDvm
.
exOutOfMemÜyE¼Ü
, "Ljava/lang/OutOfMemoryError;" },

108 { &
gDvm
.
exRuÁimeExû±iÚ
, "Ljava/lang/RuntimeException;" },

109 { &
gDvm
.
exSckOv”æowE¼Ü
, "Ljava/lang/StackOverflowError;" },

110 { &
gDvm
.
exSËDexCacheE¼Ü
, "Ldalvik/system/StaleDexCacheError;" },

111 { &
gDvm
.
exSŒšgIndexOutOfBoundsExû±iÚ
, "Ljava/lang/StringIndexOutOfBoundsException;" },

112 { &
gDvm
.
exTy³NÙP»£ÁExû±iÚ
, "Ljava/lang/TypeNotPresentException;" },

113 { &
gDvm
.
exUn§tisf›dLškE¼Ü
, "Ljava/lang/UnsatisfiedLinkError;" },

114 { &
gDvm
.
exUnsuµÜ‹dO³¿tiÚExû±iÚ
, "Ljava/lang/UnsupportedOperationException;" },

115 { &
gDvm
.
exV”ifyE¼Ü
, "Ljava/lang/VerifyError;" },

116 { &
gDvm
.
exVœtu®MachšeE¼Ü
, "Ljava/lang/VirtualMachineError;" },

119 { &
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
, "[Ljava/lang/annotation/Annotation;" },

120 { &
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
,

122 { &
gDvm
.
şassJavaLªgReæeùAcûssibËObjeù
, "Ljava/lang/reflect/AccessibleObject;" },

123 { &
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
, "Ljava/lang/reflect/Constructor;" },

124 { &
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜA¼ay
, "[Ljava/lang/reflect/Constructor;" },

125 { &
gDvm
.
şassJavaLªgReæeùF›ld
, "Ljava/lang/reflect/Field;" },

126 { &
gDvm
.
şassJavaLªgReæeùF›ldA¼ay
, "[Ljava/lang/reflect/Field;" },

127 { &
gDvm
.
şassJavaLªgReæeùM‘hod
, "Ljava/lang/reflect/Method;" },

128 { &
gDvm
.
şassJavaLªgReæeùM‘hodA¼ay
, "[Ljava/lang/reflect/Method;"},

129 { &
gDvm
.
şassJavaLªgReæeùProxy
, "Ljava/lang/reflect/Proxy;" },

130 { &
gDvm
.
şassJavaNioR—dWr™eDœeùBy‹Bufãr
, "Ljava/nio/ReadWriteDirectByteBuffer;" },

131 { &
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcChunk
,

133 { &
gDvm
.
şassOrgA·cheH¬mÚyD®vikDdmcDdmS”v”
,

135 { &
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
,

137 { &
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
,

139 { &
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
,

142 { 
NULL
, NULL }

145 
i
;

146 
i
 = 0; 
şas£s
[i].
»f
 !ğ
NULL
; i++) {

147 ià(!
	`š™CÏssReã»nû
(
şas£s
[
i
].
»f
, cÏs£s[i].
Çme
)) {

148  
çl£
;

152  
Œue
;

153 
	}
}

155 
boŞ
 
	$š™F›ldOff£t
(
CÏssObjeù
* 
şazz
, *
pOff£t
,

156 cÚ¡ * 
Çme
, cÚ¡ * 
ty³
) {

157 
off£t
 = 
	`dvmFšdF›ldOff£t
(
şazz
, 
Çme
, 
ty³
);

158 ià(
off£t
 < 0) {

159 
	`ALOGE
("Could‚Ù fšdƒs£ÁŸÈf›ld %s.% oàty³ %s", 
şazz
->
desütÜ
, 
Çme
, 
ty³
);

160  
çl£
;

163 *
pOff£t
 = 
off£t
;

164  
Œue
;

165 
	}
}

167 
boŞ
 
	$š™F›ldOff£ts
() {

168 
	sF›ldInfo
 {

169 * 
off£t
;

170 cÚ¡ * 
Çme
;

171 cÚ¡ * 
ty³
;

174 
F›ldInfo
 
šfoDdmcChunk
[] = {

175 { &
gDvm
.
offD®vikDdmcChunk_ty³
, "type", "I" },

176 { &
gDvm
.
offD®vikDdmcChunk_d©a
, "data", "[B" },

177 { &
gDvm
.
offD®vikDdmcChunk_off£t
, "offset", "I" },

178 { &
gDvm
.
offD®vikDdmcChunk_Ëngth
, "length", "I" },

179 { 
NULL
, NULL, NULL }

182 
F›ldInfo
 
šfoFeDesütÜ
[] = {

183 { &
gDvm
.
offJavaIoFeDesütÜ_desütÜ
, "descriptor", "I" },

184 { 
NULL
, NULL, NULL }

187 
F›ldInfo
 
šfoSŒšg
[] = {

188 { &
gDvm
.
offJavaLªgSŒšg_v®ue
, "value", "[C" },

189 { &
gDvm
.
offJavaLªgSŒšg_couÁ
, "count", "I" },

190 { &
gDvm
.
offJavaLªgSŒšg_off£t
, "offset", "I" },

191 { &
gDvm
.
offJavaLªgSŒšg_hashCode
, "hashCode", "I" },

192 { 
NULL
, NULL, NULL }

195 
F›ldInfo
 
šfoTh»ad
[] = {

196 { &
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, "vmThread", "Ljava/lang/VMThread;" },

197 { &
gDvm
.
offJavaLªgTh»ad_group
, "group", "Ljava/lang/ThreadGroup;" },

198 { &
gDvm
.
offJavaLªgTh»ad_d«mÚ
, "daemon", "Z" },

199 { &
gDvm
.
offJavaLªgTh»ad_Çme
, "name", "Ljava/lang/String;" },

200 { &
gDvm
.
offJavaLªgTh»ad_´iÜ™y
, "priority", "I" },

201 { &
gDvm
.
offJavaLªgTh»ad_unÿughtHªdËr
, "uncaughtHandler", "Ljava/lang/Thread$UncaughtExceptionHandler;" },

202 { &
gDvm
.
offJavaLªgTh»ad_cÚ‹xtCÏssLßd”
, "contextClassLoader", "Ljava/lang/ClassLoader;" },

203 { &
gDvm
.
offJavaLªgTh»ad_by·ss
, "bypass", "Z" },

204 { 
NULL
, NULL, NULL }

207 
F›ldInfo
 
šfoTh»adGroup
[] = {

208 { &
gDvm
.
offJavaLªgTh»adGroup_Çme
, "name", "Ljava/lang/String;" },

209 { &
gDvm
.
offJavaLªgTh»adGroup_·»Á
, "parent", "Ljava/lang/ThreadGroup;" },

210 { 
NULL
, NULL, NULL }

213 
F›ldInfo
 
šfoThrowabË
[] = {

214 { &
gDvm
.
offJavaLªgThrowabË_¡ackS‹
, "stackState", "Ljava/lang/Object;" },

215 { &
gDvm
.
offJavaLªgThrowabË_ÿu£
, "cause", "Ljava/lang/Throwable;" },

216 { 
NULL
, NULL, NULL }

219 
F›ldInfo
 
šfoVMTh»ad
[] = {

220 { &
gDvm
.
offJavaLªgVMTh»ad_th»ad
, "thread", "Ljava/lang/Thread;" },

221 { &
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, "vmData", "I" },

222 { 
NULL
, NULL, NULL }

225 
F›ldInfo
 
šfoFš®iz”Reã»nû
[] = {

226 { &
gDvm
.
offJavaLªgRefFš®iz”Reã»nû_zomb›
, "zombie", "Ljava/lang/Object;" },

227 { 
NULL
, NULL, NULL }

230 
F›ldInfo
 
šfoCÚ¡ruùÜ
[] = {

231 { &
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_¦Ù
, "slot", "I" },

232 { &
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
, "declaringClass", "Ljava/lang/Class;" },

233 { 
NULL
, NULL, NULL }

236 
F›ldInfo
 
šfoF›ld
[] = {

237 { &
gDvm
.
offJavaLªgReæeùF›ld_¦Ù
, "slot", "I" },

238 { &
gDvm
.
offJavaLªgReæeùF›ld_deşCÏss
, "declaringClass", "Ljava/lang/Class;" },

239 { 
NULL
, NULL, NULL }

242 
F›ldInfo
 
šfoM‘hod
[] = {

243 { &
gDvm
.
offJavaLªgReæeùM‘hod_¦Ù
, "slot", "I" },

244 { &
gDvm
.
offJavaLªgReæeùM‘hod_deşCÏss
, "declaringClass", "Ljava/lang/Class;" },

245 { 
NULL
, NULL, NULL }

248 
F›ldInfo
 
šfoProxy
[] = {

249 { &
gDvm
.
offJavaLªgReæeùProxy_h
, "h", "Ljava/lang/reflect/InvocationHandler;" },

250 { 
NULL
, NULL, NULL }

253 
F›ldInfo
 
šfoBufãr
[] = {

254 { &
gDvm
.
offJavaNioBufãr_ÿ·c™y
, "capacity", "I" },

255 { &
gDvm
.
offJavaNioBufãr_efãùiveDœeùAdd»ss
, "effectiveDirectAddress", "I" },

256 { 
NULL
, NULL, NULL }

259 ¡ruù { cÚ¡ * 
Çme
; cÚ¡ 
F›ldInfo
* 
f›lds
; } 
şas£s
[] = {

260 { "LÜg/­ache/h¬mÚy/d®vik/ddmc/Chunk;", 
šfoDdmcChunk
 },

261 { "Ljava/io/FeDesütÜ;", 
šfoFeDesütÜ
 },

262 { "Ljava/Ïng/SŒšg;", 
šfoSŒšg
 },

263 { "Ljava/Ïng/Th»ad;", 
šfoTh»ad
 },

264 { "Ljava/Ïng/Th»adGroup;", 
šfoTh»adGroup
 },

265 { "Ljava/Ïng/ThrowabË;", 
šfoThrowabË
 },

266 { "Ljava/Ïng/VMTh»ad;", 
šfoVMTh»ad
 },

267 { "Ljava/Ïng/»f/Fš®iz”Reã»nû;", 
šfoFš®iz”Reã»nû
 },

268 { "Ljava/Ïng/»æeù/CÚ¡ruùÜ;", 
šfoCÚ¡ruùÜ
 },

269 { "Ljava/Ïng/»æeù/F›ld;", 
šfoF›ld
 },

270 { "Ljava/Ïng/»æeù/M‘hod;", 
šfoM‘hod
 },

271 { "Ljava/Ïng/»æeù/Proxy;", 
šfoProxy
 },

272 { "Ljava/nio/Bufãr;", 
šfoBufãr
 },

273 { 
NULL
, NULL }

276 
i
;

277 
i
 = 0; 
şas£s
[i].
Çme
 !ğ
NULL
; i++) {

278 cÚ¡ * 
şassName
 = 
şas£s
[
i
].
Çme
;

279 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
şassName
);

280 cÚ¡ 
F›ldInfo
* 
f›lds
 = 
şas£s
[
i
].fields;

282 ià(
şazz
 =ğ
NULL
) {

283 
	`ALOGE
("Could‚Ù fšdƒs£ÁŸÈşas % fÜ f›ld†ookup", 
şassName
);

284  
çl£
;

287 
j
;

288 
j
 = 0; 
f›lds
[j].
off£t
 !ğ
NULL
; j++) {

289 ià(!
	`š™F›ldOff£t
(
şazz
, 
f›lds
[
j
].
off£t
, f›lds[j].
Çme
, f›lds[j].
ty³
)) {

290  
çl£
;

295  
Œue
;

296 
	}
}

298 
boŞ
 
	$š™DœeùM‘hodReã»nûByCÏss
(
M‘hod
** 
pM‘hod
, 
CÏssObjeù
* 
şazz
,

299 cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
) {

300 
M‘hod
* 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
Çme
, 
desütÜ
);

302 ià(
m‘hod
 =ğ
NULL
) {

303 
	`ALOGE
("Could‚ot findƒssential direct method %s.%s with descriptor %s",

304 
şazz
->
desütÜ
, 
Çme
, descriptor);

305  
çl£
;

308 *
pM‘hod
 = 
m‘hod
;

309  
Œue
;

310 
	}
}

312 
boŞ
 
	$š™DœeùM‘hodReã»nû
(
M‘hod
** 
pM‘hod
, cÚ¡ * 
şassName
,

313 cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
) {

314 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
şassName
);

316 ià(
şazz
 =ğ
NULL
) {

317 
	`ALOGE
("Could‚Ù fšdƒs£ÁŸÈşas % fÜ dœeù m‘hod†ookup", 
şassName
);

318  
çl£
;

321  
	`š™DœeùM‘hodReã»nûByCÏss
(
pM‘hod
, 
şazz
, 
Çme
, 
desütÜ
);

322 
	}
}

324 
boŞ
 
	$š™CÚ¡ruùÜReã»nûs
() {

325 ¡ruù { 
M‘hod
** 
m‘hod
; cÚ¡ * 
Çme
; cÚ¡ * 
desütÜ
; } 
cÚ¡ruùÜs
[] = {

326 { &
gDvm
.
m‘hJavaLªgSckT¿ûEËm’t_š™
, "Ljava/lang/StackTraceElement;",

328 { &
gDvm
.
m‘hJavaLªgReæeùCÚ¡ruùÜ_š™
, "Ljava/lang/reflect/Constructor;",

330 { &
gDvm
.
m‘hJavaLªgReæeùF›ld_š™
, "Ljava/lang/reflect/Field;",

332 { &
gDvm
.
m‘hJavaLªgReæeùM‘hod_š™
, "Ljava/lang/reflect/Method;",

335 { &
gDvm
.
m‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
, "Ljava/nio/ReadWriteDirectByteBuffer;",

337 { &
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
,

340 { 
NULL
, NULL, NULL }

343 
i
;

344 
i
 = 0; 
cÚ¡ruùÜs
[i].
m‘hod
 !ğ
NULL
; i++) {

345 ià(!
	`š™DœeùM‘hodReã»nû
(
cÚ¡ruùÜs
[
i
].
m‘hod
, cÚ¡ruùÜs[i].
Çme
,

346 "<š™>", 
cÚ¡ruùÜs
[
i
].
desütÜ
)) {

347  
çl£
;

351  
Œue
;

352 
	}
}

354 
boŞ
 
	$š™DœeùM‘hodReã»nûs
() {

356 
M‘hod
** 
m‘hod
;

357 cÚ¡ * 
şassName
;

358 cÚ¡ * 
Çme
;

359 cÚ¡ * 
desütÜ
;

360 } 
m‘hods
[] = {

361 { &
gDvm
.
m‘hJavaLªgCÏssLßd”_g‘Sy¡emCÏssLßd”
, "Ljava/lang/ClassLoader;",

363 { &
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
, "Ljava/lang/reflect/Proxy;",

365 { &
gDvm
.
m‘hodT¿ûGcM‘hod
, "Ldalvik/system/VMDebug;", "startGC", "()V" },

366 { &
gDvm
.
m‘hodT¿ûCÏssP»pM‘hod
, "Ldalvik/system/VMDebug;", "startClassPrep", "()V" },

367 { &
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
,

371 { &
gDvm
.
m‘hD®vikSy¡emN©iveS¹_maš
, "Ldalvik/system/NativeStart;", "main", "([Ljava/lang/String;)V" },

372 { &
gDvm
.
m‘hD®vikSy¡emN©iveS¹_run
, "Ldalvik/system/NativeStart;", "run", "()V" },

373 { &
gDvm
.
m‘hJavaLªgRefFš®iz”Reã»nûAdd
,

375 { &
gDvm
.
m‘hD®vikDdmcS”v”_di¥©ch
,

377 { &
gDvm
.
m‘hD®vikDdmcS”v”_brßdÿ¡
,

379 { &
gDvm
.
m‘hJavaLªgRefReã»nûQueueAdd
,

381 { 
NULL
, NULL, NULL, NULL }

384 
i
;

385 
i
 = 0; 
m‘hods
[i].
m‘hod
 !ğ
NULL
; i++) {

386 ià(!
	`š™DœeùM‘hodReã»nû
(
m‘hods
[
i
].
m‘hod
, m‘hods[i].
şassName
,

387 
m‘hods
[
i
].
Çme
, m‘hods[i].
desütÜ
)) {

388  
çl£
;

392  
Œue
;

393 
	}
}

395 
boŞ
 
	$š™Vœtu®M‘hodOff£t
(* 
pOff£t
, cÚ¡ * 
şassName
,

396 cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
) {

397 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
şassName
);

399 ià(
şazz
 =ğ
NULL
) {

400 
	`ALOGE
("Could‚Ù fšdƒs£ÁŸÈşas % fÜ vœtu® m‘hod†ookup", 
şassName
);

401  
çl£
;

404 
M‘hod
* 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, 
Çme
, 
desütÜ
);

406 ià(
m‘hod
 =ğ
NULL
) {

407 
	`ALOGE
("Could‚ot findƒssential virtual method %s.%s with descriptor %s",

408 
şazz
->
desütÜ
, 
Çme
, descriptor);

409  
çl£
;

412 *
pOff£t
 = 
m‘hod
->
m‘hodIndex
;

413  
Œue
;

414 
	}
}

416 
boŞ
 
	$š™Vœtu®M‘hodOff£ts
() {

418 * 
off£t
;

419 cÚ¡ * 
şassName
;

420 cÚ¡ * 
Çme
;

421 cÚ¡ * 
desütÜ
;

422 } 
m‘hods
[] = {

423 { &
gDvm
.
voffJavaLªgCÏssLßd”_lßdCÏss
, "Ljava/lang/ClassLoader;", "loadClass",

425 { &
gDvm
.
voffJavaLªgObjeù_equ®s
, "Ljava/lang/Object;", "equals",

427 { &
gDvm
.
voffJavaLªgObjeù_hashCode
, "Ljava/lang/Object;", "hashCode", "()I" },

428 { &
gDvm
.
voffJavaLªgObjeù_toSŒšg
, "Ljava/lang/Object;", "toString",

430 { &
gDvm
.
voffJavaLªgTh»ad_run
, "Ljava/lang/Thread;", "run", "()V" },

431 { &
gDvm
.
voffJavaLªgTh»adGroup_»moveTh»ad
, "Ljava/lang/ThreadGroup;",

433 { 
NULL
, NULL, NULL, NULL }

436 
i
;

437 
i
 = 0; 
m‘hods
[i].
off£t
 !ğ
NULL
; i++) {

438 ià(!
	`š™Vœtu®M‘hodOff£t
(
m‘hods
[
i
].
off£t
, m‘hods[i].
şassName
,

439 
m‘hods
[
i
].
Çme
, m‘hods[i].
desütÜ
)) {

440  
çl£
;

444  
Œue
;

445 
	}
}

447 
boŞ
 
	$š™Fš®iz”Reã»nû
()

449 
gDvm
.
şassJavaLªgRefFš®iz”Reã»nû
 =

450 
	`dvmFšdSy¡emCÏss
("Ljava/lang/ref/FinalizerReference;");

451  
gDvm
.
şassJavaLªgRefFš®iz”Reã»nû
 !ğ
NULL
;

452 
	}
}

454 
boŞ
 
	$v”ifySŒšgOff£t
(cÚ¡ * 
Çme
, 
aùu®
, 
ex³ùed
) {

455 ià(
aùu®
 !ğ
ex³ùed
) {

456 
	`ALOGE
("In™Refs: SŒšg.% off£ˆğ%d;ƒx³ùed %d", 
Çme
, 
aùu®
, 
ex³ùed
);

457  
çl£
;

460  
Œue
;

461 
	}
}

463 
boŞ
 
	$v”ifySŒšgOff£ts
() {

471 
boŞ
 
ok
 = 
Œue
;

472 
ok
 &ğ
	`v”ifySŒšgOff£t
("v®ue", 
gDvm
.
offJavaLªgSŒšg_v®ue
, 
STRING_FIELDOFF_VALUE
);

473 
ok
 &ğ
	`v”ifySŒšgOff£t
("couÁ", 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
STRING_FIELDOFF_COUNT
);

474 
ok
 &ğ
	`v”ifySŒšgOff£t
("off£t", 
gDvm
.
offJavaLªgSŒšg_off£t
, 
STRING_FIELDOFF_OFFSET
);

475 
ok
 &ğ
	`v”ifySŒšgOff£t
("hashCode", 
gDvm
.
offJavaLªgSŒšg_hashCode
,

476 
STRING_FIELDOFF_HASHCODE
);

478  
ok
;

479 
	}
}

482 
boŞ
 
	$dvmFšdRequœedCÏs£sAndMemb”s
() {

489 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 1: initClassReferences");

490 
	`š™CÏssReã»nûs
();

491 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 2: initClassReferences");

492 
	`š™F›ldOff£ts
();

493 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 3: initClassReferences");

494 
	`š™CÚ¡ruùÜReã»nûs
();

495 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 4: initClassReferences");

496 
	`š™DœeùM‘hodReã»nûs
();

497 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 5: initClassReferences");

498 
	`š™Vœtu®M‘hodOff£ts
();

499 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 6: initClassReferences");

500 
	`š™Fš®iz”Reã»nû
();

501 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","STEP 7: initClassReferences");

502 
	`v”ifySŒšgOff£ts
();

504  
Œue
;

505 
	}
}

508 
boŞ
 
	$dvmFšdReã»nûMemb”s
(
CÏssObjeù
* 
şassReã»nû
) {

509 ià(
	`¡rcmp
(
şassReã»nû
->
desütÜ
, "Ljava/lang/ref/Reference;") != 0) {

510 
	`ALOGE
("Attempto set uphe wrong class‡s Reference");

511  
çl£
;

513  
	`š™F›ldOff£t
(
şassReã»nû
, &
gDvm
.
offJavaLªgRefReã»nû_³ndšgNext
,

515 && 
	`š™F›ldOff£t
(
şassReã»nû
, &
gDvm
.
offJavaLªgRefReã»nû_queue
,

517 && 
	`š™F›ldOff£t
(
şassReã»nû
, &
gDvm
.
offJavaLªgRefReã»nû_queueNext
,

519 && 
	`š™F›ldOff£t
(
şassReã»nû
, &
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
,

521 
	}
}

	@vm/InlineNative.cpp

21 
	~"D®vik.h
"

23 
	~<m©h.h
>

25 #ifdeà
HAVE__MEMCMP16


30 "C" 
u4
 
__memcmp16
(cÚ¡ 
u2
* 
s0
, cÚ¡ u2* 
s1
, 
size_t
 
couÁ
);

110 
boŞ
 
	$Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÆšeM‘hod
(

111 
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
, 
JV®ue
* 
pResuÉ
)

114  
Œue
;

115 
	}
}

127 
boŞ
 
	$javaLªgSŒšg_ch¬At
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

128 
JV®ue
* 
pResuÉ
)

130 
couÁ
, 
off£t
;

131 
A¼ayObjeù
* 
ch¬s
;

134 ià((
Objeù
*è
¬g0
 =ğ
NULL
) {

135 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

136  
çl£
;

140 
couÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_COUNT
);

141 ià((
s4
è
¬g1
 < 0 || (s4è¬g1 >ğ
couÁ
) {

142 
	`dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hIndex
(
couÁ
, 
¬g1
);

143  
çl£
;

145 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_OFFSET
);

146 
ch¬s
 = (
A¼ayObjeù
*)

147 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_VALUE
);

149 
pResuÉ
->
i
 = ((cÚ¡ 
u2
*)(*)
ch¬s
->
cÚ‹Ás
)[
¬g1
 + 
off£t
];

150  
Œue
;

152 
	}
}

154 #ifdeà
CHECK_MEMCMP16


158 
	$badM©ch
(
SŒšgObjeù
* 
thisSŒObj
, SŒšgObjeù* 
compSŒObj
,

159 
ex³ùResuÉ
, 
ÃwResuÉ
, cÚ¡ * 
com·»Ty³
)

161 
A¼ayObjeù
* 
thisA¼ay
;

162 
A¼ayObjeù
* 
compA¼ay
;

163 cÚ¡ * 
thisSŒ
;

164 cÚ¡ * 
compSŒ
;

165 
thisOff£t
, 
compOff£t
, 
thisCouÁ
, 
compCouÁ
;

167 
thisCouÁ
 =

168 
	`dvmG‘F›ldIÁ
((
Objeù
*è
thisSŒObj
, 
STRING_FIELDOFF_COUNT
);

169 
compCouÁ
 =

170 
	`dvmG‘F›ldIÁ
((
Objeù
*è
compSŒObj
, 
STRING_FIELDOFF_COUNT
);

171 
thisOff£t
 =

172 
	`dvmG‘F›ldIÁ
((
Objeù
*è
thisSŒObj
, 
STRING_FIELDOFF_OFFSET
);

173 
compOff£t
 =

174 
	`dvmG‘F›ldIÁ
((
Objeù
*è
compSŒObj
, 
STRING_FIELDOFF_OFFSET
);

175 
thisA¼ay
 = (
A¼ayObjeù
*)

176 
	`dvmG‘F›ldObjeù
((
Objeù
*è
thisSŒObj
, 
STRING_FIELDOFF_VALUE
);

177 
compA¼ay
 = (
A¼ayObjeù
*)

178 
	`dvmG‘F›ldObjeù
((
Objeù
*è
compSŒObj
, 
STRING_FIELDOFF_VALUE
);

180 
thisSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
thisSŒObj
);

181 
compSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
compSŒObj
);

183 
	`ALOGE
("% ex³ùed %d gÙ %d", 
com·»Ty³
, 
ex³ùResuÉ
, 
ÃwResuÉ
);

184 
	`ALOGE
("hi (o=%d†=%dè'%s'", 
thisOff£t
, 
thisCouÁ
, 
thisSŒ
);

185 
	`ALOGE
(" com°(o=%d†=%dè'%s'", 
compOff£t
, 
compCouÁ
, 
compSŒ
);

186 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

187 ((cÚ¡ 
u2
*è
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
, 
thisCouÁ
*2,

188 
kHexDumpLoÿl
);

189 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

190 ((cÚ¡ 
u2
*è
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
, 
compCouÁ
*2,

191 
kHexDumpLoÿl
);

192 
	`dvmAbÜt
();

193 
	}
}

199 
boŞ
 
	$javaLªgSŒšg_com·»To
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

200 
JV®ue
* 
pResuÉ
)

208 ià((
Objeù
*è
¬g0
 =ğ
NULL
 || (Objeù*è
¬g1
 == NULL) {

209 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

210  
çl£
;

214 ià(
¬g0
 =ğ
¬g1
) {

215 
pResuÉ
->
i
 = 0;

216  
Œue
;

224 
thisCouÁ
, 
thisOff£t
, 
compCouÁ
, 
compOff£t
;

225 
A¼ayObjeù
* 
thisA¼ay
;

226 
A¼ayObjeù
* 
compA¼ay
;

227 cÚ¡ 
u2
* 
thisCh¬s
;

228 cÚ¡ 
u2
* 
compCh¬s
;

229 
mšCouÁ
, 
couÁDiff
;

231 
thisCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_COUNT
);

232 
compCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_COUNT
);

233 
couÁDiff
 = 
thisCouÁ
 - 
compCouÁ
;

234 
mšCouÁ
 = (
couÁDiff
 < 0è? 
thisCouÁ
 : 
compCouÁ
;

235 
thisOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_OFFSET
);

236 
compOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_OFFSET
);

237 
thisA¼ay
 = (
A¼ayObjeù
*)

238 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_VALUE
);

239 
compA¼ay
 = (
A¼ayObjeù
*)

240 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_VALUE
);

241 
thisCh¬s
 = ((cÚ¡ 
u2
*)(*)
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
;

242 
compCh¬s
 = ((cÚ¡ 
u2
*)(*)
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
;

244 #ifdeà
HAVE__MEMCMP16


253 
Ùh”Res
 = 
	`__memcmp16
(
thisCh¬s
, 
compCh¬s
, 
mšCouÁ
);

254 #ifdeà
CHECK_MEMCMP16


255 
i
;

256 
i
 = 0; i < 
mšCouÁ
; i++) {

257 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

258 
pResuÉ
->
i
 = (
s4
è
thisCh¬s
[i] - (s4è
compCh¬s
[i];

259 ià(
pResuÉ
->
i
 !ğ
Ùh”Res
) {

260 
	`badM©ch
((
SŒšgObjeù
*è
¬g0
, (SŒšgObjeù*è
¬g1
,

261 
pResuÉ
->
i
, 
Ùh”Res
, "compareTo");

263  
Œue
;

267 ià(
Ùh”Res
 != 0) {

268 
pResuÉ
->
i
 = 
Ùh”Res
;

269  
Œue
;

278 
i
;

279 
i
 = 0; i < 
mšCouÁ
; i++) {

280 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

281 
pResuÉ
->
i
 = (
s4
è
thisCh¬s
[i] - (s4è
compCh¬s
[i];

282  
Œue
;

287 
pResuÉ
->
i
 = 
couÁDiff
;

288  
Œue
;

289 
	}
}

294 
boŞ
 
	$javaLªgSŒšg_equ®s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

295 
JV®ue
* 
pResuÉ
)

300 ià((
Objeù
*è
¬g0
 =ğ
NULL
) {

301 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

302  
çl£
;

306 ià(
¬g0
 =ğ
¬g1
) {

307 
pResuÉ
->
i
 = 
Œue
;

308  
Œue
;

317 ià(
¬g1
 =ğ0 || ((
Objeù
*è
¬g0
)->
şazz
 != ((Object*)‡rg1)->clazz) {

318 
pResuÉ
->
i
 = 
çl£
;

319  
Œue
;

327 
thisCouÁ
, 
thisOff£t
, 
compCouÁ
, 
compOff£t
;

328 
A¼ayObjeù
* 
thisA¼ay
;

329 
A¼ayObjeù
* 
compA¼ay
;

330 cÚ¡ 
u2
* 
thisCh¬s
;

331 cÚ¡ 
u2
* 
compCh¬s
;

334 
thisCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_COUNT
);

335 
compCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_COUNT
);

336 ià(
thisCouÁ
 !ğ
compCouÁ
) {

337 
pResuÉ
->
i
 = 
çl£
;

338  
Œue
;

356 
thisOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_OFFSET
);

357 
compOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_OFFSET
);

358 
thisA¼ay
 = (
A¼ayObjeù
*)

359 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_VALUE
);

360 
compA¼ay
 = (
A¼ayObjeù
*)

361 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g1
, 
STRING_FIELDOFF_VALUE
);

362 
thisCh¬s
 = ((cÚ¡ 
u2
*)(*)
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
;

363 
compCh¬s
 = ((cÚ¡ 
u2
*)(*)
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
;

365 #ifdeà
HAVE__MEMCMP16


366 
pResuÉ
->
i
 = (
	`__memcmp16
(
thisCh¬s
, 
compCh¬s
, 
thisCouÁ
) == 0);

367 #ifdeà
CHECK_MEMCMP16


368 
Ùh”Res
 = (
	`memcmp
(
thisCh¬s
, 
compCh¬s
, 
thisCouÁ
 * 2) == 0);

369 ià(
pResuÉ
->
i
 !ğ
Ùh”Res
) {

370 
	`badM©ch
((
SŒšgObjeù
*è
¬g0
, (SŒšgObjeù*è
¬g1
,

371 
Ùh”Res
, 
pResuÉ
->
i
, "equals-1");

385 
i
;

387 
i
 = 
thisCouÁ
-1; i >= 0; --i)

389 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

390 
pResuÉ
->
i
 = 
çl£
;

391  
Œue
;

394 
pResuÉ
->
i
 = 
Œue
;

397  
Œue
;

398 
	}
}

403 
boŞ
 
	$javaLªgSŒšg_Ëngth
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

404 
JV®ue
* 
pResuÉ
)

409 ià((
Objeù
*è
¬g0
 =ğ
NULL
) {

410 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

411  
çl£
;

414 
pResuÉ
->
i
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_COUNT
);

415  
Œue
;

416 
	}
}

421 
boŞ
 
	$javaLªgSŒšg_isEm±y
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

422 
JV®ue
* 
pResuÉ
)

427 ià((
Objeù
*è
¬g0
 =ğ
NULL
) {

428 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

429  
çl£
;

432 
pResuÉ
->
i
 = (
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
STRING_FIELDOFF_COUNT
) == 0);

433  
Œue
;

434 
	}
}

447 
šlše
 
	$šdexOfCommÚ
(
Objeù
* 
¡rObj
, 
ch
, 
¡¬t
)

453 
A¼ayObjeù
* 
ch¬A¼ay
 =

454 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
¡rObj
, 
STRING_FIELDOFF_VALUE
);

455 cÚ¡ 
u2
* 
ch¬s
 = (cÚ¡ u2*)(*)
ch¬A¼ay
->
cÚ‹Ás
;

456 
off£t
 = 
	`dvmG‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_OFFSET
);

457 
couÁ
 = 
	`dvmG‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_COUNT
);

462 
ch¬s
 +ğ
off£t
;

464 ià(
¡¬t
 < 0)

465 
¡¬t
 = 0;

466 ià(
¡¬t
 > 
couÁ
)

467 
¡¬t
 = 
couÁ
;

471 
¡¬t
 < 
couÁ
) {

472 ià(
ch¬s
[
¡¬t
] =ğ
ch
)

473  
¡¬t
;

474 
¡¬t
++;

478 cÚ¡ 
u2
* 
±r
 = 
ch¬s
 + 
¡¬t
;

479 cÚ¡ 
u2
* 
’dPŒ
 = 
ch¬s
 + 
couÁ
;

480 
±r
 < 
’dPŒ
) {

481 ià(*
±r
++ =ğ
ch
)

482  (
±r
-1è- 
ch¬s
;

487 
	}
}

496 
boŞ
 
	$javaLªgSŒšg_ç¡IndexOf_II
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

497 
JV®ue
* 
pResuÉ
)

500 ià((
Objeù
*è
¬g0
 =ğ
NULL
) {

501 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

502  
çl£
;

505 
pResuÉ
->
i
 = 
	`šdexOfCommÚ
((
Objeù
*è
¬g0
, 
¬g1
, 
¬g2
);

506  
Œue
;

507 
	}
}

516 
	uCÚv”t32
 {

517 
u4
 
	m¬g
;

518 
	mff
;

521 
	uCÚv”t64
 {

522 
u4
 
	m¬g
[2];

523 
s8
 
	mÎ
;

524 
	mdd
;

530 
boŞ
 
	$javaLªgM©h_abs_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

531 
JV®ue
* 
pResuÉ
)

533 
s4
 
v®
 = (s4è
¬g0
;

534 
pResuÉ
->
i
 = (
v®
 >= 0) ? val : -val;

535  
Œue
;

536 
	}
}

541 
boŞ
 
	$javaLªgM©h_abs_lÚg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

542 
JV®ue
* 
pResuÉ
)

544 
CÚv”t64
 
cÚv”t
;

545 
cÚv”t
.
¬g
[0] = 
¬g0
;

546 
cÚv”t
.
¬g
[1] = 
¬g1
;

547 
s8
 
v®
 = 
cÚv”t
.
Î
;

548 
pResuÉ
->
j
 = (
v®
 >= 0) ? val : -val;

549  
Œue
;

550 
	}
}

555 
boŞ
 
	$javaLªgM©h_abs_æßt
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

556 
JV®ue
* 
pResuÉ
)

558 
CÚv”t32
 
cÚv”t
;

560 
cÚv”t
.
¬g
 = 
¬g0
 & 0x7fffffff;

561 
pResuÉ
->
f
 = 
cÚv”t
.
ff
;

562  
Œue
;

563 
	}
}

568 
boŞ
 
	$javaLªgM©h_abs_doubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

569 
JV®ue
* 
pResuÉ
)

571 
CÚv”t64
 
cÚv”t
;

572 
cÚv”t
.
¬g
[0] = 
¬g0
;

573 
cÚv”t
.
¬g
[1] = 
¬g1
;

575 
cÚv”t
.
Î
 &= 0x7fffffffffffffffULL;

576 
pResuÉ
->
d
 = 
cÚv”t
.
dd
;

577  
Œue
;

578 
	}
}

583 
boŞ
 
	$javaLªgM©h_mš_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

584 
JV®ue
* 
pResuÉ
)

586 
pResuÉ
->
i
 = ((
s4
è
¬g0
 < (s4è
¬g1
) ?‡rg0 :‡rg1;

587  
Œue
;

588 
	}
}

593 
boŞ
 
	$javaLªgM©h_max_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

594 
JV®ue
* 
pResuÉ
)

596 
pResuÉ
->
i
 = ((
s4
è
¬g0
 > (s4è
¬g1
) ?‡rg0 :‡rg1;

597  
Œue
;

598 
	}
}

607 
boŞ
 
	$javaLªgM©h_sq¹
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

608 
JV®ue
* 
pResuÉ
)

610 
CÚv”t64
 
cÚv”t
;

611 
cÚv”t
.
¬g
[0] = 
¬g0
;

612 
cÚv”t
.
¬g
[1] = 
¬g1
;

613 
pResuÉ
->
d
 = 
	`sq¹
(
cÚv”t
.
dd
);

614  
Œue
;

615 
	}
}

620 
boŞ
 
	$javaLªgM©h_cos
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

621 
JV®ue
* 
pResuÉ
)

623 
CÚv”t64
 
cÚv”t
;

624 
cÚv”t
.
¬g
[0] = 
¬g0
;

625 
cÚv”t
.
¬g
[1] = 
¬g1
;

626 
pResuÉ
->
d
 = 
	`cos
(
cÚv”t
.
dd
);

627  
Œue
;

628 
	}
}

633 
boŞ
 
	$javaLªgM©h_sš
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

634 
JV®ue
* 
pResuÉ
)

636 
CÚv”t64
 
cÚv”t
;

637 
cÚv”t
.
¬g
[0] = 
¬g0
;

638 
cÚv”t
.
¬g
[1] = 
¬g1
;

639 
pResuÉ
->
d
 = 
	`sš
(
cÚv”t
.
dd
);

640  
Œue
;

641 
	}
}

649 
boŞ
 
	$javaLªgFlßt_æßtToIÁB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

650 
JV®ue
* 
pResuÉ
)

652 
CÚv”t32
 
cÚv”t
;

653 
cÚv”t
.
¬g
 = 
¬g0
;

654 
pResuÉ
->
i
 = 
	`i¢ªf
(
cÚv”t
.
ff
è? 0x7fc00000 : 
¬g0
;

655  
Œue
;

656 
	}
}

658 
boŞ
 
	$javaLªgFlßt_æßtToRawIÁB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

659 
JV®ue
* 
pResuÉ
)

661 
pResuÉ
->
i
 = 
¬g0
;

662  
Œue
;

663 
	}
}

665 
boŞ
 
	$javaLªgFlßt_štB™sToFlßt
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

666 
JV®ue
* 
pResuÉ
)

668 
CÚv”t32
 
cÚv”t
;

669 
cÚv”t
.
¬g
 = 
¬g0
;

670 
pResuÉ
->
f
 = 
cÚv”t
.
ff
;

671  
Œue
;

672 
	}
}

680 
boŞ
 
	$javaLªgDoubË_doubËToLÚgB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

681 
JV®ue
* 
pResuÉ
)

683 
CÚv”t64
 
cÚv”t
;

684 
cÚv”t
.
¬g
[0] = 
¬g0
;

685 
cÚv”t
.
¬g
[1] = 
¬g1
;

686 
pResuÉ
->
j
 = 
	`i¢ª
(
cÚv”t
.
dd
è? 0x7ff8000000000000LL : cÚv”t.
Î
;

687  
Œue
;

688 
	}
}

690 
boŞ
 
	$javaLªgDoubË_doubËToRawLÚgB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
,

691 
u4
 
¬g
, 
JV®ue
* 
pResuÉ
)

693 
CÚv”t64
 
cÚv”t
;

694 
cÚv”t
.
¬g
[0] = 
¬g0
;

695 
cÚv”t
.
¬g
[1] = 
¬g1
;

696 
pResuÉ
->
j
 = 
cÚv”t
.
Î
;

697  
Œue
;

698 
	}
}

700 
boŞ
 
	$javaLªgDoubË_lÚgB™sToDoubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

701 
JV®ue
* 
pResuÉ
)

703 
CÚv”t64
 
cÚv”t
;

704 
cÚv”t
.
¬g
[0] = 
¬g0
;

705 
cÚv”t
.
¬g
[1] = 
¬g1
;

706 
pResuÉ
->
d
 = 
cÚv”t
.
dd
;

707  
Œue
;

708 
	}
}

730 cÚ¡ 
IÆšeO³¿tiÚ
 
	ggDvmIÆšeOpsTabË
[] = {

731 { 
Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÆšeM‘hod
,

735 { 
javaLªgSŒšg_ch¬At
,

737 { 
javaLªgSŒšg_com·»To
,

739 { 
javaLªgSŒšg_equ®s
,

741 { 
javaLªgSŒšg_ç¡IndexOf_II
,

743 { 
javaLªgSŒšg_isEm±y
,

745 { 
javaLªgSŒšg_Ëngth
,

748 { 
javaLªgM©h_abs_št
,

750 { 
javaLªgM©h_abs_lÚg
,

752 { 
javaLªgM©h_abs_æßt
,

754 { 
javaLªgM©h_abs_doubË
,

756 { 
javaLªgM©h_mš_št
,

758 { 
javaLªgM©h_max_št
,

760 { 
javaLªgM©h_sq¹
,

762 { 
javaLªgM©h_cos
,

764 { 
javaLªgM©h_sš
,

767 { 
javaLªgFlßt_æßtToIÁB™s
,

769 { 
javaLªgFlßt_æßtToRawIÁB™s
,

771 { 
javaLªgFlßt_štB™sToFlßt
,

774 { 
javaLªgDoubË_doubËToLÚgB™s
,

776 { 
javaLªgDoubË_doubËToRawLÚgB™s
,

778 { 
javaLªgDoubË_lÚgB™sToDoubË
,

785 
boŞ
 
	$dvmIÆšeN©iveS¹up
()

787 
gDvm
.
šlšedM‘hods
 =

788 (
M‘hod
**è
	`ÿÎoc
(
	`NELEM
(
gDvmIÆšeOpsTabË
), (Method*));

789 ià(
gDvm
.
šlšedM‘hods
 =ğ
NULL
)

790  
çl£
;

792  
Œue
;

793 
	}
}

798 
	$dvmIÆšeN©iveShutdown
()

800 
	`ä“
(
gDvm
.
šlšedM‘hods
);

801 
	}
}

807 cÚ¡ 
IÆšeO³¿tiÚ
* 
	$dvmG‘IÆšeOpsTabË
()

809  
gDvmIÆšeOpsTabË
;

810 
	}
}

815 
	$dvmG‘IÆšeOpsTabËL’gth
()

817  
	`NELEM
(
gDvmIÆšeOpsTabË
);

818 
	}
}

820 
M‘hod
* 
	$dvmFšdIÆšabËM‘hod
(cÚ¡ * 
şassDesütÜ
,

821 cÚ¡ * 
m‘hodName
, cÚ¡ * 
m‘hodSigÇtu»
)

826 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
şassDesütÜ
, 
NULL
);

827 ià(
şazz
 =ğ
NULL
) {

828 
	`ALOGE
("dvmFindInlinableMethod: can't find class '%s'",

829 
şassDesütÜ
);

830 
	`dvmCË¬Exû±iÚ
(
	`dvmTh»adS–f
());

831  
NULL
;

838 
M‘hod
* 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
m‘hodName
,

839 
m‘hodSigÇtu»
);

840 ià(
m‘hod
 =ğ
NULL
) {

841 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, 
m‘hodName
,

842 
m‘hodSigÇtu»
);

844 ià(
m‘hod
 =ğ
NULL
) {

845 
	`ALOGE
("dvmFindInlinableMethod: can't find method %s.%s %s",

846 
şazz
->
desütÜ
, 
m‘hodName
, 
m‘hodSigÇtu»
);

847  
NULL
;

853 ià(!
	`dvmIsFš®CÏss
(
şazz
è&& !
	`dvmIsFš®M‘hod
(
m‘hod
)) {

854 
	`ALOGE
("dvmFindInlinableMethod: can't inline‚on-final method %s.%s",

855 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

856  
NULL
;

858 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
) ||

859 
	`dvmIsDeş¬edSynchrÚizedM‘hod
(
m‘hod
)) {

860 
	`ALOGE
("dvmFindInlinableMethod: can't inline synchronized method %s.%s",

861 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

862  
NULL
;

865  
m‘hod
;

866 
	}
}

877 
M‘hod
* 
	$dvmResŞveIÆšeN©ive
(
İIndex
)

879 
	`as£¹
(
İIndex
 >ğ0 && opIndex < 
	`NELEM
(
gDvmIÆšeOpsTabË
));

880 
M‘hod
* 
m‘hod
 = 
gDvm
.
šlšedM‘hods
[
İIndex
];

881 ià(
m‘hod
 !ğ
NULL
) {

882  
m‘hod
;

885 
m‘hod
 = 
	`dvmFšdIÆšabËM‘hod
(

886 
gDvmIÆšeOpsTabË
[
İIndex
].
şassDesütÜ
,

887 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodName
,

888 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodSigÇtu»
);

890 ià(
m‘hod
 =ğ
NULL
) {

892  
NULL
;

895 
gDvm
.
šlšedM‘hods
[
İIndex
] = 
m‘hod
;

896 
	`IF_ALOGV
() {

897 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

898 
	`ALOGV
("Registered for…rofile: %s.%s %s",

899 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

900 
	`ä“
(
desc
);

903  
m‘hod
;

904 
	}
}

910 
boŞ
 
	$dvmP”fÜmIÆšeOp4Dbg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

911 
JV®ue
* 
pResuÉ
, 
İIndex
)

913 
M‘hod
* 
m‘hod
 = 
	`dvmResŞveIÆšeN©ive
(
İIndex
);

914 ià(
m‘hod
 =ğ
NULL
) {

915  (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
,

916 
pResuÉ
);

919 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

920 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

921 
boŞ
 
»suÉ
 = (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
,

922 
pResuÉ
);

923 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

924  
»suÉ
;

925 
	}
}

	@vm/InlineNative.h

20 #iâdeà
DALVIK_INLINENATIVE_H_


21 
	#DALVIK_INLINENATIVE_H_


	)

24 
boŞ
 
dvmIÆšeN©iveS¹up
();

25 
dvmIÆšeN©iveShutdown
();

27 
M‘hod
* 
dvmFšdIÆšabËM‘hod
(cÚ¡ * 
şassDesütÜ
,

28 cÚ¡ * 
m‘hodName
, cÚ¡ * 
m‘hodSigÇtu»
);

33 
	$boŞ
 (*
	tIÆšeOp4Func
)(
	tu4
 
	t¬g0
, u4 
	t¬g1
, u4 
	t¬g2
, u4 
	t¬g3
,

34 
	tJV®ue
* 
	tpResuÉ
);

48 
	sIÆšeO³¿tiÚ
 {

49 
IÆšeOp4Func
 
func
;

50 cÚ¡ * 
şassDesütÜ
;

51 cÚ¡ * 
m‘hodName
;

52 cÚ¡ * 
m‘hodSigÇtu»
;

60 
	eN©iveIÆšeOps
 {

61 
INLINE_EMPTYINLINEMETHOD
 = 0,

62 
INLINE_STRING_CHARAT
 = 1,

63 
INLINE_STRING_COMPARETO
 = 2,

64 
INLINE_STRING_EQUALS
 = 3,

65 
INLINE_STRING_FASTINDEXOF_II
 = 4,

66 
INLINE_STRING_IS_EMPTY
 = 5,

67 
INLINE_STRING_LENGTH
 = 6,

68 
INLINE_MATH_ABS_INT
 = 7,

69 
INLINE_MATH_ABS_LONG
 = 8,

70 
INLINE_MATH_ABS_FLOAT
 = 9,

71 
INLINE_MATH_ABS_DOUBLE
 = 10,

72 
INLINE_MATH_MIN_INT
 = 11,

73 
INLINE_MATH_MAX_INT
 = 12,

74 
INLINE_MATH_SQRT
 = 13,

75 
INLINE_MATH_COS
 = 14,

76 
INLINE_MATH_SIN
 = 15,

77 
INLINE_FLOAT_TO_INT_BITS
 = 16,

78 
INLINE_FLOAT_TO_RAW_INT_BITS
 = 17,

79 
INLINE_INT_BITS_TO_FLOAT
 = 18,

80 
INLINE_DOUBLE_TO_LONG_BITS
 = 19,

81 
INLINE_DOUBLE_TO_RAW_LONG_BITS
 = 20,

82 
INLINE_LONG_BITS_TO_DOUBLE
 = 21,

88 cÚ¡ 
IÆšeO³¿tiÚ
* 
	`dvmG‘IÆšeOpsTabË
();

89 
	`dvmG‘IÆšeOpsTabËL’gth
();

95 cÚ¡ 
IÆšeO³¿tiÚ
 
gDvmIÆšeOpsTabË
[];

107 
INLINE
 
boŞ
 
	$dvmP”fÜmIÆšeOp4Std
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

108 
JV®ue
* 
pResuÉ
, 
İIndex
)

110  (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, 
pResuÉ
);

111 
	}
}

116 
boŞ
 
dvmP”fÜmIÆšeOp4Dbg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

117 
JV®ue
* 
pResuÉ
, 
İIndex
);

122 "C" 
M‘hod
* 
dvmResŞveIÆšeN©ive
(
İIndex
);

127 
boŞ
 
javaLªgSŒšg_ch¬At
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

128 
JV®ue
* 
pResuÉ
);

130 
boŞ
 
javaLªgSŒšg_com·»To
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

131 
JV®ue
* 
pResuÉ
);

133 
boŞ
 
javaLªgSŒšg_equ®s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

134 
JV®ue
* 
pResuÉ
);

136 
boŞ
 
javaLªgSŒšg_Ëngth
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

137 
JV®ue
* 
pResuÉ
);

139 
boŞ
 
javaLªgSŒšg_isEm±y
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

140 
JV®ue
* 
pResuÉ
);

142 
boŞ
 
javaLªgSŒšg_ç¡IndexOf_II
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

143 
JV®ue
* 
pResuÉ
);

145 
boŞ
 
javaLªgM©h_abs_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

146 
JV®ue
* 
pResuÉ
);

148 
boŞ
 
javaLªgM©h_abs_lÚg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

149 
JV®ue
* 
pResuÉ
);

151 
boŞ
 
javaLªgM©h_abs_æßt
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

152 
JV®ue
* 
pResuÉ
);

154 
boŞ
 
javaLªgM©h_abs_doubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

155 
JV®ue
* 
pResuÉ
);

157 
boŞ
 
javaLªgM©h_mš_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

158 
JV®ue
* 
pResuÉ
);

160 
boŞ
 
javaLªgM©h_max_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

161 
JV®ue
* 
pResuÉ
);

163 
boŞ
 
javaLªgM©h_sq¹
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

164 
JV®ue
* 
pResuÉ
);

166 
boŞ
 
javaLªgM©h_cos
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

167 
JV®ue
* 
pResuÉ
);

169 
boŞ
 
javaLªgM©h_sš
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

170 
JV®ue
* 
pResuÉ
);

172 
boŞ
 
javaLªgFlßt_æßtToIÁB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

173 
JV®ue
* 
pResuÉ
);

175 
boŞ
 
javaLªgFlßt_æßtToRawIÁB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

176 
JV®ue
* 
pResuÉ
);

178 
boŞ
 
javaLªgFlßt_štB™sToFlßt
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

179 
JV®ue
* 
pResuÉ
);

181 
boŞ
 
javaLªgDoubË_doubËToLÚgB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

182 
JV®ue
* 
pResuÉ
);

184 
boŞ
 
javaLªgDoubË_lÚgB™sToDoubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

185 
JV®ue
* 
pResuÉ
);

187 
boŞ
 
javaLªgDoubË_doubËToRawLÚgB™s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
,

188 
u4
 
¬g
, 
JV®ue
* 
pResuÉ
);

190 
boŞ
 
javaLªgDoubË_lÚgB™sToDoubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g
,

191 
JV®ue
* 
pResuÉ
);

	@vm/Inlines.cpp

21 
	#_DALVIK_GEN_INLINES


	)

22 
	~"D®vik.h
"

23 
	~"ª®ysis/CodeV”ify.h
"

24 
	~"ª®ysis/Regi¡”M­.h
"

25 
	~"m‹½/c/h—d”.ıp
"

27 #undeà
LOG_TAG


28 
	~"jdwp/JdwpPriv.h
"

	@vm/Inlines.h

28 #iâdeà
_DALVIK_GEN_INLINES


29 
	#INLINE
 
__šlše__


	)

31 
	#INLINE


	)

	@vm/Intern.cpp

19 
	~"D®vik.h
"

21 
	~<¡ddef.h
>

26 
boŞ
 
	$dvmSŒšgIÁ”nS¹up
()

28 
	`dvmIn™Mu‹x
(&
gDvm
.
š‹ºLock
);

29 
gDvm
.
š‹ºedSŒšgs
 = 
	`dvmHashTabËC»©e
(256, 
NULL
);

30 ià(
gDvm
.
š‹ºedSŒšgs
 =ğ
NULL
)

31  
çl£
;

32 
gDvm
.
l™”®SŒšgs
 = 
	`dvmHashTabËC»©e
(256, 
NULL
);

33 ià(
gDvm
.
l™”®SŒšgs
 =ğ
NULL
)

34  
çl£
;

35  
Œue
;

36 
	}
}

43 
	$dvmSŒšgIÁ”nShutdown
()

45 ià(
gDvm
.
š‹ºedSŒšgs
 !ğ
NULL
 || gDvm.
l™”®SŒšgs
 != NULL) {

46 
	`dvmDe¡royMu‹x
(&
gDvm
.
š‹ºLock
);

48 
	`dvmHashTabËF»e
(
gDvm
.
š‹ºedSŒšgs
);

49 
gDvm
.
š‹ºedSŒšgs
 = 
NULL
;

50 
	`dvmHashTabËF»e
(
gDvm
.
l™”®SŒšgs
);

51 
gDvm
.
l™”®SŒšgs
 = 
NULL
;

52 
	}
}

54 
SŒšgObjeù
* 
	$lookupSŒšg
(
HashTabË
* 
bË
, 
u4
 
key
, 
SŒšgObjeù
* 
v®ue
)

56 * 
’Œy
 = 
	`dvmHashTabËLookup
(
bË
, 
key
, (*)
v®ue
,

57 
dvmHashcmpSŒšgs
, 
çl£
);

58  (
SŒšgObjeù
*)
’Œy
;

59 
	}
}

61 
SŒšgObjeù
* 
	$š£¹SŒšg
(
HashTabË
* 
bË
, 
u4
 
key
, 
SŒšgObjeù
* 
v®ue
)

63 ià(
	`dvmIsNÚMovšgObjeù
(
v®ue
è=ğ
çl£
) {

64 
v®ue
 = (
SŒšgObjeù
*)
	`dvmClÚeObjeù
(v®ue, 
ALLOC_NON_MOVING
);

66 * 
’Œy
 = 
	`dvmHashTabËLookup
(
bË
, 
key
, (*)
v®ue
,

67 
dvmHashcmpSŒšgs
, 
Œue
);

68  (
SŒšgObjeù
*)
’Œy
;

69 
	}
}

71 
SŒšgObjeù
* 
	$lookupIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
, 
boŞ
 
isL™”®
)

73 
SŒšgObjeù
* 
found
;

75 
	`as£¹
(
¡rObj
 !ğ
NULL
);

76 
u4
 
key
 = 
	`dvmCompu‹SŒšgHash
(
¡rObj
);

77 
	`dvmLockMu‹x
(&
gDvm
.
š‹ºLock
);

78 ià(
isL™”®
) {

82 
SŒšgObjeù
* 
l™”®
 = 
	`lookupSŒšg
(
gDvm
.
l™”®SŒšgs
, 
key
, 
¡rObj
);

83 ià(
l™”®
 !ğ
NULL
) {

87 
found
 = 
l™”®
;

93 
SŒšgObjeù
* 
š‹ºed
 = 
	`lookupSŒšg
(
gDvm
.
š‹ºedSŒšgs
, 
key
, 
¡rObj
);

94 ià(
š‹ºed
 !ğ
NULL
) {

99 
	`dvmHashTabËRemove
(
gDvm
.
š‹ºedSŒšgs
, 
key
, 
š‹ºed
);

100 
found
 = 
	`š£¹SŒšg
(
gDvm
.
l™”®SŒšgs
, 
key
, 
š‹ºed
);

101 
	`as£¹
(
found
 =ğ
š‹ºed
);

107 
found
 = 
	`š£¹SŒšg
(
gDvm
.
l™”®SŒšgs
, 
key
, 
¡rObj
);

108 
	`as£¹
(
found
 =ğ
¡rObj
);

115 
found
 = 
	`lookupSŒšg
(
gDvm
.
l™”®SŒšgs
, 
key
, 
¡rObj
);

116 ià(
found
 =ğ
NULL
) {

121 
found
 = 
	`š£¹SŒšg
(
gDvm
.
š‹ºedSŒšgs
, 
key
, 
¡rObj
);

124 
	`as£¹
(
found
 !ğ
NULL
);

125 
	`dvmUÆockMu‹x
(&
gDvm
.
š‹ºLock
);

126  
found
;

127 
	}
}

135 
SŒšgObjeù
* 
	$dvmLookupIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
)

137  
	`lookupIÁ”ÃdSŒšg
(
¡rObj
, 
çl£
);

138 
	}
}

144 
SŒšgObjeù
* 
	$dvmLookupImmÜlIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
)

146  
	`lookupIÁ”ÃdSŒšg
(
¡rObj
, 
Œue
);

147 
	}
}

153 
boŞ
 
	$dvmIsW—kIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
)

155 
	`as£¹
(
¡rObj
 !ğ
NULL
);

156 ià(
gDvm
.
š‹ºedSŒšgs
 =ğ
NULL
) {

157  
çl£
;

159 
	`dvmLockMu‹x
(&
gDvm
.
š‹ºLock
);

160 
u4
 
key
 = 
	`dvmCompu‹SŒšgHash
(
¡rObj
);

161 
SŒšgObjeù
* 
found
 = 
	`lookupSŒšg
(
gDvm
.
š‹ºedSŒšgs
, 
key
, 
¡rObj
);

162 
	`dvmUÆockMu‹x
(&
gDvm
.
š‹ºLock
);

163  
found
 =ğ
¡rObj
;

164 
	}
}

169 
dvmGcD‘achD—dIÁ”ÃdSŒšgs
((*
isUnm¬kedObjeù
)(*))

174 ià(
gDvm
.
š‹ºedSŒšgs
 !ğ
NULL
) {

175 
	`dvmLockMu‹x
(&
gDvm
.
š‹ºLock
);

176 
	`dvmHashFÜ—chRemove
(
gDvm
.
š‹ºedSŒšgs
, 
isUnm¬kedObjeù
);

177 
	`dvmUÆockMu‹x
(&
gDvm
.
š‹ºLock
);

179 
	}
}

	@vm/Intern.h

19 #iâdeà
DALVIK_INTERN_H_


20 
	#DALVIK_INTERN_H_


	)

22 
boŞ
 
dvmSŒšgIÁ”nS¹up
();

23 
dvmSŒšgIÁ”nShutdown
();

24 
SŒšgObjeù
* 
dvmLookupIÁ”ÃdSŒšg
(SŒšgObjeù* 
¡rObj
);

25 
SŒšgObjeù
* 
dvmLookupImmÜlIÁ”ÃdSŒšg
(SŒšgObjeù* 
¡rObj
);

26 
boŞ
 
dvmIsW—kIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
);

27 
dvmGcD‘achD—dIÁ”ÃdSŒšgs
((*
isUnm¬kedObjeù
)(*));

	@vm/JarFile.cpp

25 
	~"D®vik.h
"

26 
	~"libdex/O±InvoÿtiÚ.h
"

28 
	~<¡dlib.h
>

29 
	~<¡ršg.h
>

30 
	~<zlib.h
>

31 
	~<fú.h
>

32 
	~<”ºo.h
>

34 cÚ¡ * 
	gkDexInJ¬Name
 = "classes.dex";

45 
	$İ’AÉ”Ç‹Suffix
(cÚ¡ *
feName
, cÚ¡ *
suffix
,

46 
æags
, **
pCachedName
)

48 *
buf
, *
c
;

49 
size_t
 
feNameL’
 = 
	`¡¾’
(
feName
);

50 
size_t
 
suffixL’
 = 
	`¡¾’
(
suffix
);

51 
size_t
 
bufL’
 = 
feNameL’
 + 
suffixL’
 + 1;

52 
fd
 = -1;

54 
buf
 = (*)
	`m®loc
(
bufL’
);

55 ià(
buf
 =ğ
NULL
) {

56 
”ºo
 = 
ENOMEM
;

63 
	`memıy
(
buf
, 
feName
, 
feNameL’
 + 1);

64 
c
 = 
	`¡¼chr
(
buf
, '.');

65 ià(
c
 =ğ
NULL
) {

66 
”ºo
 = 
ENOENT
;

67 
ba
;

69 
	`memıy
(
c
 + 1, 
suffix
, 
suffixL’
 + 1);

71 
fd
 = 
	`İ’
(
buf
, 
æags
);

72 ià(
fd
 >= 0) {

73 *
pCachedName
 = 
buf
;

74  
fd
;

76 
	`ALOGV
("Couldn'ˆİ’ %s: %s", 
buf
, 
	`¡»¼Ü
(
”ºo
));

77 
ba
:

78 
	`ä“
(
buf
);

80 
	}
}

86 
DexCacheStus
 
	$dvmDexCacheStus
(cÚ¡ *
feName
)

88 
ZArchive
 
¬chive
;

89 * 
ÿchedName
 = 
NULL
;

90 
fd
;

91 
DexCacheStus
 
»suÉ
 = 
DEX_CACHE_ERROR
;

92 
ZEÁry
 
’Œy
;

98 ià(
	`dvmCÏssP©hCÚšs
(
gDvm
.
boÙCÏssP©h
, 
feName
)) {

99  
DEX_CACHE_OK
;

108 ià(
	`dexZO³nArchive
(
feName
, &
¬chive
) != 0) {

109  
DEX_CACHE_BAD_ARCHIVE
;

111 
’Œy
 = 
	`dexZFšdEÁry
(&
¬chive
, 
kDexInJ¬Name
);

112 ià(
’Œy
 !ğ
NULL
) {

113 
boŞ
 
ÃwFe
 = 
çl£
;

119 
	`ALOGV
("dvmDexCacheStus: Checkšg cachfÜ %s", 
feName
);

120 
ÿchedName
 = 
	`dexO±G’”©eCacheFeName
(
feName
, 
kDexInJ¬Name
);

121 ià(
ÿchedName
 =ğ
NULL
)

122  
DEX_CACHE_BAD_ARCHIVE
;

124 
fd
 = 
	`dvmO³nCachedDexFe
(
feName
, 
ÿchedName
,

125 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

126 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

127  
çl£
, &
ÃwFe
, false);

128 
	`ALOGV
("dvmO³nCachedDexF»tuºed fd %d", 
fd
);

129 ià(
fd
 < 0) {

130 
»suÉ
 = 
DEX_CACHE_STALE
;

131 
ba
;

137 ià(!
	`dvmUÆockCachedDexFe
(
fd
)) {

139 
	`ALOGE
("Unableo unlock DEX file");

140 
ba
;

151 
fd
 = 
	`İ’AÉ”Ç‹Suffix
(
feName
, "odex", 
O_RDONLY
, &
ÿchedName
);

152 ià(
fd
 < 0) {

153 
	`ALOGI
("Zip is good, but‚o %s inside,‡nd‚o .odex "

154 "fšh§mdœeùÜy", 
kDexInJ¬Name
);

155 
»suÉ
 = 
DEX_CACHE_BAD_ARCHIVE
;

156 
ba
;

159 
	`ALOGV
("Usšg‡É”Ç‹ f(odexèfÜ % ...", 
feName
);

160 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
çl£
, 0, 0, 
Œue
,rue)) {

161 
	`ALOGE
("% odex ha ¡®d•’d’c›s", 
feName
);

162 
	`ALOGE
("odex source‚ot‡vailable -- failing");

163 
»suÉ
 = 
DEX_CACHE_STALE_ODEX
;

164 
ba
;

166 
	`ALOGV
("% odex ha good d•’d’c›s", 
feName
);

169 
»suÉ
 = 
DEX_CACHE_OK
;

171 
ba
:

172 
	`dexZClo£Archive
(&
¬chive
);

173 
	`ä“
(
ÿchedName
);

174 ià(
fd
 >= 0) {

175 
	`şo£
(
fd
);

177  
»suÉ
;

178 
	}
}

188 
	$dvmJ¬FeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

189 
J¬Fe
** 
µJ¬Fe
, 
boŞ
 
isBoÙ¡¿p
)

197 
ZArchive
 
¬chive
;

198 
DvmDex
* 
pDvmDex
 = 
NULL
;

199 * 
ÿchedName
 = 
NULL
;

200 
boŞ
 
¬chiveO³n
 = 
çl£
;

201 
boŞ
 
locked
 = 
çl£
;

202 
fd
 = -1;

203 
»suÉ
 = -1;

208 ià(
	`dexZO³nArchive
(
feName
, &
¬chive
) != 0)

209 
ba
;

210 
¬chiveO³n
 = 
Œue
;

214 
	`dvmS‘Clo£OnExec
(
	`dexZG‘ArchiveFd
(&
¬chive
));

219 
fd
 = 
	`İ’AÉ”Ç‹Suffix
(
feName
, "odex", 
O_RDONLY
, &
ÿchedName
);

220 ià(
fd
 >= 0) {

221 
	`ALOGV
("Usšg‡É”Ç‹ f(odexèfÜ % ...", 
feName
);

222 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
çl£
, 0, 0, 
Œue
,rue)) {

223 
	`ALOGE
("% odex ha ¡®d•’d’c›s", 
feName
);

224 
	`ä“
(
ÿchedName
);

225 
ÿchedName
 = 
NULL
;

226 
	`şo£
(
fd
);

227 
fd
 = -1;

228 
ŒyArchive
;

230 
	`ALOGV
("% odex ha good d•’d’c›s", 
feName
);

236 
ZEÁry
 
’Œy
;

238 
ŒyArchive
:

241 
	`¡ºıy
(
­kÇme
, 
feName
, 
APK_LENGTH
-1);

246 
’Œy
 = 
	`dexZFšdEÁry
(&
¬chive
, 
kDexInJ¬Name
);

247 ià(
’Œy
 !ğ
NULL
) {

248 
boŞ
 
ÃwFe
 = 
çl£
;

261 ià(
odexOuutName
 =ğ
NULL
) {

262 
ÿchedName
 = 
	`dexO±G’”©eCacheFeName
(
feName
,

263 
kDexInJ¬Name
);

264 ià(
ÿchedName
 =ğ
NULL
)

265 
ba
;

267 
ÿchedName
 = 
	`¡rdup
(
odexOuutName
);

269 
	`ALOGV
("dvmJarFileOpen: Checking cache for %s (%s)",

270 
feName
, 
ÿchedName
);

271 
fd
 = 
	`dvmO³nCachedDexFe
(
feName
, 
ÿchedName
,

272 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

273 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

274 
isBoÙ¡¿p
, &
ÃwFe
, 
Œue
);

275 ià(
fd
 < 0) {

276 
	`ALOGI
("Unableo open or create cache for %s (%s)",

277 
feName
, 
ÿchedName
);

278 
ba
;

280 
locked
 = 
Œue
;

288 ià(
ÃwFe
) {

289 
u8
 
¡¬tWh’
, 
exŒaùWh’
, 
’dWh’
;

290 
boŞ
 
»suÉ
;

291 
off_t
 
dexOff£t
;

293 
dexOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_CUR
);

294 
»suÉ
 = (
dexOff£t
 > 0);

296 ià(
»suÉ
) {

297 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

298 
»suÉ
 = 
	`dexZExŒaùEÁryToFe
(&
¬chive
, 
’Œy
, 
fd
) == 0;

299 
exŒaùWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

301 ià(
»suÉ
) {

302 
»suÉ
 = 
	`dvmO±imizeDexFe
(
fd
, 
dexOff£t
,

303 
	`dexG‘ZEÁryUncompL’
(&
¬chive
, 
’Œy
),

304 
feName
,

305 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

306 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

307 
isBoÙ¡¿p
);

310 ià(!
»suÉ
) {

311 
	`ALOGE
("Unableoƒxtract+optimize DEX from '%s'",

312 
feName
);

313 
ba
;

316 
’dWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

317 
	`ALOGD
("DEX…rep '%s': unzip in %dms,„ewrite %dms",

318 
feName
,

319 (è(
exŒaùWh’
 - 
¡¬tWh’
) / 1000,

320 (è(
’dWh’
 - 
exŒaùWh’
) / 1000);

323 
	`ALOGI
("Zip is good, but‚o %s inside,‡nd‚o valid .odex "

324 "fšh§mdœeùÜy", 
kDexInJ¬Name
);

325 
ba
;

333 ià(
	`dvmDexFeO³nFromFd
(
fd
, &
pDvmDex
) != 0) {

334 
	`ALOGI
("UÇbËØm­ % š %s", 
kDexInJ¬Name
, 
feName
);

335 
ba
;

338 ià(
locked
) {

340 ià(!
	`dvmUÆockCachedDexFe
(
fd
)) {

342 
	`ALOGE
("Unableo unlock DEX file");

343 
ba
;

345 
locked
 = 
çl£
;

348 
	`ALOGV
("SucûssfuÎy o³Ãd '%s' iÀ'%s'", 
kDexInJ¬Name
, 
feName
);

350 *
µJ¬Fe
 = (
J¬Fe
*è
	`ÿÎoc
(1, (JarFile));

351 (*
µJ¬Fe
)->
¬chive
 =‡rchive;

352 (*
µJ¬Fe
)->
ÿcheFeName
 = 
ÿchedName
;

353 (*
µJ¬Fe
)->
pDvmDex
 =…DvmDex;

354 
ÿchedName
 = 
NULL
;

355 
»suÉ
 = 0;

357 
ba
:

359 ià(
¬chiveO³n
 && 
»suÉ
 != 0)

360 
	`dexZClo£Archive
(&
¬chive
);

361 
	`ä“
(
ÿchedName
);

362 ià(
fd
 >= 0) {

363 ià(
locked
)

364 (è
	`dvmUÆockCachedDexFe
(
fd
);

365 
	`şo£
(
fd
);

367  
»suÉ
;

368 
	}
}

373 
	$dvmJ¬FeF»e
(
J¬Fe
* 
pJ¬Fe
)

375 ià(
pJ¬Fe
 =ğ
NULL
)

378 
	`dvmDexFeF»e
(
pJ¬Fe
->
pDvmDex
);

379 
	`dexZClo£Archive
(&
pJ¬Fe
->
¬chive
);

380 
	`ä“
(
pJ¬Fe
->
ÿcheFeName
);

381 
	`ä“
(
pJ¬Fe
);

382 
	}
}

	@vm/JarFile.h

19 #iâdeà
DALVIK_JARFILE_H_


20 
	#DALVIK_JARFILE_H_


	)

26 
	sJ¬Fe
 {

27 
ZArchive
 
	m¬chive
;

29 * 
	mÿcheFeName
;

30 
DvmDex
* 
	mpDvmDex
;

39 
dvmJ¬FeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

40 
J¬Fe
** 
µJ¬Fe
, 
boŞ
 
isBoÙ¡¿p
);

45 
dvmJ¬FeF»e
(
J¬Fe
* 
pJ¬Fe
);

48 
INLINE
 
DvmDex
* 
	$dvmG‘J¬FeDex
(
J¬Fe
* 
pJ¬Fe
) {

49  
pJ¬Fe
->
pDvmDex
;

50 
	}
}

53 
INLINE
 cÚ¡ * 
	$dvmG‘J¬FeCacheFeName
(
J¬Fe
* 
pJ¬Fe
) {

54  
pJ¬Fe
->
ÿcheFeName
;

55 
	}
}

57 
	eDexCacheStus
 {

58 
	mDEX_CACHE_ERROR
 = -2,

59 
	mDEX_CACHE_BAD_ARCHIVE
 = -1,

60 
	mDEX_CACHE_OK
 = 0,

61 
	mDEX_CACHE_STALE
,

62 
	mDEX_CACHE_STALE_ODEX
,

69 
DexCacheStus
 
dvmDexCacheStus
(cÚ¡ *
feName
);

	@vm/Jni.cpp

20 
	~"D®vik.h
"

21 
	~"JniIÁ”Çl.h
"

22 
	~"ScİedPth»adMu‹xLock.h
"

23 
	~"UniquePŒ.h
"

25 
	~<¡dlib.h
>

26 
	~<¡d¬g.h
>

27 
	~<lim™s.h
>

29 
	~"shadowlib/ShadowLib.h
"

139 #ifdeà
WITH_JNI_STACK_CHECK


140 
	#COMPUTE_STACK_SUM
(
_£lf
è
	`compu‹SckSum
(_£lf);

	)

141 
	#CHECK_STACK_SUM
(
_£lf
è
	`checkSckSum
(_£lf);

	)

149 
	$compu‹SckSum
(
Th»ad
* 
£lf
) {

150 cÚ¡ 
u1
* 
low
 = (cÚ¡ u1*)
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

151 
u4
 
üc
 = 
	`dvmIn™Crc32
();

152 
£lf
->
¡ackCrc
 = 0;

153 
üc
 = 
	`dvmCompu‹Crc32
(üc, 
low
, 
£lf
->
š‹½SckS¹
 -†ow);

154 
£lf
->
¡ackCrc
 = 
üc
;

155 
	}
}

167 
	$checkSckSum
(
Th»ad
* 
£lf
) {

168 cÚ¡ 
u1
* 
low
 = (cÚ¡ u1*)
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

169 
u4
 
¡ackCrc
 = 
£lf
->stackCrc;

170 
£lf
->
¡ackCrc
 = 0;

171 
u4
 
üc
 = 
	`dvmIn™Crc32
();

172 
üc
 = 
	`dvmCompu‹Crc32
(üc, 
low
, 
£lf
->
š‹½SckS¹
 -†ow);

173 ià(
üc
 !ğ
¡ackCrc
) {

174 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

175 ià(
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
š‹½Save
.
curF¿me
) == 1) {

176 
	`ALOGD
("JNI: bad sck CRC (0x%08xè-- okay duršg in™", 
¡ackCrc
);

177 } ià(
	`¡rcmp
(
m‘h
->
Çme
, "nativeLoad") == 0 &&

178 (
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, "Ljava/lang/Runtime;") == 0)) {

179 
	`ALOGD
("JNI: bad sck CRC (0x%08xè-- okay duršg JNI_OnLßd", 
¡ackCrc
);

181 
	`ALOGW
("JNI: bad sck CRC (%08x v %08x)", 
üc
, 
¡ackCrc
);

182 
	`dvmAbÜt
();

185 
£lf
->
¡ackCrc
 = (
u4
) -1;

186 
	}
}

189 
	#COMPUTE_STACK_SUM
(
_£lf
è(()0)

	)

190 
	#CHECK_STACK_SUM
(
_£lf
è(()0)

	)

209 şas 
	cScİedJniTh»adS‹
 {

210 
	mpublic
:

211 
ex¶ic™
 
	$ScİedJniTh»adS‹
(
JNIEnv
* 
’v
) {

212 
mS–f
 = ((
JNIEnvExt
*è
’v
)->
£lf
;

214 ià(
	`UNLIKELY
(
gDvmJni
.
wÜkAroundAµJniBugs
)) {

217 
Th»ad
* 
£lf
 = 
gDvmJni
.
wÜkAroundAµJniBugs
 ? 
	`dvmTh»adS–f
(è: 
mS–f
;

218 ià(
£lf
 !ğ
mS–f
) {

219 
	`ALOGE
("JNI ERROR:ƒnv->£là!ğth»ad-£là(%°vs. %p);‡uto-cÜ»ùšg", 
mS–f
, 
£lf
);

220 
mS–f
 = 
£lf
;

224 
	`CHECK_STACK_SUM
(
mS–f
);

225 
	`dvmChªgeStus
(
mS–f
, 
THREAD_RUNNING
);

228 ~
	$ScİedJniTh»adS‹
() {

229 
	`dvmChªgeStus
(
mS–f
, 
THREAD_NATIVE
);

230 
	`COMPUTE_STACK_SUM
(
mS–f
);

231 
	}
}

233 
šlše
 
Th»ad
* 
	$£lf
() {

234  
mS–f
;

235 
	}
}

237 
	g´iv©e
:

238 
Th»ad
* 
mS–f
;

241 
ScİedJniTh»adS‹
(const ScopedJniThreadState&);

242 
	gİ”©Ü
=(cÚ¡ 
ScİedJniTh»adS‹
&);

245 
	#kGlob®RefsTabËIn™ŸlSize
 512

	)

246 
	#kGlob®RefsTabËMaxSize
 51200

	)

247 
	#kG»fW©”IÁ”v®
 100

	)

248 
	#kT¿ckG»fU§ge
 
Œue


	)

250 
	#kW—kGlob®RefsTabËIn™ŸlSize
 16

	)

252 
	#kPšTabËIn™ŸlSize
 16

	)

253 
	#kPšTabËMaxSize
 1024

	)

254 
	#kPšCom¶ašTh»shŞd
 10

	)

256 
boŞ
 
	$dvmJniS¹up
() {

257 ià(!
gDvm
.
jniGlob®RefTabË
.
	`š™
(
kGlob®RefsTabËIn™ŸlSize
,

258 
kGlob®RefsTabËMaxSize
,

259 
kIndœeùKšdGlob®
)) {

260  
çl£
;

262 ià(!
gDvm
.
jniW—kGlob®RefTabË
.
	`š™
(
kW—kGlob®RefsTabËIn™ŸlSize
,

263 
kGlob®RefsTabËMaxSize
,

264 
kIndœeùKšdW—kGlob®
)) {

265  
çl£
;

268 
	`dvmIn™Mu‹x
(&
gDvm
.
jniGlob®RefLock
);

269 
	`dvmIn™Mu‹x
(&
gDvm
.
jniW—kGlob®RefLock
);

270 
gDvm
.
jniGlob®RefLoM¬k
 = 0;

271 
gDvm
.
jniGlob®RefHiM¬k
 = 
kG»fW©”IÁ”v®
 * 2;

273 ià(!
	`dvmIn™Reã»nûTabË
(&
gDvm
.
jniPšRefTabË
, 
kPšTabËIn™ŸlSize
, 
kPšTabËMaxSize
)) {

274  
çl£
;

277 
	`dvmIn™Mu‹x
(&
gDvm
.
jniPšRefLock
);

279  
Œue
;

280 
	}
}

282 
	$dvmJniShutdown
() {

283 
gDvm
.
jniGlob®RefTabË
.
	`de¡roy
();

284 
gDvm
.
jniW—kGlob®RefTabË
.
	`de¡roy
();

285 
	`dvmCË¬Reã»nûTabË
(&
gDvm
.
jniPšRefTabË
);

286 
	}
}

294 
JNIEnvExt
* 
	$dvmG‘JNIEnvFÜTh»ad
() {

295 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

296 ià(
£lf
 =ğ
NULL
) {

297  
NULL
;

299  (
JNIEnvExt
*è
	`dvmG‘Th»adJNIEnv
(
£lf
);

300 
	}
}

312 
Objeù
* 
	$dvmDecodeIndœeùRef
(
Th»ad
* 
£lf
, 
jobjeù
 
jobj
) {

313 ià(
jobj
 =ğ
NULL
) {

314  
NULL
;

317 
	`šdœeùRefKšd
(
jobj
)) {

318 
kIndœeùKšdLoÿl
:

320 
Objeù
* 
»suÉ
 = 
£lf
->
jniLoÿlRefTabË
.
	`g‘
(
jobj
);

321 ià(
	`UNLIKELY
(
»suÉ
 =ğ
NULL
)) {

322 
	`ALOGE
("JNI ERROR (­°bug): u£ oàd–‘ed†oÿÈ»ã»nû (%p)", 
jobj
);

323 
	`dvmAbÜt
();

325  
»suÉ
;

327 
kIndœeùKšdGlob®
:

330 
IndœeùRefTabË
* 
pRefTabË
 = &
gDvm
.
jniGlob®RefTabË
;

331 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniGlob®RefLock
);

332 
Objeù
* 
»suÉ
 = 
pRefTabË
->
	`g‘
(
jobj
);

333 ià(
	`UNLIKELY
(
»suÉ
 =ğ
NULL
)) {

334 
	`ALOGE
("JNI ERROR (­°bug): u£ oàd–‘ed glob®„eã»nû (%p)", 
jobj
);

335 
	`dvmAbÜt
();

337  
»suÉ
;

339 
kIndœeùKšdW—kGlob®
:

342 
IndœeùRefTabË
* 
pRefTabË
 = &
gDvm
.
jniW—kGlob®RefTabË
;

343 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniW—kGlob®RefLock
);

344 
Objeù
* 
»suÉ
 = 
pRefTabË
->
	`g‘
(
jobj
);

345 ià(
»suÉ
 =ğ
kCË¬edJniW—kGlob®
) {

346 
»suÉ
 = 
NULL
;

347 } ià(
	`UNLIKELY
(
»suÉ
 =ğ
NULL
)) {

348 
	`ALOGE
("JNI ERROR (­°bug): u£ oàd–‘ed w—k glob®„eã»nû (%p)", 
jobj
);

349 
	`dvmAbÜt
();

351  
»suÉ
;

353 
kIndœeùKšdInv®id
:

355 ià(
	`UNLIKELY
(
gDvmJni
.
wÜkAroundAµJniBugs
)) {

357  
»š‹½»t_ÿ¡
<
Objeù
*>(
jobj
);

359 
	`ALOGW
("Inv®id indœeù„eã»nû %°š decodeIndœeùRef", 
jobj
);

360 
	`dvmAbÜt
();

361  
kInv®idIndœeùRefObjeù
;

363 
	}
}

365 
	$AddLoÿlReã»nûFau»
(
IndœeùRefTabË
* 
pRefTabË
) {

366 
pRefTabË
->
	`dump
("JNI†ocal");

367 
	`ALOGE
("Faed‡ddšgØJNI†oÿÈ»àbË (ha %zdƒÁr›s)", 
pRefTabË
->
	`ÿ·c™y
());

368 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

369 
	`dvmAbÜt
();

370 
	}
}

381 
šlše
 
jobjeù
 
	$addLoÿlReã»nû
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
) {

382 ià(
obj
 =ğ
NULL
) {

383  
NULL
;

386 
IndœeùRefTabË
* 
pRefTabË
 = &
£lf
->
jniLoÿlRefTabË
;

387 * 
curF¿me
 = 
£lf
->
š‹½Save
.curFrame;

388 
u4
 
cook›
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
xŒa
.
loÿlRefCook›
;

389 
jobjeù
 
jobj
 = (jobjeùè
pRefTabË
->
	`add
(
cook›
, 
obj
);

390 ià(
	`UNLIKELY
(
jobj
 =ğ
NULL
)) {

391 
	`AddLoÿlReã»nûFau»
(
pRefTabË
);

393 ià(
	`UNLIKELY
(
gDvmJni
.
wÜkAroundAµJniBugs
)) {

395  
»š‹½»t_ÿ¡
<
jobjeù
>(
obj
);

397  
jobj
;

398 
	}
}

404 
boŞ
 
	$’su»LoÿlC­ac™y
(
Th»ad
* 
£lf
, 
ÿ·c™y
) {

405 
numEÁr›s
 = 
£lf
->
jniLoÿlRefTabË
.
	`ÿ·c™y
();

407  ((
kJniLoÿlRefMax
 - 
numEÁr›s
è>ğ
ÿ·c™y
);

408 
	}
}

413 
	$d–‘eLoÿlReã»nû
(
Th»ad
* 
£lf
, 
jobjeù
 
jobj
) {

414 ià(
jobj
 =ğ
NULL
) {

418 
IndœeùRefTabË
* 
pRefTabË
 = &
£lf
->
jniLoÿlRefTabË
;

419 * 
curF¿me
 = 
£lf
->
š‹½Save
.curFrame;

420 
u4
 
cook›
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
xŒa
.
loÿlRefCook›
;

421 ià(!
pRefTabË
->
	`»move
(
cook›
, 
jobj
)) {

429 
	`ALOGW
("JNI WARNING: D–‘eLoÿlRef(%pèçedØfšdƒÁry", 
jobj
);

431 
	}
}

439 
jobjeù
 
	$addGlob®Reã»nû
(
Objeù
* 
obj
) {

440 ià(
obj
 =ğ
NULL
) {

441  
NULL
;

447 ià(
çl£
 && 
	`dvmIsCÏssObjeù
((
Objeù
*)
obj
)) {

448 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
obj
;

449 
	`ALOGI
("-------");

450 
	`ALOGI
("Addšg glob®„eàÚ cÏs %s", 
şazz
->
desütÜ
);

451 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

453 ià(
çl£
 && ((
Objeù
*)
obj
)->
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
) {

454 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
obj
;

455 * 
¡r
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

456 ià(
	`¡rcmp
(
¡r
, "sync-response") == 0) {

457 
	`ALOGI
("-------");

458 
	`ALOGI
("Addšg glob®„eàÚ sŒšg '%s'", 
¡r
);

459 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

462 
	`ä“
(
¡r
);

464 ià(
çl£
 && ((
Objeù
*)
obj
)->
şazz
 =ğ
gDvm
.
şassA¼ayBy‹
) {

465 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
obj
;

466 ià(
¬¿yObj
->
Ëngth
 == 8192

469 
	`ALOGI
("Adding global„ef on byte‡rray %p (len=%d)",

470 
¬¿yObj
,‡¼ayObj->
Ëngth
);

471 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

475 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniGlob®RefLock
);

486 
jobjeù
 
jobj
 = (jobjeùè
gDvm
.
jniGlob®RefTabË
.
	`add
(
IRT_FIRST_SEGMENT
, 
obj
);

487 ià(
jobj
 =ğ
NULL
) {

488 
gDvm
.
jniGlob®RefTabË
.
	`dump
("JNI global");

489 
	`ALOGE
("Failed‡ddingo JNI global„efable (%zdƒntries)",

490 
gDvm
.
jniGlob®RefTabË
.
	`ÿ·c™y
());

491 
	`dvmAbÜt
();

494 
	`LOGVV
("GREF‡dd %° (%s.%s)", 
obj
,

495 
	`dvmG‘Cu¼’tJNIM‘hod
()->
şazz
->
desütÜ
,

496 
	`dvmG‘Cu¼’tJNIM‘hod
()->
Çme
);

499 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

500 
couÁ
 = 
gDvm
.
jniGlob®RefTabË
.
	`ÿ·c™y
();

502 ià(
couÁ
 > 
gDvm
.
jniGlob®RefHiM¬k
) {

503 
	`ALOGD
("GREF ha šü—£dØ%d", 
couÁ
);

504 
gDvm
.
jniGlob®RefHiM¬k
 +ğ
kG»fW©”IÁ”v®
;

505 
gDvm
.
jniGlob®RefLoM¬k
 +ğ
kG»fW©”IÁ”v®
;

508 ià(
couÁ
 >ğ
gDvm
.
jniG»fLim™
) {

509 ià(
gDvmJni
.
w¬nOÆy
) {

510 
	`ALOGW
("ExûssivJNI glob®„eã»nû (%d)", 
couÁ
);

512 
gDvm
.
jniGlob®RefTabË
.
	`dump
("JNI global");

513 
	`ALOGE
("ExûssivJNI glob®„eã»nû (%d)", 
couÁ
);

514 
	`dvmAbÜt
();

519  
jobj
;

520 
	}
}

522 
jobjeù
 
	$addW—kGlob®Reã»nû
(
Objeù
* 
obj
) {

523 ià(
obj
 =ğ
NULL
) {

524  
NULL
;

527 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniW—kGlob®RefLock
);

528 
IndœeùRefTabË
 *
bË
 = &
gDvm
.
jniW—kGlob®RefTabË
;

529 
jobjeù
 
jobj
 = (jobjeùè
bË
->
	`add
(
IRT_FIRST_SEGMENT
, 
obj
);

530 ià(
jobj
 =ğ
NULL
) {

531 
gDvm
.
jniW—kGlob®RefTabË
.
	`dump
("JNI weak global");

532 
	`ALOGE
("Faed‡ddšgØJNI w—k glob®„eàbË (%zdƒÁr›s)", 
bË
->
	`ÿ·c™y
());

533 
	`dvmAbÜt
();

535  
jobj
;

536 
	}
}

538 
	$d–‘eW—kGlob®Reã»nû
(
jobjeù
 
jobj
) {

539 ià(
jobj
 =ğ
NULL
) {

543 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniW—kGlob®RefLock
);

544 
IndœeùRefTabË
 *
bË
 = &
gDvm
.
jniW—kGlob®RefTabË
;

545 ià(!
bË
->
	`»move
(
IRT_FIRST_SEGMENT
, 
jobj
)) {

546 
	`ALOGW
("JNI: D–‘eW—kGlob®Ref(%pèçedØfšdƒÁry", 
jobj
);

548 
	}
}

557 
	$d–‘eGlob®Reã»nû
(
jobjeù
 
jobj
) {

558 ià(
jobj
 =ğ
NULL
) {

562 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniGlob®RefLock
);

563 ià(!
gDvm
.
jniGlob®RefTabË
.
	`»move
(
IRT_FIRST_SEGMENT
, 
jobj
)) {

564 
	`ALOGW
("JNI: D–‘eGlob®Ref(%pèçedØfšdƒÁry", 
jobj
);

568 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

569 
couÁ
 = 
gDvm
.
jniGlob®RefTabË
.
	`ÿ·c™y
();

571 ià(
couÁ
 < 
gDvm
.
jniGlob®RefLoM¬k
) {

572 
	`ALOGD
("GREF ha deü—£dØ%d", 
couÁ
);

573 
gDvm
.
jniGlob®RefHiM¬k
 -ğ
kG»fW©”IÁ”v®
;

574 
gDvm
.
jniGlob®RefLoM¬k
 -ğ
kG»fW©”IÁ”v®
;

577 
	}
}

585 
	$pšPrim™iveA¼ay
(
A¼ayObjeù
* 
¬¿yObj
) {

586 ià(
¬¿yObj
 =ğ
NULL
) {

590 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniPšRefLock
);

592 ià(!
	`dvmAddToReã»nûTabË
(&
gDvm
.
jniPšRefTabË
, (
Objeù
*)
¬¿yObj
)) {

593 
	`dvmDumpReã»nûTabË
(&
gDvm
.
jniPšRefTabË
, "JNI…inned‡rray");

594 
	`ALOGE
("Failed‡ddingo JNI…inned‡rray„efable (%dƒntries)",

595 (è
	`dvmReã»nûTabËEÁr›s
(&
gDvm
.
jniPšRefTabË
));

596 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

597 
	`dvmAbÜt
();

608 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

609 
couÁ
 = 0;

610 
Objeù
** 
µObj
 = 
gDvm
.
jniPšRefTabË
.
bË
;

611 
µObj
 < 
gDvm
.
jniPšRefTabË
.
ÃxtEÁry
) {

612 ià(*
µObj
++ =ğ(
Objeù
*è
¬¿yObj
)

613 
couÁ
++;

616 ià(
couÁ
 > 
kPšCom¶ašTh»shŞd
) {

617 
	`ALOGW
("JNI:…in count on‡rray %p (%s) is‚ow %d",

618 
¬¿yObj
,‡¼ayObj->
şazz
->
desütÜ
, 
couÁ
);

622 
	}
}

628 
	$uÅšPrim™iveA¼ay
(
A¼ayObjeù
* 
¬¿yObj
) {

629 ià(
¬¿yObj
 =ğ
NULL
) {

633 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvm
.
jniPšRefLock
);

634 ià(!
	`dvmRemoveFromReã»nûTabË
(&
gDvm
.
jniPšRefTabË
,

635 
gDvm
.
jniPšRefTabË
.
bË
, (
Objeù
*è
¬¿yObj
))

637 
	`ALOGW
("JNI: unpinPrimitiveArray(%p) failedo findƒntry (valid=%d)",

638 
¬¿yObj
, 
	`dvmIsH—pAdd»ss
((
Objeù
*)‡rrayObj));

641 
	}
}

648 
	$dvmDumpJniReã»nûTabËs
() {

649 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

650 
£lf
->
jniLoÿlRefTabË
.
	`dump
("JNI†ocal");

651 
gDvm
.
jniGlob®RefTabË
.
	`dump
("JNI global");

652 
	`dvmDumpReã»nûTabË
(&
gDvm
.
jniPšRefTabË
, "JNI…inned‡rray");

653 
	}
}

667 
jobjeùRefTy³
 
	$dvmG‘JNIRefTy³
(
Th»ad
* 
£lf
, 
jobjeù
 
jobj
) {

673 
	`as£¹
(
jobj
 !ğ
NULL
);

675 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
£lf
, 
jobj
);

676 ià(
obj
 =ğ
»š‹½»t_ÿ¡
<
Objeù
*>(
jobj
è&& 
gDvmJni
.
wÜkAroundAµJniBugs
) {

679  
£lf
->
jniLoÿlRefTabË
.
	`cÚšs
(
obj
è? 
JNILoÿlRefTy³
 : 
JNIInv®idRefTy³
;

680 } ià(
obj
 =ğ
kInv®idIndœeùRefObjeù
) {

681  
JNIInv®idRefTy³
;

683  (
jobjeùRefTy³
è
	`šdœeùRefKšd
(
jobj
);

685 
	}
}

687 
	$dumpM‘hods
(
M‘hod
* 
m‘hods
, 
size_t
 
m‘hodCouÁ
, cÚ¡ * 
Çme
) {

688 
size_t
 
i
;

689 
i
 = 0; i < 
m‘hodCouÁ
; ++i) {

690 
M‘hod
* 
m‘hod
 = &
m‘hods
[
i
];

691 ià(
	`¡rcmp
(
Çme
, 
m‘hod
->name) == 0) {

692 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

693 
	`ALOGE
("Cªdid©e: %s.%s:%s", 
m‘hod
->
şazz
->
desütÜ
, 
Çme
, 
desc
);

694 
	`ä“
(
desc
);

697 
	}
}

699 
	$dumpCªdid©eM‘hods
(
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
) {

700 
	`ALOGE
("ERROR: couldn't find‚ative method");

701 
	`ALOGE
("Reque¡ed: %s.%s:%s", 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

702 
	`dumpM‘hods
(
şazz
->
vœtu®M‘hods
, cÏzz->
vœtu®M‘hodCouÁ
, 
m‘hodName
);

703 
	`dumpM‘hods
(
şazz
->
dœeùM‘hods
, cÏzz->
dœeùM‘hodCouÁ
, 
m‘hodName
);

704 
	}
}

709 
boŞ
 
	$dvmRegi¡”JNIM‘hod
(
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

710 cÚ¡ * 
sigÇtu»
, * 
âPŒ
)

712 ià(
âPŒ
 =ğ
NULL
) {

713  
çl£
;

718 
boŞ
 
ç¡Jni
 = 
çl£
;

719 ià(*
sigÇtu»
 == '!') {

720 
ç¡Jni
 = 
Œue
;

721 ++
sigÇtu»
;

722 
	`ALOGV
("ç¡ JNI m‘hod %s.%s:% d‘eùed", 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

725 
M‘hod
* 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
m‘hodName
, 
sigÇtu»
);

726 ià(
m‘hod
 =ğ
NULL
) {

727 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, 
m‘hodName
, 
sigÇtu»
);

729 ià(
m‘hod
 =ğ
NULL
) {

730 
	`dumpCªdid©eM‘hods
(
şazz
, 
m‘hodName
, 
sigÇtu»
);

731  
çl£
;

734 ià(!
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

735 
	`ALOGW
("UÇbËØ»gi¡”:‚Ù‚©ive: %s.%s:%s", 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

736  
çl£
;

739 ià(
ç¡Jni
) {

741 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
)) {

744 
	`ALOGE
("fast JNI method %s.%s:%s cannot be synchronized",

745 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

746  
çl£
;

748 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

752 
	`ALOGE
("fast JNI method %s.%s:%s cannot be‚on-static",

753 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

754  
çl£
;

758 ià(
m‘hod
->
ÇtiveFunc
 !ğ
dvmResŞveN©iveM‘hod
) {

760 
	`ALOGV
("NÙe: %s.%s:% wa ®»ady„egi¡”ed", 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

763 
m‘hod
->
ç¡Jni
 = fastJni;

764 
	`dvmU£JNIBridge
(
m‘hod
, 
âPŒ
);

766 
	`ALOGV
("JNI-»gi¡”ed %s.%s:%s", 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

767  
Œue
;

768 
	}
}

770 cÚ¡ * 
	gbutInP»fixes
[] = {

781 
boŞ
 
	$shouldT¿û
(
M‘hod
* 
m‘hod
) {

782 cÚ¡ * 
şassName
 = 
m‘hod
->
şazz
->
desütÜ
;

784 ià(
gDvm
.
jniT¿û
 && 
	`¡r¡r
(
şassName
, gDvm.jniTrace)) {

785  
Œue
;

789 ià(
gDvmJni
.
logThœdP¬tyJni
) {

790 
size_t
 
i
 = 0; i < 
	`NELEM
(
butInP»fixes
); ++i) {

791 ià(
	`¡r¡r
(
şassName
, 
butInP»fixes
[
i
]) == className) {

792  
çl£
;

795  
Œue
;

797  
çl£
;

798 
	}
}

804 
	$dvmU£JNIBridge
(
M‘hod
* 
m‘hod
, * 
func
) {

805 
m‘hod
->
shouldT¿û
 = 
	`shouldT¿û
(method);

808 
m‘hod
->
noRef
 = 
Œue
;

809 cÚ¡ * 
ı
 = 
m‘hod
->
shÜty
;

810 *++
ı
 != '\0') {

811 ià(*
ı
 == 'L') {

812 
m‘hod
->
noRef
 = 
çl£
;

817 
D®vikBridgeFunc
 
bridge
 = 
gDvmJni
.
u£CheckJni
 ? 
dvmCheckC®lJNIM‘hod
 : 
dvmC®lJNIM‘hod
;

818 
	`dvmS‘N©iveFunc
(
m‘hod
, 
bridge
, (cÚ¡ 
u2
*è
func
);

819 
	}
}

822 
	$­³ndV®ue
(
ty³
, cÚ¡ 
JV®ue
 
v®ue
, * 
buf
, 
size_t
 
n
, 
boŞ
 
­³ndComma
)

824 
size_t
 
Ën
 = 
	`¡¾’
(
buf
);

825 ià(
Ën
 >ğ
n
 - 32) {

826 
buf
[
Ën
 - 1] = '.';

827 
buf
[
Ën
 - 2] = '.';

828 
buf
[
Ën
 - 3] = '.';

831 * 
p
 = 
buf
 + 
Ën
;

832 
ty³
) {

834 ià(
v®ue
.
b
 >= 0 && value.b < 10) {

835 
	`¥rštf
(
p
, "%d", 
v®ue
.
b
);

837 
	`¥rštf
(
p
, "%#x (%d)", 
v®ue
.
b
, value.b);

841 ià(
v®ue
.
c
 < 0x7f && value.c >= ' ') {

842 
	`¥rštf
(
p
, "U+%x ('%c')", 
v®ue
.
c
, value.c);

844 
	`¥rštf
(
p
, "U+%x", 
v®ue
.
c
);

848 
	`¥rštf
(
p
, "%g", 
v®ue
.
d
);

851 
	`¥rštf
(
p
, "%g", 
v®ue
.
f
);

854 
	`¥rštf
(
p
, "%d", 
v®ue
.
i
);

857 
	`¥rštf
(
p
, "%#x", 
v®ue
.
i
);

860 
	`¥rštf
(
p
, "%Îd", 
v®ue
.
j
);

863 
	`¥rštf
(
p
, "%d", 
v®ue
.
s
);

866 
	`¡rıy
(
p
, "void");

869 
	`¡rıy
(
p
, 
v®ue
.
z
 ? "true" : "false");

872 
	`¥rštf
(
p
, "unknowÀty³ '%c'", 
ty³
);

876 ià(
­³ndComma
) {

877 
	`¡rÿt
(
p
, ", ");

879 
	}
}

881 
	$logN©iveM‘hodEÁry
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
¬gs
)

883 
thisSŒšg
[32] = { 0 };

884 cÚ¡ 
u4
* 
¥
 = 
¬gs
;

885 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

886 
	`¥rštf
(
thisSŒšg
, "this=0x%08x ", *
¥
++);

889 
¬gsSŒšg
[128]= { 0 };

890 cÚ¡ * 
desc
 = &
m‘hod
->
shÜty
[1];

891 *
desc
 != '\0') {

892 
¬gTy³
 = *
desc
++;

893 
JV®ue
 
v®ue
;

894 ià(
¬gTy³
 == 'D' ||‡rgType == 'J') {

895 
v®ue
.
j
 = 
	`dvmG‘ArgLÚg
(
¥
, 0);

896 
¥
 += 2;

898 
v®ue
.
i
 = *
¥
++;

900 
	`­³ndV®ue
(
¬gTy³
, 
v®ue
, 
¬gsSŒšg
, (argsString),

901 *
desc
 != '\0');

904 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
));

905 * 
sigÇtu»
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

906 
	`ALOGI
("-> % %s% %s(%s)", 
şassName
.
	`c_¡r
(), 
m‘hod
->
Çme
, 
sigÇtu»
, 
thisSŒšg
, 
¬gsSŒšg
);

907 
	`ä“
(
sigÇtu»
);

908 
	}
}

910 
	$logN©iveM‘hodEx™
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
, cÚ¡ 
JV®ue
 
»tuºV®ue
)

912 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
));

913 * 
sigÇtu»
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

914 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

915 
Objeù
* 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

916 
¡d
::
¡ršg
 
	`exû±iÚCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
exû±iÚ
->
şazz
->
desütÜ
));

917 
	`ALOGI
("<- % %s% th»w %s", 
şassName
.
	`c_¡r
(),

918 
m‘hod
->
Çme
, 
sigÇtu»
, 
exû±iÚCÏssName
.
	`c_¡r
());

920 
»tuºV®ueSŒšg
[128] = { 0 };

921 
»tuºTy³
 = 
m‘hod
->
shÜty
[0];

922 
	`­³ndV®ue
(
»tuºTy³
, 
»tuºV®ue
, 
»tuºV®ueSŒšg
, Ô‘uºV®ueSŒšg), 
çl£
);

923 
	`ALOGI
("<- % %s% »tuºed %s", 
şassName
.
	`c_¡r
(),

924 
m‘hod
->
Çme
, 
sigÇtu»
, 
»tuºV®ueSŒšg
);

926 
	`ä“
(
sigÇtu»
);

927 
	}
}

932 cÚ¡ 
M‘hod
* 
	$dvmG‘Cu¼’tJNIM‘hod
() {

933 
	`as£¹
(
	`dvmTh»adS–f
(è!ğ
NULL
);

935 * 
å
 = 
	`dvmTh»adS–f
()->
š‹½Save
.
curF¿me
;

936 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

938 
	`as£¹
(
m‘h
 !ğ
NULL
);

939 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘h
));

940  
m‘h
;

941 
	}
}

953 
	$ŒackMÚ™ÜEÁ”
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
) {

954 cÚ¡ 
kIn™ŸlSize
 = 16;

955 
Reã»nûTabË
* 
»fTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

958 ià(
»fTabË
->
bË
 =ğ
NULL
) {

959 
	`as£¹
(
»fTabË
->
maxEÁr›s
 == 0);

961 ià(!
	`dvmIn™Reã»nûTabË
(
»fTabË
, 
kIn™ŸlSize
, 
INT_MAX
)) {

962 
	`ALOGE
("Unableo initialize monitorrackingable");

963 
	`dvmAbÜt
();

967 ià(!
	`dvmAddToReã»nûTabË
(
»fTabË
, 
obj
)) {

969 
	`ALOGE
("Unableo‡ddƒntryo monitorrackingable");

970 
	`dvmAbÜt
();

972 
	`LOGVV
("---‡dded mÚ™Ü %p", 
obj
);

974 
	}
}

979 
	$ŒackMÚ™ÜEx™
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
) {

980 
Reã»nûTabË
* 
pRefTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

982 ià(!
	`dvmRemoveFromReã»nûTabË
(
pRefTabË
,…RefTabË->
bË
, 
obj
)) {

983 
	`ALOGE
("JNI mÚ™Ü %°nÙ found iÀŒackšg†i¡", 
obj
);

986 
	`LOGVV
("---„emoved mÚ™Ü %p", 
obj
);

988 
	}
}

993 
	$dvmR–—£JniMÚ™Üs
(
Th»ad
* 
£lf
) {

994 
Reã»nûTabË
* 
pRefTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

995 
Objeù
** 
tİ
 = 
pRefTabË
->
bË
;

997 ià(
tİ
 =ğ
NULL
) {

1000 
Objeù
** 
±r
 = 
pRefTabË
->
ÃxtEÁry
;

1001 --
±r
 >ğ
tİ
) {

1002 ià(!
	`dvmUÆockObjeù
(
£lf
, *
±r
)) {

1003 
	`ALOGW
("UÇbËØuÆock mÚ™Ü %°©h»ad d‘ach", *
±r
);

1005 
	`LOGVV
("--- d‘ach-»Ëasšg mÚ™Ü %p", *
±r
);

1010 
pRefTabË
->
ÃxtEÁry
 =…RefTabË->
bË
;

1011 
	}
}

1020 
boŞ
 
	$ÿnAÎocCÏss
(
CÏssObjeù
* 
şazz
) {

1021 ià(
	`dvmIsAb¡¿ùCÏss
(
şazz
è|| 
	`dvmIsIÁ”çûCÏss
(clazz)) {

1023 
	`dvmThrowIn¡ªtŸtiÚExû±iÚ
(
şazz
, "abstract class or interface");

1024  
çl£
;

1025 } ià(
	`dvmIsA¼ayCÏss
(
şazz
è|| 
	`dvmIsTheCÏssCÏss
(clazz)) {

1027 
	`dvmThrowIn¡ªtŸtiÚExû±iÚ
(
şazz
, "wrong JNI function");

1028  
çl£
;

1030  
Œue
;

1031 
	}
}

1081 
šlše
 
	$cÚv”tReã»nûResuÉ
(
JNIEnv
* 
’v
, 
JV®ue
* 
pResuÉ
,

1082 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1084 ià(
m‘hod
->
shÜty
[0] =ğ'L' && !
	`dvmCheckExû±iÚ
(
£lf
è&& 
pResuÉ
->
l
 !ğ
NULL
) {

1085 
pResuÉ
->
l
 = 
	`dvmDecodeIndœeùRef
(
£lf
, (
jobjeù
)…Result->l);

1087 
	}
}

1092 
	$dvmC®lJNIM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
) {

1093 
u4
* 
modArgs
 = (u4*è
¬gs
;

1094 
jşass
 
¡©icM‘hodCÏss
 = 
NULL
;

1096 
u4
 
acûssFÏgs
 = 
m‘hod
->accessFlags;

1097 
boŞ
 
isSynchrÚized
 = (
acûssFÏgs
 & 
ACC_SYNCHRONIZED
) != 0;

1106 
idx
 = 0;

1107 
Objeù
* 
lockObj
;

1108 ià((
acûssFÏgs
 & 
ACC_STATIC
) != 0) {

1109 
lockObj
 = (
Objeù
*è
m‘hod
->
şazz
;

1111 
¡©icM‘hodCÏss
 = (
jşass
è
	`addLoÿlReã»nû
(
£lf
, (
Objeù
*è
m‘hod
->
şazz
);

1113 
lockObj
 = (
Objeù
*è
¬gs
[0];

1115 
modArgs
[
idx
++] = (
u4
è
	`addLoÿlReã»nû
(
£lf
, (
Objeù
*) modArgs[0]);

1118 ià(!
m‘hod
->
noRef
) {

1119 cÚ¡ * 
shÜty
 = &
m‘hod
->shorty[1];

1120 *
shÜty
 != '\0') {

1121 *
shÜty
++) {

1124 ià(
modArgs
[
idx
] != 0) {

1125 
modArgs
[
idx
] = (
u4
è
	`addLoÿlReã»nû
(
£lf
, (
Objeù
*) modArgs[idx]);

1130 
idx
++;

1136 
idx
++;

1140 ià(
	`UNLIKELY
(
m‘hod
->
shouldT¿û
)) {

1141 
	`logN©iveM‘hodEÁry
(
m‘hod
, 
¬gs
);

1143 ià(
	`UNLIKELY
(
isSynchrÚized
)) {

1144 
	`dvmLockObjeù
(
£lf
, 
lockObj
);

1147 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

1149 
	`ANDROID_MEMBAR_FULL
();

1150 
	`as£¹
(
m‘hod
->
š¢s
 !ğ
NULL
);

1152 
JNIEnv
* 
’v
 = 
£lf
->
jniEnv
;

1153 
	`COMPUTE_STACK_SUM
(
£lf
);

1154 
	`dvmPÏtfÜmInvoke
(
’v
,

1155 (
CÏssObjeù
*è
¡©icM‘hodCÏss
,

1156 
m‘hod
->
jniArgInfo
, m‘hod->
šsSize
, 
modArgs
, m‘hod->
shÜty
,

1157 (*è
m‘hod
->
š¢s
, 
pResuÉ
);

1158 
	`CHECK_STACK_SUM
(
£lf
);

1160 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1162 
	`cÚv”tReã»nûResuÉ
(
’v
, 
pResuÉ
, 
m‘hod
, 
£lf
);

1164 ià(
	`UNLIKELY
(
isSynchrÚized
)) {

1165 
	`dvmUÆockObjeù
(
£lf
, 
lockObj
);

1167 ià(
	`UNLIKELY
(
m‘hod
->
shouldT¿û
)) {

1168 
	`logN©iveM‘hodEx™
(
m‘hod
, 
£lf
, *
pResuÉ
);

1170 
	}
}

1181 
jšt
 
	$G‘V”siÚ
(
JNIEnv
* 
’v
) {

1187 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1188  
JNI_VERSION_1_6
;

1189 
	}
}

1196 
jşass
 
	$DefšeCÏss
(
JNIEnv
* 
’v
, cÚ¡ *
Çme
, 
jobjeù
 
lßd”
,

1197 cÚ¡ 
jby‹
* 
buf
, 
jsize
 
bufL’
)

1199 
	`UNUSED_PARAMETER
(
Çme
);

1200 
	`UNUSED_PARAMETER
(
lßd”
);

1201 
	`UNUSED_PARAMETER
(
buf
);

1202 
	`UNUSED_PARAMETER
(
bufL’
);

1204 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1205 
	`ALOGW
("JNI DefineClass is‚ot supported");

1206  
NULL
;

1207 
	}
}

1223 
jşass
 
	$FšdCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
) {

1224 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1226 cÚ¡ 
M‘hod
* 
thisM‘hod
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

1227 
	`as£¹
(
thisM‘hod
 !ğ
NULL
);

1229 
Objeù
* 
lßd”
;

1230 
Objeù
* 
ŒackedLßd”
 = 
NULL
;

1231 ià(
ts
.
	`£lf
()->
şassLßd”Ov”ride
 !ğ
NULL
) {

1233 
	`as£¹
(
	`¡rcmp
(
thisM‘hod
->
Çme
, "nativeLoad") == 0);

1234 
lßd”
 = 
ts
.
	`£lf
()->
şassLßd”Ov”ride
;

1235 } ià(
thisM‘hod
 =ğ
gDvm
.
m‘hD®vikSy¡emN©iveS¹_maš
 ||

1236 
thisM‘hod
 =ğ
gDvm
.
m‘hD®vikSy¡emN©iveS¹_run
) {

1238 ià(!
gDvm
.
š™Ÿlizšg
) {

1239 
lßd”
 = 
ŒackedLßd”
 = 
	`dvmG‘Sy¡emCÏssLßd”
();

1241 
lßd”
 = 
NULL
;

1244 
lßd”
 = 
thisM‘hod
->
şazz
->
şassLßd”
;

1247 * 
desütÜ
 = 
	`dvmNameToDesütÜ
(
Çme
);

1248 ià(
desütÜ
 =ğ
NULL
) {

1249  
NULL
;

1251 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

1252 
	`ä“
(
desütÜ
);

1254 
jşass
 
jşazz
 = (jşassè
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
şazz
);

1255 
	`dvmR–—£T¿ckedAÎoc
(
ŒackedLßd”
, 
ts
.
	`£lf
());

1256  
jşazz
;

1257 
	}
}

1262 
jşass
 
	$G‘Su³rşass
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
) {

1263 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1264 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1265  (
jşass
è
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*)
şazz
->
su³r
);

1266 
	}
}

1273 
jboŞ—n
 
	$IsAssigÇbËFrom
(
JNIEnv
* 
’v
, 
jşass
 
jşazz1
, jşas 
jşazz2
) {

1274 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1275 
CÏssObjeù
* 
şazz1
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz1
);

1276 
CÏssObjeù
* 
şazz2
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz2
);

1277  
	`dvmIn¡ªûof
(
şazz1
, 
şazz2
);

1278 
	}
}

1283 
jm‘hodID
 
	$FromReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jm‘hod
) {

1284 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1285 
Objeù
* 
m‘hod
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jm‘hod
);

1286  (
jm‘hodID
è
	`dvmG‘M‘hodFromReæeùObj
(
m‘hod
);

1287 
	}
}

1292 
jf›ldID
 
	$FromReæeùedF›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jf›ld
) {

1293 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1294 
Objeù
* 
f›ld
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jf›ld
);

1295  (
jf›ldID
è
	`dvmG‘F›ldFromReæeùObj
(
f›ld
);

1296 
	}
}

1305 
jobjeù
 
	$ToReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jşass
 
jşs
, 
jm‘hodID
 
m‘hodID
, 
jboŞ—n
 
isStic
) {

1306 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1307 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşs
);

1308 
Objeù
* 
obj
 = 
	`dvmC»©eReæeùObjFÜM‘hod
(
şazz
, (
M‘hod
*è
m‘hodID
);

1309 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
NULL
);

1310  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
obj
);

1311 
	}
}

1320 
jobjeù
 
	$ToReæeùedF›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşs
, 
jf›ldID
 
f›ldID
, 
jboŞ—n
 
isStic
) {

1321 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1322 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşs
);

1323 
Objeù
* 
obj
 = 
	`dvmC»©eReæeùObjFÜF›ld
(
şazz
, (
F›ld
*è
f›ldID
);

1324 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
NULL
);

1325  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
obj
);

1326 
	}
}

1331 
jšt
 
	$Throw
(
JNIEnv
* 
’v
, 
jthrowabË
 
jobj
) {

1332 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1333 ià(
jobj
 !ğ
NULL
) {

1334 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

1335 
	`dvmS‘Exû±iÚ
(
ts
.
	`£lf
(), 
obj
);

1336  
JNI_OK
;

1338  
JNI_ERR
;

1339 
	}
}

1345 
jšt
 
	$ThrowNew
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
mes§ge
) {

1346 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1347 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1348 
	`dvmThrowExû±iÚ
(
şazz
, 
mes§ge
);

1350  
JNI_OK
;

1351 
	}
}

1361 
jthrowabË
 
	$Exû±iÚOccu¼ed
(
JNIEnv
* 
’v
) {

1362 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1363 
Objeù
* 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
ts
.
	`£lf
());

1364 
jthrowabË
 
loÿlExû±iÚ
 = (jthrowabËè
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
exû±iÚ
);

1365 ià(
loÿlExû±iÚ
 =ğ
NULL
 && 
exû±iÚ
 != NULL) {

1373 
	`ALOGW
("JNI WARNING:‡ddLocal/exception combo");

1375  
loÿlExû±iÚ
;

1376 
	}
}

1381 
	$Exû±iÚDesüibe
(
JNIEnv
* 
’v
) {

1382 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1383 
Objeù
* 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
ts
.
	`£lf
());

1384 ià(
exû±iÚ
 !ğ
NULL
) {

1385 
	`dvmPrštExû±iÚSckT¿û
();

1387 
	`ALOGI
("Odd: ExceptionDescribe called, but‚oƒxception…ending");

1389 
	}
}

1396 
	$Exû±iÚCË¬
(
JNIEnv
* 
’v
) {

1397 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1398 
	`dvmCË¬Exû±iÚ
(
ts
.
	`£lf
());

1399 
	}
}

1404 
	$F©®E¼Ü
(
JNIEnv
* 
’v
, cÚ¡ * 
msg
) {

1406 
	`ALOGE
("JNI…o¡šg f©®ƒ¼Ü: %s", 
msg
);

1407 
	`dvmAbÜt
();

1408 
	}
}

1416 
jšt
 
	$PushLoÿlF¿me
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
) {

1417 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1418 ià(!
	`’su»LoÿlC­ac™y
(
ts
.
	`£lf
(), 
ÿ·c™y
) ||

1419 !
	`dvmPushLoÿlF¿me
(
ts
.
	`£lf
(), 
	`dvmG‘Cu¼’tJNIM‘hod
()))

1422 
	`dvmCË¬Exû±iÚ
(
ts
.
	`£lf
());

1423 
	`dvmThrowOutOfMemÜyE¼Ü
("out of stack in JNI PushLocalFrame");

1424  
JNI_ERR
;

1426  
JNI_OK
;

1427 
	}
}

1433 
jobjeù
 
	$PİLoÿlF¿me
(
JNIEnv
* 
’v
, 
jobjeù
 
j»suÉ
) {

1434 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1435 
Objeù
* 
»suÉ
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j»suÉ
);

1436 ià(!
	`dvmPİLoÿlF¿me
(
ts
.
	`£lf
())) {

1437 
	`ALOGW
("JNI WARNING:oo many PopLocalFrame calls");

1438 
	`dvmCË¬Exû±iÚ
(
ts
.
	`£lf
());

1439 
	`dvmThrowRuÁimeExû±iÚ
("too many PopLocalFrame calls");

1441  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
»suÉ
);

1442 
	}
}

1447 
jobjeù
 
	$NewGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

1448 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1449 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

1450  
	`addGlob®Reã»nû
(
obj
);

1451 
	}
}

1456 
	$D–‘eGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
jglob®Ref
) {

1457 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1458 
	`d–‘eGlob®Reã»nû
(
jglob®Ref
);

1459 
	}
}

1465 
jobjeù
 
	$NewLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

1466 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1467 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

1468  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
obj
);

1469 
	}
}

1474 
	$D–‘eLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jloÿlRef
) {

1475 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1476 
	`d–‘eLoÿlReã»nû
(
ts
.
	`£lf
(), 
jloÿlRef
);

1477 
	}
}

1483 
jšt
 
	$Ensu»LoÿlC­ac™y
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
) {

1484 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1485 
boŞ
 
okay
 = 
	`’su»LoÿlC­ac™y
(
ts
.
	`£lf
(), 
ÿ·c™y
);

1486 ià(!
okay
) {

1487 
	`dvmThrowOutOfMemÜyE¼Ü
("can'tƒnsure†ocal„eference capacity");

1489  
okay
 ? 0 : -1;

1490 
	}
}

1496 
jboŞ—n
 
	$IsSameObjeù
(
JNIEnv
* 
’v
, 
jobjeù
 
j»f1
, jobjeù 
j»f2
) {

1497 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1498 
Objeù
* 
obj1
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j»f1
);

1499 
Objeù
* 
obj2
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j»f2
);

1500  (
obj1
 =ğ
obj2
);

1501 
	}
}

1506 
jobjeù
 
	$AÎocObjeù
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
) {

1507 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1509 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1510 ià(!
	`ÿnAÎocCÏss
(
şazz
) ||

1511 (!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)))

1513 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1514  
NULL
;

1517 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1518  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
ÃwObj
);

1519 
	}
}

1524 
jobjeù
 
	$NewObjeù
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, ...) {

1525 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1526 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1528 ià(!
	`ÿnAÎocCÏss
(
şazz
è|| (!
	`dvmIsCÏssIn™Ÿlized
(şazzè&& !
	`dvmIn™CÏss
(clazz))) {

1529 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1530  
NULL
;

1533 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1534 
jobjeù
 
»suÉ
 = 
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
ÃwObj
);

1535 ià(
ÃwObj
 !ğ
NULL
) {

1536 
JV®ue
 
unu£d
;

1537 
va_li¡
 
¬gs
;

1538 
	`va_¡¬t
(
¬gs
, 
m‘hodID
);

1539 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
, 
¬gs
);

1540 
	`va_’d
(
¬gs
);

1542  
»suÉ
;

1543 
	}
}

1545 
jobjeù
 
	$NewObjeùV
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) {

1546 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1547 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1549 ià(!
	`ÿnAÎocCÏss
(
şazz
è|| (!
	`dvmIsCÏssIn™Ÿlized
(şazzè&& !
	`dvmIn™CÏss
(clazz))) {

1550 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1551  
NULL
;

1554 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1555 
jobjeù
 
»suÉ
 = 
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
ÃwObj
);

1556 ià(
ÃwObj
 !ğ
NULL
) {

1557 
JV®ue
 
unu£d
;

1558 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
, 
¬gs
);

1560  
»suÉ
;

1561 
	}
}

1563 
jobjeù
 
	$NewObjeùA
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) {

1564 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1565 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1567 ià(!
	`ÿnAÎocCÏss
(
şazz
è|| (!
	`dvmIsCÏssIn™Ÿlized
(şazzè&& !
	`dvmIn™CÏss
(clazz))) {

1568 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1569  
NULL
;

1572 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1573 
jobjeù
 
»suÉ
 = 
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
ÃwObj
);

1574 ià(
ÃwObj
 !ğ
NULL
) {

1575 
JV®ue
 
unu£d
;

1576 
	`dvmC®lM‘hodA
(
ts
.
	`£lf
(), (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
, 
¬gs
);

1578  
»suÉ
;

1579 
	}
}

1586 
jşass
 
	$G‘ObjeùCÏss
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

1587 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1589 
	`as£¹
(
jobj
 !ğ
NULL
);

1591 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

1592  (
jşass
è
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
obj
->
şazz
);

1593 
	}
}

1598 
jboŞ—n
 
	$IsIn¡ªûOf
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, 
jşass
 
jşazz
) {

1599 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1601 
	`as£¹
(
jşazz
 !ğ
NULL
);

1602 ià(
jobj
 =ğ
NULL
) {

1603  
Œue
;

1606 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

1607 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1608  
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz);

1609 
	}
}

1625 
jm‘hodID
 
	$G‘M‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1626 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1628 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1629 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

1630 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1631 } ià(
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

1632 
M‘hod
* 
m‘h
 = 
	`dvmFšdIÁ”çûM‘hodH›rByDesütÜ
(
şazz
, 
Çme
, 
sig
);

1633 ià(
m‘h
 =ğ
NULL
) {

1634 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNoSuchM‘hodE¼Ü
,

1636 
Çme
, 
sig
, 
şazz
->
desütÜ
);

1638  (
jm‘hodID
è
m‘h
;

1640 
M‘hod
* 
m‘h
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
şazz
, 
Çme
, 
sig
);

1641 ià(
m‘h
 =ğ
NULL
) {

1643 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
Çme
, 
sig
);

1645 ià(
m‘h
 !ğ
NULL
 && 
	`dvmIsSticM‘hod
(meth)) {

1646 
	`IF_ALOGD
() {

1647 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

1648 
	`ALOGD
("GetMethodID:‚ot„eturning static method %s.%s %s",

1649 
şazz
->
desütÜ
, 
m‘h
->
Çme
, 
desc
);

1650 
	`ä“
(
desc
);

1652 
m‘h
 = 
NULL
;

1654 ià(
m‘h
 =ğ
NULL
) {

1655 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNoSuchM‘hodE¼Ü
,

1657 
Çme
, 
sig
, 
şazz
->
desütÜ
);

1664 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
m‘h
->
şazz
è|| 
	`dvmIsCÏssIn™Ÿlizšg
(meth->clazz));

1666  (
jm‘hodID
è
m‘h
;

1667 
	}
}

1672 
jf›ldID
 
	$G‘F›ldID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1673 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1675 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1677 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

1678 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1679  
NULL
;

1682 
jf›ldID
 
id
 = (jf›ldIDè
	`dvmFšdIn¡ªûF›ldH›r
(
şazz
, 
Çme
, 
sig
);

1683 ià(
id
 =ğ
NULL
) {

1684 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNoSuchF›ldE¼Ü
,

1686 
Çme
, 
sig
, 
şazz
->
desütÜ
);

1688  
id
;

1689 
	}
}

1694 
jm‘hodID
 
	$G‘SticM‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1695 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1697 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1698 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

1699 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1700  
NULL
;

1703 
M‘hod
* 
m‘h
 = 
	`dvmFšdDœeùM‘hodH›rByDesütÜ
(
şazz
, 
Çme
, 
sig
);

1706 ià(
m‘h
 !ğ
NULL
 && !
	`dvmIsSticM‘hod
(meth)) {

1707 
	`IF_ALOGD
() {

1708 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

1709 
	`ALOGD
("GetStaticMethodID:‚ot„eturning‚onstatic method %s.%s %s",

1710 
şazz
->
desütÜ
, 
m‘h
->
Çme
, 
desc
);

1711 
	`ä“
(
desc
);

1713 
m‘h
 = 
NULL
;

1716 
jm‘hodID
 
id
 = (jm‘hodIDè
m‘h
;

1717 ià(
id
 =ğ
NULL
) {

1718 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNoSuchM‘hodE¼Ü
,

1720 
Çme
, 
sig
, 
şazz
->
desütÜ
);

1722  
id
;

1723 
	}
}

1728 
jf›ldID
 
	$G‘SticF›ldID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
Çme
, cÚ¡ * 
sig
) {

1729 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

1731 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

1732 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

1733 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

1734  
NULL
;

1737 
jf›ldID
 
id
 = (jf›ldIDè
	`dvmFšdSticF›ldH›r
(
şazz
, 
Çme
, 
sig
);

1738 ià(
id
 =ğ
NULL
) {

1739 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exNoSuchF›ldE¼Ü
,

1741 
Çme
, 
sig
, 
şazz
->
desütÜ
);

1743  
id
;

1744 
	}
}

1751 
	#GET_STATIC_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

1752 
_ùy³
 
G‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

1753 
jf›ldID
 
f›ldID
) \

1755 
	`UNUSED_PARAMETER
(
jşazz
); \

1756 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1757 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ldID
; \

1758 
_ùy³
 
v®ue
; \

1759 ià(
	`dvmIsVŞ©eF›ld
(
sf›ld
)) { \

1760 ià(
_i¤ef
) { \

1761 
Objeù
* 
obj
 = 
	`dvmG‘SticF›ldObjeùVŞ©e
(
sf›ld
); \

1762 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
obj
); \

1764 
v®ue
 = (
_ùy³
è
dvmG‘SticF›ld
##
_jÇme
##
	`VŞ©e
(
sf›ld
);\

1767 ià(
_i¤ef
) { \

1768 
Objeù
* 
obj
 = 
	`dvmG‘SticF›ldObjeù
(
sf›ld
); \

1769 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
obj
); \

1771 
v®ue
 = (
_ùy³
è
dvmG‘SticF›ld
##
	`_jÇme
(
sf›ld
); \

1774  
v®ue
; \

1775 }

	)

1776 
GET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

1777 
GET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

1778 
GET_STATIC_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

1779 
GET_STATIC_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

1780 
GET_STATIC_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

1781 
GET_STATIC_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

1782 
GET_STATIC_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

1783 
GET_STATIC_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

1784 
GET_STATIC_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

1789 
	#SET_STATIC_TYPE_FIELD
(
_ùy³
, 
_ùy³2
, 
_jÇme
, 
_i¤ef
) \

1790 
S‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

1791 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

1793 
	`UNUSED_PARAMETER
(
jşazz
); \

1794 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1795 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ldID
; \

1796 ià(
	`dvmIsVŞ©eF›ld
(
sf›ld
)) { \

1797 ià(
_i¤ef
) { \

1798 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), (
jobjeù
)(
u4
)
v®ue
); \

1799 
	`dvmS‘SticF›ldObjeùVŞ©e
(
sf›ld
, 
v®Obj
); \

1801 
dvmS‘SticF›ld
##
_jÇme
##
	`VŞ©e
(
sf›ld
, (
_ùy³2
)
v®ue
);\

1804 ià(
_i¤ef
) { \

1805 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), (
jobjeù
)(
u4
)
v®ue
); \

1806 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, 
v®Obj
); \

1808 
dvmS‘SticF›ld
##
	`_jÇme
(
sf›ld
, (
_ùy³2
)
v®ue
); \

1811 }

	)

1812 
SET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
*, Objeù, 
Œue
);

1813 
SET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
boŞ
, 
BoŞ—n
, 
çl£
);

1814 
SET_STATIC_TYPE_FIELD
(
jby‹
, 
s1
, 
By‹
, 
çl£
);

1815 
SET_STATIC_TYPE_FIELD
(
jch¬
, 
u2
, 
Ch¬
, 
çl£
);

1816 
SET_STATIC_TYPE_FIELD
(
jshÜt
, 
s2
, 
ShÜt
, 
çl£
);

1817 
SET_STATIC_TYPE_FIELD
(
jšt
, 
s4
, 
IÁ
, 
çl£
);

1818 
SET_STATIC_TYPE_FIELD
(
jlÚg
, 
s8
, 
LÚg
, 
çl£
);

1819 
SET_STATIC_TYPE_FIELD
(
jæßt
, , 
Flßt
, 
çl£
);

1820 
SET_STATIC_TYPE_FIELD
(
jdoubË
, , 
DoubË
, 
çl£
);

1827 
	#GET_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

1828 
_ùy³
 
G‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1829 
jf›ldID
 
f›ldID
) \

1831 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1832 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1833 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
f›ldID
; \

1834 
_ùy³
 
v®ue
; \

1835 ià(
	`dvmIsVŞ©eF›ld
(
f›ld
)) { \

1836 ià(
_i¤ef
) { \

1837 
Objeù
* 
v®Obj
 = \

1838 
	`dvmG‘F›ldObjeùVŞ©e
(
obj
, 
f›ld
->
by‹Off£t
); \

1839 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
v®Obj
); \

1841 
v®ue
 = (
_ùy³
) \

1842 
dvmG‘F›ld
##
_jÇme
##
	`VŞ©e
(
obj
, 
f›ld
->
by‹Off£t
); \

1845 ià(
_i¤ef
) { \

1846 
Objeù
* 
v®Obj
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
); \

1847 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
v®Obj
); \

1849 
v®ue
 = (
_ùy³
è
dvmG‘F›ld
##
	`_jÇme
(
obj
, 
f›ld
->
by‹Off£t
);\

1852  
v®ue
; \

1853 }

	)

1854 
GET_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

1855 
GET_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

1856 
GET_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

1857 
GET_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

1858 
GET_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

1859 
GET_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

1860 
GET_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

1861 
GET_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

1862 
GET_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

1867 
	#SET_TYPE_FIELD
(
_ùy³
, 
_ùy³2
, 
_jÇme
, 
_i¤ef
) \

1868 
S‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1869 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

1871 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1872 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1873 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
f›ldID
; \

1874 ià(
	`dvmIsVŞ©eF›ld
(
f›ld
)) { \

1875 ià(
_i¤ef
) { \

1876 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), (
jobjeù
)(
u4
)
v®ue
); \

1877 
	`dvmS‘F›ldObjeùVŞ©e
(
obj
, 
f›ld
->
by‹Off£t
, 
v®Obj
); \

1879 
dvmS‘F›ld
##
_jÇme
##
	`VŞ©e
(
obj
, \

1880 
f›ld
->
by‹Off£t
, (
_ùy³2
)
v®ue
); \

1883 ià(
_i¤ef
) { \

1884 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), (
jobjeù
)(
u4
)
v®ue
); \

1885 
	`dvmS‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
, 
v®Obj
); \

1887 
dvmS‘F›ld
##
	`_jÇme
(
obj
, \

1888 
f›ld
->
by‹Off£t
, (
_ùy³2
)
v®ue
); \

1891 }

	)

1892 
SET_TYPE_FIELD
(
jobjeù
, 
Objeù
*, Objeù, 
Œue
);

1893 
SET_TYPE_FIELD
(
jboŞ—n
, 
boŞ
, 
BoŞ—n
, 
çl£
);

1894 
SET_TYPE_FIELD
(
jby‹
, 
s1
, 
By‹
, 
çl£
);

1895 
SET_TYPE_FIELD
(
jch¬
, 
u2
, 
Ch¬
, 
çl£
);

1896 
SET_TYPE_FIELD
(
jshÜt
, 
s2
, 
ShÜt
, 
çl£
);

1897 
SET_TYPE_FIELD
(
jšt
, 
s4
, 
IÁ
, 
çl£
);

1898 
SET_TYPE_FIELD
(
jlÚg
, 
s8
, 
LÚg
, 
çl£
);

1899 
SET_TYPE_FIELD
(
jæßt
, , 
Flßt
, 
çl£
);

1900 
SET_TYPE_FIELD
(
jdoubË
, , 
DoubË
, 
çl£
);

1908 
	#CALL_VIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

1909 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1910 
jm‘hodID
 
m‘hodID
, ...) \

1912 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1913 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1914 cÚ¡ 
M‘hod
* 
m‘h
; \

1915 
va_li¡
 
¬gs
; \

1916 
JV®ue
 
»suÉ
; \

1917 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

1918 ià(
m‘h
 =ğ
NULL
) { \

1919  
_»tç
; \

1921 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1922 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

1923 
	`va_’d
(
¬gs
); \

1924 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

1925 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

1926  
_»tok
; \

1928 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1929 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1931 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1932 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1933 cÚ¡ 
M‘hod
* 
m‘h
; \

1934 
JV®ue
 
»suÉ
; \

1935 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

1936 ià(
m‘h
 =ğ
NULL
) { \

1937  
_»tç
; \

1939 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

1940 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

1941 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

1942  
_»tok
; \

1944 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1945 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1947 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1948 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1949 cÚ¡ 
M‘hod
* 
m‘h
; \

1950 
JV®ue
 
»suÉ
; \

1951 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

1952 ià(
m‘h
 =ğ
NULL
) { \

1953  
_»tç
; \

1955 
	`dvmC®lM‘hodA
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

1956 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

1957 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

1958  
_»tok
; \

1959 }

	)

1960 
CALL_VIRTUAL
(
jobjeù
, 
Objeù
, 
NULL
, (jobjeùè
»suÉ
.
l
, 
Œue
);

1961 
CALL_VIRTUAL
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

1962 
CALL_VIRTUAL
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

1963 
CALL_VIRTUAL
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

1964 
CALL_VIRTUAL
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

1965 
CALL_VIRTUAL
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

1966 
CALL_VIRTUAL
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

1967 
CALL_VIRTUAL
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

1968 
CALL_VIRTUAL
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

1969 
CALL_VIRTUAL
(, 
Void
, , , 
çl£
);

1978 
	#CALL_NONVIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

1979 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

1980 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, ...) \

1982 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

1983 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

1984 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
); \

1985 cÚ¡ 
M‘hod
* 
m‘h
; \

1986 
va_li¡
 
¬gs
; \

1987 
JV®ue
 
»suÉ
; \

1988 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

1989 ià(
m‘h
 =ğ
NULL
) { \

1990  
_»tç
; \

1992 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1993 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

1994 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

1995 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

1996 
	`va_’d
(
¬gs
); \

1997  
_»tok
; \

1999 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
,\

2000 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

2002 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2003 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

2004 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
); \

2005 cÚ¡ 
M‘hod
* 
m‘h
; \

2006 
JV®ue
 
»suÉ
; \

2007 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

2008 ià(
m‘h
 =ğ
NULL
) { \

2009  
_»tç
; \

2011 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2012 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

2013 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

2014  
_»tok
; \

2016 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
,\

2017 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

2019 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2020 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
); \

2021 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
); \

2022 cÚ¡ 
M‘hod
* 
m‘h
; \

2023 
JV®ue
 
»suÉ
; \

2024 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

2025 ià(
m‘h
 =ğ
NULL
) { \

2026  
_»tç
; \

2028 
	`dvmC®lM‘hodA
(
ts
.
	`£lf
(), 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2029 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

2030 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

2031  
_»tok
; \

2032 }

	)

2033 
CALL_NONVIRTUAL
(
jobjeù
, 
Objeù
, 
NULL
, (jobjeùè
»suÉ
.
l
, 
Œue
);

2034 
CALL_NONVIRTUAL
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

2035 
CALL_NONVIRTUAL
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

2036 
CALL_NONVIRTUAL
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

2037 
CALL_NONVIRTUAL
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

2038 
CALL_NONVIRTUAL
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

2039 
CALL_NONVIRTUAL
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

2040 
CALL_NONVIRTUAL
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

2041 
CALL_NONVIRTUAL
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

2042 
CALL_NONVIRTUAL
(, 
Void
, , , 
çl£
);

2048 
	#CALL_STATIC
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

2049 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2050 
jm‘hodID
 
m‘hodID
, ...) \

2052 
	`UNUSED_PARAMETER
(
jşazz
); \

2053 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2054 
JV®ue
 
»suÉ
; \

2055 
va_li¡
 
¬gs
; \

2056 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

2057 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2058 
	`va_’d
(
¬gs
); \

2059 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

2060 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

2061  
_»tok
; \

2063 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2064 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

2066 
	`UNUSED_PARAMETER
(
jşazz
); \

2067 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2068 
JV®ue
 
»suÉ
; \

2069 
	`dvmC®lM‘hodV
(
ts
.
	`£lf
(), (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2070 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

2071 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

2072  
_»tok
; \

2074 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2075 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

2077 
	`UNUSED_PARAMETER
(
jşazz
); \

2078 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2079 
JV®ue
 
»suÉ
; \

2080 
	`dvmC®lM‘hodA
(
ts
.
	`£lf
(), (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2081 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
())) \

2082 
»suÉ
.
l
 = (
Objeù
*)
	`addLoÿlReã»nû
(
ts
.
	`£lf
(),„esult.l); \

2083  
_»tok
; \

2084 }

	)

2085 
CALL_STATIC
(
jobjeù
, 
Objeù
, 
NULL
, (jobjeùè
»suÉ
.
l
, 
Œue
);

2086 
CALL_STATIC
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

2087 
CALL_STATIC
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

2088 
CALL_STATIC
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

2089 
CALL_STATIC
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

2090 
CALL_STATIC
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

2091 
CALL_STATIC
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

2092 
CALL_STATIC
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

2093 
CALL_STATIC
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

2094 
CALL_STATIC
(, 
Void
, , , 
çl£
);

2102 
j¡ršg
 
	$NewSŒšg
(
JNIEnv
* 
’v
, cÚ¡ 
jch¬
* 
unicodeCh¬s
, 
jsize
 
Ën
) {

2103 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2104 
SŒšgObjeù
* 
j¡r
 = 
	`dvmC»©eSŒšgFromUnicode
(
unicodeCh¬s
, 
Ën
);

2105 ià(
j¡r
 =ğ
NULL
) {

2106  
NULL
;

2108 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
j¡r
, 
NULL
);

2109  (
j¡ršg
è
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
j¡r
);

2110 
	}
}

2115 
jsize
 
	$G‘SŒšgL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
) {

2116 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2117 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2118  
¡rObj
->
	`Ëngth
();

2119 
	}
}

2128 cÚ¡ 
jch¬
* 
	$G‘SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jboŞ—n
* 
isCİy
) {

2129 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2131 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2132 
A¼ayObjeù
* 
¡rCh¬s
 = 
¡rObj
->
	`¬¿y
();

2134 
	`pšPrim™iveA¼ay
(
¡rCh¬s
);

2136 cÚ¡ 
u2
* 
d©a
 = 
¡rObj
->
	`ch¬s
();

2137 ià(
isCİy
 !ğ
NULL
) {

2138 *
isCİy
 = 
JNI_FALSE
;

2140  (
jch¬
*è
d©a
;

2141 
	}
}

2146 
	$R–—£SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ 
jch¬
* 
ch¬s
) {

2147 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2148 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2149 
A¼ayObjeù
* 
¡rCh¬s
 = 
¡rObj
->
	`¬¿y
();

2150 
	`uÅšPrim™iveA¼ay
(
¡rCh¬s
);

2151 
	}
}

2159 
j¡ršg
 
	$NewSŒšgUTF
(
JNIEnv
* 
’v
, cÚ¡ * 
by‹s
) {

2160 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2161 ià(
by‹s
 =ğ
NULL
) {

2162  
NULL
;

2165 
SŒšgObjeù
* 
ÃwSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
by‹s
);

2166 
j¡ršg
 
»suÉ
 = (j¡ršgè
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
ÃwSŒ
);

2167 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwSŒ
, 
NULL
);

2168  
»suÉ
;

2169 
	}
}

2174 
jsize
 
	$G‘SŒšgUTFL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
) {

2175 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2176 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2177 ià(
¡rObj
 =ğ
NULL
) {

2180  
¡rObj
->
	`utfL’gth
();

2181 
	}
}

2197 cÚ¡ * 
	$G‘SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jboŞ—n
* 
isCİy
) {

2198 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2199 ià(
j¡r
 =ğ
NULL
) {

2201  
NULL
;

2203 ià(
isCİy
 !ğ
NULL
) {

2204 *
isCİy
 = 
JNI_TRUE
;

2206 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2207 * 
ÃwSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

2208 ià(
ÃwSŒ
 =ğ
NULL
) {

2210 
	`dvmThrowOutOfMemÜyE¼Ü
("native heap string‡lloc failed");

2212  
ÃwSŒ
;

2213 
	}
}

2218 
	$R–—£SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ * 
utf
) {

2219 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2220 
	`ä“
((*è
utf
);

2221 
	}
}

2226 
jsize
 
	$G‘A¼ayL’gth
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
) {

2227 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2228 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
);

2229  
¬rObj
->
Ëngth
;

2230 
	}
}

2235 
jobjeùA¼ay
 
	$NewObjeùA¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
,

2236 
jşass
 
j–em’tCÏss
, 
jobjeù
 
jš™ŸlEËm’t
)

2238 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2240 ià(
j–em’tCÏss
 =ğ
NULL
) {

2241 
	`dvmThrowNuÎPoš‹rExû±iÚ
("JNI NewObjectArrayƒlementClass == NULL");

2242  
NULL
;

2245 
CÏssObjeù
* 
–emCÏssObj
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j–em’tCÏss
);

2246 
CÏssObjeù
* 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
–emCÏssObj
);

2247 
A¼ayObjeù
* 
ÃwObj
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DEFAULT
);

2248 ià(
ÃwObj
 =ğ
NULL
) {

2249 
	`as£¹
(
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
()));

2250  
NULL
;

2252 
jobjeùA¼ay
 
ÃwA¼ay
 = (jobjeùA¼ayè
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
ÃwObj
);

2253 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwObj
, 
NULL
);

2258 ià(
jš™ŸlEËm’t
 !ğ
NULL
) {

2259 
Objeù
* 
š™ŸlEËm’t
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jš™ŸlEËm’t
);

2260 
Objeù
** 
¬¿yD©a
 = (Objeù**è(*è
ÃwObj
->
cÚ‹Ás
;

2261 
jsize
 
i
 = 0; i < 
Ëngth
; ++i) {

2262 
¬¿yD©a
[
i
] = 
š™ŸlEËm’t
;

2266  
ÃwA¼ay
;

2267 
	}
}

2269 
boŞ
 
	$checkA¼ayEËm’tBounds
(
A¼ayObjeù
* 
¬¿yObj
, 
jsize
 
šdex
) {

2270 
	`as£¹
(
¬¿yObj
 !ğ
NULL
);

2271 ià(
šdex
 < 0 || index >ğ(è
¬¿yObj
->
Ëngth
) {

2272 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(
¬¿yObj
->
Ëngth
, 
šdex
);

2273  
çl£
;

2275  
Œue
;

2276 
	}
}

2283 
jobjeù
 
	$G‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
j¬r
, 
jsize
 
šdex
) {

2284 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2286 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
);

2287 ià(!
	`checkA¼ayEËm’tBounds
(
¬¿yObj
, 
šdex
)) {

2288  
NULL
;

2291 
Objeù
* 
v®ue
 = ((Objeù**è(*è
¬¿yObj
->
cÚ‹Ás
)[
šdex
];

2292  
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
v®ue
);

2293 
	}
}

2298 
	$S‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
j¬r
, 
jsize
 
šdex
, 
jobjeù
 
jobj
) {

2299 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2301 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
);

2302 ià(!
	`checkA¼ayEËm’tBounds
(
¬¿yObj
, 
šdex
)) {

2306 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

2308 ià(
obj
 !ğ
NULL
 && !
	`dvmCªPutA¼ayEËm’t
(obj->
şazz
, 
¬¿yObj
->clazz)) {

2309 
	`ALOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)",

2310 
obj
->
şazz
->
desütÜ
, obj,

2311 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2312 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz);

2318 
	`dvmS‘ObjeùA¼ayEËm’t
(
¬¿yObj
, 
šdex
, 
obj
);

2319 
	}
}

2324 
	#NEW_PRIMITIVE_ARRAY
(
_¬ty³
, 
_jÇme
, 
_ty³ch¬
) \

2325 
_¬ty³
 
New
##
_jÇme
##
	`A¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
) { \

2326 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2327 
A¼ayObjeù
* 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
(
_ty³ch¬
, 
Ëngth
, 
ALLOC_DEFAULT
); \

2328 ià(
¬¿yObj
 =ğ
NULL
) { \

2329  
NULL
; \

2331 
_¬ty³
 
»suÉ
 = (_¬ty³è
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), (
Objeù
*è
¬¿yObj
); \

2332 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬¿yObj
, 
NULL
); \

2333  
»suÉ
; \

2334 }

	)

2335 
NEW_PRIMITIVE_ARRAY
(
jboŞ—nA¼ay
, 
BoŞ—n
, 'Z');

2336 
NEW_PRIMITIVE_ARRAY
(
jby‹A¼ay
, 
By‹
, 'B');

2337 
NEW_PRIMITIVE_ARRAY
(
jch¬A¼ay
, 
Ch¬
, 'C');

2338 
NEW_PRIMITIVE_ARRAY
(
jshÜtA¼ay
, 
ShÜt
, 'S');

2339 
NEW_PRIMITIVE_ARRAY
(
jštA¼ay
, 
IÁ
, 'I');

2340 
NEW_PRIMITIVE_ARRAY
(
jlÚgA¼ay
, 
LÚg
, 'J');

2341 
NEW_PRIMITIVE_ARRAY
(
jæßtA¼ay
, 
Flßt
, 'F');

2342 
NEW_PRIMITIVE_ARRAY
(
jdoubËA¼ay
, 
DoubË
, 'D');

2353 
	#GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

2354 
_ùy³
* 
G‘
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

2355 
_ùy³
##
A¼ay
 
j¬r
, 
jboŞ—n
* 
isCİy
) \

2357 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2358 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
); \

2359 
	`pšPrim™iveA¼ay
(
¬¿yObj
); \

2360 
_ùy³
* 
d©a
 = (_ùy³*è(*è
¬¿yObj
->
cÚ‹Ás
; \

2361 ià(
isCİy
 !ğ
NULL
) { \

2362 *
isCİy
 = 
JNI_FALSE
; \

2364  
d©a
; \

2365 }

	)

2374 
	#RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

2375 
R–—£
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

2376 
_ùy³
##
A¼ay
 
j¬r
, _ùy³* 
–ems
, 
jšt
 
mode
) \

2378 
	`UNUSED_PARAMETER
(
–ems
); \

2379 ià(
mode
 !ğ
JNI_COMMIT
) { \

2380 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2381 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
); \

2382 
	`uÅšPrim™iveA¼ay
(
¬¿yObj
); \

2384 }

	)

2386 
	$throwA¼ayRegiÚOutOfBounds
(
A¼ayObjeù
* 
¬¿yObj
, 
jsize
 
¡¬t
,

2387 
jsize
 
Ën
, cÚ¡ * 
¬¿yId’tif›r
)

2389 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exA¼ayIndexOutOfBoundsExû±iÚ
,

2391 
¬¿yObj
->
şazz
->
desütÜ
, 
¡¬t
, 
Ën
, 
¬¿yId’tif›r
,

2392 
¬¿yObj
->
Ëngth
);

2393 
	}
}

2398 
	#GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

2399 
G‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

2400 
_ùy³
##
A¼ay
 
j¬r
, 
jsize
 
¡¬t
, jsiz
Ën
, _ùy³* 
buf
) \

2402 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2403 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
); \

2404 
_ùy³
* 
d©a
 = (_ùy³*è(*è
¬¿yObj
->
cÚ‹Ás
; \

2405 ià(
¡¬t
 < 0 || 
Ën
 < 0 || s¹ +†’ > (è
¬¿yObj
->
Ëngth
) { \

2406 
	`throwA¼ayRegiÚOutOfBounds
(
¬¿yObj
, 
¡¬t
, 
Ën
, "src"); \

2408 
	`memıy
(
buf
, 
d©a
 + 
¡¬t
, 
Ën
 * (
_ùy³
)); \

2410 }

	)

2415 
	#SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

2416 
S‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

2417 
_ùy³
##
A¼ay
 
j¬r
, 
jsize
 
¡¬t
, jsiz
Ën
, cÚ¡ _ùy³* 
buf
) \

2419 
ScİedJniTh»adS‹
 
	`ts
(
’v
); \

2420 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
); \

2421 
_ùy³
* 
d©a
 = (_ùy³*è(*è
¬¿yObj
->
cÚ‹Ás
; \

2422 ià(
¡¬t
 < 0 || 
Ën
 < 0 || s¹ +†’ > (è
¬¿yObj
->
Ëngth
) { \

2423 
	`throwA¼ayRegiÚOutOfBounds
(
¬¿yObj
, 
¡¬t
, 
Ën
, "dst"); \

2425 
	`memıy
(
d©a
 + 
¡¬t
, 
buf
, 
Ën
 * (
_ùy³
)); \

2427 }

	)

2436 
	#PRIMITIVE_ARRAY_FUNCTIONS
(
_ùy³
, 
_jÇme
) \

2437 
	`GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

2438 
	`RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

2439 
	`GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
); \

2440 
	`SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
);

	)

2442 
PRIMITIVE_ARRAY_FUNCTIONS
(
jboŞ—n
, 
BoŞ—n
);

2443 
PRIMITIVE_ARRAY_FUNCTIONS
(
jby‹
, 
By‹
);

2444 
PRIMITIVE_ARRAY_FUNCTIONS
(
jch¬
, 
Ch¬
);

2445 
PRIMITIVE_ARRAY_FUNCTIONS
(
jshÜt
, 
ShÜt
);

2446 
PRIMITIVE_ARRAY_FUNCTIONS
(
jšt
, 
IÁ
);

2447 
PRIMITIVE_ARRAY_FUNCTIONS
(
jlÚg
, 
LÚg
);

2448 
PRIMITIVE_ARRAY_FUNCTIONS
(
jæßt
, 
Flßt
);

2449 
PRIMITIVE_ARRAY_FUNCTIONS
(
jdoubË
, 
DoubË
);

2457 
jšt
 
	$Regi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
,

2458 cÚ¡ 
JNIN©iveM‘hod
* 
m‘hods
, 
jšt
 
nM‘hods
)

2460 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2462 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

2464 ià(
gDvm
.
v”bo£Jni
) {

2465 
	`ALOGI
("[Registering JNI‚ative methods for class %s]",

2466 
şazz
->
desütÜ
);

2469 
i
 = 0; i < 
nM‘hods
; i++) {

2470 ià(!
	`dvmRegi¡”JNIM‘hod
(
şazz
, 
m‘hods
[
i
].
Çme
,

2471 
m‘hods
[
i
].
sigÇtu»
, m‘hods[i].
âPŒ
))

2473  
JNI_ERR
;

2476  
JNI_OK
;

2477 
	}
}

2505 
jšt
 
	$UÄegi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
) {

2506 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2508 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jşazz
);

2509 ià(
gDvm
.
v”bo£Jni
) {

2510 
	`ALOGI
("[Unregistering JNI‚ative methods for class %s]",

2511 
şazz
->
desütÜ
);

2513 
	`dvmUÄegi¡”JNIN©iveM‘hods
(
şazz
);

2514  
JNI_OK
;

2515 
	}
}

2523 
jšt
 
	$MÚ™ÜEÁ”
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

2524 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2525 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

2526 
	`dvmLockObjeù
(
ts
.
	`£lf
(), 
obj
);

2527 
	`ŒackMÚ™ÜEÁ”
(
ts
.
	`£lf
(), 
obj
);

2528  
JNI_OK
;

2529 
	}
}

2540 
jšt
 
	$MÚ™ÜEx™
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

2541 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2542 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

2543 
boŞ
 
sucûss
 = 
	`dvmUÆockObjeù
(
ts
.
	`£lf
(), 
obj
);

2544 ià(
sucûss
) {

2545 
	`ŒackMÚ™ÜEx™
(
ts
.
	`£lf
(), 
obj
);

2547  
sucûss
 ? 
JNI_OK
 : 
JNI_ERR
;

2548 
	}
}

2553 
jšt
 
	$G‘JavaVM
(
JNIEnv
* 
’v
, 
JavaVM
** 
vm
) {

2554 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2555 *
vm
 = 
gDvmJni
.
jniVm
;

2556  (*
vm
 =ğ
NULL
è? 
JNI_ERR
 : 
JNI_OK
;

2557 
	}
}

2562 
	$G‘SŒšgRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jsize
 
¡¬t
, jsiz
Ën
, 
jch¬
* 
buf
) {

2563 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2564 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2565 
¡rL’
 = 
¡rObj
->
	`Ëngth
();

2566 ià(((
¡¬t
|
Ën
è< 0è|| (¡¬ˆ+†’ > 
¡rL’
)) {

2567 
	`dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hRegiÚ
(
¡rL’
, 
¡¬t
, 
Ën
);

2570 
	`memıy
(
buf
, 
¡rObj
->
	`ch¬s
(è+ 
¡¬t
, 
Ën
 * (
u2
));

2571 
	}
}

2577 
	$G‘SŒšgUTFRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jsize
 
¡¬t
, jsiz
Ën
, * 
buf
) {

2578 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2579 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2580 
¡rL’
 = 
¡rObj
->
	`Ëngth
();

2581 ià(((
¡¬t
|
Ën
è< 0è|| (¡¬ˆ+†’ > 
¡rL’
)) {

2582 
	`dvmThrowSŒšgIndexOutOfBoundsExû±iÚW™hRegiÚ
(
¡rL’
, 
¡¬t
, 
Ën
);

2585 
	`dvmG‘SŒšgUtfRegiÚ
(
¡rObj
, 
¡¬t
, 
Ën
, 
buf
);

2586 
	}
}

2596 * 
	$G‘Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
, 
jboŞ—n
* 
isCİy
) {

2597 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2598 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
);

2599 
	`pšPrim™iveA¼ay
(
¬¿yObj
);

2600 * 
d©a
 = 
¬¿yObj
->
cÚ‹Ás
;

2601 ià(
	`UNLIKELY
(
isCİy
 !ğ
NULL
)) {

2602 *
isCİy
 = 
JNI_FALSE
;

2604  
d©a
;

2605 
	}
}

2610 
	$R–—£Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
, * 
ÿ¼ay
, 
jšt
 
mode
) {

2611 ià(
mode
 !ğ
JNI_COMMIT
) {

2612 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2613 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¬r
);

2614 
	`uÅšPrim™iveA¼ay
(
¬¿yObj
);

2616 
	}
}

2621 cÚ¡ 
jch¬
* 
	$G‘SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jboŞ—n
* 
isCİy
) {

2622 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2624 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2625 
A¼ayObjeù
* 
¡rCh¬s
 = 
¡rObj
->
	`¬¿y
();

2627 
	`pšPrim™iveA¼ay
(
¡rCh¬s
);

2629 cÚ¡ 
u2
* 
d©a
 = 
¡rObj
->
	`ch¬s
();

2630 ià(
isCİy
 !ğ
NULL
) {

2631 *
isCİy
 = 
JNI_FALSE
;

2633  (
jch¬
*è
d©a
;

2634 
	}
}

2639 
	$R–—£SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ 
jch¬
* 
ÿ¼ay
) {

2640 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2641 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
j¡r
);

2642 
A¼ayObjeù
* 
¡rCh¬s
 = 
¡rObj
->
	`¬¿y
();

2643 
	`uÅšPrim™iveA¼ay
(
¡rCh¬s
);

2644 
	}
}

2649 
jw—k
 
	$NewW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

2650 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2651 
Objeù
 *
obj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jobj
);

2652  (
jw—k
è
	`addW—kGlob®Reã»nû
(
obj
);

2653 
	}
}

2658 
	$D–‘eW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jw—k
 
w»f
) {

2659 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2660 
	`d–‘eW—kGlob®Reã»nû
(
w»f
);

2661 
	}
}

2668 
jboŞ—n
 
	$Exû±iÚCheck
(
JNIEnv
* 
’v
) {

2669 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2670  
	`dvmCheckExû±iÚ
(
ts
.
	`£lf
());

2671 
	}
}

2681 
jobjeùRefTy³
 
	$G‘ObjeùRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

2682 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2683  
	`dvmG‘JNIRefTy³
(
ts
.
	`£lf
(), 
jobj
);

2684 
	}
}

2692 
jobjeù
 
	$NewDœeùBy‹Bufãr
(
JNIEnv
* 
’v
, * 
add»ss
, 
jlÚg
 
ÿ·c™y
) {

2693 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2696 
CÏssObjeù
* 
bufãrCÏzz
 = 
gDvm
.
şassJavaNioR—dWr™eDœeùBy‹Bufãr
;

2697 ià(!
	`dvmIsCÏssIn™Ÿlized
(
bufãrCÏzz
è&& !
	`dvmIn™CÏss
(bufferClazz)) {

2698  
NULL
;

2700 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
bufãrCÏzz
, 
ALLOC_DONT_TRACK
);

2701 ià(
ÃwObj
 =ğ
NULL
) {

2702  
NULL
;

2705 
jobjeù
 
»suÉ
 = 
	`addLoÿlReã»nû
(
ts
.
	`£lf
(), 
ÃwObj
);

2706 
JV®ue
 
unu£d
;

2707 
	`dvmC®lM‘hod
(
ts
.
	`£lf
(), 
gDvm
.
m‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
,

2708 
ÃwObj
, &
unu£d
, (
jšt
è
add»ss
, (jštè
ÿ·c™y
);

2709 ià(
	`dvmG‘Exû±iÚ
(
ts
.
	`£lf
()è!ğ
NULL
) {

2710 
	`d–‘eLoÿlReã»nû
(
ts
.
	`£lf
(), 
»suÉ
);

2711  
NULL
;

2713  
»suÉ
;

2714 
	}
}

2721 * 
	$G‘DœeùBufãrAdd»ss
(
JNIEnv
* 
’v
, 
jobjeù
 
jbuf
) {

2722 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2725 
Objeù
* 
bufObj
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jbuf
);

2726  (*è
	`dvmG‘F›ldIÁ
(
bufObj
, 
gDvm
.
offJavaNioBufãr_efãùiveDœeùAdd»ss
);

2727 
	}
}

2736 
jlÚg
 
	$G‘DœeùBufãrC­ac™y
(
JNIEnv
* 
’v
, 
jobjeù
 
jbuf
) {

2737 
ScİedJniTh»adS‹
 
	`ts
(
’v
);

2745 
Objeù
* 
buf
 = 
	`dvmDecodeIndœeùRef
(
ts
.
	`£lf
(), 
jbuf
);

2746  
	`dvmG‘F›ldIÁ
(
buf
, 
gDvm
.
offJavaNioBufãr_ÿ·c™y
);

2747 
	}
}

2775 
jšt
 
	$©chTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
, 
boŞ
 
isD«mÚ
) {

2776 
JavaVMA‰achArgs
* 
¬gs
 = (JavaVMA‰achArgs*è
thr_¬gs
;

2781 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2782 ià(
£lf
 !ğ
NULL
) {

2783 *
p_’v
 = 
£lf
->
jniEnv
;

2784  
JNI_OK
;

2790 ià(
gDvm
.
zygÙe
) {

2791  
JNI_ERR
;

2795 
	`dvmLockTh»adLi¡
(
NULL
);

2796 ià(
gDvm
.
nÚD«mÚTh»adCouÁ
 == 0) {

2798 
	`ALOGV
("Refusingo‡ttachhread '%s' -- VM is shutting down",

2799 (
thr_¬gs
 =ğ
NULL
è? "(unknown)" : 
¬gs
->
Çme
);

2800 
	`dvmUÆockTh»adLi¡
();

2801  
JNI_ERR
;

2803 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

2804 
	`dvmUÆockTh»adLi¡
();

2807 
JavaVMA‰achArgs
 
¬gsCİy
;

2808 ià(
¬gs
 =ğ
NULL
) {

2810 
¬gsCİy
.
v”siÚ
 = 
JNI_VERSION_1_2
;

2811 
¬gsCİy
.
Çme
 = 
NULL
;

2812 
¬gsCİy
.
group
 = (
jobjeù
è
	`dvmG‘MašTh»adGroup
();

2814 
	`as£¹
(
¬gs
->
v”siÚ
 >ğ
JNI_VERSION_1_2
);

2816 
¬gsCİy
.
v”siÚ
 = 
¬gs
->version;

2817 
¬gsCİy
.
Çme
 = 
¬gs
->name;

2818 ià(
¬gs
->
group
 !ğ
NULL
) {

2819 
¬gsCİy
.
group
 = (
jobjeù
è
	`dvmDecodeIndœeùRef
(
NULL
, 
¬gs
->group);

2821 
¬gsCİy
.
group
 = (
jobjeù
è
	`dvmG‘MašTh»adGroup
();

2825 
boŞ
 
»suÉ
 = 
	`dvmA‰achCu¼’tTh»ad
(&
¬gsCİy
, 
isD«mÚ
);

2828 
	`dvmLockTh»adLi¡
(
NULL
);

2829 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

2830 
	`dvmUÆockTh»adLi¡
();

2837 ià(
»suÉ
) {

2838 
£lf
 = 
	`dvmTh»adS–f
();

2839 
	`as£¹
(
£lf
 !ğ
NULL
);

2840 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

2841 *
p_’v
 = 
£lf
->
jniEnv
;

2842  
JNI_OK
;

2844  
JNI_ERR
;

2846 
	}
}

2852 
jšt
 
	$A‰achCu¼’tTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
) {

2853  
	`©chTh»ad
(
vm
, 
p_’v
, 
thr_¬gs
, 
çl£
);

2854 
	}
}

2859 
jšt
 
	$A‰achCu¼’tTh»adAsD«mÚ
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
)

2861  
	`©chTh»ad
(
vm
, 
p_’v
, 
thr_¬gs
, 
Œue
);

2862 
	}
}

2867 
jšt
 
	$D‘achCu¼’tTh»ad
(
JavaVM
* 
vm
) {

2868 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2869 ià(
£lf
 =ğ
NULL
) {

2871  
JNI_ERR
;

2875 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

2878 
	`dvmD‘achCu¼’tTh»ad
();

2881  
JNI_OK
;

2882 
	}
}

2891 
jšt
 
	$G‘Env
(
JavaVM
* 
vm
, ** 
’v
, 
jšt
 
v”siÚ
) {

2892 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2894 ià(
v”siÚ
 < 
JNI_VERSION_1_1
 || v”siÚ > 
JNI_VERSION_1_6
) {

2895  
JNI_EVERSION
;

2898 ià(
£lf
 =ğ
NULL
) {

2899 *
’v
 = 
NULL
;

2902 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

2903 *
’v
 = (*è
	`dvmG‘Th»adJNIEnv
(
£lf
);

2904 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

2906  (*
’v
 !ğ
NULL
è? 
JNI_OK
 : 
JNI_EDETACHED
;

2907 
	}
}

2923 
jšt
 
	$De¡royJavaVM
(
JavaVM
* 
vm
) {

2924 
JavaVMExt
* 
ext
 = (JavaVMExt*è
vm
;

2925 ià(
ext
 =ğ
NULL
) {

2926  
JNI_ERR
;

2929 ià(
gDvm
.
v”bo£Shutdown
) {

2930 
	`ALOGD
("DestroyJavaVM waiting for‚on-daemonhreadsoƒxit");

2936 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2937 ià(
£lf
 =ğ
NULL
) {

2938 
JNIEnv
* 
tmpEnv
;

2939 ià(
	`A‰achCu¼’tTh»ad
(
vm
, &
tmpEnv
, 
NULL
è!ğ
JNI_OK
) {

2940 
	`ALOGV
("Unableo„eattach main for Destroy;‡ssuming VM is shutting down (count=%d)",

2941 
gDvm
.
nÚD«mÚTh»adCouÁ
);

2942 
shutdown
;

2944 
	`ALOGV
("Attachedo wait for shutdown in Destroy");

2947 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

2949 
	`dvmLockTh»adLi¡
(
£lf
);

2950 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

2952 
gDvm
.
nÚD«mÚTh»adCouÁ
 > 0) {

2953 
	`±h»ad_cÚd_wa™
(&
gDvm
.
vmEx™CÚd
, &gDvm.
th»adLi¡Lock
);

2956 
	`dvmUÆockTh»adLi¡
();

2957 
£lf
 = 
NULL
;

2959 
shutdown
:

2963 ià(
gDvm
.
v”bo£Shutdown
) {

2964 
	`ALOGD
("DestroyJavaVM shutting VM down");

2966 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

2967 if(
gDvm
.
vmEndHook
)

2968 
gDvm
.
	`vmEndHook
(
vm
);

2969 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

2970 
	`dvmShutdown
();

2973 
	`ä“
(
ext
->
’vLi¡
);

2974 
	`ä“
(
ext
);

2976  
JNI_OK
;

2977 
	}
}

2986 cÚ¡ 
JNIN©iveIÁ”çû
 
	ggN©iveIÁ”çû
 = {

2987 
NULL
,

2988 
NULL
,

2989 
NULL
,

2990 
NULL
,

2992 
G‘V”siÚ
,

2994 
DefšeCÏss
,

2995 
FšdCÏss
,

2997 
FromReæeùedM‘hod
,

2998 
FromReæeùedF›ld
,

2999 
ToReæeùedM‘hod
,

3001 
G‘Su³rşass
,

3002 
IsAssigÇbËFrom
,

3004 
ToReæeùedF›ld
,

3006 
Throw
,

3007 
ThrowNew
,

3008 
Exû±iÚOccu¼ed
,

3009 
Exû±iÚDesüibe
,

3010 
Exû±iÚCË¬
,

3011 
F©®E¼Ü
,

3013 
PushLoÿlF¿me
,

3014 
PİLoÿlF¿me
,

3016 
NewGlob®Ref
,

3017 
D–‘eGlob®Ref
,

3018 
D–‘eLoÿlRef
,

3019 
IsSameObjeù
,

3020 
NewLoÿlRef
,

3021 
Ensu»LoÿlC­ac™y
,

3023 
AÎocObjeù
,

3024 
NewObjeù
,

3025 
NewObjeùV
,

3026 
NewObjeùA
,

3028 
G‘ObjeùCÏss
,

3029 
IsIn¡ªûOf
,

3031 
G‘M‘hodID
,

3033 
C®lObjeùM‘hod
,

3034 
C®lObjeùM‘hodV
,

3035 
C®lObjeùM‘hodA
,

3036 
C®lBoŞ—nM‘hod
,

3037 
C®lBoŞ—nM‘hodV
,

3038 
C®lBoŞ—nM‘hodA
,

3039 
C®lBy‹M‘hod
,

3040 
C®lBy‹M‘hodV
,

3041 
C®lBy‹M‘hodA
,

3042 
C®lCh¬M‘hod
,

3043 
C®lCh¬M‘hodV
,

3044 
C®lCh¬M‘hodA
,

3045 
C®lShÜtM‘hod
,

3046 
C®lShÜtM‘hodV
,

3047 
C®lShÜtM‘hodA
,

3048 
C®lIÁM‘hod
,

3049 
C®lIÁM‘hodV
,

3050 
C®lIÁM‘hodA
,

3051 
C®lLÚgM‘hod
,

3052 
C®lLÚgM‘hodV
,

3053 
C®lLÚgM‘hodA
,

3054 
C®lFlßtM‘hod
,

3055 
C®lFlßtM‘hodV
,

3056 
C®lFlßtM‘hodA
,

3057 
C®lDoubËM‘hod
,

3058 
C®lDoubËM‘hodV
,

3059 
C®lDoubËM‘hodA
,

3060 
C®lVoidM‘hod
,

3061 
C®lVoidM‘hodV
,

3062 
C®lVoidM‘hodA
,

3064 
C®lNÚvœtu®ObjeùM‘hod
,

3065 
C®lNÚvœtu®ObjeùM‘hodV
,

3066 
C®lNÚvœtu®ObjeùM‘hodA
,

3067 
C®lNÚvœtu®BoŞ—nM‘hod
,

3068 
C®lNÚvœtu®BoŞ—nM‘hodV
,

3069 
C®lNÚvœtu®BoŞ—nM‘hodA
,

3070 
C®lNÚvœtu®By‹M‘hod
,

3071 
C®lNÚvœtu®By‹M‘hodV
,

3072 
C®lNÚvœtu®By‹M‘hodA
,

3073 
C®lNÚvœtu®Ch¬M‘hod
,

3074 
C®lNÚvœtu®Ch¬M‘hodV
,

3075 
C®lNÚvœtu®Ch¬M‘hodA
,

3076 
C®lNÚvœtu®ShÜtM‘hod
,

3077 
C®lNÚvœtu®ShÜtM‘hodV
,

3078 
C®lNÚvœtu®ShÜtM‘hodA
,

3079 
C®lNÚvœtu®IÁM‘hod
,

3080 
C®lNÚvœtu®IÁM‘hodV
,

3081 
C®lNÚvœtu®IÁM‘hodA
,

3082 
C®lNÚvœtu®LÚgM‘hod
,

3083 
C®lNÚvœtu®LÚgM‘hodV
,

3084 
C®lNÚvœtu®LÚgM‘hodA
,

3085 
C®lNÚvœtu®FlßtM‘hod
,

3086 
C®lNÚvœtu®FlßtM‘hodV
,

3087 
C®lNÚvœtu®FlßtM‘hodA
,

3088 
C®lNÚvœtu®DoubËM‘hod
,

3089 
C®lNÚvœtu®DoubËM‘hodV
,

3090 
C®lNÚvœtu®DoubËM‘hodA
,

3091 
C®lNÚvœtu®VoidM‘hod
,

3092 
C®lNÚvœtu®VoidM‘hodV
,

3093 
C®lNÚvœtu®VoidM‘hodA
,

3095 
G‘F›ldID
,

3097 
G‘ObjeùF›ld
,

3098 
G‘BoŞ—nF›ld
,

3099 
G‘By‹F›ld
,

3100 
G‘Ch¬F›ld
,

3101 
G‘ShÜtF›ld
,

3102 
G‘IÁF›ld
,

3103 
G‘LÚgF›ld
,

3104 
G‘FlßtF›ld
,

3105 
G‘DoubËF›ld
,

3106 
S‘ObjeùF›ld
,

3107 
S‘BoŞ—nF›ld
,

3108 
S‘By‹F›ld
,

3109 
S‘Ch¬F›ld
,

3110 
S‘ShÜtF›ld
,

3111 
S‘IÁF›ld
,

3112 
S‘LÚgF›ld
,

3113 
S‘FlßtF›ld
,

3114 
S‘DoubËF›ld
,

3116 
G‘SticM‘hodID
,

3118 
C®lSticObjeùM‘hod
,

3119 
C®lSticObjeùM‘hodV
,

3120 
C®lSticObjeùM‘hodA
,

3121 
C®lSticBoŞ—nM‘hod
,

3122 
C®lSticBoŞ—nM‘hodV
,

3123 
C®lSticBoŞ—nM‘hodA
,

3124 
C®lSticBy‹M‘hod
,

3125 
C®lSticBy‹M‘hodV
,

3126 
C®lSticBy‹M‘hodA
,

3127 
C®lSticCh¬M‘hod
,

3128 
C®lSticCh¬M‘hodV
,

3129 
C®lSticCh¬M‘hodA
,

3130 
C®lSticShÜtM‘hod
,

3131 
C®lSticShÜtM‘hodV
,

3132 
C®lSticShÜtM‘hodA
,

3133 
C®lSticIÁM‘hod
,

3134 
C®lSticIÁM‘hodV
,

3135 
C®lSticIÁM‘hodA
,

3136 
C®lSticLÚgM‘hod
,

3137 
C®lSticLÚgM‘hodV
,

3138 
C®lSticLÚgM‘hodA
,

3139 
C®lSticFlßtM‘hod
,

3140 
C®lSticFlßtM‘hodV
,

3141 
C®lSticFlßtM‘hodA
,

3142 
C®lSticDoubËM‘hod
,

3143 
C®lSticDoubËM‘hodV
,

3144 
C®lSticDoubËM‘hodA
,

3145 
C®lSticVoidM‘hod
,

3146 
C®lSticVoidM‘hodV
,

3147 
C®lSticVoidM‘hodA
,

3149 
G‘SticF›ldID
,

3151 
G‘SticObjeùF›ld
,

3152 
G‘SticBoŞ—nF›ld
,

3153 
G‘SticBy‹F›ld
,

3154 
G‘SticCh¬F›ld
,

3155 
G‘SticShÜtF›ld
,

3156 
G‘SticIÁF›ld
,

3157 
G‘SticLÚgF›ld
,

3158 
G‘SticFlßtF›ld
,

3159 
G‘SticDoubËF›ld
,

3161 
S‘SticObjeùF›ld
,

3162 
S‘SticBoŞ—nF›ld
,

3163 
S‘SticBy‹F›ld
,

3164 
S‘SticCh¬F›ld
,

3165 
S‘SticShÜtF›ld
,

3166 
S‘SticIÁF›ld
,

3167 
S‘SticLÚgF›ld
,

3168 
S‘SticFlßtF›ld
,

3169 
S‘SticDoubËF›ld
,

3171 
NewSŒšg
,

3173 
G‘SŒšgL’gth
,

3174 
G‘SŒšgCh¬s
,

3175 
R–—£SŒšgCh¬s
,

3177 
NewSŒšgUTF
,

3178 
G‘SŒšgUTFL’gth
,

3179 
G‘SŒšgUTFCh¬s
,

3180 
R–—£SŒšgUTFCh¬s
,

3182 
G‘A¼ayL’gth
,

3183 
NewObjeùA¼ay
,

3184 
G‘ObjeùA¼ayEËm’t
,

3185 
S‘ObjeùA¼ayEËm’t
,

3187 
NewBoŞ—nA¼ay
,

3188 
NewBy‹A¼ay
,

3189 
NewCh¬A¼ay
,

3190 
NewShÜtA¼ay
,

3191 
NewIÁA¼ay
,

3192 
NewLÚgA¼ay
,

3193 
NewFlßtA¼ay
,

3194 
NewDoubËA¼ay
,

3196 
G‘BoŞ—nA¼ayEËm’ts
,

3197 
G‘By‹A¼ayEËm’ts
,

3198 
G‘Ch¬A¼ayEËm’ts
,

3199 
G‘ShÜtA¼ayEËm’ts
,

3200 
G‘IÁA¼ayEËm’ts
,

3201 
G‘LÚgA¼ayEËm’ts
,

3202 
G‘FlßtA¼ayEËm’ts
,

3203 
G‘DoubËA¼ayEËm’ts
,

3205 
R–—£BoŞ—nA¼ayEËm’ts
,

3206 
R–—£By‹A¼ayEËm’ts
,

3207 
R–—£Ch¬A¼ayEËm’ts
,

3208 
R–—£ShÜtA¼ayEËm’ts
,

3209 
R–—£IÁA¼ayEËm’ts
,

3210 
R–—£LÚgA¼ayEËm’ts
,

3211 
R–—£FlßtA¼ayEËm’ts
,

3212 
R–—£DoubËA¼ayEËm’ts
,

3214 
G‘BoŞ—nA¼ayRegiÚ
,

3215 
G‘By‹A¼ayRegiÚ
,

3216 
G‘Ch¬A¼ayRegiÚ
,

3217 
G‘ShÜtA¼ayRegiÚ
,

3218 
G‘IÁA¼ayRegiÚ
,

3219 
G‘LÚgA¼ayRegiÚ
,

3220 
G‘FlßtA¼ayRegiÚ
,

3221 
G‘DoubËA¼ayRegiÚ
,

3222 
S‘BoŞ—nA¼ayRegiÚ
,

3223 
S‘By‹A¼ayRegiÚ
,

3224 
S‘Ch¬A¼ayRegiÚ
,

3225 
S‘ShÜtA¼ayRegiÚ
,

3226 
S‘IÁA¼ayRegiÚ
,

3227 
S‘LÚgA¼ayRegiÚ
,

3228 
S‘FlßtA¼ayRegiÚ
,

3229 
S‘DoubËA¼ayRegiÚ
,

3231 
Regi¡”N©ives
,

3232 
UÄegi¡”N©ives
,

3234 
MÚ™ÜEÁ”
,

3235 
MÚ™ÜEx™
,

3237 
G‘JavaVM
,

3239 
G‘SŒšgRegiÚ
,

3240 
G‘SŒšgUTFRegiÚ
,

3242 
G‘Prim™iveA¼ayCr™iÿl
,

3243 
R–—£Prim™iveA¼ayCr™iÿl
,

3245 
G‘SŒšgCr™iÿl
,

3246 
R–—£SŒšgCr™iÿl
,

3248 
NewW—kGlob®Ref
,

3249 
D–‘eW—kGlob®Ref
,

3251 
Exû±iÚCheck
,

3253 
NewDœeùBy‹Bufãr
,

3254 
G‘DœeùBufãrAdd»ss
,

3255 
G‘DœeùBufãrC­ac™y
,

3257 
G‘ObjeùRefTy³


3260 cÚ¡ 
JNIInvokeIÁ”çû
 
	ggInvokeIÁ”çû
 = {

3261 
NULL
,

3262 
NULL
,

3263 
NULL
,

3265 
De¡royJavaVM
,

3266 
A‰achCu¼’tTh»ad
,

3267 
D‘achCu¼’tTh»ad
,

3269 
G‘Env
,

3271 
A‰achCu¼’tTh»adAsD«mÚ
,

3286 
JNIEnv
* 
	$dvmC»©eJNIEnv
(
Th»ad
* 
£lf
) {

3287 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvmJni
.
jniVm
;

3292 
	`as£¹
(
vm
 !ğ
NULL
);

3294 
JNIEnvExt
* 
ÃwEnv
 = (JNIEnvExt*è
	`ÿÎoc
(1, (JNIEnvExt));

3295 
ÃwEnv
->
funcTabË
 = &
gN©iveIÁ”çû
;

3296 ià(
£lf
 !ğ
NULL
) {

3297 
	`dvmS‘JniEnvTh»adId
((
JNIEnv
*è
ÃwEnv
, 
£lf
);

3298 
	`as£¹
(
ÃwEnv
->
’vTh»adId
 != 0);

3301 
ÃwEnv
->
’vTh»adId
 = 0x77777775;

3302 
ÃwEnv
->
£lf
 = (
Th»ad
*) 0x77777779;

3304 ià(
gDvmJni
.
u£CheckJni
) {

3305 
	`dvmU£CheckedJniEnv
(
ÃwEnv
);

3308 
ScİedPth»adMu‹xLock
 
	`lock
(&
vm
->
’vLi¡Lock
);

3311 
ÃwEnv
->
Ãxt
 = 
vm
->
’vLi¡
;

3312 
	`as£¹
(
ÃwEnv
->
´ev
 =ğ
NULL
);

3313 ià(
vm
->
’vLi¡
 =ğ
NULL
) {

3315 
vm
->
’vLi¡
 = 
ÃwEnv
;

3317 
vm
->
’vLi¡
->
´ev
 = 
ÃwEnv
;

3319 
vm
->
’vLi¡
 = 
ÃwEnv
;

3323  (
JNIEnv
*è
ÃwEnv
;

3324 
	}
}

3329 
	$dvmDe¡royJNIEnv
(
JNIEnv
* 
’v
) {

3330 ià(
’v
 =ğ
NULL
) {

3336 
JNIEnvExt
* 
extEnv
 = (JNIEnvExt*è
’v
;

3337 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvmJni
.
jniVm
;

3339 
ScİedPth»adMu‹xLock
 
	`lock
(&
vm
->
’vLi¡Lock
);

3341 ià(
extEnv
 =ğ
vm
->
’vLi¡
) {

3342 
	`as£¹
(
extEnv
->
´ev
 =ğ
NULL
);

3343 
vm
->
’vLi¡
 = 
extEnv
->
Ãxt
;

3345 
	`as£¹
(
extEnv
->
´ev
 !ğ
NULL
);

3346 
extEnv
->
´ev
->
Ãxt
 =ƒxtEnv->next;

3348 ià(
extEnv
->
Ãxt
 !ğ
NULL
) {

3349 
extEnv
->
Ãxt
->
´ev
 =ƒxtEnv->prev;

3352 
	`ä“
(
’v
);

3354 
	}
}

3364 
	$dvmL©eEÇbËCheckedJni
() {

3365 
JNIEnvExt
* 
extEnv
 = 
	`dvmG‘JNIEnvFÜTh»ad
();

3366 ià(
extEnv
 =ğ
NULL
) {

3367 
	`ALOGE
("dvmLateEnableCheckedJni:hread has‚o JNIEnv");

3370 
JavaVMExt
* 
extVm
 = (JavaVMExt*è
gDvmJni
.
jniVm
;

3371 
	`as£¹
(
extVm
 !ğ
NULL
);

3373 ià(!
gDvmJni
.
u£CheckJni
) {

3374 
	`ALOGD
("Late-enabling CheckJNI");

3375 
	`dvmU£CheckedJniVm
(
extVm
);

3376 
	`dvmU£CheckedJniEnv
(
extEnv
);

3378 
	`ALOGD
("Not†ate-enabling CheckJNI (already on)");

3380 
	}
}

3385 
jšt
 
	$JNI_G‘DeçuÉJavaVMIn™Args
(* 
vm_¬gs
) {

3386  
JNI_ERR
;

3387 
	}
}

3394 
jšt
 
	$JNI_G‘C»©edJavaVMs
(
JavaVM
** 
vmBuf
, 
jsize
 
bufL’
, jsize* 
nVMs
) {

3395 ià(
gDvmJni
.
jniVm
 !ğ
NULL
) {

3396 *
nVMs
 = 1;

3397 ià(
bufL’
 > 0) {

3398 *
vmBuf
++ = 
gDvmJni
.
jniVm
;

3401 *
nVMs
 = 0;

3403  
JNI_OK
;

3404 
	}
}

3406 
	$‹¡ShadowHook
(
Objeù
* 
obj
){

3407 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","in object hook");

3408 
	}
}

3416 
jšt
 
	$JNI_C»©eJavaVM
(
JavaVM
** 
p_vm
, 
JNIEnv
** 
p_’v
, * 
vm_¬gs
) {

3417 cÚ¡ 
JavaVMIn™Args
* 
¬gs
 = (JavaVMIn™Args*è
vm_¬gs
;

3418 ià(
¬gs
->
v”siÚ
 < 
JNI_VERSION_1_2
) {

3419  
JNI_EVERSION
;

3425 
	`mem£t
(&
gDvm
, 0, (gDvm));

3430 
JavaVMExt
* 
pVM
 = (JavaVMExt*è
	`ÿÎoc
(1, (JavaVMExt));

3431 
pVM
->
funcTabË
 = &
gInvokeIÁ”çû
;

3432 
pVM
->
’vLi¡
 = 
NULL
;

3433 
	`dvmIn™Mu‹x
(&
pVM
->
’vLi¡Lock
);

3435 
UniquePŒ
<cÚ¡ *[]> 
	`¬gv
(
Ãw
 cÚ¡ *[
¬gs
->
nO±iÚs
]);

3436 
	`mem£t
(
¬gv
.
	`g‘
(), 0, (*è* (
¬gs
->
nO±iÚs
));

3445 
gDvm
.
shadowHook
 = 
NULL
;

3446 
gDvm
.
ÃwObjHook
 = 
NULL
;

3447 
gDvm
.
ä“ObjHook
 = 
NULL
;

3448 
gDvm
.
th»adEndHook
 = 
NULL
;

3449 
gDvm
.
vmS¹Hook
 = 
NULL
;

3450 
gDvm
.
vmEndHook
 = 
NULL
;

3451 
gDvm
.
vmIn™Hook
 = 
NULL
;

3452 
gDvm
.
şassfeLßdHook
 = 
NULL
;

3453 
gDvm
.
şassIn™Hook
 = 
NULL
;

3454 
gDvm
.
isShadow
 = 
Œue
;

3455 
	`±h»ad_mu‹x_š™
(&
gDvm
.
s_mtx
,
NULL
);

3456 
	`ALOG
(
LOG_INFO
,"HAIYANG","š %s",
__FUNCTION__
);

3458 
¬gc
 = 0;

3459 
i
 = 0; i < 
¬gs
->
nO±iÚs
; i++) {

3460 cÚ¡ * 
İtSŒ
 = 
¬gs
->
İtiÚs
[
i
].
İtiÚSŒšg
;

3461 ià(
İtSŒ
 =ğ
NULL
) {

3462 
	`dvmF´štf
(
¡d”r
, "ERROR: C»©eJavaVM faed:‡rgum’ˆ%d wa NULL\n", 
i
);

3463  
JNI_ERR
;

3464 } ià(
	`¡rcmp
(
İtSŒ
, "vfprintf") == 0) {

3465 
gDvm
.
vårštfHook
 = ((*)(
FILE
 *, cÚ¡ *, 
va_li¡
))
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

3466 } ià(
	`¡rcmp
(
İtSŒ
, "exit") == 0) {

3467 
gDvm
.
ex™Hook
 = ((*)()è
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

3468 } ià(
	`¡rcmp
(
İtSŒ
, "abort") == 0) {

3469 
gDvm
.
abÜtHook
 = ((*)())
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

3470 } ià(
	`¡rcmp
(
İtSŒ
, "sensitiveThread") == 0) {

3471 
gDvm
.
isS’s™iveTh»adHook
 = (
	`boŞ
 (*)())
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

3472 } ià(
	`¡rcmp
(
İtSŒ
, "-Xcheck:jni") == 0) {

3473 
gDvmJni
.
u£CheckJni
 = 
Œue
;

3474 } ià(
	`¡ºcmp
(
İtSŒ
, "-Xjniopts:", 10) == 0) {

3475 * 
jniO±s
 = 
	`¡rdup
(
İtSŒ
 + 10);

3476 
size_t
 
jniO±CouÁ
 = 1;

3477 * 
p
 = 
jniO±s
; *p != 0; ++p) {

3478 ià(*
p
 == ',') {

3479 ++
jniO±CouÁ
;

3480 *
p
 = 0;

3483 * 
jniO±
 = 
jniO±s
;

3484 
size_t
 
i
 = 0; i < 
jniO±CouÁ
; ++i) {

3485 ià(
	`¡rcmp
(
jniO±
, "warnonly") == 0) {

3486 
gDvmJni
.
w¬nOÆy
 = 
Œue
;

3487 } ià(
	`¡rcmp
(
jniO±
, "forcecopy") == 0) {

3488 
gDvmJni
.
fÜûCİy
 = 
Œue
;

3489 } ià(
	`¡rcmp
(
jniO±
, "logThirdPartyJni") == 0) {

3490 
gDvmJni
.
logThœdP¬tyJni
 = 
Œue
;

3492 
	`dvmF´štf
(
¡d”r
, "ERROR: CreateJavaVM failed: unknown -Xjniopts option '%s'\n",

3493 
jniO±
);

3494  
JNI_ERR
;

3496 
jniO±
 +ğ
	`¡¾’
(jniOpt) + 1;

3498 
	`ä“
(
jniO±s
);

3501 
¬gv
[
¬gc
++] = 
İtSŒ
;

3505 ià(
gDvmJni
.
u£CheckJni
) {

3506 
	`dvmU£CheckedJniVm
(
pVM
);

3509 ià(
gDvmJni
.
jniVm
 !ğ
NULL
) {

3510 
	`dvmF´štf
(
¡d”r
, "ERROR: Dalvik only supports one VM…er…rocess\n");

3511  
JNI_ERR
;

3513 
gDvmJni
.
jniVm
 = (
JavaVM
*è
pVM
;

3520 
JNIEnvExt
* 
pEnv
 = (JNIEnvExt*è
	`dvmC»©eJNIEnv
(
NULL
);

3523 
gDvm
.
š™Ÿlizšg
 = 
Œue
;

3524 
¡d
::
¡ršg
 
¡©us
 =

3525 
	`dvmS¹up
(
¬gc
, 
¬gv
.
	`g‘
(), 
¬gs
->
ignÜeUÄecognized
, (
JNIEnv
*)
pEnv
);

3526 
gDvm
.
š™Ÿlizšg
 = 
çl£
;

3528 ià(!
¡©us
.
	`em±y
()) {

3529 
	`ä“
(
pEnv
);

3530 
	`ä“
(
pVM
);

3531 
	`ALOGW
("C»©eJavaVM faed: %s", 
¡©us
.
	`c_¡r
());

3532  
JNI_ERR
;

3538 
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
);

3539 *
p_’v
 = (
JNIEnv
*è
pEnv
;

3540 *
p_vm
 = (
JavaVM
*è
pVM
;

3541 
	`ALOGV
("CreateJavaVM succeeded");

3543 
	`ShadowLib_ZygÙe_OnLßd
(
gDvmJni
.
jniVm
, 
NULL
);

3545  
JNI_OK
;

3546 
	}
}

	@vm/JniInternal.h

19 #iâdeà
DALVIK_JNIINTERNAL_H_


20 
	#DALVIK_JNIINTERNAL_H_


	)

22 
	~"jni.h
"

25 
boŞ
 
dvmJniS¹up
();

26 
dvmJniShutdown
();

33 
	gJavaVMExt
;

35 
	sJNIEnvExt
 {

36 cÚ¡ 
JNIN©iveIÁ”çû
* 
	mfuncTabË
;

38 cÚ¡ 
JNIN©iveIÁ”çû
* 
	mba£FuncTabË
;

40 
u4
 
	m’vTh»adId
;

41 
Th»ad
* 
	m£lf
;

44 
	mü™iÿl
;

46 
JNIEnvExt
* 
	m´ev
;

47 
JNIEnvExt
* 
	mÃxt
;

50 
	sJavaVMExt
 {

51 cÚ¡ 
JNIInvokeIÁ”çû
* 
	mfuncTabË
;

53 cÚ¡ 
JNIInvokeIÁ”çû
* 
	mba£FuncTabË
;

56 
JNIEnvExt
* 
	m’vLi¡
;

57 
±h»ad_mu‹x_t
 
	m’vLi¡Lock
;

67 
	eD®vikJniR‘uºTy³
 {

68 
	mDALVIK_JNI_RETURN_VOID
 = 0,

69 
	mDALVIK_JNI_RETURN_FLOAT
 = 1,

70 
	mDALVIK_JNI_RETURN_DOUBLE
 = 2,

71 
	mDALVIK_JNI_RETURN_S8
 = 3,

72 
	mDALVIK_JNI_RETURN_S4
 = 4,

73 
	mDALVIK_JNI_RETURN_S2
 = 5,

74 
	mDALVIK_JNI_RETURN_U2
 = 6,

75 
	mDALVIK_JNI_RETURN_S1
 = 7

78 
	#DALVIK_JNI_NO_ARG_INFO
 0x80000000

	)

79 
	#DALVIK_JNI_RETURN_MASK
 0x70000000

	)

80 
	#DALVIK_JNI_RETURN_SHIFT
 28

	)

81 
	#DALVIK_JNI_COUNT_MASK
 0x0f000000

	)

82 
	#DALVIK_JNI_COUNT_SHIFT
 24

	)

92 
INLINE
 
	$dvmPİJniLoÿls
(
Th»ad
* 
£lf
, 
SckSaveA»a
* 
§veA»a
)

94 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
 = 
§veA»a
->
xŒa
.
loÿlRefCook›
;

95 
	}
}

100 
INLINE
 
	$dvmS‘JniEnvTh»adId
(
JNIEnv
* 
pEnv
, 
Th»ad
* 
£lf
)

102 ((
JNIEnvExt
*)
pEnv
)->
’vTh»adId
 = 
£lf
->
th»adId
;

103 ((
JNIEnvExt
*)
pEnv
)->
£lf
 = self;

104 
	}
}

106 
dvmC®lJNIM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

107 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

108 
dvmCheckC®lJNIM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

109 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

114 
dvmU£JNIBridge
(
M‘hod
* 
m‘hod
, * 
func
);

120 
dvmU£CheckedJniEnv
(
JNIEnvExt
* 
pEnv
);

121 
dvmU£CheckedJniVm
(
JavaVMExt
* 
pVm
);

122 
dvmL©eEÇbËCheckedJni
();

127 
Objeù
* 
dvmDecodeIndœeùRef
(
Th»ad
* 
£lf
, 
jobjeù
 
jobj
);

133 
jobjeùRefTy³
 
dvmG‘JNIRefTy³
(
Th»ad
* 
£lf
, 
jobjeù
 
jobj
);

139 cÚ¡ 
M‘hod
* 
dvmG‘Cu¼’tJNIM‘hod
();

144 
JNIEnv
* 
dvmC»©eJNIEnv
(
Th»ad
* 
£lf
);

145 
dvmDe¡royJNIEnv
(
JNIEnv
* 
’v
);

150 
JNIEnvExt
* 
dvmG‘JNIEnvFÜTh»ad
();

156 
dvmR–—£JniMÚ™Üs
(
Th»ad
* 
£lf
);

163 
dvmDumpJniReã»nûTabËs
();

	@vm/LinearAlloc.cpp

20 
	~"D®vik.h
"

22 
	~<sys/mmª.h
>

23 
	~<lim™s.h
>

24 
	~<”ºo.h
>

29 
	#USE_ASHMEM
 1

	)

31 #ifdeà
USE_ASHMEM


32 
	~<cuts/ashmem.h
>

69 
	#BLOCK_ALIGN
 8

	)

72 
	#DEFAULT_MAX_LENGTH
 (16*1024*1024)

	)

75 
	#HEADER_EXTRA
 4

	)

78 
	#LENGTHFLAG_FREE
 0x80000000

	)

79 
	#LENGTHFLAG_RW
 0x40000000

	)

80 
	#LENGTHFLAG_MASK
 (~(
LENGTHFLAG_FREE
|
LENGTHFLAG_RW
))

	)

84 
checkAÎF»e
(
Objeù
* 
şassLßd”
);

91 
šlše
 
Lš—rAÎocHdr
* 
	$g‘H—d”
(
Objeù
* 
şassLßd”
)

93  
gDvm
.
pBoÙLßd”AÎoc
;

94 
	}
}

100 
šlše
 
u4
* 
	$g‘BlockH—d”
(* 
mem
)

102  ((
u4
*è
mem
) -1;

103 
	}
}

108 
Lš—rAÎocHdr
* 
	$dvmLš—rAÎocC»©e
(
Objeù
* 
şassLßd”
)

110 #ifdeà
DISABLE_LINEAR_ALLOC


111  (
Lš—rAÎocHdr
*) 0x12345;

113 
Lš—rAÎocHdr
* 
pHdr
;

115 
pHdr
 = (
Lš—rAÎocHdr
*è
	`m®loc
((*pHdr));

127 
	`as£¹
(
BLOCK_ALIGN
 >ğ
HEADER_EXTRA
);

128 
pHdr
->
curOff£t
 =…Hdr->
fœ¡Off£t
 =

129 (
BLOCK_ALIGN
-
HEADER_EXTRA
è+ 
SYSTEM_PAGE_SIZE
;

130 
pHdr
->
m­L’gth
 = 
DEFAULT_MAX_LENGTH
;

132 #ifdeà
USE_ASHMEM


133 
fd
;

135 
fd
 = 
	`ashmem_ü—‹_»giÚ
("d®vik-Lš—rAÎoc", 
DEFAULT_MAX_LENGTH
);

136 ià(
fd
 < 0) {

137 
	`ALOGE
("ashmem Lš—rAÎoøçed %s", 
	`¡»¼Ü
(
”ºo
));

138 
	`ä“
(
pHdr
);

139  
NULL
;

142 
pHdr
->
m­Addr
 = (*)
	`mm­
(
NULL
,…Hdr->
m­L’gth
, 
PROT_READ
 | 
PROT_WRITE
,

143 
MAP_PRIVATE
, 
fd
, 0);

144 ià(
pHdr
->
m­Addr
 =ğ
MAP_FAILED
) {

145 
	`ALOGE
("Lš—rAÎoømm­(%dèçed: %s", 
pHdr
->
m­L’gth
,

146 
	`¡»¼Ü
(
”ºo
));

147 
	`ä“
(
pHdr
);

148 
	`şo£
(
fd
);

149  
NULL
;

152 
	`şo£
(
fd
);

156 
pHdr
->
m­Addr
 = 
	`mm­
(
NULL
,…Hdr->
m­L’gth
, 
PROT_READ
 | 
PROT_WRITE
,

157 
MAP_PRIVATE
 | 
MAP_ANON
, -1, 0);

158 ià(
pHdr
->
m­Addr
 =ğ
MAP_FAILED
) {

159 
	`ALOGE
("Lš—rAÎoømm­(%dèçed: %s", 
pHdr
->
m­L’gth
,

160 
	`¡»¼Ü
(
”ºo
));

161 
	`ä“
(
pHdr
);

162  
NULL
;

167 
	`as£¹
(((è
pHdr
->
m­Addr
 & (
SYSTEM_PAGE_SIZE
-1)) == 0);

170 
	`as£¹
(*(
u4
*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
) == 0);

189 ià(
	`m´Ùeù
(
pHdr
->
m­Addr
,…Hdr->
m­L’gth
, 
PROT_NONE
) != 0) {

190 
	`ALOGW
("Lš—rAÎoøš™ m´Ùeù faed: %s", 
	`¡»¼Ü
(
”ºo
));

191 
	`ä“
(
pHdr
);

192  
NULL
;

194 ià(
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
SYSTEM_PAGE_SIZE
, SYSTEM_PAGE_SIZE,

195 
ENFORCE_READ_ONLY
 ? 
PROT_READ
 : PROT_READ|
PROT_WRITE
) != 0)

197 
	`ALOGW
("Lš—rAÎoøš™ m´Ùeù #2 faed: %s", 
	`¡»¼Ü
(
”ºo
));

198 
	`ä“
(
pHdr
);

199  
NULL
;

202 ià(
ENFORCE_READ_ONLY
) {

204 
numPages
 = (
pHdr
->
m­L’gth
+
SYSTEM_PAGE_SIZE
-1) / SYSTEM_PAGE_SIZE;

205 
pHdr
->
wr™eRefCouÁ
 = (*)
	`ÿÎoc
(
numPages
, ());

206 ià(
pHdr
->
wr™eRefCouÁ
 =ğ
NULL
) {

207 
	`ä“
(
pHdr
);

208  
NULL
;

212 
	`dvmIn™Mu‹x
(&
pHdr
->
lock
);

214 
	`ALOGV
("LinearAlloc: created„egion‡t %p-%p",

215 
pHdr
->
m­Addr
,…Hdr->m­Add¸+…Hdr->
m­L’gth
-1);

217  
pHdr
;

218 
	}
}

226 
	$dvmLš—rAÎocDe¡roy
(
Objeù
* 
şassLßd”
)

228 #ifdeà
DISABLE_LINEAR_ALLOC


231 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

232 ià(
pHdr
 =ğ
NULL
)

235 
	`checkAÎF»e
(
şassLßd”
);

239 ià(
gDvm
.
v”bo£Shutdown
) {

240 
	`ALOGV
("Unm­pšg†š—¸®loÿtÜ ba£=%p", 
pHdr
->
m­Addr
);

241 
	`ALOGD
("LinearAlloc %p used %d of %d (%d%%)",

242 
şassLßd”
, 
pHdr
->
curOff£t
,…Hdr->
m­L’gth
,

243 (
pHdr
->
curOff£t
 * 100è/…Hdr->
m­L’gth
);

246 ià(
	`munm­
(
pHdr
->
m­Addr
,…Hdr->
m­L’gth
) != 0) {

247 
	`ALOGW
("LinearAlloc munmap(%p, %d) failed: %s",

248 
pHdr
->
m­Addr
,…Hdr->
m­L’gth
, 
	`¡»¼Ü
(
”ºo
));

250 
	`ä“
(
pHdr
);

251 
	}
}

265 * 
	$dvmLš—rAÎoc
(
Objeù
* 
şassLßd”
, 
size_t
 
size
)

267 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

268 
¡¬tOff£t
, 
ÃxtOff£t
;

269 
Ï¡GoodOff
, 
fœ¡Wr™eOff
, 
Ï¡Wr™eOff
;

271 #ifdeà
DISABLE_LINEAR_ALLOC


272  
	`ÿÎoc
(1, 
size
);

275 
	`LOGVV
("--- Lš—rAÎoc(%p, %d)", 
şassLßd”
, 
size
);

287 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

289 
¡¬tOff£t
 = 
pHdr
->
curOff£t
;

290 
	`as£¹
(((
¡¬tOff£t
 + 
HEADER_EXTRA
è& (
BLOCK_ALIGN
-1)) == 0);

304 
ÃxtOff£t
 = ((
¡¬tOff£t
 + 
HEADER_EXTRA
*2 + 
size
 + (
BLOCK_ALIGN
-1))

305 & ~(
BLOCK_ALIGN
-1)è- 
HEADER_EXTRA
;

306 
	`LOGVV
("--- old=%d size=%d‚ew=%d", 
¡¬tOff£t
, 
size
, 
ÃxtOff£t
);

308 ià(
ÃxtOff£t
 > 
pHdr
->
m­L’gth
) {

315 
	`ALOGE
("LinearAllocƒxceeded capacity (%d),†ast=%d",

316 
pHdr
->
m­L’gth
, (è
size
);

317 
	`dvmAbÜt
();

326 
size
 = 
ÃxtOff£t
 - (
¡¬tOff£t
 + 
HEADER_EXTRA
);

327 
	`LOGVV
("--- (siznow %d)", 
size
);

342 
Ï¡GoodOff
 = (
¡¬tOff£t
-1è& ~(
SYSTEM_PAGE_SIZE
-1);

343 
fœ¡Wr™eOff
 = 
¡¬tOff£t
 & ~(
SYSTEM_PAGE_SIZE
-1);

344 
Ï¡Wr™eOff
 = (
ÃxtOff£t
-1è& ~(
SYSTEM_PAGE_SIZE
-1);

345 
	`LOGVV
("---†astGood=0x%04x firstWrite=0x%04x†astWrite=0x%04x",

346 
Ï¡GoodOff
, 
fœ¡Wr™eOff
, 
Ï¡Wr™eOff
);

347 ià(
Ï¡GoodOff
 !ğ
Ï¡Wr™eOff
 || 
ENFORCE_READ_ONLY
) {

348 
cc
, 
¡¬t
, 
Ën
;

350 
¡¬t
 = 
fœ¡Wr™eOff
;

351 
	`as£¹
(
¡¬t
 <ğ
ÃxtOff£t
);

352 
Ën
 = (
Ï¡Wr™eOff
 - 
fœ¡Wr™eOff
è+ 
SYSTEM_PAGE_SIZE
;

354 
	`LOGVV
("--- c®lšg m´Ùeù(¡¬t=%d†’=%d RW)", 
¡¬t
, 
Ën
);

355 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
¡¬t
, 
Ën
, 
PROT_READ
 | 
PROT_WRITE
);

356 ià(
cc
 != 0) {

357 
	`ALOGE
("LinearAlloc mprotect (+%d %d) failed: %s",

358 
¡¬t
, 
Ën
, 
	`¡»¼Ü
(
”ºo
));

360 
	`dvmAbÜt
();

365 ià(
ENFORCE_READ_ONLY
) {

366 
i
, 
¡¬t
, 
’d
;

368 
¡¬t
 = 
fœ¡Wr™eOff
 / 
SYSTEM_PAGE_SIZE
;

369 
’d
 = 
Ï¡Wr™eOff
 / 
SYSTEM_PAGE_SIZE
;

371 
	`LOGVV
("--- marking…ages %d-%d RW (alloc %d‡t %p)",

372 
¡¬t
, 
’d
, 
size
, 
pHdr
->
m­Addr
 + 
¡¬tOff£t
 + 
HEADER_EXTRA
);

373 
i
 = 
¡¬t
; i <ğ
’d
; i++)

374 
pHdr
->
wr™eRefCouÁ
[
i
]++;

378 ià(
ENFORCE_READ_ONLY
)

379 *(
u4
*)(
pHdr
->
m­Addr
 + 
¡¬tOff£t
èğ
size
 | 
LENGTHFLAG_RW
;

381 *(
u4
*)(
pHdr
->
m­Addr
 + 
¡¬tOff£t
èğ
size
;

386 
pHdr
->
curOff£t
 = 
ÃxtOff£t
;

388 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

389  
pHdr
->
m­Addr
 + 
¡¬tOff£t
 + 
HEADER_EXTRA
;

390 
	}
}

395 * 
	$dvmLš—rSŒdup
(
Objeù
* 
şassLßd”
, cÚ¡ * 
¡r
)

397 #ifdeà
DISABLE_LINEAR_ALLOC


398  
	`¡rdup
(
¡r
);

400 
Ën
 = 
	`¡¾’
(
¡r
);

401 * 
mem
 = 
	`dvmLš—rAÎoc
(
şassLßd”
, 
Ën
+1);

402 
	`memıy
(
mem
, 
¡r
, 
Ën
+1);

403 ià(
ENFORCE_READ_ONLY
)

404 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

405  (*è
mem
;

406 
	}
}

417 * 
	$dvmLš—rR—Îoc
(
Objeù
* 
şassLßd”
, * 
mem
, 
size_t
 
ÃwSize
)

419 #ifdeà
DISABLE_LINEAR_ALLOC


420  
	`»®loc
(
mem
, 
ÃwSize
);

423 
	`as£¹
(
mem
 !ğ
NULL
);

424 
	`as£¹
(
mem
 >ğ(*è
	`g‘H—d”
(
şassLßd”
)->
m­Addr
 &&

425 
mem
 < (*è(
	`g‘H—d”
(
şassLßd”
)->
m­Addr
 +

426 
	`g‘H—d”
(
şassLßd”
)->
curOff£t
));

428 cÚ¡ 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

429 
	`ALOGV
("--- Lš—rR—Îoc(%dèŞd=%d", 
ÃwSize
, *
pL’
);

432 ià(*
pL’
 >ğ
ÃwSize
) {

433 ià(
ENFORCE_READ_ONLY
)

434 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

435  
mem
;

438 * 
ÃwMem
;

440 
ÃwMem
 = 
	`dvmLš—rAÎoc
(
şassLßd”
, 
ÃwSize
);

441 
	`as£¹
(
ÃwMem
 !ğ
NULL
);

442 
	`memıy
(
ÃwMem
, 
mem
, *
pL’
);

443 
	`dvmLš—rF»e
(
şassLßd”
, 
mem
);

445  
ÃwMem
;

446 
	}
}

452 
	$upd©ePages
(
Objeù
* 
şassLßd”
, * 
mem
, 
dœeùiÚ
)

454 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

455 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

458 
	`as£¹
(
mem
 >ğ(*è
pHdr
->
m­Addr
 &&

459 
mem
 < (*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
));

461 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

462 
u4
 
Ën
 = *
pL’
 & 
LENGTHFLAG_MASK
;

463 
fœ¡Page
, 
Ï¡Page
;

465 
fœ¡Page
 = ((
u1
*)
pL’
 - (u1*)
pHdr
->
m­Addr
è/ 
SYSTEM_PAGE_SIZE
;

466 
Ï¡Page
 = ((
u1
*)
mem
 - (u1*)
pHdr
->
m­Addr
 + (
Ën
-1)è/ 
SYSTEM_PAGE_SIZE
;

467 
	`LOGVV
("--- upd©šg…age %d-%d (%d)", 
fœ¡Page
, 
Ï¡Page
, 
dœeùiÚ
);

469 
i
, 
cc
;

476 
i
 = 
fœ¡Page
; i <ğ
Ï¡Page
; i++) {

477 ià(
dœeùiÚ
 < 0) {

481 ià(
i
 =ğ
fœ¡Page
) {

482 ià((*
pL’
 & 
LENGTHFLAG_RW
) == 0) {

483 
	`ALOGW
("DoubË RO oÀ%p", 
mem
);

484 
	`dvmAbÜt
();

486 *
pL’
 &ğ~
LENGTHFLAG_RW
;

489 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

490 
	`ALOGE
("Cª'ˆmak·g%d‡ny†es wr™abË", 
i
);

491 
	`dvmAbÜt
();

493 
pHdr
->
wr™eRefCouÁ
[
i
]--;

494 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

495 
	`LOGVV
("---…rÙ…ag%d RO", 
i
);

496 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
SYSTEM_PAGE_SIZE
 * 
i
,

497 
SYSTEM_PAGE_SIZE
, 
PROT_READ
);

498 
	`as£¹
(
cc
 == 0);

504 ià(
pHdr
->
wr™eRefCouÁ
[
i
] >= 32767) {

505 
	`ALOGE
("Cª'ˆmak·g%d‡ny mÜwr™abË", 
i
);

506 
	`dvmAbÜt
();

508 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

509 
	`LOGVV
("---…rÙ…ag%d RW", 
i
);

510 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
SYSTEM_PAGE_SIZE
 * 
i
,

511 
SYSTEM_PAGE_SIZE
, 
PROT_READ
 | 
PROT_WRITE
);

512 
	`as£¹
(
cc
 == 0);

514 
pHdr
->
wr™eRefCouÁ
[
i
]++;

516 ià(
i
 =ğ
fœ¡Page
) {

517 ià((*
pL’
 & 
LENGTHFLAG_RW
) != 0) {

518 
	`ALOGW
("DoubË RW oÀ%p", 
mem
);

519 
	`dvmAbÜt
();

521 *
pL’
 |ğ
LENGTHFLAG_RW
;

526 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

527 
	}
}

536 
	$dvmLš—rS‘R—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
)

538 #ifdeà
DISABLE_LINEAR_ALLOC


541 
	`upd©ePages
(
şassLßd”
, 
mem
, -1);

542 
	}
}

552 
	$dvmLš—rS‘R—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
)

554 #ifdeà
DISABLE_LINEAR_ALLOC


557 
	`upd©ePages
(
şassLßd”
, 
mem
, 1);

558 
	}
}

563 
	$dvmLš—rF»e
(
Objeù
* 
şassLßd”
, * 
mem
)

565 #ifdeà
DISABLE_LINEAR_ALLOC


566 
	`ä“
(
mem
);

569 ià(
mem
 =ğ
NULL
)

573 
	`as£¹
(
mem
 >ğ(*è
	`g‘H—d”
(
şassLßd”
)->
m­Addr
 &&

574 
mem
 < (*è(
	`g‘H—d”
(
şassLßd”
)->
m­Addr
 +

575 
	`g‘H—d”
(
şassLßd”
)->
curOff£t
));

577 ià(
ENFORCE_READ_ONLY
)

578 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

580 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

581 *
pL’
 |ğ
LENGTHFLAG_FREE
;

583 ià(
ENFORCE_READ_ONLY
)

584 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

585 
	}
}

593 
	$dvmLš—rAÎocDump
(
Objeù
* 
şassLßd”
)

595 #ifdeà
DISABLE_LINEAR_ALLOC


598 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

600 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

602 
	`ALOGI
("Lš—rAÎoøşassLßd”=%p", 
şassLßd”
);

603 
	`ALOGI
(" mapAddr=%p mapLength=%d firstOffset=%d",

604 
pHdr
->
m­Addr
,…Hdr->
m­L’gth
,…Hdr->
fœ¡Off£t
);

605 
	`ALOGI
(" curOff£t=%d", 
pHdr
->
curOff£t
);

607 
off
 = 
pHdr
->
fœ¡Off£t
;

608 
u4
 
¿wL’
, 
fuÎL’
;

610 
off
 < 
pHdr
->
curOff£t
) {

611 
¿wL’
 = *(
u4
*è(
pHdr
->
m­Addr
 + 
off
);

612 
fuÎL’
 = ((
HEADER_EXTRA
*2 + (
¿wL’
 & 
LENGTHFLAG_MASK
))

613 & ~(
BLOCK_ALIGN
-1));

615 
	`ALOGI
(" %°(%3d): %ş’=%d%s", 
pHdr
->
m­Addr
 + 
off
 + 
HEADER_EXTRA
,

616 (è((
off
 + 
HEADER_EXTRA
è/ 
SYSTEM_PAGE_SIZE
),

617 (
¿wL’
 & 
LENGTHFLAG_FREE
) != 0 ? '*' : ' ',

618 
¿wL’
 & 
LENGTHFLAG_MASK
,

619 (
¿wL’
 & 
LENGTHFLAG_RW
) != 0 ? " [RW]" : "");

621 
off
 +ğ
fuÎL’
;

624 ià(
ENFORCE_READ_ONLY
) {

625 
	`ALOGI
("writeRefCount map:");

627 
numPages
 = (
pHdr
->
m­L’gth
+
SYSTEM_PAGE_SIZE
-1) / SYSTEM_PAGE_SIZE;

628 
z¡¬t
 = 0;

629 
i
;

631 
i
 = 0; i < 
numPages
; i++) {

632 
couÁ
 = 
pHdr
->
wr™eRefCouÁ
[
i
];

634 ià(
couÁ
 != 0) {

635 ià(
z¡¬t
 < 
i
-1)

636 
	`´štf
(" %d-%d: z”o\n", 
z¡¬t
, 
i
-1);

637 ià(
z¡¬t
 =ğ
i
-1)

638 
	`´štf
(" %d: z”o\n", 
z¡¬t
);

639 
z¡¬t
 = 
i
+1;

640 
	`´štf
(" %d: %d\n", 
i
, 
couÁ
);

643 ià(
z¡¬t
 < 
i
)

644 
	`´štf
(" %d-%d: z”o\n", 
z¡¬t
, 
i
-1);

647 
	`ALOGD
("LinearAlloc %p using %d of %d (%d%%)",

648 
şassLßd”
, 
pHdr
->
curOff£t
,…Hdr->
m­L’gth
,

649 (
pHdr
->
curOff£t
 * 100è/…Hdr->
m­L’gth
);

651 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

652 
	}
}

660 
	$checkAÎF»e
(
Objeù
* 
şassLßd”
)

662 #ifdeà
DISABLE_LINEAR_ALLOC


665 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

667 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

669 
off
 = 
pHdr
->
fœ¡Off£t
;

670 
u4
 
¿wL’
, 
fuÎL’
;

672 
off
 < 
pHdr
->
curOff£t
) {

673 
¿wL’
 = *(
u4
*è(
pHdr
->
m­Addr
 + 
off
);

674 
fuÎL’
 = ((
HEADER_EXTRA
*2 + (
¿wL’
 & 
LENGTHFLAG_MASK
))

675 & ~(
BLOCK_ALIGN
-1));

677 ià((
¿wL’
 & 
LENGTHFLAG_FREE
) == 0) {

678 
	`ALOGW
("Lš—rAÎoø%°nÙ f»ed: %°Ën=%d", 
şassLßd”
,

679 
pHdr
->
m­Addr
 + 
off
 + 
HEADER_EXTRA
, 
¿wL’
 & 
LENGTHFLAG_MASK
);

682 
off
 +ğ
fuÎL’
;

685 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

686 
	}
}

695 
boŞ
 
	$dvmLš—rAÎocCÚšs
(cÚ¡ * 
¡¬t
, 
size_t
 
Ëngth
)

697 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
NULL
);

699 ià(
pHdr
 =ğ
NULL
)

700  
çl£
;

702  (*è
¡¬t
 >ğ
pHdr
->
m­Addr
 &&

703 ((*)
¡¬t
 + 
Ëngth
è<ğ(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
);

704 
	}
}

	@vm/LinearAlloc.h

19 #iâdeà
DALVIK_LINEARALLOC_H_


20 
	#DALVIK_LINEARALLOC_H_


	)

26 
	#ENFORCE_READ_ONLY
 
çl£


	)

33 
	sLš—rAÎocHdr
 {

34 
	mcurOff£t
;

35 
±h»ad_mu‹x_t
 
	mlock
;

37 * 
	mm­Addr
;

38 
	mm­L’gth
;

39 
	mfœ¡Off£t
;

41 * 
	mwr™eRefCouÁ
;

48 
Lš—rAÎocHdr
* 
dvmLš—rAÎocC»©e
(
Objeù
* 
şassLßd”
);

53 
dvmLš—rAÎocDe¡roy
(
Objeù
* 
şassLßd”
);

60 * 
dvmLš—rAÎoc
(
Objeù
* 
şassLßd”
, 
size_t
 
size
);

69 * 
dvmLš—rR—Îoc
(
Objeù
* 
şassLßd”
, * 
mem
, 
size_t
 
ÃwSize
);

72 
dvmLš—rS‘R—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
);

73 
dvmLš—rS‘R—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
);

80 
INLINE
 
	$dvmLš—rR—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
)

82 ià(
ENFORCE_READ_ONLY
 && 
mem
 !ğ
NULL
)

83 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

84 
	}
}

89 
INLINE
 
	$dvmLš—rR—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
)

91 ià(
ENFORCE_READ_ONLY
 && 
mem
 !ğ
NULL
)

92 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

93 
	}
}

99 
dvmLš—rF»e
(
Objeù
* 
şassLßd”
, * 
mem
);

107 * 
dvmLš—rSŒdup
(
Objeù
* 
şassLßd”
, cÚ¡ * 
¡r
);

112 
dvmLš—rAÎocDump
(
Objeù
* 
şassLßd”
);

118 
boŞ
 
dvmLš—rAÎocCÚšs
(cÚ¡ * 
¡¬t
, 
size_t
 
Ëngth
);

	@vm/Misc.cpp

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

23 
	~<¡ddef.h
>

24 
	~<¡ršg.h
>

25 
	~<¡ršgs.h
>

26 
	~<ùy³.h
>

27 
	~<time.h
>

28 
	~<sys/time.h
>

29 
	~<fú.h
>

30 
	~<cuts/ashmem.h
>

31 
	~<sys/mmª.h
>

47 
	$dvmPrštHexDumpEx
(
´iÜ™y
, cÚ¡ * 
g
, cÚ¡ * 
vaddr
,

48 
size_t
 
Ëngth
, 
HexDumpMode
 
mode
)

50 cÚ¡ 
gHexDig™
[] = "0123456789abcdef";

51 cÚ¡ * 
addr
 = (cÚ¡ *)
vaddr
;

52 
out
[77];

53 
off£t
;

54 * 
hex
;

55 * 
asc
;

56 
g­
;

59 ià(
mode
 =ğ
kHexDumpLoÿl
)

60 
off£t
 = 0;

62 
off£t
 = (è
addr
;

64 
	`mem£t
(
out
, ' ', (out)-1);

65 
out
[8] = ':';

66 
out
[(out)-2] = '\n';

67 
out
[(out)-1] = '\0';

69 
g­
 = (è
off£t
 & 0x0f;

70 
Ëngth
) {

71 
lšeOff£t
 = 
off£t
 & ~0x0f;

72 
i
, 
couÁ
;

74 
hex
 = 
out
;

75 
asc
 = 
out
 + 59;

77 
i
 = 0; i < 8; i++) {

78 *
hex
++ = 
gHexDig™
[
lšeOff£t
 >> 28];

79 
lšeOff£t
 <<= 4;

81 
hex
++;

82 
hex
++;

84 
couÁ
 = (()
Ëngth
 > 16-
g­
) ? 16-gap : ()length;

85 
	`as£¹
(
couÁ
 != 0);

86 
	`as£¹
(
couÁ
+
g­
 <= 16);

88 ià(
g­
) {

90 
hex
 +ğ
g­
 * 3;

91 
asc
 +ğ
g­
;

94 
i
 = 
g­
 ; i < 
couÁ
+gap; i++) {

95 *
hex
++ = 
gHexDig™
[*
addr
 >> 4];

96 *
hex
++ = 
gHexDig™
[*
addr
 & 0x0f];

97 
hex
++;

98 ià(*
addr
 >= 0x20 && *addr < 0x7f )

99 *
asc
++ = *
addr
;

101 *
asc
++ = '.';

102 
addr
++;

104  ; 
i
 < 16; i++) {

106 *
hex
++ = ' ';

107 *
hex
++ = ' ';

108 
hex
++;

109 *
asc
++ = ' ';

112 
	`LOG_PRI
(
´iÜ™y
, 
g
, "%s", 
out
);

120 ià(
ŒickË
++ == 8) {

121 
ŒickË
 = 0;

122 
	`u¦“p
(20000);

127 
g­
 = 0;

128 
Ëngth
 -ğ
couÁ
;

129 
off£t
 +ğ
couÁ
;

131 
	}
}

137 
	$dvmC»©eLogOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
´iÜ™y
,

138 cÚ¡ * 
g
)

140 
	`as£¹
(
rg‘
 !ğ
NULL
);

141 
	`as£¹
(
g
 !ğ
NULL
);

143 
rg‘
->
which
 = 
kDebugT¬g‘Log
;

144 
rg‘
->
d©a
.
log
.
´iÜ™y
 =…riority;

145 
rg‘
->
d©a
.
log
.
g
 =ag;

146 
	}
}

151 
	$dvmC»©eFeOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
FILE
* 
å
)

153 
	`as£¹
(
rg‘
 !ğ
NULL
);

154 
	`as£¹
(
å
 !ğ
NULL
);

156 
rg‘
->
which
 = 
kDebugT¬g‘Fe
;

157 
rg‘
->
d©a
.
fe
.
å
 = fp;

158 
	}
}

163 
	$dvmF»eOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
)

165 
	`ä“
(
rg‘
);

166 
	}
}

171 
	$dvmPrštDebugMes§ge
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, cÚ¡ * 
fÜm©
,

174 
va_li¡
 
¬gs
;

176 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

178 
rg‘
->
which
) {

179 
kDebugT¬g‘Log
:

180 
	`LOG_PRI_VA
(
rg‘
->
d©a
.
log
.
´iÜ™y
,¬g‘->d©a.log.
g
,

181 
fÜm©
, 
¬gs
);

183 
kDebugT¬g‘Fe
:

184 
	`vårštf
(
rg‘
->
d©a
.
fe
.
å
, 
fÜm©
, 
¬gs
);

187 
	`ALOGE
("uÃx³ùed 'which' %d", 
rg‘
->
which
);

191 
	`va_’d
(
¬gs
);

192 
	}
}

200 * 
	$dvmDÙToSÏsh
(cÚ¡ * 
¡r
)

202 * 
ÃwSŒ
 = 
	`¡rdup
(
¡r
);

203 * 
ı
 = 
ÃwSŒ
;

205 ià(
ÃwSŒ
 =ğ
NULL
)

206  
NULL
;

208 *
ı
 != '\0') {

209 ià(*
ı
 == '/') {

210 
	`as£¹
(
çl£
);

211  
NULL
;

213 ià(*
ı
 == '.')

214 *
ı
 = '/';

215 
ı
++;

218  
ÃwSŒ
;

219 
	}
}

221 
	g¡d
::
¡ršg
 
	$dvmHumªR—dabËDesütÜ
(cÚ¡ * 
desütÜ
) {

223 cÚ¡ * 
c
 = 
desütÜ
;

224 
size_t
 
dim
 = 0;

225 *
c
 == '[') {

226 
dim
++;

227 
c
++;

231 ià(*
c
 == 'L') {

233 
c
++;

238 *
c
) {

239 'B': 
c
 = "byte;"; ;

240 'C': 
c
 = "char;"; ;

241 'D': 
c
 = "double;"; ;

242 'F': 
c
 = "float;"; ;

243 'I': 
c
 = "int;"; ;

244 'J': 
c
 = "long;"; ;

245 'S': 
c
 = "short;"; ;

246 'Z': 
c
 = "boolean;"; ;

247 :  
desütÜ
;

253 
¡d
::
¡ršg
 
»suÉ
;

254 cÚ¡ * 
p
 = 
c
;

255 *
p
 != ';') {

256 
ch
 = *
p
++;

257 ià(
ch
 == '/') {

258 
ch
 = '.';

260 
»suÉ
.
	`push_back
(
ch
);

263 
dim
--) {

264 
»suÉ
 += "[]";

266  
»suÉ
;

267 
	}
}

269 
	g¡d
::
¡ršg
 
	$dvmHumªR—dabËTy³
(cÚ¡ 
Objeù
* 
obj
)

271 ià(
obj
 =ğ
NULL
) {

274 ià(
obj
->
şazz
 =ğ
NULL
) {

278 
¡d
::
¡ršg
 
	`»suÉ
(
	`dvmHumªR—dabËDesütÜ
(
obj
->
şazz
->
desütÜ
));

279 ià(
	`dvmIsCÏssObjeù
(
obj
)) {

280 cÚ¡ 
CÏssObjeù
* 
şazz
 = 
»š‹½»t_ÿ¡
<cÚ¡ CÏssObjeù*>(
obj
);

281 
»suÉ
 +ğ"<" + 
	`dvmHumªR—dabËDesütÜ
(
şazz
->
desütÜ
) + ">";

283  
»suÉ
;

284 
	}
}

286 
	g¡d
::
¡ršg
 
	$dvmHumªR—dabËF›ld
(cÚ¡ 
F›ld
* 
f›ld
)

288 ià(
f›ld
 =ğ
NULL
) {

291 
¡d
::
¡ršg
 
	`»suÉ
(
	`dvmHumªR—dabËDesütÜ
(
f›ld
->
şazz
->
desütÜ
));

292 
»suÉ
 += '.';

293 
»suÉ
 +ğ
f›ld
->
Çme
;

294  
»suÉ
;

295 
	}
}

297 
	g¡d
::
¡ršg
 
	$dvmHumªR—dabËM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
, 
boŞ
 
w™hSigÇtu»
)

299 ià(
m‘hod
 =ğ
NULL
) {

302 
¡d
::
¡ršg
 
	`»suÉ
(
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
));

303 
»suÉ
 += '.';

304 
»suÉ
 +ğ
m‘hod
->
Çme
;

305 ià(
w™hSigÇtu»
) {

307 * 
sigÇtu»
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

308 
»suÉ
 +ğ
sigÇtu»
;

309 
	`ä“
(
sigÇtu»
);

311  
»suÉ
;

312 
	}
}

323 * 
	$dvmDesütÜToDÙ
(cÚ¡ * 
¡r
)

325 
size_t
 
©
 = 
	`¡¾’
(
¡r
);

326 * 
ÃwSŒ
;

328 ià((
©
 >ğ2è&& (
¡r
[0] == 'L') && (str[at - 1] == ';')) {

329 
©
 -= 2;

330 
¡r
++;

333 
ÃwSŒ
 = (*)
	`m®loc
(
©
 + 1);

334 ià(
ÃwSŒ
 =ğ
NULL
)

335  
NULL
;

337 
ÃwSŒ
[
©
] = '\0';

339 
©
 > 0) {

340 
©
--;

341 
ÃwSŒ
[
©
] = (
¡r
[at] == '/') ? '.' : str[at];

344  
ÃwSŒ
;

345 
	}
}

355 * 
	$dvmDÙToDesütÜ
(cÚ¡ * 
¡r
)

357 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
);

358 
w¿pElSemi
 = 0;

359 * 
ÃwSŒ
;

360 * 
©
;

362 ià(
¡r
[0] != '[') {

363 
Ëngth
 += 2;

364 
w¿pElSemi
 = 1;

367 
ÃwSŒ
 = 
©
 = (*)
	`m®loc
(
Ëngth
 + 1);

369 ià(
ÃwSŒ
 =ğ
NULL
) {

370  
NULL
;

373 ià(
w¿pElSemi
) {

374 *(
©
++) = 'L';

377 *
¡r
) {

378 
c
 = *(
¡r
++);

379 ià(
c
 == '.') {

380 
c
 = '/';

382 *(
©
++èğ
c
;

385 ià(
w¿pElSemi
) {

386 *(
©
++) = ';';

389 *
©
 = '\0';

390  
ÃwSŒ
;

391 
	}
}

398 * 
	$dvmDesütÜToName
(cÚ¡ * 
¡r
)

400 ià(
¡r
[0] == 'L') {

401 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
) - 1;

402 * 
ÃwSŒ
 = (*)
	`m®loc
(
Ëngth
);

404 ià(
ÃwSŒ
 =ğ
NULL
) {

405  
NULL
;

408 
	`¡¾ıy
(
ÃwSŒ
, 
¡r
 + 1, 
Ëngth
);

409  
ÃwSŒ
;

412  
	`¡rdup
(
¡r
);

413 
	}
}

420 * 
	$dvmNameToDesütÜ
(cÚ¡ * 
¡r
)

422 ià(
¡r
[0] != '[') {

423 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
);

424 * 
desütÜ
 = (*)
	`m®loc
(
Ëngth
 + 3);

426 ià(
desütÜ
 =ğ
NULL
) {

427  
NULL
;

430 
desütÜ
[0] = 'L';

431 
	`¡rıy
(
desütÜ
 + 1, 
¡r
);

432 
desütÜ
[
Ëngth
 + 1] = ';';

433 
desütÜ
[
Ëngth
 + 2] = '\0';

435  
desütÜ
;

438  
	`¡rdup
(
¡r
);

439 
	}
}

446 
u8
 
	$dvmG‘R–©iveTimeN£c
()

448 #ifdeà
HAVE_POSIX_CLOCKS


449 
time¥ec
 
now
;

450 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

451  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

453 
timev®
 
now
;

454 
	`g‘timeofday
(&
now
, 
NULL
);

455  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_u£c
 * 1000LL;

457 
	}
}

464 
u8
 
	$dvmG‘Th»adCpuTimeN£c
()

466 #ifdeà
HAVE_POSIX_CLOCKS


467 
time¥ec
 
now
;

468 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
now
);

469  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

471  (
u8
) -1;

473 
	}
}

478 
u8
 
	$dvmG‘Oth”Th»adCpuTimeN£c
(
±h»ad_t
 
th»ad
)

481 
şockId
;

483 ià(
	`±h»ad_g‘ıuşockid
(
th»ad
, &
şockId
) != 0)

484  (
u8
) -1;

486 
time¥ec
 
now
;

487 
	`şock_g‘time
(
şockId
, &
now
);

488  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

490  (
u8
) -1;

492 
	}
}

513 
boŞ
 
	$dvmI‹¿tiveSË•
(
™”©iÚ
, 
maxTÙ®SË•
, 
u8
 
»lS¹Time
)

515 cÚ¡ 
mšSË•
 = 10000;

516 
u8
 
curTime
;

517 
curD–ay
;

522 
curTime
 = 
	`dvmG‘R–©iveTimeU£c
();

523 ià(
curTime
 >ğ
»lS¹Time
 + 
maxTÙ®SË•
) {

524 
	`LOGVV
("exsl: sleepƒxceeded (start=%llu max=%d‚ow=%llu)",

525 
»lS¹Time
, 
maxTÙ®SË•
, 
curTime
);

526  
çl£
;

537 
curD–ay
 = 
mšSË•
;

538 
™”©iÚ
-- > 0)

539 
curD–ay
 *= 2;

540 
	`as£¹
(
curD–ay
 > 0);

542 ià(
curTime
 + 
curD–ay
 >ğ
»lS¹Time
 + 
maxTÙ®SË•
) {

543 
	`LOGVV
("exsl:„educed delay from %do %d",

544 
curD–ay
, (è((
»lS¹Time
 + 
maxTÙ®SË•
è- 
curTime
));

545 
curD–ay
 = (è((
»lS¹Time
 + 
maxTÙ®SË•
è- 
curTime
);

548 ià(
™”©iÚ
 == 0) {

549 
	`LOGVV
("exsl: yield");

550 
	`sched_y›ld
();

552 
	`LOGVV
("ex¦: sË• fÜ %d", 
curD–ay
);

553 
	`u¦“p
(
curD–ay
);

555  
Œue
;

556 
	}
}

563 
boŞ
 
	$dvmS‘Clo£OnExec
(
fd
)

565 
æags
;

571 
æags
 = 
	`fú
(
fd
, 
F_GETFD
);

572 ià(
æags
 < 0) {

573 
	`ALOGW
("UÇbËØg‘ fd fÏg fÜ fd %d", 
fd
);

574  
çl£
;

576 ià(
	`fú
(
fd
, 
F_SETFD
, 
æags
 | 
FD_CLOEXEC
) < 0) {

577 
	`ALOGW
("UÇbËØ£ˆşo£-Ú-exeøfÜ fd %d", 
fd
);

578  
çl£
;

580  
Œue
;

581 
	}
}

583 #ià(!
HAVE_STRLCPY
)

585 
size_t
 
	$¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, 
size_t
 
size
) {

586 
size_t
 
¤cL’gth
 = 
	`¡¾’
(
¤c
);

587 
size_t
 
cİyL’gth
 = 
¤cL’gth
;

589 ià(
¤cL’gth
 > (
size
 - 1)) {

590 
cİyL’gth
 = 
size
 - 1;

593 ià(
size
 != 0) {

594 
	`¡ºıy
(
d¡
, 
¤c
, 
cİyL’gth
);

595 
d¡
[
cİyL’gth
] = '\0';

598  
¤cL’gth
;

599 
	}
}

607 *
	$dvmAÎocRegiÚ
(
size_t
 
by‹CouÁ
, 
´Ù
, cÚ¡ *
Çme
) {

608 *
ba£
;

609 
fd
, 
»t
;

611 
by‹CouÁ
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(byteCount);

612 
fd
 = 
	`ashmem_ü—‹_»giÚ
(
Çme
, 
by‹CouÁ
);

613 ià(
fd
 == -1) {

614  
NULL
;

616 
ba£
 = 
	`mm­
(
NULL
, 
by‹CouÁ
, 
´Ù
, 
MAP_PRIVATE
, 
fd
, 0);

617 
»t
 = 
	`şo£
(
fd
);

618 ià(
ba£
 =ğ
MAP_FAILED
) {

619  
NULL
;

621 ià(
»t
 == -1) {

622  
NULL
;

624  
ba£
;

625 
	}
}

633 
boŞ
 
	$dvmG‘Th»adSts
(
ProcStD©a
* 
pD©a
, 
pid_t
 
tid
)

663 
ÇmeBuf
[64];

664 
i
, 
fd
;

670 
	`¥rštf
(
ÇmeBuf
, "/´oc/£lf/sk/%d/¡©", (è
tid
);

671 
fd
 = 
	`İ’
(
ÇmeBuf
, 
O_RDONLY
);

672 ià(
fd
 < 0) {

673 
	`ALOGV
("UÇbËØİ’ '%s': %s", 
ÇmeBuf
, 
	`¡»¼Ü
(
”ºo
));

674  
çl£
;

677 
lšeBuf
[512];

678 
cc
 = 
	`»ad
(
fd
, 
lšeBuf
, (lineBuf)-1);

679 ià(
cc
 <= 0) {

680 cÚ¡ * 
msg
 = (
cc
 =ğ0è? "uÃx³ùed EOF" : 
	`¡»¼Ü
(
”ºo
);

681 
	`ALOGI
("UÇbËØ»ad '%s': %s", 
ÇmeBuf
, 
msg
);

682 
	`şo£
(
fd
);

683  
çl£
;

685 
	`şo£
(
fd
);

686 
lšeBuf
[
cc
] = '\0';

694 * 
ı
 = 
	`¡rchr
(
lšeBuf
, ')');

695 ià(
ı
 =ğ
NULL
)

696 
·r£_ç
;

697 
ı
++;

698 
i
 = 2; i < 13; i++) {

699 
ı
 = 
	`¡rchr
(cp+1, ' ');

700 ià(
ı
 =ğ
NULL
)

701 
·r£_ç
;

707 * 
’dp
;

708 
pD©a
->
utime
 = 
	`¡¹oul
(
ı
+1, &
’dp
, 10);

709 ià(
’dp
 =ğ
ı
+1)

710 
	`ALOGI
("W¬nšg: sŒtouÈçed oÀutim('%.30s...')", 
ı
);

712 
ı
 = 
	`¡rchr
(cp+1, ' ');

713 ià(
ı
 =ğ
NULL
)

714 
·r£_ç
;

716 
pD©a
->
¡ime
 = 
	`¡¹oul
(
ı
+1, &
’dp
, 10);

717 ià(
’dp
 =ğ
ı
+1)

718 
	`ALOGI
("W¬nšg: sŒtouÈçed oÀ¡im('%.30s...')", 
ı
);

723 
i
 = 14; i < 38; i++) {

724 
ı
 = 
	`¡rchr
(cp+1, ' ');

725 ià(
ı
 =ğ
NULL
)

726 
·r£_ç
;

732 
pD©a
->
´oûssÜ
 = 
	`¡¹Ş
(
ı
+1, &
’dp
, 10);

733 ià(
’dp
 =ğ
ı
+1)

734 
	`ALOGI
("W¬nšg: sŒtouÈçed oÀ´oûssÜ ('%.30s...')", 
ı
);

736  
Œue
;

738 
·r£_ç
:

739 
	`ALOGI
("¡©…¬£ faed (%s)", 
lšeBuf
);

740  
çl£
;

741 
	}
}

744 cÚ¡ * 
	$dvmP©hToAbsŞu‹PÜtiÚ
(cÚ¡ * 
·th
) {

745 ià(
·th
 =ğ
NULL
) {

746  
NULL
;

749 ià(
·th
[0] == '/') {

751  
·th
;

754 cÚ¡ * 
£Áš–
 = 
	`¡r¡r
(
·th
, "/./");

756 ià(
£Áš–
 !ğ
NULL
) {

758  
£Áš–
 + 2;

761  
NULL
;

762 
	}
}

765 
SŒšgAµ’dV
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ * 
fÜm©
, 
va_li¡
 
­
) {

767 
	g¥aû
[1024];

772 
va_li¡
 
	gbackup_­
;

773 
va_cİy
(
backup_­
, 
­
);

774 
	g»suÉ
 = 
v¢´štf
(
¥aû
, (¥aû), 
fÜm©
, 
backup_­
);

775 
va_’d
(
backup_­
);

777 ià((
	g»suÉ
 >ğ0è&& ((
size_t
è
»suÉ
 < (
¥aû
))) {

779 
d¡
->
­³nd
(
¥aû
, 
»suÉ
);

784 
	gËngth
 = (
¥aû
);

785 
	gŒue
) {

786 ià(
	g»suÉ
 < 0) {

788 
	gËngth
 *= 2;

791 
	gËngth
 = 
»suÉ
+1;

793 * 
	gbuf
 = 
Ãw
 [
Ëngth
];

796 
va_cİy
(
backup_­
, 
­
);

797 
	g»suÉ
 = 
v¢´štf
(
buf
, 
Ëngth
, 
fÜm©
, 
backup_­
);

798 
va_’d
(
backup_­
);

800 ià((
	g»suÉ
 >ğ0è&& (
»suÉ
 < 
Ëngth
)) {

802 
d¡
->
­³nd
(
buf
, 
»suÉ
);

803 
	gd–‘e
[] 
	gbuf
;

806 
	gd–‘e
[] 
	gbuf
;

810 
	g¡d
::
¡ršg
 
	$SŒšgPrštf
(cÚ¡ * 
fmt
, ...) {

811 
va_li¡
 
­
;

812 
	`va_¡¬t
(
­
, 
fmt
);

813 
¡d
::
¡ršg
 
»suÉ
;

814 
	`SŒšgAµ’dV
(&
»suÉ
, 
fmt
, 
­
);

815 
	`va_’d
(
­
);

816  
»suÉ
;

817 
	}
}

819 
SŒšgAµ’dF
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ * 
fÜm©
, ...) {

820 
va_li¡
 
	g­
;

821 
va_¡¬t
(
­
, 
fÜm©
);

822 
SŒšgAµ’dV
(
d¡
, 
fÜm©
, 
­
);

823 
va_’d
(
­
);

	@vm/Misc.h

20 #iâdeà
DALVIK_MISC_H_


21 
	#DALVIK_MISC_H_


	)

23 
	~<¡ršg
>

25 
	~<¡d¬g.h
>

26 
	~<¡dio.h
>

27 
	~<sys/ty³s.h
>

28 
	~<sys/time.h
>

30 
	~"IÆšes.h
"

35 
	#UNUSED_PARAMETER
(
p
è()Õ)

	)

48 
INLINE
 
	$dvmU4ToFlßt
(
u4
 
v®
) {

49 uniÚ { 
u4
 
š
; 
out
; } 
cÚv
;

50 
cÚv
.
š
 = 
v®
;

51  
cÚv
.
out
;

52 
	}
}

53 
INLINE
 
u4
 
	$dvmFlßtToU4
(
v®
) {

54 uniÚ { 
š
; 
u4
 
out
; } 
cÚv
;

55 
cÚv
.
š
 = 
v®
;

56  
cÚv
.
out
;

57 
	}
}

70 
	eHexDumpMode
 { 
	mkHexDumpLoÿl
, 
	mkHexDumpMem
 };

71 
dvmPrštHexDumpEx
(
´iÜ™y
, cÚ¡ * 
g
, cÚ¡ * 
vaddr
,

72 
size_t
 
Ëngth
, 
HexDumpMode
 
mode
);

77 
INLINE
 
	$dvmPrštHexDump
(cÚ¡ * 
vaddr
, 
size_t
 
Ëngth
) {

78 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

79 
vaddr
, 
Ëngth
, 
kHexDumpLoÿl
);

80 
	}
}

85 
INLINE
 
	$dvmPrštHexDumpDbg
(cÚ¡ * 
vaddr
, 
size_t
 
Ëngth
,cÚ¡ * 
g
)

87 #ià!
LOG_NDEBUG


88 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_VERBOSE
, (
g
 !ğ
NULL
è?ag : 
LOG_TAG
,

89 
vaddr
, 
Ëngth
, 
kHexDumpLoÿl
);

91 
	}
}

93 
	eDebugT¬g‘Kšd
 {

94 
	mkDebugT¬g‘Unknown
 = 0,

95 
	mkDebugT¬g‘Log
,

96 
	mkDebugT¬g‘Fe
,

103 
	sDebugOuutT¬g‘
 {

105 
DebugT¬g‘Kšd
 
	mwhich
;

110 
	m´iÜ™y
;

111 cÚ¡ * 
	mg
;

112 } 
	mlog
;

114 
FILE
* 
	må
;

115 } 
	mfe
;

116 } 
	md©a
;

122 
dvmC»©eLogOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
´iÜ™y
,

123 cÚ¡ * 
g
);

124 
dvmC»©eFeOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
FILE
* 
å
);

129 
	$dvmPrštDebugMes§ge
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, cÚ¡ * 
fÜm©
,

131 #ià
	`defšed
(
__GNUC__
)

132 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

141 * 
	`dvmDÙToSÏsh
(cÚ¡ * 
¡r
);

148 
¡d
::
¡ršg
 
	`dvmHumªR—dabËDesütÜ
(cÚ¡ * 
desütÜ
);

156 
¡d
::
¡ršg
 
	`dvmHumªR—dabËTy³
(cÚ¡ 
Objeù
* 
obj
);

161 
F›ld
;

162 
¡d
::
¡ršg
 
	`dvmHumªR—dabËF›ld
(cÚ¡ 
F›ld
* 
f›ld
);

168 
M‘hod
;

169 
¡d
::
¡ršg
 
	`dvmHumªR—dabËM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
, 
boŞ
 
w™hSigÇtu»
);

180 * 
	`dvmDesütÜToDÙ
(cÚ¡ * 
¡r
);

190 * 
	`dvmDÙToDesütÜ
(cÚ¡ * 
¡r
);

197 * 
	`dvmDesütÜToName
(cÚ¡ * 
¡r
);

204 * 
	`dvmNameToDesütÜ
(cÚ¡ * 
¡r
);

211 
u8
 
	`dvmG‘R–©iveTimeN£c
();

218 
INLINE
 
u8
 
	$dvmG‘R–©iveTimeU£c
() {

219  
	`dvmG‘R–©iveTimeN£c
() / 1000;

220 
	}
}

230 
INLINE
 
u4
 
	$dvmG‘R–©iveTimeM£c
() {

231  (
u4
)(
	`dvmG‘R–©iveTimeU£c
() / 1000);

232 
	}
}

244 
u8
 
dvmG‘Th»adCpuTimeN£c
();

249 
INLINE
 
u8
 
	$dvmG‘Th»adCpuTimeU£c
() {

250  
	`dvmG‘Th»adCpuTimeN£c
() / 1000;

251 
	}
}

256 
u8
 
dvmG‘Oth”Th»adCpuTimeN£c
(
±h»ad_t
 
th»ad
);

257 
INLINE
 
u8
 
	$dvmG‘Oth”Th»adCpuTimeU£c
(
±h»ad_t
 
th»ad
) {

258  
	`dvmG‘Oth”Th»adCpuTimeN£c
(
th»ad
) / 1000;

259 
	}
}

268 
boŞ
 
dvmI‹¿tiveSË•
(
™”©iÚ
, 
maxTÙ®SË•
, 
u8
 
»lS¹Time
);

273 
boŞ
 
dvmS‘Clo£OnExec
(
fd
);

284 "C" 
dvmAbÜt
();

285 
dvmPrštN©iveBackT¿û
();

287 #ià(!
HAVE_STRLCPY
)

289 "C" 
size_t
 
¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
size
);

297 *
dvmAÎocRegiÚ
(
size_t
 
size
, 
´Ù
, cÚ¡ *
Çme
);

302 
	sProcStD©a
 {

303 
	mutime
;

304 
	m¡ime
;

305 
	m´oûssÜ
;

307 
boŞ
 
dvmG‘Th»adSts
(
ProcStD©a
* 
pD©a
, 
pid_t
 
tid
);

326 cÚ¡ * 
dvmP©hToAbsŞu‹PÜtiÚ
(cÚ¡ * 
·th
);

331 
	g¡d
::
¡ršg
 
	$SŒšgPrštf
(cÚ¡ * 
fmt
, ...)

332 
	`__©Œibu‹__
((
	`__fÜm©__
 (
__´štf__
, 1, 2)));

337 
	`SŒšgAµ’dF
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ * 
fmt
, ...)

338 
	`__©Œibu‹__
((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

343 
	`SŒšgAµ’dV
(
¡d
::
¡ršg
* 
d¡
, cÚ¡ * 
fÜm©
, 
va_li¡
 
­
);

	@vm/Native.cpp

24 
	~"D®vik.h
"

26 
	~<¡dlib.h
>

27 
	~<dlfú.h
>

29 
ä“Sh¬edLibEÁry
(* 
±r
);

30 * 
lookupSh¬edLibM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
);

36 
boŞ
 
	$dvmN©iveS¹up
()

38 
gDvm
.
ÇtiveLibs
 = 
	`dvmHashTabËC»©e
(4, 
ä“Sh¬edLibEÁry
);

39 ià(
gDvm
.
ÇtiveLibs
 =ğ
NULL
)

40  
çl£
;

42  
Œue
;

43 
	}
}

48 
	$dvmN©iveShutdown
()

50 
	`dvmHashTabËF»e
(
gDvm
.
ÇtiveLibs
);

51 
gDvm
.
ÇtiveLibs
 = 
NULL
;

52 
	}
}

70 
	$dvmResŞveN©iveM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

71 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

73 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

79 ià(
	`dvmIsSticM‘hod
(
m‘hod
)) {

80 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

81 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

85 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
şazz
) ||

86 
	`dvmIsCÏssIn™Ÿlizšg
(
şazz
));

90 
D®vikN©iveFunc
 
šfunc
 = 
	`dvmLookupIÁ”ÇlN©iveM‘hod
(
m‘hod
);

91 ià(
šfunc
 !ğ
NULL
) {

93 
	`IF_LOGVV
() {

94 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

95 
	`LOGVV
("+++„esolved‚ative %s.%s %s, invoking",

96 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

97 
	`ä“
(
desc
);

99 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
)) {

100 
	`ALOGE
("ERROR: internal-native can't be declared 'synchronized'");

101 
	`ALOGE
("Fašg oÀ%s.%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

102 
	`dvmAbÜt
();

104 
D®vikBridgeFunc
 
dfunc
 = (D®vikBridgeFuncè
šfunc
;

105 
	`dvmS‘N©iveFunc
((
M‘hod
*è
m‘hod
, 
dfunc
, 
NULL
);

106 
	`dfunc
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

111 * 
func
 = 
	`lookupSh¬edLibM‘hod
(
m‘hod
);

112 ià(
func
 !ğ
NULL
) {

114 
	`dvmU£JNIBridge
((
M‘hod
*è
m‘hod
, 
func
);

115 (*
m‘hod
->
ÇtiveFunc
)(
¬gs
, 
pResuÉ
, m‘hod, 
£lf
);

119 
	`IF_ALOGW
() {

120 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

121 
	`ALOGW
("No implementation found for‚ative %s.%s:%s",

122 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

123 
	`ä“
(
desc
);

126 
	`dvmThrowUn§tisf›dLškE¼Ü
("N©ivm‘hod‚Ù found", 
m‘hod
);

127 
	}
}

140 
	eOnLßdS‹
 {

141 
	mkOnLßdP’dšg
 = 0,

142 
	mkOnLßdFaed
,

143 
	mkOnLßdOkay
,

150 
	sSh¬edLib
 {

151 * 
	m·thName
;

152 * 
	mhªdË
;

153 
Objeù
* 
	mşassLßd”
;

155 
±h»ad_mu‹x_t
 
	mÚLßdLock
;

156 
±h»ad_cÚd_t
 
	mÚLßdCÚd
;

157 
u4
 
	mÚLßdTh»adId
;

158 
OnLßdS‹
 
	mÚLßdResuÉ
;

166 
	$hashcmpNameSŒ
(cÚ¡ * 
v’Œy
, cÚ¡ * 
vÇme
)

168 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
v’Œy
;

169 cÚ¡ * 
Çme
 = (cÚ¡ *è
vÇme
;

171  
	`¡rcmp
(
pLib
->
·thName
, 
Çme
);

172 
	}
}

182 
	$hashcmpSh¬edLib
(cÚ¡ * 
v’Œy
, cÚ¡ * 
vÃwEÁry
)

184 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
v’Œy
;

185 cÚ¡ 
Sh¬edLib
* 
pNewLib
 = (cÚ¡ Sh¬edLib*è
vÃwEÁry
;

187 
	`ALOGD
("--- comparing %p '%s' %p '%s'",

188 
pLib
,…Lib->
·thName
, 
pNewLib
,…NewLib->pathName);

189  
	`¡rcmp
(
pLib
->
·thName
, 
pNewLib
->pathName);

190 
	}
}

195 
Sh¬edLib
* 
	$fšdSh¬edLibEÁry
(cÚ¡ * 
·thName
)

197 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
·thName
);

198 * 
’t
;

200 
’t
 = 
	`dvmHashTabËLookup
(
gDvm
.
ÇtiveLibs
, 
hash
, (*)
·thName
,

201 
hashcmpNameSŒ
, 
çl£
);

202  (
Sh¬edLib
*)
’t
;

203 
	}
}

211 
Sh¬edLib
* 
	$addSh¬edLibEÁry
(
Sh¬edLib
* 
pLib
)

213 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
pLib
->
·thName
);

220  (
Sh¬edLib
*)
	`dvmHashTabËLookup
(
gDvm
.
ÇtiveLibs
, 
hash
, 
pLib
,

221 
hashcmpSh¬edLib
, 
Œue
);

222 
	}
}

227 
	$ä“Sh¬edLibEÁry
(* 
±r
)

229 
Sh¬edLib
* 
pLib
 = (Sh¬edLib*è
±r
;

235 ià(
çl£
)

236 
	`dlşo£
(
pLib
->
hªdË
);

237 
	`ä“
(
pLib
->
·thName
);

238 
	`ä“
(
pLib
);

239 
	}
}

248 * 
	$dvmC»©eSy¡emLib¿ryName
(* 
libName
)

250 
buf
[256];

251 
Ën
;

253 
Ën
 = 
	`¢´štf
(
buf
, (buf), 
OS_SHARED_LIB_FORMAT_STR
, 
libName
);

254 ià(
Ën
 >ğ(è(
buf
))

255  
NULL
;

257  
	`¡rdup
(
buf
);

258 
	}
}

264 
boŞ
 
	$checkOnLßdResuÉ
(
Sh¬edLib
* 
pEÁry
)

266 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

267 ià(
pEÁry
->
ÚLßdTh»adId
 =ğ
£lf
->
th»adId
) {

272 
	`ALOGI
("threadid=%d:„ecursive‚ative†ibrary†oad‡ttempt (%s)",

273 
£lf
->
th»adId
, 
pEÁry
->
·thName
);

274  
Œue
;

277 
	`ALOGV
("+++„‘r›všg % OnLßd stus", 
pEÁry
->
·thName
);

278 
boŞ
 
»suÉ
;

280 
	`dvmLockMu‹x
(&
pEÁry
->
ÚLßdLock
);

281 
pEÁry
->
ÚLßdResuÉ
 =ğ
kOnLßdP’dšg
) {

282 
	`ALOGD
("threadid=%d: waiting for %s OnLoad status",

283 
£lf
->
th»adId
, 
pEÁry
->
·thName
);

284 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

285 
	`±h»ad_cÚd_wa™
(&
pEÁry
->
ÚLßdCÚd
, &pEÁry->
ÚLßdLock
);

286 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

288 ià(
pEÁry
->
ÚLßdResuÉ
 =ğ
kOnLßdOkay
) {

289 
	`ALOGV
("+++ƒ¬l›¸OnLßd(%sèokay", 
pEÁry
->
·thName
);

290 
»suÉ
 = 
Œue
;

292 
	`ALOGV
("+++ƒ¬l›¸OnLßd(%sèçed", 
pEÁry
->
·thName
);

293 
»suÉ
 = 
çl£
;

295 
	`dvmUÆockMu‹x
(&
pEÁry
->
ÚLßdLock
);

296  
»suÉ
;

297 
	}
}

299 (*
	tOnLßdFunc
)(
	tJavaVM
*, *);

318 
boŞ
 
	$dvmLßdN©iveCode
(cÚ¡ * 
·thName
, 
Objeù
* 
şassLßd”
,

319 ** 
d‘a
)

321 
Sh¬edLib
* 
pEÁry
;

322 * 
hªdË
;

323 
boŞ
 
v”bo£
;

326 
v”bo£
 = !!
	`¡ºcmp
(
·thName
, "/system", ("/system")-1);

327 
v”bo£
 = v”bo£ && !!
	`¡ºcmp
(
·thName
, "/vendor", ("/vendor")-1);

329 ià(
v”bo£
)

330 
	`ALOGD
("TryšgØlßd†ib % %p", 
·thName
, 
şassLßd”
);

332 *
d‘a
 = 
NULL
;

338 
pEÁry
 = 
	`fšdSh¬edLibEÁry
(
·thName
);

339 ià(
pEÁry
 !ğ
NULL
) {

340 ià(
pEÁry
->
şassLßd”
 != classLoader) {

341 
	`ALOGW
("Shared†ib '%s'‡lready opened by CL %p; can't open in %p",

342 
·thName
, 
pEÁry
->
şassLßd”
, classLoader);

343  
çl£
;

345 ià(
v”bo£
) {

346 
	`ALOGD
("Shared†ib '%s'‡lready†oaded in same CL %p",

347 
·thName
, 
şassLßd”
);

349 ià(!
	`checkOnLßdResuÉ
(
pEÁry
))

350  
çl£
;

351  
Œue
;

381 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

382 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

383 
hªdË
 = 
	`dlİ’
(
·thName
, 
RTLD_LAZY
);

384 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

386 ià(
hªdË
 =ğ
NULL
) {

387 *
d‘a
 = 
	`¡rdup
(
	`dË¼Ü
());

388  
çl£
;

392 
Sh¬edLib
* 
pNewEÁry
;

393 
pNewEÁry
 = (
Sh¬edLib
*è
	`ÿÎoc
(1, (SharedLib));

394 
pNewEÁry
->
·thName
 = 
	`¡rdup
(pathName);

395 
pNewEÁry
->
hªdË
 = handle;

396 
pNewEÁry
->
şassLßd”
 = classLoader;

397 
	`dvmIn™Mu‹x
(&
pNewEÁry
->
ÚLßdLock
);

398 
	`±h»ad_cÚd_š™
(&
pNewEÁry
->
ÚLßdCÚd
, 
NULL
);

399 
pNewEÁry
->
ÚLßdTh»adId
 = 
£lf
->
th»adId
;

402 
Sh¬edLib
* 
pAùu®EÁry
 = 
	`addSh¬edLibEÁry
(
pNewEÁry
);

404 ià(
pNewEÁry
 !ğ
pAùu®EÁry
) {

405 
	`ALOGI
("WOW: we†ost‡„aceo‡dd‡ shared†ib (%s CL=%p)",

406 
·thName
, 
şassLßd”
);

407 
	`ä“Sh¬edLibEÁry
(
pNewEÁry
);

408  
	`checkOnLßdResuÉ
(
pAùu®EÁry
);

410 ià(
v”bo£
)

411 
	`ALOGD
("Added sh¬ed†ib % %p", 
·thName
, 
şassLßd”
);

413 
boŞ
 
»suÉ
 = 
Œue
;

414 * 
vÚLßd
;

415 
v”siÚ
;

417 
vÚLßd
 = 
	`dlsym
(
hªdË
, "JNI_OnLoad");

418 ià(
vÚLßd
 =ğ
NULL
) {

419 
	`ALOGD
("No JNI_OnLoad found in %s %p, skipping init",

420 
·thName
, 
şassLßd”
);

428 
OnLßdFunc
 
func
 = (OnLßdFunc)
vÚLßd
;

429 
Objeù
* 
´evOv”ride
 = 
£lf
->
şassLßd”Ov”ride
;

431 
£lf
->
şassLßd”Ov”ride
 = 
şassLßd”
;

432 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

433 ià(
gDvm
.
v”bo£Jni
) {

434 
	`ALOGI
("[C®lšg JNI_OnLßd fÜ \"%s\"]", 
·thName
);

436 
v”siÚ
 = (*
func
)(
gDvmJni
.
jniVm
, 
NULL
);

437 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

438 
£lf
->
şassLßd”Ov”ride
 = 
´evOv”ride
;

440 ià(
v”siÚ
 !ğ
JNI_VERSION_1_2
 && v”siÚ !ğ
JNI_VERSION_1_4
 &&

441 
v”siÚ
 !ğ
JNI_VERSION_1_6
)

443 
	`ALOGW
("JNI_OnLoad„eturned bad version (%d) in %s %p",

444 
v”siÚ
, 
·thName
, 
şassLßd”
);

454 
»suÉ
 = 
çl£
;

456 ià(
gDvm
.
v”bo£Jni
) {

457 
	`ALOGI
("[R‘uºed from JNI_OnLßd fÜ \"%s\"]", 
·thName
);

462 ià(
»suÉ
)

463 
pNewEÁry
->
ÚLßdResuÉ
 = 
kOnLßdOkay
;

465 
pNewEÁry
->
ÚLßdResuÉ
 = 
kOnLßdFaed
;

467 
pNewEÁry
->
ÚLßdTh»adId
 = 0;

472 
	`dvmLockMu‹x
(&
pNewEÁry
->
ÚLßdLock
);

473 
	`±h»ad_cÚd_brßdÿ¡
(&
pNewEÁry
->
ÚLßdCÚd
);

474 
	`dvmUÆockMu‹x
(&
pNewEÁry
->
ÚLßdLock
);

475  
»suÉ
;

477 
	}
}

506 
	$uÄegi¡”JNIN©iveM‘hods
(
M‘hod
* 
m‘hods
, 
size_t
 
couÁ
)

508 
couÁ
 != 0) {

509 
couÁ
--;

511 
M‘hod
* 
m‘h
 = &
m‘hods
[
couÁ
];

512 ià(!
	`dvmIsN©iveM‘hod
(
m‘h
))

514 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘h
))

529 
	`ALOGD
("Unregistering JNI method %s.%s:%s",

530 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, m‘h->
shÜty
);

531 
	`dvmS‘N©iveFunc
(
m‘h
, 
dvmResŞveN©iveM‘hod
, 
NULL
);

533 
	}
}

538 
	$dvmUÄegi¡”JNIN©iveM‘hods
(
CÏssObjeù
* 
şazz
)

540 
	`uÄegi¡”JNIN©iveM‘hods
(
şazz
->
dœeùM‘hods
, cÏzz->
dœeùM‘hodCouÁ
);

541 
	`uÄegi¡”JNIN©iveM‘hods
(
şazz
->
vœtu®M‘hods
, cÏzz->
vœtu®M‘hodCouÁ
);

542 
	}
}

556 * 
	$ü—‹JniNameSŒšg
(cÚ¡ * 
şassDesütÜ
,

557 cÚ¡ * 
m‘hodName
, * 
pL’
)

559 * 
»suÉ
;

560 
size_t
 
desütÜL’gth
 = 
	`¡¾’
(
şassDesütÜ
);

562 *
pL’
 = 4 + 
desütÜL’gth
 + 
	`¡¾’
(
m‘hodName
);

564 
»suÉ
 = (*)
	`m®loc
(*
pL’
 +1);

565 ià(
»suÉ
 =ğ
NULL
)

566  
NULL
;

572 
	`¥rštf
(
»suÉ
, "Java/%s%s", 
şassDesütÜ
 + 1, 
m‘hodName
);

573 
»suÉ
[5 + (
desütÜL’gth
 - 2)] = '/';

575  
»suÉ
;

576 
	}
}

584 * 
	$mªgËSŒšg
(cÚ¡ * 
¡r
, 
Ën
)

588 
	`as£¹
(
¡r
[
Ën
] == '\0');

590 
size_t
 
ch¬L’
 = 
	`dvmUtf8L’
(
¡r
);

591 
u2
* 
utf16
 = (u2*è
	`m®loc
((u2è* 
ch¬L’
);

592 ià(
utf16
 =ğ
NULL
)

593  
NULL
;

595 
	`dvmCÚv”tUtf8ToUtf16
(
utf16
, 
¡r
);

600 
size_t
 
mªgËL’
 = 0;

601 
size_t
 
i
 = 0; i < 
ch¬L’
; i++) {

602 
u2
 
ch
 = 
utf16
[
i
];

604 ià(
ch
 == '$' || ch > 127) {

605 
mªgËL’
 += 6;

607 
ch
) {

611 
mªgËL’
 += 2;

614 
mªgËL’
++;

620 * 
mªgË
 = (*è
	`m®loc
(
mªgËL’
 +1);

621 ià(
mªgË
 =ğ
NULL
) {

622 
	`ä“
(
utf16
);

623  
NULL
;

626 * 
ı
 = 
mªgË
;

627 
size_t
 
i
 = 0; i < 
ch¬L’
; i++) {

628 
u2
 
ch
 = 
utf16
[
i
];

630 ià(
ch
 == '$' || ch > 127) {

631 
	`¥rštf
(
ı
, "_0%04x", 
ch
);

632 
ı
 += 6;

634 
ch
) {

636 *
ı
++ = '_';

637 *
ı
++ = '1';

640 *
ı
++ = '_';

641 *
ı
++ = '2';

644 *
ı
++ = '_';

645 *
ı
++ = '3';

648 *
ı
++ = '_';

651 *
ı
++ = (è
ch
;

657 *
ı
 = '\0';

659 
	`ä“
(
utf16
);

660  
mªgË
;

661 
	}
}

666 * 
	$ü—‹MªgËdSigÇtu»
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

668 
DexSŒšgCache
 
sigCache
;

669 cÚ¡ * 
š‹rim
;

670 * 
»suÉ
;

672 
	`dexSŒšgCacheIn™
(&
sigCache
);

673 
š‹rim
 = 
	`dexPrÙoG‘P¬am‘”DesütÜs
(
´Ùo
, &
sigCache
);

674 
»suÉ
 = 
	`mªgËSŒšg
(
š‹rim
, 
	`¡¾’
(interim));

675 
	`dexSŒšgCacheR–—£
(&
sigCache
);

677  
»suÉ
;

678 
	}
}

687 
	$fšdM‘hodInLib
(* 
vlib
, * 
vm‘hod
)

689 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
vlib
;

690 cÚ¡ 
M‘hod
* 
m‘h
 = (cÚ¡ M‘hod*è
vm‘hod
;

691 * 
´eMªgËCM
 = 
NULL
;

692 * 
mªgËCM
 = 
NULL
;

693 * 
mªgËSig
 = 
NULL
;

694 * 
mªgËCMSig
 = 
NULL
;

695 * 
func
 = 
NULL
;

696 
Ën
;

698 ià(
m‘h
->
şazz
->
şassLßd”
 !ğ
pLib
->classLoader) {

699 
	`ALOGV
("+++‚ot scanning '%s' for '%s' (wrong CL)",

700 
pLib
->
·thName
, 
m‘h
->
Çme
);

703 
	`ALOGV
("+++ sÿÂšg '%s' fÜ '%s'", 
pLib
->
·thName
, 
m‘h
->
Çme
);

708 
´eMªgËCM
 =

709 
	`ü—‹JniNameSŒšg
(
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, &
Ën
);

710 ià(
´eMªgËCM
 =ğ
NULL
)

711 
ba
;

713 
mªgËCM
 = 
	`mªgËSŒšg
(
´eMªgËCM
, 
Ën
);

714 ià(
mªgËCM
 =ğ
NULL
)

715 
ba
;

717 
	`ALOGV
("+++ c®lšg dlsym(%s)", 
mªgËCM
);

718 
func
 = 
	`dlsym
(
pLib
->
hªdË
, 
mªgËCM
);

719 ià(
func
 =ğ
NULL
) {

720 
mªgËSig
 =

721 
	`ü—‹MªgËdSigÇtu»
(&
m‘h
->
´ÙÙy³
);

722 ià(
mªgËSig
 =ğ
NULL
)

723 
ba
;

725 
mªgËCMSig
 = (*è
	`m®loc
(
	`¡¾’
(
mªgËCM
è+ sŒËn(
mªgËSig
) +3);

726 ià(
mªgËCMSig
 =ğ
NULL
)

727 
ba
;

729 
	`¥rštf
(
mªgËCMSig
, "%s__%s", 
mªgËCM
, 
mªgËSig
);

731 
	`ALOGV
("+++ c®lšg dlsym(%s)", 
mªgËCMSig
);

732 
func
 = 
	`dlsym
(
pLib
->
hªdË
, 
mªgËCMSig
);

733 ià(
func
 !ğ
NULL
) {

734 
	`ALOGV
("Found '%s' w™h dlsym", 
mªgËCMSig
);

737 
	`ALOGV
("Found '%s' w™h dlsym", 
mªgËCM
);

740 
ba
:

741 
	`ä“
(
´eMªgËCM
);

742 
	`ä“
(
mªgËCM
);

743 
	`ä“
(
mªgËSig
);

744 
	`ä“
(
mªgËCMSig
);

745  (è
func
;

746 
	}
}

753 * 
	$lookupSh¬edLibM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

755 ià(
gDvm
.
ÇtiveLibs
 =ğ
NULL
) {

756 
	`ALOGE
("Unexpected init state:‚ativeLibs‚ot„eady");

757 
	`dvmAbÜt
();

759  (*è
	`dvmHashFÜ—ch
(
gDvm
.
ÇtiveLibs
, 
fšdM‘hodInLib
,

760 (*è
m‘hod
);

761 
	}
}

	@vm/Native.h

22 #iâdeà
DALVIK_NATIVE_H_


23 
	#DALVIK_NATIVE_H_


	)

28 
	sD®vikN©iveM‘hod
 {

29 cÚ¡ * 
	mÇme
;

30 cÚ¡ * 
	msigÇtu»
;

31 
D®vikN©iveFunc
 
	mâPŒ
;

37 
	sD®vikN©iveCÏss
 {

38 cÚ¡ * 
	mşassDesütÜ
;

39 cÚ¡ 
D®vikN©iveM‘hod
* 
	mm‘hodInfo
;

40 
u4
 
	mşassDesütÜHash
;

45 
boŞ
 
dvmN©iveS¹up
();

46 
dvmN©iveShutdown
();

52 "C" 
dvmPÏtfÜmInvoke
(* 
pEnv
, 
CÏssObjeù
* 
şazz
, 
¬gInfo
,

53 
¬gc
, cÚ¡ 
u4
* 
¬gv
, cÚ¡ * 
sigÇtu»
, * 
func
, 
JV®ue
* 
pResuÉ
);

58 
u4
 
dvmPÏtfÜmInvokeHšts
(cÚ¡ 
DexPrÙo
* 
´Ùo
);

64 * 
dvmC»©eSy¡emLib¿ryName
(* 
libName
);

65 
boŞ
 
dvmLßdN©iveCode
(cÚ¡ * 
feName
, 
Objeù
* 
şassLßd”
,

66 ** 
d‘a
);

78 
dvmResŞveN©iveM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

79 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

84 
dvmUÄegi¡”JNIN©iveM‘hods
(
CÏssObjeù
* 
şazz
);

86 
	#GET_ARG_LONG
(
_¬gs
, 
_–em
è
	`dvmG‘ArgLÚg
(_¬gs, _–em)

	)

97 
INLINE
 
s8
 
	$dvmG‘ArgLÚg
(cÚ¡ 
u4
* 
¬gs
, 
–em
)

99 
s8
 
v®
;

100 
	`memıy
(&
v®
, &
¬gs
[
–em
], (val));

101  
v®
;

102 
	}
}

	@vm/PointerSet.cpp

19 
	~"D®vik.h
"

24 
	sPoš‹rS‘
 {

25 
u2
 
	m®loc
;

26 
u2
 
	mcouÁ
;

27 cÚ¡ ** 
	mli¡
;

33 #iâdeà
NDEBUG


34 
boŞ
 
	$v”ifySÜ‹d
(
Poš‹rS‘
* 
pS‘
)

36 cÚ¡ * 
Ï¡
 = 
NULL
;

37 
i
;

39 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

40 cÚ¡ * 
cur
 = 
pS‘
->
li¡
[
i
];

41 ià(
cur
 < 
Ï¡
)

42  
çl£
;

43 
Ï¡
 = 
cur
;

46  
Œue
;

47 
	}
}

55 
Poš‹rS‘
* 
	$dvmPoš‹rS‘AÎoc
(
š™ŸlSize
)

57 
Poš‹rS‘
* 
pS‘
 = (Poš‹rS‘*)
	`ÿÎoc
(1, (PointerSet));

58 ià(
pS‘
 !ğ
NULL
) {

59 ià(
š™ŸlSize
 > 0) {

60 
pS‘
->
li¡
 = (cÚ¡ **)
	`m®loc
((*è* 
š™ŸlSize
);

61 ià(
pS‘
->
li¡
 =ğ
NULL
) {

62 
	`ä“
(
pS‘
);

63  
NULL
;

65 
pS‘
->
®loc
 = 
š™ŸlSize
;

69  
pS‘
;

70 
	}
}

75 
	$dvmPoš‹rS‘F»e
(
Poš‹rS‘
* 
pS‘
)

77 ià(
pS‘
 =ğ
NULL
)

80 ià(
pS‘
->
li¡
 !ğ
NULL
) {

81 
	`ä“
(
pS‘
->
li¡
);

82 
pS‘
->
li¡
 = 
NULL
;

84 
	`ä“
(
pS‘
);

85 
	}
}

90 
	$dvmPoš‹rS‘CË¬
(
Poš‹rS‘
* 
pS‘
)

92 
pS‘
->
couÁ
 = 0;

93 
	}
}

98 
	$dvmPoš‹rS‘G‘CouÁ
(cÚ¡ 
Poš‹rS‘
* 
pS‘
)

100  
pS‘
->
couÁ
;

101 
	}
}

106 cÚ¡ * 
	$dvmPoš‹rS‘G‘EÁry
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, 
i
)

108  
pS‘
->
li¡
[
i
];

109 
	}
}

117 
boŞ
 
	$dvmPoš‹rS‘AddEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
)

119 
Ã¬by
;

121 ià(
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
Ã¬by
))

122  
çl£
;

125 ià(
pS‘
->
couÁ
 =ğpS‘->
®loc
) {

127 cÚ¡ ** 
ÃwLi¡
;

129 ià(
pS‘
->
®loc
 == 0)

130 
pS‘
->
®loc
 = 4;

132 
pS‘
->
®loc
 *= 2;

133 
	`LOGVV
("ex·ndšg %°tØ%d", 
pS‘
,…S‘->
®loc
);

134 
ÃwLi¡
 = (cÚ¡ **)
	`»®loc
(
pS‘
->
li¡
,…S‘->
®loc
 * (*));

135 ià(
ÃwLi¡
 =ğ
NULL
) {

136 
	`ALOGE
("Faedƒx·ndšg…Œ s‘ (®loc=%d)", 
pS‘
->
®loc
);

137 
	`dvmAbÜt
();

139 
pS‘
->
li¡
 = 
ÃwLi¡
;

142 ià(
pS‘
->
couÁ
 == 0) {

144 
	`as£¹
(
Ã¬by
 == 0);

150 ià(
Ã¬by
 !ğ0 && 
±r
 < 
pS‘
->
li¡
[nearby-1]) {

153 
Ã¬by
--;

154 } ià(
±r
 < 
pS‘
->
li¡
[
Ã¬by
]) {

160 
Ã¬by
++;

166 ià(
Ã¬by
 !ğ
pS‘
->
couÁ
) {

168 
	`memmove
(&
pS‘
->
li¡
[
Ã¬by
+1], &pSet->list[nearby],

169 (
pS‘
->
couÁ
 - 
Ã¬by
è* ÕS‘->
li¡
[0]));

173 
pS‘
->
li¡
[
Ã¬by
] = 
±r
;

174 
pS‘
->
couÁ
++;

176 
	`as£¹
(
	`v”ifySÜ‹d
(
pS‘
));

177  
Œue
;

178 
	}
}

183 
boŞ
 
	$dvmPoš‹rS‘RemoveEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
)

185 
wh”e
;

187 ià(!
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
wh”e
))

188  
çl£
;

190 ià(
wh”e
 !ğ
pS‘
->
couÁ
-1) {

192 
	`memmove
(&
pS‘
->
li¡
[
wh”e
], &pSet->list[where+1],

193 (
pS‘
->
couÁ
-1 - 
wh”e
è* ÕS‘->
li¡
[0]));

196 
pS‘
->
couÁ
--;

197 
pS‘
->
li¡
[pS‘->
couÁ
] = (const *) 0xdecadead;

198  
Œue
;

199 
	}
}

205 
boŞ
 
	$dvmPoš‹rS‘Has
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
, * 
pIndex
)

207 
hi
, 
lo
, 
mid
;

209 
lo
 = 
mid
 = 0;

210 
hi
 = 
pS‘
->
couÁ
-1;

213 
lo
 <ğ
hi
) {

214 
mid
 = (
lo
 + 
hi
) / 2;

215 cÚ¡ * 
li¡V®
 = 
pS‘
->
li¡
[
mid
];

217 ià(
±r
 > 
li¡V®
) {

218 
lo
 = 
mid
 + 1;

219 } ià(
±r
 < 
li¡V®
) {

220 
hi
 = 
mid
 - 1;

222 ià(
pIndex
 !ğ
NULL
)

223 *
pIndex
 = 
mid
;

224  
Œue
;

228 ià(
pIndex
 !ğ
NULL
)

229 *
pIndex
 = 
mid
;

230  
çl£
;

231 
	}
}

238 
	$dvmPoš‹rS‘IÁ”£ù
(
Poš‹rS‘
* 
pS‘
, cÚ¡ ** 
±rA¼ay
, 
couÁ
)

240 
i
, 
j
;

242 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

243 
j
 = 0; j < 
couÁ
; j++) {

244 ià(
pS‘
->
li¡
[
i
] =ğ
±rA¼ay
[
j
]) {

250 ià(
j
 =ğ
couÁ
) {

252 ià(
i
 !ğ
pS‘
->
couÁ
-1) {

254 
	`memmove
(&
pS‘
->
li¡
[
i
], &pSet->list[i+1],

255 (
pS‘
->
couÁ
-1 - 
i
è* ÕS‘->
li¡
[0]));

258 
pS‘
->
couÁ
--;

259 
pS‘
->
li¡
[pS‘->
couÁ
] = (const *) 0xdecadead;

260 
i
--;

263 
	}
}

268 
	$dvmPoš‹rS‘Dump
(cÚ¡ 
Poš‹rS‘
* 
pS‘
)

270 
	`ALOGI
("Poš‹rS‘ %p", 
pS‘
);

271 
i
;

272 
i
 = 0; i < 
pS‘
->
couÁ
; i++)

273 
	`ALOGI
(" %2d: %p", 
i
, 
pS‘
->
li¡
[i]);

274 
	}
}

	@vm/PointerSet.h

20 #iâdeà
DALVIK_POINTERSET_H_


21 
	#DALVIK_POINTERSET_H_


	)

23 
	gPoš‹rS‘
;

30 
Poš‹rS‘
* 
dvmPoš‹rS‘AÎoc
(
š™ŸlSize
);

35 
dvmPoš‹rS‘F»e
(
Poš‹rS‘
* 
pS‘
);

40 
dvmPoš‹rS‘CË¬
(
Poš‹rS‘
* 
pS‘
);

45 
dvmPoš‹rS‘G‘CouÁ
(cÚ¡ 
Poš‹rS‘
* 
pS‘
);

50 cÚ¡ * 
dvmPoš‹rS‘G‘EÁry
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, 
i
);

58 
boŞ
 
dvmPoš‹rS‘AddEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
);

63 
boŞ
 
dvmPoš‹rS‘RemoveEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
);

70 
boŞ
 
dvmPoš‹rS‘Has
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
, * 
pIndex
);

75 
INLINE
 
	$dvmPoš‹rS‘Fšd
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
) {

76 
idx
;

77 ià(!
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
idx
))

78 
idx
 = -1;

79  
idx
;

80 
	}
}

87 
dvmPoš‹rS‘IÁ”£ù
(
Poš‹rS‘
* 
pS‘
, cÚ¡ ** 
±rA¼ay
, 
couÁ
);

92 
dvmPoš‹rS‘Dump
(cÚ¡ 
Poš‹rS‘
* 
pS‘
);

	@vm/Profile.cpp

20 
	~"D®vik.h
"

21 
	~<š‹½/IÁ”pDefs.h
>

23 
	~<¡dlib.h
>

24 
	~<¡ddef.h
>

25 
	~<¡ršg.h
>

26 
	~<sys/time.h
>

27 
	~<time.h
>

28 
	~<sys/mmª.h
>

29 
	~<sched.h
>

30 
	~<”ºo.h
>

31 
	~<fú.h
>

33 
	~<cuts/İ’_mem¡»am.h
>

35 #ifdeà
HAVE_ANDROID_OS


36 
	#UPDATE_MAGIC_PAGE
 1

	)

74 
	#TRACE_REC_SIZE_SINGLE_CLOCK
 10

75 
	#TRACE_REC_SIZE_DUAL_CLOCK
 14

76 
	#TRACE_MAGIC
 0x574f4c53

	)

77 
	#TRACE_HEADER_LEN
 32

	)

79 
	#FILL_PATTERN
 0x““““

	)

85 
šlše
 
boŞ
 
	$u£Th»adCpuClock
() {

86 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

87  
gDvm
.
´of”ClockSourû
 !ğ
kProf”ClockSourûW®l
;

89  
çl£
;

91 
	}
}

96 
šlše
 
boŞ
 
	$u£W®lClock
() {

97 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

98  
gDvm
.
´of”ClockSourû
 !ğ
kProf”ClockSourûTh»adCpu
;

100  
Œue
;

102 
	}
}

107 
šlše
 
u8
 
	$g‘W®lTimeInU£c
()

109 
timev®
 
tv
;

111 
	`g‘timeofday
(&
tv
, 
NULL
);

112  
tv
.
tv_£c
 * 1000000LL +v.
tv_u£c
;

113 
	}
}

115 #ià
defšed
(
HAVE_POSIX_CLOCKS
)

121 
šlše
 
u8
 
	$g‘Th»adCpuTimeInU£c
()

123 
time¥ec
 
tm
;

125 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
tm
);

126 ià(!(
tm
.
tv_n£c
 >= 0 &&m.tv_nsec < 1*1000*1000*1000)) {

127 
	`ALOGE
("bad‚£c: %ld", 
tm
.
tv_n£c
);

128 
	`dvmAbÜt
();

130  
tm
.
tv_£c
 * 1000000LL +m.
tv_n£c
 / 1000;

131 
	}
}

137 
šlše
 
u8
 
	$g‘Stİw©chClock
()

139 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

140  
	`g‘Th»adCpuTimeInU£c
();

142  
	`g‘W®lTimeInU£c
();

144 
	}
}

149 
šlše
 
	$¡ÜeShÜtLE
(
u1
* 
buf
, 
u2
 
v®
)

151 *
buf
++ = (
u1
è
v®
;

152 *
buf
++ = (
u1
è(
v®
 >> 8);

153 
	}
}

154 
šlše
 
	$¡ÜeIÁLE
(
u1
* 
buf
, 
u4
 
v®
)

156 *
buf
++ = (
u1
è
v®
;

157 *
buf
++ = (
u1
è(
v®
 >> 8);

158 *
buf
++ = (
u1
è(
v®
 >> 16);

159 *
buf
++ = (
u1
è(
v®
 >> 24);

160 
	}
}

161 
šlše
 
	$¡ÜeLÚgLE
(
u1
* 
buf
, 
u8
 
v®
)

163 *
buf
++ = (
u1
è
v®
;

164 *
buf
++ = (
u1
è(
v®
 >> 8);

165 *
buf
++ = (
u1
è(
v®
 >> 16);

166 *
buf
++ = (
u1
è(
v®
 >> 24);

167 *
buf
++ = (
u1
è(
v®
 >> 32);

168 *
buf
++ = (
u1
è(
v®
 >> 40);

169 *
buf
++ = (
u1
è(
v®
 >> 48);

170 *
buf
++ = (
u1
è(
v®
 >> 56);

171 
	}
}

176 
boŞ
 
	$dvmProfšgS¹up
()

181 
	`mem£t
(&
gDvm
.
m‘hodT¿û
, 0, (gDvm.methodTrace));

182 
	`dvmIn™Mu‹x
(&
gDvm
.
m‘hodT¿û
.
¡¬tStİLock
);

183 
	`±h»ad_cÚd_š™
(&
gDvm
.
m‘hodT¿û
.
th»adEx™CÚd
, 
NULL
);

185 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

190 
gDvm
.
execu‹dIn¡rCouÁs
 = (*è
	`ÿÎoc
(
kNumPackedOpcodes
, ());

191 ià(
gDvm
.
execu‹dIn¡rCouÁs
 =ğ
NULL
)

192  
çl£
;

194 #ifdeà
UPDATE_MAGIC_PAGE


203 
fd
 = 
	`İ’
("/dev/qemu_Œaû", 
O_RDWR
);

204 ià(
fd
 < 0) {

205 
	`ALOGV
("Unableo open /dev/qemu_trace");

207 
gDvm
.
emuÏtÜT¿ûPage
 = 
	`mm­
(0, 
SYSTEM_PAGE_SIZE
, 
PROT_READ
|
PROT_WRITE
,

208 
MAP_SHARED
, 
fd
, 0);

209 
	`şo£
(
fd
);

210 ià(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
MAP_FAILED
) {

211 
	`ALOGE
("Unableo mmap /dev/qemu_trace");

212 
gDvm
.
emuÏtÜT¿ûPage
 = 
NULL
;

214 *(
u4
*è
gDvm
.
emuÏtÜT¿ûPage
 = 0;

218 
	`as£¹
(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
NULL
);

221  
Œue
;

222 
	}
}

227 
	$dvmProfšgShutdown
()

229 #ifdeà
UPDATE_MAGIC_PAGE


230 ià(
gDvm
.
emuÏtÜT¿ûPage
 !ğ
NULL
)

231 
	`munm­
(
gDvm
.
emuÏtÜT¿ûPage
, 
SYSTEM_PAGE_SIZE
);

233 
	`ä“
(
gDvm
.
execu‹dIn¡rCouÁs
);

234 
	}
}

239 
	$upd©eAùiveProf”s
(
ExecutiÚSubModes
 
ÃwMode
, 
boŞ
 
’abË
)

241 
ŞdV®ue
, 
ÃwV®ue
;

245 
ŞdV®ue
 = 
gDvm
.
aùiveProf”s
;

246 
ÃwV®ue
 = 
ŞdV®ue
 + (
’abË
 ? 1 : -1);

247 ià(
ÃwV®ue
 < 0) {

248 
	`ALOGE
("Cª'ˆhav%d‡ùiv´of”s", 
ÃwV®ue
);

249 
	`dvmAbÜt
();

251 } 
	`ªdroid_©omic_»Ëa£_ÿs
(
ŞdV®ue
, 
ÃwV®ue
,

252 &
gDvm
.
aùiveProf”s
) != 0);

255 ià(
’abË
) {

256 
	`dvmEÇbËAÎSubMode
(
ÃwMode
);

258 
	`dvmDi§bËAÎSubMode
(
ÃwMode
);

261 #ià
	`defšed
(
WITH_JIT
)

262 
	`dvmComp”Upd©eGlob®S‹
();

265 
	`ALOGD
("+++‡ùiv´of” couÁ‚ow %d", 
ÃwV®ue
);

266 
	}
}

272 
	$»£tCpuClockBa£
()

274 
Th»ad
* 
th»ad
;

276 
	`dvmLockTh»adLi¡
(
NULL
);

277 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

278 
th»ad
->
ıuClockBa£S‘
 = 
çl£
;

279 
th»ad
->
ıuClockBa£
 = 0;

281 
	`dvmUÆockTh»adLi¡
();

282 
	}
}

287 
	$dumpTh»adLi¡
(
FILE
* 
å
) {

288 
	`dvmLockTh»adLi¡
(
NULL
);

289 
Th»ad
* 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

290 
¡d
::
¡ršg
 
	`th»adName
(
	`dvmG‘Th»adName
(
th»ad
));

291 
	`årštf
(
å
, "%d\t%s\n", 
th»ad
->
th»adId
, 
th»adName
.
	`c_¡r
());

293 
	`dvmUÆockTh»adLi¡
();

294 
	}
}

299 
	$dumpM¬kedM‘hods
(* 
vşazz
, * 
vå
)

301 
DexSŒšgCache
 
¡ršgCache
;

302 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
vşazz
;

303 
FILE
* 
å
 = (FILE*è
vå
;

304 
M‘hod
* 
m‘h
;

305 * 
Çme
;

306 
i
;

308 
	`dexSŒšgCacheIn™
(&
¡ršgCache
);

310 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

311 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

312 ià(
m‘h
->
šProfe
) {

313 
Çme
 = 
	`dvmDesütÜToName
(
m‘h
->
şazz
->
desütÜ
);

314 
	`årštf
(
å
, "0x%08x\t%s\t%s\t%s\t%s\t%d\n", (è
m‘h
,

315 
Çme
, 
m‘h
->name,

316 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
, &
¡ršgCache
),

317 
	`dvmG‘M‘hodSourûFe
(
m‘h
), 
	`dvmLšeNumFromPC
(meth, 0));

318 
m‘h
->
šProfe
 = 
çl£
;

319 
	`ä“
(
Çme
);

323 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

324 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

325 ià(
m‘h
->
šProfe
) {

326 
Çme
 = 
	`dvmDesütÜToName
(
m‘h
->
şazz
->
desütÜ
);

327 
	`årštf
(
å
, "0x%08x\t%s\t%s\t%s\t%s\t%d\n", (è
m‘h
,

328 
Çme
, 
m‘h
->name,

329 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
, &
¡ršgCache
),

330 
	`dvmG‘M‘hodSourûFe
(
m‘h
), 
	`dvmLšeNumFromPC
(meth, 0));

331 
m‘h
->
šProfe
 = 
çl£
;

332 
	`ä“
(
Çme
);

336 
	`dexSŒšgCacheR–—£
(&
¡ršgCache
);

339 
	}
}

344 
	$dumpM‘hodLi¡
(
FILE
* 
å
)

346 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

347 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
dumpM¬kedM‘hods
, (*è
å
);

348 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

349 
	}
}

361 
	$dvmM‘hodT¿ûS¹
(cÚ¡ * 
ŒaûFeName
, 
ŒaûFd
, 
bufãrSize
,

362 
æags
, 
boŞ
 
dœeùToDdms
)

364 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

366 
	`as£¹
(
bufãrSize
 > 0);

368 
	`dvmLockMu‹x
(&
¡©e
->
¡¬tStİLock
);

369 
¡©e
->
ŒaûEÇbËd
 != 0) {

370 
	`ALOGI
("TRACE start„equested, but‡lready in…rogress; stopping");

371 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

372 
	`dvmM‘hodT¿ûStİ
();

373 
	`dvmLockMu‹x
(&
¡©e
->
¡¬tStİLock
);

375 
	`ALOGI
("TRACE STARTED: '%s' %dKB", 
ŒaûFeName
, 
bufãrSize
 / 1024);

383 
¡©e
->
buf
 = (
u1
*è
	`m®loc
(
bufãrSize
);

384 ià(
¡©e
->
buf
 =ğ
NULL
) {

385 
	`dvmThrowIÁ”ÇlE¼Ü
("buffer‡lloc failed");

386 
ç
;

388 ià(!
dœeùToDdms
) {

389 ià(
ŒaûFd
 < 0) {

390 
¡©e
->
ŒaûFe
 = 
	`fİ’
(
ŒaûFeName
, "w");

392 
¡©e
->
ŒaûFe
 = 
	`fdİ’
(
ŒaûFd
, "w");

394 ià(
¡©e
->
ŒaûFe
 =ğ
NULL
) {

395 
”r
 = 
”ºo
;

396 
	`ALOGE
("Unableo openrace file '%s': %s",

397 
ŒaûFeName
, 
	`¡»¼Ü
(
”r
));

398 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exRuÁimeExû±iÚ
,

400 
ŒaûFeName
, 
	`¡»¼Ü
(
”r
));

401 
ç
;

404 
ŒaûFd
 = -1;

405 
	`mem£t
(
¡©e
->
buf
, ()
FILL_PATTERN
, 
bufãrSize
);

407 
¡©e
->
dœeùToDdms
 = directToDdms;

408 
¡©e
->
bufãrSize
 = bufferSize;

409 
¡©e
->
ov”æow
 = 
çl£
;

414 
¡©e
->
æags
 = flags;

415 ià((
æags
 & 
TRACE_ALLOC_COUNTS
) != 0)

416 
	`dvmS¹AÎocCouÁšg
();

419 
	`»£tCpuClockBa£
();

421 
¡©e
->
¡¬tWh’
 = 
	`g‘W®lTimeInU£c
();

423 ià(
	`u£Th»adCpuClock
(è&& 
	`u£W®lClock
()) {

424 
¡©e
->
ŒaûV”siÚ
 = 3;

425 
¡©e
->
»cÜdSize
 = 
TRACE_REC_SIZE_DUAL_CLOCK
;

427 
¡©e
->
ŒaûV”siÚ
 = 2;

428 
¡©e
->
»cÜdSize
 = 
TRACE_REC_SIZE_SINGLE_CLOCK
;

434 
	`mem£t
(
¡©e
->
buf
, 0, 
TRACE_HEADER_LEN
);

435 
	`¡ÜeIÁLE
(
¡©e
->
buf
 + 0, 
TRACE_MAGIC
);

436 
	`¡ÜeShÜtLE
(
¡©e
->
buf
 + 4, s‹->
ŒaûV”siÚ
);

437 
	`¡ÜeShÜtLE
(
¡©e
->
buf
 + 6, 
TRACE_HEADER_LEN
);

438 
	`¡ÜeLÚgLE
(
¡©e
->
buf
 + 8, s‹->
¡¬tWh’
);

439 ià(
¡©e
->
ŒaûV”siÚ
 >= 3) {

440 
	`¡ÜeShÜtLE
(
¡©e
->
buf
 + 16, s‹->
»cÜdSize
);

442 
¡©e
->
curOff£t
 = 
TRACE_HEADER_LEN
;

448 
	`ªdroid_©omic_»Ëa£_¡Üe
(
Œue
, &
¡©e
->
ŒaûEÇbËd
);

455 
	`upd©eAùiveProf”s
(
kSubModeM‘hodT¿û
, 
Œue
);

457 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

460 
ç
:

461 ià(
¡©e
->
ŒaûFe
 !ğ
NULL
) {

462 
	`fşo£
(
¡©e
->
ŒaûFe
);

463 
¡©e
->
ŒaûFe
 = 
NULL
;

465 ià(
¡©e
->
buf
 !ğ
NULL
) {

466 
	`ä“
(
¡©e
->
buf
);

467 
¡©e
->
buf
 = 
NULL
;

469 ià(
ŒaûFd
 >= 0)

470 
	`şo£
(
ŒaûFd
);

471 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

472 
	}
}

478 
	$m¬kTouchedM‘hods
(
’dOff£t
)

480 
u1
* 
±r
 = 
gDvm
.
m‘hodT¿û
.
buf
 + 
TRACE_HEADER_LEN
;

481 
u1
* 
’d
 = 
gDvm
.
m‘hodT¿û
.
buf
 + 
’dOff£t
;

482 
size_t
 
»cÜdSize
 = 
gDvm
.
m‘hodT¿û
.recordSize;

483 
m‘hodV®
;

484 
M‘hod
* 
m‘hod
;

486 
±r
 < 
’d
) {

487 
m‘hodV®
 = 
±r
[2] | (ptr[3] << 8) | (ptr[4] << 16)

488 | (
±r
[5] << 24);

489 
m‘hod
 = (
M‘hod
*è
	`METHOD_ID
(
m‘hodV®
);

491 
m‘hod
->
šProfe
 = 
Œue
;

492 
±r
 +ğ
»cÜdSize
;

494 
	}
}

499 
šlše
 
	$m—su»ClockOv”h—d
()

501 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

502 ià(
	`u£Th»adCpuClock
()) {

503 
	`g‘Th»adCpuTimeInU£c
();

506 ià(
	`u£W®lClock
()) {

507 
	`g‘W®lTimeInU£c
();

509 
	}
}

517 
u4
 
	$g‘ClockOv”h—d
()

519 
u8
 
ÿlS¹
, 
ÿlEÏp£d
;

520 
i
;

522 
ÿlS¹
 = 
	`g‘Stİw©chClock
();

523 
i
 = 1000 * 4; i > 0; i--) {

524 
	`m—su»ClockOv”h—d
();

525 
	`m—su»ClockOv”h—d
();

526 
	`m—su»ClockOv”h—d
();

527 
	`m—su»ClockOv”h—d
();

528 
	`m—su»ClockOv”h—d
();

529 
	`m—su»ClockOv”h—d
();

530 
	`m—su»ClockOv”h—d
();

531 
	`m—su»ClockOv”h—d
();

534 
ÿlEÏp£d
 = 
	`g‘Stİw©chClock
(è- 
ÿlS¹
;

535  (è(
ÿlEÏp£d
 / (8*4));

536 
	}
}

541 
boŞ
 
	$dvmIsM‘hodT¿ûAùive
()

543 cÚ¡ 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

544  
¡©e
->
ŒaûEÇbËd
;

545 
	}
}

551 
	$dvmM‘hodT¿ûStİ
()

553 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

554 
u8
 
–­£d
;

560 
	`dvmLockMu‹x
(&
¡©e
->
¡¬tStİLock
);

562 ià(!
¡©e
->
ŒaûEÇbËd
) {

564 
	`ALOGD
("TRACE stop„equested, but‚ot„unning");

565 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

568 
	`upd©eAùiveProf”s
(
kSubModeM‘hodT¿û
, 
çl£
);

572 
–­£d
 = 
	`g‘W®lTimeInU£c
(è- 
¡©e
->
¡¬tWh’
;

581 
¡©e
->
ŒaûEÇbËd
 = 
çl£
;

582 
	`ANDROID_MEMBAR_FULL
();

583 
	`sched_y›ld
();

584 
	`u¦“p
(250 * 1000);

586 ià((
¡©e
->
æags
 & 
TRACE_ALLOC_COUNTS
) != 0)

587 
	`dvmStİAÎocCouÁšg
();

609 
fš®CurOff£t
 = 
¡©e
->
curOff£t
;

611 
size_t
 
»cÜdSize
 = 
¡©e
->recordSize;

612 ià(
fš®CurOff£t
 > 
TRACE_HEADER_LEN
) {

613 
u4
 
flV®
 = 
	`METHOD_ID
(
FILL_PATTERN
);

614 
u1
* 
sÿnPŒ
 = 
¡©e
->
buf
 + 
TRACE_HEADER_LEN
;

616 
sÿnPŒ
 < 
¡©e
->
buf
 + 
fš®CurOff£t
) {

617 
u4
 
m‘hodV®
 = 
sÿnPŒ
[2] | (scanPtr[3] << 8) | (scanPtr[4] << 16)

618 | (
sÿnPŒ
[5] << 24);

619 ià(
	`METHOD_ID
(
m‘hodV®
è=ğ
flV®
) {

620 
u1
* 
sÿnBa£
 = 
¡©e
->
buf
 + 
TRACE_HEADER_LEN
;

621 
	`ALOGW
("Found unfilled„ecord‡t %d (of %d)",

622 (
sÿnPŒ
 - 
sÿnBa£
è/ 
»cÜdSize
,

623 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
»cÜdSize
);

624 
fš®CurOff£t
 = 
sÿnPŒ
 - 
¡©e
->
buf
;

628 
sÿnPŒ
 +ğ
»cÜdSize
;

632 
	`ALOGI
("TRACE STOPPED%s: writing %d„ecords",

633 
¡©e
->
ov”æow
 ? " (NOTE: overflowed buffer)" : "",

634 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
»cÜdSize
);

635 ià(
gDvm
.
debugg”Aùive
) {

636 
	`ALOGW
("WARNING:‡ debugger is‡ctive; method-tracing„esults "

643 
u4
 
şockN£c
 = 
	`g‘ClockOv”h—d
();

645 
	`m¬kTouchedM‘hods
(
fš®CurOff£t
);

647 * 
memSŒ—mPŒ
;

648 
size_t
 
memSŒ—mSize
;

649 ià(
¡©e
->
dœeùToDdms
) {

650 
	`as£¹
(
¡©e
->
ŒaûFe
 =ğ
NULL
);

651 
¡©e
->
ŒaûFe
 = 
	`İ’_mem¡»am
(&
memSŒ—mPŒ
, &
memSŒ—mSize
);

652 ià(
¡©e
->
ŒaûFe
 =ğ
NULL
) {

654 
	`ALOGE
("Unableo open memstream");

655 
	`dvmAbÜt
();

658 
	`as£¹
(
¡©e
->
ŒaûFe
 !ğ
NULL
);

660 
	`årštf
(
¡©e
->
ŒaûFe
, "%cv”siÚ\n", 
TOKEN_CHAR
);

661 
	`årštf
(
¡©e
->
ŒaûFe
, "%d\n", s‹->
ŒaûV”siÚ
);

662 
	`årštf
(
¡©e
->
ŒaûFe
, "data-file-overflow=%s\n",

663 
¡©e
->
ov”æow
 ? "true" : "false");

664 ià(
	`u£Th»adCpuClock
()) {

665 ià(
	`u£W®lClock
()) {

666 
	`årštf
(
¡©e
->
ŒaûFe
, "clock=dual\n");

668 
	`årštf
(
¡©e
->
ŒaûFe
, "clock=thread-cpu\n");

671 
	`årštf
(
¡©e
->
ŒaûFe
, "clock=wall\n");

673 
	`årštf
(
¡©e
->
ŒaûFe
, "–­£d-time-u£c=%Îu\n", 
–­£d
);

674 
	`årštf
(
¡©e
->
ŒaûFe
, "num-method-calls=%d\n",

675 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
¡©e
->
»cÜdSize
);

676 
	`årštf
(
¡©e
->
ŒaûFe
, "şock-ÿÎ-ov”h—d-n£c=%d\n", 
şockN£c
);

677 
	`årštf
(
¡©e
->
ŒaûFe
, "vm=dalvik\n");

678 ià((
¡©e
->
æags
 & 
TRACE_ALLOC_COUNTS
) != 0) {

679 
	`årštf
(
¡©e
->
ŒaûFe
, "alloc-count=%d\n",

680 
gDvm
.
®locProf
.
®locCouÁ
);

681 
	`årštf
(
¡©e
->
ŒaûFe
, "alloc-size=%d\n",

682 
gDvm
.
®locProf
.
®locSize
);

683 
	`årštf
(
¡©e
->
ŒaûFe
, "gc-count=%d\n",

684 
gDvm
.
®locProf
.
gcCouÁ
);

686 
	`årštf
(
¡©e
->
ŒaûFe
, "%ùh»ads\n", 
TOKEN_CHAR
);

687 
	`dumpTh»adLi¡
(
¡©e
->
ŒaûFe
);

688 
	`årštf
(
¡©e
->
ŒaûFe
, "%cm‘hods\n", 
TOKEN_CHAR
);

689 
	`dumpM‘hodLi¡
(
¡©e
->
ŒaûFe
);

690 
	`årštf
(
¡©e
->
ŒaûFe
, "%ûnd\n", 
TOKEN_CHAR
);

692 ià(
¡©e
->
dœeùToDdms
) {

697 
	`fæush
(
¡©e
->
ŒaûFe
);

699 
iovec
 
iov
[2];

700 
iov
[0].
iov_ba£
 = 
memSŒ—mPŒ
;

701 
iov
[0].
iov_Ën
 = 
memSŒ—mSize
;

702 
iov
[1].
iov_ba£
 = 
¡©e
->
buf
;

703 
iov
[1].
iov_Ën
 = 
fš®CurOff£t
;

704 
	`dvmDbgDdmS’dChunkV
(
	`CHUNK_TYPE
("MPSE"), 
iov
, 2);

707 ià(
	`fwr™e
(
¡©e
->
buf
, 
fš®CurOff£t
, 1, s‹->
ŒaûFe
) != 1) {

708 
”r
 = 
”ºo
;

709 
	`ALOGE
("trace fwrite(%d) failed: %s",

710 
fš®CurOff£t
, 
	`¡»¼Ü
(
”r
));

711 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exRuÁimeExû±iÚ
,

712 "T¿û d©¨wr™çed: %s", 
	`¡»¼Ü
(
”r
));

717 
	`ä“
(
¡©e
->
buf
);

718 
¡©e
->
buf
 = 
NULL
;

719 
	`fşo£
(
¡©e
->
ŒaûFe
);

720 
¡©e
->
ŒaûFe
 = 
NULL
;

723 
	`dvmBrßdÿ¡CÚd
(&
¡©e
->
th»adEx™CÚd
);

724 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

725 
	}
}

733 
	$dvmM‘hodT¿ûAdd
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
)

735 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

736 
u4
 
m‘hodV®
;

737 
ŞdOff£t
, 
ÃwOff£t
;

738 
u1
* 
±r
;

740 
	`as£¹
(
m‘hod
 !ğ
NULL
);

742 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

749 ià(!
£lf
->
ıuClockBa£S‘
) {

750 
£lf
->
ıuClockBa£
 = 
	`g‘Th»adCpuTimeInU£c
();

751 
£lf
->
ıuClockBa£S‘
 = 
Œue
;

761 
ŞdOff£t
 = 
¡©e
->
curOff£t
;

762 
ÃwOff£t
 = 
ŞdOff£t
 + 
¡©e
->
»cÜdSize
;

763 ià(
ÃwOff£t
 > 
¡©e
->
bufãrSize
) {

764 
¡©e
->
ov”æow
 = 
Œue
;

767 } 
	`ªdroid_©omic_»Ëa£_ÿs
(
ŞdOff£t
, 
ÃwOff£t
,

768 &
¡©e
->
curOff£t
) != 0);

772 
m‘hodV®
 = 
	`METHOD_COMBINE
((
u4
è
m‘hod
, 
aùiÚ
);

777 
±r
 = 
¡©e
->
buf
 + 
ŞdOff£t
;

778 *
±r
++ = (
u1
è
£lf
->
th»adId
;

779 *
±r
++ = (
u1
è(
£lf
->
th»adId
 >> 8);

780 *
±r
++ = (
u1
è
m‘hodV®
;

781 *
±r
++ = (
u1
è(
m‘hodV®
 >> 8);

782 *
±r
++ = (
u1
è(
m‘hodV®
 >> 16);

783 *
±r
++ = (
u1
è(
m‘hodV®
 >> 24);

785 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

786 ià(
	`u£Th»adCpuClock
()) {

787 
u4
 
ıuClockDiff
 = (u4è(
	`g‘Th»adCpuTimeInU£c
(è- 
£lf
->
ıuClockBa£
);

788 *
±r
++ = (
u1
è
ıuClockDiff
;

789 *
±r
++ = (
u1
è(
ıuClockDiff
 >> 8);

790 *
±r
++ = (
u1
è(
ıuClockDiff
 >> 16);

791 *
±r
++ = (
u1
è(
ıuClockDiff
 >> 24);

795 ià(
	`u£W®lClock
()) {

796 
u4
 
w®lClockDiff
 = (u4è(
	`g‘W®lTimeInU£c
(è- 
¡©e
->
¡¬tWh’
);

797 *
±r
++ = (
u1
è
w®lClockDiff
;

798 *
±r
++ = (
u1
è(
w®lClockDiff
 >> 8);

799 *
±r
++ = (
u1
è(
w®lClockDiff
 >> 16);

800 *
±r
++ = (
u1
è(
w®lClockDiff
 >> 24);

802 
	}
}

809 
	$dvmFa¡M‘hodT¿ûEÁ”
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

811 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) {

812 
	`dvmM‘hodT¿ûAdd
(
£lf
, 
m‘hod
, 
METHOD_TRACE_ENTER
);

814 
	}
}

821 
	$dvmFa¡M‘hodT¿ûEx™
(
Th»ad
* 
£lf
)

823 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) {

824 
	`dvmM‘hodT¿ûAdd
(
£lf
, s–f->
š‹½Save
.
m‘hod
,

825 
METHOD_TRACE_EXIT
);

827 
	}
}

834 
	$dvmFa¡N©iveM‘hodT¿ûEx™
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

836 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) {

837 
	`dvmM‘hodT¿ûAdd
(
£lf
, 
m‘hod
, 
METHOD_TRACE_EXIT
);

839 
	}
}

845 
	$dvmEm™EmuÏtÜT¿û
(cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
)

847 #ifdeà
UPDATE_MAGIC_PAGE


858 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hod
))

861 
u4
* 
pMagic
 = (u4*è
gDvm
.
emuÏtÜT¿ûPage
;

862 
u4
 
addr
;

864 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

874 
aùiÚ
 += 4;

882 
addr
 = (
u4
è
m‘hod
->
ÇtiveFunc
;

896 
	`as£¹
(
m‘hod
->
š¢s
 !ğ
NULL
);

897 cÚ¡ 
DexO±H—d”
* 
pO±Hdr
 = 
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
->
pO±H—d”
;

898 
addr
 = (
u4
è
m‘hod
->
š¢s
 - 
pO±Hdr
->
dexOff£t
;

901 *(
pMagic
+
aùiÚ
èğ
addr
;

902 
	`LOGVV
("Set %p = 0x%08x (%s.%s)",

903 
pMagic
+
aùiÚ
, 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

905 
	}
}

911 
	$dvmM‘hodT¿ûGCBegš
()

913 
	`TRACE_METHOD_ENTER
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿ûGcM‘hod
);

914 
	}
}

915 
	$dvmM‘hodT¿ûGCEnd
()

917 
	`TRACE_METHOD_EXIT
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿ûGcM‘hod
);

918 
	}
}

923 
	$dvmM‘hodT¿ûCÏssP»pBegš
()

925 
	`TRACE_METHOD_ENTER
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿ûCÏssP»pM‘hod
);

926 
	}
}

927 
	$dvmM‘hodT¿ûCÏssP»pEnd
()

929 
	`TRACE_METHOD_EXIT
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿ûCÏssP»pM‘hod
);

930 
	}
}

936 
	$dvmEmuÏtÜT¿ûS¹
()

939 ià(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
NULL
)

943 
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
++;

944 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 1)

945 
	`ALOGD
("---ƒmulator methodracesƒnabled");

946 
	`upd©eAùiveProf”s
(
kSubModeEmuÏtÜT¿û
, 
Œue
);

947 
	}
}

952 
	$dvmEmuÏtÜT¿ûStİ
()

954 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 0) {

955 
	`ALOGE
("ERROR:ƒmulatorracing‚otƒnabled");

959 
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
--;

960 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 0)

961 
	`ALOGD
("---ƒmulator methodraces disabled");

962 
	`upd©eAùiveProf”s
(
kSubModeEmuÏtÜT¿û
,

963 (
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 != 0));

964 
	}
}

970 
	$dvmS¹In¡ruùiÚCouÁšg
()

973 
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
++;

974 
	`upd©eAùiveProf”s
(
kSubModeIn¡CouÁšg
, 
Œue
);

975 
	}
}

980 
	$dvmStİIn¡ruùiÚCouÁšg
()

982 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 == 0) {

983 
	`ALOGE
("ERROR: instruction counting‚otƒnabled");

984 
	`dvmAbÜt
();

986 
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
--;

987 
	`upd©eAùiveProf”s
(
kSubModeIn¡CouÁšg
,

988 (
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 != 0));

989 
	}
}

996 
	$dvmS¹AÎocCouÁšg
()

998 
gDvm
.
®locProf
.
’abËd
 = 
Œue
;

999 
	}
}

1004 
	$dvmStİAÎocCouÁšg
()

1006 
gDvm
.
®locProf
.
’abËd
 = 
çl£
;

1007 
	}
}

	@vm/Profile.h

20 #iâdeà
DALVIK_PROFILE_H_


21 
	#DALVIK_PROFILE_H_


	)

23 #iâdeà
NOT_VM


25 
	~<¡dio.h
>

27 
	gTh»ad
;

31 
boŞ
 
dvmProfšgS¹up
();

32 
dvmProfšgShutdown
();

38 
	sM‘hodT¿ûS‹
 {

40 
±h»ad_mu‹x_t
 
	m¡¬tStİLock
;

41 
±h»ad_cÚd_t
 
	mth»adEx™CÚd
;

42 
FILE
* 
	mŒaûFe
;

43 
boŞ
 
	mdœeùToDdms
;

44 
	mbufãrSize
;

45 
	mæags
;

47 
	mŒaûEÇbËd
;

48 
u1
* 
	mbuf
;

49 vŞ©
	mcurOff£t
;

50 
u8
 
	m¡¬tWh’
;

51 
	mov”æow
;

53 
	mŒaûV”siÚ
;

54 
size_t
 
	m»cÜdSize
;

63 
	sAÎocProfS‹
 {

64 
boŞ
 
	m’abËd
;

66 
	m®locCouÁ
;

67 
	m®locSize
;

69 
	mçedAÎocCouÁ
;

70 
	mçedAÎocSize
;

72 
	mä“CouÁ
;

73 
	mä“Size
;

75 
	mgcCouÁ
;

77 
	mşassIn™CouÁ
;

78 
u8
 
	mşassIn™Time
;

85 
dvmM‘hodT¿ûS¹
(cÚ¡ * 
ŒaûFeName
, 
ŒaûFd
, 
bufãrSize
,

86 
æags
, 
boŞ
 
dœeùToDdms
);

87 
boŞ
 
dvmIsM‘hodT¿ûAùive
();

88 
dvmM‘hodT¿ûStİ
();

93 
dvmEmuÏtÜT¿ûS¹
();

94 
dvmEmuÏtÜT¿ûStİ
();

99 
dvmS¹In¡ruùiÚCouÁšg
();

100 
dvmStİIn¡ruùiÚCouÁšg
();

107 
	mTRACE_ALLOC_COUNTS
 = 0x01,

113 
	#TRACE_METHOD_ENTER
(
_£lf
, 
_m‘hod
) \

115 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) \

116 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_ENTER
); \

117 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeEmuÏtÜT¿û
) \

118 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_ENTER
); \

119 } 0);

	)

120 
	#TRACE_METHOD_EXIT
(
_£lf
, 
_m‘hod
) \

122 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) \

123 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_EXIT
); \

124 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeEmuÏtÜT¿û
) \

125 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_EXIT
); \

126 } 0);

	)

127 
	#TRACE_METHOD_UNROLL
(
_£lf
, 
_m‘hod
) \

129 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) \

130 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_UNROLL
); \

131 ià(
_£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeEmuÏtÜT¿û
) \

132 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_UNROLL
); \

133 } 0);

	)

135 
dvmM‘hodT¿ûAdd
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
);

136 
dvmEm™EmuÏtÜT¿û
(cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
);

138 
dvmM‘hodT¿ûGCBegš
();

139 
dvmM‘hodT¿ûGCEnd
();

140 
dvmM‘hodT¿ûCÏssP»pBegš
();

141 
dvmM‘hodT¿ûCÏssP»pEnd
();

143 "C" 
dvmFa¡M‘hodT¿ûEÁ”
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

144 "C" 
dvmFa¡M‘hodT¿ûEx™
(
Th»ad
* 
£lf
);

145 "C" 
dvmFa¡N©iveM‘hodT¿ûEx™
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

150 
dvmS¹AÎocCouÁšg
();

151 
dvmStİAÎocCouÁšg
();

160 
	mMETHOD_TRACE_ENTER
 = 0x00,

161 
	mMETHOD_TRACE_EXIT
 = 0x01,

162 
	mMETHOD_TRACE_UNROLL
 = 0x02,

166 
	#TOKEN_CHAR
 '*'

	)

171 
	#METHOD_ACTION_MASK
 0x03

	)

172 
	#METHOD_ID
(
_m‘hod
è((_m‘hodè& (~
METHOD_ACTION_MASK
))

	)

173 
	#METHOD_ACTION
(
_m‘hod
è((()(_m‘hod)è& 
METHOD_ACTION_MASK
)

	)

174 
	#METHOD_COMBINE
(
_m‘hod
, 
_aùiÚ
è((_m‘hodè| (_aùiÚ))

	)

	@vm/RawDexFile.cpp

21 
	~"D®vik.h
"

22 
	~"libdex/O±InvoÿtiÚ.h
"

24 
	~<fú.h
>

25 
	~<sys/¡©.h
>

26 
	~<sys/ty³s.h
>

27 
	~<uni¡d.h
>

33 
	$cİyFeToFe
(
de¡Fd
, 
¤cFd
, 
size_t
 
size
)

35 ià(
	`l£ek
(
¤cFd
, 0, 
SEEK_SET
) != 0) {

36 
	`ALOGE
("l£ek fau»: %s", 
	`¡»¼Ü
(
”ºo
));

40  
	`sysCİyFeToFe
(
de¡Fd
, 
¤cFd
, 
size
);

41 
	}
}

46 
	$g‘ModTimeAndSize
(
fd
, 
u4
* 
modTime
, 
size_t
* 
size
)

48 
¡©
 
buf
;

49 
»suÉ
 = 
	`f¡©
(
fd
, &
buf
);

51 ià(
»suÉ
 < 0) {

52 
	`ALOGE
("UÇbËØd‘”mšmodime: %s", 
	`¡»¼Ü
(
”ºo
));

56 *
modTime
 = (
u4
è
buf
.
¡_mtime
;

57 *
size
 = (
size_t
è
buf
.
¡_size
;

58 
	`as£¹
((
size_t
è
buf
.
¡_size
 == buf.st_size);

61 
	}
}

69 
	$v”ifyMagicAndG‘AdËr32
(
fd
, 
u4
 *
adËr32
)

75 
u1
 
h—d”S¹
[12];

76 
ssize_t
 
amt
 = 
	`»ad
(
fd
, 
h—d”S¹
, (headerStart));

78 ià(
amt
 < 0) {

79 
	`ALOGE
("UÇbËØ»ad h—d”: %s", 
	`¡»¼Ü
(
”ºo
));

83 ià(
amt
 !ğ(
h—d”S¹
)) {

84 
	`ALOGE
("UÇbËØ»ad fuÎ h—d” (Úly gÙ %d by‹s)", (è
amt
);

88 ià(!
	`dexHasV®idMagic
((
DexH—d”
*è(*è
h—d”S¹
)) {

100 *
adËr32
 = (
u4
è
h—d”S¹
[8]

101 | (((
u4
è
h—d”S¹
[9]) << 8)

102 | (((
u4
è
h—d”S¹
[10]) << 16)

103 | (((
u4
è
h—d”S¹
[11]) << 24);

106 
	}
}

109 
	$dvmRawDexFeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

110 
RawDexFe
** 
µRawDexFe
, 
boŞ
 
isBoÙ¡¿p
)

117 
DvmDex
* 
pDvmDex
 = 
NULL
;

118 * 
ÿchedName
 = 
NULL
;

119 
»suÉ
 = -1;

120 
dexFd
 = -1;

121 
İtFd
 = -1;

122 
u4
 
modTime
 = 0;

123 
u4
 
adËr32
 = 0;

124 
size_t
 
feSize
 = 0;

125 
boŞ
 
ÃwFe
 = 
çl£
;

126 
boŞ
 
locked
 = 
çl£
;

128 
dexFd
 = 
	`İ’
(
feName
, 
O_RDONLY
);

129 ià(
dexFd
 < 0è
ba
;

132 
	`dvmS‘Clo£OnExec
(
dexFd
);

134 ià(
	`v”ifyMagicAndG‘AdËr32
(
dexFd
, &
adËr32
) < 0) {

135 
	`ALOGE
("E¼Ü w™h h—d” fÜ %s", 
feName
);

136 
ba
;

139 ià(
	`g‘ModTimeAndSize
(
dexFd
, &
modTime
, &
feSize
) < 0) {

140 
	`ALOGE
("E¼Ü w™h sˆfÜ %s", 
feName
);

141 
ba
;

150 ià(
odexOuutName
 =ğ
NULL
) {

151 
ÿchedName
 = 
	`dexO±G’”©eCacheFeName
(
feName
, 
NULL
);

152 ià(
ÿchedName
 =ğ
NULL
)

153 
ba
;

155 
ÿchedName
 = 
	`¡rdup
(
odexOuutName
);

158 
	`ALOGV
("dvmRawDexFileOpen: Checking cache for %s (%s)",

159 
feName
, 
ÿchedName
);

161 
İtFd
 = 
	`dvmO³nCachedDexFe
(
feName
, 
ÿchedName
, 
modTime
,

162 
adËr32
, 
isBoÙ¡¿p
, &
ÃwFe
, 
Œue
);

164 ià(
İtFd
 < 0) {

165 
	`ALOGI
("Unableo open or create cache for %s (%s)",

166 
feName
, 
ÿchedName
);

167 
ba
;

169 
locked
 = 
Œue
;

177 ià(
ÃwFe
) {

178 
u8
 
¡¬tWh’
, 
cİyWh’
, 
’dWh’
;

179 
boŞ
 
»suÉ
;

180 
off_t
 
dexOff£t
;

182 
dexOff£t
 = 
	`l£ek
(
İtFd
, 0, 
SEEK_CUR
);

183 
»suÉ
 = (
dexOff£t
 > 0);

185 ià(
»suÉ
) {

186 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

187 
»suÉ
 = 
	`cİyFeToFe
(
İtFd
, 
dexFd
, 
feSize
) == 0;

188 
cİyWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

191 ià(
»suÉ
) {

192 
»suÉ
 = 
	`dvmO±imizeDexFe
(
İtFd
, 
dexOff£t
, 
feSize
,

193 
feName
, 
modTime
, 
adËr32
, 
isBoÙ¡¿p
);

196 ià(!
»suÉ
) {

197 
	`ALOGE
("UÇbËØexŒaù+İtimizDEX from '%s'", 
feName
);

198 
ba
;

201 
’dWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

202 
	`ALOGD
("DEX…rep '%s': copy in %dms,„ewrite %dms",

203 
feName
,

204 (è(
cİyWh’
 - 
¡¬tWh’
) / 1000,

205 (è(
’dWh’
 - 
cİyWh’
) / 1000);

212 ià(
	`dvmDexFeO³nFromFd
(
İtFd
, &
pDvmDex
) != 0) {

213 
	`ALOGI
("UÇbËØm­ cached %s", 
feName
);

214 
ba
;

217 ià(
locked
) {

219 ià(!
	`dvmUÆockCachedDexFe
(
İtFd
)) {

221 
	`ALOGE
("Unableo unlock DEX file");

222 
ba
;

224 
locked
 = 
çl£
;

227 
	`ALOGV
("SucûssfuÎy o³Ãd '%s'", 
feName
);

229 *
µRawDexFe
 = (
RawDexFe
*è
	`ÿÎoc
(1, (RawDexFile));

230 (*
µRawDexFe
)->
ÿcheFeName
 = 
ÿchedName
;

231 (*
µRawDexFe
)->
pDvmDex
 =…DvmDex;

232 
ÿchedName
 = 
NULL
;

233 
»suÉ
 = 0;

235 
ba
:

236 
	`ä“
(
ÿchedName
);

237 ià(
dexFd
 >= 0) {

238 
	`şo£
(
dexFd
);

240 ià(
İtFd
 >= 0) {

241 ià(
locked
)

242 (è
	`dvmUÆockCachedDexFe
(
İtFd
);

243 
	`şo£
(
İtFd
);

245  
»suÉ
;

246 
	}
}

249 
	$dvmRawDexFeO³nA¼ay
(
u1
* 
pBy‹s
, 
u4
 
Ëngth
, 
RawDexFe
** 
µRawDexFe
)

251 
DvmDex
* 
pDvmDex
 = 
NULL
;

253 ià(!
	`dvmP»·»DexInMemÜy
(
pBy‹s
, 
Ëngth
, &
pDvmDex
)) {

254 
	`ALOGD
("Unableo open„aw DEX from‡rray");

257 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

259 *
µRawDexFe
 = (
RawDexFe
*è
	`ÿÎoc
(1, (RawDexFile));

260 (*
µRawDexFe
)->
pDvmDex
 =…DvmDex;

263 
	}
}

268 
	$dvmRawDexFeF»e
(
RawDexFe
* 
pRawDexFe
)

270 ià(
pRawDexFe
 =ğ
NULL
)

273 
	`dvmDexFeF»e
(
pRawDexFe
->
pDvmDex
);

274 
	`ä“
(
pRawDexFe
->
ÿcheFeName
);

275 
	`ä“
(
pRawDexFe
);

276 
	}
}

	@vm/RawDexFile.h

21 #iâdeà
DALVIK_RAWDEXFILE_H_


22 
	#DALVIK_RAWDEXFILE_H_


	)

28 
	sRawDexFe
 {

29 * 
	mÿcheFeName
;

30 
DvmDex
* 
	mpDvmDex
;

39 
dvmRawDexFeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

40 
RawDexFe
** 
µDexFe
, 
boŞ
 
isBoÙ¡¿p
);

52 
dvmRawDexFeO³nA¼ay
(
u1
* 
pBy‹s
, 
u4
 
Ëngth
, 
RawDexFe
** 
µDexFe
);

57 
dvmRawDexFeF»e
(
RawDexFe
* 
pRawDexFe
);

62 
INLINE
 
DvmDex
* 
	$dvmG‘RawDexFeDex
(
RawDexFe
* 
pRawDexFe
) {

63  
pRawDexFe
->
pDvmDex
;

64 
	}
}

67 
INLINE
 cÚ¡ * 
	$dvmG‘RawDexFeCacheFeName
(
RawDexFe
* 
pRawDexFe
) {

68  
pRawDexFe
->
ÿcheFeName
;

69 
	}
}

	@vm/ReferenceTable.cpp

20 
	~"D®vik.h
"

25 
boŞ
 
	$dvmIn™Reã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
š™ŸlCouÁ
,

26 
maxCouÁ
)

28 
	`as£¹
(
š™ŸlCouÁ
 > 0);

29 
	`as£¹
(
š™ŸlCouÁ
 <ğ
maxCouÁ
);

31 
pRef
->
bË
 = (
Objeù
**è
	`m®loc
(
š™ŸlCouÁ
 * (Object*));

32 ià(
pRef
->
bË
 =ğ
NULL
)

33  
çl£
;

34 #iâdeà
NDEBUG


35 
	`mem£t
(
pRef
->
bË
, 0xdd, 
š™ŸlCouÁ
 * (
Objeù
*));

37 
pRef
->
ÃxtEÁry
 =…Ref->
bË
;

38 
pRef
->
®locEÁr›s
 = 
š™ŸlCouÁ
;

39 
pRef
->
maxEÁr›s
 = 
maxCouÁ
;

41  
Œue
;

42 
	}
}

47 
	$dvmCË¬Reã»nûTabË
(
Reã»nûTabË
* 
pRef
)

49 
	`ä“
(
pRef
->
bË
);

50 
pRef
->
bË
 =…Ref->
ÃxtEÁry
 = 
NULL
;

51 
pRef
->
®locEÁr›s
 =…Ref->
maxEÁr›s
 = -1;

52 
	}
}

57 
boŞ
 
	$dvmAddToReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
* 
obj
)

59 
	`as£¹
(
obj
 !ğ
NULL
);

60 
	`as£¹
(
	`dvmIsH—pAdd»ss
(
obj
));

61 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

62 
	`as£¹
(
pRef
->
®locEÁr›s
 <ğpRef->
maxEÁr›s
);

64 ià(
pRef
->
ÃxtEÁry
 =ğpRef->
bË
 +…Ref->
®locEÁr›s
) {

66 ià(
pRef
->
ÃxtEÁry
 =ğpRef->
bË
 +…Ref->
maxEÁr›s
) {

67 
	`ALOGW
("Reã»nûTabË ov”æow (max=%d)", 
pRef
->
maxEÁr›s
);

68  
çl£
;

71 
Objeù
** 
ÃwTabË
;

72 
ÃwSize
;

74 
ÃwSize
 = 
pRef
->
®locEÁr›s
 * 2;

75 ià(
ÃwSize
 > 
pRef
->
maxEÁr›s
)

76 
ÃwSize
 = 
pRef
->
maxEÁr›s
;

77 
	`as£¹
(
ÃwSize
 > 
pRef
->
®locEÁr›s
);

79 
ÃwTabË
 = (
Objeù
**è
	`»®loc
(
pRef
->
bË
, 
ÃwSize
 * (Object*));

80 ià(
ÃwTabË
 =ğ
NULL
) {

81 
	`ALOGE
("Unableoƒxpand„efable (from %do %d %d-byteƒntries)",

82 
pRef
->
®locEÁr›s
, 
ÃwSize
, (
Objeù
*));

83  
çl£
;

85 
	`LOGVV
("Growšg %°äom %dØ%d", 
pRef
,…Ref->
®locEÁr›s
, 
ÃwSize
);

88 
pRef
->
ÃxtEÁry
 = 
ÃwTabË
 + (pRef->ÃxtEÁry -…Ref->
bË
);

89 
pRef
->
bË
 = 
ÃwTabË
;

90 
pRef
->
®locEÁr›s
 = 
ÃwSize
;

93 *
pRef
->
ÃxtEÁry
++ = 
obj
;

94  
Œue
;

95 
	}
}

100 
Objeù
** 
	$dvmFšdInReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

101 
Objeù
* 
obj
)

103 
Objeù
** 
±r
;

105 
±r
 = 
pRef
->
ÃxtEÁry
;

106 --
±r
 >ğ
bÙtom
) {

107 ià(*
±r
 =ğ
obj
)

108  
±r
;

110  
NULL
;

111 
	}
}

121 
boŞ
 
	$dvmRemoveFromReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

122 
Objeù
* 
obj
)

124 
Objeù
** 
±r
;

126 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

132 
±r
 = 
	`dvmFšdInReã»nûTabË
(
pRef
, 
bÙtom
, 
obj
);

133 ià(
±r
 =ğ
NULL
)

134  
çl£
;

139 
pRef
->
ÃxtEÁry
--;

140 
moveCouÁ
 = 
pRef
->
ÃxtEÁry
 - 
±r
;

141 ià(
moveCouÁ
 != 0) {

143 
	`memmove
(
±r
,…Œ+1, 
moveCouÁ
 * (
Objeù
*));

150  
Œue
;

151 
	}
}

157 
size_t
 
	$g‘EËm’tCouÁ
(cÚ¡ 
Objeù
* 
obj
)

159 cÚ¡ 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
obj
;

160 ià(
¬¿yObj
 =ğ
NULL
 ||‡¼ayObj =ğ
kCË¬edJniW—kGlob®
 ||

161 
¬¿yObj
->
şazz
 =ğ
NULL
 || !
	`dvmIsA¼ay
(arrayObj)) {

164  
¬¿yObj
->
Ëngth
;

165 
	}
}

171 
	$com·»Objeù
(cÚ¡ * 
vobj1
, cÚ¡ * 
vobj2
)

173 cÚ¡ 
Objeù
* 
obj1
 = *((Objeù* cÚ¡*è
vobj1
);

174 cÚ¡ 
Objeù
* 
obj2
 = *((Objeù* cÚ¡*è
vobj2
);

177 ià(
obj1
 =ğ
NULL
) {

178 ià(
obj2
 =ğ
NULL
) {

183 } ià(
obj2
 =ğ
NULL
) {

186 ià(
obj1
 =ğ
kCË¬edJniW—kGlob®
) {

187 ià(
obj2
 =ğ
kCË¬edJniW—kGlob®
) {

192 } ià(
obj2
 =ğ
kCË¬edJniW—kGlob®
) {

196 ià(
obj1
->
şazz
 !ğ
obj2
->clazz) {

197  (
u1
*)
obj1
->
şazz
 - (u1*)
obj2
->clazz;

199 
size_t
 
couÁ1
 = 
	`g‘EËm’tCouÁ
(
obj1
);

200 
size_t
 
couÁ2
 = 
	`g‘EËm’tCouÁ
(
obj2
);

201 ià(
couÁ1
 !ğ
couÁ2
) {

202  
couÁ1
 - 
couÁ2
;

204  (
u1
*)
obj1
 - (u1*)
obj2
;

207 
	}
}

216 
	$logSumm¬yLše
(cÚ¡ 
Objeù
* 
obj
, 
size_t
 
–ems
, 
id’tiÿl
, 
equiv
)

218 ià(
obj
 =ğ
NULL
) {

219 
	`ALOGW
(" NULL„eã»nû (couÁ=%d)", 
equiv
);

222 ià(
obj
 =ğ
kCË¬edJniW—kGlob®
) {

223 
	`ALOGW
(" cË¬ed jw—k (couÁ=%d)", 
equiv
);

227 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËTy³
(
obj
));

228 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

231 
şassName
 = "java.lang.Class";

233 ià(
–ems
 != 0) {

234 
	`SŒšgAµ’dF
(&
şassName
, " (%zdƒËm’ts)", 
–ems
);

237 
size_t
 
tÙ®
 = 
id’tiÿl
 + 
equiv
 + 1;

238 
¡d
::
¡ršg
 
	`msg
(
	`SŒšgPrštf
("%5d oà%s", 
tÙ®
, 
şassName
.
	`c_¡r
()));

239 ià(
id’tiÿl
 + 
equiv
 != 0) {

240 
	`SŒšgAµ’dF
(&
msg
, " (%d uniquš¡ªûs)", 
equiv
 + 1);

242 
	`ALOGW
(" %s", 
msg
.
	`c_¡r
());

243 
	}
}

251 
	$dvmDumpReã»nûTabËCÚ‹Ás
(
Objeù
* cÚ¡* 
»fs
, 
size_t
 
couÁ
,

252 cÚ¡ * 
desü
)

254 
	`ALOGW
("% »ã»nûabË (%pèdump:", 
desü
, 
»fs
);

256 ià(
couÁ
 == 0) {

257 
	`ALOGW
(" (empty)");

262 cÚ¡ 
size_t
 
kLa¡
 = 10;

263 
fœ¡
 = 
couÁ
 - 
kLa¡
;

264 ià(
fœ¡
 < 0) {

265 
fœ¡
 = 0;

267 
	`ALOGW
(" La¡ %dƒÁr› (oà%d):", (
couÁ
 - 
fœ¡
), count);

268 
idx
 = 
couÁ
 - 1; idx >ğ
fœ¡
; --idx) {

269 cÚ¡ 
Objeù
* 
»f
 = 
»fs
[
idx
];

270 ià(
»f
 =ğ
NULL
) {

273 ià(
»f
 =ğ
kCË¬edJniW—kGlob®
) {

274 
	`ALOGW
(" %5d: cË¬ed jw—k", 
idx
);

277 ià(
»f
->
şazz
 =ğ
NULL
) {

279 
size_t
 
size
 = 
	`dvmObjeùSizeInH—p
(
»f
);

280 
	`ALOGW
(" %5d: %°Ôawè(%zd by‹s)", 
idx
, 
»f
, 
size
);

284 
¡d
::
¡ršg
 
	`şassName
(
	`dvmHumªR—dabËTy³
(
»f
));

286 
¡d
::
¡ršg
 
exŒas
;

287 
size_t
 
–ems
 = 
	`g‘EËm’tCouÁ
(
»f
);

288 ià(
–ems
 != 0) {

289 
	`SŒšgAµ’dF
(&
exŒas
, " (%zdƒËm’ts)", 
–ems
);

290 } ià(
»f
->
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
) {

291 cÚ¡ 
SŒšgObjeù
* 
¡r
 =

292 
»š‹½»t_ÿ¡
<cÚ¡ 
SŒšgObjeù
*>(
»f
);

293 
exŒas
 += " \"";

294 
size_t
 
couÁ
 = 0;

295 * 
s
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡r
);

296 * 
p
 = 
s
;

297 ; *
p
 && 
couÁ
 < 16; ++p, ++count) {

298 
exŒas
 +ğ*
p
;

300 ià(*
p
 == 0) {

301 
exŒas
 += "\"";

303 
	`SŒšgAµ’dF
(&
exŒas
, "... (%d ch¬s)", 
¡r
->
	`Ëngth
());

305 
	`ä“
(
s
);

307 
	`ALOGW
(" %5d: %°%s%s", 
idx
, 
»f
, 
şassName
.
	`c_¡r
(), 
exŒas
.c_str());

311 
Objeù
** 
bËCİy
 = (Objeù**)
	`m®loc
((Objeù*è* 
couÁ
);

312 ià(
bËCİy
 =ğ
NULL
) {

313 
	`ALOGE
("UÇbËØcİyabË w™h %dƒËm’ts", 
couÁ
);

316 
	`memıy
(
bËCİy
, 
»fs
, (
Objeù
*è* 
couÁ
);

317 
	`qsÜt
(
bËCİy
, 
couÁ
, (
Objeù
*), 
com·»Objeù
);

318 
»fs
 = 
bËCİy
;

321 
couÁ
 > 0 && 
»fs
[couÁ-1] =ğ
NULL
) {

322 --
couÁ
;

324 
couÁ
 > 0 && 
»fs
[couÁ-1] =ğ
kCË¬edJniW—kGlob®
) {

325 --
couÁ
;

327 ià(
couÁ
 == 0) {

332 
	`ALOGW
(" Summary:");

333 
size_t
 
equiv
, 
id’tiÿl
;

334 
equiv
 = 
id’tiÿl
 = 0;

335 
size_t
 
idx
;

336 
size_t
 
–ems
;

337 
idx
 = 1; idx < 
couÁ
; idx++) {

338 
–ems
 = 
	`g‘EËm’tCouÁ
(
»fs
[
idx
-1]);

340 ià(
»fs
[
idx
] ==„efs[idx-1]) {

342 
id’tiÿl
++;

343 } ià(
»fs
[
idx
]->
şazz
 ==„efs[idx-1]->clazz &&

344 
	`g‘EËm’tCouÁ
(
»fs
[
idx
]è=ğ
–ems
)

347 
equiv
++;

350 
	`logSumm¬yLše
(
»fs
[
idx
-1], 
–ems
, 
id’tiÿl
, 
equiv
);

351 
equiv
 = 
id’tiÿl
 = 0;

356 
–ems
 = 
	`g‘EËm’tCouÁ
(
»fs
[
idx
-1]);

357 
	`logSumm¬yLše
(
»fs
[
couÁ
-1], 
–ems
, 
id’tiÿl
, 
equiv
);

359 
	`ä“
(
bËCİy
);

360 
	}
}

365 
	$dvmDumpReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, cÚ¡ * 
desü
)

367 
	`dvmDumpReã»nûTabËCÚ‹Ás
(
pRef
->
bË
, 
	`dvmReã»nûTabËEÁr›s
(pRef),

368 
desü
);

369 
	}
}

	@vm/ReferenceTable.h

23 #iâdeà
DALVIK_REFERENCETABLE_H_


24 
	#DALVIK_REFERENCETABLE_H_


	)

39 
	sReã»nûTabË
 {

40 
Objeù
** 
	mÃxtEÁry
;

41 
Objeù
** 
	mbË
;

43 
	m®locEÁr›s
;

44 
	mmaxEÁr›s
;

54 
boŞ
 
dvmIn™Reã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
š™ŸlCouÁ
,

55 
maxCouÁ
);

63 
dvmCË¬Reã»nûTabË
(
Reã»nûTabË
* 
pRef
);

68 
INLINE
 
size_t
 
	$dvmReã»nûTabËEÁr›s
(cÚ¡ 
Reã»nûTabË
* 
pRef
)

70  
pRef
->
ÃxtEÁry
 -…Ref->
bË
;

71 
	}
}

77 
INLINE
 
size_t
 
	$dvmIsReã»nûTabËFuÎ
(cÚ¡ 
Reã»nûTabË
* 
pRef
)

79  
	`dvmReã»nûTabËEÁr›s
(
pRef
è=ğ(
size_t
íRef->
®locEÁr›s
;

80 
	}
}

89 
boŞ
 
dvmAddToReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
* 
obj
);

98 
Objeù
** 
dvmFšdInReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, Objeù** 
bÙtom
,

99 
Objeù
* 
obj
);

109 
boŞ
 
dvmRemoveFromReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

110 
Objeù
* 
obj
);

117 
dvmDumpReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, cÚ¡ * 
desü
);

122 
dvmDumpReã»nûTabËCÚ‹Ás
(
Objeù
* cÚ¡* 
»fs
, 
size_t
 
couÁ
,

123 cÚ¡ * 
desü
);

	@vm/ShadowAPI.cpp

1 
	~"ShadowAPI.h
"

3 
	~"D®vik.h
"

4 
	~<¡dlib.h
>

5 
	~"oo/Objeù.h
"

7 
	$G‘ObjeùId
(
Th»ad
* 
£lf
, 
jobjeù
 
jo
){

8  
	`dvmDecodeIndœeùRef
(
£lf
, 
jo
)->
uuid
;

9 
	}
}

11 
	$‹¡
(){

13 
	}
}

	@vm/ShadowAPI.h

1 #iâdeà
DALVIK_SHADOWAPI_H_


2 
	#DALVIK_SHADOWAPI_H_


	)

4 
	~"D®vik.h
"

5 
	~"JniIÁ”Çl.h
"

7 
G‘ObjeùId
(
Th»ad
* 
£lf
, 
jobjeù
 
jo
);

8 
‹¡
();

	@vm/SignalCatcher.cpp

22 
	~"D®vik.h
"

24 
	~<¡dlib.h
>

25 
	~<uni¡d.h
>

26 
	~<sigÇl.h
>

27 
	~<±h»ad.h
>

28 
	~<sys/fe.h
>

29 
	~<sys/time.h
>

30 
	~<fú.h
>

31 
	~<”ºo.h
>

33 
	~<cuts/İ’_mem¡»am.h
>

35 * 
sigÇlC©ch”Th»adS¹
(* 
¬g
);

42 
boŞ
 
	$dvmSigÇlC©ch”S¹up
()

44 
gDvm
.
h®tSigÇlC©ch”
 = 
çl£
;

46 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvm
.
sigÇlC©ch”HªdË
,

47 "SigÇÈC©ch”", 
sigÇlC©ch”Th»adS¹
, 
NULL
))

48  
çl£
;

50  
Œue
;

51 
	}
}

59 
	$dvmSigÇlC©ch”Shutdown
()

61 
gDvm
.
h®tSigÇlC©ch”
 = 
Œue
;

62 ià(
gDvm
.
sigÇlC©ch”HªdË
 == 0)

65 
	`±h»ad_kl
(
gDvm
.
sigÇlC©ch”HªdË
, 
SIGQUIT
);

67 
	`±h»ad_još
(
gDvm
.
sigÇlC©ch”HªdË
, 
NULL
);

68 
	`ALOGV
("signal catcher has shut down");

69 
	}
}

75 
	$´štProûssName
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
)

77 
fd
 = -1;

79 
fd
 = 
	`İ’
("/´oc/£lf/cmdlše", 
O_RDONLY
, 0);

80 ià(
fd
 < 0)

81 
ba
;

83 
tmpBuf
[256];

84 
ssize_t
 
aùu®
;

86 
aùu®
 = 
	`»ad
(
fd
, 
tmpBuf
, (tmpBuf)-1);

87 ià(
aùu®
 <= 0)

88 
ba
;

90 
tmpBuf
[
aùu®
] = '\0';

91 
	`dvmPrštDebugMes§ge
(
rg‘
, "Cmd†še: %s\n", 
tmpBuf
);

93 
ba
:

94 ià(
fd
 >= 0)

95 
	`şo£
(
fd
);

96 
	}
}

102 
	$logTh»adScks
(
FILE
* 
å
)

104 
DebugOuutT¬g‘
 
rg‘
;

106 
	`dvmC»©eFeOuutT¬g‘
(&
rg‘
, 
å
);

108 
pid_t
 
pid
 = 
	`g‘pid
();

109 
time_t
 
now
 = 
	`time
(
NULL
);

110 
tm
* 
±m
;

111 #ifdeà
HAVE_LOCALTIME_R


112 
tm
 
tmbuf
;

113 
±m
 = 
	`loÿÉime_r
(&
now
, &
tmbuf
);

115 
±m
 = 
	`loÿÉime
(&
now
);

117 
	`dvmPrštDebugMes§ge
(&
rg‘
,

119 
pid
, 
±m
->
tm_y—r
 + 1900,…tm->
tm_mÚ
+1,…tm->
tm_mday
,

120 
±m
->
tm_hour
,…tm->
tm_mš
,…tm->
tm_£c
);

121 
	`´štProûssName
(&
rg‘
);

122 
	`dvmPrštDebugMes§ge
(&
rg‘
, "\n");

123 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
Œue
);

124 
	`årštf
(
å
, "-----ƒnd %d -----\n", 
pid
);

125 
	}
}

141 
	$hªdËSigQu™
()

143 * 
ŒaûBuf
 = 
NULL
;

144 
size_t
 
ŒaûL’
;

146 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_STACK_DUMP
);

148 
	`dvmDumpLßd”Sts
("sig");

150 ià(
gDvm
.
¡ackT¿ûFe
 =ğ
NULL
) {

152 
DebugOuutT¬g‘
 
rg‘
;

153 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

154 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
Œue
);

157 
FILE
* 
memå
 = 
	`İ’_mem¡»am
(&
ŒaûBuf
, &
ŒaûL’
);

158 ià(
memå
 =ğ
NULL
) {

159 
	`ALOGE
("Unableo create memstream for stackraces");

160 
ŒaûBuf
 = 
NULL
;

163 
	`logTh»adScks
(
memå
);

164 
	`fşo£
(
memå
);

168 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

169 
	`dvmComp”DumpSts
();

172 ià(
çl£
è
	`dvmDumpT¿ckedAÎoÿtiÚs
(
Œue
);

174 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_STACK_DUMP
);

176 ià(
ŒaûBuf
 !ğ
NULL
) {

181 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
	`dvmTh»adS–f
(), 
THREAD_VMWAIT
);

187 
fd
 = 
	`İ’
(
gDvm
.
¡ackT¿ûFe
, 
O_WRONLY
 | 
O_APPEND
 | 
O_CREAT
, 0666);

188 ià(
fd
 < 0) {

189 
	`ALOGE
("Unableo open stackrace file '%s': %s",

190 
gDvm
.
¡ackT¿ûFe
, 
	`¡»¼Ü
(
”ºo
));

192 
ssize_t
 
aùu®
 = 
	`wr™e
(
fd
, 
ŒaûBuf
, 
ŒaûL’
);

193 ià(
aùu®
 !ğ(
ssize_t
è
ŒaûL’
) {

194 
	`ALOGE
("Failedo write stackraceso %s (%d of %zd): %s",

195 
gDvm
.
¡ackT¿ûFe
, (è
aùu®
, 
ŒaûL’
,

196 
	`¡»¼Ü
(
”ºo
));

198 
	`ALOGI
("WrÙ¡ack¿û tØ'%s'", 
gDvm
.
¡ackT¿ûFe
);

200 
	`şo£
(
fd
);

203 
	`ä“
(
ŒaûBuf
);

204 
	`dvmChªgeStus
(
	`dvmTh»adS–f
(), 
ŞdStus
);

206 
	}
}

211 
	$hªdËSigU¤1
()

213 
	`ALOGI
("SIGUSR1 forcing GC (no HPROF)");

214 
	`dvmCŞËùG¬bage
();

215 
	}
}

217 #ià
defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

219 
	$´štAÎCÏss
(*
±r
)

221 
CÏssObjeù
 **
şassPP
 = (CÏssObjeù **è
±r
;

222 
	`ALOGE
("şas %s", (*
şassPP
)->
desütÜ
);

224 
	}
}

230 
	$hªdËSigU¤2
()

232 
codeCacheRe£tCouÁ
 = 0;

233 
gDvmJ™
.
»ûivedSIGUSR2
 ^ğ
Œue
;

234 ià((--
codeCacheRe£tCouÁ
 & 7) == 0) {

236 
	`dvmJ™SÿnAÎCÏssPoš‹rs
(
´štAÎCÏss
);

237 
gDvmJ™
.
codeCacheFuÎ
 = 
Œue
;

239 
	`dvmComp”DumpSts
();

241 
	`dvmJ™UnchašAÎ
();

242 
	`ALOGD
("Send %d more signalso„esethe code cache",

243 
codeCacheRe£tCouÁ
 & 7);

245 
	`dvmCheckIÁ”pS‹CÚsi¡’cy
();

246 
	}
}

252 * 
	$sigÇlC©ch”Th»adS¹
(* 
¬g
)

254 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

255 
sig£t_t
 
mask
;

256 
cc
;

258 
	`UNUSED_PARAMETER
(
¬g
);

260 
	`ALOGV
("SigÇÈÿtch”h»ad s¹ed (th»adid=%d)", 
£lf
->
th»adId
);

263 
	`sigem±y£t
(&
mask
);

264 
	`sigadd£t
(&
mask
, 
SIGQUIT
);

265 
	`sigadd£t
(&
mask
, 
SIGUSR1
);

266 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

267 
	`sigadd£t
(&
mask
, 
SIGUSR2
);

270 
Œue
) {

271 
rcvd
;

273 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

284 
loİ
:

285 
cc
 = 
	`sigwa™
(&
mask
, &
rcvd
);

286 ià(
cc
 != 0) {

287 ià(
cc
 =ğ
EINTR
) {

289 
loİ
;

291 
	`as£¹
(!"bad„esult from sigwait");

294 ià(!
gDvm
.
h®tSigÇlC©ch”
) {

295 
	`ALOGI
("threadid=%d:„eactingo signal %d",

296 
	`dvmTh»adS–f
()->
th»adId
, 
rcvd
);

300 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

302 ià(
gDvm
.
h®tSigÇlC©ch”
)

305 
rcvd
) {

306 
SIGQUIT
:

307 
	`hªdËSigQu™
();

309 
SIGUSR1
:

310 
	`hªdËSigU¤1
();

312 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

313 
SIGUSR2
:

314 
	`hªdËSigU¤2
();

318 
	`ALOGE
("uÃx³ùed sigÇÈ%d", 
rcvd
);

323  
NULL
;

324 
	}
}

	@vm/SignalCatcher.h

19 #iâdeà
DALVIK_SIGNALCATCHER_H_


20 
	#DALVIK_SIGNALCATCHER_H_


	)

22 
boŞ
 
dvmSigÇlC©ch”S¹up
();

23 
dvmSigÇlC©ch”Shutdown
();

	@vm/StdioConverter.cpp

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

23 
	~<uni¡d.h
>

24 
	~<fú.h
>

25 
	~<”ºo.h
>

27 
	#kF’oStdout
 1

	)

28 
	#kF’oStd”r
 2

	)

30 
	#kMaxLše
 512

	)

35 
	sBufã»dD©a
 {

36 
	mbuf
[
kMaxLše
+1];

37 
	mcouÁ
;

41 * 
¡dioCÚv”‹rTh»adS¹
(* 
¬g
);

42 
boŞ
 
»adAndLog
(
fd
, 
Bufã»dD©a
* 
d©a
, cÚ¡ * 
g
);

50 
boŞ
 
	$dvmStdioCÚv”‹rS¹up
()

52 
gDvm
.
h®tStdioCÚv”‹r
 = 
çl£
;

54 
	`dvmIn™Mu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

55 
	`±h»ad_cÚd_š™
(&
gDvm
.
¡dioCÚv”‹rCÚd
, 
NULL
);

57 ià(
	`pe
(
gDvm
.
¡doutPe
) != 0) {

58 
	`ALOGW
("pçed: %s", 
	`¡»¼Ü
(
”ºo
));

59  
çl£
;

61 ià(
	`pe
(
gDvm
.
¡d”rPe
) != 0) {

62 
	`ALOGW
("pçed: %s", 
	`¡»¼Ü
(
”ºo
));

63  
çl£
;

66 ià(
	`dup2
(
gDvm
.
¡doutPe
[1], 
kF’oStdout
) != kFilenoStdout) {

67 
	`ALOGW
("dup2(1èçed: %s", 
	`¡»¼Ü
(
”ºo
));

68  
çl£
;

70 
	`şo£
(
gDvm
.
¡doutPe
[1]);

71 
gDvm
.
¡doutPe
[1] = -1;

72 #ifdeà
HAVE_ANDROID_OS


75 ià(
	`dup2
(
gDvm
.
¡d”rPe
[1], 
kF’oStd”r
) != kFilenoStderr) {

76 
	`ALOGW
("dup2(2èçed: %d %s", 
”ºo
, 
	`¡»¼Ü
(errno));

77  
çl£
;

79 
	`şo£
(
gDvm
.
¡d”rPe
[1]);

80 
gDvm
.
¡d”rPe
[1] = -1;

87 
	`dvmLockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

89 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvm
.
¡dioCÚv”‹rHªdË
,

91 
¡dioCÚv”‹rTh»adS¹
,

92 
NULL
)) {

93  
çl£
;

96 !
gDvm
.
¡dioCÚv”‹rR—dy
) {

97 
	`dvmWa™CÚd
(&
gDvm
.
¡dioCÚv”‹rCÚd
, &gDvm.
¡dioCÚv”‹rLock
);

99 
	`dvmUÆockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

101  
Œue
;

102 
	}
}

110 
	$dvmStdioCÚv”‹rShutdown
()

112 
gDvm
.
h®tStdioCÚv”‹r
 = 
Œue
;

113 ià(
gDvm
.
¡dioCÚv”‹rHªdË
 == 0)

117 
	`´štf
("Shutting down\n");

118 
	`fæush
(
¡dout
);

120 
	`ALOGD
("Joining stdio converter...");

121 
	`±h»ad_još
(
gDvm
.
¡dioCÚv”‹rHªdË
, 
NULL
);

122 
	}
}

129 * 
	$¡dioCÚv”‹rTh»adS¹
(* 
¬g
)

131 
cc
;

134 
	`dvmLockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

135 
gDvm
.
¡dioCÚv”‹rR—dy
 = 
Œue
;

136 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
¡dioCÚv”‹rCÚd
);

137 
	`as£¹
(
cc
 == 0);

138 
	`dvmUÆockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

141 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

146 
Bufã»dD©a
* 
¡doutD©a
 = 
Ãw
 BufferedData;

147 
Bufã»dD©a
* 
¡d”rD©a
 = 
Ãw
 BufferedData;

148 
¡doutD©a
->
couÁ
 = 
¡d”rD©a
->count = 0;

153 !
gDvm
.
h®tStdioCÚv”‹r
) {

154 
fd_£t
 
»adfds
;

155 
maxFd
, 
fdCouÁ
;

157 
	`FD_ZERO
(&
»adfds
);

158 
	`FD_SET
(
gDvm
.
¡doutPe
[0], &
»adfds
);

159 
	`FD_SET
(
gDvm
.
¡d”rPe
[0], &
»adfds
);

160 
maxFd
 = 
	`MAX
(
gDvm
.
¡doutPe
[0], gDvm.
¡d”rPe
[0]);

162 
fdCouÁ
 = 
	`£Ëù
(
maxFd
+1, &
»adfds
, 
NULL
, NULL, NULL);

164 ià(
fdCouÁ
 < 0) {

165 ià(
”ºo
 !ğ
EINTR
) {

166 
	`ALOGE
("select on stdout/stderr failed");

169 
	`ALOGD
("Got EINTR, ignoring");

170 } ià(
fdCouÁ
 == 0) {

171 
	`ALOGD
("WEIRD: select„eturned zero");

173 
boŞ
 
”r
 = 
çl£
;

174 ià(
	`FD_ISSET
(
gDvm
.
¡doutPe
[0], &
»adfds
)) {

175 
”r
 |ğ!
	`»adAndLog
(
gDvm
.
¡doutPe
[0], 
¡doutD©a
,

178 ià(
	`FD_ISSET
(
gDvm
.
¡d”rPe
[0], &
»adfds
)) {

179 
”r
 |ğ!
	`»adAndLog
(
gDvm
.
¡d”rPe
[0], 
¡d”rD©a
,

184 ià(
”r
) {

185 
	`ALOGW
("stdio converter got„eadƒrror; shutting it down");

191 
	`şo£
(
gDvm
.
¡doutPe
[0]);

192 
	`şo£
(
gDvm
.
¡d”rPe
[0]);

194 
d–‘e
 
¡doutD©a
;

195 
d–‘e
 
¡d”rD©a
;

198 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

199  
NULL
;

200 
	}
}

206 
boŞ
 
	$»adAndLog
(
fd
, 
Bufã»dD©a
* 
d©a
, cÚ¡ * 
g
)

208 
ssize_t
 
aùu®
;

209 
size_t
 
wªt
;

211 
	`as£¹
(
d©a
->
couÁ
 < 
kMaxLše
);

213 
wªt
 = 
kMaxLše
 - 
d©a
->
couÁ
;

214 
aùu®
 = 
	`»ad
(
fd
, 
d©a
->
buf
 + d©a->
couÁ
, 
wªt
);

215 ià(
aùu®
 <= 0) {

216 
	`ALOGW
("read %s: (%d,%d) failed (%d): %s",

217 
g
, 
fd
, 
wªt
, ()
aùu®
, 
	`¡»¼Ü
(
”ºo
));

218  
çl£
;

222 
d©a
->
couÁ
 +ğ
aùu®
;

228 * 
ı
 = 
d©a
->
buf
;

229 cÚ¡ * 
¡¬t
 = 
d©a
->
buf
;

230 
i
 = 
d©a
->
couÁ
;

231 
i
 = 
d©a
->
couÁ
; i > 0; i--, 
ı
++) {

232 ià(*
ı
 =ğ'\n' || (*ı =ğ'\r' && 
i
 != 0 && *(cp+1) != '\n')) {

233 *
ı
 = '\0';

235 
	`ALOG
(
LOG_INFO
, 
g
, "%s", 
¡¬t
);

236 
¡¬t
 = 
ı
+1;

243 ià(
¡¬t
 =ğ
d©a
->
buf
 && d©a->
couÁ
 =ğ
kMaxLše
) {

244 
d©a
->
buf
[
kMaxLše
] = '\0';

245 
	`ALOG
(
LOG_INFO
, 
g
, "%s!", 
¡¬t
);

246 
¡¬t
 = 
ı
 + 
kMaxLše
;

254 ià(
¡¬t
 !ğ
d©a
->
buf
) {

255 ià(
¡¬t
 >ğ
d©a
->
buf
 + d©a->
couÁ
) {

257 
d©a
->
couÁ
 = 0;

260 
»maššg
 = 
d©a
->
couÁ
 - (
¡¬t
 - d©a->
buf
);

261 
	`memmove
(
d©a
->
buf
, 
¡¬t
, 
»maššg
);

262 
d©a
->
couÁ
 = 
»maššg
;

266  
Œue
;

267 
	}
}

	@vm/StdioConverter.h

19 #iâdeà
DALVIK_STDOUTCONVERTER_H_


20 
	#DALVIK_STDOUTCONVERTER_H_


	)

22 
boŞ
 
dvmStdioCÚv”‹rS¹up
();

23 
dvmStdioCÚv”‹rShutdown
();

	@vm/Sync.cpp

17 
	~"D®vik.h
"

19 
	~<fú.h
>

20 
	~<¡dlib.h
>

21 
	~<uni¡d.h
>

22 
	~<±h»ad.h
>

23 
	~<time.h
>

24 
	~<”ºo.h
>

72 
	sMÚ™Ü
 {

73 
Th»ad
* 
	mowÃr
;

74 
	mlockCouÁ
;

75 
Objeù
* 
	mobj
;

77 
Th»ad
* 
	mwa™S‘
;

79 
±h»ad_mu‹x_t
 
	mlock
;

81 
MÚ™Ü
* 
	mÃxt
;

87 cÚ¡ 
M‘hod
* 
	mowÃrM‘hod
;

88 
u4
 
	mowÃrPc
;

95 
MÚ™Ü
* 
	$dvmC»©eMÚ™Ü
(
Objeù
* 
obj
)

97 
MÚ™Ü
* 
mÚ
;

99 
mÚ
 = (
MÚ™Ü
*è
	`ÿÎoc
(1, (Monitor));

100 ià(
mÚ
 =ğ
NULL
) {

101 
	`ALOGE
("Unableo‡llocate monitor");

102 
	`dvmAbÜt
();

104 ià(((
u4
)
mÚ
 & 7) != 0) {

105 
	`ALOGE
("Mi§ligÃd mÚ™Ü: %p", 
mÚ
);

106 
	`dvmAbÜt
();

108 
mÚ
->
obj
 = obj;

109 
	`dvmIn™Mu‹x
(&
mÚ
->
lock
);

113 
mÚ
->
Ãxt
 = 
gDvm
.
mÚ™ÜLi¡
;

114 } 
	`ªdroid_©omic_»Ëa£_ÿs
((
št32_t
)
mÚ
->
Ãxt
, (int32_t)mon,

115 (
št32_t
*)(*)&
gDvm
.
mÚ™ÜLi¡
) != 0);

117  
mÚ
;

118 
	}
}

123 
	$dvmF»eMÚ™ÜLi¡
()

125 
MÚ™Ü
* 
mÚ
;

126 
MÚ™Ü
* 
ÃxtMÚ
;

128 
mÚ
 = 
gDvm
.
mÚ™ÜLi¡
;

129 
mÚ
 !ğ
NULL
) {

130 
ÃxtMÚ
 = 
mÚ
->
Ãxt
;

131 
	`ä“
(
mÚ
);

132 
mÚ
 = 
ÃxtMÚ
;

134 
	}
}

139 
Objeù
* 
	$dvmG‘MÚ™ÜObjeù
(
MÚ™Ü
* 
mÚ
)

141 ià(
mÚ
 =ğ
NULL
)

142  
NULL
;

144  
mÚ
->
obj
;

145 
	}
}

150 
u4
 
	$lockOwÃr
(
Objeù
* 
obj
)

152 
Th»ad
 *
owÃr
;

153 
u4
 
lock
;

155 
	`as£¹
(
obj
 !ğ
NULL
);

160 
lock
 = 
obj
->lock;

161 ià(
	`LW_SHAPE
(
lock
è=ğ
LW_SHAPE_THIN
) {

162  
	`LW_LOCK_OWNER
(
lock
);

164 
owÃr
 = 
	`LW_MONITOR
(
lock
)->owner;

165  
owÃr
 ? owÃr->
th»adId
 : 0;

167 
	}
}

175 
Th»ad
* 
	$dvmG‘ObjeùLockHŞd”
(
Objeù
* 
obj
)

177 
u4
 
th»adId
 = 
	`lockOwÃr
(
obj
);

179 ià(
th»adId
 == 0)

180  
NULL
;

181  
	`dvmG‘Th»adByTh»adId
(
th»adId
);

182 
	}
}

188 
boŞ
 
	$dvmHŞdsLock
(
Th»ad
* 
th»ad
, 
Objeù
* 
obj
)

190 ià(
th»ad
 =ğ
NULL
 || 
obj
 == NULL) {

191  
çl£
;

193  
th»ad
->
th»adId
 =ğ
	`lockOwÃr
(
obj
);

195 
	}
}

201 
	$ä“MÚ™Ü
(
MÚ™Ü
 *
mÚ
)

203 
	`as£¹
(
mÚ
 !ğ
NULL
);

204 
	`as£¹
(
mÚ
->
obj
 !ğ
NULL
);

205 
	`as£¹
(
	`LW_SHAPE
(
mÚ
->
obj
->
lock
è=ğ
LW_SHAPE_FAT
);

214 
	`as£¹
(
	`±h»ad_mu‹x_Œylock
(&
mÚ
->
lock
) == 0);

215 
	`as£¹
(
	`±h»ad_mu‹x_uÆock
(&
mÚ
->
lock
) == 0);

216 
	`dvmDe¡royMu‹x
(&
mÚ
->
lock
);

217 
	`ä“
(
mÚ
);

218 
	}
}

223 
dvmSw“pMÚ™ÜLi¡
(
MÚ™Ü
** 
mÚ
, (*
isUnm¬kedObjeù
)(*))

225 
MÚ™Ü
 
hªdË
;

226 
MÚ™Ü
 *
´ev
, *
cu¼
;

227 
Objeù
 *
obj
;

229 
	`as£¹
(
mÚ
 !ğ
NULL
);

230 
	`as£¹
(
isUnm¬kedObjeù
 !ğ
NULL
);

231 
´ev
 = &
hªdË
;

232 
´ev
->
Ãxt
 = 
cu¼
 = *
mÚ
;

233 
cu¼
 !ğ
NULL
) {

234 
obj
 = 
cu¼
->obj;

235 ià(
obj
 !ğ
NULL
 && (*
isUnm¬kedObjeù
)(obj) != 0) {

236 
´ev
->
Ãxt
 = 
cu¼
->next;

237 
	`ä“MÚ™Ü
(
cu¼
);

238 
cu¼
 = 
´ev
->
Ãxt
;

240 
´ev
 = 
cu¼
;

241 
cu¼
 = cu¼->
Ãxt
;

244 *
mÚ
 = 
hªdË
.
Ãxt
;

245 
	}
}

247 *
	$logWr™eIÁ
(*
d¡
, 
v®ue
)

249 *
d¡
++ = 
EVENT_TYPE_INT
;

250 
	`£t4LE
((
u1
 *)
d¡
, 
v®ue
);

251  
d¡
 + 4;

252 
	}
}

254 *
	$logWr™eSŒšg
(*
d¡
, cÚ¡ *
v®ue
, 
size_t
 
Ën
)

256 *
d¡
++ = 
EVENT_TYPE_STRING
;

257 
Ën
 =†en < 32 ?†en : 32;

258 
	`£t4LE
((
u1
 *)
d¡
, 
Ën
);

259 
d¡
 += 4;

260 
	`memıy
(
d¡
, 
v®ue
, 
Ën
);

261  
d¡
 + 
Ën
;

262 
	}
}

264 
	#EVENT_LOG_TAG_dvm_lock_§m¶e
 20003

	)

266 
	$logCÚ‹ÁiÚEv’t
(
Th»ad
 *
£lf
, 
u4
 
wa™Ms
, u4 
§m¶eP”ûÁ
,

267 cÚ¡ *
owÃrFeName
, 
u4
 
owÃrLšeNumb”
)

269 cÚ¡ 
SckSaveA»a
 *
§veA»a
;

270 cÚ¡ 
M‘hod
 *
m‘h
;

271 
u4
 
»ÏtivePc
;

272 
ev’tBufãr
[174];

273 cÚ¡ *
feName
;

274 
´ocName
[33];

275 *
ı
;

276 
size_t
 
Ën
;

277 
fd
;

279 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

280 
m‘h
 = 
§veA»a
->
m‘hod
;

281 
ı
 = 
ev’tBufãr
;

284 *
ı
++ = 9;

287 
fd
 = 
	`İ’
("/´oc/£lf/cmdlše", 
O_RDONLY
);

288 
	`mem£t
(
´ocName
, 0, (procName));

289 
	`»ad
(
fd
, 
´ocName
, (procName) - 1);

290 
	`şo£
(
fd
);

291 
Ën
 = 
	`¡¾’
(
´ocName
);

292 
ı
 = 
	`logWr™eSŒšg
(ı, 
´ocName
, 
Ën
);

295 
boŞ
 
isS’s™ive
 = 
çl£
;

296 ià(
gDvm
.
isS’s™iveTh»adHook
 !ğ
NULL
) {

297 
isS’s™ive
 = 
gDvm
.
	`isS’s™iveTh»adHook
();

299 
ı
 = 
	`logWr™eIÁ
(ı, 
isS’s™ive
);

302 
¡d
::
¡ršg
 
£lfName
 = 
	`dvmG‘Th»adName
(
£lf
);

303 
ı
 = 
	`logWr™eSŒšg
(ı, 
£lfName
.
	`c_¡r
(), s–fName.
	`size
());

306 
ı
 = 
	`logWr™eIÁ
(ı, 
wa™Ms
);

309 
feName
 = 
	`dvmG‘M‘hodSourûFe
(
m‘h
);

310 ià(
feName
 =ğ
NULL
) fileName = "";

311 
ı
 = 
	`logWr™eSŒšg
(ı, 
feName
, 
	`¡¾’
(fileName));

314 
»ÏtivePc
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - saveA»a->
m‘hod
->
š¢s
;

315 
ı
 = 
	`logWr™eIÁ
(ı, 
	`dvmLšeNumFromPC
(
m‘h
, 
»ÏtivePc
));

318 ià(
owÃrFeName
 =ğ
NULL
) {

319 
owÃrFeName
 = "";

320 } ià(
	`¡rcmp
(
feName
, 
owÃrFeName
) == 0) {

322 
owÃrFeName
 = "-";

324 
ı
 = 
	`logWr™eSŒšg
(ı, 
owÃrFeName
, 
	`¡¾’
(ownerFileName));

327 
ı
 = 
	`logWr™eIÁ
(ı, 
owÃrLšeNumb”
);

330 
ı
 = 
	`logWr™eIÁ
(ı, 
§m¶eP”ûÁ
);

332 
	`as£¹
((
size_t
)(
ı
 - 
ev’tBufãr
) <= (eventBuffer));

333 
	`ªdroid_btWr™eLog
(
EVENT_LOG_TAG_dvm_lock_§m¶e
,

334 
EVENT_TYPE_LIST
,

335 
ev’tBufãr
,

336 (
size_t
)(
ı
 - 
ev’tBufãr
));

337 
	}
}

342 
	$lockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

344 
Th»adStus
 
ŞdStus
;

345 
u4
 
wa™Th»shŞd
, 
§m¶eP”ûÁ
;

346 
u8
 
wa™S¹
, 
wa™End
, 
wa™Ms
;

348 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

349 
mÚ
->
lockCouÁ
++;

352 ià(
	`dvmTryLockMu‹x
(&
mÚ
->
lock
) != 0) {

353 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_MONITOR
);

354 
wa™Th»shŞd
 = 
gDvm
.
lockProfTh»shŞd
;

355 ià(
wa™Th»shŞd
) {

356 
wa™S¹
 = 
	`dvmG‘R–©iveTimeU£c
();

359 cÚ¡ 
M‘hod
* 
cu¼’tOwÃrM‘hod
 = 
mÚ
->
owÃrM‘hod
;

360 
u4
 
cu¼’tOwÃrPc
 = 
mÚ
->
owÃrPc
;

362 
	`dvmLockMu‹x
(&
mÚ
->
lock
);

363 ià(
wa™Th»shŞd
) {

364 
wa™End
 = 
	`dvmG‘R–©iveTimeU£c
();

366 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

367 ià(
wa™Th»shŞd
) {

368 
wa™Ms
 = (
wa™End
 - 
wa™S¹
) / 1000;

369 ià(
wa™Ms
 >ğ
wa™Th»shŞd
) {

370 
§m¶eP”ûÁ
 = 100;

372 
§m¶eP”ûÁ
 = 100 * 
wa™Ms
 / 
wa™Th»shŞd
;

374 ià(
§m¶eP”ûÁ
 !ğ0 && ((
u4
)
	`¿nd
() % 100 < samplePercent)) {

375 cÚ¡ * 
cu¼’tOwÃrFeName
 = "no_method";

376 
u4
 
cu¼’tOwÃrLšeNumb”
 = 0;

377 ià(
cu¼’tOwÃrM‘hod
 !ğ
NULL
) {

378 
cu¼’tOwÃrFeName
 = 
	`dvmG‘M‘hodSourûFe
(
cu¼’tOwÃrM‘hod
);

379 ià(
cu¼’tOwÃrFeName
 =ğ
NULL
) {

380 
cu¼’tOwÃrFeName
 = "no_method_file";

382 
cu¼’tOwÃrLšeNumb”
 = 
	`dvmLšeNumFromPC
(
cu¼’tOwÃrM‘hod
, 
cu¼’tOwÃrPc
);

384 
	`logCÚ‹ÁiÚEv’t
(
£lf
, 
wa™Ms
, 
§m¶eP”ûÁ
,

385 
cu¼’tOwÃrFeName
, 
cu¼’tOwÃrLšeNumb”
);

389 
mÚ
->
owÃr
 = 
£lf
;

390 
	`as£¹
(
mÚ
->
lockCouÁ
 == 0);

394 ià(
gDvm
.
lockProfTh»shŞd
 > 0) {

395 
mÚ
->
owÃrM‘hod
 = 
NULL
;

396 
mÚ
->
owÃrPc
 = 0;

397 ià(
£lf
->
š‹½Save
.
curF¿me
 =ğ
NULL
) {

400 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

401 ià(
§veA»a
 =ğ
NULL
) {

404 
mÚ
->
owÃrM‘hod
 = 
§veA»a
->
m‘hod
;

405 
mÚ
->
owÃrPc
 = (
§veA»a
->
xŒa
.
cu¼’tPc
 - saveA»a->
m‘hod
->
š¢s
);

407 
	}
}

414 #ifdeà
WITH_COPYING_GC


415 
boŞ
 
	$ŒyLockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

417 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

418 
mÚ
->
lockCouÁ
++;

419  
Œue
;

421 ià(
	`dvmTryLockMu‹x
(&
mÚ
->
lock
) == 0) {

422 
mÚ
->
owÃr
 = 
£lf
;

423 
	`as£¹
(
mÚ
->
lockCouÁ
 == 0);

424  
Œue
;

426  
çl£
;

429 
	}
}

438 
boŞ
 
	$uÆockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

440 
	`as£¹
(
£lf
 !ğ
NULL
);

441 
	`as£¹
(
mÚ
 !ğ
NULL
);

442 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

446 ià(
mÚ
->
lockCouÁ
 == 0) {

447 
mÚ
->
owÃr
 = 
NULL
;

448 
mÚ
->
owÃrM‘hod
 = 
NULL
;

449 
mÚ
->
owÃrPc
 = 0;

450 
	`dvmUÆockMu‹x
(&
mÚ
->
lock
);

452 
mÚ
->
lockCouÁ
--;

460 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
("unlock of unowned monitor");

461  
çl£
;

463  
Œue
;

464 
	}
}

470 #iâdeà
NDEBUG


471 
	$wa™S‘Check
(
MÚ™Ü
 *
mÚ
)

473 
Th»ad
 *
ç¡
, *
¦ow
;

474 
size_t
 
n
;

476 
	`as£¹
(
mÚ
 !ğ
NULL
);

477 
ç¡
 = 
¦ow
 = 
mÚ
->
wa™S‘
;

478 
n
 = 0;

480 ià(
ç¡
 =ğ
NULL
)  0;

481 ià(
ç¡
->
wa™Next
 =ğ
NULL
)  0;

482 ià(
ç¡
 =ğ
¦ow
 && 
n
 > 0)  1;

483 
n
 += 2;

484 
ç¡
 = fa¡->
wa™Next
->waitNext;

485 
¦ow
 = slow->
wa™Next
;

487 
	}
}

494 
	$wa™S‘Aµ’d
(
MÚ™Ü
 *
mÚ
, 
Th»ad
 *
th»ad
)

496 
Th»ad
 *
–t
;

498 
	`as£¹
(
mÚ
 !ğ
NULL
);

499 
	`as£¹
(
mÚ
->
owÃr
 =ğ
	`dvmTh»adS–f
());

500 
	`as£¹
(
th»ad
 !ğ
NULL
);

501 
	`as£¹
(
th»ad
->
wa™Next
 =ğ
NULL
);

502 
	`as£¹
(
	`wa™S‘Check
(
mÚ
) == 0);

503 ià(
mÚ
->
wa™S‘
 =ğ
NULL
) {

504 
mÚ
->
wa™S‘
 = 
th»ad
;

507 
–t
 = 
mÚ
->
wa™S‘
;

508 
–t
->
wa™Next
 !ğ
NULL
) {

509 
–t
 =ƒÉ->
wa™Next
;

511 
–t
->
wa™Next
 = 
th»ad
;

512 
	}
}

518 
	$wa™S‘Remove
(
MÚ™Ü
 *
mÚ
, 
Th»ad
 *
th»ad
)

520 
Th»ad
 *
–t
;

522 
	`as£¹
(
mÚ
 !ğ
NULL
);

523 
	`as£¹
(
mÚ
->
owÃr
 =ğ
	`dvmTh»adS–f
());

524 
	`as£¹
(
th»ad
 !ğ
NULL
);

525 
	`as£¹
(
	`wa™S‘Check
(
mÚ
) == 0);

526 ià(
mÚ
->
wa™S‘
 =ğ
NULL
) {

529 ià(
mÚ
->
wa™S‘
 =ğ
th»ad
) {

530 
mÚ
->
wa™S‘
 = 
th»ad
->
wa™Next
;

531 
th»ad
->
wa™Next
 = 
NULL
;

534 
–t
 = 
mÚ
->
wa™S‘
;

535 
–t
->
wa™Next
 !ğ
NULL
) {

536 ià(
–t
->
wa™Next
 =ğ
th»ad
) {

537 
–t
->
wa™Next
 = 
th»ad
->waitNext;

538 
th»ad
->
wa™Next
 = 
NULL
;

541 
–t
 =ƒÉ->
wa™Next
;

543 
	}
}

548 
	$absŞu‹Time
(
s8
 
m£c
, 
s4
 
n£c
, 
time¥ec
 *
ts
)

550 
s8
 
’dSec
;

552 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


553 
	`şock_g‘time
(
CLOCK_MONOTONIC
, 
ts
);

556 
timev®
 
tv
;

557 
	`g‘timeofday
(&
tv
, 
NULL
);

558 
ts
->
tv_£c
 = 
tv
.tv_sec;

559 
ts
->
tv_n£c
 = 
tv
.
tv_u£c
 * 1000;

562 
’dSec
 = 
ts
->
tv_£c
 + 
m£c
 / 1000;

563 ià(
’dSec
 >= 0x7fffffff) {

564 
	`ALOGV
("NOTE:ƒndimeƒxceedsƒpoch");

565 
’dSec
 = 0x7ffffffe;

567 
ts
->
tv_£c
 = 
’dSec
;

568 
ts
->
tv_n£c
 = (ts->tv_n£ø+ (
m£c
 % 1000è* 1000000è+ 
n£c
;

571 ià(
ts
->
tv_n£c
 >= 1000000000L) {

572 
ts
->
tv_£c
++;

573 
ts
->
tv_n£c
 -= 1000000000L;

575 
	}
}

577 
	$dvmR–©iveCÚdWa™
(
±h»ad_cÚd_t
* 
cÚd
, 
±h»ad_mu‹x_t
* 
mu‹x
,

578 
s8
 
m£c
, 
s4
 
n£c
)

580 
»t
;

581 
time¥ec
 
ts
;

582 
	`absŞu‹Time
(
m£c
, 
n£c
, &
ts
);

583 #ià
	`defšed
(
HAVE_TIMEDWAIT_MONOTONIC
)

584 
»t
 = 
	`±h»ad_cÚd_timedwa™_mÚÙÚic
(
cÚd
, 
mu‹x
, &
ts
);

586 
»t
 = 
	`±h»ad_cÚd_timedwa™
(
cÚd
, 
mu‹x
, &
ts
);

588 
	`as£¹
(
»t
 =ğ0 ||„‘ =ğ
ETIMEDOUT
);

589  
»t
;

590 
	}
}

615 
	$wa™MÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
, 
s8
 
m£c
, 
s4
 
n£c
,

616 
boŞ
 
š‹¼u±ShouldThrow
)

618 
time¥ec
 
ts
;

619 
boŞ
 
wasIÁ”ru±ed
 = 
çl£
;

620 
boŞ
 
timed
;

621 
»t
;

623 
	`as£¹
(
£lf
 !ğ
NULL
);

624 
	`as£¹
(
mÚ
 !ğ
NULL
);

627 ià(
mÚ
->
owÃr
 !ğ
£lf
) {

628 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

636 ià(
m£c
 < 0 || 
n£c
 < 0 ||‚sec > 999999) {

637 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("timeout‡rguments out of„ange");

644 ià(
m£c
 =ğ0 && 
n£c
 == 0) {

645 
timed
 = 
çl£
;

647 
	`absŞu‹Time
(
m£c
, 
n£c
, &
ts
);

648 
timed
 = 
Œue
;

661 
	`wa™S‘Aµ’d
(
mÚ
, 
£lf
);

662 
´evLockCouÁ
 = 
mÚ
->
lockCouÁ
;

663 
mÚ
->
lockCouÁ
 = 0;

664 
mÚ
->
owÃr
 = 
NULL
;

666 cÚ¡ 
M‘hod
* 
§vedM‘hod
 = 
mÚ
->
owÃrM‘hod
;

667 
u4
 
§vedPc
 = 
mÚ
->
owÃrPc
;

668 
mÚ
->
owÃrM‘hod
 = 
NULL
;

669 
mÚ
->
owÃrPc
 = 0;

676 ià(
timed
)

677 
	`dvmChªgeStus
(
£lf
, 
THREAD_TIMED_WAIT
);

679 
	`dvmChªgeStus
(
£lf
, 
THREAD_WAIT
);

681 
	`dvmLockMu‹x
(&
£lf
->
wa™Mu‹x
);

688 
	`as£¹
(
£lf
->
wa™MÚ™Ü
 =ğ
NULL
);

689 
£lf
->
wa™MÚ™Ü
 = 
mÚ
;

695 ià(
£lf
->
š‹¼u±ed
) {

696 
wasIÁ”ru±ed
 = 
Œue
;

697 
£lf
->
wa™MÚ™Ü
 = 
NULL
;

698 
	`dvmUÆockMu‹x
(&
£lf
->
wa™Mu‹x
);

699 
dÚe
;

706 
	`dvmUÆockMu‹x
(&
mÚ
->
lock
);

708 ià(!
timed
) {

709 
»t
 = 
	`±h»ad_cÚd_wa™
(&
£lf
->
wa™CÚd
, &£lf->
wa™Mu‹x
);

710 
	`as£¹
(
»t
 == 0);

712 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


713 
»t
 = 
	`±h»ad_cÚd_timedwa™_mÚÙÚic
(&
£lf
->
wa™CÚd
, &£lf->
wa™Mu‹x
, &
ts
);

715 
»t
 = 
	`±h»ad_cÚd_timedwa™
(&
£lf
->
wa™CÚd
, &£lf->
wa™Mu‹x
, &
ts
);

717 
	`as£¹
(
»t
 =ğ0 ||„‘ =ğ
ETIMEDOUT
);

719 ià(
£lf
->
š‹¼u±ed
) {

720 
wasIÁ”ru±ed
 = 
Œue
;

723 
£lf
->
š‹¼u±ed
 = 
çl£
;

724 
£lf
->
wa™MÚ™Ü
 = 
NULL
;

726 
	`dvmUÆockMu‹x
(&
£lf
->
wa™Mu‹x
);

729 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

731 
dÚe
:

738 
mÚ
->
owÃr
 = 
£lf
;

739 
mÚ
->
lockCouÁ
 = 
´evLockCouÁ
;

740 
mÚ
->
owÃrM‘hod
 = 
§vedM‘hod
;

741 
mÚ
->
owÃrPc
 = 
§vedPc
;

742 
	`wa™S‘Remove
(
mÚ
, 
£lf
);

745 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

747 ià(
wasIÁ”ru±ed
) {

755 
£lf
->
š‹¼u±ed
 = 
çl£
;

756 ià(
š‹¼u±ShouldThrow
) {

757 
	`dvmThrowIÁ”ru±edExû±iÚ
(
NULL
);

760 
	}
}

765 
	$nÙifyMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

767 
Th»ad
* 
th»ad
;

769 
	`as£¹
(
£lf
 !ğ
NULL
);

770 
	`as£¹
(
mÚ
 !ğ
NULL
);

773 ià(
mÚ
->
owÃr
 !ğ
£lf
) {

774 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

779 
mÚ
->
wa™S‘
 !ğ
NULL
) {

780 
th»ad
 = 
mÚ
->
wa™S‘
;

781 
mÚ
->
wa™S‘
 = 
th»ad
->
wa™Next
;

782 
th»ad
->
wa™Next
 = 
NULL
;

783 
	`dvmLockMu‹x
(&
th»ad
->
wa™Mu‹x
);

785 ià(
th»ad
->
wa™MÚ™Ü
 !ğ
NULL
) {

786 
	`±h»ad_cÚd_sigÇl
(&
th»ad
->
wa™CÚd
);

787 
	`dvmUÆockMu‹x
(&
th»ad
->
wa™Mu‹x
);

790 
	`dvmUÆockMu‹x
(&
th»ad
->
wa™Mu‹x
);

792 
	}
}

797 
	$nÙifyAÎMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

799 
Th»ad
* 
th»ad
;

801 
	`as£¹
(
£lf
 !ğ
NULL
);

802 
	`as£¹
(
mÚ
 !ğ
NULL
);

805 ià(
mÚ
->
owÃr
 !ğ
£lf
) {

806 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

811 
mÚ
->
wa™S‘
 !ğ
NULL
) {

812 
th»ad
 = 
mÚ
->
wa™S‘
;

813 
mÚ
->
wa™S‘
 = 
th»ad
->
wa™Next
;

814 
th»ad
->
wa™Next
 = 
NULL
;

815 
	`dvmLockMu‹x
(&
th»ad
->
wa™Mu‹x
);

817 ià(
th»ad
->
wa™MÚ™Ü
 !ğ
NULL
) {

818 
	`±h»ad_cÚd_sigÇl
(&
th»ad
->
wa™CÚd
);

820 
	`dvmUÆockMu‹x
(&
th»ad
->
wa™Mu‹x
);

822 
	}
}

828 
	$šæ©eMÚ™Ü
(
Th»ad
 *
£lf
, 
Objeù
 *
obj
)

830 
MÚ™Ü
 *
mÚ
;

831 
u4
 
thš
;

833 
	`as£¹
(
£lf
 !ğ
NULL
);

834 
	`as£¹
(
obj
 !ğ
NULL
);

835 
	`as£¹
(
	`LW_SHAPE
(
obj
->
lock
è=ğ
LW_SHAPE_THIN
);

836 
	`as£¹
(
	`LW_LOCK_OWNER
(
obj
->
lock
è=ğ
£lf
->
th»adId
);

838 
mÚ
 = 
	`dvmC»©eMÚ™Ü
(
obj
);

839 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

841 
thš
 = 
obj
->
lock
;

842 
mÚ
->
lockCouÁ
 = 
	`LW_LOCK_COUNT
(
thš
);

843 
thš
 &ğ
LW_HASH_STATE_MASK
 << 
LW_HASH_STATE_SHIFT
;

844 
thš
 |ğ(
u4
)
mÚ
 | 
LW_SHAPE_FAT
;

846 
	`ªdroid_©omic_»Ëa£_¡Üe
(
thš
, (
št32_t
 *)&
obj
->
lock
);

847 
	}
}

855 
	$dvmLockObjeù
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

857 vŞ©
u4
 *
thšp
;

858 
Th»adStus
 
ŞdStus
;

859 
time¥ec
 
tm
;

860 
¦“pD–ayNs
;

861 
mšSË•D–ayNs
 = 1000000;

862 
maxSË•D–ayNs
 = 1000000000;

863 
u4
 
thš
, 
ÃwThš
, 
th»adId
;

865 
	`as£¹
(
£lf
 !ğ
NULL
);

866 
	`as£¹
(
obj
 !ğ
NULL
);

867 
th»adId
 = 
£lf
->threadId;

868 
thšp
 = &
obj
->
lock
;

869 
»Œy
:

870 
thš
 = *
thšp
;

871 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

876 ià(
	`LW_LOCK_OWNER
(
thš
è=ğ
th»adId
) {

881 
obj
->
lock
 +ğ1 << 
LW_LOCK_COUNT_SHIFT
;

882 ià(
	`LW_LOCK_COUNT
(
obj
->
lock
è=ğ
LW_LOCK_COUNT_MASK
) {

888 
	`šæ©eMÚ™Ü
(
£lf
, 
obj
);

890 } ià(
	`LW_LOCK_OWNER
(
thš
) == 0) {

897 
ÃwThš
 = 
thš
 | (
th»adId
 << 
LW_LOCK_OWNER_SHIFT
);

898 ià(
	`ªdroid_©omic_acquœe_ÿs
(
thš
, 
ÃwThš
,

899 (
št32_t
*)
thšp
) != 0) {

903 
»Œy
;

906 
	`ALOGV
("(%d) spin on†ock %p: %#x (%#x) %#x",

907 
th»adId
, &
obj
->
lock
, 0, *
thšp
, 
thš
);

912 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_MONITOR
);

916 
¦“pD–ayNs
 = 0;

918 
thš
 = *
thšp
;

923 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

924 ià(
	`LW_LOCK_OWNER
(
thš
) == 0) {

930 
ÃwThš
 = 
thš
 | (
th»adId
 << 
LW_LOCK_OWNER_SHIFT
);

931 ià(
	`ªdroid_©omic_acquœe_ÿs
(
thš
, 
ÃwThš
,

932 (
št32_t
 *)
thšp
) == 0) {

944 ià(
¦“pD–ayNs
 == 0) {

945 
	`sched_y›ld
();

946 
¦“pD–ayNs
 = 
mšSË•D–ayNs
;

948 
tm
.
tv_£c
 = 0;

949 
tm
.
tv_n£c
 = 
¦“pD–ayNs
;

950 
	`Çno¦“p
(&
tm
, 
NULL
);

955 ià(
¦“pD–ayNs
 < 
maxSË•D–ayNs
 / 2) {

956 
¦“pD–ayNs
 *= 2;

958 
¦“pD–ayNs
 = 
mšSË•D–ayNs
;

968 
	`ALOGV
("(%d)†ock %p surprise-fattened",

969 
th»adId
, &
obj
->
lock
);

970 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

971 
»Œy
;

974 
	`ALOGV
("(%d) spin on†ock done %p: %#x (%#x) %#x",

975 
th»adId
, &
obj
->
lock
, 0, *
thšp
, 
thš
);

980 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

984 
	`šæ©eMÚ™Ü
(
£lf
, 
obj
);

985 
	`ALOGV
("(%dèlock %°ç‰’ed", 
th»adId
, &
obj
->
lock
);

991 
	`as£¹
(
	`LW_MONITOR
(
obj
->
lock
è!ğ
NULL
);

992 
	`lockMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(
obj
->
lock
));

994 
	}
}

1001 
boŞ
 
	$dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

1003 
u4
 
thš
;

1005 
	`as£¹
(
£lf
 !ğ
NULL
);

1006 
	`as£¹
(
£lf
->
¡©us
 =ğ
THREAD_RUNNING
);

1007 
	`as£¹
(
obj
 !ğ
NULL
);

1012 
thš
 = *(vŞ©
u4
 *)&
obj
->
lock
;

1013 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

1018 ià(
	`LW_LOCK_OWNER
(
thš
è=ğ
£lf
->
th»adId
) {

1023 ià(
	`LW_LOCK_COUNT
(
thš
) == 0) {

1029 
thš
 &ğ(
LW_HASH_STATE_MASK
 << 
LW_HASH_STATE_SHIFT
);

1030 
	`ªdroid_©omic_»Ëa£_¡Üe
(
thš
, (
št32_t
*)&
obj
->
lock
);

1036 
obj
->
lock
 -ğ1 << 
LW_LOCK_COUNT_SHIFT
;

1043 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
("unlock of unowned monitor");

1044  
çl£
;

1051 
	`as£¹
(
	`LW_MONITOR
(
obj
->
lock
è!ğ
NULL
);

1052 ià(!
	`uÆockMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(
obj
->
lock
))) {

1056  
çl£
;

1059  
Œue
;

1060 
	}
}

1065 
	$dvmObjeùWa™
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
, 
s8
 
m£c
, 
s4
 
n£c
,

1066 
boŞ
 
š‹¼u±ShouldThrow
)

1068 
MÚ™Ü
* 
mÚ
;

1069 
u4
 
thš
 = *(vŞ©u4 *)&
obj
->
lock
;

1073 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

1076 ià(
	`LW_LOCK_OWNER
(
thš
è!ğ
£lf
->
th»adId
) {

1077 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

1087 
	`šæ©eMÚ™Ü
(
£lf
, 
obj
);

1088 
	`ALOGV
("(%dèlock %°ç‰’ed by wa™()", 
£lf
->
th»adId
, &
obj
->
lock
);

1090 
mÚ
 = 
	`LW_MONITOR
(
obj
->
lock
);

1091 
	`wa™MÚ™Ü
(
£lf
, 
mÚ
, 
m£c
, 
n£c
, 
š‹¼u±ShouldThrow
);

1092 
	}
}

1097 
	$dvmObjeùNÙify
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

1099 
u4
 
thš
 = *(vŞ©u4 *)&
obj
->
lock
;

1104 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

1107 ià(
	`LW_LOCK_OWNER
(
thš
è!ğ
£lf
->
th»adId
) {

1108 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

1118 
	`nÙifyMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(
thš
));

1120 
	}
}

1125 
	$dvmObjeùNÙifyAÎ
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

1127 
u4
 
thš
 = *(vŞ©u4 *)&
obj
->
lock
;

1132 ià(
	`LW_SHAPE
(
thš
è=ğ
LW_SHAPE_THIN
) {

1135 ià(
	`LW_LOCK_OWNER
(
thš
è!ğ
£lf
->
th»adId
) {

1136 
	`dvmThrowIÎeg®MÚ™ÜS‹Exû±iÚ
(

1146 
	`nÙifyAÎMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(
thš
));

1148 
	}
}

1164 
	$dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
)

1166 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1167 
MÚ™Ü
* 
mÚ
 = 
gDvm
.
th»adSË•MÚ
;

1170 ià(
m£c
 =ğ0 && 
n£c
 == 0)

1171 
n£c
++;

1173 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

1174 
	`wa™MÚ™Ü
(
£lf
, 
mÚ
, 
m£c
, 
n£c
, 
Œue
);

1175 
	`uÆockMÚ™Ü
(
£lf
, 
mÚ
);

1176 
	}
}

1181 
	$dvmTh»adIÁ”ru±
(
Th»ad
* 
th»ad
)

1183 
	`as£¹
(
th»ad
 !ğ
NULL
);

1185 
	`dvmLockMu‹x
(&
th»ad
->
wa™Mu‹x
);

1191 ià(
th»ad
->
š‹¼u±ed
 =ğ
Œue
) {

1192 
	`dvmUÆockMu‹x
(&
th»ad
->
wa™Mu‹x
);

1201 
th»ad
->
š‹¼u±ed
 = 
Œue
;

1210 ià(
th»ad
->
wa™MÚ™Ü
 !ğ
NULL
) {

1211 
	`±h»ad_cÚd_sigÇl
(&
th»ad
->
wa™CÚd
);

1214 
	`dvmUÆockMu‹x
(&
th»ad
->
wa™Mu‹x
);

1215 
	}
}

1217 #iâdeà
WITH_COPYING_GC


1218 
u4
 
	$dvmId’t™yHashCode
(
Objeù
 *
obj
)

1220  (
u4
)
obj
;

1221 
	}
}

1226 
u4
 
	$dvmId’t™yHashCode
(
Objeù
 *
obj
)

1228 
Th»ad
 *
£lf
, *
th»ad
;

1229 vŞ©
u4
 *
lw
;

1230 
size_t
 
size
;

1231 
u4
 
lock
, 
owÃr
, 
hashS‹
;

1233 ià(
obj
 =ğ
NULL
) {

1239 
lw
 = &
obj
->
lock
;

1240 
»Œy
:

1241 
hashS‹
 = 
	`LW_HASH_STATE
(*
lw
);

1242 ià(
hashS‹
 =ğ
LW_HASH_STATE_HASHED
) {

1248  (
u4
)
obj
 >> 3;

1249 } ià(
hashS‹
 =ğ
LW_HASH_STATE_HASHED_AND_MOVED
) {

1255 
	`as£¹
(!
	`dvmIsCÏssObjeù
(
obj
));

1256 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISARRAY
)) {

1257 
size
 = 
	`dvmA¼ayObjeùSize
((
A¼ayObjeù
 *)
obj
);

1258 
size
 = (size + 2) & ~2;

1260 
size
 = 
obj
->
şazz
->
objeùSize
;

1262  *(
u4
 *)(((*)
obj
è+ 
size
);

1263 } ià(
hashS‹
 =ğ
LW_HASH_STATE_UNHASHED
) {

1268 
£lf
 = 
	`dvmTh»adS–f
();

1269 ià(
£lf
->
th»adId
 =ğ
	`lockOwÃr
(
obj
)) {

1274 *
lw
 |ğ(
LW_HASH_STATE_HASHED
 << 
LW_HASH_STATE_SHIFT
);

1275  (
u4
)
obj
 >> 3;

1281 ià(
	`LW_SHAPE
(*
lw
è=ğ
LW_SHAPE_THIN
) {

1286 
lock
 = (
LW_HASH_STATE_HASHED
 << 
LW_HASH_STATE_SHIFT
);

1287 ià(
	`ªdroid_©omic_acquœe_ÿs
(

1289 (
št32_t
)
lock
,

1290 (
št32_t
 *)
lw
) == 0) {

1295  (
u4
)
obj
 >> 3;

1298 ià(
	`ŒyLockMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(*
lw
))) {

1304 *
lw
 |ğ(
LW_HASH_STATE_HASHED
 << 
LW_HASH_STATE_SHIFT
);

1305 
	`uÆockMÚ™Ü
(
£lf
, 
	`LW_MONITOR
(*
lw
));

1306  (
u4
)
obj
 >> 3;

1313 
	`dvmLockTh»adLi¡
(
£lf
);

1318 
lock
 = *
lw
;

1319 ià(
	`LW_SHAPE
(
lock
è=ğ
LW_SHAPE_THIN
) {

1323 
owÃr
 = 
	`LW_LOCK_OWNER
(
lock
);

1324 
	`as£¹
(
owÃr
 !ğ
£lf
->
th»adId
);

1329 
th»ad
 = 
owÃr
 ? 
gDvm
.
th»adLi¡
 : 
NULL
;

1330 
th»ad
 !ğ
NULL
) {

1331 ià(
th»ad
->
th»adId
 =ğ
owÃr
) {

1334 
th»ad
 =h»ad->
Ãxt
;

1337 
th»ad
 = 
	`LW_MONITOR
(
lock
)->
owÃr
;

1343 ià(
th»ad
 =ğ
NULL
) {

1344 
	`dvmUÆockTh»adLi¡
();

1345 
»Œy
;

1350 
	`dvmSu¥’dTh»ad
(
th»ad
);

1351 ià(
	`dvmHŞdsLock
(
th»ad
, 
obj
)) {

1356 *
lw
 |ğ(
LW_HASH_STATE_HASHED
 << 
LW_HASH_STATE_SHIFT
);

1357 
	`dvmResumeTh»ad
(
th»ad
);

1358 
	`dvmUÆockTh»adLi¡
();

1359  (
u4
)
obj
 >> 3;

1364 
	`dvmResumeTh»ad
(
th»ad
);

1365 
	`dvmUÆockTh»adLi¡
();

1366 
»Œy
;

1368 
	`ALOGE
("objeù %°ha ª unknowÀhash s‹ %#x", 
obj
, 
hashS‹
);

1369 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

1370 
	`dvmAbÜt
();

1372 
	}
}

	@vm/Sync.h

19 #iâdeà
DALVIK_SYNC_H_


20 
	#DALVIK_SYNC_H_


	)

26 
	#LW_SHAPE_THIN
 0

	)

27 
	#LW_SHAPE_FAT
 1

	)

28 
	#LW_SHAPE_MASK
 0x1

	)

29 
	#LW_SHAPE
(
x
è((xè& 
LW_SHAPE_MASK
)

	)

35 
	#LW_HASH_STATE_UNHASHED
 0

	)

36 
	#LW_HASH_STATE_HASHED
 1

	)

37 
	#LW_HASH_STATE_HASHED_AND_MOVED
 3

	)

38 
	#LW_HASH_STATE_MASK
 0x3

	)

39 
	#LW_HASH_STATE_SHIFT
 1

	)

40 
	#LW_HASH_STATE
(
x
è(((xè>> 
LW_HASH_STATE_SHIFT
è& 
LW_HASH_STATE_MASK
)

	)

46 
	#LW_MONITOR
(
x
) \

47 ((
MÚ™Ü
*)((
x
è& ~((
LW_HASH_STATE_MASK
 << 
LW_HASH_STATE_SHIFT
) | \

48 
LW_SHAPE_MASK
)))

	)

54 
	#LW_LOCK_OWNER_MASK
 0xffff

	)

55 
	#LW_LOCK_OWNER_SHIFT
 3

	)

56 
	#LW_LOCK_OWNER
(
x
è(((xè>> 
LW_LOCK_OWNER_SHIFT
è& 
LW_LOCK_OWNER_MASK
)

	)

62 
	#LW_LOCK_COUNT_MASK
 0x1fff

	)

63 
	#LW_LOCK_COUNT_SHIFT
 19

	)

64 
	#LW_LOCK_COUNT
(
x
è(((xè>> 
LW_LOCK_COUNT_SHIFT
è& 
LW_LOCK_COUNT_MASK
)

	)

66 
	gObjeù
;

67 
	gMÚ™Ü
;

68 
	gTh»ad
;

73 
	#IS_LOCK_FAT
(
lock
è(
	`LW_SHAPE
(*Öock)è=ğ
LW_SHAPE_FAT
)

	)

78 "C" 
dvmLockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

83 "C" 
boŞ
 
dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

88 
dvmObjeùWa™
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
,

89 
s8
 
timeout
, 
s4
 
Çnos
, 
boŞ
 
š‹¼u±ShouldThrow
);

90 
dvmObjeùNÙify
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

91 
dvmObjeùNÙifyAÎ
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

96 
u4
 
dvmId’t™yHashCode
(
Objeù
* 
obj
);

101 
dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
);

108 
dvmTh»adIÁ”ru±
(
Th»ad
* 
th»ad
);

111 
MÚ™Ü
* 
dvmC»©eMÚ™Ü
(
Objeù
* 
obj
);

118 
dvmSw“pMÚ™ÜLi¡
(
MÚ™Ü
** 
mÚ
, (*
isUnm¬kedObjeù
)(*));

121 
	`dvmF»eMÚ™ÜLi¡
();

129 
Objeù
* 
	`dvmG‘MÚ™ÜObjeù
(
MÚ™Ü
* 
mÚ
);

137 
Th»ad
* 
	`dvmG‘ObjeùLockHŞd”
(
Objeù
* 
obj
);

142 
boŞ
 
	`dvmHŞdsLock
(
Th»ad
* 
th»ad
, 
Objeù
* 
obj
);

147 
	`dvmR–©iveCÚdWa™
(
±h»ad_cÚd_t
* 
cÚd
, 
±h»ad_mu‹x_t
* 
mu‹x
,

148 
s8
 
m£c
, 
s4
 
n£c
);

	@vm/Thread.cpp

20 
	~"D®vik.h
"

21 
	~"os/os.h
"

23 
	~<¡dlib.h
>

24 
	~<uni¡d.h
>

25 
	~<sys/time.h
>

26 
	~<sys/ty³s.h
>

27 
	~<sys/»sourû.h
>

28 
	~<sys/mmª.h
>

29 
	~<sigÇl.h
>

30 
	~<”ºo.h
>

31 
	~<fú.h
>

33 #ifdeà
HAVE_ANDROID_OS


34 
	~<dœ’t.h
>

37 #ià
defšed
(
HAVE_PRCTL
)

38 
	~<sys/´ùl.h
>

41 #ià
defšed
(
WITH_SELF_VERIFICATION
)

42 
	~"š‹½/J™.h
"

47 #ià
defšed
(
HAVE_GETTID
è&& !defšed(
HAVE_ANDROID_OS
)

48 
	#__KERNEL__


	)

49 
	~<lšux/uni¡d.h
>

50 #ifdeà
_sysÿÎ0


51 
	$_sysÿÎ0
(
pid_t
,
g‘tid
)

53 
pid_t
 
	$g‘tid
(è{  
	`sysÿÎ
(
__NR_g‘tid
);
	}
}

55 #undeà
__KERNEL__


59 
	#ENABLE_CGROUP_ERR_LOGGING
 0

	)

62 
	#LOG_THREAD
 
LOGVV


	)

229 
	#kMaxTh»adId
 ((1 << 16è- 1)

	)

230 
	#kMašTh»adId
 1

	)

233 
Th»ad
* 
®locTh»ad
(
š‹½SckSize
);

234 
boŞ
 
´•¬eTh»ad
(
Th»ad
* 
th»ad
);

235 
£tTh»adS–f
(
Th»ad
* 
th»ad
);

236 
uÆškTh»ad
(
Th»ad
* 
th»ad
);

237 
ä“Th»ad
(
Th»ad
* 
th»ad
);

238 
assignTh»adId
(
Th»ad
* 
th»ad
);

239 
boŞ
 
ü—‹FakeEÁryF¿me
(
Th»ad
* 
th»ad
);

240 
boŞ
 
ü—‹FakeRunF¿me
(
Th»ad
* 
th»ad
);

241 * 
š‹½Th»adS¹
(* 
¬g
);

242 * 
š‹º®Th»adS¹
(* 
¬g
);

243 
th»adEx™UnÿughtExû±iÚ
(
Th»ad
* 
th»ad
, 
Objeù
* 
group
);

244 
th»adEx™Check
(* 
¬g
);

245 
wa™FÜTh»adSu¥’d
(
Th»ad
* 
£lf
, Th»ad* 
th»ad
);

252 
boŞ
 
	$dvmTh»adS¹up
()

254 
Th»ad
* 
th»ad
;

257 ià(
	`±h»ad_key_ü—‹
(&
gDvm
.
±h»adKeyS–f
, 
th»adEx™Check
) != 0) {

258 
	`ALOGE
("ERROR:…thread_key_create failed");

259  
çl£
;

263 ià(
	`±h»ad_g‘¥ecific
(
gDvm
.
±h»adKeyS–f
è!ğ
NULL
)

264 
	`ALOGW
("WARNING:‚ewly-created…thread TLS slot is‚ot NULL");

267 
	`dvmIn™Mu‹x
(&
gDvm
.
th»adLi¡Lock
);

268 
	`±h»ad_cÚd_š™
(&
gDvm
.
th»adS¹CÚd
, 
NULL
);

269 
	`±h»ad_cÚd_š™
(&
gDvm
.
vmEx™CÚd
, 
NULL
);

270 
	`dvmIn™Mu‹x
(&
gDvm
.
_th»adSu¥’dLock
);

271 
	`dvmIn™Mu‹x
(&
gDvm
.
th»adSu¥’dCouÁLock
);

272 
	`±h»ad_cÚd_š™
(&
gDvm
.
th»adSu¥’dCouÁCÚd
, 
NULL
);

281 
gDvm
.
th»adSË•MÚ
 = 
	`dvmC»©eMÚ™Ü
(
NULL
);

283 
gDvm
.
th»adIdM­
 = 
	`dvmAÎocB™VeùÜ
(
kMaxTh»adId
, 
çl£
);

285 
th»ad
 = 
	`®locTh»ad
(
gDvm
.
mašTh»adSckSize
);

286 ià(
th»ad
 =ğ
NULL
)

287  
çl£
;

290 
th»ad
->
¡©us
 = 
THREAD_RUNNING
;

296 
	`´•¬eTh»ad
(
th»ad
);

297 
gDvm
.
th»adLi¡
 = 
th»ad
;

299 #ifdeà
COUNT_PRECISE_METHODS


300 
gDvm
.
´eci£M‘hods
 = 
	`dvmPoš‹rS‘AÎoc
(200);

303  
Œue
;

304 
	}
}

309 
	$dvmTh»adShutdown
()

311 ià(
gDvm
.
th»adLi¡
 !ğ
NULL
) {

318 
	`ä“Th»ad
(
gDvm
.
th»adLi¡
);

319 
gDvm
.
th»adLi¡
 = 
NULL
;

322 
	`dvmF»eB™VeùÜ
(
gDvm
.
th»adIdM­
);

324 
	`dvmF»eMÚ™ÜLi¡
();

326 
	`±h»ad_key_d–‘e
(
gDvm
.
±h»adKeyS–f
);

327 
	}
}

333 
šlše
 
	$lockTh»adSu¥’dCouÁ
()

343 
	`dvmLockMu‹x
(&
gDvm
.
th»adSu¥’dCouÁLock
);

344 
	}
}

349 
šlše
 
	$uÆockTh»adSu¥’dCouÁ
()

351 
	`dvmUÆockMu‹x
(&
gDvm
.
th»adSu¥’dCouÁLock
);

352 
	}
}

376 
	$dvmLockTh»adLi¡
(
Th»ad
* 
£lf
)

378 
Th»adStus
 
ŞdStus
;

380 ià(
£lf
 =ğ
NULL
)

381 
£lf
 = 
	`dvmTh»adS–f
();

383 ià(
£lf
 !ğ
NULL
) {

384 
ŞdStus
 = 
£lf
->
¡©us
;

385 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

388 
ŞdStus
 = 
THREAD_UNDEFINED
;

391 
	`dvmLockMu‹x
(&
gDvm
.
th»adLi¡Lock
);

393 ià(
£lf
 !ğ
NULL
)

394 
£lf
->
¡©us
 = 
ŞdStus
;

395 
	}
}

403 
boŞ
 
	$dvmTryLockTh»adLi¡
()

405  (
	`dvmTryLockMu‹x
(&
gDvm
.
th»adLi¡Lock
) == 0);

406 
	}
}

411 
	$dvmUÆockTh»adLi¡
()

413 
	`dvmUÆockMu‹x
(&
gDvm
.
th»adLi¡Lock
);

414 
	}
}

419 cÚ¡ * 
	$g‘Su¥’dCau£SŒ
(
Su¥’dCau£
 
why
)

421 
why
) {

422 
SUSPEND_NOT
:  "NOT?";

423 
SUSPEND_FOR_GC
:  "gc";

424 
SUSPEND_FOR_DEBUG
:  "debug";

425 
SUSPEND_FOR_DEBUG_EVENT
:  "debug-event";

426 
SUSPEND_FOR_STACK_DUMP
:  "stack-dump";

427 
SUSPEND_FOR_VERIFY
:  "verify";

428 
SUSPEND_FOR_HPROF
:  "hprof";

429 #ià
	`defšed
(
WITH_JIT
)

430 
SUSPEND_FOR_TBL_RESIZE
:  "table-resize";

431 
SUSPEND_FOR_IC_PATCH
:  "inline-cache-patch";

432 
SUSPEND_FOR_CC_RESET
:  "reset-code-cache";

433 
SUSPEND_FOR_REFRESH
:  "refresh jit status";

437 
	}
}

447 
	$lockTh»adSu¥’d
(cÚ¡ * 
who
, 
Su¥’dCau£
 
why
)

449 cÚ¡ 
kSpšSË•Time
 = 3*1000*1000;

450 
u8
 
¡¬tWh’
 = 0;

451 
¦“pI‹r
 = 0;

452 
cc
;

455 
cc
 = 
	`dvmTryLockMu‹x
(&
gDvm
.
_th»adSu¥’dLock
);

456 ià(
cc
 != 0) {

457 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

459 ià(!
	`dvmCheckSu¥’dP’dšg
(
£lf
)) {

479 
	`ALOGI
("threadid=%d ODD: wanthread-suspend†ock (%s:%s),"

481 
£lf
->
th»adId
, 
who
, 
	`g‘Su¥’dCau£SŒ
(
why
));

484 
¦“pI‹r
 = 0;

488 ià(
¦“pI‹r
 == 0)

489 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

490 ià(!
	`dvmI‹¿tiveSË•
(
¦“pI‹r
++, 
kSpšSË•Time
, 
¡¬tWh’
)) {

491 
	`ALOGE
("threadid=%d: couldn't gethread-suspend†ock (%s:%s),"

493 
£lf
->
th»adId
, 
who
, 
	`g‘Su¥’dCau£SŒ
(
why
));

495 
	`dvmDumpAÎTh»ads
(
çl£
);

496 
	`dvmAbÜt
();

499 } 
cc
 != 0);

500 
	`as£¹
(
cc
 == 0);

501 
	}
}

506 
šlše
 
	$uÆockTh»adSu¥’d
()

508 
	`dvmUÆockMu‹x
(&
gDvm
.
_th»adSu¥’dLock
);

509 
	}
}

532 
	$dvmSÏyD«mÚs
()

534 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

535 
Th»ad
* 
rg‘
;

536 
th»adId
 = 0;

537 
boŞ
 
doWa™
 = 
çl£
;

539 
	`dvmLockTh»adLi¡
(
£lf
);

541 ià(
£lf
 !ğ
NULL
)

542 
th»adId
 = 
£lf
->threadId;

544 
rg‘
 = 
gDvm
.
th»adLi¡
;

545 
rg‘
 !ğ
NULL
) {

546 ià(
rg‘
 =ğ
£lf
) {

547 
rg‘
 =¬g‘->
Ãxt
;

551 ià(!
	`dvmG‘F›ldBoŞ—n
(
rg‘
->
th»adObj
,

552 
gDvm
.
offJavaLªgTh»ad_d«mÚ
))

555 
	`ALOGW
("threadid=%d:‚on-daemon id=%d still„unning‡t shutdown?!",

556 
th»adId
, 
rg‘
->threadId);

559 
¡d
::
¡ršg
 
	`th»adName
(
	`dvmG‘Th»adName
(
rg‘
));

560 
	`ALOGV
("threadid=%d: suspending daemon id=%d‚ame='%s'",

561 
th»adId
, 
rg‘
->th»adId, 
th»adName
.
	`c_¡r
());

564 
	`lockTh»adSu¥’dCouÁ
();

565 
	`dvmAddToSu¥’dCouÁs
(
rg‘
, 1, 0);

566 
	`uÆockTh»adSu¥’dCouÁ
();

567 
doWa™
 = 
Œue
;

569 
rg‘
 =¬g‘->
Ãxt
;

585 
	`dvmUÆockTh»adLi¡
();

587 ià(
doWa™
) {

588 
boŞ
 
com¶ašed
 = 
çl£
;

590 
	`u¦“p
(200 * 1000);

592 
	`dvmLockTh»adLi¡
(
£lf
);

598 
i
;

599 
i
 = 0; i < 10; i++) {

600 
boŞ
 
®lSu¥’ded
 = 
Œue
;

602 
rg‘
 = 
gDvm
.
th»adLi¡
;

603 
rg‘
 !ğ
NULL
) {

604 ià(
rg‘
 =ğ
£lf
) {

605 
rg‘
 =¬g‘->
Ãxt
;

609 ià(
rg‘
->
¡©us
 =ğ
THREAD_RUNNING
) {

610 ià(!
com¶ašed
)

611 
	`ALOGD
("th»adid=%d‚Ù„—dy y‘", 
rg‘
->
th»adId
);

612 
®lSu¥’ded
 = 
çl£
;

616 
rg‘
 =¬g‘->
Ãxt
;

619 ià(
®lSu¥’ded
) {

620 
	`ALOGV
("th»adid=%d:‡Î d«mÚ havsu¥’ded", 
th»adId
);

623 ià(!
com¶ašed
) {

624 
com¶ašed
 = 
Œue
;

625 
	`ALOGD
("threadid=%d: waiting briefly for daemon suspension",

626 
th»adId
);

630 
	`u¦“p
(200 * 1000);

632 
	`dvmUÆockTh»adLi¡
();

639 
rg‘
 = 
gDvm
.
th»adLi¡
;

640 
rg‘
 !ğ
NULL
) {

641 
Th»ad
* 
ÃxtT¬g‘
 = 
rg‘
->
Ãxt
;

642 
	`uÆškTh»ad
(
rg‘
);

643 
	`ä“Th»ad
(
rg‘
);

644 
rg‘
 = 
ÃxtT¬g‘
;

649 
	}
}

656 
boŞ
 
	$dvmP»pMašFÜJni
(
JNIEnv
* 
pEnv
)

658 
Th»ad
* 
£lf
;

661 
£lf
 = 
gDvm
.
th»adLi¡
;

662 
	`as£¹
(
£lf
->
th»adId
 =ğ
kMašTh»adId
);

665 ià(!
	`ü—‹FakeEÁryF¿me
(
£lf
))

666  
çl£
;

669 
	`dvmS‘JniEnvTh»adId
(
pEnv
, 
£lf
);

670 
	`dvmS‘Th»adJNIEnv
(
£lf
, (
JNIEnv
*è
pEnv
);

672  
Œue
;

673 
	}
}

681 
boŞ
 
	$dvmP»pMašTh»ad
()

683 
Th»ad
* 
th»ad
;

684 
Objeù
* 
groupObj
;

685 
Objeù
* 
th»adObj
;

686 
Objeù
* 
vmTh»adObj
;

687 
SŒšgObjeù
* 
th»adNameSŒ
;

688 
M‘hod
* 
š™
;

689 
JV®ue
 
unu£d
;

691 
	`ALOGV
("+++ finishing…rep on main VMhread");

694 
th»ad
 = 
gDvm
.
th»adLi¡
;

695 
	`as£¹
(
th»ad
->
th»adId
 =ğ
kMašTh»adId
);

701 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgCÏss
)) {

702 
	`ALOGE
("'Class' class failedo initialize");

703  
çl£
;

705 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgTh»adGroup
) ||

706 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgTh»ad
) ||

707 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgVMTh»ad
))

709 
	`ALOGE
("thread classes failedo initialize");

710  
çl£
;

713 
groupObj
 = 
	`dvmG‘MašTh»adGroup
();

714 ià(
groupObj
 =ğ
NULL
)

715  
çl£
;

721 
th»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgTh»ad
, 
ALLOC_DEFAULT
);

722 ià(
th»adObj
 =ğ
NULL
) {

723 
	`ALOGE
("unableo‡llocate mainhread object");

724  
çl£
;

726 
	`dvmR–—£T¿ckedAÎoc
(
th»adObj
, 
NULL
);

728 
th»adNameSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
("main");

729 ià(
th»adNameSŒ
 =ğ
NULL
)

730  
çl£
;

731 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
th»adNameSŒ
, 
NULL
);

733 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»ad
, "<init>",

735 
	`as£¹
(
š™
 !ğ
NULL
);

736 
	`dvmC®lM‘hod
(
th»ad
, 
š™
, 
th»adObj
, &
unu£d
, 
groupObj
, 
th»adNameSŒ
,

737 
THREAD_NORM_PRIORITY
, 
çl£
);

738 ià(
	`dvmCheckExû±iÚ
(
th»ad
)) {

739 
	`ALOGE
("exceptionhrown while constructing mainhread object");

740  
çl£
;

746 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_DEFAULT
);

747 ià(
vmTh»adObj
 =ğ
NULL
) {

748 
	`ALOGE
("unableo‡llocate main vmthread object");

749  
çl£
;

751 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

753 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgVMTh»ad
, "<init>",

755 
	`dvmC®lM‘hod
(
th»ad
, 
š™
, 
vmTh»adObj
, &
unu£d
, 
th»adObj
);

756 ià(
	`dvmCheckExû±iÚ
(
th»ad
)) {

757 
	`ALOGE
("exceptionhrown while constructing main vmthread object");

758  
çl£
;

762 
	`as£¹
(
gDvm
.
offJavaLªgVMTh»ad_vmD©a
 != 0);

763 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
th»ad
);

770 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
,

771 
vmTh»adObj
);

772 
	`dvmS‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
, 
Œue
);

774 
th»ad
->
th»adObj
 =hreadObj;

784 
Objeù
* 
sy¡emLßd”
 = 
	`dvmG‘Sy¡emCÏssLßd”
();

785 ià(
sy¡emLßd”
 =ğ
NULL
) {

786 
	`ALOGW
("WARNING: system class†oader is NULL (setting main ctxt)");

789 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_cÚ‹xtCÏssLßd”
,

790 
sy¡emLßd”
);

791 
	`dvmR–—£T¿ckedAÎoc
(
sy¡emLßd”
, 
NULL
);

795 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

797  
Œue
;

798 
	}
}

806 
Th»ad
* 
	$®locTh»ad
(
š‹½SckSize
)

808 
Th»ad
* 
th»ad
;

809 
u1
* 
¡ackBÙtom
;

811 
th»ad
 = (
Th»ad
*è
	`ÿÎoc
(1, (Thread));

812 ià(
th»ad
 =ğ
NULL
)

813  
NULL
;

816 
	`as£¹
((((
ušŒ_t
)&
th»ad
->
š‹½B»ak
.
®l
) & 0x7) == 0);

817 
	`as£¹
((
th»ad
->
š‹½B»ak
è=ğÑh»ad->š‹½B»ak.
®l
));

820 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

821 ià(
	`dvmS–fV”ifiÿtiÚShadowS·ûAÎoc
(
th»ad
è=ğ
NULL
)

822  
NULL
;

825 
	`as£¹
(
š‹½SckSize
 >ğ
kMšSckSize
 && iÁ”pSckSiz<=
kMaxSckSize
);

827 
th»ad
->
¡©us
 = 
THREAD_INITIALIZING
;

836 #ifdeà
MALLOC_INTERP_STACK


837 
¡ackBÙtom
 = (
u1
*è
	`m®loc
(
š‹½SckSize
);

838 ià(
¡ackBÙtom
 =ğ
NULL
) {

839 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

840 
	`dvmS–fV”ifiÿtiÚShadowS·ûF»e
(
th»ad
);

842 
	`ä“
(
th»ad
);

843  
NULL
;

845 
	`mem£t
(
¡ackBÙtom
, 0xc5, 
š‹½SckSize
);

847 
¡ackBÙtom
 = (
u1
*è
	`mm­
(
NULL
, 
š‹½SckSize
, 
PROT_READ
 | 
PROT_WRITE
,

848 
MAP_PRIVATE
 | 
MAP_ANON
, -1, 0);

849 ià(
¡ackBÙtom
 =ğ
MAP_FAILED
) {

850 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

851 
	`dvmS–fV”ifiÿtiÚShadowS·ûF»e
(
th»ad
);

853 
	`ä“
(
th»ad
);

854  
NULL
;

858 
	`as£¹
(((
u4
)
¡ackBÙtom
 & 0x03) == 0);

859 
th»ad
->
š‹½SckSize
 = interpStackSize;

860 
th»ad
->
š‹½SckS¹
 = 
¡ackBÙtom
 + 
š‹½SckSize
;

861 
th»ad
->
š‹½SckEnd
 = 
¡ackBÙtom
 + 
STACK_OVERFLOW_RESERVE
;

863 #iâdeà
DVM_NO_ASM_INTERP


864 
th»ad
->
mašHªdËrTabË
 = 
dvmAsmIn¡ruùiÚS¹
;

865 
th»ad
->
®tHªdËrTabË
 = 
dvmAsmAÉIn¡ruùiÚS¹
;

866 
th»ad
->
š‹½B»ak
.
ùl
.
curHªdËrTabË
 =h»ad->
mašHªdËrTabË
;

870 
	`dvmIn™IÁ”pSck
(
th»ad
, 
š‹½SckSize
);

873 
	`dvmIn™IÁ”´‘”S‹
(
th»ad
);

875  
th»ad
;

876 
	}
}

883 
pid_t
 
	$dvmG‘SysTh»adId
()

885 #ifdeà
HAVE_GETTID


886  
	`g‘tid
();

888  
	`g‘pid
();

890 
	}
}

901 
boŞ
 
	$´•¬eTh»ad
(
Th»ad
* 
th»ad
)

903 
	`assignTh»adId
(
th»ad
);

904 
th»ad
->
hªdË
 = 
	`±h»ad_£lf
();

905 
th»ad
->
sy¡emTid
 = 
	`dvmG‘SysTh»adId
();

913 
	`£tTh»adS–f
(
th»ad
);

915 
	`ALOGV
("threadid=%d: interp stack‡t %p",

916 
th»ad
->
th»adId
,h»ad->
š‹½SckS¹
 -h»ad->
š‹½SckSize
);

921 
	`dvmIn™Mu‹x
(&
th»ad
->
švokeReq
.
lock
);

922 
	`±h»ad_cÚd_š™
(&
th»ad
->
švokeReq
.
cv
, 
NULL
);

930 ià(!
th»ad
->
jniLoÿlRefTabË
.
	`š™
(
kJniLoÿlRefMš
,

931 
kJniLoÿlRefMax
, 
kIndœeùKšdLoÿl
)) {

932  
çl£
;

934 ià(!
	`dvmIn™Reã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
,

935 
kIÁ”ÇlRefDeçuÉ
, 
kIÁ”ÇlRefMax
))

936  
çl£
;

938 
	`mem£t
(&
th»ad
->
jniMÚ™ÜRefTabË
, 0, (thread->jniMonitorRefTable));

940 
	`±h»ad_cÚd_š™
(&
th»ad
->
wa™CÚd
, 
NULL
);

941 
	`dvmIn™Mu‹x
(&
th»ad
->
wa™Mu‹x
);

944 
	`dvmIn™Mu‹x
(&
th»ad
->
ÿÎbackMu‹x
);

946  
Œue
;

947 
	}
}

954 
	$uÆškTh»ad
(
Th»ad
* 
th»ad
)

956 
	`LOG_THREAD
("th»adid=%d:„emovšg from†i¡", 
th»ad
->
th»adId
);

957 ià(
th»ad
 =ğ
gDvm
.
th»adLi¡
) {

958 
	`as£¹
(
th»ad
->
´ev
 =ğ
NULL
);

959 
gDvm
.
th»adLi¡
 = 
th»ad
->
Ãxt
;

961 
	`as£¹
(
th»ad
->
´ev
 !ğ
NULL
);

962 
th»ad
->
´ev
->
Ãxt
 =hread->next;

964 ià(
th»ad
->
Ãxt
 !ğ
NULL
)

965 
th»ad
->
Ãxt
->
´ev
 =hread->prev;

966 
th»ad
->
´ev
 =h»ad->
Ãxt
 = 
NULL
;

967 
	}
}

972 
	$ä“Th»ad
(
Th»ad
* 
th»ad
)

974 ià(
th»ad
 =ğ
NULL
)

978 
	`LOGVV
("th»adid=%d: f»ešg", 
th»ad
->
th»adId
);

980 ià(
th»ad
->
š‹½SckS¹
 !ğ
NULL
) {

981 
u1
* 
š‹½SckBÙtom
;

983 
š‹½SckBÙtom
 = 
th»ad
->
š‹½SckS¹
;

984 
š‹½SckBÙtom
 -ğ
th»ad
->
š‹½SckSize
;

985 #ifdeà
MALLOC_INTERP_STACK


986 
	`ä“
(
š‹½SckBÙtom
);

988 ià(
	`munm­
(
š‹½SckBÙtom
, 
th»ad
->
š‹½SckSize
) != 0)

989 
	`ALOGW
("munmap(thread stack) failed");

993 
th»ad
->
jniLoÿlRefTabË
.
	`de¡roy
();

994 
	`dvmCË¬Reã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
);

995 ià(&
th»ad
->
jniMÚ™ÜRefTabË
.
bË
 !ğ
NULL
)

996 
	`dvmCË¬Reã»nûTabË
(&
th»ad
->
jniMÚ™ÜRefTabË
);

998 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

999 
	`dvmS–fV”ifiÿtiÚShadowS·ûF»e
(
th»ad
);

1001 
	`ä“
(
th»ad
);

1002 
	}
}

1007 
Th»ad
* 
	$dvmTh»adS–f
()

1009  (
Th»ad
*è
	`±h»ad_g‘¥ecific
(
gDvm
.
±h»adKeyS–f
);

1010 
	}
}

1015 
	$£tTh»adS–f
(
Th»ad
* 
th»ad
)

1017 
cc
;

1019 
cc
 = 
	`±h»ad_£t¥ecific
(
gDvm
.
±h»adKeyS–f
, 
th»ad
);

1020 ià(
cc
 != 0) {

1027 ià(
th»ad
 !ğ
NULL
) {

1028 
	`ALOGE
("±h»ad_£t¥ecific(%pèçed,ƒ¼=%d", 
th»ad
, 
cc
);

1029 
	`dvmAbÜt
();

1032 
	}
}

1054 
	$th»adEx™Check
(* 
¬g
)

1056 cÚ¡ 
kMaxCouÁ
 = 2;

1058 
Th»ad
* 
£lf
 = (Th»ad*è
¬g
;

1059 
	`as£¹
(
£lf
 !ğ
NULL
);

1061 
	`ALOGV
("threadid=%d:hreadExitCheck(%p) count=%d",

1062 
£lf
->
th»adId
, 
¬g
, s–f->
th»adEx™CheckCouÁ
);

1064 ià(
£lf
->
¡©us
 =ğ
THREAD_ZOMBIE
) {

1065 
	`ALOGW
("threadid=%d: Weird -- shouldn't be inhreadExitCheck",

1066 
£lf
->
th»adId
);

1070 ià(
£lf
->
th»adEx™CheckCouÁ
 < 
kMaxCouÁ
) {

1074 
	`ALOGD
("threadid=%d:hreadƒxiting,‚ot yet detached (count=%d)",

1075 
£lf
->
th»adId
, s–f->
th»adEx™CheckCouÁ
);

1076 
£lf
->
th»adEx™CheckCouÁ
++;

1077 
cc
 = 
	`±h»ad_£t¥ecific
(
gDvm
.
±h»adKeyS–f
, 
£lf
);

1078 ià(
cc
 != 0) {

1079 
	`ALOGE
("threadid=%d: unableo„e-addhreado TLS",

1080 
£lf
->
th»adId
);

1081 
	`dvmAbÜt
();

1084 
	`ALOGE
("threadid=%d:‚ativehreadƒxited without detaching",

1085 
£lf
->
th»adId
);

1086 
	`dvmAbÜt
();

1088 
	}
}

1099 
	$assignTh»adId
(
Th»ad
* 
th»ad
)

1106 
num
 = 
	`dvmAÎocB™
(
gDvm
.
th»adIdM­
);

1107 ià(
num
 < 0) {

1108 
	`ALOGE
("Ran out ofhread IDs");

1109 
	`dvmAbÜt
();

1112 
th»ad
->
th»adId
 = 
num
 + 1;

1114 
	`as£¹
(
th»ad
->
th»adId
 != 0);

1115 
	}
}

1120 
	$»Ëa£Th»adId
(
Th»ad
* 
th»ad
)

1122 
	`as£¹
(
th»ad
->
th»adId
 > 0);

1123 
	`dvmCË¬B™
(
gDvm
.
th»adIdM­
, 
th»ad
->
th»adId
 - 1);

1124 
th»ad
->
th»adId
 = 0;

1125 
	}
}

1135 
boŞ
 
	$ü—‹FakeEÁryF¿me
(
Th»ad
* 
th»ad
)

1153 
	`as£¹
(
th»ad
->
th»adId
 =ğ
kMašTh»adId
);

1155 ià(!
	`dvmPushJNIF¿me
(
th»ad
, 
gDvm
.
m‘hD®vikSy¡emN©iveS¹_maš
))

1156  
çl£
;

1161 
	`as£¹
(
gDvm
.
m‘hD®vikSy¡emN©iveS¹_maš
->
»gi¡”sSize
 == 1);

1162 
u4
* 
äamePŒ
 = (u4*è
th»ad
->
š‹½Save
.
curF¿me
;

1163 
äamePŒ
[0] = 0;

1165  
Œue
;

1166 
	}
}

1174 
boŞ
 
	$ü—‹FakeRunF¿me
(
Th»ad
* 
th»ad
)

1176  
	`dvmPushJNIF¿me
(
th»ad
, 
gDvm
.
m‘hD®vikSy¡emN©iveS¹_run
);

1177 
	}
}

1182 
	$£tTh»adName
(cÚ¡ *
th»adName
)

1184 
hasAt
 = 0;

1185 
hasDÙ
 = 0;

1186 cÚ¡ *
s
 = 
th»adName
;

1187 *
s
) {

1188 ià(*
s
 =ğ'.'è
hasDÙ
 = 1;

1189 ià(*
s
 =ğ'@'è
hasAt
 = 1;

1190 
s
++;

1192 
Ën
 = 
s
 - 
th»adName
;

1193 ià(
Ën
 < 15 || 
hasAt
 || !
hasDÙ
) {

1194 
s
 = 
th»adName
;

1196 
s
 = 
th»adName
 + 
Ën
 - 15;

1198 #ià
	`defšed
(
HAVE_ANDROID_PTHREAD_SETNAME_NP
)

1200 
buf
[16];

1201 
	`¡ºıy
(
buf
, 
s
, (buf)-1);

1202 
buf
[(buf)-1] = '\0';

1203 
”r
 = 
	`±h»ad_£Šame_Å
(
	`±h»ad_£lf
(), 
buf
);

1204 ià(
”r
 != 0) {

1205 
	`ALOGW
("Unableo sethe‚ame of currenthreado '%s': %s",

1206 
buf
, 
	`¡»¼Ü
(
”r
));

1208 #–ià
	`defšed
(
HAVE_PRCTL
)

1209 
	`´ùl
(
PR_SET_NAME
, (è
s
, 0, 0, 0);

1211 
	`ALOGD
("NØwayØ£ˆcu¼’ˆth»ad' Çm(%s)", 
s
);

1213 
	}
}

1233 
boŞ
 
	$dvmC»©eIÁ”pTh»ad
(
Objeù
* 
th»adObj
, 
»qSckSize
)

1236 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1238 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1240 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s,…id:%did:%d‚ame:%s", 
__FUNCTION__
,
	`g‘pid
(),
£lf
->
th»adId
, 
	`dvmG‘Th»adName
(£lf).
	`c_¡r
());

1241 if(
	`dvmG‘Th»adName
(
£lf
)=="main"){

1242 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","£‰šg mašØisShadow: %s", 
gDvm
.
isShadow
?"true":"false");

1243 
	`dvmS‘F›ldBoŞ—n
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
, gDvm.
isShadow
);

1245 
	`dvmS‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
, gDvm.
isShadow
);

1246 
¡ackSize
;

1247 ià(
»qSckSize
 == 0)

1248 
¡ackSize
 = 
gDvm
.stackSize;

1249 ià(
»qSckSize
 < 
kMšSckSize
)

1250 
¡ackSize
 = 
kMšSckSize
;

1251 ià(
»qSckSize
 > 
kMaxSckSize
)

1252 
¡ackSize
 = 
kMaxSckSize
;

1254 
¡ackSize
 = 
»qSckSize
;

1256 
±h»ad_©Œ_t
 
th»adA‰r
;

1257 
	`±h»ad_©Œ_š™
(&
th»adA‰r
);

1258 
	`±h»ad_©Œ_£td‘ach¡©e
(&
th»adA‰r
, 
PTHREAD_CREATE_DETACHED
);

1264 
Objeù
* 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_DEFAULT
);

1265 ià(
vmTh»adObj
 =ğ
NULL
)

1266  
çl£
;

1268 
Th»ad
* 
ÃwTh»ad
 = 
	`®locTh»ad
(
¡ackSize
);

1269 ià(
ÃwTh»ad
 =ğ
NULL
) {

1270 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1271  
çl£
;

1274 
ÃwTh»ad
->
th»adObj
 =hreadObj;

1276 
	`as£¹
(
ÃwTh»ad
->
¡©us
 =ğ
THREAD_INITIALIZING
);

1285 
	`dvmLockTh»adLi¡
(
£lf
);

1287 ià(
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
è!ğ
NULL
) {

1288 
	`dvmUÆockTh»adLi¡
();

1289 
	`dvmThrowIÎeg®Th»adS‹Exû±iÚ
(

1291 
	`ä“Th»ad
(
ÃwTh»ad
);

1292 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1303 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
ÃwTh»ad
);

1304 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
vmTh»adObj
);

1309 
boŞ
 
tmp
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
);

1310 
	`dvmDumpTh»ad
(
ÃwTh»ad
,
çl£
);

1311 if(
tmp
){

1312 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s, gDvm i shadow i Œuš %d:%d", 
__FUNCTION__
,
	`g‘pid
(),
ÃwTh»ad
->
th»adId
);

1314 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s, gDvm i shadow i çl£ iÀ%d:%d", 
__FUNCTION__
,
	`g‘pid
(),
ÃwTh»ad
->
th»adId
);

1316 if(
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
è!ğgDvm.
isShadow
){

1317 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s, s‘ f›ld by·s çed", 
__FUNCTION__
);

1323 
	`dvmUÆockTh»adLi¡
();

1325 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

1326 
±h»ad_t
 
th»adHªdË
;

1327 
cc
 = 
	`±h»ad_ü—‹
(&
th»adHªdË
, &
th»adA‰r
, 
š‹½Th»adS¹
,

1328 
ÃwTh»ad
);

1329 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1331 ià(
cc
 != 0) {

1337 
	`ALOGE
("Th»ad c»©iÚ faed (”r=%s)", 
	`¡»¼Ü
(
”ºo
));

1339 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
NULL
);

1341 
	`dvmThrowOutOfMemÜyE¼Ü
("thread creation failed");

1342 
ç
;

1424 
	`dvmLockTh»adLi¡
(
£lf
);

1425 
	`as£¹
(
£lf
->
¡©us
 =ğ
THREAD_RUNNING
);

1426 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

1427 
ÃwTh»ad
->
¡©us
 !ğ
THREAD_STARTING
)

1428 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1430 
	`LOG_THREAD
("th»adid=%d:‡ddšgØli¡", 
ÃwTh»ad
->
th»adId
);

1431 
ÃwTh»ad
->
Ãxt
 = 
gDvm
.
th»adLi¡
->next;

1432 ià(
ÃwTh»ad
->
Ãxt
 !ğ
NULL
)

1433 
ÃwTh»ad
->
Ãxt
->
´ev
 =‚ewThread;

1434 
ÃwTh»ad
->
´ev
 = 
gDvm
.
th»adLi¡
;

1435 
gDvm
.
th»adLi¡
->
Ãxt
 = 
ÃwTh»ad
;

1438 
	`dvmIn™ŸlizeIÁ”pB»ak
(
ÃwTh»ad
);

1440 ià(!
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
))

1441 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

1443 
	`dvmUÆockTh»adLi¡
();

1446 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1459 
	`dvmLockTh»adLi¡
(
£lf
);

1461 
	`as£¹
(
ÃwTh»ad
->
¡©us
 =ğ
THREAD_STARTING
);

1462 
ÃwTh»ad
->
¡©us
 = 
THREAD_VMWAIT
;

1463 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1465 
	`dvmUÆockTh»adLi¡
();

1467 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1468  
Œue
;

1470 
ç
:

1471 
	`ä“Th»ad
(
ÃwTh»ad
);

1472 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1473  
çl£
;

1474 
	}
}

1479 * 
	$š‹½Th»adS¹
(* 
¬g
)

1481 
Th»ad
* 
£lf
 = (Th»ad*è
¬g
;

1483 
¡d
::
¡ršg
 
	`th»adName
(
	`dvmG‘Th»adName
(
£lf
));

1484 
	`£tTh»adName
(
th»adName
.
	`c_¡r
());

1489 
	`dvmLockTh»adLi¡
(
£lf
);

1490 
	`´•¬eTh»ad
(
£lf
);

1492 
	`LOG_THREAD
("th»adid=%d: c»©ed from iÁ”p", 
£lf
->
th»adId
);

1498 
£lf
->
¡©us
 = 
THREAD_STARTING
;

1499 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1514 
£lf
->
¡©us
 !ğ
THREAD_VMWAIT
)

1515 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1517 
	`dvmUÆockTh»adLi¡
();

1522 
£lf
->
jniEnv
 = 
	`dvmC»©eJNIEnv
(self);

1528 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1535 ià(
gDvm
.
debugg”CÚÃùed
)

1536 
	`dvmDbgPo¡Th»adS¹
(
£lf
);

1546 
´iÜ™y
 = 
	`dvmG‘F›ldIÁ
(
£lf
->
th»adObj
,

1547 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
);

1548 
	`dvmChªgeTh»adPriÜ™y
(
£lf
, 
´iÜ™y
);

1556 
M‘hod
* 
run
 = 
£lf
->
th»adObj
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgTh»ad_run
];

1557 
JV®ue
 
unu£d
;

1559 
	`ALOGV
("th»adid=%d: c®lšg„un()", 
£lf
->
th»adId
);

1560 
	`as£¹
(
	`¡rcmp
(
run
->
Çme
, "run") == 0);

1561 
	`dvmC®lM‘hod
(
£lf
, 
run
, s–f->
th»adObj
, &
unu£d
);

1562 
	`ALOGV
("th»adid=%d:ƒx™šg", 
£lf
->
th»adId
);

1568 
	`dvmD‘achCu¼’tTh»ad
();

1570  
NULL
;

1571 
	}
}

1586 
	$th»adEx™UnÿughtExû±iÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
group
)

1588 
Objeù
* 
exû±iÚ
;

1589 
Objeù
* 
hªdËrObj
;

1590 
M‘hod
* 
unÿughtHªdËr
;

1592 
	`ALOGW
("threadid=%d:hreadƒxiting with uncaughtƒxception (group=%p)",

1593 
£lf
->
th»adId
, 
group
);

1594 
	`as£¹
(
group
 !ğ
NULL
);

1600 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1601 
	`as£¹
(
exû±iÚ
 !ğ
NULL
);

1602 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1603 
	`dvmCË¬Exû±iÚ
(
£lf
);

1611 
hªdËrObj
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
,

1612 
gDvm
.
offJavaLªgTh»ad_unÿughtHªdËr
);

1613 ià(
hªdËrObj
 =ğ
NULL
)

1614 
hªdËrObj
 = 
group
;

1620 
unÿughtHªdËr
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
hªdËrObj
->
şazz
,

1623 ià(
unÿughtHªdËr
 !ğ
NULL
) {

1626 
JV®ue
 
unu£d
;

1627 
	`dvmC®lM‘hod
(
£lf
, 
unÿughtHªdËr
, 
hªdËrObj
, &
unu£d
,

1628 
£lf
->
th»adObj
, 
exû±iÚ
);

1631 
	`ALOGW
("WARNING:‚o 'uncaughtException' method in class %s",

1632 
hªdËrObj
->
şazz
->
desütÜ
);

1633 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

1634 
	`dvmLogExû±iÚSckT¿û
();

1638 
	`dvmCË¬Exû±iÚ
(
£lf
);

1640 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1643 
	`lockTh»adSu¥’dCouÁ
();

1644 
	`dvmAddToSu¥’dCouÁs
(
£lf
, -£lf->
su¥’dCouÁ
, 0);

1645 
	`uÆockTh»adSu¥’dCouÁ
();

1646 
	}
}

1657 
boŞ
 
	$dvmC»©eIÁ”ÇlTh»ad
(
±h»ad_t
* 
pHªdË
, cÚ¡ * 
Çme
,

1658 
IÁ”ÇlTh»adS¹
 
func
, * 
funcArg
)

1660 
IÁ”ÇlS¹Args
* 
pArgs
;

1661 
Objeù
* 
sy¡emGroup
;

1662 
±h»ad_©Œ_t
 
th»adA‰r
;

1663 vŞ©
Th»ad
* 
ÃwTh»ad
 = 
NULL
;

1664 vŞ©
ü—‹Stus
 = 0;

1666 
sy¡emGroup
 = 
	`dvmG‘Sy¡emTh»adGroup
();

1667 ià(
sy¡emGroup
 =ğ
NULL
)

1668  
çl£
;

1670 
pArgs
 = (
IÁ”ÇlS¹Args
*è
	`m®loc
((*pArgs));

1671 
pArgs
->
func
 = func;

1672 
pArgs
->
funcArg
 = funcArg;

1673 
pArgs
->
Çme
 = 
	`¡rdup
(name);

1674 
pArgs
->
group
 = 
sy¡emGroup
;

1675 
pArgs
->
isD«mÚ
 = 
Œue
;

1676 
pArgs
->
pTh»ad
 = &
ÃwTh»ad
;

1677 
pArgs
->
pC»©eStus
 = &
ü—‹Stus
;

1679 
	`±h»ad_©Œ_š™
(&
th»adA‰r
);

1682 ià(
	`±h»ad_ü—‹
(
pHªdË
, &
th»adA‰r
, 
š‹º®Th»adS¹
,

1683 
pArgs
) != 0)

1685 
	`ALOGE
("internalhread creation failed");

1686 
	`ä“
(
pArgs
->
Çme
);

1687 
	`ä“
(
pArgs
);

1688  
çl£
;

1706 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1707 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

1708 
	`dvmLockTh»adLi¡
(
£lf
);

1709 
ü—‹Stus
 == 0)

1710 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1712 ià(
ÃwTh»ad
 =ğ
NULL
) {

1713 
	`ALOGW
("š‹º®h»ad c»©çed (ü—‹Stus=%d)", 
ü—‹Stus
);

1714 
	`as£¹
(
ü—‹Stus
 < 0);

1716 
	`dvmUÆockTh»adLi¡
();

1717 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1718  
çl£
;

1724 
	`dvmUÆockTh»adLi¡
();

1725 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1727  
Œue
;

1728 
	}
}

1738 * 
	$š‹º®Th»adS¹
(* 
¬g
)

1740 
IÁ”ÇlS¹Args
* 
pArgs
 = (IÁ”ÇlS¹Args*è
¬g
;

1741 
JavaVMA‰achArgs
 
jniArgs
;

1743 
jniArgs
.
v”siÚ
 = 
JNI_VERSION_1_2
;

1744 
jniArgs
.
Çme
 = 
pArgs
->name;

1745 
jniArgs
.
group
 = 
»š‹½»t_ÿ¡
<
jobjeù
>(
pArgs
->group);

1747 
	`£tTh»adName
(
pArgs
->
Çme
);

1750 ià(
	`dvmA‰achCu¼’tTh»ad
(&
jniArgs
, 
pArgs
->
isD«mÚ
)) {

1756 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1757 *
pArgs
->
pC»©eStus
 = 1;

1758 *
pArgs
->
pTh»ad
 = 
	`dvmTh»adS–f
();

1759 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1760 
	`dvmUÆockTh»adLi¡
();

1762 
	`LOG_THREAD
("threadid=%d: internal '%s'",

1763 
	`dvmTh»adS–f
()->
th»adId
, 
pArgs
->
Çme
);

1766 (*
pArgs
->
func
)ÕArgs->
funcArg
);

1769 
	`dvmD‘achCu¼’tTh»ad
();

1776 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1777 *
pArgs
->
pC»©eStus
 = -1;

1778 
	`as£¹
(*
pArgs
->
pTh»ad
 =ğ
NULL
);

1779 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1780 
	`dvmUÆockTh»adLi¡
();

1782 
	`as£¹
(*
pArgs
->
pTh»ad
 =ğ
NULL
);

1785 
	`ä“
(
pArgs
->
Çme
);

1786 
	`ä“
(
pArgs
);

1787  
NULL
;

1788 
	}
}

1795 
boŞ
 
	$dvmA‰achCu¼’tTh»ad
(cÚ¡ 
JavaVMA‰achArgs
* 
pArgs
, 
boŞ
 
isD«mÚ
)

1797 
Th»ad
* 
£lf
 = 
NULL
;

1798 
Objeù
* 
th»adObj
 = 
NULL
;

1799 
Objeù
* 
vmTh»adObj
 = 
NULL
;

1800 
SŒšgObjeù
* 
th»adNameSŒ
 = 
NULL
;

1801 
M‘hod
* 
š™
;

1802 
boŞ
 
ok
, 
»t
;

1805 
£lf
 = 
	`®locTh»ad
(
gDvm
.
¡ackSize
);

1806 ià(
£lf
 =ğ
NULL
)

1807 
ç
;

1808 
	`£tTh»adS–f
(
£lf
);

1815 
	`dvmLockTh»adLi¡
(
£lf
);

1816 
ok
 = 
	`´•¬eTh»ad
(
£lf
);

1817 
	`dvmUÆockTh»adLi¡
();

1818 ià(!
ok
)

1819 
ç
;

1821 
£lf
->
jniEnv
 = 
	`dvmC»©eJNIEnv
(self);

1822 ià(
£lf
->
jniEnv
 =ğ
NULL
)

1823 
ç
;

1831 ià(!
	`ü—‹FakeRunF¿me
(
£lf
))

1832 
ç
;

1838 
	`LOG_THREAD
("th»adid=%d:‡ddšgØli¡ (©ched)", 
£lf
->
th»adId
);

1840 
	`dvmLockTh»adLi¡
(
£lf
);

1842 
£lf
->
Ãxt
 = 
gDvm
.
th»adLi¡
->next;

1843 ià(
£lf
->
Ãxt
 !ğ
NULL
)

1844 
£lf
->
Ãxt
->
´ev
 = self;

1845 
£lf
->
´ev
 = 
gDvm
.
th»adLi¡
;

1846 
gDvm
.
th»adLi¡
->
Ãxt
 = 
£lf
;

1847 ià(!
isD«mÚ
)

1848 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

1850 
	`dvmUÆockTh»adLi¡
();

1866 
	`as£¹
(
£lf
->
¡©us
 =ğ
THREAD_INITIALIZING
);

1867 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

1868 
	`dvmLockMu‹x
(&
gDvm
.
gcH—pLock
);

1869 
	`dvmUÆockMu‹x
(&
gDvm
.
gcH—pLock
);

1870 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1875 
th»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgTh»ad
, 
ALLOC_DEFAULT
);

1876 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_DEFAULT
);

1877 ià(
th»adObj
 =ğ
NULL
 || 
vmTh»adObj
 == NULL)

1878 
ç_uÆšk
;

1884 
£lf
->
th»adObj
 =hreadObj;

1885 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
£lf
);

1890 ià(
pArgs
->
Çme
 !ğ
NULL
) {

1891 
th»adNameSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
pArgs
->
Çme
);

1892 ià(
th»adNameSŒ
 =ğ
NULL
) {

1893 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1894 
ç_uÆšk
;

1898 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»ad
, "<init>",

1900 ià(
š™
 =ğ
NULL
) {

1901 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1902 
ç_uÆšk
;

1916 
JV®ue
 
unu£d
;

1917 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
th»adObj
, &
unu£d
, (
Objeù
*)
pArgs
->
group
,

1918 
th»adNameSŒ
, 
	`os_g‘Th»adPriÜ™yFromSy¡em
(), 
isD«mÚ
);

1919 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1920 
	`ALOGE
("exceptionhrown while constructing‡ttachedhread object");

1921 
ç_uÆšk
;

1938 ià(
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
è!ğ
NULL
) {

1939 
	`ALOGW
("WOW:hread start hijack");

1940 
	`dvmThrowIÎeg®Th»adS‹Exû±iÚ
(

1954 
»t
 = 
çl£
;

1956 
»t
 = 
Œue
;

1958 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
vmTh»adObj
);

1961 
	`dvmR–—£T¿ckedAÎoc
(
th»adObj
, 
£lf
);

1962 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
£lf
);

1963 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
th»adNameSŒ
, 
£lf
);

1965 
	`LOG_THREAD
("threadid=%d:‡ttached from‚ative,‚ame=%s",

1966 
£lf
->
th»adId
, 
pArgs
->
Çme
);

1969 ià(
gDvm
.
debugg”CÚÃùed
)

1970 
	`dvmDbgPo¡Th»adS¹
(
£lf
);

1972  
»t
;

1974 
ç_uÆšk
:

1975 
	`dvmLockTh»adLi¡
(
£lf
);

1976 
	`uÆškTh»ad
(
£lf
);

1977 ià(!
isD«mÚ
)

1978 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

1979 
	`dvmUÆockTh»adLi¡
();

1981 
ç
:

1982 
	`dvmR–—£T¿ckedAÎoc
(
th»adObj
, 
£lf
);

1983 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
£lf
);

1984 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
th»adNameSŒ
, 
£lf
);

1985 ià(
£lf
 !ğ
NULL
) {

1986 ià(
£lf
->
jniEnv
 !ğ
NULL
) {

1987 
	`dvmDe¡royJNIEnv
(
£lf
->
jniEnv
);

1988 
£lf
->
jniEnv
 = 
NULL
;

1990 
	`ä“Th»ad
(
£lf
);

1992 
	`£tTh»adS–f
(
NULL
);

1993  
çl£
;

1994 
	}
}

2019 
	$dvmD‘achCu¼’tTh»ad
()

2021 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2022 
Objeù
* 
vmTh»ad
;

2023 
Objeù
* 
group
;

2025 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

2026 if(
gDvm
.
th»adEndHook
){

2027 
gDvm
.
	`th»adEndHook
(
£lf
);

2029 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

2039 
curD•th
 = 
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
š‹½Save
.
curF¿me
);

2040 ià(
curD•th
 != 0) {

2041 
boŞ
 
tİIsN©ive
 = 
çl£
;

2043 ià(
curD•th
 == 1) {

2045 
	`as£¹
(!
	`dvmIsB»akF¿me
((
u4
*)
£lf
->
š‹½Save
.
curF¿me
));

2046 
SckSaveA»a
* 
s§
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

2047 ià(
	`dvmIsN©iveM‘hod
(
s§
->
m‘hod
))

2048 
tİIsN©ive
 = 
Œue
;

2051 ià(!
tİIsN©ive
) {

2052 
	`ALOGE
("ERROR: detachinghread with interp frames (count=%d)",

2053 
curD•th
);

2054 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

2055 
	`dvmAbÜt
();

2059 
group
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_group
);

2060 
	`LOG_THREAD
("th»adid=%d: d‘ach (group=%p)", 
£lf
->
th»adId
, 
group
);

2067 
	`dvmR–—£JniMÚ™Üs
(
£lf
);

2072 ià(
	`dvmCheckExû±iÚ
(
£lf
))

2073 
	`th»adEx™UnÿughtExû±iÚ
(
£lf
, 
group
);

2078 ià(
group
 !ğ
NULL
) {

2079 
M‘hod
* 
»moveTh»ad
 =

2080 
group
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgTh»adGroup_»moveTh»ad
];

2081 
JV®ue
 
unu£d
;

2082 
	`dvmC®lM‘hod
(
£lf
, 
»moveTh»ad
, 
group
, &
unu£d
, s–f->
th»adObj
);

2091 
vmTh»ad
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
,

2092 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
);

2093 
	`dvmAddT¿ckedAÎoc
(
vmTh»ad
, 
£lf
);

2094 
	`dvmS‘F›ldObjeù
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
NULL
);

2097 
	`dvmS‘F›ldObjeù
(
vmTh»ad
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, 
NULL
);

2107 ià(
gDvm
.
debugg”CÚÃùed
)

2108 
	`dvmDbgPo¡Th»adD—th
(
£lf
);

2114 
	`dvmLockObjeù
(
£lf
, 
vmTh»ad
);

2115 
	`dvmObjeùNÙifyAÎ
(
£lf
, 
vmTh»ad
);

2116 
	`dvmUÆockObjeù
(
£lf
, 
vmTh»ad
);

2118 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»ad
, 
£lf
);

2119 
vmTh»ad
 = 
NULL
;

2126 vŞ©* 
¿w
 = 
»š‹½»t_ÿ¡
<vŞ©*>(&
£lf
->
¡©us
);

2127 vŞ©
št32_t
* 
addr
 = 
»š‹½»t_ÿ¡
<vŞ©št32_t*>(
¿w
);

2128 
	`ªdroid_©omic_»Ëa£_¡Üe
(
THREAD_VMWAIT
, 
addr
);

2142 
M‘hodT¿ûS‹
* 
ŒaûS‹
 = &
gDvm
.
m‘hodT¿û
;

2144 
	`dvmLockMu‹x
(&
ŒaûS‹
->
¡¬tStİLock
);

2145 ià(
ŒaûS‹
->
ŒaûEÇbËd
) {

2146 
	`ALOGI
("threadid=%d: waiting for methodraceo finish",

2147 
£lf
->
th»adId
);

2148 
ŒaûS‹
->
ŒaûEÇbËd
) {

2149 
	`dvmWa™CÚd
(&
ŒaûS‹
->
th»adEx™CÚd
,

2150 &
ŒaûS‹
->
¡¬tStİLock
);

2153 
	`dvmUÆockMu‹x
(&
ŒaûS‹
->
¡¬tStİLock
);

2155 
	`dvmLockTh»adLi¡
(
£lf
);

2160 
	`dvmDe¡royJNIEnv
(
£lf
->
jniEnv
);

2161 
£lf
->
jniEnv
 = 
NULL
;

2163 
£lf
->
¡©us
 = 
THREAD_ZOMBIE
;

2168 
	`uÆškTh»ad
(
£lf
);

2174 ià(!
	`dvmG‘F›ldBoŞ—n
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
)) {

2175 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

2177 ià(
gDvm
.
nÚD«mÚTh»adCouÁ
 == 0) {

2178 
cc
;

2180 
	`ALOGV
("th»adid=%d:†a¡‚Ú-d«mÚh»ad", 
£lf
->
th»adId
);

2183 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
vmEx™CÚd
);

2184 
	`as£¹
(
cc
 == 0);

2188 
	`ALOGV
("th»adid=%d: bye!", 
£lf
->
th»adId
);

2189 
	`»Ëa£Th»adId
(
£lf
);

2190 
	`dvmUÆockTh»adLi¡
();

2192 
	`£tTh»adS–f
(
NULL
);

2194 
	`ä“Th»ad
(
£lf
);

2195 
	}
}

2209 
	$dvmSu¥’dTh»ad
(
Th»ad
* 
th»ad
)

2211 
	`as£¹
(
th»ad
 !ğ
NULL
);

2212 
	`as£¹
(
th»ad
 !ğ
	`dvmTh»adS–f
());

2215 
	`lockTh»adSu¥’dCouÁ
();

2216 
	`dvmAddToSu¥’dCouÁs
(
th»ad
, 1, 1);

2218 
	`LOG_THREAD
("threadid=%d: suspend++,‚ow=%d",

2219 
th»ad
->
th»adId
,h»ad->
su¥’dCouÁ
);

2220 
	`uÆockTh»adSu¥’dCouÁ
();

2222 
	`wa™FÜTh»adSu¥’d
(
	`dvmTh»adS–f
(), 
th»ad
);

2223 
	}
}

2236 
	$dvmResumeTh»ad
(
Th»ad
* 
th»ad
)

2238 
	`as£¹
(
th»ad
 !ğ
NULL
);

2239 
	`as£¹
(
th»ad
 !ğ
	`dvmTh»adS–f
());

2242 
	`lockTh»adSu¥’dCouÁ
();

2243 ià(
th»ad
->
su¥’dCouÁ
 > 0) {

2244 
	`dvmAddToSu¥’dCouÁs
(
th»ad
, -1, -1);

2246 
	`LOG_THREAD
("threadid=%d: suspendCount‡lready zero",

2247 
th»ad
->
th»adId
);

2250 
	`LOG_THREAD
("threadid=%d: suspend--,‚ow=%d",

2251 
th»ad
->
th»adId
,h»ad->
su¥’dCouÁ
);

2253 ià(
th»ad
->
su¥’dCouÁ
 == 0) {

2254 
	`dvmBrßdÿ¡CÚd
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2257 
	`uÆockTh»adSu¥’dCouÁ
();

2258 
	}
}

2263 
	$dvmSu¥’dS–f
(
boŞ
 
jdwpAùiv™y
)

2265 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2268 
	`as£¹
(
gDvm
.
jdwpS‹
 !ğ
NULL
);

2269 ià(
£lf
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
)) {

2270 
	`as£¹
(
çl£
);

2279 
	`lockTh»adSu¥’dCouÁ
();

2280 
	`dvmAddToSu¥’dCouÁs
(
£lf
, 1, 1);

2285 
	`as£¹
(
£lf
->
su¥’dCouÁ
 > 0);

2286 
£lf
->
¡©us
 = 
THREAD_SUSPENDED
;

2287 
	`LOG_THREAD
("th»adid=%d: s–f-su¥’dšg (dbg)", 
£lf
->
th»adId
);

2296 ià(
jdwpAùiv™y
) {

2299 
	`dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
gDvm
.
jdwpS‹
);

2302 
£lf
->
su¥’dCouÁ
 != 0) {

2303 
	`dvmWa™CÚd
(&
gDvm
.
th»adSu¥’dCouÁCÚd
,

2304 &
gDvm
.
th»adSu¥’dCouÁLock
);

2305 ià(
£lf
->
su¥’dCouÁ
 != 0) {

2312 
	`ALOGD
("threadid=%d: still suspended‡fter undo (sc=%d dc=%d)",

2313 
£lf
->
th»adId
, s–f->
su¥’dCouÁ
, s–f->
dbgSu¥’dCouÁ
);

2316 
	`as£¹
(
£lf
->
su¥’dCouÁ
 =ğ0 && s–f->
dbgSu¥’dCouÁ
 == 0);

2317 
£lf
->
¡©us
 = 
THREAD_RUNNING
;

2318 
	`LOG_THREAD
("threadid=%d: self-reviving (dbg), status=%d",

2319 
£lf
->
th»adId
, s–f->
¡©us
);

2321 
	`uÆockTh»adSu¥’dCouÁ
();

2322 
	}
}

2328 
	$dumpWedgedTh»ad
(
Th»ad
* 
th»ad
)

2330 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

2331 
	`dvmPrštN©iveBackT¿û
();

2334 
	`dvmDumpTh»ad
(
th»ad
, 
Œue
);

2338 
	}
}

2348 
	$dvmRai£Th»adPriÜ™yIfN“ded
(
Th»ad
* 
th»ad
, * 
pSavedTh»adPrio
,

2349 
SchedPŞicy
* 
pSavedTh»adPŞicy
)

2351 
”ºo
 = 0;

2352 *
pSavedTh»adPrio
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
);

2353 ià(
”ºo
 != 0) {

2354 
	`ALOGW
("Unableo get…riority forhreadid=%d sysTid=%d",

2355 
th»ad
->
th»adId
,h»ad->
sy¡emTid
);

2358 ià(
	`g‘_sched_pŞicy
(
th»ad
->
sy¡emTid
, 
pSavedTh»adPŞicy
) != 0) {

2359 
	`ALOGW
("Unableo get…olicy forhreadid=%d sysTid=%d",

2360 
th»ad
->
th»adId
,h»ad->
sy¡emTid
);

2364 
chªgeFÏgs
 = 0;

2369 ià(*
pSavedTh»adPŞicy
 =ğ
SP_BACKGROUND
) {

2370 ià(
	`£t_sched_pŞicy
(
th»ad
->
sy¡emTid
, 
SP_FOREGROUND
) != 0) {

2371 
	`ALOGW
("Couldn'ˆ£ˆfg…Şicy oÀtid %d", 
th»ad
->
sy¡emTid
);

2373 
chªgeFÏgs
 |ğ
kChªgedPŞicy
;

2374 
	`ALOGD
("Temporarily movingid %do fg (was %d)",

2375 
th»ad
->
sy¡emTid
, *
pSavedTh»adPŞicy
);

2383 ià(*
pSavedTh»adPrio
 > 0) {

2384 cÚ¡ 
kHigh”
 = 0;

2385 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
, 
kHigh”
) != 0) {

2386 
	`ALOGW
("Couldn't„aise…riority onid %do %d",

2387 
th»ad
->
sy¡emTid
, 
kHigh”
);

2389 
chªgeFÏgs
 |ğ
kChªgedPriÜ™y
;

2390 
	`ALOGD
("Temporarily„aised…riority onid %d (%d -> %d)",

2391 
th»ad
->
sy¡emTid
, *
pSavedTh»adPrio
, 
kHigh”
);

2395  
chªgeFÏgs
;

2396 
	}
}

2401 
	$dvmRe£tTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
chªgeFÏgs
,

2402 
§vedTh»adPrio
, 
SchedPŞicy
 
§vedTh»adPŞicy
)

2404 ià((
chªgeFÏgs
 & 
kChªgedPŞicy
) != 0) {

2405 ià(
	`£t_sched_pŞicy
(
th»ad
->
sy¡emTid
, 
§vedTh»adPŞicy
) != 0) {

2406 
	`ALOGW
("NOTE: couldn't„esetid %do (%d)",

2407 
th»ad
->
sy¡emTid
, 
§vedTh»adPŞicy
);

2409 
	`ALOGD
("Restored…olicy of %do %d",

2410 
th»ad
->
sy¡emTid
, 
§vedTh»adPŞicy
);

2414 ià((
chªgeFÏgs
 & 
kChªgedPriÜ™y
) != 0) {

2415 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
) != 0)

2417 
	`ALOGW
("NOTE: couldn't„eset…riority onhread %do %d",

2418 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
);

2420 
	`ALOGD
("Restored…riority on %do %d",

2421 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
);

2424 
	}
}

2450 
	#FIRST_SLEEP
 (250*1000è

	)

2451 
	#MORE_SLEEP
 (750*1000è

	)

2452 
	$wa™FÜTh»adSu¥’d
(
Th»ad
* 
£lf
, Th»ad* 
th»ad
)

2454 cÚ¡ 
kMaxR‘r›s
 = 10;

2455 
¥šSË•Time
 = 
FIRST_SLEEP
;

2456 
boŞ
 
com¶ašed
 = 
çl£
;

2457 
´iChªgeFÏgs
 = 0;

2458 
§vedTh»adPrio
 = -500;

2459 
SchedPŞicy
 
§vedTh»adPŞicy
 = 
SP_FOREGROUND
;

2461 
¦“pI‹r
 = 0;

2462 
»ŒyCouÁ
 = 0;

2463 
u8
 
¡¬tWh’
 = 0;

2464 
u8
 
fœ¡S¹Wh’
 = 0;

2466 
th»ad
->
¡©us
 =ğ
THREAD_RUNNING
) {

2467 ià(
¦“pI‹r
 == 0) {

2468 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

2469 ià(
fœ¡S¹Wh’
 == 0)

2470 
fœ¡S¹Wh’
 = 
¡¬tWh’
;

2477 ià(
»ŒyCouÁ
 == 2) {

2478 
	`as£¹
(
th»ad
->
sy¡emTid
 != 0);

2479 
´iChªgeFÏgs
 = 
	`dvmRai£Th»adPriÜ™yIfN“ded
(
th»ad
,

2480 &
§vedTh»adPrio
, &
§vedTh»adPŞicy
);

2484 #ià
	`defšed
 (
WITH_JIT
)

2491 ià(
gDvmJ™
.
pJ™EÁryTabË
 && 
»ŒyCouÁ
 > 0 &&

2492 
gDvmJ™
.
hasNewChaš
 && 
th»ad
->
šJ™CodeCache
) {

2493 
	`ALOGD
("JIT unchaš‡Î fÜh»adid=%d", 
th»ad
->
th»adId
);

2494 
	`dvmJ™UnchašAÎ
();

2502 ià(!
	`dvmI‹¿tiveSË•
(
¦“pI‹r
++, 
¥šSË•Time
, 
¡¬tWh’
)) {

2503 ià(
¥šSË•Time
 !ğ
FIRST_SLEEP
) {

2504 
	`ALOGW
("threadid=%d: spin on suspend #%dhreadid=%d (pcf=%d)",

2505 
£lf
->
th»adId
, 
»ŒyCouÁ
,

2506 
th»ad
->
th»adId
, 
´iChªgeFÏgs
);

2507 ià(
»ŒyCouÁ
 > 1) {

2509 
	`dumpWedgedTh»ad
(
th»ad
);

2511 
com¶ašed
 = 
Œue
;

2515 
¦“pI‹r
 = 0;

2516 
¥šSË•Time
 = 
MORE_SLEEP
;

2518 ià(
»ŒyCouÁ
++ =ğ
kMaxR‘r›s
) {

2519 
	`ALOGE
("Fatal spin-on-suspend, dumpinghreads");

2520 
	`dvmDumpAÎTh»ads
(
çl£
);

2523 
	`ALOGE
("threadid=%d: stuck onhreadid=%d, giving up",

2524 
£lf
->
th»adId
, 
th»ad
->threadId);

2527 
	`dvmNukeTh»ad
(
th»ad
);

2529 
	`dvmAbÜt
();

2534 ià(
com¶ašed
) {

2535 
	`ALOGW
("threadid=%d: spin on suspend„esolved in %lld msec",

2536 
£lf
->
th»adId
,

2537 (
	`dvmG‘R–©iveTimeU£c
(è- 
fœ¡S¹Wh’
) / 1000);

2540 ià(
´iChªgeFÏgs
 != 0) {

2541 
	`dvmRe£tTh»adPriÜ™y
(
th»ad
, 
´iChªgeFÏgs
, 
§vedTh»adPrio
,

2542 
§vedTh»adPŞicy
);

2544 
	}
}

2568 
	$dvmSu¥’dAÎTh»ads
(
Su¥’dCau£
 
why
)

2570 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2571 
Th»ad
* 
th»ad
;

2573 
	`as£¹
(
why
 != 0);

2582 
	`lockTh»adSu¥’d
("su¥-®l", 
why
);

2584 
	`LOG_THREAD
("th»adid=%d: Su¥’dAÎ s¹šg", 
£lf
->
th»adId
);

2597 
	`dvmLockTh»adLi¡
(
£lf
);

2599 
	`lockTh»adSu¥’dCouÁ
();

2600 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2601 ià(
th»ad
 =ğ
£lf
)

2605 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2606 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2609 
	`dvmAddToSu¥’dCouÁs
(
th»ad
, 1,

2610 (
why
 =ğ
SUSPEND_FOR_DEBUG
 ||

2611 
why
 =ğ
SUSPEND_FOR_DEBUG_EVENT
)

2614 
	`uÆockTh»adSu¥’dCouÁ
();

2630 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2631 ià(
th»ad
 =ğ
£lf
)

2635 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2636 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2640 
	`wa™FÜTh»adSu¥’d
(
£lf
, 
th»ad
);

2642 
	`LOG_THREAD
("threadid=%d:hreadid=%d status=%d sc=%d dc=%d",

2643 
£lf
->
th»adId
, 
th»ad
->th»adId,h»ad->
¡©us
,

2644 
th»ad
->
su¥’dCouÁ
,h»ad->
dbgSu¥’dCouÁ
);

2647 
	`dvmUÆockTh»adLi¡
();

2648 
	`uÆockTh»adSu¥’d
();

2650 
	`LOG_THREAD
("th»adid=%d: Su¥’dAÎ com¶‘e", 
£lf
->
th»adId
);

2651 
	}
}

2658 
	$dvmResumeAÎTh»ads
(
Su¥’dCau£
 
why
)

2660 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2661 
Th»ad
* 
th»ad
;

2662 
cc
;

2664 
	`lockTh»adSu¥’d
("»s-®l", 
why
);

2665 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ s¹šg", 
£lf
->
th»adId
);

2672 
	`dvmLockTh»adLi¡
(
£lf
);

2673 
	`lockTh»adSu¥’dCouÁ
();

2674 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2675 ià(
th»ad
 =ğ
£lf
)

2679 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2680 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2685 ià(
th»ad
->
su¥’dCouÁ
 > 0) {

2686 
	`dvmAddToSu¥’dCouÁs
(
th»ad
, -1,

2687 (
why
 =ğ
SUSPEND_FOR_DEBUG
 ||

2688 
why
 =ğ
SUSPEND_FOR_DEBUG_EVENT
)

2691 
	`LOG_THREAD
("threadid=%d: suspendCount‡lready zero",

2692 
th»ad
->
th»adId
);

2695 
	`uÆockTh»adSu¥’dCouÁ
();

2696 
	`dvmUÆockTh»adLi¡
();

2732 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ wakšg oth”s", 
£lf
->
th»adId
);

2733 
	`uÆockTh»adSu¥’d
();

2739 
	`lockTh»adSu¥’dCouÁ
();

2740 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2741 
	`as£¹
(
cc
 == 0);

2742 
	`uÆockTh»adSu¥’dCouÁ
();

2744 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ com¶‘e", 
£lf
->
th»adId
);

2745 
	}
}

2751 
	$dvmUndoDebugg”Su¥’siÚs
()

2753 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2754 
Th»ad
* 
th»ad
;

2755 
cc
;

2757 
	`lockTh»adSu¥’d
("undo", 
SUSPEND_FOR_DEBUG
);

2758 
	`LOG_THREAD
("th»adid=%d: UndoDebugg”Su¥ s¹šg", 
£lf
->
th»adId
);

2765 
	`dvmLockTh»adLi¡
(
£lf
);

2766 
	`lockTh»adSu¥’dCouÁ
();

2767 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2768 ià(
th»ad
 =ğ
£lf
)

2772 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
)) {

2773 
	`as£¹
(
th»ad
->
dbgSu¥’dCouÁ
 == 0);

2777 
	`as£¹
(
th»ad
->
su¥’dCouÁ
 >ğth»ad->
dbgSu¥’dCouÁ
);

2778 
	`dvmAddToSu¥’dCouÁs
(
th»ad
, -th»ad->
dbgSu¥’dCouÁ
,

2779 -
th»ad
->
dbgSu¥’dCouÁ
);

2781 
	`uÆockTh»adSu¥’dCouÁ
();

2782 
	`dvmUÆockTh»adLi¡
();

2788 
	`lockTh»adSu¥’dCouÁ
();

2789 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2790 
	`as£¹
(
cc
 == 0);

2791 
	`uÆockTh»adSu¥’dCouÁ
();

2793 
	`uÆockTh»adSu¥’d
();

2795 
	`LOG_THREAD
("th»adid=%d: UndoDebugg”Su¥ com¶‘e", 
£lf
->
th»adId
);

2796 
	}
}

2809 
boŞ
 
	$dvmIsSu¥’ded
(cÚ¡ 
Th»ad
* 
th»ad
)

2824  (
th»ad
->
su¥’dCouÁ
 != 0 &&

2825 
th»ad
->
¡©us
 !ğ
THREAD_RUNNING
);

2826 
	}
}

2843 
	$dvmWa™FÜSu¥’d
(
Th»ad
* 
th»ad
)

2845 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2847 
	`LOG_THREAD
("threadid=%d: waiting forhreadid=%do sleep",

2848 
£lf
->
th»adId
, 
th»ad
->threadId);

2850 
	`as£¹
(
th»ad
->
hªdË
 !ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
));

2851 
	`as£¹
(
th»ad
 !ğ
£lf
);

2852 
	`as£¹
(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
);

2854 
	`wa™FÜTh»adSu¥’d
(
£lf
, 
th»ad
);

2856 
	`LOG_THREAD
("threadid=%d:hreadid=%d is‚ow‡sleep",

2857 
£lf
->
th»adId
, 
th»ad
->threadId);

2858 
	}
}

2866 
boŞ
 
	$fuÎSu¥’dCheck
(
Th»ad
* 
£lf
)

2868 
	`as£¹
(
£lf
 !ğ
NULL
);

2869 
	`as£¹
(
£lf
->
su¥’dCouÁ
 >= 0);

2875 
	`lockTh»adSu¥’dCouÁ
();

2877 
boŞ
 
ÃedSu¥’d
 = (
£lf
->
su¥’dCouÁ
 != 0);

2878 ià(
ÃedSu¥’d
) {

2879 
	`LOG_THREAD
("th»adid=%d: s–f-su¥’dšg", 
£lf
->
th»adId
);

2880 
Th»adStus
 
ŞdStus
 = 
£lf
->
¡©us
;

2881 
£lf
->
¡©us
 = 
THREAD_SUSPENDED
;

2883 
£lf
->
su¥’dCouÁ
 != 0) {

2889 
	`dvmWa™CÚd
(&
gDvm
.
th»adSu¥’dCouÁCÚd
,

2890 &
gDvm
.
th»adSu¥’dCouÁLock
);

2892 
	`as£¹
(
£lf
->
su¥’dCouÁ
 =ğ0 && s–f->
dbgSu¥’dCouÁ
 == 0);

2893 
£lf
->
¡©us
 = 
ŞdStus
;

2894 
	`LOG_THREAD
("threadid=%d: self-reviving, status=%d",

2895 
£lf
->
th»adId
, s–f->
¡©us
);

2898 
	`uÆockTh»adSu¥’dCouÁ
();

2900  
ÃedSu¥’d
;

2901 
	}
}

2907 
boŞ
 
	$dvmCheckSu¥’dP’dšg
(
Th»ad
* 
£lf
)

2909 
	`as£¹
(
£lf
 !ğ
NULL
);

2910 ià(
£lf
->
su¥’dCouÁ
 == 0) {

2911  
çl£
;

2913  
	`fuÎSu¥’dCheck
(
£lf
);

2915 
	}
}

2924 
Th»adStus
 
	$dvmChªgeStus
(
Th»ad
* 
£lf
, 
Th»adStus
 
ÃwStus
)

2926 
Th»adStus
 
ŞdStus
;

2928 ià(
£lf
 =ğ
NULL
)

2929 
£lf
 = 
	`dvmTh»adS–f
();

2931 
	`LOGVV
("threadid=%d: (status %d -> %d)",

2932 
£lf
->
th»adId
, s–f->
¡©us
, 
ÃwStus
);

2934 
ŞdStus
 = 
£lf
->
¡©us
;

2935 ià(
ŞdStus
 =ğ
ÃwStus
)

2936  
ŞdStus
;

2938 ià(
ÃwStus
 =ğ
THREAD_RUNNING
) {

2989 vŞ©* 
¿w
 = 
»š‹½»t_ÿ¡
<vŞ©*>(&
£lf
->
¡©us
);

2990 vŞ©
št32_t
* 
addr
 = 
»š‹½»t_ÿ¡
<vŞ©št32_t*>(
¿w
);

2991 
	`ªdroid_©omic_acquœe_¡Üe
(
ÃwStus
, 
addr
);

2992 ià(
£lf
->
su¥’dCouÁ
 != 0) {

2993 
	`fuÎSu¥’dCheck
(
£lf
);

3003 
	`as£¹
(
ÃwStus
 !ğ
THREAD_SUSPENDED
);

3004 vŞ©* 
¿w
 = 
»š‹½»t_ÿ¡
<vŞ©*>(&
£lf
->
¡©us
);

3005 vŞ©
št32_t
* 
addr
 = 
»š‹½»t_ÿ¡
<vŞ©št32_t*>(
¿w
);

3006 
	`ªdroid_©omic_»Ëa£_¡Üe
(
ÃwStus
, 
addr
);

3009  
ŞdStus
;

3010 
	}
}

3016 
Objeù
* 
	$g‘SticTh»adGroup
(cÚ¡ * 
f›ldName
)

3018 
SticF›ld
* 
groupF›ld
;

3019 
Objeù
* 
groupObj
;

3021 
groupF›ld
 = 
	`dvmFšdSticF›ld
(
gDvm
.
şassJavaLªgTh»adGroup
,

3022 
f›ldName
, "Ljava/lang/ThreadGroup;");

3023 ià(
groupF›ld
 =ğ
NULL
) {

3024 
	`ALOGE
("java.Ïng.Th»adGrou°dÛ nÙ havª '%s' f›ld", 
f›ldName
);

3025 
	`dvmThrowIÁ”ÇlE¼Ü
("bad definition for ThreadGroup");

3026  
NULL
;

3028 
groupObj
 = 
	`dvmG‘SticF›ldObjeù
(
groupF›ld
);

3029 ià(
groupObj
 =ğ
NULL
) {

3030 
	`ALOGE
("java.Ïng.Th»adGroup.% nÙ in™Ÿlized", 
f›ldName
);

3031 
	`dvmThrowIÁ”ÇlE¼Ü
(
NULL
);

3032  
NULL
;

3035  
groupObj
;

3036 
	}
}

3037 
Objeù
* 
	$dvmG‘Sy¡emTh»adGroup
()

3039  
	`g‘SticTh»adGroup
("mSystem");

3040 
	}
}

3041 
Objeù
* 
	$dvmG‘MašTh»adGroup
()

3043  
	`g‘SticTh»adGroup
("mMain");

3044 
	}
}

3053 
Th»ad
* 
	$dvmG‘Th»adFromTh»adObjeù
(
Objeù
* 
vmTh»adObj
)

3055 
vmD©a
;

3057 
vmD©a
 = 
	`dvmG‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
);

3059 ià(
çl£
) {

3060 
Th»ad
* 
th»ad
 = 
gDvm
.
th»adLi¡
;

3061 
th»ad
 !ğ
NULL
) {

3062 ià((
Th»ad
*)
vmD©a
 =ğ
th»ad
)

3065 
th»ad
 =h»ad->
Ãxt
;

3068 ià(
th»ad
 =ğ
NULL
) {

3069 
	`ALOGW
("WARNING: vmThreadObj=%p hashread=%p,‚ot inhread†ist",

3070 
vmTh»adObj
, (
Th»ad
*)
vmD©a
);

3071 
vmD©a
 = 0;

3075  (
Th»ad
*è
vmD©a
;

3076 
	}
}

3084 
Th»ad
* 
	$dvmG‘Th»adByHªdË
(
±h»ad_t
 
hªdË
)

3086 
Th»ad
* 
th»ad
;

3087 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

3088 ià(
th»ad
->
hªdË
 == handle)

3091  
th»ad
;

3092 
	}
}

3100 
Th»ad
* 
	$dvmG‘Th»adByTh»adId
(
u4
 
th»adId
)

3102 
Th»ad
* 
th»ad
;

3103 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

3104 ià(
th»ad
->
th»adId
 ==hreadId)

3107  
th»ad
;

3108 
	}
}

3110 
	$dvmChªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
)

3112 
	`os_chªgeTh»adPriÜ™y
(
th»ad
, 
ÃwPriÜ™y
);

3113 
	}
}

3119 
boŞ
 
	$dvmIsOnTh»adLi¡
(cÚ¡ 
Th»ad
* 
th»ad
)

3121 
boŞ
 
»t
 = 
çl£
;

3123 
	`dvmLockTh»adLi¡
(
NULL
);

3124 ià(
th»ad
 =ğ
gDvm
.
th»adLi¡
) {

3125 
»t
 = 
Œue
;

3127 
»t
 = 
th»ad
->
´ev
 !ğ
NULL
 ||h»ad->
Ãxt
 != NULL;

3129 
	`dvmUÆockTh»adLi¡
();

3131  
»t
;

3132 
	}
}

3138 
	$dvmDumpTh»ad
(
Th»ad
* 
th»ad
, 
boŞ
 
isRuÂšg
)

3140 
DebugOuutT¬g‘
 
rg‘
;

3142 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

3143 
	`dvmDumpTh»adEx
(&
rg‘
, 
th»ad
, 
isRuÂšg
);

3144 
	}
}

3160 
	$g‘ScheduËrGroup
(
tid
, * 
buf
, 
size_t
 
bufL’
)

3162 #ifdeà
HAVE_ANDROID_OS


3163 
·thBuf
[32];

3164 
lšeBuf
[256];

3165 
FILE
 *
å
;

3167 
	`¢´štf
(
·thBuf
, Õ©hBuf), "/´oc/%d/cgroup", 
tid
);

3168 ià((
å
 = 
	`fİ’
(
·thBuf
, "r")è=ğ
NULL
) {

3169 
	`¢´štf
(
buf
, 
bufL’
, "[fİ’-”rÜ:%d]", 
”ºo
);

3173 
	`fg‘s
(
lšeBuf
, ÖšeBufè-1, 
å
è!ğ
NULL
) {

3174 * 
subsys
;

3175 * 
g½
;

3176 
size_t
 
Ën
;

3179 
subsys
 = 
	`¡rchr
(
lšeBuf
, ':');

3180 ià(
subsys
 =ğ
NULL
) {

3181 
out_bad_d©a
;

3184 ià(
	`¡ºcmp
(
subsys
, ":cpu:", 5) != 0) {

3189 
g½
 = 
	`¡rchr
(
subsys
, '/');

3190 ià(
g½
 =ğ
NULL
) {

3191 
out_bad_d©a
;

3193 
g½
++;

3195 
Ën
 = 
	`¡¾’
(
g½
);

3196 
g½
[
Ën
-1] = '\0';

3198 ià(
bufL’
 <ğ
Ën
) {

3199 
Ën
 = 
bufL’
 - 1;

3201 
	`¡ºıy
(
buf
, 
g½
, 
Ën
);

3202 
buf
[
Ën
] = '\0';

3203 
	`fşo£
(
å
);

3207 
	`¢´štf
(
buf
, 
bufL’
, "[no-cpu-subsys]");

3208 
	`fşo£
(
å
);

3211 
out_bad_d©a
:

3212 
	`ALOGE
("Bad cgrou°d©¨{%s}", 
lšeBuf
);

3213 
	`¢´štf
(
buf
, 
bufL’
, "[data-parse-failed]");

3214 
	`fşo£
(
å
);

3218 
	`¢´štf
(
buf
, 
bufL’
, "[n/a]");

3221 
	}
}

3226 cÚ¡ * 
	$dvmG‘Th»adStusSŒ
(
Th»adStus
 
¡©us
)

3228 
¡©us
) {

3229 
THREAD_ZOMBIE
:  "ZOMBIE";

3230 
THREAD_RUNNING
:  "RUNNABLE";

3231 
THREAD_TIMED_WAIT
:  "TIMED_WAIT";

3232 
THREAD_MONITOR
:  "MONITOR";

3233 
THREAD_WAIT
:  "WAIT";

3234 
THREAD_INITIALIZING
:  "INITIALIZING";

3235 
THREAD_STARTING
:  "STARTING";

3236 
THREAD_NATIVE
:  "NATIVE";

3237 
THREAD_VMWAIT
:  "VMWAIT";

3238 
THREAD_SUSPENDED
:  "SUSPENDED";

3241 
	}
}

3243 
	$dumpSchedSt
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
pid_t
 
tid
) {

3244 #ifdeà
HAVE_ANDROID_OS


3246 
ProcStD©a
 
´ocStD©a
;

3247 ià(!
	`dvmG‘Th»adSts
(&
´ocStD©a
, 
tid
)) {

3249 
	`mem£t
(&
´ocStD©a
, 0, (procStatData));

3253 
sched¡©Buf
[64];

3254 
	`¢´štf
(
sched¡©Buf
, (sched¡©Buf), "/´oc/£lf/sk/%d/sched¡©", 
tid
);

3255 
sched¡©Fd
 = 
	`İ’
(
sched¡©Buf
, 
O_RDONLY
);

3256 
	`¡rıy
(
sched¡©Buf
, "0 0 0");

3257 ià(
sched¡©Fd
 >= 0) {

3258 
ssize_t
 
by‹s
;

3259 
by‹s
 = 
	`»ad
(
sched¡©Fd
, 
sched¡©Buf
, (schedstatBuf) - 1);

3260 
	`şo£
(
sched¡©Fd
);

3261 ià(
by‹s
 >= 1) {

3262 
sched¡©Buf
[
by‹s
 - 1] = '\0';

3267 
	`dvmPrštDebugMes§ge
(
rg‘
,

3269 
sched¡©Buf
, 
´ocStD©a
.
utime
,…rocStD©a.
¡ime
,

3270 
´ocStD©a
.
´oûssÜ
);

3272 
	}
}

3274 
	sScheduËrSts
 {

3275 
	mpŞicy
;

3276 
	m´iÜ™y
;

3277 
	mgroup
[32];

3283 
	$g‘ScheduËrSts
(
ScheduËrSts
* 
¡©s
, 
pid_t
 
tid
) {

3284 
sched_·¿m
 
¥
;

3285 ià(
	`±h»ad_g‘sched·¿m
(
	`±h»ad_£lf
(), &
¡©s
->
pŞicy
, &
¥
) != 0) {

3286 
	`ALOGW
("Warning:…thread_getschedparam failed");

3287 
¡©s
->
pŞicy
 = -1;

3288 
¡©s
->
´iÜ™y
 = -1;

3290 
¡©s
->
´iÜ™y
 = 
¥
.
sched_´iÜ™y
;

3292 ià(
	`g‘ScheduËrGroup
(
tid
, 
¡©s
->
group
, (stats->group)) == 0 &&

3293 
¡©s
->
group
[0] == '\0') {

3294 
	`¡rıy
(
¡©s
->
group
, "default");

3296 
	}
}

3305 
	$dvmDumpTh»adEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
,

3306 
boŞ
 
isRuÂšg
)

3308 
Objeù
* 
th»adObj
;

3309 
Objeù
* 
groupObj
;

3310 
SŒšgObjeù
* 
ÇmeSŒ
;

3311 * 
th»adName
 = 
NULL
;

3312 * 
groupName
 = 
NULL
;

3313 
boŞ
 
isD«mÚ
;

3314 
´iÜ™y
;

3315 
boŞ
 
by·ss
;

3327 
th»adObj
 = 
th»ad
->threadObj;

3328 ià(
th»adObj
 =ğ
NULL
) {

3329 
	`ALOGI
("Cª'ˆdum°th»ad %d:h»adObj‚Ù s‘", 
th»ad
->
th»adId
);

3332 
	`dvmAddT¿ckedAÎoc
(
th»adObj
, 
NULL
);

3334 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

3335 
gDvm
.
offJavaLªgTh»ad_Çme
);

3336 
th»adName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

3338 
´iÜ™y
 = 
	`dvmG‘F›ldIÁ
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
);

3339 
isD«mÚ
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
);

3340 
by·ss
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
);

3343 
groupObj
 = (
Objeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

3344 
gDvm
.
offJavaLªgTh»ad_group
);

3345 ià(
groupObj
 !ğ
NULL
) {

3346 
ÇmeSŒ
 = (
SŒšgObjeù
*)

3347 
	`dvmG‘F›ldObjeù
(
groupObj
, 
gDvm
.
offJavaLªgTh»adGroup_Çme
);

3348 
groupName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

3350 ià(
groupName
 =ğ
NULL
)

3351 
groupName
 = 
	`¡rdup
("(null; initializing?)");

3353 
ScheduËrSts
 
schedSts
;

3354 
	`g‘ScheduËrSts
(&
schedSts
, 
th»ad
->
sy¡emTid
);

3356 
	`dvmPrštDebugMes§ge
(
rg‘
,

3358 
th»adName
, 
isD«mÚ
 ? " daemon" : "",

3359 
by·ss
? "bypass-true":"bypass-false",

3360 
´iÜ™y
, 
th»ad
->
th»adId
, 
	`dvmG‘Th»adStusSŒ
Ñh»ad->
¡©us
),

3361 #ià
	`defšed
(
WITH_JIT
)

3362 
th»ad
->
šJ™CodeCache
 ? " JIT" : ""

3367 
	`dvmPrštDebugMes§ge
(
rg‘
,

3369 
groupName
, 
th»ad
->
su¥’dCouÁ
,h»ad->
dbgSu¥’dCouÁ
,

3370 
th»ad
->
th»adObj
,hread);

3371 
	`dvmPrštDebugMes§ge
(
rg‘
,

3373 
th»ad
->
sy¡emTid
, 
	`g‘´iÜ™y
(
PRIO_PROCESS
,hread->systemTid),

3374 
schedSts
.
pŞicy
, schedSts.
´iÜ™y
, schedSts.
group
, ()
th»ad
->
hªdË
);

3376 
	`dumpSchedSt
(
rg‘
, 
th»ad
->
sy¡emTid
);

3379 ià(
th»ad
->
¡©us
 =ğ
THREAD_NATIVE
 ||h»ad->¡©u =ğ
THREAD_VMWAIT
) {

3380 
	`dvmDumpN©iveSck
(
rg‘
, 
th»ad
->
sy¡emTid
);

3383 ià(
isRuÂšg
)

3384 
	`dvmDumpRuÂšgTh»adSck
(
rg‘
, 
th»ad
);

3386 
	`dvmDumpTh»adSck
(
rg‘
, 
th»ad
);

3388 
	`dvmPrštDebugMes§ge
(
rg‘
, "\n");

3390 
	`dvmR–—£T¿ckedAÎoc
(
th»adObj
, 
NULL
);

3391 
	`ä“
(
th»adName
);

3392 
	`ä“
(
groupName
);

3393 
	}
}

3394 * 
	$dvmG‘Th»adName_c¡r
(
Th»ad
* 
th»ad
){

3395 ià(
th»ad
->
th»adObj
 =ğ
NULL
) {

3396 
	`ALOGW
("threadObj is NULL,‚ame‚ot‡vailable");

3397  
NULL
;

3400 
SŒšgObjeù
* 
ÇmeObj
 = (StringObject*)

3401 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_Çme
);

3402 * 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

3403  
Çme
;

3404 
	}
}

3405 
	g¡d
::
¡ršg
 
	$dvmG‘Th»adName
(
Th»ad
* 
th»ad
) {

3406 ià(
th»ad
->
th»adObj
 =ğ
NULL
) {

3407 
	`ALOGW
("threadObj is NULL,‚ame‚ot‡vailable");

3411 
SŒšgObjeù
* 
ÇmeObj
 = (StringObject*)

3412 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_Çme
);

3413 * 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

3414 
¡d
::
¡ršg
 
	`»suÉ
(
Çme
);

3415 
	`ä“
(
Çme
);

3416  
»suÉ
;

3417 
	}
}

3419 #ifdeà
HAVE_ANDROID_OS


3423 
	$dumpN©iveTh»ad
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
pid_t
 
tid
) {

3424 
·th
[64];

3425 
	`¢´štf
(
·th
, Õ©h), "/´oc/%d/comm", 
tid
);

3427 
fd
 = 
	`İ’
(
·th
, 
O_RDONLY
);

3428 
Çme
[64];

3429 
ssize_t
 
n
 = 0;

3430 ià(
fd
 >= 0) {

3431 
n
 = 
	`»ad
(
fd
, 
Çme
, (name) - 1);

3432 
	`şo£
(
fd
);

3434 ià(
n
 > 0 && 
Çme
[n - 1] == '\n') {

3435 
n
 -= 1;

3437 ià(
n
 <= 0) {

3438 
	`¡rıy
(
Çme
, "<no‚ame>");

3440 
Çme
[
n
] = '\0';

3443 
ScheduËrSts
 
schedSts
;

3444 
	`g‘ScheduËrSts
(&
schedSts
, 
tid
);

3446 
	`dvmPrštDebugMes§ge
(
rg‘
,

3448 
Çme
, 
tid
, 
	`g‘´iÜ™y
(
PRIO_PROCESS
,id),

3449 
schedSts
.
pŞicy
, schedSts.
´iÜ™y
, schedSts.
group
);

3450 
	`dumpSchedSt
(
rg‘
, 
tid
);

3455 
	`dvmPrštDebugMes§ge
(
rg‘
, "\n");

3456 
	}
}

3462 
boŞ
 
	$isD®vikTh»ad
(
pid_t
 
tid
) {

3463 
Th»ad
* 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

3464 ià(
th»ad
->
sy¡emTid
 =ğ
tid
) {

3465  
Œue
;

3468  
çl£
;

3469 
	}
}

3476 
	$dvmDumpAÎTh»ads
(
boŞ
 
g¿bLock
)

3478 
DebugOuutT¬g‘
 
rg‘
;

3480 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

3481 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
g¿bLock
);

3482 
	}
}

3491 
	$dvmDumpAÎTh»adsEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
boŞ
 
g¿bLock
)

3493 
Th»ad
* 
th»ad
;

3495 
	`dvmPrštDebugMes§ge
(
rg‘
, "DALVIK THREADS:\n");

3497 #ifdeà
HAVE_ANDROID_OS


3498 
	`dvmPrštDebugMes§ge
(
rg‘
,

3500 
gDvm
.
th»adLi¡Lock
.
v®ue
,

3501 
gDvm
.
_th»adSu¥’dLock
.
v®ue
,

3502 
gDvm
.
th»adSu¥’dCouÁLock
.
v®ue
,

3503 
gDvm
.
gcH—pLock
.
v®ue
);

3506 ià(
g¿bLock
)

3507 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

3509 
th»ad
 = 
gDvm
.
th»adLi¡
;

3510 
th»ad
 !ğ
NULL
) {

3511 
	`dvmDumpTh»adEx
(
rg‘
, 
th»ad
, 
çl£
);

3514 
	`as£¹
(
th»ad
->
Ãxt
 =ğ
NULL
 ||h»ad->Ãxt->
´ev
 ==hread);

3516 
th»ad
 =h»ad->
Ãxt
;

3519 #ifdeà
HAVE_ANDROID_OS


3520 
·th
[64];

3521 
	`¢´štf
(
·th
, Õ©h), "/´oc/%d/sk", 
	`g‘pid
());

3523 
DIR
* 
d
 = 
	`İ’dœ
(
·th
);

3524 ià(
d
) {

3525 
dœ’t
 
de
;

3526 
dœ’t
* 
»suÉ
;

3527 
boŞ
 
fœ¡
 = 
Œue
;

3528 !
	`»addœ_r
(
d
, &
de
, &
»suÉ
) &&„esult) {

3529 * 
’d
;

3530 
pid_t
 
tid
 = 
	`¡¹Ş
(
de
.
d_Çme
, &
’d
, 10);

3531 ià(!*
’d
 && !
	`isD®vikTh»ad
(
tid
)) {

3532 ià(
fœ¡
) {

3533 
	`dvmPrštDebugMes§ge
(
rg‘
, "NATIVE THREADS:\n");

3534 
fœ¡
 = 
çl£
;

3536 
	`dumpN©iveTh»ad
(
rg‘
, 
tid
);

3539 
	`şo£dœ
(
d
);

3543 ià(
g¿bLock
)

3544 
	`dvmUÆockTh»adLi¡
();

3545 
	}
}

3561 
	$dvmNukeTh»ad
(
Th»ad
* 
th»ad
)

3563 
klResuÉ
;

3566 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

3584 
	`ALOGD
("threadid=%d: sendingwo SIGSTKFLTsohreadid=%d (tid=%d)o"

3586 
	`dvmTh»adS–f
()->
th»adId
, 
th»ad
->th»adId,h»ad->
sy¡emTid
);

3587 
klResuÉ
 = 
	`±h»ad_kl
(
th»ad
->
hªdË
, 
SIGSTKFLT
);

3588 ià(
klResuÉ
 != 0) {

3589 
	`ALOGD
("NOTE:…th»ad_kÈ#1 faed: %s", 
	`¡»¼Ü
(
klResuÉ
));

3591 
	`u¦“p
(2 * 1000 * 1000);

3592 
klResuÉ
 = 
	`±h»ad_kl
(
th»ad
->
hªdË
, 
SIGSTKFLT
);

3593 ià(
klResuÉ
 != 0) {

3594 
	`ALOGD
("NOTE:…th»ad_kÈ#2 faed: %s", 
	`¡»¼Ü
(
klResuÉ
));

3596 
	`ALOGD
("Sent,…ausingo†et debuggerd„un");

3597 
	`u¦“p
(8 * 1000 * 1000);

3600 
	`sigÇl
(
SIGSEGV
, 
SIG_IGN
);

3601 
	`ALOGD
("Continuing");

3602 
	}
}

	@vm/Thread.h

20 #iâdeà
DALVIK_THREAD_H_


21 
	#DALVIK_THREAD_H_


	)

23 
	~"jni.h
"

24 
	~"š‹½/IÁ”pS‹.h
"

26 
	~<”ºo.h
>

27 
	~<cuts/sched_pŞicy.h
>

29 #ià
defšed
(
CHECK_MUTEX
è&& !defšed(
__USE_UNIX98
)

31 
±h»ad_mu‹x©Œ_£‰y³
(
±h»ad_mu‹x©Œ_t
 *
©Œ
, 
ty³
);

32 ’um { 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
 };

42 
	eTh»adStus
 {

43 
	mTHREAD_UNDEFINED
 = -1,

46 
	mTHREAD_ZOMBIE
 = 0,

47 
	mTHREAD_RUNNING
 = 1,

48 
	mTHREAD_TIMED_WAIT
 = 2,

49 
	mTHREAD_MONITOR
 = 3,

50 
	mTHREAD_WAIT
 = 4,

52 
	mTHREAD_INITIALIZING
 = 5,

53 
	mTHREAD_STARTING
 = 6,

54 
	mTHREAD_NATIVE
 = 7,

55 
	mTHREAD_VMWAIT
 = 8,

56 
	mTHREAD_SUSPENDED
 = 9,

61 
	mTHREAD_MIN_PRIORITY
 = 1,

62 
	mTHREAD_NORM_PRIORITY
 = 5,

63 
	mTHREAD_MAX_PRIORITY
 = 10,

68 
boŞ
 
dvmTh»adS¹up
();

69 
dvmTh»adShutdown
();

70 
dvmSÏyD«mÚs
();

73 
	#kJniLoÿlRefMš
 64

	)

74 
	#kJniLoÿlRefMax
 512

	)

75 
	#kIÁ”ÇlRefDeçuÉ
 32

	)

76 
	#kIÁ”ÇlRefMax
 4096

	)

78 
	#kMšSckSize
 (512 + 
STACK_OVERFLOW_RESERVE
)

	)

79 
	#kDeçuÉSckSize
 (16*1024è

	)

80 
	#kMaxSckSize
 (256*1024 + 
STACK_OVERFLOW_RESERVE
)

	)

86 
	uIÁ”pB»ak
 {

87 vŞ©
št64_t
 
	m®l
;

89 
ušt16_t
 
	msubMode
;

90 
ušt8_t
 
	mb»akFÏgs
;

91 
št8_t
 
	munu£d
;

92 #iâdeà
DVM_NO_ASM_INTERP


93 * 
	mcurHªdËrTabË
;

95 * 
	munu£d
;

97 } 
	mùl
;

105 
	sTh»ad
 {

111 
IÁ”pSaveS‹
 
	mš‹½Save
;

114 
u4
 
	mth»adId
;

127 
IÁ”pB»ak
 
	mš‹½B»ak
;

143 
	msu¥’dCouÁ
;

144 
	mdbgSu¥’dCouÁ
;

146 
u1
* 
	mÿrdTabË
;

149 cÚ¡ 
u1
* 
	mš‹½SckEnd
;

152 * 
	mXcurF¿me
;

154 
Objeù
* 
	mexû±iÚ
;

156 
boŞ
 
	mdebugIsM‘hodEÁry
;

158 
	mš‹½SckSize
;

159 
boŞ
 
	m¡ackOv”æowed
;

162 
±h»ad_t
 
	mhªdË
;

165 #iâdeà
DVM_NO_ASM_INTERP


166 * 
	mmašHªdËrTabË
;

167 * 
	m®tHªdËrTabË
;

169 * 
	munu£d0
;

170 * 
	munu£d1
;

182 
	msšgËS‹pCouÁ
;

184 #ifdeà
WITH_JIT


185 
J™ToIÁ”pEÁr›s
 
	mj™ToIÁ”pEÁr›s
;

192 * 
	mšJ™CodeCache
;

193 * 
	mpJ™ProfTabË
;

194 
	mj™Th»shŞd
;

195 cÚ¡ * 
	mj™ResumeNPC
;

196 cÚ¡ 
u4
* 
	mj™ResumeNSP
;

197 cÚ¡ 
u2
* 
	mj™ResumeDPC
;

198 
J™S‹
 
	mj™S‹
;

199 
	micRechašCouÁ
;

200 cÚ¡ * 
	mpProfeCouÁdown
;

201 cÚ¡ 
CÏssObjeù
* 
	mÿÎs™eCÏss
;

202 cÚ¡ 
M‘hod
* 
	mm‘hodToC®l
;

206 
IndœeùRefTabË
 
	mjniLoÿlRefTabË
;

208 #ià
defšed
(
WITH_JIT
)

209 #ià
defšed
(
WITH_SELF_VERIFICATION
)

211 
ShadowS·û
* 
	mshadowS·û
;

213 
	mcu¼T¿ûRun
;

214 
	mtÙ®T¿ûL’
;

215 cÚ¡ 
u2
* 
	mcu¼T¿ûH—d
;

216 cÚ¡ 
u2
* 
	mcu¼RunH—d
;

217 
	mcu¼RunL’
;

218 cÚ¡ 
u2
* 
	mÏ¡PC
;

219 cÚ¡ 
M‘hod
* 
	mŒaûM‘hod
;

220 
šŒ_t
 
	mth»shF‹r
[
JIT_TRACE_THRESH_FILTER_SIZE
];

221 
J™T¿ûRun
 
	mŒaû
[
MAX_JIT_RUN_LEN
];

228 vŞ©
Th»adStus
 
	m¡©us
;

231 
pid_t
 
	msy¡emTid
;

234 
u1
* 
	mš‹½SckS¹
;

237 
Objeù
* 
	mth»adObj
;

240 
JNIEnv
* 
	mjniEnv
;

243 
Reã»nûTabË
 
	mš‹º®LoÿlRefTabË
;

247 
Reã»nûTabË
 
	mjniMÚ™ÜRefTabË
;

250 
Objeù
* 
	mşassLßd”Ov”ride
;

253 
±h»ad_mu‹x_t
 
	mwa™Mu‹x
;

258 
MÚ™Ü
* 
	mwa™MÚ™Ü
;

262 
boŞ
 
	mš‹¼u±ed
;

265 
Th»ad
* 
	mwa™Next
;

268 
±h»ad_cÚd_t
 
	mwa™CÚd
;

274 
boŞ
 
	mthrowšgOOME
;

277 
Th»ad
* 
	m´ev
;

278 
Th»ad
* 
	mÃxt
;

281 
	mth»adEx™CheckCouÁ
;

284 
DebugInvokeReq
 
	mšvokeReq
;

287 
boŞ
 
	mıuClockBa£S‘
;

288 
u8
 
	mıuClockBa£
;

291 
AÎocProfS‹
 
	m®locProf
;

293 #ifdeà
WITH_JNI_STACK_CHECK


294 
u4
 
	m¡ackCrc
;

297 #ià
WITH_EXTRA_GC_CHECKS
 > 1

299 cÚ¡ 
u2
* 
	mcu¼’tPc2
;

303 
±h»ad_mu‹x_t
 
	mÿÎbackMu‹x
;

304 
SaãPoštC®lback
 
	mÿÎback
;

305 * 
	mÿÎbackArg
;

309 * (*
	tIÁ”ÇlTh»adS¹
)(* 
	t¬g
);

312 
	sIÁ”ÇlS¹Args
 {

314 
IÁ”ÇlTh»adS¹
 
	mfunc
;

315 * 
	mfuncArg
;

316 * 
	mÇme
;

317 
Objeù
* 
	mgroup
;

318 
boŞ
 
	misD«mÚ
;

320 vŞ©
Th»ad
** 
	mpTh»ad
;

321 vŞ©* 
	mpC»©eStus
;

325 
boŞ
 
dvmP»pMašFÜJni
(
JNIEnv
* 
pEnv
);

326 
boŞ
 
dvmP»pMašTh»ad
();

329 
pid_t
 
dvmG‘SysTh»adId
();

336 
Th»ad
* 
dvmTh»adS–f
();

339 
dvmLockTh»adLi¡
(
Th»ad
* 
£lf
);

341 
boŞ
 
dvmTryLockTh»adLi¡
();

343 
dvmUÆockTh»adLi¡
();

348 
	eSu¥’dCau£
 {

349 
	mSUSPEND_NOT
 = 0,

350 
	mSUSPEND_FOR_GC
,

351 
	mSUSPEND_FOR_DEBUG
,

352 
	mSUSPEND_FOR_DEBUG_EVENT
,

353 
	mSUSPEND_FOR_STACK_DUMP
,

354 
	mSUSPEND_FOR_DEX_OPT
,

355 
	mSUSPEND_FOR_VERIFY
,

356 
	mSUSPEND_FOR_HPROF
,

357 #ià
defšed
(
WITH_JIT
)

358 
	mSUSPEND_FOR_TBL_RESIZE
,

359 
	mSUSPEND_FOR_IC_PATCH
,

360 
	mSUSPEND_FOR_CC_RESET
,

361 
	mSUSPEND_FOR_REFRESH
,

364 
dvmSu¥’dTh»ad
(
Th»ad
* 
th»ad
);

365 
dvmSu¥’dS–f
(
boŞ
 
jdwpAùiv™y
);

366 
dvmResumeTh»ad
(
Th»ad
* 
th»ad
);

367 
dvmSu¥’dAÎTh»ads
(
Su¥’dCau£
 
why
);

368 
dvmResumeAÎTh»ads
(
Su¥’dCau£
 
why
);

369 
dvmUndoDebugg”Su¥’siÚs
();

374 
boŞ
 
dvmIsSu¥’ded
(cÚ¡ 
Th»ad
* 
th»ad
);

379 
dvmWa™FÜSu¥’d
(
Th»ad
* 
th»ad
);

385 "C" 
boŞ
 
dvmCheckSu¥’dP’dšg
(
Th»ad
* 
£lf
);

391 
INLINE
 
boŞ
 
	$dvmCheckSu¥’dQuick
(
Th»ad
* 
£lf
) {

392  (
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeSu¥’dP’dšg
);

393 
	}
}

407 
Th»adStus
 
dvmChªgeStus
(
Th»ad
* 
£lf
, Th»adStu 
ÃwStus
);

412 
INLINE
 
	$dvmIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

414 #ifdeà
CHECK_MUTEX


415 
±h»ad_mu‹x©Œ_t
 
©Œ
;

416 
cc
;

418 
	`±h»ad_mu‹x©Œ_š™
(&
©Œ
);

419 
cc
 = 
	`±h»ad_mu‹x©Œ_£‰y³
(&
©Œ
, 
PTHREAD_MUTEX_ERRORCHECK_NP
);

420 
	`as£¹
(
cc
 == 0);

421 
	`±h»ad_mu‹x_š™
(
pMu‹x
, &
©Œ
);

422 
	`±h»ad_mu‹x©Œ_de¡roy
(&
©Œ
);

424 
	`±h»ad_mu‹x_š™
(
pMu‹x
, 
NULL
);

426 
	}
}

431 
INLINE
 
	$dvmLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

433 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_mu‹x_lock
(
pMu‹x
);

434 
	`as£¹
(
cc
 == 0);

435 
	}
}

440 
INLINE
 
	$dvmTryLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

442 
cc
 = 
	`±h»ad_mu‹x_Œylock
(
pMu‹x
);

443 
	`as£¹
(
cc
 =ğ0 || cø=ğ
EBUSY
);

444  
cc
;

445 
	}
}

450 
INLINE
 
	$dvmUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

452 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_mu‹x_uÆock
(
pMu‹x
);

453 
	`as£¹
(
cc
 == 0);

454 
	}
}

459 
INLINE
 
	$dvmDe¡royMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

461 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_mu‹x_de¡roy
(
pMu‹x
);

462 
	`as£¹
(
cc
 == 0);

463 
	}
}

465 
INLINE
 
	$dvmBrßdÿ¡CÚd
(
±h»ad_cÚd_t
* 
pCÚd
)

467 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_brßdÿ¡
(
pCÚd
);

468 
	`as£¹
(
cc
 == 0);

469 
	}
}

471 
INLINE
 
	$dvmSigÇlCÚd
(
±h»ad_cÚd_t
* 
pCÚd
)

473 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_sigÇl
(
pCÚd
);

474 
	`as£¹
(
cc
 == 0);

475 
	}
}

477 
INLINE
 
	$dvmWa™CÚd
(
±h»ad_cÚd_t
* 
pCÚd
, 
±h»ad_mu‹x_t
* 
pMu‹x
)

479 
cc
 
	`__©Œibu‹__
 ((
__unu£d__
)èğ
	`±h»ad_cÚd_wa™
(
pCÚd
, 
pMu‹x
);

480 
	`as£¹
(
cc
 == 0);

481 
	}
}

486 
boŞ
 
dvmC»©eIÁ”pTh»ad
(
Objeù
* 
th»adObj
, 
»qSckSize
);

492 
boŞ
 
dvmC»©eIÁ”ÇlTh»ad
(
±h»ad_t
* 
pHªdË
, cÚ¡ * 
Çme
,

493 
IÁ”ÇlTh»adS¹
 
func
, * 
funcArg
);

498 
boŞ
 
dvmA‰achCu¼’tTh»ad
(cÚ¡ 
JavaVMA‰achArgs
* 
pArgs
, boŞ 
isD«mÚ
);

499 
dvmD‘achCu¼’tTh»ad
();

504 
Objeù
* 
dvmG‘MašTh»adGroup
();

505 
Objeù
* 
dvmG‘Sy¡emTh»adGroup
();

510 
Th»ad
* 
dvmG‘Th»adFromTh»adObjeù
(
Objeù
* 
vmTh»adObj
);

518 
Th»ad
* 
dvmG‘Th»adByHªdË
(
±h»ad_t
 
hªdË
);

526 
Th»ad
* 
dvmG‘Th»adByTh»adId
(
u4
 
th»adId
);

532 
dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
);

540 
	g¡d
::
¡ršg
 
dvmG‘Th»adName
(
Th»ad
* 
th»ad
);

542 * 
dvmG‘Th»adName_c¡r
(
Th»ad
* 
th»ad
);

547 cÚ¡ * 
dvmG‘Th»adStusSŒ
(
Th»adStus
 
¡©us
);

553 
boŞ
 
dvmIsOnTh»adLi¡
(cÚ¡ 
Th»ad
* 
th»ad
);

558 
INLINE
 
JNIEnv
* 
	$dvmG‘Th»adJNIEnv
(
Th»ad
* 
£lf
è{  s–f->
jniEnv
; 
	}
}

559 
INLINE
 
	$dvmS‘Th»adJNIEnv
(
Th»ad
* 
£lf
, 
JNIEnv
* 
’v
è{ s–f->
jniEnv
 =ƒnv;
	}
}

564 
dvmChªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
);

567 
	#kChªgedPriÜ™y
 0x01

	)

568 
	#kChªgedPŞicy
 0x02

	)

575 
dvmRai£Th»adPriÜ™yIfN“ded
(
Th»ad
* 
th»ad
, * 
pSavedTh»adPrio
,

576 
SchedPŞicy
* 
pSavedTh»adPŞicy
);

582 
dvmRe£tTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
chªgeFÏgs
,

583 
§vedTh»adPrio
, 
SchedPŞicy
 
§vedTh»adPŞicy
);

588 
dvmDumpTh»ad
(
Th»ad
* 
th»ad
, 
boŞ
 
isRuÂšg
);

589 
dvmDumpTh»adEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
,

590 
boŞ
 
isRuÂšg
);

595 
dvmDumpAÎTh»ads
(
boŞ
 
g¿bLock
);

596 
dvmDumpAÎTh»adsEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
boŞ
 
g¿bLock
);

602 
dvmNukeTh»ad
(
Th»ad
* 
th»ad
);

	@vm/UtfString.cpp

24 
	~"D®vik.h
"

25 
	~<¡dlib.h
>

37 
SŒšgObjeù
* 
	$makeSŒšgObjeù
(
u4
 
ch¬sL’gth
, 
A¼ayObjeù
** 
pCh¬s
)

46 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

48 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgSŒšg
)) {

50 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgSŒšg
)) {

51 
	`ALOGE
("FATAL: Could‚ot initialize class String");

52 
	`dvmAbÜt
();

56 
Objeù
* 
»suÉ
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgSŒšg
, 
ALLOC_DEFAULT
);

57 ià(
»suÉ
 =ğ
NULL
) {

58  
NULL
;

61 
A¼ayObjeù
* 
ch¬s
 = 
	`dvmAÎocPrim™iveA¼ay
('C', 
ch¬sL’gth
, 
ALLOC_DEFAULT
);

62 ià(
ch¬s
 =ğ
NULL
) {

63 
	`dvmR–—£T¿ckedAÎoc
(
»suÉ
, 
NULL
);

64  
NULL
;

67 
	`dvmS‘F›ldIÁ
(
»suÉ
, 
STRING_FIELDOFF_COUNT
, 
ch¬sL’gth
);

68 
	`dvmS‘F›ldObjeù
(
»suÉ
, 
STRING_FIELDOFF_VALUE
, (
Objeù
*è
ch¬s
);

69 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ch¬s
, 
NULL
);

72 *
pCh¬s
 = 
ch¬s
;

73  (
SŒšgObjeù
*è
»suÉ
;

74 
	}
}

88 
u4
 
	$dvmCompu‹Utf8Hash
(cÚ¡ * 
utf8SŒ
)

90 
u4
 
hash
 = 1;

92 *
utf8SŒ
 != '\0')

93 
hash
 = hash * 31 + *
utf8SŒ
++;

95  
hash
;

96 
	}
}

107 
size_t
 
	$dvmUtf8L’
(cÚ¡ * 
utf8SŒ
)

109 
size_t
 
Ën
 = 0;

110 
ic
;

112 (
ic
 = *
utf8SŒ
++) != '\0') {

113 
Ën
++;

114 ià((
ic
 & 0x80) != 0) {

116 
utf8SŒ
++;

117 ià((
ic
 & 0x20) != 0) {

119 
utf8SŒ
++;

124  
Ën
;

125 
	}
}

130 
	$dvmCÚv”tUtf8ToUtf16
(
u2
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
)

132 *
utf8SŒ
 != '\0')

133 *
utf16SŒ
++ = 
	`dexG‘Utf16FromUtf8
(&
utf8SŒ
);

134 
	}
}

140 
	$utf16_utf8By‹L’
(cÚ¡ 
u2
* 
utf16SŒ
, 
Ën
)

142 
utf8L’
 = 0;

144 
Ën
--) {

145 
uic
 = *
utf16SŒ
++;

150 ià(
uic
 == 0 || uic > 0x7f) {

151 ià(
uic
 > 0x07ff)

152 
utf8L’
 += 3;

154 
utf8L’
 += 2;

156 
utf8L’
++;

158  
utf8L’
;

159 
	}
}

167 
	$cÚv”tUtf16ToUtf8
(* 
utf8SŒ
, cÚ¡ 
u2
* 
utf16SŒ
, 
Ën
)

169 
	`as£¹
(
Ën
 >= 0);

171 
Ën
--) {

172 
uic
 = *
utf16SŒ
++;

177 ià(
uic
 == 0 || uic > 0x7f) {

178 ià(
uic
 > 0x07ff) {

179 *
utf8SŒ
++ = (
uic
 >> 12) | 0xe0;

180 *
utf8SŒ
++ = ((
uic
 >> 6) & 0x3f) | 0x80;

181 *
utf8SŒ
++ = (
uic
 & 0x3f) | 0x80;

183 *
utf8SŒ
++ = (
uic
 >> 6) | 0xc0;

184 *
utf8SŒ
++ = (
uic
 & 0x3f) | 0x80;

187 *
utf8SŒ
++ = 
uic
;

191 *
utf8SŒ
 = '\0';

192 
	}
}

197 
šlše
 
u4
 
	$compu‹Utf16Hash
(cÚ¡ 
u2
* 
utf16SŒ
, 
size_t
 
Ën
)

199 
u4
 
hash
 = 0;

201 
Ën
--)

202 
hash
 = hash * 31 + *
utf16SŒ
++;

204  
hash
;

205 
	}
}

207 
u4
 
	$dvmCompu‹SŒšgHash
(
SŒšgObjeù
* 
¡rObj
) {

208 
hashCode
 = 
	`dvmG‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_HASHCODE
);

209 ià(
hashCode
 != 0) {

210  
hashCode
;

212 
Ën
 = 
	`dvmG‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_COUNT
);

213 
off£t
 = 
	`dvmG‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_OFFSET
);

214 
A¼ayObjeù
* 
ch¬s
 =

215 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
¡rObj
, 
STRING_FIELDOFF_VALUE
);

216 
hashCode
 = 
	`compu‹Utf16Hash
((
u2
*)(*)
ch¬s
->
cÚ‹Ás
 + 
off£t
, 
Ën
);

217 
	`dvmS‘F›ldIÁ
(
¡rObj
, 
STRING_FIELDOFF_HASHCODE
, 
hashCode
);

218  
hashCode
;

219 
	}
}

221 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromC¡r
(cÚ¡ * 
utf8SŒ
) {

222 
	`as£¹
(
utf8SŒ
 !ğ
NULL
);

223  
	`dvmC»©eSŒšgFromC¡rAndL’gth
(
utf8SŒ
, 
	`dvmUtf8L’
(utf8Str));

224 
	}
}

226 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡r
(cÚ¡ 
¡d
::
¡ršg
& 
utf8SŒ
) {

227  
dvmC»©eSŒšgFromC¡r
(
utf8SŒ
.
c_¡r
());

238 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromC¡rAndL’gth
(cÚ¡ * 
utf8SŒ
,

239 
size_t
 
utf16L’gth
)

241 
	`as£¹
(
utf8SŒ
 !ğ
NULL
);

243 
A¼ayObjeù
* 
ch¬s
;

244 
SŒšgObjeù
* 
ÃwObj
 = 
	`makeSŒšgObjeù
(
utf16L’gth
, &
ch¬s
);

245 ià(
ÃwObj
 =ğ
NULL
) {

246  
NULL
;

249 
	`dvmCÚv”tUtf8ToUtf16
((
u2
*)(*)
ch¬s
->
cÚ‹Ás
, 
utf8SŒ
);

251 
u4
 
hashCode
 = 
	`compu‹Utf16Hash
((
u2
*)(*)
ch¬s
->
cÚ‹Ás
, 
utf16L’gth
);

252 
	`dvmS‘F›ldIÁ
((
Objeù
*è
ÃwObj
, 
STRING_FIELDOFF_HASHCODE
, 
hashCode
);

254  
ÃwObj
;

255 
	}
}

260 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromUnicode
(cÚ¡ 
u2
* 
unich¬s
, 
Ën
)

263 
	`as£¹
(
Ën
 =ğ0 || 
unich¬s
 !ğ
NULL
);

265 
A¼ayObjeù
* 
ch¬s
;

266 
SŒšgObjeù
* 
ÃwObj
 = 
	`makeSŒšgObjeù
(
Ën
, &
ch¬s
);

267 ià(
ÃwObj
 =ğ
NULL
) {

268  
NULL
;

271 ià(
Ën
 > 0è
	`memıy
(
ch¬s
->
cÚ‹Ás
, 
unich¬s
,†’ * (
u2
));

273 
u4
 
hashCode
 = 
	`compu‹Utf16Hash
((
u2
*)(*)
ch¬s
->
cÚ‹Ás
, 
Ën
);

274 
	`dvmS‘F›ldIÁ
((
Objeù
*)
ÃwObj
, 
STRING_FIELDOFF_HASHCODE
, 
hashCode
);

276  
ÃwObj
;

277 
	}
}

284 * 
	$dvmC»©eC¡rFromSŒšg
(cÚ¡ 
SŒšgObjeù
* 
j¡r
)

286 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

287 ià(
j¡r
 =ğ
NULL
) {

288  
NULL
;

291 
Ën
 = 
	`dvmG‘F›ldIÁ
(
j¡r
, 
STRING_FIELDOFF_COUNT
);

292 
off£t
 = 
	`dvmG‘F›ldIÁ
(
j¡r
, 
STRING_FIELDOFF_OFFSET
);

293 
A¼ayObjeù
* 
ch¬s
 =

294 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
j¡r
, 
STRING_FIELDOFF_VALUE
);

295 cÚ¡ 
u2
* 
d©a
 = (cÚ¡ u2*)(*)
ch¬s
->
cÚ‹Ás
 + 
off£t
;

296 
	`as£¹
(
off£t
 + 
Ën
 <ğ(è
ch¬s
->
Ëngth
);

298 
by‹L’
 = 
	`utf16_utf8By‹L’
(
d©a
, 
Ën
);

299 * 
ÃwSŒ
 = (*è
	`m®loc
(
by‹L’
+1);

300 ià(
ÃwSŒ
 =ğ
NULL
) {

301  
NULL
;

303 
	`cÚv”tUtf16ToUtf8
(
ÃwSŒ
, 
d©a
, 
Ën
);

305  
ÃwSŒ
;

306 
	}
}

308 
	$dvmG‘SŒšgUtfRegiÚ
(cÚ¡ 
SŒšgObjeù
* 
j¡r
,

309 
¡¬t
, 
Ën
, * 
buf
)

311 cÚ¡ 
u2
* 
d©a
 = 
j¡r
->
	`ch¬s
(è+ 
¡¬t
;

312 
	`cÚv”tUtf16ToUtf8
(
buf
, 
d©a
, 
Ën
);

313 
	}
}

315 
	gSŒšgObjeù
::
	$utfL’gth
() const

317 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

319 
Ën
 = 
	`dvmG‘F›ldIÁ
(
this
, 
STRING_FIELDOFF_COUNT
);

320 
off£t
 = 
	`dvmG‘F›ldIÁ
(
this
, 
STRING_FIELDOFF_OFFSET
);

321 
A¼ayObjeù
* 
ch¬s
 =

322 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
this
, 
STRING_FIELDOFF_VALUE
);

323 cÚ¡ 
u2
* 
d©a
 = (cÚ¡ u2*)(*)
ch¬s
->
cÚ‹Ás
 + 
off£t
;

324 
	`as£¹
(
off£t
 + 
Ën
 <ğ(è
ch¬s
->
Ëngth
);

326  
	`utf16_utf8By‹L’
(
d©a
, 
Ën
);

327 
	}
}

329 
	gSŒšgObjeù
::
	$Ëngth
() const

331  
	`dvmG‘F›ldIÁ
(
this
, 
STRING_FIELDOFF_COUNT
);

332 
	}
}

334 
A¼ayObjeù
* 
	gSŒšgObjeù
::
	$¬¿y
() const

336  (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
this
, 
STRING_FIELDOFF_VALUE
);

337 
	}
}

339 cÚ¡ 
u2
* 
	gSŒšgObjeù
::
	$ch¬s
() const

341 
off£t
 = 
	`dvmG‘F›ldIÁ
(
this
, 
STRING_FIELDOFF_OFFSET
);

342 
A¼ayObjeù
* 
ch¬s
 =

343 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
this
, 
STRING_FIELDOFF_VALUE
);

344  (cÚ¡ 
u2
*)(*)
ch¬s
->
cÚ‹Ás
 + 
off£t
;

345 
	}
}

355 
	$dvmHashcmpSŒšgs
(cÚ¡ * 
v¡rObj1
, cÚ¡ * 
v¡rObj2
)

357 cÚ¡ 
SŒšgObjeù
* 
¡rObj1
 = (cÚ¡ SŒšgObjeù*è
v¡rObj1
;

358 cÚ¡ 
SŒšgObjeù
* 
¡rObj2
 = (cÚ¡ SŒšgObjeù*è
v¡rObj2
;

360 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

363 
Ën1
 = 
	`dvmG‘F›ldIÁ
(
¡rObj1
, 
STRING_FIELDOFF_COUNT
);

364 
off£t1
 = 
	`dvmG‘F›ldIÁ
(
¡rObj1
, 
STRING_FIELDOFF_OFFSET
);

365 
Ën2
 = 
	`dvmG‘F›ldIÁ
(
¡rObj2
, 
STRING_FIELDOFF_COUNT
);

366 
off£t2
 = 
	`dvmG‘F›ldIÁ
(
¡rObj2
, 
STRING_FIELDOFF_OFFSET
);

367 ià(
Ën1
 !ğ
Ën2
) {

368  
Ën1
 - 
Ën2
;

371 
A¼ayObjeù
* 
ch¬s1
 =

372 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
¡rObj1
, 
STRING_FIELDOFF_VALUE
);

373 
A¼ayObjeù
* 
ch¬s2
 =

374 (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
¡rObj2
, 
STRING_FIELDOFF_VALUE
);

377 
	`as£¹
(
off£t1
 + 
Ën1
 <ğ(è
ch¬s1
->
Ëngth
);

378 
	`as£¹
(
off£t2
 + 
Ën2
 <ğ(è
ch¬s2
->
Ëngth
);

380  
	`memcmp
((cÚ¡ 
u2
*)(*)
ch¬s1
->
cÚ‹Ás
 + 
off£t1
,

381 (cÚ¡ 
u2
*)(*)
ch¬s2
->
cÚ‹Ás
 + 
off£t2
,

382 
Ën1
 * (
u2
));

383 
	}
}

385 
A¼ayObjeù
* 
dvmC»©eSŒšgA¼ay
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
¡ršgs
) {

386 
Th»ad
* 
£lf
 = 
dvmTh»adS–f
();

389 
CÏssObjeù
* 
	g–em’tCÏss
 = 
dvmFšdA¼ayCÏssFÜEËm’t
(
gDvm
.
şassJavaLªgSŒšg
);

390 
A¼ayObjeù
* 
	g¡ršgA¼ay
 = 
dvmAÎocA¼ayByCÏss
(
–em’tCÏss
, 
¡ršgs
.
size
(), 
ALLOC_DEFAULT
);

391 ià(
	g¡ršgA¼ay
 =ğ
NULL
) {

393 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

394  
	gNULL
;

398 
size_t
 
	gi
 = 0; i < 
	g¡ršgs
.
size
(); i++) {

399 
Objeù
* 
	g¡r
 = (Objeù*è
dvmC»©eSŒšgFromC¡r
(
¡ršgs
[
i
]);

400 ià(
	g¡r
 =ğ
NULL
) {

402 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

403 
dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡ršgA¼ay
, 
£lf
);

404  
	gNULL
;

406 
dvmS‘ObjeùA¼ayEËm’t
(
¡ršgA¼ay
, 
i
, 
¡r
);

408 
dvmR–—£T¿ckedAÎoc
(
¡r
, 
£lf
);

411  
	g¡ršgA¼ay
;

	@vm/UtfString.h

21 #iâdeà
DALVIK_STRING_H_


22 
	#DALVIK_STRING_H_


	)

24 
	~<¡ršg
>

25 
	~<veùÜ
>

39 #ifdeà
USE_GLOBAL_STRING_DEFS


40 
	#STRING_FIELDOFF_VALUE
 
gDvm
.
offJavaLªgSŒšg_v®ue


	)

41 
	#STRING_FIELDOFF_OFFSET
 
gDvm
.
offJavaLªgSŒšg_off£t


	)

42 
	#STRING_FIELDOFF_COUNT
 
gDvm
.
offJavaLªgSŒšg_couÁ


	)

43 
	#STRING_FIELDOFF_HASHCODE
 
gDvm
.
offJavaLªgSŒšg_hashCode


	)

45 
	#STRING_FIELDOFF_VALUE
 16

	)

46 
	#STRING_FIELDOFF_HASHCODE
 20

	)

47 
	#STRING_FIELDOFF_OFFSET
 24

	)

48 
	#STRING_FIELDOFF_COUNT
 28

	)

54 
u4
 
dvmCompu‹Utf8Hash
(cÚ¡ * 
¡r
);

60 
u4
 
dvmCompu‹SŒšgHash
(
SŒšgObjeù
* 
¡rObj
);

70 
A¼ayObjeù
* 
dvmC»©eSŒšgA¼ay
(cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
¡ršgs
);

79 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡r
(cÚ¡ * 
utf8SŒ
);

88 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡r
(cÚ¡ 
¡d
::
¡ršg
& 
utf8SŒ
);

98 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡rAndL’gth
(cÚ¡ * 
utf8SŒ
,

99 
u4
 
utf16L’gth
);

105 
size_t
 
dvmUtf8L’
(cÚ¡ * 
utf8SŒ
);

111 
dvmCÚv”tUtf8ToUtf16
(
u2
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
);

118 
SŒšgObjeù
* 
dvmC»©eSŒšgFromUnicode
(cÚ¡ 
u2
* 
unich¬s
, 
Ën
);

126 * 
dvmC»©eC¡rFromSŒšg
(cÚ¡ 
SŒšgObjeù
* 
j¡r
);

132 
dvmG‘SŒšgUtfRegiÚ
(cÚ¡ 
SŒšgObjeù
* 
j¡r
,

133 
¡¬t
, 
Ën
, * 
buf
);

138 
dvmHashcmpSŒšgs
(cÚ¡ * 
v¡rObj1
, cÚ¡ * 
v¡rObj2
);

	@vm/alloc/Alloc.cpp

19 
	~"D®vik.h
"

20 
	~"®loc/H—p.h
"

21 
	~"®loc/H—pIÁ”Çl.h
"

22 
	~"®loc/H—pSourû.h
"

23 
	~<cuts/log.h
>

24 
	~<£t
>

25 
	~<m­
>

26 
usšg
 
Çme¥aû
 
	g¡d
;

27 
	gm­
<
	gu4
,
	g£t
<
	gu8
> > 
	gm­_obj
;

29 
u8
 
	$g’”©e_uuid
(){

31 
u8
 
»suÉ
;

32 
£t
<
u8
>& 
objs
 = 
m­_obj
[
	`dvmTh»adS–f
()->
th»adId
];

33 if(
objs
.
	`size
() == 0)

34 
	`ALOG
(
LOG_INFO
, "UUID", "ALLOC OBJECT fÜ‚ewh»ad %d", ()(
	`dvmTh»adS–f
()->
th»adId
));

35 
Œue
) {

36 
»suÉ
 = (
u8
)(
	`dvmTh»adS–f
()->
th»adId
)+
	`¿nd
();

37 if(
objs
.
	`fšd
(
»suÉ
è=ğobjs.
	`’d
())

40 if(
objs
.
	`size
() % 100 == 0)

41 
	`ALOG
(
LOG_INFO
, "UUID", "ALLOC OBJECT %lu", ()
»suÉ
);

42 
objs
.
	`š£¹
(
»suÉ
);

43  
»suÉ
;

44 
	}
}

45 
boŞ
 
	$fšd_uuid
(
u8
 
id
){

46 
£t
<
u8
>& 
objs
 = 
m­_obj
[
	`dvmTh»adS–f
()->
th»adId
];

47  
objs
.
	`fšd
(
id
è!ğobjs.
	`’d
();

48 
	}
}

49 
	$»Ëa£_uuid
(
u8
 
Şd
){

50 
£t
<
u8
>& 
objs
 = 
m­_obj
[
	`dvmTh»adS–f
()->
th»adId
];

51 if(
	`fšd_uuid
(
Şd
)){

52 
objs
.
	`”a£
(objs.
	`fšd
(
Şd
));

54 if(
objs
.
	`size
() == 0)

55 
	`ALOG
(
LOG_INFO
, "UUID", "AÎ objeù »Ëa£d fÜh»ad %d", ()(
	`dvmTh»adS–f
()->
th»adId
));

57 
	}
}

65 
boŞ
 
	$dvmGcS¹up
()

67 
	`dvmIn™Mu‹x
(&
gDvm
.
gcH—pLock
);

68 
	`±h»ad_cÚd_š™
(&
gDvm
.
gcH—pCÚd
, 
NULL
);

69  
	`dvmH—pS¹up
();

70 
	}
}

76 
boŞ
 
	$dvmGcS¹upAá”ZygÙe
()

78  
	`dvmH—pS¹upAá”ZygÙe
();

79 
	}
}

84 
	$dvmGcTh»adShutdown
()

86 
	`dvmH—pTh»adShutdown
();

87 
	}
}

92 
	$dvmGcShutdown
()

95 
	`dvmH—pShutdown
();

96 
	}
}

101 
boŞ
 
	$dvmGcP»ZygÙeFÜk
()

103  
	`dvmH—pSourûS¹upBefÜeFÜk
();

104 
	}
}

106 
boŞ
 
	$dvmGcS¹upCÏs£s
()

108 
CÏssObjeù
 *
kÏss
 = 
	`dvmFšdSy¡emCÏss
("Ljava/lang/Daemons;");

109 ià(
kÏss
 =ğ
NULL
) {

110  
çl£
;

112 
M‘hod
 *
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
kÏss
, "start", "()V");

113 ià(
m‘hod
 =ğ
NULL
) {

114  
çl£
;

116 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

117 
	`as£¹
(
£lf
 !ğ
NULL
);

118 
JV®ue
 
unu£dResuÉ
;

119 
	`dvmC®lM‘hod
(
£lf
, 
m‘hod
, 
NULL
, &
unu£dResuÉ
);

120  
Œue
;

121 
	}
}

126 
Objeù
* 
	$ü—‹StockExû±iÚ
(cÚ¡ * 
desütÜ
, cÚ¡ * 
msg
)

128 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

129 
SŒšgObjeù
* 
msgSŒ
 = 
NULL
;

130 
CÏssObjeù
* 
şazz
;

131 
M‘hod
* 
š™
;

132 
Objeù
* 
obj
;

135 
şazz
 = 
	`dvmFšdSy¡emCÏss
(
desütÜ
);

136 ià(
şazz
 =ğ
NULL
) {

137 
	`ALOGE
("UÇbËØfšd %s", 
desütÜ
);

138  
NULL
;

141 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<init>",

143 ià(
š™
 =ğ
NULL
) {

144 
	`ALOGE
("UÇbËØfšd SŒšg-¬g cÚ¡ruùÜ fÜ %s", 
desütÜ
);

145  
NULL
;

148 
obj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DEFAULT
);

149 ià(
obj
 =ğ
NULL
)

150  
NULL
;

152 ià(
msg
 =ğ
NULL
) {

153 
msgSŒ
 = 
NULL
;

155 
msgSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
msg
);

156 ià(
msgSŒ
 =ğ
NULL
) {

157 
	`ALOGW
("Could‚Ù‡Îoÿ‹ mes§g¡ršg \"%s\"", 
msg
);

158 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

159  
NULL
;

163 
JV®ue
 
unu£d
;

164 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
obj
, &
unu£d
, 
msgSŒ
);

165 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

166 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

167 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

168  
NULL
;

171 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

172  
obj
;

173 
	}
}

183 
boŞ
 
	$dvmC»©eStockExû±iÚs
()

189 
gDvm
.
outOfMemÜyObj
 = 
	`ü—‹StockExû±iÚ
("Ljava/lang/OutOfMemoryError;",

191 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
outOfMemÜyObj
, 
NULL
);

192 
gDvm
.
š‹º®E¼ÜObj
 = 
	`ü—‹StockExû±iÚ
("Ljava/lang/InternalError;",

194 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
š‹º®E¼ÜObj
, 
NULL
);

195 
gDvm
.
noCÏssDefFoundE¼ÜObj
 =

196 
	`ü—‹StockExû±iÚ
("Ljava/lang/NoClassDefFoundError;",

198 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
noCÏssDefFoundE¼ÜObj
, 
NULL
);

200 ià(
gDvm
.
outOfMemÜyObj
 =ğ
NULL
 || gDvm.
š‹º®E¼ÜObj
 == NULL ||

201 
gDvm
.
noCÏssDefFoundE¼ÜObj
 =ğ
NULL
)

203 
	`ALOGW
("Unableo create stockƒxceptions");

204  
çl£
;

207  
Œue
;

208 
	}
}

210 
boŞ
 
	$‹¡
(
Th»ad
* 
£lf
, * 
¬gs
){

211 
	`ALOG
(
LOG_INFO
, "HAIYANG", "in obj free HOOK");

212  
Œue
;

213 
	}
}

220 
Objeù
* 
	$dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
)

222 
Objeù
* 
ÃwObj
;

224 
	`as£¹
(
şazz
 !ğ
NULL
);

225 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
şazz
è|| 
	`dvmIsCÏssIn™Ÿlizšg
(clazz));

228 
ÃwObj
 = (
Objeù
*)
	`dvmM®loc
(
şazz
->
objeùSize
, 
æags
);

229 ià(
ÃwObj
 !ğ
NULL
) {

230 
	`DVM_OBJECT_INIT
(
ÃwObj
, 
şazz
);

231 
	`dvmT¿ckAÎoÿtiÚ
(
şazz
, cÏzz->
objeùSize
);

234 
ÃwObj
->
uuid
 = 0;

235 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

236 if(
gDvm
.
ÃwObjHook
){

237 
gDvm
.
	`ÃwObjHook
(
ÃwObj
);

239 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

256  
ÃwObj
;

257 
	}
}

265 
Objeù
* 
	$dvmClÚeObjeù
(
Objeù
* 
obj
, 
æags
)

267 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

268 
CÏssObjeù
* 
şazz
 = 
obj
->clazz;

274 
	`as£¹
(!
	`dvmIsTheCÏssCÏss
(
şazz
));

276 
size_t
 
size
;

277 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

278 
size
 = 
	`dvmA¼ayObjeùSize
((
A¼ayObjeù
 *)
obj
);

280 
size
 = 
şazz
->
objeùSize
;

283 
Objeù
* 
cİy
 = (Objeù*)
	`dvmM®loc
(
size
, 
æags
);

287 
cİy
->
uuid
 = 0;

290 ià(
cİy
 =ğ
NULL
)

291  
NULL
;

293 
	`DVM_OBJECT_INIT
(
cİy
, 
şazz
);

294 
size_t
 
off£t
 = (
Objeù
);

296 
	`memıy
((*)
cİy
 + 
off£t
, (*)
obj
 + off£t, 
size
 - offset);

299 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISFINALIZABLE
)) {

300 
	`dvmS‘Fš®izabË
(
cİy
);

303 
	`dvmT¿ckAÎoÿtiÚ
(
şazz
, 
size
);

305 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

306 if(
gDvm
.
ÃwObjHook
){

307 
gDvm
.
	`ÃwObjHook
(
cİy
);

309 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

311  
cİy
;

312 
	}
}

327 
	$dvmAddT¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
)

329 ià(
£lf
 =ğ
NULL
)

330 
£lf
 = 
	`dvmTh»adS–f
();

332 
	`as£¹
(
obj
 !ğ
NULL
);

333 
	`as£¹
(
£lf
 !ğ
NULL
);

334 ià(!
	`dvmAddToReã»nûTabË
(&
£lf
->
š‹º®LoÿlRefTabË
, 
obj
)) {

335 
	`ALOGE
("threadid=%d: unableo‡dd %po internal„efable",

336 
£lf
->
th»adId
, 
obj
);

337 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

338 
	`dvmAbÜt
();

340 
	}
}

348 
	$dvmR–—£T¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
)

350 ià(
obj
 =ğ
NULL
)

353 ià(
£lf
 =ğ
NULL
)

354 
£lf
 = 
	`dvmTh»adS–f
();

355 
	`as£¹
(
£lf
 !ğ
NULL
);

357 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

358 if(
gDvm
.
ä“ObjHook
) {

360 
gDvm
.
	`ä“ObjHook
(
obj
, 
£lf
);

362 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

364 ià(!
	`dvmRemoveFromReã»nûTabË
(&
£lf
->
š‹º®LoÿlRefTabË
,

365 
£lf
->
š‹º®LoÿlRefTabË
.
bË
, 
obj
))

367 
	`ALOGE
("threadid=%d: failedo„emove %p from internal„efable",

368 
£lf
->
th»adId
, 
obj
);

369 
	`dvmAbÜt
();

372 
	}
}

378 
	$dvmCŞËùG¬bage
()

380 ià(
gDvm
.
di§bËEx¶ic™Gc
) {

383 
	`dvmLockH—p
();

384 
	`dvmWa™FÜCÚcu¼’tGcToCom¶‘e
();

385 
	`dvmCŞËùG¬bageIÁ”Çl
(
GC_EXPLICIT
);

386 
	`dvmUÆockH—p
();

387 
	}
}

389 
	sCouÁCÚ‹xt
 {

390 cÚ¡ 
CÏssObjeù
 *
	mşazz
;

391 
size_t
 
	mcouÁ
;

394 
	$couÁIn¡ªûsOfCÏssC®lback
(
Objeù
 *
obj
, *
¬g
)

396 
CouÁCÚ‹xt
 *
ùx
 = (CouÁCÚ‹xˆ*)
¬g
;

397 
	`as£¹
(
ùx
 !ğ
NULL
);

398 ià(
obj
->
şazz
 =ğ
ùx
->clazz) {

399 
ùx
->
couÁ
 += 1;

401 
	}
}

403 
size_t
 
	$dvmCouÁIn¡ªûsOfCÏss
(cÚ¡ 
CÏssObjeù
 *
şazz
)

405 
CouÁCÚ‹xt
 
ùx
 = { 
şazz
, 0 };

406 
	`dvmLockH—p
();

407 
H—pB™m­
 *
b™m­
 = 
	`dvmH—pSourûG‘LiveB™s
();

408 
	`dvmH—pB™m­W®k
(
b™m­
, 
couÁIn¡ªûsOfCÏssC®lback
, &
ùx
);

409 
	`dvmUÆockH—p
();

410  
ùx
.
couÁ
;

411 
	}
}

413 
	$couÁAssigÇbËIn¡ªûsOfCÏssC®lback
(
Objeù
 *
obj
, *
¬g
)

415 
CouÁCÚ‹xt
 *
ùx
 = (CouÁCÚ‹xˆ*)
¬g
;

416 
	`as£¹
(
ùx
 !ğ
NULL
);

417 ià(
obj
->
şazz
 !ğ
NULL
 && 
	`dvmIn¡ªûof
(obj->şazz, 
ùx
->clazz)) {

418 
ùx
->
couÁ
 += 1;

420 
	}
}

422 
size_t
 
	$dvmCouÁAssigÇbËIn¡ªûsOfCÏss
(cÚ¡ 
CÏssObjeù
 *
şazz
)

424 
CouÁCÚ‹xt
 
ùx
 = { 
şazz
, 0 };

425 
	`dvmLockH—p
();

426 
H—pB™m­
 *
b™m­
 = 
	`dvmH—pSourûG‘LiveB™s
();

427 
	`dvmH—pB™m­W®k
(
b™m­
, 
couÁAssigÇbËIn¡ªûsOfCÏssC®lback
, &
ùx
);

428 
	`dvmUÆockH—p
();

429  
ùx
.
couÁ
;

430 
	}
}

432 
boŞ
 
	$dvmIsH—pAdd»ss
(*
add»ss
)

434  
add»ss
 !ğ
NULL
 && (((
ušŒ_t
)‡ddress & (8-1)) == 0);

435 
	}
}

437 
boŞ
 
	$dvmIsNÚMovšgObjeù
(cÚ¡ 
Objeù
* 
objeù
)

439  
Œue
;

440 
	}
}

	@vm/alloc/Alloc.h

19 #iâdeà
DALVIK_ALLOC_ALLOC_H_


20 
	#DALVIK_ALLOC_ALLOC_H_


	)

22 
	~<¡ddef.h
>

26 
	mALLOC_DEFAULT
 = 0x00,

27 
	mALLOC_DONT_TRACK
 = 0x01,

28 
	mALLOC_NON_MOVING
 = 0x02,

34 
boŞ
 
dvmGcS¹up
();

35 
boŞ
 
dvmC»©eStockExû±iÚs
();

36 
boŞ
 
dvmGcS¹upAá”ZygÙe
();

37 
dvmGcShutdown
();

38 
dvmGcTh»adShutdown
();

39 
boŞ
 
dvmGcS¹upCÏs£s
();

44 
boŞ
 
dvmGcP»ZygÙeFÜk
();

54 * 
dvmM®loc
(
size_t
 
size
, 
æags
);

64 "C" 
Objeù
* 
dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
);

73 "C" 
dvmAddT¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
);

82 "C" 
dvmR–—£T¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
);

87 
boŞ
 
dvmIsZygÙeObjeù
(cÚ¡ 
Objeù
* 
obj
);

94 
Objeù
* 
dvmClÚeObjeù
(Objeù* 
obj
, 
æags
);

99 "C" 
dvmS‘Fš®izabË
(
Objeù
* 
obj
);

105 
size_t
 
dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
* 
obj
);

111 
dvmG‘T¬g‘H—pUtiz©iÚ
();

117 
dvmS‘T¬g‘H—pUtiz©iÚ
(
ÃwT¬g‘
);

125 
dvmCŞËùG¬bage
();

130 
size_t
 
dvmCouÁIn¡ªûsOfCÏss
(cÚ¡ 
CÏssObjeù
 *
şazz
);

135 
size_t
 
dvmCouÁAssigÇbËIn¡ªûsOfCÏss
(cÚ¡ 
CÏssObjeù
 *
şazz
);

140 
dvmCË¬GrowthLim™
();

147 
boŞ
 
dvmIsH—pAdd»ss
(*
add»ss
);

149 
boŞ
 
dvmIsNÚMovšgObjeù
(cÚ¡ 
Objeù
* 
objeù
);

	@vm/alloc/CardTable.cpp

17 
	~<sys/mmª.h
>

19 
	~"D®vik.h
"

20 
	~"®loc/H—pB™m­.h
"

21 
	~"®loc/H—pB™m­IÆšes.h
"

22 
	~"®loc/H—pSourû.h
"

23 
	~"®loc/Vis™.h
"

51 
boŞ
 
	$dvmC¬dTabËS¹up
(
size_t
 
h—pMaximumSize
, size_ˆ
growthLim™
)

53 
size_t
 
Ëngth
;

54 *
®locBa£
;

55 
u1
 *
bŸ£dBa£
;

56 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

57 *
h—pBa£
 = 
	`dvmH—pSourûG‘Ba£
();

58 
	`as£¹
(
gcH—p
 !ğ
NULL
);

59 
	`as£¹
(
h—pBa£
 !ğ
NULL
);

62 
Ëngth
 = 
h—pMaximumSize
 / 
GC_CARD_SIZE
;

64 
®locBa£
 = 
	`dvmAÎocRegiÚ
(
Ëngth
 + 0x100, 
PROT_READ
 | 
PROT_WRITE
,

66 ià(
®locBa£
 =ğ
NULL
) {

67  
çl£
;

69 
gcH—p
->
ÿrdTabËBa£
 = (
u1
*)
®locBa£
;

70 
gcH—p
->
ÿrdTabËL’gth
 = 
growthLim™
 / 
GC_CARD_SIZE
;

71 
gcH—p
->
ÿrdTabËMaxL’gth
 = 
Ëngth
;

72 
gcH—p
->
ÿrdTabËOff£t
 = 0;

74 
	`as£¹
(
GC_CARD_CLEAN
 == 0);

76 
bŸ£dBa£
 = (
u1
 *)((
ušŒ_t
)
®locBa£
 -

77 ((
ušŒ_t
)
h—pBa£
 >> 
GC_CARD_SHIFT
));

78 ià(((
ušŒ_t
)
bŸ£dBa£
 & 0xffè!ğ
GC_CARD_DIRTY
) {

79 
off£t
 = 
GC_CARD_DIRTY
 - ((
ušŒ_t
)
bŸ£dBa£
 & 0xff);

80 
gcH—p
->
ÿrdTabËOff£t
 = 
off£t
 + (offset < 0 ? 0x100 : 0);

81 
bŸ£dBa£
 +ğ
gcH—p
->
ÿrdTabËOff£t
;

83 
	`as£¹
(((
ušŒ_t
)
bŸ£dBa£
 & 0xffè=ğ
GC_CARD_DIRTY
);

84 
gDvm
.
bŸ£dC¬dTabËBa£
 = 
bŸ£dBa£
;

86  
Œue
;

87 
	}
}

92 
	$dvmC¬dTabËShutdown
()

94 
gDvm
.
bŸ£dC¬dTabËBa£
 = 
NULL
;

95 
	`munm­
(
gDvm
.
gcH—p
->
ÿrdTabËBa£
, gDvm.gcH—p->
ÿrdTabËL’gth
);

96 
	}
}

98 
	$dvmCË¬C¬dTabË
()

137 
	`as£¹
(
gDvm
.
gcH—p
->
ÿrdTabËBa£
 !ğ
NULL
);

141 cÚ¡ 
H—pB™m­
* 
liveB™s
 = 
	`dvmH—pSourûG‘LiveB™s
();

142 
size_t
 
maxLiveC¬d
 = (
liveB™s
->
max
 -†iveB™s->
ba£
è/ 
GC_CARD_SIZE
;

143 
maxLiveC¬d
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(maxLiveCard);

144 ià(
maxLiveC¬d
 > 
gDvm
.
gcH—p
->
ÿrdTabËL’gth
) {

145 
maxLiveC¬d
 = 
gDvm
.
gcH—p
->
ÿrdTabËL’gth
;

148 
	`mem£t
(
gDvm
.
gcH—p
->
ÿrdTabËBa£
, 
GC_CARD_CLEAN
, 
maxLiveC¬d
);

151 
	`madvi£
(
gDvm
.
gcH—p
->
ÿrdTabËBa£
, gDvm.gcH—p->
ÿrdTabËL’gth
,

152 
MADV_DONTNEED
);

154 
	}
}

159 
boŞ
 
	$dvmIsV®idC¬d
(cÚ¡ 
u1
 *
ÿrdAddr
)

161 
GcH—p
 *
h
 = 
gDvm
.
gcH—p
;

162 
u1
* 
begš
 = 
h
->
ÿrdTabËBa£
 + h->
ÿrdTabËOff£t
;

163 
u1
* 
’d
 = &
begš
[
h
->
ÿrdTabËL’gth
];

164  
ÿrdAddr
 >ğ
begš
 && c¬dAdd¸< 
’d
;

165 
	}
}

171 
u1
 *
	$dvmC¬dFromAddr
(cÚ¡ *
addr
)

173 
u1
 *
bŸ£dBa£
 = 
gDvm
.
bŸ£dC¬dTabËBa£
;

174 
u1
 *
ÿrdAddr
 = 
bŸ£dBa£
 + ((
ušŒ_t
)
addr
 >> 
GC_CARD_SHIFT
);

175 
	`as£¹
(
	`dvmIsV®idC¬d
(
ÿrdAddr
));

176  
ÿrdAddr
;

177 
	}
}

182 *
	$dvmAddrFromC¬d
(cÚ¡ 
u1
 *
ÿrdAddr
)

184 
	`as£¹
(
	`dvmIsV®idC¬d
(
ÿrdAddr
));

185 
ušŒ_t
 
off£t
 = 
ÿrdAddr
 - 
gDvm
.
bŸ£dC¬dTabËBa£
;

186  (*)(
off£t
 << 
GC_CARD_SHIFT
);

187 
	}
}

192 
	$dvmM¬kC¬d
(cÚ¡ *
addr
)

194 
u1
 *
ÿrdAddr
 = 
	`dvmC¬dFromAddr
(
addr
);

195 *
ÿrdAddr
 = 
GC_CARD_DIRTY
;

196 
	}
}

201 
boŞ
 
	$isObjeùDœty
(cÚ¡ 
Objeù
 *
obj
)

203 
	`as£¹
(
obj
 !ğ
NULL
);

204 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

205 
u1
 *
ÿrd
 = 
	`dvmC¬dFromAddr
(
obj
);

206  *
ÿrd
 =ğ
GC_CARD_DIRTY
;

207 
	}
}

212 
	sWh™eReã»nûCouÁ”
 {

213 
H—pB™m­
 *
	mm¬kB™s
;

214 
size_t
 
	mwh™eRefs
;

220 
	$couÁWh™eReã»nûVis™Ü
(*
addr
, *
¬g
)

222 
Wh™eReã»nûCouÁ”
 *
ùx
;

223 
Objeù
 *
obj
;

225 
	`as£¹
(
addr
 !ğ
NULL
);

226 
	`as£¹
(
¬g
 !ğ
NULL
);

227 
obj
 = *(
Objeù
 **)
addr
;

228 ià(
obj
 =ğ
NULL
) {

231 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

232 
ùx
 = (
Wh™eReã»nûCouÁ”
 *)
¬g
;

233 ià(
	`dvmH—pB™m­IsObjeùB™S‘
(
ùx
->
m¬kB™s
, 
obj
)) {

236 
ùx
->
wh™eRefs
 += 1;

237 
	}
}

242 
	$dumpWh™eReã»nûVis™Ü
(*
addr
, *
¬g
)

244 
Wh™eReã»nûCouÁ”
 *
ùx
;

245 
Objeù
 *
obj
;

247 
	`as£¹
(
addr
 !ğ
NULL
);

248 
	`as£¹
(
¬g
 !ğ
NULL
);

249 
obj
 = *(
Objeù
 **)
addr
;

250 ià(
obj
 =ğ
NULL
) {

253 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

254 
ùx
 = (
Wh™eReã»nûCouÁ”
*)
¬g
;

255 ià(
	`dvmH—pB™m­IsObjeùB™S‘
(
ùx
->
m¬kB™s
, 
obj
)) {

258 
	`ALOGE
("objeù %°i wh™e", 
obj
);

259 
	}
}

264 
	$dumpReã»nûsVis™Ü
(*
pObj
, *
¬g
)

266 
Objeù
 *
obj
 = *(Objeù **)
pObj
;

267 
Objeù
 *
lookšgFÜ
 = *(Objeù **)
¬g
;

268 ià(
lookšgFÜ
 !ğ
NULL
 &&†ookšgFÜ =ğ
obj
) {

269 *(
Objeù
 **)
¬g
 = 
NULL
;

271 
	}
}

273 
	$dumpReã»nûsC®lback
(
Objeù
 *
obj
, *
¬g
)

275 ià(
obj
 =ğ(
Objeù
 *)
¬g
) {

278 
	`dvmVis™Objeù
(
dumpReã»nûsVis™Ü
, 
obj
, &
¬g
);

279 ià(
¬g
 =ğ
NULL
) {

280 
	`ALOGD
("Found %°šhh—°@ %p", 
¬g
, 
obj
);

281 
	`dvmDumpObjeù
(
obj
);

283 
	}
}

288 
	$dumpReã»nûsRoÙVis™Ü
(*
±r
, 
u4
 
th»adId
,

289 
RoÙTy³
 
ty³
, *
¬g
)

291 
Objeù
 *
obj
 = *(Objeù **)
±r
;

292 
Objeù
 *
lookšgFÜ
 = *(Objeù **)
¬g
;

293 ià(
obj
 =ğ
lookšgFÜ
) {

294 
	`ALOGD
("Found %°š‡„oÙ @ %p", 
¬g
, 
±r
);

296 
	}
}

301 
	$dumpReã»nûs
(cÚ¡ 
Objeù
 *
obj
)

303 
H—pB™m­
 *
b™m­
 = 
	`dvmH—pSourûG‘LiveB™s
();

304 *
¬g
 = (*)
obj
;

305 
	`dvmVis™RoÙs
(
dumpReã»nûsRoÙVis™Ü
, 
¬g
);

306 
	`dvmH—pB™m­W®k
(
b™m­
, 
dumpReã»nûsC®lback
, 
¬g
);

307 
	}
}

313 
boŞ
 
	$isReã»ÁUnm¬ked
(cÚ¡ 
Objeù
 *
obj
,

314 cÚ¡ 
Wh™eReã»nûCouÁ”
* 
ùx
)

316 
	`as£¹
(
obj
 !ğ
NULL
);

317 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

318 
	`as£¹
(
ùx
 !ğ
NULL
);

319 ià(
ùx
->
wh™eRefs
 != 1) {

320  
çl£
;

321 } ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISREFERENCE
)) {

322 
size_t
 
off£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

323 cÚ¡ 
Objeù
 *
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
off£t
);

324  !
	`dvmH—pB™m­IsObjeùB™S‘
(
ùx
->
m¬kB™s
, 
»ã»Á
);

326  
çl£
;

328 
	}
}

334 
boŞ
 
	$isW—kIÁ”ÃdSŒšg
(cÚ¡ 
Objeù
 *
obj
)

336 
	`as£¹
(
obj
 !ğ
NULL
);

337 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
) {

338  
	`dvmIsW—kIÁ”ÃdSŒšg
((
SŒšgObjeù
 *)
obj
);

340  
çl£
;

342 
	}
}

348 
boŞ
 
	$isPushedOnM¬kSck
(cÚ¡ 
Objeù
 *
obj
)

350 
GcM¬kSck
 *
¡ack
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
.stack;

351 cÚ¡ 
Objeù
 **
±r
 = 
¡ack
->
ba£
;…Œ < sck->
tİ
; ++ptr) {

352 ià(*
±r
 =ğ
obj
) {

353  
Œue
;

356  
çl£
;

357 
	}
}

367 
	$v”ifyC¬dTabËC®lback
(
Objeù
 *
obj
, *
¬g
)

369 
Wh™eReã»nûCouÁ”
 
ùx
 = { (
H—pB™m­
 *)
¬g
, 0 };

371 
	`dvmVis™Objeù
(
couÁWh™eReã»nûVis™Ü
, 
obj
, &
ùx
);

372 ià(
ùx
.
wh™eRefs
 == 0) {

374 } ià(
	`isObjeùDœty
(
obj
)) {

376 } ià(
	`isReã»ÁUnm¬ked
(
obj
, &
ùx
)) {

378 } ià(
	`isW—kIÁ”ÃdSŒšg
(
obj
)) {

380 } ià(
	`isPushedOnM¬kSck
(
obj
)) {

383 
	`ALOGE
("V”ify faed, objeù %°i g¿y‡nd oÀª unm¬ked c¬d", 
obj
);

384 
	`dvmDumpObjeù
(
obj
);

385 
	`dvmVis™Objeù
(
dumpWh™eReã»nûVis™Ü
, 
obj
, &
ùx
);

386 
	`dumpReã»nûs
(
obj
);

387 
	`dvmAbÜt
();

389 
	}
}

394 
	$dvmV”ifyC¬dTabË
()

396 
H—pB™m­
 *
m¬kB™s
 = 
gDvm
.
gcH—p
->
m¬kCÚ‹xt
.
b™m­
;

397 
	`dvmH—pB™m­W®k
(
m¬kB™s
, 
v”ifyC¬dTabËC®lback
, markBits);

398 
	}
}

	@vm/alloc/CardTable.h

23 #iâdeà
DALVIK_ALLOC_CARDTABLE_H_


24 
	#DALVIK_ALLOC_CARDTABLE_H_


	)

26 
	#GC_CARD_SHIFT
 7

	)

27 
	#GC_CARD_SIZE
 (1 << 
GC_CARD_SHIFT
)

	)

28 
	#GC_CARD_CLEAN
 0

	)

29 
	#GC_CARD_DIRTY
 0x70

	)

35 
boŞ
 
dvmC¬dTabËS¹up
(
size_t
 
h—pMaximumSize
, size_ˆ
growthLim™
);

40 
dvmC¬dTabËShutdown
();

45 
dvmCË¬C¬dTabË
();

51 
u1
 *
dvmC¬dFromAddr
(cÚ¡ *
addr
);

56 *
dvmAddrFromC¬d
(cÚ¡ 
u1
 *
ÿrd
);

61 
boŞ
 
dvmIsV®idC¬d
(cÚ¡ 
u1
 *
ÿrd
);

66 
dvmM¬kC¬d
(cÚ¡ *
addr
);

71 
dvmV”ifyC¬dTabË
();

	@vm/alloc/Copying.cpp

17 
	~<”ºo.h
>

18 
	~<lim™s.h
>

19 
	~<sys/mmª.h
>

21 
	~"D®vik.h
"

22 
	~"®loc/H—p.h
"

23 
	~"®loc/H—pB™m­.h
"

24 
	~"®loc/H—pIÁ”Çl.h
"

25 
	~"®loc/H—pSourû.h
"

26 
	~"®loc/V”ify.h
"

123 
	#ARRAYSIZE
(
x
è((xè/ (x[0]))

	)

126 
	#LOG_ALLOC
 
ALOGI


	)

127 
	#LOG_PIN
 
ALOGI


	)

128 
	#LOG_PROM
 
ALOGI


	)

129 
	#LOG_REF
 
ALOGI


	)

130 
	#LOG_SCAV
 
ALOGI


	)

131 
	#LOG_TRAN
 
ALOGI


	)

132 
	#LOG_VER
 
ALOGI


	)

134 
	#LOG_ALLOC
(...è(()0)

	)

135 
	#LOG_PIN
(...è(()0)

	)

136 
	#LOG_PROM
(...è(()0)

	)

137 
	#LOG_REF
(...è(()0)

	)

138 
	#LOG_SCAV
(...è(()0)

	)

139 
	#LOG_TRAN
(...è(()0)

	)

140 
	#LOG_VER
(...è(()0)

	)

143 
’queueBlock
(
H—pSourû
 *
h—pSourû
, 
size_t
 
block
);

144 
sÿv’geReã»nû
(
Objeù
 **
obj
);

145 
boŞ
 
toS·ûCÚšs
(cÚ¡ *
addr
);

146 
boŞ
 
äomS·ûCÚšs
(cÚ¡ *
addr
);

147 
size_t
 
sumH—pB™m­
(cÚ¡ 
H—pB™m­
 *
b™m­
);

148 
size_t
 
objeùSize
(cÚ¡ 
Objeù
 *
obj
);

149 
sÿv’geD©aObjeù
(
Objeù
 *
obj
);

150 
sÿv’geBlockQueue
();

155 ’um { 
	mBLOCK_SHIFT
 = 9 };

156 ’um { 
	mBLOCK_SIZE
 = 1 << 
BLOCK_SHIFT
 };

162 
	mBLOCK_FREE
 = 0,

163 
	mBLOCK_FROM_SPACE
 = 1,

164 
	mBLOCK_TO_SPACE
 = 2,

165 
	mBLOCK_CONTINUED
 = 7

171 ’um { 
	mALLOC_ALIGNMENT
 = 8 };

176 
	#QUEUE_TAIL
 (~(
size_t
)0)

	)

178 
	sH—pSourû
 {

181 
u1
 *
	mblockBa£
;

184 
size_t
 
	mtÙ®Blocks
;

185 
size_t
 
	m®locBlocks
;

191 
size_t
 *
	mblockQueue
;

199 
size_t
 
	mba£Block
, 
	mlim™Block
;

201 
size_t
 
	mqueueH—d
;

202 
size_t
 
	mqueueTa
;

203 
size_t
 
	mqueueSize
;

206 *
	mblockS·û
;

209 
u1
 *
	m®locPŒ
;

211 
u1
 *
	m®locLim™
;

213 
H—pB™m­
 
	m®locB™s
;

219 
size_t
 
	mmšimumSize
;

225 
size_t
 
	mmaximumSize
;

231 
size_t
 
	mcu¼’tSize
;

233 
size_t
 
	mby‹sAÎoÿ‹d
;

236 
	$®ignDown
(
x
, 
n
)

238  
x
 & -
n
;

239 
	}
}

241 
	$®ignUp
(
x
, 
n
)

243  
	`®ignDown
(
x
 + (
n
 - 1),‚);

244 
	}
}

246 
	$desüibeBlocks
(cÚ¡ 
H—pSourû
 *
h—pSourû
)

248 
size_t
 
i
 = 0; i < 
h—pSourû
->
tÙ®Blocks
; ++i) {

249 ià((
i
 % 32è=ğ0è
	`putch¬
('\n');

250 
	`´štf
("%d ", 
h—pSourû
->
blockS·û
[
i
]);

252 
	`putch¬
('\n');

253 
	}
}

259 *
	$vœtu®AÎoc
(
size_t
 
Ëngth
)

261 
æags
 = 
MAP_PRIVATE
 | 
MAP_ANONYMOUS
;

262 
´Ù
 = 
PROT_READ
 | 
PROT_WRITE
;

263 *
addr
 = 
	`mm­
(
NULL
, 
Ëngth
, 
´Ù
, 
æags
, -1, 0);

264 ià(
addr
 =ğ
MAP_FAILED
) {

265 
	`LOGE_HEAP
("mm­: %s", 
	`¡»¼Ü
(
”ºo
));

266 
addr
 = 
NULL
;

268  
addr
;

269 
	}
}

271 
	$vœtu®F»e
(*
addr
, 
size_t
 
Ëngth
)

273 
	`as£¹
(
addr
 !ğ
NULL
);

274 
	`as£¹
((
ušŒ_t
)
addr
 % 
SYSTEM_PAGE_SIZE
 == 0);

275 
»s
 = 
	`munm­
(
addr
, 
Ëngth
);

276 ià(
»s
 == -1) {

277 
	`LOGE_HEAP
("munm­: %s", 
	`¡»¼Ü
(
”ºo
));

279 
	}
}

281 #iâdeà
NDEBUG


282 
	$isV®idAdd»ss
(cÚ¡ 
H—pSourû
 *
h—pSourû
, cÚ¡ 
u1
 *
addr
)

284 
size_t
 
block
;

286 
block
 = (
ušŒ_t
)
addr
 >> 
BLOCK_SHIFT
;

287  
h—pSourû
->
ba£Block
 <ğ
block
 &&

288 
h—pSourû
->
lim™Block
 > 
block
;

289 
	}
}

296 *
	$®loÿ‹Blocks
(
H—pSourû
 *
h—pSourû
, 
size_t
 
blocks
)

298 
size_t
 
®locBlocks
 = 
h—pSourû
->allocBlocks;

299 
size_t
 
tÙ®Blocks
 = 
h—pSourû
->totalBlocks;

301 
	`as£¹
(
blocks
 != 0);

303 ià(
®locBlocks
 + 
blocks
 > 
tÙ®Blocks
 / 2) {

304  
NULL
;

307 
size_t
 
i
 = 0; i < 
tÙ®Blocks
; ++i) {

309 
size_t
 
j
 = 0; j < 
blocks
; ++j) {

310 ià(
h—pSourû
->
blockS·û
[
i
+
j
] !ğ
BLOCK_FREE
) {

315 ià(
j
 !ğ
blocks
) {

316 
i
 +ğ
j
;

320 
h—pSourû
->
blockS·û
[
i
] = 
BLOCK_TO_SPACE
;

321 
size_t
 
j
 = 1; j < 
blocks
; ++j) {

322 
h—pSourû
->
blockS·û
[
i
+
j
] = 
BLOCK_CONTINUED
;

324 
h—pSourû
->
®locBlocks
 +ğ
blocks
;

325 *
addr
 = &
h—pSourû
->
blockBa£
[
i
*
BLOCK_SIZE
];

326 
	`mem£t
(
addr
, 0, 
blocks
*
BLOCK_SIZE
);

328 ià(
h—pSourû
->
queueH—d
 !ğ
QUEUE_TAIL
) {

329 
	`LOG_ALLOC
("®loÿ‹Block ®locBlocks=%zu,block#=%zu", 
h—pSourû
->
®locBlocks
, 
i
);

335 
	`’queueBlock
(
h—pSourû
, 
i
);

338  
addr
;

341 
	`ALOGE
("Insufficient space, %zu blocks, %zu blocks‡llocated‡nd %zu bytes‡llocated",

342 
h—pSourû
->
tÙ®Blocks
,

343 
h—pSourû
->
®locBlocks
,

344 
h—pSourû
->
by‹sAÎoÿ‹d
);

345  
NULL
;

346 
	}
}

349 
size_t
 
	$add»ssToBlock
(cÚ¡ 
H—pSourû
 *
h—pSourû
, cÚ¡ *
addr
)

351 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

352 
	`as£¹
(
	`isV®idAdd»ss
(
h—pSourû
, 
addr
));

353  (((
ušŒ_t
)
addr
è>> 
BLOCK_SHIFT
è- 
h—pSourû
->
ba£Block
;

354 
	}
}

357 
u1
 *
	$blockToAdd»ss
(cÚ¡ 
H—pSourû
 *
h—pSourû
, 
size_t
 
block
)

359 
u1
 *
addr
;

361 
addr
 = (
u1
 *è(((
ušŒ_t
è
h—pSourû
->
ba£Block
 + 
block
è* 
BLOCK_SIZE
);

362 
	`as£¹
(
	`isV®idAdd»ss
(
h—pSourû
, 
addr
));

363  
addr
;

364 
	}
}

366 
	$ş—rBlock
(
H—pSourû
 *
h—pSourû
, 
size_t
 
block
)

368 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

369 
	`as£¹
(
block
 < 
h—pSourû
->
tÙ®Blocks
);

370 
u1
 *
addr
 = 
h—pSourû
->
blockBa£
 + 
block
*
BLOCK_SIZE
;

371 
	`mem£t
(
addr
, 0xCC, 
BLOCK_SIZE
);

372 
size_t
 
i
 = 0; i < 
BLOCK_SIZE
; i += 8) {

373 
	`dvmH—pB™m­CË¬ObjeùB™
(&
h—pSourû
->
®locB™s
, 
addr
 + 
i
);

375 
	}
}

377 
	$ş—rFromS·û
(
H—pSourû
 *
h—pSourû
)

379 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

380 
size_t
 
i
 = 0;

381 
size_t
 
couÁ
 = 0;

382 
i
 < 
h—pSourû
->
tÙ®Blocks
) {

383 ià(
h—pSourû
->
blockS·û
[
i
] !ğ
BLOCK_FROM_SPACE
) {

384 ++
i
;

387 
h—pSourû
->
blockS·û
[
i
] = 
BLOCK_FREE
;

388 
	`ş—rBlock
(
h—pSourû
, 
i
);

389 ++
i
;

390 ++
couÁ
;

391 
i
 < 
h—pSourû
->
tÙ®Blocks
 &&

392 
h—pSourû
->
blockS·û
[
i
] =ğ
BLOCK_CONTINUED
) {

393 
h—pSourû
->
blockS·û
[
i
] = 
BLOCK_FREE
;

394 
	`ş—rBlock
(
h—pSourû
, 
i
);

395 ++
i
;

396 ++
couÁ
;

399 
	`LOG_SCAV
("ä“d %zu block (%zu by‹s)", 
couÁ
, couÁ*
BLOCK_SIZE
);

400 
	}
}

406 
	$’queueBlock
(
H—pSourû
 *
h—pSourû
, 
size_t
 
block
)

408 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

409 
	`as£¹
(
block
 < 
h—pSourû
->
tÙ®Blocks
);

410 ià(
h—pSourû
->
queueH—d
 !ğ
QUEUE_TAIL
) {

411 
h—pSourû
->
blockQueue
[h—pSourû->
queueTa
] = 
block
;

413 
h—pSourû
->
queueH—d
 = 
block
;

415 
h—pSourû
->
blockQueue
[
block
] = 
QUEUE_TAIL
;

416 
h—pSourû
->
queueTa
 = 
block
;

417 ++
h—pSourû
->
queueSize
;

418 
	}
}

424 
	$´omÙeBlockByAddr
(
H—pSourû
 *
h—pSourû
, cÚ¡ *
addr
)

426 
size_t
 
block
;

428 
block
 = 
	`add»ssToBlock
(
h—pSourû
, (cÚ¡ 
u1
 *)
addr
);

429 ià(
h—pSourû
->
blockS·û
[
block
] !ğ
BLOCK_TO_SPACE
) {

431 
h—pSourû
->
blockS·û
[
block
] = 
BLOCK_TO_SPACE
;

432 
	`’queueBlock
(
h—pSourû
, 
block
);

434 
h—pSourû
->
®locBlocks
 += 1;

438 
	}
}

440 
GcH—p
 *
	$dvmH—pSourûS¹up
(
size_t
 
¡¬tSize
, size_ˆ
absŞu‹MaxSize
)

442 
GcH—p
* 
gcH—p
;

443 
H—pSourû
 *
h—pSourû
;

445 
	`as£¹
(
¡¬tSize
 <ğ
absŞu‹MaxSize
);

447 
h—pSourû
 = 
	`ÿÎoc
(1, (*heapSource));

448 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

450 
h—pSourû
->
mšimumSize
 = 
	`®ignUp
(
¡¬tSize
, 
BLOCK_SIZE
);

451 
h—pSourû
->
maximumSize
 = 
	`®ignUp
(
absŞu‹MaxSize
, 
BLOCK_SIZE
);

453 
h—pSourû
->
cu¼’tSize
 = h—pSourû->
maximumSize
;

456 
h—pSourû
->
blockBa£
 = 
	`vœtu®AÎoc
(h—pSourû->
maximumSize
);

457 
	`as£¹
(
h—pSourû
->
blockBa£
 !ğ
NULL
);

458 
h—pSourû
->
ba£Block
 = (
ušŒ_t
èh—pSourû->
blockBa£
 >> 
BLOCK_SHIFT
;

459 
h—pSourû
->
lim™Block
 = ((
ušŒ_t
èh—pSourû->
blockBa£
 + h—pSourû->
maximumSize
è>> 
BLOCK_SHIFT
;

461 
h—pSourû
->
®locBlocks
 = 0;

462 
h—pSourû
->
tÙ®Blocks
 = (h—pSourû->
lim™Block
 - h—pSourû->
ba£Block
);

464 
	`as£¹
(
h—pSourû
->
tÙ®Blocks
 = h—pSourû->
maximumSize
 / 
BLOCK_SIZE
);

467 
size_t
 
size
 = (
h—pSourû
->
blockQueue
[0]);

468 
h—pSourû
->
blockQueue
 = 
	`m®loc
(h—pSourû->
tÙ®Blocks
*
size
);

469 
	`as£¹
(
h—pSourû
->
blockQueue
 !ğ
NULL
);

470 
	`mem£t
(
h—pSourû
->
blockQueue
, 0xCC, h—pSourû->
tÙ®Blocks
*
size
);

471 
h—pSourû
->
queueH—d
 = 
QUEUE_TAIL
;

476 
size_t
 
size
 = (
h—pSourû
->
blockS·û
[0]);

477 
h—pSourû
->
blockS·û
 = 
	`ÿÎoc
(1, h—pSourû->
tÙ®Blocks
*
size
);

478 
	`as£¹
(
h—pSourû
->
blockS·û
 !ğ
NULL
);

481 
	`dvmH—pB™m­In™
(&
h—pSourû
->
®locB™s
,

482 
h—pSourû
->
blockBa£
,

483 
h—pSourû
->
maximumSize
,

487 
h—pSourû
->
®locPŒ
 = 
	`®loÿ‹Blocks
(heapSource, 1);

488 
h—pSourû
->
®locLim™
 = h—pSourû->
®locPŒ
 + 
BLOCK_SIZE
;

490 
gcH—p
 = 
	`ÿÎoc
(1, (*gcHeap));

491 
	`as£¹
(
gcH—p
 !ğ
NULL
);

492 
gcH—p
->
h—pSourû
 = heapSource;

494  
gcH—p
;

495 
	}
}

502 
boŞ
 
	$dvmH—pSourûS¹upAá”ZygÙe
()

504  
Œue
;

505 
	}
}

507 
boŞ
 
	$dvmH—pSourûS¹upBefÜeFÜk
()

509 
	`as£¹
(!"implemented");

510  
çl£
;

511 
	}
}

513 
	$dvmH—pSourûShutdown
(
GcH—p
 **
gcH—p
)

515 ià(*
gcH—p
 =ğ
NULL
 || (*gcH—p)->
h—pSourû
 == NULL)

517 
	`ä“
((*
gcH—p
)->
h—pSourû
->
blockQueue
);

518 
	`ä“
((*
gcH—p
)->
h—pSourû
->
blockS·û
);

519 
	`vœtu®F»e
((*
gcH—p
)->
h—pSourû
->
blockBa£
,

520 (*
gcH—p
)->
h—pSourû
->
maximumSize
);

521 
	`ä“
((*
gcH—p
)->
h—pSourû
);

522 (*
gcH—p
)->
h—pSourû
 = 
NULL
;

523 
	`ä“
(*
gcH—p
);

524 *
gcH—p
 = 
NULL
;

525 
	}
}

527 
size_t
 
	$dvmH—pSourûG‘V®ue
(
H—pSourûV®ueS³c
 
¥ec
,

528 
size_t
 
³rH—pSts
[],

529 
size_t
 
¬¿yL’
)

531 
H—pSourû
 *
h—pSourû
;

532 
size_t
 
v®ue
;

534 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

535 
¥ec
) {

536 
HS_FOOTPRINT
:

537 
v®ue
 = 
h—pSourû
->
maximumSize
;

539 
HS_ALLOWED_FOOTPRINT
:

540 
v®ue
 = 
h—pSourû
->
maximumSize
;

542 
HS_BYTES_ALLOCATED
:

543 
v®ue
 = 
h—pSourû
->
by‹sAÎoÿ‹d
;

545 
HS_OBJECTS_ALLOCATED
:

546 
v®ue
 = 
	`sumH—pB™m­
(&
h—pSourû
->
®locB™s
);

549 
	`as£¹
(!"implemented");

550 
v®ue
 = 0;

552 ià(
³rH—pSts
) {

553 *
³rH—pSts
 = 
v®ue
;

555  
v®ue
;

556 
	}
}

562 
	$dvmH—pSourûG‘ObjeùB™m­s
(
H—pB™m­
 
objB™s
[], H—pB™m­ 
m¬kB™s
[],

563 
size_t
 
numH—ps
)

565 
	`as£¹
(!"implemented");

566 
	}
}

568 
H—pB™m­
 *
	$dvmH—pSourûG‘LiveB™s
()

570  &
gDvm
.
gcH—p
->
h—pSourû
->
®locB™s
;

571 
	}
}

583 *
	$dvmH—pSourûAÎoc
(
size_t
 
Ëngth
)

585 
H—pSourû
 *
h—pSourû
;

586 *
addr
;

587 
size_t
 
®igÃd
, 
avaabË
, 
blocks
;

589 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

590 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

591 
	`as£¹
(
h—pSourû
->
®locPŒ
 !ğ
NULL
);

592 
	`as£¹
(
h—pSourû
->
®locLim™
 !ğ
NULL
);

594 
®igÃd
 = 
	`®ignUp
(
Ëngth
, 
ALLOC_ALIGNMENT
);

595 
avaabË
 = 
h—pSourû
->
®locLim™
 - h—pSourû->
®locPŒ
;

598 ià(
®igÃd
 <ğ
avaabË
) {

599 
addr
 = 
h—pSourû
->
®locPŒ
;

600 
h—pSourû
->
®locPŒ
 +ğ
®igÃd
;

601 
h—pSourû
->
by‹sAÎoÿ‹d
 +ğ
®igÃd
;

602 
	`dvmH—pB™m­S‘ObjeùB™
(&
h—pSourû
->
®locB™s
, 
addr
);

603  
addr
;

607 ià(
®igÃd
 <ğ
BLOCK_SIZE
) {

608 
addr
 = 
	`®loÿ‹Blocks
(
h—pSourû
, 1);

609 ià(
addr
 !ğ
NULL
) {

610 
h—pSourû
->
®locLim™
 = 
addr
 + 
BLOCK_SIZE
;

611 
h—pSourû
->
®locPŒ
 = 
addr
 + 
®igÃd
;

612 
h—pSourû
->
by‹sAÎoÿ‹d
 +ğ
®igÃd
;

613 
	`dvmH—pB™m­S‘ObjeùB™
(&
h—pSourû
->
®locB™s
, 
addr
);

616  
addr
;

620 
blocks
 = 
	`®ignUp
(
®igÃd
, 
BLOCK_SIZE
) / BLOCK_SIZE;

622 
addr
 = 
	`®loÿ‹Blocks
(
h—pSourû
, 
blocks
);

624 ià(
addr
 !ğ
NULL
) {

625 
h—pSourû
->
by‹sAÎoÿ‹d
 +ğ
®igÃd
;

626 
	`dvmH—pB™m­S‘ObjeùB™
(&
h—pSourû
->
®locB™s
, 
addr
);

629  
addr
;

630 
	}
}

632 *
	$dvmH—pSourûAÎocAndGrow
(
size_t
 
size
)

634  
	`dvmH—pSourûAÎoc
(
size
);

635 
	}
}

638 *
	$®loÿ‹G¿y
(
size_t
 
size
)

640 
H—pSourû
 *
h—pSourû
;

641 *
addr
;

642 
size_t
 
block
;

645 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

646 
addr
 = 
	`dvmH—pSourûAÎoc
(
size
);

647 
	`as£¹
(
addr
 !ğ
NULL
);

648 
block
 = 
	`add»ssToBlock
(
h—pSourû
, (cÚ¡ 
u1
 *)
addr
);

649 ià(
h—pSourû
->
queueH—d
 =ğ
QUEUE_TAIL
) {

655 
	`’queueBlock
(
h—pSourû
, 
block
);

656 
	`LOG_PROM
("fÜûd…romÙšg block %zu %d @ %p", 
block
, 
h—pSourû
->
blockS·û
[block], 
addr
);

658  
addr
;

659 
	}
}

661 
boŞ
 
	$dvmH—pSourûCÚšsAdd»ss
(cÚ¡ *
±r
)

663 
H—pSourû
 *
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

664  
	`dvmH—pB™m­Cov”sAdd»ss
(&
h—pSourû
->
®locB™s
, 
±r
);

665 
	}
}

671 
boŞ
 
	$dvmH—pSourûCÚšs
(cÚ¡ *
addr
)

673 
H—pSourû
 *
h—pSourû
;

674 
H—pB™m­
 *
b™m­
;

676 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

677 
b™m­
 = &
h—pSourû
->
®locB™s
;

678 ià(!
	`dvmH—pB™m­Cov”sAdd»ss
(
b™m­
, 
addr
)) {

679  
çl£
;

681  
	`dvmH—pB™m­IsObjeùB™S‘
(
b™m­
, 
addr
);

683 
	}
}

685 
boŞ
 
	$dvmH—pSourûG‘PŒFÏg
(cÚ¡ *
±r
, 
H—pSourûPŒFÏg
 
æag
)

687 
	`as£¹
(!"implemented");

688  
çl£
;

689 
	}
}

691 
size_t
 
	$dvmH—pSourûChunkSize
(cÚ¡ *
±r
)

693 
	`as£¹
(!"implemented");

695 
	}
}

697 
size_t
 
	$dvmH—pSourûFoÙ´št
()

699 
	`as£¹
(!"implemented");

701 
	}
}

708 
size_t
 
	$dvmH—pSourûG‘Id—lFoÙ´št
()

710  
gDvm
.
gcH—p
->
h—pSourû
->
cu¼’tSize
;

711 
	}
}

713 
	$dvmG‘T¬g‘H—pUtiz©iÚ
()

716 
	}
}

718 
	$dvmS‘T¬g‘H—pUtiz©iÚ
(
ÃwT¬g‘
)

720 
	`as£¹
(
ÃwT¬g‘
 > 0.0f &&‚ewTarget < 1.0f);

721 
	}
}

729 
	$dvmH—pSourûGrowFÜUtiz©iÚ
()

732 
	}
}

734 
dvmH—pSourûW®k
((*
ÿÎback
)(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

735 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
,

736 *
¬g
),

737 *
¬g
)

739 
	`as£¹
(!"implemented");

740 
	}
}

742 
size_t
 
	$dvmH—pSourûG‘NumH—ps
()

745 
	}
}

747 
boŞ
 
	$dvmT¿ckEx‹º®AÎoÿtiÚ
(
size_t
 
n
)

750  
Œue
;

751 
	}
}

753 
	$dvmT¿ckEx‹º®F»e
(
size_t
 
n
)

756 
	}
}

758 
size_t
 
	$dvmG‘Ex‹º®By‹sAÎoÿ‹d
()

760 
	`as£¹
(!"implemented");

762 
	}
}

764 
	$dvmH—pSourûFl
()

766 
H—pSourû
 *
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

769 
h—pSourû
->
®locBlocks
 = 0;

770 
h—pSourû
->
queueSize
 = 0;

771 
h—pSourû
->
queueH—d
 = 
QUEUE_TAIL
;

775 
h—pSourû
->
®locPŒ
 = 
NULL
;

776 
h—pSourû
->
®locLim™
 = 
NULL
;

779 
size_t
 
i
 = 0; i < 
h—pSourû
->
tÙ®Blocks
; ++i) {

780 ià(
h—pSourû
->
blockS·û
[
i
] =ğ
BLOCK_TO_SPACE
) {

781 
h—pSourû
->
blockS·û
[
i
] = 
BLOCK_FROM_SPACE
;

784 
	}
}

786 
	$room
(
size_t
 *
®loc
, size_ˆ*
ava
, size_ˆ*
tÙ®
)

788 
H—pSourû
 *
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

789 *
tÙ®
 = 
h—pSourû
->
tÙ®Blocks
*
BLOCK_SIZE
;

790 *
®loc
 = 
h—pSourû
->
®locBlocks
*
BLOCK_SIZE
;

791 *
ava
 = *
tÙ®
 - *
®loc
;

792 
	}
}

794 
boŞ
 
	$isS·ûIÁ”Çl
(
u1
 *
addr
, 
¥aû
)

796 
H—pSourû
 *
h—pSourû
;

797 
u1
 *
ba£
, *
lim™
;

798 
size_t
 
off£t
;

799 
¥aû2
;

801 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

802 
ba£
 = 
h—pSourû
->
blockBa£
;

803 
	`as£¹
(
addr
 >ğ
ba£
);

804 
lim™
 = 
h—pSourû
->
blockBa£
 + h—pSourû->
maximumSize
;

805 
	`as£¹
(
addr
 < 
lim™
);

806 
off£t
 = 
addr
 - 
ba£
;

807 
¥aû2
 = 
h—pSourû
->
blockS·û
[
off£t
 >> 
BLOCK_SHIFT
];

808  
¥aû
 =ğ
¥aû2
;

809 
	}
}

811 
boŞ
 
	$äomS·ûCÚšs
(cÚ¡ *
addr
)

813  
	`isS·ûIÁ”Çl
((
u1
 *)
addr
, 
BLOCK_FROM_SPACE
);

814 
	}
}

816 
boŞ
 
	$toS·ûCÚšs
(cÚ¡ *
addr
)

818  
	`isS·ûIÁ”Çl
((
u1
 *)
addr
, 
BLOCK_TO_SPACE
);

819 
	}
}

825 
	$pšObjeù
(cÚ¡ 
Objeù
 *
obj
)

827 
	`´omÙeBlockByAddr
(
gDvm
.
gcH—p
->
h—pSourû
, 
obj
);

828 
	}
}

830 
size_t
 
	$sumH—pB™m­
(cÚ¡ 
H—pB™m­
 *
b™m­
)

832 
size_t
 
sum
 = 0;

833 
size_t
 
i
 = 0; i < 
b™m­
->
b™sL’
 >> 2; ++i) {

834 
sum
 +ğ
	`CLZ
(
b™m­
->
b™s
[
i
]);

836  
sum
;

837 
	}
}

843 
	$isFÜw¬d
(cÚ¡ *
addr
)

845  (
ušŒ_t
)
addr
 & 0x1;

846 
	}
}

848 
	$£tFÜw¬d
(cÚ¡ *
toObj
, *
äomObj
)

850 *(*)
äomObj
 = (
ušŒ_t
)
toObj
 | 0x1;

851 
	}
}

853 * 
	$g‘FÜw¬d
(cÚ¡ *
äomObj
)

855  (*)((
ušŒ_t
)
äomObj
 & ~0x1);

856 
	}
}

859 
	$isP”mª’tSŒšg
(cÚ¡ 
SŒšgObjeù
 *
obj
) {

860  (
ušŒ_t
)
obj
 & 0x1;

861 
	}
}

863 * 
	$g‘P”mª’tSŒšg
(cÚ¡ 
SŒšgObjeù
 *
obj
)

865  (*)((
ušŒ_t
)
obj
 & ~0x1);

866 
	}
}

879 
	$sÿv’geCÏssObjeù
(
CÏssObjeù
 *
obj
)

881 
	`LOG_SCAV
("sÿv’geCÏssObjeù(obj=%p)", 
obj
);

882 
	`as£¹
(
obj
 !ğ
NULL
);

883 
	`as£¹
(
obj
->obj.
şazz
 !ğ
NULL
);

884 
	`as£¹
(
obj
->obj.
şazz
->
desütÜ
 !ğ
NULL
);

885 
	`as£¹
(!
	`¡rcmp
(
obj
->obj.
şazz
->
desütÜ
, "Ljava/lang/Class;"));

886 
	`as£¹
(
obj
->
desütÜ
 !ğ
NULL
);

887 
	`LOG_SCAV
("scavengeClassObject: descriptor='%s',vtableCount=%zu",

888 
obj
->
desütÜ
, obj->
vbËCouÁ
);

890 
	`sÿv’geD©aObjeù
((
Objeù
 *)
obj
);

892 ià(
	`IS_CLASS_FLAG_SET
(
obj
, 
CLASS_ISARRAY
)) {

893 
	`sÿv’geReã»nû
((
Objeù
 **)(*)&
obj
->
–em’tCÏss
);

896 
	`sÿv’geReã»nû
((
Objeù
 **)(*)&
obj
->
su³r
);

898 
	`sÿv’geReã»nû
(&
obj
->
şassLßd”
);

900 
i
 = 0; i < 
obj
->
sf›ldCouÁ
; ++i) {

901 
ch
 = 
obj
->
sf›lds
[
i
].
f›ld
.
sigÇtu»
[0];

902 ià(
ch
 == '[' || ch == 'L') {

903 
	`sÿv’geReã»nû
((
Objeù
 **)(*)&
obj
->
sf›lds
[
i
].
v®ue
.
l
);

907 
i
 = 0; i < 
obj
->
š‹rçûCouÁ
; ++i) {

908 
	`sÿv’geReã»nû
((
Objeù
 **è&
obj
->
š‹rçûs
[
i
]);

910 
	}
}

915 
size_t
 
	$sÿv’geA¼ayObjeù
(
A¼ayObjeù
 *
¬¿y
)

917 
	`LOG_SCAV
("sÿv’geA¼ayObjeù×¼ay=%p)", 
¬¿y
);

919 
	`as£¹
(
	`toS·ûCÚšs
(
¬¿y
));

920 
	`as£¹
(
¬¿y
 !ğ
NULL
);

921 
	`as£¹
(
¬¿y
->
obj
.
şazz
 !ğ
NULL
);

922 
	`sÿv’geReã»nû
((
Objeù
 **è
¬¿y
);

923 
size_t
 
Ëngth
 = 
	`dvmA¼ayObjeùSize
(
¬¿y
);

925 ià(
	`IS_CLASS_FLAG_SET
(
¬¿y
->
obj
.
şazz
, 
CLASS_ISOBJECTARRAY
)) {

926 
Objeù
 **
cÚ‹Ás
 = (Objeù **)
¬¿y
->contents;

927 
size_t
 
i
 = 0; i < 
¬¿y
->
Ëngth
; ++i) {

928 
	`sÿv’geReã»nû
(&
cÚ‹Ás
[
i
]);

931  
Ëngth
;

932 
	}
}

938 
	$g‘Reã»nûFÏgs
(cÚ¡ 
Objeù
 *
obj
)

940 
æags
;

942 
æags
 = 
CLASS_ISREFERENCE
 |

943 
CLASS_ISWEAKREFERENCE
 |

944 
CLASS_ISPHANTOMREFERENCE
;

945  
	`GET_CLASS_FLAG_GROUP
(
obj
->
şazz
, 
æags
);

946 
	}
}

948 
	$isSoáReã»nû
(cÚ¡ 
Objeù
 *
obj
)

950  
	`g‘Reã»nûFÏgs
(
obj
è=ğ
CLASS_ISREFERENCE
;

951 
	}
}

953 
	$isW—kReã»nû
(cÚ¡ 
Objeù
 *
obj
)

955  
	`g‘Reã»nûFÏgs
(
obj
è& 
CLASS_ISWEAKREFERENCE
;

956 
	}
}

958 #iâdeà
NDEBUG


959 
boŞ
 
	$isPhªtomReã»nû
(cÚ¡ 
Objeù
 *
obj
)

961  
	`g‘Reã»nûFÏgs
(
obj
è& 
CLASS_ISPHANTOMREFERENCE
;

962 
	}
}

969 
boŞ
 
	$isReã»nûEnqueuabË
(cÚ¡ 
Objeù
 *
»f
)

971 
Objeù
 *
queue
, *
queueNext
;

973 
queue
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queue
);

974 
queueNext
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queueNext
);

975 ià(
queue
 =ğ
NULL
 || 
queueNext
 != NULL) {

981  
çl£
;

988  
Œue
;

989 
	}
}

994 
	$’queueReã»nû
(
Objeù
 *
»f
)

996 
	`as£¹
(
»f
 !ğ
NULL
);

997 
	`as£¹
(
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queue
è!ğ
NULL
);

998 
	`as£¹
(
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queueNext
è=ğ
NULL
);

999 ià(!
	`dvmH—pAddRefToL¬geTabË
(&
gDvm
.
gcH—p
->
»ã»nûO³¿tiÚs
, 
»f
)) {

1000 
	`ALOGE
("no„oom for‡ny more„eference operations");

1001 
	`dvmAbÜt
();

1003 
	}
}

1008 
	$ş—rReã»nû
(
Objeù
 *
obj
)

1010 
	`dvmS‘F›ldObjeù
(
obj
, 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
, 
NULL
);

1011 
	}
}

1016 
	$ş—rWh™eReã»nûs
(
Objeù
 **
li¡
)

1018 
size_t
 
»ã»ÁOff£t
, 
queueNextOff£t
;

1019 
boŞ
 
doSigÇl
;

1021 
queueNextOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_queueNext
;

1022 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

1023 
doSigÇl
 = 
çl£
;

1024 *
li¡
 !ğ
NULL
) {

1025 
Objeù
 *
»f
 = *
li¡
;

1026 
JV®ue
 *
f›ld
 = 
	`dvmF›ldPŒ
(
»f
, 
»ã»ÁOff£t
);

1027 
Objeù
 *
»ã»Á
 = 
f›ld
->
l
;

1028 *
li¡
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
queueNextOff£t
);

1029 
	`dvmS‘F›ldObjeù
(
»f
, 
queueNextOff£t
, 
NULL
);

1030 
	`as£¹
(
»ã»Á
 !ğ
NULL
);

1031 ià(
	`isFÜw¬d
(
»ã»Á
->
şazz
)) {

1032 
f›ld
->
l
 = 
»ã»Á
 = 
	`g‘FÜw¬d
Ôeã»Á->
şazz
);

1035 ià(
	`äomS·ûCÚšs
(
»ã»Á
)) {

1037 
	`ş—rReã»nû
(
»f
);

1038 ià(
	`isReã»nûEnqueuabË
(
»f
)) {

1039 
	`’queueReã»nû
(
»f
);

1040 
doSigÇl
 = 
Œue
;

1048 ià(
doSigÇl
) {

1049 
	`dvmSigÇlH—pWÜk”
(
çl£
);

1051 
	`as£¹
(*
li¡
 =ğ
NULL
);

1052 
	}
}

1058 
	$´e£rveSoáReã»nûs
(
Objeù
 **
li¡
)

1060 
Objeù
 *
»f
;

1061 
Objeù
 *
´ev
, *
Ãxt
;

1062 
size_t
 
»ã»ÁOff£t
, 
queueNextOff£t
;

1063 
couÁ”
;

1064 
boŞ
 
wh™e
;

1066 
queueNextOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_queueNext
;

1067 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

1068 
couÁ”
 = 0;

1069 
´ev
 = 
Ãxt
 = 
NULL
;

1070 
»f
 = *
li¡
;

1071 
»f
 !ğ
NULL
) {

1072 
JV®ue
 *
f›ld
 = 
	`dvmF›ldPŒ
(
»f
, 
»ã»ÁOff£t
);

1073 
Objeù
 *
»ã»Á
 = 
f›ld
->
l
;

1074 
Ãxt
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
queueNextOff£t
);

1075 
	`as£¹
(
»ã»Á
 !ğ
NULL
);

1076 ià(
	`isFÜw¬d
(
»ã»Á
->
şazz
)) {

1078 
f›ld
->
l
 = 
»ã»Á
 = 
	`g‘FÜw¬d
Ôeã»Á->
şazz
);

1079 
wh™e
 = 
çl£
;

1081 
wh™e
 = 
	`äomS·ûCÚšs
(
»ã»Á
);

1083 ià(!
wh™e
 && ((++
couÁ”
) & 1)) {

1085 
	`sÿv’geReã»nû
((
Objeù
 **)(*)&
f›ld
->
l
);

1086 
wh™e
 = 
Œue
;

1088 ià(
wh™e
) {

1090 ià(
´ev
 !ğ
NULL
) {

1091 
	`dvmS‘F›ldObjeù
(
»f
, 
queueNextOff£t
, 
NULL
);

1092 
	`dvmS‘F›ldObjeù
(
´ev
, 
queueNextOff£t
, 
Ãxt
);

1096 
´ev
 = 
»f
;

1098 
»f
 = 
Ãxt
;

1104 
	`sÿv’geBlockQueue
();

1105 
	}
}

1107 
	$´oûssFš®izabËReã»nûs
()

1109 
H—pRefTabË
 
ÃwP’dšgRefs
;

1110 
L¬geH—pRefTabË
 *
fšRefs
 = 
gDvm
.
gcH—p
->
fš®izabËRefs
;

1111 
Objeù
 **
»f
;

1112 
Objeù
 **
Ï¡Ref
;

1113 
size_t
 
tÙ®P’dCouÁ
;

1123 ià(!
	`dvmH—pIn™H—pRefTabË
(&
ÃwP’dšgRefs
)) {

1128 
	`LOG_REF
("no„oom for…ending finalizations");

1129 
	`dvmAbÜt
();

1136 
tÙ®P’dCouÁ
 = 0;

1137 
fšRefs
 !ğ
NULL
) {

1138 
Objeù
 **
g­Ref
;

1139 
size_t
 
ÃwP’dCouÁ
 = 0;

1141 
g­Ref
 = 
»f
 = 
fšRefs
->
»fs
.
bË
;

1142 
Ï¡Ref
 = 
fšRefs
->
»fs
.
ÃxtEÁry
;

1143 
»f
 < 
Ï¡Ref
) {

1144 ià(
	`äomS·ûCÚšs
(*
»f
)) {

1145 ià(!
	`dvmH—pAddToH—pRefTabË
(&
ÃwP’dšgRefs
, *
»f
)) {

1148 
	`LOG_REF
("no„oom for‡ny more…ending finalizations: %zd",

1149 
	`dvmH—pNumH—pRefTabËEÁr›s
(&
ÃwP’dšgRefs
));

1150 
	`dvmAbÜt
();

1152 
ÃwP’dCouÁ
++;

1156 ià(
ÃwP’dCouÁ
 > 0) {

1159 *
g­Ref
++ = *
»f
;

1163 
g­Ref
++;

1166 
»f
++;

1168 
fšRefs
->
»fs
.
ÃxtEÁry
 = 
g­Ref
;

1170 
tÙ®P’dCouÁ
 +ğ
ÃwP’dCouÁ
;

1171 
fšRefs
 = fšRefs->
Ãxt
;

1173 
	`LOG_REF
("%zd fš®iz” Œigg”ed.", 
tÙ®P’dCouÁ
);

1174 ià(
tÙ®P’dCouÁ
 == 0) {

1178 
	`dvmCË¬Reã»nûTabË
(&
ÃwP’dšgRefs
);

1184 ià(!
	`dvmH—pAddTabËToL¬geTabË
(&
gDvm
.
gcH—p
->
³ndšgFš®iz©iÚRefs
,

1185 &
ÃwP’dšgRefs
))

1187 
	`LOG_REF
("can't insert‚ew…ending finalizations");

1188 
	`dvmAbÜt
();

1196 
»f
 = 
ÃwP’dšgRefs
.
bË
;

1197 
Ï¡Ref
 = 
ÃwP’dšgRefs
.
ÃxtEÁry
;

1198 
	`as£¹
(
»f
 < 
Ï¡Ref
);

1199 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_FINALIZING
, 0);

1200 
»f
 < 
Ï¡Ref
) {

1201 
	`sÿv’geReã»nû
(
»f
);

1202 
»f
++;

1204 
	`HPROF_CLEAR_GC_SCAN_STATE
();

1205 
	`sÿv’geBlockQueue
();

1206 
	`dvmSigÇlH—pWÜk”
(
çl£
);

1207 
	}
}

1216 
	$sÿv’geReã»nûObjeù
(
Objeù
 *
obj
)

1218 
Objeù
 *
»ã»Á
;

1219 
Objeù
 **
queue
;

1220 
size_t
 
»ã»ÁOff£t
, 
queueNextOff£t
;

1222 
	`as£¹
(
obj
 !ğ
NULL
);

1223 
	`LOG_SCAV
("sÿv’geReã»nûObjeù(obj=%p),'%s'", 
obj
, obj->
şazz
->
desütÜ
);

1224 
	`sÿv’geD©aObjeù
(
obj
);

1225 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

1226 
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
»ã»ÁOff£t
);

1227 ià(
»ã»Á
 =ğ
NULL
 || 
	`toS·ûCÚšs
(referent)) {

1230 ià(
	`isSoáReã»nû
(
obj
)) {

1231 
queue
 = &
gDvm
.
gcH—p
->
soáReã»nûs
;

1232 } ià(
	`isW—kReã»nû
(
obj
)) {

1233 
queue
 = &
gDvm
.
gcH—p
->
w—kReã»nûs
;

1235 
	`as£¹
(
	`isPhªtomReã»nû
(
obj
));

1236 
queue
 = &
gDvm
.
gcH—p
->
phªtomReã»nûs
;

1238 
queueNextOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_queueNext
;

1239 
	`dvmS‘F›ldObjeù
(
obj
, 
queueNextOff£t
, *
queue
);

1240 *
queue
 = 
obj
;

1241 
	`LOG_SCAV
("sÿv’geReã»nûObjeù:ƒnqueuešg %p", 
obj
);

1242 
	}
}

1247 
	$sÿv’geD©aObjeù
(
Objeù
 *
obj
)

1250 
	`as£¹
(
obj
 !ğ
NULL
);

1251 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

1252 
	`as£¹
(
obj
->
şazz
->
objeùSize
 != 0);

1253 
	`as£¹
(
	`toS·ûCÚšs
(
obj
));

1255 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

1256 
	`sÿv’geReã»nû
((
Objeù
 **è
obj
);

1258 ià(
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

1259 
size_t
 
»fOff£ts
 = 
şazz
->refOffsets;

1260 
»fOff£ts
 != 0) {

1261 
size_t
 
rshiá
 = 
	`CLZ
(
»fOff£ts
);

1262 
size_t
 
off£t
 = 
	`CLASS_OFFSET_FROM_CLZ
(
rshiá
);

1263 
Objeù
 **
»f
 = (Objeù **)((
u1
 *)
obj
 + 
off£t
);

1264 
	`sÿv’geReã»nû
(
»f
);

1265 
»fOff£ts
 &ğ~(
CLASS_HIGH_BIT
 >> 
rshiá
);

1268 ; 
şazz
 !ğ
NULL
; cÏzz = cÏzz->
su³r
) {

1269 
In¡F›ld
 *
f›ld
 = 
şazz
->
if›lds
;

1270 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; ++i, ++
f›ld
) {

1271 
size_t
 
off£t
 = 
f›ld
->
by‹Off£t
;

1272 
Objeù
 **
»f
 = (Objeù **)((
u1
 *)
obj
 + 
off£t
);

1273 
	`sÿv’geReã»nû
(
»f
);

1277 
	}
}

1279 
Objeù
 *
	$Œª¥ÜtObjeù
(cÚ¡ 
Objeù
 *
äomObj
)

1281 
Objeù
 *
toObj
;

1282 
size_t
 
®locSize
, 
cİySize
;

1284 
	`LOG_TRAN
("transportObject(fromObj=%p)‡llocBlocks=%zu",

1285 
äomObj
,

1286 
gDvm
.
gcH—p
->
h—pSourû
->
®locBlocks
);

1287 
	`as£¹
(
äomObj
 !ğ
NULL
);

1288 
	`as£¹
(
	`äomS·ûCÚšs
(
äomObj
));

1289 
®locSize
 = 
cİySize
 = 
	`objeùSize
(
äomObj
);

1290 ià(
	`LW_HASH_STATE
(
äomObj
->
lock
è!ğ
LW_HASH_STATE_UNHASHED
) {

1295 
®locSize
 +ğ(
u4
);

1297 ià(
	`LW_HASH_STATE
(
äomObj
->
lock
è=ğ
LW_HASH_STATE_HASHED_AND_MOVED
) {

1302 
cİySize
 +ğ(
u4
);

1305 
	`as£¹
(
cİySize
 <ğ
®locSize
);

1306 
toObj
 = 
	`®loÿ‹G¿y
(
®locSize
);

1307 
	`as£¹
(
toObj
 !ğ
NULL
);

1308 
	`as£¹
(
	`toS·ûCÚšs
(
toObj
));

1309 
	`memıy
(
toObj
, 
äomObj
, 
cİySize
);

1310 ià(
	`LW_HASH_STATE
(
äomObj
->
lock
è=ğ
LW_HASH_STATE_HASHED
) {

1315 *(
u4
 *)(((*)
toObj
è+ 
cİySize
èğ(u4)
äomObj
 >> 3;

1316 
toObj
->
lock
 |ğ
LW_HASH_STATE_HASHED_AND_MOVED
 << 
LW_HASH_STATE_SHIFT
;

1318 
	`LOG_TRAN
("transportObject: from %p/%zuo %p/%zu (%zu,%zu) %s",

1319 
äomObj
, 
	`add»ssToBlock
(
gDvm
.
gcH—p
->
h—pSourû
,fromObj),

1320 
toObj
, 
	`add»ssToBlock
(
gDvm
.
gcH—p
->
h—pSourû
,toObj),

1321 
cİySize
, 
®locSize
, copySize <‡llocSize ? "DIFFERENT" : "");

1322  
toObj
;

1323 
	}
}

1342 
	$sÿv’geReã»nû
(
Objeù
 **
obj
)

1344 
CÏssObjeù
 *
şazz
;

1345 
Objeù
 *
äomObj
, *
toObj
;

1347 
	`as£¹
(
obj
);

1349 ià(*
obj
 =ğ
NULL
) ;

1351 
	`as£¹
(
	`dvmIsV®idObjeù
(*
obj
));

1354 ià(
	`toS·ûCÚšs
(*
obj
)) {

1355 
	`LOG_SCAV
("sÿv’geReã»nû skpšg…šÃd objeù @ %p", *
obj
);

1358 
	`LOG_SCAV
("sÿv’geReã»nû(*obj=%p)", *
obj
);

1360 
	`as£¹
(
	`äomS·ûCÚšs
(*
obj
));

1362 
şazz
 = (*
obj
)->clazz;

1364 ià(
	`isFÜw¬d
(
şazz
)) {

1366 *
obj
 = (
Objeù
 *)
	`g‘FÜw¬d
(
şazz
);

1369 
äomObj
 = *
obj
;

1370 ià(
şazz
 =ğ
NULL
) {

1372 
	`as£¹
(!"implemented");

1373 
toObj
 = 
NULL
;

1375 
toObj
 = 
	`Œª¥ÜtObjeù
(
äomObj
);

1377 
	`£tFÜw¬d
(
toObj
, 
äomObj
);

1378 *
obj
 = (
Objeù
 *)
toObj
;

1379 
	}
}

1384 
	$sÿv’geObjeù
(
Objeù
 *
obj
)

1386 
CÏssObjeù
 *
şazz
;

1388 
	`as£¹
(
obj
 !ğ
NULL
);

1389 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

1390 
	`as£¹
(!((
ušŒ_t
)
obj
->
şazz
 & 0x1));

1391 
şazz
 = 
obj
->clazz;

1392 ià(
	`dvmIsTheCÏssCÏss
(
şazz
)) {

1393 
	`sÿv’geCÏssObjeù
((
CÏssObjeù
 *)
obj
);

1394 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

1395 
	`sÿv’geA¼ayObjeù
((
A¼ayObjeù
 *)
obj
);

1396 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISREFERENCE
)) {

1397 
	`sÿv’geReã»nûObjeù
(
obj
);

1399 
	`sÿv’geD©aObjeù
(
obj
);

1401 
	}
}

1407 
	$pšHashTabËEÁr›s
(
HashTabË
 *
bË
)

1409 
	`LOG_PIN
(">>>…šHashTabËEÁr›sÑabË=%p)", 
bË
);

1410 ià(
bË
 =ğ
NULL
) {

1413 
	`dvmHashTabËLock
(
bË
);

1414 
i
 = 0; i < 
bË
->
bËSize
; ++i) {

1415 
HashEÁry
 *
’Œy
 = &
bË
->
pEÁr›s
[
i
];

1416 *
obj
 = 
’Œy
->
d©a
;

1417 ià(
obj
 =ğ
NULL
 || obj =ğ
HASH_TOMBSTONE
) {

1420 
	`pšObjeù
(
’Œy
->
d©a
);

1422 
	`dvmHashTabËUÆock
(
bË
);

1423 
	`LOG_PIN
("<<<…šHashTabËEÁr›sÑabË=%p)", 
bË
);

1424 
	}
}

1426 
	$pšPrim™iveCÏs£s
()

1428 
size_t
 
Ëngth
 = 
	`ARRAYSIZE
(
gDvm
.
´im™iveCÏss
);

1429 
size_t
 
i
 = 0; i < 
Ëngth
; i++) {

1430 ià(
gDvm
.
´im™iveCÏss
[
i
] !ğ
NULL
) {

1431 
	`pšObjeù
((
Objeù
 *)
gDvm
.
´im™iveCÏss
[
i
]);

1434 
	}
}

1441 
	$sÿv’geIÁ”ÃdSŒšgs
()

1443 
HashTabË
 *
bË
 = 
gDvm
.
š‹ºedSŒšgs
;

1444 ià(
bË
 =ğ
NULL
) {

1447 
	`dvmHashTabËLock
(
bË
);

1448 
i
 = 0; i < 
bË
->
bËSize
; ++i) {

1449 
HashEÁry
 *
’Œy
 = &
bË
->
pEÁr›s
[
i
];

1450 
Objeù
 *
obj
 = (Objeù *)
’Œy
->
d©a
;

1451 ià(
obj
 =ğ
NULL
 || obj =ğ
HASH_TOMBSTONE
) {

1453 } ià(!
	`isP”mª’tSŒšg
((
SŒšgObjeù
 *)
obj
)) {

1455 
	`LOG_SCAV
(">>> sŒšg obj=%p", 
’Œy
->
d©a
);

1457 
	`sÿv’geReã»nû
((
Objeù
 **)(*)&
’Œy
->
d©a
);

1458 
	`LOG_SCAV
("<<< sŒšg obj=%p", 
’Œy
->
d©a
);

1461 
	`dvmHashTabËUÆock
(
bË
);

1462 
	}
}

1464 
	$pšIÁ”ÃdSŒšgs
()

1466 
HashTabË
 *
bË
 = 
gDvm
.
š‹ºedSŒšgs
;

1467 ià(
bË
 =ğ
NULL
) {

1470 
	`dvmHashTabËLock
(
bË
);

1471 
i
 = 0; i < 
bË
->
bËSize
; ++i) {

1472 
HashEÁry
 *
’Œy
 = &
bË
->
pEÁr›s
[
i
];

1473 
Objeù
 *
obj
 = (Objeù *)
’Œy
->
d©a
;

1474 ià(
obj
 =ğ
NULL
 || obj =ğ
HASH_TOMBSTONE
) {

1476 } ià(
	`isP”mª’tSŒšg
((
SŒšgObjeù
 *)
obj
)) {

1477 
obj
 = (
Objeù
 *)
	`g‘P”mª’tSŒšg
((
SŒšgObjeù
*)obj);

1478 
	`LOG_PROM
(">>>…š sŒšg obj=%p", 
obj
);

1479 
	`pšObjeù
(
obj
);

1480 
	`LOG_PROM
("<<<…š sŒšg obj=%p", 
obj
);

1483 
	`dvmHashTabËUÆock
(
bË
);

1484 
	}
}

1491 
	$pšReã»nûTabË
(cÚ¡ 
Reã»nûTabË
 *
bË
)

1493 
	`as£¹
(
bË
 !ğ
NULL
);

1494 
	`as£¹
(
bË
->bË !ğ
NULL
);

1495 
	`as£¹
(
bË
->
ÃxtEÁry
 !ğ
NULL
);

1496 
Objeù
 **
’Œy
 = 
bË
->bË;ƒÁry <abË->
ÃxtEÁry
; ++entry) {

1497 
	`as£¹
(
’Œy
 !ğ
NULL
);

1498 
	`as£¹
(!
	`isFÜw¬d
(*
’Œy
));

1499 
	`pšObjeù
(*
’Œy
);

1501 
	}
}

1503 
	$sÿv’geL¬geH—pRefTabË
(
L¬geH—pRefTabË
 *
bË
)

1505 ; 
bË
 !ğ
NULL
;abË =abË->
Ãxt
) {

1506 
Objeù
 **
»f
 = 
bË
->
»fs
.table;

1507 ; 
»f
 < 
bË
->
»fs
.
ÃxtEÁry
; ++ref) {

1508 
	`sÿv’geReã»nû
(
»f
);

1511 
	}
}

1514 
	$sÿv’geTh»adSck
(
Th»ad
 *
th»ad
)

1516 cÚ¡ 
u4
 *
äamePŒ
;

1517 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1518 
boŞ
 
fœ¡
 = 
Œue
;

1521 
äamePŒ
 = (cÚ¡ 
u4
 *)
th»ad
->
š‹½Save
.
curF¿me
;

1522 
äamePŒ
 !ğ
NULL
) {

1523 cÚ¡ 
SckSaveA»a
 *
§veA»a
;

1524 cÚ¡ 
M‘hod
 *
m‘hod
;

1526 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1527 
m‘hod
 = 
§veA»a
->method;

1528 ià(
m‘hod
 !ğ
NULL
 && !
	`dvmIsN©iveM‘hod
(method)) {

1529 #ifdeà
COUNT_PRECISE_METHODS


1531 ià(
	`dvmPoš‹rS‘AddEÁry
(
gDvm
.
´eci£M‘hods
, 
m‘hod
))

1532 
	`LOG_SCAV
("PGC:‡dded %s.%s %p",

1533 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, method);

1535 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1543 ià(
fœ¡
) {

1574 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
th»ad
->
cu¼’tPc2
) {

1575 
	`ALOGW
("PGC: savedPC(%p) != current PC(%p), %s.%s ins=%p",

1576 
§veA»a
->
xŒa
.
cu¼’tPc
, 
th»ad
->
cu¼’tPc2
,

1577 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, m‘hod->
š¢s
);

1578 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
)

1579 
	`ALOGE
("…øš¡ = 0x%04x", *
§veA»a
->
xŒa
.
cu¼’tPc
);

1580 ià(
th»ad
->
cu¼’tPc2
 !ğ
NULL
)

1581 
	`ALOGE
("…c2 in¡ = 0x%04x", *
th»ad
->
cu¼’tPc2
);

1582 
	`dvmDumpTh»ad
(
th»ad
, 
çl£
);

1598 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
);

1601 cÚ¡ 
Regi¡”M­
* 
pM­
;

1602 cÚ¡ 
u1
* 
»gVeùÜ
;

1604 
M‘hod
* 
nÚCÚ¡M‘hod
 = (M‘hod*è
m‘hod
;

1605 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
nÚCÚ¡M‘hod
);

1609 ià(
pM­
 !ğ
NULL
) {

1611 
addr
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

1612 
»gVeùÜ
 = 
	`dvmRegi¡”M­G‘Lše
(
pM­
, 
addr
);

1631 ià(
gDvm
.
´eci£Gc
) {

1632 
	`LOG_SCAV
("PGC:‚Øm­ fÜ %s.%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1634 
»gVeùÜ
 = 
NULL
;

1636 ià(
»gVeùÜ
 =ğ
NULL
) {

1640 
äamePŒ
 +ğ
m‘hod
->
»gi¡”sSize
;

1650 
u2
 
b™s
 = 1 << 1;

1651 
i
 = 
m‘hod
->
»gi¡”sSize
 - 1; i >= 0; i--) {

1652 
u4
 
rv®
 = *
äamePŒ
;

1654 
b™s
 >>= 1;

1655 ià(
b™s
 == 1) {

1657 
b™s
 = *
»gVeùÜ
++ | 0x0100;

1660 ià(
rv®
 !ğ0 && (
b™s
 & 0x01) != 0) {

1665 #ià
WITH_EXTRA_GC_CHECKS
 > 0

1666 ià((
rv®
 & 0x3è!ğ0 || !
	`dvmIsV®idObjeù
((
Objeù
*)„val)) {

1668 
	`ALOGE
("PGC: invalid„ef in„eg %d: 0x%08x",

1669 
m‘hod
->
»gi¡”sSize
-1 - 
i
, 
rv®
);

1676 
	`sÿv’geReã»nû
((
Objeù
 **è
äamePŒ
);

1682 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1683 ià(
	`dvmIsV®idObjeù
((
Objeù
*è
rv®
)) {

1685 
	`ALOGD
("PGC: ignoring valid„ef in„eg %d: 0x%08x",

1686 
m‘hod
->
»gi¡”sSize
-1 - 
i
, 
rv®
);

1690 ++
äamePŒ
;

1692 
	`dvmR–—£Regi¡”M­Lše
(
pM­
, 
»gVeùÜ
);

1700 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1701 
fœ¡
 = 
çl£
;

1706 
	`as£¹
((
ušŒ_t
)
§veA»a
->
´evF¿me
 > (ušŒ_t)
äamePŒ
 ||

1707 
§veA»a
->
´evF¿me
 =ğ
NULL
);

1708 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

1710 
	}
}

1712 
	$sÿv’geTh»ad
(
Th»ad
 *
th»ad
)

1717 
	`sÿv’geReã»nû
(&
th»ad
->
th»adObj
);

1720 
	`sÿv’geReã»nû
(&
th»ad
->
exû±iÚ
);

1722 
	`sÿv’geTh»adSck
(
th»ad
);

1723 
	}
}

1725 
	$sÿv’geTh»adLi¡
()

1727 
Th»ad
 *
th»ad
;

1729 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1730 
th»ad
 = 
gDvm
.
th»adLi¡
;

1731 
th»ad
) {

1732 
	`sÿv’geTh»ad
(
th»ad
);

1733 
th»ad
 =h»ad->
Ãxt
;

1735 
	`dvmUÆockTh»adLi¡
();

1736 
	}
}

1738 
	$pšTh»adSck
(cÚ¡ 
Th»ad
 *
th»ad
)

1740 cÚ¡ 
u4
 *
äamePŒ
;

1741 cÚ¡ 
SckSaveA»a
 *
§veA»a
;

1742 
M‘hod
 *
m‘hod
;

1743 cÚ¡ *
shÜty
;

1744 
Objeù
 *
obj
;

1746 
§veA»a
 = 
NULL
;

1747 
äamePŒ
 = (cÚ¡ 
u4
 *)
th»ad
->
š‹½Save
.
curF¿me
;

1748 ; 
äamePŒ
 !ğ
NULL
; f¿mePŒ = 
§veA»a
->
´evF¿me
) {

1749 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1750 
m‘hod
 = (
M‘hod
 *)
§veA»a
->method;

1751 ià(
m‘hod
 !ğ
NULL
 && 
	`dvmIsN©iveM‘hod
(method)) {

1766 
	`LOG_PIN
("+++‚ative scan %s.%s",

1767 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1768 
	`as£¹
(
m‘hod
->
»gi¡”sSize
 =ğm‘hod->
šsSize
);

1769 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

1771 
obj
 = (
Objeù
 *)*
äamePŒ
++;

1772 ià(
obj
 =ğ
NULL
) {

1781 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

1782 
	`pšObjeù
(
obj
);

1785 
shÜty
 = 
m‘hod
->shorty+1;

1786 
i
 = 
m‘hod
->
»gi¡”sSize
 - 1; i >ğ0; i--, 
äamePŒ
++) {

1787 *
shÜty
++) {

1789 
obj
 = (
Objeù
 *)*
äamePŒ
;

1790 ià(
obj
 !ğ
NULL
) {

1791 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

1792 
	`pšObjeù
(
obj
);

1797 
äamePŒ
++;

1801 
obj
 = (
Objeù
 *)*
äamePŒ
;

1802 ià(
	`dvmIsV®idObjeù
(
obj
)) {

1804 
	`LOG_PIN
("+++ did NOT…š obj %p", 
obj
);

1809 } ià(
m‘hod
 !ğ
NULL
 && !
	`dvmIsN©iveM‘hod
(method)) {

1810 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
m‘hod
);

1811 cÚ¡ 
u1
* 
»gVeùÜ
 = 
NULL
;

1813 
	`ALOGI
("cÚ£rv©iv: %s.%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1815 ià(
pM­
 !ğ
NULL
) {

1816 
addr
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

1817 
»gVeùÜ
 = 
	`dvmRegi¡”M­G‘Lše
(
pM­
, 
addr
);

1819 ià(
»gVeùÜ
 =ğ
NULL
) {

1823 
i
 = 0; i < 
m‘hod
->
»gi¡”sSize
; ++i) {

1824 
u4
 
»gV®ue
 = 
äamePŒ
[
i
];

1825 ià(
»gV®ue
 !ğ0 && (»gV®u& 0x3è=ğ0 && 
	`dvmIsV®idObjeù
((
Objeù
 *)regValue)) {

1826 
	`pšObjeù
((
Objeù
 *)
»gV®ue
);

1834 
	`as£¹
((
ušŒ_t
)
§veA»a
->
´evF¿me
 > (ušŒ_t)
äamePŒ
 ||

1835 
§veA»a
->
´evF¿me
 =ğ
NULL
);

1837 
	}
}

1839 
	$pšTh»ad
(cÚ¡ 
Th»ad
 *
th»ad
)

1841 
	`as£¹
(
th»ad
 !ğ
NULL
);

1842 
	`LOG_PIN
("pšTh»adÑh»ad=%p)", 
th»ad
);

1844 
	`LOG_PIN
("Pin‚ative method‡rguments");

1845 
	`pšTh»adSck
(
th»ad
);

1847 
	`LOG_PIN
("Pin internalLocalRefTable");

1848 
	`pšReã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
);

1850 
	`LOG_PIN
("Pin jniLocalRefTable");

1851 
	`pšReã»nûTabË
(&
th»ad
->
jniLoÿlRefTabË
);

1854 ià(
th»ad
->
jniMÚ™ÜRefTabË
.
bË
) {

1855 
	`LOG_PIN
("Pin jniMonitorRefTable");

1856 
	`pšReã»nûTabË
(&
th»ad
->
jniMÚ™ÜRefTabË
);

1858 
	}
}

1860 
	$pšTh»adLi¡
()

1862 
Th»ad
 *
th»ad
;

1864 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1865 
th»ad
 = 
gDvm
.
th»adLi¡
;

1866 
th»ad
) {

1867 
	`pšTh»ad
(
th»ad
);

1868 
th»ad
 =h»ad->
Ãxt
;

1870 
	`dvmUÆockTh»adLi¡
();

1871 
	}
}

1882 
	$sÿv’geBlock
(
H—pSourû
 *
h—pSourû
, 
size_t
 
block
)

1884 
u1
 *
cursÜ
;

1885 
u1
 *
’d
;

1886 
size_t
 
size
;

1888 
	`LOG_SCAV
("sÿv’geBlock(h—pSourû=%p,block=%zu)", 
h—pSourû
, 
block
);

1890 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

1891 
	`as£¹
(
block
 < 
h—pSourû
->
tÙ®Blocks
);

1892 
	`as£¹
(
h—pSourû
->
blockS·û
[
block
] =ğ
BLOCK_TO_SPACE
);

1894 
cursÜ
 = 
	`blockToAdd»ss
(
h—pSourû
, 
block
);

1895 
’d
 = 
cursÜ
 + 
BLOCK_SIZE
;

1896 
	`LOG_SCAV
("sÿv’geBlock s¹=%p,ƒnd=%p", 
cursÜ
, 
’d
);

1899 
size
 = 0;

1900 
cursÜ
 < 
’d
) {

1901 
u4
 
wÜd
 = *(u4 *)
cursÜ
;

1902 ià(
wÜd
 != 0) {

1903 
	`sÿv’geObjeù
((
Objeù
 *)
cursÜ
);

1904 
size
 = 
	`objeùSize
((
Objeù
 *)
cursÜ
);

1905 
size
 = 
	`®ignUp
(size, 
ALLOC_ALIGNMENT
);

1906 
cursÜ
 +ğ
size
;

1909 *(
u4
 *)
cursÜ
 == 0) {

1910 
cursÜ
 += 4;

1911 ià(
cursÜ
 =ğ
’d
) ;

1914 
	`as£¹
(
cursÜ
 =ğ
’d
);

1917 
	}
}

1919 
size_t
 
	$objeùSize
(cÚ¡ 
Objeù
 *
obj
)

1921 
size_t
 
size
;

1923 
	`as£¹
(
obj
 !ğ
NULL
);

1924 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

1925 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

1926 
size
 = 
	`dvmCÏssObjeùSize
((
CÏssObjeù
 *)
obj
);

1927 } ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISARRAY
)) {

1928 
size
 = 
	`dvmA¼ayObjeùSize
((
A¼ayObjeù
 *)
obj
);

1930 
	`as£¹
(
obj
->
şazz
->
objeùSize
 != 0);

1931 
size
 = 
obj
->
şazz
->
objeùSize
;

1933 ià(
	`LW_HASH_STATE
(
obj
->
lock
è=ğ
LW_HASH_STATE_HASHED_AND_MOVED
) {

1934 
size
 +ğ(
u4
);

1936  
size
;

1937 
	}
}

1939 
	$v”ifyBlock
(
H—pSourû
 *
h—pSourû
, 
size_t
 
block
)

1941 
u1
 *
cursÜ
;

1942 
u1
 *
’d
;

1943 
size_t
 
size
;

1947 
	`as£¹
(
h—pSourû
 !ğ
NULL
);

1948 
	`as£¹
(
block
 < 
h—pSourû
->
tÙ®Blocks
);

1949 
	`as£¹
(
h—pSourû
->
blockS·û
[
block
] =ğ
BLOCK_TO_SPACE
);

1951 
cursÜ
 = 
	`blockToAdd»ss
(
h—pSourû
, 
block
);

1952 
’d
 = 
cursÜ
 + 
BLOCK_SIZE
;

1956 
size
 = 0;

1957 
cursÜ
 < 
’d
) {

1958 
u4
 
wÜd
 = *(u4 *)
cursÜ
;

1959 ià(
wÜd
 != 0) {

1960 
	`dvmV”ifyObjeù
((
Objeù
 *)
cursÜ
);

1961 
size
 = 
	`objeùSize
((
Objeù
 *)
cursÜ
);

1962 
size
 = 
	`®ignUp
(size, 
ALLOC_ALIGNMENT
);

1963 
cursÜ
 +ğ
size
;

1966 *(*)
cursÜ
 == 0) {

1967 
cursÜ
 += 4;

1968 ià(
cursÜ
 =ğ
’d
) ;

1971 
	`as£¹
(
cursÜ
 =ğ
’d
);

1974 
	}
}

1976 
	$desüibeBlockQueue
(cÚ¡ 
H—pSourû
 *
h—pSourû
)

1978 
size_t
 
block
, 
couÁ
;

1979 
¥aû
;

1981 
block
 = 
h—pSourû
->
queueH—d
;

1982 
couÁ
 = 0;

1983 
	`LOG_SCAV
(">>> desüibeBlockQueue(h—pSourû=%p)", 
h—pSourû
);

1985 
block
 !ğ
QUEUE_TAIL
) {

1986 
block
 = 
h—pSourû
->
blockQueue
[block];

1987 ++
couÁ
;

1989 
	`LOG_SCAV
("blockQueue %zuƒlements,ƒnqueued %zu",

1990 
couÁ
, 
h—pSourû
->
queueSize
);

1991 
block
 = 
h—pSourû
->
queueH—d
;

1992 
block
 !ğ
QUEUE_TAIL
) {

1993 
¥aû
 = 
h—pSourû
->
blockS·û
[
block
];

1994 
	`LOG_SCAV
("block=%zu@%p,¥aû=%zu", 
block
, 
	`blockToAdd»ss
(
h—pSourû
,block), 
¥aû
);

1995 
block
 = 
h—pSourû
->
blockQueue
[block];

1998 
	`LOG_SCAV
("<<< desüibeBlockQueue(h—pSourû=%p)", 
h—pSourû
);

1999 
	}
}

2004 
	$sÿv’geBlockQueue
()

2006 
H—pSourû
 *
h—pSourû
;

2007 
size_t
 
block
;

2009 
	`LOG_SCAV
(">>> scavengeBlockQueue()");

2010 
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

2011 
	`desüibeBlockQueue
(
h—pSourû
);

2012 
h—pSourû
->
queueH—d
 !ğ
QUEUE_TAIL
) {

2013 
block
 = 
h—pSourû
->
queueH—d
;

2014 
	`LOG_SCAV
("Dequeuešg block %zu", 
block
);

2015 
	`sÿv’geBlock
(
h—pSourû
, 
block
);

2016 
h—pSourû
->
queueH—d
 = h—pSourû->
blockQueue
[
block
];

2017 
	`LOG_SCAV
("New queuh—d i %zu", 
h—pSourû
->
queueH—d
);

2019 
	`LOG_SCAV
("<<< scavengeBlockQueue()");

2020 
	}
}

2027 
	$v”ifyNewS·û
()

2029 
H—pSourû
 *
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

2030 
size_t
 
c0
 = 0, 
c1
 = 0, 
c2
 = 0, 
c7
 = 0;

2031 
size_t
 
i
 = 0; i < 
h—pSourû
->
tÙ®Blocks
; ++i) {

2032 
h—pSourû
->
blockS·û
[
i
]) {

2033 
BLOCK_FREE
: ++
c0
; ;

2034 
BLOCK_TO_SPACE
: ++
c1
; ;

2035 
BLOCK_FROM_SPACE
: ++
c2
; ;

2036 
BLOCK_CONTINUED
: ++
c7
; ;

2037 : 
	`as£¹
(!"reached");

2040 
	`LOG_VER
("Block Demographics: "

2042 
c0
, 
c1
, 
c2
, 
c7
);

2043 
size_t
 
i
 = 0; i < 
h—pSourû
->
tÙ®Blocks
; ++i) {

2044 ià(
h—pSourû
->
blockS·û
[
i
] !ğ
BLOCK_TO_SPACE
) {

2047 
	`v”ifyBlock
(
h—pSourû
, 
i
);

2049 
	}
}

2051 
	$desüibeH—p
()

2053 
H—pSourû
 *
h—pSourû
 = 
gDvm
.
gcH—p
->heapSource;

2054 
	`desüibeBlocks
(
h—pSourû
);

2055 
	}
}

2065 
	$dvmSÿv’geRoÙs
()

2067 
GcH—p
 *
gcH—p
;

2070 
size_t
 
®loc
, 
unu£d
, 
tÙ®
;

2072 
	`room
(&
®loc
, &
unu£d
, &
tÙ®
);

2073 
	`LOG_SCAV
("BEFORE GC: %zu‡lloc, %zu free, %zuotal.",

2074 
®loc
, 
unu£d
, 
tÙ®
);

2077 
gcH—p
 = 
gDvm
.gcHeap;

2078 
	`dvmH—pSourûFl
();

2083 
	`pšTh»adLi¡
();

2084 
	`pšReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
);

2085 
	`pšReã»nûTabË
(&
gDvm
.
jniPšRefTabË
);

2086 
	`pšHashTabËEÁr›s
(
gDvm
.
lßdedCÏs£s
);

2087 
	`pšHashTabËEÁr›s
(
gDvm
.
dbgRegi¡ry
);

2088 
	`pšPrim™iveCÏs£s
();

2089 
	`pšIÁ”ÃdSŒšgs
();

2098 
gDvm
.
gcH—p
->
h—pSourû
->
®locPŒ
 = 
	`®loÿ‹Blocks
(gDvm.gcHeap->heapSource, 1);

2099 
gDvm
.
gcH—p
->
h—pSourû
->
®locLim™
 = gDvm.gcH—p->h—pSourû->
®locPŒ
 + 
BLOCK_SIZE
;

2106 
	`´omÙeBlockByAddr
(
gDvm
.
gcH—p
->
h—pSourû
, gDvm.gcH—p->h—pSourû->
®locPŒ
);

2112 
	`LOG_SCAV
("Scavenging gDvm.threadList");

2113 
	`sÿv’geTh»adLi¡
();

2115 
	`LOG_SCAV
("Scavenging gDvm.gcHeap->referenceOperations");

2116 
	`sÿv’geL¬geH—pRefTabË
(
gcH—p
->
»ã»nûO³¿tiÚs
);

2118 
	`LOG_SCAV
("Scavenging gDvm.gcHeap->pendingFinalizationRefs");

2119 
	`sÿv’geL¬geH—pRefTabË
(
gcH—p
->
³ndšgFš®iz©iÚRefs
);

2121 
	`LOG_SCAV
("Scavenging„andom global stuff");

2122 
	`sÿv’geReã»nû
(&
gDvm
.
outOfMemÜyObj
);

2123 
	`sÿv’geReã»nû
(&
gDvm
.
š‹º®E¼ÜObj
);

2124 
	`sÿv’geReã»nû
(&
gDvm
.
noCÏssDefFoundE¼ÜObj
);

2127 
	`sÿv’geIÁ”ÃdSŒšgs
();

2129 
	`LOG_SCAV
("Root scavenge has completed.");

2131 
	`sÿv’geBlockQueue
();

2136 
	`LOG_SCAV
("New space scavenge has completed.");

2142 
	`LOG_REF
("Processing soft„eferences...");

2143 
	`´e£rveSoáReã»nûs
(&
gDvm
.
gcH—p
->
soáReã»nûs
);

2144 
	`ş—rWh™eReã»nûs
(&
gDvm
.
gcH—p
->
soáReã»nûs
);

2146 
	`LOG_REF
("Processing weak„eferences...");

2147 
	`ş—rWh™eReã»nûs
(&
gDvm
.
gcH—p
->
w—kReã»nûs
);

2149 
	`LOG_REF
("Finding finalizations...");

2150 
	`´oûssFš®izabËReã»nûs
();

2152 
	`LOG_REF
("Processing f-reachable soft„eferences...");

2153 
	`ş—rWh™eReã»nûs
(&
gDvm
.
gcH—p
->
soáReã»nûs
);

2155 
	`LOG_REF
("Processing f-reachable weak„eferences...");

2156 
	`ş—rWh™eReã»nûs
(&
gDvm
.
gcH—p
->
w—kReã»nûs
);

2158 
	`LOG_REF
("Processing…hantom„eferences...");

2159 
	`ş—rWh™eReã»nûs
(&
gDvm
.
gcH—p
->
phªtomReã»nûs
);

2164 
	`dvmV”ifyRoÙs
();

2165 
	`v”ifyNewS·û
();

2169 
	`ş—rFromS·û
(
gcH—p
->
h—pSourû
);

2172 
size_t
 
®loc
, 
»m
, 
tÙ®
;

2174 
	`room
(&
®loc
, &
»m
, &
tÙ®
);

2175 
	`LOG_SCAV
("AFTER GC: %zu‡Îoc, %zu f»e, %zuÙ®.", 
®loc
, 
»m
, 
tÙ®
);

2177 
	}
}

2183 
	$dvmCË¬Wh™eRefs
(
Objeù
 **
li¡
)

2186 
	`as£¹
(*
li¡
 =ğ
NULL
);

2187 
	}
}

2189 
	$dvmHªdËSoáRefs
(
Objeù
 **
li¡
)

2192 
	`as£¹
(*
li¡
 =ğ
NULL
);

2193 
	}
}

2195 
boŞ
 
	$dvmH—pBegšM¬kS‹p
(
GcMode
 
mode
)

2198  
Œue
;

2199 
	}
}

2201 
	$dvmH—pFšishM¬kS‹p
()

2204 
	}
}

2206 
	$dvmH—pM¬kRoÙS‘
()

2209 
	}
}

2211 
	$dvmH—pSÿnM¬kedObjeùs
()

2213 
	`dvmSÿv’geRoÙs
();

2214 
	}
}

2216 
	$dvmH—pScheduËFš®iz©iÚs
()

2219 
	}
}

2221 
	$dvmH—pSw“pUnm¬kedObjeùs
(
GcMode
 
mode
, *
numF»ed
, 
size_t
 *
sizeF»ed
)

2223 *
numF»ed
 = 0;

2224 *
sizeF»ed
 = 0;

2226 
	}
}

2228 
	$dvmM¬kDœtyObjeùs
()

2230 
	`as£¹
(!"implemented");

2231 
	}
}

2233 
	$dvmH—pSourûTh»adShutdown
()

2236 
	}
}

	@vm/alloc/DdmHeap.cpp

19 
	~<sys/time.h
>

20 
	~<time.h
>

22 
	~"D®vik.h
"

23 
	~"®loc/H—p.h
"

24 
	~"®loc/H—pIÁ”Çl.h
"

25 
	~"®loc/DdmH—p.h
"

26 
	~"®loc/H—pSourû.h
"

28 
	#DEFAULT_HEAP_ID
 1

	)

30 
	eHpifWh’
 {

31 
	mHPIF_WHEN_NEVER
 = 0,

32 
	mHPIF_WHEN_NOW
 = 1,

33 
	mHPIF_WHEN_NEXT_GC
 = 2,

34 
	mHPIF_WHEN_EVERY_GC
 = 3

54 
	#HPIF_SIZE
(
numH—ps
) \

55 ((
u4
è+ (
numH—ps
è* (5 * (u4è+ (
u1
è+ (
u8
)))

	)

56 
	$dvmDdmS’dH—pInfo
(
»asÚ
, 
boŞ
 
shouldLock
)

58 
timev®
 
now
;

59 
u8
 
nowMs
;

60 
u1
 *
buf
, *
b
;

62 
buf
 = (
u1
 *)
	`m®loc
(
	`HPIF_SIZE
(1));

63 ià(
buf
 =ğ
NULL
) {

66 
b
 = 
buf
;

70 ià(
»asÚ
 =ğ
gDvm
.
gcH—p
->
ddmHpifWh’
) {

71 ià(
shouldLock
 && ! 
	`dvmLockH—p
()) {

72 
	`ALOGW
("%s(): cª'ˆlock h—°tØş—¸wh’", 
__func__
);

73 
sk_wh’
;

75 ià(
»asÚ
 =ğ
gDvm
.
gcH—p
->
ddmHpifWh’
) {

76 ià(
gDvm
.
gcH—p
->
ddmHpifWh’
 =ğ
HPIF_WHEN_NEXT_GC
) {

77 
gDvm
.
gcH—p
->
ddmHpifWh’
 = 
HPIF_WHEN_NEVER
;

80 ià(
shouldLock
) {

81 
	`dvmUÆockH—p
();

84 
sk_wh’
:

88 ià(
	`g‘timeofday
(&
now
, 
NULL
) < 0) {

89 
nowMs
 = 0;

91 
nowMs
 = (
u8
)
now
.
tv_£c
 * 1000 +‚ow.
tv_u£c
 / 1000;

95 
	`£t4BE
(
b
, 1); b += 4;

100 
	`£t4BE
(
b
, 
DEFAULT_HEAP_ID
); b += 4;

103 
	`£t8BE
(
b
, 
nowMs
); b += 8;

106 *
b
++ = (
u1
)
»asÚ
;

109 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘MaximumSize
()); b += 4;

112 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0)); b += 4;

115 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0)); b += 4;

118 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_OBJECTS_ALLOCATED
, 
NULL
, 0)); b += 4;

120 
	`as£¹
((
šŒ_t
)
b
 =ğ(šŒ_t)
buf
 + (šŒ_t)
	`HPIF_SIZE
(1));

122 
	`dvmDbgDdmS’dChunk
(
	`CHUNK_TYPE
("HPIF"), 
b
 - 
buf
, buf);

123 
	}
}

125 
boŞ
 
	$dvmDdmHªdËHpifChunk
(
wh’
)

127 
wh’
) {

128 
HPIF_WHEN_NOW
:

129 
	`dvmDdmS’dH—pInfo
(
wh’
, 
Œue
);

131 
HPIF_WHEN_NEVER
:

132 
HPIF_WHEN_NEXT_GC
:

133 
HPIF_WHEN_EVERY_GC
:

134 ià(
	`dvmLockH—p
()) {

135 
gDvm
.
gcH—p
->
ddmHpifWh’
 = 
wh’
;

136 
	`dvmUÆockH—p
();

138 
	`ALOGI
("%s(): cª'ˆlock h—°tØ£ˆwh’", 
__func__
);

139  
çl£
;

143 
	`ALOGI
("%s(): bad wh’ v®u0x%08x", 
__func__
, 
wh’
);

144  
çl£
;

147  
Œue
;

148 
	}
}

150 
	eHpsgSŞid™y
 {

151 
	mSOLIDITY_FREE
 = 0,

152 
	mSOLIDITY_HARD
 = 1,

153 
	mSOLIDITY_SOFT
 = 2,

154 
	mSOLIDITY_WEAK
 = 3,

155 
	mSOLIDITY_PHANTOM
 = 4,

156 
	mSOLIDITY_FINALIZABLE
 = 5,

157 
	mSOLIDITY_SWEEP
 = 6,

160 
	eHpsgKšd
 {

161 
	mKIND_OBJECT
 = 0,

162 
	mKIND_CLASS_OBJECT
 = 1,

163 
	mKIND_ARRAY_1
 = 2,

164 
	mKIND_ARRAY_2
 = 3,

165 
	mKIND_ARRAY_4
 = 4,

166 
	mKIND_ARRAY_8
 = 5,

167 
	mKIND_UNKNOWN
 = 6,

168 
	mKIND_NATIVE
 = 7,

171 
	#HPSG_PARTIAL
 (1<<7)

	)

172 
	#HPSG_STATE
(
sŞid™y
, 
kšd
) \

173 ((
u1
)((((
kšd
è& 0x7è<< 3è| ((
sŞid™y
è& 0x7)))

	)

175 
	sH—pChunkCÚ‹xt
 {

176 
u1
 *
	mbuf
;

177 
u1
 *
	mp
;

178 
u1
 *
	mp›ûL’F›ld
;

179 
size_t
 
	mbufL’
;

180 
size_t
 
	mtÙ®AÎoÿtiÚUn™s
;

181 
	mty³
;

182 
boŞ
 
	mm”ge
;

183 
boŞ
 
	mÃedH—d”
;

186 
	#ALLOCATION_UNIT_SIZE
 8

	)

188 
	$æush_hpsg_chunk
(
H—pChunkCÚ‹xt
 *
ùx
)

192 
	`as£¹
(
ùx
->
buf
 <ğùx->
p›ûL’F›ld
 &&

193 
ùx
->
p›ûL’F›ld
 <ğùx->
p
);

194 
	`£t4BE
(
ùx
->
p›ûL’F›ld
, ctx->
tÙ®AÎoÿtiÚUn™s
);

198 
	`dvmDbgDdmS’dChunk
(
ùx
->
ty³
, ctx->
p
 - ctx->
buf
, ctx->buf);

202 
ùx
->
p
 = ctx->
buf
;

203 
ùx
->
tÙ®AÎoÿtiÚUn™s
 = 0;

204 
ùx
->
ÃedH—d”
 = 
Œue
;

205 
ùx
->
p›ûL’F›ld
 = 
NULL
;

206 
	}
}

208 
	$h—p_chunk_ÿÎback
(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

209 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
, *
¬g
)

211 
H—pChunkCÚ‹xt
 *
ùx
 = (H—pChunkCÚ‹xˆ*)
¬g
;

212 
u1
 
¡©e
;

214 
	`UNUSED_PARAMETER
(
u£¾’
);

216 
	`as£¹
((
chunkËn
 & (
ALLOCATION_UNIT_SIZE
-1)) == 0);

223 
size_t
 
Ãeded
 = (((
chunkËn
/
ALLOCATION_UNIT_SIZE
 + 255) / 256) * 2);

224 
size_t
 
by‹sLeá
 = 
ùx
->
bufL’
 - (size_t)(ùx->
p
 - ctx->
buf
);

225 ià(
by‹sLeá
 < 
Ãeded
) {

226 
	`æush_hpsg_chunk
(
ùx
);

229 
by‹sLeá
 = 
ùx
->
bufL’
 - (
size_t
)(ùx->
p
 - ctx->
buf
);

230 ià(
by‹sLeá
 < 
Ãeded
) {

231 
	`ALOGW
("chunk isoo bigoransmit (chunklen=%zd, %zd bytes)",

232 
chunkËn
, 
Ãeded
);

238 ià(
ùx
->
ÃedH—d”
) {

244 
	`£t4BE
(
ùx
->
p
, 
DEFAULT_HEAP_ID
); ctx->p += 4;

247 *
ùx
->
p
++ = 8;

250 
	`£t4BE
(
ùx
->
p
, (
ušŒ_t
)
chunk±r
); ctx->p += 4;

253 
	`£t4BE
(
ùx
->
p
, 0); ctx->p += 4;

259 
ùx
->
p›ûL’F›ld
 = ctx->
p
;

260 
	`£t4BE
(
ùx
->
p
, 0x55555555); ctx->p += 4;

262 
ùx
->
ÃedH—d”
 = 
çl£
;

267 ià(
u£½Œ
 =ğ
NULL
) {

270 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_FREE
, 0);

272 cÚ¡ 
Objeù
 *
obj
 = (cÚ¡ Objeù *)
u£½Œ
;

276 
boŞ
 
Çtive
 = 
ùx
->
ty³
 =ğ
	`CHUNK_TYPE
("NHSG");

282 ià(!
Çtive
 && 
	`dvmIsV®idObjeù
(
obj
)) {

283 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

284 ià(
şazz
 =ğ
NULL
) {

288 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_OBJECT
);

289 } ià(
	`dvmIsTheCÏssCÏss
(
şazz
)) {

290 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_CLASS_OBJECT
);

291 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

292 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOBJECTARRAY
)) {

293 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_4
);

295 
şazz
->
–em’tCÏss
->
´im™iveTy³
) {

296 
PRIM_BOOLEAN
:

297 
PRIM_BYTE
:

298 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_1
);

300 
PRIM_CHAR
:

301 
PRIM_SHORT
:

302 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_2
);

304 
PRIM_INT
:

305 
PRIM_FLOAT
:

306 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_4
);

308 
PRIM_DOUBLE
:

309 
PRIM_LONG
:

310 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_8
);

313 
	`as£¹
(!"Unknown GC heap objectype");

314 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_UNKNOWN
);

319 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_OBJECT
);

322 
obj
 = 
NULL
;

323 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_NATIVE
);

329 
chunkËn
 /ğ
ALLOCATION_UNIT_SIZE
;

330 
ùx
->
tÙ®AÎoÿtiÚUn™s
 +ğ
chunkËn
;

331 
chunkËn
 > 256) {

332 *
ùx
->
p
++ = 
¡©e
 | 
HPSG_PARTIAL
;

333 *
ùx
->
p
++ = 255;

334 
chunkËn
 -= 256;

336 *
ùx
->
p
++ = 
¡©e
;

337 *
ùx
->
p
++ = 
chunkËn
 - 1;

338 
	}
}

340 
	eHpsgWh’
 {

341 
	mHPSG_WHEN_NEVER
 = 0,

342 
	mHPSG_WHEN_EVERY_GC
 = 1,

344 
	eHpsgWh©
 {

345 
	mHPSG_WHAT_MERGED_OBJECTS
 = 0,

346 
	mHPSG_WHAT_DISTINCT_OBJECTS
 = 1,

354 
	#HPSx_CHUNK_SIZE
 (16384 - 16)

	)

356 "C" 
dlm®loc_w®k_h—p
((*)(cÚ¡ *, 
size_t
, const *, size_t, *),*);

358 
	$w®kH—p
(
boŞ
 
m”ge
, boŞ 
Çtive
)

360 
H—pChunkCÚ‹xt
 
ùx
;

362 
	`mem£t
(&
ùx
, 0, (ctx));

363 
ùx
.
bufL’
 = 
HPSx_CHUNK_SIZE
;

364 
ùx
.
buf
 = (
u1
 *)
	`m®loc
(ùx.
bufL’
);

365 ià(
ùx
.
buf
 =ğ
NULL
) {

369 
ùx
.
m”ge
 = merge;

370 ià(
Çtive
) {

371 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("NHSG");

373 ià(
ùx
.
m”ge
) {

374 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("HPSG");

376 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("HPSO");

380 
ùx
.
p
 = ctx.
buf
;

381 
ùx
.
ÃedH—d”
 = 
Œue
;

382 ià(
Çtive
) {

383 
	`dlm®loc_w®k_h—p
(
h—p_chunk_ÿÎback
, (*)&
ùx
);

385 
	`dvmH—pSourûW®k
(
h—p_chunk_ÿÎback
, (*)&
ùx
);

387 ià(
ùx
.
p
 > ctx.
buf
) {

388 
	`æush_hpsg_chunk
(&
ùx
);

391 
	`ä“
(
ùx
.
buf
);

392 
	}
}

394 
	$dvmDdmS’dH—pSegm’ts
(
boŞ
 
shouldLock
, boŞ 
Çtive
)

396 
u1
 
h—pId
[(
u4
)];

397 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

398 
wh’
, 
wh©
;

399 
boŞ
 
m”ge
;

403 ià(!
Çtive
) {

404 
wh’
 = 
gcH—p
->
ddmHpsgWh’
;

405 
wh©
 = 
gcH—p
->
ddmHpsgWh©
;

406 ià(
wh’
 =ğ
HPSG_WHEN_NEVER
) {

410 
wh’
 = 
gcH—p
->
ddmNhsgWh’
;

411 
wh©
 = 
gcH—p
->
ddmNhsgWh©
;

412 ià(
wh’
 =ğ
HPSG_WHEN_NEVER
) {

416 ià(
shouldLock
 && !
	`dvmLockH—p
()) {

417 
	`ALOGW
("Can't†ock heap for DDM HPSx dump");

423 ià(
wh©
 =ğ
HPSG_WHAT_MERGED_OBJECTS
) {

424 
m”ge
 = 
Œue
;

425 } ià(
wh©
 =ğ
HPSG_WHAT_DISTINCT_OBJECTS
) {

426 
m”ge
 = 
çl£
;

428 
	`as£¹
(!"bad HPSG.what value");

434 
	`£t4BE
(
h—pId
, 
DEFAULT_HEAP_ID
);

435 
	`dvmDbgDdmS’dChunk
(
Çtive
 ? 
	`CHUNK_TYPE
("NHST") : CHUNK_TYPE("HPST"),

436 (
u4
), 
h—pId
);

440 
	`w®kH—p
(
m”ge
, 
Çtive
);

444 
	`dvmDbgDdmS’dChunk
(
Çtive
 ? 
	`CHUNK_TYPE
("NHEN") : CHUNK_TYPE("HPEN"),

445 (
u4
), 
h—pId
);

447 ià(
shouldLock
) {

448 
	`dvmUÆockH—p
();

450 
	}
}

452 
boŞ
 
	$dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, 
boŞ
 
Çtive
)

454 
	`ALOGI
("dvmDdmHªdËHpsgChunk(wh’ %d, wh© %d, h—°%d)", 
wh’
, 
wh©
,

455 
Çtive
);

456 
wh’
) {

457 
HPSG_WHEN_NEVER
:

458 
HPSG_WHEN_EVERY_GC
:

461 
	`ALOGI
("%s(): bad wh’ v®u0x%08x", 
__func__
, 
wh’
);

462  
çl£
;

465 
wh©
) {

466 
HPSG_WHAT_MERGED_OBJECTS
:

467 
HPSG_WHAT_DISTINCT_OBJECTS
:

470 
	`ALOGI
("%s(): bad wh© v®u0x%08x", 
__func__
, 
wh©
);

471  
çl£
;

474 ià(
	`dvmLockH—p
()) {

475 ià(!
Çtive
) {

476 
gDvm
.
gcH—p
->
ddmHpsgWh’
 = 
wh’
;

477 
gDvm
.
gcH—p
->
ddmHpsgWh©
 = 
wh©
;

479 
gDvm
.
gcH—p
->
ddmNhsgWh’
 = 
wh’
;

480 
gDvm
.
gcH—p
->
ddmNhsgWh©
 = 
wh©
;

483 
	`dvmUÆockH—p
();

485 
	`ALOGI
("%s(): cª'ˆlock h—°tØ£ˆwh’/wh©", 
__func__
);

486  
çl£
;

489  
Œue
;

490 
	}
}

	@vm/alloc/DdmHeap.h

19 #iâdeà
DALVIK_ALLOC_DDMHEAP_H_


20 
	#DALVIK_ALLOC_DDMHEAP_H_


	)

27 
dvmDdmS’dH—pInfo
(
»asÚ
, 
boŞ
 
shouldLock
);

39 
dvmDdmS’dH—pSegm’ts
(
boŞ
 
shouldLock
, boŞ 
Çtive
);

	@vm/alloc/Heap.cpp

19 
	~"D®vik.h
"

20 
	~"®loc/H—pB™m­.h
"

21 
	~"®loc/V”ify.h
"

22 
	~"®loc/H—p.h
"

23 
	~"®loc/H—pIÁ”Çl.h
"

24 
	~"®loc/DdmH—p.h
"

25 
	~"®loc/H—pSourû.h
"

26 
	~"®loc/M¬kSw“p.h
"

27 
	~"os/os.h
"

29 
	~<sys/time.h
>

30 
	~<sys/»sourû.h
>

31 
	~<lim™s.h
>

32 
	~<”ºo.h
>

34 cÚ¡ 
GcS³c
 
	gkGcFÜM®locS³c
 = {

35 
Œue
,

36 
çl£
,

37 
Œue
,

41 cÚ¡ 
GcS³c
 *
	gGC_FOR_MALLOC
 = &
kGcFÜM®locS³c
;

43 cÚ¡ 
GcS³c
 
	gkGcCÚcu¼’tS³c
 = {

44 
Œue
,

45 
Œue
,

46 
Œue
,

50 cÚ¡ 
GcS³c
 *
	gGC_CONCURRENT
 = &
kGcCÚcu¼’tS³c
;

52 cÚ¡ 
GcS³c
 
	gkGcEx¶ic™S³c
 = {

53 
çl£
,

54 
Œue
,

55 
Œue
,

59 cÚ¡ 
GcS³c
 *
	gGC_EXPLICIT
 = &
kGcEx¶ic™S³c
;

61 cÚ¡ 
GcS³c
 
	gkGcBefÜeOomS³c
 = {

62 
çl£
,

63 
çl£
,

64 
çl£
,

68 cÚ¡ 
GcS³c
 *
	gGC_BEFORE_OOM
 = &
kGcBefÜeOomS³c
;

75 
boŞ
 
	$dvmH—pS¹up
()

77 
GcH—p
 *
gcH—p
;

79 ià(
gDvm
.
h—pGrowthLim™
 == 0) {

80 
gDvm
.
h—pGrowthLim™
 = gDvm.
h—pMaximumSize
;

83 
gcH—p
 = 
	`dvmH—pSourûS¹up
(
gDvm
.
h—pS¹šgSize
,

84 
gDvm
.
h—pMaximumSize
,

85 
gDvm
.
h—pGrowthLim™
);

86 ià(
gcH—p
 =ğ
NULL
) {

87  
çl£
;

89 
gcH—p
->
ddmHpifWh’
 = 0;

90 
gcH—p
->
ddmHpsgWh’
 = 0;

91 
gcH—p
->
ddmHpsgWh©
 = 0;

92 
gcH—p
->
ddmNhsgWh’
 = 0;

93 
gcH—p
->
ddmNhsgWh©
 = 0;

94 
gDvm
.
gcH—p
 = gcHeap;

98 
gcH—p
->
ş—»dReã»nûs
 = 
NULL
;

100 ià(!
	`dvmC¬dTabËS¹up
(
gDvm
.
h—pMaximumSize
, gDvm.
h—pGrowthLim™
)) {

101 
	`LOGE_HEAP
("cardable startup failed.");

102  
çl£
;

105  
Œue
;

106 
	}
}

108 
boŞ
 
	$dvmH—pS¹upAá”ZygÙe
()

110  
	`dvmH—pSourûS¹upAá”ZygÙe
();

111 
	}
}

113 
	$dvmH—pShutdown
()

116 ià(
gDvm
.
gcH—p
 !ğ
NULL
) {

117 
	`dvmC¬dTabËShutdown
();

122 
	`dvmH—pSourûShutdown
(&
gDvm
.
gcH—p
);

124 
	}
}

129 
	$dvmH—pTh»adShutdown
()

131 
	`dvmH—pSourûTh»adShutdown
();

132 
	}
}

138 
boŞ
 
	$dvmLockH—p
()

140 ià(
	`dvmTryLockMu‹x
(&
gDvm
.
gcH—pLock
) != 0) {

141 
Th»ad
 *
£lf
;

142 
Th»adStus
 
ŞdStus
;

144 
£lf
 = 
	`dvmTh»adS–f
();

145 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

146 
	`dvmLockMu‹x
(&
gDvm
.
gcH—pLock
);

147 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

150  
Œue
;

151 
	}
}

153 
	$dvmUÆockH—p
()

155 
	`dvmUÆockMu‹x
(&
gDvm
.
gcH—pLock
);

156 
	}
}

161 
	$gcFÜM®loc
(
boŞ
 
ş—rSoáReã»nûs
)

163 ià(
gDvm
.
®locProf
.
’abËd
) {

164 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

165 
gDvm
.
®locProf
.
gcCouÁ
++;

166 ià(
£lf
 !ğ
NULL
) {

167 
£lf
->
®locProf
.
gcCouÁ
++;

172 cÚ¡ 
GcS³c
 *
¥ec
 = 
ş—rSoáReã»nûs
 ? 
GC_BEFORE_OOM
 : 
GC_FOR_MALLOC
;

173 
	`dvmCŞËùG¬bageIÁ”Çl
(
¥ec
);

174 
	}
}

178 *
	$ŒyM®loc
(
size_t
 
size
)

180 *
±r
;

186 ià(
size
 >ğ
gDvm
.
h—pGrowthLim™
) {

187 
	`ALOGW
("%zd byte‡llocationƒxceedshe %zd byte maximum heap size",

188 
size
, 
gDvm
.
h—pGrowthLim™
);

189 
±r
 = 
NULL
;

190 
cŞËù_soá_»fs
;

203 
±r
 = 
	`dvmH—pSourûAÎoc
(
size
);

204 ià(
±r
 !ğ
NULL
) {

205  
±r
;

212 ià(
gDvm
.
gcH—p
->
gcRuÂšg
) {

217 
	`dvmWa™FÜCÚcu¼’tGcToCom¶‘e
();

218 
±r
 = 
	`dvmH—pSourûAÎoc
(
size
);

219 ià(
±r
 !ğ
NULL
) {

220  
±r
;

228 
	`gcFÜM®loc
(
çl£
);

229 
±r
 = 
	`dvmH—pSourûAÎoc
(
size
);

230 ià(
±r
 !ğ
NULL
) {

231  
±r
;

237 
±r
 = 
	`dvmH—pSourûAÎocAndGrow
(
size
);

238 ià(
±r
 !ğ
NULL
) {

239 
size_t
 
ÃwH—pSize
;

241 
ÃwH—pSize
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
();

245 
	`LOGI_HEAP
("Grow heap (frag case)o "

247 
	`FRACTIONAL_MB
(
ÃwH—pSize
), 
size
);

248  
±r
;

258 
cŞËù_soá_»fs
:

259 
	`LOGI_HEAP
("Forcing collection of SoftReferences for %zu-byte‡llocation",

260 
size
);

261 
	`gcFÜM®loc
(
Œue
);

262 
±r
 = 
	`dvmH—pSourûAÎocAndGrow
(
size
);

263 ià(
±r
 !ğ
NULL
) {

264  
±r
;

268 
	`LOGE_HEAP
("OuˆoàmemÜy oÀ¨%zd-by‹‡ÎoÿtiÚ.", 
size
);

270 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

272  
NULL
;

273 
	}
}

281 
	$throwOOME
()

283 
Th»ad
 *
£lf
;

285 ià((
£lf
 = 
	`dvmTh»adS–f
()è!ğ
NULL
) {

294 ià(
	`dvmIsOnTh»adLi¡
(
£lf
è&& !£lf->
throwšgOOME
) {

299 
£lf
->
throwšgOOME
 = 
Œue
;

304 
	`dvmThrowOutOfMemÜyE¼Ü
(
NULL
);

318 
	`dvmS‘Exû±iÚ
(
£lf
, 
gDvm
.
outOfMemÜyObj
);

322 
£lf
->
throwšgOOME
 = 
çl£
;

324 
	}
}

349 * 
	$dvmM®loc
(
size_t
 
size
, 
æags
)

351 *
±r
;

353 
	`dvmLockH—p
();

357 
±r
 = 
	`ŒyM®loc
(
size
);

358 ià(
±r
 !ğ
NULL
) {

361 ià(
gDvm
.
®locProf
.
’abËd
) {

362 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

363 
gDvm
.
®locProf
.
®locCouÁ
++;

364 
gDvm
.
®locProf
.
®locSize
 +ğ
size
;

365 ià(
£lf
 !ğ
NULL
) {

366 
£lf
->
®locProf
.
®locCouÁ
++;

367 
£lf
->
®locProf
.
®locSize
 +ğ
size
;

374 ià(
gDvm
.
®locProf
.
’abËd
) {

375 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

376 
gDvm
.
®locProf
.
çedAÎocCouÁ
++;

377 
gDvm
.
®locProf
.
çedAÎocSize
 +ğ
size
;

378 ià(
£lf
 !ğ
NULL
) {

379 
£lf
->
®locProf
.
çedAÎocCouÁ
++;

380 
£lf
->
®locProf
.
çedAÎocSize
 +ğ
size
;

385 
	`dvmUÆockH—p
();

387 ià(
±r
 !ğ
NULL
) {

392 ià((
æags
 & 
ALLOC_DONT_TRACK
) == 0) {

393 
	`dvmAddT¿ckedAÎoc
((
Objeù
*)
±r
, 
NULL
);

399 
	`throwOOME
();

402  
±r
;

403 
	}
}

408 
boŞ
 
	$dvmIsV®idObjeù
(cÚ¡ 
Objeù
* 
obj
)

412 ià(
obj
 !ğ
NULL
 && ((
ušŒ_t
)obj & (8-1)) == 0) {

426  
	`dvmH—pSourûCÚšs
(
obj
);

428  
çl£
;

429 
	}
}

431 
size_t
 
	$dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
 *
obj
)

433  
	`dvmH—pSourûChunkSize
(
obj
);

434 
	}
}

436 
	$v”ifyRoÙsAndH—p
()

438 
	`dvmV”ifyRoÙs
();

439 
	`dvmV”ifyB™m­
(
	`dvmH—pSourûG‘LiveB™s
());

440 
	}
}

456 
	$dvmCŞËùG¬bageIÁ”Çl
(cÚ¡ 
GcS³c
* 
¥ec
)

458 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

459 
u4
 
gcEnd
 = 0;

460 
u4
 
roÙS¹
 = 0 , 
roÙEnd
 = 0;

461 
u4
 
dœtyS¹
 = 0, 
dœtyEnd
 = 0;

462 
size_t
 
numObjeùsF»ed
, 
numBy‹sF»ed
;

463 
size_t
 
cu¼AÎoÿ‹d
, 
cu¼FoÙ´št
;

464 
size_t
 
³rûÁF»e
;

465 
ŞdTh»adPriÜ™y
 = 
INT_MAX
;

470 ià(
gcH—p
->
gcRuÂšg
) {

471 
	`LOGW_HEAP
("Attempted„ecursive GC");

475 
gcH—p
->
gcRuÂšg
 = 
Œue
;

477 
roÙS¹
 = 
	`dvmG‘R–©iveTimeM£c
();

478 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_GC
);

484 ià(!
¥ec
->
isCÚcu¼’t
) {

485 
ŞdTh»adPriÜ™y
 = 
	`os_¿i£Th»adPriÜ™y
();

487 ià(
gDvm
.
´eV”ify
) {

488 
	`LOGV_HEAP
("Verifying„oots‡nd heap before GC");

489 
	`v”ifyRoÙsAndH—p
();

492 
	`dvmM‘hodT¿ûGCBegš
();

496 ià(!
	`dvmH—pBegšM¬kS‹p
(
¥ec
->
isP¬tŸl
)) {

497 
	`LOGE_HEAP
("dvmHeapBeginMarkStep failed;‡borting");

498 
	`dvmAbÜt
();

503 
	`LOGD_HEAP
("Marking...");

504 
	`dvmH—pM¬kRoÙS‘
();

509 
	`as£¹
(
gcH—p
->
soáReã»nûs
 =ğ
NULL
);

510 
	`as£¹
(
gcH—p
->
w—kReã»nûs
 =ğ
NULL
);

511 
	`as£¹
(
gcH—p
->
fš®iz”Reã»nûs
 =ğ
NULL
);

512 
	`as£¹
(
gcH—p
->
phªtomReã»nûs
 =ğ
NULL
);

513 
	`as£¹
(
gcH—p
->
ş—»dReã»nûs
 =ğ
NULL
);

515 ià(
¥ec
->
isCÚcu¼’t
) {

520 
	`dvmCË¬C¬dTabË
();

521 
	`dvmUÆockH—p
();

522 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_GC
);

523 
roÙEnd
 = 
	`dvmG‘R–©iveTimeM£c
();

530 
	`LOGD_HEAP
("Recursing...");

531 
	`dvmH—pSÿnM¬kedObjeùs
();

533 ià(
¥ec
->
isCÚcu¼’t
) {

538 
dœtyS¹
 = 
	`dvmG‘R–©iveTimeM£c
();

539 
	`dvmLockH—p
();

540 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_GC
);

545 
	`dvmH—pReM¬kRoÙS‘
();

550 ià(
gDvm
.
v”ifyC¬dTabË
) {

551 
	`dvmV”ifyC¬dTabË
();

557 
	`dvmH—pReSÿnM¬kedObjeùs
();

564 
	`dvmH—pProûssReã»nûs
(&
gcH—p
->
soáReã»nûs
,

565 
¥ec
->
doP»£rve
 =ğ
çl£
,

566 &
gcH—p
->
w—kReã»nûs
,

567 &
gcH—p
->
fš®iz”Reã»nûs
,

568 &
gcH—p
->
phªtomReã»nûs
);

570 #ià
	`defšed
(
WITH_JIT
)

579 
	`dvmComp”P”fÜmSaãPoštChecks
();

582 
	`LOGD_HEAP
("Sweeping...");

584 
	`dvmH—pSw“pSy¡emW—ks
();

591 
	`dvmH—pSourûSw­B™m­s
();

593 ià(
gDvm
.
po¡V”ify
) {

594 
	`LOGV_HEAP
("Verifying„oots‡nd heap‡fter GC");

595 
	`v”ifyRoÙsAndH—p
();

598 ià(
¥ec
->
isCÚcu¼’t
) {

599 
	`dvmUÆockH—p
();

600 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_GC
);

601 
dœtyEnd
 = 
	`dvmG‘R–©iveTimeM£c
();

603 
	`dvmH—pSw“pUnm¬kedObjeùs
(
¥ec
->
isP¬tŸl
, s³c->
isCÚcu¼’t
,

604 &
numObjeùsF»ed
, &
numBy‹sF»ed
);

605 
	`LOGD_HEAP
("Cleaning up...");

606 
	`dvmH—pFšishM¬kS‹p
();

607 ià(
¥ec
->
isCÚcu¼’t
) {

608 
	`dvmLockH—p
();

611 
	`LOGD_HEAP
("Done.");

619 
	`dvmH—pSourûGrowFÜUtiz©iÚ
();

621 
cu¼AÎoÿ‹d
 = 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0);

622 
cu¼FoÙ´št
 = 
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0);

624 
	`dvmM‘hodT¿ûGCEnd
();

625 
	`LOGV_HEAP
("GC finished");

627 
gcH—p
->
gcRuÂšg
 = 
çl£
;

629 
	`LOGV_HEAP
("Resuminghreads");

631 ià(
¥ec
->
isCÚcu¼’t
) {

636 
	`dvmBrßdÿ¡CÚd
(&
gDvm
.
gcH—pCÚd
);

639 ià(!
¥ec
->
isCÚcu¼’t
) {

640 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_GC
);

641 
dœtyEnd
 = 
	`dvmG‘R–©iveTimeM£c
();

646 ià(
ŞdTh»adPriÜ™y
 !ğ
INT_MAX
) {

647 
	`os_low”Th»adPriÜ™y
(
ŞdTh»adPriÜ™y
);

654 
	`dvmEnqueueCË¬edReã»nûs
(&
gDvm
.
gcH—p
->
ş—»dReã»nûs
);

656 
gcEnd
 = 
	`dvmG‘R–©iveTimeM£c
();

657 
³rûÁF»e
 = 100 - (
size_t
)(100.0à* ()
cu¼AÎoÿ‹d
 / 
cu¼FoÙ´št
);

658 ià(!
¥ec
->
isCÚcu¼’t
) {

659 
u4
 
m¬kSw“pTime
 = 
dœtyEnd
 - 
roÙS¹
;

660 
u4
 
gcTime
 = 
gcEnd
 - 
roÙS¹
;

661 
boŞ
 
isSm®l
 = 
numBy‹sF»ed
 > 0 &&‚umBytesFreed < 1024;

662 
	`ALOGD
("%s freed %s%zdK, %d%% free %zdK/%zdK,…aused %ums,otal %ums",

663 
¥ec
->
»asÚ
,

664 
isSm®l
 ? "<" : "",

665 
numBy‹sF»ed
 ? 
	`MAX
(numBytesFreed / 1024, 1) : 0,

666 
³rûÁF»e
,

667 
cu¼AÎoÿ‹d
 / 1024, 
cu¼FoÙ´št
 / 1024,

668 
m¬kSw“pTime
, 
gcTime
);

670 
u4
 
roÙTime
 = 
roÙEnd
 - 
roÙS¹
;

671 
u4
 
dœtyTime
 = 
dœtyEnd
 - 
dœtyS¹
;

672 
u4
 
gcTime
 = 
gcEnd
 - 
roÙS¹
;

673 
boŞ
 
isSm®l
 = 
numBy‹sF»ed
 > 0 &&‚umBytesFreed < 1024;

674 
	`ALOGD
("%s freed %s%zdK, %d%% free %zdK/%zdK,…aused %ums+%ums,otal %ums",

675 
¥ec
->
»asÚ
,

676 
isSm®l
 ? "<" : "",

677 
numBy‹sF»ed
 ? 
	`MAX
(numBytesFreed / 1024, 1) : 0,

678 
³rûÁF»e
,

679 
cu¼AÎoÿ‹d
 / 1024, 
cu¼FoÙ´št
 / 1024,

680 
roÙTime
, 
dœtyTime
, 
gcTime
);

682 ià(
gcH—p
->
ddmHpifWh’
 != 0) {

683 
	`LOGD_HEAP
("Sending VM heap infoo DDM");

684 
	`dvmDdmS’dH—pInfo
(
gcH—p
->
ddmHpifWh’
, 
çl£
);

686 ià(
gcH—p
->
ddmHpsgWh’
 != 0) {

687 
	`LOGD_HEAP
("Dumping VM heapo DDM");

688 
	`dvmDdmS’dH—pSegm’ts
(
çl£
, false);

690 ià(
gcH—p
->
ddmNhsgWh’
 != 0) {

691 
	`LOGD_HEAP
("Dumping‚ative heapo DDM");

692 
	`dvmDdmS’dH—pSegm’ts
(
çl£
, 
Œue
);

694 
	}
}

716 
	$dvmWa™FÜCÚcu¼’tGcToCom¶‘e
()

718 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

719 
	`as£¹
(
£lf
 !ğ
NULL
);

720 
u4
 
¡¬t
 = 
	`dvmG‘R–©iveTimeM£c
();

721 
gDvm
.
gcH—p
->
gcRuÂšg
) {

722 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

723 
	`dvmWa™CÚd
(&
gDvm
.
gcH—pCÚd
, &gDvm.
gcH—pLock
);

724 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

726 
u4
 
’d
 = 
	`dvmG‘R–©iveTimeM£c
();

727 
	`ALOGD
("WAIT_FOR_CONCURRENT_GC blocked %ums", 
’d
 - 
¡¬t
);

728 
	}
}

	@vm/alloc/Heap.h

19 #iâdeà
DALVIK_ALLOC_HEAP_H_


20 
	#DALVIK_ALLOC_HEAP_H_


	)

22 
	sGcS³c
 {

24 
boŞ
 
	misP¬tŸl
;

26 
boŞ
 
	misCÚcu¼’t
;

28 
boŞ
 
	mdoP»£rve
;

30 cÚ¡ *
	m»asÚ
;

34 cÚ¡ 
GcS³c
 *
GC_FOR_MALLOC
;

37 cÚ¡ 
GcS³c
 *
GC_CONCURRENT
;

40 cÚ¡ 
GcS³c
 *
GC_EXPLICIT
;

43 cÚ¡ 
GcS³c
 *
GC_BEFORE_OOM
;

50 
boŞ
 
dvmH—pS¹up
();

57 
boŞ
 
dvmH—pS¹upAá”ZygÙe
();

65 
dvmH—pShutdown
();

71 
dvmH—pTh»adShutdown
();

81 
size_t
 
dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
 *
obj
);

87 
dvmCŞËùG¬bageIÁ”Çl
(cÚ¡ 
GcS³c
 *
¥ec
);

95 
dvmWa™FÜCÚcu¼’tGcToCom¶‘e
();

100 
boŞ
 
dvmIsV®idObjeù
(cÚ¡ 
Objeù
* 
obj
);

	@vm/alloc/HeapBitmap.cpp

17 
	~"D®vik.h
"

18 
	~"H—pB™m­.h
"

19 
	~<sys/mmª.h
>

26 
boŞ
 
	$dvmH—pB™m­In™
(
H—pB™m­
 *
hb
, cÚ¡ *
ba£
, 
size_t
 
maxSize
,

27 cÚ¡ *
Çme
)

29 *
b™s
;

30 
size_t
 
b™sL’
;

32 
	`as£¹
(
hb
 !ğ
NULL
);

33 
	`as£¹
(
Çme
 !ğ
NULL
);

34 
b™sL’
 = 
	`HB_OFFSET_TO_INDEX
(
maxSize
è* (*
hb
->
b™s
);

35 
b™s
 = 
	`dvmAÎocRegiÚ
(
b™sL’
, 
PROT_READ
 | 
PROT_WRITE
, 
Çme
);

36 ià(
b™s
 =ğ
NULL
) {

37 
	`ALOGE
("Could‚Ù mm­ %zd-by‹‡shmem„egiÚ '%s'", 
b™sL’
, 
Çme
);

38  
çl£
;

40 
hb
->
b™s
 = (*)bits;

41 
hb
->
b™sL’
 = hb->
®locL’
 = bitsLen;

42 
hb
->
ba£
 = (
ušŒ_t
)base;

43 
hb
->
max
 = hb->
ba£
 - 1;

44  
Œue
;

45 
	}
}

50 
	$dvmH—pB™m­D–‘e
(
H—pB™m­
 *
hb
)

52 
	`as£¹
(
hb
 !ğ
NULL
);

54 ià(
hb
->
b™s
 !ğ
NULL
) {

55 
	`munm­
((*)
hb
->
b™s
, hb->
®locL’
);

57 
	`mem£t
(
hb
, 0, (*hb));

58 
	}
}

64 
	$dvmH—pB™m­Z”o
(
H—pB™m­
 *
hb
)

66 
	`as£¹
(
hb
 !ğ
NULL
);

68 ià(
hb
->
b™s
 !ğ
NULL
) {

72 
	`madvi£
(
hb
->
b™s
, hb->
b™sL’
, 
MADV_DONTNEED
);

73 
hb
->
max
 = hb->
ba£
 - 1;

75 
	}
}

82 
boŞ
 
	$dvmH—pB™m­Cov”sAdd»ss
(cÚ¡ 
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

84 
	`as£¹
(
hb
 !ğ
NULL
);

85 ià(
obj
 !ğ
NULL
) {

86 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

87 cÚ¡ 
size_t
 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
off£t
);

88  
šdex
 < 
hb
->
b™sL’
 / (*hb->
b™s
);

90  
çl£
;

91 
	}
}

97 
	$dvmH—pB™m­W®k
(cÚ¡ 
H—pB™m­
 *
b™m­
, 
B™m­C®lback
 *
ÿÎback
,

98 *
¬g
)

100 
	`as£¹
(
b™m­
 !ğ
NULL
);

101 
	`as£¹
(
b™m­
->
b™s
 !ğ
NULL
);

102 
	`as£¹
(
ÿÎback
 !ğ
NULL
);

103 
ušŒ_t
 
’d
 = 
	`HB_OFFSET_TO_INDEX
(
b™m­
->
max
 - b™m­->
ba£
);

104 
ušŒ_t
 
i
 = 0; i <ğ
’d
; ++i) {

105 
wÜd
 = 
b™m­
->
b™s
[
i
];

106 ià(
	`UNLIKELY
(
wÜd
 != 0)) {

107 
highB™
 = 1 << (
HB_BITS_PER_WORD
 - 1);

108 
ušŒ_t
 
±rBa£
 = 
	`HB_INDEX_TO_OFFSET
(
i
è+ 
b™m­
->
ba£
;

109 
wÜd
 != 0) {

110 cÚ¡ 
shiá
 = 
	`CLZ
(
wÜd
);

111 
Objeù
* 
obj
 = (Objeù *)(
±rBa£
 + 
shiá
 * 
HB_OBJECT_ALIGNMENT
);

112 (*
ÿÎback
)(
obj
, 
¬g
);

113 
wÜd
 &ğ~(
highB™
 >> 
shiá
);

117 
	}
}

131 
	$dvmH—pB™m­SÿnW®k
(
H—pB™m­
 *
b™m­
,

132 
B™m­SÿnC®lback
 *
ÿÎback
, *
¬g
)

134 
	`as£¹
(
b™m­
 !ğ
NULL
);

135 
	`as£¹
(
b™m­
->
b™s
 !ğ
NULL
);

136 
	`as£¹
(
ÿÎback
 !ğ
NULL
);

137 
ušŒ_t
 
’d
 = 
	`HB_OFFSET_TO_INDEX
(
b™m­
->
max
 - b™m­->
ba£
);

138 
ušŒ_t
 
i
;

139 
i
 = 0; i <ğ
’d
; ++i) {

140 
wÜd
 = 
b™m­
->
b™s
[
i
];

141 ià(
	`UNLIKELY
(
wÜd
 != 0)) {

142 
highB™
 = 1 << (
HB_BITS_PER_WORD
 - 1);

143 
ušŒ_t
 
±rBa£
 = 
	`HB_INDEX_TO_OFFSET
(
i
è+ 
b™m­
->
ba£
;

144 *
fšg”
 = (*)(
	`HB_INDEX_TO_OFFSET
(
i
 + 1è+ 
b™m­
->
ba£
);

145 
wÜd
 != 0) {

146 cÚ¡ 
shiá
 = 
	`CLZ
(
wÜd
);

147 
Objeù
 *
obj
 = (Objeù *)(
±rBa£
 + 
shiá
 * 
HB_OBJECT_ALIGNMENT
);

148 (*
ÿÎback
)(
obj
, 
fšg”
, 
¬g
);

149 
wÜd
 &ğ~(
highB™
 >> 
shiá
);

151 
’d
 = 
	`HB_OFFSET_TO_INDEX
(
b™m­
->
max
 - b™m­->
ba£
);

154 
	}
}

163 
	$dvmH—pB™m­Sw“pW®k
(cÚ¡ 
H—pB™m­
 *
liveHb
, cÚ¡ H—pB™m­ *
m¬kHb
,

164 
ušŒ_t
 
ba£
, ušŒ_ˆ
max
,

165 
B™m­Sw“pC®lback
 *
ÿÎback
, *
ÿÎbackArg
)

167 
	`as£¹
(
liveHb
 !ğ
NULL
);

168 
	`as£¹
(
liveHb
->
b™s
 !ğ
NULL
);

169 
	`as£¹
(
m¬kHb
 !ğ
NULL
);

170 
	`as£¹
(
m¬kHb
->
b™s
 !ğ
NULL
);

171 
	`as£¹
(
liveHb
->
ba£
 =ğ
m¬kHb
->base);

172 
	`as£¹
(
liveHb
->
b™sL’
 =ğ
m¬kHb
->bitsLen);

173 
	`as£¹
(
ÿÎback
 !ğ
NULL
);

174 
	`as£¹
(
ba£
 <ğ
max
);

175 
	`as£¹
(
ba£
 >ğ
liveHb
->base);

176 
	`as£¹
(
max
 <ğ
liveHb
->max);

177 ià(
liveHb
->
max
 <†iveHb->
ba£
) {

182 *
poš‹rBuf
[4 * 
HB_BITS_PER_WORD
];

183 **
pb
 = 
poš‹rBuf
;

184 
size_t
 
¡¬t
 = 
	`HB_OFFSET_TO_INDEX
(
ba£
 - 
liveHb
->base);

185 
size_t
 
’d
 = 
	`HB_OFFSET_TO_INDEX
(
max
 - 
liveHb
->
ba£
);

186 *
live
 = 
liveHb
->
b™s
;

187 *
m¬k
 = 
m¬kHb
->
b™s
;

188 
size_t
 
i
 = 
¡¬t
; i <ğ
’d
; i++) {

189 
g¬bage
 = 
live
[
i
] & ~
m¬k
[i];

190 ià(
	`UNLIKELY
(
g¬bage
 != 0)) {

191 
highB™
 = 1 << (
HB_BITS_PER_WORD
 - 1);

192 
ušŒ_t
 
±rBa£
 = 
	`HB_INDEX_TO_OFFSET
(
i
è+ 
liveHb
->
ba£
;

193 
g¬bage
 != 0) {

194 
shiá
 = 
	`CLZ
(
g¬bage
);

195 
g¬bage
 &ğ~(
highB™
 >> 
shiá
);

196 *
pb
++ = (*)(
±rBa£
 + 
shiá
 * 
HB_OBJECT_ALIGNMENT
);

200 ià(
pb
 >ğ&
poš‹rBuf
[
	`NELEM
Õoš‹rBufè- 
HB_BITS_PER_WORD
]) {

201 (*
ÿÎback
)(
pb
 - 
poš‹rBuf
,…oš‹rBuf, 
ÿÎbackArg
);

202 
pb
 = 
poš‹rBuf
;

206 ià(
pb
 > 
poš‹rBuf
) {

207 (*
ÿÎback
)(
pb
 - 
poš‹rBuf
,…oš‹rBuf, 
ÿÎbackArg
);

209 
	}
}

	@vm/alloc/HeapBitmap.h

16 #iâdeà
DALVIK_HEAP_BITMAP_H_


17 
	#DALVIK_HEAP_BITMAP_H_


	)

19 
	~<lim™s.h
>

20 
	~<¡dšt.h
>

22 
	#HB_OBJECT_ALIGNMENT
 8

	)

23 
	#HB_BITS_PER_WORD
 ((è* 
CHAR_BIT
)

	)

29 
	#HB_OFFSET_TO_INDEX
(
off£t_
) \

30 ((
ušŒ_t
)(
off£t_
è/ 
HB_OBJECT_ALIGNMENT
 / 
HB_BITS_PER_WORD
)

	)

31 
	#HB_INDEX_TO_OFFSET
(
šdex_
) \

32 ((
ušŒ_t
)(
šdex_
è* 
HB_OBJECT_ALIGNMENT
 * 
HB_BITS_PER_WORD
)

	)

34 
	#HB_OFFSET_TO_BYTE_INDEX
(
off£t_
) \

35 (
	`HB_OFFSET_TO_INDEX
(
off£t_
è* (*((
H—pB™m­
 *)0)->
b™s
))

	)

40 
	#HB_OFFSET_TO_MASK
(
off£t_
) \

42 (31-(((
ušŒ_t
)(
off£t_
è/ 
HB_OBJECT_ALIGNMENT
è% 
HB_BITS_PER_WORD
)))

	)

44 
	sH—pB™m­
 {

48 *
	mb™s
;

53 
size_t
 
	mb™sL’
;

59 
size_t
 
	m®locL’
;

64 
ušŒ_t
 
	mba£
;

70 
ušŒ_t
 
	mmax
;

76 
	tB™m­C®lback
(
	tObjeù
 *
	tobj
, *
	t¬g
);

77 
	tB™m­SÿnC®lback
(
	tObjeù
 *
	tobj
, *
	tfšg”
, *
	t¬g
);

78 
	tB™m­Sw“pC®lback
(
	tsize_t
 
	tnumPŒs
, **
	t±rs
, *
	t¬g
);

85 
boŞ
 
dvmH—pB™m­In™
(
H—pB™m­
 *
hb
, cÚ¡ *
ba£
, 
size_t
 
maxSize
,

86 cÚ¡ *
Çme
);

91 
dvmH—pB™m­D–‘e
(
H—pB™m­
 *
hb
);

97 
dvmH—pB™m­Z”o
(
H—pB™m­
 *
hb
);

103 
boŞ
 
dvmH—pB™m­Cov”sAdd»ss
(cÚ¡ 
H—pB™m­
 *
hb
, cÚ¡ *
obj
);

108 
dvmH—pB™m­W®k
(cÚ¡ 
H—pB™m­
 *
b™m­
,

109 
B™m­C®lback
 *
ÿÎback
, *
ÿÎbackArg
);

115 
dvmH—pB™m­SÿnW®k
(
H—pB™m­
 *
b™m­
,

116 
B™m­SÿnC®lback
 *
ÿÎback
, *
¬g
);

125 
dvmH—pB™m­Sw“pW®k
(cÚ¡ 
H—pB™m­
 *
liveHb
, cÚ¡ H—pB™m­ *
m¬kHb
,

126 
ušŒ_t
 
ba£
, ušŒ_ˆ
max
,

127 
B™m­Sw“pC®lback
 *
ÿÎback
, *
ÿÎbackArg
);

	@vm/alloc/HeapBitmapInlines.h

17 #iâdeà
DALVIK_HEAP_BITMAPINLINES_H_


18 
	#DALVIK_HEAP_BITMAPINLINES_H_


	)

20 
	$dvmH—pB™m­S‘AndR‘uºObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
è
	`__©Œibu‹__
((
u£d
));

21 
	$dvmH—pB™m­S‘ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
è
	`__©Œibu‹__
((
u£d
));

22 
	$dvmH—pB™m­CË¬ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
è
	`__©Œibu‹__
((
u£d
));

27 
	$_h—pB™m­ModifyObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
,

28 
boŞ
 
£tB™
, boŞ 
»tuºOld
)

30 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

31 cÚ¡ 
size_t
 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
off£t
);

32 cÚ¡ 
mask
 = 
	`HB_OFFSET_TO_MASK
(
off£t
);

34 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

35 
	`as£¹
((
ušŒ_t
)
obj
 >ğ
hb
->
ba£
);

36 
	`as£¹
(
šdex
 < 
hb
->
b™sL’
 / (*hb->
b™s
));

37 ià(
£tB™
) {

38 ià((
ušŒ_t
)
obj
 > 
hb
->
max
) {

39 
hb
->
max
 = (
ušŒ_t
)
obj
;

41 ià(
»tuºOld
) {

42 *
p
 = 
hb
->
b™s
 + 
šdex
;

43 cÚ¡ 
wÜd
 = *
p
;

44 *
p
 |ğ
mask
;

45  
wÜd
 & 
mask
;

47 
hb
->
b™s
[
šdex
] |ğ
mask
;

50 
hb
->
b™s
[
šdex
] &ğ~
mask
;

52  
çl£
;

53 
	}
}

63 
	$dvmH—pB™m­S‘AndR‘uºObjeùB™
(
H—pB™m­
 *
hb
,

64 cÚ¡ *
obj
)

66  
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
Œue
,rue);

67 
	}
}

73 
	$dvmH—pB™m­S‘ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

75 
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
Œue
, 
çl£
);

76 
	}
}

81 
	$dvmH—pB™m­CË¬ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

83 
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
çl£
, false);

84 
	}
}

93 
	$dvmH—pB™m­IsObjeùB™S‘
(cÚ¡ 
H—pB™m­
 *
hb
,

94 cÚ¡ *
obj
)

96 
	`as£¹
(
	`dvmH—pB™m­Cov”sAdd»ss
(
hb
, 
obj
));

97 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

98 
	`as£¹
((
ušŒ_t
)
obj
 >ğ
hb
->
ba£
);

99 ià((
ušŒ_t
)
obj
 <ğ
hb
->
max
) {

100 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

101  
hb
->
b™s
[
	`HB_OFFSET_TO_INDEX
(
off£t
)] & 
	`HB_OFFSET_TO_MASK
(offset);

105 
	}
}

	@vm/alloc/HeapDebug.cpp

17 
	~"D®vik.h
"

18 
	~"H—pSourû.h
"

20 
	$dvmG‘H—pDebugInfo
(
H—pDebugInfoTy³
 
šfo
)

22 
šfo
) {

23 
kVœtu®H—pSize
:

24  ()
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0);

25 
kVœtu®H—pAÎoÿ‹d
:

26  ()
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0);

27 
kVœtu®H—pMaximumSize
:

28  
	`dvmH—pSourûG‘MaximumSize
();

32 
	}
}

	@vm/alloc/HeapDebug.h

16 #iâdeà
DALVIK_HEAPDEBUG_H_


17 
	#DALVIK_HEAPDEBUG_H_


	)

19 
	eH—pDebugInfoTy³
 {

20 
	mkVœtu®H—pSize
 = 0,

21 
	mkN©iveH—pSize
 = 1,

22 
	mkVœtu®H—pAÎoÿ‹d
 = 2,

23 
	mkN©iveH—pAÎoÿ‹d
 = 3,

24 
	mkVœtu®H—pMaximumSize
 = 4

30 
dvmG‘H—pDebugInfo
(
H—pDebugInfoTy³
 
šfo
);

	@vm/alloc/HeapInternal.h

19 #iâdeà
DALVIK_ALLOC_HEAP_INTERNAL_H_


20 
	#DALVIK_ALLOC_HEAP_INTERNAL_H_


	)

22 
	~"M¬kSw“p.h
"

24 
	gH—pSourû
;

26 
	sGcH—p
 {

27 
H—pSourû
 *
	mh—pSourû
;

34 
Objeù
 *
	msoáReã»nûs
;

35 
Objeù
 *
	mw—kReã»nûs
;

36 
Objeù
 *
	mfš®iz”Reã»nûs
;

37 
Objeù
 *
	mphªtomReã»nûs
;

41 
Objeù
 *
	mş—»dReã»nûs
;

46 
GcM¬kCÚ‹xt
 
	mm¬kCÚ‹xt
;

49 
u1
* 
	mÿrdTabËBa£
;

50 
size_t
 
	mÿrdTabËL’gth
;

51 
size_t
 
	mÿrdTabËMaxL’gth
;

52 
size_t
 
	mÿrdTabËOff£t
;

56 
boŞ
 
	mgcRuÂšg
;

61 
	mddmHpifWh’
;

62 
	mddmHpsgWh’
;

63 
	mddmHpsgWh©
;

64 
	mddmNhsgWh’
;

65 
	mddmNhsgWh©
;

68 
boŞ
 
dvmLockH—p
();

69 
dvmUÆockH—p
();

75 
	#HEAP_LOG_TAG
 
LOG_TAG
 "-h—p"

	)

77 #ià
LOG_NDEBUG


78 
	#LOGV_HEAP
(...è(()0)

	)

79 
	#LOGD_HEAP
(...è(()0)

	)

81 
	#LOGV_HEAP
(...è
	`ALOG
(
LOG_VERBOSE
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

82 
	#LOGD_HEAP
(...è
	`ALOG
(
LOG_DEBUG
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

84 
	#LOGI_HEAP
(...) \

86 ià(!
gDvm
.
zygÙe
è{ 
	`ALOG
(
LOG_INFO
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
); } \

87 } 0)

	)

89 
	#LOGW_HEAP
(...è
	`ALOG
(
LOG_WARN
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

90 
	#LOGE_HEAP
(...è
	`ALOG
(
LOG_ERROR
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

92 
	#FRACTIONAL_MB
(
n
) (n) / (1024 * 1024), \

93 ((((
n
è% (1024 * 1024)è/ 1024è* 1000è/ 1024

	)

94 
	#FRACTIONAL_PCT
(
n
,
max
) ((n) * 100) / (max), \

95 (((
n
è* 1000è/ (
max
)è% 10

	)

	@vm/alloc/HeapSource.cpp

17 
	~<cuts/m¥aû.h
>

18 
	~<¡dšt.h
>

19 
	~<sys/mmª.h
>

20 
	~<”ºo.h
>

22 
	#SIZE_MAX
 
UINT_MAX


23 

	)

24 
	~"D®vik.h
"

25 
	~"®loc/H—p.h
"

26 
	~"®loc/H—pIÁ”Çl.h
"

27 
	~"®loc/H—pSourû.h
"

28 
	~"®loc/H—pB™m­.h
"

29 
	~"®loc/H—pB™m­IÆšes.h
"

32 "C" 
dlm®loc_Œim
(
size_t
);

33 "C" 
dlm®loc_w®k_ä“_·ges
((*)(*, *, *), *);

35 
	`¢­Id—lFoÙ´št
();

36 
	`£tId—lFoÙ´št
(
size_t
 
max
);

37 
size_t
 
	`g‘MaximumSize
(cÚ¡ 
H—pSourû
 *
hs
);

38 
	`ŒimH—ps
();

40 
	#HEAP_UTILIZATION_MAX
 1024

	)

41 
	#DEFAULT_HEAP_UTILIZATION
 512

42 
	#HEAP_IDEAL_FREE
 (2 * 1024 * 1024)

	)

43 
	#HEAP_MIN_FREE
 (
HEAP_IDEAL_FREE
 / 4)

	)

48 
	#HEAP_TRIM_IDLE_TIME_MS
 (5 * 1000)

	)

53 
	#CONCURRENT_START
 (128 << 10)

	)

58 
	#CONCURRENT_MIN_FREE
 (
CONCURRENT_START
 + (128 << 10))

	)

60 
	#HS_BOILERPLATE
() \

62 
	`as£¹
(
gDvm
.
gcH—p
 !ğ
NULL
); \

63 
	`as£¹
(
gDvm
.
gcH—p
->
h—pSourû
 !ğ
NULL
); \

64 
	`as£¹
(
gHs
 =ğ
gDvm
.
gcH—p
->
h—pSourû
); \

65 
	}
} 0)

	)

67 
	sH—p
 {

70 
m¥aû
 
	mm¥
;

74 
size_t
 
	mmaximumSize
;

80 
size_t
 
	mby‹sAÎoÿ‹d
;

85 
size_t
 
	mcÚcu¼’tS¹By‹s
;

89 
size_t
 
	mobjeùsAÎoÿ‹d
;

94 *
	mba£
;

99 *
	mlim™
;

102 
	sH—pSourû
 {

105 
size_t
 
	mrg‘Utiz©iÚ
;

109 
size_t
 
	m¡¬tSize
;

113 
size_t
 
	mmaximumSize
;

123 
size_t
 
	mgrowthLim™
;

127 
size_t
 
	mid—lSize
;

133 
size_t
 
	msoáLim™
;

138 
H—p
 
	mh—ps
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

142 
size_t
 
	mnumH—ps
;

146 
boŞ
 
	m§wZygÙe
;

151 *
	mh—pBa£
;

156 
size_t
 
	mh—pL’gth
;

161 
H—pB™m­
 
	mliveB™s
;

166 
H—pB™m­
 
	mm¬kB™s
;

171 
boŞ
 
	mhasGcTh»ad
;

172 
±h»ad_t
 
	mgcTh»ad
;

173 
boŞ
 
	mgcTh»adShutdown
;

174 
±h»ad_mu‹x_t
 
	mgcTh»adMu‹x
;

175 
±h»ad_cÚd_t
 
	mgcTh»adCÚd
;

176 
boŞ
 
	mgcTh»adTrimN“ded
;

179 
	#hs2h—p
(
hs_
è(&((hs_)->
h—ps
[0]))

	)

184 
boŞ
 
	$isSoáLim™ed
(cÚ¡ 
H—pSourû
 *
hs
)

192  
hs
->
soáLim™
 <ğhs->
id—lSize
;

193 
	}
}

199 
size_t
 
	$g‘AÎocLim™
(cÚ¡ 
H—pSourû
 *
hs
)

201 ià(
	`isSoáLim™ed
(
hs
)) {

202  
hs
->
soáLim™
;

204  
	`m¥aû_max_®lowed_foÙ´št
(
	`hs2h—p
(
hs
)->
m¥
);

206 
	}
}

212 
size_t
 
	$ŞdH—pOv”h—d
(cÚ¡ 
H—pSourû
 *
hs
, 
boŞ
 
šşudeAùive
)

214 
size_t
 
foÙ´št
 = 0;

215 
size_t
 
i
;

217 ià(
šşudeAùive
) {

218 
i
 = 0;

220 
i
 = 1;

222  ; 
i
 < 
hs
->
numH—ps
; i++) {

224 
foÙ´št
 +ğ
	`m¥aû_foÙ´št
(
hs
->
h—ps
[
i
].
m¥
);

226  
foÙ´št
;

227 
	}
}

233 
H—p
 *
	$±r2h—p
(cÚ¡ 
H—pSourû
 *
hs
, cÚ¡ *
±r
)

235 cÚ¡ 
size_t
 
numH—ps
 = 
hs
->numHeaps;

237 ià(
±r
 !ğ
NULL
) {

238 
size_t
 
i
 = 0; i < 
numH—ps
; i++) {

239 cÚ¡ 
H—p
 *cÚ¡ 
h—p
 = &
hs
->
h—ps
[
i
];

241 ià((cÚ¡ *)
±r
 >ğ
h—p
->
ba£
 && (cÚ¡ *íŒ < h—p->
lim™
) {

242  (
H—p
 *)
h—p
;

246  
NULL
;

247 
	}
}

257 
	$couÁAÎoÿtiÚ
(
H—p
 *
h—p
, cÚ¡ *
±r
)

259 
	`as£¹
(
h—p
->
by‹sAÎoÿ‹d
 < 
	`m¥aû_foÙ´št
(h—p->
m¥
));

261 
h—p
->
by‹sAÎoÿ‹d
 +ğ
	`m¥aû_u§bË_size
(h—p->
m¥
, 
±r
) +

262 
HEAP_SOURCE_CHUNK_OVERHEAD
;

263 
h—p
->
objeùsAÎoÿ‹d
++;

264 
H—pSourû
* 
hs
 = 
gDvm
.
gcH—p
->
h—pSourû
;

265 
	`dvmH—pB™m­S‘ObjeùB™
(&
hs
->
liveB™s
, 
±r
);

267 
	`as£¹
(
h—p
->
by‹sAÎoÿ‹d
 < 
	`m¥aû_foÙ´št
(h—p->
m¥
));

268 
	}
}

270 
	$couÁF»e
(
H—p
 *
h—p
, cÚ¡ *
±r
, 
size_t
 *
numBy‹s
)

272 
size_t
 
d–
 = 
	`m¥aû_u§bË_size
(
h—p
->
m¥
, 
±r
è+ 
HEAP_SOURCE_CHUNK_OVERHEAD
;

273 
	`as£¹
(
d–
 > 0);

274 ià(
d–
 < 
h—p
->
by‹sAÎoÿ‹d
) {

275 
h—p
->
by‹sAÎoÿ‹d
 -ğ
d–
;

277 
h—p
->
by‹sAÎoÿ‹d
 = 0;

279 
H—pSourû
* 
hs
 = 
gDvm
.
gcH—p
->
h—pSourû
;

280 
	`dvmH—pB™m­CË¬ObjeùB™
(&
hs
->
liveB™s
, 
±r
);

281 ià(
h—p
->
objeùsAÎoÿ‹d
 > 0) {

282 
h—p
->
objeùsAÎoÿ‹d
--;

284 *
numBy‹s
 +ğ
d–
;

285 
	}
}

287 
H—pSourû
 *
	ggHs
 = 
NULL
;

289 
m¥aû
 
	$ü—‹M¥aû
(*
ba£
, 
size_t
 
¡¬tSize
, size_ˆ
maximumSize
)

299 
	`LOGV_HEAP
("C»©šg VM h—°oàsiz%zu", 
¡¬tSize
);

300 
”ºo
 = 0;

302 
m¥aû
 
m¥
 = 
	`ü—‹_cÚtiguous_m¥aû_w™h_ba£
(
¡¬tSize
/2,

303 
maximumSize
, 
çl£
, 
ba£
);

304 ià(
m¥
 !ğ
NULL
) {

308 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
¡¬tSize
);

313 
	`LOGE_HEAP
("Can't create VM heap of size (%zu,%zu): %s",

314 
¡¬tSize
/2, 
maximumSize
, 
	`¡»¼Ü
(
”ºo
));

317  
m¥
;

318 
	}
}

324 
boŞ
 
	$addIn™ŸlH—p
(
H—pSourû
 *
hs
, 
m¥aû
 
m¥
, 
size_t
 
maximumSize
)

326 
	`as£¹
(
hs
 !ğ
NULL
);

327 
	`as£¹
(
m¥
 !ğ
NULL
);

328 ià(
hs
->
numH—ps
 != 0) {

329  
çl£
;

331 
hs
->
h—ps
[0].
m¥
 = msp;

332 
hs
->
h—ps
[0].
maximumSize
 = maximumSize;

333 
hs
->
h—ps
[0].
cÚcu¼’tS¹By‹s
 = 
SIZE_MAX
;

334 
hs
->
h—ps
[0].
ba£
 = hs->
h—pBa£
;

335 
hs
->
h—ps
[0].
lim™
 = hs->
h—pBa£
 + hs->h—ps[0].
maximumSize
;

336 
hs
->
numH—ps
 = 1;

337  
Œue
;

338 
	}
}

344 
boŞ
 
	$addNewH—p
(
H—pSourû
 *
hs
)

346 
H—p
 
h—p
;

348 
	`as£¹
(
hs
 !ğ
NULL
);

349 ià(
hs
->
numH—ps
 >ğ
HEAP_SOURCE_MAX_HEAP_COUNT
) {

350 
	`ALOGE
("Attempto createoo many heaps (%zd >= %zd)",

351 
hs
->
numH—ps
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

352 
	`dvmAbÜt
();

353  
çl£
;

356 
	`mem£t
(&
h—p
, 0, (heap));

362 *
sbrk0
 = 
	`cÚtiguous_m¥aû_sbrk0
(
hs
->
h—ps
[0].
m¥
);

363 *
ba£
 = (*)
	`ALIGN_UP_TO_PAGE_SIZE
(
sbrk0
);

364 
size_t
 
ov”h—d
 = 
ba£
 - 
hs
->
h—ps
[0].base;

365 
	`as£¹
(((
size_t
)
hs
->
h—ps
[0].
ba£
 & (
SYSTEM_PAGE_SIZE
 - 1)) == 0);

367 ià(
ov”h—d
 + 
HEAP_MIN_FREE
 >ğ
hs
->
maximumSize
) {

368 
	`LOGE_HEAP
("No„oomo create‡ny more heaps "

370 
ov”h—d
, 
hs
->
maximumSize
);

371  
çl£
;

374 
h—p
.
maximumSize
 = 
hs
->
growthLim™
 - 
ov”h—d
;

375 
h—p
.
cÚcu¼’tS¹By‹s
 = 
HEAP_MIN_FREE
 - 
CONCURRENT_START
;

376 
h—p
.
ba£
 = base;

377 
h—p
.
lim™
 = h—p.
ba£
 + h—p.
maximumSize
;

378 
h—p
.
m¥
 = 
	`ü—‹M¥aû
(
ba£
, 
HEAP_MIN_FREE
, 
hs
->
maximumSize
 - 
ov”h—d
);

379 ià(
h—p
.
m¥
 =ğ
NULL
) {

380  
çl£
;

385 
hs
->
h—ps
[0].
maximumSize
 = 
ov”h—d
;

386 
hs
->
h—ps
[0].
lim™
 = 
ba£
;

387 
m¥aû
 
m¥
 = 
hs
->
h—ps
[0].msp;

388 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
	`m¥aû_foÙ´št
(msp));

393 
	`memmove
(&
hs
->
h—ps
[1], &hs->h—ps[0], hs->
numH—ps
 * (hs->heaps[0]));

394 
hs
->
h—ps
[0] = 
h—p
;

395 
hs
->
numH—ps
++;

397  
Œue
;

398 
	}
}

405 *
	$gcD«mÚTh»ad
(* 
¬g
)

407 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

408 
	`dvmLockMu‹x
(&
gHs
->
gcTh»adMu‹x
);

409 
gHs
->
gcTh»adShutdown
 !ğ
Œue
) {

410 
boŞ
 
Œim
 = 
çl£
;

411 ià(
gHs
->
gcTh»adTrimN“ded
) {

412 
»suÉ
 = 
	`dvmR–©iveCÚdWa™
(&
gHs
->
gcTh»adCÚd
, &gHs->
gcTh»adMu‹x
,

413 
HEAP_TRIM_IDLE_TIME_MS
, 0);

414 ià(
»suÉ
 =ğ
ETIMEDOUT
) {

416 
Œim
 = 
Œue
;

419 
	`dvmWa™CÚd
(&
gHs
->
gcTh»adCÚd
, &gHs->
gcTh»adMu‹x
);

422 
	`dvmLockH—p
();

428 ià(!
gDvm
.
gcH—p
->
gcRuÂšg
) {

429 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

430 ià(
Œim
) {

431 
	`ŒimH—ps
();

432 
gHs
->
gcTh»adTrimN“ded
 = 
çl£
;

434 
	`dvmCŞËùG¬bageIÁ”Çl
(
GC_CONCURRENT
);

435 
gHs
->
gcTh»adTrimN“ded
 = 
Œue
;

437 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

439 
	`dvmUÆockH—p
();

441 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

442  
NULL
;

443 
	}
}

445 
boŞ
 
	$gcD«mÚS¹up
()

447 
	`dvmIn™Mu‹x
(&
gHs
->
gcTh»adMu‹x
);

448 
	`±h»ad_cÚd_š™
(&
gHs
->
gcTh»adCÚd
, 
NULL
);

449 
gHs
->
gcTh»adShutdown
 = 
çl£
;

450 
gHs
->
hasGcTh»ad
 = 
	`dvmC»©eIÁ”ÇlTh»ad
(&gHs->
gcTh»ad
, "GC",

451 
gcD«mÚTh»ad
, 
NULL
);

452  
gHs
->
hasGcTh»ad
;

453 
	}
}

455 
	$gcD«mÚShutdown
()

457 ià(
gHs
->
hasGcTh»ad
) {

458 
	`dvmLockMu‹x
(&
gHs
->
gcTh»adMu‹x
);

459 
gHs
->
gcTh»adShutdown
 = 
Œue
;

460 
	`dvmSigÇlCÚd
(&
gHs
->
gcTh»adCÚd
);

461 
	`dvmUÆockMu‹x
(&
gHs
->
gcTh»adMu‹x
);

462 
	`±h»ad_još
(
gHs
->
gcTh»ad
, 
NULL
);

464 
	}
}

472 
boŞ
 
	$®locM¬kSck
(
GcM¬kSck
 *
¡ack
, 
size_t
 
maximumSize
)

474 cÚ¡ *
Çme
 = "dalvik-mark-stack";

475 *
addr
;

477 
	`as£¹
(
¡ack
 !ğ
NULL
);

478 
¡ack
->
Ëngth
 = 
maximumSize
 * (
Objeù
*) /

479 ((
Objeù
è+ 
HEAP_SOURCE_CHUNK_OVERHEAD
);

480 
addr
 = 
	`dvmAÎocRegiÚ
(
¡ack
->
Ëngth
, 
PROT_READ
 | 
PROT_WRITE
, 
Çme
);

481 ià(
addr
 =ğ
NULL
) {

482  
çl£
;

484 
¡ack
->
ba£
 = (cÚ¡ 
Objeù
 **)
addr
;

485 
¡ack
->
lim™
 = (cÚ¡ 
Objeù
 **)((*)
addr
 + sck->
Ëngth
);

486 
¡ack
->
tİ
 = 
NULL
;

487 
	`madvi£
(
¡ack
->
ba£
, sck->
Ëngth
, 
MADV_DONTNEED
);

488  
Œue
;

489 
	}
}

491 
	$ä“M¬kSck
(
GcM¬kSck
 *
¡ack
)

493 
	`as£¹
(
¡ack
 !ğ
NULL
);

494 
	`munm­
(
¡ack
->
ba£
, sck->
Ëngth
);

495 
	`mem£t
(
¡ack
, 0, (*stack));

496 
	}
}

503 
GcH—p
* 
	$dvmH—pSourûS¹up
(
size_t
 
¡¬tSize
, size_ˆ
maximumSize
,

504 
size_t
 
growthLim™
)

506 
GcH—p
 *
gcH—p
;

507 
H—pSourû
 *
hs
;

508 
m¥aû
 
m¥
;

509 
size_t
 
Ëngth
;

510 *
ba£
;

512 
	`as£¹
(
gHs
 =ğ
NULL
);

514 ià(!(
¡¬tSize
 <ğ
growthLim™
 && growthLim™ <ğ
maximumSize
)) {

515 
	`ALOGE
("Bad heap size…arameters (start=%zd, max=%zd,†imit=%zd)",

516 
¡¬tSize
, 
maximumSize
, 
growthLim™
);

517  
NULL
;

524 
Ëngth
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(
maximumSize
);

525 
ba£
 = 
	`dvmAÎocRegiÚ
(
Ëngth
, 
PROT_NONE
, "dalvik-heap");

526 ià(
ba£
 =ğ
NULL
) {

527  
NULL
;

533 
m¥
 = 
	`ü—‹M¥aû
(
ba£
, 
¡¬tSize
, 
maximumSize
);

534 ià(
m¥
 =ğ
NULL
) {

535 
ç
;

538 
gcH—p
 = (
GcH—p
 *)
	`ÿÎoc
(1, (*gcHeap));

539 ià(
gcH—p
 =ğ
NULL
) {

540 
	`LOGE_HEAP
("Can't‡llocate heap descriptor");

541 
ç
;

544 
hs
 = (
H—pSourû
 *)
	`ÿÎoc
(1, (*hs));

545 ià(
hs
 =ğ
NULL
) {

546 
	`LOGE_HEAP
("Can't‡llocate heap source");

547 
	`ä“
(
gcH—p
);

548 
ç
;

551 
hs
->
rg‘Utiz©iÚ
 = 
DEFAULT_HEAP_UTILIZATION
;

552 
hs
->
¡¬tSize
 = startSize;

553 
hs
->
maximumSize
 = maximumSize;

554 
hs
->
growthLim™
 = growthLimit;

555 
hs
->
id—lSize
 = 
¡¬tSize
;

556 
hs
->
soáLim™
 = 
SIZE_MAX
;

557 
hs
->
numH—ps
 = 0;

558 
hs
->
§wZygÙe
 = 
gDvm
.
zygÙe
;

559 
hs
->
hasGcTh»ad
 = 
çl£
;

560 
hs
->
h—pBa£
 = (*)
ba£
;

561 
hs
->
h—pL’gth
 = 
Ëngth
;

562 ià(!
	`addIn™ŸlH—p
(
hs
, 
m¥
, 
growthLim™
)) {

563 
	`LOGE_HEAP
("Can't‡dd initial heap");

564 
ç
;

566 ià(!
	`dvmH—pB™m­In™
(&
hs
->
liveB™s
, 
ba£
, 
Ëngth
, "dalvik-bitmap-1")) {

567 
	`LOGE_HEAP
("Can't create†iveBits");

568 
ç
;

570 ià(!
	`dvmH—pB™m­In™
(&
hs
->
m¬kB™s
, 
ba£
, 
Ëngth
, "dalvik-bitmap-2")) {

571 
	`LOGE_HEAP
("Can't create markBits");

572 
	`dvmH—pB™m­D–‘e
(&
hs
->
liveB™s
);

573 
ç
;

575 ià(!
	`®locM¬kSck
(&
gcH—p
->
m¬kCÚ‹xt
.
¡ack
, 
hs
->
maximumSize
)) {

576 
	`ALOGE
("Can't create markStack");

577 
	`dvmH—pB™m­D–‘e
(&
hs
->
m¬kB™s
);

578 
	`dvmH—pB™m­D–‘e
(&
hs
->
liveB™s
);

579 
ç
;

581 
gcH—p
->
m¬kCÚ‹xt
.
b™m­
 = &
hs
->
m¬kB™s
;

582 
gcH—p
->
h—pSourû
 = 
hs
;

584 
gHs
 = 
hs
;

585  
gcH—p
;

587 
ç
:

588 
	`munm­
(
ba£
, 
Ëngth
);

589  
NULL
;

590 
	}
}

592 
boŞ
 
	$dvmH—pSourûS¹upAá”ZygÙe
()

594  
gDvm
.
cÚcu¼’tM¬kSw“p
 ? 
	`gcD«mÚS¹up
(è: 
Œue
;

595 
	}
}

604 
boŞ
 
	$dvmH—pSourûS¹upBefÜeFÜk
()

606 
H—pSourû
 *
hs
 = 
gHs
;

608 
	`HS_BOILERPLATE
();

610 
	`as£¹
(
gDvm
.
zygÙe
);

612 ià(!
gDvm
.
ÃwZygÙeH—pAÎoÿ‹d
) {

616 
	`ALOGV
("Splitting out‚ew zygote heap");

617 
gDvm
.
ÃwZygÙeH—pAÎoÿ‹d
 = 
Œue
;

618  
	`addNewH—p
(
hs
);

620  
Œue
;

621 
	}
}

623 
	$dvmH—pSourûTh»adShutdown
()

625 ià(
gDvm
.
gcH—p
 !ğ
NULL
 && gDvm.
cÚcu¼’tM¬kSw“p
) {

626 
	`gcD«mÚShutdown
();

628 
	}
}

635 
	$dvmH—pSourûShutdown
(
GcH—p
 **
gcH—p
)

637 
	`as£¹
(
gcH—p
 !ğ
NULL
);

638 ià(*
gcH—p
 !ğ
NULL
 && (*gcH—p)->
h—pSourû
 != NULL) {

639 
H—pSourû
 *
hs
 = (*
gcH—p
)->
h—pSourû
;

640 
	`dvmH—pB™m­D–‘e
(&
hs
->
liveB™s
);

641 
	`dvmH—pB™m­D–‘e
(&
hs
->
m¬kB™s
);

642 
	`ä“M¬kSck
(&(*
gcH—p
)->
m¬kCÚ‹xt
.
¡ack
);

643 
	`munm­
(
hs
->
h—pBa£
, hs->
h—pL’gth
);

644 
	`ä“
(
hs
);

645 
gHs
 = 
NULL
;

646 
	`ä“
(*
gcH—p
);

647 *
gcH—p
 = 
NULL
;

649 
	}
}

654 *
	$dvmH—pSourûG‘Ba£
()

656  
gHs
->
h—pBa£
;

657 
	}
}

665 
size_t
 
	$dvmH—pSourûG‘V®ue
(
H—pSourûV®ueS³c
 
¥ec
, 
size_t
 
³rH—pSts
[],

666 
size_t
 
¬¿yL’
)

668 
H—pSourû
 *
hs
 = 
gHs
;

669 
size_t
 
v®ue
 = 0;

670 
size_t
 
tÙ®
 = 0;

672 
	`HS_BOILERPLATE
();

674 
	`as£¹
(
¬¿yL’
 >ğ
hs
->
numH—ps
 || 
³rH—pSts
 =ğ
NULL
);

675 
size_t
 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

676 
H—p
 *cÚ¡ 
h—p
 = &
hs
->
h—ps
[
i
];

678 
¥ec
) {

679 
HS_FOOTPRINT
:

680 
v®ue
 = 
	`m¥aû_foÙ´št
(
h—p
->
m¥
);

682 
HS_ALLOWED_FOOTPRINT
:

683 
v®ue
 = 
	`m¥aû_max_®lowed_foÙ´št
(
h—p
->
m¥
);

685 
HS_BYTES_ALLOCATED
:

686 
v®ue
 = 
h—p
->
by‹sAÎoÿ‹d
;

688 
HS_OBJECTS_ALLOCATED
:

689 
v®ue
 = 
h—p
->
objeùsAÎoÿ‹d
;

695 ià(
³rH—pSts
) {

696 
³rH—pSts
[
i
] = 
v®ue
;

698 
tÙ®
 +ğ
v®ue
;

700  
tÙ®
;

701 
	}
}

703 
	$dvmH—pSourûG‘RegiÚs
(
ušŒ_t
 *
ba£
, ušŒ_ˆ*
max
, 
size_t
 
numH—ps
)

705 
H—pSourû
 *
hs
 = 
gHs
;

707 
	`HS_BOILERPLATE
();

709 
	`as£¹
(
numH—ps
 <ğ
hs
->numHeaps);

710 
size_t
 
i
 = 0; i < 
numH—ps
; ++i) {

711 
ba£
[
i
] = (
ušŒ_t
)
hs
->
h—ps
[i].base;

712 
max
[
i
] = 
	`MIN
((
ušŒ_t
)
hs
->
h—ps
[i].
lim™
 - 1, hs->
m¬kB™s
.max);

714 
	}
}

719 
H—pB™m­
 *
	$dvmH—pSourûG‘LiveB™s
()

721 
	`HS_BOILERPLATE
();

723  &
gHs
->
liveB™s
;

724 
	}
}

729 
H—pB™m­
 *
	$dvmH—pSourûG‘M¬kB™s
()

731 
	`HS_BOILERPLATE
();

733  &
gHs
->
m¬kB™s
;

734 
	}
}

736 
	$dvmH—pSourûSw­B™m­s
()

738 
H—pB™m­
 
tmp
 = 
gHs
->
liveB™s
;

739 
gHs
->
liveB™s
 = gHs->
m¬kB™s
;

740 
gHs
->
m¬kB™s
 = 
tmp
;

741 
	}
}

743 
	$dvmH—pSourûZ”oM¬kB™m­
()

745 
	`HS_BOILERPLATE
();

747 
	`dvmH—pB™m­Z”o
(&
gHs
->
m¬kB™s
);

748 
	}
}

750 
	$dvmM¬kImmuÃObjeùs
(cÚ¡ *
immuÃLim™
)

757 
	`as£¹
(
immuÃLim™
 =ğ
gHs
->
h—ps
[0].
ba£
 ||

758 
immuÃLim™
 =ğ
NULL
);

759 
	`as£¹
(
gHs
->
liveB™s
.
ba£
 =ğgHs->
m¬kB™s
.base);

760 
	`as£¹
(
gHs
->
liveB™s
.
b™sL’
 =ğgHs->
m¬kB™s
.bitsLen);

762 
	`as£¹
(
gHs
->
h—ps
[0].
ba£
 >ğ
immuÃLim™
);

763 
	`as£¹
(
gHs
->
h—ps
[0].
lim™
 > 
immuÃLim™
);

765 
size_t
 
i
 = 1; i < 
gHs
->
numH—ps
; ++i) {

766 ià(
gHs
->
h—ps
[
i
].
ba£
 < 
immuÃLim™
) {

767 
	`as£¹
(
gHs
->
h—ps
[
i
].
lim™
 <ğ
immuÃLim™
);

769 
size_t
 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(

770 (
ušŒ_t
)
gHs
->
h—ps
[
i
].
ba£
 - gHs->
liveB™s
.base);

772 *
¤c
 = (*)(
gHs
->
liveB™s
.
b™s
 + 
šdex
);

773 *
d¡
 = (*)(
gHs
->
m¬kB™s
.
b™s
 + 
šdex
);

775 
size_t
 
Ëngth
 = 
	`HB_OFFSET_TO_BYTE_INDEX
(

776 
gHs
->
h—ps
[
i
].
lim™
 - gHs->h—ps[i].
ba£
);

778 
	`memıy
(
d¡
, 
¤c
, 
Ëngth
);

780 ià(
gHs
->
m¬kB™s
.
max
 < (
ušŒ_t
)gHs->
h—ps
[
i
].
lim™
) {

781 
gHs
->
m¬kB™s
.
max
 = (
ušŒ_t
)gHs->
h—ps
[
i
].
lim™
;

785 
	}
}

790 * 
	$dvmH—pSourûAÎoc
(
size_t
 
n
)

792 
	`HS_BOILERPLATE
();

794 
H—pSourû
 *
hs
 = 
gHs
;

795 
H—p
* 
h—p
 = 
	`hs2h—p
(
hs
);

796 ià(
h—p
->
by‹sAÎoÿ‹d
 + 
n
 > 
hs
->
soáLim™
) {

801 
	`LOGV_HEAP
("softLimit of %zd.%03zdMB hit for %zd-byte‡llocation",

802 
	`FRACTIONAL_MB
(
hs
->
soáLim™
), 
n
);

803  
NULL
;

805 * 
±r
 = 
	`m¥aû_ÿÎoc
(
h—p
->
m¥
, 1, 
n
);

806 ià(
±r
 =ğ
NULL
) {

807  
NULL
;

809 
	`couÁAÎoÿtiÚ
(
h—p
, 
±r
);

813 ià(
gDvm
.
gcH—p
->
gcRuÂšg
 || !
hs
->
hasGcTh»ad
) {

818  
±r
;

820 ià(
h—p
->
by‹sAÎoÿ‹d
 > h—p->
cÚcu¼’tS¹By‹s
) {

825 
	`dvmSigÇlCÚd
(&
gHs
->
gcTh»adCÚd
);

827  
±r
;

828 
	}
}

833 * 
	$h—pAÎocAndGrow
(
H—pSourû
 *
hs
, 
H—p
 *
h—p
, 
size_t
 
n
)

838 
size_t
 
max
 = 
h—p
->
maximumSize
;

840 
	`m¥aû_£t_max_®lowed_foÙ´št
(
h—p
->
m¥
, 
max
);

841 * 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

846 
	`m¥aû_£t_max_®lowed_foÙ´št
(
h—p
->
m¥
,

847 
	`m¥aû_foÙ´št
(
h—p
->
m¥
));

848  
±r
;

849 
	}
}

855 * 
	$dvmH—pSourûAÎocAndGrow
(
size_t
 
n
)

857 
	`HS_BOILERPLATE
();

859 
H—pSourû
 *
hs
 = 
gHs
;

860 
H—p
* 
h—p
 = 
	`hs2h—p
(
hs
);

861 * 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

862 ià(
±r
 !ğ
NULL
) {

863  
±r
;

866 
size_t
 
ŞdId—lSize
 = 
hs
->
id—lSize
;

867 ià(
	`isSoáLim™ed
(
hs
)) {

871 
hs
->
soáLim™
 = 
SIZE_MAX
;

872 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

873 ià(
±r
 !ğ
NULL
) {

877 
	`¢­Id—lFoÙ´št
();

878  
±r
;

886 
±r
 = 
	`h—pAÎocAndGrow
(
hs
, 
h—p
, 
n
);

887 ià(
±r
 !ğ
NULL
) {

891 
	`¢­Id—lFoÙ´št
();

896 
	`£tId—lFoÙ´št
(
ŞdId—lSize
);

898  
±r
;

899 
	}
}

907 
size_t
 
	$dvmH—pSourûF»eLi¡
(
size_t
 
numPŒs
, **
±rs
)

909 
	`HS_BOILERPLATE
();

911 ià(
numPŒs
 == 0) {

915 
	`as£¹
(
±rs
 !ğ
NULL
);

916 
	`as£¹
(*
±rs
 !ğ
NULL
);

917 
H—p
* 
h—p
 = 
	`±r2h—p
(
gHs
, *
±rs
);

918 
size_t
 
numBy‹s
 = 0;

919 ià(
h—p
 !ğ
NULL
) {

920 
m¥aû
 
m¥
 = 
h—p
->msp;

925 ià(
h—p
 =ğ
gHs
->
h—ps
) {

940 
	`as£¹
(
±rs
[0] !ğ
NULL
);

941 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[0]è=ğ
h—p
);

942 
	`couÁF»e
(
h—p
, 
±rs
[0], &
numBy‹s
);

943 *
m”ged
 = 
±rs
[0];

944 
size_t
 
i
 = 1; i < 
numPŒs
; i++) {

945 
	`as£¹
(
m”ged
 !ğ
NULL
);

946 
	`as£¹
(
±rs
[
i
] !ğ
NULL
);

947 
	`as£¹
((
šŒ_t
)
m”ged
 < (šŒ_t)
±rs
[
i
]);

948 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[
i
]è=ğ
h—p
);

949 
	`couÁF»e
(
h—p
, 
±rs
[
i
], &
numBy‹s
);

954 ià(
	`m¥aû_m”ge_objeùs
(
m¥
, 
m”ged
, 
±rs
[
i
]è=ğ
NULL
) {

955 
	`m¥aû_ä“
(
m¥
, 
m”ged
);

956 
m”ged
 = 
±rs
[
i
];

959 
	`as£¹
(
m”ged
 !ğ
NULL
);

960 
	`m¥aû_ä“
(
m¥
, 
m”ged
);

963 
size_t
 
i
 = 0; i < 
numPŒs
; i++) {

964 
	`as£¹
(
±rs
[
i
] !ğ
NULL
);

965 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[
i
]è=ğ
h—p
);

966 
	`couÁF»e
(
h—p
, 
±rs
[
i
], &
numBy‹s
);

970  
numBy‹s
;

971 
	}
}

976 
boŞ
 
	$dvmH—pSourûCÚšsAdd»ss
(cÚ¡ *
±r
)

978 
	`HS_BOILERPLATE
();

980  (
	`dvmH—pB™m­Cov”sAdd»ss
(&
gHs
->
liveB™s
, 
±r
));

981 
	}
}

986 
boŞ
 
	$dvmH—pSourûCÚšs
(cÚ¡ *
±r
)

988 
	`HS_BOILERPLATE
();

990 ià(
	`dvmH—pSourûCÚšsAdd»ss
(
±r
)) {

991  
	`dvmH—pB™m­IsObjeùB™S‘
(&
gHs
->
liveB™s
, 
±r
) != 0;

993  
çl£
;

994 
	}
}

996 
boŞ
 
	$dvmIsZygÙeObjeù
(cÚ¡ 
Objeù
* 
obj
)

998 
H—pSourû
 *
hs
 = 
gHs
;

1000 
	`HS_BOILERPLATE
();

1002 ià(
	`dvmH—pSourûCÚšs
(
obj
è&& 
hs
->
§wZygÙe
) {

1003 
H—p
 *
h—p
 = 
	`±r2h—p
(
hs
, 
obj
);

1004 ià(
h—p
 !ğ
NULL
) {

1008  
h—p
 !ğ
hs
->
h—ps
;

1014  
çl£
;

1015 
	}
}

1021 
size_t
 
	$dvmH—pSourûChunkSize
(cÚ¡ *
±r
)

1023 
	`HS_BOILERPLATE
();

1025 
H—p
* 
h—p
 = 
	`±r2h—p
(
gHs
, 
±r
);

1026 ià(
h—p
 !ğ
NULL
) {

1027  
	`m¥aû_u§bË_size
(
h—p
->
m¥
, 
±r
);

1030 
	}
}

1038 
size_t
 
	$dvmH—pSourûFoÙ´št
()

1040 
	`HS_BOILERPLATE
();

1043  
	`ŞdH—pOv”h—d
(
gHs
, 
Œue
);

1044 
	}
}

1046 
size_t
 
	$g‘MaximumSize
(cÚ¡ 
H—pSourû
 *
hs
)

1048  
hs
->
growthLim™
;

1049 
	}
}

1055 
size_t
 
	$dvmH—pSourûG‘MaximumSize
()

1057 
	`HS_BOILERPLATE
();

1058  
	`g‘MaximumSize
(
gHs
);

1059 
	}
}

1065 
	$dvmCË¬GrowthLim™
()

1067 
	`HS_BOILERPLATE
();

1068 
	`dvmLockH—p
();

1069 
	`dvmWa™FÜCÚcu¼’tGcToCom¶‘e
();

1070 
gDvm
.
gcH—p
->
ÿrdTabËL’gth
 = gDvm.gcH—p->
ÿrdTabËMaxL’gth
;

1071 
gHs
->
growthLim™
 = gHs->
maximumSize
;

1072 
size_t
 
ov”h—d
 = 
	`ŞdH—pOv”h—d
(
gHs
, 
çl£
);

1073 
gHs
->
h—ps
[0].
maximumSize
 = gHs->maximumSiz- 
ov”h—d
;

1074 
gHs
->
h—ps
[0].
lim™
 = gHs->h—ps[0].
ba£
 + gHs->h—ps[0].
maximumSize
;

1075 
	`dvmUÆockH—p
();

1076 
	}
}

1084 
size_t
 
	$g‘SoáFoÙ´št
(
boŞ
 
šşudeAùive
)

1086 
	`HS_BOILERPLATE
();

1088 
H—pSourû
 *
hs
 = 
gHs
;

1089 
size_t
 
»t
 = 
	`ŞdH—pOv”h—d
(
hs
, 
çl£
);

1090 ià(
šşudeAùive
) {

1091 
»t
 +ğ
hs
->
h—ps
[0].
by‹sAÎoÿ‹d
;

1094  
»t
;

1095 
	}
}

1101 
size_t
 
	$dvmH—pSourûG‘Id—lFoÙ´št
()

1103 
H—pSourû
 *
hs
 = 
gHs
;

1105 
	`HS_BOILERPLATE
();

1107  
hs
->
id—lSize
;

1108 
	}
}

1114 
	$£tSoáLim™
(
H—pSourû
 *
hs
, 
size_t
 
soáLim™
)

1120 
m¥aû
 
m¥
 = 
hs
->
h—ps
[0].msp;

1121 
size_t
 
cu¼’tH—pSize
 = 
	`m¥aû_foÙ´št
(
m¥
);

1122 ià(
soáLim™
 < 
cu¼’tH—pSize
) {

1125 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
cu¼’tH—pSize
);

1126 
hs
->
soáLim™
 = softLimit;

1131 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
soáLim™
);

1132 
hs
->
soáLim™
 = 
SIZE_MAX
;

1134 
	}
}

1141 
	$£tId—lFoÙ´št
(
size_t
 
max
)

1143 
	`HS_BOILERPLATE
();

1145 
H—pSourû
 *
hs
 = 
gHs
;

1146 
size_t
 
maximumSize
 = 
	`g‘MaximumSize
(
hs
);

1147 ià(
max
 > 
maximumSize
) {

1148 
	`LOGI_HEAP
("Clamparget GC heap from %zd.%03zdMBo %u.%03uMB",

1149 
	`FRACTIONAL_MB
(
max
),

1150 
	`FRACTIONAL_MB
(
maximumSize
));

1151 
max
 = 
maximumSize
;

1157 
size_t
 
ov”h—d
 = 
	`g‘SoáFoÙ´št
(
çl£
);

1158 
size_t
 
aùiveMax
;

1159 ià(
ov”h—d
 < 
max
) {

1160 
aùiveMax
 = 
max
 - 
ov”h—d
;

1162 
aùiveMax
 = 0;

1165 
	`£tSoáLim™
(
hs
, 
aùiveMax
);

1166 
hs
->
id—lSize
 = 
max
;

1167 
	}
}

1172 
	$¢­Id—lFoÙ´št
()

1174 
	`HS_BOILERPLATE
();

1176 
	`£tId—lFoÙ´št
(
	`g‘SoáFoÙ´št
(
Œue
));

1177 
	}
}

1183 
	$dvmG‘T¬g‘H—pUtiz©iÚ
()

1185 
H—pSourû
 *
hs
 = 
gHs
;

1187 
	`HS_BOILERPLATE
();

1189  ()
hs
->
rg‘Utiz©iÚ
 / ()
HEAP_UTILIZATION_MAX
;

1190 
	}
}

1196 
	$dvmS‘T¬g‘H—pUtiz©iÚ
(
ÃwT¬g‘
)

1198 
H—pSourû
 *
hs
 = 
gHs
;

1200 
	`HS_BOILERPLATE
();

1205 ià(
ÃwT¬g‘
 < 0.2) {

1206 
ÃwT¬g‘
 = 0.2;

1207 } ià(
ÃwT¬g‘
 > 0.8) {

1208 
ÃwT¬g‘
 = 0.8;

1211 
hs
->
rg‘Utiz©iÚ
 =

1212 (
size_t
)(
ÃwT¬g‘
 * ()
HEAP_UTILIZATION_MAX
);

1213 
	`ALOGV
("Set heaparget utilizationo %zd/%d (%f)",

1214 
hs
->
rg‘Utiz©iÚ
, 
HEAP_UTILIZATION_MAX
, 
ÃwT¬g‘
);

1215 
	}
}

1223 
size_t
 
	$g‘Utiz©iÚT¬g‘
(
size_t
 
liveSize
, size_ˆ
rg‘Utiz©iÚ
)

1228 
size_t
 
rg‘Size
 = (
liveSize
 / 
rg‘Utiz©iÚ
è* 
HEAP_UTILIZATION_MAX
;

1233 ià(
rg‘Size
 > 
liveSize
 + 
HEAP_IDEAL_FREE
) {

1234 
rg‘Size
 = 
liveSize
 + 
HEAP_IDEAL_FREE
;

1235 } ià(
rg‘Size
 < 
liveSize
 + 
HEAP_MIN_FREE
) {

1236 
rg‘Size
 = 
liveSize
 + 
HEAP_MIN_FREE
;

1238  
rg‘Size
;

1239 
	}
}

1246 
	$dvmH—pSourûGrowFÜUtiz©iÚ
()

1248 
	`HS_BOILERPLATE
();

1250 
H—pSourû
 *
hs
 = 
gHs
;

1251 
H—p
* 
h—p
 = 
	`hs2h—p
(
hs
);

1262 
size_t
 
cu¼’tH—pU£d
 = 
h—p
->
by‹sAÎoÿ‹d
;

1263 
size_t
 
rg‘H—pSize
 =

1264 
	`g‘Utiz©iÚT¬g‘
(
cu¼’tH—pU£d
, 
hs
->
rg‘Utiz©iÚ
);

1271 
size_t
 
ov”h—d
 = 
	`g‘SoáFoÙ´št
(
çl£
);

1272 
	`£tId—lFoÙ´št
(
rg‘H—pSize
 + 
ov”h—d
);

1274 
size_t
 
ä“By‹s
 = 
	`g‘AÎocLim™
(
hs
);

1275 ià(
ä“By‹s
 < 
CONCURRENT_MIN_FREE
) {

1277 
h—p
->
cÚcu¼’tS¹By‹s
 = 
SIZE_MAX
;

1279 
h—p
->
cÚcu¼’tS¹By‹s
 = 
ä“By‹s
 - 
CONCURRENT_START
;

1281 
	}
}

1287 
	$»Ëa£PagesInRªge
(*
¡¬t
, *
’d
, *
nby‹s
)

1292 
¡¬t
 = (*)
	`ALIGN_UP_TO_PAGE_SIZE
(start);

1293 
’d
 = (*)((
size_t
ënd & ~(
SYSTEM_PAGE_SIZE
 - 1));

1294 ià(
¡¬t
 < 
’d
) {

1295 
size_t
 
Ëngth
 = (*)
’d
 - (*)
¡¬t
;

1296 
	`madvi£
(
¡¬t
, 
Ëngth
, 
MADV_DONTNEED
);

1297 *(
size_t
 *)
nby‹s
 +ğ
Ëngth
;

1299 
	}
}

1304 
	$ŒimH—ps
()

1306 
	`HS_BOILERPLATE
();

1308 
H—pSourû
 *
hs
 = 
gHs
;

1309 
size_t
 
h—pBy‹s
 = 0;

1310 
size_t
 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

1311 
H—p
 *
h—p
 = &
hs
->
h—ps
[
i
];

1315 
	`m¥aû_Œim
(
h—p
->
m¥
, 0);

1319 
	`m¥aû_w®k_ä“_·ges
(
h—p
->
m¥
, 
»Ëa£PagesInRªge
, &
h—pBy‹s
);

1324 
	`dlm®loc_Œim
(0);

1325 
size_t
 
ÇtiveBy‹s
 = 0;

1326 
	`dlm®loc_w®k_ä“_·ges
(
»Ëa£PagesInRªge
, &
ÇtiveBy‹s
);

1328 
	`LOGD_HEAP
("madvised %zd (GC) + %zd (native) = %zdotal bytes",

1329 
h—pBy‹s
, 
ÇtiveBy‹s
, heapBytes +‚ativeBytes);

1330 
	}
}

1336 
dvmH—pSourûW®k
((*
ÿÎback
)(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

1337 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
,

1338 *
¬g
),

1339 *
¬g
)

1341 
	`HS_BOILERPLATE
();

1346 
H—pSourû
 *
hs
 = 
gHs
;

1347 
size_t
 
i
 = 
hs
->
numH—ps
; i > 0; --i) {

1348 
	`m¥aû_w®k_h—p
(
hs
->
h—ps
[
i
-1].
m¥
, 
ÿÎback
, 
¬g
);

1350 
	}
}

1358 
size_t
 
	$dvmH—pSourûG‘NumH—ps
()

1360 
	`HS_BOILERPLATE
();

1362  
gHs
->
numH—ps
;

1363 
	}
}

1365 *
	$dvmH—pSourûG‘ImmuÃLim™
(
boŞ
 
isP¬tŸl
)

1367 ià(
isP¬tŸl
) {

1368  
	`hs2h—p
(
gHs
)->
ba£
;

1370  
NULL
;

1372 
	}
}

	@vm/alloc/HeapSource.h

16 #iâdeà
DALVIK_HEAP_SOURCE_H_


17 
	#DALVIK_HEAP_SOURCE_H_


	)

19 
	~"®loc/H—p.h
"

20 
	~"®loc/H—pIÁ”Çl.h
"

24 
	#HEAP_SOURCE_CHUNK_OVERHEAD
 (1 *  (
size_t
))

	)

25 
	#HEAP_SOURCE_WORST_CHUNK_OVERHEAD
 (32 *  (
size_t
))

	)

29 
	#HEAP_SOURCE_MAX_HEAP_COUNT
 2

	)

31 
	eH—pSourûV®ueS³c
 {

32 
	mHS_FOOTPRINT
,

33 
	mHS_ALLOWED_FOOTPRINT
,

34 
	mHS_BYTES_ALLOCATED
,

35 
	mHS_OBJECTS_ALLOCATED


42 
GcH—p
 *
dvmH—pSourûS¹up
(
size_t
 
¡¬tšgSize
,

43 
size_t
 
maximumSize
,

44 
size_t
 
growthLim™
);

52 
boŞ
 
dvmH—pSourûS¹upAá”ZygÙe
();

60 
boŞ
 
dvmH—pSourûS¹upBefÜeFÜk
();

66 
dvmH—pSourûTh»adShutdown
();

71 
dvmH—pSourûShutdown
(
GcH—p
 **
gcH—p
);

78 
dvmH—pSourûG‘RegiÚs
(
ušŒ_t
 *
ba£
, ušŒ_ˆ*
max
, 
size_t
 
numH—ps
);

83 
H—pB™m­
 *
dvmH—pSourûG‘LiveB™s
();

88 
H—pB™m­
 *
dvmH—pSourûG‘M¬kB™s
();

93 *
dvmH—pSourûG‘Ba£
();

99 
size_t
 
dvmH—pSourûG‘V®ue
(
H—pSourûV®ueS³c
 
¥ec
,

100 
size_t
 
³rH—pSts
[], size_ˆ
¬¿yL’
);

105 *
dvmH—pSourûAÎoc
(
size_t
 
n
);

111 *
dvmH—pSourûAÎocAndGrow
(
size_t
 
n
);

119 
size_t
 
dvmH—pSourûF»eLi¡
(size_ˆ
numPŒs
, **
±rs
);

124 
boŞ
 
dvmH—pSourûCÚšs
(cÚ¡ *
±r
);

129 
boŞ
 
dvmH—pSourûCÚšsAdd»ss
(cÚ¡ *
±r
);

135 
size_t
 
dvmH—pSourûChunkSize
(cÚ¡ *
±r
);

141 
size_t
 
dvmH—pSourûFoÙ´št
();

147 
size_t
 
dvmH—pSourûG‘Id—lFoÙ´št
();

154 
dvmH—pSourûGrowFÜUtiz©iÚ
();

160 
dvmH—pSourûW®k
((*
ÿÎback
)(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

161 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
,

162 *
¬g
),

163 *
¬g
);

167 
size_t
 
	`dvmH—pSourûG‘NumH—ps
();

172 
	`dvmH—pSourûSw­B™m­s
();

177 
	`dvmH—pSourûZ”oM¬kB™m­
();

184 
	`dvmM¬kImmuÃObjeùs
(cÚ¡ *
immuÃLim™
);

191 *
	`dvmH—pSourûG‘ImmuÃLim™
(
boŞ
 
isP¬tŸl
);

197 
size_t
 
	`dvmH—pSourûG‘MaximumSize
();

	@vm/alloc/MarkSweep.cpp

17 
	~"D®vik.h
"

18 
	~"®loc/C¬dTabË.h
"

19 
	~"®loc/H—pB™m­.h
"

20 
	~"®loc/H—pB™m­IÆšes.h
"

21 
	~"®loc/H—pIÁ”Çl.h
"

22 
	~"®loc/H—pSourû.h
"

23 
	~"®loc/M¬kSw“p.h
"

24 
	~"®loc/Vis™.h
"

25 
	~<lim™s.h
>

26 
	~<sys/mmª.h
>

27 
	~<”ºo.h
>

29 
	tWÜd
;

30 cÚ¡ 
size_t
 
	gkWÜdSize
 = (
WÜd
);

35 
boŞ
 
	$isM¬ked
(cÚ¡ 
Objeù
 *
obj
, cÚ¡ 
GcM¬kCÚ‹xt
 *
ùx
)

37  
	`dvmH—pB™m­IsObjeùB™S‘
(
ùx
->
b™m­
, 
obj
);

38 
	}
}

43 
boŞ
 
	$ü—‹M¬kSck
(
GcM¬kSck
 *
¡ack
)

45 
	`as£¹
(
¡ack
 !ğ
NULL
);

46 
size_t
 
Ëngth
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
(è* (
Objeù
*) /

47 ((
Objeù
è+ 
HEAP_SOURCE_CHUNK_OVERHEAD
);

48 
	`madvi£
(
¡ack
->
ba£
, 
Ëngth
, 
MADV_NORMAL
);

49 
¡ack
->
tİ
 = sck->
ba£
;

50  
Œue
;

51 
	}
}

57 
	$de¡royM¬kSck
(
GcM¬kSck
 *
¡ack
)

59 
	`as£¹
(
¡ack
 !ğ
NULL
);

60 
	`madvi£
(
¡ack
->
ba£
, sck->
Ëngth
, 
MADV_DONTNEED
);

61 
¡ack
->
tİ
 = 
NULL
;

62 
	}
}

67 
	$m¬kSckPush
(
GcM¬kSck
 *
¡ack
, cÚ¡ 
Objeù
 *
obj
)

69 
	`as£¹
(
¡ack
 !ğ
NULL
);

70 
	`as£¹
(
¡ack
->
ba£
 <ğ¡ack->
tİ
);

71 
	`as£¹
(
¡ack
->
lim™
 > sck->
tİ
);

72 
	`as£¹
(
obj
 !ğ
NULL
);

73 *
¡ack
->
tİ
 = 
obj
;

74 ++
¡ack
->
tİ
;

75 
	}
}

80 cÚ¡ 
Objeù
 *
	$m¬kSckPİ
(
GcM¬kSck
 *
¡ack
)

82 
	`as£¹
(
¡ack
 !ğ
NULL
);

83 
	`as£¹
(
¡ack
->
ba£
 < sck->
tİ
);

84 
	`as£¹
(
¡ack
->
lim™
 > sck->
tİ
);

85 --
¡ack
->
tİ
;

86  *
¡ack
->
tİ
;

87 
	}
}

89 
boŞ
 
	$dvmH—pBegšM¬kS‹p
(
boŞ
 
isP¬tŸl
)

91 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

93 ià(!
	`ü—‹M¬kSck
(&
ùx
->
¡ack
)) {

94  
çl£
;

96 
ùx
->
fšg”
 = 
NULL
;

97 
ùx
->
immuÃLim™
 = (*)
	`dvmH—pSourûG‘ImmuÃLim™
(
isP¬tŸl
);

98  
Œue
;

99 
	}
}

101 
	$£tAndR‘uºM¬kB™
(
GcM¬kCÚ‹xt
 *
ùx
, cÚ¡ *
obj
)

103  
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(
ùx
->
b™m­
, 
obj
);

104 
	}
}

106 
	$m¬kObjeùNÚNuÎ
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
,

107 
boŞ
 
checkFšg”
)

109 
	`as£¹
(
ùx
 !ğ
NULL
);

110 
	`as£¹
(
obj
 !ğ
NULL
);

111 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

112 ià(
obj
 < (
Objeù
 *)
ùx
->
immuÃLim™
) {

113 
	`as£¹
(
	`isM¬ked
(
obj
, 
ùx
));

116 ià(!
	`£tAndR‘uºM¬kB™
(
ùx
, 
obj
)) {

119 ià(
checkFšg”
 && (*)
obj
 < 
ùx
->
fšg”
) {

122 
	`m¬kSckPush
(&
ùx
->
¡ack
, 
obj
);

125 
	}
}

133 
	$m¬kObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

135 ià(
obj
 !ğ
NULL
) {

136 
	`m¬kObjeùNÚNuÎ
(
obj
, 
ùx
, 
Œue
);

138 
	}
}

145 
	$roÙM¬kObjeùVis™Ü
(*
addr
, 
u4
 
th»ad
, 
RoÙTy³
 
ty³
,

146 *
¬g
)

148 
	`as£¹
(
addr
 !ğ
NULL
);

149 
	`as£¹
(
¬g
 !ğ
NULL
);

150 
Objeù
 *
obj
 = *(Objeù **)
addr
;

151 
GcM¬kCÚ‹xt
 *
ùx
 = (GcM¬kCÚ‹xˆ*)
¬g
;

152 ià(
obj
 !ğ
NULL
) {

153 
	`m¬kObjeùNÚNuÎ
(
obj
, 
ùx
, 
çl£
);

155 
	}
}

181 
	$dvmH—pM¬kRoÙS‘
()

183 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

184 
	`dvmM¬kImmuÃObjeùs
(
gcH—p
->
m¬kCÚ‹xt
.
immuÃLim™
);

185 
	`dvmVis™RoÙs
(
roÙM¬kObjeùVis™Ü
, &
gcH—p
->
m¬kCÚ‹xt
);

186 
	}
}

192 
	$roÙReM¬kObjeùVis™Ü
(*
addr
, 
u4
 
th»ad
, 
RoÙTy³
 
ty³
,

193 *
¬g
)

195 
	`as£¹
(
addr
 !ğ
NULL
);

196 
	`as£¹
(
¬g
 !ğ
NULL
);

197 
Objeù
 *
obj
 = *(Objeù **)
addr
;

198 
GcM¬kCÚ‹xt
 *
ùx
 = (GcM¬kCÚ‹xˆ*)
¬g
;

199 ià(
obj
 !ğ
NULL
) {

200 
	`m¬kObjeùNÚNuÎ
(
obj
, 
ùx
, 
Œue
);

202 
	}
}

207 
	$dvmH—pReM¬kRoÙS‘
()

209 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

210 
	`as£¹
(
ùx
->
fšg”
 =ğ(*)
ULONG_MAX
);

211 
	`dvmVis™RoÙs
(
roÙReM¬kObjeùVis™Ü
, 
ùx
);

212 
	}
}

217 
	$sÿnF›lds
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

219 
	`as£¹
(
obj
 !ğ
NULL
);

220 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

221 
	`as£¹
(
ùx
 !ğ
NULL
);

222 ià(
obj
->
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

223 
»fOff£ts
 = 
obj
->
şazz
->refOffsets;

224 
»fOff£ts
 != 0) {

225 
size_t
 
rshiá
 = 
	`CLZ
(
»fOff£ts
);

226 
size_t
 
off£t
 = 
	`CLASS_OFFSET_FROM_CLZ
(
rshiá
);

227 
Objeù
 *
»f
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
off£t
);

228 
	`m¬kObjeù
(
»f
, 
ùx
);

229 
»fOff£ts
 &ğ~(
CLASS_HIGH_BIT
 >> 
rshiá
);

232 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

233 
şazz
 !ğ
NULL
;

234 
şazz
 = cÏzz->
su³r
) {

235 
In¡F›ld
 *
f›ld
 = 
şazz
->
if›lds
;

236 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; ++i, ++
f›ld
) {

237 *
addr
 = 
	`BYTE_OFFSET
(
obj
, 
f›ld
->
by‹Off£t
);

238 
Objeù
 *
»f
 = ((
JV®ue
 *)
addr
)->
l
;

239 
	`m¬kObjeù
(
»f
, 
ùx
);

243 
	}
}

248 
	$sÿnSticF›lds
(cÚ¡ 
CÏssObjeù
 *
şazz
, 
GcM¬kCÚ‹xt
 *
ùx
)

250 
	`as£¹
(
şazz
 !ğ
NULL
);

251 
	`as£¹
(
ùx
 !ğ
NULL
);

252 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; ++i) {

253 
ch
 = 
şazz
->
sf›lds
[
i
].
sigÇtu»
[0];

254 ià(
ch
 == '[' || ch == 'L') {

255 
Objeù
 *
obj
 = 
şazz
->
sf›lds
[
i
].
v®ue
.
l
;

256 
	`m¬kObjeù
(
obj
, 
ùx
);

259 
	}
}

264 
	$sÿnIÁ”çûs
(cÚ¡ 
CÏssObjeù
 *
şazz
, 
GcM¬kCÚ‹xt
 *
ùx
)

266 
	`as£¹
(
şazz
 !ğ
NULL
);

267 
	`as£¹
(
ùx
 !ğ
NULL
);

268 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; ++i) {

269 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
şazz
->
š‹rçûs
[
i
], 
ùx
);

271 
	}
}

277 
	$sÿnCÏssObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

279 
	`as£¹
(
obj
 !ğ
NULL
);

280 
	`as£¹
(
	`dvmIsCÏssObjeù
(
obj
));

281 
	`as£¹
(
ùx
 !ğ
NULL
);

282 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
obj
->
şazz
, 
ùx
);

283 cÚ¡ 
CÏssObjeù
 *
asCÏss
 = (cÚ¡ CÏssObjeù *)
obj
;

284 ià(
	`IS_CLASS_FLAG_SET
(
asCÏss
, 
CLASS_ISARRAY
)) {

285 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
asCÏss
->
–em’tCÏss
, 
ùx
);

288 ià(
asCÏss
->
¡©us
 > 
CLASS_IDX
) {

289 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
asCÏss
->
su³r
, 
ùx
);

291 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
asCÏss
->
şassLßd”
, 
ùx
);

292 
	`sÿnF›lds
(
obj
, 
ùx
);

293 
	`sÿnSticF›lds
(
asCÏss
, 
ùx
);

294 ià(
asCÏss
->
¡©us
 > 
CLASS_IDX
) {

295 
	`sÿnIÁ”çûs
(
asCÏss
, 
ùx
);

297 
	}
}

303 
	$sÿnA¼ayObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

305 
	`as£¹
(
obj
 !ğ
NULL
);

306 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

307 
	`as£¹
(
ùx
 !ğ
NULL
);

308 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
obj
->
şazz
, 
ùx
);

309 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISOBJECTARRAY
)) {

310 cÚ¡ 
A¼ayObjeù
 *
¬¿y
 = (cÚ¡ A¼ayObjeù *)
obj
;

311 cÚ¡ 
Objeù
 **
cÚ‹Ás
 = (cÚ¡ Objeù **)(*)
¬¿y
->contents;

312 
size_t
 
i
 = 0; i < 
¬¿y
->
Ëngth
; ++i) {

313 
	`m¬kObjeù
(
cÚ‹Ás
[
i
], 
ùx
);

316 
	}
}

321 
	$»ã»nûCÏssFÏgs
(cÚ¡ 
Objeù
 *
obj
)

323 
æags
 = 
CLASS_ISREFERENCE
 |

324 
CLASS_ISWEAKREFERENCE
 |

325 
CLASS_ISFINALIZERREFERENCE
 |

326 
CLASS_ISPHANTOMREFERENCE
;

327  
	`GET_CLASS_FLAG_GROUP
(
obj
->
şazz
, 
æags
);

328 
	}
}

333 
boŞ
 
	$isSoáReã»nû
(cÚ¡ 
Objeù
 *
obj
)

335  
	`»ã»nûCÏssFÏgs
(
obj
è=ğ
CLASS_ISREFERENCE
;

336 
	}
}

341 
boŞ
 
	$isW—kReã»nû
(cÚ¡ 
Objeù
 *
obj
)

343  
	`»ã»nûCÏssFÏgs
(
obj
è& 
CLASS_ISWEAKREFERENCE
;

344 
	}
}

349 
boŞ
 
	$isFš®iz”Reã»nû
(cÚ¡ 
Objeù
 *
obj
)

351  
	`»ã»nûCÏssFÏgs
(
obj
è& 
CLASS_ISFINALIZERREFERENCE
;

352 
	}
}

357 
boŞ
 
	$isPhªtomReã»nû
(cÚ¡ 
Objeù
 *
obj
)

359  
	`»ã»nûCÏssFÏgs
(
obj
è& 
CLASS_ISPHANTOMREFERENCE
;

360 
	}
}

365 
	$’queueP’dšgReã»nû
(
Objeù
 *
»f
, Objeù **
li¡
)

367 
	`as£¹
(
»f
 !ğ
NULL
);

368 
	`as£¹
(
li¡
 !ğ
NULL
);

369 
size_t
 
off£t
 = 
gDvm
.
offJavaLªgRefReã»nû_³ndšgNext
;

370 ià(*
li¡
 =ğ
NULL
) {

371 
	`dvmS‘F›ldObjeù
(
»f
, 
off£t
,„ef);

372 *
li¡
 = 
»f
;

374 
Objeù
 *
h—d
 = 
	`dvmG‘F›ldObjeù
(*
li¡
, 
off£t
);

375 
	`dvmS‘F›ldObjeù
(
»f
, 
off£t
, 
h—d
);

376 
	`dvmS‘F›ldObjeù
(*
li¡
, 
off£t
, 
»f
);

378 
	}
}

384 
Objeù
 *
	$dequeueP’dšgReã»nû
(
Objeù
 **
li¡
)

386 
	`as£¹
(
li¡
 !ğ
NULL
);

387 
	`as£¹
(*
li¡
 !ğ
NULL
);

388 
size_t
 
off£t
 = 
gDvm
.
offJavaLªgRefReã»nû_³ndšgNext
;

389 
Objeù
 *
h—d
 = 
	`dvmG‘F›ldObjeù
(*
li¡
, 
off£t
);

390 
Objeù
 *
»f
;

391 ià(*
li¡
 =ğ
h—d
) {

392 
»f
 = *
li¡
;

393 *
li¡
 = 
NULL
;

395 
Objeù
 *
Ãxt
 = 
	`dvmG‘F›ldObjeù
(
h—d
, 
off£t
);

396 
	`dvmS‘F›ldObjeù
(*
li¡
, 
off£t
, 
Ãxt
);

397 
»f
 = 
h—d
;

399 
	`dvmS‘F›ldObjeù
(
»f
, 
off£t
, 
NULL
);

400  
»f
;

401 
	}
}

408 
	$d–ayReã»nûReã»Á
(
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

410 
	`as£¹
(
obj
 !ğ
NULL
);

411 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

412 
	`as£¹
(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISREFERENCE
));

413 
	`as£¹
(
ùx
 !ğ
NULL
);

414 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

415 
size_t
 
³ndšgNextOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_³ndšgNext
;

416 
size_t
 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

417 
Objeù
 *
³ndšg
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
³ndšgNextOff£t
);

418 
Objeù
 *
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
»ã»ÁOff£t
);

419 ià(
³ndšg
 =ğ
NULL
 && 
»ã»Á
 !ğNULL && !
	`isM¬ked
Ôeã»Á, 
ùx
)) {

420 
Objeù
 **
li¡
 = 
NULL
;

421 ià(
	`isSoáReã»nû
(
obj
)) {

422 
li¡
 = &
gcH—p
->
soáReã»nûs
;

423 } ià(
	`isW—kReã»nû
(
obj
)) {

424 
li¡
 = &
gcH—p
->
w—kReã»nûs
;

425 } ià(
	`isFš®iz”Reã»nû
(
obj
)) {

426 
li¡
 = &
gcH—p
->
fš®iz”Reã»nûs
;

427 } ià(
	`isPhªtomReã»nû
(
obj
)) {

428 
li¡
 = &
gcH—p
->
phªtomReã»nûs
;

430 
	`as£¹
(
li¡
 !ğ
NULL
);

431 
	`’queueP’dšgReã»nû
(
obj
, 
li¡
);

433 
	}
}

438 
	$sÿnD©aObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

440 
	`as£¹
(
obj
 !ğ
NULL
);

441 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

442 
	`as£¹
(
ùx
 !ğ
NULL
);

443 
	`m¬kObjeù
((cÚ¡ 
Objeù
 *)
obj
->
şazz
, 
ùx
);

444 
	`sÿnF›lds
(
obj
, 
ùx
);

445 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISREFERENCE
)) {

446 
	`d–ayReã»nûReã»Á
((
Objeù
 *)
obj
, 
ùx
);

448 
	}
}

454 
	$sÿnObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

456 
	`as£¹
(
obj
 !ğ
NULL
);

457 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

458 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

459 
	`sÿnCÏssObjeù
(
obj
, 
ùx
);

460 } ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISARRAY
)) {

461 
	`sÿnA¼ayObjeù
(
obj
, 
ùx
);

463 
	`sÿnD©aObjeù
(
obj
, 
ùx
);

465 
	}
}

471 
	$´oûssM¬kSck
(
GcM¬kCÚ‹xt
 *
ùx
)

473 
	`as£¹
(
ùx
 !ğ
NULL
);

474 
	`as£¹
(
ùx
->
fšg”
 =ğ(*)
ULONG_MAX
);

475 
	`as£¹
(
ùx
->
¡ack
.
tİ
 >ğùx->¡ack.
ba£
);

476 
GcM¬kSck
 *
¡ack
 = &
ùx
->stack;

477 
¡ack
->
tİ
 > sck->
ba£
) {

478 cÚ¡ 
Objeù
 *
obj
 = 
	`m¬kSckPİ
(
¡ack
);

479 
	`sÿnObjeù
(
obj
, 
ùx
);

481 
	}
}

483 
size_t
 
	$objeùSize
(cÚ¡ 
Objeù
 *
obj
)

485 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

486 
	`as£¹
(
	`dvmIsV®idObjeù
((
Objeù
 *)
obj
->
şazz
));

487 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISARRAY
)) {

488  
	`dvmA¼ayObjeùSize
((
A¼ayObjeù
 *)
obj
);

489 } ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

490  
	`dvmCÏssObjeùSize
((
CÏssObjeù
 *)
obj
);

492  
obj
->
şazz
->
objeùSize
;

494 
	}
}

500 
Objeù
 *
	$ÃxtG¿yObjeù
(cÚ¡ 
u1
 *
ba£
, cÚ¡ u1 *
lim™
,

501 cÚ¡ 
H—pB™m­
 *
m¬kB™s
)

503 cÚ¡ 
u1
 *
±r
;

505 
	`as£¹
(
ba£
 < 
lim™
);

506 
	`as£¹
(
lim™
 - 
ba£
 <ğ
GC_CARD_SIZE
);

507 
±r
 = 
ba£
;…Œ < 
lim™
;…Œ +ğ
HB_OBJECT_ALIGNMENT
) {

508 ià(
	`dvmH—pB™m­IsObjeùB™S‘
(
m¬kB™s
, 
±r
))

509  (
Objeù
 *)
±r
;

511  
NULL
;

512 
	}
}

520 cÚ¡ 
u1
 *
	$sÿnDœtyC¬ds
(cÚ¡ 
u1
 *
¡¬t
, cÚ¡ u1 *
’d
,

521 
GcM¬kCÚ‹xt
 *
ùx
)

523 cÚ¡ 
H—pB™m­
 *
m¬kB™s
 = 
ùx
->
b™m­
;

524 cÚ¡ 
u1
 *
ÿrd
 = 
¡¬t
, *
´evAddr
 = 
NULL
;

525 
ÿrd
 < 
’d
) {

526 ià(*
ÿrd
 !ğ
GC_CARD_DIRTY
) {

527  
ÿrd
;

529 cÚ¡ 
u1
 *
±r
 = 
´evAddr
 ?…»vAdd¸: (u1*)
	`dvmAddrFromC¬d
(
ÿrd
);

530 cÚ¡ 
u1
 *
lim™
 = 
±r
 + 
GC_CARD_SIZE
;

531 
±r
 < 
lim™
) {

532 
Objeù
 *
obj
 = 
	`ÃxtG¿yObjeù
(
±r
, 
lim™
, 
m¬kB™s
);

533 ià(
obj
 =ğ
NULL
) {

536 
	`sÿnObjeù
(
obj
, 
ùx
);

537 
±r
 = (
u1
*)
obj
 + 
	`ALIGN_UP
(
	`objeùSize
(obj), 
HB_OBJECT_ALIGNMENT
);

539 ià(
±r
 < 
lim™
) {

541 ++
ÿrd
;

542 
´evAddr
 = 
NULL
;

545 
ÿrd
 = 
	`dvmC¬dFromAddr
(
±r
);

546 
´evAddr
 = 
±r
;

549  
NULL
;

550 
	}
}

555 
	$sÿnG¿yObjeùs
(
GcM¬kCÚ‹xt
 *
ùx
)

557 
GcH—p
 *
h
 = 
gDvm
.
gcH—p
;

558 cÚ¡ 
u1
 *
ba£
, *
lim™
, *
±r
, *
dœty
;

559 
size_t
 
foÙ´št
;

561 
foÙ´št
 = 
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0);

562 
ba£
 = &
h
->
ÿrdTabËBa£
[0];

563 
lim™
 = 
	`dvmC¬dFromAddr
((
u1
 *)
	`dvmH—pSourûG‘Ba£
(è+ 
foÙ´št
);

564 
	`as£¹
(
lim™
 <ğ&
h
->
ÿrdTabËBa£
[h->
ÿrdTabËL’gth
]);

566 
±r
 = 
ba£
;

568 
dœty
 = (cÚ¡ 
u1
 *)
	`memchr
(
±r
, 
GC_CARD_DIRTY
, 
lim™
 -…tr);

569 ià(
dœty
 =ğ
NULL
) {

572 
	`as£¹
((
dœty
 > 
±r
è&& (dœty < 
lim™
));

573 
±r
 = 
	`sÿnDœtyC¬ds
(
dœty
, 
lim™
, 
ùx
);

574 ià(
±r
 =ğ
NULL
) {

577 
	`as£¹
((
±r
 > 
dœty
è&& (±¸< 
lim™
));

579 
	}
}

586 
	$sÿnB™m­C®lback
(
Objeù
 *
obj
, *
fšg”
, *
¬g
)

588 
GcM¬kCÚ‹xt
 *
ùx
 = (GcM¬kCÚ‹xˆ*)
¬g
;

589 
ùx
->
fšg”
 = (*)finger;

590 
	`sÿnObjeù
(
obj
, 
ùx
);

591 
	}
}

597 
	$dvmH—pSÿnM¬kedObjeùs
()

599 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

601 
	`as£¹
(
ùx
->
fšg”
 =ğ
NULL
);

606 
	`dvmH—pB™m­SÿnW®k
(
ùx
->
b™m­
, 
sÿnB™m­C®lback
, ctx);

608 
ùx
->
fšg”
 = (*)
ULONG_MAX
;

613 
	`´oûssM¬kSck
(
ùx
);

614 
	}
}

616 
	$dvmH—pReSÿnM¬kedObjeùs
()

618 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

624 
	`as£¹
(
ùx
->
fšg”
 =ğ(*)
ULONG_MAX
);

625 
	`sÿnG¿yObjeùs
(
ùx
);

626 
	`´oûssM¬kSck
(
ùx
);

627 
	}
}

632 
	$ş—rReã»nû
(
Objeù
 *
»ã»nû
)

634 
size_t
 
off£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

635 
	`dvmS‘F›ldObjeù
(
»ã»nû
, 
off£t
, 
NULL
);

636 
	}
}

642 
boŞ
 
	$isEnqueuabË
(cÚ¡ 
Objeù
 *
»ã»nû
)

644 
	`as£¹
(
»ã»nû
 !ğ
NULL
);

645 
Objeù
 *
queue
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
,

646 
gDvm
.
offJavaLªgRefReã»nû_queue
);

647 
Objeù
 *
queueNext
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
,

648 
gDvm
.
offJavaLªgRefReã»nû_queueNext
);

649  
queue
 !ğ
NULL
 && 
queueNext
 == NULL;

650 
	}
}

655 
	$’queueReã»nû
(
Objeù
 *
»f
)

657 
	`as£¹
(
»f
 !ğ
NULL
);

658 
	`as£¹
(
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queue
è!ğ
NULL
);

659 
	`as£¹
(
	`dvmG‘F›ldObjeù
(
»f
, 
gDvm
.
offJavaLªgRefReã»nû_queueNext
è=ğ
NULL
);

660 
	`’queueP’dšgReã»nû
(
»f
, &
gDvm
.
gcH—p
->
ş—»dReã»nûs
);

661 
	}
}

669 
	$´e£rveSomeSoáReã»nûs
(
Objeù
 **
li¡
)

671 
	`as£¹
(
li¡
 !ğ
NULL
);

672 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

673 
size_t
 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

674 
Objeù
 *
ş—r
 = 
NULL
;

675 
size_t
 
couÁ”
 = 0;

676 *
li¡
 !ğ
NULL
) {

677 
Objeù
 *
»f
 = 
	`dequeueP’dšgReã»nû
(
li¡
);

678 
Objeù
 *
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
»ã»ÁOff£t
);

679 ià(
»ã»Á
 =ğ
NULL
) {

683 
boŞ
 
m¬ked
 = 
	`isM¬ked
(
»ã»Á
, 
ùx
);

684 ià(!
m¬ked
 && ((++
couÁ”
) & 1)) {

686 
	`m¬kObjeù
(
»ã»Á
, 
ùx
);

687 
m¬ked
 = 
Œue
;

689 ià(!
m¬ked
) {

691 
	`’queueP’dšgReã»nû
(
»f
, &
ş—r
);

694 *
li¡
 = 
ş—r
;

699 
	`´oûssM¬kSck
(
ùx
);

700 
	}
}

707 
	$ş—rWh™eReã»nûs
(
Objeù
 **
li¡
)

709 
	`as£¹
(
li¡
 !ğ
NULL
);

710 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

711 
size_t
 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

712 *
li¡
 !ğ
NULL
) {

713 
Objeù
 *
»f
 = 
	`dequeueP’dšgReã»nû
(
li¡
);

714 
Objeù
 *
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
»ã»ÁOff£t
);

715 ià(
»ã»Á
 !ğ
NULL
 && !
	`isM¬ked
Ôeã»Á, 
ùx
)) {

717 
	`ş—rReã»nû
(
»f
);

718 ià(
	`isEnqueuabË
(
»f
)) {

719 
	`’queueReã»nû
(
»f
);

723 
	`as£¹
(*
li¡
 =ğ
NULL
);

724 
	}
}

731 
	$’queueFš®iz”Reã»nûs
(
Objeù
 **
li¡
)

733 
	`as£¹
(
li¡
 !ğ
NULL
);

734 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

735 
size_t
 
»ã»ÁOff£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

736 
size_t
 
zomb›Off£t
 = 
gDvm
.
offJavaLªgRefFš®iz”Reã»nû_zomb›
;

737 
boŞ
 
hasEnqueued
 = 
çl£
;

738 *
li¡
 !ğ
NULL
) {

739 
Objeù
 *
»f
 = 
	`dequeueP’dšgReã»nû
(
li¡
);

740 
Objeù
 *
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
»f
, 
»ã»ÁOff£t
);

741 ià(
»ã»Á
 !ğ
NULL
 && !
	`isM¬ked
Ôeã»Á, 
ùx
)) {

742 
	`m¬kObjeù
(
»ã»Á
, 
ùx
);

744 
	`as£¹
(
	`isEnqueuabË
(
»f
));

745 
	`dvmS‘F›ldObjeù
(
»f
, 
zomb›Off£t
, 
»ã»Á
);

746 
	`ş—rReã»nû
(
»f
);

747 
	`’queueReã»nû
(
»f
);

748 
hasEnqueued
 = 
Œue
;

751 ià(
hasEnqueued
) {

752 
	`´oûssM¬kSck
(
ùx
);

754 
	`as£¹
(*
li¡
 =ğ
NULL
);

755 
	}
}

764 
	$dvmS‘Fš®izabË
(
Objeù
 *
obj
)

766 
	`as£¹
(
obj
 !ğ
NULL
);

767 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

768 
	`as£¹
(
£lf
 !ğ
NULL
);

769 
M‘hod
 *
m‘h
 = 
gDvm
.
m‘hJavaLªgRefFš®iz”Reã»nûAdd
;

770 
	`as£¹
(
m‘h
 !ğ
NULL
);

771 
JV®ue
 
unu£dResuÉ
;

772 
	`dvmC®lM‘hod
(
£lf
, 
m‘h
, 
NULL
, &
unu£dResuÉ
, 
obj
);

773 
	}
}

778 
	$dvmH—pProûssReã»nûs
(
Objeù
 **
soáReã»nûs
, 
boŞ
 
ş—rSoáRefs
,

779 
Objeù
 **
w—kReã»nûs
,

780 
Objeù
 **
fš®iz”Reã»nûs
,

781 
Objeù
 **
phªtomReã»nûs
)

783 
	`as£¹
(
soáReã»nûs
 !ğ
NULL
);

784 
	`as£¹
(
w—kReã»nûs
 !ğ
NULL
);

785 
	`as£¹
(
fš®iz”Reã»nûs
 !ğ
NULL
);

786 
	`as£¹
(
phªtomReã»nûs
 !ğ
NULL
);

792 ià(!
gDvm
.
zygÙe
 && !
ş—rSoáRefs
) {

793 
	`´e£rveSomeSoáReã»nûs
(
soáReã»nûs
);

799 
	`ş—rWh™eReã»nûs
(
soáReã»nûs
);

800 
	`ş—rWh™eReã»nûs
(
w—kReã»nûs
);

805 
	`’queueFš®iz”Reã»nûs
(
fš®iz”Reã»nûs
);

810 
	`ş—rWh™eReã»nûs
(
soáReã»nûs
);

811 
	`ş—rWh™eReã»nûs
(
w—kReã»nûs
);

815 
	`ş—rWh™eReã»nûs
(
phªtomReã»nûs
);

819 
	`as£¹
(*
soáReã»nûs
 =ğ
NULL
);

820 
	`as£¹
(*
w—kReã»nûs
 =ğ
NULL
);

821 
	`as£¹
(*
fš®iz”Reã»nûs
 =ğ
NULL
);

822 
	`as£¹
(*
phªtomReã»nûs
 =ğ
NULL
);

823 
	}
}

828 
	$dvmEnqueueCË¬edReã»nûs
(
Objeù
 **
ş—»d
)

830 
	`as£¹
(
ş—»d
 !ğ
NULL
);

831 ià(*
ş—»d
 !ğ
NULL
) {

832 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

833 
	`as£¹
(
£lf
 !ğ
NULL
);

834 
M‘hod
 *
m‘h
 = 
gDvm
.
m‘hJavaLªgRefReã»nûQueueAdd
;

835 
	`as£¹
(
m‘h
 !ğ
NULL
);

836 
JV®ue
 
unu£d
;

837 
Objeù
 *
»ã»nû
 = *
ş—»d
;

838 
	`dvmC®lM‘hod
(
£lf
, 
m‘h
, 
NULL
, &
unu£d
, 
»ã»nû
);

839 *
ş—»d
 = 
NULL
;

841 
	}
}

843 
	$dvmH—pFšishM¬kS‹p
()

845 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

849 
	`dvmH—pSourûZ”oM¬kB™m­
();

853 
	`de¡royM¬kSck
(&
ùx
->
¡ack
);

855 
ùx
->
fšg”
 = 
NULL
;

856 
	}
}

858 
	sSw“pCÚ‹xt
 {

859 
size_t
 
	mnumObjeùs
;

860 
size_t
 
	mnumBy‹s
;

861 
boŞ
 
	misCÚcu¼’t
;

864 
	$sw“pB™m­C®lback
(
size_t
 
numPŒs
, **
±rs
, *
¬g
)

866 
	`as£¹
(
¬g
 !ğ
NULL
);

867 
Sw“pCÚ‹xt
 *
ùx
 = (Sw“pCÚ‹xˆ*)
¬g
;

868 ià(
ùx
->
isCÚcu¼’t
) {

869 
	`dvmLockH—p
();

871 
ùx
->
numBy‹s
 +ğ
	`dvmH—pSourûF»eLi¡
(
numPŒs
, 
±rs
);

872 
ùx
->
numObjeùs
 +ğ
numPŒs
;

873 ià(
ùx
->
isCÚcu¼’t
) {

874 
	`dvmUÆockH—p
();

876 
	}
}

882 
	$isUnm¬kedObjeù
(*
obj
)

884  !
	`isM¬ked
((
Objeù
 *)
obj
, &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
);

885 
	}
}

887 
	$sw“pW—kJniGlob®s
()

889 
IndœeùRefTabË
* 
bË
 = &
gDvm
.
jniW—kGlob®RefTabË
;

890 
GcM¬kCÚ‹xt
* 
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

891 
IndœeùRefTabË
::
	t™”©Ü
 
	tIt
;

892 
It
 
™
 = 
bË
->
	`begš
(), 
’d
 =abË->
	`’d
(); it !=ƒnd; ++it) {

893 
Objeù
** 
’Œy
 = *
™
;

894 ià(!
	`isM¬ked
(*
’Œy
, 
ùx
)) {

895 *
’Œy
 = 
kCË¬edJniW—kGlob®
;

898 
	}
}

904 
	$dvmH—pSw“pSy¡emW—ks
()

906 
	`dvmGcD‘achD—dIÁ”ÃdSŒšgs
(
isUnm¬kedObjeù
);

907 
	`dvmSw“pMÚ™ÜLi¡
(&
gDvm
.
mÚ™ÜLi¡
, 
isUnm¬kedObjeù
);

908 
	`sw“pW—kJniGlob®s
();

909 
	}
}

915 
	$dvmH—pSw“pUnm¬kedObjeùs
(
boŞ
 
isP¬tŸl
, boŞ 
isCÚcu¼’t
,

916 
size_t
 *
numObjeùs
, size_ˆ*
numBy‹s
)

918 
ušŒ_t
 
ba£
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

919 
ušŒ_t
 
max
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

920 
Sw“pCÚ‹xt
 
ùx
;

921 
H—pB™m­
 *
´evLive
, *
´evM¬k
;

922 
size_t
 
numH—ps
, 
numSw“pH—ps
;

924 
numH—ps
 = 
	`dvmH—pSourûG‘NumH—ps
();

925 
	`dvmH—pSourûG‘RegiÚs
(
ba£
, 
max
, 
numH—ps
);

926 ià(
isP¬tŸl
) {

927 
	`as£¹
((
ušŒ_t
)
gDvm
.
gcH—p
->
m¬kCÚ‹xt
.
immuÃLim™
 =ğ
ba£
[0]);

928 
numSw“pH—ps
 = 1;

930 
numSw“pH—ps
 = 
numH—ps
;

932 
ùx
.
numObjeùs
 = ctx.
numBy‹s
 = 0;

933 
ùx
.
isCÚcu¼’t
 = isConcurrent;

934 
´evLive
 = 
	`dvmH—pSourûG‘M¬kB™s
();

935 
´evM¬k
 = 
	`dvmH—pSourûG‘LiveB™s
();

936 
size_t
 
i
 = 0; i < 
numSw“pH—ps
; ++i) {

937 
	`dvmH—pB™m­Sw“pW®k
(
´evLive
, 
´evM¬k
, 
ba£
[
i
], 
max
[i],

938 
sw“pB™m­C®lback
, &
ùx
);

940 *
numObjeùs
 = 
ùx
.numObjects;

941 *
numBy‹s
 = 
ùx
.numBytes;

942 ià(
gDvm
.
®locProf
.
’abËd
) {

943 
gDvm
.
®locProf
.
ä“CouÁ
 +ğ
ùx
.
numObjeùs
;

944 
gDvm
.
®locProf
.
ä“Size
 +ğ
ùx
.
numBy‹s
;

946 
	}
}

	@vm/alloc/MarkSweep.h

16 #iâdeà
DALVIK_ALLOC_MARK_SWEEP_H_


17 
	#DALVIK_ALLOC_MARK_SWEEP_H_


	)

19 
	~"®loc/H—pB™m­.h
"

20 
	~"®loc/H—pSourû.h
"

22 
	sGcM¬kSck
 {

25 cÚ¡ 
Objeù
 **
	mlim™
;

29 cÚ¡ 
Objeù
 **
	mtİ
;

33 cÚ¡ 
Objeù
 **
	mba£
;

37 
size_t
 
	mËngth
;

42 
	sGcM¬kCÚ‹xt
 {

43 
H—pB™m­
 *
	mb™m­
;

44 
GcM¬kSck
 
	m¡ack
;

45 cÚ¡ *
	mimmuÃLim™
;

46 cÚ¡ *
	mfšg”
;

49 
boŞ
 
dvmH—pBegšM¬kS‹p
(boŞ 
isP¬tŸl
);

50 
dvmH—pM¬kRoÙS‘
();

51 
dvmH—pReM¬kRoÙS‘
();

52 
dvmH—pSÿnM¬kedObjeùs
();

53 
dvmH—pReSÿnM¬kedObjeùs
();

54 
dvmH—pProûssReã»nûs
(
Objeù
 **
soáReã»nûs
, 
boŞ
 
ş—rSoáRefs
,

55 
Objeù
 **
w—kReã»nûs
,

56 
Objeù
 **
fš®iz”Reã»nûs
,

57 
Objeù
 **
phªtomReã»nûs
);

58 
dvmH—pFšishM¬kS‹p
();

59 
dvmH—pSw“pSy¡emW—ks
();

60 
dvmH—pSw“pUnm¬kedObjeùs
(
boŞ
 
isP¬tŸl
, boŞ 
isCÚcu¼’t
,

61 
size_t
 *
numObjeùs
, size_ˆ*
numBy‹s
);

62 
dvmEnqueueCË¬edReã»nûs
(
Objeù
 **
»ã»nûs
);

	@vm/alloc/TEST/HeapBitmapTest/include/Dalvik.h

1 #iâdeà
DALVIK_H_


2 
	#DALVIK_H_


	)

4 
	~<¡dio.h
>

5 
	~<¡dboŞ.h
>

6 
	~<¡dlib.h
>

7 
	~<¡ršg.h
>

8 
	~<uni¡d.h
>

9 
	~<lim™s.h
>

11 
	#ALOGW
(...è
	`´štf
("W/" 
__VA_ARGS__
)

	)

12 
	#ALOGE
(...è
	`´štf
("E/" 
__VA_ARGS__
)

	)

14 
šlše
 
	$dvmAbÜt
() {

15 
	`ex™
(1);

16 
	}
}

	@vm/alloc/TEST/HeapBitmapTest/include/cutils/ashmem.h

1 #iâdeà
ASHMEM_H_


2 
	#ASHMEM_H_


	)

4 
	~<fú.h
>

6 
	#ASHMEM_NAME_LEN
 128

	)

8 
šlše
 

9 
	$ashmem_ü—‹_»giÚ
(cÚ¡ *
Çme
, 
size_t
 
Ën
)

11  
	`İ’
("/dev/z”o", 
O_RDWR
);

12 
	}
}

	@vm/alloc/TEST/HeapBitmapTest/main.c

1 
	~<¡dio.h
>

2 
	~<¡dboŞ.h
>

3 
	~<¡dšt.h
>

4 
	~<as£¹.h
>

5 
	~<¡ršg.h
>

6 
	~<uni¡d.h
>

7 
	#__©Œibu‹
(
x
è

	)

8 
	~"H—pB™m­.h
"

9 #undeà
__©Œibu‹


11 
	#PAGE_SIZE
 4096

	)

12 
	#HEAP_BASE
 ((*)0x10000)

	)

13 
	#HEAP_SIZE
 (5 * 
PAGE_SIZE
 + 888)

	)

15 
	#VERBOSE
 1

	)

16 #ià
VERBOSE


17 
	#TRACE
(...è
	`´štf
(
__VA_ARGS__
)

	)

19 
	#TRACE
(...è

	)

23 
	$‹¡_š™
()

25 
H—pB™m­
 
hb
;

26 
boŞ
 
ok
;

28 
	`mem£t
(&
hb
, 0x55, (hb));

30 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

31 
	`as£¹
(
ok
);

33 
	`as£¹
(
hb
.
b™s
 !ğ
NULL
);

34 
	`as£¹
(
hb
.
b™sL’
 >ğ
	`HB_OFFSET_TO_INDEX
(
HEAP_SIZE
));

35 
	`as£¹
(
hb
.
ba£
 =ğ(
ušŒ_t
)
HEAP_BASE
);

36 
	`as£¹
(
hb
.
max
 < hb.
ba£
);

40 *
hb
.
b™s
 = 0x55;

41 
	`as£¹
(*
hb
.
b™s
 = 0x55);

42 *
hb
.
b™s
 = 0;

44 
	#TEST_UNMAP
 0

	)

45 #ià
TEST_UNMAP


48 *
b™s
 = 
hb
.bits;

51 
	`dvmH—pB™m­D–‘e
(&
hb
);

53 
	`as£¹
(
hb
.
b™s
 =ğ
NULL
);

54 
	`as£¹
(
hb
.
b™sL’
 == 0);

55 
	`as£¹
(
hb
.
ba£
 == 0);

56 
	`as£¹
(
hb
.
max
 == 0);

58 #ià
TEST_UNMAP


61 *
b™s
 = 0x55;

62 
	`as£¹
(!"Should have segfaulted");

64 
	}
}

66 
boŞ
 
	$is_z”Ûd
(cÚ¡ 
H—pB™m­
 *
hb
)

68 
i
;

70 
i
 = 0; i < 
hb
->
b™sL’
 /  (*hb->
b™s
); i++) {

71 ià(
hb
->
b™s
[
i
] != 0L) {

72  
çl£
;

75  
Œue
;

76 
	}
}

78 
	$as£¹_em±y
(cÚ¡ 
H—pB™m­
 *
hb
)

80 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

81 
	`as£¹
(
hb
->
b™sL’
 >ğ
	`HB_OFFSET_TO_INDEX
(
HEAP_SIZE
));

82 
	`as£¹
(
hb
->
ba£
 =ğ(
ušŒ_t
)
HEAP_BASE
);

83 
	`as£¹
(
hb
->
max
 < hb->
ba£
);

85 
	`as£¹
(
	`is_z”Ûd
(
hb
));

87 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

88 
HEAP_BASE
));

89 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

90 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

91 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

92 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

93 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

94 
HEAP_BASE
 + 
HEAP_SIZE
));

96 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

97 
HEAP_BASE
));

98 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

99 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

100 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

101 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

102 
	}
}

105 
	$‹¡_b™s
()

107 
H—pB™m­
 
hb
;

108 
boŞ
 
ok
;

110 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

111 
	`as£¹
(
ok
);

113 
	`as£¹_em±y
(&
hb
);

117 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
);

118 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

119 
HEAP_BASE
));

120 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

121 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

122 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

123 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

124 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

125 
HEAP_BASE
 + 
HEAP_SIZE
));

127 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

128 
HEAP_BASE
));

129 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

130 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

131 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

132 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

136 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

137 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

138 
HEAP_BASE
));

139 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

140 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

141 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

142 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

143 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

144 
HEAP_BASE
 + 
HEAP_SIZE
));

146 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

147 
HEAP_BASE
));

148 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

149 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

150 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

151 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

155 
	`dvmH—pB™m­CË¬ObjeùB™
(&
hb
, 
HEAP_BASE
);

156 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

157 
HEAP_BASE
));

158 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

159 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

160 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

161 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

162 
	`as£¹
(!
	`is_z”Ûd
(&
hb
));

166 
	`dvmH—pB™m­CË¬ObjeùB™
(&
hb
,

167 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

168 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

169 
HEAP_BASE
));

170 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

171 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

172 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

173 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

174 
	`as£¹
(
	`is_z”Ûd
(&
hb
));

178 
	`dvmH—pB™m­D–‘e
(&
hb
);

179 
	}
}

182 
	$‹¡_ş—r
()

184 
H—pB™m­
 
hb
;

185 
boŞ
 
ok
;

187 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

188 
	`as£¹
(
ok
);

189 
	`as£¹_em±y
(&
hb
);

193 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

194 
	`as£¹
(!
	`is_z”Ûd
(&
hb
));

198 
	`dvmH—pB™m­Z”o
(&
hb
);

199 
	`as£¹_em±y
(&
hb
);

203 
	`dvmH—pB™m­D–‘e
(&
hb
);

204 
	}
}

207 
	$‹¡_modify
()

209 
H—pB™m­
 
hb
;

210 
boŞ
 
ok
;

211 
b™
;

213 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

214 
	`as£¹
(
ok
);

215 
	`as£¹_em±y
(&
hb
);

219 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
, 
HEAP_BASE
);

220 
	`as£¹
(
b™
 == 0);

221 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

222 
HEAP_BASE
));

223 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

224 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

225 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

226 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

227 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

228 
HEAP_BASE
 + 
HEAP_SIZE
));

230 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

231 
HEAP_BASE
));

232 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

233 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

234 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

235 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

239 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
, 
HEAP_BASE
);

240 
	`as£¹
(
b™
 != 0);

241 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

242 
HEAP_BASE
));

243 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

244 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

245 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

246 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

247 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

248 
HEAP_BASE
 + 
HEAP_SIZE
));

250 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

251 
HEAP_BASE
));

252 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

253 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

254 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

255 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

259 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
,

260 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

261 
	`as£¹
(
b™
 == 0);

262 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

263 
HEAP_BASE
));

264 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

265 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

266 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

267 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

268 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

269 
HEAP_BASE
 + 
HEAP_SIZE
));

271 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

272 
HEAP_BASE
));

273 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

274 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

275 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

276 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

280 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
,

281 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

282 
	`as£¹
(
b™
 != 0);

283 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

284 
HEAP_BASE
));

285 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

286 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

287 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

288 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

289 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

290 
HEAP_BASE
 + 
HEAP_SIZE
));

292 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

293 
HEAP_BASE
));

294 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

295 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

296 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

297 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

301 
	`dvmH—pB™m­D–‘e
(&
hb
);

302 
	}
}

308 *
	ggC®lbackArg
 = 
NULL
;

310 
	#NUM_XOR_PTRS
 128

	)

311 
size_t
 
	ggNumPŒs
;

312 *
	ggXÜPŒs
[
NUM_XOR_PTRS
];

313 
boŞ
 
	ggCË¬edPŒs
[
NUM_XOR_PTRS
];

314 
boŞ
 
	ggS“nPŒs
[
NUM_XOR_PTRS
];

316 
boŞ


317 
	$xÜC®lback
(
size_t
 
numPŒs
, **
±rs
, cÚ¡ *
fšg”
, *
¬g
)

319 
	`as£¹
(
numPŒs
 > 0);

320 
	`as£¹
(
±rs
 !ğ
NULL
);

321 
	`as£¹
(
¬g
 =ğ
gC®lbackArg
);

323 
size_t
 
i
;

324 
i
 = 0; i < 
numPŒs
; i++) {

325 
	`as£¹
(
±rs
[
i
] < 
fšg”
);

326 
	`´štf
("callback: 0x%08x ( < 0x%08x )\n",

327 (
ušŒ_t
)
±rs
[
i
], (ušŒ_t)
fšg”
);

330  
Œue
;

331 
	}
}

333 
boŞ


334 
	$£’AndCË¬edM©ch
()

336 
size_t
 
i
;

337 
i
 = 0; i < 
gNumPŒs
; i++) {

338 ià(
gCË¬edPŒs
[
i
] !ğ
gS“nPŒs
[i]) {

339  
çl£
;

342  
Œue
;

343 
	}
}

346 
	$run_xÜ
(
ssize_t
 
off£t
, 
size_t
 
¡•
)

348 
	`as£¹
(
¡•
 != 0);

349 
	`as£¹
(
¡•
 < 
HEAP_SIZE
);

353 
ušŒ_t
 
ba£
;

354 
ušŒ_t
 
tİ
;

355 ià(
off£t
 >= 0) {

356 
ba£
 = (
ušŒ_t
)
HEAP_BASE
 + 
off£t
;

358 
ba£
 = (
ušŒ_t
)
HEAP_BASE
 + (ušŒ_t)
HEAP_SIZE
 + 
off£t
;

360 ià(
ba£
 < (
ušŒ_t
)
HEAP_BASE
) {

361 
ba£
 = (
ušŒ_t
)
HEAP_BASE
;

362 } ià(
ba£
 > (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
)) {

363 
ba£
 = (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
);

365 
ba£
 = (ba£ + 
HB_OBJECT_ALIGNMENT
 - 1) & ~(HB_OBJECT_ALIGNMENT - 1);

367 
¡•
 *ğ
HB_OBJECT_ALIGNMENT
;

368 
tİ
 = 
ba£
 + 
¡•
 * 
NUM_XOR_PTRS
;

369 ià(
tİ
 > (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
)) {

370 
tİ
 = (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
);

375 
gNumPŒs
 = 0;

376 
	`mem£t
(
gXÜPŒs
, 0, (gXorPtrs));

377 
	`mem£t
(
gCË¬edPŒs
, 0, (gClearedPtrs));

378 
	`mem£t
(
gS“nPŒs
, 0, (gSeenPtrs));

380 
ušŒ_t
 
addr
;

381 **
p
 = 
gXÜPŒs
;

382 
addr
 = 
ba£
;‡dd¸< 
tİ
;‡dd¸+ğ
¡•
) {

383 *
p
++ = (*)
addr
;

384 
gNumPŒs
++;

386 
	`as£¹
(
	`£’AndCË¬edM©ch
());

390 
H—pB™m­
 
hb1
, 
hb2
;

391 
boŞ
 
ok
;

393 
ok
 = 
	`dvmH—pB™m­In™
(&
hb1
, 
HEAP_BASE
, 
HEAP_SIZE
, "test1");

394 
	`as£¹
(
ok
);

395 
ok
 = 
	`dvmH—pB™m­In™FromTem¶©e
(&
hb2
, &
hb1
, "test2");

396 
	`as£¹
(
ok
);

400 
	`TRACE
("walk 0\n");

401 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

402 
	`as£¹
(
ok
);

403 
	`as£¹
(
	`£’AndCË¬edM©ch
());

407 
	`TRACE
("walk 1\n");

408 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb1
, (*)
ba£
);

409 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

410 
	`as£¹
(
ok
);

414 
	`TRACE
("walk 2\n");

415 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, (*)
ba£
);

416 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

417 
	`as£¹
(
ok
);

421 
	`dvmH—pB™m­Z”o
(&
hb1
);

422 
	`as£¹_em±y
(&
hb1
);

423 
	`dvmH—pB™m­Z”o
(&
hb2
);

424 
	`as£¹_em±y
(&
hb2
);

429 
size_t
 
i
;

430 
i
 = 0; i < 
gNumPŒs
; i++) {

431 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb1
, 
gXÜPŒs
[
i
]);

433 
	`TRACE
("walk 3\n");

434 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

435 
	`as£¹
(
ok
);

439 
i
 = 0; i < 
gNumPŒs
; i += 3) {

440 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, 
gXÜPŒs
[
i
]);

442 
	`TRACE
("walk 4\n");

443 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

444 
	`as£¹
(
ok
);

448 
i
 = 0; i < 
gNumPŒs
; i += 2) {

449 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, 
gXÜPŒs
[
i
]);

451 
	`TRACE
("walk 5\n");

452 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

453 
	`as£¹
(
ok
);

457 
	`TRACE
("walk 6\n");

458 
ok
 = 
	`dvmH—pB™m­W®k
(&
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

459 
	`as£¹
(
ok
);

466 
	`dvmH—pB™m­D–‘e
(&
hb1
);

467 
	`dvmH—pB™m­D–‘e
(&
hb2
);

468 
	}
}

471 
	$‹¡_xÜ
()

473 
	`run_xÜ
(0, 1);

474 
	`run_xÜ
(100, 34);

475 
	}
}

477 
	$maš
(
¬gc
, *
¬gv
[])

479 
	`´štf
("test_init...\n");

480 
	`‹¡_š™
();

482 
	`´štf
("test_bits...\n");

483 
	`‹¡_b™s
();

485 
	`´štf
("test_clear...\n");

486 
	`‹¡_ş—r
();

488 
	`´štf
("test_modify...\n");

489 
	`‹¡_modify
();

491 
	`´štf
("test_xor...\n");

492 
	`‹¡_xÜ
();

494 
	`´štf
("done.\n");

496 
	}
}

	@vm/alloc/Verify.cpp

17 
	~"D®vik.h
"

18 
	~"®loc/H—pB™m­.h
"

19 
	~"®loc/H—pSourû.h
"

20 
	~"®loc/V”ify.h
"

21 
	~"®loc/Vis™.h
"

28 
	$dumpReã»nûsVis™Ü
(*
pObj
, *
¬g
)

30 
Objeù
 *
obj
 = *(Objeù **)
pObj
;

31 
Objeù
 *
lookšgFÜ
 = *(Objeù **)
¬g
;

32 ià(
lookšgFÜ
 !ğ
NULL
 &&†ookšgFÜ =ğ
obj
) {

33 *(
Objeù
 **)
¬g
 = 
NULL
;

35 
	}
}

41 
	$dumpReã»nûsC®lback
(
Objeù
 *
obj
, *
¬g
)

43 ià(
obj
 =ğ(
Objeù
 *)
¬g
) {

46 
	`dvmVis™Objeù
(
dumpReã»nûsVis™Ü
, 
obj
, &
¬g
);

47 ià(
¬g
 =ğ
NULL
) {

48 
	`ALOGD
("Found %°šhh—°@ %p", 
¬g
, 
obj
);

49 
	`dvmDumpObjeù
(
obj
);

51 
	}
}

57 
	$dumpReã»nûsRoÙVis™Ü
(*
±r
, 
u4
 
th»adId
,

58 
RoÙTy³
 
ty³
, *
¬g
)

60 
Objeù
 *
obj
 = *(Objeù **)
±r
;

61 
Objeù
 *
lookšgFÜ
 = *(Objeù **)
¬g
;

62 ià(
obj
 =ğ
lookšgFÜ
) {

63 
	`ALOGD
("Found %°š‡„oÙ @ %p", 
¬g
, 
±r
);

65 
	}
}

70 
	$dumpReã»nûs
(cÚ¡ 
Objeù
 *
obj
)

72 
H—pB™m­
 *
b™m­
 = 
	`dvmH—pSourûG‘LiveB™s
();

73 *
¬g
 = (*)
obj
;

74 
	`dvmVis™RoÙs
(
dumpReã»nûsRoÙVis™Ü
, 
¬g
);

75 
	`dvmH—pB™m­W®k
(
b™m­
, 
dumpReã»nûsC®lback
, 
¬g
);

76 
	}
}

81 
	$v”ifyReã»nû
(*
addr
, *
¬g
)

83 
Objeù
 *
obj
;

84 
boŞ
 
isV®id
;

86 
	`as£¹
(
addr
 !ğ
NULL
);

87 
obj
 = *(
Objeù
 **)
addr
;

88 ià(
obj
 =ğ
NULL
) {

89 
isV®id
 = 
Œue
;

91 
isV®id
 = 
	`dvmIsV®idObjeù
(
obj
);

93 ià(!
isV®id
) {

94 
Objeù
 **
·»Á
 = (Objeù **)
¬g
;

95 ià(*
·»Á
 !ğ
NULL
) {

96 
	`ALOGE
("V”ify oàobjeù %°çed", *
·»Á
);

97 
	`dvmDumpObjeù
(*
·»Á
);

98 *
·»Á
 = 
NULL
;

100 
	`ALOGE
("V”ify oà»ã»nû %°@ %°çed", 
obj
, 
addr
);

101 
	`dvmDumpObjeù
(
obj
);

103 
	}
}

108 
	$dvmV”ifyObjeù
(cÚ¡ 
Objeù
 *
obj
)

110 
Objeù
 *
¬g
 = 
cÚ¡_ÿ¡
<Objeù*>(
obj
);

111 
	`dvmVis™Objeù
(
v”ifyReã»nû
, 
¬g
, &arg);

112 ià(
¬g
 =ğ
NULL
) {

113 
	`dumpReã»nûs
(
obj
);

114 
	`dvmAbÜt
();

116 
	}
}

121 
	$v”ifyB™m­C®lback
(
Objeù
 *
obj
, *
¬g
)

123 
	`dvmV”ifyObjeù
(
obj
);

124 
	}
}

130 
	$dvmV”ifyB™m­
(cÚ¡ 
H—pB™m­
 *
b™m­
)

132 
	`dvmH—pB™m­W®k
(
b™m­
, 
v”ifyB™m­C®lback
, 
NULL
);

133 
	}
}

138 
	$v”ifyRoÙReã»nû
(*
addr
, 
u4
 
th»adId
,

139 
RoÙTy³
 
ty³
, *
¬g
)

141 
	`v”ifyReã»nû
(
addr
, 
¬g
);

142 
	}
}

147 
	$dvmV”ifyRoÙs
()

149 
	`dvmVis™RoÙs
(
v”ifyRoÙReã»nû
, 
NULL
);

150 
	}
}

	@vm/alloc/Verify.h

17 #iâdeà
DALVIK_ALLOC_VERIFY_H_


18 
	#DALVIK_ALLOC_VERIFY_H_


	)

23 
dvmV”ifyObjeù
(cÚ¡ 
Objeù
 *
obj
);

29 
dvmV”ifyB™m­
(cÚ¡ 
H—pB™m­
 *
b™m­
);

34 
dvmV”ifyRoÙs
();

	@vm/alloc/Visit.cpp

17 
	~"D®vik.h
"

18 
	~"®loc/H—pIÁ”Çl.h
"

19 
	~"®loc/Vis™.h
"

20 
	~"®loc/Vis™IÆšes.h
"

25 
	$dvmVis™Objeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

27 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

28 
	`as£¹
(
obj
 !ğ
NULL
);

29 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

30 
	`vis™Objeù
(
vis™Ü
, 
obj
, 
¬g
);

31 
	}
}

36 
	$vis™HashTabË
(
RoÙVis™Ü
 *
vis™Ü
, 
HashTabË
 *
bË
,

37 
RoÙTy³
 
ty³
, *
¬g
)

39 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

40 
	`as£¹
(
bË
 !ğ
NULL
);

41 
	`dvmHashTabËLock
(
bË
);

42 
i
 = 0; i < 
bË
->
bËSize
; ++i) {

43 
HashEÁry
 *
’Œy
 = &
bË
->
pEÁr›s
[
i
];

44 ià(
’Œy
->
d©a
 !ğ
NULL
 &&ƒÁry->d©¨!ğ
HASH_TOMBSTONE
) {

45 (*
vis™Ü
)(&
’Œy
->
d©a
, 0, 
ty³
, 
¬g
);

48 
	`dvmHashTabËUÆock
(
bË
);

49 
	}
}

54 
	$vis™Reã»nûTabË
(
RoÙVis™Ü
 *
vis™Ü
, 
Reã»nûTabË
 *
bË
,

55 
u4
 
th»adId
, 
RoÙTy³
 
ty³
, *
¬g
)

57 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

58 
	`as£¹
(
bË
 !ğ
NULL
);

59 
Objeù
 **
’Œy
 = 
bË
->bË;ƒÁry <abË->
ÃxtEÁry
; ++entry) {

60 
	`as£¹
(
’Œy
 !ğ
NULL
);

61 (*
vis™Ü
)(
’Œy
, 
th»adId
, 
ty³
, 
¬g
);

63 
	}
}

68 
	$vis™IndœeùRefTabË
(
RoÙVis™Ü
 *
vis™Ü
, 
IndœeùRefTabË
 *
bË
,

69 
u4
 
th»adId
, 
RoÙTy³
 
ty³
, *
¬g
)

71 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

72 
	`as£¹
(
bË
 !ğ
NULL
);

73 
IndœeùRefTabË
::
	t™”©Ü
 
	tIt
;

74 
It
 
™
 = 
bË
->
	`begš
(), 
’d
 =abË->
	`’d
(); it !=ƒnd; ++it) {

75 (*
vis™Ü
)(*
™
, 
th»adId
, 
ty³
, 
¬g
);

77 
	}
}

83 
	$vis™Th»adSck
(
RoÙVis™Ü
 *
vis™Ü
, 
Th»ad
 *
th»ad
, *
¬g
)

85 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

86 
	`as£¹
(
th»ad
 !ğ
NULL
);

87 
u4
 
th»adId
 = 
th»ad
->threadId;

88 cÚ¡ 
SckSaveA»a
 *
§veA»a
;

89 
u4
 *
å
 = (u4 *)
th»ad
->
š‹½Save
.
curF¿me
;

90 
å
 !ğ
NULL
;

91 
å
 = (
u4
 *)
§veA»a
->
´evF¿me
) {

92 
M‘hod
 *
m‘hod
;

93 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

94 
m‘hod
 = (
M‘hod
 *)
§veA»a
->method;

95 ià(
m‘hod
 !ğ
NULL
 && !
	`dvmIsN©iveM‘hod
(method)) {

96 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
m‘hod
);

97 cÚ¡ 
u1
* 
»gVeùÜ
 = 
NULL
;

98 ià(
pM­
 !ğ
NULL
) {

100 
addr
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

101 
»gVeùÜ
 = 
	`dvmRegi¡”M­G‘Lše
(
pM­
, 
addr
);

103 ià(
»gVeùÜ
 =ğ
NULL
) {

109 
size_t
 
i
 = 0; i < 
m‘hod
->
»gi¡”sSize
; ++i) {

110 ià(
	`dvmIsV®idObjeù
((
Objeù
 *)
å
[
i
])) {

111 (*
vis™Ü
)(&
å
[
i
], 
th»adId
, 
ROOT_JAVA_FRAME
, 
¬g
);

123 
u2
 
b™s
 = 1 << 1;

124 
size_t
 
i
 = 0; i < 
m‘hod
->
»gi¡”sSize
; ++i) {

125 
b™s
 >>= 1;

126 ià(
b™s
 == 1) {

128 
b™s
 = *
»gVeùÜ
++ | 0x0100;

130 ià((
b™s
 & 0x1) != 0) {

134 #ià
WITH_EXTRA_GC_CHECKS


135 ià(
å
[
i
] !ğ0 && !
	`dvmIsV®idObjeù
((
Objeù
 *)fp[i])) {

137 
	`ALOGE
("PGC: invalid„ef in„eg %d: %#x",

138 
m‘hod
->
»gi¡”sSize
 - 1 - 
i
, 
å
[i]);

139 
	`ALOGE
("PGC: %s.%s‡ddr %#x",

140 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

141 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
);

145 (*
vis™Ü
)(&
å
[
i
], 
th»adId
, 
ROOT_JAVA_FRAME
, 
¬g
);

148 
	`dvmR–—£Regi¡”M­Lše
(
pM­
, 
»gVeùÜ
);

154 
	`as£¹
((
ušŒ_t
)
§veA»a
->
´evF¿me
 > (ušŒ_t)
å
 ||

155 
§veA»a
->
´evF¿me
 =ğ
NULL
);

157 
	}
}

162 
	$vis™Th»ad
(
RoÙVis™Ü
 *
vis™Ü
, 
Th»ad
 *
th»ad
, *
¬g
)

164 
u4
 
th»adId
;

166 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

167 
	`as£¹
(
th»ad
 !ğ
NULL
);

168 
th»adId
 = 
th»ad
->threadId;

169 (*
vis™Ü
)(&
th»ad
->
th»adObj
, 
th»adId
, 
ROOT_THREAD_OBJECT
, 
¬g
);

170 (*
vis™Ü
)(&
th»ad
->
exû±iÚ
, 
th»adId
, 
ROOT_NATIVE_STACK
, 
¬g
);

171 
	`vis™Reã»nûTabË
(
vis™Ü
, &
th»ad
->
š‹º®LoÿlRefTabË
, 
th»adId
, 
ROOT_NATIVE_STACK
, 
¬g
);

172 
	`vis™IndœeùRefTabË
(
vis™Ü
, &
th»ad
->
jniLoÿlRefTabË
, 
th»adId
, 
ROOT_JNI_LOCAL
, 
¬g
);

173 ià(
th»ad
->
jniMÚ™ÜRefTabË
.
bË
 !ğ
NULL
) {

174 
	`vis™Reã»nûTabË
(
vis™Ü
, &
th»ad
->
jniMÚ™ÜRefTabË
, 
th»adId
, 
ROOT_JNI_MONITOR
, 
¬g
);

176 
	`vis™Th»adSck
(
vis™Ü
, 
th»ad
, 
¬g
);

177 
	}
}

182 
	$vis™Th»ads
(
RoÙVis™Ü
 *
vis™Ü
, *
¬g
)

184 
Th»ad
 *
th»ad
;

186 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

187 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

188 
th»ad
 = 
gDvm
.
th»adLi¡
;

189 
th»ad
) {

190 
	`vis™Th»ad
(
vis™Ü
, 
th»ad
, 
¬g
);

191 
th»ad
 =h»ad->
Ãxt
;

193 
	`dvmUÆockTh»adLi¡
();

194 
	}
}

196 
	$vis™Prim™iveTy³s
(
RoÙVis™Ü
 *
vis™Ü
, *
¬g
)

198 (*
vis™Ü
)(&
gDvm
.
ty³Void
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

199 (*
vis™Ü
)(&
gDvm
.
ty³BoŞ—n
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

200 (*
vis™Ü
)(&
gDvm
.
ty³By‹
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

201 (*
vis™Ü
)(&
gDvm
.
ty³ShÜt
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

202 (*
vis™Ü
)(&
gDvm
.
ty³Ch¬
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

203 (*
vis™Ü
)(&
gDvm
.
ty³IÁ
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

204 (*
vis™Ü
)(&
gDvm
.
ty³LÚg
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

205 (*
vis™Ü
)(&
gDvm
.
ty³Flßt
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

206 (*
vis™Ü
)(&
gDvm
.
ty³DoubË
, 0, 
ROOT_STICKY_CLASS
, 
¬g
);

207 
	}
}

212 
	$dvmVis™RoÙs
(
RoÙVis™Ü
 *
vis™Ü
, *
¬g
)

214 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

215 
	`vis™HashTabË
(
vis™Ü
, 
gDvm
.
lßdedCÏs£s
, 
ROOT_STICKY_CLASS
, 
¬g
);

216 
	`vis™Prim™iveTy³s
(
vis™Ü
, 
¬g
);

217 ià(
gDvm
.
dbgRegi¡ry
 !ğ
NULL
) {

218 
	`vis™HashTabË
(
vis™Ü
, 
gDvm
.
dbgRegi¡ry
, 
ROOT_DEBUGGER
, 
¬g
);

220 ià(
gDvm
.
l™”®SŒšgs
 !ğ
NULL
) {

221 
	`vis™HashTabË
(
vis™Ü
, 
gDvm
.
l™”®SŒšgs
, 
ROOT_INTERNED_STRING
, 
¬g
);

223 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

224 
	`vis™IndœeùRefTabË
(
vis™Ü
, &
gDvm
.
jniGlob®RefTabË
, 0, 
ROOT_JNI_GLOBAL
, 
¬g
);

225 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

226 
	`dvmLockMu‹x
(&
gDvm
.
jniPšRefLock
);

227 
	`vis™Reã»nûTabË
(
vis™Ü
, &
gDvm
.
jniPšRefTabË
, 0, 
ROOT_VM_INTERNAL
, 
¬g
);

228 
	`dvmUÆockMu‹x
(&
gDvm
.
jniPšRefLock
);

229 
	`vis™Th»ads
(
vis™Ü
, 
¬g
);

230 (*
vis™Ü
)(&
gDvm
.
outOfMemÜyObj
, 0, 
ROOT_VM_INTERNAL
, 
¬g
);

231 (*
vis™Ü
)(&
gDvm
.
š‹º®E¼ÜObj
, 0, 
ROOT_VM_INTERNAL
, 
¬g
);

232 (*
vis™Ü
)(&
gDvm
.
noCÏssDefFoundE¼ÜObj
, 0, 
ROOT_VM_INTERNAL
, 
¬g
);

233 
	}
}

	@vm/alloc/Visit.h

17 #iâdeà
DALVIK_ALLOC_VISIT_H_


18 
	#DALVIK_ALLOC_VISIT_H_


	)

20 
	~"D®vik.h
"

22 
	eRoÙTy³
 {

23 
	mROOT_UNKNOWN
 = 0,

24 
	mROOT_JNI_GLOBAL
,

25 
	mROOT_JNI_LOCAL
,

26 
	mROOT_JAVA_FRAME
,

27 
	mROOT_NATIVE_STACK
,

28 
	mROOT_STICKY_CLASS
,

29 
	mROOT_THREAD_BLOCK
,

30 
	mROOT_MONITOR_USED
,

31 
	mROOT_THREAD_OBJECT
,

32 
	mROOT_INTERNED_STRING
,

33 
	mROOT_DEBUGGER
,

34 
	mROOT_VM_INTERNAL
,

35 
	mROOT_JNI_MONITOR
,

42 
	tVis™Ü
(*
	taddr
, *
	t¬g
);

49 
	tRoÙVis™Ü
(*
	taddr
, 
	tu4
 
	tth»adId
, 
	tRoÙTy³
 
	tty³
, *
	t¬g
);

54 
dvmVis™Objeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
);

59 
dvmVis™RoÙs
(
RoÙVis™Ü
 *
vis™Ü
, *
¬g
);

	@vm/alloc/VisitInlines.h

17 #iâdeà
DALVIK_ALLOC_VISITINLINES_H_


18 
	#DALVIK_ALLOC_VISITINLINES_H_


	)

23 
	$vis™F›lds
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

25 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

26 
	`as£¹
(
obj
 !ğ
NULL
);

27 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

28 ià(
obj
->
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

29 
size_t
 
»fOff£ts
 = 
obj
->
şazz
->refOffsets;

30 
»fOff£ts
 != 0) {

31 
size_t
 
rshiá
 = 
	`CLZ
(
»fOff£ts
);

32 
size_t
 
off£t
 = 
	`CLASS_OFFSET_FROM_CLZ
(
rshiá
);

33 
Objeù
 **
»f
 = (Objeù **)
	`BYTE_OFFSET
(
obj
, 
off£t
);

34 (*
vis™Ü
)(
»f
, 
¬g
);

35 
»fOff£ts
 &ğ~(
CLASS_HIGH_BIT
 >> 
rshiá
);

38 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

39 
şazz
 !ğ
NULL
;

40 
şazz
 = cÏzz->
su³r
) {

41 
In¡F›ld
 *
f›ld
 = 
şazz
->
if›lds
;

42 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; ++i, ++
f›ld
) {

43 
size_t
 
off£t
 = 
f›ld
->
by‹Off£t
;

44 
Objeù
 **
»f
 = (Objeù **)
	`BYTE_OFFSET
(
obj
, 
off£t
);

45 (*
vis™Ü
)(
»f
, 
¬g
);

49 
	}
}

54 
	$vis™SticF›lds
(
Vis™Ü
 *
vis™Ü
, 
CÏssObjeù
 *
şazz
,

55 *
¬g
)

57 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

58 
	`as£¹
(
şazz
 !ğ
NULL
);

59 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; ++i) {

60 
ch
 = 
şazz
->
sf›lds
[
i
].
sigÇtu»
[0];

61 ià(
ch
 == '[' || ch == 'L') {

62 (*
vis™Ü
)(&
şazz
->
sf›lds
[
i
].
v®ue
.
l
, 
¬g
);

65 
	}
}

70 
	$vis™IÁ”çûs
(
Vis™Ü
 *
vis™Ü
, 
CÏssObjeù
 *
şazz
,

71 *
¬g
)

73 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

74 
	`as£¹
(
şazz
 !ğ
NULL
);

75 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; ++i) {

76 (*
vis™Ü
)(&
şazz
->
š‹rçûs
[
i
], 
¬g
);

78 
	}
}

83 
	$vis™CÏssObjeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

85 
CÏssObjeù
 *
asCÏss
;

87 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

88 
	`as£¹
(
obj
 !ğ
NULL
);

89 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

90 
	`as£¹
(!
	`¡rcmp
(
obj
->
şazz
->
desütÜ
, "Ljava/lang/Class;"));

91 (*
vis™Ü
)(&
obj
->
şazz
, 
¬g
);

92 
asCÏss
 = (
CÏssObjeù
 *)
obj
;

93 ià(
	`IS_CLASS_FLAG_SET
(
asCÏss
, 
CLASS_ISARRAY
)) {

94 (*
vis™Ü
)(&
asCÏss
->
–em’tCÏss
, 
¬g
);

96 ià(
asCÏss
->
¡©us
 > 
CLASS_IDX
) {

97 (*
vis™Ü
)(&
asCÏss
->
su³r
, 
¬g
);

99 (*
vis™Ü
)(&
asCÏss
->
şassLßd”
, 
¬g
);

100 
	`vis™F›lds
(
vis™Ü
, 
obj
, 
¬g
);

101 
	`vis™SticF›lds
(
vis™Ü
, 
asCÏss
, 
¬g
);

102 ià(
asCÏss
->
¡©us
 > 
CLASS_IDX
) {

103 
	`vis™IÁ”çûs
(
vis™Ü
, 
asCÏss
, 
¬g
);

105 
	}
}

111 
	$vis™A¼ayObjeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

113 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

114 
	`as£¹
(
obj
 !ğ
NULL
);

115 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

116 (*
vis™Ü
)(&
obj
->
şazz
, 
¬g
);

117 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISOBJECTARRAY
)) {

118 
A¼ayObjeù
 *
¬¿y
 = (A¼ayObjeù *)
obj
;

119 
Objeù
 **
cÚ‹Ás
 = (Objeù **)(*)
¬¿y
->contents;

120 
size_t
 
i
 = 0; i < 
¬¿y
->
Ëngth
; ++i) {

121 (*
vis™Ü
)(&
cÚ‹Ás
[
i
], 
¬g
);

124 
	}
}

130 
	$vis™D©aObjeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

132 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

133 
	`as£¹
(
obj
 !ğ
NULL
);

134 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

135 (*
vis™Ü
)(&
obj
->
şazz
, 
¬g
);

136 
	`vis™F›lds
(
vis™Ü
, 
obj
, 
¬g
);

137 
	}
}

143 
	$vis™Reã»nûObjeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

145 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

146 
	`as£¹
(
obj
 !ğ
NULL
);

147 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

148 
	`vis™D©aObjeù
(
vis™Ü
, 
obj
, 
¬g
);

149 
size_t
 
off£t
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

150 
Objeù
 **
»f
 = (Objeù **)
	`BYTE_OFFSET
(
obj
, 
off£t
);

151 (*
vis™Ü
)(
»f
, 
¬g
);

152 
	}
}

157 
	$vis™Objeù
(
Vis™Ü
 *
vis™Ü
, 
Objeù
 *
obj
, *
¬g
)

159 
	`as£¹
(
vis™Ü
 !ğ
NULL
);

160 
	`as£¹
(
obj
 !ğ
NULL
);

161 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

162 ià(
	`dvmIsCÏssObjeù
(
obj
)) {

163 
	`vis™CÏssObjeù
(
vis™Ü
, 
obj
, 
¬g
);

164 } ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISARRAY
)) {

165 
	`vis™A¼ayObjeù
(
vis™Ü
, 
obj
, 
¬g
);

166 } ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISREFERENCE
)) {

167 
	`vis™Reã»nûObjeù
(
vis™Ü
, 
obj
, 
¬g
);

169 
	`vis™D©aObjeù
(
vis™Ü
, 
obj
, 
¬g
);

171 
	}
}

	@vm/alloc/WriteBarrier.h

17 #iâdeà
DALVIK_ALLOC_WRITEBARRIER_H_


18 
	#DALVIK_ALLOC_WRITEBARRIER_H_


	)

29 
INLINE
 
	$dvmWr™eB¬r›rF›ld
(cÚ¡ 
Objeù
 *
obj
, *
addr
)

31 
	`dvmM¬kC¬d
(
obj
);

32 
	}
}

37 
INLINE
 
	$dvmWr™eB¬r›rObjeù
(cÚ¡ 
Objeù
 *
obj
)

39 
	`dvmM¬kC¬d
(
obj
);

40 
	}
}

47 
INLINE
 
	$dvmWr™eB¬r›rA¼ay
(cÚ¡ 
A¼ayObjeù
 *
obj
,

48 
size_t
 
¡¬t
, size_ˆ
’d
)

50 
	`dvmM¬kC¬d
((
Objeù
 *)
obj
);

51 
	}
}

	@vm/analysis/CodeVerify.cpp

24 
	~"D®vik.h
"

25 
	~"ª®ysis/Liv’ess.h
"

26 
	~"ª®ysis/CodeV”ify.h
"

27 
	~"ª®ysis/O±imize.h
"

28 
	~"ª®ysis/Regi¡”M­.h
"

29 
	~"libdex/DexC©ch.h
"

30 
	~"libdex/In¡rUts.h
"

32 
	~<¡ddef.h
>

40 
	eRegi¡”T¿ckšgMode
 {

41 
	mkT¿ckRegsB¿nches
,

42 
	mkT¿ckRegsGcPošts
,

43 
	mkT¿ckRegsAÎ


53 #iâdeà
NDEBUG


54 
	#DEAD_CODE_SCAN
 
Œue


	)

56 
	#DEAD_CODE_SCAN
 
çl£


	)

59 
boŞ
 
	ggDebugV”bo£
 = 
çl£
;

61 
	#SHOW_REG_DETAILS
 \

62 (0 | 
DRT_SHOW_LIVENESS
 )

	)

68 
	#kExŒaRegs
 2

	)

69 
	#RESULT_REGISTER
(
_š¢RegCouÁ
è(_š¢RegCouÁ)

	)

74 
	sRegi¡”TabË
 {

80 
Regi¡”Lše
* 
	m»gi¡”Lšes
;

86 
size_t
 
	mš¢RegCouÁPlus
;

91 
Regi¡”Lše
 
	mwÜkLše
;

96 
Regi¡”Lše
 
	m§vedLše
;

102 * 
	mlšeAÎoc
;

103 } 
	tRegi¡”TabË
;

107 #iâdeà
NDEBUG


108 
checkM”geTab
();

110 
boŞ
 
isIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
);

111 
RegTy³
 
g‘InvoÿtiÚThis
(cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
,\

112 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
V”ifyE¼Ü
* 
pFau»
);

113 
v”ifyRegi¡”Ty³
(
Regi¡”Lše
* 
»gi¡”Lše
, \

114 
u4
 
v¤c
, 
RegTy³
 
checkTy³
, 
V”ifyE¼Ü
* 
pFau»
);

115 
boŞ
 
doCodeV”ifiÿtiÚ
(
V”if›rD©a
* 
vd©a
, 
Regi¡”TabË
* 
»gTabË
);

116 
boŞ
 
v”ifyIn¡ruùiÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,\

117 
Regi¡”TabË
* 
»gTabË
, 
š¢Idx
, 
Unš™In¡ªûM­
* 
unš™M­
,

118 * 
pS¹Guess
);

119 
CÏssObjeù
* 
fšdCommÚSu³rşass
(CÏssObjeù* 
c1
, CÏssObjeù* 
c2
);

120 
dumpRegTy³s
(cÚ¡ 
V”if›rD©a
* 
vd©a
, \

121 cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
, 
addr
, cÚ¡ * 
addrName
,

122 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
di¥ÏyFÏgs
);

126 
	mDRT_SIMPLE
 = 0,

127 
	mDRT_SHOW_REF_TYPES
 = 0x01,

128 
	mDRT_SHOW_LOCALS
 = 0x02,

129 
	mDRT_SHOW_LIVENESS
 = 0x04,

139 
	#__
 
kRegTy³Unknown


	)

140 
	#_U
 
kRegTy³Unš™


	)

141 
	#_X
 
kRegTy³CÚæiù


	)

142 
	#_0
 
kRegTy³Z”o


	)

143 
	#_1
 
kRegTy³OÃ


	)

144 
	#_Z
 
kRegTy³BoŞ—n


	)

145 
	#_y
 
kRegTy³CÚ¡PosBy‹


	)

146 
	#_Y
 
kRegTy³CÚ¡By‹


	)

147 
	#_h
 
kRegTy³CÚ¡PosShÜt


	)

148 
	#_H
 
kRegTy³CÚ¡ShÜt


	)

149 
	#_c
 
kRegTy³CÚ¡Ch¬


	)

150 
	#_i
 
kRegTy³CÚ¡IÁeg”


	)

151 
	#_b
 
kRegTy³PosBy‹


	)

152 
	#_B
 
kRegTy³By‹


	)

153 
	#_s
 
kRegTy³PosShÜt


	)

154 
	#_S
 
kRegTy³ShÜt


	)

155 
	#_C
 
kRegTy³Ch¬


	)

156 
	#_I
 
kRegTy³IÁeg”


	)

157 
	#_F
 
kRegTy³Flßt


	)

158 
	#_N
 
kRegTy³CÚ¡Lo


	)

159 
	#_n
 
kRegTy³CÚ¡Hi


	)

160 
	#_J
 
kRegTy³LÚgLo


	)

161 
	#_j
 
kRegTy³LÚgHi


	)

162 
	#_D
 
kRegTy³DoubËLo


	)

163 
	#_d
 
kRegTy³DoubËHi


	)

186 cÚ¡ 
	ggDvmM”geTab
[
kRegTy³MAX
][kRegTypeMAX] =

189 { 
__
,
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

190 { 
_X
,
_U
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

191 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

192 { 
_X
,_X,_X,
_0
,
_Z
,_Z,
_y
,
_Y
,
_h
,
_H
,
_c
,
_i
,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,
_F
,_X,_X,_X,_X,_X,_X },

193 { 
_X
,_X,_X,
_Z
,
_1
,_Z,
_y
,
_Y
,
_h
,
_H
,
_c
,
_i
,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,
_F
,_X,_X,_X,_X,_X,_X },

194 { 
_X
,_X,_X,
_Z
,_Z,_Z,
_y
,
_Y
,
_h
,
_H
,
_c
,
_i
,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,
_F
,_X,_X,_X,_X,_X,_X },

195 { 
_X
,_X,_X,
_y
,_y,_y,_y,
_Y
,
_h
,
_H
,
_c
,
_i
,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,
_F
,_X,_X,_X,_X,_X,_X },

196 { 
_X
,_X,_X,
_Y
,_Y,_Y,_Y,_Y,
_h
,
_H
,
_c
,
_i
,
_B
,_B,
_S
,_S,
_I
,_I,
_F
,_X,_X,_X,_X,_X,_X },

197 { 
_X
,_X,_X,
_h
,_h,_h,_h,_h,_h,
_H
,
_c
,
_i
,
_s
,
_S
,_s,_S,
_C
,
_I
,
_F
,_X,_X,_X,_X,_X,_X },

198 { 
_X
,_X,_X,
_H
,_H,_H,_H,_H,_H,_H,
_c
,
_i
,
_S
,_S,_S,_S,
_I
,_I,
_F
,_X,_X,_X,_X,_X,_X },

199 { 
_X
,_X,_X,
_c
,_c,_c,_c,_c,_c,_c,_c,
_i
,
_C
,
_I
,_C,_I,_C,_I,
_F
,_X,_X,_X,_X,_X,_X },

200 { 
_X
,_X,_X,
_i
,_i,_i,_i,_i,_i,_i,_i,_i,
_I
,_I,_I,_I,_I,_I,
_F
,_X,_X,_X,_X,_X,_X },

201 { 
_X
,_X,_X,
_b
,_b,_b,_b,
_B
,
_s
,
_S
,
_C
,
_I
,_b,_B,_s,_S,_C,_I,_X,_X,_X,_X,_X,_X,_X },

202 { 
_X
,_X,_X,
_B
,_B,_B,_B,_B,
_S
,_S,
_I
,_I,_B,_B,_S,_S,_I,_I,_X,_X,_X,_X,_X,_X,_X },

203 { 
_X
,_X,_X,
_s
,_s,_s,_s,
_S
,_s,_S,
_C
,
_I
,_s,_S,_s,_S,_C,_I,_X,_X,_X,_X,_X,_X,_X },

204 { 
_X
,_X,_X,
_S
,_S,_S,_S,_S,_S,_S,
_I
,_I,_S,_S,_S,_S,_I,_I,_X,_X,_X,_X,_X,_X,_X },

205 { 
_X
,_X,_X,
_C
,_C,_C,_C,
_I
,_C,_I,_C,_I,_C,_I,_C,_I,_C,_I,_X,_X,_X,_X,_X,_X,_X },

206 { 
_X
,_X,_X,
_I
,_I,_I,_I,_I,_I,_I,_I,_I,_I,_I,_I,_I,_I,_I,_X,_X,_X,_X,_X,_X,_X },

207 { 
_X
,_X,_X,
_F
,_F,_F,_F,_F,_F,_F,_F,_F,_X,_X,_X,_X,_X,_X,_F,_X,_X,_X,_X,_X,_X },

208 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_N
,_X,
_J
,_X,
_D
,_X },

209 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_n
,_X,
_j
,_X,
_d
 },

210 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_J
,_X,_J,_X,_X,_X },

211 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_j
,_X,_j,_X,_X },

212 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_D
,_X,_X,_X,_D,_X },

213 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_d
,_X,_X,_X,_d },

216 #undeà
__


217 #undeà
_U


218 #undeà
_X


219 #undeà
_0


220 #undeà
_1


221 #undeà
_Z


222 #undeà
_y


223 #undeà
_Y


224 #undeà
_h


225 #undeà
_H


226 #undeà
_c


227 #undeà
_i


228 #undeà
_b


229 #undeà
_B


230 #undeà
_s


231 #undeà
_S


232 #undeà
_C


233 #undeà
_I


234 #undeà
_F


235 #undeà
_N


236 #undeà
_n


237 #undeà
_J


238 #undeà
_j


239 #undeà
_D


240 #undeà
_d


242 #iâdeà
NDEBUG


246 
	$checkM”geTab
()

248 
i
, 
j
;

250 
i
 = 0; i < 
kRegTy³MAX
; i++) {

251 
j
 = 
i
; j < 
kRegTy³MAX
; j++) {

252 ià(
gDvmM”geTab
[
i
][
j
] != gDvmMergeTab[j][i]) {

253 
	`ALOGE
("Symm‘ry viŞ©iÚ: %d,%d v %d,%d", 
i
, 
j
, j, i);

254 
	`dvmAbÜt
();

258 
	}
}

267 
boŞ
 
	$ÿnCÚv”tTo1Ä
(
RegTy³
 
¤cTy³
, RegTy³ 
checkTy³
)

269 cÚ¡ 
cÚvTab


270 [
kRegTy³1ÄEND
-
kRegTy³1ÄSTART
+1][kRegType1nrEND-kRegType1nrSTART+1] =

291 
	`as£¹
(
checkTy³
 >ğ
kRegTy³1ÄSTART
 && checkTy³ <ğ
kRegTy³1ÄEND
);

293 ià(
checkTy³
 < 
kRegTy³1ÄSTART
 || checkTy³ > 
kRegTy³1ÄEND
) {

294 
	`LOG_VFY
("UÃx³ùed checkTy³ %d (¤cTy³=%d)", 
checkTy³
, 
¤cTy³
);

295 
	`as£¹
(
çl£
);

296  
çl£
;

302 ià(
¤cTy³
 >ğ
kRegTy³1ÄSTART
 && srcTy³ <ğ
kRegTy³1ÄEND
)

303  (
boŞ
è
cÚvTab
[
¤cTy³
-
kRegTy³1ÄSTART
][
checkTy³
-kRegType1nrSTART];

305  
çl£
;

306 
	}
}

311 
boŞ
 
	$ÿnCÚv”tTo2
(
RegTy³
 
¤cTy³
, RegTy³ 
checkTy³
)

313  ((
¤cTy³
 =ğ
kRegTy³CÚ¡Lo
 || srcTy³ =ğ
checkTy³
) &&

314 (
checkTy³
 =ğ
kRegTy³LÚgLo
 || checkTy³ =ğ
kRegTy³DoubËLo
));

315 
	}
}

334 
boŞ
 
	$checkF›ldA¼ayStÜe1Ä
(
RegTy³
 
š¡rTy³
, RegTy³ 
rg‘Ty³
)

336  (
š¡rTy³
 =ğ
rg‘Ty³
);

337 
	}
}

342 
RegTy³
 
	$´im™iveTy³ToRegTy³
(
Prim™iveTy³
 
´imTy³
)

344 
´imTy³
) {

345 
PRIM_BOOLEAN
:  
kRegTy³BoŞ—n
;

346 
PRIM_BYTE
:  
kRegTy³By‹
;

347 
PRIM_SHORT
:  
kRegTy³ShÜt
;

348 
PRIM_CHAR
:  
kRegTy³Ch¬
;

349 
PRIM_INT
:  
kRegTy³IÁeg”
;

350 
PRIM_LONG
:  
kRegTy³LÚgLo
;

351 
PRIM_FLOAT
:  
kRegTy³Flßt
;

352 
PRIM_DOUBLE
:  
kRegTy³DoubËLo
;

353 
PRIM_VOID
:

355 
	`as£¹
(
çl£
);

356  
kRegTy³Unknown
;

359 
	}
}

365 
RegTy³
 
	$cÚ¡Ty³ToRegTy³
(
RegTy³
 
cÚ¡Ty³
)

367 
cÚ¡Ty³
) {

368 
kRegTy³CÚ¡PosBy‹
:  
kRegTy³PosBy‹
;

369 
kRegTy³CÚ¡By‹
:  
kRegTy³By‹
;

370 
kRegTy³CÚ¡PosShÜt
:  
kRegTy³PosShÜt
;

371 
kRegTy³CÚ¡ShÜt
:  
kRegTy³ShÜt
;

372 
kRegTy³CÚ¡Ch¬
:  
kRegTy³Ch¬
;

373 
kRegTy³CÚ¡IÁeg”
:  
kRegTy³IÁeg”
;

375  
cÚ¡Ty³
;

378 
	}
}

387 
	$d‘”mšeC©1CÚ¡
(
s4
 
v®ue
)

389 ià(
v®ue
 < -32768)

390  
kRegTy³CÚ¡IÁeg”
;

391 ià(
v®ue
 < -128)

392  
kRegTy³CÚ¡ShÜt
;

393 ià(
v®ue
 < 0)

394  
kRegTy³CÚ¡By‹
;

395 ià(
v®ue
 == 0)

396  
kRegTy³Z”o
;

397 ià(
v®ue
 == 1)

398  
kRegTy³OÃ
;

399 ià(
v®ue
 < 128)

400  
kRegTy³CÚ¡PosBy‹
;

401 ià(
v®ue
 < 32768)

402  
kRegTy³CÚ¡PosShÜt
;

403 ià(
v®ue
 < 65536)

404  
kRegTy³CÚ¡Ch¬
;

406  
kRegTy³CÚ¡IÁeg”
;

407 
	}
}

421 
Unš™In¡ªûM­
* 
	$dvmC»©eUnš™In¡ªûM­
(cÚ¡ 
M‘hod
* 
m‘h
,

422 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
ÃwIn¡ªûCouÁ
)

424 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

425 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

426 
Unš™In¡ªûM­
* 
unš™M­
;

427 
boŞ
 
isIn™
 = 
çl£
;

428 
idx
, 
addr
;

430 ià(
	`isIn™M‘hod
(
m‘h
)) {

431 
ÃwIn¡ªûCouÁ
++;

432 
isIn™
 = 
Œue
;

443 
size
 = 
	`off£tof
(
Unš™In¡ªûM­
, 
m­
) +

444 
ÃwIn¡ªûCouÁ
 * (
unš™M­
->
m­
[0]);

445 
unš™M­
 = (
Unš™In¡ªûM­
*)
	`ÿÎoc
(1, 
size
);

446 ià(
unš™M­
 =ğ
NULL
)

447  
NULL
;

448 
unš™M­
->
numEÁr›s
 = 
ÃwIn¡ªûCouÁ
;

450 
idx
 = 0;

451 ià(
isIn™
) {

452 
unš™M­
->
m­
[
idx
++].
addr
 = 
kUnš™ThisArgAddr
;

458 
addr
 = 0;‡dd¸< 
š¢sSize
; ) {

459 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
);

461 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(*
š¢s
);

462 ià(
İcode
 =ğ
OP_NEW_INSTANCE
)

463 
unš™M­
->
m­
[
idx
++].
addr
 =‡ddr;

465 
addr
 +ğ
width
;

466 
š¢s
 +ğ
width
;

469 
	`as£¹
(
idx
 =ğ
ÃwIn¡ªûCouÁ
);

470  
unš™M­
;

471 
	}
}

476 
	$dvmF»eUnš™In¡ªûM­
(
Unš™In¡ªûM­
* 
unš™M­
)

478 
	`ä“
(
unš™M­
);

479 
	}
}

491 
	$£tUnš™In¡ªû
(
Unš™In¡ªûM­
* 
unš™M­
, 
addr
,

492 
CÏssObjeù
* 
şazz
)

494 
idx
;

496 
	`as£¹
(
şazz
 !ğ
NULL
);

498 #ifdeà
VERIFIER_STATS


499 
gDvm
.
v”if›rSts
.
unš™S—rches
++;

503 
idx
 = 
unš™M­
->
numEÁr›s
 - 1; idx >= 0; idx--) {

504 ià(
unš™M­
->
m­
[
idx
].
addr
 ==‡ddr) {

505 ià(
unš™M­
->
m­
[
idx
].
şazz
 !ğ
NULL
 &&

506 
unš™M­
->
m­
[
idx
].
şazz
 != clazz)

508 
	`LOG_VFY
("VFY:‡ddr %d‡lready seto %p,‚ot settingo %p",

509 
addr
, 
unš™M­
->
m­
[
idx
].
şazz
, clazz);

512 
unš™M­
->
m­
[
idx
].
şazz
 = clazz;

513  
idx
;

517 
	`LOG_VFY
("VFY:‡dd¸%d‚Ù found iÀunš™ m­", 
addr
);

518 
	`as£¹
(
çl£
);

520 
	}
}

525 
CÏssObjeù
* 
	$g‘Unš™In¡ªû
(cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
,

526 
idx
)

528 
	`as£¹
(
idx
 >ğ0 && idx < 
unš™M­
->
numEÁr›s
);

529  
unš™M­
->
m­
[
idx
].
şazz
;

530 
	}
}

533 
šlše
 
boŞ
 
	$»gTy³IsReã»nû
(
RegTy³
 
ty³
) {

534  (
ty³
 > 
kRegTy³MAX
 ||y³ =ğ
kRegTy³Unš™
 ||

535 
ty³
 =ğ
kRegTy³Z”o
);

536 
	}
}

539 
šlše
 
boŞ
 
	$»gTy³IsUnš™Reã»nû
(
RegTy³
 
ty³
) {

540  ((
ty³
 & 
kRegTy³Unš™Mask
è=ğ
kRegTy³Unš™
);

541 
	}
}

545 
CÏssObjeù
* 
	$»gTy³In™ŸlizedReã»nûToCÏss
(
RegTy³
 
ty³
)

547 
	`as£¹
(
	`»gTy³IsReã»nû
(
ty³
è&&y³ !ğ
kRegTy³Z”o
);

548 ià((
ty³
 & 0x01) == 0) {

549  (
CÏssObjeù
*è
ty³
;

552  
NULL
;

554 
	}
}

557 
šlše
 
	$»gTy³ToUnš™Index
(
RegTy³
 
ty³
) {

558 
	`as£¹
(
	`»gTy³IsUnš™Reã»nû
(
ty³
));

559  (
ty³
 & ~
kRegTy³Unš™Mask
è>> 
kRegTy³Unš™Shiá
;

560 
	}
}

563 
CÏssObjeù
* 
	$»gTy³Reã»nûToCÏss
(
RegTy³
 
ty³
,

564 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
)

566 
	`as£¹
(
	`»gTy³IsReã»nû
(
ty³
è&&y³ !ğ
kRegTy³Z”o
);

567 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³
)) {

568 
	`as£¹
(
unš™M­
 !ğ
NULL
);

569  
	`g‘Unš™In¡ªû
(
unš™M­
, 
	`»gTy³ToUnš™Index
(
ty³
));

571  (
CÏssObjeù
*è
ty³
;

573 
	}
}

576 
šlše
 
RegTy³
 
	$»gTy³FromCÏss
(
CÏssObjeù
* 
şazz
) {

577  (
u4
è
şazz
;

578 
	}
}

581 
RegTy³
 
	$»gTy³FromUnš™Index
(
uidx
) {

582  (
u4
è(
kRegTy³Unš™
 | (
uidx
 << 
kRegTy³Unš™Shiá
));

583 
	}
}

595 
boŞ
 
	$isIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
)

597  (*
m‘h
->
Çme
 =ğ'<' && 
	`¡rcmp
(meth->name+1, "init>") == 0);

598 
	}
}

604 
boŞ
 
	$isCÏssIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
)

606  (*
m‘h
->
Çme
 =ğ'<' && 
	`¡rcmp
(meth->name+1, "clinit>") == 0);

607 
	}
}

615 
CÏssObjeù
* 
	$lookupCÏssByDesütÜ
(cÚ¡ 
M‘hod
* 
m‘h
,

616 cÚ¡ * 
pDesütÜ
, 
V”ifyE¼Ü
* 
pFau»
)

633 
CÏssObjeù
* 
şazz
;

634 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
pDesütÜ
, 
m‘h
->şazz->
şassLßd”
);

635 ià(
şazz
 =ğ
NULL
) {

636 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

637 ià(
	`¡rchr
(
pDesütÜ
, '$'è!ğ
NULL
) {

638 
	`ALOGV
("VFY: unableo find class„eferenced in signature (%s)",

639 
pDesütÜ
);

641 
	`LOG_VFY
("VFY: unableo find class„eferenced in signature (%s)",

642 
pDesütÜ
);

645 ià(
pDesütÜ
[0] == '[') {

651 ià(
pDesütÜ
[1] != 'L' &&…Descriptor[1] != '[') {

652 
	`LOG_VFY
("VFY: invalid char in signature in '%s'",

653 
pDesütÜ
);

654 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

665 
şazz
 = 
	`dvmFšdCÏssNoIn™
("[Ljava/lang/Object;",

666 
m‘h
->
şazz
->
şassLßd”
);

667 } ià(
pDesütÜ
[0] == 'L') {

672 
şazz
 = 
gDvm
.
şassJavaLªgObjeù
;

675 
	`LOG_VFY
("VFY: inv®id ch¬ iÀsigÇtu» iÀ'%s'", 
pDesütÜ
);

676 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

679 ià(
şazz
 =ğ
NULL
) {

680 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

684 ià(
	`dvmIsPrim™iveCÏss
(
şazz
)) {

685 
	`LOG_VFY
("VFY: inv®id u£ oà´im™ivty³ '%s'", 
pDesütÜ
);

686 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

687 
şazz
 = 
NULL
;

690  
şazz
;

691 
	}
}

702 
CÏssObjeù
* 
	$lookupSigÇtu»CÏss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ ** 
pSig
,

703 
V”ifyE¼Ü
* 
pFau»
)

705 cÚ¡ * 
sig
 = *
pSig
;

706 cÚ¡ * 
’dp
 = 
sig
;

708 
	`as£¹
(
sig
 !ğ
NULL
 && *sig == 'L');

710 *++
’dp
 != ';' && *endp != '\0')

712 ià(*
’dp
 != ';') {

713 
	`LOG_VFY
("VFY: bad sigÇtu» compÚ’ˆ'%s' (missšg ';')", 
sig
);

714 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

715  
NULL
;

718 
’dp
++;

719 
ty³L’
 = 
’dp
 - 
sig
;

720 
ty³SŒ
[
ty³L’
+1];

721 
	`memıy
(
ty³SŒ
, 
sig
, 
ty³L’
);

722 
ty³SŒ
[
ty³L’
] = '\0';

724 *
pSig
 = 
’dp
 - 1;

726  
	`lookupCÏssByDesütÜ
(
m‘h
, 
ty³SŒ
, 
pFau»
);

727 
	}
}

737 
CÏssObjeù
* 
	$lookupSigÇtu»A¼ayCÏss
(cÚ¡ 
M‘hod
* 
m‘h
,

738 cÚ¡ ** 
pSig
, 
V”ifyE¼Ü
* 
pFau»
)

740 cÚ¡ * 
sig
 = *
pSig
;

741 cÚ¡ * 
’dp
 = 
sig
;

743 
	`as£¹
(
sig
 !ğ
NULL
 && *sig == '[');

746 *++
’dp
 == '[' && *endp != '\0')

749 ià(*
’dp
 == 'L') {

750 *++
’dp
 != ';' && *endp != '\0')

752 ià(*
’dp
 != ';') {

753 
	`LOG_VFY
("VFY: bad sigÇtu» compÚ’ˆ'%s' (missšg ';')", 
sig
);

754 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

755  
NULL
;

759 
ty³L’
 = 
’dp
 - 
sig
 +1;

760 
ty³SŒ
[
ty³L’
+1];

761 
	`memıy
(
ty³SŒ
, 
sig
, 
ty³L’
);

762 
ty³SŒ
[
ty³L’
] = '\0';

764 *
pSig
 = 
’dp
;

766  
	`lookupCÏssByDesütÜ
(
m‘h
, 
ty³SŒ
, 
pFau»
);

767 
	}
}

777 
boŞ
 
	$£tTy³sFromSigÇtu»
(cÚ¡ 
M‘hod
* 
m‘h
, 
RegTy³
* 
»gTy³s
,

778 
Unš™In¡ªûM­
* 
unš™M­
)

780 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

781 
aùu®Args
, 
ex³ùedArgs
, 
¬gS¹
;

782 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

783 cÚ¡ * 
desütÜ
;

785 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
m‘h
->
´ÙÙy³
);

786 
¬gS¹
 = 
m‘h
->
»gi¡”sSize
 - m‘h->
šsSize
;

787 
ex³ùedArgs
 = 
m‘h
->
šsSize
;

788 
aùu®Args
 = 0;

790 
	`as£¹
(
¬gS¹
 >= 0);

795 ià(!
	`dvmIsSticM‘hod
(
m‘h
)) {

801 ià(
	`isIn™M‘hod
(
m‘h
è&& m‘h->
şazz
 !ğ
gDvm
.
şassJavaLªgObjeù
) {

802 
uidx
 = 
	`£tUnš™In¡ªû
(
unš™M­
, 
kUnš™ThisArgAddr
,

803 
m‘h
->
şazz
);

804 
	`as£¹
(
uidx
 == 0);

805 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromUnš™Index
(
uidx
);

807 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromCÏss
(
m‘h
->
şazz
);

809 
aùu®Args
++;

813 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

815 ià(
desütÜ
 =ğ
NULL
) {

819 ià(
aùu®Args
 >ğ
ex³ùedArgs
) {

820 
	`LOG_VFY
("VFY:ƒxpected %d‡rgs, found more (%s)",

821 
ex³ùedArgs
, 
desütÜ
);

822 
bad_sig
;

825 *
desütÜ
) {

837 
CÏssObjeù
* 
şazz
 =

838 
	`lookupCÏssByDesütÜ
(
m‘h
, 
desütÜ
, &
çu»
);

839 ià(!
	`VERIFY_OK
(
çu»
))

840 
bad_sig
;

841 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromCÏss
(
şazz
);

843 
aùu®Args
++;

846 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³BoŞ—n
;

847 
aùu®Args
++;

850 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³Ch¬
;

851 
aùu®Args
++;

854 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³By‹
;

855 
aùu®Args
++;

858 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³IÁeg”
;

859 
aùu®Args
++;

862 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³ShÜt
;

863 
aùu®Args
++;

866 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³Flßt
;

867 
aùu®Args
++;

870 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³DoubËLo
;

871 
»gTy³s
[
¬gS¹
 + 
aùu®Args
 +1] = 
kRegTy³DoubËHi
;

872 
aùu®Args
 += 2;

875 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³LÚgLo
;

876 
»gTy³s
[
¬gS¹
 + 
aùu®Args
 +1] = 
kRegTy³LÚgHi
;

877 
aùu®Args
 += 2;

880 
	`LOG_VFY
("VFY: uÃx³ùed sigÇtu»y³ ch¬ '%c'", *
desütÜ
);

881 
bad_sig
;

885 ià(
aùu®Args
 !ğ
ex³ùedArgs
) {

886 
	`LOG_VFY
("VFY:ƒx³ùed %d‡rgs, found %d", 
ex³ùedArgs
, 
aùu®Args
);

887 
bad_sig
;

890 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

897 *
desütÜ
) {

907 ià(*(
desütÜ
+1) != '\0')

908 
bad_sig
;

912 *++
desütÜ
 == '[')

914 ià(*
desütÜ
 == 'L') {

915 *++
desütÜ
 != ';' && *descriptor != '\0')

917 ià(*
desütÜ
 != ';')

918 
bad_sig
;

920 ià(*(
desütÜ
+1) != '\0')

921 
bad_sig
;

926 *++
desütÜ
 != ';' && *descriptor != '\0')

928 ià(*
desütÜ
 != ';')

929 
bad_sig
;

932 
bad_sig
;

935  
Œue
;

941 
bad_sig
:

943 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

944 
	`LOG_VFY
("VFY: bad signature '%s' for %s.%s",

945 
desc
, 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

946 
	`ä“
(
desc
);

948  
çl£
;

949 
	}
}

960 
RegTy³
 
	$g‘M‘hodR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
)

962 
RegTy³
 
ty³
;

963 cÚ¡ * 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

965 *
desütÜ
) {

967 
ty³
 = 
kRegTy³IÁeg”
;

970 
ty³
 = 
kRegTy³Ch¬
;

973 
ty³
 = 
kRegTy³ShÜt
;

976 
ty³
 = 
kRegTy³By‹
;

979 
ty³
 = 
kRegTy³BoŞ—n
;

982 
ty³
 = 
kRegTy³Unknown
;

985 
ty³
 = 
kRegTy³Flßt
;

988 
ty³
 = 
kRegTy³DoubËLo
;

991 
ty³
 = 
kRegTy³LÚgLo
;

996 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

997 
CÏssObjeù
* 
şazz
 =

998 
	`lookupCÏssByDesütÜ
(
m‘h
, 
desütÜ
, &
çu»
);

999 
	`as£¹
(
	`VERIFY_OK
(
çu»
));

1000 
ty³
 = 
	`»gTy³FromCÏss
(
şazz
);

1005 
	`as£¹
(
çl£
);

1006 
ty³
 = 
kRegTy³CÚæiù
;

1010  
ty³
;

1011 
	}
}

1020 
RegTy³
 
	$´imSigCh¬ToRegTy³
(
sigCh¬
)

1022 
RegTy³
 
ty³
;

1024 
sigCh¬
) {

1026 
ty³
 = 
kRegTy³IÁeg”
;

1029 
ty³
 = 
kRegTy³Ch¬
;

1032 
ty³
 = 
kRegTy³ShÜt
;

1035 
ty³
 = 
kRegTy³By‹
;

1038 
ty³
 = 
kRegTy³BoŞ—n
;

1041 
ty³
 = 
kRegTy³Flßt
;

1044 
ty³
 = 
kRegTy³DoubËLo
;

1047 
ty³
 = 
kRegTy³LÚgLo
;

1052 
ty³
 = 
kRegTy³Unknown
;

1055 
	`as£¹
(
çl£
);

1056 
ty³
 = 
kRegTy³Unknown
;

1060  
ty³
;

1061 
	}
}

1066 
boŞ
 
	$isCÜ»ùInvokeKšd
(
M‘hodTy³
 
m‘hodTy³
, 
M‘hod
* 
»sM‘hod
)

1068 
m‘hodTy³
) {

1069 
METHOD_DIRECT
:

1070  
	`dvmIsDœeùM‘hod
(
»sM‘hod
);

1071 
METHOD_STATIC
:

1072  
	`dvmIsSticM‘hod
(
»sM‘hod
);

1073 
METHOD_VIRTUAL
:

1074 
METHOD_INTERFACE
:

1075  !
	`dvmIsDœeùM‘hod
(
»sM‘hod
);

1077  
çl£
;

1079 
	}
}

1103 
M‘hod
* 
	$v”ifyInvoÿtiÚArgs
(cÚ¡ 
M‘hod
* 
m‘h
,

1104 
Regi¡”Lše
* 
»gi¡”Lše
, cÚ¡ 
š¢RegCouÁ
,

1105 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
Unš™In¡ªûM­
* 
unš™M­
,

1106 
M‘hodTy³
 
m‘hodTy³
, 
boŞ
 
isRªge
, boŞ 
isSu³r
, 
V”ifyE¼Ü
* 
pFau»
)

1108 
M‘hod
* 
»sM‘hod
;

1109 * 
sigOrigš®
 = 
NULL
;

1110 cÚ¡ * 
sig
;

1111 
ex³ùedArgs
;

1112 
aùu®Args
;

1118 ià(
m‘hodTy³
 =ğ
METHOD_INTERFACE
) {

1119 
»sM‘hod
 = 
	`dvmO±ResŞveIÁ”çûM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
);

1121 
»sM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
, 
m‘hodTy³
,

1122 
pFau»
);

1124 ià(
»sM‘hod
 =ğ
NULL
) {

1126 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

1128 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDecIn¢
->
vB
);

1129 cÚ¡ * 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1130 * 
m‘hodDesc
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

1131 cÚ¡ * 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

1133 ià(!
gDvm
.
İtimizšg
) {

1134 
¡d
::
¡ršg
 
dÙMissšgCÏss
 =

1135 
	`dvmHumªR—dabËDesütÜ
(
şassDesütÜ
);

1136 
¡d
::
¡ršg
 
dÙM‘hCÏss
 =

1137 
	`dvmHumªR—dabËDesütÜ
(
m‘h
->
şazz
->
desütÜ
);

1139 
	`ALOGI
("Could‚ot find method %s.%s,„eferenced from method %s.%s",

1140 
dÙMissšgCÏss
.
	`c_¡r
(), 
m‘hodName
,

1141 
dÙM‘hCÏss
.
	`c_¡r
(), 
m‘h
->
Çme
);

1144 
	`LOG_VFY
("VFY: unableo„esolve %s method %u: %s.%s %s",

1145 
	`dvmM‘hodTy³SŒ
(
m‘hodTy³
), 
pDecIn¢
->
vB
,

1146 
şassDesütÜ
, 
m‘hodName
, 
m‘hodDesc
);

1147 
	`ä“
(
m‘hodDesc
);

1148 ià(
	`VERIFY_OK
(*
pFau»
))

1149 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

1150 
ç
;

1158 ià(
»sM‘hod
->
Çme
[0] == '<') {

1159 ià(
m‘hodTy³
 !ğ
METHOD_DIRECT
 || !
	`isIn™M‘hod
(
»sM‘hod
)) {

1160 
	`LOG_VFY
("VFY: invalid callo %s.%s",

1161 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

1162 
bad_sig
;

1170 ià(!
	`isCÜ»ùInvokeKšd
(
m‘hodTy³
, 
»sM‘hod
)) {

1171 
	`LOG_VFY
("VFY: invokeype does‚ot match methodype of %s.%s",

1172 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

1173 
ç
;

1180 ià(
isSu³r
) {

1181 
	`as£¹
(
m‘hodTy³
 =ğ
METHOD_VIRTUAL
);

1182 
CÏssObjeù
* 
su³r
 = 
m‘h
->
şazz
->super;

1183 ià(
su³r
 =ğ
NULL
 || 
»sM‘hod
->
m‘hodIndex
 > su³r->
vbËCouÁ
) {

1184 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1185 
	`LOG_VFY
("VFY: invalid invoke-super from %s.%so super %s.%s %s",

1186 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
,

1187 (
su³r
 =ğ
NULL
è? "-" : su³r->
desütÜ
,

1188 
»sM‘hod
->
Çme
, 
desc
);

1189 
	`ä“
(
desc
);

1190 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

1191 
ç
;

1201 
sigOrigš®
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1202 
sig
 = 
sigOrigš®
;

1203 
ex³ùedArgs
 = 
pDecIn¢
->
vA
;

1204 
aùu®Args
 = 0;

1207 
	`as£¹
(
isRªge
 || 
ex³ùedArgs
 <= 5);

1209 ià(
ex³ùedArgs
 > 
m‘h
->
outsSize
) {

1210 
	`LOG_VFY
("VFY: invalid‡rg count (%d)ƒxceeds outsSize (%d)",

1211 
ex³ùedArgs
, 
m‘h
->
outsSize
);

1212 
ç
;

1215 ià(*
sig
++ != '(')

1216 
bad_sig
;

1224 ià(!
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

1225 
CÏssObjeù
* 
aùu®ThisRef
;

1226 
RegTy³
 
aùu®ArgTy³
;

1228 
aùu®ArgTy³
 = 
	`g‘InvoÿtiÚThis
(
»gi¡”Lše
, 
pDecIn¢
, 
pFau»
);

1229 ià(!
	`VERIFY_OK
(*
pFau»
))

1230 
ç
;

1232 ià(
	`»gTy³IsUnš™Reã»nû
(
aùu®ArgTy³
è&& 
»sM‘hod
->
Çme
[0] != '<')

1234 
	`LOG_VFY
("VFY: 'this'‡rg must be initialized");

1235 
ç
;

1237 ià(
m‘hodTy³
 !ğ
METHOD_INTERFACE
 && 
aùu®ArgTy³
 !ğ
kRegTy³Z”o
) {

1238 
aùu®ThisRef
 = 
	`»gTy³Reã»nûToCÏss
(
aùu®ArgTy³
, 
unš™M­
);

1239 ià(!
	`dvmIn¡ªûof
(
aùu®ThisRef
, 
»sM‘hod
->
şazz
)) {

1240 
	`LOG_VFY
("VFY: 'this'‡rg '%s'‚ot instance of '%s'",

1241 
aùu®ThisRef
->
desütÜ
,

1242 
»sM‘hod
->
şazz
->
desütÜ
);

1243 
ç
;

1246 
aùu®Args
++;

1253 *
sig
 != '\0' && *sig != ')') {

1254 ià(
aùu®Args
 >ğ
ex³ùedArgs
) {

1255 
	`LOG_VFY
("VFY:ƒxpected %d‡rgs, found more (%c)",

1256 
ex³ùedArgs
, *
sig
);

1257 
bad_sig
;

1260 
u4
 
g‘Reg
;

1261 ià(
isRªge
)

1262 
g‘Reg
 = 
pDecIn¢
->
vC
 + 
aùu®Args
;

1264 
g‘Reg
 = 
pDecIn¢
->
¬g
[
aùu®Args
];

1266 *
sig
) {

1269 
CÏssObjeù
* 
şazz
 = 
	`lookupSigÇtu»CÏss
(
m‘h
, &
sig
, 
pFau»
);

1270 ià(!
	`VERIFY_OK
(*
pFau»
))

1271 
bad_sig
;

1272 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
,

1273 
	`»gTy³FromCÏss
(
şazz
), 
pFau»
);

1274 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1275 
	`LOG_VFY
("VFY: bad‡rg %d (into %s)",

1276 
aùu®Args
, 
şazz
->
desütÜ
);

1277 
bad_sig
;

1280 
aùu®Args
++;

1284 
CÏssObjeù
* 
şazz
 =

1285 
	`lookupSigÇtu»A¼ayCÏss
(
m‘h
, &
sig
, 
pFau»
);

1286 ià(!
	`VERIFY_OK
(*
pFau»
))

1287 
bad_sig
;

1288 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
,

1289 
	`»gTy³FromCÏss
(
şazz
), 
pFau»
);

1290 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1291 
	`LOG_VFY
("VFY: bad‡rg %d (into %s)",

1292 
aùu®Args
, 
şazz
->
desütÜ
);

1293 
bad_sig
;

1296 
aùu®Args
++;

1299 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³BoŞ—n
, 
pFau»
);

1300 
aùu®Args
++;

1303 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³Ch¬
, 
pFau»
);

1304 
aùu®Args
++;

1307 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³By‹
, 
pFau»
);

1308 
aùu®Args
++;

1311 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³IÁeg”
, 
pFau»
);

1312 
aùu®Args
++;

1315 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³ShÜt
, 
pFau»
);

1316 
aùu®Args
++;

1319 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³Flßt
, 
pFau»
);

1320 
aùu®Args
++;

1323 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³DoubËLo
, 
pFau»
);

1324 
aùu®Args
 += 2;

1327 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
kRegTy³LÚgLo
, 
pFau»
);

1328 
aùu®Args
 += 2;

1331 
	`LOG_VFY
("VFY: invocationarget: bad signatureype char '%c'",

1332 *
sig
);

1333 
bad_sig
;

1336 
sig
++;

1338 ià(*
sig
 != ')') {

1339 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1340 
	`LOG_VFY
("VFY: invoÿtiÚ¬g‘: bad sigÇtu» '%s'", 
desc
);

1341 
	`ä“
(
desc
);

1342 
bad_sig
;

1345 ià(
aùu®Args
 !ğ
ex³ùedArgs
) {

1346 
	`LOG_VFY
("VFY:ƒx³ùed %d‡rgs, found %d", 
ex³ùedArgs
, 
aùu®Args
);

1347 
bad_sig
;

1350 
	`ä“
(
sigOrigš®
);

1351  
»sM‘hod
;

1353 
bad_sig
:

1354 ià(
»sM‘hod
 !ğ
NULL
) {

1355 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1356 
	`LOG_VFY
("VFY:„ejecting callo %s.%s %s",

1357 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
);

1358 
	`ä“
(
desc
);

1361 
ç
:

1362 
	`ä“
(
sigOrigš®
);

1363 ià(*
pFau»
 =ğ
VERIFY_ERROR_NONE
)

1364 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1365  
NULL
;

1366 
	}
}

1377 
CÏssObjeù
* 
	$g‘F›ldCÏss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
F›ld
* 
f›ld
)

1379 
CÏssObjeù
* 
f›ldCÏss
;

1380 cÚ¡ * 
sigÇtu»
 = 
f›ld
->signature;

1382 ià((*
sigÇtu»
 == 'L') || (*signature == '[')) {

1383 
f›ldCÏss
 = 
	`dvmFšdCÏssNoIn™
(
sigÇtu»
,

1384 
m‘h
->
şazz
->
şassLßd”
);

1386  
NULL
;

1389 ià(
f›ldCÏss
 =ğ
NULL
) {

1390 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1391 
	`ALOGV
("VFY: unableo find class '%s' for field %s.%s,rying Object",

1392 
f›ld
->
sigÇtu»
, 
m‘h
->
şazz
->
desütÜ
, f›ld->
Çme
);

1393 
f›ldCÏss
 = 
gDvm
.
şassJavaLªgObjeù
;

1395 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
));

1397  
f›ldCÏss
;

1398 
	}
}

1413 
šlše
 
RegTy³
 
	$g‘Regi¡”Ty³
(cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
v¤c
)

1415  
»gi¡”Lše
->
»gTy³s
[
v¤c
];

1416 
	}
}

1426 
CÏssObjeù
* 
	$g‘CÏssFromRegi¡”
(cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
,

1427 
u4
 
v¤c
, 
V”ifyE¼Ü
* 
pFau»
)

1429 
CÏssObjeù
* 
şazz
 = 
NULL
;

1430 
RegTy³
 
ty³
;

1433 
ty³
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
);

1436 ià(
ty³
 =ğ
kRegTy³Z”o
)

1437 
ba
;

1439 ià(!
	`»gTy³IsReã»nû
(
ty³
)) {

1440 
	`LOG_VFY
("VFY:riedo get class from‚on-ref„egister v%d (type=%d)",

1441 
v¤c
, 
ty³
);

1442 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1443 
ba
;

1445 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³
)) {

1446 
	`LOG_VFY
("VFY:„egi¡” %u hŞd unš™Ÿlized„eã»nû", 
v¤c
);

1447 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1448 
ba
;

1451 
şazz
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³
);

1453 
ba
:

1454  
şazz
;

1455 
	}
}

1467 
RegTy³
 
	$g‘InvoÿtiÚThis
(cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
,

1468 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
V”ifyE¼Ü
* 
pFau»
)

1470 
RegTy³
 
thisTy³
 = 
kRegTy³Unknown
;

1472 ià(
pDecIn¢
->
vA
 < 1) {

1473 
	`LOG_VFY
("VFY: invoke†acks 'this'");

1474 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1475 
ba
;

1479 
thisTy³
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vC
);

1480 ià(!
	`»gTy³IsReã»nû
(
thisTy³
)) {

1481 
	`LOG_VFY
("VFY:riedo get class from‚on-ref„egister v%d (type=%d)",

1482 
pDecIn¢
->
vC
, 
thisTy³
);

1483 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1484 
ba
;

1487 
ba
:

1488  
thisTy³
;

1489 
	}
}

1501 
	$£tRegi¡”Ty³
(
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
vd¡
,

1502 
RegTy³
 
ÃwTy³
)

1504 
RegTy³
* 
š¢Regs
 = 
»gi¡”Lše
->
»gTy³s
;

1506 
ÃwTy³
) {

1507 
kRegTy³Unknown
:

1508 
kRegTy³BoŞ—n
:

1509 
kRegTy³OÃ
:

1510 
kRegTy³CÚ¡By‹
:

1511 
kRegTy³CÚ¡PosBy‹
:

1512 
kRegTy³CÚ¡ShÜt
:

1513 
kRegTy³CÚ¡PosShÜt
:

1514 
kRegTy³CÚ¡Ch¬
:

1515 
kRegTy³CÚ¡IÁeg”
:

1516 
kRegTy³By‹
:

1517 
kRegTy³PosBy‹
:

1518 
kRegTy³ShÜt
:

1519 
kRegTy³PosShÜt
:

1520 
kRegTy³Ch¬
:

1521 
kRegTy³IÁeg”
:

1522 
kRegTy³Flßt
:

1523 
kRegTy³Z”o
:

1524 
kRegTy³Unš™
:

1525 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1527 
kRegTy³CÚ¡Lo
:

1528 
kRegTy³LÚgLo
:

1529 
kRegTy³DoubËLo
:

1530 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1531 
š¢Regs
[
vd¡
+1] = 
ÃwTy³
+1;

1533 
kRegTy³CÚ¡Hi
:

1534 
kRegTy³LÚgHi
:

1535 
kRegTy³DoubËHi
:

1537 
	`ALOGE
("BUG:ƒxplicit set of high„egisterype");

1538 
	`dvmAbÜt
();

1543 ià(
	`»gTy³IsReã»nû
(
ÃwTy³
)) {

1544 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1561 
kRegTy³CÚæiù
:

1562 
	`ALOGE
("BUG: s‘„egi¡”ØunknowÀty³ %d", 
ÃwTy³
);

1563 
	`dvmAbÜt
();

1570 ià(
»gi¡”Lše
->
mÚ™ÜEÁr›s
 !ğ
NULL
)

1571 
»gi¡”Lše
->
mÚ™ÜEÁr›s
[
vd¡
] = 0;

1572 
	}
}

1586 
	$v”ifyRegi¡”Ty³
(
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
v¤c
,

1587 
RegTy³
 
checkTy³
, 
V”ifyE¼Ü
* 
pFau»
)

1589 cÚ¡ 
RegTy³
* 
š¢Regs
 = 
»gi¡”Lše
->
»gTy³s
;

1590 
RegTy³
 
¤cTy³
 = 
š¢Regs
[
v¤c
];

1593 
checkTy³
) {

1594 
kRegTy³Flßt
:

1595 
kRegTy³BoŞ—n
:

1596 
kRegTy³PosBy‹
:

1597 
kRegTy³By‹
:

1598 
kRegTy³PosShÜt
:

1599 
kRegTy³ShÜt
:

1600 
kRegTy³Ch¬
:

1601 
kRegTy³IÁeg”
:

1602 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
checkTy³
)) {

1603 
	`LOG_VFY
("VFY:„egister1 v%uype %d, wanted %d",

1604 
v¤c
, 
¤cTy³
, 
checkTy³
);

1605 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1609 ià(
checkTy³
 =ğ
kRegTy³Flßt
) {

1610 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
, 
checkTy³
);

1613 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
, 
	`cÚ¡Ty³ToRegTy³
(
¤cTy³
));

1616 
kRegTy³LÚgLo
:

1617 
kRegTy³DoubËLo
:

1618 ià(
š¢Regs
[
v¤c
+1] !ğ
¤cTy³
+1) {

1619 
	`LOG_VFY
("VFY:„egister2 v%u-%u values %d,%d",

1620 
v¤c
, v¤c+1, 
š¢Regs
[vsrc], insnRegs[vsrc+1]);

1621 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1623 } ià(!
	`ÿnCÚv”tTo2
(
¤cTy³
, 
checkTy³
)) {

1624 
	`LOG_VFY
("VFY:„egister2 v%uype %d, wanted %d",

1625 
v¤c
, 
¤cTy³
, 
checkTy³
);

1626 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1630 ià(
¤cTy³
 =ğ
kRegTy³CÚ¡Lo
) {

1631 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
, 
checkTy³
);

1634 
kRegTy³CÚ¡Lo
:

1635 
kRegTy³CÚ¡Hi
:

1636 
kRegTy³LÚgHi
:

1637 
kRegTy³DoubËHi
:

1638 
kRegTy³Z”o
:

1639 
kRegTy³OÃ
:

1640 
kRegTy³Unknown
:

1641 
kRegTy³CÚæiù
:

1643 
	`as£¹
(
çl£
);

1644 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1646 
kRegTy³Unš™
:

1649 ià(!
	`»gTy³IsReã»nû
(
checkTy³
)) {

1650 
	`LOG_VFY
("VFY: uÃx³ùed checky³ %d", 
checkTy³
);

1651 
	`as£¹
(
çl£
);

1652 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1655 ià(
	`»gTy³IsUnš™Reã»nû
(
checkTy³
)) {

1656 
	`LOG_VFY
("VFY: uninitialized„ef‚otƒxpected‡s„eg check");

1657 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1661 ià(!
	`»gTy³IsReã»nû
(
¤cTy³
)) {

1662 
	`LOG_VFY
("VFY:„egi¡”1 v%uy³ %d, wª‹d„ef", 
v¤c
, 
¤cTy³
);

1663 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1666 ià(
	`»gTy³IsUnš™Reã»nû
(
¤cTy³
)) {

1667 
	`LOG_VFY
("VFY:„egi¡”1 v%u hŞd unš™Ÿlized„ef", 
v¤c
);

1668 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1672 ià(
¤cTy³
 !ğ
kRegTy³Z”o
) {

1673 
CÏssObjeù
* 
¤cCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
¤cTy³
);

1674 
CÏssObjeù
* 
checkCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
checkTy³
);

1675 
	`as£¹
(
¤cCÏss
 !ğ
NULL
);

1676 
	`as£¹
(
checkCÏss
 !ğ
NULL
);

1678 ià(
	`dvmIsIÁ”çûCÏss
(
checkCÏss
)) {

1694 ià(!
	`dvmIn¡ªûof
(
¤cCÏss
, 
checkCÏss
)) {

1695 
	`LOG_VFY
("VFY: %s is‚ot instance of %s",

1696 
¤cCÏss
->
desütÜ
, 
checkCÏss
->descriptor);

1697 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1703 
	}
}

1708 
	$£tResuÉRegi¡”Ty³
(
Regi¡”Lše
* 
»gi¡”Lše
,

1709 cÚ¡ 
š¢RegCouÁ
, 
RegTy³
 
ÃwTy³
)

1711 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
	`RESULT_REGISTER
(
š¢RegCouÁ
), 
ÃwTy³
);

1712 
	}
}

1721 
	$m¬kRefsAsIn™Ÿlized
(
Regi¡”Lše
* 
»gi¡”Lše
, 
š¢RegCouÁ
,

1722 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
unš™Ty³
, 
V”ifyE¼Ü
* 
pFau»
)

1724 
RegTy³
* 
š¢Regs
 = 
»gi¡”Lše
->
»gTy³s
;

1725 
CÏssObjeù
* 
şazz
;

1726 
RegTy³
 
š™Ty³
;

1727 
i
, 
chªged
;

1729 
şazz
 = 
	`g‘Unš™In¡ªû
(
unš™M­
, 
	`»gTy³ToUnš™Index
(
unš™Ty³
));

1730 ià(
şazz
 =ğ
NULL
) {

1731 
	`ALOGE
("VFY: unableo findype=%#x (idx=%d)",

1732 
unš™Ty³
, 
	`»gTy³ToUnš™Index
(uninitType));

1733 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1736 
š™Ty³
 = 
	`»gTy³FromCÏss
(
şazz
);

1738 
chªged
 = 0;

1739 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

1740 ià(
š¢Regs
[
i
] =ğ
unš™Ty³
) {

1741 
š¢Regs
[
i
] = 
š™Ty³
;

1742 
chªged
++;

1746 
	`as£¹
(
chªged
 > 0);

1749 
	}
}

1758 
	$m¬kUnš™RefsAsInv®id
(
Regi¡”Lše
* 
»gi¡”Lše
,

1759 
š¢RegCouÁ
, 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
unš™Ty³
)

1761 
RegTy³
* 
š¢Regs
 = 
»gi¡”Lše
->
»gTy³s
;

1762 
i
, 
chªged
;

1764 
chªged
 = 0;

1765 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

1766 ià(
š¢Regs
[
i
] =ğ
unš™Ty³
) {

1767 
š¢Regs
[
i
] = 
kRegTy³CÚæiù
;

1768 ià(
»gi¡”Lše
->
mÚ™ÜEÁr›s
 !ğ
NULL
)

1769 
»gi¡”Lše
->
mÚ™ÜEÁr›s
[
i
] = 0;

1770 
chªged
++;

1776 
	}
}

1781 
šlše
 
Regi¡”Lše
* 
	$g‘Regi¡”Lše
(cÚ¡ 
Regi¡”TabË
* 
»gTabË
,

1782 
š¢Idx
)

1784  &
»gTabË
->
»gi¡”Lšes
[
š¢Idx
];

1785 
	}
}

1790 
šlše
 
	$cİyRegi¡”Lše
(
Regi¡”Lše
* 
d¡
, cÚ¡ Regi¡”Lše* 
¤c
,

1791 
size_t
 
numRegs
)

1793 
	`memıy
(
d¡
->
»gTy³s
, 
¤c
->»gTy³s, 
numRegs
 * (
RegTy³
));

1795 
	`as£¹
((
¤c
->
mÚ™ÜEÁr›s
 =ğ
NULL
 && 
d¡
->monitorEntries == NULL) ||

1796 (
¤c
->
mÚ™ÜEÁr›s
 !ğ
NULL
 && 
d¡
->monitorEntries != NULL));

1797 ià(
d¡
->
mÚ™ÜEÁr›s
 !ğ
NULL
) {

1798 
	`as£¹
(
d¡
->
mÚ™ÜSck
 !ğ
NULL
);

1799 
	`memıy
(
d¡
->
mÚ™ÜEÁr›s
, 
¤c
->monitorEntries,

1800 
numRegs
 * (
MÚ™ÜEÁr›s
));

1801 
	`memıy
(
d¡
->
mÚ™ÜSck
, 
¤c
->monitorStack,

1802 
kMaxMÚ™ÜSckD•th
 * (
u4
));

1803 
d¡
->
mÚ™ÜSckTİ
 = 
¤c
->monitorStackTop;

1805 
	}
}

1810 
šlše
 
	$cİyLšeToTabË
(
Regi¡”TabË
* 
»gTabË
, 
š¢Idx
,

1811 cÚ¡ 
Regi¡”Lše
* 
¤c
)

1813 
Regi¡”Lše
* 
d¡
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

1814 
	`as£¹
(
d¡
->
»gTy³s
 !ğ
NULL
);

1815 
	`cİyRegi¡”Lše
(
d¡
, 
¤c
, 
»gTabË
->
š¢RegCouÁPlus
);

1816 
	}
}

1821 
šlše
 
	$cİyLšeFromTabË
(
Regi¡”Lše
* 
d¡
,

1822 cÚ¡ 
Regi¡”TabË
* 
»gTabË
, 
š¢Idx
)

1824 
Regi¡”Lše
* 
¤c
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

1825 
	`as£¹
(
¤c
->
»gTy³s
 !ğ
NULL
);

1826 
	`cİyRegi¡”Lše
(
d¡
, 
¤c
, 
»gTabË
->
š¢RegCouÁPlus
);

1827 
	}
}

1830 #iâdeà
NDEBUG


1837 
šlše
 
	$com·»LšeToTabË
(cÚ¡ 
Regi¡”TabË
* 
»gTabË
,

1838 
š¢Idx
, cÚ¡ 
Regi¡”Lše
* 
lše2
)

1840 cÚ¡ 
Regi¡”Lše
* 
lše1
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

1841 ià(
lše1
->
mÚ™ÜEÁr›s
 !ğ
NULL
) {

1842 
»suÉ
;

1844 ià(
lše2
->
mÚ™ÜEÁr›s
 =ğ
NULL
)

1846 
»suÉ
 = 
	`memcmp
(
lše1
->
mÚ™ÜEÁr›s
, 
lše2
->monitorEntries,

1847 
»gTabË
->
š¢RegCouÁPlus
 * (
MÚ™ÜEÁr›s
));

1848 ià(
»suÉ
 != 0) {

1849 
	`LOG_VFY
("monitorEntries mismatch");

1850  
»suÉ
;

1852 
»suÉ
 = 
lše1
->
mÚ™ÜSckTİ
 - 
lše2
->monitorStackTop;

1853 ià(
»suÉ
 != 0) {

1854 
	`LOG_VFY
("monitorStackTop mismatch");

1855  
»suÉ
;

1857 
»suÉ
 = 
	`memcmp
(
lše1
->
mÚ™ÜSck
, 
lše2
->monitorStack,

1858 
lše1
->
mÚ™ÜSckTİ
);

1859 ià(
»suÉ
 != 0) {

1860 
	`LOG_VFY
("monitorStack mismatch");

1861  
»suÉ
;

1864  
	`memcmp
(
lše1
->
»gTy³s
, 
lše2
->regTypes,

1865 
»gTabË
->
š¢RegCouÁPlus
 * (
RegTy³
));

1866 
	}
}

1878 
	eTy³C©egÜy
 {

1879 
	mkTy³C©egÜyUnknown
 = 0,

1880 
	mkTy³C©egÜy1Ä
,

1881 
	mkTy³C©egÜy2
,

1882 
	mkTy³C©egÜyRef
,

1897 
	$checkTy³C©egÜy
(
RegTy³
 
ty³
, 
Ty³C©egÜy
 
ÿt
,

1898 
V”ifyE¼Ü
* 
pFau»
)

1900 
ÿt
) {

1901 
kTy³C©egÜy1Ä
:

1902 
ty³
) {

1903 
kRegTy³Z”o
:

1904 
kRegTy³OÃ
:

1905 
kRegTy³BoŞ—n
:

1906 
kRegTy³CÚ¡PosBy‹
:

1907 
kRegTy³CÚ¡By‹
:

1908 
kRegTy³CÚ¡PosShÜt
:

1909 
kRegTy³CÚ¡ShÜt
:

1910 
kRegTy³CÚ¡Ch¬
:

1911 
kRegTy³CÚ¡IÁeg”
:

1912 
kRegTy³PosBy‹
:

1913 
kRegTy³By‹
:

1914 
kRegTy³PosShÜt
:

1915 
kRegTy³ShÜt
:

1916 
kRegTy³Ch¬
:

1917 
kRegTy³IÁeg”
:

1918 
kRegTy³Flßt
:

1921 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1926 
kTy³C©egÜy2
:

1927 
ty³
) {

1928 
kRegTy³CÚ¡Lo
:

1929 
kRegTy³LÚgLo
:

1930 
kRegTy³DoubËLo
:

1933 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1938 
kTy³C©egÜyRef
:

1939 ià(
ty³
 !ğ
kRegTy³Z”o
 && !
	`»gTy³IsReã»nû
(type))

1940 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1944 
	`as£¹
(
çl£
);

1945 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1948 
	}
}

1957 
	$checkWidePaœ
(
RegTy³
 
ty³l
, RegTy³ 
ty³h
, 
V”ifyE¼Ü
* 
pFau»
)

1959 ià((
ty³h
 !ğ
ty³l
+1))

1960 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1961 
	}
}

1967 
	$cİyRegi¡”1
(
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
vd¡
, u4 
v¤c
,

1968 
Ty³C©egÜy
 
ÿt
, 
V”ifyE¼Ü
* 
pFau»
)

1970 
	`as£¹
(
ÿt
 =ğ
kTy³C©egÜy1Ä
 || c© =ğ
kTy³C©egÜyRef
);

1971 
RegTy³
 
ty³
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
);

1972 
	`checkTy³C©egÜy
(
ty³
, 
ÿt
, 
pFau»
);

1973 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1974 
	`LOG_VFY
("VFY: cİy1 v%u<-v%uy³=%d c©=%d", 
vd¡
, 
v¤c
, 
ty³
, 
ÿt
);

1976 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
vd¡
, 
ty³
);

1977 ià(
ÿt
 =ğ
kTy³C©egÜyRef
 && 
»gi¡”Lše
->
mÚ™ÜEÁr›s
 !ğ
NULL
) {

1978 
»gi¡”Lše
->
mÚ™ÜEÁr›s
[
vd¡
] =

1979 
»gi¡”Lše
->
mÚ™ÜEÁr›s
[
v¤c
];

1982 
	}
}

1988 
	$cİyRegi¡”2
(
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
vd¡
, u4 
v¤c
,

1989 
V”ifyE¼Ü
* 
pFau»
)

1991 
RegTy³
 
ty³l
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
);

1992 
RegTy³
 
ty³h
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
+1);

1994 
	`checkTy³C©egÜy
(
ty³l
, 
kTy³C©egÜy2
, 
pFau»
);

1995 
	`checkWidePaœ
(
ty³l
, 
ty³h
, 
pFau»
);

1996 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1997 
	`LOG_VFY
("VFY: cİy2 v%u<-v%uy³=%d/%d", 
vd¡
, 
v¤c
, 
ty³l
, 
ty³h
);

1999 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
vd¡
, 
ty³l
);

2002 
	}
}

2008 
	$cİyResuÉRegi¡”1
(
Regi¡”Lše
* 
»gi¡”Lše
,

2009 cÚ¡ 
š¢RegCouÁ
, 
u4
 
vd¡
, 
Ty³C©egÜy
 
ÿt
, 
V”ifyE¼Ü
* 
pFau»
)

2011 
RegTy³
 
ty³
;

2012 
u4
 
v¤c
;

2014 
	`as£¹
(
vd¡
 < (
u4
è
š¢RegCouÁ
);

2016 
v¤c
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

2017 
ty³
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
);

2018 
	`checkTy³C©egÜy
(
ty³
, 
ÿt
, 
pFau»
);

2019 ià(!
	`VERIFY_OK
(*
pFau»
)) {

2020 
	`LOG_VFY
("VFY: copyRes1 v%u<-v%u cat=%dype=%d",

2021 
vd¡
, 
v¤c
, 
ÿt
, 
ty³
);

2023 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
vd¡
, 
ty³
);

2024 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
, 
kRegTy³Unknown
);

2027 
	}
}

2033 
	$cİyResuÉRegi¡”2
(
Regi¡”Lše
* 
»gi¡”Lše
,

2034 cÚ¡ 
š¢RegCouÁ
, 
u4
 
vd¡
, 
V”ifyE¼Ü
* 
pFau»
)

2036 
RegTy³
 
ty³l
, 
ty³h
;

2037 
u4
 
v¤c
;

2039 
	`as£¹
(
vd¡
 < (
u4
è
š¢RegCouÁ
);

2041 
v¤c
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

2042 
ty³l
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
);

2043 
ty³h
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
v¤c
+1);

2044 
	`checkTy³C©egÜy
(
ty³l
, 
kTy³C©egÜy2
, 
pFau»
);

2045 
	`checkWidePaœ
(
ty³l
, 
ty³h
, 
pFau»
);

2046 ià(!
	`VERIFY_OK
(*
pFau»
)) {

2047 
	`LOG_VFY
("VFY: copyRes2 v%u<-v%uype=%d/%d",

2048 
vd¡
, 
v¤c
, 
ty³l
, 
ty³h
);

2050 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
vd¡
, 
ty³l
);

2051 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
, 
kRegTy³Unknown
);

2052 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
v¤c
+1, 
kRegTy³Unknown
);

2055 
	}
}

2061 
	$checkUnİ
(
Regi¡”Lše
* 
»gi¡”Lše
, 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

2062 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³
, 
V”ifyE¼Ü
* 
pFau»
)

2064 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vB
, 
¤cTy³
, 
pFau»
);

2065 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vA
, 
d¡Ty³
);

2066 
	}
}

2084 
boŞ
 
	$upÿ¡BoŞ—nOp
(
Regi¡”Lše
* 
»gi¡”Lše
, 
u4
 
»g1
, u4 
»g2
)

2086 
RegTy³
 
ty³1
, 
ty³2
;

2088 
ty³1
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
»g1
);

2089 
ty³2
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
»g2
);

2091 ià((
ty³1
 =ğ
kRegTy³BoŞ—n
 ||y³1 =ğ
kRegTy³Z”o
 ||

2092 
ty³1
 =ğ
kRegTy³OÃ
) &&

2093 (
ty³2
 =ğ
kRegTy³BoŞ—n
 ||y³2 =ğ
kRegTy³Z”o
 ||

2094 
ty³2
 =ğ
kRegTy³OÃ
))

2096  
Œue
;

2098  
çl£
;

2099 
	}
}

2108 
	$checkL™İ
(
Regi¡”Lše
* 
»gi¡”Lše
, 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

2109 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³
, 
boŞ
 
checkBoŞ—nOp
,

2110 
V”ifyE¼Ü
* 
pFau»
)

2112 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vB
, 
¤cTy³
, 
pFau»
);

2113 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

2114 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

2116 ià(
	`upÿ¡BoŞ—nOp
(
»gi¡”Lše
, 
pDecIn¢
->
vB
,…DecInsn->vB)

2117 && (
pDecIn¢
->
vC
 == 0 ||…DecInsn->vC == 1))

2119 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

2122 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vA
, 
d¡Ty³
);

2123 
	}
}

2130 
	$checkBšİ
(
Regi¡”Lše
* 
»gi¡”Lše
, 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

2131 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³1
, RegTy³ 
¤cTy³2
, 
boŞ
 
checkBoŞ—nOp
,

2132 
V”ifyE¼Ü
* 
pFau»
)

2134 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vB
, 
¤cTy³1
, 
pFau»
);

2135 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vC
, 
¤cTy³2
, 
pFau»
);

2136 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

2137 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

2138 ià(
	`upÿ¡BoŞ—nOp
(
»gi¡”Lše
, 
pDecIn¢
->
vB
,…DecIn¢->
vC
))

2139 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

2141 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vA
, 
d¡Ty³
);

2142 
	}
}

2148 
	$checkBšİ2addr
(
Regi¡”Lše
* 
»gi¡”Lše
,

2149 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³1
,

2150 
RegTy³
 
¤cTy³2
, 
boŞ
 
checkBoŞ—nOp
, 
V”ifyE¼Ü
* 
pFau»
)

2152 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vA
, 
¤cTy³1
, 
pFau»
);

2153 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vB
, 
¤cTy³2
, 
pFau»
);

2154 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

2155 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

2156 ià(
	`upÿ¡BoŞ—nOp
(
»gi¡”Lše
, 
pDecIn¢
->
vA
,…DecIn¢->
vB
))

2157 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

2159 
	`£tRegi¡”Ty³
(
»gi¡”Lše
, 
pDecIn¢
->
vA
, 
d¡Ty³
);

2160 
	}
}

2196 
RegTy³
 
	$adju¡FÜRightShiá
(
Regi¡”Lše
* 
»gi¡”Lše
, 
»g
,

2197 
shiáCouÁ
, 
boŞ
 
isUnsigÃdShiá
, 
V”ifyE¼Ü
* 
pFau»
)

2199 
RegTy³
 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
»gi¡”Lše
, 
»g
);

2200 
RegTy³
 
ÃwTy³
;

2203 
¤cTy³
 = 
	`cÚ¡Ty³ToRegTy³
(srcType);

2206 ià(
shiáCouÁ
 == 0)

2207  
¤cTy³
;

2210 ià(
isUnsigÃdShiá
)

2211 
ÃwTy³
 = 
kRegTy³IÁeg”
;

2213 
ÃwTy³
 = 
¤cTy³
;

2215 ià(
shiáCouÁ
 >= 32) {

2216 
	`LOG_VFY
("GÙ uÃx³ùedly†¬gshiá couÁ %u", 
shiáCouÁ
);

2218  
ÃwTy³
;

2221 
¤cTy³
) {

2222 
kRegTy³IÁeg”
:

2223 ià(
isUnsigÃdShiá
) {

2224 ià(
shiáCouÁ
 > 24)

2225 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2226 ià(
shiáCouÁ
 >= 16)

2227 
ÃwTy³
 = 
kRegTy³Ch¬
;

2229 ià(
shiáCouÁ
 >= 24)

2230 
ÃwTy³
 = 
kRegTy³By‹
;

2231 ià(
shiáCouÁ
 >= 16)

2232 
ÃwTy³
 = 
kRegTy³ShÜt
;

2235 
kRegTy³ShÜt
:

2236 ià(
isUnsigÃdShiá
) {

2239 ià(
shiáCouÁ
 >= 8)

2240 
ÃwTy³
 = 
kRegTy³By‹
;

2243 
kRegTy³PosShÜt
:

2244 ià(
shiáCouÁ
 >= 8)

2245 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2247 
kRegTy³Ch¬
:

2248 ià(
shiáCouÁ
 > 8)

2249 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2251 
kRegTy³By‹
:

2254 
kRegTy³PosBy‹
:

2256 
ÃwTy³
 = 
¤cTy³
;

2258 
kRegTy³Z”o
:

2259 
kRegTy³OÃ
:

2260 
kRegTy³BoŞ—n
:

2262 
ÃwTy³
 = 
kRegTy³Z”o
;

2266 
	`as£¹
(
çl£
);

2270 ià(
ÃwTy³
 !ğ
¤cTy³
) {

2271 
	`LOGVV
("narrowing: %d(%d) --> %do %d",

2272 
shiáCouÁ
, 
isUnsigÃdShiá
, 
¤cTy³
, 
ÃwTy³
);

2274 
	`LOGVV
("not‚arrowed: %d(%d) --> %d",

2275 
shiáCouÁ
, 
isUnsigÃdShiá
, 
¤cTy³
);

2277  
ÃwTy³
;

2278 
	}
}

2292 
	$g‘CÏssD•th
(
CÏssObjeù
* 
şazz
)

2294 
d•th
 = 0;

2296 
şazz
->
su³r
 !ğ
NULL
) {

2297 
şazz
 = cÏzz->
su³r
;

2298 
d•th
++;

2300  
d•th
;

2301 
	}
}

2310 
CÏssObjeù
* 
	$digFÜSu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2312 
d•th1
, 
d•th2
;

2314 
d•th1
 = 
	`g‘CÏssD•th
(
c1
);

2315 
d•th2
 = 
	`g‘CÏssD•th
(
c2
);

2317 ià(
gDebugV”bo£
) {

2318 
	`LOGVV
("COMMON: %s(%d) + %s(%d)",

2319 
c1
->
desütÜ
, 
d•th1
, 
c2
->desütÜ, 
d•th2
);

2323 ià(
d•th1
 > 
d•th2
) {

2324 
d•th1
 > 
d•th2
) {

2325 
c1
 = c1->
su³r
;

2326 
d•th1
--;

2329 
d•th2
 > 
d•th1
) {

2330 
c2
 = c2->
su³r
;

2331 
d•th2
--;

2336 
c1
 !ğ
c2
) {

2337 
c1
 = c1->
su³r
;

2338 
c2
 = c2->
su³r
;

2340 
	`as£¹
(
c1
 !ğ
NULL
 && 
c2
 != NULL);

2343 ià(
gDebugV”bo£
) {

2344 
	`LOGVV
(" : --> %s", 
c1
->
desütÜ
);

2346  
c1
;

2347 
	}
}

2372 
CÏssObjeù
* 
	$fšdCommÚA¼aySu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2374 
CÏssObjeù
* 
¬¿yCÏss
 = 
NULL
;

2375 
CÏssObjeù
* 
commÚEËm
;

2376 
¬¿yDim1
, 
¬¿yDim2
;

2377 
i
, 
numDims
;

2378 
boŞ
 
hasPrim™ive
 = 
çl£
;

2380 
¬¿yDim1
 = 
c1
->
¬¿yDim
;

2381 
¬¿yDim2
 = 
c2
->
¬¿yDim
;

2382 
	`as£¹
(
c1
->
¬¿yDim
 > 0);

2383 
	`as£¹
(
c2
->
¬¿yDim
 > 0);

2385 ià(
	`dvmIsPrim™iveCÏss
(
c1
->
–em’tCÏss
)) {

2386 
¬¿yDim1
--;

2387 
hasPrim™ive
 = 
Œue
;

2389 ià(
	`dvmIsPrim™iveCÏss
(
c2
->
–em’tCÏss
)) {

2390 
¬¿yDim2
--;

2391 
hasPrim™ive
 = 
Œue
;

2394 ià(!
hasPrim™ive
 && 
¬¿yDim1
 =ğ
¬¿yDim2
) {

2399 
commÚEËm
 = 
	`fšdCommÚSu³rşass
(
c1
->
–em’tCÏss
, 
c2
->elementClass);

2400 
numDims
 = 
¬¿yDim1
;

2409 ià(
¬¿yDim1
 < 
¬¿yDim2
)

2410 
numDims
 = 
¬¿yDim1
;

2412 
numDims
 = 
¬¿yDim2
;

2413 
¬¿yCÏss
 = 
commÚEËm
 = 
c1
->
su³r
;

2421 
i
 = 0; i < 
numDims
; i++) {

2422 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
commÚEËm
);

2423 
commÚEËm
 = 
¬¿yCÏss
;

2425 
	`as£¹
(
¬¿yCÏss
 !ğ
NULL
);

2427 
	`LOGVV
("ArrayMerge '%s' + '%s' --> '%s'",

2428 
c1
->
desütÜ
, 
c2
->desütÜ, 
¬¿yCÏss
->descriptor);

2429  
¬¿yCÏss
;

2430 
	}
}

2462 
CÏssObjeù
* 
	$fšdCommÚSu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2464 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
c1
è&& !dvmIsPrim™iveCÏss(
c2
));

2466 ià(
c1
 =ğ
c2
)

2467  
c1
;

2469 ià(
	`dvmIsIÁ”çûCÏss
(
c1
è&& 
	`dvmIm¶em’ts
(
c2
, c1)) {

2470 ià(
gDebugV”bo£
)

2471 
	`LOGVV
("COMMON/I1: %s + %s --> %s",

2472 
c1
->
desütÜ
, 
c2
->descriptor, c1->descriptor);

2473  
c1
;

2475 ià(
	`dvmIsIÁ”çûCÏss
(
c2
è&& 
	`dvmIm¶em’ts
(
c1
, c2)) {

2476 ià(
gDebugV”bo£
)

2477 
	`LOGVV
("COMMON/I2: %s + %s --> %s",

2478 
c1
->
desütÜ
, 
c2
->descriptor, c2->descriptor);

2479  
c2
;

2482 ià(
	`dvmIsA¼ayCÏss
(
c1
è&& dvmIsA¼ayCÏss(
c2
)) {

2483  
	`fšdCommÚA¼aySu³rşass
(
c1
, 
c2
);

2486  
	`digFÜSu³rşass
(
c1
, 
c2
);

2487 
	}
}

2494 
RegTy³
 
	$m”geTy³s
(
RegTy³
 
ty³1
, RegTy³ 
ty³2
, 
boŞ
* 
pChªged
)

2496 
RegTy³
 
»suÉ
;

2501 ià(
ty³1
 =ğ
ty³2
)

2502  
ty³1
;

2513 ià(
ty³1
 < 
kRegTy³MAX
) {

2514 ià(
ty³2
 < 
kRegTy³MAX
) {

2515 
»suÉ
 = 
gDvmM”geTab
[
ty³1
][
ty³2
];

2518 ià(
ty³1
 =ğ
kRegTy³Z”o
)

2519 
»suÉ
 = 
ty³2
;

2521 
»suÉ
 = 
kRegTy³CÚæiù
;

2524 ià(
ty³2
 < 
kRegTy³MAX
) {

2526 ià(
ty³2
 =ğ
kRegTy³Z”o
)

2527 
»suÉ
 = 
ty³1
;

2529 
»suÉ
 = 
kRegTy³CÚæiù
;

2532 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³1
) ||

2533 
	`»gTy³IsUnš™Reã»nû
(
ty³2
))

2536 
»suÉ
 = 
kRegTy³CÚæiù
;

2538 
CÏssObjeù
* 
şazz1
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³1
);

2539 
CÏssObjeù
* 
şazz2
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³2
);

2540 
CÏssObjeù
* 
m”gedCÏss
;

2542 
m”gedCÏss
 = 
	`fšdCommÚSu³rşass
(
şazz1
, 
şazz2
);

2543 
	`as£¹
(
m”gedCÏss
 !ğ
NULL
);

2544 
»suÉ
 = 
	`»gTy³FromCÏss
(
m”gedCÏss
);

2549 ià(
»suÉ
 !ğ
ty³1
)

2550 *
pChªged
 = 
Œue
;

2551  
»suÉ
;

2552 
	}
}

2562 
MÚ™ÜEÁr›s
 
	$m”geMÚ™ÜEÁr›s
(
MÚ™ÜEÁr›s
 
’ts1
,

2563 
MÚ™ÜEÁr›s
 
’ts2
, 
boŞ
* 
pChªged
)

2565 
MÚ™ÜEÁr›s
 
»suÉ
 = 
’ts1
 & 
’ts2
;

2566 ià(
»suÉ
 !ğ
’ts1
)

2567 *
pChªged
 = 
Œue
;

2568  
»suÉ
;

2569 
	}
}

2580 
boŞ
 
	$upd©eRegi¡”s
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

2581 
Regi¡”TabË
* 
»gTabË
, 
ÃxtIn¢
, cÚ¡ 
Regi¡”Lše
* 
wÜkLše
)

2583 cÚ¡ 
size_t
 
š¢RegCouÁPlus
 = 
»gTabË
->insnRegCountPlus;

2584 
	`as£¹
(
wÜkLše
 !ğ
NULL
);

2585 cÚ¡ 
RegTy³
* 
wÜkRegs
 = 
wÜkLše
->
»gTy³s
;

2587 ià(!
	`dvmIn¢IsVis™edOrChªged
(
š¢FÏgs
, 
ÃxtIn¢
)) {

2595 
	`LOGVV
("COPY iÁØ0x%04x", 
ÃxtIn¢
);

2596 
	`cİyLšeToTabË
(
»gTabË
, 
ÃxtIn¢
, 
wÜkLše
);

2597 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

2598 #ifdeà
VERIFIER_STATS


2599 
gDvm
.
v”if›rSts
.
cİyRegCouÁ
++;

2602 ià(
gDebugV”bo£
) {

2603 
	`LOGVV
("MERGE iÁØ0x%04x", 
ÃxtIn¢
);

2608 
Regi¡”Lše
* 
rg‘Lše
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
ÃxtIn¢
);

2609 
RegTy³
* 
rg‘Regs
 = 
rg‘Lše
->
»gTy³s
;

2610 
MÚ™ÜEÁr›s
* 
wÜkMÚEÁs
 = 
wÜkLše
->
mÚ™ÜEÁr›s
;

2611 
MÚ™ÜEÁr›s
* 
rg‘MÚEÁs
 = 
rg‘Lše
->
mÚ™ÜEÁr›s
;

2612 
boŞ
 
chªged
 = 
çl£
;

2613 
idx
;

2615 
	`as£¹
(
rg‘Regs
 !ğ
NULL
);

2617 ià(
rg‘MÚEÁs
 !ğ
NULL
) {

2621 ià(
rg‘Lše
->
mÚ™ÜSckTİ
 !ğ
wÜkLše
->monitorStackTop) {

2622 
	`LOG_VFY_METH
(
m‘h
,

2624 
rg‘Lše
->
mÚ™ÜSckTİ
, 
wÜkLše
->monitorStackTop,

2625 
ÃxtIn¢
);

2626  
çl£
;

2628 ià(
	`memcmp
(
rg‘Lše
->
mÚ™ÜSck
, 
wÜkLše
->monitorStack,

2629 
rg‘Lše
->
mÚ™ÜSckTİ
 * (
u4
)) != 0)

2631 
	`LOG_VFY_METH
(
m‘h
, "VFY: mismatched monitor stacks‡t 0x%04x",

2632 
ÃxtIn¢
);

2633  
çl£
;

2637 
idx
 = 0; idx < 
š¢RegCouÁPlus
; idx++) {

2638 
rg‘Regs
[
idx
] =

2639 
	`m”geTy³s
(
rg‘Regs
[
idx
], 
wÜkRegs
[idx], &
chªged
);

2641 ià(
rg‘MÚEÁs
 !ğ
NULL
) {

2642 
rg‘MÚEÁs
[
idx
] = 
	`m”geMÚ™ÜEÁr›s
(targetMonEnts[idx],

2643 
wÜkMÚEÁs
[
idx
], &
chªged
);

2647 ià(
gDebugV”bo£
) {

2651 #ifdeà
VERIFIER_STATS


2652 
gDvm
.
v”if›rSts
.
m”geRegCouÁ
++;

2653 ià(
chªged
)

2654 
gDvm
.
v”if›rSts
.
m”geRegChªged
++;

2657 ià(
chªged
)

2658 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

2661  
Œue
;

2662 
	}
}

2688 
In¡F›ld
* 
	$g‘In¡F›ld
(cÚ¡ 
M‘hod
* 
m‘h
,

2689 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
objTy³
, 
f›ldIdx
,

2690 
V”ifyE¼Ü
* 
pFau»
)

2692 
In¡F›ld
* 
š¡F›ld
 = 
NULL
;

2693 
CÏssObjeù
* 
objCÏss
;

2694 
boŞ
 
mu¡BeLoÿl
 = 
çl£
;

2696 ià(!
	`»gTy³IsReã»nû
(
objTy³
)) {

2697 
	`LOG_VFY
("VFY:‡ttempto‡ccess field in‚on-referenceype %d",

2698 
objTy³
);

2699 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2700 
ba
;

2703 
š¡F›ld
 = 
	`dvmO±ResŞveIn¡F›ld
(
m‘h
->
şazz
, 
f›ldIdx
, 
pFau»
);

2704 ià(
š¡F›ld
 =ğ
NULL
) {

2705 
	`LOG_VFY
("VFY: uÇbËØ»sŞvš¡ªû f›ld %u", 
f›ldIdx
);

2706 
	`as£¹
(!
	`VERIFY_OK
(*
pFau»
));

2707 
ba
;

2710 ià(
objTy³
 =ğ
kRegTy³Z”o
)

2711 
ba
;

2718 
objCÏss
 = 
	`»gTy³Reã»nûToCÏss
(
objTy³
, 
unš™M­
);

2719 
	`as£¹
(
objCÏss
 !ğ
NULL
);

2720 ià(
	`»gTy³IsUnš™Reã»nû
(
objTy³
)) {

2721 ià(!
	`isIn™M‘hod
(
m‘h
è|| m‘h->
şazz
 !ğ
objCÏss
) {

2722 
	`LOG_VFY
("VFY:‡ttempto‡ccess field via uninitialized„ef");

2723 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2724 
ba
;

2726 
mu¡BeLoÿl
 = 
Œue
;

2729 ià(!
	`dvmIn¡ªûof
(
objCÏss
, 
š¡F›ld
->
şazz
)) {

2730 
	`LOG_VFY
("VFY: invalid field‡ccess (field %s.%s,hrough %s„ef)",

2731 
š¡F›ld
->
şazz
->
desütÜ
, in¡F›ld->
Çme
,

2732 
objCÏss
->
desütÜ
);

2733 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

2734 
ba
;

2737 ià(
mu¡BeLoÿl
) {

2739 ià(
š¡F›ld
 < 
objCÏss
->
if›lds
 ||

2740 
š¡F›ld
 >ğ
objCÏss
->
if›lds
 + objCÏss->
if›ldCouÁ
)

2742 
	`LOG_VFY
("VFY: invalid constructor field‡ccess (field %s in %s)",

2743 
š¡F›ld
->
Çme
, 
objCÏss
->
desütÜ
);

2744 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2745 
ba
;

2749 
ba
:

2750  
š¡F›ld
;

2751 
	}
}

2759 
SticF›ld
* 
	$g‘SticF›ld
(cÚ¡ 
M‘hod
* 
m‘h
, 
f›ldIdx
,

2760 
V”ifyE¼Ü
* 
pFau»
)

2762 
SticF›ld
* 
¡©icF›ld
;

2764 
¡©icF›ld
 = 
	`dvmO±ResŞveSticF›ld
(
m‘h
->
şazz
, 
f›ldIdx
, 
pFau»
);

2765 ià(
¡©icF›ld
 =ğ
NULL
) {

2766 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

2767 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2769 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
f›ldIdx
);

2771 
	`LOG_VFY
("VFY: uÇbËØ»sŞv¡©iøf›ld %u (%sèš %s", 
f›ldIdx
,

2772 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

2773 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
));

2774 
	`as£¹
(!
	`VERIFY_OK
(*
pFau»
));

2775 
ba
;

2778 
ba
:

2779  
¡©icF›ld
;

2780 
	}
}

2788 
	$checkFš®F›ldAcûss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
F›ld
* 
f›ld
,

2789 
V”ifyE¼Ü
* 
pFau»
)

2791 ià(!
	`dvmIsFš®F›ld
(
f›ld
))

2795 ià(
m‘h
->
şazz
 !ğ
f›ld
->clazz) {

2796 
	`LOG_VFY_METH
(
m‘h
, "VFY: can't modify final field %s.%s",

2797 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

2798 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

2810 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

2811 ià(!
	`isCÏssIn™M‘hod
(
m‘h
)) {

2812 
	`LOG_VFY_METH
(
m‘h
,

2814 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2817 ià(!
	`isIn™M‘hod
(
m‘h
)) {

2818 
	`LOG_VFY_METH
(
m‘h
,

2820 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2824 
	}
}

2831 
	$checkA¼ayIndexTy³
(cÚ¡ 
M‘hod
* 
m‘h
, 
RegTy³
 
»gTy³
,

2832 
V”ifyE¼Ü
* 
pFau»
)

2834 ià(
	`VERIFY_OK
(*
pFau»
)) {

2839 
	`checkTy³C©egÜy
(
»gTy³
, 
kTy³C©egÜy1Ä
, 
pFau»
);

2840 ià(
»gTy³
 =ğ
kRegTy³Flßt
) {

2841 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2843 ià(!
	`VERIFY_OK
(*
pFau»
)) {

2844 
	`LOG_VFY_METH
(
m‘h
, "Invalid„egype for‡rray index (%d)",

2845 
»gTy³
);

2848 
	}
}

2861 
boŞ
 
	$checkCÚ¡ruùÜR‘uº
(cÚ¡ 
M‘hod
* 
m‘h
,

2862 cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
, cÚ¡ 
š¢RegCouÁ
)

2864 cÚ¡ 
RegTy³
* 
š¢Regs
 = 
»gi¡”Lše
->
»gTy³s
;

2865 
i
;

2867 ià(!
	`isIn™M‘hod
(
m‘h
))

2868  
Œue
;

2870 
RegTy³
 
unš™This
 = 
	`»gTy³FromUnš™Index
(
kUnš™ThisArgSlÙ
);

2872 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

2873 ià(
š¢Regs
[
i
] =ğ
unš™This
) {

2874 
	`LOG_VFY
("VFY: <init>„eturning without calling superclass init");

2875  
çl£
;

2878  
Œue
;

2879 
	}
}

2889 
boŞ
 
	$checkMoveExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
,

2890 cÚ¡ * 
logNÙe
)

2892 
	`as£¹
(
š¢Idx
 >ğ0 && in¢Idx < ()
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

2894 ià((
m‘h
->
š¢s
[
š¢Idx
] & 0xffè=ğ
OP_MOVE_EXCEPTION
) {

2895 
	`LOG_VFY
("VFY: invalid use of move-exception");

2896  
çl£
;

2898  
Œue
;

2899 
	}
}

2912 
CÏssObjeù
* 
	$g‘CaughtExû±iÚTy³
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
,

2913 
V”ifyE¼Ü
* 
pFau»
)

2915 
V”ifyE¼Ü
 
loÿlFau»
;

2916 cÚ¡ 
DexCode
* 
pCode
;

2917 
DexFe
* 
pDexFe
;

2918 
CÏssObjeù
* 
commÚSu³r
 = 
NULL
;

2919 
u4
 
hªdËrsSize
;

2920 
u4
 
off£t
;

2921 
u4
 
i
;

2923 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

2924 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

2926 ià(
pCode
->
Œ›sSize
 != 0) {

2927 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

2928 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

2930 
hªdËrsSize
 = 0;

2931 
off£t
 = 0;

2934 
i
 = 0; i < 
hªdËrsSize
; i++) {

2935 
DexC©chI‹¿tÜ
 
™”©Ü
;

2936 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

2939 cÚ¡ 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

2941 ià(
hªdËr
 =ğ
NULL
) {

2945 ià(
hªdËr
->
add»ss
 =ğ(
u4
è
š¢Idx
) {

2946 
CÏssObjeù
* 
şazz
;

2948 ià(
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
)

2949 
şazz
 = 
gDvm
.
exThrowabË
;

2951 
şazz
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->şazz, 
hªdËr
->
ty³Idx
,

2952 &
loÿlFau»
);

2954 ià(
şazz
 =ğ
NULL
) {

2955 
	`LOG_VFY
("VFY: unableo„esolveƒxception class %u (%s)",

2956 
hªdËr
->
ty³Idx
,

2957 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
hªdËr
->
ty³Idx
));

2963 ià(
commÚSu³r
 =ğ
NULL
)

2964 
commÚSu³r
 = 
şazz
;

2966 
commÚSu³r
 = 
	`fšdCommÚSu³rşass
(
şazz
, commonSuper);

2971 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

2974 ià(
commÚSu³r
 =ğ
NULL
) {

2976 
	`LOG_VFY_METH
(
m‘h
,

2977 "VFY: uÇbËØfšdƒxû±iÚ hªdË¸©‡dd¸%#x", 
š¢Idx
);

2978 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2983  
commÚSu³r
;

2984 
	}
}

2991 
u1
* 
	$assignLšeStÜage
(
u1
* 
¡Üage
, 
Regi¡”Lše
* 
lše
,

2992 
boŞ
 
ŒackMÚ™Üs
, 
size_t
 
»gTy³Size
, size_ˆ
mÚEÁSize
, size_ˆ
¡ackSize
)

2994 
lše
->
»gTy³s
 = (
RegTy³
*è
¡Üage
;

2995 
¡Üage
 +ğ
»gTy³Size
;

2997 ià(
ŒackMÚ™Üs
) {

2998 
lše
->
mÚ™ÜEÁr›s
 = (
MÚ™ÜEÁr›s
*è
¡Üage
;

2999 
¡Üage
 +ğ
mÚEÁSize
;

3000 
lše
->
mÚ™ÜSck
 = (
u4
*è
¡Üage
;

3001 
¡Üage
 +ğ
¡ackSize
;

3003 
	`as£¹
(
lše
->
mÚ™ÜSckTİ
 == 0);

3006  
¡Üage
;

3007 
	}
}

3022 
boŞ
 
	$š™Regi¡”TabË
(cÚ¡ 
V”if›rD©a
* 
vd©a
,

3023 
Regi¡”TabË
* 
»gTabË
, 
Regi¡”T¿ckšgMode
 
ŒackRegsFÜ
)

3025 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

3026 cÚ¡ 
š¢sSize
 = 
vd©a
->insnsSize;

3027 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

3028 cÚ¡ 
kExŒaLšes
 = 2;

3029 
i
;

3036 
»gTabË
->
š¢RegCouÁPlus
 = 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
;

3037 
»gTabË
->
»gi¡”Lšes
 =

3038 (
Regi¡”Lše
*è
	`ÿÎoc
(
š¢sSize
, (RegisterLine));

3039 ià(
»gTabË
->
»gi¡”Lšes
 =ğ
NULL
)

3040  
çl£
;

3042 
	`as£¹
(
š¢sSize
 > 0);

3052 
š‹»¡šgCouÁ
 = 
kExŒaLšes
;

3054 
i
 = 0; i < 
š¢sSize
; i++) {

3055 
boŞ
 
š‹»¡šg
;

3057 
ŒackRegsFÜ
) {

3058 
kT¿ckRegsAÎ
:

3059 
š‹»¡šg
 = 
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
i
);

3061 
kT¿ckRegsGcPošts
:

3062 
š‹»¡šg
 = 
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
i
) ||

3063 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

3065 
kT¿ckRegsB¿nches
:

3066 
š‹»¡šg
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

3069 
	`dvmAbÜt
();

3070  
çl£
;

3073 ià(
š‹»¡šg
)

3074 
š‹»¡šgCouÁ
++;

3085 
size_t
 
»gTy³Size
 = 
»gTabË
->
š¢RegCouÁPlus
 * (
RegTy³
);

3086 
size_t
 
mÚEÁSize
 = 
»gTabË
->
š¢RegCouÁPlus
 * (
MÚ™ÜEÁr›s
);

3087 
size_t
 
¡ackSize
 = 
kMaxMÚ™ÜSckD•th
 * (
u4
);

3088 
boŞ
 
ŒackMÚ™Üs
;

3090 ià(
gDvm
.
mÚ™ÜV”ifiÿtiÚ
) {

3091 
ŒackMÚ™Üs
 = (
vd©a
->
mÚ™ÜEÁ”CouÁ
 != 0);

3093 
ŒackMÚ™Üs
 = 
çl£
;

3096 
size_t
 
¥aûP”EÁry
 = 
»gTy³Size
 +

3097 (
ŒackMÚ™Üs
 ? 
mÚEÁSize
 + 
¡ackSize
 : 0);

3098 
»gTabË
->
lšeAÎoc
 = 
	`ÿÎoc
(
š‹»¡šgCouÁ
, 
¥aûP”EÁry
);

3099 ià(
»gTabË
->
lšeAÎoc
 =ğ
NULL
)

3100  
çl£
;

3102 #ifdeà
VERIFIER_STATS


3103 
size_t
 
tÙ®S·û
 = 
š‹»¡šgCouÁ
 * 
¥aûP”EÁry
 +

3104 
š¢sSize
 * (
Regi¡”Lše
);

3105 ià(
gDvm
.
v”if›rSts
.
bigge¡AÎoc
 < 
tÙ®S·û
)

3106 
gDvm
.
v”if›rSts
.
bigge¡AÎoc
 = 
tÙ®S·û
;

3115 
u1
* 
¡Üage
 = (u1*)
»gTabË
->
lšeAÎoc
;

3116 
i
 = 0; i < 
š¢sSize
; i++) {

3117 
boŞ
 
š‹»¡šg
;

3119 
ŒackRegsFÜ
) {

3120 
kT¿ckRegsAÎ
:

3121 
š‹»¡šg
 = 
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
i
);

3123 
kT¿ckRegsGcPošts
:

3124 
š‹»¡šg
 = 
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
i
) ||

3125 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

3127 
kT¿ckRegsB¿nches
:

3128 
š‹»¡šg
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

3131 
	`dvmAbÜt
();

3132  
çl£
;

3135 ià(
š‹»¡šg
) {

3136 
¡Üage
 = 
	`assignLšeStÜage
(¡Üage, &
»gTabË
->
»gi¡”Lšes
[
i
],

3137 
ŒackMÚ™Üs
, 
»gTy³Size
, 
mÚEÁSize
, 
¡ackSize
);

3144 
¡Üage
 = 
	`assignLšeStÜage
(¡Üage, &
»gTabË
->
wÜkLše
,

3145 
ŒackMÚ™Üs
, 
»gTy³Size
, 
mÚEÁSize
, 
¡ackSize
);

3146 
¡Üage
 = 
	`assignLšeStÜage
(¡Üage, &
»gTabË
->
§vedLše
,

3147 
ŒackMÚ™Üs
, 
»gTy³Size
, 
mÚEÁSize
, 
¡ackSize
);

3152 
	`as£¹
(
¡Üage
 - (
u1
*)
»gTabË
->
lšeAÎoc
 ==

3153 (è(
š‹»¡šgCouÁ
 * 
¥aûP”EÁry
));

3154 
	`as£¹
(
»gTabË
->
»gi¡”Lšes
[0].
»gTy³s
 !ğ
NULL
);

3155  
Œue
;

3156 
	}
}

3161 
	$ä“Regi¡”LšeIÂ¬ds
(
V”if›rD©a
* 
vd©a
)

3163 
idx
;

3165 ià(
vd©a
->
»gi¡”Lšes
 =ğ
NULL
)

3168 
idx
 = 0; idx < 
vd©a
->
š¢sSize
; idx++) {

3169 
B™VeùÜ
* 
liveRegs
 = 
vd©a
->
»gi¡”Lšes
[
idx
].liveRegs;

3170 ià(
liveRegs
 !ğ
NULL
)

3171 
	`dvmF»eB™VeùÜ
(
liveRegs
);

3173 
	}
}

3181 
	$v”ifyFËdNewA¼ayRegs
(cÚ¡ 
M‘hod
* 
m‘h
,

3182 
Regi¡”Lše
* 
»gi¡”Lše
, cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

3183 
CÏssObjeù
* 
»sCÏss
, 
boŞ
 
isRªge
, 
V”ifyE¼Ü
* 
pFau»
)

3185 
u4
 
¬gCouÁ
 = 
pDecIn¢
->
vA
;

3186 
RegTy³
 
ex³ùedTy³
;

3187 
Prim™iveTy³
 
–emTy³
;

3188 
ui
;

3190 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
»sCÏss
));

3191 
–emTy³
 = 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
;

3192 ià(
–emTy³
 =ğ
PRIM_NOT
) {

3193 
ex³ùedTy³
 = 
	`»gTy³FromCÏss
(
»sCÏss
->
–em’tCÏss
);

3195 
ex³ùedTy³
 = 
	`´im™iveTy³ToRegTy³
(
–emTy³
);

3204 
ui
 = 0; u˜< 
¬gCouÁ
; ui++) {

3205 
u4
 
g‘Reg
;

3207 ià(
isRªge
)

3208 
g‘Reg
 = 
pDecIn¢
->
vC
 + 
ui
;

3210 
g‘Reg
 = 
pDecIn¢
->
¬g
[
ui
];

3212 
	`v”ifyRegi¡”Ty³
(
»gi¡”Lše
, 
g‘Reg
, 
ex³ùedTy³
, 
pFau»
);

3213 ià(!
	`VERIFY_OK
(*
pFau»
)) {

3214 
	`LOG_VFY
("VFY: fËd-Ãw-¬¿y‡rg %u(%uènÙ v®id", 
ui
, 
g‘Reg
);

3218 
	}
}

3239 
boŞ
 
	$»¶aûFašgIn¡ruùiÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

3240 
š¢Idx
, 
V”ifyE¼Ü
 
çu»
)

3242 
V”ifyE¼ÜRefTy³
 
»fTy³
;

3243 
u2
* 
ŞdIn¢s
 = (u2*è
m‘h
->
š¢s
 + 
š¢Idx
;

3244 
width
;

3246 ià(
gDvm
.
İtimizšg
)

3247 
	`ALOGD
("Weird: RFI during dexopt?");

3254 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(*
ŞdIn¢s
);

3255 
İcode
) {

3256 
OP_CONST_CLASS
:

3257 
OP_CHECK_CAST
:

3258 
OP_INSTANCE_OF
:

3259 
OP_NEW_INSTANCE
:

3260 
OP_NEW_ARRAY
:

3261 
OP_FILLED_NEW_ARRAY
:

3262 
OP_FILLED_NEW_ARRAY_RANGE
:

3263 
»fTy³
 = 
VERIFY_ERROR_REF_CLASS
;

3266 
OP_IGET
:

3267 
OP_IGET_BOOLEAN
:

3268 
OP_IGET_BYTE
:

3269 
OP_IGET_CHAR
:

3270 
OP_IGET_SHORT
:

3271 
OP_IGET_WIDE
:

3272 
OP_IGET_OBJECT
:

3273 
OP_IPUT
:

3274 
OP_IPUT_BOOLEAN
:

3275 
OP_IPUT_BYTE
:

3276 
OP_IPUT_CHAR
:

3277 
OP_IPUT_SHORT
:

3278 
OP_IPUT_WIDE
:

3279 
OP_IPUT_OBJECT
:

3280 
OP_SGET
:

3281 
OP_SGET_BOOLEAN
:

3282 
OP_SGET_BYTE
:

3283 
OP_SGET_CHAR
:

3284 
OP_SGET_SHORT
:

3285 
OP_SGET_WIDE
:

3286 
OP_SGET_OBJECT
:

3287 
OP_SPUT
:

3288 
OP_SPUT_BOOLEAN
:

3289 
OP_SPUT_BYTE
:

3290 
OP_SPUT_CHAR
:

3291 
OP_SPUT_SHORT
:

3292 
OP_SPUT_WIDE
:

3293 
OP_SPUT_OBJECT
:

3294 
»fTy³
 = 
VERIFY_ERROR_REF_FIELD
;

3297 
OP_INVOKE_VIRTUAL
:

3298 
OP_INVOKE_VIRTUAL_RANGE
:

3299 
OP_INVOKE_SUPER
:

3300 
OP_INVOKE_SUPER_RANGE
:

3301 
OP_INVOKE_DIRECT
:

3302 
OP_INVOKE_DIRECT_RANGE
:

3303 
OP_INVOKE_STATIC
:

3304 
OP_INVOKE_STATIC_RANGE
:

3305 
OP_INVOKE_INTERFACE
:

3306 
OP_INVOKE_INTERFACE_RANGE
:

3307 
»fTy³
 = 
VERIFY_ERROR_REF_METHOD
;

3312 
	`LOG_VFY
("GLITCH: v”if›¸askedØ»¶aû opcod0x%02x", 
İcode
);

3313  
çl£
;

3316 
	`as£¹
((
	`dexG‘FÏgsFromOpcode
(
İcode
è& 
kIn¡rCªThrow
) != 0);

3319 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
š¢Idx
);

3320 
width
) {

3326 
	`dvmUpd©eCodeUn™
(
m‘h
, 
ŞdIn¢s
+2, 
OP_NOP
);

3330 
	`ALOGE
("ERROR: stomped‡ %d-unit instruction with‡ verifierƒrror",

3331 
width
);

3332 
	`dvmAbÜt
();

3336 
	`as£¹
(
width
 == 2 || width == 3);

3337 
u2
 
ÃwV®
 = 
OP_THROW_VERIFICATION_ERROR
 |

3338 (
çu»
 << 8è| (
»fTy³
 << (8 + 
kV”ifyE¼ÜRefTy³Shiá
));

3339 
	`dvmUpd©eCodeUn™
(
m‘h
, 
ŞdIn¢s
, 
ÃwV®
);

3341  
Œue
;

3342 
	}
}

3347 
	$hªdËMÚ™ÜEÁ”
(
Regi¡”Lše
* 
wÜkLše
, 
u4
 
»gIdx
, u4 
š¢Idx
,

3348 
V”ifyE¼Ü
* 
pFau»
)

3350 ià(!
	`»gTy³IsReã»nû
(
	`g‘Regi¡”Ty³
(
wÜkLše
, 
»gIdx
))) {

3351 
	`LOG_VFY
("VFY: monitor-enter on‚on-object");

3352 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

3356 ià(
wÜkLše
->
mÚ™ÜEÁr›s
 =ğ
NULL
) {

3358 
	`as£¹
(!
gDvm
.
mÚ™ÜV”ifiÿtiÚ
);

3362 ià(
wÜkLše
->
mÚ™ÜSckTİ
 =ğ
kMaxMÚ™ÜSckD•th
) {

3363 
	`LOG_VFY
("VFY: monitor-enter stack overflow (%d)",

3364 
kMaxMÚ™ÜSckD•th
);

3365 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

3373 
wÜkLše
->
mÚ™ÜEÁr›s
[
»gIdx
] |ğ1 << wÜkLše->
mÚ™ÜSckTİ
;

3374 
wÜkLše
->
mÚ™ÜSck
[wÜkLše->
mÚ™ÜSckTİ
++] = 
š¢Idx
;

3375 
	}
}

3380 
	$hªdËMÚ™ÜEx™
(
Regi¡”Lše
* 
wÜkLše
, 
u4
 
»gIdx
, u4 
š¢Idx
,

3381 
V”ifyE¼Ü
* 
pFau»
)

3383 ià(!
	`»gTy³IsReã»nû
(
	`g‘Regi¡”Ty³
(
wÜkLše
, 
»gIdx
))) {

3384 
	`LOG_VFY
("VFY: monitor-exit on‚on-object");

3385 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

3389 ià(
wÜkLše
->
mÚ™ÜEÁr›s
 =ğ
NULL
) {

3391 
	`as£¹
(!
gDvm
.
mÚ™ÜV”ifiÿtiÚ
);

3395 ià(
wÜkLše
->
mÚ™ÜSckTİ
 == 0) {

3396 
	`LOG_VFY
("VFY: monitor-exit stack underflow");

3397 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

3405 
wÜkLše
->
mÚ™ÜSckTİ
--;

3406 #ifdeà
BUG_3215458_FIXED


3412 ià((
wÜkLše
->
mÚ™ÜEÁr›s
[
»gIdx
] & (1 << wÜkLše->
mÚ™ÜSckTİ
))

3415 
	`LOG_VFY
("VFY: monitor-exit bit %d‚ot set:‡ddr=0x%04x (bits[%d]=%#x)",

3416 
wÜkLše
->
mÚ™ÜSckTİ
, 
š¢Idx
, 
»gIdx
,

3417 
wÜkLše
->
mÚ™ÜEÁr›s
[
»gIdx
]);

3418 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

3422 
wÜkLše
->
mÚ™ÜSck
[wÜkLše->
mÚ™ÜSckTİ
] = 0;

3427 
wÜkLše
->
mÚ™ÜEÁr›s
[
»gIdx
] &ğ~(1 << wÜkLše->
mÚ™ÜSckTİ
);

3428 
	}
}

3440 
	$v”ifyP»p
()

3442 #iâdeà
NDEBUG


3444 
	`checkM”geTab
();

3446 
	}
}

3451 
boŞ
 
	$dvmV”ifyCodeFlow
(
V”if›rD©a
* 
vd©a
)

3453 
boŞ
 
»suÉ
 = 
çl£
;

3454 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

3455 cÚ¡ 
š¢sSize
 = 
vd©a
->insnsSize;

3456 cÚ¡ 
boŞ
 
g’”©eRegi¡”M­
 = 
gDvm
.
g’”©eRegi¡”M­s
;

3457 
Regi¡”TabË
 
»gTabË
;

3459 
	`mem£t
(&
»gTabË
, 0, (regTable));

3461 #ifdeà
VERIFIER_STATS


3462 
gDvm
.
v”if›rSts
.
m‘hodsExamšed
++;

3463 ià(
vd©a
->
mÚ™ÜEÁ”CouÁ
)

3464 
gDvm
.
v”if›rSts
.
mÚEÁ”M‘hods
++;

3468 
	`v”ifyP»p
();

3470 ià(
m‘h
->
»gi¡”sSize
 * 
š¢sSize
 > 4*1024*1024) {

3471 
	`LOG_VFY_METH
(
m‘h
,

3473 
m‘h
->
»gi¡”sSize
, 
š¢sSize
);

3482 ià(!
	`š™Regi¡”TabË
(
vd©a
, &
»gTabË
,

3483 
g’”©eRegi¡”M­
 ? 
kT¿ckRegsGcPošts
 : 
kT¿ckRegsB¿nches
))

3484 
ba
;

3486 
vd©a
->
»gi¡”Lšes
 = 
»gTabË
.registerLines;

3499 ià(
g’”©eRegi¡”M­
 &&

3500 
gDvm
.
»gi¡”M­Mode
 =ğ
kRegi¡”M­ModeLiveP»ci£
)

3505 ià(!
	`dvmCompu‹VfyBasicBlocks
(
vd©a
))

3506 
ba
;

3511 ià(!
	`dvmCompu‹Liv’ess
(
vd©a
))

3512 
ba
;

3519 ià(!
	`£tTy³sFromSigÇtu»
(
m‘h
, 
»gTabË
.
»gi¡”Lšes
[0].
»gTy³s
,

3520 
vd©a
->
unš™M­
))

3521 
ba
;

3526 ià(!
	`doCodeV”ifiÿtiÚ
(
vd©a
, &
»gTabË
))

3527 
ba
;

3532 ià(
g’”©eRegi¡”M­
) {

3533 
Regi¡”M­
* 
pM­
 = 
	`dvmG’”©eRegi¡”M­V
(
vd©a
);

3534 ià(
pM­
 !ğ
NULL
) {

3540 
	`dvmS‘Regi¡”M­
((
M‘hod
*)
m‘h
, 
pM­
);

3547 
»suÉ
 = 
Œue
;

3549 
ba
:

3550 
	`ä“Regi¡”LšeIÂ¬ds
(
vd©a
);

3551 
	`ä“
(
»gTabË
.
»gi¡”Lšes
);

3552 
	`ä“
(
»gTabË
.
lšeAÎoc
);

3553  
»suÉ
;

3554 
	}
}

3606 
boŞ
 
	$doCodeV”ifiÿtiÚ
(
V”if›rD©a
* 
vd©a
, 
Regi¡”TabË
* 
»gTabË
)

3608 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

3609 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

3610 
Unš™In¡ªûM­
* 
unš™M­
 = 
vd©a
->uninitMap;

3611 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

3612 
boŞ
 
»suÉ
 = 
çl£
;

3613 
boŞ
 
debugV”bo£
 = 
çl£
;

3614 
š¢Idx
, 
¡¬tGuess
;

3619 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 0, 
Œue
);

3621 ià(
	`dvmWªtV”bo£V”ifiÿtiÚ
(
m‘h
)) {

3622 
	`IF_ALOGI
() {

3623 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3624 
	`ALOGI
("Now verifying: %s.%s %s (ins=%d„egs=%d)",

3625 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
,

3626 
m‘h
->
šsSize
, m‘h->
»gi¡”sSize
);

3627 
	`ALOGI
(" ------ [0 4 8 12 16 20 24 28 32 36");

3628 
	`ä“
(
desc
);

3630 
debugV”bo£
 = 
Œue
;

3631 
gDebugV”bo£
 = 
Œue
;

3633 
gDebugV”bo£
 = 
çl£
;

3636 
¡¬tGuess
 = 0;

3641 
Œue
) {

3646 
š¢Idx
 = 
¡¬tGuess
; in¢Idx < 
š¢sSize
; insnIdx++) {

3647 ià(
	`dvmIn¢IsChªged
(
š¢FÏgs
, 
š¢Idx
))

3651 ià(
š¢Idx
 =ğ
š¢sSize
) {

3652 ià(
¡¬tGuess
 != 0) {

3654 
¡¬tGuess
 = 0;

3673 ià(
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
š¢Idx
)) {

3674 
Regi¡”Lše
* 
wÜkLše
 = &
»gTabË
->workLine;

3676 
	`cİyLšeFromTabË
(
wÜkLše
, 
»gTabË
, 
š¢Idx
);

3678 #iâdeà
NDEBUG


3683 
Regi¡”Lše
* 
»gi¡”Lše
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

3684 ià(
»gi¡”Lše
->
»gTy³s
 !ğ
NULL
 &&

3685 
	`com·»LšeToTabË
(
»gTabË
, 
š¢Idx
, &»gTabË->
wÜkLše
) != 0)

3687 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3688 
	`LOG_VFY
("HUH? workLine diverged in %s.%s %s",

3689 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3690 
	`ä“
(
desc
);

3691 
	`dumpRegTy³s
(
vd©a
, 
»gi¡”Lše
, 0, "work",

3692 
unš™M­
, 
DRT_SHOW_REF_TYPES
 | 
DRT_SHOW_LOCALS
);

3693 
	`dumpRegTy³s
(
vd©a
, 
»gi¡”Lše
, 0, "insn",

3694 
unš™M­
, 
DRT_SHOW_REF_TYPES
 | 
DRT_SHOW_LOCALS
);

3698 ià(
debugV”bo£
) {

3699 
	`dumpRegTy³s
(
vd©a
, &
»gTabË
->
wÜkLše
, 
š¢Idx
,

3700 
NULL
, 
unš™M­
, 
SHOW_REG_DETAILS
);

3705 ià(!
	`v”ifyIn¡ruùiÚ
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
š¢Idx
,

3706 
unš™M­
, &
¡¬tGuess
))

3709 
ba
;

3715 
	`dvmIn¢S‘Vis™ed
(
š¢FÏgs
, 
š¢Idx
, 
Œue
);

3716 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
, 
çl£
);

3719 ià(
DEAD_CODE_SCAN
 && !
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

3728 
d—dS¹
 = -1;

3729 
š¢Idx
 = 0; in¢Idx < 
š¢sSize
;

3730 
š¢Idx
 +ğ
	`dvmIn¢G‘Width
(
š¢FÏgs
, insnIdx))

3736 
š¡r
 = 
m‘h
->
š¢s
[
š¢Idx
];

3737 ià(
š¡r
 =ğ
kPackedSw™chSigÇtu»
 ||

3738 
š¡r
 =ğ
kS·r£Sw™chSigÇtu»
 ||

3739 
š¡r
 =ğ
kA¼ayD©aSigÇtu»
 ||

3740 (
š¡r
 =ğ
OP_NOP
 &&

3741 (
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kPackedSw™chSigÇtu»
 ||

3742 
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kS·r£Sw™chSigÇtu»
 ||

3743 
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kA¼ayD©aSigÇtu»
)))

3745 
	`dvmIn¢S‘Vis™ed
(
š¢FÏgs
, 
š¢Idx
, 
Œue
);

3748 ià(!
	`dvmIn¢IsVis™ed
(
š¢FÏgs
, 
š¢Idx
)) {

3749 ià(
d—dS¹
 < 0)

3750 
d—dS¹
 = 
š¢Idx
;

3751 } ià(
d—dS¹
 >= 0) {

3752 
	`IF_ALOGD
() {

3753 * 
desc
 =

3754 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3755 
	`ALOGD
("VFY: dead code 0x%04x-%04x in %s.%s %s",

3756 
d—dS¹
, 
š¢Idx
-1,

3757 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3758 
	`ä“
(
desc
);

3761 
d—dS¹
 = -1;

3764 ià(
d—dS¹
 >= 0) {

3765 
	`IF_ALOGD
() {

3766 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3767 
	`ALOGD
("VFY: dead code 0x%04x-%04x in %s.%s %s",

3768 
d—dS¹
, 
š¢Idx
-1,

3769 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3770 
	`ä“
(
desc
);

3775 
»suÉ
 = 
Œue
;

3777 
ba
:

3778  
»suÉ
;

3779 
	}
}

3796 
boŞ
 
	$v”ifyIn¡ruùiÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

3797 
Regi¡”TabË
* 
»gTabË
, 
š¢Idx
, 
Unš™In¡ªûM­
* 
unš™M­
,

3798 * 
pS¹Guess
)

3800 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

3801 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

3802 
boŞ
 
»suÉ
 = 
çl£
;

3804 #ifdeà
VERIFIER_STATS


3805 ià(
	`dvmIn¢IsVis™ed
(
š¢FÏgs
, 
š¢Idx
)) {

3806 
gDvm
.
v”if›rSts
.
š¡rsR“xamšed
++;

3808 
gDvm
.
v”if›rSts
.
š¡rsExamšed
++;

3831 
Regi¡”Lše
* 
wÜkLše
 = &
»gTabË
->workLine;

3832 cÚ¡ 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

3833 
CÏssObjeù
* 
»sCÏss
;

3834 
s4
 
b¿nchT¬g‘
 = 0;

3835 cÚ¡ 
š¢RegCouÁ
 = 
m‘h
->
»gi¡”sSize
;

3836 
RegTy³
 
tmpTy³
;

3837 
DecodedIn¡ruùiÚ
 
decIn¢
;

3838 
boŞ
 
ju¡S‘ResuÉ
 = 
çl£
;

3839 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

3841 #iâdeà
NDEBUG


3842 
	`mem£t
(&
decIn¢
, 0x81, (decInsn));

3844 
	`dexDecodeIn¡ruùiÚ
(
š¢s
, &
decIn¢
);

3846 
ÃxtFÏgs
 = 
	`dexG‘FÏgsFromOpcode
(
decIn¢
.
İcode
);

3855 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

3857 
	`cİyRegi¡”Lše
(&
»gTabË
->
§vedLše
, 
wÜkLše
,

3858 
»gTabË
->
š¢RegCouÁPlus
);

3860 #iâdeà
NDEBUG


3861 
	`mem£t
(
»gTabË
->
§vedLše
.
»gTy³s
, 0xdd,

3862 
»gTabË
->
š¢RegCouÁPlus
 * (
RegTy³
));

3866 
decIn¢
.
İcode
) {

3867 
OP_NOP
:

3873 ià(
decIn¢
.
vA
 != 0) {

3874 
	`LOG_VFY
("VFY:ƒncountered dataable in instruction stream");

3875 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3879 
OP_MOVE
:

3880 
OP_MOVE_FROM16
:

3881 
OP_MOVE_16
:

3882 
	`cİyRegi¡”1
(
wÜkLše
, 
decIn¢
.
vA
, decIn¢.
vB
, 
kTy³C©egÜy1Ä
,

3883 &
çu»
);

3885 
OP_MOVE_WIDE
:

3886 
OP_MOVE_WIDE_FROM16
:

3887 
OP_MOVE_WIDE_16
:

3888 
	`cİyRegi¡”2
(
wÜkLše
, 
decIn¢
.
vA
, decIn¢.
vB
, &
çu»
);

3890 
OP_MOVE_OBJECT
:

3891 
OP_MOVE_OBJECT_FROM16
:

3892 
OP_MOVE_OBJECT_16
:

3893 
	`cİyRegi¡”1
(
wÜkLše
, 
decIn¢
.
vA
, decIn¢.
vB
, 
kTy³C©egÜyRef
,

3894 &
çu»
);

3908 
OP_MOVE_RESULT
:

3909 
	`cİyResuÉRegi¡”1
(
wÜkLše
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3910 
kTy³C©egÜy1Ä
, &
çu»
);

3912 
OP_MOVE_RESULT_WIDE
:

3913 
	`cİyResuÉRegi¡”2
(
wÜkLše
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

3915 
OP_MOVE_RESULT_OBJECT
:

3916 
	`cİyResuÉRegi¡”1
(
wÜkLše
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3917 
kTy³C©egÜyRef
, &
çu»
);

3920 
OP_MOVE_EXCEPTION
:

3930 
»sCÏss
 = 
	`g‘CaughtExû±iÚTy³
(
m‘h
, 
š¢Idx
, &
çu»
);

3931 ià(
»sCÏss
 =ğ
NULL
) {

3932 
	`as£¹
(!
	`VERIFY_OK
(
çu»
));

3934 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
	`»gTy³FromCÏss
(
»sCÏss
));

3938 
OP_RETURN_VOID
:

3939 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
)) {

3940 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3941 } ià(
	`g‘M‘hodR‘uºTy³
(
m‘h
è!ğ
kRegTy³Unknown
) {

3942 
	`LOG_VFY
("VFY:„eturn-void‚otƒxpected");

3943 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3946 
OP_RETURN
:

3947 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
)) {

3948 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3951 
RegTy³
 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

3952 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

3953 ià(!
	`VERIFY_OK
(
çu»
))

3954 
	`LOG_VFY
("VFY:„eturn-1nr‚otƒxpected");

3961 
RegTy³
 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

3962 ià((
»tuºTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
) ||

3963 ((
»tuºTy³
 =ğ
kRegTy³BoŞ—n
 ||„‘uºTy³ =ğ
kRegTy³By‹
 ||

3964 
»tuºTy³
 =ğ
kRegTy³ShÜt
 ||„‘uºTy³ =ğ
kRegTy³Ch¬
) &&

3965 
¤cTy³
 =ğ
kRegTy³IÁeg”
))

3966 
»tuºTy³
 = 
¤cTy³
;

3969 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
»tuºTy³
, &
çu»
);

3970 ià(!
	`VERIFY_OK
(
çu»
)) {

3971 
	`LOG_VFY
("VFY:„eturn-1nr on invalid„egister v%d",

3972 
decIn¢
.
vA
);

3976 
OP_RETURN_WIDE
:

3977 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
)) {

3978 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3980 
RegTy³
 
»tuºTy³
;

3983 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

3984 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy2
, &
çu»
);

3985 ià(!
	`VERIFY_OK
(
çu»
))

3986 
	`LOG_VFY
("VFY:„eturn-wide‚otƒxpected");

3989 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
»tuºTy³
, &
çu»
);

3990 ià(!
	`VERIFY_OK
(
çu»
)) {

3991 
	`LOG_VFY
("VFY:„eturn-wide on invalid„egister…air v%d",

3992 
decIn¢
.
vA
);

3996 
OP_RETURN_OBJECT
:

3997 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
)) {

3998 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4000 
RegTy³
 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

4001 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜyRef
, &
çu»
);

4002 ià(!
	`VERIFY_OK
(
çu»
)) {

4003 
	`LOG_VFY
("VFY:„eturn-object‚otƒxpected");

4008 
	`as£¹
(
»tuºTy³
 !ğ
kRegTy³Z”o
);

4009 
	`as£¹
(!
	`»gTy³IsUnš™Reã»nû
(
»tuºTy³
));

4021 
CÏssObjeù
* 
deşCÏss
;

4023 
deşCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
»tuºTy³
);

4024 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vA
, &
çu»
);

4025 ià(!
	`VERIFY_OK
(
çu»
))

4027 ià(
»sCÏss
 !ğ
NULL
) {

4028 ià(!
	`dvmIsIÁ”çûCÏss
(
deşCÏss
) &&

4029 !
	`dvmIn¡ªûof
(
»sCÏss
, 
deşCÏss
))

4031 
	`LOG_VFY
("VFY:„eturning %s (cl=%p), declared %s (cl=%p)",

4032 
»sCÏss
->
desütÜ
,„esCÏss->
şassLßd”
,

4033 
deşCÏss
->
desütÜ
, deşCÏss->
şassLßd”
);

4034 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4041 
OP_CONST_4
:

4042 
OP_CONST_16
:

4043 
OP_CONST
:

4045 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
,

4046 
	`d‘”mšeC©1CÚ¡
((
s4
)
decIn¢
.
vB
));

4048 
OP_CONST_HIGH16
:

4050 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
,

4051 
	`d‘”mšeC©1CÚ¡
((
s4
è
decIn¢
.
vB
 << 16));

4053 
OP_CONST_WIDE_16
:

4054 
OP_CONST_WIDE_32
:

4055 
OP_CONST_WIDE
:

4056 
OP_CONST_WIDE_HIGH16
:

4058 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³CÚ¡Lo
);

4060 
OP_CONST_STRING
:

4061 
OP_CONST_STRING_JUMBO
:

4062 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

4063 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
,

4064 
	`»gTy³FromCÏss
(
gDvm
.
şassJavaLªgSŒšg
));

4066 
OP_CONST_CLASS
:

4067 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

4069 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

4070 ià(
»sCÏss
 =ğ
NULL
) {

4071 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

4072 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4073 
	`LOG_VFY
("VFY: unableo„esolve const-class %d (%s) in %s",

4074 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4075 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4077 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
,

4078 
	`»gTy³FromCÏss
(
gDvm
.
şassJavaLªgCÏss
));

4082 
OP_MONITOR_ENTER
:

4083 
	`hªdËMÚ™ÜEÁ”
(
wÜkLše
, 
decIn¢
.
vA
, 
š¢Idx
, &
çu»
);

4085 
OP_MONITOR_EXIT
:

4106 ià(
wÜkLše
->
mÚ™ÜEÁr›s
 !ğ
NULL
)

4107 
ÃxtFÏgs
 &ğ~
kIn¡rCªThrow
;

4108 
	`hªdËMÚ™ÜEx™
(
wÜkLše
, 
decIn¢
.
vA
, 
š¢Idx
, &
çu»
);

4111 
OP_CHECK_CAST
:

4120 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

4121 ià(
»sCÏss
 =ğ
NULL
) {

4122 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

4123 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4124 
	`LOG_VFY
("VFY: unableo„esolve check-cast %d (%s) in %s",

4125 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4126 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4128 
RegTy³
 
ÜigTy³
;

4130 
ÜigTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4131 ià(!
	`»gTy³IsReã»nû
(
ÜigTy³
)) {

4132 
	`LOG_VFY
("VFY: check-ÿ¡ oÀnÚ-»ã»nû iÀv%u",
decIn¢
.
vA
);

4133 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4136 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
	`»gTy³FromCÏss
(
»sCÏss
));

4139 
OP_INSTANCE_OF
:

4141 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4142 ià(!
	`»gTy³IsReã»nû
(
tmpTy³
)) {

4143 
	`LOG_VFY
("VFY: vB‚Ù‡„eã»nû (%d)", 
tmpTy³
);

4144 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4149 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vC
, &
çu»
);

4150 ià(
»sCÏss
 =ğ
NULL
) {

4151 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vC
);

4152 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4153 
	`LOG_VFY
("VFY: unableo„esolve instanceof %d (%s) in %s",

4154 
decIn¢
.
vC
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4155 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4158 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

4162 
OP_ARRAY_LENGTH
:

4163 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4164 ià(!
	`VERIFY_OK
(
çu»
))

4166 ià(
»sCÏss
 !ğ
NULL
 && !
	`dvmIsA¼ayCÏss
(resClass)) {

4167 
	`LOG_VFY
("VFY:‡rray-length on‚on-array");

4168 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4171 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

4174 
OP_NEW_INSTANCE
:

4175 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

4176 ià(
»sCÏss
 =ğ
NULL
) {

4177 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

4178 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4179 
	`LOG_VFY
("VFY: unableo„esolve‚ew-instance %d (%s) in %s",

4180 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4181 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4183 
RegTy³
 
unš™Ty³
;

4186 ià(
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
è|| 
	`dvmIsIÁ”çûCÏss
(resClass)) {

4187 
	`LOG_VFY
("VFY:‚ew-instance on interface or‡bstract class %s",

4188 
»sCÏss
->
desütÜ
);

4189 
çu»
 = 
VERIFY_ERROR_INSTANTIATION
;

4194 
uidx
 = 
	`£tUnš™In¡ªû
(
unš™M­
, 
š¢Idx
, 
»sCÏss
);

4195 
	`as£¹
(
uidx
 >= 0);

4196 
unš™Ty³
 = 
	`»gTy³FromUnš™Index
(
uidx
);

4202 
	`m¬kUnš™RefsAsInv®id
(
wÜkLše
, 
š¢RegCouÁ
, 
unš™M­
,

4203 
unš™Ty³
);

4206 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
unš™Ty³
);

4209 
OP_NEW_ARRAY
:

4210 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vC
, &
çu»
);

4211 ià(
»sCÏss
 =ğ
NULL
) {

4212 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vC
);

4213 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4214 
	`LOG_VFY
("VFY: unableo„esolve‚ew-array %d (%s) in %s",

4215 
decIn¢
.
vC
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4216 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4217 } ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

4218 
	`LOG_VFY
("VFY:‚ew-array on‚on-array class");

4219 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4222 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
, 
kRegTy³IÁeg”
, &
çu»
);

4224 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
	`»gTy³FromCÏss
(
»sCÏss
));

4227 
OP_FILLED_NEW_ARRAY
:

4228 
OP_FILLED_NEW_ARRAY_RANGE
:

4229 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

4230 ià(
»sCÏss
 =ğ
NULL
) {

4231 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

4232 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

4233 
	`LOG_VFY
("VFY: unableo„esolve filled-array %d (%s) in %s",

4234 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

4235 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

4236 } ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

4237 
	`LOG_VFY
("VFY: filled-new-array on‚on-array class");

4238 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4240 
boŞ
 
isRªge
 = (
decIn¢
.
İcode
 =ğ
OP_FILLED_NEW_ARRAY_RANGE
);

4243 
	`v”ifyFËdNewA¼ayRegs
(
m‘h
, 
wÜkLše
, &
decIn¢
,

4244 
»sCÏss
, 
isRªge
, &
çu»
);

4246 
	`£tResuÉRegi¡”Ty³
(
wÜkLše
, 
š¢RegCouÁ
,

4247 
	`»gTy³FromCÏss
(
»sCÏss
));

4248 
ju¡S‘ResuÉ
 = 
Œue
;

4252 
OP_CMPL_FLOAT
:

4253 
OP_CMPG_FLOAT
:

4254 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
, 
kRegTy³Flßt
, &
çu»
);

4255 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
, 
kRegTy³Flßt
, &
çu»
);

4256 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

4258 
OP_CMPL_DOUBLE
:

4259 
OP_CMPG_DOUBLE
:

4260 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
, 
kRegTy³DoubËLo
, &
çu»
);

4261 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
, 
kRegTy³DoubËLo
, &
çu»
);

4262 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

4264 
OP_CMP_LONG
:

4265 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
, 
kRegTy³LÚgLo
, &
çu»
);

4266 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
, 
kRegTy³LÚgLo
, &
çu»
);

4267 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

4270 
OP_THROW
:

4271 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vA
, &
çu»
);

4272 ià(
	`VERIFY_OK
(
çu»
è&& 
»sCÏss
 !ğ
NULL
) {

4273 ià(!
	`dvmIn¡ªûof
(
»sCÏss
, 
gDvm
.
exThrowabË
)) {

4274 
	`LOG_VFY
("VFY:hrown class %s‚ot instanceof Throwable",

4275 
»sCÏss
->
desütÜ
);

4276 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4281 
OP_GOTO
:

4282 
OP_GOTO_16
:

4283 
OP_GOTO_32
:

4287 
OP_PACKED_SWITCH
:

4288 
OP_SPARSE_SWITCH
:

4290 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
, &
çu»
);

4293 
OP_FILL_ARRAY_DATA
:

4295 
RegTy³
 
v®ueTy³
;

4296 cÚ¡ 
u2
 *
¬¿yD©a
;

4297 
u2
 
–emWidth
;

4300 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vA
, &
çu»
);

4301 ià(!
	`VERIFY_OK
(
çu»
))

4305 ià(
»sCÏss
 =ğ
NULL
)

4308 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4309 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
 ||

4310 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_VOID
)

4312 
	`LOG_VFY
("VFY: invalid fill-array-data on %s",

4313 
»sCÏss
->
desütÜ
);

4314 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4318 
v®ueTy³
 = 
	`´im™iveTy³ToRegTy³
(

4319 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

4320 
	`as£¹
(
v®ueTy³
 !ğ
kRegTy³Unknown
);

4326 
¬¿yD©a
 = 
š¢s
 + (š¢s[1] | (((
s4
)insns[2]) << 16));

4327 ià(
¬¿yD©a
[0] !ğ
kA¼ayD©aSigÇtu»
) {

4328 
	`LOG_VFY
("VFY: invalid magic for‡rray-data");

4329 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4333 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

4334 
PRIM_BOOLEAN
:

4335 
PRIM_BYTE
:

4336 
–emWidth
 = 1;

4338 
PRIM_CHAR
:

4339 
PRIM_SHORT
:

4340 
–emWidth
 = 2;

4342 
PRIM_FLOAT
:

4343 
PRIM_INT
:

4344 
–emWidth
 = 4;

4346 
PRIM_DOUBLE
:

4347 
PRIM_LONG
:

4348 
–emWidth
 = 8;

4351 
–emWidth
 = 0;

4360 ià(
¬¿yD©a
[1] !ğ
–emWidth
) {

4361 
	`LOG_VFY
("VFY:‡rray-data size mismatch (%d vs %d)",

4362 
¬¿yD©a
[1], 
–emWidth
);

4363 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4368 
OP_IF_EQ
:

4369 
OP_IF_NE
:

4371 
RegTy³
 
ty³1
, 
ty³2
;

4373 
ty³1
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4374 
ty³2
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4377 ià(
	`»gTy³IsReã»nû
(
ty³1
è&&„egTy³IsReã»nû(
ty³2
))

4381 
	`checkTy³C©egÜy
(
ty³1
, 
kTy³C©egÜy1Ä
, &
çu»
);

4382 
	`checkTy³C©egÜy
(
ty³2
, 
kTy³C©egÜy1Ä
, &
çu»
);

4383 ià(
ty³1
 =ğ
kRegTy³Flßt
 || 
ty³2
 == kRegTypeFloat) {

4384 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4386 ià(!
	`VERIFY_OK
(
çu»
)) {

4387 
	`LOG_VFY
("VFY:‡rgso if-eq/if-ne must both be„efs or cat1");

4392 
OP_IF_LT
:

4393 
OP_IF_GE
:

4394 
OP_IF_GT
:

4395 
OP_IF_LE
:

4396 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4397 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4398 ià(
tmpTy³
 =ğ
kRegTy³Flßt
) {

4399 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4401 ià(!
	`VERIFY_OK
(
çu»
)) {

4402 
	`LOG_VFY
("VFY:‡rgso 'if' must be cat-1nr‡nd‚ot float");

4405 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4406 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4407 ià(
tmpTy³
 =ğ
kRegTy³Flßt
) {

4408 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4410 ià(!
	`VERIFY_OK
(
çu»
)) {

4411 
	`LOG_VFY
("VFY:‡rgso 'if' must be cat-1nr‡nd‚ot float");

4415 
OP_IF_EQZ
:

4416 
OP_IF_NEZ
:

4417 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4418 ià(
	`»gTy³IsReã»nû
(
tmpTy³
))

4420 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4421 ià(
tmpTy³
 =ğ
kRegTy³Flßt
) {

4422 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4424 ià(!
	`VERIFY_OK
(
çu»
))

4425 
	`LOG_VFY
("VFY:ƒxpected‚on-float cat-1‡rgo if");

4427 
OP_IF_LTZ
:

4428 
OP_IF_GEZ
:

4429 
OP_IF_GTZ
:

4430 
OP_IF_LEZ
:

4431 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4432 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4433 ià(
tmpTy³
 =ğ
kRegTy³Flßt
) {

4434 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4436 ià(!
	`VERIFY_OK
(
çu»
))

4437 
	`LOG_VFY
("VFY:ƒxpected‚on-float cat-1‡rgo if");

4440 
OP_AGET
:

4441 
tmpTy³
 = 
kRegTy³IÁeg”
;

4442 
ag‘_1Ä_commÚ
;

4443 
OP_AGET_BOOLEAN
:

4444 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4445 
ag‘_1Ä_commÚ
;

4446 
OP_AGET_BYTE
:

4447 
tmpTy³
 = 
kRegTy³By‹
;

4448 
ag‘_1Ä_commÚ
;

4449 
OP_AGET_CHAR
:

4450 
tmpTy³
 = 
kRegTy³Ch¬
;

4451 
ag‘_1Ä_commÚ
;

4452 
OP_AGET_SHORT
:

4453 
tmpTy³
 = 
kRegTy³ShÜt
;

4454 
ag‘_1Ä_commÚ
;

4455 
ag‘_1Ä_commÚ
:

4457 
RegTy³
 
¤cTy³
, 
šdexTy³
;

4459 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4460 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4461 ià(!
	`VERIFY_OK
(
çu»
))

4464 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4465 ià(!
	`VERIFY_OK
(
çu»
))

4467 ià(
»sCÏss
 !ğ
NULL
) {

4469 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4470 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4472 
	`LOG_VFY
("VFY: invalid‡get-1nrarget %s",

4473 
»sCÏss
->
desütÜ
);

4474 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4479 
¤cTy³
 = 
	`´im™iveTy³ToRegTy³
(

4480 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

4483 ià(
¤cTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4484 
tmpTy³
 = 
kRegTy³Flßt
;

4486 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
¤cTy³
)) {

4487 
	`LOG_VFY
("VFY: invalid‡get-1nr,‡rrayype=%d with"

4489 
¤cTy³
, 
tmpTy³
, 
»sCÏss
->
desütÜ
);

4490 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4498 
tmpTy³
 = 
kRegTy³Z”o
;

4500 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
tmpTy³
);

4504 
OP_AGET_WIDE
:

4506 
RegTy³
 
d¡Ty³
, 
šdexTy³
;

4508 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4509 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4510 ià(!
	`VERIFY_OK
(
çu»
))

4513 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4514 ià(!
	`VERIFY_OK
(
çu»
))

4516 ià(
»sCÏss
 !ğ
NULL
) {

4518 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4519 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4521 
	`LOG_VFY
("VFY: invalid‡get-widearget %s",

4522 
»sCÏss
->
desütÜ
);

4523 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4528 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

4529 
PRIM_LONG
:

4530 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4532 
PRIM_DOUBLE
:

4533 
d¡Ty³
 = 
kRegTy³DoubËLo
;

4536 
	`LOG_VFY
("VFY: invalid‡get-wide on %s",

4537 
»sCÏss
->
desütÜ
);

4538 
d¡Ty³
 = 
kRegTy³Unknown
;

4539 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4547 
d¡Ty³
 = 
kRegTy³CÚ¡Lo
;

4549 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
d¡Ty³
);

4553 
OP_AGET_OBJECT
:

4555 
RegTy³
 
d¡Ty³
, 
šdexTy³
;

4557 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4558 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4559 ià(!
	`VERIFY_OK
(
çu»
))

4563 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4564 ià(!
	`VERIFY_OK
(
çu»
))

4566 ià(
»sCÏss
 !ğ
NULL
) {

4567 
CÏssObjeù
* 
–em’tCÏss
;

4569 
	`as£¹
(
»sCÏss
 !ğ
NULL
);

4570 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

4571 
	`LOG_VFY
("VFY:‡get-object on‚on-array class");

4572 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4575 
	`as£¹
(
»sCÏss
->
–em’tCÏss
 !ğ
NULL
);

4582 ià(
»sCÏss
->
desütÜ
[1] == '[') {

4583 
	`as£¹
(
»sCÏss
->
¬¿yDim
 > 1);

4584 
–em’tCÏss
 = 
	`dvmFšdA¼ayCÏss
(&
»sCÏss
->
desütÜ
[1],

4585 
»sCÏss
->
şassLßd”
);

4586 } ià(
»sCÏss
->
desütÜ
[1] == 'L') {

4587 
	`as£¹
(
»sCÏss
->
¬¿yDim
 == 1);

4588 
–em’tCÏss
 = 
»sCÏss
->elementClass;

4590 
	`LOG_VFY
("VFY:‡get-object on‚on-ref‡rray class (%s)",

4591 
»sCÏss
->
desütÜ
);

4592 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4596 
d¡Ty³
 = 
	`»gTy³FromCÏss
(
–em’tCÏss
);

4605 
d¡Ty³
 = 
kRegTy³Z”o
;

4607 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
d¡Ty³
);

4610 
OP_APUT
:

4611 
tmpTy³
 = 
kRegTy³IÁeg”
;

4612 
­ut_1Ä_commÚ
;

4613 
OP_APUT_BOOLEAN
:

4614 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4615 
­ut_1Ä_commÚ
;

4616 
OP_APUT_BYTE
:

4617 
tmpTy³
 = 
kRegTy³By‹
;

4618 
­ut_1Ä_commÚ
;

4619 
OP_APUT_CHAR
:

4620 
tmpTy³
 = 
kRegTy³Ch¬
;

4621 
­ut_1Ä_commÚ
;

4622 
OP_APUT_SHORT
:

4623 
tmpTy³
 = 
kRegTy³ShÜt
;

4624 
­ut_1Ä_commÚ
;

4625 
­ut_1Ä_commÚ
:

4627 
RegTy³
 
¤cTy³
, 
d¡Ty³
, 
šdexTy³
;

4629 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4630 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4631 ià(!
	`VERIFY_OK
(
çu»
))

4634 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4637 ià(
¤cTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4638 
tmpTy³
 = 
kRegTy³Flßt
;

4641 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

4642 
	`LOG_VFY
("VFY: invalid„egype %d on‡put instr (need %d)",

4643 
¤cTy³
, 
tmpTy³
);

4644 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4648 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4649 ià(!
	`VERIFY_OK
(
çu»
))

4653 ià(
»sCÏss
 =ğ
NULL
)

4656 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4657 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4659 
	`LOG_VFY
("VFY: inv®id‡put-1Ä oÀ%s", 
»sCÏss
->
desütÜ
);

4660 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4665 
d¡Ty³
 = 
	`´im™iveTy³ToRegTy³
(

4666 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

4669 ià(
d¡Ty³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4670 
tmpTy³
 = 
kRegTy³Flßt
;

4672 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
d¡Ty³
, &
çu»
);

4674 ià(
d¡Ty³
 =ğ
kRegTy³Unknown
 ||

4675 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
d¡Ty³
)) {

4676 
	`LOG_VFY
("VFY: invalid‡put-1nr on %s (inst=%d dst=%d)",

4677 
»sCÏss
->
desütÜ
, 
tmpTy³
, 
d¡Ty³
);

4678 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4683 
OP_APUT_WIDE
:

4684 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4685 
	`checkA¼ayIndexTy³
(
m‘h
, 
tmpTy³
, &
çu»
);

4686 ià(!
	`VERIFY_OK
(
çu»
))

4689 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4690 ià(!
	`VERIFY_OK
(
çu»
))

4692 ià(
»sCÏss
 !ğ
NULL
) {

4694 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4695 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4697 
	`LOG_VFY
("VFY: invalid‡put-wide on %s",

4698 
»sCÏss
->
desütÜ
);

4699 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4703 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

4704 
PRIM_LONG
:

4705 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
, &
çu»
);

4707 
PRIM_DOUBLE
:

4708 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
, &
çu»
);

4711 
	`LOG_VFY
("VFY: invalid‡put-wide on %s",

4712 
»sCÏss
->
desütÜ
);

4713 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4718 
OP_APUT_OBJECT
:

4719 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vC
);

4720 
	`checkA¼ayIndexTy³
(
m‘h
, 
tmpTy³
, &
çu»
);

4721 ià(!
	`VERIFY_OK
(
çu»
))

4725 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vA
, &
çu»
);

4726 ià(!
	`VERIFY_OK
(
çu»
))

4728 ià(
»sCÏss
 !ğ
NULL
) {

4729 
CÏssObjeù
* 
¬¿yCÏss
;

4730 
CÏssObjeù
* 
–em’tCÏss
;

4737 
¬¿yCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkLše
, 
decIn¢
.
vB
, &
çu»
);

4739 ià(
¬¿yCÏss
 !ğ
NULL
) {

4741 ià(!
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
)) {

4742 
	`LOG_VFY
("VFY: invalid‡put-object on %s",

4743 
¬¿yCÏss
->
desütÜ
);

4744 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4758 ià(
¬¿yCÏss
->
desütÜ
[1] == '[') {

4759 
	`as£¹
(
¬¿yCÏss
->
¬¿yDim
 > 1);

4760 
–em’tCÏss
 = 
	`dvmFšdA¼ayCÏss
(&
¬¿yCÏss
->
desütÜ
[1],

4761 
¬¿yCÏss
->
şassLßd”
);

4763 
	`as£¹
(
¬¿yCÏss
->
¬¿yDim
 == 1);

4764 
–em’tCÏss
 = 
¬¿yCÏss
->elementClass;

4766 ià(
–em’tCÏss
->
´im™iveTy³
 !ğ
PRIM_NOT
) {

4767 
	`LOG_VFY
("VFY: invalid‡put-object of %s into %s",

4768 
»sCÏss
->
desütÜ
, 
¬¿yCÏss
->descriptor);

4769 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4776 
OP_IGET
:

4777 
tmpTy³
 = 
kRegTy³IÁeg”
;

4778 
ig‘_1Ä_commÚ
;

4779 
OP_IGET_BOOLEAN
:

4780 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4781 
ig‘_1Ä_commÚ
;

4782 
OP_IGET_BYTE
:

4783 
tmpTy³
 = 
kRegTy³By‹
;

4784 
ig‘_1Ä_commÚ
;

4785 
OP_IGET_CHAR
:

4786 
tmpTy³
 = 
kRegTy³Ch¬
;

4787 
ig‘_1Ä_commÚ
;

4788 
OP_IGET_SHORT
:

4789 
tmpTy³
 = 
kRegTy³ShÜt
;

4790 
ig‘_1Ä_commÚ
;

4791 
ig‘_1Ä_commÚ
:

4793 
In¡F›ld
* 
š¡F›ld
;

4794 
RegTy³
 
objTy³
, 
f›ldTy³
;

4796 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4797 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4798 &
çu»
);

4799 ià(!
	`VERIFY_OK
(
çu»
))

4803 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
š¡F›ld
->
sigÇtu»
[0]);

4806 ià(
f›ldTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4807 
tmpTy³
 = 
kRegTy³Flßt
;

4809 ià(
f›ldTy³
 =ğ
kRegTy³Unknown
 ||

4810 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
))

4812 
	`LOG_VFY
("VFY: invalid iget-1nr of %s.%s (inst=%d field=%d)",

4813 
š¡F›ld
->
şazz
->
desütÜ
,

4814 
š¡F›ld
->
Çme
, 
tmpTy³
, 
f›ldTy³
);

4815 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4819 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
tmpTy³
);

4822 
OP_IGET_WIDE
:

4824 
RegTy³
 
d¡Ty³
;

4825 
In¡F›ld
* 
š¡F›ld
;

4826 
RegTy³
 
objTy³
;

4828 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4829 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4830 &
çu»
);

4831 ià(!
	`VERIFY_OK
(
çu»
))

4834 
š¡F›ld
->
sigÇtu»
[0]) {

4836 
d¡Ty³
 = 
kRegTy³DoubËLo
;

4839 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4842 
	`LOG_VFY
("VFY: invalid iget-wide of %s.%s",

4843 
š¡F›ld
->
şazz
->
desütÜ
,

4844 
š¡F›ld
->
Çme
);

4845 
d¡Ty³
 = 
kRegTy³Unknown
;

4846 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4849 ià(
	`VERIFY_OK
(
çu»
)) {

4850 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
d¡Ty³
);

4854 
OP_IGET_OBJECT
:

4856 
CÏssObjeù
* 
f›ldCÏss
;

4857 
In¡F›ld
* 
š¡F›ld
;

4858 
RegTy³
 
objTy³
;

4860 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4861 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4862 &
çu»
);

4863 ià(!
	`VERIFY_OK
(
çu»
))

4865 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, 
š¡F›ld
);

4866 ià(
f›ldCÏss
 =ğ
NULL
) {

4868 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'",

4869 
š¡F›ld
->
sigÇtu»
);

4870 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4873 ià(
	`VERIFY_OK
(
çu»
)) {

4874 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
));

4875 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
,

4876 
	`»gTy³FromCÏss
(
f›ldCÏss
));

4880 
OP_IPUT
:

4881 
tmpTy³
 = 
kRegTy³IÁeg”
;

4882 
ut_1Ä_commÚ
;

4883 
OP_IPUT_BOOLEAN
:

4884 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4885 
ut_1Ä_commÚ
;

4886 
OP_IPUT_BYTE
:

4887 
tmpTy³
 = 
kRegTy³By‹
;

4888 
ut_1Ä_commÚ
;

4889 
OP_IPUT_CHAR
:

4890 
tmpTy³
 = 
kRegTy³Ch¬
;

4891 
ut_1Ä_commÚ
;

4892 
OP_IPUT_SHORT
:

4893 
tmpTy³
 = 
kRegTy³ShÜt
;

4894 
ut_1Ä_commÚ
;

4895 
ut_1Ä_commÚ
:

4897 
RegTy³
 
¤cTy³
, 
f›ldTy³
, 
objTy³
;

4898 
In¡F›ld
* 
š¡F›ld
;

4900 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4906 ià(
tmpTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

4907 
tmpTy³
 = 
kRegTy³By‹
;

4910 ià(
¤cTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4911 
tmpTy³
 = 
kRegTy³Flßt
;

4914 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

4915 
	`LOG_VFY
("VFY: invalid„egype %d on iput instr (need %d)",

4916 
¤cTy³
, 
tmpTy³
);

4917 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4921 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4922 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4923 &
çu»
);

4924 ià(!
	`VERIFY_OK
(
çu»
))

4926 
	`checkFš®F›ldAcûss
(
m‘h
, 
š¡F›ld
, &
çu»
);

4927 ià(!
	`VERIFY_OK
(
çu»
))

4931 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
š¡F›ld
->
sigÇtu»
[0]);

4934 ià(
f›ldTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

4935 
tmpTy³
 = 
kRegTy³Flßt
;

4937 ià(
f›ldTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

4938 
f›ldTy³
 = 
kRegTy³By‹
;

4940 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
f›ldTy³
, &
çu»
);

4942 ià(
f›ldTy³
 =ğ
kRegTy³Unknown
 ||

4943 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
))

4945 
	`LOG_VFY
("VFY: invalid iput-1nr of %s.%s (inst=%d field=%d)",

4946 
š¡F›ld
->
şazz
->
desütÜ
,

4947 
š¡F›ld
->
Çme
, 
tmpTy³
, 
f›ldTy³
);

4948 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4953 
OP_IPUT_WIDE
:

4954 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

4956 
RegTy³
 
ty³Hi
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
 + 1);

4957 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy2
, &
çu»
);

4958 
	`checkWidePaœ
(
tmpTy³
, 
ty³Hi
, &
çu»
);

4960 ià(!
	`VERIFY_OK
(
çu»
))

4963 
In¡F›ld
* 
š¡F›ld
;

4964 
RegTy³
 
objTy³
;

4966 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4967 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4968 &
çu»
);

4969 ià(!
	`VERIFY_OK
(
çu»
))

4971 
	`checkFš®F›ldAcûss
(
m‘h
, 
š¡F›ld
, &
çu»
);

4972 ià(!
	`VERIFY_OK
(
çu»
))

4976 
š¡F›ld
->
sigÇtu»
[0]) {

4978 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
, &
çu»
);

4981 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
, &
çu»
);

4984 
	`LOG_VFY
("VFY: invalid iput-wide of %s.%s",

4985 
š¡F›ld
->
şazz
->
desütÜ
,

4986 
š¡F›ld
->
Çme
);

4987 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4991 
OP_IPUT_OBJECT
:

4993 
CÏssObjeù
* 
f›ldCÏss
;

4994 
CÏssObjeù
* 
v®ueCÏss
;

4995 
In¡F›ld
* 
š¡F›ld
;

4996 
RegTy³
 
objTy³
, 
v®ueTy³
;

4998 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vB
);

4999 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

5000 &
çu»
);

5001 ià(!
	`VERIFY_OK
(
çu»
))

5003 
	`checkFš®F›ldAcûss
(
m‘h
, 
š¡F›ld
, &
çu»
);

5004 ià(!
	`VERIFY_OK
(
çu»
))

5007 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, 
š¡F›ld
);

5008 ià(
f›ldCÏss
 =ğ
NULL
) {

5009 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'",

5010 
š¡F›ld
->
sigÇtu»
);

5011 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5015 
v®ueTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

5016 ià(!
	`»gTy³IsReã»nû
(
v®ueTy³
)) {

5017 
	`LOG_VFY
("VFY: storing‚on-ref v%d into„ef field '%s' (%s)",

5018 
decIn¢
.
vA
, 
š¡F›ld
->
Çme
,

5019 
f›ldCÏss
->
desütÜ
);

5020 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5023 ià(
v®ueTy³
 !ğ
kRegTy³Z”o
) {

5024 
v®ueCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
v®ueTy³
);

5025 ià(
v®ueCÏss
 =ğ
NULL
) {

5026 
	`LOG_VFY
("VFY: storing uninit„ef v%d into„ef field",

5027 
decIn¢
.
vA
);

5028 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5032 ià(!
	`dvmIsIÁ”çûCÏss
(
f›ldCÏss
) &&

5033 !
	`dvmIn¡ªûof
(
v®ueCÏss
, 
f›ldCÏss
))

5035 
	`LOG_VFY
("VFY: storingype '%s' into fieldype '%s' (%s.%s)",

5036 
v®ueCÏss
->
desütÜ
, 
f›ldCÏss
->descriptor,

5037 
š¡F›ld
->
şazz
->
desütÜ
,

5038 
š¡F›ld
->
Çme
);

5039 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5046 
OP_SGET
:

5047 
tmpTy³
 = 
kRegTy³IÁeg”
;

5048 
sg‘_1Ä_commÚ
;

5049 
OP_SGET_BOOLEAN
:

5050 
tmpTy³
 = 
kRegTy³BoŞ—n
;

5051 
sg‘_1Ä_commÚ
;

5052 
OP_SGET_BYTE
:

5053 
tmpTy³
 = 
kRegTy³By‹
;

5054 
sg‘_1Ä_commÚ
;

5055 
OP_SGET_CHAR
:

5056 
tmpTy³
 = 
kRegTy³Ch¬
;

5057 
sg‘_1Ä_commÚ
;

5058 
OP_SGET_SHORT
:

5059 
tmpTy³
 = 
kRegTy³ShÜt
;

5060 
sg‘_1Ä_commÚ
;

5061 
sg‘_1Ä_commÚ
:

5063 
SticF›ld
* 
¡©icF›ld
;

5064 
RegTy³
 
f›ldTy³
;

5066 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5067 ià(!
	`VERIFY_OK
(
çu»
))

5077 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
¡©icF›ld
->
sigÇtu»
[0]);

5080 ià(
f›ldTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

5081 
tmpTy³
 = 
kRegTy³Flßt
;

5083 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
)) {

5084 
	`LOG_VFY
("VFY: invalid sget-1nr of %s.%s (inst=%d‡ctual=%d)",

5085 
¡©icF›ld
->
şazz
->
desütÜ
,

5086 
¡©icF›ld
->
Çme
, 
tmpTy³
, 
f›ldTy³
);

5087 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5091 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
tmpTy³
);

5094 
OP_SGET_WIDE
:

5096 
SticF›ld
* 
¡©icF›ld
;

5097 
RegTy³
 
d¡Ty³
;

5099 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5100 ià(!
	`VERIFY_OK
(
çu»
))

5103 
¡©icF›ld
->
sigÇtu»
[0]) {

5105 
d¡Ty³
 = 
kRegTy³DoubËLo
;

5108 
d¡Ty³
 = 
kRegTy³LÚgLo
;

5111 
	`LOG_VFY
("VFY: invalid sget-wide of %s.%s",

5112 
¡©icF›ld
->
şazz
->
desütÜ
,

5113 
¡©icF›ld
->
Çme
);

5114 
d¡Ty³
 = 
kRegTy³Unknown
;

5115 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5118 ià(
	`VERIFY_OK
(
çu»
)) {

5119 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
d¡Ty³
);

5123 
OP_SGET_OBJECT
:

5125 
SticF›ld
* 
¡©icF›ld
;

5126 
CÏssObjeù
* 
f›ldCÏss
;

5128 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5129 ià(!
	`VERIFY_OK
(
çu»
))

5131 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, 
¡©icF›ld
);

5132 ià(
f›ldCÏss
 =ğ
NULL
) {

5133 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'",

5134 
¡©icF›ld
->
sigÇtu»
);

5135 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5138 ià(
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
)) {

5139 
	`LOG_VFY
("VFY:‡ttempto get…rim field with sget-object");

5140 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5143 
	`£tRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
	`»gTy³FromCÏss
(
f›ldCÏss
));

5146 
OP_SPUT
:

5147 
tmpTy³
 = 
kRegTy³IÁeg”
;

5148 
¥ut_1Ä_commÚ
;

5149 
OP_SPUT_BOOLEAN
:

5150 
tmpTy³
 = 
kRegTy³BoŞ—n
;

5151 
¥ut_1Ä_commÚ
;

5152 
OP_SPUT_BYTE
:

5153 
tmpTy³
 = 
kRegTy³By‹
;

5154 
¥ut_1Ä_commÚ
;

5155 
OP_SPUT_CHAR
:

5156 
tmpTy³
 = 
kRegTy³Ch¬
;

5157 
¥ut_1Ä_commÚ
;

5158 
OP_SPUT_SHORT
:

5159 
tmpTy³
 = 
kRegTy³ShÜt
;

5160 
¥ut_1Ä_commÚ
;

5161 
¥ut_1Ä_commÚ
:

5163 
RegTy³
 
¤cTy³
, 
f›ldTy³
;

5164 
SticF›ld
* 
¡©icF›ld
;

5166 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

5172 ià(
tmpTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

5173 
tmpTy³
 = 
kRegTy³By‹
;

5176 ià(
¤cTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

5177 
tmpTy³
 = 
kRegTy³Flßt
;

5180 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

5181 
	`LOG_VFY
("VFY: invalid„egype %d on sput instr (need %d)",

5182 
¤cTy³
, 
tmpTy³
);

5183 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5187 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5188 ià(!
	`VERIFY_OK
(
çu»
))

5190 
	`checkFš®F›ldAcûss
(
m‘h
, 
¡©icF›ld
, &
çu»
);

5191 ià(!
	`VERIFY_OK
(
çu»
))

5201 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
¡©icF›ld
->
sigÇtu»
[0]);

5204 ià(
f›ldTy³
 =ğ
kRegTy³Flßt
 && 
tmpTy³
 =ğ
kRegTy³IÁeg”
)

5205 
tmpTy³
 = 
kRegTy³Flßt
;

5207 ià(
f›ldTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

5208 
f›ldTy³
 = 
kRegTy³By‹
;

5210 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
f›ldTy³
, &
çu»
);

5212 ià(
f›ldTy³
 =ğ
kRegTy³Unknown
 ||

5213 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
)) {

5214 
	`LOG_VFY
("VFY: invalid sput-1nr of %s.%s (inst=%d‡ctual=%d)",

5215 
¡©icF›ld
->
şazz
->
desütÜ
,

5216 
¡©icF›ld
->
Çme
, 
tmpTy³
, 
f›ldTy³
);

5217 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5222 
OP_SPUT_WIDE
:

5223 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

5225 
RegTy³
 
ty³Hi
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
 + 1);

5226 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy2
, &
çu»
);

5227 
	`checkWidePaœ
(
tmpTy³
, 
ty³Hi
, &
çu»
);

5229 ià(!
	`VERIFY_OK
(
çu»
))

5232 
SticF›ld
* 
¡©icF›ld
;

5234 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5235 ià(!
	`VERIFY_OK
(
çu»
))

5237 
	`checkFš®F›ldAcûss
(
m‘h
, 
¡©icF›ld
, &
çu»
);

5238 ià(!
	`VERIFY_OK
(
çu»
))

5242 
¡©icF›ld
->
sigÇtu»
[0]) {

5244 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
, &
çu»
);

5247 
	`v”ifyRegi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
, &
çu»
);

5250 
	`LOG_VFY
("VFY: invalid sput-wide of %s.%s",

5251 
¡©icF›ld
->
şazz
->
desütÜ
,

5252 
¡©icF›ld
->
Çme
);

5253 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5257 
OP_SPUT_OBJECT
:

5259 
CÏssObjeù
* 
f›ldCÏss
;

5260 
CÏssObjeù
* 
v®ueCÏss
;

5261 
SticF›ld
* 
¡©icF›ld
;

5262 
RegTy³
 
v®ueTy³
;

5264 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

5265 ià(!
	`VERIFY_OK
(
çu»
))

5267 
	`checkFš®F›ldAcûss
(
m‘h
, 
¡©icF›ld
, &
çu»
);

5268 ià(!
	`VERIFY_OK
(
çu»
))

5271 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, 
¡©icF›ld
);

5272 ià(
f›ldCÏss
 =ğ
NULL
) {

5273 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'",

5274 
¡©icF›ld
->
sigÇtu»
);

5275 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5279 
v®ueTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkLše
, 
decIn¢
.
vA
);

5280 ià(!
	`»gTy³IsReã»nû
(
v®ueTy³
)) {

5281 
	`LOG_VFY
("VFY: storing‚on-ref v%d into„ef field '%s' (%s)",

5282 
decIn¢
.
vA
, 
¡©icF›ld
->
Çme
,

5283 
f›ldCÏss
->
desütÜ
);

5284 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5287 ià(
v®ueTy³
 !ğ
kRegTy³Z”o
) {

5288 
v®ueCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
v®ueTy³
);

5289 ià(
v®ueCÏss
 =ğ
NULL
) {

5290 
	`LOG_VFY
("VFY: storing uninit„ef v%d into„ef field",

5291 
decIn¢
.
vA
);

5292 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5296 ià(!
	`dvmIsIÁ”çûCÏss
(
f›ldCÏss
) &&

5297 !
	`dvmIn¡ªûof
(
v®ueCÏss
, 
f›ldCÏss
))

5299 
	`LOG_VFY
("VFY: storingype '%s' into fieldype '%s' (%s.%s)",

5300 
v®ueCÏss
->
desütÜ
, 
f›ldCÏss
->descriptor,

5301 
¡©icF›ld
->
şazz
->
desütÜ
,

5302 
¡©icF›ld
->
Çme
);

5303 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5310 
OP_INVOKE_VIRTUAL
:

5311 
OP_INVOKE_VIRTUAL_RANGE
:

5312 
OP_INVOKE_SUPER
:

5313 
OP_INVOKE_SUPER_RANGE
:

5315 
M‘hod
* 
ÿÎedM‘hod
;

5316 
RegTy³
 
»tuºTy³
;

5317 
boŞ
 
isRªge
;

5318 
boŞ
 
isSu³r
;

5320 
isRªge
 = (
decIn¢
.
İcode
 =ğ
OP_INVOKE_VIRTUAL_RANGE
 ||

5321 
decIn¢
.
İcode
 =ğ
OP_INVOKE_SUPER_RANGE
);

5322 
isSu³r
 = (
decIn¢
.
İcode
 =ğ
OP_INVOKE_SUPER
 ||

5323 
decIn¢
.
İcode
 =ğ
OP_INVOKE_SUPER_RANGE
);

5325 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
,

5326 &
decIn¢
, 
unš™M­
, 
METHOD_VIRTUAL
, 
isRªge
,

5327 
isSu³r
, &
çu»
);

5328 ià(!
	`VERIFY_OK
(
çu»
))

5330 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

5331 
	`£tResuÉRegi¡”Ty³
(
wÜkLše
, 
š¢RegCouÁ
, 
»tuºTy³
);

5332 
ju¡S‘ResuÉ
 = 
Œue
;

5335 
OP_INVOKE_DIRECT
:

5336 
OP_INVOKE_DIRECT_RANGE
:

5338 
RegTy³
 
»tuºTy³
;

5339 
M‘hod
* 
ÿÎedM‘hod
;

5340 
boŞ
 
isRªge
;

5342 
isRªge
 = (
decIn¢
.
İcode
 =ğ
OP_INVOKE_DIRECT_RANGE
);

5343 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
,

5344 &
decIn¢
, 
unš™M­
, 
METHOD_DIRECT
, 
isRªge
,

5345 
çl£
, &
çu»
);

5346 ià(!
	`VERIFY_OK
(
çu»
))

5358 ià(
	`isIn™M‘hod
(
ÿÎedM‘hod
)) {

5359 
RegTy³
 
thisTy³
;

5360 
thisTy³
 = 
	`g‘InvoÿtiÚThis
(
wÜkLše
, &
decIn¢
, &
çu»
);

5361 ià(!
	`VERIFY_OK
(
çu»
))

5365 ià(
thisTy³
 =ğ
kRegTy³Z”o
) {

5366 
	`LOG_VFY
("VFY: unableo initialize‚ull„ef");

5367 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5371 
CÏssObjeù
* 
thisCÏss
;

5373 
thisCÏss
 = 
	`»gTy³Reã»nûToCÏss
(
thisTy³
, 
unš™M­
);

5374 
	`as£¹
(
thisCÏss
 !ğ
NULL
);

5377 ià(
ÿÎedM‘hod
->
şazz
 =ğ
thisCÏss
->
su³r
) {

5378 ià(
thisCÏss
 !ğ
m‘h
->
şazz
) {

5379 
	`LOG_VFY
("VFY: invoke-direct <init> on super only "

5381 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5384 } ià(
ÿÎedM‘hod
->
şazz
 !ğ
thisCÏss
) {

5385 
	`LOG_VFY
("VFY: invoke-direct <init> must be on current "

5387 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5392 ià(!
	`»gTy³IsUnš™Reã»nû
(
thisTy³
)) {

5393 
	`LOG_VFY
("VFY: can only initializehe uninitialized");

5394 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5404 
	`m¬kRefsAsIn™Ÿlized
(
wÜkLše
, 
š¢RegCouÁ
, 
unš™M­
,

5405 
thisTy³
, &
çu»
);

5406 ià(!
	`VERIFY_OK
(
çu»
))

5409 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

5410 
	`£tResuÉRegi¡”Ty³
(
wÜkLše
, 
š¢RegCouÁ
, 
»tuºTy³
);

5411 
ju¡S‘ResuÉ
 = 
Œue
;

5414 
OP_INVOKE_STATIC
:

5415 
OP_INVOKE_STATIC_RANGE
:

5417 
RegTy³
 
»tuºTy³
;

5418 
M‘hod
* 
ÿÎedM‘hod
;

5419 
boŞ
 
isRªge
;

5421 
isRªge
 = (
decIn¢
.
İcode
 =ğ
OP_INVOKE_STATIC_RANGE
);

5422 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
,

5423 &
decIn¢
, 
unš™M­
, 
METHOD_STATIC
, 
isRªge
,

5424 
çl£
, &
çu»
);

5425 ià(!
	`VERIFY_OK
(
çu»
))

5428 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

5429 
	`£tResuÉRegi¡”Ty³
(
wÜkLše
, 
š¢RegCouÁ
, 
»tuºTy³
);

5430 
ju¡S‘ResuÉ
 = 
Œue
;

5433 
OP_INVOKE_INTERFACE
:

5434 
OP_INVOKE_INTERFACE_RANGE
:

5436 
RegTy³
 
»tuºTy³
;

5437 
M‘hod
* 
absM‘hod
;

5438 
boŞ
 
isRªge
;

5440 
isRªge
 = (
decIn¢
.
İcode
 =ğ
OP_INVOKE_INTERFACE_RANGE
);

5441 
absM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkLše
, 
š¢RegCouÁ
,

5442 &
decIn¢
, 
unš™M­
, 
METHOD_INTERFACE
, 
isRªge
,

5443 
çl£
, &
çu»
);

5444 ià(!
	`VERIFY_OK
(
çu»
))

5453 
thisTy³
 = 
	`g‘InvoÿtiÚThis
(
wÜkLše
, &
decIn¢
, &
çu»
);

5454 ià(!
	`VERIFY_OK
(
çu»
))

5457 ià(
thisTy³
 =ğ
kRegTy³Z”o
) {

5460 
CÏssObjeù
* 
thisCÏss
;

5462 
thisCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
thisTy³
);

5463 ià(
thisCÏss
 =ğ
NULL
) {

5464 
	`LOG_VFY
("VFY: interface call on uninitialized");

5465 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5475 ià(
thisCÏss
 !ğ
absM‘hod
->
şazz
 &&

5476 
thisCÏss
 !ğ
gDvm
.
şassJavaLªgObjeù
 &&

5477 !
	`dvmIm¶em’ts
(
thisCÏss
, 
absM‘hod
->
şazz
))

5479 
	`LOG_VFY
("VFY: unableo match‡bsMethod '%s' with %s interfaces",

5480 
absM‘hod
->
Çme
, 
thisCÏss
->
desütÜ
);

5481 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5492 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
absM‘hod
);

5493 
	`£tResuÉRegi¡”Ty³
(
wÜkLše
, 
š¢RegCouÁ
, 
»tuºTy³
);

5494 
ju¡S‘ResuÉ
 = 
Œue
;

5498 
OP_NEG_INT
:

5499 
OP_NOT_INT
:

5500 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5501 
kRegTy³IÁeg”
, kRegTy³IÁeg”, &
çu»
);

5503 
OP_NEG_LONG
:

5504 
OP_NOT_LONG
:

5505 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5506 
kRegTy³LÚgLo
, kRegTy³LÚgLo, &
çu»
);

5508 
OP_NEG_FLOAT
:

5509 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5510 
kRegTy³Flßt
, kRegTy³Flßt, &
çu»
);

5512 
OP_NEG_DOUBLE
:

5513 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5514 
kRegTy³DoubËLo
, kRegTy³DoubËLo, &
çu»
);

5516 
OP_INT_TO_LONG
:

5517 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5518 
kRegTy³LÚgLo
, 
kRegTy³IÁeg”
, &
çu»
);

5520 
OP_INT_TO_FLOAT
:

5521 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5522 
kRegTy³Flßt
, 
kRegTy³IÁeg”
, &
çu»
);

5524 
OP_INT_TO_DOUBLE
:

5525 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5526 
kRegTy³DoubËLo
, 
kRegTy³IÁeg”
, &
çu»
);

5528 
OP_LONG_TO_INT
:

5529 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5530 
kRegTy³IÁeg”
, 
kRegTy³LÚgLo
, &
çu»
);

5532 
OP_LONG_TO_FLOAT
:

5533 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5534 
kRegTy³Flßt
, 
kRegTy³LÚgLo
, &
çu»
);

5536 
OP_LONG_TO_DOUBLE
:

5537 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5538 
kRegTy³DoubËLo
, 
kRegTy³LÚgLo
, &
çu»
);

5540 
OP_FLOAT_TO_INT
:

5541 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5542 
kRegTy³IÁeg”
, 
kRegTy³Flßt
, &
çu»
);

5544 
OP_FLOAT_TO_LONG
:

5545 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5546 
kRegTy³LÚgLo
, 
kRegTy³Flßt
, &
çu»
);

5548 
OP_FLOAT_TO_DOUBLE
:

5549 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5550 
kRegTy³DoubËLo
, 
kRegTy³Flßt
, &
çu»
);

5552 
OP_DOUBLE_TO_INT
:

5553 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5554 
kRegTy³IÁeg”
, 
kRegTy³DoubËLo
, &
çu»
);

5556 
OP_DOUBLE_TO_LONG
:

5557 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5558 
kRegTy³LÚgLo
, 
kRegTy³DoubËLo
, &
çu»
);

5560 
OP_DOUBLE_TO_FLOAT
:

5561 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5562 
kRegTy³Flßt
, 
kRegTy³DoubËLo
, &
çu»
);

5564 
OP_INT_TO_BYTE
:

5565 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5566 
kRegTy³By‹
, 
kRegTy³IÁeg”
, &
çu»
);

5568 
OP_INT_TO_CHAR
:

5569 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5570 
kRegTy³Ch¬
, 
kRegTy³IÁeg”
, &
çu»
);

5572 
OP_INT_TO_SHORT
:

5573 
	`checkUnİ
(
wÜkLše
, &
decIn¢
,

5574 
kRegTy³ShÜt
, 
kRegTy³IÁeg”
, &
çu»
);

5577 
OP_ADD_INT
:

5578 
OP_SUB_INT
:

5579 
OP_MUL_INT
:

5580 
OP_REM_INT
:

5581 
OP_DIV_INT
:

5582 
OP_SHL_INT
:

5583 
OP_SHR_INT
:

5584 
OP_USHR_INT
:

5585 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5586 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5588 
OP_AND_INT
:

5589 
OP_OR_INT
:

5590 
OP_XOR_INT
:

5591 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5592 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5594 
OP_ADD_LONG
:

5595 
OP_SUB_LONG
:

5596 
OP_MUL_LONG
:

5597 
OP_DIV_LONG
:

5598 
OP_REM_LONG
:

5599 
OP_AND_LONG
:

5600 
OP_OR_LONG
:

5601 
OP_XOR_LONG
:

5602 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5603 
kRegTy³LÚgLo
, kRegTy³LÚgLo, kRegTy³LÚgLo, 
çl£
, &
çu»
);

5605 
OP_SHL_LONG
:

5606 
OP_SHR_LONG
:

5607 
OP_USHR_LONG
:

5609 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5610 
kRegTy³LÚgLo
, kRegTy³LÚgLo, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5612 
OP_ADD_FLOAT
:

5613 
OP_SUB_FLOAT
:

5614 
OP_MUL_FLOAT
:

5615 
OP_DIV_FLOAT
:

5616 
OP_REM_FLOAT
:

5617 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5618 
kRegTy³Flßt
, kRegTy³Flßt, kRegTy³Flßt, 
çl£
, &
çu»
);

5620 
OP_ADD_DOUBLE
:

5621 
OP_SUB_DOUBLE
:

5622 
OP_MUL_DOUBLE
:

5623 
OP_DIV_DOUBLE
:

5624 
OP_REM_DOUBLE
:

5625 
	`checkBšİ
(
wÜkLše
, &
decIn¢
,

5626 
kRegTy³DoubËLo
, kRegTy³DoubËLo, kRegTy³DoubËLo, 
çl£
,

5627 &
çu»
);

5629 
OP_ADD_INT_2ADDR
:

5630 
OP_SUB_INT_2ADDR
:

5631 
OP_MUL_INT_2ADDR
:

5632 
OP_REM_INT_2ADDR
:

5633 
OP_SHL_INT_2ADDR
:

5634 
OP_SHR_INT_2ADDR
:

5635 
OP_USHR_INT_2ADDR
:

5636 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5637 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5639 
OP_AND_INT_2ADDR
:

5640 
OP_OR_INT_2ADDR
:

5641 
OP_XOR_INT_2ADDR
:

5642 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5643 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5645 
OP_DIV_INT_2ADDR
:

5646 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5647 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5649 
OP_ADD_LONG_2ADDR
:

5650 
OP_SUB_LONG_2ADDR
:

5651 
OP_MUL_LONG_2ADDR
:

5652 
OP_DIV_LONG_2ADDR
:

5653 
OP_REM_LONG_2ADDR
:

5654 
OP_AND_LONG_2ADDR
:

5655 
OP_OR_LONG_2ADDR
:

5656 
OP_XOR_LONG_2ADDR
:

5657 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5658 
kRegTy³LÚgLo
, kRegTy³LÚgLo, kRegTy³LÚgLo, 
çl£
, &
çu»
);

5660 
OP_SHL_LONG_2ADDR
:

5661 
OP_SHR_LONG_2ADDR
:

5662 
OP_USHR_LONG_2ADDR
:

5663 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5664 
kRegTy³LÚgLo
, kRegTy³LÚgLo, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5666 
OP_ADD_FLOAT_2ADDR
:

5667 
OP_SUB_FLOAT_2ADDR
:

5668 
OP_MUL_FLOAT_2ADDR
:

5669 
OP_DIV_FLOAT_2ADDR
:

5670 
OP_REM_FLOAT_2ADDR
:

5671 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5672 
kRegTy³Flßt
, kRegTy³Flßt, kRegTy³Flßt, 
çl£
, &
çu»
);

5674 
OP_ADD_DOUBLE_2ADDR
:

5675 
OP_SUB_DOUBLE_2ADDR
:

5676 
OP_MUL_DOUBLE_2ADDR
:

5677 
OP_DIV_DOUBLE_2ADDR
:

5678 
OP_REM_DOUBLE_2ADDR
:

5679 
	`checkBšİ2addr
(
wÜkLše
, &
decIn¢
,

5680 
kRegTy³DoubËLo
, kRegTy³DoubËLo, kRegTy³DoubËLo, 
çl£
,

5681 &
çu»
);

5683 
OP_ADD_INT_LIT16
:

5684 
OP_RSUB_INT
:

5685 
OP_MUL_INT_LIT16
:

5686 
OP_DIV_INT_LIT16
:

5687 
OP_REM_INT_LIT16
:

5688 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5689 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5691 
OP_AND_INT_LIT16
:

5692 
OP_OR_INT_LIT16
:

5693 
OP_XOR_INT_LIT16
:

5694 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5695 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5697 
OP_ADD_INT_LIT8
:

5698 
OP_RSUB_INT_LIT8
:

5699 
OP_MUL_INT_LIT8
:

5700 
OP_DIV_INT_LIT8
:

5701 
OP_REM_INT_LIT8
:

5702 
OP_SHL_INT_LIT8
:

5703 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5704 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5706 
OP_SHR_INT_LIT8
:

5707 
tmpTy³
 = 
	`adju¡FÜRightShiá
(
wÜkLše
,

5708 
decIn¢
.
vB
, decIn¢.
vC
, 
çl£
, &
çu»
);

5709 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5710 
tmpTy³
, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5712 
OP_USHR_INT_LIT8
:

5713 
tmpTy³
 = 
	`adju¡FÜRightShiá
(
wÜkLše
,

5714 
decIn¢
.
vB
, decIn¢.
vC
, 
Œue
, &
çu»
);

5715 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5716 
tmpTy³
, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5718 
OP_AND_INT_LIT8
:

5719 
OP_OR_INT_LIT8
:

5720 
OP_XOR_INT_LIT8
:

5721 
	`checkL™İ
(
wÜkLše
, &
decIn¢
,

5722 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5730 
OP_THROW_VERIFICATION_ERROR
:

5765 
OP_EXECUTE_INLINE
:

5766 
OP_EXECUTE_INLINE_RANGE
:

5767 
OP_IGET_QUICK
:

5768 
OP_IGET_WIDE_QUICK
:

5769 
OP_IGET_OBJECT_QUICK
:

5770 
OP_IPUT_QUICK
:

5771 
OP_IPUT_WIDE_QUICK
:

5772 
OP_IPUT_OBJECT_QUICK
:

5773 
OP_INVOKE_VIRTUAL_QUICK
:

5774 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

5775 
OP_INVOKE_SUPER_QUICK
:

5776 
OP_INVOKE_SUPER_QUICK_RANGE
:

5786 
OP_INVOKE_OBJECT_INIT_RANGE
:

5787 
OP_RETURN_VOID_BARRIER
:

5788 
OP_IGET_VOLATILE
:

5789 
OP_IGET_WIDE_VOLATILE
:

5790 
OP_IGET_OBJECT_VOLATILE
:

5791 
OP_IPUT_VOLATILE
:

5792 
OP_IPUT_WIDE_VOLATILE
:

5793 
OP_IPUT_OBJECT_VOLATILE
:

5794 
OP_SGET_VOLATILE
:

5795 
OP_SGET_WIDE_VOLATILE
:

5796 
OP_SGET_OBJECT_VOLATILE
:

5797 
OP_SPUT_VOLATILE
:

5798 
OP_SPUT_WIDE_VOLATILE
:

5799 
OP_SPUT_OBJECT_VOLATILE
:

5803 
OP_UNUSED_3E
:

5804 
OP_UNUSED_3F
:

5805 
OP_UNUSED_40
:

5806 
OP_UNUSED_41
:

5807 
OP_UNUSED_42
:

5808 
OP_UNUSED_43
:

5809 
OP_UNUSED_73
:

5810 
OP_UNUSED_79
:

5811 
OP_UNUSED_7A
:

5812 
OP_BREAKPOINT
:

5813 
OP_UNUSED_FF
:

5814 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5823 ià(!
	`VERIFY_OK
(
çu»
)) {

5824 ià(
çu»
 =ğ
VERIFY_ERROR_GENERIC
 || 
gDvm
.
İtimizšg
) {

5826 
	`LOG_VFY_METH
(
m‘h
, "VFY:„ejecting opcode 0x%02x‡t 0x%04x",

5827 
decIn¢
.
İcode
, 
š¢Idx
);

5828 
ba
;

5831 
	`ALOGD
("VFY:„eplacing opcode 0x%02x‡t 0x%04x",

5832 
decIn¢
.
İcode
, 
š¢Idx
);

5833 ià(!
	`»¶aûFašgIn¡ruùiÚ
(
m‘h
, 
š¢FÏgs
, 
š¢Idx
, 
çu»
)) {

5834 
	`LOG_VFY_METH
(
m‘h
, "VFY:„ejecting opcode 0x%02x‡t 0x%04x",

5835 
decIn¢
.
İcode
, 
š¢Idx
);

5836 
ba
;

5839 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

5842 
çu»
 = 
VERIFY_ERROR_NONE
;

5843 
ÃxtFÏgs
 = 
kIn¡rCªThrow
;

5853 ià(!
ju¡S‘ResuÉ
) {

5854 
»g
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

5855 
	`£tRegi¡”Ty³
(
wÜkLše
, 
»g
, 
kRegTy³Unknown
);

5856 
	`£tRegi¡”Ty³
(
wÜkLše
, 
»g
+1, 
kRegTy³Unknown
);

5862 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

5863 
š¢Width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
š¢Idx
);

5864 ià(
š¢Idx
+
š¢Width
 >ğ
š¢sSize
) {

5865 
	`LOG_VFY_METH
(
m‘h
,

5867 
š¢Idx
);

5868 
ba
;

5875 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
š¢Idx
+
š¢Width
, "next"))

5876 
ba
;

5878 ià(
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
+
š¢Width
)->
»gTy³s
 !ğ
NULL
) {

5883 ià(!
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
š¢Idx
+
š¢Width
,

5884 
wÜkLše
))

5885 
ba
;

5892 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
+
š¢Width
, 
Œue
);

5908 ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

5909 
boŞ
 
isCÚd™iÚ®
;

5911 ià(!
	`dvmG‘B¿nchOff£t
(
m‘h
, 
š¢FÏgs
, 
š¢Idx
, &
b¿nchT¬g‘
,

5912 &
isCÚd™iÚ®
))

5915 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad b¿nch‡ˆ%d", 
š¢Idx
);

5916 
ba
;

5918 
	`as£¹
(
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) == 0);

5919 
	`as£¹
(!
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0);

5921 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
š¢Idx
+
b¿nchT¬g‘
, "branch"))

5922 
ba
;

5925 ià(!
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
š¢Idx
+
b¿nchT¬g‘
,

5926 
wÜkLše
))

5927 
ba
;

5936 ià((
ÃxtFÏgs
 & 
kIn¡rCªSw™ch
) != 0) {

5937 
off£tToSw™ch
 = 
š¢s
[1] | (((
s4
)insns[2]) << 16);

5938 cÚ¡ 
u2
* 
sw™chIn¢s
 = 
š¢s
 + 
off£tToSw™ch
;

5939 
sw™chCouÁ
 = 
sw™chIn¢s
[1];

5940 
off£tToT¬g‘s
, 
rg
;

5942 ià((*
š¢s
 & 0xffè=ğ
OP_PACKED_SWITCH
) {

5944 
off£tToT¬g‘s
 = 4;

5947 
	`as£¹
((*
š¢s
 & 0xffè=ğ
OP_SPARSE_SWITCH
);

5948 
off£tToT¬g‘s
 = 2 + 2*
sw™chCouÁ
;

5952 
rg
 = 0;¬g < 
sw™chCouÁ
;arg++) {

5953 
off£t
, 
absOff£t
;

5956 
off£t
 = 
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2] |

5957 (((
s4
è
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2 +1]) << 16);

5958 
absOff£t
 = 
š¢Idx
 + 
off£t
;

5960 
	`as£¹
(
absOff£t
 >ğ0 &&‡bsOff£ˆ< 
š¢sSize
);

5962 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
absOff£t
, "switch"))

5963 
ba
;

5965 ià(!
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
absOff£t
,

5966 
wÜkLše
))

5967 
ba
;

5976 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

5978 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

5979 
DexC©chI‹¿tÜ
 
™”©Ü
;

5980 
boŞ
 
hasC©chAÎ
 = 
çl£
;

5982 ià(
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
pCode
, 
š¢Idx
)) {

5984 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

5986 ià(
hªdËr
 =ğ
NULL
) {

5990 ià(
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
)

5991 
hasC©chAÎ
 = 
Œue
;

5999 ià(!
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
,

6000 
hªdËr
->
add»ss
, &
»gTabË
->
§vedLše
))

6001 
ba
;

6010 ià(
wÜkLše
->
mÚ™ÜSckTİ
 !ğ0 && !
hasC©chAÎ
) {

6017 ià(!(
decIn¢
.
İcode
 =ğ
OP_MONITOR_ENTER
 &&

6018 
wÜkLše
->
mÚ™ÜSckTİ
 == 1))

6020 
	`LOG_VFY_METH
(
m‘h
,

6021 "VFY:‚Øÿtch-®ÈfÜ in¡ruùiÚ‡ˆ0x%04x", 
š¢Idx
);

6022 
ba
;

6031 ià((
ÃxtFÏgs
 & 
kIn¡rCªR‘uº
è!ğ0 && 
wÜkLše
->
mÚ™ÜSckTİ
 != 0) {

6032 
	`LOG_VFY_METH
(
m‘h
, "VFY:„eturn with stack depth=%d‡t 0x%04x",

6033 
wÜkLše
->
mÚ™ÜSckTİ
, 
š¢Idx
);

6034 
ba
;

6043 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

6044 *
pS¹Guess
 = 
š¢Idx
 + 
	`dvmIn¢G‘Width
(
š¢FÏgs
, insnIdx);

6045 } ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

6047 *
pS¹Guess
 = 
š¢Idx
 + 
b¿nchT¬g‘
;

6050 
	`as£¹
(*
pS¹Guess
 >ğ0 && *pS¹Gues < 
š¢sSize
 &&

6051 
	`dvmIn¢G‘Width
(
š¢FÏgs
, *
pS¹Guess
) != 0);

6053 
»suÉ
 = 
Œue
;

6055 
ba
:

6056  
»suÉ
;

6057 
	}
}

6064 
	$logLoÿlsCb
(*
úxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
, u4 
’dAdd»ss
,

6065 cÚ¡ *
Çme
, cÚ¡ *
desütÜ
,

6066 cÚ¡ *
sigÇtu»
)

6068 
addr
 = *((*)
úxt
);

6070 ià(
addr
 >ğ(è
¡¬tAdd»ss
 &&‡dd¸< (è
’dAdd»ss
)

6072 
	`ALOGI
(" %2d: '%s' %s", 
»g
, 
Çme
, 
desütÜ
);

6074 
	}
}

6079 
	$dumpRegTy³s
(cÚ¡ 
V”if›rD©a
* 
vd©a
,

6080 cÚ¡ 
Regi¡”Lše
* 
»gi¡”Lše
, 
addr
, cÚ¡ * 
addrName
,

6081 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
di¥ÏyFÏgs
)

6083 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

6084 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

6085 cÚ¡ 
RegTy³
* 
addrRegs
 = 
»gi¡”Lše
->
»gTy³s
;

6086 
»gCouÁ
 = 
m‘h
->
»gi¡”sSize
;

6087 
fuÎRegCouÁ
 = 
»gCouÁ
 + 
kExŒaRegs
;

6088 
boŞ
 
b¿nchT¬g‘
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
addr
);

6089 
i
;

6091 
	`as£¹
(
addr
 >ğ0 &&‡dd¸< (è
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

6093 
»gCh¬Size
 = 
fuÎRegCouÁ
 + (fullRegCount-1)/4 + 2 +1;

6094 
»gCh¬s
[
»gCh¬Size
 +1];

6095 
	`mem£t
(
»gCh¬s
, ' ', 
»gCh¬Size
);

6096 
»gCh¬s
[0] = '[';

6097 ià(
»gCouÁ
 == 0)

6098 
»gCh¬s
[1] = ']';

6100 
»gCh¬s
[1 + (
»gCouÁ
-1) + (regCount-1)/4 +1] = ']';

6101 
»gCh¬s
[
»gCh¬Size
] = '\0';

6103 
i
 = 0; i < 
»gCouÁ
 + 
kExŒaRegs
; i++) {

6104 
tch
;

6106 
addrRegs
[
i
]) {

6107 
kRegTy³Unknown
: 
tch
 = '.'; ;

6108 
kRegTy³CÚæiù
: 
tch
 = 'X'; ;

6109 
kRegTy³Z”o
: 
tch
 = '0'; ;

6110 
kRegTy³OÃ
: 
tch
 = '1'; ;

6111 
kRegTy³BoŞ—n
: 
tch
 = 'Z'; ;

6112 
kRegTy³CÚ¡PosBy‹
: 
tch
 = 'y'; ;

6113 
kRegTy³CÚ¡By‹
: 
tch
 = 'Y'; ;

6114 
kRegTy³CÚ¡PosShÜt
: 
tch
 = 'h'; ;

6115 
kRegTy³CÚ¡ShÜt
: 
tch
 = 'H'; ;

6116 
kRegTy³CÚ¡Ch¬
: 
tch
 = 'c'; ;

6117 
kRegTy³CÚ¡IÁeg”
: 
tch
 = 'i'; ;

6118 
kRegTy³PosBy‹
: 
tch
 = 'b'; ;

6119 
kRegTy³By‹
: 
tch
 = 'B'; ;

6120 
kRegTy³PosShÜt
: 
tch
 = 's'; ;

6121 
kRegTy³ShÜt
: 
tch
 = 'S'; ;

6122 
kRegTy³Ch¬
: 
tch
 = 'C'; ;

6123 
kRegTy³IÁeg”
: 
tch
 = 'I'; ;

6124 
kRegTy³Flßt
: 
tch
 = 'F'; ;

6125 
kRegTy³CÚ¡Lo
: 
tch
 = 'N'; ;

6126 
kRegTy³CÚ¡Hi
: 
tch
 = 'n'; ;

6127 
kRegTy³LÚgLo
: 
tch
 = 'J'; ;

6128 
kRegTy³LÚgHi
: 
tch
 = 'j'; ;

6129 
kRegTy³DoubËLo
: 
tch
 = 'D'; ;

6130 
kRegTy³DoubËHi
: 
tch
 = 'd'; ;

6132 ià(
	`»gTy³IsReã»nû
(
addrRegs
[
i
])) {

6133 ià(
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]))

6134 
tch
 = 'U';

6136 
tch
 = 'L';

6138 
tch
 = '*';

6139 
	`as£¹
(
çl£
);

6144 ià(
i
 < 
»gCouÁ
)

6145 
»gCh¬s
[1 + 
i
 + (i/4)] = 
tch
;

6147 
»gCh¬s
[1 + 
i
 + (i/4è+ 2] = 
tch
;

6150 ià(
addr
 =ğ0 && 
addrName
 !ğ
NULL
) {

6151 
	`ALOGI
("%c% % m¡=%d", 
b¿nchT¬g‘
 ? '>' : ' ',

6152 
addrName
, 
»gCh¬s
, 
»gi¡”Lše
->
mÚ™ÜSckTİ
);

6154 
	`ALOGI
("%c0x%04x % m¡=%d", 
b¿nchT¬g‘
 ? '>' : ' ',

6155 
addr
, 
»gCh¬s
, 
»gi¡”Lše
->
mÚ™ÜSckTİ
);

6157 ià(
di¥ÏyFÏgs
 & 
DRT_SHOW_LIVENESS
) {

6162 
B™VeùÜ
* 
liveRegs
 = 
vd©a
->
»gi¡”Lšes
[
addr
].liveRegs;

6163 ià(
liveRegs
 !ğ
NULL
) {

6164 
liveCh¬s
[
»gCh¬Size
 + 1];

6165 
	`mem£t
(
liveCh¬s
, ' ', 
»gCh¬Size
);

6166 
liveCh¬s
[
»gCh¬Size
] = '\0';

6168 
i
 = 0; i < 
»gCouÁ
; i++) {

6169 
boŞ
 
isLive
 = 
	`dvmIsB™S‘
(
liveRegs
, 
i
);

6170 
liveCh¬s
[
i
 + 1 + (˜/ 4)] = 
isLive
 ? '+' : '-';

6172 
	`ALOGI
(" %s", 
liveCh¬s
);

6174 
	`ALOGI
(" %c", '#');

6178 ià(
di¥ÏyFÏgs
 & 
DRT_SHOW_REF_TYPES
) {

6179 
i
 = 0; i < 
»gCouÁ
 + 
kExŒaRegs
; i++) {

6180 ià(
	`»gTy³IsReã»nû
(
addrRegs
[
i
]è&&‡ddrRegs[i] !ğ
kRegTy³Z”o
)

6182 
CÏssObjeù
* 
şazz
 = 
	`»gTy³Reã»nûToCÏss
(
addrRegs
[
i
], 
unš™M­
);

6183 
	`as£¹
(
	`dvmIsH—pAdd»ss
((
Objeù
*)
şazz
));

6184 ià(
i
 < 
»gCouÁ
) {

6185 
	`ALOGI
(" %2d: 0x%08x %s%s",

6186 
i
, 
addrRegs
[i],

6187 
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]) ? "[U]" : "",

6188 
şazz
->
desütÜ
);

6190 
	`ALOGI
(" RS: 0x%08x %s%s",

6191 
addrRegs
[
i
],

6192 
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]) ? "[U]" : "",

6193 
şazz
->
desütÜ
);

6198 ià(
di¥ÏyFÏgs
 & 
DRT_SHOW_LOCALS
) {

6199 
	`dexDecodeDebugInfo
(
m‘h
->
şazz
->
pDvmDex
->
pDexFe
,

6200 
	`dvmG‘M‘hodCode
(
m‘h
),

6201 
m‘h
->
şazz
->
desütÜ
,

6202 
m‘h
->
´ÙÙy³
.
´ÙoIdx
,

6203 
m‘h
->
acûssFÏgs
,

6204 
NULL
, 
logLoÿlsCb
, &
addr
);

6206 
	}
}

	@vm/analysis/CodeVerify.h

20 #iâdeà
DALVIK_CODEVERIFY_H_


21 
	#DALVIK_CODEVERIFY_H_


	)

23 
	~"ª®ysis/V”ifySubs.h
"

24 
	~"ª®ysis/VfyBasicBlock.h
"

60 
	mkRegTy³Unknown
 = 0,

61 
	mkRegTy³Unš™
 = 1,

62 
	mkRegTy³CÚæiù
,

68 
	#kRegTy³1ÄSTART
 
kRegTy³Z”o


	)

69 
	mkRegTy³Z”o
,

70 
	mkRegTy³OÃ
,

71 
	mkRegTy³BoŞ—n
,

72 
	mkRegTy³CÚ¡PosBy‹
,

73 
	mkRegTy³CÚ¡By‹
,

74 
	mkRegTy³CÚ¡PosShÜt
,

75 
	mkRegTy³CÚ¡ShÜt
,

76 
	mkRegTy³CÚ¡Ch¬
,

77 
	mkRegTy³CÚ¡IÁeg”
,

78 
	mkRegTy³PosBy‹
,

79 
	mkRegTy³By‹
,

80 
	mkRegTy³PosShÜt
,

81 
	mkRegTy³ShÜt
,

82 
	mkRegTy³Ch¬
,

83 
	mkRegTy³IÁeg”
,

84 
	mkRegTy³Flßt
,

85 
	#kRegTy³1ÄEND
 
kRegTy³Flßt


	)

87 
	mkRegTy³CÚ¡Lo
,

88 
	mkRegTy³CÚ¡Hi
,

89 
	mkRegTy³LÚgLo
,

90 
	mkRegTy³LÚgHi
,

91 
	mkRegTy³DoubËLo
,

92 
	mkRegTy³DoubËHi
,

104 
	mkRegTy³MAX


106 
	#kRegTy³Unš™Mask
 0xff

	)

107 
	#kRegTy³Unš™Shiá
 8

	)

115 
u4
 
	tRegTy³
;

122 
u4
 
	tMÚ™ÜEÁr›s
;

123 
	#kMaxMÚ™ÜSckD•th
 ((
MÚ™ÜEÁr›s
è* 8)

	)

136 
	sRegi¡”Lše
 {

137 
RegTy³
* 
	m»gTy³s
;

138 
MÚ™ÜEÁr›s
* 
	mmÚ™ÜEÁr›s
;

139 
u4
* 
	mmÚ™ÜSck
;

140 
	mmÚ™ÜSckTİ
;

141 
B™VeùÜ
* 
	mliveRegs
;

148 
	sUnš™In¡ªûM­
 {

149 
	mnumEÁr›s
;

151 
	maddr
;

152 
CÏssObjeù
* 
	mşazz
;

153 } 
	mm­
[1];

155 
	#kUnš™ThisArgAddr
 (-1)

	)

156 
	#kUnš™ThisArgSlÙ
 0

	)

161 
	sV”if›rD©a
 {

165 cÚ¡ 
M‘hod
* 
	mm‘hod
;

171 
u4
 
	mš¢sSize
;

178 
u4
 
	mš¢RegCouÁ
;

183 
In¢FÏgs
* 
	mš¢FÏgs
;

189 
Unš™In¡ªûM­
* 
	munš™M­
;

197 
Regi¡”Lše
* 
	m»gi¡”Lšes
;

202 
size_t
 
	mÃwIn¡ªûCouÁ
;

203 
size_t
 
	mmÚ™ÜEÁ”CouÁ
;

209 
VfyBasicBlock
** 
	mbasicBlocks
;

214 cÚ¡ 
gDvmM”geTab
[
kRegTy³MAX
][kRegTypeMAX];

221 
INLINE
 
boŞ
 
	$dvmIn¢IsOpcode
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

222  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgWidthMask
) != 0;

223 
	}
}

228 
INLINE
 
	$dvmIn¢G‘Width
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

229  
š¢FÏgs
[
addr
] & 
kIn¢FÏgWidthMask
;

230 
	}
}

235 
INLINE
 
boŞ
 
	$dvmIn¢IsChªged
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

236  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgChªged
) != 0;

237 
	}
}

238 
INLINE
 
	$dvmIn¢S‘Chªged
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
chªged
)

240 ià(
chªged
)

241 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgChªged
;

243 
š¢FÏgs
[
addr
] &ğ~
kIn¢FÏgChªged
;

244 
	}
}

249 
INLINE
 
boŞ
 
	$dvmIn¢IsVis™ed
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

250  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgVis™ed
) != 0;

251 
	}
}

252 
INLINE
 
	$dvmIn¢S‘Vis™ed
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
chªged
)

254 ià(
chªged
)

255 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgVis™ed
;

257 
š¢FÏgs
[
addr
] &ğ~
kIn¢FÏgVis™ed
;

258 
	}
}

263 
INLINE
 
boŞ
 
	$dvmIn¢IsVis™edOrChªged
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

264  (
š¢FÏgs
[
addr
] & (
kIn¢FÏgVis™ed
|
kIn¢FÏgChªged
)) != 0;

265 
	}
}

270 
INLINE
 
boŞ
 
	$dvmIn¢IsInTry
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

271  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgInTry
) != 0;

272 
	}
}

273 
INLINE
 
	$dvmIn¢S‘InTry
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
šTry
)

275 
	`as£¹
(
šTry
);

277 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgInTry
;

280 
	}
}

285 
INLINE
 
boŞ
 
	$dvmIn¢IsB¿nchT¬g‘
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

286  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgB¿nchT¬g‘
) != 0;

287 
	}
}

288 
INLINE
 
	$dvmIn¢S‘B¿nchT¬g‘
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
,

289 
boŞ
 
isB¿nch
)

291 
	`as£¹
(
isB¿nch
);

293 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgB¿nchT¬g‘
;

296 
	}
}

301 
INLINE
 
boŞ
 
	$dvmIn¢IsGcPošt
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

302  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgGcPošt
) != 0;

303 
	}
}

304 
INLINE
 
	$dvmIn¢S‘GcPošt
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
,

305 
boŞ
 
isGcPošt
)

307 
	`as£¹
(
isGcPošt
);

309 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgGcPošt
;

312 
	}
}

318 
Unš™In¡ªûM­
* 
dvmC»©eUnš™In¡ªûM­
(cÚ¡ 
M‘hod
* 
m‘h
,

319 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
ÃwIn¡ªûCouÁ
);

324 
dvmF»eUnš™In¡ªûM­
(
Unš™In¡ªûM­
* 
unš™M­
);

330 
boŞ
 
dvmV”ifyCodeFlow
(
V”if›rD©a
* 
vd©a
);

	@vm/analysis/DexPrepare.cpp

27 
	~"D®vik.h
"

28 
	~"libdex/O±InvoÿtiÚ.h
"

29 
	~"ª®ysis/Regi¡”M­.h
"

30 
	~"ª®ysis/O±imize.h
"

32 
	~<¡ršg
>

34 
	~<libg’.h
>

35 
	~<¡dlib.h
>

36 
	~<uni¡d.h
>

37 
	~<sys/mmª.h
>

38 
	~<sys/¡©.h
>

39 
	~<sys/fe.h
>

40 
	~<sys/¡©.h
>

41 
	~<sys/ty³s.h
>

42 
	~<sys/wa™.h
>

43 
	~<fú.h
>

44 
	~<”ºo.h
>

45 
	~<uni¡d.h
>

46 
	~<zlib.h
>

49 
boŞ
 
»wr™eDex
(
u1
* 
addr
, 
Ën
, boŞ 
doV”ify
, boŞ 
doO±
,

50 
DexCÏssLookup
** 
µCÏssLookup
, 
DvmDex
** 
µDvmDex
);

51 
boŞ
 
lßdAÎCÏs£s
(
DvmDex
* 
pDvmDex
);

52 
v”ifyAndO±imizeCÏs£s
(
DexFe
* 
pDexFe
, 
boŞ
 
doV”ify
,

53 
boŞ
 
doO±
);

54 
v”ifyAndO±imizeCÏss
(
DexFe
* 
pDexFe
, 
CÏssObjeù
* 
şazz
,

55 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
boŞ
 
doV”ify
, boŞ 
doO±
);

56 
upd©eChecksum
(
u1
* 
addr
, 
Ën
, 
DexH—d”
* 
pH—d”
);

57 
wr™eD•’d’c›s
(
fd
, 
u4
 
modWh’
, u4 
üc
);

58 
boŞ
 
wr™eO±D©a
(
fd
, cÚ¡ 
DexCÏssLookup
* 
pCÏssLookup
,\

59 cÚ¡ 
Regi¡”M­Bud”
* 
pRegM­Bud”
);

60 
boŞ
 
compu‹FeChecksum
(
fd
, 
off_t
 
¡¬t
, 
size_t
 
Ëngth
, 
u4
* 
pSum
);

65 
	g¡d
::
¡ršg
 
§ÃDœName
(cÚ¡ 
¡d
::¡ršg& 
·th
) {

66 
size_t
 
n
 = 
·th
.
rfšd
('/');

67 ià(
	gn
 =ğ
¡d
::
¡ršg
::
Åos
) {

70  
	g·th
.
sub¡r
(0, 
n
);

78 
boŞ
 
dœeùÜyIsV®id
(cÚ¡ 
¡d
::
¡ršg
& 
feName
)

80 
¡d
::
¡ršg
 
dœName
(
§ÃDœName
(
feName
));

82 
¡©
 
	gsb
;

83 ià(
¡©
(
dœName
.
c_¡r
(), &
sb
) < 0) {

84 
ALOGE
("Could‚Ù sˆdex cachdœeùÜy '%s': %s", 
dœName
.
c_¡r
(), 
¡»¼Ü
(
”ºo
));

85  
	gçl£
;

88 ià(!
S_ISDIR
(
sb
.
¡_mode
)) {

89 
ALOGE
("Dex cachdœeùÜy i¢'ˆ¨dœeùÜy: %s", 
dœName
.
c_¡r
());

90  
	gçl£
;

93 ià(
acûss
(
dœName
.
c_¡r
(), 
W_OK
) < 0) {

94 
ALOGE
("Dex cachdœeùÜy i¢'ˆwr™abË: %s", 
dœName
.
c_¡r
());

95  
	gçl£
;

98 ià(
acûss
(
dœName
.
c_¡r
(), 
R_OK
) < 0) {

99 
ALOGE
("Dex cachdœeùÜy i¢'ˆ»adabË: %s", 
dœName
.
c_¡r
());

100  
	gçl£
;

103  
	gŒue
;

129 
	$dvmO³nCachedDexFe
(cÚ¡ * 
feName
, cÚ¡ * 
ÿcheFeName
,

130 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
, boŞ* 
pNewFe
, boŞ 
ü—‹IfMissšg
)

132 
fd
, 
cc
;

133 
¡©
 
fdSt
, 
feSt
;

134 
boŞ
 
»adOÆy
 = 
çl£
;

136 *
pNewFe
 = 
çl£
;

138 
»Œy
:

143 
fd
 = 
ü—‹IfMissšg
 ? 
	`İ’
(
ÿcheFeName
, 
O_CREAT
|
O_RDWR
, 0644) : -1;

144 ià(
fd
 < 0) {

145 
fd
 = 
	`İ’
(
ÿcheFeName
, 
O_RDONLY
, 0);

146 ià(
fd
 < 0) {

147 ià(
ü—‹IfMissšg
) {

149 cÚ¡ 
¡d
::
¡ršg
 
	`”ºoSŒšg
(
	`¡»¼Ü
(
”ºo
));

150 ià(
	`dœeùÜyIsV®id
(
ÿcheFeName
)) {

151 
	`ALOGE
("Cª'ˆİ’ dex cachf'%s': %s", 
ÿcheFeName
, 
”ºoSŒšg
.
	`c_¡r
());

154  
fd
;

156 
»adOÆy
 = 
Œue
;

158 
	`fchmod
(
fd
, 0644);

166 
	`ALOGV
("DexOpt:†ocking cache file %s (fd=%d, boot=%d)",

167 
ÿcheFeName
, 
fd
, 
isBoÙ¡¿p
);

168 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

169 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
 | 
LOCK_NB
);

170 ià(
cc
 != 0) {

171 
	`ALOGD
("DexO±: sË•šg oÀæock(%s)", 
ÿcheFeName
);

172 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
);

174 
	`dvmChªgeStus
(
NULL
, 
ŞdStus
);

175 ià(
cc
 != 0) {

176 
	`ALOGE
("Cª'ˆlock dex cach'%s': %d", 
ÿcheFeName
, 
cc
);

177 
	`şo£
(
fd
);

180 
	`ALOGV
("DexOpt:†ocked cache file");

189 
cc
 = 
	`f¡©
(
fd
, &
fdSt
);

190 ià(
cc
 != 0) {

191 
	`ALOGE
("Cª'ˆ¡© o³Àf'%s'", 
ÿcheFeName
);

192 
	`LOGVV
("DexO±: uÆockšg cachf%s", 
ÿcheFeName
);

193 
şo£_ç
;

195 
cc
 = 
	`¡©
(
ÿcheFeName
, &
feSt
);

196 ià(
cc
 != 0 ||

197 
fdSt
.
¡_dev
 !ğ
feSt
.¡_dev || fdSt.
¡_šo
 != fileStat.st_ino)

199 
	`ALOGD
("DexOpt: our open cache file is stale; sleeping‡nd„etrying");

200 
	`LOGVV
("DexO±: uÆockšg cachf%s", 
ÿcheFeName
);

201 
	`æock
(
fd
, 
LOCK_UN
);

202 
	`şo£
(
fd
);

203 
	`u¦“p
(250 * 1000);

204 
»Œy
;

214 ià(
fdSt
.
¡_size
 == 0) {

215 ià(
»adOÆy
) {

216 
	`ALOGW
("DexOpt: file has zero†ength‡nd isn't writable");

217 
şo£_ç
;

219 
cc
 = 
	`dexO±C»©eEm±yH—d”
(
fd
);

220 ià(
cc
 != 0)

221 
şo£_ç
;

222 *
pNewFe
 = 
Œue
;

223 
	`ALOGV
("DexOpt: successfully initialized‚ew cache file");

225 
boŞ
 
ex³ùV”ify
, 
ex³ùO±
;

227 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
) {

228 
ex³ùV”ify
 = 
çl£
;

229 } ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
) {

230 
ex³ùV”ify
 = !
isBoÙ¡¿p
;

232 
ex³ùV”ify
 = 
Œue
;

235 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_NONE
) {

236 
ex³ùO±
 = 
çl£
;

237 } ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
 ||

238 
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_FULL
) {

239 
ex³ùO±
 = 
ex³ùV”ify
;

241 
ex³ùO±
 = 
Œue
;

244 
	`ALOGV
("checking deps,ƒxpecting vfy=%d opt=%d",

245 
ex³ùV”ify
, 
ex³ùO±
);

247 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
Œue
, 
modWh’
, 
üc
,

248 
ex³ùV”ify
, 
ex³ùO±
))

250 ià(
»adOÆy
) {

257 ià(
ü—‹IfMissšg
) {

258 
	`ALOGW
("Cached DEX '%s' (%s) is stale‡nd‚ot writable",

259 
feName
, 
ÿcheFeName
);

261 
şo£_ç
;

285 
	`ALOGD
("ODEX file is stale or bad;„emoving‡nd„etrying (%s)",

286 
ÿcheFeName
);

287 ià(
	`árunÿ‹
(
fd
, 0) != 0) {

288 
	`ALOGW
("Warning: unableoruncate cache file '%s': %s",

289 
ÿcheFeName
, 
	`¡»¼Ü
(
”ºo
));

292 ià(
	`uÆšk
(
ÿcheFeName
) != 0) {

293 
	`ALOGW
("Warning: unableo„emove cache file '%s': %d %s",

294 
ÿcheFeName
, 
”ºo
, 
	`¡»¼Ü
(errno));

297 
	`LOGVV
("DexO±: uÆockšg cachf%s", 
ÿcheFeName
);

298 
	`æock
(
fd
, 
LOCK_UN
);

299 
	`şo£
(
fd
);

300 
»Œy
;

302 
	`ALOGV
("DexOpt: good deps in cache file");

306 
	`as£¹
(
fd
 >= 0);

307  
fd
;

309 
şo£_ç
:

310 
	`æock
(
fd
, 
LOCK_UN
);

311 
	`şo£
(
fd
);

313 
	}
}

320 
boŞ
 
	$dvmUÆockCachedDexFe
(
fd
)

322 
	`LOGVV
("DexO±: uÆockšg cachffd=%d", 
fd
);

323  (
	`æock
(
fd
, 
LOCK_UN
) == 0);

324 
	}
}

351 
boŞ
 
	$dvmO±imizeDexFe
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

352 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
)

354 cÚ¡ * 
Ï¡P¬t
 = 
	`¡¼chr
(
feName
, '/');

355 ià(
Ï¡P¬t
 !ğ
NULL
)

356 
Ï¡P¬t
++;

358 
Ï¡P¬t
 = 
feName
;

360 
	`ALOGD
("DexO±: --- BEGIN '%s' (boÙ¡¿p=%dè---", 
Ï¡P¬t
, 
isBoÙ¡¿p
);

362 
pid_t
 
pid
;

368 ià(
gDvm
.
İtimizšg
) {

369 
	`ALOGW
("Rejeùšg„ecursivİtimiz©iÚ‡‰em± oÀ'%s'", 
feName
);

370  
çl£
;

373 
pid
 = 
	`fÜk
();

374 ià(
pid
 == 0) {

375 cÚ¡ 
kU£V®gršd
 = 0;

376 cÚ¡ * 
kDexO±Bš
 = "/bin/dexopt";

377 cÚ¡ * 
kV®gršd”
 = "/usr/bin/valgrind";

378 cÚ¡ 
kFixedArgCouÁ
 = 10;

379 cÚ¡ 
kV®gršdArgCouÁ
 = 5;

380 cÚ¡ 
kMaxIÁL’
 = 12;

381 
bıSize
 = 
	`dvmG‘BoÙP©hSize
();

382 
¬gc
 = 
kFixedArgCouÁ
 + 
bıSize


383 + (
kV®gršdArgCouÁ
 * 
kU£V®gršd
);

384 cÚ¡ * 
¬gv
[
¬gc
+1];

385 
v®ues
[
¬gc
][
kMaxIÁL’
];

386 * 
execFe
;

387 cÚ¡ * 
ªdroidRoÙ
;

388 
æags
;

391 
	`£gid
(0, 0);

394 
ªdroidRoÙ
 = 
	`g‘’v
("ANDROID_ROOT");

395 ià(
ªdroidRoÙ
 =ğ
NULL
) {

396 
	`ALOGW
("ANDROID_ROOT‚ot set, defaultingo /system");

397 
ªdroidRoÙ
 = "/system";

399 
execFe
 = (*)
	`®loÿ
(
	`¡¾’
(
ªdroidRoÙ
è+ sŒËn(
kDexO±Bš
) + 1);

400 
	`¡rıy
(
execFe
, 
ªdroidRoÙ
);

401 
	`¡rÿt
(
execFe
, 
kDexO±Bš
);

406 
curArg
 = 0;

408 ià(
kU£V®gršd
) {

410 
¬gv
[
curArg
++] = (*)
kV®gršd”
;

411 
¬gv
[
curArg
++] = "--tool=memcheck";

412 
¬gv
[
curArg
++] = "--leak-check=yes";

413 
¬gv
[
curArg
++] = "--leak-resolution=med";

414 
¬gv
[
curArg
++] = "--num-callers=16";

415 
	`as£¹
(
curArg
 =ğ
kV®gršdArgCouÁ
);

417 
¬gv
[
curArg
++] = 
execFe
;

419 
¬gv
[
curArg
++] = "--dex";

421 
	`¥rštf
(
v®ues
[2], "%d", 
DALVIK_VM_BUILD
);

422 
¬gv
[
curArg
++] = 
v®ues
[2];

424 
	`¥rštf
(
v®ues
[3], "%d", 
fd
);

425 
¬gv
[
curArg
++] = 
v®ues
[3];

427 
	`¥rštf
(
v®ues
[4], "%d", (è
dexOff£t
);

428 
¬gv
[
curArg
++] = 
v®ues
[4];

430 
	`¥rštf
(
v®ues
[5], "%d", (è
dexL’gth
);

431 
¬gv
[
curArg
++] = 
v®ues
[5];

433 
¬gv
[
curArg
++] = (*)
feName
;

435 
	`¥rštf
(
v®ues
[7], "%d", (è
modWh’
);

436 
¬gv
[
curArg
++] = 
v®ues
[7];

438 
	`¥rštf
(
v®ues
[8], "%d", (è
üc
);

439 
¬gv
[
curArg
++] = 
v®ues
[8];

441 
æags
 = 0;

442 ià(
gDvm
.
dexO±Mode
 !ğ
OPTIMIZE_MODE_NONE
) {

443 
æags
 |ğ
DEXOPT_OPT_ENABLED
;

444 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_ALL
)

445 
æags
 |ğ
DEXOPT_OPT_ALL
;

447 ià(
gDvm
.
şassV”ifyMode
 !ğ
VERIFY_MODE_NONE
) {

448 
æags
 |ğ
DEXOPT_VERIFY_ENABLED
;

449 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_ALL
)

450 
æags
 |ğ
DEXOPT_VERIFY_ALL
;

452 ià(
isBoÙ¡¿p
)

453 
æags
 |ğ
DEXOPT_IS_BOOTSTRAP
;

454 ià(
gDvm
.
g’”©eRegi¡”M­s
)

455 
æags
 |ğ
DEXOPT_GEN_REGISTER_MAPS
;

456 
	`¥rštf
(
v®ues
[9], "%d", 
æags
);

457 
¬gv
[
curArg
++] = 
v®ues
[9];

459 
	`as£¹
(((!
kU£V®gršd
 && 
curArg
 =ğ
kFixedArgCouÁ
) ||

460 ((
kU£V®gršd
 && 
curArg
 =ğ
kFixedArgCouÁ
+
kV®gršdArgCouÁ
))));

462 
CÏssP©hEÁry
* 
ıe
;

463 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

464 
¬gv
[
curArg
++] = 
ıe
->
feName
;

466 
	`as£¹
(
curArg
 =ğ
¬gc
);

468 
¬gv
[
curArg
] = 
NULL
;

470 ià(
kU£V®gršd
)

471 
	`execv
(
kV®gršd”
, 
cÚ¡_ÿ¡
<**>(
¬gv
));

473 
	`execv
(
execFe
, 
cÚ¡_ÿ¡
<**>(
¬gv
));

475 
	`ALOGE
("execv '%s'% çed: %s", 
execFe
,

476 
kU£V®gršd
 ? " [v®gršd]" : "", 
	`¡»¼Ü
(
”ºo
));

477 
	`ex™
(1);

479 
	`ALOGV
("DexO±: wa™šg fÜ v”ify+İt,…id=%d", (è
pid
);

480 
¡©us
;

481 
pid_t
 
gÙPid
;

487 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

488 
Œue
) {

489 
gÙPid
 = 
	`wa™pid
(
pid
, &
¡©us
, 0);

490 ià(
gÙPid
 =ğ-1 && 
”ºo
 =ğ
EINTR
) {

491 
	`ALOGD
("waitpid interrupted,„etrying");

496 
	`dvmChªgeStus
(
NULL
, 
ŞdStus
);

497 ià(
gÙPid
 !ğ
pid
) {

498 
	`ALOGE
("waitpid failed: wanted %d, got %d: %s",

499 (è
pid
, (è
gÙPid
, 
	`¡»¼Ü
(
”ºo
));

500  
çl£
;

503 ià(
	`WIFEXITED
(
¡©us
è&& 
	`WEXITSTATUS
(status) == 0) {

504 
	`ALOGD
("DexO±: --- END '%s' (sucûssè---", 
Ï¡P¬t
);

505  
Œue
;

507 
	`ALOGW
("DexOpt: --- END '%s' --- status=0x%04x,…rocess failed",

508 
Ï¡P¬t
, 
¡©us
);

509  
çl£
;

512 
	}
}

527 
boŞ
 
	$dvmCÚtšueO±imiz©iÚ
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

528 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
)

530 
DexCÏssLookup
* 
pCÏssLookup
 = 
NULL
;

531 
Regi¡”M­Bud”
* 
pRegM­Bud”
 = 
NULL
;

533 
	`as£¹
(
gDvm
.
İtimizšg
);

535 
	`ALOGV
("CÚtšušg o±imiz©iÚ (%s, isb=%d)", 
feName
, 
isBoÙ¡¿p
);

537 
	`as£¹
(
dexOff£t
 >= 0);

540 ià(
dexL’gth
 < (è(
DexH—d”
)) {

541 
	`ALOGE
("too smallo be DEX");

542  
çl£
;

544 ià(
dexOff£t
 < (è(
DexO±H—d”
)) {

545 
	`ALOGE
("notƒnough„oom for opt header");

546  
çl£
;

549 
boŞ
 
»suÉ
 = 
çl£
;

556 
gDvm
.
İtimizšgBoÙ¡¿pCÏss
 = 
isBoÙ¡¿p
;

564 
boŞ
 
sucûss
;

565 * 
m­Addr
;

566 
m­Addr
 = 
	`mm­
(
NULL
, 
dexOff£t
 + 
dexL’gth
, 
PROT_READ
|
PROT_WRITE
,

567 
MAP_SHARED
, 
fd
, 0);

568 ià(
m­Addr
 =ğ
MAP_FAILED
) {

569 
	`ALOGE
("uÇbËØmm­ DEX cache: %s", 
	`¡»¼Ü
(
”ºo
));

570 
ba
;

573 
boŞ
 
doV”ify
, 
doO±
;

574 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
) {

575 
doV”ify
 = 
çl£
;

576 } ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
) {

577 
doV”ify
 = !
gDvm
.
İtimizšgBoÙ¡¿pCÏss
;

579 
doV”ify
 = 
Œue
;

582 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_NONE
) {

583 
doO±
 = 
çl£
;

584 } ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
 ||

585 
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_FULL
) {

586 
doO±
 = 
doV”ify
;

588 
doO±
 = 
Œue
;

602 
sucûss
 = 
	`»wr™eDex
(((
u1
*è
m­Addr
è+ 
dexOff£t
, 
dexL’gth
,

603 
doV”ify
, 
doO±
, &
pCÏssLookup
, 
NULL
);

605 ià(
sucûss
) {

606 
DvmDex
* 
pDvmDex
 = 
NULL
;

607 
u1
* 
dexAddr
 = ((u1*è
m­Addr
è+ 
dexOff£t
;

609 ià(
	`dvmDexFeO³nP¬tŸl
(
dexAddr
, 
dexL’gth
, &
pDvmDex
) != 0) {

610 
	`ALOGE
("Unableo create DexFile");

611 
sucûss
 = 
çl£
;

618 ià(
gDvm
.
g’”©eRegi¡”M­s
) {

619 
pRegM­Bud”
 = 
	`dvmG’”©eRegi¡”M­s
(
pDvmDex
);

620 ià(
pRegM­Bud”
 =ğ
NULL
) {

621 
	`ALOGE
("Failed generating„egister maps");

622 
sucûss
 = 
çl£
;

626 
DexH—d”
* 
pH—d”
 = (DexH—d”*)
pDvmDex
->pHeader;

627 
	`upd©eChecksum
(
dexAddr
, 
dexL’gth
, 
pH—d”
);

629 
	`dvmDexFeF»e
(
pDvmDex
);

634 ià(
	`msync
(
m­Addr
, 
dexOff£t
 + 
dexL’gth
, 
MS_SYNC
) != 0) {

635 
	`ALOGW
("msynøçed: %s", 
	`¡»¼Ü
(
”ºo
));

645 ià(
	`munm­
(
m­Addr
, 
dexOff£t
 + 
dexL’gth
) != 0) {

646 
	`ALOGE
("munm­ faed: %s", 
	`¡»¼Ü
(
”ºo
));

647 
ba
;

651 ià(!
sucûss
)

652 
ba
;

656 
off_t
 
d•sOff£t
, 
İtOff£t
, 
’dOff£t
, 
adjOff£t
;

657 
d•sL’gth
, 
İtL’gth
;

658 
u4
 
İtChecksum
;

660 
d•sOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

661 ià(
d•sOff£t
 < 0) {

662 
	`ALOGE
("l£ekØEOF faed: %s", 
	`¡»¼Ü
(
”ºo
));

663 
ba
;

665 
adjOff£t
 = (
d•sOff£t
 + 7) & ~(0x07);

666 ià(
adjOff£t
 !ğ
d•sOff£t
) {

667 
	`ALOGV
("Adjusting deps start from %do %d",

668 (è
d•sOff£t
, (è
adjOff£t
);

669 
d•sOff£t
 = 
adjOff£t
;

670 
	`l£ek
(
fd
, 
d•sOff£t
, 
SEEK_SET
);

676 ià(
	`wr™eD•’d’c›s
(
fd
, 
modWh’
, 
üc
) != 0) {

677 
	`ALOGW
("Failed writing dependencies");

678 
ba
;

682 
İtOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

683 
d•sL’gth
 = 
İtOff£t
 - 
d•sOff£t
;

685 
adjOff£t
 = (
İtOff£t
 + 7) & ~(0x07);

686 ià(
adjOff£t
 !ğ
İtOff£t
) {

687 
	`ALOGV
("Adjusting opt start from %do %d",

688 (è
İtOff£t
, (è
adjOff£t
);

689 
İtOff£t
 = 
adjOff£t
;

690 
	`l£ek
(
fd
, 
İtOff£t
, 
SEEK_SET
);

696 ià(!
	`wr™eO±D©a
(
fd
, 
pCÏssLookup
, 
pRegM­Bud”
)) {

697 
	`ALOGW
("Failed writing opt data");

698 
ba
;

701 
’dOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

702 
İtL’gth
 = 
’dOff£t
 - 
İtOff£t
;

705 ià(!
	`compu‹FeChecksum
(
fd
, 
d•sOff£t
,

706 (
İtOff£t
+
İtL’gth
è- 
d•sOff£t
, &
İtChecksum
))

708 
ba
;

715 
DexO±H—d”
 
İtHdr
;

716 
	`mem£t
(&
İtHdr
, 0xff, (optHdr));

717 
	`memıy
(
İtHdr
.
magic
, 
DEX_OPT_MAGIC
, 4);

718 
	`memıy
(
İtHdr
.
magic
+4, 
DEX_OPT_MAGIC_VERS
, 4);

719 
İtHdr
.
dexOff£t
 = (
u4
) dexOffset;

720 
İtHdr
.
dexL’gth
 = (
u4
) dexLength;

721 
İtHdr
.
d•sOff£t
 = (
u4
) depsOffset;

722 
İtHdr
.
d•sL’gth
 = (
u4
) depsLength;

723 
İtHdr
.
İtOff£t
 = (
u4
) optOffset;

724 
İtHdr
.
İtL’gth
 = (
u4
) optLength;

725 #ià
__BYTE_ORDER
 !ğ
__LITTLE_ENDIAN


726 
İtHdr
.
æags
 = 
DEX_OPT_FLAG_BIG
;

728 
İtHdr
.
æags
 = 0;

730 
İtHdr
.
checksum
 = 
İtChecksum
;

732 
	`fsync
(
fd
);

734 
	`l£ek
(
fd
, 0, 
SEEK_SET
);

735 ià(
	`sysWr™eFuÎy
(
fd
, &
İtHdr
, (optHdr), "DexOpt opt header") != 0)

736 
ba
;

738 
	`ALOGV
("Successfully wrote DEX header");

739 
»suÉ
 = 
Œue
;

743 
ba
:

744 
	`dvmF»eRegi¡”M­Bud”
(
pRegM­Bud”
);

745 
	`ä“
(
pCÏssLookup
);

746  
»suÉ
;

747 
	}
}

756 
boŞ
 
	$dvmP»·»DexInMemÜy
(
u1
* 
addr
, 
size_t
 
Ën
, 
DvmDex
** 
µDvmDex
)

758 
DexCÏssLookup
* 
pCÏssLookup
 = 
NULL
;

771 ià(!
	`»wr™eDex
(
addr
, 
Ën
, 
çl£
, f®£, &
pCÏssLookup
, 
µDvmDex
)) {

772  
çl£
;

775 (*
µDvmDex
)->
pDexFe
->
pCÏssLookup
 =…ClassLookup;

777  
Œue
;

778 
	}
}

794 
boŞ
 
	$»wr™eDex
(
u1
* 
addr
, 
Ën
, 
boŞ
 
doV”ify
, boŞ 
doO±
,

795 
DexCÏssLookup
** 
µCÏssLookup
, 
DvmDex
** 
µDvmDex
)

797 
DexCÏssLookup
* 
pCÏssLookup
 = 
NULL
;

798 
u8
 
´•Wh’
, 
lßdWh’
, 
v”ifyO±Wh’
;

799 
DvmDex
* 
pDvmDex
 = 
NULL
;

800 
boŞ
 
»suÉ
 = 
çl£
;

801 cÚ¡ * 
msgSŒ
 = "???";

804 ià(
	`dexSw­AndV”ify
(
addr
, 
Ën
) != 0)

805 
ba
;

811 ià(
	`dvmDexFeO³nP¬tŸl
(
addr
, 
Ën
, &
pDvmDex
) != 0) {

812 
	`ALOGE
("Unableo create DexFile");

813 
ba
;

823 
pCÏssLookup
 = 
	`dexC»©eCÏssLookup
(
pDvmDex
->
pDexFe
);

824 ià(
pCÏssLookup
 =ğ
NULL
)

825 
ba
;

826 
pDvmDex
->
pDexFe
->
pCÏssLookup
 =…ClassLookup;

832 ià(!
doV”ify
 && !
doO±
) {

833 
»suÉ
 = 
Œue
;

834 
ba
;

837 
´•Wh’
 = 
	`dvmG‘R–©iveTimeU£c
();

843 ià(!
	`lßdAÎCÏs£s
(
pDvmDex
))

844 
ba
;

845 
lßdWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

854 ià(!
	`dvmC»©eIÆšeSubsTabË
())

855 
ba
;

864 
	`v”ifyAndO±imizeCÏs£s
(
pDvmDex
->
pDexFe
, 
doV”ify
, 
doO±
);

865 
v”ifyO±Wh’
 = 
	`dvmG‘R–©iveTimeU£c
();

867 ià(
doV”ify
 && 
doO±
)

868 
msgSŒ
 = "verify+opt";

869 ià(
doV”ify
)

870 
msgSŒ
 = "verify";

871 ià(
doO±
)

872 
msgSŒ
 = "opt";

873 
	`ALOGD
("DexOpt:†oad %dms, %s %dms, %d bytes",

874 (è(
lßdWh’
 - 
´•Wh’
) / 1000,

875 
msgSŒ
,

876 (è(
v”ifyO±Wh’
 - 
lßdWh’
) / 1000,

877 
gDvm
.
pBoÙLßd”AÎoc
->
curOff£t
);

879 
»suÉ
 = 
Œue
;

881 
ba
:

886 ià(
pDvmDex
 !ğ
NULL
) {

888 
pDvmDex
->
pDexFe
->
pCÏssLookup
 = 
NULL
;

891 ià(
µDvmDex
 =ğ
NULL
 || !
»suÉ
) {

892 
	`dvmDexFeF»e
(
pDvmDex
);

894 *
µDvmDex
 = 
pDvmDex
;

897 ià(
µCÏssLookup
 =ğ
NULL
 || !
»suÉ
) {

898 
	`ä“
(
pCÏssLookup
);

900 *
µCÏssLookup
 = 
pCÏssLookup
;

903  
»suÉ
;

904 
	}
}

924 
boŞ
 
	$lßdAÎCÏs£s
(
DvmDex
* 
pDvmDex
)

926 
u4
 
couÁ
 = 
pDvmDex
->
pDexFe
->
pH—d”
->
şassDefsSize
;

927 
u4
 
idx
;

928 
lßded
 = 0;

930 
	`ALOGV
("DexO±: +++ryšgØlßd %d cÏs£s", 
couÁ
);

932 
	`dvmS‘BoÙP©hExŒaDex
(
pDvmDex
);

943 ià(!
	`dvmFšdRequœedCÏs£sAndMemb”s
()) {

944  
çl£
;

956 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgCÏss
)) {

957 
	`ALOGE
("ERROR: failedo initializehe class Class!");

958  
çl£
;

961 
idx
 = 0; idx < 
couÁ
; idx++) {

962 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

963 cÚ¡ * 
şassDesütÜ
;

964 
CÏssObjeù
* 
ÃwCÏss
;

966 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDvmDex
->
pDexFe
, 
idx
);

967 
şassDesütÜ
 =

968 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pCÏssDef
->
şassIdx
);

970 
	`ALOGV
("+++†ßdšg '%s'", 
şassDesütÜ
);

973 
ÃwCÏss
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
şassDesütÜ
);

974 ià(
ÃwCÏss
 =ğ
NULL
) {

975 
	`ALOGV
("DexO±: faed†ßdšg '%s'", 
şassDesütÜ
);

976 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

977 } ià(
ÃwCÏss
->
pDvmDex
 !=…DvmDex) {

983 
	`ALOGD
("DexOpt: '%s' has‡nƒarlier definition; blocking out",

984 
şassDesütÜ
);

985 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
CLASS_MULTIPLE_DEFS
);

987 
lßded
++;

990 
	`ALOGV
("DexO±: +++ sucûssfuÎy†ßded %d cÏs£s", 
lßded
);

992 
	`dvmS‘BoÙP©hExŒaDex
(
NULL
);

993  
Œue
;

994 
	}
}

1000 
	$v”ifyAndO±imizeCÏs£s
(
DexFe
* 
pDexFe
, 
boŞ
 
doV”ify
,

1001 
boŞ
 
doO±
)

1003 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

1004 
u4
 
idx
;

1006 
idx
 = 0; idx < 
couÁ
; idx++) {

1007 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1008 cÚ¡ * 
şassDesütÜ
;

1009 
CÏssObjeù
* 
şazz
;

1011 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

1012 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

1015 
şazz
 = 
	`dvmLookupCÏss
(
şassDesütÜ
, 
NULL
, 
çl£
);

1016 ià(
şazz
 !ğ
NULL
) {

1017 
	`v”ifyAndO±imizeCÏss
(
pDexFe
, 
şazz
, 
pCÏssDef
, 
doV”ify
, 
doO±
);

1021 
	`ALOGV
("DexOpt:‚ot optimizing unavailable class '%s'",

1022 
şassDesütÜ
);

1026 #ifdeà
VERIFIER_STATS


1027 
	`ALOGI
("Verifier stats:");

1028 
	`ALOGI
(" m‘hod examšed : %u", 
gDvm
.
v”if›rSts
.
m‘hodsExamšed
);

1029 
	`ALOGI
(" mÚ™Ü-’‹¸m‘hod  : %u", 
gDvm
.
v”if›rSts
.
mÚEÁ”M‘hods
);

1030 
	`ALOGI
(" in¡ruùiÚ examšed : %u", 
gDvm
.
v”if›rSts
.
š¡rsExamšed
);

1031 
	`ALOGI
(" in¡ruùiÚ »-examšed: %u", 
gDvm
.
v”if›rSts
.
š¡rsR“xamšed
);

1032 
	`ALOGI
(" cİyšg oà»gi¡” s‘s: %u", 
gDvm
.
v”if›rSts
.
cİyRegCouÁ
);

1033 
	`ALOGI
(" m”gšg oà»gi¡” s‘s: %u", 
gDvm
.
v”if›rSts
.
m”geRegCouÁ
);

1034 
	`ALOGI
(" ...th© cau£d chªge  : %u", 
gDvm
.
v”if›rSts
.
m”geRegChªged
);

1035 
	`ALOGI
(" unš™ s—rche  : %u", 
gDvm
.
v”if›rSts
.
unš™S—rches
);

1036 
	`ALOGI
(" max memÜy„equœed : %u", 
gDvm
.
v”if›rSts
.
bigge¡AÎoc
);

1038 
	}
}

1043 
	$v”ifyAndO±imizeCÏss
(
DexFe
* 
pDexFe
, 
CÏssObjeù
* 
şazz
,

1044 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
boŞ
 
doV”ify
, boŞ 
doO±
)

1046 cÚ¡ * 
şassDesütÜ
;

1047 
boŞ
 
v”if›d
 = 
çl£
;

1049 ià(
şazz
->
pDvmDex
->
pDexFe
 !=…DexFile) {

1057 
	`ALOGD
("DexOpt:‚ot verifying/optimizing '%s': multiple definitions",

1058 
şazz
->
desütÜ
);

1062 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

1067 ià(
doV”ify
) {

1068 ià(
	`dvmV”ifyCÏss
(
şazz
)) {

1074 
	`as£¹
((
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
) ==

1075 
pCÏssDef
->
acûssFÏgs
);

1076 ((
DexCÏssDef
*)
pCÏssDef
)->
acûssFÏgs
 |ğ
CLASS_ISPREVERIFIED
;

1077 
v”if›d
 = 
Œue
;

1080 
	`ALOGV
("DexO±: '%s' faed v”ifiÿtiÚ", 
şassDesütÜ
);

1084 ià(
doO±
) {

1085 
boŞ
 
ÃedV”ify
 = (
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
 ||

1086 
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_FULL
);

1087 ià(!
v”if›d
 && 
ÃedV”ify
) {

1088 
	`ALOGV
("DexOpt:‚ot optimizing '%s':‚ot verified",

1089 
şassDesütÜ
);

1091 
	`dvmO±imizeCÏss
(
şazz
, 
çl£
);

1094 ((
DexCÏssDef
*)
pCÏssDef
)->
acûssFÏgs
 |ğ
CLASS_ISOPTIMIZED
;

1097 
	}
}

1103 cÚ¡ * 
	$g‘CacheFeName
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

1105 
ıe
->
kšd
) {

1106 
kC³J¬
:

1107  
	`dvmG‘J¬FeCacheFeName
((
J¬Fe
*è
ıe
->
±r
);

1108 
kC³Dex
:

1109  
	`dvmG‘RawDexFeCacheFeName
((
RawDexFe
*è
ıe
->
±r
);

1111 
	`ALOGE
("DexO±: uÃx³ùed c³ kšd %d", 
ıe
->
kšd
);

1112 
	`dvmAbÜt
();

1113  
NULL
;

1115 
	}
}

1120 cÚ¡ 
u1
* 
	$g‘SigÇtu»
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

1122 
DvmDex
* 
pDvmDex
;

1124 
ıe
->
kšd
) {

1125 
kC³J¬
:

1126 
pDvmDex
 = 
	`dvmG‘J¬FeDex
((
J¬Fe
*è
ıe
->
±r
);

1128 
kC³Dex
:

1129 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
((
RawDexFe
*è
ıe
->
±r
);

1132 
	`ALOGE
("uÃx³ùed c³ kšd %d", 
ıe
->
kšd
);

1133 
	`dvmAbÜt
();

1134 
pDvmDex
 = 
NULL
;

1137 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

1138  
pDvmDex
->
pDexFe
->
pH—d”
->
sigÇtu»
;

1139 
	}
}

1155 cÚ¡ 
size_t
 
	gkMšD•Size
 = 4 * 4;

1156 cÚ¡ 
size_t
 
	gkMaxD•Size
 = 4 * 4 + 2048;

1170 
boŞ
 
	$dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
boŞ
 
sourûAva
, 
u4
 
modWh’
,

1171 
u4
 
üc
, 
boŞ
 
ex³ùV”ify
, boŞ 
ex³ùO±
)

1173 
DexO±H—d”
 
İtHdr
;

1174 
u1
* 
d•D©a
 = 
NULL
;

1175 cÚ¡ 
u1
* 
magic
;

1176 
off_t
 
po¢
;

1177 
»suÉ
 = 
çl£
;

1178 
ssize_t
 
aùu®
;

1184 ià(
	`l£ek
(
fd
, 0, 
SEEK_SET
) != 0) {

1185 
	`ALOGE
("DexO±: faedØ£ekØ¡¬ˆoàfe: %s", 
	`¡»¼Ü
(
”ºo
));

1186 
ba
;

1193 
aùu®
 = 
	`»ad
(
fd
, &
İtHdr
, (optHdr));

1194 ià(
aùu®
 < 0) {

1195 
	`ALOGE
("DexO±: faed„—dšg o± h—d”: %s", 
	`¡»¼Ü
(
”ºo
));

1196 
ba
;

1197 } ià(
aùu®
 !ğ(
İtHdr
)) {

1198 
	`ALOGE
("DexOpt: failed„eading opt header (got %d of %zd)",

1199 (è
aùu®
, (
İtHdr
));

1200 
ba
;

1203 
magic
 = 
İtHdr
.magic;

1204 ià(
	`memcmp
(
magic
, 
DEX_MAGIC
, 4) == 0) {

1206 
	`ALOGD
("DexOpt:ƒxpected optimized DEX, found unoptimized");

1207 
ba
;

1208 } ià(
	`memcmp
(
magic
, 
DEX_OPT_MAGIC
, 4) != 0) {

1210 
	`ALOGD
("DexOpt: incorrect opt magic‚umber (0x%02x %02x %02x %02x)",

1211 
magic
[0], magic[1], magic[2], magic[3]);

1212 
ba
;

1214 ià(
	`memcmp
(
magic
+4, 
DEX_OPT_MAGIC_VERS
, 4) != 0) {

1215 
	`ALOGW
("DexOpt: stale opt version (0x%02x %02x %02x %02x)",

1216 
magic
[4], magic[5], magic[6], magic[7]);

1217 
ba
;

1219 ià(
İtHdr
.
d•sL’gth
 < 
kMšD•Size
 || o±Hdr.d•sL’gth > 
kMaxD•Size
) {

1220 
	`ALOGW
("DexO±: weœd d• Ëngth %d, bašg", 
İtHdr
.
d•sL’gth
);

1221 
ba
;

1230 cÚ¡ 
u4
 
m©chMask
 = 
DEX_OPT_FLAG_BIG
;

1231 
u4
 
ex³ùedFÏgs
 = 0;

1232 #ià
__BYTE_ORDER
 !ğ
__LITTLE_ENDIAN


1233 
ex³ùedFÏgs
 |ğ
DEX_OPT_FLAG_BIG
;

1235 ià((
ex³ùedFÏgs
 & 
m©chMask
è!ğ(
İtHdr
.
æags
 & matchMask)) {

1236 
	`ALOGI
("DexOpt: header flag mismatch (0x%02x vs 0x%02x, mask=0x%02x)",

1237 
ex³ùedFÏgs
, 
İtHdr
.
æags
, 
m©chMask
);

1238 
ba
;

1242 
po¢
 = 
	`l£ek
(
fd
, 
İtHdr
.
d•sOff£t
, 
SEEK_SET
);

1243 ià(
po¢
 < 0) {

1244 
	`ALOGW
("DexO±: s“kØd• çed: %s", 
	`¡»¼Ü
(
”ºo
));

1245 
ba
;

1251 
d•D©a
 = (
u1
*è
	`m®loc
(
İtHdr
.
d•sL’gth
);

1252 ià(
d•D©a
 =ğ
NULL
) {

1253 
	`ALOGW
("DexOpt: unableo‡llocate %d bytes for deps",

1254 
İtHdr
.
d•sL’gth
);

1255 
ba
;

1257 
aùu®
 = 
	`»ad
(
fd
, 
d•D©a
, 
İtHdr
.
d•sL’gth
);

1258 ià(
aùu®
 < 0) {

1259 
	`ALOGW
("DexO±: faed„—dšg d•s: %s", 
	`¡»¼Ü
(
”ºo
));

1260 
ba
;

1261 } ià(
aùu®
 !ğ(
ssize_t
è
İtHdr
.
d•sL’gth
) {

1262 
	`ALOGW
("DexOpt: failed„eading deps: got %d of %d",

1263 (è
aùu®
, 
İtHdr
.
d•sL’gth
);

1264 
ba
;

1270 cÚ¡ 
u1
* 
±r
;

1271 
u4
 
v®
;

1273 
±r
 = 
d•D©a
;

1274 
v®
 = 
	`»ad4LE
(&
±r
);

1275 ià(
sourûAva
 && 
v®
 !ğ
modWh’
) {

1276 
	`ALOGI
("DexOpt: source file modime mismatch (%08x vs %08x)",

1277 
v®
, 
modWh’
);

1278 
ba
;

1280 
v®
 = 
	`»ad4LE
(&
±r
);

1281 ià(
sourûAva
 && 
v®
 !ğ
üc
) {

1282 
	`ALOGI
("DexO±: sourû fCRC mism©ch (%08x v %08x)", 
v®
, 
üc
);

1283 
ba
;

1285 
v®
 = 
	`»ad4LE
(&
±r
);

1286 ià(
v®
 !ğ
DALVIK_VM_BUILD
) {

1287 
	`ALOGD
("DexOpt: VM build version mismatch (%d vs %d)",

1288 
v®
, 
DALVIK_VM_BUILD
);

1289 
ba
;

1296 
CÏssP©hEÁry
* 
ıe
;

1297 
u4
 
numD•s
;

1299 
numD•s
 = 
	`»ad4LE
(&
±r
);

1300 
	`ALOGV
("+++ DexO±:‚umD• ğ%d", 
numD•s
);

1301 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

1302 cÚ¡ * 
ÿcheFeName
 =

1303 
	`dvmP©hToAbsŞu‹PÜtiÚ
(
	`g‘CacheFeName
(
ıe
));

1304 
	`as£¹
(
ÿcheFeName
 !ğ
NULL
);

1306 cÚ¡ 
u1
* 
sigÇtu»
 = 
	`g‘SigÇtu»
(
ıe
);

1307 
size_t
 
Ën
 = 
	`¡¾’
(
ÿcheFeName
) +1;

1308 
u4
 
¡ÜedSŒL’
;

1310 ià(
numD•s
 == 0) {

1312 
	`ALOGI
("DexOpt:‚ot‡ll deps„epresented");

1313 
ba
;

1316 
¡ÜedSŒL’
 = 
	`»ad4LE
(&
±r
);

1317 ià(
Ën
 !ğ
¡ÜedSŒL’
 ||

1318 
	`¡rcmp
(
ÿcheFeName
, (cÚ¡ *è
±r
) != 0)

1320 
	`ALOGI
("DexOpt: mismatch dep‚ame: '%s' vs. '%s'",

1321 
ÿcheFeName
, 
±r
);

1322 
ba
;

1325 
±r
 +ğ
¡ÜedSŒL’
;

1327 ià(
	`memcmp
(
sigÇtu»
, 
±r
, 
kSHA1Dige¡L’
) != 0) {

1328 
	`ALOGI
("DexO±: mism©ch d• sigÇtu» fÜ '%s'", 
ÿcheFeName
);

1329 
ba
;

1331 
±r
 +ğ
kSHA1Dige¡L’
;

1333 
	`ALOGV
("DexO±: d• m©ch oÀ'%s'", 
ÿcheFeName
);

1335 
numD•s
--;

1338 ià(
numD•s
 != 0) {

1340 
	`ALOGI
("DexOpt: Some deps went‡way");

1341 
ba
;

1345 ià(
±r
 !ğ
d•D©a
 + 
İtHdr
.
d•sL’gth
) {

1346 
	`ALOGW
("DexOpt: Spurious dep data? %d vs %d",

1347 (è(
±r
 - 
d•D©a
), 
İtHdr
.
d•sL’gth
);

1348 
	`as£¹
(
çl£
);

1351 
»suÉ
 = 
Œue
;

1353 
ba
:

1354 
	`ä“
(
d•D©a
);

1355  
»suÉ
;

1356 
	}
}

1361 
	$wr™eD•’d’c›s
(
fd
, 
u4
 
modWh’
, u4 
üc
)

1363 
u1
* 
buf
 = 
NULL
;

1364 
»suÉ
 = -1;

1365 
ssize_t
 
bufL’
;

1366 
CÏssP©hEÁry
* 
ıe
;

1367 
numD•s
;

1372 
numD•s
 = 0;

1373 
bufL’
 = 0;

1374 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

1375 cÚ¡ * 
ÿcheFeName
 =

1376 
	`dvmP©hToAbsŞu‹PÜtiÚ
(
	`g‘CacheFeName
(
ıe
));

1377 
	`as£¹
(
ÿcheFeName
 !ğ
NULL
);

1379 
	`ALOGV
("+++ DexO±: found d• '%s'", 
ÿcheFeName
);

1381 
numD•s
++;

1382 
bufL’
 +ğ
	`¡¾’
(
ÿcheFeName
) +1;

1385 
bufL’
 +ğ4*4 + 
numD•s
 * (4+
kSHA1Dige¡L’
);

1387 
buf
 = (
u1
*)
	`m®loc
(
bufL’
);

1389 
	`£t4LE
(
buf
+0, 
modWh’
);

1390 
	`£t4LE
(
buf
+4, 
üc
);

1391 
	`£t4LE
(
buf
+8, 
DALVIK_VM_BUILD
);

1392 
	`£t4LE
(
buf
+12, 
numD•s
);

1398 
u1
* 
±r
 = 
buf
 + 4*4;

1399 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

1400 cÚ¡ * 
ÿcheFeName
 =

1401 
	`dvmP©hToAbsŞu‹PÜtiÚ
(
	`g‘CacheFeName
(
ıe
));

1402 
	`as£¹
(
ÿcheFeName
 !ğ
NULL
);

1404 cÚ¡ 
u1
* 
sigÇtu»
 = 
	`g‘SigÇtu»
(
ıe
);

1405 
Ën
 = 
	`¡¾’
(
ÿcheFeName
) +1;

1407 ià(
±r
 + 4 + 
Ën
 + 
kSHA1Dige¡L’
 > 
buf
 + 
bufL’
) {

1408 
	`ALOGE
("DexOpt: overran buffer");

1409 
	`dvmAbÜt
();

1412 
	`£t4LE
(
±r
, 
Ën
);

1413 
±r
 += 4;

1414 
	`memıy
(
±r
, 
ÿcheFeName
, 
Ën
);

1415 
±r
 +ğ
Ën
;

1416 
	`memıy
(
±r
, 
sigÇtu»
, 
kSHA1Dige¡L’
);

1417 
±r
 +ğ
kSHA1Dige¡L’
;

1420 
	`as£¹
(
±r
 =ğ
buf
 + 
bufL’
);

1422 
»suÉ
 = 
	`sysWr™eFuÎy
(
fd
, 
buf
, 
bufL’
, "DexOpt dep info");

1424 
	`ä“
(
buf
);

1425  
»suÉ
;

1426 
	}
}

1435 
boŞ
 
	$wr™eChunk
(
fd
, 
u4
 
ty³
, cÚ¡ * 
d©a
, 
size_t
 
size
)

1438 
¿w
[8];

1440 
u4
 
ty³
;

1441 
u4
 
size
;

1442 } 
ts
;

1443 } 
h—d”
;

1445 
	`as£¹
((
h—d”
) == 8);

1447 
	`ALOGV
("Wr™šg chunk,y³=%.4 size=%d", (*è&
ty³
, 
size
);

1449 
h—d”
.
ts
.
ty³
 =ype;

1450 
h—d”
.
ts
.
size
 = (
u4
) size;

1451 ià(
	`sysWr™eFuÎy
(
fd
, &
h—d”
, (header),

1454  
çl£
;

1457 ià(
size
 > 0) {

1458 ià(
	`sysWr™eFuÎy
(
fd
, 
d©a
, 
size
, "DexOpt opt chunk write") != 0)

1459  
çl£
;

1463 ià((
size
 & 7) != 0) {

1464 
·dSize
 = 8 - (
size
 & 7);

1465 
	`ALOGV
("sizwa %d, in£¹šg %d…ad by‹s", 
size
, 
·dSize
);

1466 
	`l£ek
(
fd
, 
·dSize
, 
SEEK_CUR
);

1469 
	`as£¹
Ğ(()
	`l£ek
(
fd
, 0, 
SEEK_CUR
) & 7) == 0);

1471  
Œue
;

1472 
	}
}

1482 
boŞ
 
	$wr™eO±D©a
(
fd
, cÚ¡ 
DexCÏssLookup
* 
pCÏssLookup
,

1483 cÚ¡ 
Regi¡”M­Bud”
* 
pRegM­Bud”
)

1486 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkCÏssLookup
,

1487 
pCÏssLookup
,…CÏssLookup->
size
))

1489  
çl£
;

1493 ià(
pRegM­Bud”
 !ğ
NULL
) {

1494 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkRegi¡”M­s
,

1495 
pRegM­Bud”
->
d©a
,…RegM­Bud”->
size
))

1497  
çl£
;

1502 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkEnd
, 
NULL
, 0)) {

1503  
çl£
;

1506  
Œue
;

1507 
	}
}

1516 
boŞ
 
	$compu‹FeChecksum
(
fd
, 
off_t
 
¡¬t
, 
size_t
 
Ëngth
, 
u4
* 
pSum
)

1518 
»adBuf
[8192];

1519 
ssize_t
 
aùu®
;

1520 
uLÚg
 
adËr
;

1522 ià(
	`l£ek
(
fd
, 
¡¬t
, 
SEEK_SET
) != start) {

1523 
	`ALOGE
("Unableo seeko start of checksum‡rea (%ld): %s",

1524 (è
¡¬t
, 
	`¡»¼Ü
(
”ºo
));

1525  
çl£
;

1528 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

1530 
Ëngth
 != 0) {

1531 
size_t
 
wª‹d
 = (
Ëngth
 < (
»adBuf
)) ?†ength : (readBuf);

1532 
aùu®
 = 
	`»ad
(
fd
, 
»adBuf
, 
wª‹d
);

1533 ià(
aùu®
 <= 0) {

1534 
	`ALOGE
("Read failed (%d) while computing checksum (len=%zu): %s",

1535 (è
aùu®
, 
Ëngth
, 
	`¡»¼Ü
(
”ºo
));

1536  
çl£
;

1539 
adËr
 = 
	`adËr32
×dËr, 
»adBuf
, 
aùu®
);

1541 
Ëngth
 -ğ
aùu®
;

1544 *
pSum
 = 
adËr
;

1545  
Œue
;

1546 
	}
}

1553 
	$upd©eChecksum
(
u1
* 
addr
, 
Ën
, 
DexH—d”
* 
pH—d”
)

1558 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

1559 cÚ¡ 
nÚSum
 = (
pH—d”
->
magic
è+ ÕH—d”->
checksum
);

1561 
adËr
 = 
	`adËr32
×dËr, 
addr
 + 
nÚSum
, 
Ën
 -‚onSum);

1562 
pH—d”
->
checksum
 = 
adËr
;

1563 
	}
}

	@vm/analysis/DexPrepare.h

20 #iâdeà
DALVIK_DEXPREPARE_H_


21 
	#DALVIK_DEXPREPARE_H_


	)

30 
	eDexO±imiz”Mode
 {

31 
	mOPTIMIZE_MODE_UNKNOWN
 = 0,

32 
	mOPTIMIZE_MODE_NONE
,

33 
	mOPTIMIZE_MODE_VERIFIED
,

34 
	mOPTIMIZE_MODE_ALL
,

35 
	mOPTIMIZE_MODE_FULL


39 
	eDexİtFÏgs
 {

40 
	mDEXOPT_OPT_ENABLED
 = 1,

41 
	mDEXOPT_OPT_ALL
 = 1 << 1,

42 
	mDEXOPT_VERIFY_ENABLED
 = 1 << 2,

43 
	mDEXOPT_VERIFY_ALL
 = 1 << 3,

44 
	mDEXOPT_IS_BOOTSTRAP
 = 1 << 4,

45 
	mDEXOPT_GEN_REGISTER_MAPS
 = 1 << 5,

46 
	mDEXOPT_UNIPROCESSOR
 = 1 << 6,

47 
	mDEXOPT_SMP
 = 1 << 7

53 
	eV”ifyE¼Ü
 {

54 
	mVERIFY_ERROR_NONE
 = 0,

55 
	mVERIFY_ERROR_GENERIC
,

57 
	mVERIFY_ERROR_NO_CLASS
,

58 
	mVERIFY_ERROR_NO_FIELD
,

59 
	mVERIFY_ERROR_NO_METHOD
,

60 
	mVERIFY_ERROR_ACCESS_CLASS
,

61 
	mVERIFY_ERROR_ACCESS_FIELD
,

62 
	mVERIFY_ERROR_ACCESS_METHOD
,

63 
	mVERIFY_ERROR_CLASS_CHANGE
,

64 
	mVERIFY_ERROR_INSTANTIATION
,

74 
	eV”ifyE¼ÜRefTy³
 {

75 
	mVERIFY_ERROR_REF_CLASS
 = 0,

76 
	mVERIFY_ERROR_REF_FIELD
 = 1,

77 
	mVERIFY_ERROR_REF_METHOD
 = 2,

80 
	#kV”ifyE¼ÜRefTy³Shiá
 6

	)

82 
	#VERIFY_OK
(
_çu»
è((_çu»è=ğ
VERIFY_ERROR_NONE
)

	)

93 
dvmO³nCachedDexFe
(cÚ¡ * 
feName
, cÚ¡ * 
ÿchedFe
,

94 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
, boŞ* 
pNewFe
, boŞ 
ü—‹IfMissšg
);

102 
boŞ
 
dvmUÆockCachedDexFe
(
fd
);

108 
boŞ
 
dvmCheckO±H—d”AndD•’d’c›s
(
fd
, boŞ 
sourûAva
, 
u4
 
modWh’
,

109 
u4
 
üc
, 
boŞ
 
ex³ùV”ify
, boŞ 
ex³ùO±
);

117 
boŞ
 
dvmO±imizeDexFe
(
fd
, 
off_t
 
dexOff£t
, 
dexL’
,

118 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
);

123 
boŞ
 
dvmCÚtšueO±imiz©iÚ
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

124 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
);

129 
boŞ
 
dvmP»·»DexInMemÜy
(
u1
* 
addr
, 
size_t
 
Ën
, 
DvmDex
** 
µDvmDex
);

134 
boŞ
 
dvmC»©eIÆšeSubsTabË
();

135 
dvmF»eIÆšeSubsTabË
();

	@vm/analysis/DexVerify.cpp

21 
	~"D®vik.h
"

22 
	~"ª®ysis/CodeV”ify.h
"

23 
	~"libdex/DexC©ch.h
"

27 
boŞ
 
v”ifyM‘hod
(
M‘hod
* 
m‘h
);

28 
boŞ
 
v”ifyIn¡ruùiÚs
(
V”if›rD©a
* 
vd©a
);

40 
boŞ
 
	$dvmV”ifyCÏss
(
CÏssObjeù
* 
şazz
)

42 
i
;

44 ià(
	`dvmIsCÏssV”if›d
(
şazz
)) {

45 
	`ALOGD
("IgnÜšg du¶iÿ‹ v”ify‡‰em± oÀ%s", 
şazz
->
desütÜ
);

46  
Œue
;

49 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

50 ià(!
	`v”ifyM‘hod
(&
şazz
->
dœeùM‘hods
[
i
])) {

51 
	`LOG_VFY
("V”if›¸»jeùed cÏs %s", 
şazz
->
desütÜ
);

52  
çl£
;

55 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

56 ià(!
	`v”ifyM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
])) {

57 
	`LOG_VFY
("V”if›¸»jeùed cÏs %s", 
şazz
->
desütÜ
);

58  
çl£
;

62  
Œue
;

63 
	}
}

83 
boŞ
 
	$compu‹WidthsAndCouÁOps
(
V”if›rD©a
* 
vd©a
)

85 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

86 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

87 
size_t
 
š¢CouÁ
 = 
vd©a
->
š¢sSize
;

88 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

89 
boŞ
 
»suÉ
 = 
çl£
;

90 
ÃwIn¡ªûCouÁ
 = 0;

91 
mÚ™ÜEÁ”CouÁ
 = 0;

92 
i
;

94 
i
 = 0; i < (è
š¢CouÁ
; ) {

95 
size_t
 
width
 = 
	`dexG‘WidthFromIn¡ruùiÚ
(
š¢s
);

96 ià(
width
 == 0) {

97 
	`LOG_VFY_METH
(
m‘h
, "VFY: inv®id in¡ruùiÚ (0x%04x)", *
š¢s
);

98 
ba
;

99 } ià(
width
 > 65535) {

100 
	`LOG_VFY_METH
(
m‘h
,

101 "VFY: w¬nšg: unusu®ly†¬gš¡¸width (%d)", 
width
);

104 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(*
š¢s
);

105 ià(
İcode
 =ğ
OP_NEW_INSTANCE
)

106 
ÃwIn¡ªûCouÁ
++;

107 ià(
İcode
 =ğ
OP_MONITOR_ENTER
)

108 
mÚ™ÜEÁ”CouÁ
++;

110 
š¢FÏgs
[
i
] |ğ
width
;

111 
i
 +ğ
width
;

112 
š¢s
 +ğ
width
;

114 ià(
i
 !ğ(è
vd©a
->
š¢sSize
) {

115 
	`LOG_VFY_METH
(
m‘h
, "VFY: code did‚otƒnd whereƒxpected (%d vs. %d)",

116 
i
, 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

117 
ba
;

120 
»suÉ
 = 
Œue
;

121 
vd©a
->
ÃwIn¡ªûCouÁ
 =‚ewInstanceCount;

122 
vd©a
->
mÚ™ÜEÁ”CouÁ
 = monitorEnterCount;

124 
ba
:

125  
»suÉ
;

126 
	}
}

137 
boŞ
 
	$sÿnTryC©chBlocks
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
)

139 
u4
 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

140 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

141 
u4
 
Œ›sSize
 = 
pCode
->triesSize;

142 cÚ¡ 
DexTry
* 
pTr›s
;

143 
u4
 
idx
;

145 ià(
Œ›sSize
 == 0) {

146  
Œue
;

149 
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

151 
idx
 = 0; idx < 
Œ›sSize
; idx++) {

152 cÚ¡ 
DexTry
* 
pTry
 = &
pTr›s
[
idx
];

153 
u4
 
¡¬t
 = 
pTry
->
¡¬tAddr
;

154 
u4
 
’d
 = 
¡¬t
 + 
pTry
->
š¢CouÁ
;

155 
u4
 
addr
;

157 ià((
¡¬t
 >ğ
’d
è|| (¡¬ˆ>ğ
š¢sSize
) || (end > insnsSize)) {

158 
	`LOG_VFY_METH
(
m‘h
,

160 
¡¬t
, 
’d
, 
š¢sSize
);

161  
çl£
;

164 ià(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
¡¬t
) == 0) {

165 
	`LOG_VFY_METH
(
m‘h
,

167 
¡¬t
);

168  
çl£
;

171 
addr
 = 
¡¬t
;‡dd¸< 
’d
;

172 
addr
 +ğ
	`dvmIn¢G‘Width
(
š¢FÏgs
,‡ddr))

174 
	`as£¹
(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
) != 0);

175 
	`dvmIn¢S‘InTry
(
š¢FÏgs
, 
addr
, 
Œue
);

180 
u4
 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

181 
u4
 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

182 
idx
 = 0; idx < 
hªdËrsSize
; idx++) {

183 
DexC©chI‹¿tÜ
 
™”©Ü
;

184 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

187 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

188 
u4
 
addr
;

190 ià(
hªdËr
 =ğ
NULL
) {

194 
addr
 = 
hªdËr
->
add»ss
;

195 ià(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
) == 0) {

196 
	`LOG_VFY_METH
(
m‘h
,

198 
addr
);

199  
çl£
;

202 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
addr
, 
Œue
);

205 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

208  
Œue
;

209 
	}
}

235 
boŞ
 
	$v”ifyM‘hod
(
M‘hod
* 
m‘h
)

237 
boŞ
 
»suÉ
 = 
çl£
;

243 
V”if›rD©a
 
vd©a
;

245 
	`mem£t
(&
vd©a
, 0x99, (vdata));

248 
vd©a
.
m‘hod
 = 
m‘h
;

249 
vd©a
.
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

250 
vd©a
.
š¢RegCouÁ
 = 
m‘h
->
»gi¡”sSize
;

251 
vd©a
.
š¢FÏgs
 = 
NULL
;

252 
vd©a
.
unš™M­
 = 
NULL
;

253 
vd©a
.
basicBlocks
 = 
NULL
;

261 ià(
vd©a
.
š¢sSize
 == 0) {

262 ià(!
	`dvmIsN©iveM‘hod
(
m‘h
è&& !
	`dvmIsAb¡¿ùM‘hod
(meth)) {

263 
	`LOG_VFY_METH
(
m‘h
,

265 
ba
;

268 
sucûss
;

275 ià(
m‘h
->
šsSize
 > m‘h->
»gi¡”sSize
) {

276 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad„egister counts (ins=%d„egs=%d)",

277 
m‘h
->
šsSize
, m‘h->
»gi¡”sSize
);

278 
ba
;

287 
vd©a
.
š¢FÏgs
 = (
In¢FÏgs
*è
	`ÿÎoc
(vd©a.
š¢sSize
, (InsnFlags));

288 ià(
vd©a
.
š¢FÏgs
 =ğ
NULL
)

289 
ba
;

295 ià(!
	`compu‹WidthsAndCouÁOps
(&
vd©a
))

296 
ba
;

301 
vd©a
.
unš™M­
 = 
	`dvmC»©eUnš™In¡ªûM­
(
m‘h
, vd©a.
š¢FÏgs
,

302 
vd©a
.
ÃwIn¡ªûCouÁ
);

303 ià(
vd©a
.
unš™M­
 =ğ
NULL
)

304 
ba
;

310 ià(!
	`sÿnTryC©chBlocks
(
m‘h
, 
vd©a
.
š¢FÏgs
))

311 
ba
;

317 ià(!
	`v”ifyIn¡ruùiÚs
(&
vd©a
))

318 
ba
;

326 ià(!
	`dvmV”ifyCodeFlow
(&
vd©a
)) {

328 
ba
;

331 
sucûss
:

332 
»suÉ
 = 
Œue
;

334 
ba
:

335 
	`dvmF»eVfyBasicBlocks
(&
vd©a
);

336 
	`dvmF»eUnš™In¡ªûM­
(
vd©a
.
unš™M­
);

337 
	`ä“
(
vd©a
.
š¢FÏgs
);

338  
»suÉ
;

339 
	}
}

346 
boŞ
 
	$checkA¼ayD©a
(cÚ¡ 
M‘hod
* 
m‘h
, 
u4
 
curOff£t
)

348 cÚ¡ 
u4
 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

349 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

350 cÚ¡ 
u2
* 
¬¿yD©a
;

351 
u4
 
v®ueCouÁ
, 
v®ueWidth
, 
bËSize
;

352 
s4
 
off£tToA¼ayD©a
;

354 
	`as£¹
(
curOff£t
 < 
š¢CouÁ
);

357 
off£tToA¼ayD©a
 = 
š¢s
[1] | (((
s4
)insns[2]) << 16);

358 ià((
s4
)
curOff£t
 + 
off£tToA¼ayD©a
 < 0 ||

359 
curOff£t
 + 
off£tToA¼ayD©a
 + 2 >ğ
š¢CouÁ
)

361 
	`LOG_VFY
("VFY: invalid‡rray data start:‡t %d, data offset %d, "

363 
curOff£t
, 
off£tToA¼ayD©a
, 
š¢CouÁ
);

364  
çl£
;

368 
¬¿yD©a
 = 
š¢s
 + 
off£tToA¼ayD©a
;

371 ià((((
u4
è
¬¿yD©a
) & 0x03) != 0) {

372 
	`LOG_VFY
("VFY: unaligned‡rray dataable:‡t %d, data offset %d",

373 
curOff£t
, 
off£tToA¼ayD©a
);

374  
çl£
;

377 
v®ueWidth
 = 
¬¿yD©a
[1];

378 
v®ueCouÁ
 = *(
u4
*)(&
¬¿yD©a
[2]);

380 
bËSize
 = 4 + (
v®ueWidth
 * 
v®ueCouÁ
 + 1) / 2;

383 ià(
curOff£t
 + 
off£tToA¼ayD©a
 + 
bËSize
 > 
š¢CouÁ
) {

384 
	`LOG_VFY
("VFY: invalid‡rray dataƒnd:‡t %d, data offset %d,ƒnd %d, "

386 
curOff£t
, 
off£tToA¼ayD©a
,

387 
curOff£t
 + 
off£tToA¼ayD©a
 + 
bËSize
, 
š¢CouÁ
);

388  
çl£
;

391  
Œue
;

392 
	}
}

400 
boŞ
 
	$checkNewIn¡ªû
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

402 cÚ¡ * 
şassDesütÜ
;

404 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

405 
	`LOG_VFY
("VFY: badype index %d (max %d)",

406 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

407  
çl£
;

410 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
idx
);

411 ià(
şassDesütÜ
[0] != 'L') {

412 
	`LOG_VFY
("VFY: can't call‚ew-instance onype '%s'",

413 
şassDesütÜ
);

414  
çl£
;

417  
Œue
;

418 
	}
}

425 
boŞ
 
	$checkNewA¼ay
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

427 cÚ¡ * 
şassDesütÜ
;

429 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

430 
	`LOG_VFY
("VFY: badype index %d (max %d)",

431 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

432  
çl£
;

435 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
idx
);

437 
b¿ck‘CouÁ
 = 0;

438 cÚ¡ * 
ı
 = 
şassDesütÜ
;

439 *
ı
++ == '[')

440 
b¿ck‘CouÁ
++;

442 ià(
b¿ck‘CouÁ
 == 0) {

444 
	`LOG_VFY
("VFY: can't‚ew-array class '%s' (not‡n‡rray)",

445 
şassDesütÜ
);

446  
çl£
;

447 } ià(
b¿ck‘CouÁ
 > 255) {

449 
	`LOG_VFY
("VFY: can't‚ew-array class '%s' (exceeds†imit)",

450 
şassDesütÜ
);

451  
çl£
;

454  
Œue
;

455 
	}
}

461 
boŞ
 
	$checkTy³Index
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

463 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

464 
	`LOG_VFY
("VFY: badype index %d (max %d)",

465 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

466  
çl£
;

468  
Œue
;

469 
	}
}

475 
boŞ
 
	$checkF›ldIndex
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

477 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
f›ldIdsSize
) {

478 
	`LOG_VFY
("VFY: bad field index %d (max %d)",

479 
idx
, 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

480  
çl£
;

482  
Œue
;

483 
	}
}

489 
boŞ
 
	$checkM‘hodIndex
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

491 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
m‘hodIdsSize
) {

492 
	`LOG_VFY
("VFY: bad method index %d (max %d)",

493 
idx
, 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

494  
çl£
;

496  
Œue
;

497 
	}
}

502 
boŞ
 
	$checkSŒšgIndex
(cÚ¡ 
DvmDex
* 
pDvmDex
, 
u4
 
idx
)

504 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
¡ršgIdsSize
) {

505 
	`LOG_VFY
("VFY: bad string index %d (max %d)",

506 
idx
, 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

507  
çl£
;

509  
Œue
;

510 
	}
}

515 
boŞ
 
	$checkRegi¡”Index
(cÚ¡ 
M‘hod
* 
m‘h
, 
u4
 
idx
)

517 ià(
idx
 >ğ
m‘h
->
»gi¡”sSize
) {

518 
	`LOG_VFY
("VFY:„egister index out of„ange (%d >= %d)",

519 
idx
, 
m‘h
->
»gi¡”sSize
);

520  
çl£
;

522  
Œue
;

523 
	}
}

528 
boŞ
 
	$checkWideRegi¡”Index
(cÚ¡ 
M‘hod
* 
m‘h
, 
u4
 
idx
)

530 ià(
idx
+1 >ğ
m‘h
->
»gi¡”sSize
) {

531 
	`LOG_VFY
("VFY: wide„egister index out of„ange (%d+1 >= %d)",

532 
idx
, 
m‘h
->
»gi¡”sSize
);

533  
çl£
;

535  
Œue
;

536 
	}
}

549 
boŞ
 
	$checkV¬¬gRegs
(cÚ¡ 
M‘hod
* 
m‘h
,

550 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
)

552 
u2
 
»gi¡”sSize
 = 
m‘h
->registersSize;

553 
idx
;

555 ià(
pDecIn¢
->
vA
 > 5) {

556 
	`LOG_VFY
("VFY: invalid‡rg count (%d) in‚on-range invoke)",

557 
pDecIn¢
->
vA
);

558  
çl£
;

561 
idx
 = 0; idx < 
pDecIn¢
->
vA
; idx++) {

562 ià(
pDecIn¢
->
¬g
[
idx
] > 
»gi¡”sSize
) {

563 
	`LOG_VFY
("VFY: invalid„eg index (%d) in‚on-range invoke (> %d)",

564 
pDecIn¢
->
¬g
[
idx
], 
»gi¡”sSize
);

565  
çl£
;

569  
Œue
;

570 
	}
}

578 
boŞ
 
	$checkV¬¬gRªgeRegs
(cÚ¡ 
M‘hod
* 
m‘h
,

579 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
)

581 
u2
 
»gi¡”sSize
 = 
m‘h
->registersSize;

587 ià(
pDecIn¢
->
vA
 +…DecIn¢->
vC
 > 
»gi¡”sSize
) {

588 
	`LOG_VFY
("VFY: invalid„eg index %d+%d in„ange invoke (> %d)",

589 
pDecIn¢
->
vA
,…DecIn¢->
vC
, 
»gi¡”sSize
);

590  
çl£
;

593  
Œue
;

594 
	}
}

602 
boŞ
 
	$checkSw™chT¬g‘s
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

603 
u4
 
curOff£t
)

605 cÚ¡ 
u4
 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

606 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

607 cÚ¡ 
u2
* 
sw™chIn¢s
;

608 
u2
 
ex³ùedSigÇtu»
;

609 
u4
 
sw™chCouÁ
, 
bËSize
;

610 
s4
 
off£tToSw™ch
, 
off£tToKeys
, 
off£tToT¬g‘s
;

611 
s4
 
off£t
, 
absOff£t
;

612 
u4
 
rg
;

614 
	`as£¹
(
curOff£t
 < 
š¢CouÁ
);

617 
off£tToSw™ch
 = 
š¢s
[1] | ((
s4
) insns[2]) << 16;

618 ià((
s4
è
curOff£t
 + 
off£tToSw™ch
 < 0 ||

619 
curOff£t
 + 
off£tToSw™ch
 + 2 >ğ
š¢CouÁ
)

621 
	`LOG_VFY
("VFY: invalid switch start:‡t %d, switch offset %d, "

623 
curOff£t
, 
off£tToSw™ch
, 
š¢CouÁ
);

624  
çl£
;

628 
sw™chIn¢s
 = 
š¢s
 + 
off£tToSw™ch
;

631 ià((((
u4
è
sw™chIn¢s
) & 0x03) != 0) {

632 
	`LOG_VFY
("VFY: unaligned switchable:‡t %d, switch offset %d",

633 
curOff£t
, 
off£tToSw™ch
);

634  
çl£
;

637 
sw™chCouÁ
 = 
sw™chIn¢s
[1];

639 ià((*
š¢s
 & 0xffè=ğ
OP_PACKED_SWITCH
) {

641 
off£tToT¬g‘s
 = 4;

642 
off£tToKeys
 = -1;

643 
ex³ùedSigÇtu»
 = 
kPackedSw™chSigÇtu»
;

646 
off£tToKeys
 = 2;

647 
off£tToT¬g‘s
 = 2 + 2*
sw™chCouÁ
;

648 
ex³ùedSigÇtu»
 = 
kS·r£Sw™chSigÇtu»
;

650 
bËSize
 = 
off£tToT¬g‘s
 + 
sw™chCouÁ
*2;

652 ià(
sw™chIn¢s
[0] !ğ
ex³ùedSigÇtu»
) {

653 
	`LOG_VFY
("VFY: wrong signature for switchable (0x%04x, wanted 0x%04x)",

654 
sw™chIn¢s
[0], 
ex³ùedSigÇtu»
);

655  
çl£
;

659 ià(
curOff£t
 + 
off£tToSw™ch
 + 
bËSize
 > (
u4
è
š¢CouÁ
) {

660 
	`LOG_VFY
("VFY: invalid switchƒnd:‡t %d, switch offset %d,ƒnd %d, "

662 
curOff£t
, 
off£tToSw™ch
, curOff£ˆ+ off£tToSw™ch + 
bËSize
,

663 
š¢CouÁ
);

664  
çl£
;

668 ià(
off£tToKeys
 > 0 && 
sw™chCouÁ
 > 1) {

669 
s4
 
Ï¡Key
;

671 
Ï¡Key
 = 
sw™chIn¢s
[
off£tToKeys
] |

672 (
sw™chIn¢s
[
off£tToKeys
+1] << 16);

673 
rg
 = 1;¬g < 
sw™chCouÁ
;arg++) {

674 
s4
 
key
 = (s4è
sw™chIn¢s
[
off£tToKeys
 + 
rg
*2] |

675 (
s4
è(
sw™chIn¢s
[
off£tToKeys
 + 
rg
*2 +1] << 16);

676 ià(
key
 <ğ
Ï¡Key
) {

677 
	`LOG_VFY
("VFY: invalid…acked switch:†ast key=%d,his=%d",

678 
Ï¡Key
, 
key
);

679  
çl£
;

682 
Ï¡Key
 = 
key
;

687 
rg
 = 0;¬g < 
sw™chCouÁ
;arg++) {

688 
off£t
 = (
s4
è
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2] |

689 (
s4
è(
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2 +1] << 16);

690 
absOff£t
 = 
curOff£t
 + 
off£t
;

692 ià(
absOff£t
 < 0 ||‡bsOff£ˆ>ğ(
s4
)
š¢CouÁ
 ||

693 !
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
absOff£t
))

695 
	`LOG_VFY
("VFY: invalid switcharget %d (-> %#x)‡t %#x[%d]",

696 
off£t
, 
absOff£t
, 
curOff£t
, 
rg
);

697  
çl£
;

699 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
absOff£t
, 
Œue
);

702  
Œue
;

703 
	}
}

717 
boŞ
 
	$checkB¿nchT¬g‘
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

718 
curOff£t
, 
boŞ
 
£lfOkay
)

720 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

721 
s4
 
off£t
, 
absOff£t
;

722 
boŞ
 
isCÚd™iÚ®
;

724 ià(!
	`dvmG‘B¿nchOff£t
(
m‘h
, 
š¢FÏgs
, 
curOff£t
, &
off£t
,

725 &
isCÚd™iÚ®
))

726  
çl£
;

728 ià(!
£lfOkay
 && 
off£t
 == 0) {

729 
	`LOG_VFY_METH
(
m‘h
, "VFY: branch offset of zero‚ot‡llowed‡t %#x",

730 
curOff£t
);

731  
çl£
;

739 ià(((
s8
è
curOff£t
 + (s8è
off£t
) != (s8)(curOffset + offset)) {

740 
	`LOG_VFY_METH
(
m‘h
, "VFY: brancharget overflow %#x +%d",

741 
curOff£t
, 
off£t
);

742  
çl£
;

744 
absOff£t
 = 
curOff£t
 + 
off£t
;

745 ià(
absOff£t
 < 0 ||‡bsOff£ˆ>ğ
š¢CouÁ
 ||

746 !
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
absOff£t
))

748 
	`LOG_VFY_METH
(
m‘h
,

750 
off£t
, 
absOff£t
, 
curOff£t
);

751  
çl£
;

753 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
absOff£t
, 
Œue
);

755  
Œue
;

756 
	}
}

794 
boŞ
 
	$v”ifyIn¡ruùiÚs
(
V”if›rD©a
* 
vd©a
)

796 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

797 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

798 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

799 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

800 
codeOff£t
;

803 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 0, 
Œue
);

805 
codeOff£t
 = 0; codeOff£ˆ< 
vd©a
->
š¢sSize
; ) {

809 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
codeOff£t
);

810 
DecodedIn¡ruùiÚ
 
decIn¢
;

811 
boŞ
 
okay
 = 
Œue
;

813 
	`dexDecodeIn¡ruùiÚ
(
m‘h
->
š¢s
 + 
codeOff£t
, &
decIn¢
);

820 
decIn¢
.
İcode
) {

821 
OP_NOP
:

822 
OP_RETURN_VOID
:

825 
OP_MOVE_RESULT
:

826 
OP_MOVE_RESULT_OBJECT
:

827 
OP_MOVE_EXCEPTION
:

828 
OP_RETURN
:

829 
OP_RETURN_OBJECT
:

830 
OP_CONST_4
:

831 
OP_CONST_16
:

832 
OP_CONST
:

833 
OP_CONST_HIGH16
:

834 
OP_MONITOR_ENTER
:

835 
OP_MONITOR_EXIT
:

836 
OP_THROW
:

837 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

839 
OP_MOVE_RESULT_WIDE
:

840 
OP_RETURN_WIDE
:

841 
OP_CONST_WIDE_16
:

842 
OP_CONST_WIDE_32
:

843 
OP_CONST_WIDE
:

844 
OP_CONST_WIDE_HIGH16
:

845 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

847 
OP_GOTO
:

848 
OP_GOTO_16
:

849 
okay
 &ğ
	`checkB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
, 
çl£
);

851 
OP_GOTO_32
:

852 
okay
 &ğ
	`checkB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
, 
Œue
);

854 
OP_MOVE
:

855 
OP_MOVE_FROM16
:

856 
OP_MOVE_16
:

857 
OP_MOVE_OBJECT
:

858 
OP_MOVE_OBJECT_FROM16
:

859 
OP_MOVE_OBJECT_16
:

860 
OP_ARRAY_LENGTH
:

861 
OP_NEG_INT
:

862 
OP_NOT_INT
:

863 
OP_NEG_FLOAT
:

864 
OP_INT_TO_FLOAT
:

865 
OP_FLOAT_TO_INT
:

866 
OP_INT_TO_BYTE
:

867 
OP_INT_TO_CHAR
:

868 
OP_INT_TO_SHORT
:

869 
OP_ADD_INT_2ADDR
:

870 
OP_SUB_INT_2ADDR
:

871 
OP_MUL_INT_2ADDR
:

872 
OP_DIV_INT_2ADDR
:

873 
OP_REM_INT_2ADDR
:

874 
OP_AND_INT_2ADDR
:

875 
OP_OR_INT_2ADDR
:

876 
OP_XOR_INT_2ADDR
:

877 
OP_SHL_INT_2ADDR
:

878 
OP_SHR_INT_2ADDR
:

879 
OP_USHR_INT_2ADDR
:

880 
OP_ADD_FLOAT_2ADDR
:

881 
OP_SUB_FLOAT_2ADDR
:

882 
OP_MUL_FLOAT_2ADDR
:

883 
OP_DIV_FLOAT_2ADDR
:

884 
OP_REM_FLOAT_2ADDR
:

885 
OP_ADD_INT_LIT16
:

886 
OP_RSUB_INT
:

887 
OP_MUL_INT_LIT16
:

888 
OP_DIV_INT_LIT16
:

889 
OP_REM_INT_LIT16
:

890 
OP_AND_INT_LIT16
:

891 
OP_OR_INT_LIT16
:

892 
OP_XOR_INT_LIT16
:

893 
OP_ADD_INT_LIT8
:

894 
OP_RSUB_INT_LIT8
:

895 
OP_MUL_INT_LIT8
:

896 
OP_DIV_INT_LIT8
:

897 
OP_REM_INT_LIT8
:

898 
OP_AND_INT_LIT8
:

899 
OP_OR_INT_LIT8
:

900 
OP_XOR_INT_LIT8
:

901 
OP_SHL_INT_LIT8
:

902 
OP_SHR_INT_LIT8
:

903 
OP_USHR_INT_LIT8
:

904 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

905 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

907 
OP_INT_TO_LONG
:

908 
OP_INT_TO_DOUBLE
:

909 
OP_FLOAT_TO_LONG
:

910 
OP_FLOAT_TO_DOUBLE
:

911 
OP_SHL_LONG_2ADDR
:

912 
OP_SHR_LONG_2ADDR
:

913 
OP_USHR_LONG_2ADDR
:

914 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

915 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

917 
OP_LONG_TO_INT
:

918 
OP_LONG_TO_FLOAT
:

919 
OP_DOUBLE_TO_INT
:

920 
OP_DOUBLE_TO_FLOAT
:

921 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

922 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

924 
OP_MOVE_WIDE
:

925 
OP_MOVE_WIDE_FROM16
:

926 
OP_MOVE_WIDE_16
:

927 
OP_DOUBLE_TO_LONG
:

928 
OP_LONG_TO_DOUBLE
:

929 
OP_NEG_DOUBLE
:

930 
OP_NEG_LONG
:

931 
OP_NOT_LONG
:

932 
OP_ADD_LONG_2ADDR
:

933 
OP_SUB_LONG_2ADDR
:

934 
OP_MUL_LONG_2ADDR
:

935 
OP_DIV_LONG_2ADDR
:

936 
OP_REM_LONG_2ADDR
:

937 
OP_AND_LONG_2ADDR
:

938 
OP_OR_LONG_2ADDR
:

939 
OP_XOR_LONG_2ADDR
:

940 
OP_ADD_DOUBLE_2ADDR
:

941 
OP_SUB_DOUBLE_2ADDR
:

942 
OP_MUL_DOUBLE_2ADDR
:

943 
OP_DIV_DOUBLE_2ADDR
:

944 
OP_REM_DOUBLE_2ADDR
:

945 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

946 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

948 
OP_CONST_STRING
:

949 
OP_CONST_STRING_JUMBO
:

950 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

951 
okay
 &ğ
	`checkSŒšgIndex
(
pDvmDex
, 
decIn¢
.
vB
);

953 
OP_CONST_CLASS
:

954 
OP_CHECK_CAST
:

955 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

956 
okay
 &ğ
	`checkTy³Index
(
pDvmDex
, 
decIn¢
.
vB
);

958 
OP_INSTANCE_OF
:

959 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

960 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

961 
okay
 &ğ
	`checkTy³Index
(
pDvmDex
, 
decIn¢
.
vC
);

963 
OP_NEW_INSTANCE
:

964 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

965 
okay
 &ğ
	`checkNewIn¡ªû
(
pDvmDex
, 
decIn¢
.
vB
);

967 
OP_NEW_ARRAY
:

968 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

969 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

970 
okay
 &ğ
	`checkNewA¼ay
(
pDvmDex
, 
decIn¢
.
vC
);

972 
OP_FILL_ARRAY_DATA
:

973 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

974 
okay
 &ğ
	`checkA¼ayD©a
(
m‘h
, 
codeOff£t
);

976 
OP_PACKED_SWITCH
:

977 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

978 
okay
 &ğ
	`checkSw™chT¬g‘s
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
);

980 
OP_SPARSE_SWITCH
:

981 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

982 
okay
 &ğ
	`checkSw™chT¬g‘s
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
);

984 
OP_CMPL_FLOAT
:

985 
OP_CMPG_FLOAT
:

986 
OP_AGET
:

987 
OP_AGET_OBJECT
:

988 
OP_AGET_BOOLEAN
:

989 
OP_AGET_BYTE
:

990 
OP_AGET_CHAR
:

991 
OP_AGET_SHORT
:

992 
OP_APUT
:

993 
OP_APUT_OBJECT
:

994 
OP_APUT_BOOLEAN
:

995 
OP_APUT_BYTE
:

996 
OP_APUT_CHAR
:

997 
OP_APUT_SHORT
:

998 
OP_ADD_INT
:

999 
OP_SUB_INT
:

1000 
OP_MUL_INT
:

1001 
OP_DIV_INT
:

1002 
OP_REM_INT
:

1003 
OP_AND_INT
:

1004 
OP_OR_INT
:

1005 
OP_XOR_INT
:

1006 
OP_SHL_INT
:

1007 
OP_SHR_INT
:

1008 
OP_USHR_INT
:

1009 
OP_ADD_FLOAT
:

1010 
OP_SUB_FLOAT
:

1011 
OP_MUL_FLOAT
:

1012 
OP_DIV_FLOAT
:

1013 
OP_REM_FLOAT
:

1014 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1015 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1016 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vC
);

1018 
OP_AGET_WIDE
:

1019 
OP_APUT_WIDE
:

1020 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1021 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1022 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vC
);

1024 
OP_CMPL_DOUBLE
:

1025 
OP_CMPG_DOUBLE
:

1026 
OP_CMP_LONG
:

1027 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1028 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1029 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vC
);

1031 
OP_ADD_DOUBLE
:

1032 
OP_SUB_DOUBLE
:

1033 
OP_MUL_DOUBLE
:

1034 
OP_DIV_DOUBLE
:

1035 
OP_REM_DOUBLE
:

1036 
OP_ADD_LONG
:

1037 
OP_SUB_LONG
:

1038 
OP_MUL_LONG
:

1039 
OP_DIV_LONG
:

1040 
OP_REM_LONG
:

1041 
OP_AND_LONG
:

1042 
OP_OR_LONG
:

1043 
OP_XOR_LONG
:

1044 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1045 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1046 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vC
);

1048 
OP_SHL_LONG
:

1049 
OP_SHR_LONG
:

1050 
OP_USHR_LONG
:

1051 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1052 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1053 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vC
);

1055 
OP_IF_EQ
:

1056 
OP_IF_NE
:

1057 
OP_IF_LT
:

1058 
OP_IF_GE
:

1059 
OP_IF_GT
:

1060 
OP_IF_LE
:

1061 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1062 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1063 
okay
 &ğ
	`checkB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
, 
çl£
);

1065 
OP_IF_EQZ
:

1066 
OP_IF_NEZ
:

1067 
OP_IF_LTZ
:

1068 
OP_IF_GEZ
:

1069 
OP_IF_GTZ
:

1070 
OP_IF_LEZ
:

1071 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1072 
okay
 &ğ
	`checkB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
codeOff£t
, 
çl£
);

1074 
OP_IGET
:

1075 
OP_IGET_OBJECT
:

1076 
OP_IGET_BOOLEAN
:

1077 
OP_IGET_BYTE
:

1078 
OP_IGET_CHAR
:

1079 
OP_IGET_SHORT
:

1080 
OP_IPUT
:

1081 
OP_IPUT_OBJECT
:

1082 
OP_IPUT_BOOLEAN
:

1083 
OP_IPUT_BYTE
:

1084 
OP_IPUT_CHAR
:

1085 
OP_IPUT_SHORT
:

1086 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1087 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1088 
okay
 &ğ
	`checkF›ldIndex
(
pDvmDex
, 
decIn¢
.
vC
);

1090 
OP_IGET_WIDE
:

1091 
OP_IPUT_WIDE
:

1092 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1093 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vB
);

1094 
okay
 &ğ
	`checkF›ldIndex
(
pDvmDex
, 
decIn¢
.
vC
);

1096 
OP_SGET
:

1097 
OP_SGET_OBJECT
:

1098 
OP_SGET_BOOLEAN
:

1099 
OP_SGET_BYTE
:

1100 
OP_SGET_CHAR
:

1101 
OP_SGET_SHORT
:

1102 
OP_SPUT
:

1103 
OP_SPUT_OBJECT
:

1104 
OP_SPUT_BOOLEAN
:

1105 
OP_SPUT_BYTE
:

1106 
OP_SPUT_CHAR
:

1107 
OP_SPUT_SHORT
:

1108 
okay
 &ğ
	`checkRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1109 
okay
 &ğ
	`checkF›ldIndex
(
pDvmDex
, 
decIn¢
.
vB
);

1111 
OP_SGET_WIDE
:

1112 
OP_SPUT_WIDE
:

1113 
okay
 &ğ
	`checkWideRegi¡”Index
(
m‘h
, 
decIn¢
.
vA
);

1114 
okay
 &ğ
	`checkF›ldIndex
(
pDvmDex
, 
decIn¢
.
vB
);

1116 
OP_FILLED_NEW_ARRAY
:

1118 
okay
 &ğ
	`checkTy³Index
(
pDvmDex
, 
decIn¢
.
vB
);

1119 
okay
 &ğ
	`checkV¬¬gRegs
(
m‘h
, &
decIn¢
);

1121 
OP_FILLED_NEW_ARRAY_RANGE
:

1122 
okay
 &ğ
	`checkTy³Index
(
pDvmDex
, 
decIn¢
.
vB
);

1123 
okay
 &ğ
	`checkV¬¬gRªgeRegs
(
m‘h
, &
decIn¢
);

1125 
OP_INVOKE_VIRTUAL
:

1126 
OP_INVOKE_SUPER
:

1127 
OP_INVOKE_DIRECT
:

1128 
OP_INVOKE_STATIC
:

1129 
OP_INVOKE_INTERFACE
:

1131 
okay
 &ğ
	`checkM‘hodIndex
(
pDvmDex
, 
decIn¢
.
vB
);

1132 
okay
 &ğ
	`checkV¬¬gRegs
(
m‘h
, &
decIn¢
);

1134 
OP_INVOKE_VIRTUAL_RANGE
:

1135 
OP_INVOKE_SUPER_RANGE
:

1136 
OP_INVOKE_DIRECT_RANGE
:

1137 
OP_INVOKE_STATIC_RANGE
:

1138 
OP_INVOKE_INTERFACE_RANGE
:

1139 
okay
 &ğ
	`checkM‘hodIndex
(
pDvmDex
, 
decIn¢
.
vB
);

1140 
okay
 &ğ
	`checkV¬¬gRªgeRegs
(
m‘h
, &
decIn¢
);

1144 
OP_IGET_VOLATILE
:

1145 
OP_IPUT_VOLATILE
:

1146 
OP_SGET_VOLATILE
:

1147 
OP_SPUT_VOLATILE
:

1148 
OP_IGET_OBJECT_VOLATILE
:

1149 
OP_IPUT_OBJECT_VOLATILE
:

1150 
OP_SGET_OBJECT_VOLATILE
:

1151 
OP_SPUT_OBJECT_VOLATILE
:

1152 
OP_IGET_WIDE_VOLATILE
:

1153 
OP_IPUT_WIDE_VOLATILE
:

1154 
OP_SGET_WIDE_VOLATILE
:

1155 
OP_SPUT_WIDE_VOLATILE
:

1156 
OP_BREAKPOINT
:

1157 
OP_THROW_VERIFICATION_ERROR
:

1158 
OP_EXECUTE_INLINE
:

1159 
OP_EXECUTE_INLINE_RANGE
:

1160 
OP_INVOKE_OBJECT_INIT_RANGE
:

1161 
OP_RETURN_VOID_BARRIER
:

1162 
OP_IGET_QUICK
:

1163 
OP_IGET_WIDE_QUICK
:

1164 
OP_IGET_OBJECT_QUICK
:

1165 
OP_IPUT_QUICK
:

1166 
OP_IPUT_WIDE_QUICK
:

1167 
OP_IPUT_OBJECT_QUICK
:

1168 
OP_INVOKE_VIRTUAL_QUICK
:

1169 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

1170 
OP_INVOKE_SUPER_QUICK
:

1171 
OP_INVOKE_SUPER_QUICK_RANGE
:

1172 
OP_UNUSED_3E
:

1173 
OP_UNUSED_3F
:

1174 
OP_UNUSED_40
:

1175 
OP_UNUSED_41
:

1176 
OP_UNUSED_42
:

1177 
OP_UNUSED_43
:

1178 
OP_UNUSED_73
:

1179 
OP_UNUSED_79
:

1180 
OP_UNUSED_7A
:

1181 
OP_UNUSED_FF
:

1182 
	`ALOGE
("VFY: uÃx³ùed opcod%04x", 
decIn¢
.
İcode
);

1183 
okay
 = 
çl£
;

1192 ià(!
okay
) {

1193 
	`LOG_VFY_METH
(
m‘h
, "VFY:„ejecting opcode 0x%02x‡t 0x%04x",

1194 
decIn¢
.
İcode
, 
codeOff£t
);

1195  
çl£
;

1198 
OpcodeFÏgs
 
İFÏgs
 = 
	`dexG‘FÏgsFromOpcode
(
decIn¢
.
İcode
);

1199 ià((
İFÏgs
 & 
VERIFY_GC_INST_MASK
) != 0) {

1209 
	`dvmIn¢S‘GcPošt
(
š¢FÏgs
, 
codeOff£t
, 
Œue
);

1212 
	`as£¹
(
width
 > 0);

1213 
codeOff£t
 +ğ
width
;

1214 
š¢s
 +ğ
width
;

1218 ià(
codeOff£t
 !ğ
vd©a
->
š¢sSize
) {

1219 
	`LOG_VFY_METH
(
m‘h
,

1221 
codeOff£t
, 
vd©a
->
š¢sSize
);

1222  
çl£
;

1225  
Œue
;

1226 
	}
}

	@vm/analysis/DexVerify.h

20 #iâdeà
DALVIK_DEXVERIFY_H_


21 
	#DALVIK_DEXVERIFY_H_


	)

28 
	eDexCÏssV”ifyMode
 {

29 
	mVERIFY_MODE_UNKNOWN
 = 0,

30 
	mVERIFY_MODE_NONE
,

31 
	mVERIFY_MODE_REMOTE
,

32 
	mVERIFY_MODE_ALL


36 
	sV”if›rSts
 {

37 
size_t
 
	mm‘hodsExamšed
;

38 
size_t
 
	mmÚEÁ”M‘hods
;

39 
size_t
 
	mš¡rsExamšed
;

40 
size_t
 
	mš¡rsR“xamšed
;

41 
size_t
 
	mcİyRegCouÁ
;

42 
size_t
 
	mm”geRegCouÁ
;

43 
size_t
 
	mm”geRegChªged
;

44 
size_t
 
	munš™S—rches
;

45 
size_t
 
	mbigge¡AÎoc
;

53 
	#VERIFY_GC_INST_MASK
 (
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 |\

54 
kIn¡rCªThrow
 | 
kIn¡rCªR‘uº
)

	)

59 
boŞ
 
dvmV”ifyCÏss
(
CÏssObjeù
* 
şazz
);

64 
dvmF»eRegi¡”M­
(
Regi¡”M­
* 
pM­
);

	@vm/analysis/Liveness.cpp

20 
	~"D®vik.h
"

21 
	~"ª®ysis/Liv’ess.h
"

22 
	~"ª®ysis/CodeV”ify.h
"

24 
boŞ
 
´oûssIn¡ruùiÚ
(
V”if›rD©a
* 
vd©a
, 
u4
 
curIdx
,

25 
B™VeùÜ
* 
wÜkB™s
);

26 
boŞ
 
m¬kDebugLoÿls
(
V”if›rD©a
* 
vd©a
);

27 
dumpLiveS‹
(cÚ¡ 
V”if›rD©a
* 
vd©a
, 
u4
 
curIdx
,

28 cÚ¡ 
B™VeùÜ
* 
wÜkB™s
);

38 
In¡ruùiÚWidth
* 
	$ü—‹Backw¬dWidthTabË
(
V”if›rD©a
* 
vd©a
)

40 
In¡ruùiÚWidth
* 
widths
;

42 
widths
 = (
In¡ruùiÚWidth
*)

43 
	`ÿÎoc
(
vd©a
->
š¢sSize
, (
In¡ruùiÚWidth
));

44 ià(
widths
 =ğ
NULL
)

45  
NULL
;

47 
u4
 
š¢Width
 = 0;

48 
u4
 
idx
 = 0; idx < 
vd©a
->
š¢sSize
; ) {

49 
widths
[
idx
] = 
š¢Width
;

50 
š¢Width
 = 
	`dvmIn¢G‘Width
(
vd©a
->
š¢FÏgs
, 
idx
);

51 
idx
 +ğ
š¢Width
;

54  
widths
;

55 
	}
}

60 
boŞ
 
	$dvmCompu‹Liv’ess
(
V”if›rD©a
* 
vd©a
)

62 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

63 
In¡ruùiÚWidth
* 
backw¬dWidth
;

64 
VfyBasicBlock
* 
¡¬tGuess
 = 
NULL
;

65 
B™VeùÜ
* 
wÜkB™s
;

66 
boŞ
 
»suÉ
 = 
çl£
;

68 
boŞ
 
v”bo£
 = 
çl£
;

69 ià(
v”bo£
) {

70 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

71 
	`ALOGI
("Computing†iveness for %s.%s:%s",

72 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, m‘h->
shÜty
);

75 
	`as£¹
(
vd©a
->
»gi¡”Lšes
 !ğ
NULL
);

77 
backw¬dWidth
 = 
	`ü—‹Backw¬dWidthTabË
(
vd©a
);

78 ià(
backw¬dWidth
 =ğ
NULL
)

79 
ba
;

87 
wÜkB™s
 = 
	`dvmAÎocB™VeùÜ
(
vd©a
->
š¢RegCouÁ
, 
çl£
);

88 ià(
wÜkB™s
 =ğ
NULL
)

89 
ba
;

99 
™”
 = 0;;) {

100 
VfyBasicBlock
* 
wÜkBlock
 = 
NULL
;

102 ià(
™”
++ > 100000) {

103 
	`LOG_VFY_METH
(
vd©a
->
m‘hod
, "oh dear");

104 
	`dvmAbÜt
();

117 ià(
¡¬tGuess
 !ğ
NULL
) {

118 
	`as£¹
(
¡¬tGuess
->
chªged
);

119 
wÜkBlock
 = 
¡¬tGuess
;

121 
u4
 
idx
 = 0; idx < 
vd©a
->
š¢sSize
; idx++) {

122 
VfyBasicBlock
* 
block
 = 
vd©a
->
basicBlocks
[
idx
];

123 ià(
block
 =ğ
NULL
)

126 ià(
block
->
chªged
) {

127 
wÜkBlock
 = 
block
;

129 } ià(!
block
->
vis™ed
) {

130 
wÜkBlock
 = 
block
;

135 ià(
wÜkBlock
 =ğ
NULL
) {

140 
	`as£¹
(
wÜkBlock
->
chªged
 || !wÜkBlock->
vis™ed
);

141 
¡¬tGuess
 = 
NULL
;

147 
	`as£¹
(
wÜkBlock
->
liveRegs
 !ğ
NULL
);

148 
	`dvmCİyB™VeùÜ
(
wÜkB™s
, 
wÜkBlock
->
liveRegs
);

149 ià(
v”bo£
) {

150 
	`ALOGI
("Lßded wÜk b™ äom†a¡=0x%04x", 
wÜkBlock
->
Ï¡Addr
);

151 
	`dumpLiveS‹
(
vd©a
, 0xfffd, 
wÜkBlock
->
liveRegs
);

152 
	`dumpLiveS‹
(
vd©a
, 0xffff, 
wÜkB™s
);

173 
u4
 
curIdx
 = 
wÜkBlock
->
Ï¡Addr
;

174 
Œue
) {

175 ià(!
	`´oûssIn¡ruùiÚ
(
vd©a
, 
curIdx
, 
wÜkB™s
))

176 
ba
;

178 ià(
v”bo£
) {

179 
	`dumpLiveS‹
(
vd©a
, 
curIdx
 + 0x8000, 
wÜkB™s
);

182 ià(
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
curIdx
)) {

183 
B™VeùÜ
* 
lšeB™s
 = 
vd©a
->
»gi¡”Lšes
[
curIdx
].
liveRegs
;

184 ià(
lšeB™s
 =ğ
NULL
) {

185 
lšeB™s
 = 
vd©a
->
»gi¡”Lšes
[
curIdx
].
liveRegs
 =

186 
	`dvmAÎocB™VeùÜ
(
vd©a
->
š¢RegCouÁ
, 
çl£
);

188 
	`dvmCİyB™VeùÜ
(
lšeB™s
, 
wÜkB™s
);

191 ià(
curIdx
 =ğ
wÜkBlock
->
fœ¡Addr
)

193 
	`as£¹
(
curIdx
 >ğ
backw¬dWidth
[curIdx]);

194 
curIdx
 -ğ
backw¬dWidth
[curIdx];

197 
wÜkBlock
->
vis™ed
 = 
Œue
;

198 
wÜkBlock
->
chªged
 = 
çl£
;

200 ià(
v”bo£
) {

201 
	`dumpLiveS‹
(
vd©a
, 
curIdx
, 
wÜkB™s
);

208 
Poš‹rS‘
* 
´eds
 = 
wÜkBlock
->
´edeûssÜs
;

209 
size_t
 
numP»ds
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
´eds
);

210 
´edIdx
;

212 
´edIdx
 = 0;…»dIdx < 
numP»ds
;…redIdx++) {

213 
VfyBasicBlock
* 
´ed
 =

214 (
VfyBasicBlock
*è
	`dvmPoš‹rS‘G‘EÁry
(
´eds
, 
´edIdx
);

216 
´ed
->
chªged
 = 
	`dvmCheckM”geB™VeùÜs
Õ»d->
liveRegs
, 
wÜkB™s
);

217 ià(
v”bo£
) {

218 
	`ALOGI
("merging cur=%04x into…red†ast=%04x (ch=%d)",

219 
curIdx
, 
´ed
->
Ï¡Addr
,…»d->
chªged
);

220 
	`dumpLiveS‹
(
vd©a
, 0xffç, 
´ed
->
liveRegs
);

221 
	`dumpLiveS‹
(
vd©a
, 0xfffb, 
wÜkB™s
);

230 ià(!
´ed
->
vis™ed
)

231 
´ed
->
chªged
 = 
Œue
;

237 ià(
´ed
->
chªged
)

238 
¡¬tGuess
 = 
´ed
;

242 #iâdeà
NDEBUG


248 
u4
 
checkIdx
;

249 
checkIdx
 = 0; checkIdx < 
vd©a
->
š¢sSize
; ) {

250 ià(
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
checkIdx
)) {

251 ià(
vd©a
->
»gi¡”Lšes
[
checkIdx
].
liveRegs
 =ğ
NULL
) {

252 
	`LOG_VFY_METH
(
vd©a
->
m‘hod
,

253 "GLITCH:‚ØliveReg fÜ GC…ošˆ0x%04x", 
checkIdx
);

254 
	`dvmAbÜt
();

256 } ià(
vd©a
->
»gi¡”Lšes
[
checkIdx
].
liveRegs
 !ğ
NULL
) {

257 
	`LOG_VFY_METH
(
vd©a
->
m‘hod
,

258 "GLITCH:†iveReg fÜ‚Ú-GC…ošˆ0x%04x", 
checkIdx
);

259 
	`dvmAbÜt
();

261 
u4
 
š¢Width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
checkIdx
);

262 
checkIdx
 +ğ
š¢Width
;

269 ià(!
	`m¬kDebugLoÿls
(
vd©a
))

270 
ba
;

272 
»suÉ
 = 
Œue
;

274 
ba
:

275 
	`ä“
(
backw¬dWidth
);

276  
»suÉ
;

277 
	}
}

283 
šlše
 
	$GEN
(
B™VeùÜ
* 
wÜkB™s
, 
u4
 
»gIndex
)

285 
	`dvmS‘B™
(
wÜkB™s
, 
»gIndex
);

286 
	}
}

291 
šlše
 
	$GENW
(
B™VeùÜ
* 
wÜkB™s
, 
u4
 
»gIndex
)

293 
	`dvmS‘B™
(
wÜkB™s
, 
»gIndex
);

294 
	`dvmS‘B™
(
wÜkB™s
, 
»gIndex
+1);

295 
	}
}

300 
šlše
 
	$KILL
(
B™VeùÜ
* 
wÜkB™s
, 
u4
 
»gIndex
)

302 
	`dvmCË¬B™
(
wÜkB™s
, 
»gIndex
);

303 
	}
}

308 
šlše
 
	$KILLW
(
B™VeùÜ
* 
wÜkB™s
, 
u4
 
»gIndex
)

310 
	`dvmCË¬B™
(
wÜkB™s
, 
»gIndex
);

311 
	`dvmCË¬B™
(
wÜkB™s
, 
»gIndex
+1);

312 
	}
}

319 
boŞ
 
	$´oûssIn¡ruùiÚ
(
V”if›rD©a
* 
vd©a
, 
u4
 
š¢Idx
,

320 
B™VeùÜ
* 
wÜkB™s
)

322 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

323 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

324 
DecodedIn¡ruùiÚ
 
decIn¢
;

326 
	`dexDecodeIn¡ruùiÚ
(
š¢s
, &
decIn¢
);

333 
decIn¢
.
İcode
) {

334 
OP_NOP
:

335 
OP_RETURN_VOID
:

336 
OP_GOTO
:

337 
OP_GOTO_16
:

338 
OP_GOTO_32
:

342 
OP_RETURN
:

343 
OP_RETURN_OBJECT
:

344 
OP_MONITOR_ENTER
:

345 
OP_MONITOR_EXIT
:

346 
OP_CHECK_CAST
:

347 
OP_THROW
:

348 
OP_PACKED_SWITCH
:

349 
OP_SPARSE_SWITCH
:

350 
OP_FILL_ARRAY_DATA
:

351 
OP_IF_EQZ
:

352 
OP_IF_NEZ
:

353 
OP_IF_LTZ
:

354 
OP_IF_GEZ
:

355 
OP_IF_GTZ
:

356 
OP_IF_LEZ
:

357 
OP_SPUT
:

358 
OP_SPUT_BOOLEAN
:

359 
OP_SPUT_BYTE
:

360 
OP_SPUT_CHAR
:

361 
OP_SPUT_SHORT
:

362 
OP_SPUT_OBJECT
:

364 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vA
);

367 
OP_RETURN_WIDE
:

368 
OP_SPUT_WIDE
:

370 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vA
);

373 
OP_IF_EQ
:

374 
OP_IF_NE
:

375 
OP_IF_LT
:

376 
OP_IF_GE
:

377 
OP_IF_GT
:

378 
OP_IF_LE
:

379 
OP_IPUT
:

380 
OP_IPUT_BOOLEAN
:

381 
OP_IPUT_BYTE
:

382 
OP_IPUT_CHAR
:

383 
OP_IPUT_SHORT
:

384 
OP_IPUT_OBJECT
:

386 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vA
);

387 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

390 
OP_IPUT_WIDE
:

392 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vA
);

393 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

396 
OP_APUT
:

397 
OP_APUT_BOOLEAN
:

398 
OP_APUT_BYTE
:

399 
OP_APUT_CHAR
:

400 
OP_APUT_SHORT
:

401 
OP_APUT_OBJECT
:

403 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vA
);

404 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

405 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
);

408 
OP_APUT_WIDE
:

410 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vA
);

411 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

412 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
);

415 
OP_FILLED_NEW_ARRAY
:

416 
OP_INVOKE_VIRTUAL
:

417 
OP_INVOKE_SUPER
:

418 
OP_INVOKE_DIRECT
:

419 
OP_INVOKE_STATIC
:

420 
OP_INVOKE_INTERFACE
:

423 
idx
;

424 
idx
 = 0; idx < 
decIn¢
.
vA
; idx++) {

425 
	`GEN
(
wÜkB™s
, 
decIn¢
.
¬g
[
idx
]);

430 
OP_FILLED_NEW_ARRAY_RANGE
:

431 
OP_INVOKE_VIRTUAL_RANGE
:

432 
OP_INVOKE_SUPER_RANGE
:

433 
OP_INVOKE_DIRECT_RANGE
:

434 
OP_INVOKE_STATIC_RANGE
:

435 
OP_INVOKE_INTERFACE_RANGE
:

438 
idx
;

439 
idx
 = 0; idx < 
decIn¢
.
vA
; idx++) {

440 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
 + 
idx
);

445 
OP_MOVE_RESULT
:

446 
OP_MOVE_RESULT_WIDE
:

447 
OP_MOVE_RESULT_OBJECT
:

448 
OP_MOVE_EXCEPTION
:

449 
OP_CONST_4
:

450 
OP_CONST_16
:

451 
OP_CONST
:

452 
OP_CONST_HIGH16
:

453 
OP_CONST_STRING
:

454 
OP_CONST_STRING_JUMBO
:

455 
OP_CONST_CLASS
:

456 
OP_NEW_INSTANCE
:

457 
OP_SGET
:

458 
OP_SGET_BOOLEAN
:

459 
OP_SGET_BYTE
:

460 
OP_SGET_CHAR
:

461 
OP_SGET_SHORT
:

462 
OP_SGET_OBJECT
:

464 
	`KILL
(
wÜkB™s
, 
decIn¢
.
vA
);

467 
OP_CONST_WIDE_16
:

468 
OP_CONST_WIDE_32
:

469 
OP_CONST_WIDE
:

470 
OP_CONST_WIDE_HIGH16
:

471 
OP_SGET_WIDE
:

473 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

476 
OP_MOVE
:

477 
OP_MOVE_FROM16
:

478 
OP_MOVE_16
:

479 
OP_MOVE_OBJECT
:

480 
OP_MOVE_OBJECT_FROM16
:

481 
OP_MOVE_OBJECT_16
:

482 
OP_INSTANCE_OF
:

483 
OP_ARRAY_LENGTH
:

484 
OP_NEW_ARRAY
:

485 
OP_IGET
:

486 
OP_IGET_BOOLEAN
:

487 
OP_IGET_BYTE
:

488 
OP_IGET_CHAR
:

489 
OP_IGET_SHORT
:

490 
OP_IGET_OBJECT
:

491 
OP_NEG_INT
:

492 
OP_NOT_INT
:

493 
OP_NEG_FLOAT
:

494 
OP_INT_TO_FLOAT
:

495 
OP_FLOAT_TO_INT
:

496 
OP_INT_TO_BYTE
:

497 
OP_INT_TO_CHAR
:

498 
OP_INT_TO_SHORT
:

499 
OP_ADD_INT_LIT16
:

500 
OP_RSUB_INT
:

501 
OP_MUL_INT_LIT16
:

502 
OP_DIV_INT_LIT16
:

503 
OP_REM_INT_LIT16
:

504 
OP_AND_INT_LIT16
:

505 
OP_OR_INT_LIT16
:

506 
OP_XOR_INT_LIT16
:

507 
OP_ADD_INT_LIT8
:

508 
OP_RSUB_INT_LIT8
:

509 
OP_MUL_INT_LIT8
:

510 
OP_DIV_INT_LIT8
:

511 
OP_REM_INT_LIT8
:

512 
OP_SHL_INT_LIT8
:

513 
OP_SHR_INT_LIT8
:

514 
OP_USHR_INT_LIT8
:

515 
OP_AND_INT_LIT8
:

516 
OP_OR_INT_LIT8
:

517 
OP_XOR_INT_LIT8
:

519 
	`KILL
(
wÜkB™s
, 
decIn¢
.
vA
);

520 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

523 
OP_IGET_WIDE
:

524 
OP_INT_TO_LONG
:

525 
OP_INT_TO_DOUBLE
:

526 
OP_FLOAT_TO_LONG
:

527 
OP_FLOAT_TO_DOUBLE
:

529 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

530 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

533 
OP_LONG_TO_INT
:

534 
OP_LONG_TO_FLOAT
:

535 
OP_DOUBLE_TO_INT
:

536 
OP_DOUBLE_TO_FLOAT
:

538 
	`KILL
(
wÜkB™s
, 
decIn¢
.
vA
);

539 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

542 
OP_MOVE_WIDE
:

543 
OP_MOVE_WIDE_FROM16
:

544 
OP_MOVE_WIDE_16
:

545 
OP_NEG_LONG
:

546 
OP_NOT_LONG
:

547 
OP_NEG_DOUBLE
:

548 
OP_LONG_TO_DOUBLE
:

549 
OP_DOUBLE_TO_LONG
:

551 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

552 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

555 
OP_CMPL_FLOAT
:

556 
OP_CMPG_FLOAT
:

557 
OP_AGET
:

558 
OP_AGET_BOOLEAN
:

559 
OP_AGET_BYTE
:

560 
OP_AGET_CHAR
:

561 
OP_AGET_SHORT
:

562 
OP_AGET_OBJECT
:

563 
OP_ADD_INT
:

564 
OP_SUB_INT
:

565 
OP_MUL_INT
:

566 
OP_REM_INT
:

567 
OP_DIV_INT
:

568 
OP_AND_INT
:

569 
OP_OR_INT
:

570 
OP_XOR_INT
:

571 
OP_SHL_INT
:

572 
OP_SHR_INT
:

573 
OP_USHR_INT
:

574 
OP_ADD_FLOAT
:

575 
OP_SUB_FLOAT
:

576 
OP_MUL_FLOAT
:

577 
OP_DIV_FLOAT
:

578 
OP_REM_FLOAT
:

580 
	`KILL
(
wÜkB™s
, 
decIn¢
.
vA
);

581 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

582 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
);

585 
OP_AGET_WIDE
:

587 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

588 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

589 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
);

592 
OP_CMPL_DOUBLE
:

593 
OP_CMPG_DOUBLE
:

594 
OP_CMP_LONG
:

596 
	`KILL
(
wÜkB™s
, 
decIn¢
.
vA
);

597 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

598 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vC
);

601 
OP_SHL_LONG
:

602 
OP_SHR_LONG
:

603 
OP_USHR_LONG
:

605 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

606 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

607 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vC
);

610 
OP_ADD_LONG
:

611 
OP_SUB_LONG
:

612 
OP_MUL_LONG
:

613 
OP_DIV_LONG
:

614 
OP_REM_LONG
:

615 
OP_AND_LONG
:

616 
OP_OR_LONG
:

617 
OP_XOR_LONG
:

618 
OP_ADD_DOUBLE
:

619 
OP_SUB_DOUBLE
:

620 
OP_MUL_DOUBLE
:

621 
OP_DIV_DOUBLE
:

622 
OP_REM_DOUBLE
:

624 
	`KILLW
(
wÜkB™s
, 
decIn¢
.
vA
);

625 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

626 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vC
);

629 
OP_ADD_INT_2ADDR
:

630 
OP_SUB_INT_2ADDR
:

631 
OP_MUL_INT_2ADDR
:

632 
OP_REM_INT_2ADDR
:

633 
OP_SHL_INT_2ADDR
:

634 
OP_SHR_INT_2ADDR
:

635 
OP_USHR_INT_2ADDR
:

636 
OP_AND_INT_2ADDR
:

637 
OP_OR_INT_2ADDR
:

638 
OP_XOR_INT_2ADDR
:

639 
OP_DIV_INT_2ADDR
:

642 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vA
);

643 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

646 
OP_SHL_LONG_2ADDR
:

647 
OP_SHR_LONG_2ADDR
:

648 
OP_USHR_LONG_2ADDR
:

651 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vA
);

652 
	`GEN
(
wÜkB™s
, 
decIn¢
.
vB
);

655 
OP_ADD_LONG_2ADDR
:

656 
OP_SUB_LONG_2ADDR
:

657 
OP_MUL_LONG_2ADDR
:

658 
OP_DIV_LONG_2ADDR
:

659 
OP_REM_LONG_2ADDR
:

660 
OP_AND_LONG_2ADDR
:

661 
OP_OR_LONG_2ADDR
:

662 
OP_XOR_LONG_2ADDR
:

663 
OP_ADD_FLOAT_2ADDR
:

664 
OP_SUB_FLOAT_2ADDR
:

665 
OP_MUL_FLOAT_2ADDR
:

666 
OP_DIV_FLOAT_2ADDR
:

667 
OP_REM_FLOAT_2ADDR
:

668 
OP_ADD_DOUBLE_2ADDR
:

669 
OP_SUB_DOUBLE_2ADDR
:

670 
OP_MUL_DOUBLE_2ADDR
:

671 
OP_DIV_DOUBLE_2ADDR
:

672 
OP_REM_DOUBLE_2ADDR
:

675 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vA
);

676 
	`GENW
(
wÜkB™s
, 
decIn¢
.
vB
);

680 
OP_THROW_VERIFICATION_ERROR
:

685 
OP_EXECUTE_INLINE
:

686 
OP_EXECUTE_INLINE_RANGE
:

687 
OP_IGET_QUICK
:

688 
OP_IGET_WIDE_QUICK
:

689 
OP_IGET_OBJECT_QUICK
:

690 
OP_IPUT_QUICK
:

691 
OP_IPUT_WIDE_QUICK
:

692 
OP_IPUT_OBJECT_QUICK
:

693 
OP_INVOKE_VIRTUAL_QUICK
:

694 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

695 
OP_INVOKE_SUPER_QUICK
:

696 
OP_INVOKE_SUPER_QUICK_RANGE
:

700 
OP_INVOKE_OBJECT_INIT_RANGE
:

701 
OP_RETURN_VOID_BARRIER
:

702 
OP_SPUT_VOLATILE
:

703 
OP_SPUT_OBJECT_VOLATILE
:

704 
OP_SPUT_WIDE_VOLATILE
:

705 
OP_IPUT_VOLATILE
:

706 
OP_IPUT_OBJECT_VOLATILE
:

707 
OP_IPUT_WIDE_VOLATILE
:

708 
OP_SGET_VOLATILE
:

709 
OP_SGET_OBJECT_VOLATILE
:

710 
OP_SGET_WIDE_VOLATILE
:

711 
OP_IGET_VOLATILE
:

712 
OP_IGET_OBJECT_VOLATILE
:

713 
OP_IGET_WIDE_VOLATILE
:

717 
OP_UNUSED_3E
:

718 
OP_UNUSED_3F
:

719 
OP_UNUSED_40
:

720 
OP_UNUSED_41
:

721 
OP_UNUSED_42
:

722 
OP_UNUSED_43
:

723 
OP_UNUSED_73
:

724 
OP_UNUSED_79
:

725 
OP_UNUSED_7A
:

726 
OP_BREAKPOINT
:

727 
OP_UNUSED_FF
:

728  
çl£
;

731  
Œue
;

732 
	}
}

737 
	$m¬kLoÿlsCb
(* 
ùxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
, u4 
’dAdd»ss
,

738 cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
, cÚ¡ * 
sigÇtu»
)

740 
V”if›rD©a
* 
vd©a
 = (V”if›rD©a*è
ùxt
;

741 
boŞ
 
v”bo£
 = 
	`dvmWªtV”bo£V”ifiÿtiÚ
(
vd©a
->
m‘hod
);

743 ià(
v”bo£
) {

744 
	`ALOGI
("%04x-%04x %2d (%s %s)",

745 
¡¬tAdd»ss
, 
’dAdd»ss
, 
»g
, 
Çme
, 
desütÜ
);

748 
boŞ
 
wide
 = (
desütÜ
[0] == 'D' || descriptor[0] == 'J');

749 
	`as£¹
(
»g
 <ğ
vd©a
->
š¢RegCouÁ
 + (
wide
 ? 1 : 0));

755 
idx
;

756 
idx
 = 
¡¬tAdd»ss
; idx < 
’dAdd»ss
; idx++) {

757 
B™VeùÜ
* 
liveRegs
 = 
vd©a
->
»gi¡”Lšes
[
idx
].liveRegs;

758 ià(
liveRegs
 !ğ
NULL
) {

759 ià(
wide
) {

760 
	`GENW
(
liveRegs
, 
»g
);

762 
	`GEN
(
liveRegs
, 
»g
);

766 
	}
}

784 
boŞ
 
	$m¬kDebugLoÿls
(
V”if›rD©a
* 
vd©a
)

786 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

788 
	`dexDecodeDebugInfo
(
m‘h
->
şazz
->
pDvmDex
->
pDexFe
, 
	`dvmG‘M‘hodCode
(meth),

789 
m‘h
->
şazz
->
desütÜ
, m‘h->
´ÙÙy³
.
´ÙoIdx
, m‘h->
acûssFÏgs
,

790 
NULL
, 
m¬kLoÿlsCb
, 
vd©a
);

792  
Œue
;

793 
	}
}

801 
	$dumpLiveS‹
(cÚ¡ 
V”if›rD©a
* 
vd©a
, 
u4
 
curIdx
,

802 cÚ¡ 
B™VeùÜ
* 
wÜkB™s
)

804 
u4
 
š¢RegCouÁ
 = 
vd©a
->insnRegCount;

805 
size_t
 
»gCh¬Size
 = 
š¢RegCouÁ
 + (insnRegCount-1)/4 + 2 +1;

806 
»gCh¬s
[
»gCh¬Size
 +1];

807 
idx
;

809 
	`mem£t
(
»gCh¬s
, ' ', 
»gCh¬Size
);

810 
»gCh¬s
[0] = '[';

811 ià(
š¢RegCouÁ
 == 0)

812 
»gCh¬s
[1] = ']';

814 
»gCh¬s
[1 + (
š¢RegCouÁ
-1) + (insnRegCount-1)/4 +1] = ']';

815 
»gCh¬s
[
»gCh¬Size
] = '\0';

817 
idx
 = 0; idx < 
š¢RegCouÁ
; idx++) {

818 
ch
 = 
	`dvmIsB™S‘
(
wÜkB™s
, 
idx
) ? '+' : '-';

819 
»gCh¬s
[1 + 
idx
 + (idx/4)] = 
ch
;

822 
	`ALOGI
("0x%04x %s", 
curIdx
, 
»gCh¬s
);

823 
	}
}

	@vm/analysis/Liveness.h

20 #iâdeà
DALVIK_LIVENESS_H_


21 
	#DALVIK_LIVENESS_H_


	)

23 
	gV”if›rD©a
;

25 
boŞ
 
dvmCompu‹Liv’ess
(
V”if›rD©a
* 
vd©a
);

	@vm/analysis/Optimize.cpp

21 
	~"D®vik.h
"

22 
	~"libdex/In¡rUts.h
"

23 
	~"O±imize.h
"

25 
	~<zlib.h
>

27 
	~<¡dlib.h
>

33 
	sIÆšeSub
 {

34 
M‘hod
* 
	mm‘hod
;

35 
	mšlšeIdx
;

40 
İtimizeM‘hod
(
M‘hod
* 
m‘hod
, 
boŞ
 
es£ÁŸlOÆy
);

41 
»wr™eIn¡F›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
quickOpc
,

42 
Opcode
 
vŞ©eOpc
);

43 
»wr™eSticF›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
vŞ©eOpc
);

44 
»wr™eVœtu®Invoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
ÃwOpc
);

45 
boŞ
 
»wr™eInvokeObjeùIn™
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
);

46 
boŞ
 
»wr™eExecu‹IÆše
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

47 
M‘hodTy³
 
m‘hodTy³
);

48 
boŞ
 
»wr™eExecu‹IÆšeRªge
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

49 
M‘hodTy³
 
m‘hodTy³
);

50 
»wr™eR‘uºVoid
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
);

51 
boŞ
 
ÃedsR‘uºB¬r›r
(
M‘hod
* 
m‘hod
);

60 
boŞ
 
	$dvmC»©eIÆšeSubsTabË
()

62 cÚ¡ 
IÆšeO³¿tiÚ
* 
İs
 = 
	`dvmG‘IÆšeOpsTabË
();

63 cÚ¡ 
couÁ
 = 
	`dvmG‘IÆšeOpsTabËL’gth
();

64 
IÆšeSub
* 
bË
;

65 
i
, 
bËIndex
;

67 
	`as£¹
(
gDvm
.
šlšeSubs
 =ğ
NULL
);

72 
bË
 = (
IÆšeSub
*è
	`ÿÎoc
(
couÁ
 + 1, (InlineSub));

74 
bËIndex
 = 0;

75 
i
 = 0; i < 
couÁ
; i++) {

76 
M‘hod
* 
m‘hod
 = 
	`dvmFšdIÆšabËM‘hod
(
İs
[
i
].
şassDesütÜ
,

77 
İs
[
i
].
m‘hodName
, ops[i].
m‘hodSigÇtu»
);

78 ià(
m‘hod
 =ğ
NULL
) {

83 
	`ALOGE
("Unableo find method for inlining: %s.%s:%s",

84 
İs
[
i
].
şassDesütÜ
, ops[i].
m‘hodName
,

85 
İs
[
i
].
m‘hodSigÇtu»
);

86  
çl£
;

89 
bË
[
bËIndex
].
m‘hod
 = method;

90 
bË
[
bËIndex
].
šlšeIdx
 = 
i
;

91 
bËIndex
++;

95 
bË
[
bËIndex
].
m‘hod
 = 
NULL
;

97 
gDvm
.
šlšeSubs
 = 
bË
;

98  
Œue
;

99 
	}
}

104 
	$dvmF»eIÆšeSubsTabË
()

106 
	`ä“
(
gDvm
.
šlšeSubs
);

107 
gDvm
.
šlšeSubs
 = 
NULL
;

108 
	}
}

120 
	$dvmO±imizeCÏss
(
CÏssObjeù
* 
şazz
, 
boŞ
 
es£ÁŸlOÆy
)

122 
i
;

124 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

125 
	`İtimizeM‘hod
(&
şazz
->
dœeùM‘hods
[
i
], 
es£ÁŸlOÆy
);

127 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

128 
	`İtimizeM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
], 
es£ÁŸlOÆy
);

130 
	}
}

146 
	$İtimizeM‘hod
(
M‘hod
* 
m‘hod
, 
boŞ
 
es£ÁŸlOÆy
)

148 
boŞ
 
ÃedR‘B¬
, 
fÜSmp
;

149 
u4
 
š¢sSize
;

150 
u2
* 
š¢s
;

152 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è|| 
	`dvmIsAb¡¿ùM‘hod
(method))

155 
fÜSmp
 = 
gDvm
.
dexO±FÜSmp
;

156 
ÃedR‘B¬
 = 
	`ÃedsR‘uºB¬r›r
(
m‘hod
);

158 
š¢s
 = (
u2
*è
m‘hod
->insns;

159 
	`as£¹
(
š¢s
 !ğ
NULL
);

160 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

162 
š¢sSize
 > 0) {

163 
Opcode
 
İc
, 
quickOpc
, 
vŞ©eOpc
;

164 
size_t
 
width
;

165 
boŞ
 
m©ched
 = 
Œue
;

167 
İc
 = 
	`dexOpcodeFromCodeUn™
(*
š¢s
);

168 
width
 = 
	`dexG‘WidthFromIn¡ruùiÚ
(
š¢s
);

169 
vŞ©eOpc
 = 
OP_NOP
;

200 
İc
) {

201 
OP_IGET
:

202 
OP_IGET_BOOLEAN
:

203 
OP_IGET_BYTE
:

204 
OP_IGET_CHAR
:

205 
OP_IGET_SHORT
:

206 
quickOpc
 = 
OP_IGET_QUICK
;

207 ià(
fÜSmp
)

208 
vŞ©eOpc
 = 
OP_IGET_VOLATILE
;

209 
»wr™e_š¡_f›ld
;

210 
OP_IGET_WIDE
:

211 
quickOpc
 = 
OP_IGET_WIDE_QUICK
;

212 
vŞ©eOpc
 = 
OP_IGET_WIDE_VOLATILE
;

213 
»wr™e_š¡_f›ld
;

214 
OP_IGET_OBJECT
:

215 
quickOpc
 = 
OP_IGET_OBJECT_QUICK
;

216 ià(
fÜSmp
)

217 
vŞ©eOpc
 = 
OP_IGET_OBJECT_VOLATILE
;

218 
»wr™e_š¡_f›ld
;

219 
OP_IPUT
:

220 
OP_IPUT_BOOLEAN
:

221 
OP_IPUT_BYTE
:

222 
OP_IPUT_CHAR
:

223 
OP_IPUT_SHORT
:

224 
quickOpc
 = 
OP_IPUT_QUICK
;

225 ià(
fÜSmp
)

226 
vŞ©eOpc
 = 
OP_IPUT_VOLATILE
;

227 
»wr™e_š¡_f›ld
;

228 
OP_IPUT_WIDE
:

229 
quickOpc
 = 
OP_IPUT_WIDE_QUICK
;

230 
vŞ©eOpc
 = 
OP_IPUT_WIDE_VOLATILE
;

231 
»wr™e_š¡_f›ld
;

232 
OP_IPUT_OBJECT
:

233 
quickOpc
 = 
OP_IPUT_OBJECT_QUICK
;

234 ià(
fÜSmp
)

235 
vŞ©eOpc
 = 
OP_IPUT_OBJECT_VOLATILE
;

237 
»wr™e_š¡_f›ld
:

238 ià(
es£ÁŸlOÆy
)

239 
quickOpc
 = 
OP_NOP
;

240 ià(
quickOpc
 !ğ
OP_NOP
 || 
vŞ©eOpc
 != OP_NOP)

241 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
quickOpc
, 
vŞ©eOpc
);

244 
OP_SGET
:

245 
OP_SGET_BOOLEAN
:

246 
OP_SGET_BYTE
:

247 
OP_SGET_CHAR
:

248 
OP_SGET_SHORT
:

249 ià(
fÜSmp
)

250 
vŞ©eOpc
 = 
OP_SGET_VOLATILE
;

251 
»wr™e_¡©ic_f›ld
;

252 
OP_SGET_WIDE
:

253 
vŞ©eOpc
 = 
OP_SGET_WIDE_VOLATILE
;

254 
»wr™e_¡©ic_f›ld
;

255 
OP_SGET_OBJECT
:

256 ià(
fÜSmp
)

257 
vŞ©eOpc
 = 
OP_SGET_OBJECT_VOLATILE
;

258 
»wr™e_¡©ic_f›ld
;

259 
OP_SPUT
:

260 
OP_SPUT_BOOLEAN
:

261 
OP_SPUT_BYTE
:

262 
OP_SPUT_CHAR
:

263 
OP_SPUT_SHORT
:

264 ià(
fÜSmp
)

265 
vŞ©eOpc
 = 
OP_SPUT_VOLATILE
;

266 
»wr™e_¡©ic_f›ld
;

267 
OP_SPUT_WIDE
:

268 
vŞ©eOpc
 = 
OP_SPUT_WIDE_VOLATILE
;

269 
»wr™e_¡©ic_f›ld
;

270 
OP_SPUT_OBJECT
:

271 ià(
fÜSmp
)

272 
vŞ©eOpc
 = 
OP_SPUT_OBJECT_VOLATILE
;

274 
»wr™e_¡©ic_f›ld
:

275 ià(
vŞ©eOpc
 !ğ
OP_NOP
)

276 
	`»wr™eSticF›ld
(
m‘hod
, 
š¢s
, 
vŞ©eOpc
);

279 
OP_INVOKE_DIRECT
:

280 
OP_INVOKE_DIRECT_RANGE
:

281 ià(!
	`»wr™eInvokeObjeùIn™
(
m‘hod
, 
š¢s
)) {

283 
m©ched
 = 
çl£
;

286 
OP_RETURN_VOID
:

287 ià(
ÃedR‘B¬
)

288 
	`»wr™eR‘uºVoid
(
m‘hod
, 
š¢s
);

291 
m©ched
 = 
çl£
;

301 ià(!
m©ched
 && !
es£ÁŸlOÆy
) {

302 
İc
) {

303 
OP_INVOKE_VIRTUAL
:

304 ià(!
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_VIRTUAL
)) {

305 
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
,

306 
OP_INVOKE_VIRTUAL_QUICK
);

309 
OP_INVOKE_VIRTUAL_RANGE
:

310 ià(!
	`»wr™eExecu‹IÆšeRªge
(
m‘hod
, 
š¢s
, 
METHOD_VIRTUAL
)) {

311 
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
,

312 
OP_INVOKE_VIRTUAL_QUICK_RANGE
);

315 
OP_INVOKE_SUPER
:

316 
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_SUPER_QUICK
);

318 
OP_INVOKE_SUPER_RANGE
:

319 
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_SUPER_QUICK_RANGE
);

321 
OP_INVOKE_DIRECT
:

322 
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_DIRECT
);

324 
OP_INVOKE_DIRECT_RANGE
:

325 
	`»wr™eExecu‹IÆšeRªge
(
m‘hod
, 
š¢s
, 
METHOD_DIRECT
);

327 
OP_INVOKE_STATIC
:

328 
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_STATIC
);

330 
OP_INVOKE_STATIC_RANGE
:

331 
	`»wr™eExecu‹IÆšeRªge
(
m‘hod
, 
š¢s
, 
METHOD_STATIC
);

339 
	`as£¹
(
width
 > 0);

340 
	`as£¹
(
width
 <ğ
š¢sSize
);

341 
	`as£¹
(
width
 =ğ
	`dexG‘WidthFromIn¡ruùiÚ
(
š¢s
));

343 
š¢s
 +ğ
width
;

344 
š¢sSize
 -ğ
width
;

347 
	`as£¹
(
š¢sSize
 == 0);

348 
	}
}

357 
	$dvmUpd©eCodeUn™
(cÚ¡ 
M‘hod
* 
m‘h
, 
u2
* 
±r
, u2 
ÃwV®
)

359 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

361 ià(!
pDvmDex
->
isM­³dR—dOÆy
) {

363 *
±r
 = 
ÃwV®
;

366 
	`dvmDexChªgeDex2
(
pDvmDex
, 
±r
, 
ÃwV®
);

368 
	}
}

377 
šlše
 
	$upd©eOpcode
(cÚ¡ 
M‘hod
* 
m‘h
, 
u2
* 
±r
, 
Opcode
 
İcode
)

379 ià(
İcode
 >= 256) {

381 
	`as£¹
((
±r
[0] & 0xff) == 0xff);

382 
	`dvmUpd©eCodeUn™
(
m‘h
, 
±r
, (
u2
è(
İcode
 << 8) | 0x00ff);

385 
	`as£¹
((
±r
[0] & 0xff) != 0xff);

386 
	`dvmUpd©eCodeUn™
(
m‘h
, 
±r
, (±r[0] & 0xff00è| (
u2
è
İcode
);

388 
	}
}

397 
	$tw—kLßd”
(
CÏssObjeù
* 
»ã¼”
, CÏssObjeù* 
»sCÏss
)

399 ià(!
gDvm
.
İtimizšg
)

401 
	`as£¹
(
»ã¼”
->
şassLßd”
 =ğ
NULL
);

402 
	`as£¹
(
»sCÏss
->
şassLßd”
 =ğ
NULL
);

404 ià(!
gDvm
.
İtimizšgBoÙ¡¿pCÏss
) {

406 ià(
	`dvmIsA¼ayCÏss
(
»sCÏss
))

407 
»sCÏss
 =„esCÏss->
–em’tCÏss
;

408 ià(
»ã¼”
->
pDvmDex
 !ğ
»sCÏss
->pDvmDex)

409 
»sCÏss
->
şassLßd”
 = (
Objeù
*) 0xdead3333;

411 
	}
}

416 
	$uÁw—kLßd”
(
CÏssObjeù
* 
»ã¼”
, CÏssObjeù* 
»sCÏss
)

418 ià(!
gDvm
.
İtimizšg
 || gDvm.
İtimizšgBoÙ¡¿pCÏss
)

421 ià(
	`dvmIsA¼ayCÏss
(
»sCÏss
))

422 
»sCÏss
 =„esCÏss->
–em’tCÏss
;

423 
»sCÏss
->
şassLßd”
 = 
NULL
;

424 
	}
}

437 
CÏssObjeù
* 
	$dvmO±ResŞveCÏss
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
şassIdx
,

438 
V”ifyE¼Ü
* 
pFau»
)

440 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

441 
CÏssObjeù
* 
»sCÏss
;

446 
»sCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
);

447 ià(
»sCÏss
 =ğ
NULL
) {

448 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
);

449 ià(
şassName
[0] != '\0' && className[1] == '\0') {

451 
»sCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
şassName
[0]);

453 
»sCÏss
 = 
	`dvmFšdCÏssNoIn™
(
şassName
, 
»ã¼”
->
şassLßd”
);

455 ià(
»sCÏss
 =ğ
NULL
) {

457 
	`ALOGV
("DexOpt: class %d (%s)‚ot found",

458 
şassIdx
,

459 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
));

460 ià(
pFau»
 !ğ
NULL
) {

462 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
	`dvmTh»adS–f
());

463 
Œue
) {

464 
Objeù
* 
ÿu£
 = 
	`dvmG‘Exû±iÚCau£
(
exûp
);

465 ià(
ÿu£
 =ğ
NULL
)

467 
exûp
 = 
ÿu£
;

469 ià(
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

472 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

474 *
pFau»
 = 
VERIFY_ERROR_NO_CLASS
;

477 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

478  
NULL
;

484 
	`dvmDexS‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
, 
»sCÏss
);

488 ià(
	`IS_CLASS_FLAG_SET
(
»sCÏss
, 
CLASS_MULTIPLE_DEFS
)) {

489 
	`ALOGI
("DexOpt:‚ot„esolving‡mbiguous class '%s'",

490 
»sCÏss
->
desütÜ
);

491 ià(
pFau»
 !ğ
NULL
)

492 *
pFau»
 = 
VERIFY_ERROR_NO_CLASS
;

493  
NULL
;

497 
	`tw—kLßd”
(
»ã¼”
, 
»sCÏss
);

498 
boŞ
 
®lowed
 = 
	`dvmCheckCÏssAcûss
(
»ã¼”
, 
»sCÏss
);

499 
	`uÁw—kLßd”
(
»ã¼”
, 
»sCÏss
);

500 ià(!
®lowed
) {

501 
	`ALOGW
("DexOpt:„esolve class illegal‡ccess: %s -> %s",

502 
»ã¼”
->
desütÜ
, 
»sCÏss
->descriptor);

503 ià(
pFau»
 !ğ
NULL
)

504 *
pFau»
 = 
VERIFY_ERROR_ACCESS_CLASS
;

505  
NULL
;

508  
»sCÏss
;

509 
	}
}

516 
In¡F›ld
* 
	$dvmO±ResŞveIn¡F›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
,

517 
V”ifyE¼Ü
* 
pFau»
)

519 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

520 
In¡F›ld
* 
»sF›ld
;

522 
»sF›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
);

523 ià(
»sF›ld
 =ğ
NULL
) {

524 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

525 
CÏssObjeù
* 
»sCÏss
;

527 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
if›ldIdx
);

532 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
pFau»
);

533 ià(
»sCÏss
 =ğ
NULL
) {

535 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

536 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

537  
NULL
;

540 
»sF›ld
 = (
In¡F›ld
*)
	`dvmFšdF›ldH›r
(
»sCÏss
,

541 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

542 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

543 ià(
»sF›ld
 =ğ
NULL
) {

544 
	`ALOGD
("DexOpt: couldn't find field %s.%s",

545 
»sCÏss
->
desütÜ
,

546 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

547 ià(
pFau»
 !ğ
NULL
)

548 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

549  
NULL
;

551 ià(
	`dvmIsSticF›ld
(
»sF›ld
)) {

552 
	`ALOGD
("DexOpt: wanted instance, got static for field %s.%s",

553 
»sCÏss
->
desütÜ
,

554 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

555 ià(
pFau»
 !ğ
NULL
)

556 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

557  
NULL
;

563 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
, (
F›ld
*è
»sF›ld
);

567 
	`tw—kLßd”
(
»ã¼”
, 
»sF›ld
->
şazz
);

568 
boŞ
 
®lowed
 = 
	`dvmCheckF›ldAcûss
(
»ã¼”
, (
F›ld
*)
»sF›ld
);

569 
	`uÁw—kLßd”
(
»ã¼”
, 
»sF›ld
->
şazz
);

570 ià(!
®lowed
) {

571 
	`ALOGI
("DexOpt:‡ccess denied from %so field %s.%s",

572 
»ã¼”
->
desütÜ
, 
»sF›ld
->
şazz
->descriptor,

573 
»sF›ld
->
Çme
);

574 ià(
pFau»
 !ğ
NULL
)

575 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

576  
NULL
;

579  
»sF›ld
;

580 
	}
}

589 
SticF›ld
* 
	$dvmO±ResŞveSticF›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
,

590 
V”ifyE¼Ü
* 
pFau»
)

592 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

593 
SticF›ld
* 
»sF›ld
;

595 
»sF›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
);

596 ià(
»sF›ld
 =ğ
NULL
) {

597 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

598 
CÏssObjeù
* 
»sCÏss
;

600 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
sf›ldIdx
);

605 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
pFau»
);

606 ià(
»sCÏss
 =ğ
NULL
) {

608 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

609 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

610  
NULL
;

613 cÚ¡ * 
f›ldName
 =

614 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

616 
»sF›ld
 = (
SticF›ld
*)
	`dvmFšdF›ldH›r
(
»sCÏss
, 
f›ldName
,

617 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

618 ià(
»sF›ld
 =ğ
NULL
) {

619 
	`ALOGD
("DexOpt: couldn't find static field %s.%s",

620 
»sCÏss
->
desütÜ
, 
f›ldName
);

621 ià(
pFau»
 !ğ
NULL
)

622 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

623  
NULL
;

625 ià(!
	`dvmIsSticF›ld
(
»sF›ld
)) {

626 
	`ALOGD
("DexOpt: wanted static, got instance for field %s.%s",

627 
»sCÏss
->
desütÜ
, 
f›ldName
);

628 ià(
pFau»
 !ğ
NULL
)

629 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

630  
NULL
;

640 ià(
gDvm
.
İtimizšg
)

641 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
, (
F›ld
*è
»sF›ld
);

645 
	`tw—kLßd”
(
»ã¼”
, 
»sF›ld
->
şazz
);

646 
boŞ
 
®lowed
 = 
	`dvmCheckF›ldAcûss
(
»ã¼”
, (
F›ld
*)
»sF›ld
);

647 
	`uÁw—kLßd”
(
»ã¼”
, 
»sF›ld
->
şazz
);

648 ià(!
®lowed
) {

649 
	`ALOGI
("DexOpt:‡ccess denied from %so field %s.%s",

650 
»ã¼”
->
desütÜ
, 
»sF›ld
->
şazz
->descriptor,

651 
»sF›ld
->
Çme
);

652 ià(
pFau»
 !ğ
NULL
)

653 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

654  
NULL
;

657  
»sF›ld
;

658 
	}
}

677 
	$»wr™eIn¡F›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
quickOpc
,

678 
Opcode
 
vŞ©eOpc
)

680 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

681 
u2
 
f›ldIdx
 = 
š¢s
[1];

682 
In¡F›ld
* 
š¡F›ld
;

684 
š¡F›ld
 = 
	`dvmO±ResŞveIn¡F›ld
(
şazz
, 
f›ldIdx
, 
NULL
);

685 ià(
š¡F›ld
 =ğ
NULL
) {

686 
	`ALOGI
("DexOpt: unableo optimize instance field„ef "

688 
f›ldIdx
, (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

689 
m‘hod
->
Çme
);

693 ià(
vŞ©eOpc
 !ğ
OP_NOP
 && 
	`dvmIsVŞ©eF›ld
(
š¡F›ld
)) {

694 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
vŞ©eOpc
);

695 
	`ALOGV
("DexOpt:„ewrote ifield‡ccess %s.%s --> volatile",

696 
š¡F›ld
->
şazz
->
desütÜ
, in¡F›ld->
Çme
);

697 } ià(
quickOpc
 !ğ
OP_NOP
 && 
š¡F›ld
->
by‹Off£t
 < 65536) {

698 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
quickOpc
);

699 
	`dvmUpd©eCodeUn™
(
m‘hod
, 
š¢s
+1, (
u2
è
š¡F›ld
->
by‹Off£t
);

700 
	`ALOGV
("DexOpt:„ewrote ifield‡ccess %s.%s --> %d",

701 
š¡F›ld
->
şazz
->
desütÜ
, in¡F›ld->
Çme
,

702 
š¡F›ld
->
by‹Off£t
);

704 
	`ALOGV
("DexOpt:‚o„ewrite of ifield‡ccess %s.%s",

705 
š¡F›ld
->
şazz
->
desütÜ
, in¡F›ld->
Çme
);

709 
	}
}

717 
	$»wr™eSticF›ld0
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
vŞ©eOpc
,

718 
u4
 
f›ldIdx
)

720 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

721 
SticF›ld
* 
¡©icF›ld
;

723 
	`as£¹
(
vŞ©eOpc
 !ğ
OP_NOP
);

725 
¡©icF›ld
 = 
	`dvmO±ResŞveSticF›ld
(
şazz
, 
f›ldIdx
, 
NULL
);

726 ià(
¡©icF›ld
 =ğ
NULL
) {

727 
	`ALOGI
("DexOpt: unableo optimize static field„ef "

729 
f›ldIdx
, (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

730 
m‘hod
->
Çme
);

734 ià(
	`dvmIsVŞ©eF›ld
(
¡©icF›ld
)) {

735 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
vŞ©eOpc
);

736 
	`ALOGV
("DexOpt:„ewrote sfield‡ccess %s.%s --> volatile",

737 
¡©icF›ld
->
şazz
->
desütÜ
, sticF›ld->
Çme
);

739 
	}
}

741 
	$»wr™eSticF›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
vŞ©eOpc
)

743 
u2
 
f›ldIdx
 = 
š¢s
[1];

744 
	`»wr™eSticF›ld0
(
m‘hod
, 
š¢s
, 
vŞ©eOpc
, 
f›ldIdx
);

745 
	}
}

754 
M‘hod
* 
	$dvmO±ResŞveM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

755 
M‘hodTy³
 
m‘hodTy³
, 
V”ifyE¼Ü
* 
pFau»
)

757 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

758 
M‘hod
* 
»sM‘hod
;

760 
	`as£¹
(
m‘hodTy³
 =ğ
METHOD_DIRECT
 ||

761 
m‘hodTy³
 =ğ
METHOD_VIRTUAL
 ||

762 
m‘hodTy³
 =ğ
METHOD_STATIC
);

764 
	`LOGVV
("---„esŞvšg m‘hod %u (»ã¼”=%s)", 
m‘hodIdx
,

765 
»ã¼”
->
desütÜ
);

767 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
);

768 ià(
»sM‘hod
 =ğ
NULL
) {

769 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

770 
CÏssObjeù
* 
»sCÏss
;

772 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

774 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
pFau»
);

775 ià(
»sCÏss
 =ğ
NULL
) {

780 
	`ALOGV
("DexOpt: can't find called method's class (?.%s)",

781 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
));

782 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

783  
NULL
;

785 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

787 
	`ALOGW
("DexOpt: method is in‡n interface");

788 ià(
pFau»
 !ğ
NULL
)

789 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

790  
NULL
;

798 
DexPrÙo
 
´Ùo
;

799 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

801 ià(
m‘hodTy³
 =ğ
METHOD_DIRECT
) {

802 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
,

803 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
), &
´Ùo
);

806 
»sM‘hod
 = 
	`dvmFšdM‘hodH›r
(
»sCÏss
,

807 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
), &
´Ùo
);

810 ià(
»sM‘hod
 =ğ
NULL
) {

811 
	`ALOGV
("DexOpt: couldn't find method '%s'",

812 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
));

813 ià(
pFau»
 !ğ
NULL
)

814 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

815  
NULL
;

817 ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

818 ià(!
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

819 
	`ALOGD
("DexOpt: wanted static, got instance for method %s.%s",

820 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

821 ià(
pFau»
 !ğ
NULL
)

822 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

823  
NULL
;

825 } ià(
m‘hodTy³
 =ğ
METHOD_VIRTUAL
) {

826 ià(
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

827 
	`ALOGD
("DexOpt: wanted instance, got static for method %s.%s",

828 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

829 ià(
pFau»
 !ğ
NULL
)

830 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

831  
NULL
;

836 ià(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
è&& !
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
)) {

837 
	`ALOGW
("DexOpt:…ure-abstract method '%s' in %s",

838 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
),

839 
»sCÏss
->
desütÜ
);

840 ià(
pFau»
 !ğ
NULL
)

841 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

842  
NULL
;

853 ià(
m‘hodTy³
 !ğ
METHOD_STATIC
 || 
gDvm
.
İtimizšg
)

854 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

857 
	`LOGVV
("--- found method %d (%s.%s)",

858 
m‘hodIdx
, 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

861 
	`tw—kLßd”
(
»ã¼”
, 
»sM‘hod
->
şazz
);

862 
boŞ
 
®lowed
 = 
	`dvmCheckM‘hodAcûss
(
»ã¼”
, 
»sM‘hod
);

863 
	`uÁw—kLßd”
(
»ã¼”
, 
»sM‘hod
->
şazz
);

864 ià(!
®lowed
) {

865 
	`IF_ALOGI
() {

866 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

867 
	`ALOGI
("DexOpt: illegal method‡ccess (call %s.%s %s from %s)",

868 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
,

869 
»ã¼”
->
desütÜ
);

870 
	`ä“
(
desc
);

872 ià(
pFau»
 !ğ
NULL
)

873 *
pFau»
 = 
VERIFY_ERROR_ACCESS_METHOD
;

874  
NULL
;

877  
»sM‘hod
;

878 
	}
}

888 
	$»wr™eVœtu®Invoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
Opcode
 
ÃwOpc
)

890 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

891 
M‘hod
* 
ba£M‘hod
;

892 
u2
 
m‘hodIdx
 = 
š¢s
[1];

894 
ba£M‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
METHOD_VIRTUAL
, 
NULL
);

895 ià(
ba£M‘hod
 =ğ
NULL
) {

896 
	`ALOGD
("DexOpt: unableo optimize virt call 0x%04x‡t 0x%02x in %s.%s",

897 
m‘hodIdx
,

898 (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

899 
m‘hod
->
Çme
);

903 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL
 ||

904 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL_RANGE
 ||

905 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_SUPER
 ||

906 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_SUPER_RANGE
);

912 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
ÃwOpc
);

913 
	`dvmUpd©eCodeUn™
(
m‘hod
, 
š¢s
+1, 
ba£M‘hod
->
m‘hodIndex
);

920 
	}
}

933 
boŞ
 
	$»wr™eInvokeObjeùIn™
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
)

935 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

936 
M‘hod
* 
ÿÎedM‘hod
;

937 
u2
 
m‘hodIdx
 = 
š¢s
[1];

939 
ÿÎedM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
METHOD_DIRECT
, 
NULL
);

940 ià(
ÿÎedM‘hod
 =ğ
NULL
) {

941 
	`ALOGD
("DexOpt: unableo opt direct call 0x%04x‡t 0x%02x in %s.%s",

942 
m‘hodIdx
, (è(
š¢s
 - 
m‘hod
->insns),

943 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

944  
çl£
;

947 ià(
ÿÎedM‘hod
->
şazz
 =ğ
gDvm
.
şassJavaLªgObjeù
 &&

948 
	`dvmCom·»NameDesütÜAndM‘hod
("<š™>", "()V", 
ÿÎedM‘hod
) == 0)

958 
u1
 
ÜigOp
 = 
š¢s
[0] & 0xff;

959 ià(
ÜigOp
 =ğ
OP_INVOKE_DIRECT
) {

960 
	`dvmUpd©eCodeUn™
(
m‘hod
, 
š¢s
,

961 
OP_INVOKE_OBJECT_INIT_RANGE
 | 0x100);

963 
	`as£¹
(
ÜigOp
 =ğ
OP_INVOKE_DIRECT_RANGE
);

964 
	`as£¹
((
š¢s
[0] >> 8) == 1);

965 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
OP_INVOKE_OBJECT_INIT_RANGE
);

968 
	`LOGVV
("DexOpt:„eplaced Object.<init> in %s.%s",

969 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

972  
Œue
;

973 
	}
}

982 
M‘hod
* 
	$dvmO±ResŞveIÁ”çûM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

984 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

985 
M‘hod
* 
»sM‘hod
;

987 
	`LOGVV
("---„esolving interface method %d (referrer=%s)",

988 
m‘hodIdx
, 
»ã¼”
->
desütÜ
);

990 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
);

991 ià(
»sM‘hod
 =ğ
NULL
) {

992 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

993 
CÏssObjeù
* 
»sCÏss
;

995 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

997 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
NULL
);

998 ià(
»sCÏss
 =ğ
NULL
) {

1000 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1001  
NULL
;

1003 ià(!
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

1005 
	`ALOGI
("Interface method‚ot…art of interface class");

1006  
NULL
;

1009 cÚ¡ * 
m‘hodName
 =

1010 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1011 
DexPrÙo
 
´Ùo
;

1012 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

1014 
	`LOGVV
("+++†ooking for '%s' '%s' in„esClass='%s'",

1015 
m‘hodName
, 
m‘hodSig
, 
»sCÏss
->
desütÜ
);

1016 
»sM‘hod
 = 
	`dvmFšdIÁ”çûM‘hodH›r
(
»sCÏss
, 
m‘hodName
, &
´Ùo
);

1017 ià(
»sM‘hod
 =ğ
NULL
) {

1018  
NULL
;

1022 ià(!
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
)) {

1023 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1024 
	`ALOGW
("Found‚on-abstract interface method %s.%s %s",

1025 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
);

1026 
	`ä“
(
desc
);

1027  
NULL
;

1033 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

1036 
	`LOGVV
("--- found interface method %d (%s.%s)",

1037 
m‘hodIdx
, 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

1041  
»sM‘hod
;

1042 
	}
}

1050 
boŞ
 
	$»wr™eExecu‹IÆše
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

1051 
M‘hodTy³
 
m‘hodTy³
)

1053 cÚ¡ 
IÆšeSub
* 
šlšeSubs
 = 
gDvm
.inlineSubs;

1054 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1055 
M‘hod
* 
ÿÎedM‘hod
;

1056 
u2
 
m‘hodIdx
 = 
š¢s
[1];

1060 
ÿÎedM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
m‘hodTy³
, 
NULL
);

1061 ià(
ÿÎedM‘hod
 =ğ
NULL
) {

1062 
	`ALOGV
("+++ DexO± iÆše: cª'ˆfšd %d", 
m‘hodIdx
);

1063  
çl£
;

1066 
šlšeSubs
->
m‘hod
 !ğ
NULL
) {

1076 ià(
šlšeSubs
->
m‘hod
 =ğ
ÿÎedM‘hod
) {

1077 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_DIRECT
 ||

1078 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_STATIC
 ||

1079 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL
);

1080 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
OP_EXECUTE_INLINE
);

1081 
	`dvmUpd©eCodeUn™
(
m‘hod
, 
š¢s
+1, (
u2
è
šlšeSubs
->
šlšeIdx
);

1086  
Œue
;

1089 
šlšeSubs
++;

1092  
çl£
;

1093 
	}
}

1101 
boŞ
 
	$»wr™eExecu‹IÆšeRªge
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

1102 
M‘hodTy³
 
m‘hodTy³
)

1104 cÚ¡ 
IÆšeSub
* 
šlšeSubs
 = 
gDvm
.inlineSubs;

1105 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1106 
M‘hod
* 
ÿÎedM‘hod
;

1107 
u2
 
m‘hodIdx
 = 
š¢s
[1];

1109 
ÿÎedM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
m‘hodTy³
, 
NULL
);

1110 ià(
ÿÎedM‘hod
 =ğ
NULL
) {

1111 
	`ALOGV
("+++ DexO± iÆše/¿nge: cª'ˆfšd %d", 
m‘hodIdx
);

1112  
çl£
;

1115 
šlšeSubs
->
m‘hod
 !ğ
NULL
) {

1116 ià(
šlšeSubs
->
m‘hod
 =ğ
ÿÎedM‘hod
) {

1117 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_DIRECT_RANGE
 ||

1118 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_STATIC_RANGE
 ||

1119 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL_RANGE
);

1120 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
OP_EXECUTE_INLINE_RANGE
);

1121 
	`dvmUpd©eCodeUn™
(
m‘hod
, 
š¢s
+1, (
u2
è
šlšeSubs
->
šlšeIdx
);

1126  
Œue
;

1129 
šlšeSubs
++;

1132  
çl£
;

1133 
	}
}

1144 
boŞ
 
	$ÃedsR‘uºB¬r›r
(
M‘hod
* 
m‘hod
)

1146 ià(!
gDvm
.
dexO±FÜSmp
)

1147  
çl£
;

1148 ià(
	`¡rcmp
(
m‘hod
->
Çme
, "<init>") != 0)

1149  
çl£
;

1155 cÚ¡ 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1156 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISFINALIZABLE
))

1157  
Œue
;

1171 
idx
 = 
şazz
->
if›ldCouÁ
;

1172 --
idx
 >= 0) {

1173 ià(
	`dvmIsFš®F›ld
(&
şazz
->
if›lds
[
idx
]))

1174  
Œue
;

1177  
çl£
;

1178 
	}
}

1183 
	$»wr™eR‘uºVoid
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
)

1185 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_RETURN_VOID
);

1186 
	`upd©eOpcode
(
m‘hod
, 
š¢s
, 
OP_RETURN_VOID_BARRIER
);

1187 
	}
}

	@vm/analysis/Optimize.h

20 #iâdeà
DALVIK_OPTIMIZE_H_


21 
	#DALVIK_OPTIMIZE_H_


	)

26 
dvmO±imizeCÏss
(
CÏssObjeù
* 
şazz
, 
boŞ
 
es£ÁŸlOÆy
);

31 
dvmUpd©eCodeUn™
(cÚ¡ 
M‘hod
* 
m‘h
, 
u2
* 
±r
, u2 
ÃwV®
);

37 
CÏssObjeù
* 
dvmO±ResŞveCÏss
(CÏssObjeù* 
»ã¼”
, 
u4
 
şassIdx
,

38 
V”ifyE¼Ü
* 
pFau»
);

39 
M‘hod
* 
dvmO±ResŞveM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

40 
M‘hodTy³
 
m‘hodTy³
, 
V”ifyE¼Ü
* 
pFau»
);

41 
M‘hod
* 
dvmO±ResŞveIÁ”çûM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
);

42 
In¡F›ld
* 
dvmO±ResŞveIn¡F›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
,

43 
V”ifyE¼Ü
* 
pFau»
);

44 
SticF›ld
* 
dvmO±ResŞveSticF›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
,

45 
V”ifyE¼Ü
* 
pFau»
);

	@vm/analysis/RegisterMap.cpp

23 
	~"D®vik.h
"

24 
	~"UniquePŒ.h
"

25 
	~"ª®ysis/CodeV”ify.h
"

26 
	~"ª®ysis/Regi¡”M­.h
"

27 
	~"libdex/DexC©ch.h
"

28 
	~"libdex/In¡rUts.h
"

29 
	~"libdex/Leb128.h
"

31 
	~<¡ddef.h
>

34 
	#REGISTER_MAP_VERIFY
 
çl£


	)

37 
	#REGISTER_MAP_VERBOSE
 
çl£


	)

42 
ouutTy³VeùÜ
(cÚ¡ 
RegTy³
* 
»gs
, 
š¢RegCouÁ
, 
u1
* 
d©a
);

43 
boŞ
 
v”ifyM­
(
V”if›rD©a
* 
vd©a
, cÚ¡ 
Regi¡”M­
* 
pM­
);

44 
com·»M­s
(cÚ¡ 
Regi¡”M­
* 
pM­1
, cÚ¡ Regi¡”M­* 
pM­2
);

46 #ifdeà
REGISTER_MAP_STATS


47 
compu‹M­Sts
(
Regi¡”M­
* 
pM­
, cÚ¡ 
M‘hod
* 
m‘hod
);

49 
Regi¡”M­
* 
com´essM­Difã»ÁŸl
(cÚ¡ Regi¡”M­* 
pM­
,\

50 cÚ¡ 
M‘hod
* 
m‘h
);

51 
Regi¡”M­
* 
uncom´essM­Difã»ÁŸl
(cÚ¡ Regi¡”M­* 
pM­
);

53 #ifdeà
REGISTER_MAP_STATS


57 
	#kMaxGcPoštG­
 50

	)

58 
	#kUpd©ePo¢MšRegs
 24

	)

59 
	#kNumUpd©ePo¢s
 8

	)

60 
	#kMaxDiffB™s
 20

	)

61 
	sM­Sts
 {

67 
	mgcPoštG­
[
kMaxGcPoštG­
];

73 
	mgcG­CouÁ
;

78 
	mtÙ®GcPoštCouÁ
;

85 
	mupd©ePo¢
[
kNumUpd©ePo¢s
];

91 
	mupd©eLT16
;

92 
	mupd©eGE16
;

97 
	mnumDiffB™s
[
kMaxDiffB™s
];

104 
	mnumEx·ndedM­s
;

105 
	mtÙ®Ex·ndedM­Size
;

112 
boŞ
 
	$dvmRegi¡”M­S¹up
()

114 #ifdeà
REGISTER_MAP_STATS


115 
M­Sts
* 
pSts
 = 
	`ÿÎoc
(1, (MapStats));

116 
gDvm
.
»gi¡”M­Sts
 = 
pSts
;

118  
Œue
;

119 
	}
}

124 
	$dvmRegi¡”M­Shutdown
()

126 #ifdeà
REGISTER_MAP_STATS


127 
	`ä“
(
gDvm
.
»gi¡”M­Sts
);

129 
	}
}

134 
	$dvmRegi¡”M­DumpSts
()

136 #ifdeà
REGISTER_MAP_STATS


137 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

138 
i
, 
’d
;

140 
’d
 = 
kMaxGcPoštG­
-1;ƒnd >= 0;ƒnd--) {

141 ià(
pSts
->
gcPoštG­
[
’d
] != 0)

145 
	`ALOGI
("Register Map gcPointGap stats (diff count=%d,otal=%d):",

146 
pSts
->
gcG­CouÁ
,…Sts->
tÙ®GcPoštCouÁ
);

147 
	`as£¹
(
pSts
->
gcPoštG­
[0] == 0);

148 
i
 = 1; i <ğ
’d
; i++) {

149 
	`ALOGI
(" %2d %d", 
i
, 
pSts
->
gcPoštG­
[i]);

153 
’d
 = 
kMaxDiffB™s
-1;ƒnd >= 0;ƒnd--) {

154 ià(
pSts
->
numDiffB™s
[
’d
] != 0)

158 
	`ALOGI
("Register Map bit difference stats:");

159 
i
 = 0; i <ğ
’d
; i++) {

160 
	`ALOGI
(" %2d %d", 
i
, 
pSts
->
numDiffB™s
[i]);

164 
	`ALOGI
("Register Map update…osition stats (lt16=%d ge16=%d):",

165 
pSts
->
upd©eLT16
,…Sts->
upd©eGE16
);

166 
i
 = 0; i < 
kNumUpd©ePo¢s
; i++) {

167 
	`ALOGI
(" %2d %d", 
i
, 
pSts
->
upd©ePo¢
[i]);

170 
	}
}

188 
Regi¡”M­
* 
	$dvmG’”©eRegi¡”M­V
(
V”if›rD©a
* 
vd©a
)

190 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

191 
Regi¡”M­
* 
pM­
 = 
NULL
;

192 
Regi¡”M­
* 
pResuÉ
 = 
NULL
;

193 
Regi¡”M­FÜm©
 
fÜm©
;

194 
u1
 
»gWidth
;

195 
u1
* 
m­D©a
;

196 
i
, 
by‹sFÜAddr
, 
gcPoštCouÁ
;

197 
bufSize
;

199 ià(
vd©a
->
m‘hod
->
»gi¡”sSize
 >= 2048) {

200 
	`ALOGE
("ERROR:„egister map can't handle %d„egisters",

201 
vd©a
->
m‘hod
->
»gi¡”sSize
);

202 
ba
;

204 
»gWidth
 = (
vd©a
->
m‘hod
->
»gi¡”sSize
 + 7) / 8;

213 ià(
vd©a
->
š¢sSize
 < 256) {

214 
fÜm©
 = 
kRegM­FÜm©Com·ù8
;

215 
by‹sFÜAddr
 = 1;

217 
fÜm©
 = 
kRegM­FÜm©Com·ù16
;

218 
by‹sFÜAddr
 = 2;

227 
gcPoštCouÁ
 = 0;

228 
i
 = 0; i < (è
vd©a
->
š¢sSize
; i++) {

229 ià(
	`dvmIn¢IsGcPošt
(
vd©a
->
š¢FÏgs
, 
i
))

230 
gcPoštCouÁ
++;

232 ià(
gcPoštCouÁ
 >= 65536) {

234 
	`ALOGE
("ERROR:„egister map can't handle %d gc…oints in one method",

235 
gcPoštCouÁ
);

236 
ba
;

242 
bufSize
 = 
kH—d”Size
 + 
gcPoštCouÁ
 * (
by‹sFÜAddr
 + 
»gWidth
);

244 
	`ALOGV
("+++ grm: %s.%s (adr=%d gpc=%d„wd=%d bsz=%d)",

245 
vd©a
->
m‘hod
->
şazz
->
desütÜ
, vd©a->m‘hod->
Çme
,

246 
by‹sFÜAddr
, 
gcPoštCouÁ
, 
»gWidth
, 
bufSize
);

248 
pM­
 = (
Regi¡”M­
*è
	`m®loc
(
bufSize
);

249 
	`dvmRegi¡”M­S‘FÜm©
(
pM­
, 
fÜm©
);

250 
	`dvmRegi¡”M­S‘OnH—p
(
pM­
, 
Œue
);

251 
	`dvmRegi¡”M­S‘RegWidth
(
pM­
, 
»gWidth
);

252 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pM­
, 
gcPoštCouÁ
);

257 
m­D©a
 = 
pM­
->
d©a
;

258 
i
 = 0; i < (è
vd©a
->
š¢sSize
; i++) {

259 ià(
	`dvmIn¢IsGcPošt
(
vd©a
->
š¢FÏgs
, 
i
)) {

260 
	`as£¹
(
vd©a
->
»gi¡”Lšes
[
i
].
»gTy³s
 !ğ
NULL
);

261 ià(
fÜm©
 =ğ
kRegM­FÜm©Com·ù8
) {

262 *
m­D©a
++ = 
i
;

264 *
m­D©a
++ = 
i
 & 0xff;

265 *
m­D©a
++ = 
i
 >> 8;

267 
	`ouutTy³VeùÜ
(
vd©a
->
»gi¡”Lšes
[
i
].
»gTy³s
,

268 
vd©a
->
š¢RegCouÁ
, 
m­D©a
);

269 
m­D©a
 +ğ
»gWidth
;

273 
	`ALOGV
("m­D©a=%°pM­=%°bufSize=%d", 
m­D©a
, 
pM­
, 
bufSize
);

274 
	`as£¹
(
m­D©a
 - (cÚ¡ 
u1
*è
pM­
 =ğ
bufSize
);

276 ià(
REGISTER_MAP_VERIFY
 && !
	`v”ifyM­
(
vd©a
, 
pM­
))

277 
ba
;

278 #ifdeà
REGISTER_MAP_STATS


279 
	`compu‹M­Sts
(
pM­
, 
vd©a
->
m‘hod
);

285 
Regi¡”M­
* 
pCompM­
;

287 
pCompM­
 = 
	`com´essM­Difã»ÁŸl
(
pM­
, 
vd©a
->
m‘hod
);

288 ià(
pCompM­
 !ğ
NULL
) {

289 ià(
REGISTER_MAP_VERIFY
) {

294 
Regi¡”M­
* 
pUncompM­
;

295 
pUncompM­
 = 
	`uncom´essM­Difã»ÁŸl
(
pCompM­
);

296 ià(
pUncompM­
 =ğ
NULL
) {

297 
	`ALOGE
("Map failedo uncompress - %s.%s",

298 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

299 
vd©a
->
m‘hod
->
Çme
);

300 
	`ä“
(
pCompM­
);

302 
	`dvmAbÜt
();

304 ià(
	`com·»M­s
(
pM­
, 
pUncompM­
) != 0) {

305 
	`ALOGE
("Map comparison failed - %s.%s",

306 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

307 
vd©a
->
m‘hod
->
Çme
);

308 
	`ä“
(
pCompM­
);

310 
	`dvmAbÜt
();

314 
d–‘e
 
pUncompM­
;

318 ià(
REGISTER_MAP_VERBOSE
) {

319 
	`ALOGD
("Good compress on %s.%s",

320 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

321 
vd©a
->
m‘hod
->
Çme
);

323 
	`ä“
(
pM­
);

324 
pM­
 = 
pCompM­
;

326 ià(
REGISTER_MAP_VERBOSE
) {

327 
	`ALOGD
("Unableo compress %s.%s (ent=%d„w=%d)",

328 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

329 
vd©a
->
m‘hod
->
Çme
,

330 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
),

331 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
));

335 
pResuÉ
 = 
pM­
;

337 
ba
:

338  
pResuÉ
;

339 
	}
}

344 
	$dvmF»eRegi¡”M­
(
Regi¡”M­
* 
pM­
)

346 ià(
pM­
 =ğ
NULL
)

349 
	`as£¹
(
	`dvmRegi¡”M­G‘OnH—p
(
pM­
));

350 
	`ä“
(
pM­
);

351 
	}
}

360 
šlše
 
boŞ
 
	$isReã»nûTy³
(
RegTy³
 
ty³
)

362  (
ty³
 > 
kRegTy³MAX
 ||y³ =ğ
kRegTy³Unš™
);

363 
	}
}

373 
	$ouutTy³VeùÜ
(cÚ¡ 
RegTy³
* 
»gs
, 
š¢RegCouÁ
, 
u1
* 
d©a
)

375 
u1
 
v®
 = 0;

376 
i
;

378 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

379 
RegTy³
 
ty³
 = *
»gs
++;

380 
v®
 >>= 1;

381 ià(
	`isReã»nûTy³
(
ty³
))

382 
v®
 |= 0x80;

384 ià((
i
 & 0x07) == 7)

385 *
d©a
++ = 
v®
;

387 ià((
i
 & 0x07) != 0) {

389 
v®
 >>ğ8 - (
i
 & 0x07);

390 *
d©a
++ = 
v®
;

392 
	}
}

399 
	$dumpRegi¡”M­
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
»gi¡”sSize
)

401 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

402 cÚ¡ 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

403 cÚ¡ 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

404 cÚ¡ 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

405 
addrWidth
;

407 
fÜm©
) {

408 
kRegM­FÜm©Com·ù8
:

409 
addrWidth
 = 1;

411 
kRegM­FÜm©Com·ù16
:

412 
addrWidth
 = 2;

416 
	`ALOGE
("Cª oÆy dum°Com·ù8 / Com·ù16 m­ ÒÙ %d)", 
fÜm©
);

420 ià(
»gi¡”sSize
 < 0)

421 
»gi¡”sSize
 = 8 * 
»gWidth
;

422 
	`as£¹
(
»gi¡”sSize
 <ğ
»gWidth
 * 8);

424 
’t
;

425 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

426 
i
, 
addr
;

428 
addr
 = *
¿wM­
++;

429 ià(
addrWidth
 > 1)

430 
addr
 |ğ(*
¿wM­
++) << 8;

432 cÚ¡ 
u1
* 
d©aS¹
 = 
¿wM­
;

433 
u1
 
v®
 = 0;

436 
outBuf
[
»gi¡”sSize
 +1];

437 
i
 = 0; i < 
»gi¡”sSize
; i++) {

438 
v®
 >>= 1;

439 ià((
i
 & 0x07) == 0)

440 
v®
 = *
¿wM­
++;

442 
outBuf
[
i
] = '0' + (
v®
 & 0x01);

444 
outBuf
[
i
] = '\0';

447 
hexBuf
[
»gWidth
 * 3 +1];

448 * 
ı
 = 
hexBuf
;

449 
¿wM­
 = 
d©aS¹
;

450 
i
 = 0; i < 
»gWidth
; i++) {

451 
	`¥rštf
(
ı
, " %02x", *
¿wM­
++);

452 
ı
 += 3;

454 
hexBuf
[
i
 * 3] = '\0';

456 
	`ALOGD
(" %04x % %s", 
addr
, 
outBuf
, 
hexBuf
);

458 
	}
}

466 
boŞ
 
	$v”ifyM­
(
V”if›rD©a
* 
vd©a
, cÚ¡ 
Regi¡”M­
* 
pM­
)

468 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

469 cÚ¡ 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

470 cÚ¡ 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

471 
’t
;

472 
boŞ
 
dumpM­
 = 
çl£
;

474 ià(
çl£
) {

475 cÚ¡ * 
cd
 = "Landroid/net/http/Request;";

476 cÚ¡ * 
mn
 = "readResponse";

477 ià(
	`¡rcmp
(
vd©a
->
m‘hod
->
şazz
->
desütÜ
, 
cd
) == 0 &&

478 
	`¡rcmp
(
vd©a
->
m‘hod
->
Çme
, 
mn
) == 0)

480 * 
desc
;

481 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
vd©a
->
m‘hod
->
´ÙÙy³
);

482 
	`ALOGI
("M­ fÜ %s.% %s", 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

483 
vd©a
->
m‘hod
->
Çme
, 
desc
);

484 
	`ä“
(
desc
);

486 
dumpM­
 = 
Œue
;

490 ià((
vd©a
->
m‘hod
->
»gi¡”sSize
 + 7è/ 8 !ğ
pM­
->
»gWidth
) {

491 
	`ALOGE
("GLITCH:„egistersSize=%d,„egWidth=%d",

492 
vd©a
->
m‘hod
->
»gi¡”sSize
, 
pM­
->
»gWidth
);

493  
çl£
;

496 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

497 
addr
;

499 
fÜm©
) {

500 
kRegM­FÜm©Com·ù8
:

501 
addr
 = *
¿wM­
++;

503 
kRegM­FÜm©Com·ù16
:

504 
addr
 = *
¿wM­
++;

505 
addr
 |ğ(*
¿wM­
++) << 8;

509 
	`ALOGE
("GLITCH: bad fÜm© (%d)", 
fÜm©
);

510 
	`dvmAbÜt
();

513 cÚ¡ 
RegTy³
* 
»gs
 = 
vd©a
->
»gi¡”Lšes
[
addr
].
»gTy³s
;

514 ià(
»gs
 =ğ
NULL
) {

515 
	`ALOGE
("GLITCH:‡dd¸%d ha nØd©a", 
addr
);

516  
çl£
;

519 
u1
 
v®
 = 0;

520 
i
;

522 
i
 = 0; i < 
vd©a
->
m‘hod
->
»gi¡”sSize
; i++) {

523 
boŞ
 
b™IsRef
, 
»gIsRef
;

525 
v®
 >>= 1;

526 ià((
i
 & 0x07) == 0) {

528 
v®
 = *
¿wM­
++;

531 
b™IsRef
 = 
v®
 & 0x01;

533 
RegTy³
 
ty³
 = 
»gs
[
i
];

534 
»gIsRef
 = 
	`isReã»nûTy³
(
ty³
);

536 ià(
b™IsRef
 !ğ
»gIsRef
) {

537 
	`ALOGE
("GLITCH:‡ddr %d„eg %d: bit=%d„eg=%d(%d)",

538 
addr
, 
i
, 
b™IsRef
, 
»gIsRef
, 
ty³
);

539  
çl£
;

546 ià(
dumpM­
)

547 
	`dumpRegi¡”M­
(
pM­
, 
vd©a
->
m‘hod
->
»gi¡”sSize
);

549  
Œue
;

550 
	}
}

562 
šlše
 
u1
* 
	$®ign32
(
u1
* 
±r
)

564  (
u1
*è(((è
±r
 + 3) & ~0x03);

565 
	}
}

570 
size_t
 
	$compu‹Regi¡”M­Size
(cÚ¡ 
Regi¡”M­
* 
pM­
)

572 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

573 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

574 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

576 
	`as£¹
(
pM­
 !ğ
NULL
);

578 
fÜm©
) {

579 
kRegM­FÜm©NÚe
:

581 
kRegM­FÜm©Com·ù8
:

582  
kH—d”Size
 + (1 + 
pM­
->
»gWidth
è* 
numEÁr›s
;

583 
kRegM­FÜm©Com·ù16
:

584  
kH—d”Size
 + (2 + 
pM­
->
»gWidth
è* 
numEÁr›s
;

585 
kRegM­FÜm©Difã»ÁŸl
:

588 cÚ¡ 
u1
* 
±r
 = 
pM­
->
d©a
;

589 
Ën
 = 
	`»adUnsigÃdLeb128
(&
±r
);

590  
Ën
 + (
±r
 - (
u1
*è
pM­
);

593 
	`ALOGE
("Bad„egi¡” m­ fÜm© %d", 
fÜm©
);

594 
	`dvmAbÜt
();

597 
	}
}

608 
boŞ
 
	$wr™eM­FÜM‘hod
(cÚ¡ 
M‘hod
* 
m‘h
, 
u1
** 
pPŒ
)

610 ià(
m‘h
->
»gi¡”M­
 =ğ
NULL
) {

611 ià(!
	`dvmIsAb¡¿ùM‘hod
(
m‘h
è&& !
	`dvmIsN©iveM‘hod
(meth)) {

612 
	`ALOGW
("Warning:‚o map‡vailable for %s.%s",

613 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

616 *(*
pPŒ
)++ = 
kRegM­FÜm©NÚe
;

617  
Œue
;

621 
size_t
 
m­Size
 = 
	`compu‹Regi¡”M­Size
(
m‘h
->
»gi¡”M­
);

622 
	`memıy
(*
pPŒ
, 
m‘h
->
»gi¡”M­
, 
m­Size
);

625 
	`as£¹
(**
pPŒ
 =ğ
m‘h
->
»gi¡”M­
->
fÜm©
);

626 **
pPŒ
 &ğ~(
kRegM­FÜm©OnH—p
);

628 *
pPŒ
 +ğ
m­Size
;

630  
Œue
;

631 
	}
}

638 
boŞ
 
	$wr™eM­sAÎM‘hods
(
DvmDex
* 
pDvmDex
, cÚ¡ 
CÏssObjeù
* 
şazz
,

639 
u1
** 
pPŒ
, 
size_t
 
Ëngth
)

641 
Regi¡”M­M‘hodPoŞ
* 
pM‘hodPoŞ
;

642 
u1
* 
±r
 = *
pPŒ
;

643 
i
, 
m‘hodCouÁ
;

646 ià(
şazz
->
vœtu®M‘hodCouÁ
 + cÏzz->
dœeùM‘hodCouÁ
 >= 65536) {

647 
	`ALOGE
("ToØmªy m‘hod š %s", 
şazz
->
desütÜ
);

648  
çl£
;

651 
pM‘hodPoŞ
 = (
Regi¡”M­M‘hodPoŞ
*è
±r
;

652 
±r
 +ğ
	`off£tof
(
Regi¡”M­M‘hodPoŞ
, 
m‘hodD©a
);

653 
m‘hodCouÁ
 = 0;

668 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

669 cÚ¡ 
M‘hod
* 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

670 ià(
	`dvmIsMœªdaM‘hod
(
m‘h
))

672 ià(!
	`wr™eM­FÜM‘hod
(&
şazz
->
dœeùM‘hods
[
i
], &
±r
)) {

673  
çl£
;

675 
m‘hodCouÁ
++;

679 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

680 cÚ¡ 
M‘hod
* 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

681 ià(
	`dvmIsMœªdaM‘hod
(
m‘h
))

683 ià(!
	`wr™eM­FÜM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
], &
±r
)) {

684  
çl£
;

686 
m‘hodCouÁ
++;

690 
pM‘hodPoŞ
->
m‘hodCouÁ
 = methodCount;

692 *
pPŒ
 = 
±r
;

693  
Œue
;

694 
	}
}

702 
size_t
 
	$wr™eM­sAÎCÏs£s
(
DvmDex
* 
pDvmDex
, 
u1
* 
ba£PŒ
, 
size_t
 
Ëngth
)

704 
DexFe
* 
pDexFe
 = 
pDvmDex
->pDexFile;

705 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

706 
Regi¡”M­CÏssPoŞ
* 
pCÏssPoŞ
;

707 
u4
* 
off£tTabË
;

708 
u1
* 
±r
 = 
ba£PŒ
;

709 
u4
 
idx
;

711 
	`as£¹
(
gDvm
.
İtimizšg
);

713 
pCÏssPoŞ
 = (
Regi¡”M­CÏssPoŞ
*è
±r
;

714 
±r
 +ğ
	`off£tof
(
Regi¡”M­CÏssPoŞ
, 
şassD©aOff£t
);

715 
off£tTabË
 = (
u4
*è
±r
;

716 
±r
 +ğ
couÁ
 * (
u4
);

718 
pCÏssPoŞ
->
numCÏs£s
 = 
couÁ
;

723 
idx
 = 0; idx < 
couÁ
; idx++) {

724 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

725 cÚ¡ * 
şassDesütÜ
;

726 
CÏssObjeù
* 
şazz
;

728 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

729 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

740 
şazz
 = 
NULL
;

741 ià((
pCÏssDef
->
acûssFÏgs
 & 
CLASS_ISPREVERIFIED
) != 0)

742 
şazz
 = 
	`dvmLookupCÏss
(
şassDesütÜ
, 
NULL
, 
çl£
);

744 ià(
şazz
 !ğ
NULL
) {

745 
off£tTabË
[
idx
] = 
±r
 - 
ba£PŒ
;

746 
	`LOGVV
("%d -> offset %d (%p-%p)",

747 
idx
, 
off£tTabË
[idx], 
±r
, 
ba£PŒ
);

749 ià(!
	`wr™eM­sAÎM‘hods
(
pDvmDex
, 
şazz
, &
±r
,

750 
Ëngth
 - (
±r
 - 
ba£PŒ
)))

755 
±r
 = 
	`®ign32
(ptr);

756 
	`LOGVV
("Siz% (%d+%d m‘hods): %d", 
şazz
->
desütÜ
,

757 
şazz
->
dœeùM‘hodCouÁ
, cÏzz->
vœtu®M‘hodCouÁ
,

758 (
±r
 - 
ba£PŒ
è- 
off£tTabË
[
idx
]);

760 
	`ALOGV
("%4d NOT m­addšg '%s'", 
idx
, 
şassDesütÜ
);

761 
	`as£¹
(
off£tTabË
[
idx
] == 0);

765 ià(
±r
 - 
ba£PŒ
 >ğ()
Ëngth
) {

767 
	`ALOGE
("Buffer overrun");

768 
	`dvmAbÜt
();

771  
±r
 - 
ba£PŒ
;

772 
	}
}

777 
Regi¡”M­Bud”
* 
	$dvmG’”©eRegi¡”M­s
(
DvmDex
* 
pDvmDex
)

779 
Regi¡”M­Bud”
* 
pBud”
;

781 
pBud”
 = (
Regi¡”M­Bud”
*è
	`ÿÎoc
(1, (RegisterMapBuilder));

782 ià(
pBud”
 =ğ
NULL
)

783  
NULL
;

801 ià(
	`sysC»©ePriv©eM­
(4 * 1024 * 1024, &
pBud”
->
memM­
) != 0) {

802 
	`ä“
(
pBud”
);

803  
NULL
;

809 
size_t
 
aùu®
 = 
	`wr™eM­sAÎCÏs£s
(
pDvmDex
, (
u1
*)
pBud”
->
memM­
.
addr
,

810 
pBud”
->
memM­
.
Ëngth
);

811 ià(
aùu®
 == 0) {

812 
	`dvmF»eRegi¡”M­Bud”
(
pBud”
);

813  
NULL
;

816 
	`ALOGV
("TOTAL sizoà»gi¡” m­s: %d", 
aùu®
);

818 
pBud”
->
d©a
 =…Bud”->
memM­
.
addr
;

819 
pBud”
->
size
 = 
aùu®
;

820  
pBud”
;

821 
	}
}

826 
	$dvmF»eRegi¡”M­Bud”
(
Regi¡”M­Bud”
* 
pBud”
)

828 ià(
pBud”
 =ğ
NULL
)

831 
	`sysR–—£Shmem
(&
pBud”
->
memM­
);

832 
	`ä“
(
pBud”
);

833 
	}
}

841 cÚ¡ * 
	$dvmRegi¡”M­G‘CÏssD©a
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
şassIdx
,

842 
u4
* 
pNumM­s
)

844 cÚ¡ 
Regi¡”M­CÏssPoŞ
* 
pCÏssPoŞ
;

845 cÚ¡ 
Regi¡”M­M‘hodPoŞ
* 
pM‘hodPoŞ
;

847 
pCÏssPoŞ
 = (cÚ¡ 
Regi¡”M­CÏssPoŞ
*è
pDexFe
->
pRegi¡”M­PoŞ
;

848 ià(
pCÏssPoŞ
 =ğ
NULL
)

849  
NULL
;

851 ià(
şassIdx
 >ğ
pCÏssPoŞ
->
numCÏs£s
) {

852 
	`ALOGE
("bad cÏs šdex (%d v %d)", 
şassIdx
, 
pCÏssPoŞ
->
numCÏs£s
);

853 
	`dvmAbÜt
();

856 
u4
 
şassOff£t
 = 
pCÏssPoŞ
->
şassD©aOff£t
[
şassIdx
];

857 ià(
şassOff£t
 == 0) {

858 
	`ALOGV
("+++‚Øm­ fÜ cÏssIdx=%d", 
şassIdx
);

859  
NULL
;

862 
pM‘hodPoŞ
 =

863 (cÚ¡ 
Regi¡”M­M‘hodPoŞ
*è(((
u1
*è
pCÏssPoŞ
è+ 
şassOff£t
);

864 ià(
pNumM­s
 !ğ
NULL
)

865 *
pNumM­s
 = 
pM‘hodPoŞ
->
m‘hodCouÁ
;

866  
pM‘hodPoŞ
->
m‘hodD©a
;

867 
	}
}

872 cÚ¡ 
Regi¡”M­
* 
	$dvmRegi¡”M­G‘Next
(cÚ¡ ** 
pPŒ
)

874 cÚ¡ 
Regi¡”M­
* 
pM­
 = (cÚ¡ Regi¡”M­*è*
pPŒ
;

876 *
pPŒ
 = (((
u1
*è
pM­
è+ 
	`compu‹Regi¡”M­Size
(pMap));

877 
	`LOGVV
("getNext: %p -> %p (f=%#x w=%dƒ=%d)",

878 
pM­
, *
pPŒ
,…M­->
fÜm©
,…M­->
»gWidth
,

879 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
));

880  
pM­
;

881 
	}
}

895 cÚ¡ 
u1
* 
	$dvmRegi¡”M­G‘Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
addr
)

897 
addrWidth
, 
lšeWidth
;

898 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

899 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

901 
	`as£¹
(
numEÁr›s
 > 0);

903 
fÜm©
) {

904 
kRegM­FÜm©NÚe
:

905  
NULL
;

906 
kRegM­FÜm©Com·ù8
:

907 
addrWidth
 = 1;

909 
kRegM­FÜm©Com·ù16
:

910 
addrWidth
 = 2;

913 
	`ALOGE
("UnknowÀfÜm© %d", 
fÜm©
);

914 
	`dvmAbÜt
();

915  
NULL
;

918 
lšeWidth
 = 
addrWidth
 + 
pM­
->
»gWidth
;

924 cÚ¡ 
kS—rchTh»shŞd
 = 8;

925 cÚ¡ 
u1
* 
d©a
 = 
NULL
;

926 
lšeAddr
;

928 ià(
numEÁr›s
 < 
kS—rchTh»shŞd
) {

929 
i
;

930 
d©a
 = 
pM­
->data;

931 
i
 = 
numEÁr›s
; i > 0; i--) {

932 
lšeAddr
 = 
d©a
[0];

933 ià(
addrWidth
 > 1)

934 
lšeAddr
 |ğ
d©a
[1] << 8;

935 ià(
lšeAddr
 =ğ
addr
)

936  
d©a
 + 
addrWidth
;

938 
d©a
 +ğ
lšeWidth
;

940 
	`as£¹
(
d©a
 =ğ
pM­
->d©¨+ 
lšeWidth
 * 
numEÁr›s
);

942 
hi
, 
lo
, 
mid
;

944 
lo
 = 0;

945 
hi
 = 
numEÁr›s
 -1;

947 
hi
 >ğ
lo
) {

948 
mid
 = (
hi
 + 
lo
) / 2;

949 
d©a
 = 
pM­
->d©¨+ 
lšeWidth
 * 
mid
;

951 
lšeAddr
 = 
d©a
[0];

952 ià(
addrWidth
 > 1)

953 
lšeAddr
 |ğ
d©a
[1] << 8;

955 ià(
addr
 > 
lšeAddr
) {

956 
lo
 = 
mid
 + 1;

957 } ià(
addr
 < 
lšeAddr
) {

958 
hi
 = 
mid
 - 1;

960  
d©a
 + 
addrWidth
;

965  
NULL
;

966 
	}
}

973 
	$com·»M­s
(cÚ¡ 
Regi¡”M­
* 
pM­1
, cÚ¡ Regi¡”M­* 
pM­2
)

975 
size_t
 
size1
, 
size2
;

977 
size1
 = 
	`compu‹Regi¡”M­Size
(
pM­1
);

978 
size2
 = 
	`compu‹Regi¡”M­Size
(
pM­2
);

979 ià(
size1
 !ğ
size2
) {

980 
	`ALOGI
("com·»M­s: sizmism©ch (%zd v %zd)", 
size1
, 
size2
);

984 ià(
	`memcmp
(
pM­1
, 
pM­2
, 
size1
) != 0) {

985 
	`ALOGI
("compareMaps: content mismatch");

990 
	}
}

1003 cÚ¡ 
Regi¡”M­
* 
	$dvmG‘Ex·ndedRegi¡”M­0
(
M‘hod
* 
m‘hod
)

1005 cÚ¡ 
Regi¡”M­
* 
curM­
 = 
m‘hod
->
»gi¡”M­
;

1006 
Regi¡”M­
* 
ÃwM­
;

1008 ià(
curM­
 =ğ
NULL
)

1009  
NULL
;

1013 ià(
Œue
) {

1014 ià(!
gDvm
.
zygÙe
 && 
	`dvmTryLockMu‹x
(&gDvm.
gcH—pLock
) == 0) {

1015 
	`ALOGE
("GLITCH: dvmGetExpandedRegisterMap‚ot called‡t GCime");

1016 
	`dvmAbÜt
();

1020 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
curM­
);

1021 
fÜm©
) {

1022 
kRegM­FÜm©Com·ù8
:

1023 
kRegM­FÜm©Com·ù16
:

1024 ià(
REGISTER_MAP_VERBOSE
) {

1025 ià(
	`dvmRegi¡”M­G‘OnH—p
(
curM­
)) {

1026 
	`ALOGD
("RegMap:‡lreadyƒxpanded: %s.%s",

1027 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1029 
	`ALOGD
("RegMap: stored w/o compression: %s.%s",

1030 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1033  
curM­
;

1034 
kRegM­FÜm©Difã»ÁŸl
:

1035 
ÃwM­
 = 
	`uncom´essM­Difã»ÁŸl
(
curM­
);

1038 
	`ALOGE
("UnknowÀfÜm© %d iÀdvmG‘Ex·ndedRegi¡”M­", 
fÜm©
);

1039 
	`dvmAbÜt
();

1040 
ÃwM­
 = 
NULL
;

1043 ià(
ÃwM­
 =ğ
NULL
) {

1044 
	`ALOGE
("Map failedo uncompress (fmt=%d) %s.%s",

1045 
fÜm©
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1046  
NULL
;

1049 #ifdeà
REGISTER_MAP_STATS


1054 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

1055 
pSts
->
numEx·ndedM­s
++;

1056 
pSts
->
tÙ®Ex·ndedM­Size
 +ğ
	`compu‹Regi¡”M­Size
(
ÃwM­
);

1057 
	`ALOGD
("RMAP: count=%d size=%d",

1058 
pSts
->
numEx·ndedM­s
,…Sts->
tÙ®Ex·ndedM­Size
);

1062 
	`IF_ALOGV
() {

1063 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1064 
	`ALOGV
("Expanding map -> %s.%s:%s",

1065 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

1066 
	`ä“
(
desc
);

1072 
	`dvmS‘Regi¡”M­
(
m‘hod
, 
ÃwM­
);

1074 ià(
	`dvmRegi¡”M­G‘OnH—p
(
curM­
))

1075 
	`dvmF»eRegi¡”M­
((
Regi¡”M­
*è
curM­
);

1077  
ÃwM­
;

1078 
	}
}

1247 #ifdeà
REGISTER_MAP_STATS


1248 
	$compu‹M­Sts
(
Regi¡”M­
* 
pM­
, cÚ¡ 
M‘hod
* 
m‘hod
)

1250 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

1251 cÚ¡ 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1252 cÚ¡ 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1253 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

1254 cÚ¡ 
u1
* 
´evD©a
 = 
NULL
;

1255 
’t
, 
addr
, 
´evAddr
 = -1;

1257 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

1258 
fÜm©
) {

1259 
kRegM­FÜm©Com·ù8
:

1260 
addr
 = *
¿wM­
++;

1262 
kRegM­FÜm©Com·ù16
:

1263 
addr
 = *
¿wM­
++;

1264 
addr
 |ğ(*
¿wM­
++) << 8;

1268 
	`ALOGE
("GLITCH: bad fÜm© (%d)", 
fÜm©
);

1269 
	`dvmAbÜt
();

1272 cÚ¡ 
u1
* 
d©aS¹
 = 
¿wM­
;

1274 
pSts
->
tÙ®GcPoštCouÁ
++;

1280 ià(
´evD©a
 !ğ
NULL
) {

1281 
	`as£¹
(
´evAddr
 >= 0);

1282 
addrDiff
 = 
addr
 - 
´evAddr
;

1284 ià(
addrDiff
 < 0) {

1285 
	`ALOGE
("GLITCH:‡ddress went backward (0x%04x->0x%04x, %s.%s)",

1286 
´evAddr
, 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1287 } ià(
addrDiff
 > 
kMaxGcPoštG­
) {

1288 ià(
REGISTER_MAP_VERBOSE
) {

1289 
	`ALOGI
("HEY:‡ddrDiff is %d, max %d (0x%04x->0x%04x %s.%s)",

1290 
addrDiff
, 
kMaxGcPoštG­
, 
´evAddr
, 
addr
,

1291 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1295 
pSts
->
gcPoštG­
[
addrDiff
]++;

1297 
pSts
->
gcG­CouÁ
++;

1309 
numDiff
 = 0;

1310 
div
 = (è
kNumUpd©ePo¢s
 / 
m‘hod
->
»gi¡”sSize
;

1311 
»gBy‹
;

1312 
»gBy‹
 = 0;„egBy‹ < 
pM­
->
»gWidth
;„egByte++) {

1313 
´ev
, 
cur
, 
b™
;

1315 
´ev
 = 
´evD©a
[
»gBy‹
];

1316 
cur
 = 
d©aS¹
[
»gBy‹
];

1318 
b™
 = 0; bit < 8; bit++) {

1319 ià(((
´ev
 >> 
b™
è& 1è!ğ((
cur
 >> bit) & 1)) {

1320 
numDiff
++;

1322 
b™Num
 = 
»gBy‹
 * 8 + 
b™
;

1324 ià(
b™Num
 < 16)

1325 
pSts
->
upd©eLT16
++;

1327 
pSts
->
upd©eGE16
++;

1329 ià(
m‘hod
->
»gi¡”sSize
 < 16)

1332 ià(
b™Num
 >ğ
m‘hod
->
»gi¡”sSize
) {

1334 
	`ALOGE
("WEIRD: bit=%d (%d/%d),…rev=%02x cur=%02x",

1335 
b™
, 
»gBy‹
, 
m‘hod
->
»gi¡”sSize
,

1336 
´ev
, 
cur
);

1337 
	`as£¹
(
çl£
);

1339 
idx
 = (è(
b™Num
 * 
div
);

1340 ià(!(
idx
 >ğ0 && idx < 
kNumUpd©ePo¢s
)) {

1341 
	`ALOGE
("FAIL: bitNum=%d (of %d) div=%.3f idx=%d",

1342 
b™Num
, 
m‘hod
->
»gi¡”sSize
, 
div
, 
idx
);

1343 
	`as£¹
(
çl£
);

1345 
pSts
->
upd©ePo¢
[
idx
]++;

1350 ià(
numDiff
 > 
kMaxDiffB™s
) {

1351 ià(
REGISTER_MAP_VERBOSE
) {

1352 
	`ALOGI
("WOW:‚umDifài %d, max %d", 
numDiff
, 
kMaxDiffB™s
);

1355 
pSts
->
numDiffB™s
[
numDiff
]++;

1360 
¿wM­
 +ğ
pM­
->
»gWidth
;

1362 
´evAddr
 = 
addr
;

1363 
´evD©a
 = 
d©aS¹
;

1365 
	}
}

1383 
	$compu‹B™Diff
(cÚ¡ 
u1
* 
b™s1
, cÚ¡ u1* 
b™s2
, 
by‹Width
,

1384 * 
pFœ¡B™Chªged
, * 
pNumB™sChªged
, 
u1
* 
ËbOutBuf
)

1386 
numB™sChªged
 = 0;

1387 
fœ¡B™Chªged
 = -1;

1388 
ËbSize
 = 0;

1389 
by‹Num
;

1395 
by‹Num
 = 0; by‹Num < 
by‹Width
; byteNum++) {

1396 
u1
 
by‹1
 = *
b™s1
++;

1397 
u1
 
by‹2
 = *
b™s2
++;

1398 ià(
by‹1
 !ğ
by‹2
) {

1402 
b™Num
;

1403 
b™Num
 = 0; bitNum < 8; bitNum++) {

1404 ià(((
by‹1
 >> 
b™Num
è& 0x01è!ğ((
by‹2
 >> bitNum) & 0x01)) {

1405 
b™Off£t
 = (
by‹Num
 << 3è+ 
b™Num
;

1407 ià(
fœ¡B™Chªged
 < 0)

1408 
fœ¡B™Chªged
 = 
b™Off£t
;

1409 
numB™sChªged
++;

1411 ià(
ËbOutBuf
 =ğ
NULL
) {

1412 
ËbSize
 +ğ
	`unsigÃdLeb128Size
(
b™Off£t
);

1414 
u1
* 
curBuf
 = 
ËbOutBuf
;

1415 
ËbOutBuf
 = 
	`wr™eUnsigÃdLeb128
ÖebOutBuf, 
b™Off£t
);

1416 
ËbSize
 +ğ
ËbOutBuf
 - 
curBuf
;

1423 ià(
numB™sChªged
 > 0)

1424 
	`as£¹
(
fœ¡B™Chªged
 >= 0);

1426 ià(
pFœ¡B™Chªged
 !ğ
NULL
)

1427 *
pFœ¡B™Chªged
 = 
fœ¡B™Chªged
;

1428 ià(
pNumB™sChªged
 !ğ
NULL
)

1429 *
pNumB™sChªged
 = 
numB™sChªged
;

1431  
ËbSize
;

1432 
	}
}

1442 
Regi¡”M­
* 
	$com´essM­Difã»ÁŸl
(cÚ¡ 
Regi¡”M­
* 
pM­
,

1443 cÚ¡ 
M‘hod
* 
m‘h
)

1445 
Regi¡”M­
* 
pNewM­
 = 
NULL
;

1446 
ÜigSize
 = 
	`compu‹Regi¡”M­Size
(
pM­
);

1447 
u1
* 
tmpPŒ
;

1448 
addrWidth
, 
»gWidth
, 
numEÁr›s
;

1449 
boŞ
 
debug
 = 
çl£
;

1451 ià(
çl£
 &&

1452 
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, "Landroid/text/StaticLayout;") == 0 &&

1453 
	`¡rcmp
(
m‘h
->
Çme
, "generate") == 0)

1455 
debug
 = 
Œue
;

1458 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1459 
fÜm©
) {

1460 
kRegM­FÜm©Com·ù8
:

1461 
addrWidth
 = 1;

1463 
kRegM­FÜm©Com·ù16
:

1464 
addrWidth
 = 2;

1467 
	`ALOGE
("ERROR: cª'ˆcom´es m­ w™h fÜm©=%d", 
fÜm©
);

1468  
NULL
;

1471 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

1472 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1474 ià(
debug
) {

1475 
	`ALOGI
("COMPRESS: %s.%s‡w=%d„w=%d‚e=%d",

1476 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
,

1477 
addrWidth
, 
»gWidth
, 
numEÁr›s
);

1478 
	`dumpRegi¡”M­
(
pM­
, -1);

1481 ià(
numEÁr›s
 <= 1) {

1482 
	`ALOGV
("Can't compress map with 0 or 1ƒntries");

1483  
NULL
;

1503 
UniquePŒ
<
u1
[]> 
	`tmpBuf
(
Ãw
 u1[
ÜigSize
 + (1 + 3 + 
»gWidth
)]);

1504 ià(
tmpBuf
.
	`g‘
(è=ğ
NULL
)

1505  
NULL
;

1507 
tmpPŒ
 = 
tmpBuf
.
	`g‘
();

1509 cÚ¡ 
u1
* 
m­D©a
 = 
pM­
->
d©a
;

1510 cÚ¡ 
u1
* 
´evB™s
;

1511 
u2
 
addr
, 
´evAddr
;

1513 
addr
 = *
m­D©a
++;

1514 ià(
addrWidth
 > 1)

1515 
addr
 |ğ(*
m­D©a
++) << 8;

1517 ià(
addr
 >= 128) {

1518 
	`ALOGV
("Can't compress map with starting‡ddress >= 128");

1519  
NULL
;

1528 *
tmpPŒ
++ = 
addr
 | (
addrWidth
 > 1 ? 0x80 : 0x00);

1529 
	`memıy
(
tmpPŒ
, 
m­D©a
, 
»gWidth
);

1531 
´evB™s
 = 
m­D©a
;

1532 
´evAddr
 = 
addr
;

1534 
tmpPŒ
 +ğ
»gWidth
;

1535 
m­D©a
 +ğ
»gWidth
;

1540 
’Œy
 = 1;ƒÁry < 
numEÁr›s
;ƒntry++) {

1541 
addrDiff
;

1542 
u1
 
key
;

1547 
addr
 = *
m­D©a
++;

1548 ià(
addrWidth
 > 1)

1549 
addr
 |ğ(*
m­D©a
++) << 8;

1551 ià(
debug
)

1552 
	`ALOGI
("‡ddr=0x%04xƒÁ=%d (aw=%d)", 
addr
, 
’Œy
, 
addrWidth
);

1554 
addrDiff
 = 
addr
 - 
´evAddr
;

1555 
	`as£¹
(
addrDiff
 > 0);

1556 ià(
addrDiff
 < 8) {

1558 
key
 = 
addrDiff
 -1;

1559 ià(
debug
)

1560 
	`ALOGI
(" : sm®È%d, key=0x%02x", 
addrDiff
, 
key
);

1563 
key
 = 0x07;

1564 ià(
debug
)

1565 
	`ALOGI
(" :†¬g%d, key=0x%02x", 
addrDiff
, 
key
);

1568 
numB™sChªged
, 
fœ¡B™Chªged
, 
ËbSize
;

1570 
ËbSize
 = 
	`compu‹B™Diff
(
´evB™s
, 
m­D©a
, 
»gWidth
,

1571 &
fœ¡B™Chªged
, &
numB™sChªged
, 
NULL
);

1573 ià(
debug
) {

1574 
	`ALOGI
(" : diff fbc=%d‚bc=%d†s=%d (rw=%d)",

1575 
fœ¡B™Chªged
, 
numB™sChªged
, 
ËbSize
, 
»gWidth
);

1578 ià(
numB™sChªged
 == 0) {

1580 
key
 |= 0x08;

1581 ià(
debug
è
	`ALOGI
(" :‚o bits changed");

1582 } ià(
numB™sChªged
 =ğ1 && 
fœ¡B™Chªged
 < 16) {

1584 
key
 |ğ
fœ¡B™Chªged
 << 4;

1585 ià(
debug
è
	`ALOGI
(" : 1†ow bit changed");

1586 } ià(
numB™sChªged
 < 15 && 
ËbSize
 < 
»gWidth
) {

1588 
key
 |ğ0x08 | (
numB™sChªged
 << 4);

1589 ià(
debug
è
	`ALOGI
(" : some bits changed");

1592 
key
 |= 0x08 | 0xf0;

1593 ià(
debug
è
	`ALOGI
(" :ƒncode original");

1600 *
tmpPŒ
++ = 
key
;

1601 ià((
key
 & 0x07) == 0x07)

1602 
tmpPŒ
 = 
	`wr™eUnsigÃdLeb128
ÑmpPŒ, 
addrDiff
);

1604 ià((
key
 & 0x08) != 0) {

1605 
b™CouÁ
 = 
key
 >> 4;

1606 ià(
b™CouÁ
 == 0) {

1608 } ià(
b™CouÁ
 == 15) {

1610 
	`memıy
(
tmpPŒ
, 
m­D©a
, 
»gWidth
);

1611 
tmpPŒ
 +ğ
»gWidth
;

1614 (è
	`compu‹B™Diff
(
´evB™s
, 
m­D©a
, 
»gWidth
,

1615 
NULL
, NULL, 
tmpPŒ
);

1616 
tmpPŒ
 +ğ
ËbSize
;

1622 
´evB™s
 = 
m­D©a
;

1623 
´evAddr
 = 
addr
;

1624 
m­D©a
 +ğ
»gWidth
;

1629 ià(
tmpPŒ
 - 
tmpBuf
.
	`g‘
(è>ğ
ÜigSize
) {

1630 ià(
debug
) {

1631 
	`ALOGD
("Compressed size >= original (%d vs %d): %s.%s",

1632 
tmpPŒ
 - 
tmpBuf
.
	`g‘
(), 
ÜigSize
,

1633 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

1635  
NULL
;

1645 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

1646 
ÃwD©aSize
 = 
tmpPŒ
 - 
tmpBuf
.
	`g‘
();

1647 
ÃwM­Size
;

1649 
ÃwM­Size
 = 
kH—d”Size
 + 
	`unsigÃdLeb128Size
(
ÃwD©aSize
) +‚ewDataSize;

1650 ià(
ÃwM­Size
 >ğ
ÜigSize
) {

1651 ià(
debug
) {

1652 
	`ALOGD
("Final comp size >= original (%d vs %d): %s.%s",

1653 
ÃwM­Size
, 
ÜigSize
, 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

1655  
NULL
;

1658 
pNewM­
 = (
Regi¡”M­
*è
	`m®loc
(
ÃwM­Size
);

1659 ià(
pNewM­
 =ğ
NULL
)

1660  
NULL
;

1661 
	`dvmRegi¡”M­S‘FÜm©
(
pNewM­
, 
kRegM­FÜm©Difã»ÁŸl
);

1662 
	`dvmRegi¡”M­S‘OnH—p
(
pNewM­
, 
Œue
);

1663 
	`dvmRegi¡”M­S‘RegWidth
(
pNewM­
, 
»gWidth
);

1664 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pNewM­
, 
numEÁr›s
);

1666 
tmpPŒ
 = 
pNewM­
->
d©a
;

1667 
tmpPŒ
 = 
	`wr™eUnsigÃdLeb128
ÑmpPŒ, 
ÃwD©aSize
);

1668 
	`memıy
(
tmpPŒ
, 
tmpBuf
.
	`g‘
(), 
ÃwD©aSize
);

1670 ià(
REGISTER_MAP_VERBOSE
) {

1671 
	`ALOGD
("Compression successful (%d -> %d) from‡w=%d„w=%d‚e=%d",

1672 
	`compu‹Regi¡”M­Size
(
pM­
), compu‹Regi¡”M­Size(
pNewM­
),

1673 
addrWidth
, 
»gWidth
, 
numEÁr›s
);

1676  
pNewM­
;

1677 
	}
}

1682 
šlše
 
	$toggËB™
(
u1
* 
±r
, 
idx
)

1684 
±r
[
idx
 >> 3] ^= 1 << (idx & 0x07);

1685 
	}
}

1695 
Regi¡”M­
* 
	$uncom´essM­Difã»ÁŸl
(cÚ¡ 
Regi¡”M­
* 
pM­
)

1697 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

1698 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1699 
Regi¡”M­FÜm©
 
ÃwFÜm©
;

1700 
»gWidth
, 
numEÁr›s
, 
ÃwAddrWidth
, 
ÃwM­Size
;

1702 ià(
fÜm©
 !ğ
kRegM­FÜm©Difã»ÁŸl
) {

1703 
	`ALOGE
("NÙ difã»ÁŸÈ(%d)", 
fÜm©
);

1704  
NULL
;

1707 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

1708 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1711 cÚ¡ 
u1
* 
¤cPŒ
 = 
pM­
->
d©a
;

1712 
ex³ùedSrcL’
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1713 cÚ¡ 
u1
* 
¤cS¹
 = 
¤cPŒ
;

1716 
addr
 = *
¤cPŒ
 & 0x7f;

1717 ià((*
¤cPŒ
 & 0x80) == 0) {

1718 
ÃwFÜm©
 = 
kRegM­FÜm©Com·ù8
;

1719 
ÃwAddrWidth
 = 1;

1721 
ÃwFÜm©
 = 
kRegM­FÜm©Com·ù16
;

1722 
ÃwAddrWidth
 = 2;

1724 
¤cPŒ
++;

1727 ià(
REGISTER_MAP_VERBOSE
) {

1728 
	`ALOGI
("Expandingo map‡w=%d„w=%d‚e=%d",

1729 
ÃwAddrWidth
, 
»gWidth
, 
numEÁr›s
);

1731 
ÃwM­Size
 = 
kH—d”Size
 + (
ÃwAddrWidth
 + 
»gWidth
è* 
numEÁr›s
;

1732 
Regi¡”M­
* 
pNewM­
 = (Regi¡”M­*è
	`m®loc
(
ÃwM­Size
);

1734 ià(
pNewM­
 =ğ
NULL
)

1735  
NULL
;

1737 
	`dvmRegi¡”M­S‘FÜm©
(
pNewM­
, 
ÃwFÜm©
);

1738 
	`dvmRegi¡”M­S‘OnH—p
(
pNewM­
, 
Œue
);

1739 
	`dvmRegi¡”M­S‘RegWidth
(
pNewM­
, 
»gWidth
);

1740 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pNewM­
, 
numEÁr›s
);

1745 
u1
* 
d¡PŒ
 = 
pNewM­
->
d©a
;

1747 *
d¡PŒ
++ = 
addr
 & 0xff;

1748 ià(
ÃwAddrWidth
 > 1)

1749 *
d¡PŒ
++ = (
u1
è(
addr
 >> 8);

1751 
	`memıy
(
d¡PŒ
, 
¤cPŒ
, 
»gWidth
);

1753 
´evAddr
 = 
addr
;

1754 cÚ¡ 
u1
* 
´evB™s
 = 
d¡PŒ
;

1756 
d¡PŒ
 +ğ
»gWidth
;

1757 
¤cPŒ
 +ğ
»gWidth
;

1762 
’Œy
;

1763 
’Œy
 = 1;ƒÁry < 
numEÁr›s
;ƒntry++) {

1764 
addrDiff
;

1765 
u1
 
key
;

1767 
key
 = *
¤cPŒ
++;

1770 ià((
key
 & 0x07) == 7) {

1772 
addrDiff
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1774 
addrDiff
 = (
key
 & 0x07) +1;

1777 
addr
 = 
´evAddr
 + 
addrDiff
;

1778 *
d¡PŒ
++ = 
addr
 & 0xff;

1779 ià(
ÃwAddrWidth
 > 1)

1780 *
d¡PŒ
++ = (
u1
è(
addr
 >> 8);

1783 ià((
key
 & 0x08) != 0) {

1784 
b™CouÁ
 = (
key
 >> 4);

1785 ià(
b™CouÁ
 == 0) {

1787 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1788 } ià(
b™CouÁ
 == 15) {

1790 
	`memıy
(
d¡PŒ
, 
¤cPŒ
, 
»gWidth
);

1791 
¤cPŒ
 +ğ
»gWidth
;

1794 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1795 
b™CouÁ
--) {

1796 
b™Index
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1797 
	`toggËB™
(
d¡PŒ
, 
b™Index
);

1802 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1805 
	`toggËB™
(
d¡PŒ
, 
key
 >> 4);

1808 
´evAddr
 = 
addr
;

1809 
´evB™s
 = 
d¡PŒ
;

1810 
d¡PŒ
 +ğ
»gWidth
;

1813 ià(
d¡PŒ
 - (
u1
*è
pNewM­
 !ğ
ÃwM­Size
) {

1814 
	`ALOGE
("ERROR: output %d bytes,ƒxpected %d",

1815 
d¡PŒ
 - (
u1
*è
pNewM­
, 
ÃwM­Size
);

1816 
	`ä“
(
pNewM­
);

1817  
NULL
;

1820 ià(
¤cPŒ
 - 
¤cS¹
 !ğ
ex³ùedSrcL’
) {

1821 
	`ALOGE
("ERROR: consumed %d bytes,ƒxpected %d",

1822 
¤cPŒ
 - 
¤cS¹
, 
ex³ùedSrcL’
);

1823 
	`ä“
(
pNewM­
);

1824  
NULL
;

1827 ià(
REGISTER_MAP_VERBOSE
) {

1828 
	`ALOGD
("Expansion successful (%d -> %d)",

1829 
	`compu‹Regi¡”M­Size
(
pM­
), compu‹Regi¡”M­Size(
pNewM­
));

1832  
pNewM­
;

1833 
	}
}

	@vm/analysis/RegisterMap.h

22 #iâdeà
DALVIK_REGISTERMAP_H_


23 
	#DALVIK_REGISTERMAP_H_


	)

25 
	~"ª®ysis/V”ifySubs.h
"

26 
	~"ª®ysis/CodeV”ify.h
"

31 
	eRegi¡”M­FÜm©
 {

32 
	mkRegM­FÜm©Unknown
 = 0,

33 
	mkRegM­FÜm©NÚe
,

34 
	mkRegM­FÜm©Com·ù8
,

35 
	mkRegM­FÜm©Com·ù16
,

36 
	mkRegM­FÜm©Difã»ÁŸl
,

38 
	mkRegM­FÜm©OnH—p
 = 0x80,

53 
	sRegi¡”M­
 {

55 
u1
 
	mfÜm©
;

56 
u1
 
	m»gWidth
;

57 
u1
 
	mnumEÁr›s
[2];

60 
u1
 
	md©a
[1];

63 
boŞ
 
dvmRegi¡”M­S¹up
();

64 
dvmRegi¡”M­Shutdown
();

69 
INLINE
 
Regi¡”M­FÜm©
 
	$dvmRegi¡”M­G‘FÜm©
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

70  (
Regi¡”M­FÜm©
)(
pM­
->
fÜm©
 & ~(
kRegM­FÜm©OnH—p
));

71 
	}
}

76 
INLINE
 
	$dvmRegi¡”M­S‘FÜm©
(
Regi¡”M­
* 
pM­
, 
Regi¡”M­FÜm©
 
fÜm©
)

78 
pM­
->
fÜm©
 &ğ
kRegM­FÜm©OnH—p
;

79 
pM­
->
fÜm©
 |= format;

80 
	}
}

85 
INLINE
 
boŞ
 
	$dvmRegi¡”M­G‘OnH—p
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

86  (
pM­
->
fÜm©
 & 
kRegM­FÜm©OnH—p
) != 0;

87 
	}
}

92 
INLINE
 
u1
 
	$dvmRegi¡”M­G‘RegWidth
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

93  
pM­
->
»gWidth
;

94 
	}
}

99 
INLINE
 
	$dvmRegi¡”M­S‘RegWidth
(
Regi¡”M­
* 
pM­
, 
»gWidth
) {

100 
pM­
->
»gWidth
 =„egWidth;

101 
	}
}

106 
INLINE
 
	$dvmRegi¡”M­S‘OnH—p
(
Regi¡”M­
* 
pM­
, 
boŞ
 
v®
) {

107 ià(
v®
)

108 
pM­
->
fÜm©
 |ğ
kRegM­FÜm©OnH—p
;

110 
pM­
->
fÜm©
 &ğ~(
kRegM­FÜm©OnH—p
);

111 
	}
}

116 
INLINE
 
u2
 
	$dvmRegi¡”M­G‘NumEÁr›s
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

117  
pM­
->
numEÁr›s
[0] | (pMap->numEntries[1] << 8);

118 
	}
}

123 
INLINE
 
	$dvmRegi¡”M­S‘NumEÁr›s
(
Regi¡”M­
* 
pM­
, 
u2
 
numEÁr›s
) {

124 
pM­
->
numEÁr›s
[0] = (
u1
)‚umEntries;

125 
pM­
->
numEÁr›s
[1] =‚umEntries >> 8;

126 
	}
}

137 cÚ¡ 
u1
* 
dvmRegi¡”M­G‘Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
addr
);

148 
INLINE
 
	$dvmR–—£Regi¡”M­Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, cÚ¡ 
u1
* 
d©a
)

149 {
	}
}

162 
	sRegi¡”M­M‘hodPoŞ
 {

163 
u2
 
	mm‘hodCouÁ
;

166 
u4
 
	mm‘hodD©a
[1];

180 
	sRegi¡”M­CÏssPoŞ
 {

181 
u4
 
	mnumCÏs£s
;

184 
u4
 
	mşassD©aOff£t
[1];

193 cÚ¡ * 
dvmRegi¡”M­G‘CÏssD©a
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
şassIdx
,

194 
u4
* 
pNumM­s
);

203 cÚ¡ 
Regi¡”M­
* 
dvmRegi¡”M­G‘Next
(cÚ¡ ** 
pPŒ
);

212 
	sRegi¡”M­Bud”
 {

214 * 
	md©a
;

215 
size_t
 
	msize
;

218 
MemM­pšg
 
	mmemM­
;

224 
Regi¡”M­Bud”
* 
dvmG’”©eRegi¡”M­s
(
DvmDex
* 
pDvmDex
);

229 
dvmF»eRegi¡”M­Bud”
(
Regi¡”M­Bud”
* 
pBud”
);

237 
Regi¡”M­
* 
dvmG’”©eRegi¡”M­V
(
V”if›rD©a
* 
vd©a
);

249 cÚ¡ 
Regi¡”M­
* 
dvmG‘Ex·ndedRegi¡”M­0
(
M‘hod
* 
m‘hod
);

250 
INLINE
 cÚ¡ 
Regi¡”M­
* 
	$dvmG‘Ex·ndedRegi¡”M­
(
M‘hod
* 
m‘hod
)

252 cÚ¡ 
Regi¡”M­
* 
curM­
 = 
m‘hod
->
»gi¡”M­
;

253 ià(
curM­
 =ğ
NULL
)

254  
NULL
;

255 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
curM­
);

256 ià(
fÜm©
 =ğ
kRegM­FÜm©Com·ù8
 || fÜm© =ğ
kRegM­FÜm©Com·ù16
) {

257  
curM­
;

259  
	`dvmG‘Ex·ndedRegi¡”M­0
(
m‘hod
);

261 
	}
}

264 
dvmRegi¡”M­DumpSts
();

	@vm/analysis/VerifySubs.cpp

20 
	~"D®vik.h
"

21 
	~"ª®ysis/CodeV”ify.h
"

22 
	~"libdex/In¡rUts.h
"

29 
boŞ
 
	$dvmWªtV”bo£V”ifiÿtiÚ
(cÚ¡ 
M‘hod
* 
m‘h
)

31  
çl£
;

33 cÚ¡ * 
cd
 = "Lcom/android/server/am/ActivityManagerService;";

34 cÚ¡ * 
mn
 = "trimApplications";

35 cÚ¡ * 
sg
 = "()V";

36  (
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, 
cd
) == 0 &&

37 
	`dvmCom·»NameDesütÜAndM‘hod
(
mn
, 
sg
, 
m‘h
) == 0);

38 
	}
}

45 
	$dvmLogV”ifyFau»
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ * 
fÜm©
, ...)

47 
va_li¡
 
­
;

48 
logLev–
;

50 ià(
gDvm
.
İtimizšg
) {

54 
logLev–
 = 
ANDROID_LOG_WARN
;

57 
	`va_¡¬t
(
­
, 
fÜm©
);

58 
	`LOG_PRI_VA
(
logLev–
, 
LOG_TAG
, 
fÜm©
, 
­
);

59 ià(
m‘h
 !ğ
NULL
) {

60 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

61 
	`LOG_PRI
(
logLev–
, 
LOG_TAG
, "VFY:„ejected %s.%s %s",

62 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

63 
	`ä“
(
desc
);

65 
	}
}

74 
	$dvmLogUÇbËToResŞveCÏss
(cÚ¡ * 
missšgCÏssDesü
,

75 cÚ¡ 
M‘hod
* 
m‘h
)

77 ià(
gDvm
.
İtimizšg
) {

81 
¡d
::
¡ršg
 
dÙMissšgCÏss
 = 
	`dvmHumªR—dabËDesütÜ
(
missšgCÏssDesü
);

82 
¡d
::
¡ršg
 
dÙFromCÏss
 = 
	`dvmHumªR—dabËDesütÜ
(
m‘h
->
şazz
->
desütÜ
);

83 
	`ALOGE
("Could‚ot find class '%s',„eferenced from method %s.%s",

84 
dÙMissšgCÏss
.
	`c_¡r
(), 
dÙFromCÏss
.c_¡r(), 
m‘h
->
Çme
);

85 
	}
}

92 
boŞ
 
	$dvmG‘B¿nchOff£t
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
,

93 
curOff£t
, 
s4
* 
pOff£t
, 
boŞ
* 
pCÚd™iÚ®
)

95 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

97 *
š¢s
 & 0xff) {

98 
OP_GOTO
:

99 *
pOff£t
 = ((
s2
è*
š¢s
) >> 8;

100 *
pCÚd™iÚ®
 = 
çl£
;

102 
OP_GOTO_32
:

103 *
pOff£t
 = 
š¢s
[1] | (((
u4
) insns[2]) << 16);

104 *
pCÚd™iÚ®
 = 
çl£
;

106 
OP_GOTO_16
:

107 *
pOff£t
 = (
s2
è
š¢s
[1];

108 *
pCÚd™iÚ®
 = 
çl£
;

110 
OP_IF_EQ
:

111 
OP_IF_NE
:

112 
OP_IF_LT
:

113 
OP_IF_GE
:

114 
OP_IF_GT
:

115 
OP_IF_LE
:

116 
OP_IF_EQZ
:

117 
OP_IF_NEZ
:

118 
OP_IF_LTZ
:

119 
OP_IF_GEZ
:

120 
OP_IF_GTZ
:

121 
OP_IF_LEZ
:

122 *
pOff£t
 = (
s2
è
š¢s
[1];

123 *
pCÚd™iÚ®
 = 
Œue
;

126  
çl£
;

130  
Œue
;

131 
	}
}

	@vm/analysis/VerifySubs.h

20 #iâdeà
DALVIK_VERIFYSUBS_H_


21 
	#DALVIK_VERIFYSUBS_H_


	)

33 
u4
 
	tIn¢FÏgs
;

35 
	#kIn¢FÏgWidthMask
 0x0000ffff

	)

36 
	#kIn¢FÏgInTry
 (1 << 16)

	)

37 
	#kIn¢FÏgB¿nchT¬g‘
 (1 << 17)

	)

38 
	#kIn¢FÏgGcPošt
 (1 << 18)

	)

39 
	#kIn¢FÏgVis™ed
 (1 << 30)

	)

40 
	#kIn¢FÏgChªged
 (1 << 31)

	)

43 
boŞ
 
dvmCompu‹CodeWidths
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

44 * 
pNewIn¡ªûCouÁ
);

47 
boŞ
 
dvmS‘TryFÏgs
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
);

50 
	#LOG_VFY
(...è
	`dvmLogV”ifyFau»
(
NULL
, 
__VA_ARGS__
)

	)

51 
	#LOG_VFY_METH
(
_m‘h
, ...è
	`dvmLogV”ifyFau»
(_m‘h, 
__VA_ARGS__
)

	)

54 
	$dvmLogV”ifyFau»
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ * 
fÜm©
, ...)

55 #ià
	`defšed
(
__GNUC__
)

56 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

61 
	`dvmLogUÇbËToResŞveCÏss
(cÚ¡ * 
missšgCÏssDesü
,

62 cÚ¡ 
M‘hod
* 
m‘h
);

65 
boŞ
 
	`dvmG‘B¿nchOff£t
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
,

66 
curOff£t
, 
s4
* 
pOff£t
, 
boŞ
* 
pCÚd™iÚ®
);

69 
	`dvmD‘”mšeC©1CÚ¡
(
s4
 
v®ue
);

72 
boŞ
 
	`dvmWªtV”bo£V”ifiÿtiÚ
(cÚ¡ 
M‘hod
* 
m‘h
);

	@vm/analysis/VfyBasicBlock.cpp

20 
	~"D®vik.h
"

21 
	~"ª®ysis/VfyBasicBlock.h
"

22 
	~"ª®ysis/CodeV”ify.h
"

23 
	~"ª®ysis/V”ifySubs.h
"

24 
	~"libdex/DexC©ch.h
"

25 
	~"libdex/In¡rUts.h
"

36 
u4
 
	$exŒaùC©chHªdËrs
(cÚ¡ 
DexCode
* 
pCode
, cÚ¡ 
DexTry
* 
pTry
,

37 
u4
* 
addrBuf
, 
size_t
 
addrBufSize
)

39 
DexC©chI‹¿tÜ
 
™”©Ü
;

40 
idx
 = 0;

42 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
pTry
->
hªdËrOff
);

43 
Œue
) {

44 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

45 ià(
hªdËr
 =ğ
NULL
)

48 ià(
idx
 < 
addrBufSize
) {

49 
addrBuf
[
idx
] = 
hªdËr
->
add»ss
;

51 
idx
++;

54  
idx
;

55 
	}
}

61 
boŞ
 
	$isD©aChunk
(
u2
 
š¢
)

63  (
š¢
 =ğ
kPackedSw™chSigÇtu»
 ||

64 
š¢
 =ğ
kS·r£Sw™chSigÇtu»
 ||

65 
š¢
 =ğ
kA¼ayD©aSigÇtu»
);

66 
	}
}

72 
VfyBasicBlock
* 
	$®locVfyBasicBlock
(
V”if›rD©a
* 
vd©a
, 
u4
 
idx
)

74 
VfyBasicBlock
* 
ÃwBlock
 = (VfyBasicBlock*è
	`ÿÎoc
(1, (VfyBasicBlock));

75 ià(
ÃwBlock
 =ğ
NULL
)

76  
NULL
;

86 
ÃwBlock
->
´edeûssÜs
 = 
	`dvmPoš‹rS‘AÎoc
(32);

87 ià(
ÃwBlock
->
´edeûssÜs
 =ğ
NULL
) {

88 
	`ä“
(
ÃwBlock
);

89  
NULL
;

92 
ÃwBlock
->
fœ¡Addr
 = (
u4
) -1;

94 
ÃwBlock
->
liveRegs
 = 
	`dvmAÎocB™VeùÜ
(
vd©a
->
š¢RegCouÁ
, 
çl£
);

95 ià(
ÃwBlock
->
liveRegs
 =ğ
NULL
) {

96 
	`dvmPoš‹rS‘F»e
(
ÃwBlock
->
´edeûssÜs
);

97 
	`ä“
(
ÃwBlock
);

98  
NULL
;

101  
ÃwBlock
;

102 
	}
}

107 
boŞ
 
	$addToP»deûssÜ
(
V”if›rD©a
* 
vd©a
, 
VfyBasicBlock
* 
curBlock
,

108 
u4
 
rg‘Idx
)

110 
	`as£¹
(
rg‘Idx
 < 
vd©a
->
š¢sSize
);

119 
VfyBasicBlock
* 
rg‘Block
 = 
vd©a
->
basicBlocks
[
rg‘Idx
];

120 ià(
rg‘Block
 =ğ
NULL
) {

121 
rg‘Block
 = 
	`®locVfyBasicBlock
(
vd©a
, 
rg‘Idx
);

122 ià(
rg‘Block
 =ğ
NULL
)

123  
çl£
;

124 
vd©a
->
basicBlocks
[
rg‘Idx
] = 
rg‘Block
;

127 
Poš‹rS‘
* 
´eds
 = 
rg‘Block
->
´edeûssÜs
;

128 
boŞ
 
added
 = 
	`dvmPoš‹rS‘AddEÁry
(
´eds
, 
curBlock
);

129 ià(!
added
) {

136 
	`ALOGV
("ODD:…oint set forarg=0x%04x (%p)‡lready had block "

138 
rg‘Idx
, 
rg‘Block
, 
curBlock
->
fœ¡Addr
, curBlock);

141  
Œue
;

142 
	}
}

157 
boŞ
 
	$£tP»deûssÜs
(
V”if›rD©a
* 
vd©a
, 
VfyBasicBlock
* 
curBlock
,

158 
u4
 
curIdx
, 
OpcodeFÏgs
 
İFÏgs
, u4 
ÃxtIdx
, u4* 
hªdËrLi¡
,

159 
size_t
 
numHªdËrs
)

161 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

162 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

164 
hªdËrIdx
;

165 
hªdËrIdx
 = 0; hªdËrIdx < 
numHªdËrs
; handlerIdx++) {

166 ià(!
	`addToP»deûssÜ
(
vd©a
, 
curBlock
, 
hªdËrLi¡
[
hªdËrIdx
]))

167  
çl£
;

170 ià((
İFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

171 ià(!
	`addToP»deûssÜ
(
vd©a
, 
curBlock
, 
ÃxtIdx
))

172  
çl£
;

174 ià((
İFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

175 
boŞ
 
unu£d
, 
gÙB¿nch
;

176 
s4
 
b¿nchOff£t
, 
absOff£t
;

178 
gÙB¿nch
 = 
	`dvmG‘B¿nchOff£t
(
m‘h
, 
š¢FÏgs
, 
curIdx
,

179 &
b¿nchOff£t
, &
unu£d
);

180 
	`as£¹
(
gÙB¿nch
);

181 
absOff£t
 = 
curIdx
 + 
b¿nchOff£t
;

182 
	`as£¹
(
absOff£t
 >ğ0 && (
u4
èabsOff£ˆ< 
vd©a
->
š¢sSize
);

184 ià(!
	`addToP»deûssÜ
(
vd©a
, 
curBlock
, 
absOff£t
))

185  
çl£
;

188 ià((
İFÏgs
 & 
kIn¡rCªSw™ch
) != 0) {

189 cÚ¡ 
u2
* 
curIn¢
 = &
m‘h
->
š¢s
[
curIdx
];

190 cÚ¡ 
u2
* 
d©aPŒ
;

193 
s4
 
off£tToD©a
 = 
curIn¢
[1] | ((s4) curInsn[2]) << 16;

194 
d©aPŒ
 = 
curIn¢
 + 
off£tToD©a
;

201 
u2
 
sw™chCouÁ
 = 
d©aPŒ
[1];

207 ià(
	`dexOpcodeFromCodeUn™
(
m‘h
->
š¢s
[
curIdx
]è=ğ
OP_PACKED_SWITCH
) {

208 
d©aPŒ
 += 4;

210 
	`as£¹
(
	`dexOpcodeFromCodeUn™
(
m‘h
->
š¢s
[
curIdx
]) ==

211 
OP_SPARSE_SWITCH
);

212 
d©aPŒ
 +ğ2 + 2 * 
sw™chCouÁ
;

215 
u4
 
sw™chIdx
;

216 
sw™chIdx
 = 0; sw™chIdx < 
sw™chCouÁ
; switchIdx++) {

217 
s4
 
off£t
, 
absOff£t
;

219 
off£t
 = (
s4
è
d©aPŒ
[
sw™chIdx
*2] |

220 (
s4
è(
d©aPŒ
[
sw™chIdx
*2 +1] << 16);

221 
absOff£t
 = 
curIdx
 + 
off£t
;

222 
	`as£¹
(
absOff£t
 >ğ0 && (
u4
èabsOff£ˆ< 
vd©a
->
š¢sSize
);

224 ià(!
	`addToP»deûssÜ
(
vd©a
, 
curBlock
, 
absOff£t
))

225  
çl£
;

229 ià(
çl£
) {

230 ià(
	`dvmPoš‹rS‘G‘CouÁ
(
curBlock
->
´edeûssÜs
) > 256) {

231 
	`ALOGI
("LÙ oà´ed © 0x%04x iÀ%s.%s:%s", 
curIdx
,

232 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, m‘h->
shÜty
);

236  
Œue
;

237 
	}
}

242 
	$dumpBasicBlocks
(cÚ¡ 
V”if›rD©a
* 
vd©a
)

244 
´štBuf
[256];

245 
idx
;

246 
couÁ
;

248 
	`ALOGI
("Basiøblock fÜ %s.%s:%s", 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

249 
vd©a
->
m‘hod
->
Çme
, vd©a->m‘hod->
shÜty
);

250 
idx
 = 0; idx < 
vd©a
->
š¢sSize
; idx++) {

251 
VfyBasicBlock
* 
block
 = 
vd©a
->
basicBlocks
[
idx
];

252 ià(
block
 =ğ
NULL
)

255 
	`as£¹
(
block
->
fœ¡Addr
 =ğ
idx
);

256 
couÁ
 = 
	`¢´štf
(
´štBuf
, (printBuf), " %04x-%04x ",

257 
block
->
fœ¡Addr
, block->
Ï¡Addr
);

259 
Poš‹rS‘
* 
´eds
 = 
block
->
´edeûssÜs
;

260 
size_t
 
numP»ds
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
´eds
);

262 ià(
numP»ds
 > 0) {

263 
couÁ
 +ğ
	`¢´štf
(
´štBuf
 + count, (printBuf) - count,

266 
´edIdx
;

267 
´edIdx
 = 0;…»dIdx < 
numP»ds
;…redIdx++) {

268 ià(
couÁ
 >ğ(è(
´štBuf
))

270 cÚ¡ 
VfyBasicBlock
* 
´ed
 =

271 (cÚ¡ 
VfyBasicBlock
*è
	`dvmPoš‹rS‘G‘EÁry
(
´eds
, 
´edIdx
);

272 
couÁ
 +ğ
	`¢´štf
(
´štBuf
 + count, (printBuf) - count,

273 "%04x(%p),", 
´ed
->
fœ¡Addr
,…red);

276 
couÁ
 +ğ
	`¢´štf
(
´štBuf
 + count, (printBuf) - count,

280 
´štBuf
[(printBuf)-2] = '!';

281 
´štBuf
[(printBuf)-1] = '\0';

283 
	`ALOGI
("%s", 
´štBuf
);

286 
	`u¦“p
(100 * 1000);

287 
	}
}

295 
boŞ
 
	$dvmCompu‹VfyBasicBlocks
(
V”if›rD©a
* 
vd©a
)

297 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
 = 
vd©a
->insnFlags;

298 cÚ¡ 
M‘hod
* 
m‘h
 = 
vd©a
->
m‘hod
;

299 cÚ¡ 
u4
 
š¢sSize
 = 
vd©a
->insnsSize;

300 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

301 cÚ¡ 
DexTry
* 
pTr›s
 = 
NULL
;

302 cÚ¡ 
size_t
 
kHªdËrSckAÎocSize
 = 16;

303 
u4
 
hªdËrAddrs
[
kHªdËrSckAÎocSize
];

304 
u4
* 
hªdËrLi¡AÎoc
 = 
NULL
;

305 
u4
* 
hªdËrLi¡
 = 
NULL
;

306 
size_t
 
numHªdËrs
 = 0;

307 
u4
 
idx
, 
blockS¹Addr
;

308 
boŞ
 
»suÉ
 = 
çl£
;

310 
boŞ
 
v”bo£
 = 
çl£
;

311 ià(
v”bo£
) {

312 
	`ALOGI
("Basic blocks for %s.%s:%s",

313 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, m‘h->
shÜty
);

326 
vd©a
->
basicBlocks
 =

327 (
VfyBasicBlock
**è
	`ÿÎoc
(
š¢sSize
, (VfyBasicBlock*));

328 ià(
vd©a
->
basicBlocks
 =ğ
NULL
)

329  
çl£
;

339 
u4
 
ŒyIndex
 = 0, 
ŒyS¹
 = 0, 
ŒyEnd
 = 0;

340 ià(
pCode
->
Œ›sSize
 != 0) {

341 
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

344 
u4
 
debugBBIndex
 = 0;

349 
blockS¹Addr
 = 0;

351 
idx
 = 0; idx < 
š¢sSize
; ) {

357 ià(
pTr›s
 !ğ
NULL
 && 
idx
 >ğ
ŒyEnd
) {

358 ià(
ŒyIndex
 =ğ
pCode
->
Œ›sSize
) {

360 
pTr›s
 = 
NULL
;

361 
numHªdËrs
 = 0;

372 
ŒyS¹
 = 
pTr›s
[
ŒyIndex
].
¡¬tAddr
;

373 
ŒyEnd
 = 
ŒyS¹
 + 
pTr›s
[
ŒyIndex
].
š¢CouÁ
;

375 ià(
hªdËrLi¡AÎoc
 !ğ
NULL
) {

376 
	`ä“
(
hªdËrLi¡AÎoc
);

377 
hªdËrLi¡AÎoc
 = 
NULL
;

379 
numHªdËrs
 = 
	`exŒaùC©chHªdËrs
(
pCode
, &
pTr›s
[
ŒyIndex
],

380 
hªdËrAddrs
, 
kHªdËrSckAÎocSize
);

381 
	`as£¹
(
numHªdËrs
 > 0);

382 ià(
numHªdËrs
 <ğ
kHªdËrSckAÎocSize
) {

383 
hªdËrLi¡
 = 
hªdËrAddrs
;

385 
	`ALOGD
("ov”æow,‚umHªdËrs=%d", 
numHªdËrs
);

386 
hªdËrLi¡AÎoc
 = (
u4
*è
	`m®loc
((u4è* 
numHªdËrs
);

387 ià(
hªdËrLi¡AÎoc
 =ğ
NULL
)

388  
çl£
;

389 
	`exŒaùC©chHªdËrs
(
pCode
, &
pTr›s
[
ŒyIndex
],

390 
hªdËrLi¡AÎoc
, 
numHªdËrs
);

391 
hªdËrLi¡
 = 
hªdËrLi¡AÎoc
;

394 
	`ALOGV
("+++ start=%xƒnd=%x‚umHan=%d",

395 
ŒyS¹
, 
ŒyEnd
, 
numHªdËrs
);

397 
ŒyIndex
++;

409 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(
m‘h
->
š¢s
[
idx
]);

410 
OpcodeFÏgs
 
İFÏgs
 = 
	`dexG‘FÏgsFromOpcode
(
İcode
);

411 
size_t
 
ÃxtIdx
 = 
idx
 + 
	`dexG‘WidthFromIn¡ruùiÚ
(&
m‘h
->
š¢s
[idx]);

412 
boŞ
 
’dBB
 = 
çl£
;

413 
boŞ
 
ignÜeIn¡r
 = 
çl£
;

415 ià((
İFÏgs
 & 
kIn¡rCªCÚtšue
) == 0) {

417 
’dBB
 = 
Œue
;

418 } ià((
İFÏgs
 & (
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
)) != 0) {

420 
’dBB
 = 
Œue
;

421 } ià((
İFÏgs
 & 
kIn¡rCªThrow
) != 0 &&

422 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
idx
))

425 
’dBB
 = 
Œue
;

426 } ià(
	`isD©aChunk
(
m‘h
->
š¢s
[
idx
])) {

433 
’dBB
 = 
ignÜeIn¡r
 = 
Œue
;

434 } ià(
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
ÃxtIdx
)) {

443 
	`as£¹
(
ÃxtIdx
 < 
š¢sSize
);

444 
’dBB
 = 
Œue
;

445 } ià(
İcode
 =ğ
OP_NOP
 && 
	`isD©aChunk
(
m‘h
->
š¢s
[
ÃxtIdx
])) {

451 
’dBB
 = 
ignÜeIn¡r
 = 
Œue
;

454 
	`as£¹
((
İFÏgs
 & 
kIn¡rCªR‘uº
) == 0);

457 ià(
v”bo£
) {

458 
btc
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
idx
) ? '>' : ' ';

459 
Œyc
 =

460 (
pTr›s
 !ğ
NULL
 && 
idx
 >ğ
ŒyS¹
 && idx < 
ŒyEnd
) ? 't' : ' ';

461 
boŞ
 
¡¬tBB
 = (
idx
 =ğ
blockS¹Addr
);

462 cÚ¡ * 
¡¬tEnd
;

465 ià(
ignÜeIn¡r
)

466 
¡¬tEnd
 = "IGNORE";

467 ià(
¡¬tBB
 && 
’dBB
)

468 
¡¬tEnd
 = "START/END";

469 ià(
¡¬tBB
)

470 
¡¬tEnd
 = "START";

471 ià(
’dBB
)

472 
¡¬tEnd
 = "END";

474 
¡¬tEnd
 = "-";

476 
	`ALOGI
("%04x: %c%c% #%d", 
idx
, 
Œyc
, 
btc
, 
¡¬tEnd
, 
debugBBIndex
);

478 ià(
pTr›s
 !ğ
NULL
 && 
idx
 =ğ
ŒyS¹
) {

479 
	`as£¹
(
numHªdËrs
 > 0);

480 
	`ALOGI
(" EXC block: [%04x, %04x) %d:(%04x...)",

481 
ŒyS¹
, 
ŒyEnd
, 
numHªdËrs
, 
hªdËrLi¡
[0]);

485 ià(
idx
 !ğ
blockS¹Addr
) {

487 
	`as£¹
(
vd©a
->
basicBlocks
[
idx
] =ğ
NULL
);

489 ià(
’dBB
) {

490 ià(!
ignÜeIn¡r
) {

494 
VfyBasicBlock
* 
curBlock
 = 
vd©a
->
basicBlocks
[
blockS¹Addr
];

495 ià(
curBlock
 =ğ
NULL
) {

496 
curBlock
 = 
	`®locVfyBasicBlock
(
vd©a
, 
blockS¹Addr
);

497 ià(
curBlock
 =ğ
NULL
)

498  
çl£
;

499 
vd©a
->
basicBlocks
[
blockS¹Addr
] = 
curBlock
;

502 
curBlock
->
fœ¡Addr
 = 
blockS¹Addr
;

503 
curBlock
->
Ï¡Addr
 = 
idx
;

505 ià(!
	`£tP»deûssÜs
(
vd©a
, 
curBlock
, 
idx
, 
İFÏgs
, 
ÃxtIdx
,

506 
hªdËrLi¡
, 
numHªdËrs
))

508 
ba
;

512 
blockS¹Addr
 = 
ÃxtIdx
;

513 
debugBBIndex
++;

516 
idx
 = 
ÃxtIdx
;

519 
	`as£¹
(
idx
 =ğ
š¢sSize
);

521 
»suÉ
 = 
Œue
;

523 ià(
v”bo£
)

524 
	`dumpBasicBlocks
(
vd©a
);

526 
ba
:

527 
	`ä“
(
hªdËrLi¡AÎoc
);

528  
»suÉ
;

529 
	}
}

534 
	$dvmF»eVfyBasicBlocks
(
V”if›rD©a
* 
vd©a
)

536 
idx
;

538 ià(
vd©a
->
basicBlocks
 =ğ
NULL
)

541 
idx
 = 0; idx < 
vd©a
->
š¢sSize
; idx++) {

542 
VfyBasicBlock
* 
block
 = 
vd©a
->
basicBlocks
[
idx
];

543 ià(
block
 =ğ
NULL
)

546 
	`dvmPoš‹rS‘F»e
(
block
->
´edeûssÜs
);

547 
	`ä“
(
block
);

549 
	}
}

	@vm/analysis/VfyBasicBlock.h

21 #iâdeà
DALVIK_VFYBASICBLOCK_H_


22 
	#DALVIK_VFYBASICBLOCK_H_


	)

24 
	~"Poš‹rS‘.h
"

26 
	gV”if›rD©a
;

42 
	sVfyBasicBlock
 {

43 
u4
 
	mfœ¡Addr
;

44 
u4
 
	mÏ¡Addr
;

45 
Poš‹rS‘
* 
	m´edeûssÜs
;

46 
B™VeùÜ
* 
	mliveRegs
;

47 
boŞ
 
	mchªged
;

48 
boŞ
 
	mvis™ed
;

54 
boŞ
 
dvmCompu‹VfyBasicBlocks
(
V”if›rD©a
* 
vd©a
);

59 
dvmF»eVfyBasicBlocks
(
V”if›rD©a
* 
vd©a
);

	@vm/arch/arm/HintsEABI.cpp

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

57 
u4
 
	$dvmPÏtfÜmInvokeHšts
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

59 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

60 
·dFÏgs
, 
jniHšts
;

61 
sigBy‹
;

62 
¡ackOff£t
, 
·dMask
;

64 
¡ackOff£t
 = 
·dFÏgs
 = 0;

65 
·dMask
 = 0x00000001;

68 
sig
++;

70 
Œue
) {

71 
sigBy‹
 = *(
sig
++);

73 ià(
sigBy‹
 == '\0')

76 ià(
sigBy‹
 == 'D' || sigByte == 'J') {

77 ià((
¡ackOff£t
 & 1) != 0) {

78 
·dFÏgs
 |ğ
·dMask
;

79 
¡ackOff£t
++;

80 
·dMask
 <<= 1;

82 
¡ackOff£t
 += 2;

83 
·dMask
 <<= 2;

85 
¡ackOff£t
++;

86 
·dMask
 <<= 1;

90 
jniHšts
 = 0;

92 ià(
¡ackOff£t
 > 
DALVIK_JNI_COUNT_SHIFT
) {

94 
jniHšts
 = 
DALVIK_JNI_NO_ARG_INFO
;

96 
	`as£¹
((
·dFÏgs
 & (0xfffffffà<< 
DALVIK_JNI_COUNT_SHIFT
)) == 0);

97 
¡ackOff£t
 -= 2;

98 ià(
¡ackOff£t
 < 0)

99 
¡ackOff£t
 = 0;

100 
jniHšts
 |ğ((
¡ackOff£t
+1è/ 2è<< 
DALVIK_JNI_COUNT_SHIFT
;

101 
jniHšts
 |ğ
·dFÏgs
;

104  
jniHšts
;

105 
	}
}

	@vm/arch/generic/Call.cpp

23 
	~"D®vik.h
"

24 
	~"ffi.h
"

29 
ffi_ty³
* 
	$g‘FfiTy³
(
sigTy³
)

31 
sigTy³
) {

32 'V':  &
ffi_ty³_void
;

33 'Z':  &
ffi_ty³_ušt8
;

34 'B':  &
ffi_ty³_sšt8
;

35 'C':  &
ffi_ty³_ušt16
;

36 'S':  &
ffi_ty³_sšt16
;

37 'I':  &
ffi_ty³_sšt32
;

38 'F':  &
ffi_ty³_æßt
;

39 'J':  &
ffi_ty³_sšt64
;

40 'D':  &
ffi_ty³_doubË
;

42 'L':  &
ffi_ty³_poš‹r
;

44 
	`ALOGE
("bad ff™y³ 0x%02x", 
sigTy³
);

45 
	`dvmAbÜt
();

46  
NULL
;

48 
	}
}

67 
	$dvmPÏtfÜmInvoke
(* 
pEnv
, 
CÏssObjeù
* 
şazz
, 
¬gInfo
, 
¬gc
,

68 cÚ¡ 
u4
* 
¬gv
, cÚ¡ * 
shÜty
, * 
func
, 
JV®ue
* 
pR‘uº
)

70 cÚ¡ 
kMaxArgs
 = 
¬gc
+2;

71 
ffi_cif
 
cif
;

72 
ffi_ty³
* 
ty³s
[
kMaxArgs
];

73 * 
v®ues
[
kMaxArgs
];

74 
ffi_ty³
* 
»tTy³
;

75 
sigBy‹
;

76 
¤cArg
, 
d¡Arg
;

78 
ty³s
[0] = &
ffi_ty³_poš‹r
;

79 
v®ues
[0] = &
pEnv
;

81 
ty³s
[1] = &
ffi_ty³_poš‹r
;

82 ià(
şazz
 !ğ
NULL
) {

83 
v®ues
[1] = &
şazz
;

84 
¤cArg
 = 0;

86 
v®ues
[1] = (*è
¬gv
++;

87 
¤cArg
 = 1;

89 
d¡Arg
 = 2;

95 
»tTy³
 = 
	`g‘FfiTy³
(*
shÜty
);

96 (
sigBy‹
 = *++
shÜty
) != '\0') {

97 
ty³s
[
d¡Arg
] = 
	`g‘FfiTy³
(
sigBy‹
);

98 
v®ues
[
d¡Arg
++] = (*è
¬gv
++;

99 ià(
sigBy‹
 == 'D' || sigByte == 'J')

100 
¬gv
++;

106 ià(
	`ffi_´•_cif
(&
cif
, 
FFI_DEFAULT_ABI
, 
d¡Arg
, 
»tTy³
, 
ty³s
è!ğ
FFI_OK
) {

107 
	`ALOGE
("ffi_prep_cif failed");

108 
	`dvmAbÜt
();

111 
	`ffi_ÿÎ
(&
cif
, 
	`FFI_FN
(
func
), 
pR‘uº
, 
v®ues
);

112 
	}
}

	@vm/arch/generic/Hints.cpp

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

52 
u4
 
	$dvmPÏtfÜmInvokeHšts
ĞcÚ¡ 
DexPrÙo
* 
´Ùo
)

55  
DALVIK_JNI_NO_ARG_INFO
;

56 
	}
}

	@vm/arch/x86-atom/Hints386ABI.cpp

45 
	~"D®vik.h
"

46 
	~"libdex/DexCÏss.h
"

47 
	~<¡dlib.h
>

48 
	~<¡ddef.h
>

49 
	~<sys/¡©.h
>

51 
u4
 
	$dvmPÏtfÜmInvokeHšts
(cÚ¡ 
DexPrÙo
* 
´Ùo
) {

53 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

54 
wÜdCouÁ
 = 0;

55 
sigBy‹
;

63 
sigBy‹
 = *(++
sig
);

64 ià(
sigBy‹
 == '\0') { ; }

65 ++
wÜdCouÁ
;

67 ià(
sigBy‹
 == 'D' || sigByte == 'J') {

68 ++
wÜdCouÁ
;

76 ià(
wÜdCouÁ
 > 0xFFFFè{  
DALVIK_JNI_NO_ARG_INFO
; }

77  
wÜdCouÁ
;

79 
	}
}

	@vm/arch/x86/Hints386ABI.cpp

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

61 
u4
 
	$dvmPÏtfÜmInvokeHšts
ĞcÚ¡ 
DexPrÙo
* 
´Ùo
)

63 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

64 
jniHšts
, 
wÜdCouÁ
;

65 
sigBy‹
;

67 
wÜdCouÁ
 = 0;

68 
Œue
) {

69 
sigBy‹
 = *(
sig
++);

71 ià(
sigBy‹
 == '\0')

74 
wÜdCouÁ
++;

76 ià(
sigBy‹
 == 'D' || sigByte == 'J') {

77 
wÜdCouÁ
++;

81 ià(
wÜdCouÁ
 > 0xFFFF) {

83 
jniHšts
 = 
DALVIK_JNI_NO_ARG_INFO
;

85 
jniHšts
 = 
wÜdCouÁ
;

88  
jniHšts
;

89 
	}
}

	@vm/compiler/Compiler.cpp

17 
	~<sys/mmª.h
>

18 
	~<”ºo.h
>

19 
	~<cuts/ashmem.h
>

21 
	~"D®vik.h
"

22 
	~"š‹½/J™.h
"

23 
	~"Comp”IÁ”Çls.h
"

25 "C" 
dvmComp”Tem¶©eS¹
();

26 "C" 
dmvComp”Tem¶©eEnd
();

28 
šlše
 
boŞ
 
	$wÜkQueueL’gth
()

30  
gDvmJ™
.
comp”QueueL’gth
;

31 
	}
}

33 
Comp”WÜkOrd”
 
	$wÜkDequeue
()

35 
	`as£¹
(
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
].
kšd


36 !ğ
kWÜkOrd”Inv®id
);

37 
Comp”WÜkOrd”
 
wÜk
 =

38 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
];

39 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
++].
kšd
 =

40 
kWÜkOrd”Inv®id
;

41 ià(
gDvmJ™
.
comp”WÜkDequeueIndex
 =ğ
COMPILER_WORK_QUEUE_SIZE
) {

42 
gDvmJ™
.
comp”WÜkDequeueIndex
 = 0;

44 
gDvmJ™
.
comp”QueueL’gth
--;

45 ià(
gDvmJ™
.
comp”QueueL’gth
 == 0) {

46 
	`dvmSigÇlCÚd
(&
gDvmJ™
.
comp”QueueEm±y
);

50 ià(
gDvmJ™
.
comp”QueueL’gth
 > gDvmJ™.
comp”MaxQueued
)

51 
gDvmJ™
.
comp”MaxQueued
 = gDvmJ™.
comp”QueueL’gth
;

53  
wÜk
;

54 
	}
}

61 
	#ENQUEUE_MAX_RETRIES
 20

	)

62 
	$dvmComp”FÜûWÜkEnqueue
(cÚ¡ 
u2
 *
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
)

64 
boŞ
 
sucûss
;

65 
»Œ›s
 = 0;

67 
sucûss
 = 
	`dvmComp”WÜkEnqueue
(
pc
, 
kšd
, 
šfo
);

68 ià(!
sucûss
) {

69 
»Œ›s
++;

70 ià(
»Œ›s
 > 
ENQUEUE_MAX_RETRIES
) {

71 
	`ALOGE
("JIT: compiler queue wedged - forcing„eset");

72 
gDvmJ™
.
codeCacheFuÎ
 = 
Œue
;

73 
sucûss
 = 
Œue
;

75 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

76 
	`±h»ad_cÚd_wa™
(&
gDvmJ™
.
comp”QueueAùiv™y
,

77 &
gDvmJ™
.
comp”Lock
);

78 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

82 } !
sucûss
);

83 
	}
}

91 
boŞ
 
	$dvmComp”WÜkEnqueue
(cÚ¡ 
u2
 *
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
)

93 
cc
;

94 
i
;

95 
numWÜk
;

96 
boŞ
 
»suÉ
 = 
Œue
;

98 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

103 ià(
gDvmJ™
.
comp”QueueL’gth
 =ğ
COMPILER_WORK_QUEUE_SIZE
 ||

104 
gDvmJ™
.
codeCacheFuÎ
 =ğ
Œue
) {

105 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

106  
çl£
;

109 
numWÜk
 = 
gDvmJ™
.
comp”QueueL’gth
,

110 
i
 = 
gDvmJ™
.
comp”WÜkDequeueIndex
;

111 
numWÜk
 > 0;

112 
numWÜk
--) {

114 ià(
gDvmJ™
.
comp”WÜkQueue
[
i
++].
pc
 ==…c) {

115 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

116  
Œue
;

119 ià(
i
 =ğ
COMPILER_WORK_QUEUE_SIZE
)

120 
i
 = 0;

123 
Comp”WÜkOrd”
 *
ÃwOrd”
 =

124 &
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkEnqueueIndex
];

125 
ÃwOrd”
->
pc
 =…c;

126 
ÃwOrd”
->
kšd
 = kind;

127 
ÃwOrd”
->
šfo
 = info;

128 
ÃwOrd”
->
»suÉ
.
m‘hodComp©iÚAbÜ‹d
 = 
NULL
;

129 
ÃwOrd”
->
»suÉ
.
codeAdd»ss
 = 
NULL
;

130 
ÃwOrd”
->
»suÉ
.
disÿrdResuÉ
 =

131 (
kšd
 =ğ
kWÜkOrd”T¿ûDebug
è? 
Œue
 : 
çl£
;

132 
ÃwOrd”
->
»suÉ
.
ÿcheV”siÚ
 = 
gDvmJ™
.cacheVersion;

133 
ÃwOrd”
->
»suÉ
.
»que¡šgTh»ad
 = 
	`dvmTh»adS–f
();

135 
gDvmJ™
.
comp”WÜkEnqueueIndex
++;

136 ià(
gDvmJ™
.
comp”WÜkEnqueueIndex
 =ğ
COMPILER_WORK_QUEUE_SIZE
)

137 
gDvmJ™
.
comp”WÜkEnqueueIndex
 = 0;

138 
gDvmJ™
.
comp”QueueL’gth
++;

139 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueAùiv™y
);

140 
	`as£¹
(
cc
 == 0);

142 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

143  
»suÉ
;

144 
	}
}

147 
	$dvmComp”D¿šQueue
()

149 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

151 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

152 
	`wÜkQueueL’gth
(è!ğ0 && !
gDvmJ™
.
h®tComp”Th»ad
 &&

153 
£lf
->
su¥’dCouÁ
 == 0) {

160 
	`dvmR–©iveCÚdWa™
(&
gDvmJ™
.
comp”QueueEm±y
, &gDvmJ™.
comp”Lock
, 1000, 0);

162 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

163 
	}
}

165 
boŞ
 
	$dvmComp”S‘upCodeCache
()

167 
fd
;

170 
fd
 = 
	`ashmem_ü—‹_»giÚ
("d®vik-j™-code-ÿche", 
gDvmJ™
.
codeCacheSize
);

171 ià(
fd
 < 0) {

172 
	`ALOGE
("Could‚ot create %u-byte‡shmem„egion forhe JIT code cache",

173 
gDvmJ™
.
codeCacheSize
);

174  
çl£
;

176 
gDvmJ™
.
codeCache
 = 
	`mm­
(
NULL
, gDvmJ™.
codeCacheSize
,

177 
PROT_READ
 | 
PROT_WRITE
 | 
PROT_EXEC
,

178 
MAP_PRIVATE
 , 
fd
, 0);

179 
	`şo£
(
fd
);

180 ià(
gDvmJ™
.
codeCache
 =ğ
MAP_FAILED
) {

181 
	`ALOGE
("FaedØmm­hJIT codÿche: %s", 
	`¡»¼Ü
(
”ºo
));

182  
çl£
;

185 
gDvmJ™
.
·geSizeMask
 = 
	`g‘·gesize
() - 1;

191 
‹m¶©eSize
 = (
šŒ_t
è
dmvComp”Tem¶©eEnd
 -

192 (
šŒ_t
è
dvmComp”Tem¶©eS¹
;

193 
	`memıy
((*è
gDvmJ™
.
codeCache
,

194 (*è
dvmComp”Tem¶©eS¹
,

195 
‹m¶©eSize
);

201 ià(
	`dvmComp”In¡ruùiÚS‘
(è=ğ
DALVIK_JIT_THUMB2
) {

202 
‹m¶©eSize
 = (templateSize + 4095) & ~4095;

205 
gDvmJ™
.
‹m¶©eSize
 =emplateSize;

206 
gDvmJ™
.
codeCacheBy‹U£d
 = 
‹m¶©eSize
;

209 
	`dvmComp”CacheFlush
((
šŒ_t
è
gDvmJ™
.
codeCache
,

210 (
šŒ_t
è
gDvmJ™
.
codeCache
 + 
‹m¶©eSize
, 0);

212 
»suÉ
 = 
	`m´Ùeù
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheSize
,

213 
PROTECT_CODE_CACHE_ATTRS
);

215 ià(
»suÉ
 == -1) {

216 
	`ALOGE
("Failedo„emovehe write…ermission forhe code cache");

217 
	`dvmAbÜt
();

220  
Œue
;

221 
	}
}

223 
	$üawlD®vikSck
(
Th»ad
 *
th»ad
, 
boŞ
 
´št
)

225 *
å
 = 
th»ad
->
š‹½Save
.
curF¿me
;

226 
SckSaveA»a
* 
§veA»a
 = 
NULL
;

227 
¡ackLev–
 = 0;

229 ià(
´št
) {

230 
	`ALOGD
("C¿wlšgid %d (% / %°%s)", 
th»ad
->
sy¡emTid
,

231 
	`dvmG‘Th»adStusSŒ
(
th»ad
->
¡©us
),

232 
th»ad
->
šJ™CodeCache
,

233 
th»ad
->
šJ™CodeCache
 ? "jit" : "interp");

236 
å
 !ğ
NULL
) {

237 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

239 ià(
´št
) {

240 ià(
	`dvmIsB»akF¿me
((
u4
*)
å
)) {

241 
	`ALOGD
(" #%d: break frame (%p)",

242 
¡ackLev–
, 
§veA»a
->
»tuºAddr
);

245 
	`ALOGD
(" #%d: %s.%s%s (%p)",

246 
¡ackLev–
,

247 
§veA»a
->
m‘hod
->
şazz
->
desütÜ
,

248 
§veA»a
->
m‘hod
->
Çme
,

249 
	`dvmIsN©iveM‘hod
(
§veA»a
->
m‘hod
) ?

251 
§veA»a
->
»tuºAddr
);

254 
¡ackLev–
++;

255 
§veA»a
->
»tuºAddr
 = 
NULL
;

256 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

257 
å
 = 
§veA»a
->
´evF¿me
;

260 
	`as£¹
(
§veA»a
 =ğ
NULL
 ||

261 (
u1
 *è(
§veA»a
+1è=ğ
th»ad
->
š‹½SckS¹
);

262 
	}
}

264 
	$»£tCodeCache
()

266 
Th»ad
* 
th»ad
;

267 
u8
 
¡¬tTime
 = 
	`dvmG‘R–©iveTimeU£c
();

268 
šJ™
 = 0;

269 
by‹U£d
 = 
gDvmJ™
.
codeCacheBy‹U£d
;

272 
	`dvmLockTh»adLi¡
(
NULL
);

273 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

280 
	`üawlD®vikSck
(
th»ad
, 
çl£
);

281 ià(
th»ad
->
šJ™CodeCache
) {

282 
šJ™
++;

285 
	`dvmDi§bËSubMode
(
th»ad
, 
kSubModeJ™T¿ûBud
);

287 
	`dvmUÆockTh»adLi¡
();

289 ià(
šJ™
) {

290 
	`ALOGD
("JIT code cache„eset delayed (%d bytes %d/%d)",

291 
gDvmJ™
.
codeCacheBy‹U£d
, gDvmJ™.
numCodeCacheRe£t
,

292 ++
gDvmJ™
.
numCodeCacheRe£tD–ayed
);

297 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

300 
gDvmJ™
.
ÿcheV”siÚ
++;

303 
	`wÜkQueueL’gth
()) {

304 
Comp”WÜkOrd”
 
wÜk
 = 
	`wÜkDequeue
();

305 
	`ä“
(
wÜk
.
šfo
);

309 
	`dvmJ™Re£tTabË
();

311 
	`UNPROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

316 
	`mem£t
((*è
gDvmJ™
.
codeCache
 + gDvmJ™.
‹m¶©eSize
,

318 
gDvmJ™
.
codeCacheBy‹U£d
 - gDvmJ™.
‹m¶©eSize
);

319 
	`dvmComp”CacheFlush
((
šŒ_t
è
gDvmJ™
.
codeCache
,

320 (
šŒ_t
è
gDvmJ™
.
codeCache
 +

321 
gDvmJ™
.
codeCacheBy‹U£d
, 0);

323 
	`PROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

326 
gDvmJ™
.
codeCacheBy‹U£d
 = gDvmJ™.
‹m¶©eSize
;

327 
gDvmJ™
.
numComp©iÚs
 = 0;

330 
	`mem£t
(
gDvmJ™
.
comp”WÜkQueue
, 0,

331 (
Comp”WÜkOrd”
è* 
COMPILER_WORK_QUEUE_SIZE
);

332 
gDvmJ™
.
comp”WÜkEnqueueIndex
 = gDvmJ™.
comp”WÜkDequeueIndex
 = 0;

333 
gDvmJ™
.
comp”QueueL’gth
 = 0;

336 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

337 
gDvmJ™
.
comp”ICP©chIndex
 = 0;

338 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

344 
gDvmJ™
.
šæightBa£Addr
 = 
NULL
;

347 
gDvmJ™
.
codeCacheFuÎ
 = 
çl£
;

349 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

351 
	`ALOGD
("JIT code cache„eset in %lld ms (%d bytes %d/%d)",

352 (
	`dvmG‘R–©iveTimeU£c
(è- 
¡¬tTime
) / 1000,

353 
by‹U£d
, ++
gDvmJ™
.
numCodeCacheRe£t
,

354 
gDvmJ™
.
numCodeCacheRe£tD–ayed
);

355 
	}
}

364 
	$dvmComp”P”fÜmSaãPoštChecks
()

366 ià(
gDvmJ™
.
codeCacheFuÎ
) {

367 
	`»£tCodeCache
();

369 
	`dvmComp”P©chIÆšeCache
();

370 
	}
}

372 
boŞ
 
	$comp”Th»adS¹up
()

374 
J™EÁry
 *
pJ™TabË
 = 
NULL
;

375 *
pJ™ProfTabË
 = 
NULL
;

376 
J™T¿ûProfCouÁ”s
 *
pJ™T¿ûProfCouÁ”s
 = 
NULL
;

377 
i
;

379 ià(!
	`dvmComp”ArchIn™
())

380 
ç
;

386 ià(
gDvmJ™
.
codeCache
 =ğ
NULL
) {

387 ià(!
	`dvmComp”S‘upCodeCache
())

388 
ç
;

392 ià(
	`dvmComp”H—pIn™
(è=ğ
çl£
) {

393 
ç
;

397 
gDvmJ™
.
comp”Th»ad
 = 
	`dvmTh»adS–f
();

399 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

402 
gDvmJ™
.
m‘hodStsTabË
 = 
	`dvmHashTabËC»©e
(32, 
NULL
);

404 #ià
	`defšed
(
WITH_JIT_TUNING
)

405 
gDvm
.
v”bo£Shutdown
 = 
Œue
;

408 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

413 
	`as£¹
(
gDvmJ™
.
j™TabËSize
 &&

414 !(
gDvmJ™
.
j™TabËSize
 & (gDvmJit.jitTableSize - 1)));

416 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
bËLock
);

417 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

418 
pJ™TabË
 = (
J™EÁry
*)

419 
	`ÿÎoc
(
gDvmJ™
.
j™TabËSize
, (*
pJ™TabË
));

420 ià(!
pJ™TabË
) {

421 
	`ALOGE
("jitable‡llocation failed");

422 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

423 
ç
;

433 
pJ™ProfTabË
 = (*)
	`m®loc
(
JIT_PROF_SIZE
);

434 ià(!
pJ™ProfTabË
) {

435 
	`ALOGE
("jit…rofable‡llocation failed");

436 
	`ä“
(
pJ™ProfTabË
);

437 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

438 
ç
;

440 
	`mem£t
(
pJ™ProfTabË
, 
gDvmJ™
.
th»shŞd
, 
JIT_PROF_SIZE
);

441 
i
=0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

442 
pJ™TabË
[
i
].
u
.
šfo
.
chaš
 = 
gDvmJ™
.
j™TabËSize
;

445 
	`as£¹
(
pJ™TabË
[0].
u
.
šfo
.
chaš
 =ğ
gDvmJ™
.
j™TabËSize
);

448 
pJ™T¿ûProfCouÁ”s
 = (
J™T¿ûProfCouÁ”s
*)

449 
	`ÿÎoc
(1, (*
pJ™T¿ûProfCouÁ”s
));

450 ià(!
pJ™T¿ûProfCouÁ”s
) {

451 
	`ALOGE
("jitrace…rof counters‡llocation failed");

452 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

453 
ç
;

456 
gDvmJ™
.
pJ™EÁryTabË
 = 
pJ™TabË
;

457 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

458 
gDvmJ™
.
j™TabËEÁr›sU£d
 = 0;

459 
gDvmJ™
.
comp”HighW©”
 =

460 
COMPILER_WORK_QUEUE_SIZE
 - (COMPILER_WORK_QUEUE_SIZE/4);

465 
gDvmJ™
.
pProfTabË
 = 
	`dvmDebugg”OrProf”Aùive
(è? 
NULL
 : 
pJ™ProfTabË
;

466 
gDvmJ™
.
pProfTabËCİy
 = 
pJ™ProfTabË
;

467 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
 =…JitTraceProfCounters;

468 
	`dvmJ™Upd©eTh»adS‹AÎ
();

469 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

472 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_REFRESH
);

473 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_REFRESH
);

476 #ià
	`defšed
(
SIGNATURE_BREAKPOINT
)

515 
gDvmJ™
.
sigÇtu»B»akpoštSize
 = 4;

516 
gDvmJ™
.
sigÇtu»B»akpošt
 =

517 
	`m®loc
((
u4
è* 
gDvmJ™
.
sigÇtu»B»akpoštSize
);

518 
gDvmJ™
.
sigÇtu»B»akpošt
[0] = 0x512000bc;

519 
gDvmJ™
.
sigÇtu»B»akpošt
[1] = 0x37016eaf;

520 
gDvmJ™
.
sigÇtu»B»akpošt
[2] = 0x6ea866af;

521 
gDvmJ™
.
sigÇtu»B»akpošt
[3] = 0x6f696028;

574  
Œue
;

576 
ç
:

577  
çl£
;

579 
	}
}

581 *
	$comp”Th»adS¹
(*
¬g
)

583 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

598 ià(
gDvmJ™
.
ruÂšgInAndroidF¿mewÜk
 &&

599 !
gDvmJ™
.
®»adyEÇbËdVŸF¿mewÜk
) {

610 ià(
gDvm
.
sy¡emS”v”Pid
 == 0) {

611 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

612 
	`±h»ad_cÚd_wa™
(&
gDvmJ™
.
comp”QueueAùiv™y
,

613 &
gDvmJ™
.
comp”Lock
);

614 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

615 
	`ALOGD
("JIT started for system_server");

617 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

622 
	`dvmR–©iveCÚdWa™
(&
gDvmJ™
.
comp”QueueAùiv™y
,

623 &
gDvmJ™
.
comp”Lock
, 3000, 0);

624 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

626 ià(
gDvmJ™
.
h®tComp”Th»ad
) {

627  
NULL
;

631 
	`comp”Th»adS¹up
();

633 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

639 !
gDvmJ™
.
h®tComp”Th»ad
) {

640 ià(
	`wÜkQueueL’gth
() == 0) {

641 
cc
;

642 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueEm±y
);

643 
	`as£¹
(
cc
 == 0);

644 
	`±h»ad_cÚd_wa™
(&
gDvmJ™
.
comp”QueueAùiv™y
,

645 &
gDvmJ™
.
comp”Lock
);

649 
Comp”WÜkOrd”
 
wÜk
 = 
	`wÜkDequeue
();

650 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

651 #ià
	`defšed
(
WITH_JIT_TUNING
)

657 vŞ©
u8
 
¡¬tTime
 = 
	`dvmG‘R–©iveTimeU£c
();

669 ià(!
gDvmJ™
.
blockšgMode
)

670 
	`dvmCheckSu¥’dP’dšg
(
	`dvmTh»adS–f
());

672 ià(
gDvmJ™
.
j™TabËEÁr›sU£d
 >

673 (
gDvmJ™
.
j™TabËSize
 - gDvmJit.jitTableSize/4)) {

674 
boŞ
 
»sizeFa
 =

675 
	`dvmJ™ResizeJ™TabË
(
gDvmJ™
.
j™TabËSize
 * 2);

680 
gDvmJ™
.
codeCacheFuÎ
 |ğ
»sizeFa
;

682 ià(
gDvmJ™
.
h®tComp”Th»ad
) {

683 
	`ALOGD
("Compiler shutdown in…rogress - discarding„equest");

684 } ià(!
gDvmJ™
.
codeCacheFuÎ
) {

685 
jmp_buf
 
jmpBuf
;

686 
wÜk
.
baPŒ
 = &
jmpBuf
;

687 
boŞ
 
abÜ‹d
 = 
	`£tjmp
(
jmpBuf
);

688 ià(!
abÜ‹d
) {

689 
boŞ
 
codeComped
 = 
	`dvmComp”DoWÜk
(&
wÜk
);

695 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

696 ià((
wÜk
.
»suÉ
.
ÿcheV”siÚ
 ==

697 
gDvmJ™
.
ÿcheV”siÚ
) &&

698 
codeComped
 &&

699 !
wÜk
.
»suÉ
.
disÿrdResuÉ
 &&

700 
wÜk
.
»suÉ
.
codeAdd»ss
) {

701 
	`dvmJ™S‘CodeAddr
(
wÜk
.
pc
, wÜk.
»suÉ
.
codeAdd»ss
,

702 
wÜk
.
»suÉ
.
š¡ruùiÚS‘
,

703 
çl£
,

704 
wÜk
.
»suÉ
.
´ofeCodeSize
);

706 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

708 
	`dvmComp”A»ÇRe£t
();

710 
	`ä“
(
wÜk
.
šfo
);

711 #ià
	`defšed
(
WITH_JIT_TUNING
)

712 
gDvmJ™
.
j™Time
 +ğ
	`dvmG‘R–©iveTimeU£c
(è- 
¡¬tTime
;

714 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

715 } 
	`wÜkQueueL’gth
() != 0);

718 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueEm±y
);

719 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

726 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

728 ià(
gDvm
.
v”bo£Shutdown
)

729 
	`ALOGD
("Compilerhread shutting down");

730  
NULL
;

731 
	}
}

733 
boŞ
 
	$dvmComp”S¹up
()

736 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
comp”Lock
);

737 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

738 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
codeCachePrÙeùiÚLock
);

739 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

740 
	`±h»ad_cÚd_š™
(&
gDvmJ™
.
comp”QueueAùiv™y
, 
NULL
);

741 
	`±h»ad_cÚd_š™
(&
gDvmJ™
.
comp”QueueEm±y
, 
NULL
);

744 
gDvmJ™
.
comp”WÜkEnqueueIndex
 = gDvmJ™.
comp”WÜkDequeueIndex
 = 0;

745 
gDvmJ™
.
comp”QueueL’gth
 = 0;

746 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

753  
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvmJ™
.
comp”HªdË
, "Compiler",

754 
comp”Th»adS¹
, 
NULL
);

755 
	}
}

757 
	$dvmComp”Shutdown
()

759 *
th»adR‘uº
;

762 
gDvmJ™
.
pProfTabË
 = 
NULL
;

763 
gDvmJ™
.
pProfTabËCİy
 = 
NULL
;

764 
	`dvmJ™Upd©eTh»adS‹AÎ
();

766 ià(
gDvm
.
v”bo£Shutdown
 ||

767 
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgCÚtšuous
) {

768 
	`dvmComp”DumpSts
();

769 
gDvmJ™
.
comp”QueueL’gth
)

770 
	`¦“p
(5);

773 ià(
gDvmJ™
.
comp”HªdË
) {

775 
gDvmJ™
.
h®tComp”Th»ad
 = 
Œue
;

777 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

778 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueAùiv™y
);

779 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

781 ià(
	`±h»ad_još
(
gDvmJ™
.
comp”HªdË
, &
th»adR‘uº
) != 0)

782 
	`ALOGW
("Compilerhread join failed");

783 ià(
gDvm
.
v”bo£Shutdown
)

784 
	`ALOGD
("Compilerhread has shut down");

788 
	`dvmJ™UnchašAÎ
();

797 
	}
}

799 
	$dvmComp”Upd©eGlob®S‹
()

801 
boŞ
 
j™Aùive
;

802 
boŞ
 
j™Aùiv©e
;

803 
boŞ
 
ÃedUnchaš
 = 
çl£
;

811 ià(
gDvmJ™
.
pProfTabËCİy
 =ğ
NULL
) {

823 ià((
gDvm
.
aùiveProf”s
 != 0) &&

824 !
gDvmJ™
.
m‘hodT¿ûSuµÜt
) {

825 
boŞ
 
»£tRequœed
;

830 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

831 
gDvmJ™
.
ÿcheV”siÚ
++;

832 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 = 
Œue
;

833 
»£tRequœed
 = (
gDvmJ™
.
numComp©iÚs
 != 0);

834 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

835 ià(
»£tRequœed
) {

836 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_CC_RESET
);

837 
	`»£tCodeCache
();

838 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_CC_RESET
);

842 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

843 
j™Aùive
 = 
gDvmJ™
.
pProfTabË
 !ğ
NULL
;

844 
j™Aùiv©e
 = !
	`dvmDebugg”OrProf”Aùive
();

846 ià(
j™Aùiv©e
 && !
j™Aùive
) {

847 
gDvmJ™
.
pProfTabË
 = gDvmJ™.
pProfTabËCİy
;

848 } ià(!
j™Aùiv©e
 && 
j™Aùive
) {

849 
gDvmJ™
.
pProfTabË
 = 
NULL
;

850 
ÃedUnchaš
 = 
Œue
;

852 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

853 ià(
ÃedUnchaš
)

854 
	`dvmJ™UnchašAÎ
();

856 
	`dvmJ™Upd©eTh»adS‹AÎ
();

857 
	}
}

	@vm/compiler/Compiler.h

17 #iâdeà
DALVIK_VM_COMPILER_H_


18 
	#DALVIK_VM_COMPILER_H_


	)

20 
	~<£tjmp.h
>

21 
	~"Th»ad.h
"

28 
	#COMPILER_WORK_QUEUE_SIZE
 100

	)

29 
	#COMPILER_IC_PATCH_QUEUE_SIZE
 64

	)

32 
	#PREDICTED_CHAIN_CLAZZ_INIT
 0

	)

33 
	#PREDICTED_CHAIN_METHOD_INIT
 0

	)

34 
	#PREDICTED_CHAIN_COUNTER_INIT
 0

	)

36 
	#PREDICTED_CHAIN_FAKE_CLAZZ
 0xd—dc001

	)

38 
	#PREDICTED_CHAIN_COUNTER_AVOID
 0x7fffffff

	)

40 
	#PREDICTED_CHAIN_COUNTER_RECHAIN
 8192

	)

42 
	#COMPILER_TRACED
(
X
)

	)

43 
	#COMPILER_TRACEE
(
X
)

	)

44 
	#COMPILER_TRACE_CHAINING
(
X
)

	)

47 
	#PROTECT_CODE_CACHE_ATTRS
 (
PROT_READ
 | 
PROT_EXEC
)

	)

48 
	#UNPROTECT_CODE_CACHE_ATTRS
 (
PROT_READ
 | 
PROT_EXEC
 | 
PROT_WRITE
)

	)

51 
	#UNPROTECT_CODE_CACHE
(
addr
, 
size
) \

53 
	`dvmLockMu‹x
(&
gDvmJ™
.
codeCachePrÙeùiÚLock
); \

54 
	`m´Ùeù
((*è(((
šŒ_t
è(
addr
)è& ~
gDvmJ™
.
·geSizeMask
), \

55 (
size
è+ (((
šŒ_t
è(
addr
)è& 
gDvmJ™
.
·geSizeMask
), \

56 (
UNPROTECT_CODE_CACHE_ATTRS
)); \

57 }

	)

60 
	#PROTECT_CODE_CACHE
(
addr
, 
size
) \

62 
	`m´Ùeù
((*è(((
šŒ_t
è(
addr
)è& ~
gDvmJ™
.
·geSizeMask
), \

63 (
size
è+ (((
šŒ_t
è(
addr
)è& 
gDvmJ™
.
·geSizeMask
), \

64 (
PROTECT_CODE_CACHE_ATTRS
)); \

65 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
codeCachePrÙeùiÚLock
); \

66 }

	)

68 
	#SINGLE_STEP_OP
(
İcode
) \

69 (
gDvmJ™
.
šşudeS–eùedOp
 != \

70 ((
gDvmJ™
.
İLi¡
[
İcode
 >> 3] & (1 << (İcod& 0x7))è!ğ0))

	)

72 
	eJ™In¡ruùiÚS‘Ty³
 {

73 
	mDALVIK_JIT_NONE
 = 0,

74 
	mDALVIK_JIT_ARM
,

75 
	mDALVIK_JIT_THUMB
,

76 
	mDALVIK_JIT_THUMB2
,

77 
	mDALVIK_JIT_IA32


78 } 
	tJ™In¡ruùiÚS‘Ty³
;

81 
	sJ™T¿n¦©iÚInfo
 {

82 *
	mcodeAdd»ss
;

83 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
;

84 
	m´ofeCodeSize
;

85 
boŞ
 
	mdisÿrdResuÉ
;

86 
boŞ
 
	mm‘hodComp©iÚAbÜ‹d
;

87 
Th»ad
 *
	m»que¡šgTh»ad
;

88 
	mÿcheV”siÚ
;

89 } 
	tJ™T¿n¦©iÚInfo
;

91 
	eWÜkOrd”Kšd
 {

92 
	mkWÜkOrd”Inv®id
 = 0,

93 
	mkWÜkOrd”M‘hod
 = 1,

94 
	mkWÜkOrd”T¿û
 = 2,

95 
	mkWÜkOrd”T¿ûDebug
 = 3,

96 
	mkWÜkOrd”ProfeMode
 = 4,

97 } 
	tWÜkOrd”Kšd
;

99 
	sComp”WÜkOrd”
 {

100 cÚ¡ 
u2
* 
	mpc
;

101 
WÜkOrd”Kšd
 
	mkšd
;

102 * 
	mšfo
;

103 
J™T¿n¦©iÚInfo
 
	m»suÉ
;

104 
jmp_buf
 *
	mbaPŒ
;

105 } 
	tComp”WÜkOrd”
;

108 
	sP»diùedChaššgC–l
 {

109 
u4
 
	mb¿nch
;

110 cÚ¡ 
CÏssObjeù
 *
	mşazz
;

111 cÚ¡ 
M‘hod
 *
	mm‘hod
;

112 cÚ¡ 
CÏssObjeù
 *
	m¡agedCÏzz
;

113 } 
	tP»diùedChaššgC–l
;

116 
	sICP©chWÜkOrd”
 {

117 
P»diùedChaššgC–l
 *
	mûÎAddr
;

118 
P»diùedChaššgC–l
 
	mûÎCÚ‹Á
;

119 cÚ¡ *
	mşassDesütÜ
;

120 
Objeù
 *
	mşassLßd”
;

121 
u4
 
	m£rŸlNumb”
;

122 } 
	tICP©chWÜkOrd”
;

131 cÚ¡ 
M‘hod
* 
	mm‘hod
;

132 
J™T¿ûRun
 
	mŒaû
[0];

133 } 
	tJ™T¿ûDesütiÚ
;

135 
	eJ™M‘hodA‰ribu‹s
 {

136 
	mkIsC®Ëe
 = 0,

137 
	mkIsHÙ
,

138 
	mkIsL—f
,

139 
	mkIsEm±y
,

140 
	mkIsThrowF»e
,

141 
	mkIsG‘‹r
,

142 
	mkIsS‘‹r
,

143 
	mkCªnÙCompe
,

144 } 
	tJ™M‘hodA‰ribu‹s
;

146 
	#METHOD_IS_CALLEE
 (1 << 
kIsC®Ëe
)

	)

147 
	#METHOD_IS_HOT
 (1 << 
kIsHÙ
)

	)

148 
	#METHOD_IS_LEAF
 (1 << 
kIsL—f
)

	)

149 
	#METHOD_IS_EMPTY
 (1 << 
kIsEm±y
)

	)

150 
	#METHOD_IS_THROW_FREE
 (1 << 
kIsThrowF»e
)

	)

151 
	#METHOD_IS_GETTER
 (1 << 
kIsG‘‹r
)

	)

152 
	#METHOD_IS_SETTER
 (1 << 
kIsS‘‹r
)

	)

153 
	#METHOD_CANNOT_COMPILE
 (1 << 
kCªnÙCompe
)

	)

156 
	eJ™O±imiz©iÚHšts
 {

157 
	mkJ™O±NoLoİ
 = 0,

158 } 
	tJ™O±imiz©iÚHšts
;

160 
	#JIT_OPT_NO_LOOP
 (1 << 
kJ™O±NoLoİ
)

	)

163 
	eD©aFlowAÇlysisMode
 {

164 
	mkAÎNodes
 = 0,

165 
	mkR—chabËNodes
,

166 
	mkP»Ord”DFST¿v”§l
,

167 
	mkPo¡Ord”DFST¿v”§l
,

168 
	mkPo¡Ord”DOMT¿v”§l
,

169 } 
	tD©aFlowAÇlysisMode
;

171 
	sComp”M‘hodSts
 {

172 cÚ¡ 
M‘hod
 *
	mm‘hod
;

173 
	md®vikSize
;

174 
	mcompedD®vikSize
;

175 
	mÇtiveSize
;

176 
	m©Œibu‹s
;

177 } 
	tComp”M‘hodSts
;

179 
	gComp©iÚUn™
;

180 
	gBasicBlock
;

181 
	gSSAR•»£Á©iÚ
;

182 
	gGrowabËLi¡
;

183 
	gJ™EÁry
;

184 
	gMIR
;

186 
boŞ
 
dvmComp”S‘upCodeCache
();

187 
boŞ
 
dvmComp”ArchIn™
();

188 
dvmComp”ArchDump
();

189 
boŞ
 
dvmComp”S¹up
();

190 
dvmComp”Shutdown
();

191 
dvmComp”FÜûWÜkEnqueue
(cÚ¡ 
u2
* 
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
);

192 
boŞ
 
dvmComp”WÜkEnqueue
(cÚ¡ 
u2
* 
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
);

193 *
dvmCheckCodeCache
(*
m‘hod
);

194 
Comp”M‘hodSts
 *
dvmComp”AÇlyzeM‘hodBody
(cÚ¡ 
M‘hod
 *
m‘hod
,

195 
boŞ
 
isC®Ëe
);

196 
boŞ
 
dvmComp”CªInşudeThisIn¡ruùiÚ
(cÚ¡ 
M‘hod
 *
m‘hod
,

197 cÚ¡ 
DecodedIn¡ruùiÚ
 *
š¢
);

198 
boŞ
 
dvmCompeM‘hod
(cÚ¡ 
M‘hod
 *
m‘hod
, 
J™T¿n¦©iÚInfo
 *
šfo
);

199 
boŞ
 
dvmCompeT¿û
(
J™T¿ûDesütiÚ
 *
Œaû
, 
numMaxIn¡s
,

200 
J™T¿n¦©iÚInfo
 *
šfo
, 
jmp_buf
 *
baPŒ
, 
İtHšts
);

201 
dvmComp”DumpSts
();

202 
dvmComp”D¿šQueue
();

203 
dvmJ™UnchašAÎ
();

204 
dvmJ™SÿnAÎCÏssPoš‹rs
((*
ÿÎback
)(*
±r
));

205 
	`dvmComp”SÜtAndPrštT¿ûProfes
();

206 
	`dvmComp”P”fÜmSaãPoštChecks
();

207 
	`dvmComp”IÆšeMIR
(
Comp©iÚUn™
 *
cUn™
,

208 
J™T¿n¦©iÚInfo
 *
šfo
);

209 
	`dvmIn™ŸlizeSSACÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
);

210 
	`dvmCÚv”tSSARegToD®vik
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
, 
s§Reg
);

211 
boŞ
 
	`dvmComp”LoİO±
(
Comp©iÚUn™
 *
cUn™
);

212 
	`dvmComp”In£¹Backw¬dChaššg
(
Comp©iÚUn™
 *
cUn™
);

213 
	`dvmComp”NÚLoİAÇlysis
(
Comp©iÚUn™
 *
cUn™
);

214 
boŞ
 
	`dvmComp”FšdLoÿlLiveIn
(
Comp©iÚUn™
 *
cUn™
,

215 
BasicBlock
 *
bb
);

216 
boŞ
 
	`dvmComp”DoSSACÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
,

217 
BasicBlock
 *
bb
);

218 
boŞ
 
	`dvmComp”DoCÚ¡ªtPrİag©iÚ
(
Comp©iÚUn™
 *
cUn™
,

219 
BasicBlock
 *
bb
);

220 
boŞ
 
	`dvmComp”FšdInduùiÚV¬ŸbËs
(
Comp©iÚUn™
 *
cUn™
,

221 
BasicBlock
 *
bb
);

223 
boŞ
 
	`dvmComp”CË¬Vis™edFÏg
(
Comp©iÚUn™
 *
cUn™
,

224 
BasicBlock
 *
bb
);

225 *
	`dvmComp”G‘D®vikDi§s£mbly
(cÚ¡ 
DecodedIn¡ruùiÚ
 *
š¢
,

226 cÚ¡ *
nÙe
);

227 *
	`dvmComp”FuÎDi§s£mbËr
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
,

228 cÚ¡ 
MIR
 *
mœ
);

229 *
	`dvmComp”G‘SSASŒšg
(
Comp©iÚUn™
 *
cUn™
,

230 
SSAR•»£Á©iÚ
 *
s§R•
);

231 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
Comp©iÚUn™
 *
cUn™
,

232 
	$boŞ
 (*
func
)(
Comp©iÚUn™
 *, 
BasicBlock
 *),

233 
D©aFlowAÇlysisMode
 
dçMode
,

234 
boŞ
 
isI‹¿tive
);

235 
	`dvmComp”M‘hodSSAT¿nsfÜm©iÚ
(
Comp©iÚUn™
 *
cUn™
);

236 
boŞ
 
	`dvmComp”BudLoİ
(
Comp©iÚUn™
 *
cUn™
);

237 
	`dvmComp”Upd©eGlob®S‹
();

238 
J™T¿ûDesütiÚ
 *
	`dvmCİyT¿ûDesütÜ
(cÚ¡ 
u2
 *
pc
,

239 cÚ¡ 
J™EÁry
 *
desc
);

240 "C" *
	`dvmComp”G‘IÁ”´‘Tem¶©e
();

241 
J™In¡ruùiÚS‘Ty³
 
	`dvmComp”G‘IÁ”´‘Tem¶©eS‘
();

242 
u8
 
	`dvmG‘RegResourûMask
(
»g
);

243 
	`dvmDumpCFG
(
Comp©iÚUn™
 *
cUn™
, cÚ¡ *
dœP»fix
);

	@vm/compiler/CompilerIR.h

17 #iâdeà
DALVIK_VM_COMPILER_IR_H_


18 
	#DALVIK_VM_COMPILER_IR_H_


	)

20 
	~"codeg’/O±imiz”.h
"

22 
	eRegi¡”CÏss
 {

23 
	mkCÜeReg
,

24 
	mkFPReg
,

25 
	mkAnyReg
,

26 } 
	tRegi¡”CÏss
;

28 
	eRegLoÿtiÚTy³
 {

29 
	mkLocD®vikF¿me
 = 0,

30 
	mkLocPhysReg
,

31 
	mkLocR‘v®
,

32 
	mkLocSpl
,

33 } 
	tRegLoÿtiÚTy³
;

35 
	sRegLoÿtiÚ
 {

36 
RegLoÿtiÚTy³
 
	mloÿtiÚ
:2;

37 
	mwide
:1;

38 
	må
:1;

39 
u1
 
	mlowReg
:6;

40 
u1
 
	mhighReg
:6;

41 
s2
 
	msRegLow
;

42 } 
	tRegLoÿtiÚ
;

44 
	#INVALID_SREG
 (-1)

	)

45 
	#INVALID_REG
 (0x3F)

	)

47 
	eBBTy³
 {

49 
	mkChaššgC–lNÜm®
 = 0,

50 
	mkChaššgC–lHÙ
,

51 
	mkChaššgC–lInvokeSšgËtÚ
,

52 
	mkChaššgC–lInvokeP»diùed
,

53 
	mkChaššgC–lBackw¬dB¿nch
,

54 
	mkChaššgC–lG­
,

56 
	mkChaššgC–lLa¡
 = 
kChaššgC–lG­
 + 1,

57 
	mkEÁryBlock
,

58 
	mkD®vikBy‹Code
,

59 
	mkEx™Block
,

60 
	mkPCRecÚ¡ruùiÚ
,

61 
	mkExû±iÚHªdlšg
,

62 
	mkC©chEÁry
,

63 } 
	tBBTy³
;

65 
	eJ™Mode
 {

66 
	mkJ™T¿û
 = 0,

67 
	mkJ™Loİ
,

68 
	mkJ™M‘hod
,

69 } 
	tJ™Mode
;

71 
	sChašC–lCouÁs
 {

73 
u1
 
	mcouÁ
[
kChaššgC–lLa¡
];

74 
u4
 
	mdummyFÜAlignm’t
;

75 } 
	mu
;

76 } 
	tChašC–lCouÁs
;

78 
	sLIR
 {

79 
	moff£t
;

80 
LIR
 *
	mÃxt
;

81 
LIR
 *
	m´ev
;

82 
LIR
 *
	mrg‘
;

83 } 
	tLIR
;

85 
	eEx‹ndedMIROpcode
 {

86 
	mkMœOpFœ¡
 = 
kNumPackedOpcodes
,

87 
	mkMœOpPhi
 = 
kMœOpFœ¡
,

88 
	mkMœOpNuÎNRªgeUpCheck
,

89 
	mkMœOpNuÎNRªgeDownCheck
,

90 
	mkMœOpLow”Bound
,

91 
	mkMœOpPuÁ
,

92 
	mkMœOpCheckIÆšeP»diùiÚ
,

93 
	mkMœOpLa¡
,

96 
	gSSAR•»£Á©iÚ
;

99 
	mkMIRIgnÜeNuÎCheck
 = 0,

100 
	mkMIRNuÎCheckOÆy
,

101 
	mkMIRIgnÜeRªgeCheck
,

102 
	mkMIRRªgeCheckOÆy
,

103 
	mkMIRIÆšed
,

104 
	mkMIRIÆšedP»d
,

105 
	mkMIRC®Ëe
,

106 
	mkMIRInvokeM‘hodJIT
,

107 } 
	tMIRO±imiz©iÚFÏgPos™Ús
;

109 
	#MIR_IGNORE_NULL_CHECK
 (1 << 
kMIRIgnÜeNuÎCheck
)

	)

110 
	#MIR_NULL_CHECK_ONLY
 (1 << 
kMIRNuÎCheckOÆy
)

	)

111 
	#MIR_IGNORE_RANGE_CHECK
 (1 << 
kMIRIgnÜeRªgeCheck
)

	)

112 
	#MIR_RANGE_CHECK_ONLY
 (1 << 
kMIRRªgeCheckOÆy
)

	)

113 
	#MIR_INLINED
 (1 << 
kMIRIÆšed
)

	)

114 
	#MIR_INLINED_PRED
 (1 << 
kMIRIÆšedP»d
)

	)

115 
	#MIR_CALLEE
 (1 << 
kMIRC®Ëe
)

	)

116 
	#MIR_INVOKE_METHOD_JIT
 (1 << 
kMIRInvokeM‘hodJIT
)

	)

118 
	sC®ls™eInfo
 {

119 cÚ¡ *
	mşassDesütÜ
;

120 
Objeù
 *
	mşassLßd”
;

121 cÚ¡ 
M‘hod
 *
	mm‘hod
;

122 
LIR
 *
	mmisP»dB¿nchOv”
;

123 } 
	tC®ls™eInfo
;

125 
	sMIR
 {

126 
DecodedIn¡ruùiÚ
 
	md®vikIn¢
;

127 
	mwidth
;

128 
	moff£t
;

129 
MIR
 *
	m´ev
;

130 
MIR
 *
	mÃxt
;

131 
SSAR•»£Á©iÚ
 *
	ms§R•
;

132 
	mO±imiz©iÚFÏgs
;

133 
	m£qNum
;

136 cÚ¡ 
M‘hod
 *
	mÿÎ“M‘hod
;

138 
C®ls™eInfo
 *
	mÿÎs™eInfo
;

139 } 
	mm‘a
;

140 } 
	tMIR
;

142 
	gBasicBlockD©aFlow
;

145 
	eBlockLi¡Ty³
 {

146 
	mkNÙU£d
 = 0,

147 
	mkC©ch
,

148 
	mkPackedSw™ch
,

149 
	mkS·r£Sw™ch
,

150 } 
	tBlockLi¡Ty³
;

152 
	sBasicBlock
 {

153 
	mid
;

154 
boŞ
 
	mvis™ed
;

155 
boŞ
 
	mhidd’
;

156 
	m¡¬tOff£t
;

157 cÚ¡ 
M‘hod
 *
	mcÚššgM‘hod
;

158 
BBTy³
 
	mblockTy³
;

159 
boŞ
 
	mÃedF®lThroughB¿nch
;

160 
boŞ
 
	misF®lThroughFromInvoke
;

161 
MIR
 *
	mfœ¡MIRIn¢
;

162 
MIR
 *
	mÏ¡MIRIn¢
;

163 
BasicBlock
 *
	mçÎThrough
;

164 
BasicBlock
 *
	mk’
;

165 
BasicBlock
 *
	miDom
;

166 
BasicBlockD©aFlow
 *
	md©aFlowInfo
;

167 
B™VeùÜ
 *
	m´edeûssÜs
;

168 
B™VeùÜ
 *
	mdomš©Üs
;

169 
B™VeùÜ
 *
	miDomš©ed
;

170 
B™VeùÜ
 *
	mdomFrÚt›r
;

172 
BlockLi¡Ty³
 
	mblockLi¡Ty³
;

173 
GrowabËLi¡
 
	mblocks
;

174 } 
	msucûssÜBlockLi¡
;

175 } 
	tBasicBlock
;

183 
	sSucûssÜBlockInfo
 {

184 
BasicBlock
 *
	mblock
;

185 
	mkey
;

186 } 
	tSucûssÜBlockInfo
;

188 
	gLoİAÇlysis
;

189 
	gRegi¡”PoŞ
;

191 
	eAs£mbËrStus
 {

192 
	mkSucûss
,

193 
	mkR‘ryAÎ
,

194 
	mkR‘ryH®ve


195 } 
	tAs£mbËrStus
;

197 
	sComp©iÚUn™
 {

198 
	mnumIn¡s
;

199 
	mnumBlocks
;

200 
GrowabËLi¡
 
	mblockLi¡
;

201 cÚ¡ 
M‘hod
 *
	mm‘hod
;

202 cÚ¡ 
J™T¿ûDesütiÚ
 *
	mŒaûDesc
;

203 
LIR
 *
	mfœ¡LIRIn¢
;

204 
LIR
 *
	mÏ¡LIRIn¢
;

205 
LIR
 *
	ml™”®Li¡
;

206 
LIR
 *
	mşassPoš‹rLi¡
;

207 
	mnumCÏssPoš‹rs
;

208 
LIR
 *
	mchašC–lOff£tLIR
;

209 
GrowabËLi¡
 
	mpcRecÚ¡ruùiÚLi¡
;

210 
	mh—d”Size
;

211 
	md©aOff£t
;

212 
	mtÙ®Size
;

213 
As£mbËrStus
 
	mas£mbËrStus
;

214 
	mas£mbËrR‘r›s
;

215 *
	mcodeBufãr
;

216 *
	mba£Addr
;

217 
boŞ
 
	m´štMe
;

218 
boŞ
 
	m®lSšgËS‹p
;

219 
boŞ
 
	mhasCÏssL™”®s
;

220 
boŞ
 
	mhasLoİ
;

221 
boŞ
 
	mhasInvoke
;

222 
boŞ
 
	mh—pMemOp
;

223 
boŞ
 
	mu£sLškRegi¡”
;

224 
	m´ofeCodeSize
;

225 
	mnumChaššgC–ls
[
kChaššgC–lG­
];

226 
LIR
 *
	mfœ¡ChaššgLIR
[
kChaššgC–lG­
];

227 
LIR
 *
	mchaššgC–lBÙtom
;

228 
Regi¡”PoŞ
 *
	m»gPoŞ
;

229 
	mİtRound
;

230 
jmp_buf
 *
	mbaPŒ
;

231 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
;

233 
	mnumSSARegs
;

235 
GrowabËLi¡
 *
	ms§ToD®vikM­
;

239 *
	md®vikToSSAM­
;

240 
B™VeùÜ
 *
	misCÚ¡ªtV
;

241 *
	mcÚ¡ªtV®ues
;

244 
LoİAÇlysis
 *
	mloİAÇlysis
;

247 
RegLoÿtiÚ
 *
	m»gLoÿtiÚ
;

248 
	m£qu’ûNumb”
;

254 cÚ¡ 
u2
 *
	msw™chOv”æowPad
;

256 
J™Mode
 
	mj™Mode
;

257 
	mnumR—chabËBlocks
;

258 
	mnumD®vikRegi¡”s
;

259 
BasicBlock
 *
	m’ŒyBlock
;

260 
BasicBlock
 *
	mex™Block
;

261 
BasicBlock
 *
	mpuÁBlock
;

262 
BasicBlock
 *
	mbackChašBlock
;

263 
BasicBlock
 *
	mcurBlock
;

264 
BasicBlock
 *
	mÃxtCodeg’Block
;

265 
GrowabËLi¡
 
	mdfsOrd”
;

266 
GrowabËLi¡
 
	mdomPo¡Ord”T¿v”§l
;

267 
B™VeùÜ
 *
	mŒyBlockAddr
;

268 
B™VeùÜ
 **
	mdefBlockM©rix
;

269 
B™VeùÜ
 *
	m‹mpBlockV
;

270 
B™VeùÜ
 *
	m‹mpD®vikRegi¡”V
;

271 
B™VeùÜ
 *
	m‹mpSSARegi¡”V
;

272 
boŞ
 
	m´štSSANames
;

273 *
	mblockLab–Li¡
;

274 
boŞ
 
	mqu™LoİMode
;

275 } 
	tComp©iÚUn™
;

277 #ià
defšed
(
WITH_SELF_VERIFICATION
)

278 
	#HEAP_ACCESS_SHADOW
(
_¡©e
è
cUn™
->
h—pMemOp
 = 
	)
_state

280 
	#HEAP_ACCESS_SHADOW
(
_¡©e
)

	)

283 
BasicBlock
 *
dvmComp”NewBB
(
BBTy³
 
blockTy³
, 
blockId
);

285 
dvmComp”Aµ’dMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
);

287 
dvmComp”P»³ndMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
);

289 
dvmComp”In£¹MIRAá”
(
BasicBlock
 *
bb
, 
MIR
 *
cu¼’tMIR
, MIR *
ÃwMIR
);

291 
dvmComp”Aµ’dLIR
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
lœ
);

293 
dvmComp”In£¹LIRBefÜe
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
);

295 
dvmComp”In£¹LIRAá”
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
);

297 
dvmComp”AbÜt
(
Comp©iÚUn™
 *
cUn™
);

300 
dvmComp”DumpComp©iÚUn™
(
Comp©iÚUn™
 *
cUn™
);

	@vm/compiler/CompilerInternals.h

17 #iâdeà
DALVIK_VM_COMPILER_INTERNAL_H_


18 
	#DALVIK_VM_COMPILER_INTERNAL_H_


	)

20 
	~"D®vik.h
"

21 
	~"Comp”Ut™y.h
"

22 
	~"codeg’/Comp”Codeg’.h
"

23 
	~"š‹½/J™.h
"

	@vm/compiler/CompilerUtility.h

17 #iâdeà
DALVIK_VM_COMPILER_UTILITY_H_


18 
	#DALVIK_VM_COMPILER_UTILITY_H_


	)

20 
	~"D®vik.h
"

23 
	#ARENA_DEFAULT_SIZE
 8100

	)

26 
boŞ
 
dvmComp”H—pIn™
();

28 
	sA»ÇMemBlock
 {

29 
size_t
 
	mblockSize
;

30 
size_t
 
	mby‹sAÎoÿ‹d
;

31 
A»ÇMemBlock
 *
	mÃxt
;

32 
	m±r
[0];

33 } 
	tA»ÇMemBlock
;

35 *
dvmComp”New
(
size_t
 
size
, 
boŞ
 
z”o
);

37 
dvmComp”A»ÇRe£t
();

39 
	sGrowabËLi¡
 {

40 
size_t
 
	mnumAÎoÿ‹d
;

41 
size_t
 
	mnumU£d
;

42 
šŒ_t
 *
	m–emLi¡
;

43 } 
	tGrowabËLi¡
;

45 
	sGrowabËLi¡I‹¿tÜ
 {

46 
GrowabËLi¡
 *
	mli¡
;

47 
size_t
 
	midx
;

48 
size_t
 
	msize
;

49 } 
	tGrowabËLi¡I‹¿tÜ
;

51 
	#GET_ELEM_N
(
LIST
, 
TYPE
, 
N
è(((TYPE*èLIST->
–emLi¡
)[N])

	)

53 
	#BLOCK_NAME_LEN
 80

	)

56 
	gLIR
;

57 
	gBasicBlock
;

59 
dvmIn™GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
size_t
 
š™L’gth
);

60 
dvmIn£¹GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
šŒ_t
 
–em
);

61 
dvmGrowabËLi¡I‹¿tÜIn™
(
GrowabËLi¡
 *
gLi¡
,

62 
GrowabËLi¡I‹¿tÜ
 *
™”©Ü
);

63 
šŒ_t
 
dvmGrowabËLi¡I‹¿tÜNext
(
GrowabËLi¡I‹¿tÜ
 *
™”©Ü
);

64 
šŒ_t
 
dvmGrowabËLi¡G‘EËm’t
(cÚ¡ 
GrowabËLi¡
 *
gLi¡
, 
size_t
 
idx
);

66 
B™VeùÜ
* 
dvmComp”AÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
);

67 
boŞ
 
dvmComp”S‘B™
(
B™VeùÜ
* 
pB™s
, 
num
);

68 
boŞ
 
dvmComp”CË¬B™
(
B™VeùÜ
* 
pB™s
, 
num
);

69 
dvmComp”M¬kAÎB™s
(
B™VeùÜ
 *
pB™s
, 
boŞ
 
£t
);

70 
dvmDebugB™VeùÜ
(*
msg
, cÚ¡ 
B™VeùÜ
 *
bv
, 
Ëngth
);

71 
dvmDumpLIRIn¢
(
LIR
 *
lœ
, *
ba£Addr
);

72 
dvmDumpResourûMask
(
LIR
 *
lœ
, 
u8
 
mask
, cÚ¡ *
´efix
);

73 
dvmDumpBlockB™VeùÜ
(cÚ¡ 
GrowabËLi¡
 *
blocks
, *
msg
,

74 cÚ¡ 
B™VeùÜ
 *
bv
, 
Ëngth
);

75 
dvmG‘BlockName
(
BasicBlock
 *
bb
, *
Çme
);

76 
dvmComp”CacheFlush
(
¡¬t
, 
’d
, 
æags
);

	@vm/compiler/Dataflow.cpp

17 
	~"D®vik.h
"

18 
	~"D©aæow.h
"

19 
	~"Loİ.h
"

20 
	~"libdex/DexOpcodes.h
"

31 
	gdvmComp”D©aFlowA‰ribu‹s
[
kMœOpLa¡
] = {

33 
DF_NOP
,

36 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

39 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

42 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

45 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_IS_MOVE
,

48 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_IS_MOVE
,

51 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_IS_MOVE
,

54 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

57 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

60 
DF_DA
 | 
DF_UB
 | 
DF_IS_MOVE
,

63 
DF_DA
,

66 
DF_DA_WIDE
,

69 
DF_DA
,

72 
DF_DA
,

75 
DF_NOP
,

78 
DF_UA
,

81 
DF_UA_WIDE
,

84 
DF_UA
,

87 
DF_DA
 | 
DF_SETS_CONST
,

90 
DF_DA
 | 
DF_SETS_CONST
,

93 
DF_DA
 | 
DF_SETS_CONST
,

96 
DF_DA
 | 
DF_SETS_CONST
,

99 
DF_DA_WIDE
 | 
DF_SETS_CONST
,

102 
DF_DA_WIDE
 | 
DF_SETS_CONST
,

105 
DF_DA_WIDE
 | 
DF_SETS_CONST
,

108 
DF_DA_WIDE
 | 
DF_SETS_CONST
,

111 
DF_DA
,

114 
DF_DA
,

117 
DF_DA
,

120 
DF_UA
,

123 
DF_UA
,

126 
DF_UA
,

129 
DF_DA
 | 
DF_UB
,

132 
DF_DA
 | 
DF_UB
,

135 
DF_DA
,

138 
DF_DA
 | 
DF_UB
,

141 
DF_FORMAT_35C
,

144 
DF_FORMAT_3RC
,

147 
DF_UA
,

150 
DF_UA
,

153 
DF_NOP
,

156 
DF_NOP
,

159 
DF_NOP
,

162 
DF_UA
,

165 
DF_UA
,

168 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_B
 | 
DF_FP_C
,

171 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_B
 | 
DF_FP_C
,

174 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_B
 | 
DF_FP_C
,

177 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_B
 | 
DF_FP_C
,

180 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

183 
DF_UA
 | 
DF_UB
,

186 
DF_UA
 | 
DF_UB
,

189 
DF_UA
 | 
DF_UB
,

192 
DF_UA
 | 
DF_UB
,

195 
DF_UA
 | 
DF_UB
,

198 
DF_UA
 | 
DF_UB
,

202 
DF_UA
,

205 
DF_UA
,

208 
DF_UA
,

211 
DF_UA
,

214 
DF_UA
,

217 
DF_UA
,

220 
DF_NOP
,

223 
DF_NOP
,

226 
DF_NOP
,

229 
DF_NOP
,

232 
DF_NOP
,

235 
DF_NOP
,

238 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

241 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

244 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

247 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

250 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

253 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

256 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_0
 | 
DF_IS_GETTER
,

259 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

262 
DF_UA_WIDE
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_2
 | 
DF_IS_SETTER
,

265 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

268 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

271 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

274 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

277 
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_NULL_N_RANGE_CHECK_1
 | 
DF_IS_SETTER
,

280 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

283 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_IS_GETTER
,

286 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

289 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

292 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

295 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

298 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

301 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

304 
DF_UA_WIDE
 | 
DF_UB
 | 
DF_IS_SETTER
,

307 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

310 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

313 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

316 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

319 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

322 
DF_DA
 | 
DF_IS_GETTER
,

325 
DF_DA_WIDE
 | 
DF_IS_GETTER
,

328 
DF_DA
 | 
DF_IS_GETTER
,

331 
DF_DA
 | 
DF_IS_GETTER
,

334 
DF_DA
 | 
DF_IS_GETTER
,

337 
DF_DA
 | 
DF_IS_GETTER
,

340 
DF_DA
 | 
DF_IS_GETTER
,

343 
DF_UA
 | 
DF_IS_SETTER
,

346 
DF_UA_WIDE
 | 
DF_IS_SETTER
,

349 
DF_UA
 | 
DF_IS_SETTER
,

352 
DF_UA
 | 
DF_IS_SETTER
,

355 
DF_UA
 | 
DF_IS_SETTER
,

358 
DF_UA
 | 
DF_IS_SETTER
,

361 
DF_UA
 | 
DF_IS_SETTER
,

364 
DF_FORMAT_35C
,

367 
DF_FORMAT_35C
,

370 
DF_FORMAT_35C
,

373 
DF_FORMAT_35C
,

376 
DF_FORMAT_35C
,

379 
DF_NOP
,

382 
DF_FORMAT_3RC
,

385 
DF_FORMAT_3RC
,

388 
DF_FORMAT_3RC
,

391 
DF_FORMAT_3RC
,

394 
DF_FORMAT_3RC
,

397 
DF_NOP
,

400 
DF_NOP
,

403 
DF_DA
 | 
DF_UB
,

406 
DF_DA
 | 
DF_UB
,

409 
DF_DA_WIDE
 | 
DF_UB_WIDE
,

412 
DF_DA_WIDE
 | 
DF_UB_WIDE
,

415 
DF_DA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

418 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

421 
DF_DA_WIDE
 | 
DF_UB
,

424 
DF_DA
 | 
DF_UB
 | 
DF_FP_A
,

427 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_FP_A
,

430 
DF_DA
 | 
DF_UB_WIDE
,

433 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_FP_A
,

436 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
,

439 
DF_DA
 | 
DF_UB
 | 
DF_FP_B
,

442 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_FP_B
,

445 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

448 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_FP_B
,

451 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_B
,

454 
DF_DA
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

457 
DF_DA
 | 
DF_UB
,

460 
DF_DA
 | 
DF_UB
,

463 
DF_DA
 | 
DF_UB
,

466 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_IS_LINEAR
,

469 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_IS_LINEAR
,

472 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

475 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

478 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

481 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

484 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

487 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

490 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

493 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

496 
DF_DA
 | 
DF_UB
 | 
DF_UC
,

499 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

502 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

505 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

508 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

511 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

514 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

517 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

520 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
,

523 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC
,

526 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC
,

529 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC
,

532 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

535 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

538 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

541 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

544 
DF_DA
 | 
DF_UB
 | 
DF_UC
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

547 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

550 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

553 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

556 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

559 
DF_DA_WIDE
 | 
DF_UB_WIDE
 | 
DF_UC_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
 | 
DF_FP_C
,

562 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

565 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

568 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

571 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

574 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

577 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

580 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

583 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

586 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

589 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

592 
DF_DA
 | 
DF_UA
 | 
DF_UB
,

595 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

598 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

601 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

604 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

607 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

610 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

613 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

616 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
,

619 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB
,

622 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB
,

625 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB
,

628 
DF_DA
 | 
DF_UA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

631 
DF_DA
 | 
DF_UA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

634 
DF_DA
 | 
DF_UA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

637 
DF_DA
 | 
DF_UA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

640 
DF_DA
 | 
DF_UA
 | 
DF_UB
 | 
DF_FP_A
 | 
DF_FP_B
,

643 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

646 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

649 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

652 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

655 
DF_DA_WIDE
 | 
DF_UA_WIDE
 | 
DF_UB_WIDE
 | 
DF_FP_A
 | 
DF_FP_B
,

658 
DF_DA
 | 
DF_UB
,

661 
DF_DA
 | 
DF_UB
,

664 
DF_DA
 | 
DF_UB
,

667 
DF_DA
 | 
DF_UB
,

670 
DF_DA
 | 
DF_UB
,

673 
DF_DA
 | 
DF_UB
,

676 
DF_DA
 | 
DF_UB
,

679 
DF_DA
 | 
DF_UB
,

682 
DF_DA
 | 
DF_UB
 | 
DF_IS_LINEAR
,

685 
DF_DA
 | 
DF_UB
,

688 
DF_DA
 | 
DF_UB
,

691 
DF_DA
 | 
DF_UB
,

694 
DF_DA
 | 
DF_UB
,

697 
DF_DA
 | 
DF_UB
,

700 
DF_DA
 | 
DF_UB
,

703 
DF_DA
 | 
DF_UB
,

706 
DF_DA
 | 
DF_UB
,

709 
DF_DA
 | 
DF_UB
,

712 
DF_DA
 | 
DF_UB
,

715 
DF_DA
 | 
DF_UB
,

718 
DF_UA
 | 
DF_UB
,

721 
DF_DA
,

724 
DF_UA
,

727 
DF_DA
 | 
DF_UB
,

730 
DF_DA_WIDE
 | 
DF_UB
,

733 
DF_UA_WIDE
 | 
DF_UB
,

736 
DF_DA_WIDE
,

739 
DF_UA_WIDE
,

742 
DF_NOP
,

745 
DF_NOP
,

748 
DF_FORMAT_35C
,

751 
DF_FORMAT_3RC
,

754 
DF_NOP
,

757 
DF_NOP
,

760 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

763 
DF_DA_WIDE
 | 
DF_UB
 | 
DF_IS_GETTER
,

766 
DF_DA
 | 
DF_UB
 | 
DF_IS_GETTER
,

769 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

772 
DF_UA_WIDE
 | 
DF_UB
 | 
DF_IS_SETTER
,

775 
DF_UA
 | 
DF_UB
 | 
DF_IS_SETTER
,

778 
DF_FORMAT_35C
,

781 
DF_FORMAT_3RC
,

784 
DF_FORMAT_35C
,

787 
DF_FORMAT_3RC
,

790 
DF_UA
 | 
DF_UB
,

793 
DF_DA
,

796 
DF_UA
,

799 
DF_NOP
,

803 
DF_PHI
 | 
DF_DA
,

811 
	$dvmCÚv”tSSARegToD®vik
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
, 
s§Reg
)

813  
	`GET_ELEM_N
(
cUn™
->
s§ToD®vikM­
, , 
s§Reg
);

814 
	}
}

821 *
	$dvmComp”G‘D®vikDi§s£mbly
(cÚ¡ 
DecodedIn¡ruùiÚ
 *
š¢
,

822 cÚ¡ *
nÙe
)

824 
bufãr
[256];

825 
Opcode
 
İcode
 = 
š¢
->opcode;

826 
dfA‰ribu‹s
 = 
dvmComp”D©aFlowA‰ribu‹s
[
İcode
];

827 
æags
;

828 *
»t
;

830 
bufãr
[0] = 0;

831 ià(()
İcode
 >ğ()
kMœOpFœ¡
) {

832 ià(()
İcode
 =ğ()
kMœOpPhi
) {

833 
	`¡rıy
(
bufãr
, "PHI");

836 
	`¥rštf
(
bufãr
, "Opcod%#x", 
İcode
);

838 
æags
 = 0;

840 
	`¡rıy
(
bufãr
, 
	`dexG‘OpcodeName
(
İcode
));

841 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
š¢
->
İcode
);

844 ià(
nÙe
)

845 
	`¡rÿt
(
bufãr
, 
nÙe
);

848 ià(
æags
 & 
kIn¡rCªB¿nch
) {

849 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 = 
	`dexG‘FÜm©FromOpcode
(
š¢
->
İcode
);

850 
off£t
 = 0;

851 
d®vikFÜm©
) {

852 
kFmt21t
:

853 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " v%d,", 
š¢
->
vA
);

854 
off£t
 = (è
š¢
->
vB
;

856 
kFmt22t
:

857 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " v%d, v%d,",

858 
š¢
->
vA
, in¢->
vB
);

859 
off£t
 = (è
š¢
->
vC
;

861 
kFmt10t
:

862 
kFmt20t
:

863 
kFmt30t
:

864 
off£t
 = (è
š¢
->
vA
;

867 
	`ALOGE
("UÃx³ùed b¿nch fÜm© %d / opcod%#x", 
d®vikFÜm©
,

868 
İcode
);

869 
	`dvmAbÜt
();

872 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " (%c%x)",

873 
off£t
 > 0 ? '+' : '-',

874 
off£t
 > 0 ? offset : -offset);

875 } ià(
dfA‰ribu‹s
 & 
DF_FORMAT_35C
) {

876 
i
;

877 
i
 = 0; i < 
š¢
->
vA
; i++) {

878 ià(
i
 !ğ0è
	`¡rÿt
(
bufãr
, ",");

879 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " v%d", 
š¢
->
¬g
[
i
]);

882 ià(
dfA‰ribu‹s
 & 
DF_FORMAT_3RC
) {

883 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256,

884 " v%d..v%d", 
š¢
->
vC
, in¢->vC + in¢->
vA
 - 1);

887 ià(
dfA‰ribu‹s
 & 
DF_A_IS_REG
) {

888 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " v%d", 
š¢
->
vA
);

890 ià(
dfA‰ribu‹s
 & 
DF_B_IS_REG
) {

891 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, ", v%d", 
š¢
->
vB
);

893 ià(()
İcode
 < ()
kMœOpFœ¡
) {

894 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, ", (#%d)", 
š¢
->
vB
);

896 ià(
dfA‰ribu‹s
 & 
DF_C_IS_REG
) {

897 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, ", v%d", 
š¢
->
vC
);

899 ià(()
İcode
 < ()
kMœOpFœ¡
) {

900 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, ", (#%d)", 
š¢
->
vC
);

903 
Ëngth
 = 
	`¡¾’
(
bufãr
) + 1;

904 
»t
 = (*)
	`dvmComp”New
(
Ëngth
, 
çl£
);

905 
	`memıy
(
»t
, 
bufãr
, 
Ëngth
);

906  
»t
;

907 
	}
}

909 *
	$g‘SSAName
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
, 
s§Reg
, *
Çme
)

911 
s§2D®vikV®ue
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
s§Reg
);

913 
	`¥rštf
(
Çme
, "v%d_%d",

914 
	`DECODE_REG
(
s§2D®vikV®ue
), 
	`DECODE_SUB
(ssa2DalvikValue));

915  
Çme
;

916 
	}
}

921 *
	$dvmComp”FuÎDi§s£mbËr
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
,

922 cÚ¡ 
MIR
 *
mœ
)

924 
bufãr
[256];

925 
İ”ªd0
[256], 
İ”ªd1
[256];

926 cÚ¡ 
DecodedIn¡ruùiÚ
 *
š¢
 = &
mœ
->
d®vikIn¢
;

927 
İcode
 = 
š¢
->opcode;

928 
dfA‰ribu‹s
 = 
dvmComp”D©aFlowA‰ribu‹s
[
İcode
];

929 *
»t
;

930 
Ëngth
;

931 
OpcodeFÏgs
 
æags
;

933 
bufãr
[0] = 0;

934 ià(
İcode
 >ğ
kMœOpFœ¡
) {

935 ià(
İcode
 =ğ
kMœOpPhi
) {

936 
	`¢´štf
(
bufãr
, 256, "PHI %s = (%s",

937 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
defs
[0], 
İ”ªd0
),

938 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[0], 
İ”ªd1
));

939 
i
;

940 
i
 = 1; i < 
mœ
->
s§R•
->
numU£s
; i++) {

941 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, ", %s",

942 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[
i
], 
İ”ªd0
));

944 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, ")");

947 
	`¥rštf
(
bufãr
, "Opcod%#x", 
İcode
);

949 
dÚe
;

951 
	`¡rıy
(
bufãr
, 
	`dexG‘OpcodeName
((
Opcode
)
İcode
));

954 
æags
 = 
	`dexG‘FÏgsFromOpcode
((
Opcode
)
İcode
);

956 ià(
æags
 & 
kIn¡rCªB¿nch
) {

957 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 = 
	`dexG‘FÜm©FromOpcode
(
š¢
->
İcode
);

958 
d–
 = 0;

959 
d®vikFÜm©
) {

960 
kFmt21t
:

961 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %s, ",

962 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[0], 
İ”ªd0
));

963 
d–
 = (è
š¢
->
vB
;

965 
kFmt22t
:

966 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %s, %s, ",

967 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[0], 
İ”ªd0
),

968 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[1], 
İ”ªd1
));

969 
d–
 = (è
š¢
->
vC
;

971 
kFmt10t
:

972 
kFmt20t
:

973 
kFmt30t
:

974 
d–
 = (è
š¢
->
vA
;

977 
	`ALOGE
("UÃx³ùed b¿nch fÜm©: %d", 
d®vikFÜm©
);

978 
	`dvmAbÜt
();

981 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %04x",

982 
mœ
->
off£t
 + 
d–
);

983 } ià(
dfA‰ribu‹s
 & (
DF_FORMAT_35C
 | 
DF_FORMAT_3RC
)) {

984 
i
;

985 
i
 = 0; i < 
š¢
->
vA
; i++) {

986 ià(
i
 !ğ0è
	`¡rÿt
(
bufãr
, ",");

987 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %s",

988 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[
i
], 
İ”ªd0
));

991 
udIdx
;

992 ià(
mœ
->
s§R•
->
numDefs
) {

994 
udIdx
 = 0; udIdx < 
mœ
->
s§R•
->
numDefs
; udIdx++) {

995 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %s",

996 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
defs
[
udIdx
], 
İ”ªd0
));

998 
	`¡rÿt
(
bufãr
, ",");

1000 ià(
mœ
->
s§R•
->
numU£s
) {

1002 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, " %s",

1003 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[0], 
İ”ªd0
));

1004 
udIdx
 = 1; udIdx < 
mœ
->
s§R•
->
numU£s
; udIdx++) {

1005 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(buffer), 256, ", %s",

1006 
	`g‘SSAName
(
cUn™
, 
mœ
->
s§R•
->
u£s
[
udIdx
], 
İ”ªd0
));

1009 ià(
İcode
 < 
kMœOpFœ¡
) {

1010 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 =

1011 
	`dexG‘FÜm©FromOpcode
((
Opcode
)
İcode
);

1012 
d®vikFÜm©
) {

1013 
kFmt11n
:

1014 
kFmt21s
:

1015 
kFmt21h
:

1016 
kFmt31i
:

1017 
kFmt51l
:

1018 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " #%#x", 
š¢
->
vB
);

1020 
kFmt21c
:

1021 
kFmt31c
:

1022 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " @%#x", 
š¢
->
vB
);

1024 
kFmt22b
:

1025 
kFmt22s
:

1026 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " #%#x", 
š¢
->
vC
);

1028 
kFmt22c
:

1029 
kFmt22cs
:

1030 
	`¢´štf
(
bufãr
 + 
	`¡¾’
(bufãr), 256, " @%#x", 
š¢
->
vC
);

1039 
dÚe
:

1040 
Ëngth
 = 
	`¡¾’
(
bufãr
) + 1;

1041 
»t
 = (*è
	`dvmComp”New
(
Ëngth
, 
çl£
);

1042 
	`memıy
(
»t
, 
bufãr
, 
Ëngth
);

1043  
»t
;

1044 
	}
}

1051 *
	$dvmComp”G‘SSASŒšg
(
Comp©iÚUn™
 *
cUn™
, 
SSAR•»£Á©iÚ
 *
s§R•
)

1053 
bufãr
[256];

1054 *
»t
;

1055 
i
;

1057 
bufãr
[0] = 0;

1058 
i
 = 0; i < 
s§R•
->
numDefs
; i++) {

1059 
s§2D®vikV®ue
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
s§R•
->
defs
[
i
]);

1061 
	`¥rštf
(
bufãr
 + 
	`¡¾’
(buffer), "s%d(v%d_%d) ",

1062 
s§R•
->
defs
[
i
], 
	`DECODE_REG
(
s§2D®vikV®ue
),

1063 
	`DECODE_SUB
(
s§2D®vikV®ue
));

1066 ià(
s§R•
->
numDefs
) {

1067 
	`¡rÿt
(
bufãr
, "<- ");

1070 
i
 = 0; i < 
s§R•
->
numU£s
; i++) {

1071 
s§2D®vikV®ue
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
s§R•
->
u£s
[
i
]);

1072 
Ën
 = 
	`¡¾’
(
bufãr
);

1074 ià(
	`¢´štf
(
bufãr
 + 
Ën
, 250 -†en, "s%d(v%d_%d) ",

1075 
s§R•
->
u£s
[
i
], 
	`DECODE_REG
(
s§2D®vikV®ue
),

1076 
	`DECODE_SUB
(
s§2D®vikV®ue
)è>ğ(250 - 
Ën
)) {

1077 
	`¡rÿt
(
bufãr
, "...");

1082 
Ëngth
 = 
	`¡¾’
(
bufãr
) + 1;

1083 
»t
 = (*)
	`dvmComp”New
(
Ëngth
, 
çl£
);

1084 
	`memıy
(
»t
, 
bufãr
, 
Ëngth
);

1085  
»t
;

1086 
	}
}

1089 
šlše
 
	$hªdËLiveInU£
(
B™VeùÜ
 *
u£V
, B™VeùÜ *
defV
,

1090 
B™VeùÜ
 *
liveInV
, 
d®vikRegId
)

1092 
	`dvmComp”S‘B™
(
u£V
, 
d®vikRegId
);

1093 ià(!
	`dvmIsB™S‘
(
defV
, 
d®vikRegId
)) {

1094 
	`dvmComp”S‘B™
(
liveInV
, 
d®vikRegId
);

1096 
	}
}

1099 
šlše
 
	$hªdËDef
(
B™VeùÜ
 *
defV
, 
d®vikRegId
)

1101 
	`dvmComp”S‘B™
(
defV
, 
d®vikRegId
);

1102 
	}
}

1108 
boŞ
 
	$dvmComp”FšdLoÿlLiveIn
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

1110 
MIR
 *
mœ
;

1111 
B™VeùÜ
 *
u£V
, *
defV
, *
liveInV
;

1113 ià(
bb
->
d©aFlowInfo
 =ğ
NULL
è 
çl£
;

1115 
u£V
 = 
bb
->
d©aFlowInfo
->useV =

1116 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numD®vikRegi¡”s
, 
çl£
);

1117 
defV
 = 
bb
->
d©aFlowInfo
->defV =

1118 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numD®vikRegi¡”s
, 
çl£
);

1119 
liveInV
 = 
bb
->
d©aFlowInfo
->liveInV =

1120 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numD®vikRegi¡”s
, 
çl£
);

1122 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

1123 
dfA‰ribu‹s
 =

1124 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

1125 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1127 ià(
dfA‰ribu‹s
 & 
DF_HAS_USES
) {

1128 ià(
dfA‰ribu‹s
 & 
DF_UA
) {

1129 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vA
);

1130 } ià(
dfA‰ribu‹s
 & 
DF_UA_WIDE
) {

1131 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vA
);

1132 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vA
+1);

1134 ià(
dfA‰ribu‹s
 & 
DF_UB
) {

1135 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vB
);

1136 } ià(
dfA‰ribu‹s
 & 
DF_UB_WIDE
) {

1137 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vB
);

1138 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vB
+1);

1140 ià(
dfA‰ribu‹s
 & 
DF_UC
) {

1141 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vC
);

1142 } ià(
dfA‰ribu‹s
 & 
DF_UC_WIDE
) {

1143 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vC
);

1144 
	`hªdËLiveInU£
(
u£V
, 
defV
, 
liveInV
, 
dIn¢
->
vC
+1);

1147 ià(
dfA‰ribu‹s
 & 
DF_HAS_DEFS
) {

1148 
	`hªdËDef
(
defV
, 
dIn¢
->
vA
);

1149 ià(
dfA‰ribu‹s
 & 
DF_DA_WIDE
) {

1150 
	`hªdËDef
(
defV
, 
dIn¢
->
vA
+1);

1154  
Œue
;

1155 
	}
}

1158 
	$hªdËSSAU£
(
Comp©iÚUn™
 *
cUn™
, *
u£s
, 
d®vikReg
,

1159 
»gIndex
)

1161 
’codedV®ue
 = 
cUn™
->
d®vikToSSAM­
[
d®vikReg
];

1162 
s§Reg
 = 
	`DECODE_REG
(
’codedV®ue
);

1163 
u£s
[
»gIndex
] = 
s§Reg
;

1164 
	}
}

1167 
	$hªdËSSADef
(
Comp©iÚUn™
 *
cUn™
, *
defs
, 
d®vikReg
,

1168 
»gIndex
)

1170 
’codedV®ue
 = 
cUn™
->
d®vikToSSAM­
[
d®vikReg
];

1171 
s§Reg
 = 
cUn™
->
numSSARegs
++;

1173 
d®vikSub
 = 
	`DECODE_SUB
(
’codedV®ue
) + 1;

1174 
ÃwD2SM­pšg
 = 
	`ENCODE_REG_SUB
(
s§Reg
, 
d®vikSub
);

1176 
cUn™
->
d®vikToSSAM­
[
d®vikReg
] = 
ÃwD2SM­pšg
;

1178 
ÃwS2DM­pšg
 = 
	`ENCODE_REG_SUB
(
d®vikReg
, 
d®vikSub
);

1179 
	`dvmIn£¹GrowabËLi¡
(
cUn™
->
s§ToD®vikM­
, 
ÃwS2DM­pšg
);

1181 
defs
[
»gIndex
] = 
s§Reg
;

1182 
	}
}

1185 
	$d©aFlowSSAFÜm©35C
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1187 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1188 
numU£s
 = 
dIn¢
->
vA
;

1189 
i
;

1191 
mœ
->
s§R•
->
numU£s
 =‚umUses;

1192 
mœ
->
s§R•
->
u£s
 = (*)
	`dvmComp”New
((è* 
numU£s
, 
çl£
);

1194 
i
 = 0; i < 
numU£s
; i++) {

1195 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
¬g
[
i
], i);

1197 
	}
}

1200 
	$d©aFlowSSAFÜm©3RC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1202 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1203 
numU£s
 = 
dIn¢
->
vA
;

1204 
i
;

1206 
mœ
->
s§R•
->
numU£s
 =‚umUses;

1207 
mœ
->
s§R•
->
u£s
 = (*)
	`dvmComp”New
((è* 
numU£s
, 
çl£
);

1209 
i
 = 0; i < 
numU£s
; i++) {

1210 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vC
+
i
, i);

1212 
	}
}

1215 
boŞ
 
	$dvmComp”DoSSACÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

1217 
MIR
 *
mœ
;

1219 ià(
bb
->
d©aFlowInfo
 =ğ
NULL
è 
çl£
;

1221 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

1222 
mœ
->
s§R•
 = (
SSAR•»£Á©iÚ
 *)

1223 
	`dvmComp”New
((
SSAR•»£Á©iÚ
), 
Œue
);

1225 
dfA‰ribu‹s
 =

1226 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

1228 
numU£s
 = 0;

1230 ià(
dfA‰ribu‹s
 & 
DF_FORMAT_35C
) {

1231 
	`d©aFlowSSAFÜm©35C
(
cUn™
, 
mœ
);

1235 ià(
dfA‰ribu‹s
 & 
DF_FORMAT_3RC
) {

1236 
	`d©aFlowSSAFÜm©3RC
(
cUn™
, 
mœ
);

1240 ià(
dfA‰ribu‹s
 & 
DF_HAS_USES
) {

1241 ià(
dfA‰ribu‹s
 & 
DF_UA
) {

1242 
numU£s
++;

1243 } ià(
dfA‰ribu‹s
 & 
DF_UA_WIDE
) {

1244 
numU£s
 += 2;

1246 ià(
dfA‰ribu‹s
 & 
DF_UB
) {

1247 
numU£s
++;

1248 } ià(
dfA‰ribu‹s
 & 
DF_UB_WIDE
) {

1249 
numU£s
 += 2;

1251 ià(
dfA‰ribu‹s
 & 
DF_UC
) {

1252 
numU£s
++;

1253 } ià(
dfA‰ribu‹s
 & 
DF_UC_WIDE
) {

1254 
numU£s
 += 2;

1258 ià(
numU£s
) {

1259 
mœ
->
s§R•
->
numU£s
 =‚umUses;

1260 
mœ
->
s§R•
->
u£s
 = (*)
	`dvmComp”New
((è* 
numU£s
,

1261 
çl£
);

1262 
mœ
->
s§R•
->
åU£
 = (
boŞ
 *)
	`dvmComp”New
((boŞè* 
numU£s
,

1263 
çl£
);

1266 
numDefs
 = 0;

1268 ià(
dfA‰ribu‹s
 & 
DF_HAS_DEFS
) {

1269 
numDefs
++;

1270 ià(
dfA‰ribu‹s
 & 
DF_DA_WIDE
) {

1271 
numDefs
++;

1275 ià(
numDefs
) {

1276 
mœ
->
s§R•
->
numDefs
 =‚umDefs;

1277 
mœ
->
s§R•
->
defs
 = (*)
	`dvmComp”New
((è* 
numDefs
,

1278 
çl£
);

1279 
mœ
->
s§R•
->
åDef
 = (
boŞ
 *)
	`dvmComp”New
((boŞè* 
numDefs
,

1280 
çl£
);

1283 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1285 ià(
dfA‰ribu‹s
 & 
DF_HAS_USES
) {

1286 
numU£s
 = 0;

1287 ià(
dfA‰ribu‹s
 & 
DF_UA
) {

1288 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_A
;

1289 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vA
, 
numU£s
++);

1290 } ià(
dfA‰ribu‹s
 & 
DF_UA_WIDE
) {

1291 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_A
;

1292 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vA
, 
numU£s
++);

1293 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_A
;

1294 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vA
+1, 
numU£s
++);

1296 ià(
dfA‰ribu‹s
 & 
DF_UB
) {

1297 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_B
;

1298 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vB
, 
numU£s
++);

1299 } ià(
dfA‰ribu‹s
 & 
DF_UB_WIDE
) {

1300 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_B
;

1301 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vB
, 
numU£s
++);

1302 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_B
;

1303 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vB
+1, 
numU£s
++);

1305 ià(
dfA‰ribu‹s
 & 
DF_UC
) {

1306 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_C
;

1307 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vC
, 
numU£s
++);

1308 } ià(
dfA‰ribu‹s
 & 
DF_UC_WIDE
) {

1309 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_C
;

1310 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vC
, 
numU£s
++);

1311 
mœ
->
s§R•
->
åU£
[
numU£s
] = 
dfA‰ribu‹s
 & 
DF_FP_C
;

1312 
	`hªdËSSAU£
(
cUn™
, 
mœ
->
s§R•
->
u£s
, 
dIn¢
->
vC
+1, 
numU£s
++);

1315 ià(
dfA‰ribu‹s
 & 
DF_HAS_DEFS
) {

1316 
mœ
->
s§R•
->
åDef
[0] = 
dfA‰ribu‹s
 & 
DF_FP_A
;

1317 
	`hªdËSSADef
(
cUn™
, 
mœ
->
s§R•
->
defs
, 
dIn¢
->
vA
, 0);

1318 ià(
dfA‰ribu‹s
 & 
DF_DA_WIDE
) {

1319 
mœ
->
s§R•
->
åDef
[1] = 
dfA‰ribu‹s
 & 
DF_FP_A
;

1320 
	`hªdËSSADef
(
cUn™
, 
mœ
->
s§R•
->
defs
, 
dIn¢
->
vA
+1, 1);

1330 
bb
->
d©aFlowInfo
->
d®vikToSSAM­
 =

1331 (*)
	`dvmComp”New
((è* 
cUn™
->
m‘hod
->
»gi¡”sSize
,

1332 
çl£
);

1334 
	`memıy
(
bb
->
d©aFlowInfo
->
d®vikToSSAM­
, 
cUn™
->dalvikToSSAMap,

1335 (è* 
cUn™
->
m‘hod
->
»gi¡”sSize
);

1336  
Œue
;

1337 
	}
}

1340 
	$£tCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
s§Reg
, 
v®ue
)

1342 
	`dvmS‘B™
(
cUn™
->
isCÚ¡ªtV
, 
s§Reg
);

1343 
cUn™
->
cÚ¡ªtV®ues
[
s§Reg
] = 
v®ue
;

1344 
	}
}

1346 
boŞ
 
	$dvmComp”DoCÚ¡ªtPrİag©iÚ
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

1348 
MIR
 *
mœ
;

1349 
B™VeùÜ
 *
isCÚ¡ªtV
 = 
cUn™
->isConstantV;

1351 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

1352 
dfA‰ribu‹s
 =

1353 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

1355 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1357 ià(!(
dfA‰ribu‹s
 & 
DF_HAS_DEFS
)) ;

1360 ià(
dfA‰ribu‹s
 & 
DF_SETS_CONST
) {

1361 ià(
dfA‰ribu‹s
 & 
DF_DA
) {

1362 
dIn¢
->
İcode
) {

1363 
OP_CONST_4
:

1364 
OP_CONST_16
:

1365 
OP_CONST
:

1366 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0], 
dIn¢
->
vB
);

1368 
OP_CONST_HIGH16
:

1369 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0],

1370 
dIn¢
->
vB
 << 16);

1375 } ià(
dfA‰ribu‹s
 & 
DF_DA_WIDE
) {

1376 
dIn¢
->
İcode
) {

1377 
OP_CONST_WIDE_16
:

1378 
OP_CONST_WIDE_32
:

1379 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0], 
dIn¢
->
vB
);

1380 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[1], 0);

1382 
OP_CONST_WIDE
:

1383 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0],

1384 (è
dIn¢
->
vB_wide
);

1385 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[1],

1386 (è(
dIn¢
->
vB_wide
 >> 32));

1388 
OP_CONST_WIDE_HIGH16
:

1389 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0], 0);

1390 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[1],

1391 
dIn¢
->
vB
 << 16);

1398 } ià(
dfA‰ribu‹s
 & 
DF_IS_MOVE
) {

1399 
i
;

1401 
i
 = 0; i < 
mœ
->
s§R•
->
numU£s
; i++) {

1402 ià(!
	`dvmIsB™S‘
(
isCÚ¡ªtV
, 
mœ
->
s§R•
->
u£s
[
i
])) ;

1405 ià(
i
 =ğ
mœ
->
s§R•
->
numU£s
) {

1406 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[0],

1407 
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[0]]);

1408 ià(
dfA‰ribu‹s
 & 
DF_DA_WIDE
) {

1409 
	`£tCÚ¡ªt
(
cUn™
, 
mœ
->
s§R•
->
defs
[1],

1410 
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[1]]);

1416  
Œue
;

1417 
	}
}

1419 
boŞ
 
	$dvmComp”FšdInduùiÚV¬ŸbËs
(
Comp©iÚUn™
 *
cUn™
,

1420 
BasicBlock
 *
bb
)

1422 
B™VeùÜ
 *
isIndV¬V
 = 
cUn™
->
loİAÇlysis
->isIndVarV;

1423 
B™VeùÜ
 *
isCÚ¡ªtV
 = 
cUn™
->isConstantV;

1424 
GrowabËLi¡
 *
ivLi¡
 = 
cUn™
->
loİAÇlysis
->ivList;

1425 
MIR
 *
mœ
;

1427 ià(
bb
->
blockTy³
 !ğ
kD®vikBy‹Code
 && bb->blockTy³ !ğ
kEÁryBlock
) {

1428  
çl£
;

1432 ià(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
 ||

1433 ()
bb
->
fœ¡MIRIn¢
->
d®vikIn¢
.
İcode
 !ğ()
kMœOpPhi
) {

1434  
çl£
;

1438 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

1439 
dfA‰ribu‹s
 =

1440 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

1442 ià(!(
dfA‰ribu‹s
 & 
DF_IS_LINEAR
)) ;

1450 
MIR
 *
phi
;

1451 
phi
 = 
bb
->
fœ¡MIRIn¢
;…hi;…h˜ğphi->
Ãxt
) {

1452 ià(()
phi
->
d®vikIn¢
.
İcode
 !ğ()
kMœOpPhi
) ;

1454 ià(
phi
->
s§R•
->
defs
[0] =ğ
mœ
->s§R•->
u£s
[0] &&

1455 
phi
->
s§R•
->
u£s
[1] =ğ
mœ
->s§R•->
defs
[0]) {

1456 
boŞ
 
d–IsCÚ¡ªt
 = 
çl£
;

1457 
d–V®ue
;

1459 
mœ
->
d®vikIn¢
.
İcode
) {

1460 
OP_ADD_INT
:

1461 ià(
	`dvmIsB™S‘
(
isCÚ¡ªtV
,

1462 
mœ
->
s§R•
->
u£s
[1])) {

1463 
d–V®ue
 =

1464 
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[1]];

1465 
d–IsCÚ¡ªt
 = 
Œue
;

1468 
OP_SUB_INT
:

1469 ià(
	`dvmIsB™S‘
(
isCÚ¡ªtV
,

1470 
mœ
->
s§R•
->
u£s
[1])) {

1471 
d–V®ue
 =

1472 -
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[1]];

1473 
d–IsCÚ¡ªt
 = 
Œue
;

1476 
OP_ADD_INT_LIT8
:

1477 
d–V®ue
 = 
mœ
->
d®vikIn¢
.
vC
;

1478 
d–IsCÚ¡ªt
 = 
Œue
;

1483 ià(
d–IsCÚ¡ªt
) {

1484 
	`dvmS‘B™
(
isIndV¬V
, 
mœ
->
s§R•
->
u£s
[0]);

1485 
InduùiÚV¬ŸbËInfo
 *
ivInfo
 = (InductionVariableInfo *)

1486 
	`dvmComp”New
((
InduùiÚV¬ŸbËInfo
),

1487 
çl£
);

1489 
ivInfo
->
s§Reg
 = 
mœ
->
s§R•
->
u£s
[0];

1490 
ivInfo
->
basicSSAReg
 = 
mœ
->
s§R•
->
u£s
[0];

1491 
ivInfo
->
m
 = 1;

1492 
ivInfo
->
c
 = 0;

1493 
ivInfo
->
šc
 = 
d–V®ue
;

1494 
	`dvmIn£¹GrowabËLi¡
(
ivLi¡
, (
šŒ_t
è
ivInfo
);

1495 
cUn™
->
loİAÇlysis
->
numBasicIV
++;

1503 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

1504 
dfA‰ribu‹s
 =

1505 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

1507 ià(!(
dfA‰ribu‹s
 & 
DF_IS_LINEAR
)) ;

1510 ià(
	`dvmIsB™S‘
(
isIndV¬V
, 
mœ
->
s§R•
->
defs
[0])) ;

1517 ià(
	`dvmIsB™S‘
(
isIndV¬V
, 
mœ
->
s§R•
->
u£s
[0])) {

1518 
¤cD®vikReg
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
,

1519 
mœ
->
s§R•
->
u£s
[0]);

1520 
d¡D®vikReg
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
,

1521 
mœ
->
s§R•
->
defs
[0]);

1523 
boŞ
 
cIsCÚ¡ªt
 = 
çl£
;

1524 
c
 = 0;

1526 
mœ
->
d®vikIn¢
.
İcode
) {

1527 
OP_ADD_INT
:

1528 ià(
	`dvmIsB™S‘
(
isCÚ¡ªtV
,

1529 
mœ
->
s§R•
->
u£s
[1])) {

1530 
c
 = 
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[1]];

1531 
cIsCÚ¡ªt
 = 
Œue
;

1534 
OP_SUB_INT
:

1535 ià(
	`dvmIsB™S‘
(
isCÚ¡ªtV
,

1536 
mœ
->
s§R•
->
u£s
[1])) {

1537 
c
 = -
cUn™
->
cÚ¡ªtV®ues
[
mœ
->
s§R•
->
u£s
[1]];

1538 
cIsCÚ¡ªt
 = 
Œue
;

1541 
OP_ADD_INT_LIT8
:

1542 
c
 = 
mœ
->
d®vikIn¢
.
vC
;

1543 
cIsCÚ¡ªt
 = 
Œue
;

1550 ià(
	`DECODE_REG
(
¤cD®vikReg
è=ğDECODE_REG(
d¡D®vikReg
)) {

1551 
cUn™
->
loİAÇlysis
->
s§BIV
 = 
mœ
->
s§R•
->
defs
[0];

1552 
cIsCÚ¡ªt
 = 
çl£
;

1555 ià(
cIsCÚ¡ªt
) {

1556 
i
;

1557 
	`dvmS‘B™
(
isIndV¬V
, 
mœ
->
s§R•
->
defs
[0]);

1558 
InduùiÚV¬ŸbËInfo
 *
ivInfo
 = (InductionVariableInfo *)

1559 
	`dvmComp”New
((
InduùiÚV¬ŸbËInfo
),

1560 
çl£
);

1561 
InduùiÚV¬ŸbËInfo
 *
ivInfoOld
 = 
NULL
 ;

1563 
i
 = 0; i < 
ivLi¡
->
numU£d
; i++) {

1564 
ivInfoOld
 = (
InduùiÚV¬ŸbËInfo
 *è
ivLi¡
->
–emLi¡
[
i
];

1565 ià(
ivInfoOld
->
s§Reg
 =ğ
mœ
->
s§R•
->
u£s
[0]) ;

1569 
	`as£¹
(
i
 < 
ivLi¡
->
numU£d
);

1571 
ivInfo
->
s§Reg
 = 
mœ
->
s§R•
->
defs
[0];

1572 
ivInfo
->
basicSSAReg
 = 
ivInfoOld
->basicSSAReg;

1573 
ivInfo
->
m
 = 
ivInfoOld
->m;

1574 
ivInfo
->
c
 = c + 
ivInfoOld
->c;

1575 
ivInfo
->
šc
 = 
ivInfoOld
->inc;

1576 
	`dvmIn£¹GrowabËLi¡
(
ivLi¡
, (
šŒ_t
è
ivInfo
);

1580  
Œue
;

1581 
	}
}

1584 
	$dvmIn™ŸlizeSSACÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
)

1586 
i
;

1587 
numD®vikReg
 = 
cUn™
->
m‘hod
->
»gi¡”sSize
;

1589 
cUn™
->
s§ToD®vikM­
 = (
GrowabËLi¡
 *)
	`dvmComp”New
((GrowableList),

1590 
çl£
);

1591 
	`dvmIn™GrowabËLi¡
(
cUn™
->
s§ToD®vikM­
, 
numD®vikReg
);

1597 
cUn™
->
numSSARegs
 = 
numD®vikReg
;

1604 
i
 = 0; i < 
numD®vikReg
; i++) {

1605 
	`dvmIn£¹GrowabËLi¡
(
cUn™
->
s§ToD®vikM­
, 
	`ENCODE_REG_SUB
(
i
, 0));

1613 
cUn™
->
d®vikToSSAM­
 = (*)
	`dvmComp”New
((è* 
numD®vikReg
,

1614 
çl£
);

1615 
i
 = 0; i < 
numD®vikReg
; i++) {

1616 
cUn™
->
d®vikToSSAM­
[
i
] = i;

1622 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

1624 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

1626 
Œue
) {

1627 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

1628 ià(
bb
 =ğ
NULL
) ;

1629 ià(
bb
->
hidd’
 =ğ
Œue
) ;

1630 ià(
bb
->
blockTy³
 =ğ
kD®vikBy‹Code
 ||

1631 
bb
->
blockTy³
 =ğ
kEÁryBlock
 ||

1632 
bb
->
blockTy³
 =ğ
kEx™Block
) {

1633 
bb
->
d©aFlowInfo
 = (
BasicBlockD©aFlow
 *)

1634 
	`dvmComp”New
((
BasicBlockD©aFlow
),

1635 
Œue
);

1638 
	}
}

1641 
boŞ
 
	$dvmComp”CË¬Vis™edFÏg
(
Comp©iÚUn™
 *
cUn™
,

1642 
BasicBlock
 *
bb
)

1644 
bb
->
vis™ed
 = 
çl£
;

1645  
Œue
;

1646 
	}
}

1648 
dvmComp”D©aFlowAÇlysisDi¥©ch”
(
Comp©iÚUn™
 *
cUn™
,

1649 
	$boŞ
 (*
func
)(
Comp©iÚUn™
 *, 
BasicBlock
 *),

1650 
D©aFlowAÇlysisMode
 
dçMode
,

1651 
boŞ
 
isI‹¿tive
)

1653 
boŞ
 
chªge
 = 
Œue
;

1655 
chªge
) {

1656 
chªge
 = 
çl£
;

1659 ià(
dçMode
 =ğ
kAÎNodes
) {

1660 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

1661 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

1662 
Œue
) {

1663 
BasicBlock
 *
bb
 =

1664 (
BasicBlock
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

1665 ià(
bb
 =ğ
NULL
) ;

1666 ià(
bb
->
hidd’
 =ğ
Œue
) ;

1667 
chªge
 |ğ(*
func
)(
cUn™
, 
bb
);

1674 ià(
dçMode
 =ğ
kR—chabËNodes
) {

1675 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

1676 
idx
;

1677 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

1679 
idx
 = 0; idx < 
numR—chabËBlocks
; idx++) {

1680 
blockIdx
 = 
cUn™
->
dfsOrd”
.
–emLi¡
[
idx
];

1681 
BasicBlock
 *
bb
 =

1682 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
,

1683 
blockIdx
);

1684 
chªge
 |ğ(*
func
)(
cUn™
, 
bb
);

1691 ià(
dçMode
 =ğ
kP»Ord”DFST¿v”§l
) {

1692 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

1693 
idx
;

1694 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

1696 
idx
 = 0; idx < 
numR—chabËBlocks
; idx++) {

1697 
dfsIdx
 = 
cUn™
->
dfsOrd”
.
–emLi¡
[
idx
];

1698 
BasicBlock
 *
bb
 =

1699 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
dfsIdx
);

1700 
chªge
 |ğ(*
func
)(
cUn™
, 
bb
);

1707 ià(
dçMode
 =ğ
kPo¡Ord”DFST¿v”§l
) {

1708 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

1709 
idx
;

1710 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

1712 
idx
 = 
numR—chabËBlocks
 - 1; idx >= 0; idx--) {

1713 
dfsIdx
 = 
cUn™
->
dfsOrd”
.
–emLi¡
[
idx
];

1714 
BasicBlock
 *
bb
 =

1715 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
dfsIdx
);

1716 
chªge
 |ğ(*
func
)(
cUn™
, 
bb
);

1723 ià(
dçMode
 =ğ
kPo¡Ord”DOMT¿v”§l
) {

1724 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

1725 
idx
;

1726 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

1728 
idx
 = 0; idx < 
numR—chabËBlocks
; idx++) {

1729 
domIdx
 = 
cUn™
->
domPo¡Ord”T¿v”§l
.
–emLi¡
[
idx
];

1730 
BasicBlock
 *
bb
 =

1731 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
domIdx
);

1732 
chªge
 |ğ(*
func
)(
cUn™
, 
bb
);

1736 
chªge
 &ğ
isI‹¿tive
;

1738 
	}
}

1741 
	$dvmComp”NÚLoİAÇlysis
(
Comp©iÚUn™
 *
cUn™
)

1743 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”DoSSACÚv”siÚ
,

1744 
kAÎNodes
,

1745 
çl£
 );

1746 
	}
}

	@vm/compiler/Dataflow.h

17 #iâdeà
DALVIK_VM_DATAFLOW_H_


18 
	#DALVIK_VM_DATAFLOW_H_


	)

20 
	~"D®vik.h
"

21 
	~"Comp”IÁ”Çls.h
"

23 
	eD©aFlowA‰ribu‹Pos
 {

24 
	mkUA
 = 0,

25 
	mkUB
,

26 
	mkUC
,

27 
	mkUAWide
,

28 
	mkUBWide
,

29 
	mkUCWide
,

30 
	mkDA
,

31 
	mkDAWide
,

32 
	mkIsMove
,

33 
	mkIsLš—r
,

34 
	mkS‘sCÚ¡
,

35 
	mkFÜm©35c
,

36 
	mkFÜm©3rc
,

37 
	mkPhi
,

38 
	mkNuÎNRªgeCheck0
,

39 
	mkNuÎNRªgeCheck1
,

40 
	mkNuÎNRªgeCheck2
,

41 
	mkFPA
,

42 
	mkFPB
,

43 
	mkFPC
,

44 
	mkG‘‹r
,

45 
	mkS‘‹r
,

46 } 
	tD©aFlowA‰ribu‹s
;

48 
	#DF_NOP
 0

	)

49 
	#DF_UA
 (1 << 
kUA
)

	)

50 
	#DF_UB
 (1 << 
kUB
)

	)

51 
	#DF_UC
 (1 << 
kUC
)

	)

52 
	#DF_UA_WIDE
 (1 << 
kUAWide
)

	)

53 
	#DF_UB_WIDE
 (1 << 
kUBWide
)

	)

54 
	#DF_UC_WIDE
 (1 << 
kUCWide
)

	)

55 
	#DF_DA
 (1 << 
kDA
)

	)

56 
	#DF_DA_WIDE
 (1 << 
kDAWide
)

	)

57 
	#DF_IS_MOVE
 (1 << 
kIsMove
)

	)

58 
	#DF_IS_LINEAR
 (1 << 
kIsLš—r
)

	)

59 
	#DF_SETS_CONST
 (1 << 
kS‘sCÚ¡
)

	)

60 
	#DF_FORMAT_35C
 (1 << 
kFÜm©35c
)

	)

61 
	#DF_FORMAT_3RC
 (1 << 
kFÜm©3rc
)

	)

62 
	#DF_PHI
 (1 << 
kPhi
)

	)

63 
	#DF_NULL_N_RANGE_CHECK_0
 (1 << 
kNuÎNRªgeCheck0
)

	)

64 
	#DF_NULL_N_RANGE_CHECK_1
 (1 << 
kNuÎNRªgeCheck1
)

	)

65 
	#DF_NULL_N_RANGE_CHECK_2
 (1 << 
kNuÎNRªgeCheck2
)

	)

66 
	#DF_FP_A
 (1 << 
kFPA
)

	)

67 
	#DF_FP_B
 (1 << 
kFPB
)

	)

68 
	#DF_FP_C
 (1 << 
kFPC
)

	)

69 
	#DF_IS_GETTER
 (1 << 
kG‘‹r
)

	)

70 
	#DF_IS_SETTER
 (1 << 
kS‘‹r
)

	)

72 
	#DF_HAS_USES
 (
DF_UA
 | 
DF_UB
 | 
DF_UC
 | 
DF_UA_WIDE
 | \

73 
DF_UB_WIDE
 | 
DF_UC_WIDE
)

	)

75 
	#DF_HAS_DEFS
 (
DF_DA
 | 
DF_DA_WIDE
)

	)

77 
	#DF_HAS_NR_CHECKS
 (
DF_NULL_N_RANGE_CHECK_0
 | \

78 
DF_NULL_N_RANGE_CHECK_1
 | \

79 
DF_NULL_N_RANGE_CHECK_2
)

	)

81 
	#DF_A_IS_REG
 (
DF_UA
 | 
DF_UA_WIDE
 | 
DF_DA
 | 
DF_DA_WIDE
)

	)

82 
	#DF_B_IS_REG
 (
DF_UB
 | 
DF_UB_WIDE
)

	)

83 
	#DF_C_IS_REG
 (
DF_UC
 | 
DF_UC_WIDE
)

	)

84 
	#DF_IS_GETTER_OR_SETTER
 (
DF_IS_GETTER
 | 
DF_IS_SETTER
)

	)

86 
dvmComp”D©aFlowA‰ribu‹s
[
kMœOpLa¡
];

88 
	sBasicBlockD©aFlow
 {

89 
B™VeùÜ
 *
	mu£V
;

90 
B™VeùÜ
 *
	mdefV
;

91 
B™VeùÜ
 *
	mliveInV
;

92 
B™VeùÜ
 *
	mphiV
;

93 *
	md®vikToSSAM­
;

94 } 
	tBasicBlockD©aFlow
;

96 
	sSSAR•»£Á©iÚ
 {

97 
	mnumU£s
;

98 *
	mu£s
;

99 
boŞ
 *
	måU£
;

100 
	mnumDefs
;

101 *
	mdefs
;

102 
boŞ
 *
	måDef
;

103 } 
	tSSAR•»£Á©iÚ
;

109 
	sInduùiÚV¬ŸbËInfo
 {

110 
	ms§Reg
;

111 
	mbasicSSAReg
;

112 
	mm
;

113 
	mc
;

114 
	mšc
;

115 } 
	tInduùiÚV¬ŸbËInfo
;

117 
	sA¼ayAcûssInfo
 {

118 
	m¬¿yReg
;

119 
	mivReg
;

120 
	mmaxC
;

121 
	mmšC
;

122 } 
	tA¼ayAcûssInfo
;

124 
	#ENCODE_REG_SUB
(
r
,
s
è((s<<16è|„)

	)

125 
	#DECODE_REG
(
v
è(v & 0xffff)

	)

126 
	#DECODE_SUB
(
v
è(((èvè>> 16)

	)

	@vm/compiler/Frontend.cpp

17 
	~"D®vik.h
"

18 
	~"libdex/DexOpcodes.h
"

19 
	~"libdex/DexC©ch.h
"

20 
	~"š‹½/J™.h
"

21 
	~"Comp”IÁ”Çls.h
"

22 
	~"D©aæow.h
"

24 
šlše
 
boŞ
 
	$cÚ‹ÁIsIn¢
(cÚ¡ 
u2
 *
codePŒ
) {

25 
u2
 
š¡r
 = *
codePŒ
;

26 
Opcode
 
İcode
 = (Opcode)(
š¡r
 & 0xff);

32  (
İcode
 !ğ
OP_NOP
 || 
š¡r
 == 0);

33 
	}
}

38 
šlše
 
	$·r£In¢
(cÚ¡ 
u2
 *
codePŒ
, 
DecodedIn¡ruùiÚ
 *
decIn¢
,

39 
boŞ
 
´štMe
)

42 ià(!
	`cÚ‹ÁIsIn¢
(
codePŒ
)) {

46 
u2
 
š¡r
 = *
codePŒ
;

47 
Opcode
 
İcode
 = 
	`dexOpcodeFromCodeUn™
(
š¡r
);

49 
	`dexDecodeIn¡ruùiÚ
(
codePŒ
, 
decIn¢
);

50 ià(
´štMe
) {

51 *
decodedSŒšg
 = 
	`dvmComp”G‘D®vikDi§s£mbly
(
decIn¢
, 
NULL
);

52 
	`ALOGD
("%p: %#06x %s", 
codePŒ
, 
İcode
, 
decodedSŒšg
);

54  
	`dexG‘WidthFromOpcode
(
İcode
);

55 
	}
}

57 
	#UNKNOWN_TARGET
 0xffffffff

	)

63 
šlše
 
boŞ
 
	$fšdBlockBound¬y
(cÚ¡ 
M‘hod
 *
ÿÎ”
, 
MIR
 *
š¢
,

64 
curOff£t
,

65 *
rg‘
, 
boŞ
 *
isInvoke
,

66 cÚ¡ 
M‘hod
 **
ÿÎ“
)

68 
š¢
->
d®vikIn¢
.
İcode
) {

70 
OP_RETURN_VOID
:

71 
OP_RETURN
:

72 
OP_RETURN_WIDE
:

73 
OP_RETURN_OBJECT
:

74 
OP_THROW
:

75 *
rg‘
 = 
UNKNOWN_TARGET
;

77 
OP_INVOKE_VIRTUAL
:

78 
OP_INVOKE_VIRTUAL_RANGE
:

79 
OP_INVOKE_INTERFACE
:

80 
OP_INVOKE_INTERFACE_RANGE
:

81 
OP_INVOKE_VIRTUAL_QUICK
:

82 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

83 *
isInvoke
 = 
Œue
;

85 
OP_INVOKE_SUPER
:

86 
OP_INVOKE_SUPER_RANGE
: {

87 
mIndex
 = 
ÿÎ”
->
şazz
->
pDvmDex
->

88 
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
]->
m‘hodIndex
;

89 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

90 
ÿÎ”
->
şazz
->
su³r
->
vbË
[
mIndex
];

92 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

93 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

95 *
isInvoke
 = 
Œue
;

96 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

99 
OP_INVOKE_STATIC
:

100 
OP_INVOKE_STATIC_RANGE
: {

101 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

102 
ÿÎ”
->
şazz
->
pDvmDex
->
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
];

104 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

105 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

107 *
isInvoke
 = 
Œue
;

108 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

111 
OP_INVOKE_SUPER_QUICK
:

112 
OP_INVOKE_SUPER_QUICK_RANGE
: {

113 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

114 
ÿÎ”
->
şazz
->
su³r
->
vbË
[
š¢
->
d®vikIn¢
.
vB
];

116 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

117 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

119 *
isInvoke
 = 
Œue
;

120 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

123 
OP_INVOKE_DIRECT
:

124 
OP_INVOKE_DIRECT_RANGE
: {

125 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

126 
ÿÎ”
->
şazz
->
pDvmDex
->
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
];

127 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

128 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

130 *
isInvoke
 = 
Œue
;

131 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

134 
OP_GOTO
:

135 
OP_GOTO_16
:

136 
OP_GOTO_32
:

137 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vA
;

140 
OP_IF_EQ
:

141 
OP_IF_NE
:

142 
OP_IF_LT
:

143 
OP_IF_GE
:

144 
OP_IF_GT
:

145 
OP_IF_LE
:

146 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vC
;

149 
OP_IF_EQZ
:

150 
OP_IF_NEZ
:

151 
OP_IF_LTZ
:

152 
OP_IF_GEZ
:

153 
OP_IF_GTZ
:

154 
OP_IF_LEZ
:

155 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vB
;

159  
çl£
;

161  
Œue
;

162 
	}
}

164 
šlše
 
boŞ
 
	$isGÙo
(
MIR
 *
š¢
)

166 
š¢
->
d®vikIn¢
.
İcode
) {

167 
OP_GOTO
:

168 
OP_GOTO_16
:

169 
OP_GOTO_32
:

170  
Œue
;

172  
çl£
;

174 
	}
}

179 
šlše
 
boŞ
 
	$isUncÚd™iÚ®B¿nch
(
MIR
 *
š¢
)

181 
š¢
->
d®vikIn¢
.
İcode
) {

182 
OP_RETURN_VOID
:

183 
OP_RETURN
:

184 
OP_RETURN_WIDE
:

185 
OP_RETURN_OBJECT
:

186  
Œue
;

188  
	`isGÙo
(
š¢
);

190 
	}
}

195 
	$com·»M‘hod
(cÚ¡ 
Comp”M‘hodSts
 *
m1
,

196 cÚ¡ 
Comp”M‘hodSts
 *
m2
)

198  (è
m1
->
m‘hod
 - (è
m2
->method;

199 
	}
}

211 
	$ª®yzeIÆšeT¬g‘
(
DecodedIn¡ruùiÚ
 *
d®vikIn¢
, 
©Œibu‹s
,

212 
off£t
)

214 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
d®vikIn¢
->
İcode
);

215 
d®vikOpcode
 = 
d®vikIn¢
->
İcode
;

217 ià(
æags
 & 
kIn¡rInvoke
) {

218 
©Œibu‹s
 &ğ~
METHOD_IS_LEAF
;

221 ià(!(
æags
 & 
kIn¡rCªR‘uº
)) {

222 ià(!(
dvmComp”D©aFlowA‰ribu‹s
[
d®vikOpcode
] &

223 
DF_IS_GETTER
)) {

224 
©Œibu‹s
 &ğ~
METHOD_IS_GETTER
;

226 ià(!(
dvmComp”D©aFlowA‰ribu‹s
[
d®vikOpcode
] &

227 
DF_IS_SETTER
)) {

228 
©Œibu‹s
 &ğ~
METHOD_IS_SETTER
;

237 ià(
æags
 & 
kIn¡rCªR‘uº
) {

238 ià(
d®vikOpcode
 =ğ
OP_RETURN_VOID
) {

239 
©Œibu‹s
 &ğ~
METHOD_IS_GETTER
;

242 
©Œibu‹s
 &ğ~
METHOD_IS_SETTER
;

246 ià(
æags
 & 
kIn¡rCªThrow
) {

247 
©Œibu‹s
 &ğ~
METHOD_IS_THROW_FREE
;

250 ià(
off£t
 =ğ0 && 
d®vikOpcode
 =ğ
OP_RETURN_VOID
) {

251 
©Œibu‹s
 |ğ
METHOD_IS_EMPTY
;

259 ià(
	`SINGLE_STEP_OP
(
d®vikOpcode
)) {

260 
©Œibu‹s
 &ğ~(
METHOD_IS_GETTER
 | 
METHOD_IS_SETTER
);

263  
©Œibu‹s
;

264 
	}
}

272 
Comp”M‘hodSts
 *
	$dvmComp”AÇlyzeM‘hodBody
(cÚ¡ 
M‘hod
 *
m‘hod
,

273 
boŞ
 
isC®Ëe
)

275 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

276 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
;

277 cÚ¡ 
u2
 *
codeEnd
 = 
dexCode
->
š¢s
 + dexCode->
š¢sSize
;

278 
š¢Size
 = 0;

279 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
m‘hod
->
Çme
);

281 
Comp”M‘hodSts
 
dummyM‘hodEÁry
;

282 
Comp”M‘hodSts
 *
»®M‘hodEÁry
;

285 
dummyM‘hodEÁry
.
m‘hod
 = method;

286 
»®M‘hodEÁry
 = (
Comp”M‘hodSts
 *)

287 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodStsTabË
,

288 
hashV®ue
,

289 &
dummyM‘hodEÁry
,

290 (
HashCom·»Func
è
com·»M‘hod
,

291 
çl£
);

294 ià(
»®M‘hodEÁry
 =ğ
NULL
) {

295 
»®M‘hodEÁry
 =

296 (
Comp”M‘hodSts
 *è
	`ÿÎoc
(1, (CompilerMethodStats));

297 
»®M‘hodEÁry
->
m‘hod
 = method;

299 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodStsTabË
, 
hashV®ue
,

300 
»®M‘hodEÁry
,

301 (
HashCom·»Func
è
com·»M‘hod
,

302 
Œue
);

306 ià((
isC®Ëe
 =ğ
Œue
è&& (
»®M‘hodEÁry
->
©Œibu‹s
 & 
METHOD_IS_CALLEE
))

307  
»®M‘hodEÁry
;

313 ià((
isC®Ëe
 =ğ
çl£
) &&

314 (
»®M‘hodEÁry
->
©Œibu‹s
 & 
METHOD_IS_HOT
))

315  
»®M‘hodEÁry
;

317 
©Œibu‹s
;

320 ià(
isC®Ëe
) {

322 
©Œibu‹s
 = 
METHOD_IS_LEAF
 | 
METHOD_IS_THROW_FREE
 | 
METHOD_IS_CALLEE
 |

323 
METHOD_IS_GETTER
 | 
METHOD_IS_SETTER
;

325 
©Œibu‹s
 = 
METHOD_IS_HOT
;

329 
codePŒ
 < 
codeEnd
) {

330 
DecodedIn¡ruùiÚ
 
d®vikIn¢
;

331 
width
 = 
	`·r£In¢
(
codePŒ
, &
d®vikIn¢
, 
çl£
);

334 ià(
width
 == 0)

337 ià(
isC®Ëe
) {

338 
©Œibu‹s
 = 
	`ª®yzeIÆšeT¬g‘
(&
d®vikIn¢
,‡‰ribu‹s, 
š¢Size
);

341 
š¢Size
 +ğ
width
;

342 
codePŒ
 +ğ
width
;

349 ià((
©Œibu‹s
 & (
METHOD_IS_GETTER
 | 
METHOD_IS_SETTER
)) &&

350 (
š¢Size
 != 3)) {

351 
©Œibu‹s
 &ğ~(
METHOD_IS_GETTER
 | 
METHOD_IS_SETTER
);

354 
»®M‘hodEÁry
->
d®vikSize
 = 
š¢Size
 * 2;

355 
»®M‘hodEÁry
->
©Œibu‹s
 |=‡ttributes;

359 ià(
©Œibu‹s
 & 
METHOD_IS_THROW_FREE
) {

360 
	`ALOGE
("%s% i šlšabË%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

361 (
©Œibu‹s
 & 
METHOD_IS_EMPTY
) ? "ƒmpty" : "");

364 ià(
©Œibu‹s
 & 
METHOD_IS_LEAF
) {

365 
	`ALOGE
("%s% i Ëaà%d%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

366 
š¢Size
, insnSize < 5 ? " (small)" : "");

369 ià(
©Œibu‹s
 & (
METHOD_IS_GETTER
 | 
METHOD_IS_SETTER
)) {

370 
	`ALOGE
("%s% i %s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

371 
©Œibu‹s
 & 
METHOD_IS_GETTER
 ? "getter": "setter");

373 ià(
©Œibu‹s
 ==

374 (
METHOD_IS_LEAF
 | 
METHOD_IS_THROW_FREE
 | 
METHOD_IS_CALLEE
)) {

375 
	`ALOGE
("%s% i šlšabË‚Ú s‘‹r/g‘‹r", 
m‘hod
->
şazz
->
desütÜ
,

376 
m‘hod
->
Çme
);

380  
»®M‘hodEÁry
;

381 
	}
}

387 
boŞ
 
	$f‹rM‘hodByC®lG¿ph
(
Th»ad
 *
th»ad
, cÚ¡ *
curM‘hodName
)

390 
SckSaveA»a
 *
s§PŒ
 = ((SckSaveA»¨*è
th»ad
->
š‹½Save
.
curF¿me
) - 1;

391 
s§PŒ
 !ğ((
SckSaveA»a
 *è
NULL
) - 1) {

392 cÚ¡ 
M‘hod
 *
m‘hod
 = 
s§PŒ
->method;

393 ià(
m‘hod
) {

394 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
m‘hod
->
Çme
);

395 
boŞ
 
found
 =

396 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

397 (*è
m‘hod
->
Çme
,

398 (
HashCom·»Func
è
¡rcmp
, 
çl£
) !=

399 
NULL
;

400 ià(
found
) {

401 
	`ALOGD
("Method %s (--> %s) found onhe JIT %s†ist",

402 
m‘hod
->
Çme
, 
curM‘hodName
,

403 
gDvmJ™
.
šşudeS–eùedM‘hod
 ? "white" : "black");

404  
Œue
;

408 
s§PŒ
 = ((
SckSaveA»a
 *ès§PŒ->
´evF¿me
) - 1;

410  
çl£
;

411 
	}
}

421 
boŞ
 
	$dvmComp”CªInşudeThisIn¡ruùiÚ
(cÚ¡ 
M‘hod
 *
m‘hod
,

422 cÚ¡ 
DecodedIn¡ruùiÚ
 *
š¢
)

424 
š¢
->
İcode
) {

425 
OP_NEW_INSTANCE
:

426 
OP_CHECK_CAST
: {

427 
CÏssObjeù
 *
şassPŒ
 = (ClassObject *)(*)

428 (
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
š¢
->
vB
]);

431 ià(
şassPŒ
 =ğ
NULL
) {

432  
çl£
;

434  
Œue
;

436 
OP_SGET
:

437 
OP_SGET_WIDE
:

438 
OP_SGET_OBJECT
:

439 
OP_SGET_BOOLEAN
:

440 
OP_SGET_BYTE
:

441 
OP_SGET_CHAR
:

442 
OP_SGET_SHORT
:

443 
OP_SPUT
:

444 
OP_SPUT_WIDE
:

445 
OP_SPUT_OBJECT
:

446 
OP_SPUT_BOOLEAN
:

447 
OP_SPUT_BYTE
:

448 
OP_SPUT_CHAR
:

449 
OP_SPUT_SHORT
: {

450 *
f›ldPŒ
 = (*)

451 (
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
š¢
->
vB
]);

453 ià(
f›ldPŒ
 =ğ
NULL
) {

454  
çl£
;

456  
Œue
;

458 
OP_INVOKE_SUPER
:

459 
OP_INVOKE_SUPER_RANGE
: {

460 
mIndex
 = 
m‘hod
->
şazz
->
pDvmDex
->

461 
pResM‘hods
[
š¢
->
vB
]->
m‘hodIndex
;

462 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
m‘hod
->
şazz
->
su³r
->
vbË
[
mIndex
];

463 ià(
ÿÎ“M‘hod
 =ğ
NULL
) {

464  
çl£
;

466  
Œue
;

468 
OP_INVOKE_SUPER_QUICK
:

469 
OP_INVOKE_SUPER_QUICK_RANGE
: {

470 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
m‘hod
->
şazz
->
su³r
->
vbË
[
š¢
->
vB
];

471 ià(
ÿÎ“M‘hod
 =ğ
NULL
) {

472  
çl£
;

474  
Œue
;

476 
OP_INVOKE_STATIC
:

477 
OP_INVOKE_STATIC_RANGE
:

478 
OP_INVOKE_DIRECT
:

479 
OP_INVOKE_DIRECT_RANGE
: {

480 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

481 
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
š¢
->
vB
];

482 ià(
ÿÎ“M‘hod
 =ğ
NULL
) {

483  
çl£
;

485  
Œue
;

487 
OP_CONST_CLASS
: {

488 *
şassPŒ
 = (*)

489 (
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
š¢
->
vB
]);

491 ià(
şassPŒ
 =ğ
NULL
) {

492  
çl£
;

494  
Œue
;

496 
OP_CONST_STRING_JUMBO
:

497 
OP_CONST_STRING
: {

498 *
¡rPŒ
 = (*)

499 (
m‘hod
->
şazz
->
pDvmDex
->
pResSŒšgs
[
š¢
->
vB
]);

501 ià(
¡rPŒ
 =ğ
NULL
) {

502  
çl£
;

504  
Œue
;

507  
Œue
;

509 
	}
}

512 
BasicBlock
 *
	$¥l™Block
(
Comp©iÚUn™
 *
cUn™
,

513 
codeOff£t
,

514 
BasicBlock
 *
ÜigBlock
,

515 
BasicBlock
 **
immedP»dBlockP
)

517 
MIR
 *
š¢
 = 
ÜigBlock
->
fœ¡MIRIn¢
;

518 
š¢
) {

519 ià(
š¢
->
off£t
 =ğ
codeOff£t
) ;

520 
š¢
 = in¢->
Ãxt
;

522 ià(
š¢
 =ğ
NULL
) {

523 
	`ALOGE
("Break split failed");

524 
	`dvmAbÜt
();

526 
BasicBlock
 *
bÙtomBlock
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
,

527 
cUn™
->
numBlocks
++);

528 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
bÙtomBlock
);

530 
bÙtomBlock
->
¡¬tOff£t
 = 
codeOff£t
;

531 
bÙtomBlock
->
fœ¡MIRIn¢
 = 
š¢
;

532 
bÙtomBlock
->
Ï¡MIRIn¢
 = 
ÜigBlock
->lastMIRInsn;

535 
bÙtomBlock
->
k’
 = 
ÜigBlock
->taken;

536 ià(
bÙtomBlock
->
k’
) {

537 
ÜigBlock
->
k’
 = 
NULL
;

538 
	`dvmComp”CË¬B™
(
bÙtomBlock
->
k’
->
´edeûssÜs
, 
ÜigBlock
->
id
);

539 
	`dvmComp”S‘B™
(
bÙtomBlock
->
k’
->
´edeûssÜs
, bÙtomBlock->
id
);

543 
bÙtomBlock
->
ÃedF®lThroughB¿nch
 = 
ÜigBlock
->needFallThroughBranch;

544 
bÙtomBlock
->
çÎThrough
 = 
ÜigBlock
->fallThrough;

545 
ÜigBlock
->
çÎThrough
 = 
bÙtomBlock
;

546 
ÜigBlock
->
ÃedF®lThroughB¿nch
 = 
Œue
;

547 
	`dvmComp”S‘B™
(
bÙtomBlock
->
´edeûssÜs
, 
ÜigBlock
->
id
);

548 ià(
bÙtomBlock
->
çÎThrough
) {

549 
	`dvmComp”CË¬B™
(
bÙtomBlock
->
çÎThrough
->
´edeûssÜs
,

550 
ÜigBlock
->
id
);

551 
	`dvmComp”S‘B™
(
bÙtomBlock
->
çÎThrough
->
´edeûssÜs
,

552 
bÙtomBlock
->
id
);

556 ià(
ÜigBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

557 
bÙtomBlock
->
sucûssÜBlockLi¡
 = 
ÜigBlock
->successorBlockList;

558 
ÜigBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 = 
kNÙU£d
;

559 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

561 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
bÙtomBlock
->
sucûssÜBlockLi¡
.
blocks
,

562 &
™”©Ü
);

563 
Œue
) {

564 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

565 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

566 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

567 
BasicBlock
 *
bb
 = 
sucûssÜBlockInfo
->
block
;

568 
	`dvmComp”CË¬B™
(
bb
->
´edeûssÜs
, 
ÜigBlock
->
id
);

569 
	`dvmComp”S‘B™
(
bb
->
´edeûssÜs
, 
bÙtomBlock
->
id
);

573 
ÜigBlock
->
Ï¡MIRIn¢
 = 
š¢
->
´ev
;

575 
š¢
->
´ev
->
Ãxt
 = 
NULL
;

576 
š¢
->
´ev
 = 
NULL
;

582 ià(
immedP»dBlockP
) {

583 
	`as£¹
(*
immedP»dBlockP
 =ğ
ÜigBlock
);

584 *
immedP»dBlockP
 = 
bÙtomBlock
;

586  
bÙtomBlock
;

587 
	}
}

596 
BasicBlock
 *
	$fšdBlock
(
Comp©iÚUn™
 *
cUn™
,

597 
codeOff£t
,

598 
boŞ
 
¥l™
, boŞ 
ü—‹
,

599 
BasicBlock
 **
immedP»dBlockP
)

601 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

602 
BasicBlock
 *
bb
;

603 
i
;

605 
i
 = 0; i < 
blockLi¡
->
numU£d
; i++) {

606 
bb
 = (
BasicBlock
 *è
blockLi¡
->
–emLi¡
[
i
];

607 ià(
bb
->
blockTy³
 !ğ
kD®vikBy‹Code
) ;

608 ià(
bb
->
¡¬tOff£t
 =ğ
codeOff£t
)  bb;

610 ià((
¥l™
 =ğ
Œue
è&& (
codeOff£t
 > 
bb
->
¡¬tOff£t
) &&

611 (
bb
->
Ï¡MIRIn¢
 !ğ
NULL
) &&

612 (
codeOff£t
 <ğ
bb
->
Ï¡MIRIn¢
->
off£t
)) {

613 
BasicBlock
 *
ÃwBB
 = 
	`¥l™Block
(
cUn™
, 
codeOff£t
, 
bb
,

614 
bb
 =ğ*
immedP»dBlockP
 ?

615 
immedP»dBlockP
 : 
NULL
);

616  
ÃwBB
;

619 ià(
ü—‹
) {

620 
bb
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
, 
cUn™
->
numBlocks
++);

621 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
bb
);

622 
bb
->
¡¬tOff£t
 = 
codeOff£t
;

623  
bb
;

625  
NULL
;

626 
	}
}

629 
	$dvmDumpCFG
(
Comp©iÚUn™
 *
cUn™
, cÚ¡ *
dœP»fix
)

631 cÚ¡ 
M‘hod
 *
m‘hod
 = 
cUn™
->method;

632 
FILE
 *
fe
;

633 *
sigÇtu»
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

634 
¡¬tOff£t
[80];

635 
	`¥rštf
(
¡¬tOff£t
, "_%x", 
cUn™
->
’ŒyBlock
->
çÎThrough
->startOffset);

636 *
feName
 = (*è
	`dvmComp”New
(

637 
	`¡¾’
(
dœP»fix
) +

638 
	`¡¾’
(
m‘hod
->
şazz
->
desütÜ
) +

639 
	`¡¾’
(
m‘hod
->
Çme
) +

640 
	`¡¾’
(
sigÇtu»
) +

641 
	`¡¾’
(
¡¬tOff£t
) +

642 
	`¡¾’
(".dÙ"è+ 1, 
Œue
);

643 
	`¥rštf
(
feName
, "%s%s%s%s%s.dÙ", 
dœP»fix
,

644 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
sigÇtu»
, 
¡¬tOff£t
);

645 
	`ä“
(
sigÇtu»
);

651 
i
;

652 
i
 = 
	`¡¾’
(
dœP»fix
); 
feName
[i]; i++) {

653 ià(
feName
[
i
] == '/') {

654 
feName
[
i
] = '_';

655 } ià(
feName
[
i
] == ';') {

656 
feName
[
i
] = '#';

657 } ià(
feName
[
i
] == '$') {

658 
feName
[
i
] = '+';

659 } ià(
feName
[
i
] == '(' || fileName[i] == ')') {

660 
feName
[
i
] = '@';

661 } ià(
feName
[
i
] == '<' || fileName[i] == '>') {

662 
feName
[
i
] = '=';

665 
fe
 = 
	`fİ’
(
feName
, "w");

666 ià(
fe
 =ğ
NULL
) {

669 
	`årštf
(
fe
, "digraph G {\n");

671 
	`årštf
(
fe
, "„ankdir=TB\n");

673 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

674 
idx
;

675 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

677 
idx
 = 0; idx < 
numR—chabËBlocks
; idx++) {

678 
blockIdx
 = 
cUn™
->
dfsOrd”
.
–emLi¡
[
idx
];

679 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
,

680 
blockIdx
);

681 ià(
bb
 =ğ
NULL
) ;

682 ià(
bb
->
blockTy³
 =ğ
kEÁryBlock
) {

683 
	`årštf
(
fe
, "ƒntry [shape=Mdiamond];\n");

684 } ià(
bb
->
blockTy³
 =ğ
kEx™Block
) {

685 
	`årštf
(
fe
, "ƒxit [shape=Mdiamond];\n");

686 } ià(
bb
->
blockTy³
 =ğ
kD®vikBy‹Code
) {

687 
	`årštf
(
fe
, " block%04x [shape=record,label = \"{ \\\n",

688 
bb
->
¡¬tOff£t
);

689 cÚ¡ 
MIR
 *
mœ
;

690 
	`årštf
(
fe
, " {block id %d\\l}%s\\\n", 
bb
->
id
,

691 
bb
->
fœ¡MIRIn¢
 ? " | " : " ");

692 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

693 
	`årštf
(
fe
, " {%04x %s\\l}%s\\\n", 
mœ
->
off£t
,

694 
mœ
->
s§R•
 ?

695 
	`dvmComp”FuÎDi§s£mbËr
(
cUn™
, 
mœ
) :

696 
	`dexG‘OpcodeName
(
mœ
->
d®vikIn¢
.
İcode
),

697 
mœ
->
Ãxt
 ? " | " : " ");

699 
	`årštf
(
fe
, " }\"];\n\n");

700 } ià(
bb
->
blockTy³
 =ğ
kExû±iÚHªdlšg
) {

701 
blockName
[
BLOCK_NAME_LEN
];

703 
	`dvmG‘BlockName
(
bb
, 
blockName
);

704 
	`årštf
(
fe
, " % [sh­e=švhou£];\n", 
blockName
);

707 
blockName1
[
BLOCK_NAME_LEN
], 
blockName2
[BLOCK_NAME_LEN];

709 ià(
bb
->
k’
) {

710 
	`dvmG‘BlockName
(
bb
, 
blockName1
);

711 
	`dvmG‘BlockName
(
bb
->
k’
, 
blockName2
);

712 
	`årštf
(
fe
, " %s:s -> %s:n [style=dotted]\n",

713 
blockName1
, 
blockName2
);

715 ià(
bb
->
çÎThrough
) {

716 
	`dvmG‘BlockName
(
bb
, 
blockName1
);

717 
	`dvmG‘BlockName
(
bb
->
çÎThrough
, 
blockName2
);

718 
	`årštf
(
fe
, " %s: -> %s:n\n", 
blockName1
, 
blockName2
);

721 ià(
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

722 
	`årštf
(
fe
, " succ%04x [shape=%s,label = \"{ \\\n",

723 
bb
->
¡¬tOff£t
,

724 (
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 =ğ
kC©ch
) ?

726 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

727 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
bb
->
sucûssÜBlockLi¡
.
blocks
,

728 &
™”©Ü
);

729 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

730 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

732 
succId
 = 0;

733 
Œue
) {

734 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

736 
BasicBlock
 *
de¡Block
 = 
sucûssÜBlockInfo
->
block
;

737 
SucûssÜBlockInfo
 *
ÃxtSucûssÜBlockInfo
 =

738 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

740 
	`årštf
(
fe
, " {<f%d> %04x: %04x\\l}%s\\\n",

741 
succId
++,

742 
sucûssÜBlockInfo
->
key
,

743 
de¡Block
->
¡¬tOff£t
,

744 (
ÃxtSucûssÜBlockInfo
 !ğ
NULL
) ? " | " : " ");

746 
sucûssÜBlockInfo
 = 
ÃxtSucûssÜBlockInfo
;

748 
	`årštf
(
fe
, " }\"];\n\n");

750 
	`dvmG‘BlockName
(
bb
, 
blockName1
);

751 
	`årštf
(
fe
, " %s:s -> succ%04x:n [style=dashed]\n",

752 
blockName1
, 
bb
->
¡¬tOff£t
);

754 ià(
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 =ğ
kPackedSw™ch
 ||

755 
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 =ğ
kS·r£Sw™ch
) {

757 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
bb
->
sucûssÜBlockLi¡
.
blocks
,

758 &
™”©Ü
);

760 
succId
 = 0;

761 
Œue
) {

762 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

763 (
SucûssÜBlockInfo
 *)

764 
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

765 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

767 
BasicBlock
 *
de¡Block
 = 
sucûssÜBlockInfo
->
block
;

769 
	`dvmG‘BlockName
(
de¡Block
, 
blockName2
);

770 
	`årštf
(
fe
, " succ%04x:f%d:e -> %s:n\n",

771 
bb
->
¡¬tOff£t
, 
succId
++,

772 
blockName2
);

776 
	`årštf
(
fe
, "\n");

782 
	`dvmG‘BlockName
(
bb
, 
blockName1
);

783 
	`årštf
(
fe
, " cfg%s [label=\"%s\", shape=none];\n",

784 
blockName1
, blockName1);

785 ià(
bb
->
iDom
) {

786 
	`dvmG‘BlockName
(
bb
->
iDom
, 
blockName2
);

787 
	`årštf
(
fe
, " cfg%s:s -> cfg%s:n\n\n",

788 
blockName2
, 
blockName1
);

792 
	`årštf
(
fe
, "}\n");

793 
	`fşo£
(
fe
);

794 
	}
}

797 
boŞ
 
	$v”ifyP»dInfo
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

799 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

801 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
´edeûssÜs
, &
bvI‹¿tÜ
);

802 
Œue
) {

803 
blockIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

804 ià(
blockIdx
 == -1) ;

805 
BasicBlock
 *
´edBB
 = (BasicBlock *)

806 
	`dvmGrowabËLi¡G‘EËm’t
(&
cUn™
->
blockLi¡
, 
blockIdx
);

807 
boŞ
 
found
 = 
çl£
;

808 ià(
´edBB
->
k’
 =ğ
bb
) {

809 
found
 = 
Œue
;

810 } ià(
´edBB
->
çÎThrough
 =ğ
bb
) {

811 
found
 = 
Œue
;

812 } ià(
´edBB
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

813 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

814 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
´edBB
->
sucûssÜBlockLi¡
.
blocks
,

815 &
™”©Ü
);

816 
Œue
) {

817 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

818 (
SucûssÜBlockInfo
 *)

819 
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

820 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

821 
BasicBlock
 *
succBB
 = 
sucûssÜBlockInfo
->
block
;

822 ià(
succBB
 =ğ
bb
) {

823 
found
 = 
Œue
;

828 ià(
found
 =ğ
çl£
) {

829 
blockName1
[
BLOCK_NAME_LEN
], 
blockName2
[BLOCK_NAME_LEN];

830 
	`dvmG‘BlockName
(
bb
, 
blockName1
);

831 
	`dvmG‘BlockName
(
´edBB
, 
blockName2
);

832 
	`dvmDumpCFG
(
cUn™
, "/sdcard/cfg/");

833 
	`ALOGE
("Successor %s‚ot found from %s",

834 
blockName1
, 
blockName2
);

835 
	`dvmAbÜt
();

838  
Œue
;

839 
	}
}

842 
	$´oûssTryC©chBlocks
(
Comp©iÚUn™
 *
cUn™
)

844 cÚ¡ 
M‘hod
 *
m‘h
 = 
cUn™
->
m‘hod
;

845 cÚ¡ 
DexCode
 *
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

846 
Œ›sSize
 = 
pCode
->triesSize;

847 
i
;

848 
off£t
;

850 ià(
Œ›sSize
 == 0) {

854 cÚ¡ 
DexTry
 *
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

855 
B™VeùÜ
 *
ŒyBlockAddr
 = 
cUn™
->tryBlockAddr;

858 
i
 = 0; i < 
Œ›sSize
; i++) {

859 cÚ¡ 
DexTry
* 
pTry
 = &
pTr›s
[
i
];

861 
¡¬tOff£t
 = 
pTry
->
¡¬tAddr
;

862 
’dOff£t
 = 
¡¬tOff£t
 + 
pTry
->
š¢CouÁ
;

864 
off£t
 = 
¡¬tOff£t
; off£ˆ< 
’dOff£t
; offset++) {

865 
	`dvmComp”S‘B™
(
ŒyBlockAddr
, 
off£t
);

870 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

871 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

873 
i
 = 0; i < 
hªdËrsSize
; i++) {

874 
DexC©chI‹¿tÜ
 
™”©Ü
;

875 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

878 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

880 ià(
hªdËr
 =ğ
NULL
) {

888 
	`fšdBlock
(
cUn™
, 
hªdËr
->
add»ss
,

890 
çl£
,

892 
Œue
,

894 
NULL
);

897 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

899 
	}
}

902 
	$´oûssCªB¿nch
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
curBlock
,

903 
MIR
 *
š¢
, 
curOff£t
, 
width
, 
æags
,

904 cÚ¡ 
u2
* 
codePŒ
, cÚ¡ u2* 
codeEnd
)

906 
rg‘
 = 
curOff£t
;

907 
š¢
->
d®vikIn¢
.
İcode
) {

908 
OP_GOTO
:

909 
OP_GOTO_16
:

910 
OP_GOTO_32
:

911 
rg‘
 +ğ(è
š¢
->
d®vikIn¢
.
vA
;

913 
OP_IF_EQ
:

914 
OP_IF_NE
:

915 
OP_IF_LT
:

916 
OP_IF_GE
:

917 
OP_IF_GT
:

918 
OP_IF_LE
:

919 
rg‘
 +ğ(è
š¢
->
d®vikIn¢
.
vC
;

921 
OP_IF_EQZ
:

922 
OP_IF_NEZ
:

923 
OP_IF_LTZ
:

924 
OP_IF_GEZ
:

925 
OP_IF_GTZ
:

926 
OP_IF_LEZ
:

927 
rg‘
 +ğ(è
š¢
->
d®vikIn¢
.
vB
;

930 
	`ALOGE
("Unexpected opcode(%d) with kInstrCanBranch set",

931 
š¢
->
d®vikIn¢
.
İcode
);

932 
	`dvmAbÜt
();

934 
BasicBlock
 *
k’Block
 = 
	`fšdBlock
(
cUn™
, 
rg‘
,

936 
Œue
,

938 
Œue
,

940 &
curBlock
);

941 
curBlock
->
k’
 = 
k’Block
;

942 
	`dvmComp”S‘B™
(
k’Block
->
´edeûssÜs
, 
curBlock
->
id
);

945 ià(
æags
 & 
kIn¡rCªCÚtšue
) {

946 
BasicBlock
 *
çÎthroughBlock
 = 
	`fšdBlock
(
cUn™
,

947 
curOff£t
 + 
width
,

960 
Œue
,

962 
Œue
,

964 &
curBlock
);

965 
curBlock
->
çÎThrough
 = 
çÎthroughBlock
;

966 
	`dvmComp”S‘B™
(
çÎthroughBlock
->
´edeûssÜs
, 
curBlock
->
id
);

967 } ià(
codePŒ
 < 
codeEnd
) {

969 ià(
	`cÚ‹ÁIsIn¢
(
codePŒ
)) {

970 
	`fšdBlock
(
cUn™
, 
curOff£t
 + 
width
,

972 
çl£
,

974 
Œue
,

976 
NULL
);

979 
	}
}

982 
	$´oûssCªSw™ch
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
curBlock
,

983 
MIR
 *
š¢
, 
curOff£t
, 
width
, 
æags
)

985 
u2
 *
sw™chD©a
ğ(u2 *è(
cUn™
->
m‘hod
->
š¢s
 + 
curOff£t
 +

986 
š¢
->
d®vikIn¢
.
vB
);

987 
size
;

988 *
keyTabË
;

989 *
rg‘TabË
;

990 
i
;

991 
fœ¡Key
;

1002 ià(
š¢
->
d®vikIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
) {

1003 
	`as£¹
(
sw™chD©a
[0] =ğ
kPackedSw™chSigÇtu»
);

1004 
size
 = 
sw™chD©a
[1];

1005 
fœ¡Key
 = 
sw™chD©a
[2] | (switchData[3] << 16);

1006 
rg‘TabË
 = (*è&
sw™chD©a
[4];

1007 
keyTabË
 = 
NULL
;

1018 
	`as£¹
(
sw™chD©a
[0] =ğ
kS·r£Sw™chSigÇtu»
);

1019 
size
 = 
sw™chD©a
[1];

1020 
keyTabË
 = (*è&
sw™chD©a
[2];

1021 
rg‘TabË
 = (*è&
sw™chD©a
[2 + 
size
*2];

1022 
fœ¡Key
 = 0;

1025 ià(
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

1026 
	`ALOGE
("Successor block†ist‡lready in use: %d",

1027 
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
);

1028 
	`dvmAbÜt
();

1030 
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 =

1031 (
š¢
->
d®vikIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
) ?

1032 
kPackedSw™ch
 : 
kS·r£Sw™ch
;

1033 
	`dvmIn™GrowabËLi¡
(&
curBlock
->
sucûssÜBlockLi¡
.
blocks
, 
size
);

1035 
i
 = 0; i < 
size
; i++) {

1036 
BasicBlock
 *
ÿ£Block
 = 
	`fšdBlock
(
cUn™
, 
curOff£t
 + 
rg‘TabË
[
i
],

1038 
Œue
,

1040 
Œue
,

1042 &
curBlock
);

1043 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

1044 (
SucûssÜBlockInfo
 *è
	`dvmComp”New
((SuccessorBlockInfo),

1045 
çl£
);

1046 
sucûssÜBlockInfo
->
block
 = 
ÿ£Block
;

1047 
sucûssÜBlockInfo
->
key
 = (
š¢
->
d®vikIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
)?

1048 
fœ¡Key
 + 
i
 : 
keyTabË
[i];

1049 
	`dvmIn£¹GrowabËLi¡
(&
curBlock
->
sucûssÜBlockLi¡
.
blocks
,

1050 (
šŒ_t
è
sucûssÜBlockInfo
);

1051 
	`dvmComp”S‘B™
(
ÿ£Block
->
´edeûssÜs
, 
curBlock
->
id
);

1055 
BasicBlock
 *
çÎthroughBlock
 = 
	`fšdBlock
(
cUn™
,

1056 
curOff£t
 + 
width
,

1058 
çl£
,

1060 
Œue
,

1062 
NULL
);

1063 
curBlock
->
çÎThrough
 = 
çÎthroughBlock
;

1064 
	`dvmComp”S‘B™
(
çÎthroughBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1065 
	}
}

1068 
	$´oûssCªThrow
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
curBlock
,

1069 
MIR
 *
š¢
, 
curOff£t
, 
width
, 
æags
,

1070 
B™VeùÜ
 *
ŒyBlockAddr
, cÚ¡ 
u2
 *
codePŒ
,

1071 cÚ¡ 
u2
* 
codeEnd
)

1073 cÚ¡ 
M‘hod
 *
m‘hod
 = 
cUn™
->method;

1074 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

1077 ià(
	`dvmIsB™S‘
(
ŒyBlockAddr
, 
curOff£t
)) {

1078 
DexC©chI‹¿tÜ
 
™”©Ü
;

1080 ià(!
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
dexCode
, 
curOff£t
)) {

1081 
	`ALOGE
("Catch block‚ot found in dexfile for insn %x in %s",

1082 
curOff£t
, 
m‘hod
->
Çme
);

1083 
	`dvmAbÜt
();

1086 ià(
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

1087 
	`ALOGE
("Successor block†ist‡lready in use: %d",

1088 
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
);

1089 
	`dvmAbÜt
();

1091 
curBlock
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 = 
kC©ch
;

1092 
	`dvmIn™GrowabËLi¡
(&
curBlock
->
sucûssÜBlockLi¡
.
blocks
, 2);

1095 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

1097 ià(
hªdËr
 =ğ
NULL
) {

1101 
BasicBlock
 *
ÿtchBlock
 = 
	`fšdBlock
(
cUn™
, 
hªdËr
->
add»ss
,

1103 
çl£
,

1105 
çl£
,

1107 
NULL
);

1109 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

1110 (
SucûssÜBlockInfo
 *è
	`dvmComp”New
((SuccessorBlockInfo),

1111 
çl£
);

1112 
sucûssÜBlockInfo
->
block
 = 
ÿtchBlock
;

1113 
sucûssÜBlockInfo
->
key
 = 
hªdËr
->
ty³Idx
;

1114 
	`dvmIn£¹GrowabËLi¡
(&
curBlock
->
sucûssÜBlockLi¡
.
blocks
,

1115 (
šŒ_t
è
sucûssÜBlockInfo
);

1116 
	`dvmComp”S‘B™
(
ÿtchBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1119 
BasicBlock
 *
ehBlock
 = 
	`dvmComp”NewBB
(
kExû±iÚHªdlšg
,

1120 
cUn™
->
numBlocks
++);

1121 
curBlock
->
k’
 = 
ehBlock
;

1122 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
ehBlock
);

1123 
ehBlock
->
¡¬tOff£t
 = 
curOff£t
;

1124 
	`dvmComp”S‘B™
(
ehBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1133 ià(
codePŒ
 < 
codeEnd
) {

1135 ià(
	`cÚ‹ÁIsIn¢
(
codePŒ
)) {

1136 
BasicBlock
 *
çÎthroughBlock
 = 
	`fšdBlock
(
cUn™
,

1137 
curOff£t
 + 
width
,

1139 
çl£
,

1141 
Œue
,

1143 
NULL
);

1148 ià(
š¢
->
d®vikIn¢
.
İcode
 !ğ
OP_THROW_VERIFICATION_ERROR
 &&

1149 
š¢
->
d®vikIn¢
.
İcode
 !ğ
OP_THROW
) {

1150 
curBlock
->
çÎThrough
 = 
çÎthroughBlock
;

1151 
	`dvmComp”S‘B™
(
çÎthroughBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1155 
	}
}

1164 
boŞ
 
	$dvmCompeM‘hod
(cÚ¡ 
M‘hod
 *
m‘hod
, 
J™T¿n¦©iÚInfo
 *
šfo
)

1166 
Comp©iÚUn™
 
cUn™
;

1167 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

1168 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
;

1169 cÚ¡ 
u2
 *
codeEnd
 = 
dexCode
->
š¢s
 + dexCode->
š¢sSize
;

1170 
numBlocks
 = 0;

1171 
curOff£t
 = 0;

1174 ià(
	`dvmJ™G‘M‘hodAddr
(
codePŒ
)) {

1175 
šfo
->
codeAdd»ss
 = 
NULL
;

1176  
çl£
;

1179 
	`mem£t
(&
cUn™
, 0, (cUnit));

1180 
cUn™
.
m‘hod
 = method;

1182 
cUn™
.
j™Mode
 = 
kJ™M‘hod
;

1185 
	`dvmIn™GrowabËLi¡
(&
cUn™
.
blockLi¡
, 4);

1192 
	`dvmIn™GrowabËLi¡
(&
cUn™
.
pcRecÚ¡ruùiÚLi¡
, 8);

1195 
B™VeùÜ
 *
ŒyBlockAddr
 = 
	`dvmComp”AÎocB™VeùÜ
(
dexCode
->
š¢sSize
,

1196 
Œue
 );

1197 
cUn™
.
ŒyBlockAddr
 =ryBlockAddr;

1200 
BasicBlock
 *
’ŒyBlock
 = 
	`dvmComp”NewBB
(
kEÁryBlock
, 
numBlocks
++);

1201 
BasicBlock
 *
ex™Block
 = 
	`dvmComp”NewBB
(
kEx™Block
, 
numBlocks
++);

1203 
cUn™
.
’ŒyBlock
 =ƒntryBlock;

1204 
cUn™
.
ex™Block
 =ƒxitBlock;

1206 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
.
blockLi¡
, (
šŒ_t
è
’ŒyBlock
);

1207 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
.
blockLi¡
, (
šŒ_t
è
ex™Block
);

1210 
BasicBlock
 *
curBlock
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
, 
numBlocks
++);

1211 
curBlock
->
¡¬tOff£t
 = 0;

1212 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
.
blockLi¡
, (
šŒ_t
è
curBlock
);

1213 
’ŒyBlock
->
çÎThrough
 = 
curBlock
;

1214 
	`dvmComp”S‘B™
(
curBlock
->
´edeûssÜs
, 
’ŒyBlock
->
id
);

1220 
cUn™
.
numBlocks
 =‚umBlocks;

1223 
	`´oûssTryC©chBlocks
(&
cUn™
);

1226 
codePŒ
 < 
codeEnd
) {

1227 
MIR
 *
š¢
 = (MIR *è
	`dvmComp”New
((MIR), 
Œue
);

1228 
š¢
->
off£t
 = 
curOff£t
;

1229 
width
 = 
	`·r£In¢
(
codePŒ
, &
š¢
->
d®vikIn¢
, 
çl£
);

1230 
š¢
->
width
 = width;

1233 ià(
width
 == 0)

1236 
	`dvmComp”Aµ’dMIR
(
curBlock
, 
š¢
);

1238 
codePŒ
 +ğ
width
;

1239 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
š¢
->
d®vikIn¢
.
İcode
);

1241 ià(
æags
 & 
kIn¡rCªB¿nch
) {

1242 
	`´oûssCªB¿nch
(&
cUn™
, 
curBlock
, 
š¢
, 
curOff£t
, 
width
, 
æags
,

1243 
codePŒ
, 
codeEnd
);

1244 } ià(
æags
 & 
kIn¡rCªR‘uº
) {

1245 
curBlock
->
çÎThrough
 = 
ex™Block
;

1246 
	`dvmComp”S‘B™
(
ex™Block
->
´edeûssÜs
, 
curBlock
->
id
);

1251 ià(
codePŒ
 < 
codeEnd
) {

1256 ià(
	`cÚ‹ÁIsIn¢
(
codePŒ
)) {

1257 
	`fšdBlock
(&
cUn™
, 
curOff£t
 + 
width
,

1259 
çl£
,

1261 
Œue
,

1263 
NULL
);

1266 } ià(
æags
 & 
kIn¡rCªThrow
) {

1267 
	`´oûssCªThrow
(&
cUn™
, 
curBlock
, 
š¢
, 
curOff£t
, 
width
, 
æags
,

1268 
ŒyBlockAddr
, 
codePŒ
, 
codeEnd
);

1269 } ià(
æags
 & 
kIn¡rCªSw™ch
) {

1270 
	`´oûssCªSw™ch
(&
cUn™
, 
curBlock
, 
š¢
, 
curOff£t
, 
width
, 
æags
);

1272 
curOff£t
 +ğ
width
;

1273 
BasicBlock
 *
ÃxtBlock
 = 
	`fšdBlock
(&
cUn™
, 
curOff£t
,

1275 
çl£
,

1277 
çl£
,

1279 
NULL
);

1280 ià(
ÃxtBlock
) {

1287 
	`as£¹
(
curBlock
->
çÎThrough
 =ğ
NULL
 ||

1288 
curBlock
->
çÎThrough
 =ğ
ÃxtBlock
 ||

1289 
curBlock
->
çÎThrough
 =ğ
ex™Block
);

1291 ià((
curBlock
->
çÎThrough
 =ğ
NULL
) &&

1292 (
æags
 & 
kIn¡rCªCÚtšue
)) {

1293 
curBlock
->
çÎThrough
 = 
ÃxtBlock
;

1294 
	`dvmComp”S‘B™
(
ÃxtBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1296 
curBlock
 = 
ÃxtBlock
;

1300 ià(
cUn™
.
´štMe
) {

1301 
	`dvmComp”DumpComp©iÚUn™
(&
cUn™
);

1305 
cUn™
.
numD®vikRegi¡”s
 = cUn™.
m‘hod
->
»gi¡”sSize
;

1309 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(&
cUn™
, 
v”ifyP»dInfo
,

1310 
kAÎNodes
,

1311 
çl£
 );

1315 
	`dvmComp”M‘hodSSAT¿nsfÜm©iÚ
(&
cUn™
);

1317 
	`dvmComp”In™ŸlizeRegAÎoc
(&
cUn™
);

1320 
	`dvmComp”LoÿlRegAÎoc
(&
cUn™
);

1323 
	`dvmComp”M‘hodMIR2LIR
(&
cUn™
);

1329 ià(
cUn™
.
fœ¡LIRIn¢
) {

1332 
	`dvmComp”As£mbËLIR
(&
cUn™
, 
šfo
);

1333 
cUn™
.
as£mbËrR‘r›s
++;

1334 ià(
cUn™
.
´štMe
 && cUn™.
as£mbËrStus
 !ğ
kSucûss
)

1335 
	`ALOGD
("As£mbË¸abÜˆ#%d oÀ%d",
cUn™
.
as£mbËrR‘r›s
,

1336 
cUn™
.
as£mbËrStus
);

1337 } 
cUn™
.
as£mbËrStus
 =ğ
kR‘ryAÎ
);

1339 ià(
cUn™
.
´štMe
) {

1340 
	`dvmComp”Codeg’Dump
(&
cUn™
);

1343 ià(
šfo
->
codeAdd»ss
) {

1344 
	`dvmJ™S‘CodeAddr
(
dexCode
->
š¢s
, 
šfo
->
codeAdd»ss
,

1345 
šfo
->
š¡ruùiÚS‘
, 
Œue
, 0);

1349 
šfo
->
codeAdd»ss
 = 
NULL
;

1353  
çl£
;

1354 
	}
}

1357 
boŞ
 
	$exhau¡T¿û
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
curBlock
)

1359 
curOff£t
 = 
curBlock
->
¡¬tOff£t
;

1360 cÚ¡ 
u2
 *
codePŒ
 = 
cUn™
->
m‘hod
->
š¢s
 + 
curOff£t
;

1362 ià(
curBlock
->
vis™ed
 =ğ
Œue
è 
çl£
;

1364 
curBlock
->
vis™ed
 = 
Œue
;

1366 ià(
curBlock
->
blockTy³
 =ğ
kEÁryBlock
 ||

1367 
curBlock
->
blockTy³
 =ğ
kEx™Block
) {

1368  
çl£
;

1375 ià(
curBlock
->
fœ¡MIRIn¢
 !ğ
NULL
) {

1376 
boŞ
 
chªged
 = 
çl£
;

1377 ià(
curBlock
->
k’
)

1378 
chªged
 |ğ
	`exhau¡T¿û
(
cUn™
, 
curBlock
->
k’
);

1379 ià(
curBlock
->
çÎThrough
)

1380 
chªged
 |ğ
	`exhau¡T¿û
(
cUn™
, 
curBlock
->
çÎThrough
);

1381  
chªged
;

1383 
Œue
) {

1384 
MIR
 *
š¢
 = (MIR *è
	`dvmComp”New
((MIR), 
Œue
);

1385 
š¢
->
off£t
 = 
curOff£t
;

1386 
width
 = 
	`·r£In¢
(
codePŒ
, &
š¢
->
d®vikIn¢
, 
çl£
);

1387 
š¢
->
width
 = width;

1390 ià(
width
 == 0)

1393 
	`dvmComp”Aµ’dMIR
(
curBlock
, 
š¢
);

1395 
codePŒ
 +ğ
width
;

1396 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
š¢
->
d®vikIn¢
.
İcode
);

1399 ià(
æags
 & (
kIn¡rCªR‘uº
 | 
kIn¡rCªSw™ch
 | 
kIn¡rInvoke
)) {

1400 
curBlock
->
çÎThrough
 = 
cUn™
->
ex™Block
;

1401 
	`dvmComp”S‘B™
(
cUn™
->
ex™Block
->
´edeûssÜs
, 
curBlock
->
id
);

1403 } ià(
æags
 & 
kIn¡rCªB¿nch
) {

1404 
	`´oûssCªB¿nch
(
cUn™
, 
curBlock
, 
š¢
, 
curOff£t
, 
width
, 
æags
,

1405 
codePŒ
, 
NULL
);

1406 ià(
curBlock
->
k’
) {

1407 
	`exhau¡T¿û
(
cUn™
, 
curBlock
->
k’
);

1409 ià(
curBlock
->
çÎThrough
) {

1410 
	`exhau¡T¿û
(
cUn™
, 
curBlock
->
çÎThrough
);

1414 
curOff£t
 +ğ
width
;

1415 
BasicBlock
 *
ÃxtBlock
 = 
	`fšdBlock
(
cUn™
, 
curOff£t
,

1417 
çl£
,

1419 
çl£
,

1421 
NULL
);

1422 ià(
ÃxtBlock
) {

1429 
	`as£¹
(
curBlock
->
çÎThrough
 =ğ
NULL
 ||

1430 
curBlock
->
çÎThrough
 =ğ
ÃxtBlock
 ||

1431 
curBlock
->
çÎThrough
 =ğ
cUn™
->
ex™Block
);

1433 ià((
curBlock
->
çÎThrough
 =ğ
NULL
) &&

1434 (
æags
 & 
kIn¡rCªCÚtšue
)) {

1435 
curBlock
->
ÃedF®lThroughB¿nch
 = 
Œue
;

1436 
curBlock
->
çÎThrough
 = 
ÃxtBlock
;

1437 
	`dvmComp”S‘B™
(
ÃxtBlock
->
´edeûssÜs
, 
curBlock
->
id
);

1440 ià(
ÃxtBlock
->
vis™ed
 =ğ
Œue
) {

1441  
Œue
;

1443 
curBlock
 = 
ÃxtBlock
;

1446  
Œue
;

1447 
	}
}

1450 
boŞ
 
	$compeLoİ
(
Comp©iÚUn™
 *
cUn™
, 
¡¬tOff£t
,

1451 
J™T¿ûDesütiÚ
 *
desc
, 
numMaxIn¡s
,

1452 
J™T¿n¦©iÚInfo
 *
šfo
, 
jmp_buf
 *
baPŒ
,

1453 
İtHšts
)

1455 
numBlocks
 = 0;

1456 
curOff£t
 = 
¡¬tOff£t
;

1457 
boŞ
 
chªged
;

1458 
BasicBlock
 *
bb
;

1459 #ià
	`defšed
(
WITH_JIT_TUNING
)

1460 
Comp”M‘hodSts
 *
m‘hodSts
;

1463 
cUn™
->
j™Mode
 = 
kJ™Loİ
;

1466 
	`dvmIn™GrowabËLi¡
(&
cUn™
->
blockLi¡
, 4);

1469 
	`dvmIn™GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, 8);

1472 
BasicBlock
 *
’ŒyBlock
 = 
	`dvmComp”NewBB
(
kEÁryBlock
, 
numBlocks
++);

1473 
’ŒyBlock
->
¡¬tOff£t
 = 
curOff£t
;

1474 
BasicBlock
 *
ex™Block
 = 
	`dvmComp”NewBB
(
kEx™Block
, 
numBlocks
++);

1476 
cUn™
->
’ŒyBlock
 =ƒntryBlock;

1477 
cUn™
->
ex™Block
 =ƒxitBlock;

1479 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
’ŒyBlock
);

1480 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
ex™Block
);

1483 
BasicBlock
 *
curBlock
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
, 
numBlocks
++);

1484 
curBlock
->
¡¬tOff£t
 = 
curOff£t
;

1486 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
curBlock
);

1487 
’ŒyBlock
->
çÎThrough
 = 
curBlock
;

1488 
	`dvmComp”S‘B™
(
curBlock
->
´edeûssÜs
, 
’ŒyBlock
->
id
);

1494 
cUn™
->
numBlocks
 =‚umBlocks;

1497 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
,

1498 
dvmComp”CË¬Vis™edFÏg
,

1499 
kAÎNodes
,

1500 
çl£
 );

1501 
chªged
 = 
	`exhau¡T¿û
(
cUn™
, 
curBlock
);

1502 } 
chªged
);

1505 
bb
 = 
	`dvmComp”NewBB
(
kChaššgC–lBackw¬dB¿nch
, 
cUn™
->
numBlocks
++);

1506 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
bb
);

1507 
cUn™
->
backChašBlock
 = 
bb
;

1510 
bb
 = 
	`dvmComp”NewBB
(
kPCRecÚ¡ruùiÚ
, 
cUn™
->
numBlocks
++);

1511 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
bb
);

1514 
bb
 = 
	`dvmComp”NewBB
(
kExû±iÚHªdlšg
, 
cUn™
->
numBlocks
++);

1515 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
blockLi¡
, (
šŒ_t
è
bb
);

1516 
cUn™
->
puÁBlock
 = 
bb
;

1518 
cUn™
->
numD®vikRegi¡”s
 = cUn™->
m‘hod
->
»gi¡”sSize
;

1522 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
v”ifyP»dInfo
,

1523 
kAÎNodes
,

1524 
çl£
 );

1528 ià(!
	`dvmComp”BudLoİ
(
cUn™
))

1529 
ba
;

1531 
	`dvmComp”LoİO±
(
cUn™
);

1537 
	`dvmComp”In£¹Backw¬dChaššg
(
cUn™
);

1539 
	`dvmComp”In™ŸlizeRegAÎoc
(
cUn™
);

1542 
	`dvmComp”LoÿlRegAÎoc
(
cUn™
);

1545 
	`dvmComp”MIR2LIR
(
cUn™
);

1548 ià(
cUn™
->
qu™LoİMode
) {

1549 ià(
cUn™
->
´štMe
 || 
gDvmJ™
.
»ûivedSIGUSR2
) {

1550 
	`ALOGD
("Looprace @ offset %04x‡borted dueo unresolved code info",

1551 
cUn™
->
’ŒyBlock
->
¡¬tOff£t
);

1553 
ba
;

1558 
	`dvmComp”As£mbËLIR
(
cUn™
, 
šfo
);

1559 
cUn™
->
as£mbËrR‘r›s
++;

1560 ià(
cUn™
->
´štMe
 && cUn™->
as£mbËrStus
 !ğ
kSucûss
)

1561 
	`ALOGD
("As£mbË¸abÜˆ#%d oÀ%d", 
cUn™
->
as£mbËrR‘r›s
,

1562 
cUn™
->
as£mbËrStus
);

1563 } 
cUn™
->
as£mbËrStus
 =ğ
kR‘ryAÎ
);

1566 ià(
cUn™
->
as£mbËrStus
 =ğ
kR‘ryH®ve
) {

1567 
ba
;

1570 ià(
cUn™
->
´štMe
 || 
gDvmJ™
.
»ûivedSIGUSR2
) {

1571 
	`ALOGD
("Loİ¿û @ off£ˆ%04x", 
cUn™
->
’ŒyBlock
->
¡¬tOff£t
);

1572 
	`dvmComp”Codeg’Dump
(
cUn™
);

1582 ià(
cUn™
->
hasCÏssL™”®s
 && 
šfo
->
codeAdd»ss
) {

1583 
	`dvmJ™In¡®lCÏssObjeùPoš‹rs
(
cUn™
, (*è
šfo
->
codeAdd»ss
);

1590 
	`dvmComp”A»ÇRe£t
();

1592 
	`as£¹
(
cUn™
->
as£mbËrStus
 =ğ
kSucûss
);

1593 #ià
	`defšed
(
WITH_JIT_TUNING
)

1595 
m‘hodSts
 = 
	`dvmComp”AÇlyzeM‘hodBody
(
desc
->
m‘hod
, 
çl£
);

1596 
m‘hodSts
->
ÇtiveSize
 +ğ
cUn™
->
tÙ®Size
;

1598  
šfo
->
codeAdd»ss
 !ğ
NULL
;

1600 
ba
:

1602 
	`dvmComp”A»ÇRe£t
();

1603  
	`dvmCompeT¿û
(
desc
, 
numMaxIn¡s
, 
šfo
, 
baPŒ
,

1604 
İtHšts
 | 
JIT_OPT_NO_LOOP
);

1605 
	}
}

1612 
boŞ
 
	$dvmCompeT¿û
(
J™T¿ûDesütiÚ
 *
desc
, 
numMaxIn¡s
,

1613 
J™T¿n¦©iÚInfo
 *
šfo
, 
jmp_buf
 *
baPŒ
,

1614 
İtHšts
)

1616 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
desc
->
m‘hod
);

1617 cÚ¡ 
J™T¿ûRun
* 
cu¼Run
 = &
desc
->
Œaû
[0];

1618 
curOff£t
 = 
cu¼Run
->
šfo
.
äag
.
¡¬tOff£t
;

1619 
¡¬tOff£t
 = 
curOff£t
;

1620 
numIn¡s
 = 
cu¼Run
->
šfo
.
äag
.numInsts;

1621 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
 + 
curOff£t
;

1622 
ŒaûSize
 = 0;

1623 cÚ¡ 
u2
 *
¡¬tCodePŒ
 = 
codePŒ
;

1624 
BasicBlock
 *
curBB
, *
’ŒyCodeBB
;

1625 
numBlocks
 = 0;

1626 
comp©iÚId
;

1627 
Comp©iÚUn™
 
cUn™
;

1628 
GrowabËLi¡
 *
blockLi¡
;

1629 #ià
	`defšed
(
WITH_JIT_TUNING
)

1630 
Comp”M‘hodSts
 *
m‘hodSts
;

1634 ià(
	`dvmJ™G‘T¿ûAddr
(
¡¬tCodePŒ
è&& !
šfo
->
disÿrdResuÉ
) {

1639 
šfo
->
codeAdd»ss
 = 
NULL
;

1640  
Œue
;

1644 ià(
šfo
->
ÿcheV”siÚ
 !ğ
gDvmJ™
.cacheVersion) {

1645  
çl£
;

1648 
comp©iÚId
++;

1649 
	`mem£t
(&
cUn™
, 0, (
Comp©iÚUn™
));

1651 #ià
	`defšed
(
WITH_JIT_TUNING
)

1653 
m‘hodSts
 = 
	`dvmComp”AÇlyzeM‘hodBody
(
desc
->
m‘hod
, 
çl£
);

1657 
cUn™
.
baPŒ
 = bailPtr;

1660 
cUn™
.
´štMe
 = 
gDvmJ™
.printMe;

1663 
cUn™
.
m‘hod
 = 
desc
->method;

1666 
cUn™
.
ŒaûDesc
 = 
desc
;

1667 
cUn™
.
j™Mode
 = 
kJ™T¿û
;

1670 
	`dvmIn™GrowabËLi¡
(&
cUn™
.
pcRecÚ¡ruùiÚLi¡
, 8);

1673 
blockLi¡
 = &
cUn™
.blockList;

1674 
	`dvmIn™GrowabËLi¡
(
blockLi¡
, 8);

1677 ià(
gDvmJ™
.
m‘hodTabË
) {

1678 
Ën
 = 
	`¡¾’
(
desc
->
m‘hod
->
şazz
->
desütÜ
) +

1679 
	`¡¾’
(
desc
->
m‘hod
->
Çme
) + 1;

1680 *
fuÎSigÇtu»
 = (*)
	`dvmComp”New
(
Ën
, 
Œue
);

1681 
	`¡rıy
(
fuÎSigÇtu»
, 
desc
->
m‘hod
->
şazz
->
desütÜ
);

1682 
	`¡rÿt
(
fuÎSigÇtu»
, 
desc
->
m‘hod
->
Çme
);

1684 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
fuÎSigÇtu»
);

1692 
boŞ
 
m‘hodFound
 =

1693 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

1694 
fuÎSigÇtu»
, (
HashCom·»Func
è
¡rcmp
,

1695 
çl£
) !=

1696 
NULL
;

1699 ià(
m‘hodFound
 =ğ
çl£
) {

1700 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
desc
->
m‘hod
->
şazz
->
desütÜ
);

1701 
m‘hodFound
 =

1702 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

1703 (*è
desc
->
m‘hod
->
şazz
->
desütÜ
,

1704 (
HashCom·»Func
è
¡rcmp
, 
çl£
) !=

1705 
NULL
;

1707 ià(
m‘hodFound
 =ğ
çl£
) {

1708 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
desc
->
m‘hod
->
Çme
);

1709 
m‘hodFound
 =

1710 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

1711 (*è
desc
->
m‘hod
->
Çme
,

1712 (
HashCom·»Func
è
¡rcmp
, 
çl£
) !=

1713 
NULL
;

1719 ià(
m‘hodFound
 =ğ
çl£
 && 
gDvmJ™
.
checkC®lG¿ph
 =ğ
Œue
) {

1720 
m‘hodFound
 =

1721 
	`f‹rM‘hodByC®lG¿ph
(
šfo
->
»que¡šgTh»ad
,

1722 
desc
->
m‘hod
->
Çme
);

1737 ià(
gDvmJ™
.
šşudeS–eùedM‘hod
 !ğ
m‘hodFound
) {

1738 
cUn™
.
®lSšgËS‹p
 = 
Œue
;

1743 ià(
gDvmJ™
.
šşudeS–eùedM‘hod
 =ğ
Œue
) {

1744 
cUn™
.
´štMe
 = 
Œue
;

1750 
curBB
 = 
	`dvmComp”NewBB
(
kEÁryBlock
, 
numBlocks
++);

1751 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
curBB
);

1752 
curBB
->
¡¬tOff£t
 = 
curOff£t
;

1754 
’ŒyCodeBB
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
, 
numBlocks
++);

1755 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
’ŒyCodeBB
);

1756 
’ŒyCodeBB
->
¡¬tOff£t
 = 
curOff£t
;

1757 
curBB
->
çÎThrough
 = 
’ŒyCodeBB
;

1758 
curBB
 = 
’ŒyCodeBB
;

1760 ià(
cUn™
.
´štMe
) {

1761 
	`ALOGD
("--------\nCompiler: Buildingrace for %s, offset %#x",

1762 
desc
->
m‘hod
->
Çme
, 
curOff£t
);

1770 
MIR
 *
š¢
;

1771 
width
;

1772 
š¢
 = (
MIR
 *)
	`dvmComp”New
((MIR), 
Œue
);

1773 
š¢
->
off£t
 = 
curOff£t
;

1774 
width
 = 
	`·r£In¢
(
codePŒ
, &
š¢
->
d®vikIn¢
, 
cUn™
.
´štMe
);

1777 
	`as£¹
(
width
);

1778 
š¢
->
width
 = width;

1779 
ŒaûSize
 +ğ
width
;

1780 
	`dvmComp”Aµ’dMIR
(
curBB
, 
š¢
);

1781 
cUn™
.
numIn¡s
++;

1783 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
š¢
->
d®vikIn¢
.
İcode
);

1785 ià(
æags
 & 
kIn¡rInvoke
) {

1786 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = (const Method *)

1787 
cu¼Run
[
JIT_TRACE_CUR_METHOD
].
šfo
.
m‘a
;

1788 
	`as£¹
(
numIn¡s
 == 1);

1789 
C®ls™eInfo
 *
ÿÎs™eInfo
 =

1790 (
C®ls™eInfo
 *)
	`dvmComp”New
((C®ls™eInfo), 
Œue
);

1791 
ÿÎs™eInfo
->
şassDesütÜ
 = (const *)

1792 
cu¼Run
[
JIT_TRACE_CLASS_DESC
].
šfo
.
m‘a
;

1793 
ÿÎs™eInfo
->
şassLßd”
 = (
Objeù
 *)

1794 
cu¼Run
[
JIT_TRACE_CLASS_LOADER
].
šfo
.
m‘a
;

1795 
ÿÎs™eInfo
->
m‘hod
 = 
ÿÎ“M‘hod
;

1796 
š¢
->
m‘a
.
ÿÎs™eInfo
 = callsiteInfo;

1800 ià(
cUn™
.
numIn¡s
 >ğ
numMaxIn¡s
) {

1803 ià(--
numIn¡s
 == 0) {

1804 ià(
cu¼Run
->
šfo
.
äag
.
runEnd
) {

1809 
cu¼Run
++;

1810 } !
cu¼Run
->
isCode
);

1813 ià(
cu¼Run
->
šfo
.
äag
.
numIn¡s
 == 0) {

1817 
curBB
 = 
	`dvmComp”NewBB
(
kD®vikBy‹Code
, 
numBlocks
++);

1818 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
curBB
);

1819 
curOff£t
 = 
cu¼Run
->
šfo
.
äag
.
¡¬tOff£t
;

1820 
numIn¡s
 = 
cu¼Run
->
šfo
.
äag
.numInsts;

1821 
curBB
->
¡¬tOff£t
 = 
curOff£t
;

1822 
codePŒ
 = 
dexCode
->
š¢s
 + 
curOff£t
;

1825 
curOff£t
 +ğ
width
;

1826 
codePŒ
 +ğ
width
;

1830 #ià
	`defšed
(
WITH_JIT_TUNING
)

1832 
m‘hodSts
->
compedD®vikSize
 +ğ
ŒaûSize
 * 2;

1840 
size_t
 
blockId
;

1841 
blockId
 = 0; blockId < 
blockLi¡
->
numU£d
; blockId++) {

1842 
curBB
 = (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
blockId
);

1843 
MIR
 *
Ï¡In¢
 = 
curBB
->
Ï¡MIRIn¢
;

1845 ià(
Ï¡In¢
 =ğ
NULL
) {

1848 
curOff£t
 = 
Ï¡In¢
->
off£t
;

1849 
rg‘Off£t
 = 
curOff£t
;

1850 
çÎThroughOff£t
 = 
curOff£t
 + 
Ï¡In¢
->
width
;

1851 
boŞ
 
isInvoke
 = 
çl£
;

1852 cÚ¡ 
M‘hod
 *
ÿÎ“
 = 
NULL
;

1854 
	`fšdBlockBound¬y
(
desc
->
m‘hod
, 
curBB
->
Ï¡MIRIn¢
, 
curOff£t
,

1855 &
rg‘Off£t
, &
isInvoke
, &
ÿÎ“
);

1858 
BasicBlock
 *
£¬chBB
;

1860 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
Ï¡In¢
->
d®vikIn¢
.
İcode
);

1862 ià(
æags
 & 
kIn¡rInvoke
) {

1863 
cUn™
.
hasInvoke
 = 
Œue
;

1867 ià(
isInvoke
 =ğ
çl£
 &&

1868 (
æags
 & 
kIn¡rCªB¿nch
) != 0 &&

1869 
rg‘Off£t
 < 
curOff£t
 &&

1870 (
İtHšts
 & 
JIT_OPT_NO_LOOP
) == 0) {

1871 
	`dvmComp”A»ÇRe£t
();

1872  
	`compeLoİ
(&
cUn™
, 
¡¬tOff£t
, 
desc
, 
numMaxIn¡s
,

1873 
šfo
, 
baPŒ
, 
İtHšts
);

1877 
size_t
 
£¬chBlockId
;

1878 
£¬chBlockId
 = 
blockId
+1; s—rchBlockId < 
blockLi¡
->
numU£d
;

1879 
£¬chBlockId
++) {

1880 
£¬chBB
 = (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
,

1881 
£¬chBlockId
);

1882 ià(
rg‘Off£t
 =ğ
£¬chBB
->
¡¬tOff£t
) {

1883 
curBB
->
k’
 = 
£¬chBB
;

1884 
	`dvmComp”S‘B™
(
£¬chBB
->
´edeûssÜs
, 
curBB
->
id
);

1886 ià(
çÎThroughOff£t
 =ğ
£¬chBB
->
¡¬tOff£t
) {

1887 
curBB
->
çÎThrough
 = 
£¬chBB
;

1888 
	`dvmComp”S‘B™
(
£¬chBB
->
´edeûssÜs
, 
curBB
->
id
);

1895 ià(
æags
 & 
kIn¡rInvoke
) {

1896 
£¬chBB
->
isF®lThroughFromInvoke
 = 
Œue
;

1907 
curBB
->
ÃedF®lThroughB¿nch
 =

1908 ((
æags
 & (
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 | 
kIn¡rCªR‘uº
 |

1909 
kIn¡rInvoke
)) == 0);

1910 ià(
Ï¡In¢
->
d®vikIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
 ||

1911 
Ï¡In¢
->
d®vikIn¢
.
İcode
 =ğ
OP_SPARSE_SWITCH
) {

1912 
i
;

1913 cÚ¡ 
u2
 *
sw™chD©a
 = 
desc
->
m‘hod
->
š¢s
 + 
Ï¡In¢
->
off£t
 +

1914 
Ï¡In¢
->
d®vikIn¢
.
vB
;

1915 
size
 = 
sw™chD©a
[1];

1916 
maxChašs
 = 
	`MIN
(
size
, 
MAX_CHAINED_SWITCH_CASES
);

1923 ià(
maxChašs
 !ğ
size
) {

1924 
cUn™
.
sw™chOv”æowPad
 =

1925 
desc
->
m‘hod
->
š¢s
 + 
Ï¡In¢
->
off£t
;

1928 
s4
 *
rg‘s
 = (s4 *è(
sw™chD©a
 + 2 +

1929 (
Ï¡In¢
->
d®vikIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
 ?

1930 2 : 
size
 * 2));

1933 
i
 = 0; i < 
maxChašs
; i++) {

1934 
BasicBlock
 *
ÿ£Chaš
 = 
	`dvmComp”NewBB
(
kChaššgC–lNÜm®
,

1935 
numBlocks
++);

1936 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
ÿ£Chaš
);

1937 
ÿ£Chaš
->
¡¬tOff£t
 = 
Ï¡In¢
->
off£t
 + 
rg‘s
[
i
];

1941 
BasicBlock
 *
ÿ£Chaš
 = 
	`dvmComp”NewBB
(
kChaššgC–lNÜm®
,

1942 
numBlocks
++);

1943 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
ÿ£Chaš
);

1944 
ÿ£Chaš
->
¡¬tOff£t
 = 
Ï¡In¢
->
off£t
 +†a¡In¢->
width
;

1946 } ià(!
	`isUncÚd™iÚ®B¿nch
(
Ï¡In¢
) &&

1947 
curBB
->
çÎThrough
 =ğ
NULL
) {

1948 
BasicBlock
 *
çÎThroughBB
;

1954 ià(
isInvoke
 || 
curBB
->
ÃedF®lThroughB¿nch
) {

1955 
çÎThroughBB
 = 
	`dvmComp”NewBB
(
kChaššgC–lHÙ
, 
numBlocks
++);

1957 
çÎThroughBB
 = 
	`dvmComp”NewBB
(
kChaššgC–lNÜm®
,

1958 
numBlocks
++);

1960 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
çÎThroughBB
);

1961 
çÎThroughBB
->
¡¬tOff£t
 = 
çÎThroughOff£t
;

1962 
curBB
->
çÎThrough
 = 
çÎThroughBB
;

1963 
	`dvmComp”S‘B™
(
çÎThroughBB
->
´edeûssÜs
, 
curBB
->
id
);

1966 ià(
curBB
->
k’
 =ğ
NULL
 &&

1967 (
	`isGÙo
(
Ï¡In¢
è|| 
isInvoke
 ||

1968 (
rg‘Off£t
 !ğ
UNKNOWN_TARGET
 &&¬g‘Off£ˆ!ğ
curOff£t
))) {

1969 
BasicBlock
 *
ÃwBB
 = 
NULL
;

1970 ià(
isInvoke
) {

1972 ià(
ÿÎ“
) {

1974 ià(!
	`dvmIsN©iveM‘hod
(
ÿÎ“
)) {

1975 
ÃwBB
 = 
	`dvmComp”NewBB
(
kChaššgC–lInvokeSšgËtÚ
,

1976 
numBlocks
++);

1977 
ÃwBB
->
¡¬tOff£t
 = 0;

1978 
ÃwBB
->
cÚššgM‘hod
 = 
ÿÎ“
;

1982 
ÃwBB
 = 
	`dvmComp”NewBB
(
kChaššgC–lInvokeP»diùed
,

1983 
numBlocks
++);

1984 
ÃwBB
->
¡¬tOff£t
 = 0;

1988 #ià!
	`defšed
(
WITH_SELF_VERIFICATION
)

1989 
ÃwBB
 = 
	`dvmComp”NewBB
(
	`dexIsGÙo
(
æags
) ?

1990 
kChaššgC–lHÙ
 :

1991 
kChaššgC–lNÜm®
,

1992 
numBlocks
++);

1993 
ÃwBB
->
¡¬tOff£t
 = 
rg‘Off£t
;

1996 ià(
rg‘Off£t
 >ğ
curBB
->
fœ¡MIRIn¢
->
off£t
 &&

1997 
rg‘Off£t
 <ğ
curBB
->
Ï¡MIRIn¢
->
off£t
) {

1998 
ÃwBB
 = 
	`dvmComp”NewBB
(
kChaššgC–lBackw¬dB¿nch
,

1999 
numBlocks
++);

2001 
ÃwBB
 = 
	`dvmComp”NewBB
(
	`dexIsGÙo
(
æags
) ?

2002 
kChaššgC–lHÙ
 :

2003 
kChaššgC–lNÜm®
,

2004 
numBlocks
++);

2006 
ÃwBB
->
¡¬tOff£t
 = 
rg‘Off£t
;

2009 ià(
ÃwBB
) {

2010 
curBB
->
k’
 = 
ÃwBB
;

2011 
	`dvmComp”S‘B™
(
ÃwBB
->
´edeûssÜs
, 
curBB
->
id
);

2012 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
ÃwBB
);

2018 
curBB
 = 
	`dvmComp”NewBB
(
kPCRecÚ¡ruùiÚ
, 
numBlocks
++);

2019 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
curBB
);

2022 
curBB
 = 
	`dvmComp”NewBB
(
kExû±iÚHªdlšg
, 
numBlocks
++);

2023 
	`dvmIn£¹GrowabËLi¡
(
blockLi¡
, (
šŒ_t
è
curBB
);

2024 
cUn™
.
puÁBlock
 = 
curBB
;

2026 ià(
cUn™
.
´štMe
) {

2027 * 
sigÇtu»
 =

2028 
	`dexPrÙoCİyM‘hodDesütÜ
(&
desc
->
m‘hod
->
´ÙÙy³
);

2029 
	`ALOGD
("TRACEINFO (%d): 0x%08x %s%s.%s %#x %d of %d, %d blocks",

2030 
comp©iÚId
,

2031 (
šŒ_t
è
desc
->
m‘hod
->
š¢s
,

2032 
desc
->
m‘hod
->
şazz
->
desütÜ
,

2033 
desc
->
m‘hod
->
Çme
,

2034 
sigÇtu»
,

2035 
desc
->
Œaû
[0].
šfo
.
äag
.
¡¬tOff£t
,

2036 
ŒaûSize
,

2037 
dexCode
->
š¢sSize
,

2038 
numBlocks
);

2039 
	`ä“
(
sigÇtu»
);

2042 
cUn™
.
numBlocks
 =‚umBlocks;

2045 
cUn™
.
š¡ruùiÚS‘
 = 
	`dvmComp”In¡ruùiÚS‘
();

2048 ià(
cUn™
.
hasInvoke
 && !(
gDvmJ™
.
di§bËO±
 & (1 << 
kM‘hodIÆššg
))) {

2049 
	`dvmComp”IÆšeMIR
(&
cUn™
, 
šfo
);

2052 
cUn™
.
numD®vikRegi¡”s
 = cUn™.
m‘hod
->
»gi¡”sSize
;

2055 
	`dvmIn™ŸlizeSSACÚv”siÚ
(&
cUn™
);

2057 
	`dvmComp”NÚLoİAÇlysis
(&
cUn™
);

2059 
	`dvmComp”In™ŸlizeRegAÎoc
(&
cUn™
);

2061 ià(
cUn™
.
´štMe
) {

2062 
	`dvmComp”DumpComp©iÚUn™
(&
cUn™
);

2066 
	`dvmComp”LoÿlRegAÎoc
(&
cUn™
);

2069 
	`dvmComp”MIR2LIR
(&
cUn™
);

2073 
	`dvmComp”As£mbËLIR
(&
cUn™
, 
šfo
);

2074 
cUn™
.
as£mbËrR‘r›s
++;

2075 ià(
cUn™
.
´štMe
 && cUn™.
as£mbËrStus
 !ğ
kSucûss
)

2076 
	`ALOGD
("As£mbË¸abÜˆ#%d oÀ%d",
cUn™
.
as£mbËrR‘r›s
,

2077 
cUn™
.
as£mbËrStus
);

2078 } 
cUn™
.
as£mbËrStus
 =ğ
kR‘ryAÎ
);

2080 ià(
cUn™
.
´štMe
) {

2081 
	`ALOGD
("T¿û D®vik PC: %p", 
¡¬tCodePŒ
);

2082 
	`dvmComp”Codeg’Dump
(&
cUn™
);

2083 
	`ALOGD
("End %s%s, %d Dalvik instructions",

2084 
desc
->
m‘hod
->
şazz
->
desütÜ
, desc->m‘hod->
Çme
,

2085 
cUn™
.
numIn¡s
);

2088 ià(
cUn™
.
as£mbËrStus
 =ğ
kR‘ryH®ve
) {

2090 
	`dvmComp”A»ÇRe£t
();

2093  
	`dvmCompeT¿û
(
desc
, 
cUn™
.
numIn¡s
 / 2, 
šfo
, 
baPŒ
,

2094 
İtHšts
);

2104 ià(
cUn™
.
hasCÏssL™”®s
 && 
šfo
->
codeAdd»ss
) {

2105 
	`dvmJ™In¡®lCÏssObjeùPoš‹rs
(&
cUn™
, (*è
šfo
->
codeAdd»ss
);

2112 
	`dvmComp”A»ÇRe£t
();

2114 
	`as£¹
(
cUn™
.
as£mbËrStus
 =ğ
kSucûss
);

2115 #ià
	`defšed
(
WITH_JIT_TUNING
)

2116 
m‘hodSts
->
ÇtiveSize
 +ğ
cUn™
.
tÙ®Size
;

2119  
šfo
->
codeAdd»ss
 !ğ
NULL
;

2120 
	}
}

	@vm/compiler/InlineTransformation.cpp

17 
	~"D®vik.h
"

18 
	~"D©aæow.h
"

19 
	~"libdex/DexOpcodes.h
"

22 
šlše
 
u4
 
	$cÚv”tRegId
(cÚ¡ 
DecodedIn¡ruùiÚ
 *
švoke
,

23 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

24 
ÿÎ“RegId
, 
boŞ
 
isRªge
)

27 
¿nk
 = 
ÿÎ“RegId
 -

28 (
ÿÎ“M‘hod
->
»gi¡”sSize
 - c®ËeM‘hod->
šsSize
);

29 
	`as£¹
(
¿nk
 >= 0);

30 ià(!
isRªge
) {

31  
švoke
->
¬g
[
¿nk
];

33  
švoke
->
vC
 + 
¿nk
;

35 
	}
}

37 
boŞ
 
	$šlšeG‘‹r
(
Comp©iÚUn™
 *
cUn™
,

38 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

39 
MIR
 *
švokeMIR
,

40 
BasicBlock
 *
švokeBB
,

41 
boŞ
 
isP»diùed
,

42 
boŞ
 
isRªge
)

44 
BasicBlock
 *
moveResuÉBB
 = 
švokeBB
->
çÎThrough
;

45 
MIR
 *
moveResuÉMIR
 = 
moveResuÉBB
->
fœ¡MIRIn¢
;

46 
MIR
 *
ÃwG‘‹rMIR
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

47 
DecodedIn¡ruùiÚ
 
g‘‹rIn¢
;

54 
g‘‹rIn¢
.
vC
 = 0;

56 
	`dexDecodeIn¡ruùiÚ
(
ÿÎ“M‘hod
->
š¢s
, &
g‘‹rIn¢
);

58 ià(!
	`dvmComp”CªInşudeThisIn¡ruùiÚ
(
ÿÎ“M‘hod
, &
g‘‹rIn¢
))

59  
çl£
;

65 ià((
moveResuÉMIR
 =ğ
NULL
) ||

66 (
moveResuÉMIR
->
d®vikIn¢
.
İcode
 !ğ
OP_MOVE_RESULT
 &&

67 
moveResuÉMIR
->
d®vikIn¢
.
İcode
 !ğ
OP_MOVE_RESULT_OBJECT
 &&

68 
moveResuÉMIR
->
d®vikIn¢
.
İcode
 !ğ
OP_MOVE_RESULT_WIDE
)) {

69  
çl£
;

72 
dfFÏgs
 = 
dvmComp”D©aFlowA‰ribu‹s
[
g‘‹rIn¢
.
İcode
];

75 ià(
dfFÏgs
 & (
DF_UA
 | 
DF_UA_WIDE
)) {

76 
	`ALOGE
("İcod%d ha DF_UA s‘ (nÙƒx³ùed)", 
g‘‹rIn¢
.
İcode
);

77 
	`dvmAbÜt
();

80 ià(
dfFÏgs
 & 
DF_UB
) {

81 
g‘‹rIn¢
.
vB
 = 
	`cÚv”tRegId
(&
švokeMIR
->
d®vikIn¢
, 
ÿÎ“M‘hod
,

82 
g‘‹rIn¢
.
vB
, 
isRªge
);

85 ià(
dfFÏgs
 & 
DF_UC
) {

86 
g‘‹rIn¢
.
vC
 = 
	`cÚv”tRegId
(&
švokeMIR
->
d®vikIn¢
, 
ÿÎ“M‘hod
,

87 
g‘‹rIn¢
.
vC
, 
isRªge
);

90 
g‘‹rIn¢
.
vA
 = 
moveResuÉMIR
->
d®vikIn¢
.vA;

93 
ÃwG‘‹rMIR
->
d®vikIn¢
 = 
g‘‹rIn¢
;

95 
ÃwG‘‹rMIR
->
width
 = 
	`dexG‘WidthFromOpcode
(
g‘‹rIn¢
.
İcode
);

97 
ÃwG‘‹rMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_CALLEE
;

103 
ÃwG‘‹rMIR
->
off£t
 = 
švokeMIR
->offset;

105 
ÃwG‘‹rMIR
->
m‘a
.
ÿÎ“M‘hod
 = calleeMethod;

107 
	`dvmComp”In£¹MIRAá”
(
švokeBB
, 
švokeMIR
, 
ÃwG‘‹rMIR
);

109 ià(
isP»diùed
) {

110 
MIR
 *
švokeMIRSlow
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

111 *
švokeMIRSlow
 = *
švokeMIR
;

112 
švokeMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpCheckIÆšeP»diùiÚ
;

115 ià(!
isRªge
) {

116 
švokeMIR
->
d®vikIn¢
.
vC
 = 
švokeMIRSlow
->d®vikIn¢.
¬g
[0];

119 
moveResuÉMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED_PRED
;

121 
	`dvmComp”In£¹MIRAá”
(
švokeBB
, 
ÃwG‘‹rMIR
, 
švokeMIRSlow
);

122 
švokeMIRSlow
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED_PRED
;

123 #ià
	`defšed
(
WITH_JIT_TUNING
)

124 
gDvmJ™
.
švokePŞyG‘‹rIÆšed
++;

127 
švokeMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED
;

128 
moveResuÉMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED
;

129 #ià
	`defšed
(
WITH_JIT_TUNING
)

130 
gDvmJ™
.
švokeMÚoG‘‹rIÆšed
++;

134  
Œue
;

135 
	}
}

137 
boŞ
 
	$šlšeS‘‹r
(
Comp©iÚUn™
 *
cUn™
,

138 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

139 
MIR
 *
švokeMIR
,

140 
BasicBlock
 *
švokeBB
,

141 
boŞ
 
isP»diùed
,

142 
boŞ
 
isRªge
)

144 
MIR
 *
ÃwS‘‹rMIR
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

145 
DecodedIn¡ruùiÚ
 
£‰”In¢
;

152 
£‰”In¢
.
vC
 = 0;

154 
	`dexDecodeIn¡ruùiÚ
(
ÿÎ“M‘hod
->
š¢s
, &
£‰”In¢
);

156 ià(!
	`dvmComp”CªInşudeThisIn¡ruùiÚ
(
ÿÎ“M‘hod
, &
£‰”In¢
))

157  
çl£
;

159 
dfFÏgs
 = 
dvmComp”D©aFlowA‰ribu‹s
[
£‰”In¢
.
İcode
];

161 ià(
dfFÏgs
 & (
DF_UA
 | 
DF_UA_WIDE
)) {

162 
£‰”In¢
.
vA
 = 
	`cÚv”tRegId
(&
švokeMIR
->
d®vikIn¢
, 
ÿÎ“M‘hod
,

163 
£‰”In¢
.
vA
, 
isRªge
);

167 ià(
dfFÏgs
 & 
DF_UB
) {

168 
£‰”In¢
.
vB
 = 
	`cÚv”tRegId
(&
švokeMIR
->
d®vikIn¢
, 
ÿÎ“M‘hod
,

169 
£‰”In¢
.
vB
, 
isRªge
);

173 ià(
dfFÏgs
 & 
DF_UC
) {

174 
£‰”In¢
.
vC
 = 
	`cÚv”tRegId
(&
švokeMIR
->
d®vikIn¢
, 
ÿÎ“M‘hod
,

175 
£‰”In¢
.
vC
, 
isRªge
);

179 
ÃwS‘‹rMIR
->
d®vikIn¢
 = 
£‰”In¢
;

181 
ÃwS‘‹rMIR
->
width
 = 
	`dexG‘WidthFromOpcode
(
£‰”In¢
.
İcode
);

183 
ÃwS‘‹rMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_CALLEE
;

189 
ÃwS‘‹rMIR
->
off£t
 = 
švokeMIR
->offset;

191 
ÃwS‘‹rMIR
->
m‘a
.
ÿÎ“M‘hod
 = calleeMethod;

193 
	`dvmComp”In£¹MIRAá”
(
švokeBB
, 
švokeMIR
, 
ÃwS‘‹rMIR
);

195 ià(
isP»diùed
) {

196 
MIR
 *
švokeMIRSlow
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

197 *
švokeMIRSlow
 = *
švokeMIR
;

198 
švokeMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpCheckIÆšeP»diùiÚ
;

201 ià(!
isRªge
) {

202 
švokeMIR
->
d®vikIn¢
.
vC
 = 
švokeMIRSlow
->d®vikIn¢.
¬g
[0];

205 
	`dvmComp”In£¹MIRAá”
(
švokeBB
, 
ÃwS‘‹rMIR
, 
švokeMIRSlow
);

206 
švokeMIRSlow
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED_PRED
;

207 #ià
	`defšed
(
WITH_JIT_TUNING
)

208 
gDvmJ™
.
švokePŞyS‘‹rIÆšed
++;

215 
švokeBB
->
ÃedF®lThroughB¿nch
 = 
Œue
;

216 
švokeMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED
;

217 #ià
	`defšed
(
WITH_JIT_TUNING
)

218 
gDvmJ™
.
švokeMÚoS‘‹rIÆšed
++;

222  
Œue
;

223 
	}
}

225 
boŞ
 
	$ŒyIÆšeSšgËtÚC®ls™e
(
Comp©iÚUn™
 *
cUn™
,

226 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

227 
MIR
 *
švokeMIR
,

228 
BasicBlock
 *
švokeBB
,

229 
boŞ
 
isRªge
)

232 ià(
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)è 
çl£
;

234 
Comp”M‘hodSts
 *
m‘hodSts
 =

235 
	`dvmComp”AÇlyzeM‘hodBody
(
ÿÎ“M‘hod
, 
Œue
);

238 ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_EMPTY
) {

240 
švokeMIR
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED
;

245 
švokeBB
->
ÃedF®lThroughB¿nch
 = 
Œue
;

246  
Œue
;

249 ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_GETTER
) {

250  
	`šlšeG‘‹r
(
cUn™
, 
ÿÎ“M‘hod
, 
švokeMIR
, 
švokeBB
, 
çl£
,

251 
isRªge
);

252 } ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_SETTER
) {

253  
	`šlšeS‘‹r
(
cUn™
, 
ÿÎ“M‘hod
, 
švokeMIR
, 
švokeBB
, 
çl£
,

254 
isRªge
);

256  
çl£
;

257 
	}
}

259 
boŞ
 
	$šlšeEm±yVœtu®C®Ëe
(
Comp©iÚUn™
 *
cUn™
,

260 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

261 
MIR
 *
švokeMIR
,

262 
BasicBlock
 *
švokeBB
)

264 
MIR
 *
švokeMIRSlow
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

265 *
švokeMIRSlow
 = *
švokeMIR
;

266 
švokeMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpCheckIÆšeP»diùiÚ
;

268 
	`dvmComp”In£¹MIRAá”
(
švokeBB
, 
švokeMIR
, 
švokeMIRSlow
);

269 
švokeMIRSlow
->
O±imiz©iÚFÏgs
 |ğ
MIR_INLINED_PRED
;

270  
Œue
;

271 
	}
}

273 
boŞ
 
	$ŒyIÆšeVœtu®C®ls™e
(
Comp©iÚUn™
 *
cUn™
,

274 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
,

275 
MIR
 *
švokeMIR
,

276 
BasicBlock
 *
švokeBB
,

277 
boŞ
 
isRªge
)

280 ià(
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)è 
çl£
;

282 
Comp”M‘hodSts
 *
m‘hodSts
 =

283 
	`dvmComp”AÇlyzeM‘hodBody
(
ÿÎ“M‘hod
, 
Œue
);

286 ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_EMPTY
) {

287  
	`šlšeEm±yVœtu®C®Ëe
(
cUn™
, 
ÿÎ“M‘hod
, 
švokeMIR
,

288 
švokeBB
);

291 ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_GETTER
) {

292  
	`šlšeG‘‹r
(
cUn™
, 
ÿÎ“M‘hod
, 
švokeMIR
, 
švokeBB
, 
Œue
,

293 
isRªge
);

294 } ià(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_SETTER
) {

295  
	`šlšeS‘‹r
(
cUn™
, 
ÿÎ“M‘hod
, 
švokeMIR
, 
švokeBB
, 
Œue
,

296 
isRªge
);

298  
çl£
;

299 
	}
}

302 
	$dvmComp”IÆšeMIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
)

304 
boŞ
 
isRªge
 = 
çl£
;

305 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

307 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

311 
Œue
) {

312 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

313 ià(
bb
 =ğ
NULL
) ;

314 ià(
bb
->
blockTy³
 !ğ
kD®vikBy‹Code
)

316 
MIR
 *
Ï¡MIRIn¢
 = 
bb
->lastMIRInsn;

317 
Opcode
 
İcode
 = 
Ï¡MIRIn¢
->
d®vikIn¢
.opcode;

318 
æags
 = ()
	`dexG‘FÏgsFromOpcode
(
İcode
);

321 ià((
æags
 & 
kIn¡rInvoke
) == 0)

325 ià(
gDvmJ™
.
m‘hodT¿ûSuµÜt
)

332 ià(
	`SINGLE_STEP_OP
(
İcode
))

335 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
;

337 
İcode
) {

338 
OP_INVOKE_SUPER
:

339 
OP_INVOKE_DIRECT
:

340 
OP_INVOKE_STATIC
:

341 
OP_INVOKE_SUPER_QUICK
:

342 
ÿÎ“M‘hod
 = 
Ï¡MIRIn¢
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

344 
OP_INVOKE_SUPER_RANGE
:

345 
OP_INVOKE_DIRECT_RANGE
:

346 
OP_INVOKE_STATIC_RANGE
:

347 
OP_INVOKE_SUPER_QUICK_RANGE
:

348 
isRªge
 = 
Œue
;

349 
ÿÎ“M‘hod
 = 
Ï¡MIRIn¢
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

352 
ÿÎ“M‘hod
 = 
NULL
;

356 ià(
ÿÎ“M‘hod
) {

357 
boŞ
 
šlšed
 = 
	`ŒyIÆšeSšgËtÚC®ls™e
(
cUn™
, 
ÿÎ“M‘hod
,

358 
Ï¡MIRIn¢
, 
bb
, 
isRªge
);

359 ià(!
šlšed
 &&

360 !(
gDvmJ™
.
di§bËO±
 & (1 << 
kM‘hodJ™
)) &&

361 !
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)) {

362 
Comp”M‘hodSts
 *
m‘hodSts
 =

363 
	`dvmComp”AÇlyzeM‘hodBody
(
ÿÎ“M‘hod
, 
Œue
);

364 ià((
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_LEAF
) &&

365 !(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_CANNOT_COMPILE
)) {

367 ià(
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
)) {

368 
Ï¡MIRIn¢
->
O±imiz©iÚFÏgs
 |ğ
MIR_INVOKE_METHOD_JIT
;

371 
	`dvmCompeM‘hod
(
ÿÎ“M‘hod
, 
šfo
);

372 ià(
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
)) {

373 
Ï¡MIRIn¢
->
O±imiz©iÚFÏgs
 |=

374 
MIR_INVOKE_METHOD_JIT
;

376 
m‘hodSts
->
©Œibu‹s
 |ğ
METHOD_CANNOT_COMPILE
;

384 
İcode
) {

385 
OP_INVOKE_VIRTUAL
:

386 
OP_INVOKE_VIRTUAL_QUICK
:

387 
OP_INVOKE_INTERFACE
:

388 
isRªge
 = 
çl£
;

389 
ÿÎ“M‘hod
 = 
Ï¡MIRIn¢
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

391 
OP_INVOKE_VIRTUAL_RANGE
:

392 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

393 
OP_INVOKE_INTERFACE_RANGE
:

394 
isRªge
 = 
Œue
;

395 
ÿÎ“M‘hod
 = 
Ï¡MIRIn¢
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

401 ià(
ÿÎ“M‘hod
) {

402 
boŞ
 
šlšed
 = 
	`ŒyIÆšeVœtu®C®ls™e
(
cUn™
, 
ÿÎ“M‘hod
,

403 
Ï¡MIRIn¢
, 
bb
, 
isRªge
);

404 ià(!
šlšed
 &&

405 !(
gDvmJ™
.
di§bËO±
 & (1 << 
kM‘hodJ™
)) &&

406 !
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)) {

407 
Comp”M‘hodSts
 *
m‘hodSts
 =

408 
	`dvmComp”AÇlyzeM‘hodBody
(
ÿÎ“M‘hod
, 
Œue
);

409 ià((
m‘hodSts
->
©Œibu‹s
 & 
METHOD_IS_LEAF
) &&

410 !(
m‘hodSts
->
©Œibu‹s
 & 
METHOD_CANNOT_COMPILE
)) {

412 ià(
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
)) {

413 
Ï¡MIRIn¢
->
O±imiz©iÚFÏgs
 |ğ
MIR_INVOKE_METHOD_JIT
;

416 
	`dvmCompeM‘hod
(
ÿÎ“M‘hod
, 
šfo
);

417 ià(
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
)) {

418 
Ï¡MIRIn¢
->
O±imiz©iÚFÏgs
 |=

419 
MIR_INVOKE_METHOD_JIT
;

421 
m‘hodSts
->
©Œibu‹s
 |ğ
METHOD_CANNOT_COMPILE
;

429 
	}
}

	@vm/compiler/IntermediateRep.cpp

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

21 
BasicBlock
 *
	$dvmComp”NewBB
(
BBTy³
 
blockTy³
, 
blockId
)

23 
BasicBlock
 *
bb
 = (BasicBlock *)
	`dvmComp”New
((BasicBlock), 
Œue
);

24 
bb
->
blockTy³
 = blockType;

25 
bb
->
id
 = 
blockId
;

26 
bb
->
´edeûssÜs
 = 
	`dvmComp”AÎocB™VeùÜ
(
blockId
 > 32 ? blockId : 32,

27 
Œue
 );

28  
bb
;

29 
	}
}

32 
	$dvmComp”Aµ’dMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
)

34 ià(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
) {

35 
	`as£¹
(
bb
->
Ï¡MIRIn¢
 =ğ
NULL
);

36 
bb
->
Ï¡MIRIn¢
 = bb->
fœ¡MIRIn¢
 = 
mœ
;

37 
mœ
->
´ev
 = mœ->
Ãxt
 = 
NULL
;

39 
bb
->
Ï¡MIRIn¢
->
Ãxt
 = 
mœ
;

40 
mœ
->
´ev
 = 
bb
->
Ï¡MIRIn¢
;

41 
mœ
->
Ãxt
 = 
NULL
;

42 
bb
->
Ï¡MIRIn¢
 = 
mœ
;

44 
	}
}

47 
	$dvmComp”P»³ndMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
)

49 ià(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
) {

50 
	`as£¹
(
bb
->
Ï¡MIRIn¢
 =ğ
NULL
);

51 
bb
->
Ï¡MIRIn¢
 = bb->
fœ¡MIRIn¢
 = 
mœ
;

52 
mœ
->
´ev
 = mœ->
Ãxt
 = 
NULL
;

54 
bb
->
fœ¡MIRIn¢
->
´ev
 = 
mœ
;

55 
mœ
->
Ãxt
 = 
bb
->
fœ¡MIRIn¢
;

56 
mœ
->
´ev
 = 
NULL
;

57 
bb
->
fœ¡MIRIn¢
 = 
mœ
;

59 
	}
}

62 
	$dvmComp”In£¹MIRAá”
(
BasicBlock
 *
bb
, 
MIR
 *
cu¼’tMIR
, MIR *
ÃwMIR
)

64 
ÃwMIR
->
´ev
 = 
cu¼’tMIR
;

65 
ÃwMIR
->
Ãxt
 = 
cu¼’tMIR
->next;

66 
cu¼’tMIR
->
Ãxt
 = 
ÃwMIR
;

68 ià(
ÃwMIR
->
Ãxt
) {

70 
ÃwMIR
->
Ãxt
->
´ev
 =‚ewMIR;

73 
bb
->
Ï¡MIRIn¢
 = 
ÃwMIR
;

75 
	}
}

81 
	$dvmComp”Aµ’dLIR
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
lœ
)

83 ià(
cUn™
->
fœ¡LIRIn¢
 =ğ
NULL
) {

84 
	`as£¹
(
cUn™
->
Ï¡LIRIn¢
 =ğ
NULL
);

85 
cUn™
->
Ï¡LIRIn¢
 = cUn™->
fœ¡LIRIn¢
 = 
lœ
;

86 
lœ
->
´ev
 =†œ->
Ãxt
 = 
NULL
;

88 
cUn™
->
Ï¡LIRIn¢
->
Ãxt
 = 
lœ
;

89 
lœ
->
´ev
 = 
cUn™
->
Ï¡LIRIn¢
;

90 
lœ
->
Ãxt
 = 
NULL
;

91 
cUn™
->
Ï¡LIRIn¢
 = 
lœ
;

93 
	}
}

101 
	$dvmComp”In£¹LIRBefÜe
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
)

103 
	`as£¹
(
cu¼’tLIR
->
´ev
 !ğ
NULL
);

104 
LIR
 *
´evLIR
 = 
cu¼’tLIR
->
´ev
;

106 
´evLIR
->
Ãxt
 = 
ÃwLIR
;

107 
ÃwLIR
->
´ev
 = 
´evLIR
;

108 
ÃwLIR
->
Ãxt
 = 
cu¼’tLIR
;

109 
cu¼’tLIR
->
´ev
 = 
ÃwLIR
;

110 
	}
}

118 
	$dvmComp”In£¹LIRAá”
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
)

120 
ÃwLIR
->
´ev
 = 
cu¼’tLIR
;

121 
ÃwLIR
->
Ãxt
 = 
cu¼’tLIR
->next;

122 
cu¼’tLIR
->
Ãxt
 = 
ÃwLIR
;

123 
ÃwLIR
->
Ãxt
->
´ev
 =‚ewLIR;

124 
	}
}

	@vm/compiler/Loop.cpp

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

19 
	~"D©aæow.h
"

20 
	~"Loİ.h
"

22 
	#DEBUG_LOOP
(
X
)

	)

26 
	$dumpCÚ¡ªts
(
Comp©iÚUn™
 *
cUn™
)

28 
i
;

29 
	`ALOGE
("LOOP s¹šg off£t: %x", 
cUn™
->
’ŒyBlock
->
¡¬tOff£t
);

30 
i
 = 0; i < 
cUn™
->
numSSARegs
; i++) {

31 ià(
	`dvmIsB™S‘
(
cUn™
->
isCÚ¡ªtV
, 
i
)) {

32 
subNReg
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
i
);

33 
	`ALOGE
("CONST: s%d(v%d_%dèha %d", 
i
,

34 
	`DECODE_REG
(
subNReg
), 
	`DECODE_SUB
(subNReg),

35 
cUn™
->
cÚ¡ªtV®ues
[
i
]);

38 
	}
}

40 
	$dumpIVLi¡
(
Comp©iÚUn™
 *
cUn™
)

42 
i
;

43 
GrowabËLi¡
 *
ivLi¡
 = 
cUn™
->
loİAÇlysis
->ivList;

45 
i
 = 0; i < 
ivLi¡
->
numU£d
; i++) {

46 
InduùiÚV¬ŸbËInfo
 *
ivInfo
 =

47 (
InduùiÚV¬ŸbËInfo
 *è
ivLi¡
->
–emLi¡
[
i
];

48 
iv
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
ivInfo
->
s§Reg
);

50 ià(
ivInfo
->
s§Reg
 =ğivInfo->
basicSSAReg
) {

51 
	`ALOGE
("BIV %d: s%d(v%d_%dè+ %d", 
i
,

52 
ivInfo
->
s§Reg
,

53 
	`DECODE_REG
(
iv
), 
	`DECODE_SUB
(iv),

54 
ivInfo
->
šc
);

57 
biv
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
ivInfo
->
basicSSAReg
);

59 
	`ALOGE
("DIV %d: s%d(v%d_%dèğ%d * s%d(v%d_%dè+ %d", 
i
,

60 
ivInfo
->
s§Reg
,

61 
	`DECODE_REG
(
iv
), 
	`DECODE_SUB
(iv),

62 
ivInfo
->
m
,

63 
ivInfo
->
basicSSAReg
,

64 
	`DECODE_REG
(
biv
), 
	`DECODE_SUB
(biv),

65 
ivInfo
->
c
);

68 
	}
}

70 
	$dumpHoi¡edChecks
(
Comp©iÚUn™
 *
cUn™
)

72 
LoİAÇlysis
 *
loİAÇlysis
 = 
cUn™
->loopAnalysis;

73 
i
;

75 
i
 = 0; i < 
loİAÇlysis
->
¬¿yAcûssInfo
->
numU£d
; i++) {

76 
A¼ayAcûssInfo
 *
¬¿yAcûssInfo
 =

77 
	`GET_ELEM_N
(
loİAÇlysis
->
¬¿yAcûssInfo
,

78 
A¼ayAcûssInfo
*, 
i
);

79 
¬¿yReg
 = 
	`DECODE_REG
(

80 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
¬¿yAcûssInfo
->
¬¿yReg
));

81 
idxReg
 = 
	`DECODE_REG
(

82 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
¬¿yAcûssInfo
->
ivReg
));

83 
	`ALOGE
("A¼ay‡cûs %d", 
i
);

84 
	`ALOGE
("‡¼ayReg %d", 
¬¿yReg
);

85 
	`ALOGE
(" idxReg %d", 
idxReg
);

86 
	`ALOGE
("ƒndReg %d", 
loİAÇlysis
->
’dCÚd™iÚReg
);

87 
	`ALOGE
(" maxC %d", 
¬¿yAcûssInfo
->
maxC
);

88 
	`ALOGE
(" mšC %d", 
¬¿yAcûssInfo
->
mšC
);

89 
	`ALOGE
(" opcod%d", 
loİAÇlysis
->
loİB¿nchOpcode
);

91 
	}
}

95 
BasicBlock
 *
	$fšdP»deûssÜBlock
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
,

96 cÚ¡ 
BasicBlock
 *
bb
)

98 
numP»d
 = 
	`dvmCouÁS‘B™s
(
bb
->
´edeûssÜs
);

99 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

100 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
´edeûssÜs
, &
bvI‹¿tÜ
);

102 ià(
numP»d
 == 1) {

103 
´edIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

104  (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(&
cUn™
->
blockLi¡
,

105 
´edIdx
);

107 } ià((
numP»d
 == 2) &&

108 
	`dvmIsB™S‘
(
bb
->
´edeûssÜs
, 
cUn™
->
’ŒyBlock
->
id
)) {

109 
Œue
) {

110 
´edIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

111 ià(
´edIdx
 =ğ
cUn™
->
’ŒyBlock
->
id
) ;

112  (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(&
cUn™
->
blockLi¡
,

113 
´edIdx
);

117  
NULL
;

119 
	}
}

122 
Opcode
 
	$Ãg©eOpcode
(
Opcode
 
İcode
)

124 
İcode
) {

126 
OP_IF_EQ
:

127  
OP_IF_NE
;

128 
OP_IF_NE
:

129  
OP_IF_EQ
;

130 
OP_IF_LT
:

131  
OP_IF_GE
;

132 
OP_IF_GE
:

133  
OP_IF_LT
;

134 
OP_IF_GT
:

135  
OP_IF_LE
;

136 
OP_IF_LE
:

137  
OP_IF_GT
;

139 
OP_IF_EQZ
:

140  
OP_IF_NEZ
;

141 
OP_IF_NEZ
:

142  
OP_IF_EQZ
;

143 
OP_IF_LTZ
:

144  
OP_IF_GEZ
;

145 
OP_IF_GEZ
:

146  
OP_IF_LTZ
;

147 
OP_IF_GTZ
:

148  
OP_IF_LEZ
;

149 
OP_IF_LEZ
:

150  
OP_IF_GTZ
;

152 
	`ALOGE
("İcod%d cªnÙ bÃg©ed", 
İcode
);

153 
	`dvmAbÜt
();

156  (
Opcode
)-1;

157 
	}
}

170 
boŞ
 
	$isSim¶eCouÁedLoİ
(
Comp©iÚUn™
 *
cUn™
)

172 
i
;

173 
BasicBlock
 *
loİBackBlock
 = 
cUn™
->
’ŒyBlock
->
çÎThrough
;

174 
LoİAÇlysis
 *
loİAÇlysis
 = 
cUn™
->loopAnalysis;

176 ià(
loİAÇlysis
->
numBasicIV
 !ğ1è 
çl£
;

177 
i
 = 0; i < 
loİAÇlysis
->
ivLi¡
->
numU£d
; i++) {

178 
InduùiÚV¬ŸbËInfo
 *
ivInfo
;

180 
ivInfo
 = 
	`GET_ELEM_N
(
loİAÇlysis
->
ivLi¡
, 
InduùiÚV¬ŸbËInfo
*, 
i
);

182 ià(
ivInfo
->
s§Reg
 =ğivInfo->
basicSSAReg
) {

184 ià(
ivInfo
->
šc
 == 0) {

185  
çl£
;

187 
loİAÇlysis
->
isCouÁUpLoİ
 = 
ivInfo
->
šc
 > 0;

193 
Œue
) {

194 
loİBackBlock
 = 
	`fšdP»deûssÜBlock
(
cUn™
,†oopBackBlock);

196 ià(
loİBackBlock
 =ğ
NULL
) {

197  
çl£
;

200 ià(
loİBackBlock
->
k’
 =ğ
NULL
) {

206 
MIR
 *
b¿nch
 = 
loİBackBlock
->
Ï¡MIRIn¢
;

207 
Opcode
 
İcode
 = 
b¿nch
->
d®vikIn¢
.opcode;

210 ià(
	`dexG‘FÏgsFromOpcode
(
İcode
è!ğ(
kIn¡rCªCÚtšue
|
kIn¡rCªB¿nch
)) {

211  
çl£
;

214 
’dSSAReg
;

215 
’dD®vikReg
;

218 ià(
b¿nch
->
s§R•
->
numU£s
 == 2) {

219 ià(
b¿nch
->
s§R•
->
u£s
[0] =ğ
loİAÇlysis
->
s§BIV
) {

220 
’dSSAReg
 = 
b¿nch
->
s§R•
->
u£s
[1];

221 } ià(
b¿nch
->
s§R•
->
u£s
[1] =ğ
loİAÇlysis
->
s§BIV
) {

222 
’dSSAReg
 = 
b¿nch
->
s§R•
->
u£s
[0];

223 
İcode
 = 
	`Ãg©eOpcode
(opcode);

225  
çl£
;

227 
’dD®vikReg
 = 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
’dSSAReg
);

235 ià((
	`DECODE_SUB
(
’dD®vikReg
) != 0) &&

236 !
	`dvmIsB™S‘
(
cUn™
->
isCÚ¡ªtV
, 
’dSSAReg
)) {

237  
çl£
;

240 } ià(
b¿nch
->
s§R•
->
numU£s
 == 1) {

241 ià(
b¿nch
->
s§R•
->
u£s
[0] =ğ
loİAÇlysis
->
s§BIV
) {

243 
’dD®vikReg
 = -1;

245  
çl£
;

248  
çl£
;

252 ià(
loİBackBlock
->
k’
->
blockTy³
 =ğ
kD®vikBy‹Code
) {

253 
İcode
 = 
	`Ãg©eOpcode
(opcode);

256 ià(
loİAÇlysis
->
isCouÁUpLoİ
) {

261 
İcode
) {

262 
OP_IF_GT
:

263 
OP_IF_GE
:

266  
çl£
;

268 
loİAÇlysis
->
’dCÚd™iÚReg
 = 
	`DECODE_REG
(
’dD®vikReg
);

274 
İcode
) {

275 
OP_IF_LT
:

276 
OP_IF_LE
:

277 
loİAÇlysis
->
’dCÚd™iÚReg
 = 
	`DECODE_REG
(
’dD®vikReg
);

279 
OP_IF_LTZ
:

280 
OP_IF_LEZ
:

283  
çl£
;

290 
loİAÇlysis
->
loİB¿nchOpcode
 = 
İcode
;

291  
Œue
;

292 
	}
}

299 
	$upd©eRªgeCheckInfo
(
Comp©iÚUn™
 *
cUn™
, 
¬¿yReg
,

300 
idxReg
)

302 
InduùiÚV¬ŸbËInfo
 *
ivInfo
;

303 
LoİAÇlysis
 *
loİAÇlysis
 = 
cUn™
->loopAnalysis;

304 
i
, 
j
;

306 
i
 = 0; i < 
loİAÇlysis
->
ivLi¡
->
numU£d
; i++) {

307 
ivInfo
 = 
	`GET_ELEM_N
(
loİAÇlysis
->
ivLi¡
, 
InduùiÚV¬ŸbËInfo
*, 
i
);

308 ià(
ivInfo
->
s§Reg
 =ğ
idxReg
) {

309 
A¼ayAcûssInfo
 *
¬¿yAcûssInfo
 = 
NULL
;

310 
j
 = 0; j < 
loİAÇlysis
->
¬¿yAcûssInfo
->
numU£d
; j++) {

311 
A¼ayAcûssInfo
 *
exi¡šgA¼ayAcûssInfo
 =

312 
	`GET_ELEM_N
(
loİAÇlysis
->
¬¿yAcûssInfo
,

313 
A¼ayAcûssInfo
*,

314 
j
);

315 ià(
exi¡šgA¼ayAcûssInfo
->
¬¿yReg
 ==‡rrayReg) {

316 ià(
ivInfo
->
c
 > 
exi¡šgA¼ayAcûssInfo
->
maxC
) {

317 
exi¡šgA¼ayAcûssInfo
->
maxC
 = 
ivInfo
->
c
;

319 ià(
ivInfo
->
c
 < 
exi¡šgA¼ayAcûssInfo
->
mšC
) {

320 
exi¡šgA¼ayAcûssInfo
->
mšC
 = 
ivInfo
->
c
;

322 
¬¿yAcûssInfo
 = 
exi¡šgA¼ayAcûssInfo
;

326 ià(
¬¿yAcûssInfo
 =ğ
NULL
) {

327 
¬¿yAcûssInfo
 =

328 (
A¼ayAcûssInfo
 *)
	`dvmComp”New
((ArrayAccessInfo),

329 
çl£
);

330 
¬¿yAcûssInfo
->
ivReg
 = 
ivInfo
->
basicSSAReg
;

331 
¬¿yAcûssInfo
->
¬¿yReg
 =‡rrayReg;

332 
¬¿yAcûssInfo
->
maxC
 = (
ivInfo
->
c
 > 0) ? ivInfo->c : 0;

333 
¬¿yAcûssInfo
->
mšC
 = (
ivInfo
->
c
 < 0) ? ivInfo->c : 0;

334 
	`dvmIn£¹GrowabËLi¡
(
loİAÇlysis
->
¬¿yAcûssInfo
,

335 (
šŒ_t
è
¬¿yAcûssInfo
);

340 
	}
}

343 
boŞ
 
	$doLoİBodyCodeMÙiÚ
(
Comp©iÚUn™
 *
cUn™
)

345 
BasicBlock
 *
loİBody
 = 
cUn™
->
’ŒyBlock
->
çÎThrough
;

346 
MIR
 *
mœ
;

347 
boŞ
 
loİBodyCªThrow
 = 
çl£
;

349 
mœ
 = 
loİBody
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

350 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

351 
dfA‰ribu‹s
 =

352 
dvmComp”D©aFlowA‰ribu‹s
[
mœ
->
d®vikIn¢
.
İcode
];

355 ià(
dIn¢
->
İcode
 >ğ
kNumPackedOpcodes
) ;

357 
š¡rFÏgs
 = 
	`dexG‘FÏgsFromOpcode
(
dIn¢
->
İcode
);

360 ià((
š¡rFÏgs
 & 
kIn¡rCªThrow
) == 0) ;

366 ià(!(
dfA‰ribu‹s
 & 
DF_HAS_NR_CHECKS
)) {

367 
loİBodyCªThrow
 = 
Œue
;

375 ià(
dfA‰ribu‹s
 & 
DF_HAS_NR_CHECKS
) {

381 
»fIdx
;

382 
dfA‰ribu‹s
 & 
DF_HAS_NR_CHECKS
) {

383 
DF_NULL_N_RANGE_CHECK_0
:

384 
»fIdx
 = 0;

386 
DF_NULL_N_RANGE_CHECK_1
:

387 
»fIdx
 = 1;

389 
DF_NULL_N_RANGE_CHECK_2
:

390 
»fIdx
 = 2;

393 
»fIdx
 = 0;

394 
	`ALOGE
("Jit: bad case in doLoopBodyCodeMotion");

395 
	`dvmComp”AbÜt
(
cUn™
);

398 
u£Idx
 = 
»fIdx
 + 1;

399 
subNRegA¼ay
 =

400 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
mœ
->
s§R•
->
u£s
[
»fIdx
]);

401 
¬¿ySub
 = 
	`DECODE_SUB
(
subNRegA¼ay
);

407 ià(
¬¿ySub
 != 0) {

408 
loİBodyCªThrow
 = 
Œue
;

416 ià(
	`dvmIsB™S‘
(
cUn™
->
loİAÇlysis
->
isIndV¬V
,

417 
mœ
->
s§R•
->
u£s
[
u£Idx
])) {

418 
mœ
->
O±imiz©iÚFÏgs
 |=

419 
MIR_IGNORE_RANGE_CHECK
 | 
MIR_IGNORE_NULL_CHECK
;

420 
	`upd©eRªgeCheckInfo
(
cUn™
, 
mœ
->
s§R•
->
u£s
[
»fIdx
],

421 
mœ
->
s§R•
->
u£s
[
u£Idx
]);

426  !
loİBodyCªThrow
;

427 
	}
}

429 
	$g’Hoi¡edChecks
(
Comp©iÚUn™
 *
cUn™
)

431 
i
;

432 
BasicBlock
 *
’Œy
 = 
cUn™
->
’ŒyBlock
;

433 
LoİAÇlysis
 *
loİAÇlysis
 = 
cUn™
->loopAnalysis;

434 
glob®MaxC
 = 0;

435 
glob®MšC
 = 0;

437 
idxReg
 = 0;

439 
i
 = 0; i < 
loİAÇlysis
->
¬¿yAcûssInfo
->
numU£d
; i++) {

440 
A¼ayAcûssInfo
 *
¬¿yAcûssInfo
 =

441 
	`GET_ELEM_N
(
loİAÇlysis
->
¬¿yAcûssInfo
,

442 
A¼ayAcûssInfo
*, 
i
);

443 
¬¿yReg
 = 
	`DECODE_REG
(

444 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
¬¿yAcûssInfo
->
¬¿yReg
));

445 
idxReg
 = 
	`DECODE_REG
(

446 
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
¬¿yAcûssInfo
->
ivReg
));

448 
MIR
 *
¿ngeCheckMIR
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

449 
¿ngeCheckMIR
->
d®vikIn¢
.
İcode
 = (
loİAÇlysis
->
isCouÁUpLoİ
) ?

450 (
Opcode
)
kMœOpNuÎNRªgeUpCheck
 : (Opcode)
kMœOpNuÎNRªgeDownCheck
;

451 
¿ngeCheckMIR
->
d®vikIn¢
.
vA
 = 
¬¿yReg
;

452 
¿ngeCheckMIR
->
d®vikIn¢
.
vB
 = 
idxReg
;

453 
¿ngeCheckMIR
->
d®vikIn¢
.
vC
 = 
loİAÇlysis
->
’dCÚd™iÚReg
;

454 
¿ngeCheckMIR
->
d®vikIn¢
.
¬g
[0] = 
¬¿yAcûssInfo
->
maxC
;

455 
¿ngeCheckMIR
->
d®vikIn¢
.
¬g
[1] = 
¬¿yAcûssInfo
->
mšC
;

456 
¿ngeCheckMIR
->
d®vikIn¢
.
¬g
[2] = 
loİAÇlysis
->
loİB¿nchOpcode
;

457 
	`dvmComp”Aµ’dMIR
(
’Œy
, 
¿ngeCheckMIR
);

458 ià(
¬¿yAcûssInfo
->
maxC
 > 
glob®MaxC
) {

459 
glob®MaxC
 = 
¬¿yAcûssInfo
->
maxC
;

461 ià(
¬¿yAcûssInfo
->
mšC
 < 
glob®MšC
) {

462 
glob®MšC
 = 
¬¿yAcûssInfo
->
mšC
;

466 ià(
loİAÇlysis
->
¬¿yAcûssInfo
->
numU£d
 != 0) {

467 ià(
loİAÇlysis
->
isCouÁUpLoİ
) {

468 
MIR
 *
boundCheckMIR
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

469 
boundCheckMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpLow”Bound
;

470 
boundCheckMIR
->
d®vikIn¢
.
vA
 = 
idxReg
;

471 
boundCheckMIR
->
d®vikIn¢
.
vB
 = 
glob®MšC
;

472 
	`dvmComp”Aµ’dMIR
(
’Œy
, 
boundCheckMIR
);

474 ià(
loİAÇlysis
->
loİB¿nchOpcode
 =ğ
OP_IF_LT
 ||

475 
loİAÇlysis
->
loİB¿nchOpcode
 =ğ
OP_IF_LE
) {

476 
MIR
 *
boundCheckMIR
 = (MIR *)
	`dvmComp”New
((MIR), 
Œue
);

477 
boundCheckMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpLow”Bound
;

478 
boundCheckMIR
->
d®vikIn¢
.
vA
 = 
loİAÇlysis
->
’dCÚd™iÚReg
;

479 
boundCheckMIR
->
d®vikIn¢
.
vB
 = 
glob®MšC
;

486 ià(
loİAÇlysis
->
loİB¿nchOpcode
 =ğ
OP_IF_LE
) {

487 
boundCheckMIR
->
d®vikIn¢
.
vB
++;

489 
	`dvmComp”Aµ’dMIR
(
’Œy
, 
boundCheckMIR
);

490 } ià(
loİAÇlysis
->
loİB¿nchOpcode
 =ğ
OP_IF_LTZ
) {

492 ià(
glob®MšC
 < 0) {

493 
MIR
 *
boundCheckMIR
 = (MIR *)
	`dvmComp”New
((MIR),

494 
Œue
);

495 
boundCheckMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpPuÁ
;

496 
	`dvmComp”Aµ’dMIR
(
’Œy
, 
boundCheckMIR
);

498 } ià(
loİAÇlysis
->
loİB¿nchOpcode
 =ğ
OP_IF_LEZ
) {

500 ià(
glob®MšC
 < -1) {

501 
MIR
 *
boundCheckMIR
 = (MIR *)
	`dvmComp”New
((MIR),

502 
Œue
);

503 
boundCheckMIR
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpPuÁ
;

504 
	`dvmComp”Aµ’dMIR
(
’Œy
, 
boundCheckMIR
);

507 
	`ALOGE
("Jit: bad case in genHoistedChecks");

508 
	`dvmComp”AbÜt
(
cUn™
);

512 
	}
}

514 
	$»£tBlockEdges
(
BasicBlock
 *
bb
)

516 
bb
->
k’
 = 
NULL
;

517 
bb
->
çÎThrough
 = 
NULL
;

518 
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 = 
kNÙU£d
;

519 
	}
}

521 
boŞ
 
	$ş—rP»deûssÜVeùÜ
(
Comp©iÚUn™
 *
cUn™
,

522 
BasicBlock
 *
bb
)

524 
	`dvmCË¬AÎB™s
(
bb
->
´edeûssÜs
);

525  
çl£
;

526 
	}
}

528 
boŞ
 
	$dvmComp”F‹rLoİBlocks
(
Comp©iÚUn™
 *
cUn™
)

530 
BasicBlock
 *
fœ¡BB
 = 
cUn™
->
’ŒyBlock
->
çÎThrough
;

532 
numP»d
 = 
	`dvmCouÁS‘B™s
(
fœ¡BB
->
´edeûssÜs
);

536 ià(
numP»d
 < 2è 
çl£
;

538 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

541 
	`dvmCË¬AÎB™s
(
cUn™
->
‹mpBlockV
);

543 
	`dvmComp”S‘B™
(
cUn™
->
‹mpBlockV
, cUn™->
’ŒyBlock
->
id
);

544 
	`dvmComp”S‘B™
(
cUn™
->
‹mpBlockV
, 
fœ¡BB
->
id
);

546 
BasicBlock
 *
bodyBB
 = 
fœ¡BB
;

553 
Œue
) {

555 ià(
bodyBB
->
k’
 =ğ
fœ¡BB
) {

557 ià(
bodyBB
->
çÎThrough
 &&

558 
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
çÎThrough
->
id
)) {

559  
çl£
;

563 } ià(
bodyBB
->
çÎThrough
 =ğ
fœ¡BB
) {

565 ià(
bodyBB
->
k’
 &&

566 
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
k’
->
id
)) {

567  
çl£
;

574 ià(
bodyBB
->
çÎThrough
 &&

575 
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
çÎThrough
->
id
)) {

576  
çl£
;

578 ià(
bodyBB
->
k’
 &&

579 
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
k’
->
id
)) {

580  
çl£
;

583 ià(
bodyBB
->
çÎThrough
) {

584 ià(
bodyBB
->
çÎThrough
->
iDom
 == bodyBB) {

585 
bodyBB
 = bodyBB->
çÎThrough
;

586 
	`dvmComp”S‘B™
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
id
);

594 ià(
bodyBB
->
k’
) {

595 ià(
bodyBB
->
k’
->
iDom
 == bodyBB) {

596 
bodyBB
 = bodyBB->
k’
;

597 
	`dvmComp”S‘B™
(
cUn™
->
‹mpBlockV
, 
bodyBB
->
id
);

609  
çl£
;

614 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

615 
	`dvmGrowabËLi¡I‹¿tÜIn™
(
blockLi¡
, &
™”©Ü
);

616 
Œue
) {

617 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

618 ià(
bb
 =ğ
NULL
) ;

619 ià(!
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bb
->
id
)) {

620 
bb
->
hidd’
 = 
Œue
;

622 
bb
->
fœ¡MIRIn¢
 = bb->
Ï¡MIRIn¢
 = 
NULL
;

623 
	`»£tBlockEdges
(
bb
);

627 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
ş—rP»deûssÜVeùÜ
,

628 
kAÎNodes
, 
çl£
 );

630 
	`dvmGrowabËLi¡I‹¿tÜIn™
(
blockLi¡
, &
™”©Ü
);

631 
Œue
) {

632 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

633 ià(
bb
 =ğ
NULL
) ;

634 ià(
	`dvmIsB™S‘
(
cUn™
->
‹mpBlockV
, 
bb
->
id
)) {

635 ià(
bb
->
k’
) {

640 ià(
bb
->
k’
 =ğ
cUn™
->
ex™Block
) {

641  
çl£
;

643 ià(
bb
->
k’
->
hidd’
) {

644 
bb
->
k’
->
blockTy³
 = 
kChaššgC–lNÜm®
;

645 
bb
->
k’
->
hidd’
 = 
çl£
;

647 
	`dvmComp”S‘B™
(
bb
->
k’
->
´edeûssÜs
, bb->
id
);

649 ià(
bb
->
çÎThrough
) {

654 ià(
bb
->
çÎThrough
 =ğ
cUn™
->
ex™Block
) {

655  
çl£
;

657 ià(
bb
->
çÎThrough
->
hidd’
) {

658 
bb
->
çÎThrough
->
blockTy³
 = 
kChaššgC–lNÜm®
;

659 
bb
->
çÎThrough
->
hidd’
 = 
çl£
;

661 
	`dvmComp”S‘B™
(
bb
->
çÎThrough
->
´edeûssÜs
, bb->
id
);

664 
	`as£¹
(
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 =ğ
kNÙU£d
);

667  
Œue
;

668 
	}
}

674 
boŞ
 
	$dvmComp”LoİO±
(
Comp©iÚUn™
 *
cUn™
)

676 
LoİAÇlysis
 *
loİAÇlysis
 =

677 (
LoİAÇlysis
 *)
	`dvmComp”New
((LoİAÇlysis), 
Œue
);

678 
cUn™
->
loİAÇlysis
 =†oopAnalysis;

681 
cUn™
->
isCÚ¡ªtV
 = 
	`dvmComp”AÎocB™VeùÜ
(cUn™->
numSSARegs
, 
çl£
);

682 
cUn™
->
cÚ¡ªtV®ues
 =

683 (*)
	`dvmComp”New
((è* 
cUn™
->
numSSARegs
,

684 
Œue
);

685 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
,

686 
dvmComp”DoCÚ¡ªtPrİag©iÚ
,

687 
kAÎNodes
,

688 
çl£
 );

689 
	`DEBUG_LOOP
(
	`dumpCÚ¡ªts
(
cUn™
);)

692 
loİAÇlysis
->
ivLi¡
 =

693 (
GrowabËLi¡
 *)
	`dvmComp”New
((GrowabËLi¡), 
Œue
);

694 
	`dvmIn™GrowabËLi¡
(
loİAÇlysis
->
ivLi¡
, 4);

695 
loİAÇlysis
->
isIndV¬V
 = 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numSSARegs
, 
çl£
);

696 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
,

697 
dvmComp”FšdInduùiÚV¬ŸbËs
,

698 
kAÎNodes
,

699 
çl£
 );

700 
	`DEBUG_LOOP
(
	`dumpIVLi¡
(
cUn™
);)

703 ià(!
	`isSim¶eCouÁedLoİ
(
cUn™
))

704  
çl£
;

706 
loİAÇlysis
->
¬¿yAcûssInfo
 =

707 (
GrowabËLi¡
 *)
	`dvmComp”New
((GrowabËLi¡), 
Œue
);

708 
	`dvmIn™GrowabËLi¡
(
loİAÇlysis
->
¬¿yAcûssInfo
, 4);

709 
loİAÇlysis
->
bodyIsCËª
 = 
	`doLoİBodyCodeMÙiÚ
(
cUn™
);

710 
	`DEBUG_LOOP
(
	`dumpHoi¡edChecks
(
cUn™
);)

716 
	`g’Hoi¡edChecks
(
cUn™
);

717  
Œue
;

718 
	}
}

723 
	$dvmComp”In£¹Backw¬dChaššg
(
Comp©iÚUn™
 *
cUn™
)

731 #ià!
	`defšed
(
WITH_SELF_VERIFICATION
)

732 ià(
gDvmJ™
.
´ofeMode
 !ğ
kT¿ûProfšgCÚtšuous
 &&

733 
gDvmJ™
.
´ofeMode
 !ğ
kT¿ûProfšgP”iodicOn
) {

743 
BasicBlock
 *
fœ¡BB
 = 
cUn™
->
’ŒyBlock
->
çÎThrough
;

744 
BasicBlock
 *
backB¿nchBB
 = 
	`fšdP»deûssÜBlock
(
cUn™
, 
fœ¡BB
);

745 ià(
backB¿nchBB
->
k’
 =ğ
fœ¡BB
) {

746 
backB¿nchBB
->
k’
 = 
cUn™
->
backChašBlock
;

748 
	`as£¹
(
backB¿nchBB
->
çÎThrough
 =ğ
fœ¡BB
);

749 
backB¿nchBB
->
çÎThrough
 = 
cUn™
->
backChašBlock
;

751 
cUn™
->
backChašBlock
->
¡¬tOff£t
 = 
fœ¡BB
->startOffset;

752 
	}
}

	@vm/compiler/Loop.h

17 #iâdeà
DALVIK_VM_LOOP_H_


18 
	#DALVIK_VM_LOOP_H_


	)

20 
	~"D®vik.h
"

21 
	~"Comp”IÁ”Çls.h
"

23 
	sLoİAÇlysis
 {

24 
B™VeùÜ
 *
	misIndV¬V
;

25 
GrowabËLi¡
 *
	mivLi¡
;

26 
GrowabËLi¡
 *
	m¬¿yAcûssInfo
;

27 
	mnumBasicIV
;

28 
	ms§BIV
;

29 
boŞ
 
	misCouÁUpLoİ
;

30 
Opcode
 
	mloİB¿nchOpcode
;

31 
	m’dCÚd™iÚReg
;

32 
LIR
 *
	mb¿nchToBody
;

33 
LIR
 *
	mb¿nchToPCR
;

34 
boŞ
 
	mbodyIsCËª
;

35 } 
	tLoİAÇlysis
;

37 
boŞ
 
dvmComp”F‹rLoİBlocks
(
Comp©iÚUn™
 *
cUn™
);

43 
	#BAIL_LOOP_COMPILATION
(èià(
cUn™
->
j™Mode
 =ğ
kJ™Loİ
) { \

44 
cUn™
->
qu™LoİMode
 = 
Œue
; \

45  
çl£
; \

46 }

	)

	@vm/compiler/Ralloc.cpp

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

19 
	~"D©aæow.h
"

27 
	$šãrTy³s
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

29 
MIR
 *
mœ
;

30 ià(
bb
->
blockTy³
 !ğ
kD®vikBy‹Code
 && bb->blockTy³ !ğ
kEÁryBlock
)

33 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

34 
SSAR•»£Á©iÚ
 *
s§R•
 = 
mœ
->ssaRep;

35 ià(
s§R•
) {

36 
i
;

37 
i
=0; 
s§R•
->
åU£
 && i< s§R•->
numU£s
; i++) {

38 ià(
s§R•
->
åU£
[
i
])

39 
cUn™
->
»gLoÿtiÚ
[
s§R•
->
u£s
[
i
]].
å
 = 
Œue
;

41 
i
=0; 
s§R•
->
åDef
 && i< s§R•->
numDefs
; i++) {

42 ià(
s§R•
->
åDef
[
i
])

43 
cUn™
->
»gLoÿtiÚ
[
s§R•
->
defs
[
i
]].
å
 = 
Œue
;

47 
	}
}

49 cÚ¡ 
RegLoÿtiÚ
 
	gäeshLoc
 = {
kLocD®vikF¿me
, 0, 0, 
INVALID_REG
,

50 
INVALID_REG
, 
INVALID_SREG
};

57 
	$dvmComp”LoÿlRegAÎoc
(
Comp©iÚUn™
 *
cUn™
)

59 
i
;

60 
RegLoÿtiÚ
 *
loc
;

63 
loc
 = (
RegLoÿtiÚ
*)
	`dvmComp”New
(
cUn™
->
numSSARegs
 * (*loc), 
Œue
);

64 
i
=0; i< 
cUn™
->
numSSARegs
; i++) {

65 
loc
[
i
] = 
äeshLoc
;

66 
loc
[
i
].
sRegLow
 = i;

68 
cUn™
->
»gLoÿtiÚ
 = 
loc
;

70 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

72 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

74 
Œue
) {

75 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

76 ià(
bb
 =ğ
NULL
) ;

77 
	`šãrTy³s
(
cUn™
, 
bb
);

81 
i
=0; i < 
cUn™
->
numSSARegs
; i++) {

82 
cUn™
->
»gLoÿtiÚ
[
i
].
sRegLow
 =

83 
	`DECODE_REG
(
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
loc
[
i
].
sRegLow
));

85 
	}
}

	@vm/compiler/SSATransformation.cpp

17 
	~"D®vik.h
"

18 
	~"D©aæow.h
"

19 
	~"Loİ.h
"

20 
	~"libdex/DexOpcodes.h
"

23 
	$»cÜdDFSP»Ord”
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
block
)

26 ià(
block
->
vis™ed
 || block->
hidd’
) ;

27 
block
->
vis™ed
 = 
Œue
;

30 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
dfsOrd”
, 
block
->
id
);

32 ià(
block
->
çÎThrough
è
	`»cÜdDFSP»Ord”
(
cUn™
, block->fallThrough);

33 ià(
block
->
k’
è
	`»cÜdDFSP»Ord”
(
cUn™
, block->taken);

34 ià(
block
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

35 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

36 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
block
->
sucûssÜBlockLi¡
.
blocks
,

37 &
™”©Ü
);

38 
Œue
) {

39 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

40 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

41 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

42 
BasicBlock
 *
succBB
 = 
sucûssÜBlockInfo
->
block
;

43 
	`»cÜdDFSP»Ord”
(
cUn™
, 
succBB
);

47 
	}
}

50 
	$compu‹DFSOrd”
(
Comp©iÚUn™
 *
cUn™
)

53 ià(
cUn™
->
dfsOrd”
.
–emLi¡
 =ğ
NULL
) {

54 
	`dvmIn™GrowabËLi¡
(&
cUn™
->
dfsOrd”
, cUn™->
numBlocks
);

57 
cUn™
->
dfsOrd”
.
numU£d
 = 0;

60 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”CË¬Vis™edFÏg
,

61 
kAÎNodes
,

62 
çl£
 );

64 
	`»cÜdDFSP»Ord”
(
cUn™
, cUn™->
’ŒyBlock
);

65 
cUn™
->
numR—chabËBlocks
 = cUn™->
dfsOrd”
.
numU£d
;

66 
	}
}

72 
boŞ
 
	$flDefBlockM©rix
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

74 ià(
bb
->
d©aFlowInfo
 =ğ
NULL
è 
çl£
;

76 
B™VeùÜI‹¿tÜ
 
™”©Ü
;

78 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
d©aFlowInfo
->
defV
, &
™”©Ü
);

79 
Œue
) {

80 
idx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
™”©Ü
);

81 ià(
idx
 == -1) ;

83 
	`dvmComp”S‘B™
(
cUn™
->
defBlockM©rix
[
idx
], 
bb
->
id
);

85  
Œue
;

86 
	}
}

88 
	$compu‹DefBlockM©rix
(
Comp©iÚUn™
 *
cUn™
)

90 
numRegi¡”s
 = 
cUn™
->
numD®vikRegi¡”s
;

92 
cUn™
->
defBlockM©rix
 = (
B™VeùÜ
 **)

93 
	`dvmComp”New
((
B™VeùÜ
 *è* 
numRegi¡”s
, 
Œue
);

94 
i
;

97 
i
 = 0; i < 
numRegi¡”s
; i++) {

98 
cUn™
->
defBlockM©rix
[
i
] = 
	`dvmComp”AÎocB™VeùÜ
(cUn™->
numBlocks
,

99 
çl£
);

101 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”FšdLoÿlLiveIn
,

102 
kAÎNodes
,

103 
çl£
 );

104 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
flDefBlockM©rix
,

105 
kAÎNodes
,

106 
çl£
 );

108 ià(
cUn™
->
j™Mode
 =ğ
kJ™M‘hod
) {

113 
šReg
 = 
cUn™
->
m‘hod
->
»gi¡”sSize
 - cUn™->m‘hod->
šsSize
;

114 ; 
šReg
 < 
cUn™
->
m‘hod
->
»gi¡”sSize
; inReg++) {

115 
	`dvmComp”S‘B™
(
cUn™
->
defBlockM©rix
[
šReg
],

116 
cUn™
->
’ŒyBlock
->
id
);

119 
	}
}

122 
	$compu‹DomPo¡Ord”T¿v”§l
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

124 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

125 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
iDomš©ed
, &
bvI‹¿tÜ
);

126 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

129 
Œue
) {

130 
bbIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

131 ià(
bbIdx
 == -1) ;

132 
BasicBlock
 *
domš©edBB
 =

133 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
bbIdx
);

134 
	`compu‹DomPo¡Ord”T¿v”§l
(
cUn™
, 
domš©edBB
);

138 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
domPo¡Ord”T¿v”§l
, 
bb
->
id
);

141 ià(
bb
->
k’
 && 
	`dvmIsB™S‘
(bb->
domš©Üs
, bb->k’->
id
)) {

142 
cUn™
->
hasLoİ
 = 
Œue
;

144 
	}
}

146 
	$checkFÜDomšªûFrÚt›r
(
BasicBlock
 *
domBB
,

147 cÚ¡ 
BasicBlock
 *
succBB
)

153 ià(
succBB
->
iDom
 !ğ
domBB
 &&

154 
succBB
->
blockTy³
 =ğ
kD®vikBy‹Code
 &&

155 
succBB
->
hidd’
 =ğ
çl£
) {

156 
	`dvmS‘B™
(
domBB
->
domFrÚt›r
, 
succBB
->
id
);

158 
	}
}

161 
boŞ
 
	$compu‹DomšªûFrÚt›r
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

163 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

166 ià(
bb
->
k’
) {

167 
	`checkFÜDomšªûFrÚt›r
(
bb
, bb->
k’
);

169 ià(
bb
->
çÎThrough
) {

170 
	`checkFÜDomšªûFrÚt›r
(
bb
, bb->
çÎThrough
);

172 ià(
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

173 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

174 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
bb
->
sucûssÜBlockLi¡
.
blocks
,

175 &
™”©Ü
);

176 
Œue
) {

177 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

178 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

179 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

180 
BasicBlock
 *
succBB
 = 
sucûssÜBlockInfo
->
block
;

181 
	`checkFÜDomšªûFrÚt›r
(
bb
, 
succBB
);

186 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

187 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
iDomš©ed
, &
bvI‹¿tÜ
);

188 
Œue
) {

189 
domš©edIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

190 ià(
domš©edIdx
 == -1) ;

191 
BasicBlock
 *
domš©edBB
 = (BasicBlock *)

192 
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
domš©edIdx
);

193 
B™VeùÜI‹¿tÜ
 
dfI‹¿tÜ
;

194 
	`dvmB™VeùÜI‹¿tÜIn™
(
domš©edBB
->
domFrÚt›r
, &
dfI‹¿tÜ
);

195 
Œue
) {

196 
dfUpIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
dfI‹¿tÜ
);

197 ià(
dfUpIdx
 == -1) ;

198 
BasicBlock
 *
dfUpBlock
 = (BasicBlock *)

199 
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
dfUpIdx
);

200 
	`checkFÜDomšªûFrÚt›r
(
bb
, 
dfUpBlock
);

204  
Œue
;

205 
	}
}

208 
boŞ
 
	$š™ŸlizeDomš©iÚInfo
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

210 
numTÙ®Blocks
 = 
cUn™
->
blockLi¡
.
numU£d
;

212 ià(
bb
->
domš©Üs
 =ğ
NULL
 ) {

213 
bb
->
domš©Üs
 = 
	`dvmComp”AÎocB™VeùÜ
(
numTÙ®Blocks
,

214 
çl£
 );

215 
bb
->
iDomš©ed
 = 
	`dvmComp”AÎocB™VeùÜ
(
numTÙ®Blocks
,

216 
çl£
 );

217 
bb
->
domFrÚt›r
 = 
	`dvmComp”AÎocB™VeùÜ
(
numTÙ®Blocks
,

218 
çl£
 );

220 
	`dvmCË¬AÎB™s
(
bb
->
domš©Üs
);

221 
	`dvmCË¬AÎB™s
(
bb
->
iDomš©ed
);

222 
	`dvmCË¬AÎB™s
(
bb
->
domFrÚt›r
);

225 
	`dvmS‘In™ŸlB™s
(
bb
->
domš©Üs
, 
numTÙ®Blocks
);

227  
Œue
;

228 
	}
}

231 
boŞ
 
	$compu‹BlockDomš©Üs
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

233 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

234 
numTÙ®Blocks
 = 
blockLi¡
->
numU£d
;

235 
B™VeùÜ
 *
‹mpBlockV
 = 
cUn™
->tempBlockV;

236 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

242 ià(
bb
 =ğ
cUn™
->
’ŒyBlock
è 
çl£
;

244 
	`dvmS‘In™ŸlB™s
(
‹mpBlockV
, 
numTÙ®Blocks
);

247 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
´edeûssÜs
, &
bvI‹¿tÜ
);

248 
Œue
) {

249 
´edIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

250 ià(
´edIdx
 == -1) ;

251 
BasicBlock
 *
´edBB
 = (BasicBlock *è
	`dvmGrowabËLi¡G‘EËm’t
(

252 
blockLi¡
, 
´edIdx
);

254 
	`dvmIÁ”£ùB™VeùÜs
(
‹mpBlockV
,empBlockV, 
´edBB
->
domš©Üs
);

256 
	`dvmS‘B™
(
‹mpBlockV
, 
bb
->
id
);

257 ià(
	`dvmCom·»B™VeùÜs
(
‹mpBlockV
, 
bb
->
domš©Üs
)) {

258 
	`dvmCİyB™VeùÜ
(
bb
->
domš©Üs
, 
‹mpBlockV
);

259  
Œue
;

261  
çl£
;

262 
	}
}

265 
boŞ
 
	$compu‹ImmedŸ‹Domš©Ü
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

267 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

268 
B™VeùÜ
 *
‹mpBlockV
 = 
cUn™
->tempBlockV;

269 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

270 
BasicBlock
 *
iDom
;

272 ià(
bb
 =ğ
cUn™
->
’ŒyBlock
è 
çl£
;

274 
	`dvmCİyB™VeùÜ
(
‹mpBlockV
, 
bb
->
domš©Üs
);

275 
	`dvmCË¬B™
(
‹mpBlockV
, 
bb
->
id
);

276 
	`dvmB™VeùÜI‹¿tÜIn™
(
‹mpBlockV
, &
bvI‹¿tÜ
);

279 
	`as£¹
(
	`dvmCouÁS‘B™s
(
‹mpBlockV
) != 0);

280 ià(
	`dvmCouÁS‘B™s
(
‹mpBlockV
) == 1) {

281 
iDom
 = (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(

282 
blockLi¡
, 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
));

283 
bb
->
iDom
 = iDom;

285 
iDomIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

286 
	`as£¹
(
iDomIdx
 != -1);

287 
Œue
) {

288 
ÃxtDom
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

289 ià(
ÃxtDom
 == -1) ;

290 
BasicBlock
 *
ÃxtDomBB
 = (BasicBlock *)

291 
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
ÃxtDom
);

293 ià(
	`dvmIsB™S‘
(
ÃxtDomBB
->
domš©Üs
, 
iDomIdx
)) {

294 
iDomIdx
 = 
ÃxtDom
;

298 
iDom
 = (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
iDomIdx
);

300 
bb
->
iDom
 = iDom;

303 
	`dvmComp”S‘B™
(
iDom
->
iDomš©ed
, 
bb
->
id
);

304  
Œue
;

305 
	}
}

308 
	$compu‹Domš©Üs
(
Comp©iÚUn™
 *
cUn™
)

310 
numR—chabËBlocks
 = 
cUn™
->numReachableBlocks;

311 
numTÙ®Blocks
 = 
cUn™
->
blockLi¡
.
numU£d
;

314 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
š™ŸlizeDomš©iÚInfo
,

315 
kR—chabËNodes
,

316 
çl£
 );

319 
	`dvmCË¬AÎB™s
(
cUn™
->
’ŒyBlock
->
domš©Üs
);

320 
	`dvmS‘B™
(
cUn™
->
’ŒyBlock
->
domš©Üs
, cUn™->’ŒyBlock->
id
);

322 ià(
cUn™
->
‹mpBlockV
 =ğ
NULL
) {

323 
cUn™
->
‹mpBlockV
 = 
	`dvmComp”AÎocB™VeùÜ
(
numTÙ®Blocks
,

324 
çl£
 );

326 
	`dvmCË¬AÎB™s
(
cUn™
->
‹mpBlockV
);

328 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
compu‹BlockDomš©Üs
,

329 
kP»Ord”DFST¿v”§l
,

330 
Œue
 );

332 
cUn™
->
’ŒyBlock
->
iDom
 = 
NULL
;

333 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
compu‹ImmedŸ‹Domš©Ü
,

334 
kR—chabËNodes
,

335 
çl£
 );

341 ià(
cUn™
->
domPo¡Ord”T¿v”§l
.
–emLi¡
 =ğ
NULL
) {

342 
	`dvmIn™GrowabËLi¡
(&
cUn™
->
domPo¡Ord”T¿v”§l
, 
numR—chabËBlocks
);

344 
cUn™
->
domPo¡Ord”T¿v”§l
.
numU£d
 = 0;

347 
	`compu‹DomPo¡Ord”T¿v”§l
(
cUn™
, cUn™->
’ŒyBlock
);

348 
	`as£¹
(
cUn™
->
domPo¡Ord”T¿v”§l
.
numU£d
 ==

349 (è
cUn™
->
numR—chabËBlocks
);

352 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
compu‹DomšªûFrÚt›r
,

353 
kPo¡Ord”DOMT¿v”§l
,

354 
çl£
 );

355 
	}
}

361 
	$compu‹SuccLiveIn
(
B™VeùÜ
 *
de¡
,

362 cÚ¡ 
B™VeùÜ
 *
¤c1
,

363 cÚ¡ 
B™VeùÜ
 *
¤c2
)

365 ià(
de¡
->
¡ÜageSize
 !ğ
¤c1
->storageSize ||

366 
de¡
->
¡ÜageSize
 !ğ
¤c2
->storageSize ||

367 
de¡
->
ex·ndabË
 !ğ
¤c1
->expandable ||

368 
de¡
->
ex·ndabË
 !ğ
¤c2
->expandable) {

369 
	`ALOGE
("Incompatible set…roperties");

370 
	`dvmAbÜt
();

373 
idx
;

374 
idx
 = 0; idx < 
de¡
->
¡ÜageSize
; idx++) {

375 
de¡
->
¡Üage
[
idx
] |ğ
¤c1
->¡Üage[idx] & ~
¤c2
->storage[idx];

377 
	}
}

384 
boŞ
 
	$compu‹BlockLiveIns
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

386 
B™VeùÜ
 *
‹mpD®vikRegi¡”V
 = 
cUn™
->tempDalvikRegisterV;

388 ià(
bb
->
d©aFlowInfo
 =ğ
NULL
è 
çl£
;

389 
	`dvmCİyB™VeùÜ
(
‹mpD®vikRegi¡”V
, 
bb
->
d©aFlowInfo
->
liveInV
);

390 ià(
bb
->
k’
 && bb->k’->
d©aFlowInfo
)

391 
	`compu‹SuccLiveIn
(
‹mpD®vikRegi¡”V
, 
bb
->
k’
->
d©aFlowInfo
->
liveInV
,

392 
bb
->
d©aFlowInfo
->
defV
);

393 ià(
bb
->
çÎThrough
 && bb->çÎThrough->
d©aFlowInfo
)

394 
	`compu‹SuccLiveIn
(
‹mpD®vikRegi¡”V
,

395 
bb
->
çÎThrough
->
d©aFlowInfo
->
liveInV
,

396 
bb
->
d©aFlowInfo
->
defV
);

397 ià(
bb
->
sucûssÜBlockLi¡
.
blockLi¡Ty³
 !ğ
kNÙU£d
) {

398 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

399 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
bb
->
sucûssÜBlockLi¡
.
blocks
,

400 &
™”©Ü
);

401 
Œue
) {

402 
SucûssÜBlockInfo
 *
sucûssÜBlockInfo
 =

403 (
SucûssÜBlockInfo
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

404 ià(
sucûssÜBlockInfo
 =ğ
NULL
) ;

405 
BasicBlock
 *
succBB
 = 
sucûssÜBlockInfo
->
block
;

406 ià(
succBB
->
d©aFlowInfo
) {

407 
	`compu‹SuccLiveIn
(
‹mpD®vikRegi¡”V
,

408 
succBB
->
d©aFlowInfo
->
liveInV
,

409 
bb
->
d©aFlowInfo
->
defV
);

413 ià(
	`dvmCom·»B™VeùÜs
(
‹mpD®vikRegi¡”V
, 
bb
->
d©aFlowInfo
->
liveInV
)) {

414 
	`dvmCİyB™VeùÜ
(
bb
->
d©aFlowInfo
->
liveInV
, 
‹mpD®vikRegi¡”V
);

415  
Œue
;

417  
çl£
;

418 
	}
}

421 
	$š£¹PhiNodes
(
Comp©iÚUn™
 *
cUn™
)

423 
d®vikReg
;

424 cÚ¡ 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

425 
B™VeùÜ
 *
phiBlocks
 =

426 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numBlocks
, 
çl£
);

427 
B™VeùÜ
 *
tmpBlocks
 =

428 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numBlocks
, 
çl£
);

429 
B™VeùÜ
 *
šputBlocks
 =

430 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numBlocks
, 
çl£
);

432 
cUn™
->
‹mpD®vikRegi¡”V
 =

433 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numD®vikRegi¡”s
, 
çl£
);

435 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
compu‹BlockLiveIns
,

436 
kPo¡Ord”DFST¿v”§l
,

437 
Œue
 );

440 
d®vikReg
 = 0; d®vikReg < 
cUn™
->
numD®vikRegi¡”s
; dalvikReg++) {

441 
boŞ
 
chªge
;

442 
B™VeùÜI‹¿tÜ
 
™”©Ü
;

444 
	`dvmCİyB™VeùÜ
(
šputBlocks
, 
cUn™
->
defBlockM©rix
[
d®vikReg
]);

445 
	`dvmCË¬AÎB™s
(
phiBlocks
);

449 
chªge
 = 
çl£
;

450 
	`dvmCË¬AÎB™s
(
tmpBlocks
);

451 
	`dvmB™VeùÜI‹¿tÜIn™
(
šputBlocks
, &
™”©Ü
);

453 
Œue
) {

454 
idx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
™”©Ü
);

455 ià(
idx
 == -1) ;

456 
BasicBlock
 *
defBB
 =

457 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
idx
);

460 
	`dvmUnifyB™VeùÜs
(
tmpBlocks
,mpBlocks, 
defBB
->
domFrÚt›r
);

462 ià(
	`dvmCom·»B™VeùÜs
(
phiBlocks
, 
tmpBlocks
)) {

463 
chªge
 = 
Œue
;

464 
	`dvmCİyB™VeùÜ
(
phiBlocks
, 
tmpBlocks
);

470 
	`dvmCİyB™VeùÜ
(
šputBlocks
, 
phiBlocks
);

471 
	`dvmUnifyB™VeùÜs
(
šputBlocks
, inputBlocks,

472 
cUn™
->
defBlockM©rix
[
d®vikReg
]);

474 } 
chªge
);

480 
	`dvmB™VeùÜI‹¿tÜIn™
(
phiBlocks
, &
™”©Ü
);

481 
Œue
) {

482 
idx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
™”©Ü
);

483 ià(
idx
 == -1) ;

484 
BasicBlock
 *
phiBB
 =

485 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blockLi¡
, 
idx
);

487 ià(!
	`dvmIsB™S‘
(
phiBB
->
d©aFlowInfo
->
liveInV
, 
d®vikReg
)) ;

488 
MIR
 *
phi
 = (MIR *è
	`dvmComp”New
((MIR), 
Œue
);

489 
phi
->
d®vikIn¢
.
İcode
 = (
Opcode
)
kMœOpPhi
;

490 
phi
->
d®vikIn¢
.
vA
 = 
d®vikReg
;

491 
phi
->
off£t
 = 
phiBB
->
¡¬tOff£t
;

492 
	`dvmComp”P»³ndMIR
(
phiBB
, 
phi
);

495 
	}
}

501 
boŞ
 
	$š£¹PhiNodeO³¿nds
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

503 
B™VeùÜ
 *
s§RegV
 = 
cUn™
->
‹mpSSARegi¡”V
;

504 
B™VeùÜI‹¿tÜ
 
bvI‹¿tÜ
;

505 
GrowabËLi¡
 *
blockLi¡
 = &
cUn™
->blockList;

506 
MIR
 *
mœ
;

509 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

510 ià(
mœ
->
d®vikIn¢
.
İcode
 !ğ(
Opcode
)
kMœOpPhi
)

511  
Œue
;

512 
s§Reg
 = 
mœ
->
s§R•
->
defs
[0];

513 
’codedD®vikV®ue
 =

514 (è
	`dvmGrowabËLi¡G‘EËm’t
(
cUn™
->
s§ToD®vikM­
, 
s§Reg
);

515 
d®vikReg
 = 
	`DECODE_REG
(
’codedD®vikV®ue
);

517 
	`dvmCË¬AÎB™s
(
s§RegV
);

520 
	`dvmB™VeùÜI‹¿tÜIn™
(
bb
->
´edeûssÜs
, &
bvI‹¿tÜ
);

521 
Œue
) {

522 
´edIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
bvI‹¿tÜ
);

523 ià(
´edIdx
 == -1) ;

524 
BasicBlock
 *
´edBB
 = (BasicBlock *è
	`dvmGrowabËLi¡G‘EËm’t
(

525 
blockLi¡
, 
´edIdx
);

526 
’codedSSAV®ue
 =

527 
´edBB
->
d©aFlowInfo
->
d®vikToSSAM­
[
d®vikReg
];

528 
s§Reg
 = 
	`DECODE_REG
(
’codedSSAV®ue
);

529 
	`dvmS‘B™
(
s§RegV
, 
s§Reg
);

533 
numU£s
 = 
	`dvmCouÁS‘B™s
(
s§RegV
);

534 
mœ
->
s§R•
->
numU£s
 =‚umUses;

535 
mœ
->
s§R•
->
u£s
 =

536 (*è
	`dvmComp”New
((è* 
numU£s
, 
çl£
);

537 
mœ
->
s§R•
->
åU£
 =

538 (
boŞ
 *è
	`dvmComp”New
((boŞè* 
numU£s
, 
Œue
);

540 
B™VeùÜI‹¿tÜ
 
phiI‹¿tÜ
;

542 
	`dvmB™VeùÜI‹¿tÜIn™
(
s§RegV
, &
phiI‹¿tÜ
);

543 *
u£PŒ
 = 
mœ
->
s§R•
->
u£s
;

546 
Œue
) {

547 
s§RegIdx
 = 
	`dvmB™VeùÜI‹¿tÜNext
(&
phiI‹¿tÜ
);

548 ià(
s§RegIdx
 == -1) ;

549 *
u£PŒ
++ = 
s§RegIdx
;

553  
Œue
;

554 
	}
}

557 
	$dvmComp”M‘hodSSAT¿nsfÜm©iÚ
(
Comp©iÚUn™
 *
cUn™
)

560 
	`compu‹DFSOrd”
(
cUn™
);

563 
	`compu‹Domš©Üs
(
cUn™
);

566 
	`dvmIn™ŸlizeSSACÚv”siÚ
(
cUn™
);

569 
	`compu‹DefBlockM©rix
(
cUn™
);

572 
	`š£¹PhiNodes
(
cUn™
);

575 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”DoSSACÚv”siÚ
,

576 
kP»Ord”DFST¿v”§l
,

577 
çl£
 );

583 
cUn™
->
‹mpSSARegi¡”V
 = 
	`dvmComp”AÎocB™VeùÜ
(cUn™->
numSSARegs
,

584 
çl£
);

587 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
š£¹PhiNodeO³¿nds
,

588 
kR—chabËNodes
,

589 
çl£
 );

590 
	}
}

593 
boŞ
 
	$dvmComp”BudLoİ
(
Comp©iÚUn™
 *
cUn™
)

596 
	`compu‹DFSOrd”
(
cUn™
);

599 
	`compu‹Domš©Üs
(
cUn™
);

602 ià(
	`dvmComp”F‹rLoİBlocks
(
cUn™
è=ğ
çl£
)

603  
çl£
;

606 
	`compu‹DFSOrd”
(
cUn™
);

609 
	`compu‹Domš©Üs
(
cUn™
);

612 
	`dvmIn™ŸlizeSSACÚv”siÚ
(
cUn™
);

615 
	`compu‹DefBlockM©rix
(
cUn™
);

618 
	`š£¹PhiNodes
(
cUn™
);

621 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”DoSSACÚv”siÚ
,

622 
kP»Ord”DFST¿v”§l
,

623 
çl£
 );

629 
cUn™
->
‹mpSSARegi¡”V
 = 
	`dvmComp”AÎocB™VeùÜ
(cUn™->
numSSARegs
,

630 
çl£
);

633 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
š£¹PhiNodeO³¿nds
,

634 
kR—chabËNodes
,

635 
çl£
 );

637 ià(
gDvmJ™
.
»ûivedSIGUSR2
 || gDvmJ™.
´štMe
) {

638 
	`dvmDumpCFG
(
cUn™
, "/sdcard/cfg/");

641  
Œue
;

642 
	}
}

	@vm/compiler/Utility.cpp

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

20 
A»ÇMemBlock
 *
	g¬’aH—d
, *
	gcu¼’tA»Ç
;

21 
	gnumA»ÇBlocks
;

24 
boŞ
 
	$dvmComp”H—pIn™
()

26 
	`as£¹
(
¬’aH—d
 =ğ
NULL
);

27 
¬’aH—d
 =

28 (
A»ÇMemBlock
 *è
	`m®loc
((A»ÇMemBlockè+ 
ARENA_DEFAULT_SIZE
);

29 ià(
¬’aH—d
 =ğ
NULL
) {

30 
	`ALOGE
("No memory†efto create compiler heap memory");

31  
çl£
;

33 
¬’aH—d
->
blockSize
 = 
ARENA_DEFAULT_SIZE
;

34 
cu¼’tA»Ç
 = 
¬’aH—d
;

35 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 = 0;

36 
cu¼’tA»Ç
->
Ãxt
 = 
NULL
;

37 
numA»ÇBlocks
 = 1;

39  
Œue
;

40 
	}
}

43 * 
	$dvmComp”New
(
size_t
 
size
, 
boŞ
 
z”o
)

45 
size
 = (size + 3) & ~3;

46 
»Œy
:

48 ià(
size
 + 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 <ğcu¼’tA»Ç->
blockSize
) {

49 *
±r
;

50 
±r
 = &
cu¼’tA»Ç
->±r[cu¼’tA»Ç->
by‹sAÎoÿ‹d
];

51 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 +ğ
size
;

52 ià(
z”o
) {

53 
	`mem£t
(
±r
, 0, 
size
);

55  
±r
;

61 ià(
cu¼’tA»Ç
->
Ãxt
) {

62 
cu¼’tA»Ç
 = cu¼’tA»Ç->
Ãxt
;

63 
»Œy
;

66 
size_t
 
blockSize
 = (
size
 < 
ARENA_DEFAULT_SIZE
) ?

67 
ARENA_DEFAULT_SIZE
 : 
size
;

69 
A»ÇMemBlock
 *
ÃwA»Ç
 = (ArenaMemBlock *)

70 
	`m®loc
((
A»ÇMemBlock
è+ 
blockSize
);

71 ià(
ÃwA»Ç
 =ğ
NULL
) {

72 
	`ALOGE
("Arena‡llocation failure");

73 
	`dvmAbÜt
();

75 
ÃwA»Ç
->
blockSize
 = blockSize;

76 
ÃwA»Ç
->
by‹sAÎoÿ‹d
 = 0;

77 
ÃwA»Ç
->
Ãxt
 = 
NULL
;

78 
cu¼’tA»Ç
->
Ãxt
 = 
ÃwA»Ç
;

79 
cu¼’tA»Ç
 = 
ÃwA»Ç
;

80 
numA»ÇBlocks
++;

81 ià(
numA»ÇBlocks
 > 10)

82 
	`ALOGI
("TÙ®‡»Ç…age fÜ JIT: %d", 
numA»ÇBlocks
);

83 
»Œy
;

86 
	`dvmAbÜt
();

87 
	}
}

90 
	$dvmComp”A»ÇRe£t
()

92 
A»ÇMemBlock
 *
block
;

94 
block
 = 
¬’aH—d
; block; block = block->
Ãxt
) {

95 
block
->
by‹sAÎoÿ‹d
 = 0;

97 
cu¼’tA»Ç
 = 
¬’aH—d
;

98 
	}
}

101 
	$dvmIn™GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
size_t
 
š™L’gth
)

103 
gLi¡
->
numAÎoÿ‹d
 = 
š™L’gth
;

104 
gLi¡
->
numU£d
 = 0;

105 
gLi¡
->
–emLi¡
 = (
šŒ_t
 *è
	`dvmComp”New
((šŒ_tè* 
š™L’gth
,

106 
Œue
);

107 
	}
}

110 
	$ex·ndGrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
)

112 
ÃwL’gth
 = 
gLi¡
->
numAÎoÿ‹d
;

113 ià(
ÃwL’gth
 < 128) {

114 
ÃwL’gth
 <<= 1;

116 
ÃwL’gth
 += 128;

118 
šŒ_t
 *
ÃwA¼ay
 =

119 (
šŒ_t
 *è
	`dvmComp”New
((šŒ_tè* 
ÃwL’gth
, 
Œue
);

120 
	`memıy
(
ÃwA¼ay
, 
gLi¡
->
–emLi¡
, (
šŒ_t
è* gLi¡->
numAÎoÿ‹d
);

121 
gLi¡
->
numAÎoÿ‹d
 = 
ÃwL’gth
;

122 
gLi¡
->
–emLi¡
 = 
ÃwA¼ay
;

123 
	}
}

126 
	$dvmIn£¹GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
šŒ_t
 
–em
)

128 
	`as£¹
(
gLi¡
->
numAÎoÿ‹d
 != 0);

129 ià(
gLi¡
->
numU£d
 =ğgLi¡->
numAÎoÿ‹d
) {

130 
	`ex·ndGrowabËLi¡
(
gLi¡
);

132 
gLi¡
->
–emLi¡
[gLi¡->
numU£d
++] = 
–em
;

133 
	}
}

135 
	$dvmGrowabËLi¡I‹¿tÜIn™
(
GrowabËLi¡
 *
gLi¡
,

136 
GrowabËLi¡I‹¿tÜ
 *
™”©Ü
)

138 
™”©Ü
->
li¡
 = 
gLi¡
;

139 
™”©Ü
->
idx
 = 0;

140 
™”©Ü
->
size
 = 
gLi¡
->
numU£d
;

141 
	}
}

143 
šŒ_t
 
	$dvmGrowabËLi¡I‹¿tÜNext
(
GrowabËLi¡I‹¿tÜ
 *
™”©Ü
)

145 
	`as£¹
(
™”©Ü
->
size
 =ğ™”©Ü->
li¡
->
numU£d
);

146 ià(
™”©Ü
->
idx
 =ğ™”©Ü->
size
)  0;

147  
™”©Ü
->
li¡
->
–emLi¡
[™”©Ü->
idx
++];

148 
	}
}

150 
šŒ_t
 
	$dvmGrowabËLi¡G‘EËm’t
(cÚ¡ 
GrowabËLi¡
 *
gLi¡
, 
size_t
 
idx
)

152 
	`as£¹
(
idx
 < 
gLi¡
->
numU£d
);

153  
gLi¡
->
–emLi¡
[
idx
];

154 
	}
}

157 
	$dvmComp”DumpComp©iÚUn™
(
Comp©iÚUn™
 *
cUn™
)

159 
BasicBlock
 *
bb
;

160 cÚ¡ *
blockTy³Names
[] = {

175 
	`ALOGD
("Compšg % %s", 
cUn™
->
m‘hod
->
şazz
->
desütÜ
,

176 
cUn™
->
m‘hod
->
Çme
);

177 
	`ALOGD
("%d in¢s", 
	`dvmG‘M‘hodIn¢sSize
(
cUn™
->
m‘hod
));

178 
	`ALOGD
("%d block šÙ®", 
cUn™
->
numBlocks
);

179 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

181 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

183 
Œue
) {

184 
bb
 = (
BasicBlock
 *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

185 ià(
bb
 =ğ
NULL
) ;

186 
	`ALOGD
("Block %d (%s) (insn %04x - %04x%s)",

187 
bb
->
id
,

188 
blockTy³Names
[
bb
->
blockTy³
],

189 
bb
->
¡¬tOff£t
,

190 
bb
->
Ï¡MIRIn¢
 ? bb->Ï¡MIRIn¢->
off£t
 : bb->
¡¬tOff£t
,

191 
bb
->
Ï¡MIRIn¢
 ? "" : "ƒmpty");

192 ià(
bb
->
k’
) {

193 
	`ALOGD
(" Taken branch: block %d (%04x)",

194 
bb
->
k’
->
id
, bb->k’->
¡¬tOff£t
);

196 ià(
bb
->
çÎThrough
) {

197 
	`ALOGD
(" Fallthrough : block %d (%04x)",

198 
bb
->
çÎThrough
->
id
, bb->çÎThrough->
¡¬tOff£t
);

201 
	}
}

206 
	$dumpM‘hodSts
(*
comp”M‘hodSts
, *
tÙ®M‘hodSts
)

208 
Comp”M‘hodSts
 *
m‘hodSts
 =

209 (
Comp”M‘hodSts
 *è
comp”M‘hodSts
;

210 
Comp”M‘hodSts
 *
tÙ®Sts
 =

211 (
Comp”M‘hodSts
 *è
tÙ®M‘hodSts
;

213 
tÙ®Sts
->
d®vikSize
 +ğ
m‘hodSts
->dalvikSize;

214 
tÙ®Sts
->
compedD®vikSize
 +ğ
m‘hodSts
->compiledDalvikSize;

215 
tÙ®Sts
->
ÇtiveSize
 +ğ
m‘hodSts
->nativeSize;

219 
lim™
 = (
m‘hodSts
->
d®vikSize
 >> 2) * 3;

222 ià(
m‘hodSts
->
compedD®vikSize
 >ğ
lim™
) {

223 
	`ALOGD
("Method stats: %s%s, %d/%d (compiled/total Dalvik), %d (native)",

224 
m‘hodSts
->
m‘hod
->
şazz
->
desütÜ
,

225 
m‘hodSts
->
m‘hod
->
Çme
,

226 
m‘hodSts
->
compedD®vikSize
,

227 
m‘hodSts
->
d®vikSize
,

228 
m‘hodSts
->
ÇtiveSize
);

232 
	}
}

238 
	$dvmComp”DumpSts
()

240 
Comp”M‘hodSts
 
tÙ®M‘hodSts
;

242 
	`mem£t
(&
tÙ®M‘hodSts
, 0, (
Comp”M‘hodSts
));

243 
	`ALOGD
("%d compilations using %d + %d bytes",

244 
gDvmJ™
.
numComp©iÚs
,

245 
gDvmJ™
.
‹m¶©eSize
,

246 
gDvmJ™
.
codeCacheBy‹U£d
 - gDvmJ™.
‹m¶©eSize
);

247 
	`ALOGD
("Compiler‡rena uses %d blocks (%d bytesƒach)",

248 
numA»ÇBlocks
, 
ARENA_DEFAULT_SIZE
);

249 
	`ALOGD
("Comp” wÜk queuËngth i %d/%d", 
gDvmJ™
.
comp”QueueL’gth
,

250 
gDvmJ™
.
comp”MaxQueued
);

251 
	`dvmJ™Sts
();

252 
	`dvmComp”ArchDump
();

253 ià(
gDvmJ™
.
m‘hodStsTabË
) {

254 
	`dvmHashFÜ—ch
(
gDvmJ™
.
m‘hodStsTabË
, 
dumpM‘hodSts
,

255 &
tÙ®M‘hodSts
);

256 
	`ALOGD
("Code size stats: %d/%d (compiled/total Dalvik), %d (native)",

257 
tÙ®M‘hodSts
.
compedD®vikSize
,

258 
tÙ®M‘hodSts
.
d®vikSize
,

259 
tÙ®M‘hodSts
.
ÇtiveSize
);

261 
	}
}

270 
B™VeùÜ
* 
	$dvmComp”AÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
)

272 
B™VeùÜ
* 
bv
;

273 
couÁ
;

275 
	`as£¹
((
bv
->
¡Üage
[0]) == 4);

277 
bv
 = (
B™VeùÜ
*è
	`dvmComp”New
((B™VeùÜ), 
çl£
);

279 
couÁ
 = (
¡¬tB™s
 + 31) >> 5;

281 
bv
->
¡ÜageSize
 = 
couÁ
;

282 
bv
->
ex·ndabË
 =ƒxpandable;

283 
bv
->
¡Üage
 = (
u4
*è
	`dvmComp”New
(
couÁ
 * (u4), 
Œue
);

284  
bv
;

285 
	}
}

296 
boŞ
 
	$dvmComp”S‘B™
(
B™VeùÜ
 *
pB™s
, 
num
)

298 ià(
num
 >ğ
pB™s
->
¡ÜageSize
 * (
u4
) * 8) {

299 ià(!
pB™s
->
ex·ndabË
)

300 
	`dvmAbÜt
();

303 
ÃwSize
 = (
num
 + 1 + 31) >> 5;

304 
	`as£¹
(
ÃwSize
 > 
pB™s
->
¡ÜageSize
);

305 
u4
 *
ÃwStÜage
 = (u4*)
	`dvmComp”New
(
ÃwSize
 * (u4), 
çl£
);

306 
	`memıy
(
ÃwStÜage
, 
pB™s
->
¡Üage
,…B™s->
¡ÜageSize
 * (
u4
));

307 
	`mem£t
(&
ÃwStÜage
[
pB™s
->
¡ÜageSize
], 0,

308 (
ÃwSize
 - 
pB™s
->
¡ÜageSize
è* (
u4
));

309 
pB™s
->
¡Üage
 = 
ÃwStÜage
;

310 
pB™s
->
¡ÜageSize
 = 
ÃwSize
;

313 
pB™s
->
¡Üage
[
num
 >> 5] |= 1 << (num & 0x1f);

314  
Œue
;

315 
	}
}

326 
boŞ
 
	$dvmComp”CË¬B™
(
B™VeùÜ
 *
pB™s
, 
num
)

328 ià(
num
 >ğ
pB™s
->
¡ÜageSize
 * (
u4
) * 8) {

329 
	`ALOGE
("Tryingo clear‡ bithat is‚ot set inhe vector yet!");

330 
	`dvmAbÜt
();

333 
pB™s
->
¡Üage
[
num
 >> 5] &= ~(1 << (num & 0x1f));

334  
Œue
;

335 
	}
}

340 
	$dvmComp”M¬kAÎB™s
(
B™VeùÜ
 *
pB™s
, 
boŞ
 
£t
)

342 
v®ue
 = 
£t
 ? -1 : 0;

343 
	`mem£t
(
pB™s
->
¡Üage
, 
v®ue
,…B™s->
¡ÜageSize
 * ()(
u4
));

344 
	}
}

346 
	$dvmDebugB™VeùÜ
(*
msg
, cÚ¡ 
B™VeùÜ
 *
bv
, 
Ëngth
)

348 
i
;

350 
	`ALOGE
("%s", 
msg
);

351 
i
 = 0; i < 
Ëngth
; i++) {

352 ià(
	`dvmIsB™S‘
(
bv
, 
i
)) {

353 
	`ALOGE
(" B™ %d i £t", 
i
);

356 
	}
}

358 
	$dvmComp”AbÜt
(
Comp©iÚUn™
 *
cUn™
)

360 
	`ALOGE
("Jit:‡bortingrace compilation,„evertingo interpreter");

362 
	`as£¹
(0);

367 
	`lÚgjmp
(*
cUn™
->
baPŒ
, 1);

368 
	}
}

370 
	$dvmDumpBlockB™VeùÜ
(cÚ¡ 
GrowabËLi¡
 *
blocks
, *
msg
,

371 cÚ¡ 
B™VeùÜ
 *
bv
, 
Ëngth
)

373 
i
;

375 
	`ALOGE
("%s", 
msg
);

376 
i
 = 0; i < 
Ëngth
; i++) {

377 ià(
	`dvmIsB™S‘
(
bv
, 
i
)) {

378 
BasicBlock
 *
bb
 =

379 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(
blocks
, 
i
);

380 
blockName
[
BLOCK_NAME_LEN
];

381 
	`dvmG‘BlockName
(
bb
, 
blockName
);

382 
	`ALOGE
("B™ %d / % i £t", 
i
, 
blockName
);

385 
	}
}

387 
	$dvmG‘BlockName
(
BasicBlock
 *
bb
, *
Çme
)

389 
bb
->
blockTy³
) {

390 
kEÁryBlock
:

391 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "entry");

393 
kEx™Block
:

394 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "exit");

396 
kD®vikBy‹Code
:

397 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "block%04x", 
bb
->
¡¬tOff£t
);

399 
kChaššgC–lNÜm®
:

400 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "chaš%04x", 
bb
->
¡¬tOff£t
);

402 
kExû±iÚHªdlšg
:

403 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "exû±iÚ%04x", 
bb
->
¡¬tOff£t
);

406 
	`¢´štf
(
Çme
, 
BLOCK_NAME_LEN
, "??");

409 
	}
}

	@vm/compiler/codegen/CodegenFactory.cpp

35 
TGT_LIR
 *
	$lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

36 
di¥Ïûm’t
, 
rDe¡
)

38  
	`lßdBa£Di¥
(
cUn™
, 
NULL
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡
, 
kWÜd
,

39 
INVALID_SREG
);

40 
	}
}

42 
TGT_LIR
 *
	$¡ÜeWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

43 
di¥Ïûm’t
, 
rSrc
)

45  
	`¡ÜeBa£Di¥
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrc
, 
kWÜd
);

46 
	}
}

53 
	$lßdV®ueDœeù
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

54 
»g1
)

56 
¾Src
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lSrc);

57 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

58 
	`g’RegCİy
(
cUn™
, 
»g1
, 
¾Src
.
lowReg
);

59 } ià(
¾Src
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

60 
	`lßdWÜdDi¥
(
cUn™
, 
rSELF
, 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
), 
»g1
);

62 
	`as£¹
(
¾Src
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
);

63 
	`lßdWÜdDi¥
(
cUn™
, 
rFP
, 
	`dvmComp”S2VReg
(cUn™, 
¾Src
.
sRegLow
) << 2,

64 
»g1
);

66 
	}
}

73 
	$lßdV®ueDœeùFixed
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

74 
»g1
)

76 
	`dvmComp”Clobb”
(
cUn™
, 
»g1
);

77 
	`dvmComp”M¬kInU£
(
cUn™
, 
»g1
);

78 
	`lßdV®ueDœeù
(
cUn™
, 
¾Src
, 
»g1
);

79 
	}
}

86 
	$lßdV®ueDœeùWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

87 
»gLo
, 
»gHi
)

89 
¾Src
 = 
	`dvmComp”Upd©eLocWide
(
cUn™
,„lSrc);

90 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

91 
	`g’RegCİyWide
(
cUn™
, 
»gLo
, 
»gHi
, 
¾Src
.
lowReg
,„lSrc.
highReg
);

92 } ià(
¾Src
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

93 
	`lßdBa£Di¥Wide
(
cUn™
, 
NULL
, 
rSELF
,

94 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
),

95 
»gLo
, 
»gHi
, 
INVALID_SREG
);

97 
	`as£¹
(
¾Src
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
);

98 
	`lßdBa£Di¥Wide
(
cUn™
, 
NULL
, 
rFP
,

99 
	`dvmComp”S2VReg
(
cUn™
, 
¾Src
.
sRegLow
) << 2,

100 
»gLo
, 
»gHi
, 
INVALID_SREG
);

102 
	}
}

109 
	$lßdV®ueDœeùWideFixed
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

110 
»gLo
, 
»gHi
)

112 
	`dvmComp”Clobb”
(
cUn™
, 
»gLo
);

113 
	`dvmComp”Clobb”
(
cUn™
, 
»gHi
);

114 
	`dvmComp”M¬kInU£
(
cUn™
, 
»gLo
);

115 
	`dvmComp”M¬kInU£
(
cUn™
, 
»gHi
);

116 
	`lßdV®ueDœeùWide
(
cUn™
, 
¾Src
, 
»gLo
, 
»gHi
);

117 
	}
}

119 
RegLoÿtiÚ
 
	$lßdV®ue
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

120 
Regi¡”CÏss
 
İKšd
)

122 
¾Src
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lSrc, 
İKšd
, 
çl£
);

123 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
) {

124 
	`lßdV®ueDœeù
(
cUn™
, 
¾Src
,„lSrc.
lowReg
);

125 
¾Src
.
loÿtiÚ
 = 
kLocPhysReg
;

126 
	`dvmComp”M¬kLive
(
cUn™
, 
¾Src
.
lowReg
,„lSrc.
sRegLow
);

127 } ià(
¾Src
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

128 
	`lßdWÜdDi¥
(
cUn™
, 
rSELF
, 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
),

129 
¾Src
.
lowReg
);

130 
¾Src
.
loÿtiÚ
 = 
kLocPhysReg
;

131 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
lowReg
);

133  
¾Src
;

134 
	}
}

136 
	$¡ÜeV®ue
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

137 
RegLoÿtiÚ
 
¾Src
)

139 
LIR
 *
defS¹
;

140 
LIR
 *
defEnd
;

141 
	`as£¹
(!
¾De¡
.
wide
);

142 
	`as£¹
(!
¾Src
.
wide
);

143 
	`dvmComp”KlNuÎCheckedLoc
(
cUn™
, 
¾De¡
);

144 
¾Src
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lSrc);

145 
¾De¡
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lDest);

146 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

147 ià(
	`dvmComp”IsLive
(
cUn™
, 
¾Src
.
lowReg
) ||

148 (
¾De¡
.
loÿtiÚ
 =ğ
kLocPhysReg
)) {

150 
¾De¡
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lDe¡, 
kAnyReg
, 
çl£
);

151 
	`g’RegCİy
(
cUn™
, 
¾De¡
.
lowReg
, 
¾Src
.lowReg);

154 
¾De¡
.
lowReg
 = 
¾Src
.lowReg;

155 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
lowReg
);

159 
¾De¡
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lDe¡, 
kAnyReg
, 
çl£
);

160 
	`lßdV®ueDœeù
(
cUn™
, 
¾Src
, 
¾De¡
.
lowReg
);

164 
	`dvmComp”M¬kLive
(
cUn™
, 
¾De¡
.
lowReg
,„lDe¡.
sRegLow
);

165 
	`dvmComp”M¬kDœty
(
cUn™
, 
¾De¡
.
lowReg
);

168 ià(
¾De¡
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

169 
	`¡ÜeBa£Di¥
(
cUn™
, 
rSELF
, 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
),

170 
¾De¡
.
lowReg
, 
kWÜd
);

171 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
lowReg
);

173 
	`dvmComp”Re£tDefLoc
(
cUn™
, 
¾De¡
);

174 ià(
	`dvmComp”LiveOut
(
cUn™
, 
¾De¡
.
sRegLow
)) {

175 
defS¹
 = (
LIR
 *)
cUn™
->
Ï¡LIRIn¢
;

176 
vReg
 = 
	`dvmComp”S2VReg
(
cUn™
, 
¾De¡
.
sRegLow
);

177 
	`¡ÜeBa£Di¥
(
cUn™
, 
rFP
, 
vReg
 << 2, 
¾De¡
.
lowReg
, 
kWÜd
);

178 
	`dvmComp”M¬kCËª
(
cUn™
, 
¾De¡
.
lowReg
);

179 
defEnd
 = (
LIR
 *)
cUn™
->
Ï¡LIRIn¢
;

180 
	`dvmComp”M¬kDef
(
cUn™
, 
¾De¡
, 
defS¹
, 
defEnd
);

183 
	}
}

185 
RegLoÿtiÚ
 
	$lßdV®ueWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

186 
Regi¡”CÏss
 
İKšd
)

188 
	`as£¹
(
¾Src
.
wide
);

189 
¾Src
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lSrc, 
İKšd
, 
çl£
);

190 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
) {

191 
	`lßdV®ueDœeùWide
(
cUn™
, 
¾Src
,„lSrc.
lowReg
,„lSrc.
highReg
);

192 
¾Src
.
loÿtiÚ
 = 
kLocPhysReg
;

193 
	`dvmComp”M¬kLive
(
cUn™
, 
¾Src
.
lowReg
,„lSrc.
sRegLow
);

194 
	`dvmComp”M¬kLive
(
cUn™
, 
¾Src
.
highReg
,

195 
	`dvmComp”SRegHi
(
¾Src
.
sRegLow
));

196 } ià(
¾Src
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

197 
	`lßdBa£Di¥Wide
(
cUn™
, 
NULL
, 
rSELF
,

198 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
),

199 
¾Src
.
lowReg
,„lSrc.
highReg
, 
INVALID_SREG
);

200 
¾Src
.
loÿtiÚ
 = 
kLocPhysReg
;

201 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
lowReg
);

202 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
highReg
);

204  
¾Src
;

205 
	}
}

207 
	$¡ÜeV®ueWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

208 
RegLoÿtiÚ
 
¾Src
)

210 
LIR
 *
defS¹
;

211 
LIR
 *
defEnd
;

212 
	`as£¹
(
	`FPREG
(
¾Src
.
lowReg
)==FPREGÔlSrc.
highReg
));

213 
	`as£¹
(
¾De¡
.
wide
);

214 
	`as£¹
(
¾Src
.
wide
);

215 
	`dvmComp”KlNuÎCheckedLoc
(
cUn™
, 
¾De¡
);

216 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

217 ià(
	`dvmComp”IsLive
(
cUn™
, 
¾Src
.
lowReg
) ||

218 
	`dvmComp”IsLive
(
cUn™
, 
¾Src
.
highReg
) ||

219 (
¾De¡
.
loÿtiÚ
 =ğ
kLocPhysReg
)) {

221 
¾De¡
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lDe¡, 
kAnyReg
, 
çl£
);

222 
	`g’RegCİyWide
(
cUn™
, 
¾De¡
.
lowReg
,„lDe¡.
highReg
,

223 
¾Src
.
lowReg
,„lSrc.
highReg
);

226 
¾De¡
.
lowReg
 = 
¾Src
.lowReg;

227 
¾De¡
.
highReg
 = 
¾Src
.highReg;

228 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
lowReg
);

229 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src
.
highReg
);

233 
¾De¡
 = 
	`dvmComp”Ev®Loc
(
cUn™
,„lDe¡, 
kAnyReg
, 
çl£
);

234 
	`lßdV®ueDœeùWide
(
cUn™
, 
¾Src
, 
¾De¡
.
lowReg
,

235 
¾De¡
.
highReg
);

239 
	`dvmComp”M¬kLive
(
cUn™
, 
¾De¡
.
lowReg
,„lDe¡.
sRegLow
);

240 
	`dvmComp”M¬kLive
(
cUn™
, 
¾De¡
.
highReg
,

241 
	`dvmComp”SRegHi
(
¾De¡
.
sRegLow
));

242 
	`dvmComp”M¬kDœty
(
cUn™
, 
¾De¡
.
lowReg
);

243 
	`dvmComp”M¬kDœty
(
cUn™
, 
¾De¡
.
highReg
);

244 
	`dvmComp”M¬kPaœ
(
cUn™
, 
¾De¡
.
lowReg
,„lDe¡.
highReg
);

247 ià(
¾De¡
.
loÿtiÚ
 =ğ
kLocR‘v®
) {

248 
	`¡ÜeBa£Di¥Wide
(
cUn™
, 
rSELF
, 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
),

249 
¾De¡
.
lowReg
,„lDe¡.
highReg
);

250 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
lowReg
);

251 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
highReg
);

253 
	`dvmComp”Re£tDefLocWide
(
cUn™
, 
¾De¡
);

254 ià(
	`dvmComp”LiveOut
(
cUn™
, 
¾De¡
.
sRegLow
) ||

255 
	`dvmComp”LiveOut
(
cUn™
, 
	`dvmComp”SRegHi
(
¾De¡
.
sRegLow
))) {

256 
defS¹
 = (
LIR
 *)
cUn™
->
Ï¡LIRIn¢
;

257 
vReg
 = 
	`dvmComp”S2VReg
(
cUn™
, 
¾De¡
.
sRegLow
);

258 
	`as£¹
((
vReg
+1è=ğ
	`dvmComp”S2VReg
(
cUn™
,

259 
	`dvmComp”SRegHi
(
¾De¡
.
sRegLow
)));

260 
	`¡ÜeBa£Di¥Wide
(
cUn™
, 
rFP
, 
vReg
 << 2, 
¾De¡
.
lowReg
,

261 
¾De¡
.
highReg
);

262 
	`dvmComp”M¬kCËª
(
cUn™
, 
¾De¡
.
lowReg
);

263 
	`dvmComp”M¬kCËª
(
cUn™
, 
¾De¡
.
highReg
);

264 
defEnd
 = (
LIR
 *)
cUn™
->
Ï¡LIRIn¢
;

265 
	`dvmComp”M¬kDefWide
(
cUn™
, 
¾De¡
, 
defS¹
, 
defEnd
);

268 
	}
}

	@vm/compiler/codegen/CompilerCodegen.h

17 #iâdeà
DALVIK_VM_COMPILERCODEGEN_H_


18 
	#DALVIK_VM_COMPILERCODEGEN_H_


	)

20 
	~"comp”/Comp”IR.h
"

23 
	#MAX_CHAINED_SWITCH_CASES
 64

	)

26 
boŞ
 
dvmComp”DoWÜk
(
Comp”WÜkOrd”
 *
wÜk
);

29 
dvmComp”MIR2LIR
(
Comp©iÚUn™
 *
cUn™
);

32 
dvmComp”M‘hodMIR2LIR
(
Comp©iÚUn™
 *
cUn™
);

35 
dvmComp”As£mbËLIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
);

38 "C" * 
dvmJ™Chaš
(* 
tgtAddr
, 
u4
* 
b¿nchAddr
);

41 
dvmJ™In¡®lCÏssObjeùPoš‹rs
(
Comp©iÚUn™
 *
cUn™
,

42 *
codeAdd»ss
);

45 
boŞ
 
dvmJ™P©chIÆšeCache
(*
ûÎPŒ
, *
cÚ‹ÁPŒ
);

48 
dvmComp”Codeg’Dump
(
Comp©iÚUn™
 *
cUn™
);

51 
dvmComp”P©chIÆšeCache
();

54 
dvmComp”LoÿlRegAÎoc
(
Comp©iÚUn™
 *
cUn™
);

57 
dvmComp”In™ŸlizeRegAÎoc
(
Comp©iÚUn™
 *
cUn™
);

60 
J™In¡ruùiÚS‘Ty³
 
dvmComp”In¡ruùiÚS‘
();

66 
boŞ
 
dvmComp”ArchV¬ŸÁIn™
();

69 
dvmComp”T¬g‘O±Hšt
(
key
);

72 
dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
);

	@vm/compiler/codegen/Optimizer.h

17 #iâdeà
DALVIK_VM_COMPILER_OPTIMIZATION_H_


18 
	#DALVIK_VM_COMPILER_OPTIMIZATION_H_


	)

20 
	~"D®vik.h
"

26 
	eİtCÚŒŞVeùÜ
 {

27 
	mkLßdStÜeElimš©iÚ
 = 0,

28 
	mkLßdHoi¡šg
,

29 
	mkT¿ckLiveTemps
,

30 
	mkSuµ»ssLßds
,

31 
	mkM‘hodIÆššg
,

32 
	mkM‘hodJ™
,

36 
	gComp©iÚUn™
;

37 
	gLIR
;

39 
dvmComp”AµlyLoÿlO±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
,

40 
LIR
 *
h—d
,

41 
LIR
 *

);

43 
dvmComp”AµlyGlob®O±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
);

	@vm/compiler/codegen/Ralloc.h

21 
	~"comp”/Comp”Ut™y.h
"

22 
	~"comp”/Comp”IR.h
"

23 
	~"comp”/D©aæow.h
"

24 
	~"comp”/codeg’/¬m/ArmLIR.h
"

32 
šlše
 
Regi¡”CÏss
 
	$dvmComp”RegCÏssBySize
(
OpSize
 
size
)

34  (
size
 =ğ
kUnsigÃdH®f
 ||

35 
size
 =ğ
kSigÃdH®f
 ||

36 
size
 =ğ
kUnsigÃdBy‹
 ||

37 
size
 =ğ
kSigÃdBy‹
 ) ? 
kCÜeReg
 : 
kAnyReg
;

38 
	}
}

40 
šlše
 
	$dvmComp”S2VReg
(
Comp©iÚUn™
 *
cUn™
, 
sReg
)

42 
	`as£¹
(
sReg
 !ğ
INVALID_SREG
);

43  
	`DECODE_REG
(
	`dvmCÚv”tSSARegToD®vik
(
cUn™
, 
sReg
));

44 
	}
}

47 
šlše
 
	$dvmComp”Re£tNuÎCheck
(
Comp©iÚUn™
 *
cUn™
)

49 
	`dvmCË¬AÎB™s
(
cUn™
->
»gPoŞ
->
nuÎCheckedRegs
);

50 
	}
}

62 
šlše
 
	$dvmComp”SRegHi
(
lowS»g
) {

63  (
lowS»g
 =ğ
INVALID_SREG
) ? INVALID_SREG :†owSreg + 1;

64 
	}
}

67 
šlše
 
boŞ
 
	$dvmComp”LiveOut
(
Comp©iÚUn™
 *
cUn™
, 
sReg
)

70  
Œue
;

71 
	}
}

73 
šlše
 
	$dvmComp”SSASrc
(
MIR
 *
mœ
, 
num
)

75 
	`as£¹
(
mœ
->
s§R•
->
numU£s
 > 
num
);

76  
mœ
->
s§R•
->
u£s
[
num
];

77 
	}
}

79 
RegLoÿtiÚ
 
dvmComp”Ev®Loc
(
Comp©iÚUn™
 *
cUn™
, RegLoÿtiÚ 
loc
,

80 
»gCÏss
, 
boŞ
 
upd©e
);

82 
dvmComp”Clobb”
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

84 
RegLoÿtiÚ
 
dvmComp”Upd©eLoc
(
Comp©iÚUn™
 *
cUn™
,

85 
RegLoÿtiÚ
 
loc
);

88 
RegLoÿtiÚ
 
dvmComp”Upd©eLocWide
(
Comp©iÚUn™
 *
cUn™
,

89 
RegLoÿtiÚ
 
loc
);

92 
dvmComp”Clobb”HªdËrRegs
(
Comp©iÚUn™
 *
cUn™
);

94 
dvmComp”M¬kLive
(
Comp©iÚUn™
 *
cUn™
, 
»g
, 
sReg
);

96 
dvmComp”M¬kDœty
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

98 
dvmComp”M¬kPaœ
(
Comp©iÚUn™
 *
cUn™
, 
lowReg
,

99 
highReg
);

101 
dvmComp”M¬kCËª
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

103 
dvmComp”Re£tDef
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

105 
dvmComp”Re£tDefLoc
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
);

108 
dvmComp”In™PoŞ
(
Regi¡”Info
 *
»gs
, *
»gNums
, 
num
);

115 
dvmComp”M¬kDef
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
,

116 
LIR
 *
¡¬t
, LIR *
fšish
);

122 
dvmComp”M¬kDefWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
,

123 
LIR
 *
¡¬t
, LIR *
fšish
);

125 
RegLoÿtiÚ
 
dvmComp”G‘SrcWide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

126 
low
, 
high
);

128 
RegLoÿtiÚ
 
dvmComp”G‘De¡Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

129 
low
, 
high
);

131 
RegLoÿtiÚ
 
dvmComp”G‘Src
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
num
);

134 
RegLoÿtiÚ
 
dvmComp”G‘De¡
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

135 
num
);

137 
RegLoÿtiÚ
 
dvmComp”G‘R‘uºWide
(
Comp©iÚUn™
 *
cUn™
);

140 
dvmComp”Clobb”C®lRegs
(
Comp©iÚUn™
 *
cUn™
);

142 
Regi¡”Info
 *
dvmComp”IsTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

144 
dvmComp”M¬kInU£
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

146 
dvmComp”AÎocTemp
(
Comp©iÚUn™
 *
cUn™
);

148 
dvmComp”AÎocTempFlßt
(
Comp©iÚUn™
 *
cUn™
);

151 
dvmComp”AÎocTempDoubË
(
Comp©iÚUn™
 *
cUn™
);

153 
dvmComp”F»eTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

155 
dvmComp”Re£tDefLocWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
);

157 
dvmComp”Re£tDefT¿ckšg
(
Comp©iÚUn™
 *
cUn™
);

160 
dvmComp”KlNuÎCheckedLoc
(
Comp©iÚUn™
 *
cUn™
,

161 
RegLoÿtiÚ
 
loc
);

164 
Regi¡”Info
 *
dvmComp”IsLive
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

167 
dvmComp”LockAÎTemps
(
Comp©iÚUn™
 *
cUn™
);

169 
dvmComp”FlushAÎRegs
(
Comp©iÚUn™
 *
cUn™
);

171 
RegLoÿtiÚ
 
dvmComp”G‘R‘uºWideAÉ
(
Comp©iÚUn™
 *
cUn™
);

173 
RegLoÿtiÚ
 
dvmComp”G‘R‘uº
(
Comp©iÚUn™
 *
cUn™
);

175 
RegLoÿtiÚ
 
dvmComp”G‘R‘uºAÉ
(
Comp©iÚUn™
 *
cUn™
);

178 
dvmComp”Clobb”SReg
(
Comp©iÚUn™
 *
cUn™
, 
sReg
);

181 
dvmComp”AÎocF»eTemp
(
Comp©iÚUn™
 *
cUn™
);

188 
dvmComp”LockTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

190 
RegLoÿtiÚ
 
dvmComp”WideToN¬row
(
Comp©iÚUn™
 *
cUn™
,

191 
RegLoÿtiÚ
 
¾
);

198 
dvmComp”Re£tRegPoŞ
(
Comp©iÚUn™
 *
cUn™
);

200 
dvmComp”Clobb”AÎRegs
(
Comp©iÚUn™
 *
cUn™
);

202 
dvmComp”FlushRegWide
(
Comp©iÚUn™
 *
cUn™
, 
»g1
, 
»g2
);

204 
dvmComp”FlushReg
(
Comp©iÚUn™
 *
cUn™
, 
»g
);

210 
dvmComp”AÎocTy³dTempPaœ
(
Comp©iÚUn™
 *
cUn™
,

211 
boŞ
 
åHšt
, 
»gCÏss
);

213 
dvmComp”AÎocTy³dTemp
(
Comp©iÚUn™
 *
cUn™
, 
boŞ
 
åHšt
,

214 
»gCÏss
);

216 
ArmLIR
* 
dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
);

218 
dvmComp”RegCİyWide
(
Comp©iÚUn™
 *
cUn™
, 
de¡Lo
,

219 
de¡Hi
, 
¤cLo
, 
¤cHi
);

221 
dvmComp”FlushRegIm¶
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

222 
di¥Ïûm’t
, 
rSrc
, 
OpSize
 
size
);

224 
dvmComp”FlushRegWideIm¶
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

225 
di¥Ïûm’t
, 
rSrcLo
,

226 
rSrcHi
);

	@vm/compiler/codegen/RallocUtil.cpp

25 
	~"comp”/Comp”Ut™y.h
"

26 
	~"comp”/Comp”IR.h
"

27 
	~"comp”/D©aæow.h
"

28 
	~"R®loc.h
"

30 
	#SREG
(
c
, 
s
è((c)->
»gLoÿtiÚ
[(s)].
sRegLow
)

	)

46 
	$dvmComp”Re£tRegPoŞ
(
Comp©iÚUn™
 *
cUn™
)

48 
i
;

49 
i
=0; i < 
cUn™
->
»gPoŞ
->
numCÜeTemps
; i++) {

50 
cUn™
->
»gPoŞ
->
cÜeTemps
[
i
].
šU£
 = 
çl£
;

52 
i
=0; i < 
cUn™
->
»gPoŞ
->
numFPTemps
; i++) {

53 
cUn™
->
»gPoŞ
->
FPTemps
[
i
].
šU£
 = 
çl£
;

55 
	}
}

58 
	$dvmComp”In™PoŞ
(
Regi¡”Info
 *
»gs
, *
»gNums
, 
num
)

60 
i
;

61 
i
=0; i < 
num
; i++) {

62 
»gs
[
i
].
»g
 = 
»gNums
[i];

63 
»gs
[
i
].
šU£
 = 
çl£
;

64 
»gs
[
i
].
·œ
 = 
çl£
;

65 
»gs
[
i
].
live
 = 
çl£
;

66 
»gs
[
i
].
dœty
 = 
çl£
;

67 
»gs
[
i
].
sReg
 = 
INVALID_SREG
;

69 
	}
}

71 
	$dumpRegPoŞ
(
Regi¡”Info
 *
p
, 
numRegs
)

73 
i
;

74 
	`ALOGE
("================================================");

75 
i
=0; i < 
numRegs
; i++ ){

76 
	`ALOGE
("R[%d]: U:%d, P:%d,…art:%d, LV:%d, D:%d, SR:%d, ST:%x, EN:%x",

77 
p
[
i
].
»g
,…[i].
šU£
,…[i].
·œ
,…[i].
·¹Ãr
,…[i].
live
,

78 
p
[
i
].
dœty
,…[i].
sReg
,(í[i].
defS¹
, (í[i].
defEnd
);

80 
	`ALOGE
("================================================");

81 
	}
}

83 
Regi¡”Info
 *
	$g‘RegInfo
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

85 
numTemps
 = 
cUn™
->
»gPoŞ
->
numCÜeTemps
;

86 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
cÜeTemps
;

87 
i
;

88 
i
=0; i< 
numTemps
; i++) {

89 ià(
p
[
i
].
»g
 ==„eg) {

90  &
p
[
i
];

93 
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

94 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

95 
i
=0; i< 
numTemps
; i++) {

96 ià(
p
[
i
].
»g
 ==„eg) {

97  &
p
[
i
];

100 
	`ALOGE
("Tr›dØg‘ infØÚ‡‚Ú-exi¡ªˆ‹mp:„%d",
»g
);

101 
	`dvmComp”AbÜt
(
cUn™
);

102  
NULL
;

103 
	}
}

105 
	$dvmComp”FlushRegWide
(
Comp©iÚUn™
 *
cUn™
, 
»g1
, 
»g2
)

107 
Regi¡”Info
 *
šfo1
 = 
	`g‘RegInfo
(
cUn™
, 
»g1
);

108 
Regi¡”Info
 *
šfo2
 = 
	`g‘RegInfo
(
cUn™
, 
»g2
);

109 
	`as£¹
(
šfo1
 && 
šfo2
 && info1->
·œ
 && info2->pair &&

110 (
šfo1
->
·¹Ãr
 =ğ
šfo2
->
»g
) &&

111 (
šfo2
->
·¹Ãr
 =ğ
šfo1
->
»g
));

112 ià((
šfo1
->
live
 && info1->
dœty
è|| (
šfo2
->live && info2->dirty)) {

113 
šfo1
->
dœty
 = 
çl£
;

114 
šfo2
->
dœty
 = 
çl£
;

115 ià(
	`dvmComp”S2VReg
(
cUn™
, 
šfo2
->
sReg
) <

116 
	`dvmComp”S2VReg
(
cUn™
, 
šfo1
->
sReg
))

117 
šfo1
 = 
šfo2
;

118 
	`dvmComp”FlushRegWideIm¶
(
cUn™
, 
rFP
,

119 
	`dvmComp”S2VReg
(
cUn™
, 
šfo1
->
sReg
) << 2,

120 
šfo1
->
»g
, info1->
·¹Ãr
);

122 
	}
}

124 
	$dvmComp”FlushReg
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

126 
Regi¡”Info
 *
šfo
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

127 ià(
šfo
->
live
 && info->
dœty
) {

128 
šfo
->
dœty
 = 
çl£
;

129 
	`dvmComp”FlushRegIm¶
(
cUn™
, 
rFP
,

130 
	`dvmComp”S2VReg
(
cUn™
, 
šfo
->
sReg
) << 2,

131 
»g
, 
kWÜd
);

133 
	}
}

136 
boŞ
 
	$şobb”RegBody
(
Comp©iÚUn™
 *
cUn™
, 
Regi¡”Info
 *
p
,

137 
numTemps
, 
»g
)

139 
i
;

140 
i
=0; i< 
numTemps
; i++) {

141 ià(
p
[
i
].
»g
 ==„eg) {

142 ià(
p
[
i
].
live
 &&…[i].
dœty
) {

143 ià(
p
[
i
].
·œ
) {

144 
	`dvmComp”FlushRegWide
(
cUn™
, 
p
[
i
].
»g
,…[i].
·¹Ãr
);

146 
	`dvmComp”FlushReg
(
cUn™
, 
p
[
i
].
»g
);

149 
p
[
i
].
live
 = 
çl£
;

150 
p
[
i
].
sReg
 = 
INVALID_SREG
;

151 
p
[
i
].
defS¹
 = 
NULL
;

152 
p
[
i
].
defEnd
 = 
NULL
;

153 ià(
p
[
i
].
·œ
) {

154 
p
[
i
].
·œ
 = 
çl£
;

156 
	`şobb”RegBody
(
cUn™
, 
p
, 
numTemps
,…[
i
].
·¹Ãr
);

158  
Œue
;

161  
çl£
;

162 
	}
}

165 
	$dvmComp”Clobb”
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

167 ià(!
	`şobb”RegBody
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
,

168 
cUn™
->
»gPoŞ
->
numCÜeTemps
, 
»g
)) {

169 
	`şobb”RegBody
(
cUn™
, cUn™->
»gPoŞ
->
FPTemps
,

170 
cUn™
->
»gPoŞ
->
numFPTemps
, 
»g
);

172 
	}
}

174 
	$şobb”SRegBody
(
Regi¡”Info
 *
p
, 
numTemps
, 
sReg
)

176 
i
;

177 
i
=0; i< 
numTemps
; i++) {

178 ià(
p
[
i
].
sReg
 == sReg) {

179 
p
[
i
].
live
 = 
çl£
;

180 
p
[
i
].
defS¹
 = 
NULL
;

181 
p
[
i
].
defEnd
 = 
NULL
;

184 
	}
}

187 
	$dvmComp”Clobb”SReg
(
Comp©iÚUn™
 *
cUn™
, 
sReg
)

189 
	`şobb”SRegBody
(
cUn™
->
»gPoŞ
->
cÜeTemps
, cUn™->»gPoŞ->
numCÜeTemps
,

190 
sReg
);

191 
	`şobb”SRegBody
(
cUn™
->
»gPoŞ
->
FPTemps
, cUn™->»gPoŞ->
numFPTemps
,

192 
sReg
);

193 
	}
}

195 
	$®locTempBody
(
Comp©iÚUn™
 *
cUn™
, 
Regi¡”Info
 *
p
, 
numTemps
,

196 *
ÃxtTemp
, 
boŞ
 
»quœed
)

198 
i
;

199 
Ãxt
 = *
ÃxtTemp
;

200 
i
=0; i< 
numTemps
; i++) {

201 ià(
Ãxt
 >ğ
numTemps
)

202 
Ãxt
 = 0;

203 ià(!
p
[
Ãxt
].
šU£
 && !p[Ãxt].
live
) {

204 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
].
»g
);

205 
p
[
Ãxt
].
šU£
 = 
Œue
;

206 
p
[
Ãxt
].
·œ
 = 
çl£
;

207 *
ÃxtTemp
 = 
Ãxt
 + 1;

208  
p
[
Ãxt
].
»g
;

210 
Ãxt
++;

212 
Ãxt
 = *
ÃxtTemp
;

213 
i
=0; i< 
numTemps
; i++) {

214 ià(
Ãxt
 >ğ
numTemps
)

215 
Ãxt
 = 0;

216 ià(!
p
[
Ãxt
].
šU£
) {

217 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
].
»g
);

218 
p
[
Ãxt
].
šU£
 = 
Œue
;

219 
p
[
Ãxt
].
·œ
 = 
çl£
;

220 *
ÃxtTemp
 = 
Ãxt
 + 1;

221  
p
[
Ãxt
].
»g
;

223 
Ãxt
++;

225 ià(
»quœed
) {

226 
	`ALOGE
("No freeemp„egisters");

227 
	`dvmComp”AbÜt
(
cUn™
);

230 
	}
}

233 
	$dvmComp”AÎocTempDoubË
(
Comp©iÚUn™
 *
cUn™
)

235 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

236 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

237 
Ãxt
 = 
cUn™
->
»gPoŞ
->
ÃxtFPTemp
;

238 
i
;

240 
i
=0; i < 
numTemps
; i+=2) {

242 ià(
Ãxt
 & 1)

243 
Ãxt
++;

244 ià(
Ãxt
 >ğ
numTemps
)

245 
Ãxt
 = 0;

246 ià((!
p
[
Ãxt
].
šU£
 && !p[Ãxt].
live
) &&

247 (!
p
[
Ãxt
+1].
šU£
 && !p[Ãxt+1].
live
)) {

248 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
].
»g
);

249 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
+1].
»g
);

250 
p
[
Ãxt
].
šU£
 = 
Œue
;

251 
p
[
Ãxt
+1].
šU£
 = 
Œue
;

252 
	`as£¹
((
p
[
Ãxt
].
»g
+1) ==…[next+1].reg);

253 
	`as£¹
((
p
[
Ãxt
].
»g
 & 0x1) == 0);

254 
cUn™
->
»gPoŞ
->
ÃxtFPTemp
 += 2;

255  
p
[
Ãxt
].
»g
;

257 
Ãxt
 += 2;

259 
Ãxt
 = 
cUn™
->
»gPoŞ
->
ÃxtFPTemp
;

260 
i
=0; i < 
numTemps
; i+=2) {

261 ià(
Ãxt
 >ğ
numTemps
)

262 
Ãxt
 = 0;

263 ià(!
p
[
Ãxt
].
šU£
 && !p[next+1].inUse) {

264 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
].
»g
);

265 
	`dvmComp”Clobb”
(
cUn™
, 
p
[
Ãxt
+1].
»g
);

266 
p
[
Ãxt
].
šU£
 = 
Œue
;

267 
p
[
Ãxt
+1].
šU£
 = 
Œue
;

268 
	`as£¹
((
p
[
Ãxt
].
»g
+1) ==…[next+1].reg);

269 
	`as£¹
((
p
[
Ãxt
].
»g
 & 0x1) == 0);

270 
cUn™
->
»gPoŞ
->
ÃxtFPTemp
 += 2;

271  
p
[
Ãxt
].
»g
;

273 
Ãxt
 += 2;

275 
	`ALOGE
("No freeemp„egisters");

276 
	`dvmComp”AbÜt
(
cUn™
);

278 
	}
}

281 
	$dvmComp”AÎocF»eTemp
(
Comp©iÚUn™
 *
cUn™
)

283  
	`®locTempBody
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
,

284 
cUn™
->
»gPoŞ
->
numCÜeTemps
,

285 &
cUn™
->
»gPoŞ
->
ÃxtCÜeTemp
, 
Œue
);

286 
	}
}

288 
	$dvmComp”AÎocTemp
(
Comp©iÚUn™
 *
cUn™
)

290  
	`®locTempBody
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
,

291 
cUn™
->
»gPoŞ
->
numCÜeTemps
,

292 &
cUn™
->
»gPoŞ
->
ÃxtCÜeTemp
, 
Œue
);

293 
	}
}

295 
	$dvmComp”AÎocTempFlßt
(
Comp©iÚUn™
 *
cUn™
)

297  
	`®locTempBody
(
cUn™
, cUn™->
»gPoŞ
->
FPTemps
,

298 
cUn™
->
»gPoŞ
->
numFPTemps
,

299 &
cUn™
->
»gPoŞ
->
ÃxtFPTemp
, 
Œue
);

300 
	}
}

302 
Regi¡”Info
 *
	$®locLiveBody
(
Regi¡”Info
 *
p
, 
numTemps
, 
sReg
)

304 
i
;

305 ià(
sReg
 == -1)

306  
NULL
;

307 
i
=0; i < 
numTemps
; i++) {

308 ià(
p
[
i
].
live
 && (p[i].
sReg
 == sReg)) {

309 
p
[
i
].
šU£
 = 
Œue
;

310  &
p
[
i
];

313  
NULL
;

314 
	}
}

316 
Regi¡”Info
 *
	$®locLive
(
Comp©iÚUn™
 *
cUn™
, 
sReg
,

317 
»gCÏss
)

319 
Regi¡”Info
 *
»s
 = 
NULL
;

320 
»gCÏss
) {

321 
kAnyReg
:

322 
»s
 = 
	`®locLiveBody
(
cUn™
->
»gPoŞ
->
FPTemps
,

323 
cUn™
->
»gPoŞ
->
numFPTemps
, 
sReg
);

324 ià(
»s
)

327 
kCÜeReg
:

328 
»s
 = 
	`®locLiveBody
(
cUn™
->
»gPoŞ
->
cÜeTemps
,

329 
cUn™
->
»gPoŞ
->
numCÜeTemps
, 
sReg
);

331 
kFPReg
:

332 
»s
 = 
	`®locLiveBody
(
cUn™
->
»gPoŞ
->
FPTemps
,

333 
cUn™
->
»gPoŞ
->
numFPTemps
, 
sReg
);

336 
	`ALOGE
("Invalid„egisterype");

337 
	`dvmComp”AbÜt
(
cUn™
);

339  
»s
;

340 
	}
}

342 
	$dvmComp”F»eTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

344 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
cÜeTemps
;

345 
numTemps
 = 
cUn™
->
»gPoŞ
->
numCÜeTemps
;

346 
i
;

347 
i
=0; i< 
numTemps
; i++) {

348 ià(
p
[
i
].
»g
 ==„eg) {

349 
p
[
i
].
šU£
 = 
çl£
;

350 
p
[
i
].
·œ
 = 
çl£
;

354 
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

355 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

356 
i
=0; i< 
numTemps
; i++) {

357 ià(
p
[
i
].
»g
 ==„eg) {

358 
p
[
i
].
šU£
 = 
çl£
;

359 
p
[
i
].
·œ
 = 
çl£
;

363 
	`ALOGE
("Tr›dØä“‡‚Ú-exi¡ªˆ‹mp:„%d",
»g
);

364 
	`dvmComp”AbÜt
(
cUn™
);

365 
	}
}

367 
Regi¡”Info
 *
	$dvmComp”IsLive
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

369 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
cÜeTemps
;

370 
numTemps
 = 
cUn™
->
»gPoŞ
->
numCÜeTemps
;

371 
i
;

372 
i
=0; i< 
numTemps
; i++) {

373 ià(
p
[
i
].
»g
 ==„eg) {

374  
p
[
i
].
live
 ? &p[i] : 
NULL
;

377 
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

378 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

379 
i
=0; i< 
numTemps
; i++) {

380 ià(
p
[
i
].
»g
 ==„eg) {

381  
p
[
i
].
live
 ? &p[i] : 
NULL
;

384  
NULL
;

385 
	}
}

387 
Regi¡”Info
 *
	$dvmComp”IsTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

389 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
cÜeTemps
;

390 
numTemps
 = 
cUn™
->
»gPoŞ
->
numCÜeTemps
;

391 
i
;

392 
i
=0; i< 
numTemps
; i++) {

393 ià(
p
[
i
].
»g
 ==„eg) {

394  &
p
[
i
];

397 
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

398 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

399 
i
=0; i< 
numTemps
; i++) {

400 ià(
p
[
i
].
»g
 ==„eg) {

401  &
p
[
i
];

404  
NULL
;

405 
	}
}

412 
	$dvmComp”LockTemp
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

414 
Regi¡”Info
 *
p
 = 
cUn™
->
»gPoŞ
->
cÜeTemps
;

415 
numTemps
 = 
cUn™
->
»gPoŞ
->
numCÜeTemps
;

416 
i
;

417 
i
=0; i< 
numTemps
; i++) {

418 ià(
p
[
i
].
»g
 ==„eg) {

419 
p
[
i
].
šU£
 = 
Œue
;

420 
p
[
i
].
live
 = 
çl£
;

424 
p
 = 
cUn™
->
»gPoŞ
->
FPTemps
;

425 
numTemps
 = 
cUn™
->
»gPoŞ
->
numFPTemps
;

426 
i
=0; i< 
numTemps
; i++) {

427 ià(
p
[
i
].
»g
 ==„eg) {

428 
p
[
i
].
šU£
 = 
Œue
;

429 
p
[
i
].
live
 = 
çl£
;

433 
	`ALOGE
("Tr›dØlock‡‚Ú-exi¡ªˆ‹mp:„%d",
»g
);

434 
	`dvmComp”AbÜt
(
cUn™
);

435 
	}
}

437 
	$dvmComp”Re£tDef
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

439 
Regi¡”Info
 *
p
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

440 
p
->
defS¹
 = 
NULL
;

441 
p
->
defEnd
 = 
NULL
;

442 
	}
}

444 
	$nuÎifyRªge
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
¡¬t
, LIR *
fšish
,

445 
sReg1
, 
sReg2
)

447 ià(
¡¬t
 && 
fšish
) {

448 
LIR
 *
p
;

449 
	`as£¹
(
sReg1
 =ğ
sReg2
);

450 
p
 = 
¡¬t
; ;°ğp->
Ãxt
) {

451 ((
ArmLIR
 *)
p
)->
æags
.
isNİ
 = 
Œue
;

452 ià(
p
 =ğ
fšish
)

456 
	}
}

463 
	$dvmComp”M¬kDef
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
,

464 
LIR
 *
¡¬t
, LIR *
fšish
)

466 
	`as£¹
(!
¾
.
wide
);

467 
	`as£¹
(
¡¬t
 && s¹->
Ãxt
);

468 
	`as£¹
(
fšish
);

469 
Regi¡”Info
 *
p
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
lowReg
);

470 
p
->
defS¹
 = 
¡¬t
->
Ãxt
;

471 
p
->
defEnd
 = 
fšish
;

472 
	}
}

479 
	$dvmComp”M¬kDefWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
,

480 
LIR
 *
¡¬t
, LIR *
fšish
)

482 
	`as£¹
(
¾
.
wide
);

483 
	`as£¹
(
¡¬t
 && s¹->
Ãxt
);

484 
	`as£¹
(
fšish
);

485 
Regi¡”Info
 *
p
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
lowReg
);

486 
	`dvmComp”Re£tDef
(
cUn™
, 
¾
.
highReg
);

487 
p
->
defS¹
 = 
¡¬t
->
Ãxt
;

488 
p
->
defEnd
 = 
fšish
;

489 
	}
}

491 
RegLoÿtiÚ
 
	$dvmComp”WideToN¬row
(
Comp©iÚUn™
 *
cUn™
,

492 
RegLoÿtiÚ
 
¾
)

494 
	`as£¹
(
¾
.
wide
);

495 ià(
¾
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

496 
Regi¡”Info
 *
šfoLo
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
lowReg
);

497 
Regi¡”Info
 *
šfoHi
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
highReg
);

498 ià(!
šfoLo
->
·œ
) {

499 
	`dumpRegPoŞ
(
cUn™
->
»gPoŞ
->
cÜeTemps
,

500 
cUn™
->
»gPoŞ
->
numCÜeTemps
);

501 
	`as£¹
(
šfoLo
->
·œ
);

503 ià(!
šfoHi
->
·œ
) {

504 
	`dumpRegPoŞ
(
cUn™
->
»gPoŞ
->
cÜeTemps
,

505 
cUn™
->
»gPoŞ
->
numCÜeTemps
);

506 
	`as£¹
(
šfoHi
->
·œ
);

508 
	`as£¹
(
šfoLo
->
·œ
);

509 
	`as£¹
(
šfoHi
->
·œ
);

510 
	`as£¹
(
šfoLo
->
·¹Ãr
 =ğ
šfoHi
->
»g
);

511 
	`as£¹
(
šfoHi
->
·¹Ãr
 =ğ
šfoLo
->
»g
);

512 
šfoLo
->
·œ
 = 
çl£
;

513 
šfoHi
->
·œ
 = 
çl£
;

514 
šfoLo
->
defS¹
 = 
NULL
;

515 
šfoLo
->
defEnd
 = 
NULL
;

516 
šfoHi
->
defS¹
 = 
NULL
;

517 
šfoHi
->
defEnd
 = 
NULL
;

519 
¾
.
wide
 = 
çl£
;

520  
¾
;

521 
	}
}

523 
	$dvmComp”Re£tDefLoc
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
)

525 
	`as£¹
(!
¾
.
wide
);

526 ià(!(
gDvmJ™
.
di§bËO±
 & (1 << 
kSuµ»ssLßds
))) {

527 
Regi¡”Info
 *
p
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
lowReg
);

528 
	`as£¹
(!
p
->
·œ
);

529 
	`nuÎifyRªge
(
cUn™
, 
p
->
defS¹
,…->
defEnd
,

530 
p
->
sReg
, 
¾
.
sRegLow
);

532 
	`dvmComp”Re£tDef
(
cUn™
, 
¾
.
lowReg
);

533 
	}
}

535 
	$dvmComp”Re£tDefLocWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾
)

537 
	`as£¹
(
¾
.
wide
);

538 ià(!(
gDvmJ™
.
di§bËO±
 & (1 << 
kSuµ»ssLßds
))) {

539 
Regi¡”Info
 *
p
 = 
	`g‘RegInfo
(
cUn™
, 
¾
.
lowReg
);

540 
	`as£¹
(
p
->
·œ
);

541 
	`nuÎifyRªge
(
cUn™
, 
p
->
defS¹
,…->
defEnd
,

542 
p
->
sReg
, 
¾
.
sRegLow
);

544 
	`dvmComp”Re£tDef
(
cUn™
, 
¾
.
lowReg
);

545 
	`dvmComp”Re£tDef
(
cUn™
, 
¾
.
highReg
);

546 
	}
}

548 
	$dvmComp”Re£tDefT¿ckšg
(
Comp©iÚUn™
 *
cUn™
)

550 
i
;

551 
i
=0; i< 
cUn™
->
»gPoŞ
->
numCÜeTemps
; i++) {

552 
	`dvmComp”Re£tDef
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
[
i
].
»g
);

554 
i
=0; i< 
cUn™
->
»gPoŞ
->
numFPTemps
; i++) {

555 
	`dvmComp”Re£tDef
(
cUn™
, cUn™->
»gPoŞ
->
FPTemps
[
i
].
»g
);

557 
	}
}

559 
	$dvmComp”Clobb”AÎRegs
(
Comp©iÚUn™
 *
cUn™
)

561 
i
;

562 
i
=0; i< 
cUn™
->
»gPoŞ
->
numCÜeTemps
; i++) {

563 
	`dvmComp”Clobb”
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
[
i
].
»g
);

565 
i
=0; i< 
cUn™
->
»gPoŞ
->
numFPTemps
; i++) {

566 
	`dvmComp”Clobb”
(
cUn™
, cUn™->
»gPoŞ
->
FPTemps
[
i
].
»g
);

568 
	}
}

571 
	$dvmComp”LockAÎTemps
(
Comp©iÚUn™
 *
cUn™
)

573 
i
;

574 
i
=0; i< 
cUn™
->
»gPoŞ
->
numCÜeTemps
; i++) {

575 
	`dvmComp”LockTemp
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
[
i
].
»g
);

577 
	}
}

580 
	$æushAÎRegsBody
(
Comp©iÚUn™
 *
cUn™
, 
Regi¡”Info
 *
šfo
,

581 
numRegs
)

583 
i
;

584 
i
=0; i < 
numRegs
; i++) {

585 ià(
šfo
[
i
].
live
 && info[i].
dœty
) {

586 ià(
šfo
[
i
].
·œ
) {

587 
	`dvmComp”FlushRegWide
(
cUn™
, 
šfo
[
i
].
»g
, info[i].
·¹Ãr
);

589 
	`dvmComp”FlushReg
(
cUn™
, 
šfo
[
i
].
»g
);

593 
	}
}

595 
	$dvmComp”FlushAÎRegs
(
Comp©iÚUn™
 *
cUn™
)

597 
	`æushAÎRegsBody
(
cUn™
, cUn™->
»gPoŞ
->
cÜeTemps
,

598 
cUn™
->
»gPoŞ
->
numCÜeTemps
);

599 
	`æushAÎRegsBody
(
cUn™
, cUn™->
»gPoŞ
->
FPTemps
,

600 
cUn™
->
»gPoŞ
->
numFPTemps
);

601 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

602 
	}
}

606 
boŞ
 
	$»gCÏssM©ches
(
»gCÏss
, 
»g
)

608 ià(
»gCÏss
 =ğ
kAnyReg
) {

609  
Œue
;

610 } ià(
»gCÏss
 =ğ
kCÜeReg
) {

611  !
	`FPREG
(
»g
);

613  
	`FPREG
(
»g
);

615 
	}
}

617 
	$dvmComp”M¬kLive
(
Comp©iÚUn™
 *
cUn™
, 
»g
, 
sReg
)

619 
Regi¡”Info
 *
šfo
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

620 ià((
šfo
->
»g
 =ğ»gè&& (šfo->
sReg
 =ğsRegè&& info->
live
) {

622 } ià(
sReg
 !ğ
INVALID_SREG
) {

623 
	`dvmComp”Clobb”SReg
(
cUn™
, 
sReg
);

624 
šfo
->
live
 = 
Œue
;

627 
šfo
->
live
 = 
çl£
;

629 
šfo
->
sReg
 = sReg;

630 
	}
}

632 
	$dvmComp”M¬kPaœ
(
Comp©iÚUn™
 *
cUn™
, 
lowReg
, 
highReg
)

634 
Regi¡”Info
 *
šfoLo
 = 
	`g‘RegInfo
(
cUn™
, 
lowReg
);

635 
Regi¡”Info
 *
šfoHi
 = 
	`g‘RegInfo
(
cUn™
, 
highReg
);

636 
šfoLo
->
·œ
 = 
šfoHi
->·œ = 
Œue
;

637 
šfoLo
->
·¹Ãr
 = 
highReg
;

638 
šfoHi
->
·¹Ãr
 = 
lowReg
;

639 
	}
}

641 
	$dvmComp”M¬kCËª
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

643 
Regi¡”Info
 *
šfo
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

644 
šfo
->
dœty
 = 
çl£
;

645 
	}
}

647 
	$dvmComp”M¬kDœty
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

649 
Regi¡”Info
 *
šfo
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

650 
šfo
->
dœty
 = 
Œue
;

651 
	}
}

653 
	$dvmComp”M¬kInU£
(
Comp©iÚUn™
 *
cUn™
, 
»g
)

655 
Regi¡”Info
 *
šfo
 = 
	`g‘RegInfo
(
cUn™
, 
»g
);

656 
šfo
->
šU£
 = 
Œue
;

657 
	}
}

659 
	$cİyRegInfo
(
Comp©iÚUn™
 *
cUn™
, 
ÃwReg
, 
ŞdReg
)

661 
Regi¡”Info
 *
ÃwInfo
 = 
	`g‘RegInfo
(
cUn™
, 
ÃwReg
);

662 
Regi¡”Info
 *
ŞdInfo
 = 
	`g‘RegInfo
(
cUn™
, 
ŞdReg
);

663 *
ÃwInfo
 = *
ŞdInfo
;

664 
ÃwInfo
->
»g
 = 
ÃwReg
;

665 
	}
}

676 
RegLoÿtiÚ
 
	$dvmComp”Upd©eLoc
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
loc
)

678 
	`as£¹
(!
loc
.
wide
);

679 ià(
loc
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
) {

680 
Regi¡”Info
 *
šfoLo
 = 
	`®locLive
(
cUn™
, 
loc
.
sRegLow
, 
kAnyReg
);

681 ià(
šfoLo
) {

682 ià(
šfoLo
->
·œ
) {

683 
	`dvmComp”Clobb”
(
cUn™
, 
šfoLo
->
»g
);

684 
	`dvmComp”Clobb”
(
cUn™
, 
šfoLo
->
·¹Ãr
);

686 
loc
.
lowReg
 = 
šfoLo
->
»g
;

687 
loc
.
loÿtiÚ
 = 
kLocPhysReg
;

692  
loc
;

693 
	}
}

696 
RegLoÿtiÚ
 
	$dvmComp”Upd©eLocWide
(
Comp©iÚUn™
 *
cUn™
,

697 
RegLoÿtiÚ
 
loc
)

699 
	`as£¹
(
loc
.
wide
);

700 ià(
loc
.
loÿtiÚ
 =ğ
kLocD®vikF¿me
) {

702 
Regi¡”Info
 *
šfoLo
 = 
	`®locLive
(
cUn™
, 
loc
.
sRegLow
, 
kAnyReg
);

703 
Regi¡”Info
 *
šfoHi
 = 
	`®locLive
(
cUn™
,

704 
	`dvmComp”SRegHi
(
loc
.
sRegLow
), 
kAnyReg
);

705 
boŞ
 
m©ch
 = 
Œue
;

706 
m©ch
 = m©ch && (
šfoLo
 !ğ
NULL
);

707 
m©ch
 = m©ch && (
šfoHi
 !ğ
NULL
);

709 
m©ch
 = m©ch && (
	`FPREG
(
šfoLo
->
»g
è=ğFPREG(
šfoHi
->reg));

711 ià(
m©ch
 && 
	`FPREG
(
šfoLo
->
»g
)) {

712 
m©ch
 &ğ((
šfoLo
->
»g
 & 0x1) == 0);

713 
m©ch
 &ğ((
šfoHi
->
»g
 - 
šfoLo
->reg) == 1);

716 ià(
m©ch
 && (
šfoLo
->
·œ
 || 
šfoHi
->pair)) {

717 
m©ch
 = (
šfoLo
->
·œ
 =ğ
šfoHi
->pair);

718 
m©ch
 &ğ((
šfoLo
->
»g
 =ğ
šfoHi
->
·¹Ãr
) &&

719 (
šfoHi
->
»g
 =ğ
šfoLo
->
·¹Ãr
));

721 ià(
m©ch
) {

723 
loc
.
lowReg
 = 
šfoLo
->
»g
;

724 
loc
.
highReg
 = 
šfoHi
->
»g
;

725 
loc
.
loÿtiÚ
 = 
kLocPhysReg
;

726 
	`dvmComp”M¬kPaœ
(
cUn™
, 
loc
.
lowReg
,†oc.
highReg
);

727 
	`as£¹
(!
	`FPREG
(
loc
.
lowReg
) || ((loc.lowReg & 0x1) == 0));

728  
loc
;

731 ià(
šfoLo
) {

732 
	`dvmComp”Clobb”
(
cUn™
, 
šfoLo
->
»g
);

733 ià(
šfoLo
->
·œ
)

734 
	`dvmComp”Clobb”
(
cUn™
, 
šfoLo
->
·¹Ãr
);

736 ià(
šfoHi
) {

737 
	`dvmComp”Clobb”
(
cUn™
, 
šfoHi
->
»g
);

738 ià(
šfoHi
->
·œ
)

739 
	`dvmComp”Clobb”
(
cUn™
, 
šfoHi
->
·¹Ãr
);

743  
loc
;

744 
	}
}

746 
RegLoÿtiÚ
 
	$ev®LocWide
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
loc
,

747 
»gCÏss
, 
boŞ
 
upd©e
)

749 
	`as£¹
(
loc
.
wide
);

750 
ÃwRegs
;

751 
lowReg
;

752 
highReg
;

754 
loc
 = 
	`dvmComp”Upd©eLocWide
(
cUn™
,†oc);

757 ià(
loc
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

758 
	`as£¹
(
	`FPREG
(
loc
.
lowReg
è=ğFPREGÖoc.
highReg
));

759 
	`as£¹
(!
	`FPREG
(
loc
.
lowReg
) || ((loc.lowReg & 0x1) == 0));

760 ià(!
	`»gCÏssM©ches
(
»gCÏss
, 
loc
.
lowReg
)) {

762 
ÃwRegs
 = 
	`dvmComp”AÎocTy³dTempPaœ
(
cUn™
, 
loc
.
å
, 
»gCÏss
);

763 
lowReg
 = 
ÃwRegs
 & 0xff;

764 
highReg
 = (
ÃwRegs
 >> 8) & 0xff;

765 
	`dvmComp”RegCİyWide
(
cUn™
, 
lowReg
, 
highReg
, 
loc
.lowReg,

766 
loc
.
highReg
);

767 
	`cİyRegInfo
(
cUn™
, 
lowReg
, 
loc
.lowReg);

768 
	`cİyRegInfo
(
cUn™
, 
highReg
, 
loc
.highReg);

769 
	`dvmComp”Clobb”
(
cUn™
, 
loc
.
lowReg
);

770 
	`dvmComp”Clobb”
(
cUn™
, 
loc
.
highReg
);

771 
loc
.
lowReg
 =†owReg;

772 
loc
.
highReg
 = highReg;

773 
	`dvmComp”M¬kPaœ
(
cUn™
, 
loc
.
lowReg
,†oc.
highReg
);

774 
	`as£¹
(!
	`FPREG
(
loc
.
lowReg
) || ((loc.lowReg & 0x1) == 0));

776  
loc
;

779 
	`as£¹
((
loc
.
loÿtiÚ
 !ğ
kLocR‘v®
è|| (loc.
sRegLow
 =ğ
INVALID_SREG
));

780 
	`as£¹
((
loc
.
loÿtiÚ
 !ğ
kLocR‘v®
) ||

781 (
	`dvmComp”SRegHi
(
loc
.
sRegLow
è=ğ
INVALID_SREG
));

783 
ÃwRegs
 = 
	`dvmComp”AÎocTy³dTempPaœ
(
cUn™
, 
loc
.
å
, 
»gCÏss
);

784 
loc
.
lowReg
 = 
ÃwRegs
 & 0xff;

785 
loc
.
highReg
 = (
ÃwRegs
 >> 8) & 0xff;

787 
	`dvmComp”M¬kPaœ
(
cUn™
, 
loc
.
lowReg
,†oc.
highReg
);

788 ià(
upd©e
) {

789 
loc
.
loÿtiÚ
 = 
kLocPhysReg
;

790 
	`dvmComp”M¬kLive
(
cUn™
, 
loc
.
lowReg
,†oc.
sRegLow
);

791 
	`dvmComp”M¬kLive
(
cUn™
, 
loc
.
highReg
, 
	`dvmComp”SRegHi
Öoc.
sRegLow
));

793 
	`as£¹
(!
	`FPREG
(
loc
.
lowReg
) || ((loc.lowReg & 0x1) == 0));

794  
loc
;

795 
	}
}

797 
RegLoÿtiÚ
 
	$dvmComp”Ev®Loc
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
loc
,

798 
»gCÏss
, 
boŞ
 
upd©e
)

800 
ÃwReg
;

801 ià(
loc
.
wide
)

802  
	`ev®LocWide
(
cUn™
, 
loc
, 
»gCÏss
, 
upd©e
);

803 
loc
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,†oc);

805 ià(
loc
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

806 ià(!
	`»gCÏssM©ches
(
»gCÏss
, 
loc
.
lowReg
)) {

808 
ÃwReg
 = 
	`dvmComp”AÎocTy³dTemp
(
cUn™
, 
loc
.
å
, 
»gCÏss
);

809 
	`dvmComp”RegCİy
(
cUn™
, 
ÃwReg
, 
loc
.
lowReg
);

810 
	`cİyRegInfo
(
cUn™
, 
ÃwReg
, 
loc
.
lowReg
);

811 
	`dvmComp”Clobb”
(
cUn™
, 
loc
.
lowReg
);

812 
loc
.
lowReg
 = 
ÃwReg
;

814  
loc
;

817 
	`as£¹
((
loc
.
loÿtiÚ
 !ğ
kLocR‘v®
è|| (loc.
sRegLow
 =ğ
INVALID_SREG
));

819 
ÃwReg
 = 
	`dvmComp”AÎocTy³dTemp
(
cUn™
, 
loc
.
å
, 
»gCÏss
);

820 
loc
.
lowReg
 = 
ÃwReg
;

822 ià(
upd©e
) {

823 
loc
.
loÿtiÚ
 = 
kLocPhysReg
;

824 
	`dvmComp”M¬kLive
(
cUn™
, 
loc
.
lowReg
,†oc.
sRegLow
);

826  
loc
;

827 
	}
}

829 
šlše
 
	$g‘De¡SSAName
(
MIR
 *
mœ
, 
num
)

831 
	`as£¹
(
mœ
->
s§R•
->
numDefs
 > 
num
);

832  
mœ
->
s§R•
->
defs
[
num
];

833 
	}
}

836 
RegLoÿtiÚ
 
	$dvmComp”G‘Src
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
num
)

838 
RegLoÿtiÚ
 
loc
 = 
cUn™
->
»gLoÿtiÚ
[

839 
	`SREG
(
cUn™
, 
	`dvmComp”SSASrc
(
mœ
, 
num
))];

840 
loc
.
å
 = 
cUn™
->
»gLoÿtiÚ
[
	`dvmComp”SSASrc
(
mœ
, 
num
)].fp;

841 
loc
.
wide
 = 
çl£
;

842  
loc
;

843 
	}
}

846 
RegLoÿtiÚ
 
	$dvmComp”G‘De¡
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

847 
num
)

849 
RegLoÿtiÚ
 
loc
 = 
cUn™
->
»gLoÿtiÚ
[
	`SREG
(cUn™, 
	`g‘De¡SSAName
(
mœ
, 
num
))];

850 
loc
.
å
 = 
cUn™
->
»gLoÿtiÚ
[
	`g‘De¡SSAName
(
mœ
, 
num
)].fp;

851 
loc
.
wide
 = 
çl£
;

852  
loc
;

853 
	}
}

855 
RegLoÿtiÚ
 
	$g‘LocWide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

856 
low
, 
high
, 
boŞ
 
isSrc
)

858 
RegLoÿtiÚ
 
lowLoc
;

859 
RegLoÿtiÚ
 
highLoc
;

861 ià(
isSrc
) {

862 
lowLoc
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 
low
);

863 
highLoc
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 
high
);

865 
lowLoc
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 
low
);

866 
highLoc
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 
high
);

869 
	`as£¹
(
lowLoc
.
loÿtiÚ
 =ğ
highLoc
.location);

870 ià(
lowLoc
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

872 
	`as£¹
(
lowLoc
.
å
 =ğ
highLoc
.fp);

874 
lowLoc
.
wide
 = 
Œue
;

875 
lowLoc
.
highReg
 = 
highLoc
.
lowReg
;

876  
lowLoc
;

877 
	}
}

879 
RegLoÿtiÚ
 
	$dvmComp”G‘De¡Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

880 
low
, 
high
)

882  
	`g‘LocWide
(
cUn™
, 
mœ
, 
low
, 
high
, 
çl£
);

883 
	}
}

885 
RegLoÿtiÚ
 
	$dvmComp”G‘SrcWide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

886 
low
, 
high
)

888  
	`g‘LocWide
(
cUn™
, 
mœ
, 
low
, 
high
, 
Œue
);

889 
	}
}

892 
	$dvmComp”KlNuÎCheckedLoc
(
Comp©iÚUn™
 *
cUn™
,

893 
RegLoÿtiÚ
 
loc
)

895 ià(
loc
.
loÿtiÚ
 !ğ
kLocR‘v®
) {

896 
	`as£¹
(
loc
.
sRegLow
 !ğ
INVALID_SREG
);

897 
	`dvmCË¬B™
(
cUn™
->
»gPoŞ
->
nuÎCheckedRegs
, 
loc
.
sRegLow
);

898 ià(
loc
.
wide
) {

899 
	`as£¹
(
	`dvmComp”SRegHi
(
loc
.
sRegLow
è!ğ
INVALID_SREG
);

900 
	`dvmCË¬B™
(
cUn™
->
»gPoŞ
->
nuÎCheckedRegs
,

901 
	`dvmComp”SRegHi
(
loc
.
sRegLow
));

904 
	}
}

	@vm/compiler/codegen/arm/ArchFactory.cpp

29 
TGT_LIR
 *
	$g’RegImmCheck
(
Comp©iÚUn™
 *
cUn™
,

30 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

31 
checkV®ue
, 
dOff£t
,

32 
TGT_LIR
 *
püLab–
)

34 
TGT_LIR
 *
b¿nch
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
cÚd
, 
»g
, 
checkV®ue
);

35 ià(
cUn™
->
j™Mode
 =ğ
kJ™M‘hod
) {

36 
BasicBlock
 *
bb
 = 
cUn™
->
curBlock
;

37 ià(
bb
->
k’
) {

38 
ArmLIR
 *
exû±iÚLab–
 = (ArmLIR *è
cUn™
->
blockLab–Li¡
;

39 
exû±iÚLab–
 +ğ
bb
->
k’
->
id
;

40 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *è
exû±iÚLab–
;

41  
exû±iÚLab–
;

43 
	`ALOGE
("Catch blocks‚ot handled yet");

44 
	`dvmAbÜt
();

45  
NULL
;

48  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

50 
	}
}

57 
TGT_LIR
 *
	$g’NuÎCheck
(
Comp©iÚUn™
 *
cUn™
, 
sReg
, 
mReg
,

58 
dOff£t
, 
TGT_LIR
 *
püLab–
)

61 ià(
	`dvmIsB™S‘
(
cUn™
->
»gPoŞ
->
nuÎCheckedRegs
, 
sReg
)) {

62  
püLab–
;

64 
	`dvmS‘B™
(
cUn™
->
»gPoŞ
->
nuÎCheckedRegs
, 
sReg
);

65  
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdEq
, 
mReg
, 0, 
dOff£t
, 
püLab–
);

66 
	}
}

72 
TGT_LIR
 *
	$g’RegRegCheck
(
Comp©iÚUn™
 *
cUn™
,

73 
ArmCÚd™iÚCode
 
cÚd
,

74 
»g1
, 
»g2
, 
dOff£t
,

75 
TGT_LIR
 *
püLab–
)

77 
TGT_LIR
 *
»s
;

78 
»s
 = 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
»g1
, 
»g2
);

79 
TGT_LIR
 *
b¿nch
 = 
	`İCÚdB¿nch
(
cUn™
, 
cÚd
);

80 
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

81  
»s
;

82 
	}
}

88 
TGT_LIR
 *
	$g’Z”oCheck
(
Comp©iÚUn™
 *
cUn™
, 
mReg
,

89 
dOff£t
, 
TGT_LIR
 *
püLab–
)

91  
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdEq
, 
mReg
, 0, 
dOff£t
, 
püLab–
);

92 
	}
}

95 
TGT_LIR
 *
	$g’BoundsCheck
(
Comp©iÚUn™
 *
cUn™
, 
rIndex
,

96 
rBound
, 
dOff£t
, 
TGT_LIR
 *
püLab–
)

98  
	`g’RegRegCheck
(
cUn™
, 
kArmCÚdCs
, 
rIndex
, 
rBound
, 
dOff£t
,

99 
püLab–
);

100 
	}
}

106 
	$g’Di¥©chToHªdËr
(
Comp©iÚUn™
 *
cUn™
, 
Tem¶©eOpcode
 
İcode
)

116 
	`dvmComp”Clobb”HªdËrRegs
(
cUn™
);

117 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx1
,

118 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

119 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

120 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx2
,

121 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

122 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

123 
	}
}

	@vm/compiler/codegen/arm/ArchUtility.cpp

17 
	~"../../Comp”IÁ”Çls.h
"

18 
	~"libdex/DexOpcodes.h
"

19 
	~"ArmLIR.h
"

21 cÚ¡ *
	gshiáNames
[4] = {

28 * 
	$decodeRegLi¡
(
ArmOpcode
 
İcode
, 
veùÜ
, *
buf
)

30 
i
;

31 
boŞ
 
´š‹d
 = 
çl£
;

32 
buf
[0] = 0;

33 
i
 = 0; i < 16; i++, 
veùÜ
 >>= 1) {

34 ià(
veùÜ
 & 0x1) {

35 
»gId
 = 
i
;

36 ià(
İcode
 =ğ
kThumbPush
 && 
i
 == 8) {

37 
»gId
 = 
r14Ì
;

38 } ià(
İcode
 =ğ
kThumbPİ
 && 
i
 == 8) {

39 
»gId
 = 
r15pc
;

41 ià(
´š‹d
) {

42 
	`¥rštf
(
buf
 + 
	`¡¾’
(buf), ",„%d", 
»gId
);

44 
´š‹d
 = 
Œue
;

45 
	`¥rštf
(
buf
, "r%d", 
»gId
);

49  
buf
;

50 
	}
}

52 
	$ex·ndImmedŸ‹
(
v®ue
)

54 
mode
 = (
v®ue
 & 0xf00) >> 8;

55 
u4
 
b™s
 = 
v®ue
 & 0xff;

56 
mode
) {

58  
b™s
;

60  (
b™s
 << 16) | bits;

62  (
b™s
 << 24) | (bits << 8);

64  (
b™s
 << 24) | (bits << 16) | (bits << 8) | bits;

68 
b™s
 = (bits | 0x80) << 24;

69  
b™s
 >> (((
v®ue
 & 0xf80) >> 7) - 8);

70 
	}
}

76 
	$budIn¢SŒšg
(cÚ¡ *
fmt
, 
ArmLIR
 *
lœ
, * 
buf
,

77 *
ba£Addr
, 
size
)

79 
i
;

80 *
bufEnd
 = &
buf
[
size
-1];

81 cÚ¡ *
fmtEnd
 = &
fmt
[
	`¡¾’
(fmt)];

82 
tbuf
[256];

83 cÚ¡ *
Çme
;

84 
nc
;

85 
fmt
 < 
fmtEnd
) {

86 
İ”ªd
;

87 ià(*
fmt
 == '!') {

88 
fmt
++;

89 
	`as£¹
(
fmt
 < 
fmtEnd
);

90 
nc
 = *
fmt
++;

91 ià(
nc
=='!') {

92 
	`¡rıy
(
tbuf
, "!");

94 
	`as£¹
(
fmt
 < 
fmtEnd
);

95 
	`as£¹
(()(
nc
-'0') < 4);

96 
İ”ªd
 = 
lœ
->
İ”ªds
[
nc
-'0'];

97 *
fmt
++) {

99 ià(
İ”ªd
 != 0) {

100 
	`¥rštf
(
tbuf
, ", % %d",
shiáNames
[
İ”ªd
 & 0x3],

101 
İ”ªd
 >> 2);

103 
	`¡rıy
(
tbuf
,"");

107 
İ”ªd
) {

108 
kSY
:

109 
Çme
 = "sy";

111 
kST
:

112 
Çme
 = "st";

114 
kISH
:

115 
Çme
 = "ish";

117 
kISHST
:

118 
Çme
 = "ishst";

120 
kNSH
:

121 
Çme
 = "nsh";

123 
kNSHST
:

124 
Çme
 = "shst";

127 
Çme
 = "DecodeError";

130 
	`¡rıy
(
tbuf
, 
Çme
);

133 
	`¡rıy
(
tbuf
,"0000");

134 
i
=3; i>= 0; i--) {

135 
tbuf
[
i
] +ğ
İ”ªd
 & 1;

136 
İ”ªd
 >>= 1;

140 
İ”ªd
 = ~
	`ex·ndImmedŸ‹
(operand);

141 
	`¥rštf
(
tbuf
,"%d [%#x]", 
İ”ªd
, operand);

144 
İ”ªd
 = 
	`ex·ndImmedŸ‹
(operand);

145 
	`¥rštf
(
tbuf
,"%d [%#x]", 
İ”ªd
, operand);

148 
	`¥rštf
(
tbuf
,"s%d",
İ”ªd
 & 
FP_REG_MASK
);

151 
	`¥rštf
(
tbuf
,"d%d",(
İ”ªd
 & 
FP_REG_MASK
) >> 1);

154 
	`¥rštf
(
tbuf
,"%04x", 
İ”ªd
);

158 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
);

161 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
*4);

164 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
*2);

167 
İ”ªd
) {

168 
kArmCÚdEq
:

169 
	`¡rıy
(
tbuf
, "eq");

171 
kArmCÚdNe
:

172 
	`¡rıy
(
tbuf
, "ne");

174 
kArmCÚdLt
:

175 
	`¡rıy
(
tbuf
, "lt");

177 
kArmCÚdGe
:

178 
	`¡rıy
(
tbuf
, "ge");

180 
kArmCÚdGt
:

181 
	`¡rıy
(
tbuf
, "gt");

183 
kArmCÚdLe
:

184 
	`¡rıy
(
tbuf
, "le");

186 
kArmCÚdCs
:

187 
	`¡rıy
(
tbuf
, "cs");

189 
kArmCÚdMi
:

190 
	`¡rıy
(
tbuf
, "mi");

193 
	`¡rıy
(
tbuf
, "");

198 
	`¥rštf
(
tbuf
,"0x%08x (L%p)",

199 (è
ba£Addr
 + 
lœ
->
g’”ic
.
off£t
 + 4 +

200 (
İ”ªd
 << 1),

201 
lœ
->
g’”ic
.
rg‘
);

204 
off£t_1
 = 
lœ
->
İ”ªds
[0];

205 
off£t_2
 = 
	`NEXT_LIR
(
lœ
)->
İ”ªds
[0];

206 
šŒ_t
 
rg‘
 =

207 ((((
šŒ_t
è
ba£Addr
 + 
lœ
->
g’”ic
.
off£t
 + 4) &

208 ~3è+ (
off£t_1
 << 21 >> 9è+ (
off£t_2
 << 1)) &

210 
	`¥rštf
(
tbuf
, "%p", (*è
rg‘
);

216 
	`¡rıy
(
tbuf
, "see‡bove");

219 
	`decodeRegLi¡
(
lœ
->
İcode
, 
İ”ªd
, 
tbuf
);

222 
	`¡rıy
(
tbuf
,"DecodeError");

225 ià(
buf
+
	`¡¾’
(
tbuf
è<ğ
bufEnd
) {

226 
	`¡rıy
(
buf
, 
tbuf
);

227 
buf
 +ğ
	`¡¾’
(
tbuf
);

233 *
buf
++ = *
fmt
++;

235 ià(
buf
 =ğ
bufEnd
)

238 *
buf
 = 0;

239 
	}
}

241 
	$dvmDumpResourûMask
(
LIR
 *
lœ
, 
u8
 
mask
, cÚ¡ *
´efix
)

243 
buf
[256];

244 
buf
[0] = 0;

245 
ArmLIR
 *
¬mLIR
 = (ArmLIR *è
lœ
;

247 ià(
mask
 =ğ
ENCODE_ALL
) {

248 
	`¡rıy
(
buf
, "all");

250 
num
[8];

251 
i
;

253 
i
 = 0; i < 
kRegEnd
; i++) {

254 ià(
mask
 & (1ULL << 
i
)) {

255 
	`¥rštf
(
num
, "%d ", 
i
);

256 
	`¡rÿt
(
buf
, 
num
);

260 ià(
mask
 & 
ENCODE_CCODE
) {

261 
	`¡rÿt
(
buf
, "cc ");

263 ià(
mask
 & 
ENCODE_FP_STATUS
) {

264 
	`¡rÿt
(
buf
, "fpcc ");

268 ià(
¬mLIR
 && (
mask
 & 
ENCODE_DALVIK_REG
)) {

269 
	`¥rštf
(
buf
 + 
	`¡¾’
(buf), "dr%d%s", 
¬mLIR
->
®ŸsInfo
 & 0xffff,

270 (
¬mLIR
->
®ŸsInfo
 & 0x80000000) ? "(+1)" : "");

272 ià(
mask
 & 
ENCODE_LITERAL
) {

273 
	`¡rÿt
(
buf
, "lit ");

276 ià(
mask
 & 
ENCODE_HEAP_REF
) {

277 
	`¡rÿt
(
buf
, "heap ");

279 ià(
mask
 & 
ENCODE_MUST_NOT_ALIAS
) {

280 
	`¡rÿt
(
buf
, "noalias ");

283 ià(
buf
[0]) {

284 
	`ALOGD
("%s: %s", 
´efix
, 
buf
);

286 
	}
}

291 
	#DUMP_RESOURCE_MASK
(
X
)

	)

292 
	#DUMP_SSA_REP
(
X
)

	)

295 
	$dvmDumpLIRIn¢
(
LIR
 *
¬g
, *
ba£Addr
)

297 
ArmLIR
 *
lœ
 = (ArmLIR *è
¬g
;

298 
buf
[256];

299 
İName
[256];

300 
off£t
 = 
lœ
->
g’”ic
.offset;

301 
de¡
 = 
lœ
->
İ”ªds
[0];

302 cÚ¡ 
boŞ
 
dumpNİ
 = 
çl£
;

305 
lœ
->
İcode
) {

306 
kArmChaššgC–lBÙtom
:

307 
	`ALOGD
("--------ƒnd oàchaššg c–l (0x%04x)", 
off£t
);

309 
kArmP£udoB¬r›r
:

310 
	`ALOGD
("-------- BARRIER");

312 
kArmP£udoEx‹nded
:

313 
	`ALOGD
("-------- %s", (*è
de¡
);

315 
kArmP£udoSSAR•
:

316 
	`DUMP_SSA_REP
(
	`LOGD
("-------- %s", (*è
de¡
));

318 
kArmP£udoChaššgC–lBackw¬dB¿nch
:

319 
	`ALOGD
("L%p:", 
lœ
);

320 
	`ALOGD
("-------- chaššg c–È(backw¬d b¿nch): 0x%04x", 
de¡
);

322 
kArmP£udoChaššgC–lNÜm®
:

323 
	`ALOGD
("L%p:", 
lœ
);

324 
	`ALOGD
("-------- chaššg c–ÈÒÜm®): 0x%04x", 
de¡
);

326 
kArmP£udoChaššgC–lHÙ
:

327 
	`ALOGD
("L%p:", 
lœ
);

328 
	`ALOGD
("-------- chaššg c–È(hÙ): 0x%04x", 
de¡
);

330 
kArmP£udoChaššgC–lInvokeP»diùed
:

331 
	`ALOGD
("L%p:", 
lœ
);

332 
	`ALOGD
("-------- chaining cell (predicted): %s%s",

333 
de¡
 ? ((
M‘hod
 *ède¡)->
şazz
->
desütÜ
 : "",

334 
de¡
 ? ((
M‘hod
 *ède¡)->
Çme
 : "N/A");

336 
kArmP£udoChaššgC–lInvokeSšgËtÚ
:

337 
	`ALOGD
("L%p:", 
lœ
);

338 
	`ALOGD
("-------- chaining cell (invoke singleton): %s%s/%p",

339 ((
M‘hod
 *)
de¡
)->
şazz
->
desütÜ
,

340 ((
M‘hod
 *)
de¡
)->
Çme
,

341 ((
M‘hod
 *)
de¡
)->
š¢s
);

343 
kArmP£udoEÁryBlock
:

344 
	`ALOGD
("--------ƒÁry off£t: 0x%04x", 
de¡
);

346 
kArmP£udoD®vikBy‹CodeBound¬y
:

347 
	`ALOGD
("-------- d®vik off£t: 0x%04x @ %s", 
de¡
,

348 (*è
lœ
->
İ”ªds
[1]);

350 
kArmP£udoEx™Block
:

351 
	`ALOGD
("--------ƒx™ off£t: 0x%04x", 
de¡
);

353 
kArmP£udoP£udoAlign4
:

354 
	`ALOGD
("%°(%04x): .®ign4", 
ba£Addr
 + 
off£t
, offset);

356 
kArmP£udoPCRecÚ¡ruùiÚC–l
:

357 
	`ALOGD
("L%p:", 
lœ
);

358 
	`ALOGD
("--------„ecÚ¡ruù d®vik PC : 0x%04x @ +0x%04x", 
de¡
,

359 
lœ
->
İ”ªds
[1]);

361 
kArmP£udoPCRecÚ¡ruùiÚBlockLab–
:

364 
kArmP£udoEHBlockLab–
:

365 
	`ALOGD
("Exception_Handling:");

367 
kArmP£udoT¬g‘Lab–
:

368 
kArmP£udoNÜm®BlockLab–
:

369 
	`ALOGD
("L%p:", 
lœ
);

372 ià(
lœ
->
æags
.
isNİ
 && !
dumpNİ
) {

375 
	`budIn¢SŒšg
(
EncodšgM­
[
lœ
->
İcode
].
Çme
,†œ, 
İName
,

376 
ba£Addr
, 256);

377 
	`budIn¢SŒšg
(
EncodšgM­
[
lœ
->
İcode
].
fmt
,†œ, 
buf
, 
ba£Addr
,

379 
	`ALOGD
("%p (%04x): %-8s%s%s",

380 
ba£Addr
 + 
off£t
, off£t, 
İName
, 
buf
,

381 
lœ
->
æags
.
isNİ
 ? "(nop)" : "");

385 ià(
lœ
->
u£Mask
 && (!lœ->
æags
.
isNİ
 || 
dumpNİ
)) {

386 
	`DUMP_RESOURCE_MASK
(
	`dvmDumpResourûMask
((
LIR
 *è
lœ
,

387 
lœ
->
u£Mask
, "use"));

389 ià(
lœ
->
defMask
 && (!lœ->
æags
.
isNİ
 || 
dumpNİ
)) {

390 
	`DUMP_RESOURCE_MASK
(
	`dvmDumpResourûMask
((
LIR
 *è
lœ
,

391 
lœ
->
defMask
, "def"));

393 
	}
}

396 
	$dvmComp”Codeg’Dump
(
Comp©iÚUn™
 *
cUn™
)

398 
	`ALOGD
("Dumping LIR insns");

399 
LIR
 *
lœIn¢
;

400 
ArmLIR
 *
¬mLIR
;

402 
	`ALOGD
("š¡®Ëd codi © %p", 
cUn™
->
ba£Addr
);

403 
	`ALOGD
("tÙ® sizi %d by‹s", 
cUn™
->
tÙ®Size
);

404 
lœIn¢
 = 
cUn™
->
fœ¡LIRIn¢
;†œIn¢;†œIn¢ =†œIn¢->
Ãxt
) {

405 
	`dvmDumpLIRIn¢
(
lœIn¢
, (*è
cUn™
->
ba£Addr
);

407 
lœIn¢
 = 
cUn™
->
şassPoš‹rLi¡
;†œIn¢;†œIn¢ =†œIn¢->
Ãxt
) {

408 
¬mLIR
 = (
ArmLIR
 *è
lœIn¢
;

409 
	`ALOGD
("%p (%04x): .class (%s)",

410 (*)
cUn™
->
ba£Addr
 + 
¬mLIR
->
g’”ic
.
off£t
,

411 
¬mLIR
->
g’”ic
.
off£t
,

412 ((
C®ls™eInfo
 *è
¬mLIR
->
İ”ªds
[0])->
şassDesütÜ
);

414 
lœIn¢
 = 
cUn™
->
l™”®Li¡
;†œIn¢;†œIn¢ =†œIn¢->
Ãxt
) {

415 
¬mLIR
 = (
ArmLIR
 *è
lœIn¢
;

416 
	`ALOGD
("%p (%04x): .word (%#x)",

417 (*)
cUn™
->
ba£Addr
 + 
¬mLIR
->
g’”ic
.
off£t
,

418 
¬mLIR
->
g’”ic
.
off£t
,

419 
¬mLIR
->
İ”ªds
[0]);

421 
	}
}

424 
	$dvmComp”CacheFlush
(
¡¬t
, 
’d
, 
æags
)

426  
	`ÿcheæush
(
¡¬t
, 
’d
, 
æags
);

427 
	}
}

	@vm/compiler/codegen/arm/ArmLIR.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_ARMLIR_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_ARMLIR_H_


	)

20 
	~"D®vik.h
"

21 
	~"comp”/Comp”IÁ”Çls.h
"

65 
	#FP_REG_OFFSET
 32

	)

67 
	#FP_DOUBLE
 64

	)

69 
	#REGTYPE
(
x
è(x & (
FP_REG_OFFSET
 | 
FP_DOUBLE
))

	)

70 
	#FPREG
(
x
è((x & 
FP_REG_OFFSET
è=ğFP_REG_OFFSET)

	)

71 
	#LOWREG
(
x
è((x & 0x7è=ğx)

	)

72 
	#DOUBLEREG
(
x
è((x & 
FP_DOUBLE
è=ğFP_DOUBLE)

	)

73 
	#SINGLEREG
(
x
è(
	`FPREG
(xè&& !
	`DOUBLEREG
(x))

	)

81 
	#S2D
(
x
,
y
è((xè| 
FP_DOUBLE
)

	)

83 
	#FP_REG_MASK
 (
FP_REG_OFFSET
-1)

	)

85 
	#vNÚe
 (-1)

	)

87 
	#rNÚe
 (-1)

	)

90 
	#LOC_C_RETURN
 {
kLocPhysReg
, 0, 0, 
r0
, 0, -1}

	)

91 
	#LOC_C_RETURN_WIDE
 {
kLocPhysReg
, 1, 0, 
r0
, 
r1
, -1}

	)

93 
	#LOC_DALVIK_RETURN_VAL
 {
kLocR‘v®
, 0, 0, 0, 0, -1}

	)

94 
	#LOC_DALVIK_RETURN_VAL_WIDE
 {
kLocR‘v®
, 1, 0, 0, 0, -1}

	)

102 
	sRegi¡”Info
 {

103 
	m»g
;

104 
boŞ
 
	mšU£
;

105 
boŞ
 
	m·œ
;

106 
	m·¹Ãr
;

107 
boŞ
 
	mlive
;

108 
boŞ
 
	mdœty
;

109 
	msReg
;

110 
LIR
 *
	mdefS¹
;

111 
LIR
 *
	mdefEnd
;

112 } 
	tRegi¡”Info
;

114 
	sRegi¡”PoŞ
 {

115 
B™VeùÜ
 *
	mnuÎCheckedRegs
;

116 
	mnumCÜeTemps
;

117 
Regi¡”Info
 *
	mcÜeTemps
;

118 
	mÃxtCÜeTemp
;

119 
	mnumFPTemps
;

120 
Regi¡”Info
 *
	mFPTemps
;

121 
	mÃxtFPTemp
;

122 } 
	tRegi¡”PoŞ
;

124 
	eResourûEncodšgPos
 {

125 
	mkGPReg0
 = 0,

126 
	mkRegSP
 = 13,

127 
	mkRegLR
 = 14,

128 
	mkRegPC
 = 15,

129 
	mkFPReg0
 = 16,

130 
	mkRegEnd
 = 48,

131 
	mkCCode
 = 
kRegEnd
,

132 
	mkFPStus
,

134 
	mkD®vikReg
,

135 
	mkL™”®
,

136 
	mkH—pRef
,

137 
	mkMu¡NÙAlŸs
,

138 } 
	tResourûEncodšgPos
;

140 
	#ENCODE_REG_LIST
(
N
è((
u8
èN)

	)

141 
	#ENCODE_REG_SP
 (1ULL << 
kRegSP
)

	)

142 
	#ENCODE_REG_LR
 (1ULL << 
kRegLR
)

	)

143 
	#ENCODE_REG_PC
 (1ULL << 
kRegPC
)

	)

144 
	#ENCODE_CCODE
 (1ULL << 
kCCode
)

	)

145 
	#ENCODE_FP_STATUS
 (1ULL << 
kFPStus
)

	)

148 
	#ENCODE_DALVIK_REG
 (1ULL << 
kD®vikReg
)

	)

149 
	#ENCODE_LITERAL
 (1ULL << 
kL™”®
)

	)

150 
	#ENCODE_HEAP_REF
 (1ULL << 
kH—pRef
)

	)

151 
	#ENCODE_MUST_NOT_ALIAS
 (1ULL << 
kMu¡NÙAlŸs
)

	)

153 
	#ENCODE_ALL
 (~0ULL)

	)

154 
	#ENCODE_MEM
 (
ENCODE_DALVIK_REG
 | 
ENCODE_LITERAL
 | \

155 
ENCODE_HEAP_REF
 | 
ENCODE_MUST_NOT_ALIAS
)

	)

157 
	#DECODE_ALIAS_INFO_REG
(
X
è(X & 0xffff)

	)

158 
	#DECODE_ALIAS_INFO_WIDE
(
X
è((X & 0x80000000è? 1 : 0)

	)

160 
	eOpSize
 {

161 
	mkWÜd
,

162 
	mkLÚg
,

163 
	mkSšgË
,

164 
	mkDoubË
,

165 
	mkUnsigÃdH®f
,

166 
	mkSigÃdH®f
,

167 
	mkUnsigÃdBy‹
,

168 
	mkSigÃdBy‹
,

169 } 
	tOpSize
;

171 
	eOpKšd
 {

172 
	mkOpMov
,

173 
	mkOpMvn
,

174 
	mkOpCmp
,

175 
	mkOpL¦
,

176 
	mkOpL¤
,

177 
	mkOpA¤
,

178 
	mkOpRÜ
,

179 
	mkOpNÙ
,

180 
	mkOpAnd
,

181 
	mkOpOr
,

182 
	mkOpXÜ
,

183 
	mkOpNeg
,

184 
	mkOpAdd
,

185 
	mkOpAdc
,

186 
	mkOpSub
,

187 
	mkOpSbc
,

188 
	mkOpRsub
,

189 
	mkOpMul
,

190 
	mkOpDiv
,

191 
	mkOpRem
,

192 
	mkOpBic
,

193 
	mkOpCmn
,

194 
	mkOpT¡
,

195 
	mkOpBk±
,

196 
	mkOpBlx
,

197 
	mkOpPush
,

198 
	mkOpPİ
,

199 
	mkOp2Ch¬
,

200 
	mkOp2ShÜt
,

201 
	mkOp2By‹
,

202 
	mkOpCÚdBr
,

203 
	mkOpUncÚdBr
,

204 } 
	tOpKšd
;

213 
	eN©iveRegi¡”PoŞ
 {

214 
	mr0
 = 0,

215 
	mr1
 = 1,

216 
	mr2
 = 2,

217 
	mr3
 = 3,

218 
	mrPC
 = 4,

219 
	mr4PC
 = 
rPC
,

220 
	mrFP
 = 5,

221 
	mr5FP
 = 
rFP
,

222 
	mrSELF
 = 6,

223 
	mr6SELF
 = 
rSELF
,

224 
	mr7
 = 7,

225 
	mr8
 = 8,

226 
	mr9
 = 9,

227 
	mr10
 = 10,

228 
	mr11
 = 11,

229 
	mr12
 = 12,

230 
	mr13¥
 = 13,

231 
	mr14Ì
 = 14,

232 
	mr15pc
 = 15,

233 
	mä0
 = 0 + 
FP_REG_OFFSET
,

234 
	mä1
 = 1 + 
FP_REG_OFFSET
,

235 
	mä2
 = 2 + 
FP_REG_OFFSET
,

236 
	mä3
 = 3 + 
FP_REG_OFFSET
,

237 
	mä4
 = 4 + 
FP_REG_OFFSET
,

238 
	mä5
 = 5 + 
FP_REG_OFFSET
,

239 
	mä6
 = 6 + 
FP_REG_OFFSET
,

240 
	mä7
 = 7 + 
FP_REG_OFFSET
,

241 
	mä8
 = 8 + 
FP_REG_OFFSET
,

242 
	mä9
 = 9 + 
FP_REG_OFFSET
,

243 
	mä10
 = 10 + 
FP_REG_OFFSET
,

244 
	mä11
 = 11 + 
FP_REG_OFFSET
,

245 
	mä12
 = 12 + 
FP_REG_OFFSET
,

246 
	mä13
 = 13 + 
FP_REG_OFFSET
,

247 
	mä14
 = 14 + 
FP_REG_OFFSET
,

248 
	mä15
 = 15 + 
FP_REG_OFFSET
,

249 
	mä16
 = 16 + 
FP_REG_OFFSET
,

250 
	mä17
 = 17 + 
FP_REG_OFFSET
,

251 
	mä18
 = 18 + 
FP_REG_OFFSET
,

252 
	mä19
 = 19 + 
FP_REG_OFFSET
,

253 
	mä20
 = 20 + 
FP_REG_OFFSET
,

254 
	mä21
 = 21 + 
FP_REG_OFFSET
,

255 
	mä22
 = 22 + 
FP_REG_OFFSET
,

256 
	mä23
 = 23 + 
FP_REG_OFFSET
,

257 
	mä24
 = 24 + 
FP_REG_OFFSET
,

258 
	mä25
 = 25 + 
FP_REG_OFFSET
,

259 
	mä26
 = 26 + 
FP_REG_OFFSET
,

260 
	mä27
 = 27 + 
FP_REG_OFFSET
,

261 
	mä28
 = 28 + 
FP_REG_OFFSET
,

262 
	mä29
 = 29 + 
FP_REG_OFFSET
,

263 
	mä30
 = 30 + 
FP_REG_OFFSET
,

264 
	mä31
 = 31 + 
FP_REG_OFFSET
,

265 
	mdr0
 = 
ä0
 + 
FP_DOUBLE
,

266 
	mdr1
 = 
ä2
 + 
FP_DOUBLE
,

267 
	mdr2
 = 
ä4
 + 
FP_DOUBLE
,

268 
	mdr3
 = 
ä6
 + 
FP_DOUBLE
,

269 
	mdr4
 = 
ä8
 + 
FP_DOUBLE
,

270 
	mdr5
 = 
ä10
 + 
FP_DOUBLE
,

271 
	mdr6
 = 
ä12
 + 
FP_DOUBLE
,

272 
	mdr7
 = 
ä14
 + 
FP_DOUBLE
,

273 
	mdr8
 = 
ä16
 + 
FP_DOUBLE
,

274 
	mdr9
 = 
ä18
 + 
FP_DOUBLE
,

275 
	mdr10
 = 
ä20
 + 
FP_DOUBLE
,

276 
	mdr11
 = 
ä22
 + 
FP_DOUBLE
,

277 
	mdr12
 = 
ä24
 + 
FP_DOUBLE
,

278 
	mdr13
 = 
ä26
 + 
FP_DOUBLE
,

279 
	mdr14
 = 
ä28
 + 
FP_DOUBLE
,

280 
	mdr15
 = 
ä30
 + 
FP_DOUBLE
,

281 } 
	tN©iveRegi¡”PoŞ
;

284 
	eArmShiáEncodšgs
 {

285 
	mkArmL¦
 = 0x0,

286 
	mkArmL¤
 = 0x1,

287 
	mkArmA¤
 = 0x2,

288 
	mkArmRÜ
 = 0x3

289 } 
	tArmShiáEncodšgs
;

292 
	eArmCÚd™iÚCode
 {

293 
	mkArmCÚdEq
 = 0x0,

294 
	mkArmCÚdNe
 = 0x1,

295 
	mkArmCÚdCs
 = 0x2,

296 
	mkArmCÚdCc
 = 0x3,

297 
	mkArmCÚdMi
 = 0x4,

298 
	mkArmCÚdPl
 = 0x5,

299 
	mkArmCÚdVs
 = 0x6,

300 
	mkArmCÚdVc
 = 0x7,

301 
	mkArmCÚdHi
 = 0x8,

302 
	mkArmCÚdLs
 = 0x9,

303 
	mkArmCÚdGe
 = 0xa,

304 
	mkArmCÚdLt
 = 0xb,

305 
	mkArmCÚdGt
 = 0xc,

306 
	mkArmCÚdLe
 = 0xd,

307 
	mkArmCÚdAl
 = 0xe,

308 
	mkArmCÚdNv
 = 0xf,

309 } 
	tArmCÚd™iÚCode
;

311 
	#isP£udoOpcode
(
İcode
è(()(İcodeè< 0)

	)

318 
	eArmOpcode
 {

319 
	mkArmChaššgC–lBÙtom
 = -18,

320 
	mkArmP£udoB¬r›r
 = -17,

321 
	mkArmP£udoEx‹nded
 = -16,

322 
	mkArmP£udoSSAR•
 = -15,

323 
	mkArmP£udoEÁryBlock
 = -14,

324 
	mkArmP£udoEx™Block
 = -13,

325 
	mkArmP£udoT¬g‘Lab–
 = -12,

326 
	mkArmP£udoChaššgC–lBackw¬dB¿nch
 = -11,

327 
	mkArmP£udoChaššgC–lHÙ
 = -10,

328 
	mkArmP£udoChaššgC–lInvokeP»diùed
 = -9,

329 
	mkArmP£udoChaššgC–lInvokeSšgËtÚ
 = -8,

330 
	mkArmP£udoChaššgC–lNÜm®
 = -7,

331 
	mkArmP£udoD®vikBy‹CodeBound¬y
 = -6,

332 
	mkArmP£udoP£udoAlign4
 = -5,

333 
	mkArmP£udoPCRecÚ¡ruùiÚC–l
 = -4,

334 
	mkArmP£udoPCRecÚ¡ruùiÚBlockLab–
 = -3,

335 
	mkArmP£udoEHBlockLab–
 = -2,

336 
	mkArmP£udoNÜm®BlockLab–
 = -1,

338 
	mkArm16B™D©a
,

339 
	mkThumbAdcRR
,

340 
	mkThumbAddRRI3
,

341 
	mkThumbAddRI8
,

342 
	mkThumbAddRRR
,

343 
	mkThumbAddRRLH
,

344 
	mkThumbAddRRHL
,

345 
	mkThumbAddRRHH
,

346 
	mkThumbAddPcR–
,

347 
	mkThumbAddSpR–
,

348 
	mkThumbAddSpI7
,

349 
	mkThumbAndRR
,

350 
	mkThumbA¤RRI5
,

351 
	mkThumbA¤RR
,

352 
	mkThumbBCÚd
,

353 
	mkThumbBUncÚd
,

354 
	mkThumbBicRR
,

355 
	mkThumbBk±
,

356 
	mkThumbBlx1
,

357 
	mkThumbBlx2
,

358 
	mkThumbBl1
,

359 
	mkThumbBl2
,

360 
	mkThumbBlxR
,

361 
	mkThumbBx
,

362 
	mkThumbCmnRR
,

363 
	mkThumbCmpRI8
,

364 
	mkThumbCmpRR
,

365 
	mkThumbCmpLH
,

366 
	mkThumbCmpHL
,

367 
	mkThumbCmpHH
,

368 
	mkThumbEÜRR
,

369 
	mkThumbLdmŸ
,

370 
	mkThumbLdrRRI5
,

371 
	mkThumbLdrRRR
,

372 
	mkThumbLdrPcR–
,

373 
	mkThumbLdrSpR–
,

374 
	mkThumbLdrbRRI5
,

375 
	mkThumbLdrbRRR
,

376 
	mkThumbLdrhRRI5
,

377 
	mkThumbLdrhRRR
,

378 
	mkThumbLdrsbRRR
,

379 
	mkThumbLdrshRRR
,

380 
	mkThumbL¦RRI5
,

381 
	mkThumbL¦RR
,

382 
	mkThumbL¤RRI5
,

383 
	mkThumbL¤RR
,

384 
	mkThumbMovImm
,

385 
	mkThumbMovRR
,

386 
	mkThumbMovRR_H2H
,

387 
	mkThumbMovRR_H2L
,

388 
	mkThumbMovRR_L2H
,

389 
	mkThumbMul
,

390 
	mkThumbMvn
,

391 
	mkThumbNeg
,

392 
	mkThumbO¼
,

393 
	mkThumbPİ
,

394 
	mkThumbPush
,

395 
	mkThumbRÜRR
,

396 
	mkThumbSbc
,

397 
	mkThumbStmŸ
,

398 
	mkThumbSŒRRI5
,

399 
	mkThumbSŒRRR
,

400 
	mkThumbSŒSpR–
,

401 
	mkThumbSŒbRRI5
,

402 
	mkThumbSŒbRRR
,

403 
	mkThumbSŒhRRI5
,

404 
	mkThumbSŒhRRR
,

405 
	mkThumbSubRRI3
,

406 
	mkThumbSubRI8
,

407 
	mkThumbSubRRR
,

408 
	mkThumbSubSpI7
,

409 
	mkThumbSwi
,

410 
	mkThumbT¡
,

411 
	mkThumb2Vldrs
,

413 
	mkThumb2Vldrd
,

415 
	mkThumb2Vmuls
,

417 
	mkThumb2Vmuld
,

419 
	mkThumb2V¡rs
,

421 
	mkThumb2V¡rd
,

423 
	mkThumb2Vsubs
,

425 
	mkThumb2Vsubd
,

427 
	mkThumb2Vadds
,

429 
	mkThumb2Vaddd
,

431 
	mkThumb2Vdivs
,

433 
	mkThumb2Vdivd
,

435 
	mkThumb2VcvtIF
,

437 
	mkThumb2VcvtID
,

439 
	mkThumb2VcvtFI
,

441 
	mkThumb2VcvtDI
,

443 
	mkThumb2VcvtFd
,

445 
	mkThumb2VcvtDF
,

447 
	mkThumb2Vsq¹s
,

449 
	mkThumb2Vsq¹d
,

451 
	mkThumb2MovImmShiá
,

453 
	mkThumb2MovImm16
,

455 
	mkThumb2SŒRRI12
,

457 
	mkThumb2LdrRRI12
,

459 
	mkThumb2SŒRRI8P»dec
,

461 
	mkThumb2LdrRRI8P»dec
,

463 
	mkThumb2Cbnz
,

465 
	mkThumb2Cbz
,

467 
	mkThumb2AddRRI12
,

469 
	mkThumb2MovRR
,

471 
	mkThumb2Vmovs
,

473 
	mkThumb2Vmovd
,

475 
	mkThumb2LdmŸ
,

476 
	mkThumb2StmŸ
,

477 
	mkThumb2AddRRR
,

479 
	mkThumb2SubRRR
,

481 
	mkThumb2SbcRRR
,

483 
	mkThumb2CmpRR
,

485 
	mkThumb2SubRRI12
,

487 
	mkThumb2MvnImmShiá
,

489 
	mkThumb2S–
,

491 
	mkThumb2Ubfx
,

493 
	mkThumb2Sbfx
,

495 
	mkThumb2LdrRRR
,

497 
	mkThumb2LdrhRRR
,

499 
	mkThumb2LdrshRRR
,

501 
	mkThumb2LdrbRRR
,

503 
	mkThumb2LdrsbRRR
,

505 
	mkThumb2SŒRRR
,

507 
	mkThumb2SŒhRRR
,

509 
	mkThumb2SŒbRRR
,

511 
	mkThumb2LdrhRRI12
,

513 
	mkThumb2LdrshRRI12
,

515 
	mkThumb2LdrbRRI12
,

517 
	mkThumb2LdrsbRRI12
,

519 
	mkThumb2SŒhRRI12
,

521 
	mkThumb2SŒbRRI12
,

523 
	mkThumb2Pİ
,

524 
	mkThumb2Push
,

525 
	mkThumb2CmpRI8
,

527 
	mkThumb2AdcRRR
,

529 
	mkThumb2AndRRR
,

531 
	mkThumb2BicRRR
,

533 
	mkThumb2CmnRR
,

535 
	mkThumb2EÜRRR
,

537 
	mkThumb2MulRRR
,

539 
	mkThumb2MnvRR
,

541 
	mkThumb2RsubRRI8
,

543 
	mkThumb2NegRR
,

544 
	mkThumb2O¼RRR
,

546 
	mkThumb2T¡RR
,

548 
	mkThumb2L¦RRR
,

550 
	mkThumb2L¤RRR
,

552 
	mkThumb2A¤RRR
,

554 
	mkThumb2RÜRRR
,

556 
	mkThumb2L¦RRI5
,

558 
	mkThumb2L¤RRI5
,

560 
	mkThumb2A¤RRI5
,

562 
	mkThumb2RÜRRI5
,

564 
	mkThumb2BicRRI8
,

566 
	mkThumb2AndRRI8
,

568 
	mkThumb2O¼RRI8
,

570 
	mkThumb2EÜRRI8
,

572 
	mkThumb2AddRRI8
,

574 
	mkThumb2AdcRRI8
,

576 
	mkThumb2SubRRI8
,

578 
	mkThumb2SbcRRI8
,

580 
	mkThumb2It
,

581 
	mkThumb2Fm¡©
,

582 
	mkThumb2Vcmpd
,

584 
	mkThumb2Vcmps
,

586 
	mkThumb2LdrPcR–12
,

588 
	mkThumb2BCÚd
,

590 
	mkThumb2Vmovd_RR
,

592 
	mkThumb2Vmovs_RR
,

594 
	mkThumb2Fmrs
,

596 
	mkThumb2Fm¤
,

598 
	mkThumb2Fm¼d
,

600 
	mkThumb2Fmd¼
,

602 
	mkThumb2Vabsd
,

604 
	mkThumb2Vabss
,

606 
	mkThumb2VÃgd
,

608 
	mkThumb2VÃgs
,

610 
	mkThumb2Vmovs_IMM8
,

612 
	mkThumb2Vmovd_IMM8
,

614 
	mkThumb2MÏ
,

616 
	mkThumb2UmuÎ
,

618 
	mkThumb2Ld»x
,

620 
	mkThumb2SŒex
,

622 
	mkThumb2CÌex
,

623 
	mkThumb2Bfi
,

625 
	mkThumb2Bfc
,

627 
	mkThumb2Dmb
,

628 
	mkThumb2LdrPcR–n12
,

630 
	mkThumbUndefšed
,

631 
	mkArmLa¡
,

632 } 
	tArmOpcode
;

635 
	eArmOpDmbO±iÚs
 {

636 
	mkSY
 = 0xf,

637 
	mkST
 = 0xe,

638 
	mkISH
 = 0xb,

639 
	mkISHST
 = 0xa,

640 
	mkNSH
 = 0x7,

641 
	mkNSHST
 = 0x6

642 } 
	tArmOpDmbO±iÚs
;

645 
	eArmOpF—tu»FÏgs
 {

646 
	mkIsB¿nch
 = 0,

647 
	mkRegDef0
,

648 
	mkRegDef1
,

649 
	mkRegDefSP
,

650 
	mkRegDefLR
,

651 
	mkRegDefLi¡0
,

652 
	mkRegDefLi¡1
,

653 
	mkRegU£0
,

654 
	mkRegU£1
,

655 
	mkRegU£2
,

656 
	mkRegU£3
,

657 
	mkRegU£SP
,

658 
	mkRegU£PC
,

659 
	mkRegU£Li¡0
,

660 
	mkRegU£Li¡1
,

661 
	mkNoO³¿nd
,

662 
	mkIsUÇryOp
,

663 
	mkIsBš¬yOp
,

664 
	mkIsT”tŸryOp
,

665 
	mkIsQuadOp
,

666 
	mkIsIT
,

667 
	mkS‘sCCodes
,

668 
	mkU£sCCodes
,

669 
	mkMemLßd
,

670 
	mkMemStÜe
,

671 } 
	tArmOpF—tu»FÏgs
;

673 
	#IS_LOAD
 (1 << 
kMemLßd
)

	)

674 
	#IS_STORE
 (1 << 
kMemStÜe
)

	)

675 
	#IS_BRANCH
 (1 << 
kIsB¿nch
)

	)

676 
	#REG_DEF0
 (1 << 
kRegDef0
)

	)

677 
	#REG_DEF1
 (1 << 
kRegDef1
)

	)

678 
	#REG_DEF_SP
 (1 << 
kRegDefSP
)

	)

679 
	#REG_DEF_LR
 (1 << 
kRegDefLR
)

	)

680 
	#REG_DEF_LIST0
 (1 << 
kRegDefLi¡0
)

	)

681 
	#REG_DEF_LIST1
 (1 << 
kRegDefLi¡1
)

	)

682 
	#REG_USE0
 (1 << 
kRegU£0
)

	)

683 
	#REG_USE1
 (1 << 
kRegU£1
)

	)

684 
	#REG_USE2
 (1 << 
kRegU£2
)

	)

685 
	#REG_USE3
 (1 << 
kRegU£3
)

	)

686 
	#REG_USE_SP
 (1 << 
kRegU£SP
)

	)

687 
	#REG_USE_PC
 (1 << 
kRegU£PC
)

	)

688 
	#REG_USE_LIST0
 (1 << 
kRegU£Li¡0
)

	)

689 
	#REG_USE_LIST1
 (1 << 
kRegU£Li¡1
)

	)

690 
	#NO_OPERAND
 (1 << 
kNoO³¿nd
)

	)

691 
	#IS_UNARY_OP
 (1 << 
kIsUÇryOp
)

	)

692 
	#IS_BINARY_OP
 (1 << 
kIsBš¬yOp
)

	)

693 
	#IS_TERTIARY_OP
 (1 << 
kIsT”tŸryOp
)

	)

694 
	#IS_QUAD_OP
 (1 << 
kIsQuadOp
)

	)

695 
	#IS_IT
 (1 << 
kIsIT
)

	)

696 
	#SETS_CCODES
 (1 << 
kS‘sCCodes
)

	)

697 
	#USES_CCODES
 (1 << 
kU£sCCodes
)

	)

700 
	#REG_USE01
 (
REG_USE0
 | 
REG_USE1
)

	)

701 
	#REG_USE012
 (
REG_USE01
 | 
REG_USE2
)

	)

702 
	#REG_USE12
 (
REG_USE1
 | 
REG_USE2
)

	)

703 
	#REG_DEF0_USE0
 (
REG_DEF0
 | 
REG_USE0
)

	)

704 
	#REG_DEF0_USE1
 (
REG_DEF0
 | 
REG_USE1
)

	)

705 
	#REG_DEF0_USE01
 (
REG_DEF0
 | 
REG_USE01
)

	)

706 
	#REG_DEF0_USE12
 (
REG_DEF0
 | 
REG_USE12
)

	)

707 
	#REG_DEF01_USE2
 (
REG_DEF0
 | 
REG_DEF1
 | 
REG_USE2
)

	)

710 
	eArmEncodšgKšd
 {

711 
	mkFmtUnu£d
,

712 
	mkFmtB™BÉ
,

713 
	mkFmtDå
,

714 
	mkFmtSå
,

715 
	mkFmtModImm
,

716 
	mkFmtImm16
,

717 
	mkFmtImm6
,

718 
	mkFmtImm12
,

719 
	mkFmtShiá
,

720 
	mkFmtLsb
,

721 
	mkFmtBWidth
,

722 
	mkFmtShiá5
,

723 
	mkFmtBrOff£t
,

724 
	mkFmtFPImm
,

725 } 
	tArmEncodšgKšd
;

728 
	sArmEncodšgM­
 {

729 
u4
 
	msk–‘Ú
;

731 
ArmEncodšgKšd
 
	mkšd
;

732 
	m’d
;

733 
	m¡¬t
;

734 } 
	mf›ldLoc
[4];

735 
ArmOpcode
 
	mİcode
;

736 
	mæags
;

737 cÚ¡ * 
	mÇme
;

738 cÚ¡ * 
	mfmt
;

739 
	msize
;

740 } 
	tArmEncodšgM­
;

743 
	eArmT¬g‘O±Hšts
 {

744 
	mkMaxHoi¡Di¡ªû
,

745 } 
	tArmT¬g‘O±Hšts
;

747 
ArmEncodšgM­
 
EncodšgM­
[
kArmLa¡
];

763 
	sArmLIR
 {

764 
LIR
 
	mg’”ic
;

765 
ArmOpcode
 
	mİcode
;

766 
	mİ”ªds
[4];

768 
boŞ
 
	misNİ
:1;

769 
boŞ
 
	mš£¹W¿µ”
:1;

770 
	mage
:4;

771 
	msize
:3;

772 
	munu£d
:23;

773 } 
	mæags
;

774 
	m®ŸsInfo
;

775 
u8
 
	mu£Mask
;

776 
u8
 
	mdefMask
;

777 } 
	tArmLIR
;

781 
	#PREDICTED_CHAIN_BX_PAIR_INIT
 0xe7ã

	)

784 
	#NEXT_LIR
(
lœ
è((
ArmLIR
 *èlœ->
g’”ic
.
Ãxt
)

	)

785 
	#PREV_LIR
(
lœ
è((
ArmLIR
 *èlœ->
g’”ic
.
´ev
)

	)

787 
	#NEXT_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
Ãxt


	)

788 
	#PREV_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
´ev


	)

790 
	#CHAIN_CELL_OFFSET_TAG
 0xcdab

	)

792 
	#CHAIN_CELL_NORMAL_SIZE
 12

	)

793 
	#CHAIN_CELL_PREDICTED_SIZE
 16

	)

	@vm/compiler/codegen/arm/ArmRallocUtil.cpp

21 
	~"comp”/Comp”Ut™y.h
"

22 
	~"comp”/Comp”IR.h
"

23 
	~"comp”/D©aæow.h
"

24 
	~"ArmLIR.h
"

25 
	~"Codeg’.h
"

26 
	~"comp”/codeg’/R®loc.h
"

52 
	$dvmComp”Clobb”C®lRegs
(
Comp©iÚUn™
 *
cUn™
)

54 
	`dvmComp”Clobb”
(
cUn™
, 
r0
);

55 
	`dvmComp”Clobb”
(
cUn™
, 
r1
);

56 
	`dvmComp”Clobb”
(
cUn™
, 
r2
);

57 
	`dvmComp”Clobb”
(
cUn™
, 
r3
);

58 
	`dvmComp”Clobb”
(
cUn™
, 
r9
);

59 
	`dvmComp”Clobb”
(
cUn™
, 
r11
);

60 
	`dvmComp”Clobb”
(
cUn™
, 
r12
);

61 
	`dvmComp”Clobb”
(
cUn™
, 
r14Ì
);

62 
	}
}

65 
	$dvmComp”Clobb”HªdËrRegs
(
Comp©iÚUn™
 *
cUn™
)

68 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

69 
	`dvmComp”Clobb”
(
cUn™
, 
r4PC
);

70 
	`dvmComp”Clobb”
(
cUn™
, 
r7
);

71 
	`dvmComp”Clobb”
(
cUn™
, 
r8
);

72 
	`dvmComp”Clobb”
(
cUn™
, 
r9
);

73 
	`dvmComp”Clobb”
(
cUn™
, 
r10
);

74 
	}
}

76 
RegLoÿtiÚ
 
	$dvmComp”G‘R‘uºWide
(
Comp©iÚUn™
 *
cUn™
)

78 
RegLoÿtiÚ
 
»s
 = 
LOC_C_RETURN_WIDE
;

79 
	`dvmComp”Clobb”
(
cUn™
, 
r0
);

80 
	`dvmComp”Clobb”
(
cUn™
, 
r1
);

81 
	`dvmComp”M¬kInU£
(
cUn™
, 
r0
);

82 
	`dvmComp”M¬kInU£
(
cUn™
, 
r1
);

83 
	`dvmComp”M¬kPaœ
(
cUn™
, 
»s
.
lowReg
,„es.
highReg
);

84  
»s
;

85 
	}
}

87 
RegLoÿtiÚ
 
	$dvmComp”G‘R‘uºWideAÉ
(
Comp©iÚUn™
 *
cUn™
)

89 
RegLoÿtiÚ
 
»s
 = 
LOC_C_RETURN_WIDE
;

90 
»s
.
lowReg
 = 
r2
;

91 
»s
.
highReg
 = 
r3
;

92 
	`dvmComp”Clobb”
(
cUn™
, 
r2
);

93 
	`dvmComp”Clobb”
(
cUn™
, 
r3
);

94 
	`dvmComp”M¬kInU£
(
cUn™
, 
r2
);

95 
	`dvmComp”M¬kInU£
(
cUn™
, 
r3
);

96 
	`dvmComp”M¬kPaœ
(
cUn™
, 
»s
.
lowReg
,„es.
highReg
);

97  
»s
;

98 
	}
}

100 
RegLoÿtiÚ
 
	$dvmComp”G‘R‘uº
(
Comp©iÚUn™
 *
cUn™
)

102 
RegLoÿtiÚ
 
»s
 = 
LOC_C_RETURN
;

103 
	`dvmComp”Clobb”
(
cUn™
, 
r0
);

104 
	`dvmComp”M¬kInU£
(
cUn™
, 
r0
);

105  
»s
;

106 
	}
}

108 
RegLoÿtiÚ
 
	$dvmComp”G‘R‘uºAÉ
(
Comp©iÚUn™
 *
cUn™
)

110 
RegLoÿtiÚ
 
»s
 = 
LOC_C_RETURN
;

111 
»s
.
lowReg
 = 
r1
;

112 
	`dvmComp”Clobb”
(
cUn™
, 
r1
);

113 
	`dvmComp”M¬kInU£
(
cUn™
, 
r1
);

114  
»s
;

115 
	}
}

	@vm/compiler/codegen/arm/Assemble.cpp

17 
	~"D®vik.h
"

18 
	~"libdex/DexOpcodes.h
"

20 
	~"../../Comp”IÁ”Çls.h
"

21 
	~"ArmLIR.h
"

22 
	~"Codeg’.h
"

23 
	~<sys/mmª.h
>

25 
	#MAX_ASSEMBLER_RETRIES
 10

	)

43 
	#ENCODING_MAP
(
İcode
, 
sk–‘Ú
, 
k0
, 
ds
, 
de
, 
k1
, 
s1s
, 
s1e
, 
k2
, 
s2s
, 
s2e
, \

44 
k3
, 
k3s
, 
k3e
, 
æags
, 
Çme
, 
fmt
, 
size
) \

45 {
sk–‘Ú
, {{
k0
, 
ds
, 
de
}, {
k1
, 
s1s
, 
s1e
}, {
k2
, 
s2s
, 
s2e
}, \

46 {
k3
, 
k3s
, 
k3e
}}, 
İcode
, 
æags
, 
Çme
, 
fmt
, 
size
}

	)

80 
ArmEncodšgM­
 
	gEncodšgM­
[
kArmLa¡
] = {

81 
ENCODING_MAP
(
kArm16B™D©a
, 0x0000,

82 
kFmtB™BÉ
, 15, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

83 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
, "data", "0x!0h(!0d)", 1),

84 
ENCODING_MAP
(
kThumbAdcRR
, 0x4140,

85 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

86 
kFmtUnu£d
, -1, -1,

87 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
 | 
USES_CCODES
,

89 
ENCODING_MAP
(
kThumbAddRRI3
, 0x1c00,

90 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

91 
kFmtUnu£d
, -1, -1,

92 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

94 
ENCODING_MAP
(
kThumbAddRI8
, 0x3000,

95 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

96 
kFmtUnu£d
, -1, -1,

97 
IS_BINARY_OP
 | 
REG_DEF0_USE0
 | 
SETS_CCODES
,

99 
ENCODING_MAP
(
kThumbAddRRR
, 0x1800,

100 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

101 
kFmtUnu£d
, -1, -1,

102 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
SETS_CCODES
,

104 
ENCODING_MAP
(
kThumbAddRRLH
, 0x4440,

105 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

106 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE01
,

108 
ENCODING_MAP
(
kThumbAddRRHL
, 0x4480,

109 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

110 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE01
,

112 
ENCODING_MAP
(
kThumbAddRRHH
, 0x44c0,

113 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

114 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE01
,

116 
ENCODING_MAP
(
kThumbAddPcR–
, 0xa000,

117 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

118 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
IS_BRANCH
,

120 
ENCODING_MAP
(
kThumbAddSpR–
, 0xa800,

121 
kFmtB™BÉ
, 10, 8, 
kFmtUnu£d
, -1, -1, kFmtBitBlt, 7, 0,

122 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
,

124 
ENCODING_MAP
(
kThumbAddSpI7
, 0xb000,

125 
kFmtB™BÉ
, 6, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

126 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
,

128 
ENCODING_MAP
(
kThumbAndRR
, 0x4000,

129 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

130 
kFmtUnu£d
, -1, -1,

131 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

133 
ENCODING_MAP
(
kThumbA¤RRI5
, 0x1000,

134 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

135 
kFmtUnu£d
, -1, -1,

136 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

138 
ENCODING_MAP
(
kThumbA¤RR
, 0x4100,

139 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

140 
kFmtUnu£d
, -1, -1,

141 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

143 
ENCODING_MAP
(
kThumbBCÚd
, 0xd000,

144 
kFmtB™BÉ
, 7, 0, kFmtB™BÉ, 11, 8, 
kFmtUnu£d
, -1, -1,

145 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
IS_BRANCH
 | 
USES_CCODES
,

147 
ENCODING_MAP
(
kThumbBUncÚd
, 0xe000,

148 
kFmtB™BÉ
, 10, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

149 
kFmtUnu£d
, -1, -1, 
NO_OPERAND
 | 
IS_BRANCH
,

151 
ENCODING_MAP
(
kThumbBicRR
, 0x4380,

152 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

153 
kFmtUnu£d
, -1, -1,

154 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

156 
ENCODING_MAP
(
kThumbBk±
, 0xbe00,

157 
kFmtB™BÉ
, 7, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

158 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
IS_BRANCH
,

160 
ENCODING_MAP
(
kThumbBlx1
, 0xf000,

161 
kFmtB™BÉ
, 10, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

162 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
IS_BRANCH
 | 
REG_DEF_LR
,

164 
ENCODING_MAP
(
kThumbBlx2
, 0xe800,

165 
kFmtB™BÉ
, 10, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

166 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
IS_BRANCH
 | 
REG_DEF_LR
,

168 
ENCODING_MAP
(
kThumbBl1
, 0xf000,

169 
kFmtB™BÉ
, 10, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

170 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
IS_BRANCH
 | 
REG_DEF_LR
,

172 
ENCODING_MAP
(
kThumbBl2
, 0xf800,

173 
kFmtB™BÉ
, 10, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

174 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
IS_BRANCH
 | 
REG_DEF_LR
,

176 
ENCODING_MAP
(
kThumbBlxR
, 0x4780,

177 
kFmtB™BÉ
, 6, 3, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

178 
kFmtUnu£d
, -1, -1,

179 
IS_UNARY_OP
 | 
REG_USE0
 | 
IS_BRANCH
 | 
REG_DEF_LR
,

181 
ENCODING_MAP
(
kThumbBx
, 0x4700,

182 
kFmtB™BÉ
, 6, 3, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

183 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
IS_BRANCH
,

185 
ENCODING_MAP
(
kThumbCmnRR
, 0x42c0,

186 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

187 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

189 
ENCODING_MAP
(
kThumbCmpRI8
, 0x2800,

190 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

191 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE0
 | 
SETS_CCODES
,

193 
ENCODING_MAP
(
kThumbCmpRR
, 0x4280,

194 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

195 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

197 
ENCODING_MAP
(
kThumbCmpLH
, 0x4540,

198 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

199 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

201 
ENCODING_MAP
(
kThumbCmpHL
, 0x4580,

202 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

203 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

205 
ENCODING_MAP
(
kThumbCmpHH
, 0x45c0,

206 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

207 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

209 
ENCODING_MAP
(
kThumbEÜRR
, 0x4040,

210 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

211 
kFmtUnu£d
, -1, -1,

212 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

214 
ENCODING_MAP
(
kThumbLdmŸ
, 0xc800,

215 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

216 
kFmtUnu£d
, -1, -1,

217 
IS_BINARY_OP
 | 
REG_DEF0_USE0
 | 
REG_DEF_LIST1
 | 
IS_LOAD
,

219 
ENCODING_MAP
(
kThumbLdrRRI5
, 0x6800,

220 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

221 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

223 
ENCODING_MAP
(
kThumbLdrRRR
, 0x5800,

224 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

225 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

227 
ENCODING_MAP
(
kThumbLdrPcR–
, 0x4800,

228 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

229 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0
 | 
REG_USE_PC


230 | 
IS_LOAD
, "ldr", "r!0d, [pc, #!1E]", 1),

231 
ENCODING_MAP
(
kThumbLdrSpR–
, 0x9800,

232 
kFmtB™BÉ
, 10, 8, 
kFmtUnu£d
, -1, -1, kFmtBitBlt, 7, 0,

233 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0
 | 
REG_USE_SP


234 | 
IS_LOAD
, "ldr", "r!0d, [sp, #!2E]", 1),

235 
ENCODING_MAP
(
kThumbLdrbRRI5
, 0x7800,

236 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

237 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

239 
ENCODING_MAP
(
kThumbLdrbRRR
, 0x5c00,

240 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

241 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

243 
ENCODING_MAP
(
kThumbLdrhRRI5
, 0x8800,

244 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

245 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

247 
ENCODING_MAP
(
kThumbLdrhRRR
, 0x5a00,

248 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

249 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

251 
ENCODING_MAP
(
kThumbLdrsbRRR
, 0x5600,

252 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

253 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

255 
ENCODING_MAP
(
kThumbLdrshRRR
, 0x5e00,

256 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

257 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

259 
ENCODING_MAP
(
kThumbL¦RRI5
, 0x0000,

260 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

261 
kFmtUnu£d
, -1, -1,

262 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

264 
ENCODING_MAP
(
kThumbL¦RR
, 0x4080,

265 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

266 
kFmtUnu£d
, -1, -1,

267 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

269 
ENCODING_MAP
(
kThumbL¤RRI5
, 0x0800,

270 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

271 
kFmtUnu£d
, -1, -1,

272 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

274 
ENCODING_MAP
(
kThumbL¤RR
, 0x40c0,

275 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

276 
kFmtUnu£d
, -1, -1,

277 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

279 
ENCODING_MAP
(
kThumbMovImm
, 0x2000,

280 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

281 
kFmtUnu£d
, -1, -1,

282 
IS_BINARY_OP
 | 
REG_DEF0
 | 
SETS_CCODES
,

284 
ENCODING_MAP
(
kThumbMovRR
, 0x1c00,

285 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

286 
kFmtUnu£d
, -1, -1,

287 
IS_BINARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

289 
ENCODING_MAP
(
kThumbMovRR_H2H
, 0x46c0,

290 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

291 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

293 
ENCODING_MAP
(
kThumbMovRR_H2L
, 0x4640,

294 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

295 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

297 
ENCODING_MAP
(
kThumbMovRR_L2H
, 0x4680,

298 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

299 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

301 
ENCODING_MAP
(
kThumbMul
, 0x4340,

302 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

303 
kFmtUnu£d
, -1, -1,

304 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

306 
ENCODING_MAP
(
kThumbMvn
, 0x43c0,

307 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

308 
kFmtUnu£d
, -1, -1,

309 
IS_BINARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

311 
ENCODING_MAP
(
kThumbNeg
, 0x4240,

312 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

313 
kFmtUnu£d
, -1, -1,

314 
IS_BINARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

316 
ENCODING_MAP
(
kThumbO¼
, 0x4300,

317 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

318 
kFmtUnu£d
, -1, -1,

319 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

321 
ENCODING_MAP
(
kThumbPİ
, 0xbc00,

322 
kFmtB™BÉ
, 8, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

323 
kFmtUnu£d
, -1, -1,

324 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
 | 
REG_DEF_LIST0


325 | 
IS_LOAD
, "pop", "<!0R>", 1),

326 
ENCODING_MAP
(
kThumbPush
, 0xb400,

327 
kFmtB™BÉ
, 8, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

328 
kFmtUnu£d
, -1, -1,

329 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
 | 
REG_USE_LIST0


330 | 
IS_STORE
, "push", "<!0R>", 1),

331 
ENCODING_MAP
(
kThumbRÜRR
, 0x41c0,

332 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

333 
kFmtUnu£d
, -1, -1,

334 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
SETS_CCODES
,

336 
ENCODING_MAP
(
kThumbSbc
, 0x4180,

337 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

338 
kFmtUnu£d
, -1, -1,

339 
IS_BINARY_OP
 | 
REG_DEF0_USE01
 | 
USES_CCODES
 | 
SETS_CCODES
,

341 
ENCODING_MAP
(
kThumbStmŸ
, 0xc000,

342 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

343 
kFmtUnu£d
, -1, -1,

344 
IS_BINARY_OP
 | 
REG_DEF0
 | 
REG_USE0
 | 
REG_USE_LIST1
 | 
IS_STORE
,

346 
ENCODING_MAP
(
kThumbSŒRRI5
, 0x6000,

347 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

348 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

350 
ENCODING_MAP
(
kThumbSŒRRR
, 0x5000,

351 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

352 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE012
 | 
IS_STORE
,

354 
ENCODING_MAP
(
kThumbSŒSpR–
, 0x9000,

355 
kFmtB™BÉ
, 10, 8, 
kFmtUnu£d
, -1, -1, kFmtBitBlt, 7, 0,

356 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE0
 | 
REG_USE_SP


357 | 
IS_STORE
, "str", "r!0d, [sp, #!2E]", 1),

358 
ENCODING_MAP
(
kThumbSŒbRRI5
, 0x7000,

359 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

360 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

362 
ENCODING_MAP
(
kThumbSŒbRRR
, 0x5400,

363 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

364 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE012
 | 
IS_STORE
,

366 
ENCODING_MAP
(
kThumbSŒhRRI5
, 0x8000,

367 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 10, 6,

368 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

370 
ENCODING_MAP
(
kThumbSŒhRRR
, 0x5200,

371 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

372 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE012
 | 
IS_STORE
,

374 
ENCODING_MAP
(
kThumbSubRRI3
, 0x1e00,

375 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

376 
kFmtUnu£d
, -1, -1,

377 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

379 
ENCODING_MAP
(
kThumbSubRI8
, 0x3800,

380 
kFmtB™BÉ
, 10, 8, kFmtB™BÉ, 7, 0, 
kFmtUnu£d
, -1, -1,

381 
kFmtUnu£d
, -1, -1,

382 
IS_BINARY_OP
 | 
REG_DEF0_USE0
 | 
SETS_CCODES
,

384 
ENCODING_MAP
(
kThumbSubRRR
, 0x1a00,

385 
kFmtB™BÉ
, 2, 0, kFmtBitBlt, 5, 3, kFmtBitBlt, 8, 6,

386 
kFmtUnu£d
, -1, -1,

387 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
SETS_CCODES
,

389 
ENCODING_MAP
(
kThumbSubSpI7
, 0xb080,

390 
kFmtB™BÉ
, 6, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

391 
kFmtUnu£d
, -1, -1,

392 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
,

394 
ENCODING_MAP
(
kThumbSwi
, 0xdf00,

395 
kFmtB™BÉ
, 7, 0, 
kFmtUnu£d
, -1, -1, kFmtUnu£d, -1, -1, kFmtUnu£d, -1, -1, 
IS_UNARY_OP
 | 
IS_BRANCH
,

397 
ENCODING_MAP
(
kThumbT¡
, 0x4200,

398 
kFmtB™BÉ
, 2, 0, kFmtB™BÉ, 5, 3, 
kFmtUnu£d
, -1, -1,

399 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

401 
ENCODING_MAP
(
kThumb2Vldrs
, 0xed900a00,

402 
kFmtSå
, 22, 12, 
kFmtB™BÉ
, 19, 16, kFmtBitBlt, 7, 0,

403 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

405 
ENCODING_MAP
(
kThumb2Vldrd
, 0xed900b00,

406 
kFmtDå
, 22, 12, 
kFmtB™BÉ
, 19, 16, kFmtBitBlt, 7, 0,

407 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

409 
ENCODING_MAP
(
kThumb2Vmuls
, 0xee200a00,

410 
kFmtSå
, 22, 12, kFmtSfp, 7, 16, kFmtSfp, 5, 0,

411 
kFmtUnu£d
, -1, -1,

412 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

414 
ENCODING_MAP
(
kThumb2Vmuld
, 0xee200b00,

415 
kFmtDå
, 22, 12, kFmtDfp, 7, 16, kFmtDfp, 5, 0,

416 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

418 
ENCODING_MAP
(
kThumb2V¡rs
, 0xed800a00,

419 
kFmtSå
, 22, 12, 
kFmtB™BÉ
, 19, 16, kFmtBitBlt, 7, 0,

420 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

422 
ENCODING_MAP
(
kThumb2V¡rd
, 0xed800b00,

423 
kFmtDå
, 22, 12, 
kFmtB™BÉ
, 19, 16, kFmtBitBlt, 7, 0,

424 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

426 
ENCODING_MAP
(
kThumb2Vsubs
, 0xee300a40,

427 
kFmtSå
, 22, 12, kFmtSfp, 7, 16, kFmtSfp, 5, 0,

428 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

430 
ENCODING_MAP
(
kThumb2Vsubd
, 0xee300b40,

431 
kFmtDå
, 22, 12, kFmtDfp, 7, 16, kFmtDfp, 5, 0,

432 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

434 
ENCODING_MAP
(
kThumb2Vadds
, 0xee300a00,

435 
kFmtSå
, 22, 12, kFmtSfp, 7, 16, kFmtSfp, 5, 0,

436 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

438 
ENCODING_MAP
(
kThumb2Vaddd
, 0xee300b00,

439 
kFmtDå
, 22, 12, kFmtDfp, 7, 16, kFmtDfp, 5, 0,

440 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

442 
ENCODING_MAP
(
kThumb2Vdivs
, 0xee800a00,

443 
kFmtSå
, 22, 12, kFmtSfp, 7, 16, kFmtSfp, 5, 0,

444 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

446 
ENCODING_MAP
(
kThumb2Vdivd
, 0xee800b00,

447 
kFmtDå
, 22, 12, kFmtDfp, 7, 16, kFmtDfp, 5, 0,

448 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

450 
ENCODING_MAP
(
kThumb2VcvtIF
, 0xeeb80ac0,

451 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

452 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

454 
ENCODING_MAP
(
kThumb2VcvtID
, 0xeeb80bc0,

455 
kFmtDå
, 22, 12, 
kFmtSå
, 5, 0, 
kFmtUnu£d
, -1, -1,

456 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

458 
ENCODING_MAP
(
kThumb2VcvtFI
, 0xeebd0ac0,

459 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

460 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

462 
ENCODING_MAP
(
kThumb2VcvtDI
, 0xeebd0bc0,

463 
kFmtSå
, 22, 12, 
kFmtDå
, 5, 0, 
kFmtUnu£d
, -1, -1,

464 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

466 
ENCODING_MAP
(
kThumb2VcvtFd
, 0xeeb70ac0,

467 
kFmtDå
, 22, 12, 
kFmtSå
, 5, 0, 
kFmtUnu£d
, -1, -1,

468 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

470 
ENCODING_MAP
(
kThumb2VcvtDF
, 0xeeb70bc0,

471 
kFmtSå
, 22, 12, 
kFmtDå
, 5, 0, 
kFmtUnu£d
, -1, -1,

472 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

474 
ENCODING_MAP
(
kThumb2Vsq¹s
, 0xeeb10ac0,

475 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

476 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

478 
ENCODING_MAP
(
kThumb2Vsq¹d
, 0xeeb10bc0,

479 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

480 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

482 
ENCODING_MAP
(
kThumb2MovImmShiá
, 0xf04f0000,

483 
kFmtB™BÉ
, 11, 8, 
kFmtModImm
, -1, -1, 
kFmtUnu£d
, -1, -1,

484 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0
,

486 
ENCODING_MAP
(
kThumb2MovImm16
, 0xf2400000,

487 
kFmtB™BÉ
, 11, 8, 
kFmtImm16
, -1, -1, 
kFmtUnu£d
, -1, -1,

488 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0
,

490 
ENCODING_MAP
(
kThumb2SŒRRI12
, 0xf8c00000,

491 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

492 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

494 
ENCODING_MAP
(
kThumb2LdrRRI12
, 0xf8d00000,

495 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

496 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

498 
ENCODING_MAP
(
kThumb2SŒRRI8P»dec
, 0xf8400c00,

499 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 8, 0,

500 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

502 
ENCODING_MAP
(
kThumb2LdrRRI8P»dec
, 0xf8500c00,

503 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 8, 0,

504 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

506 
ENCODING_MAP
(
kThumb2Cbnz
, 0xb900,

507 
kFmtB™BÉ
, 2, 0, 
kFmtImm6
, -1, -1, 
kFmtUnu£d
, -1, -1,

508 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE0
 | 
IS_BRANCH
,

510 
ENCODING_MAP
(
kThumb2Cbz
, 0xb100,

511 
kFmtB™BÉ
, 2, 0, 
kFmtImm6
, -1, -1, 
kFmtUnu£d
, -1, -1,

512 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE0
 | 
IS_BRANCH
,

514 
ENCODING_MAP
(
kThumb2AddRRI12
, 0xf2000000,

515 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtImm12
, -1, -1,

516 
kFmtUnu£d
, -1, -1,

517 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

519 
ENCODING_MAP
(
kThumb2MovRR
, 0xea4f0000,

520 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtUnu£d
, -1, -1,

521 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

523 
ENCODING_MAP
(
kThumb2Vmovs
, 0xeeb00a40,

524 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

525 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

527 
ENCODING_MAP
(
kThumb2Vmovd
, 0xeeb00b40,

528 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

529 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

531 
ENCODING_MAP
(
kThumb2LdmŸ
, 0xe8900000,

532 
kFmtB™BÉ
, 19, 16, kFmtB™BÉ, 15, 0, 
kFmtUnu£d
, -1, -1,

533 
kFmtUnu£d
, -1, -1,

534 
IS_BINARY_OP
 | 
REG_DEF0_USE0
 | 
REG_DEF_LIST1
 | 
IS_LOAD
,

536 
ENCODING_MAP
(
kThumb2StmŸ
, 0xe8800000,

537 
kFmtB™BÉ
, 19, 16, kFmtB™BÉ, 15, 0, 
kFmtUnu£d
, -1, -1,

538 
kFmtUnu£d
, -1, -1,

539 
IS_BINARY_OP
 | 
REG_DEF0_USE0
 | 
REG_USE_LIST1
 | 
IS_STORE
,

541 
ENCODING_MAP
(
kThumb2AddRRR
, 0xeb100000,

542 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

543 
kFmtShiá
, -1, -1,

544 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
SETS_CCODES
,

546 
ENCODING_MAP
(
kThumb2SubRRR
, 0xebb00000,

547 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

548 
kFmtShiá
, -1, -1,

549 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
SETS_CCODES
,

551 
ENCODING_MAP
(
kThumb2SbcRRR
, 0xeb700000,

552 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

553 
kFmtShiá
, -1, -1,

554 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
USES_CCODES
 | 
SETS_CCODES
,

556 
ENCODING_MAP
(
kThumb2CmpRR
, 0xebb00f00,

557 
kFmtB™BÉ
, 19, 16, kFmtB™BÉ, 3, 0, 
kFmtShiá
, -1, -1,

558 
kFmtUnu£d
, -1, -1,

559 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

561 
ENCODING_MAP
(
kThumb2SubRRI12
, 0xf2a00000,

562 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtImm12
, -1, -1,

563 
kFmtUnu£d
, -1, -1,

564 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

566 
ENCODING_MAP
(
kThumb2MvnImmShiá
, 0xf06f0000,

567 
kFmtB™BÉ
, 11, 8, 
kFmtModImm
, -1, -1, 
kFmtUnu£d
, -1, -1,

568 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0
,

570 
ENCODING_MAP
(
kThumb2S–
, 0xfaa0f080,

571 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

572 
kFmtUnu£d
, -1, -1,

573 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
 | 
USES_CCODES
,

575 
ENCODING_MAP
(
kThumb2Ubfx
, 0xf3c00000,

576 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtLsb
, -1, -1,

577 
kFmtBWidth
, 4, 0, 
IS_QUAD_OP
 | 
REG_DEF0_USE1
,

579 
ENCODING_MAP
(
kThumb2Sbfx
, 0xf3400000,

580 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtLsb
, -1, -1,

581 
kFmtBWidth
, 4, 0, 
IS_QUAD_OP
 | 
REG_DEF0_USE1
,

583 
ENCODING_MAP
(
kThumb2LdrRRR
, 0xf8500000,

584 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

585 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

587 
ENCODING_MAP
(
kThumb2LdrhRRR
, 0xf8300000,

588 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

589 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

591 
ENCODING_MAP
(
kThumb2LdrshRRR
, 0xf9300000,

592 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

593 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

595 
ENCODING_MAP
(
kThumb2LdrbRRR
, 0xf8100000,

596 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

597 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

599 
ENCODING_MAP
(
kThumb2LdrsbRRR
, 0xf9100000,

600 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

601 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_LOAD
,

603 
ENCODING_MAP
(
kThumb2SŒRRR
, 0xf8400000,

604 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

605 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_USE012
 | 
IS_STORE
,

607 
ENCODING_MAP
(
kThumb2SŒhRRR
, 0xf8200000,

608 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

609 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_USE012
 | 
IS_STORE
,

611 
ENCODING_MAP
(
kThumb2SŒbRRR
, 0xf8000000,

612 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

613 
kFmtB™BÉ
, 5, 4, 
IS_QUAD_OP
 | 
REG_USE012
 | 
IS_STORE
,

615 
ENCODING_MAP
(
kThumb2LdrhRRI12
, 0xf8b00000,

616 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

617 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

619 
ENCODING_MAP
(
kThumb2LdrshRRI12
, 0xf9b00000,

620 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

621 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

623 
ENCODING_MAP
(
kThumb2LdrbRRI12
, 0xf8900000,

624 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

625 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

627 
ENCODING_MAP
(
kThumb2LdrsbRRI12
, 0xf9900000,

628 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

629 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

631 
ENCODING_MAP
(
kThumb2SŒhRRI12
, 0xf8a00000,

632 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

633 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

635 
ENCODING_MAP
(
kThumb2SŒbRRI12
, 0xf8800000,

636 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 11, 0,

637 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
IS_STORE
,

639 
ENCODING_MAP
(
kThumb2Pİ
, 0xe8bd0000,

640 
kFmtB™BÉ
, 15, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

641 
kFmtUnu£d
, -1, -1,

642 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
 | 
REG_DEF_LIST0


643 | 
IS_LOAD
, "pop", "<!0R>", 2),

644 
ENCODING_MAP
(
kThumb2Push
, 0xe92d0000,

645 
kFmtB™BÉ
, 15, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

646 
kFmtUnu£d
, -1, -1,

647 
IS_UNARY_OP
 | 
REG_DEF_SP
 | 
REG_USE_SP
 | 
REG_USE_LIST0


648 | 
IS_STORE
, "push", "<!0R>", 2),

649 
ENCODING_MAP
(
kThumb2CmpRI8
, 0xf1b00f00,

650 
kFmtB™BÉ
, 19, 16, 
kFmtModImm
, -1, -1, 
kFmtUnu£d
, -1, -1,

651 
kFmtUnu£d
, -1, -1,

652 
IS_BINARY_OP
 | 
REG_USE0
 | 
SETS_CCODES
,

654 
ENCODING_MAP
(
kThumb2AdcRRR
, 0xeb500000,

655 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

656 
kFmtShiá
, -1, -1,

657 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
SETS_CCODES
,

659 
ENCODING_MAP
(
kThumb2AndRRR
, 0xea000000,

660 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

661 
kFmtShiá
, -1, -1, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
,

663 
ENCODING_MAP
(
kThumb2BicRRR
, 0xea200000,

664 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

665 
kFmtShiá
, -1, -1, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
,

667 
ENCODING_MAP
(
kThumb2CmnRR
, 0xeb000000,

668 
kFmtB™BÉ
, 19, 16, kFmtB™BÉ, 3, 0, 
kFmtShiá
, -1, -1,

669 
kFmtUnu£d
, -1, -1,

670 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

672 
ENCODING_MAP
(
kThumb2EÜRRR
, 0xea800000,

673 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

674 
kFmtShiá
, -1, -1, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
,

676 
ENCODING_MAP
(
kThumb2MulRRR
, 0xfb00f000,

677 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

678 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

680 
ENCODING_MAP
(
kThumb2MnvRR
, 0xea6f0000,

681 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtShiá
, -1, -1,

682 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

684 
ENCODING_MAP
(
kThumb2RsubRRI8
, 0xf1d00000,

685 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

686 
kFmtUnu£d
, -1, -1,

687 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

689 
ENCODING_MAP
(
kThumb2NegRR
, 0xf1d00000,

690 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtUnu£d
, -1, -1,

691 
kFmtUnu£d
, -1, -1,

692 
IS_BINARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

694 
ENCODING_MAP
(
kThumb2O¼RRR
, 0xea400000,

695 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

696 
kFmtShiá
, -1, -1, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
,

698 
ENCODING_MAP
(
kThumb2T¡RR
, 0xea100f00,

699 
kFmtB™BÉ
, 19, 16, kFmtB™BÉ, 3, 0, 
kFmtShiá
, -1, -1,

700 
kFmtUnu£d
, -1, -1,

701 
IS_TERTIARY_OP
 | 
REG_USE01
 | 
SETS_CCODES
,

703 
ENCODING_MAP
(
kThumb2L¦RRR
, 0xfa00f000,

704 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

705 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

707 
ENCODING_MAP
(
kThumb2L¤RRR
, 0xfa20f000,

708 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

709 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

711 
ENCODING_MAP
(
kThumb2A¤RRR
, 0xfa40f000,

712 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

713 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

715 
ENCODING_MAP
(
kThumb2RÜRRR
, 0xfa60f000,

716 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

717 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

719 
ENCODING_MAP
(
kThumb2L¦RRI5
, 0xea4f0000,

720 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtShiá5
, -1, -1,

721 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

723 
ENCODING_MAP
(
kThumb2L¤RRI5
, 0xea4f0010,

724 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtShiá5
, -1, -1,

725 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

727 
ENCODING_MAP
(
kThumb2A¤RRI5
, 0xea4f0020,

728 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtShiá5
, -1, -1,

729 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

731 
ENCODING_MAP
(
kThumb2RÜRRI5
, 0xea4f0030,

732 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 3, 0, 
kFmtShiá5
, -1, -1,

733 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

735 
ENCODING_MAP
(
kThumb2BicRRI8
, 0xf0200000,

736 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

737 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

739 
ENCODING_MAP
(
kThumb2AndRRI8
, 0xf0000000,

740 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

741 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

743 
ENCODING_MAP
(
kThumb2O¼RRI8
, 0xf0400000,

744 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

745 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

747 
ENCODING_MAP
(
kThumb2EÜRRI8
, 0xf0800000,

748 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

749 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
,

751 
ENCODING_MAP
(
kThumb2AddRRI8
, 0xf1100000,

752 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

753 
kFmtUnu£d
, -1, -1,

754 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

756 
ENCODING_MAP
(
kThumb2AdcRRI8
, 0xf1500000,

757 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

758 
kFmtUnu£d
, -1, -1,

759 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
 | 
USES_CCODES
,

761 
ENCODING_MAP
(
kThumb2SubRRI8
, 0xf1b00000,

762 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

763 
kFmtUnu£d
, -1, -1,

764 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
,

766 
ENCODING_MAP
(
kThumb2SbcRRI8
, 0xf1700000,

767 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtModImm
, -1, -1,

768 
kFmtUnu£d
, -1, -1,

769 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
SETS_CCODES
 | 
USES_CCODES
,

771 
ENCODING_MAP
(
kThumb2It
, 0xbf00,

772 
kFmtB™BÉ
, 7, 4, kFmtB™BÉ, 3, 0, 
kFmtModImm
, -1, -1,

773 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
IS_IT
 | 
USES_CCODES
,

775 
ENCODING_MAP
(
kThumb2Fm¡©
, 0xeef1fa10,

776 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1, kFmtUnused, -1, -1,

777 
kFmtUnu£d
, -1, -1, 
NO_OPERAND
 | 
SETS_CCODES
,

779 
ENCODING_MAP
(
kThumb2Vcmpd
, 0xeeb40b40,

780 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

781 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
,

783 
ENCODING_MAP
(
kThumb2Vcmps
, 0xeeb40a40,

784 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

785 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_USE01
,

787 
ENCODING_MAP
(
kThumb2LdrPcR–12
, 0xf8df0000,

788 
kFmtB™BÉ
, 15, 12, kFmtB™BÉ, 11, 0, 
kFmtUnu£d
, -1, -1,

789 
kFmtUnu£d
, -1, -1,

790 
IS_TERTIARY_OP
 | 
REG_DEF0
 | 
REG_USE_PC
 | 
IS_LOAD
,

792 
ENCODING_MAP
(
kThumb2BCÚd
, 0xf0008000,

793 
kFmtBrOff£t
, -1, -1, 
kFmtB™BÉ
, 25, 22, 
kFmtUnu£d
, -1, -1,

794 
kFmtUnu£d
, -1, -1,

795 
IS_BINARY_OP
 | 
IS_BRANCH
 | 
USES_CCODES
,

797 
ENCODING_MAP
(
kThumb2Vmovd_RR
, 0xeeb00b40,

798 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

799 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

801 
ENCODING_MAP
(
kThumb2Vmovs_RR
, 0xeeb00a40,

802 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

803 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

805 
ENCODING_MAP
(
kThumb2Fmrs
, 0xee100a10,

806 
kFmtB™BÉ
, 15, 12, 
kFmtSå
, 7, 16, 
kFmtUnu£d
, -1, -1,

807 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

809 
ENCODING_MAP
(
kThumb2Fm¤
, 0xee000a10,

810 
kFmtSå
, 7, 16, 
kFmtB™BÉ
, 15, 12, 
kFmtUnu£d
, -1, -1,

811 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

813 
ENCODING_MAP
(
kThumb2Fm¼d
, 0xec500b10,

814 
kFmtB™BÉ
, 15, 12, kFmtB™BÉ, 19, 16, 
kFmtDå
, 5, 0,

815 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF01_USE2
,

817 
ENCODING_MAP
(
kThumb2Fmd¼
, 0xec400b10,

818 
kFmtDå
, 5, 0, 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16,

819 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE12
,

821 
ENCODING_MAP
(
kThumb2Vabsd
, 0xeeb00bc0,

822 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

823 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

825 
ENCODING_MAP
(
kThumb2Vabss
, 0xeeb00ac0,

826 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

827 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

829 
ENCODING_MAP
(
kThumb2VÃgd
, 0xeeb10b40,

830 
kFmtDå
, 22, 12, kFmtDå, 5, 0, 
kFmtUnu£d
, -1, -1,

831 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

833 
ENCODING_MAP
(
kThumb2VÃgs
, 0xeeb10a40,

834 
kFmtSå
, 22, 12, kFmtSå, 5, 0, 
kFmtUnu£d
, -1, -1,

835 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0_USE1
,

837 
ENCODING_MAP
(
kThumb2Vmovs_IMM8
, 0xeeb00a00,

838 
kFmtSå
, 22, 12, 
kFmtFPImm
, 16, 0, 
kFmtUnu£d
, -1, -1,

839 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0
,

841 
ENCODING_MAP
(
kThumb2Vmovd_IMM8
, 0xeeb00b00,

842 
kFmtDå
, 22, 12, 
kFmtFPImm
, 16, 0, 
kFmtUnu£d
, -1, -1,

843 
kFmtUnu£d
, -1, -1, 
IS_BINARY_OP
 | 
REG_DEF0
,

845 
ENCODING_MAP
(
kThumb2MÏ
, 0xfb000000,

846 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 19, 16, kFmtBitBlt, 3, 0,

847 
kFmtB™BÉ
, 15, 12,

848 
IS_QUAD_OP
 | 
REG_DEF0
 | 
REG_USE1
 | 
REG_USE2
 | 
REG_USE3
,

850 
ENCODING_MAP
(
kThumb2UmuÎ
, 0xfba00000,

851 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 11, 8, kFmtBitBlt, 19, 16,

852 
kFmtB™BÉ
, 3, 0,

853 
IS_QUAD_OP
 | 
REG_DEF0
 | 
REG_DEF1
 | 
REG_USE2
 | 
REG_USE3
,

855 
ENCODING_MAP
(
kThumb2Ld»x
, 0xe8500f00,

856 
kFmtB™BÉ
, 15, 12, kFmtBitBlt, 19, 16, kFmtBitBlt, 7, 0,

857 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0_USE1
 | 
IS_LOAD
,

859 
ENCODING_MAP
(
kThumb2SŒex
, 0xe8400000,

860 
kFmtB™BÉ
, 11, 8, kFmtBitBlt, 15, 12, kFmtBitBlt, 19, 16,

861 
kFmtB™BÉ
, 7, 0, 
IS_QUAD_OP
 | 
REG_DEF0_USE12
 | 
IS_STORE
,

863 
ENCODING_MAP
(
kThumb2CÌex
, 0xf3bf8f2f,

864 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1, kFmtUnused, -1, -1,

865 
kFmtUnu£d
, -1, -1, 
NO_OPERAND
,

867 
ENCODING_MAP
(
kThumb2Bfi
, 0xf3600000,

868 
kFmtB™BÉ
, 11, 8, kFmtB™BÉ, 19, 16, 
kFmtShiá5
, -1, -1,

869 
kFmtB™BÉ
, 4, 0, 
IS_QUAD_OP
 | 
REG_DEF0_USE1
,

871 
ENCODING_MAP
(
kThumb2Bfc
, 0xf36f0000,

872 
kFmtB™BÉ
, 11, 8, 
kFmtShiá5
, -1, -1, kFmtBitBlt, 4, 0,

873 
kFmtUnu£d
, -1, -1, 
IS_TERTIARY_OP
 | 
REG_DEF0
,

875 
ENCODING_MAP
(
kThumb2Dmb
, 0xf3bf8f50,

876 
kFmtB™BÉ
, 3, 0, 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1,

877 
kFmtUnu£d
, -1, -1, 
IS_UNARY_OP
,

879 
ENCODING_MAP
(
kThumb2LdrPcR–n12
, 0xf85f0000,

880 
kFmtB™BÉ
, 15, 12, kFmtB™BÉ, 11, 0, 
kFmtUnu£d
, -1, -1,

881 
kFmtUnu£d
, -1, -1,

882 
IS_BINARY_OP
 | 
REG_DEF0
 | 
REG_USE_PC
 | 
IS_LOAD
,

884 
ENCODING_MAP
(
kThumbUndefšed
, 0xde00,

885 
kFmtUnu£d
, -1, -1, kFmtUnused, -1, -1, kFmtUnused, -1, -1,

886 
kFmtUnu£d
, -1, -1, 
NO_OPERAND
,

895 
	#PADDING_MOV_R5_R5
 0x1C2D

	)

898 #ià
defšed
(
WITH_JIT_TUNING
)

899 
	#UPDATE_CODE_CACHE_PATCHES
(è(
gDvmJ™
.
codeCacheP©ches
++)

	)

901 
	#UPDATE_CODE_CACHE_PATCHES
()

	)

905 
	$š¡®lL™”®PoŞs
(
Comp©iÚUn™
 *
cUn™
)

907 *
d©aPŒ
 = (*è((*è
cUn™
->
ba£Addr
 + cUn™->
d©aOff£t
);

909 *
d©aPŒ
++ = 
cUn™
->
numCÏssPoš‹rs
;

910 
ArmLIR
 *
d©aLIR
 = (ArmLIR *è
cUn™
->
şassPoš‹rLi¡
;

911 
d©aLIR
) {

916 *
d©aPŒ
++ = 
d©aLIR
->
İ”ªds
[0];

917 
d©aLIR
 = 
	`NEXT_LIR
(dataLIR);

919 
d©aLIR
 = (
ArmLIR
 *è
cUn™
->
l™”®Li¡
;

920 
d©aLIR
) {

921 *
d©aPŒ
++ = 
d©aLIR
->
İ”ªds
[0];

922 
d©aLIR
 = 
	`NEXT_LIR
(dataLIR);

924 
	}
}

932 
As£mbËrStus
 
	$as£mbËIn¡ruùiÚs
(
Comp©iÚUn™
 *
cUn™
,

933 
šŒ_t
 
¡¬tAddr
)

935 *
bufãrAddr
 = (*è
cUn™
->
codeBufãr
;

936 
ArmLIR
 *
lœ
;

938 
lœ
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;†œ;†œ = 
	`NEXT_LIR
(lir)) {

939 ià(
lœ
->
İcode
 < 0) {

940 ià((
lœ
->
İcode
 =ğ
kArmP£udoP£udoAlign4
) &&

942 (
lœ
->
İ”ªds
[0] == 1)) {

943 *
bufãrAddr
++ = 
PADDING_MOV_R5_R5
;

948 ià(
lœ
->
æags
.
isNİ
) {

952 ià(
lœ
->
İcode
 =ğ
kThumbLdrPcR–
 ||

953 
lœ
->
İcode
 =ğ
kThumb2LdrPcR–12
 ||

954 
lœ
->
İcode
 =ğ
kThumbAddPcR–
 ||

955 ((
lœ
->
İcode
 =ğ
kThumb2Vldrs
è&& (lœ->
İ”ªds
[1] =ğ
r15pc
))) {

956 
ArmLIR
 *
lœT¬g‘
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

957 
šŒ_t
 
pc
 = (
lœ
->
g’”ic
.
off£t
 + 4) & ~3;

958 
šŒ_t
 
rg‘
 = 
lœT¬g‘
->
g’”ic
.
off£t
;

959 
d–
 = 
rg‘
 - 
pc
;

960 ià(
d–
 & 0x3) {

961 
	`ALOGE
("PC-»Èdi¡ªû i nÙ muÉË oà4: %d", 
d–
);

962 
	`dvmComp”AbÜt
(
cUn™
);

964 ià((
lœ
->
İcode
 =ğ
kThumb2LdrPcR–12
è&& (
d–
 > 4091)) {

965 ià(
cUn™
->
´štMe
) {

966 
	`ALOGD
("kThumb2LdrPcR–12@%x: d–=%d", 
lœ
->
g’”ic
.
off£t
,

967 
d–
);

968 
	`dvmComp”Codeg’Dump
(
cUn™
);

970  
kR‘ryH®ve
;

971 } ià(
d–
 > 1020) {

972 ià(
cUn™
->
´štMe
) {

973 
	`ALOGD
("kThumbLdrPcR–@%x: d–=%d", 
lœ
->
g’”ic
.
off£t
,

974 
d–
);

975 
	`dvmComp”Codeg’Dump
(
cUn™
);

977  
kR‘ryH®ve
;

979 ià(
lœ
->
İcode
 =ğ
kThumb2Vldrs
) {

980 
lœ
->
İ”ªds
[2] = 
d–
 >> 2;

982 
lœ
->
İ”ªds
[1] = (lœ->
İcode
 =ğ
kThumb2LdrPcR–12
) ?

983 
d–
 : delta >> 2;

985 } ià(
lœ
->
İcode
 =ğ
kThumb2Cbnz
 ||†œ->İcod=ğ
kThumb2Cbz
) {

986 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

987 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

988 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

989 
d–
 = 
rg‘
 - 
pc
;

990 ià(
d–
 > 126 || delta < 0) {

992 
ArmLIR
 *
ÃwIn¡
 =

993 (
ArmLIR
 *)
	`dvmComp”New
((ArmLIR), 
Œue
);

995 
ÃwIn¡
->
İcode
 = 
kThumbBCÚd
;

996 
ÃwIn¡
->
İ”ªds
[0] = 0;

997 
ÃwIn¡
->
İ”ªds
[1] = (
lœ
->
İcode
 =ğ
kThumb2Cbz
) ?

998 
kArmCÚdEq
 : 
kArmCÚdNe
;

999 
ÃwIn¡
->
g’”ic
.
rg‘
 = 
lœ
->generic.target;

1000 
	`dvmComp”S‘upResourûMasks
(
ÃwIn¡
);

1001 
	`dvmComp”In£¹LIRAá”
((
LIR
 *)
lœ
, (LIR *)
ÃwIn¡
);

1003 
lœ
->
İcode
 = 
kThumbCmpRI8
;

1005 
lœ
->
İ”ªds
[1] = 0;

1006 
lœ
->
g’”ic
.
rg‘
 = 0;

1007 
	`dvmComp”S‘upResourûMasks
(
lœ
);

1008 ià(
cUn™
->
´štMe
) {

1009 
	`ALOGD
("kThumb2Cbnz/kThumb2Cbz@%x: delta=%d",

1010 
lœ
->
g’”ic
.
off£t
, 
d–
);

1011 
	`dvmComp”Codeg’Dump
(
cUn™
);

1013  
kR‘ryAÎ
;

1015 
lœ
->
İ”ªds
[1] = 
d–
 >> 1;

1017 } ià(
lœ
->
İcode
 =ğ
kThumbBCÚd
 ||

1018 
lœ
->
İcode
 =ğ
kThumb2BCÚd
) {

1019 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

1020 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

1021 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

1022 
d–
 = 
rg‘
 - 
pc
;

1023 ià((
lœ
->
İcode
 =ğ
kThumbBCÚd
è&& (
d–
 > 254 || delta < -256)) {

1024 ià(
cUn™
->
´štMe
) {

1025 
	`ALOGD
("kThumbBCÚd@%x: d–=%d", 
lœ
->
g’”ic
.
off£t
,

1026 
d–
);

1027 
	`dvmComp”Codeg’Dump
(
cUn™
);

1029  
kR‘ryH®ve
;

1031 
lœ
->
İ”ªds
[0] = 
d–
 >> 1;

1032 } ià(
lœ
->
İcode
 =ğ
kThumbBUncÚd
) {

1033 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

1034 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

1035 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

1036 
d–
 = 
rg‘
 - 
pc
;

1037 ià(
d–
 > 2046 || delta < -2048) {

1038 
	`ALOGE
("UncÚd™iÚ® b¿nch di¡ªû ouˆoà¿nge: %d", 
d–
);

1039 
	`dvmComp”AbÜt
(
cUn™
);

1041 
lœ
->
İ”ªds
[0] = 
d–
 >> 1;

1042 } ià(
lœ
->
İcode
 =ğ
kThumbBlx1
) {

1043 
	`as£¹
(
	`NEXT_LIR
(
lœ
)->
İcode
 =ğ
kThumbBlx2
);

1045 
šŒ_t
 
curPC
 = (
¡¬tAddr
 + 
lœ
->
g’”ic
.
off£t
 + 4) & ~3;

1046 
šŒ_t
 
rg‘
 = 
lœ
->
İ”ªds
[1];

1049 ià(
curPC
 & 0x2) {

1050 
rg‘
 |= 0x2;

1052 
d–
 = 
rg‘
 - 
curPC
;

1053 
	`as£¹
((
d–
 >= -(1<<22)) && (delta <= ((1<<22)-2)));

1055 
lœ
->
İ”ªds
[0] = (
d–
 >> 12) & 0x7ff;

1056 
	`NEXT_LIR
(
lœ
)->
İ”ªds
[0] = (
d–
>> 1) & 0x7ff;

1057 } ià(
lœ
->
İcode
 =ğ
kThumbBl1
) {

1058 
	`as£¹
(
	`NEXT_LIR
(
lœ
)->
İcode
 =ğ
kThumbBl2
);

1060 
šŒ_t
 
curPC
 = 
¡¬tAddr
 + 
lœ
->
g’”ic
.
off£t
 + 4;

1061 
šŒ_t
 
rg‘
 = 
lœ
->
İ”ªds
[1];

1063 
d–
 = 
rg‘
 - 
curPC
;

1064 
	`as£¹
((
d–
 >= -(1<<22)) && (delta <= ((1<<22)-2)));

1066 
lœ
->
İ”ªds
[0] = (
d–
 >> 12) & 0x7ff;

1067 
	`NEXT_LIR
(
lœ
)->
İ”ªds
[0] = (
d–
>> 1) & 0x7ff;

1070 
ArmEncodšgM­
 *
’cod”
 = &
EncodšgM­
[
lœ
->
İcode
];

1071 
u4
 
b™s
 = 
’cod”
->
sk–‘Ú
;

1072 
i
;

1073 
i
 = 0; i < 4; i++) {

1074 
u4
 
İ”ªd
;

1075 
u4
 
v®ue
;

1076 
İ”ªd
 = 
lœ
->
İ”ªds
[
i
];

1077 
’cod”
->
f›ldLoc
[
i
].
kšd
) {

1078 
kFmtUnu£d
:

1080 
kFmtFPImm
:

1081 
v®ue
 = ((
İ”ªd
 & 0xF0è>> 4è<< 
’cod”
->
f›ldLoc
[
i
].
’d
;

1082 
v®ue
 |ğ(
İ”ªd
 & 0x0Fè<< 
’cod”
->
f›ldLoc
[
i
].
¡¬t
;

1083 
b™s
 |ğ
v®ue
;

1085 
kFmtBrOff£t
:

1086 
v®ue
 = ((
İ”ªd
 & 0x80000) >> 19) << 26;

1087 
v®ue
 |ğ((
İ”ªd
 & 0x40000) >> 18) << 11;

1088 
v®ue
 |ğ((
İ”ªd
 & 0x20000) >> 17) << 13;

1089 
v®ue
 |ğ((
İ”ªd
 & 0x1f800) >> 11) << 16;

1090 
v®ue
 |ğ(
İ”ªd
 & 0x007ff);

1091 
b™s
 |ğ
v®ue
;

1093 
kFmtShiá5
:

1094 
v®ue
 = ((
İ”ªd
 & 0x1c) >> 2) << 12;

1095 
v®ue
 |ğ(
İ”ªd
 & 0x03) << 6;

1096 
b™s
 |ğ
v®ue
;

1098 
kFmtShiá
:

1099 
v®ue
 = ((
İ”ªd
 & 0x70) >> 4) << 12;

1100 
v®ue
 |ğ(
İ”ªd
 & 0x0f) << 4;

1101 
b™s
 |ğ
v®ue
;

1103 
kFmtBWidth
:

1104 
v®ue
 = 
İ”ªd
 - 1;

1105 
b™s
 |ğ
v®ue
;

1107 
kFmtLsb
:

1108 
v®ue
 = ((
İ”ªd
 & 0x1c) >> 2) << 12;

1109 
v®ue
 |ğ(
İ”ªd
 & 0x03) << 6;

1110 
b™s
 |ğ
v®ue
;

1112 
kFmtImm6
:

1113 
v®ue
 = ((
İ”ªd
 & 0x20) >> 5) << 9;

1114 
v®ue
 |ğ(
İ”ªd
 & 0x1f) << 3;

1115 
b™s
 |ğ
v®ue
;

1117 
kFmtB™BÉ
:

1118 
v®ue
 = (
İ”ªd
 << 
’cod”
->
f›ldLoc
[
i
].
¡¬t
) &

1119 ((1 << (
’cod”
->
f›ldLoc
[
i
].
’d
 + 1)) - 1);

1120 
b™s
 |ğ
v®ue
;

1122 
kFmtDå
: {

1123 
	`as£¹
(
	`DOUBLEREG
(
İ”ªd
));

1124 
	`as£¹
((
İ”ªd
 & 0x1) == 0);

1125 
»gName
 = (
İ”ªd
 & 
FP_REG_MASK
) >> 1;

1127 
v®ue
 = ((
»gName
 & 0x10) >> 4) <<

1128 
’cod”
->
f›ldLoc
[
i
].
’d
;

1130 
v®ue
 |ğ(
»gName
 & 0x0f) <<

1131 
’cod”
->
f›ldLoc
[
i
].
¡¬t
;

1132 
b™s
 |ğ
v®ue
;

1135 
kFmtSå
:

1136 
	`as£¹
(
	`SINGLEREG
(
İ”ªd
));

1138 
v®ue
 = (
İ”ªd
 & 0x1) <<

1139 
’cod”
->
f›ldLoc
[
i
].
’d
;

1141 
v®ue
 |ğ((
İ”ªd
 & 0x1e) >> 1) <<

1142 
’cod”
->
f›ldLoc
[
i
].
¡¬t
;

1143 
b™s
 |ğ
v®ue
;

1145 
kFmtImm12
:

1146 
kFmtModImm
:

1147 
v®ue
 = ((
İ”ªd
 & 0x800) >> 11) << 26;

1148 
v®ue
 |ğ((
İ”ªd
 & 0x700) >> 8) << 12;

1149 
v®ue
 |ğ
İ”ªd
 & 0x0ff;

1150 
b™s
 |ğ
v®ue
;

1152 
kFmtImm16
:

1153 
v®ue
 = ((
İ”ªd
 & 0x0800) >> 11) << 26;

1154 
v®ue
 |ğ((
İ”ªd
 & 0xf000) >> 12) << 16;

1155 
v®ue
 |ğ((
İ”ªd
 & 0x0700) >> 8) << 12;

1156 
v®ue
 |ğ
İ”ªd
 & 0x0ff;

1157 
b™s
 |ğ
v®ue
;

1160 
	`as£¹
(0);

1163 ià(
’cod”
->
size
 == 2) {

1164 *
bufãrAddr
++ = (
b™s
 >> 16) & 0xffff;

1166 *
bufãrAddr
++ = 
b™s
 & 0xffff;

1168  
kSucûss
;

1169 
	}
}

1171 
	$assignL™”®Off£tCommÚ
(
LIR
 *
lœ
, 
off£t
)

1173 ;
lœ
 !ğ
NULL
;†œ =†œ->
Ãxt
) {

1174 
lœ
->
off£t
 = offset;

1175 
off£t
 += 4;

1177  
off£t
;

1178 
	}
}

1181 
	$assignL™”®Off£t
(
Comp©iÚUn™
 *
cUn™
, 
off£t
)

1184 
off£t
 += 4;

1185 
off£t
 = 
	`assignL™”®Off£tCommÚ
(
cUn™
->
şassPoš‹rLi¡
, offset);

1186 
off£t
 = 
	`assignL™”®Off£tCommÚ
(
cUn™
->
l™”®Li¡
, offset);

1187  
off£t
;

1188 
	}
}

1235 
	#PROF_COUNTER_ADDR_SIZE
 4

	)

1236 
	#CHAIN_CELL_OFFSET_SIZE
 2

	)

1243 
šlše
 *
	$g‘T¿ûBa£
(cÚ¡ 
J™EÁry
 *
p
)

1245  (*)
p
->
codeAdd»ss
 -

1246 (
PROF_COUNTER_ADDR_SIZE
 + 
CHAIN_CELL_OFFSET_SIZE
 +

1247 (
p
->
u
.
šfo
.
š¡ruùiÚS‘
 =ğ
DALVIK_JIT_ARM
 ? 0 : 1));

1248 
	}
}

1251 
šlše
 
J™T¿ûCouÁ”_t
 
	$g‘ProfeCouÁ
(cÚ¡ 
J™EÁry
 *
’Œy
)

1253 ià(
’Œy
->
dPC
 =ğ0 ||ƒÁry->
codeAdd»ss
 == 0 ||

1254 
’Œy
->
codeAdd»ss
 =ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
())

1257 
J™T¿ûCouÁ”_t
 **
p
 = (J™T¿ûCouÁ”_ˆ**è
	`g‘T¿ûBa£
(
’Œy
);

1259  **
p
;

1260 
	}
}

1263 
šlše
 
	$»£tProfeCouÁ
(cÚ¡ 
J™EÁry
 *
’Œy
)

1265 ià(
’Œy
->
dPC
 =ğ0 ||ƒÁry->
codeAdd»ss
 == 0 ||

1266 
’Œy
->
codeAdd»ss
 =ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
())

1269 
J™T¿ûCouÁ”_t
 **
p
 = (J™T¿ûCouÁ”_ˆ**è
	`g‘T¿ûBa£
(
’Œy
);

1271 **
p
 = 0;

1272 
	}
}

1275 
šlše
 
ChašC–lCouÁs
* 
	$g‘ChašC–lCouÁsPoš‹r
(cÚ¡ *
ba£
)

1278 
u2
 *
chašC–lOff£tP
 = (u2 *è(
ba£
 + 
PROF_COUNTER_ADDR_SIZE
);

1279 
u2
 
chašC–lOff£t
 = *
chašC–lOff£tP
;

1280  (
ChašC–lCouÁs
 *è((*è
chašC–lOff£tP
 + 
chašC–lOff£t
);

1281 
	}
}

1284 
šlše
 
u4
 
	$g‘ChašC–lSize
(cÚ¡ 
ChašC–lCouÁs
* 
pChašC–lCouÁs
)

1286 
ûÎSize
 = 0;

1287 
i
;

1290 
i
 = 0; i < 
kChaššgC–lG­
; i++) {

1291 ià(
i
 !ğ
kChaššgC–lInvokeP»diùed
) {

1292 
ûÎSize
 +ğ
pChašC–lCouÁs
->
u
.
couÁ
[
i
] *

1293 (
CHAIN_CELL_NORMAL_SIZE
 >> 2);

1295 
ûÎSize
 +ğ
pChašC–lCouÁs
->
u
.
couÁ
[
i
] *

1296 (
CHAIN_CELL_PREDICTED_SIZE
 >> 2);

1299  
ûÎSize
;

1300 
	}
}

1303 
J™T¿ûDesütiÚ
* 
	$g‘T¿ûDesütiÚPoš‹r
(cÚ¡ *
ba£
)

1305 
ChašC–lCouÁs
* 
pC–lCouÁs
 = 
	`g‘ChašC–lCouÁsPoš‹r
(
ba£
);

1306  (
J™T¿ûDesütiÚ
*è((*)
pC–lCouÁs
 + (*pCellCounts));

1307 
	}
}

1310 
	$g‘T¿ûDesütiÚSize
(cÚ¡ 
J™T¿ûDesütiÚ
 *
desc
)

1312 
runCouÁ
;

1314 
runCouÁ
 = 0; ;„unCount++) {

1315 ià(
desc
->
Œaû
[
runCouÁ
].
isCode
 &&

1316 
desc
->
Œaû
[
runCouÁ
].
šfo
.
äag
.
runEnd
)

1319  (
J™T¿ûDesütiÚ
è+ ((
runCouÁ
+1è* (
J™T¿ûRun
));

1320 
	}
}

1322 #ià
defšed
(
SIGNATURE_BREAKPOINT
)

1324 
	$m©chSigÇtu»B»akpošt
(cÚ¡ 
Comp©iÚUn™
 *
cUn™
,

1325 
size
)

1327 
i
, 
j
;

1328 
u4
 *
±r
 = (u4 *è
cUn™
->
codeBufãr
;

1330 
i
 = 0; i < 
size
 - 
gDvmJ™
.
sigÇtu»B»akpoštSize
 + 1; i++) {

1331 ià(
±r
[
i
] =ğ
gDvmJ™
.
sigÇtu»B»akpošt
[0]) {

1332 
j
 = 1; j < 
gDvmJ™
.
sigÇtu»B»akpoštSize
; j++) {

1333 ià(
±r
[
i
+
j
] !ğ
gDvmJ™
.
sigÇtu»B»akpošt
[j]) {

1337 ià(
j
 =ğ
gDvmJ™
.
sigÇtu»B»akpoštSize
) {

1338 
	`ALOGD
("Signature match starting from offset %#x (%d words)",

1339 
i
*4, 
gDvmJ™
.
sigÇtu»B»akpoštSize
);

1340 
descSize
 = 
	`g‘T¿ûDesütiÚSize
(
cUn™
->
ŒaûDesc
);

1341 
J™T¿ûDesütiÚ
 *
ÃwCİy
 =

1342 (
J™T¿ûDesütiÚ
 *è
	`m®loc
(
descSize
);

1343 
	`memıy
(
ÃwCİy
, 
cUn™
->
ŒaûDesc
, 
descSize
);

1344 
	`dvmComp”WÜkEnqueue
(
NULL
, 
kWÜkOrd”T¿ûDebug
, 
ÃwCİy
);

1349 
	}
}

1357 
	$dvmComp”As£mbËLIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
)

1359 
ArmLIR
 *
¬mLIR
;

1360 
off£t
 = 0;

1361 
i
;

1362 
ChašC–lCouÁs
 
chašC–lCouÁs
;

1363 
descSize
 = (
cUn™
->
j™Mode
 =ğ
kJ™M‘hod
) ?

1364 0 : 
	`g‘T¿ûDesütiÚSize
(
cUn™
->
ŒaûDesc
);

1365 
chaššgC–lG­
 = 0;

1367 
šfo
->
š¡ruùiÚS‘
 = 
cUn™
->instructionSet;

1370 
¬mLIR
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;

1371 
¬mLIR
;

1372 
¬mLIR
 = 
	`NEXT_LIR
(armLIR)) {

1373 
¬mLIR
->
g’”ic
.
off£t
 = offset;

1374 ià(
¬mLIR
->
İcode
 >ğ0 && !¬mLIR->
æags
.
isNİ
) {

1375 
¬mLIR
->
æags
.
size
 = 
EncodšgM­
[¬mLIR->
İcode
].size * 2;

1376 
off£t
 +ğ
¬mLIR
->
æags
.
size
;

1377 } ià(
¬mLIR
->
İcode
 =ğ
kArmP£udoP£udoAlign4
) {

1378 ià(
off£t
 & 0x2) {

1379 
off£t
 += 2;

1380 
¬mLIR
->
İ”ªds
[0] = 1;

1382 
¬mLIR
->
İ”ªds
[0] = 0;

1389 
off£t
 = (offset + 3) & ~3;

1391 
u4
 
chašC–lOff£t
 = 
off£t
;

1392 
ArmLIR
 *
chašC–lOff£tLIR
 = 
NULL
;

1394 ià(
cUn™
->
j™Mode
 !ğ
kJ™M‘hod
) {

1400 
chaššgC–lG­
 = (
off£t
 - 
cUn™
->
chaššgC–lBÙtom
->offset) >> 2;

1403 
chašC–lOff£tLIR
 = (
ArmLIR
 *è
cUn™
->chainCellOffsetLIR;

1404 
	`as£¹
(
chašC–lOff£tLIR
);

1405 
	`as£¹
(
chašC–lOff£t
 < 0x10000);

1406 
	`as£¹
(
chašC–lOff£tLIR
->
İcode
 =ğ
kArm16B™D©a
 &&

1407 
chašC–lOff£tLIR
->
İ”ªds
[0] =ğ
CHAIN_CELL_OFFSET_TAG
);

1413 
chašC–lOff£tLIR
->
İ”ªds
[0] = 
chašC–lOff£t
 - 4;

1415 
off£t
 +ğ(
chašC–lCouÁs
è+ 
descSize
;

1417 
	`as£¹
((
off£t
 & 0x3) == 0);

1421 
cUn™
->
d©aOff£t
 = 
off£t
;

1427 
off£t
 = 
	`assignL™”®Off£t
(
cUn™
, offset);

1429 
cUn™
->
tÙ®Size
 = 
off£t
;

1431 ià(
gDvmJ™
.
codeCacheBy‹U£d
 + 
cUn™
->
tÙ®Size
 > gDvmJ™.
codeCacheSize
) {

1432 
gDvmJ™
.
codeCacheFuÎ
 = 
Œue
;

1433 
šfo
->
disÿrdResuÉ
 = 
Œue
;

1438 
cUn™
->
codeBufãr
 = (*)
	`dvmComp”New
(
chašC–lOff£t
, 
Œue
);

1439 ià(
cUn™
->
codeBufãr
 =ğ
NULL
) {

1440 
	`ALOGE
("Code buffer‡llocation failure");

1441 
šfo
->
disÿrdResuÉ
 = 
Œue
;

1449 
cUn™
->
as£mbËrStus
 = 
	`as£mbËIn¡ruùiÚs
(cUnit,

1450 (
šŒ_t
è
gDvmJ™
.
codeCache
 + gDvmJ™.
codeCacheBy‹U£d
);

1452 
cUn™
->
as£mbËrStus
) {

1453 
kSucûss
:

1455 
kR‘ryAÎ
:

1456 ià(
cUn™
->
as£mbËrR‘r›s
 < 
MAX_ASSEMBLER_RETRIES
) {

1457 ià(
cUn™
->
j™Mode
 !ğ
kJ™M‘hod
) {

1459 
chašC–lOff£tLIR
->
İ”ªds
[0] = 
CHAIN_CELL_OFFSET_TAG
;

1464 
cUn™
->
as£mbËrR‘r›s
 = 0;

1465 
cUn™
->
as£mbËrStus
 = 
kR‘ryH®ve
;

1467 
kR‘ryH®ve
:

1470 
	`ALOGE
("UÃx³ùed‡s£mbË¸¡©us: %d", 
cUn™
->
as£mbËrStus
);

1471 
	`dvmAbÜt
();

1474 #ià
	`defšed
(
SIGNATURE_BREAKPOINT
)

1475 ià(
šfo
->
disÿrdResuÉ
 =ğ
çl£
 && 
gDvmJ™
.
sigÇtu»B»akpošt
 !ğ
NULL
 &&

1476 
chašC–lOff£t
/4 >ğ
gDvmJ™
.
sigÇtu»B»akpoštSize
) {

1477 
	`m©chSigÇtu»B»akpošt
(
cUn™
, 
chašC–lOff£t
/4);

1482 ià(
šfo
->
disÿrdResuÉ
) ;

1491 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

1492 ià(
šfo
->
ÿcheV”siÚ
 !ğ
gDvmJ™
.cacheVersion) {

1494 
šfo
->
disÿrdResuÉ
 = 
Œue
;

1495 
šfo
->
codeAdd»ss
 = 
NULL
;

1496 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

1500 
cUn™
->
ba£Addr
 = (*è
gDvmJ™
.
codeCache
 + gDvmJ™.
codeCacheBy‹U£d
;

1501 
gDvmJ™
.
codeCacheBy‹U£d
 +ğ
off£t
;

1503 
	`UNPROTECT_CODE_CACHE
(
cUn™
->
ba£Addr
, 
off£t
);

1506 
	`memıy
((*)
cUn™
->
ba£Addr
, cUn™->
codeBufãr
, 
chašC–lOff£t
);

1507 
gDvmJ™
.
numComp©iÚs
++;

1509 ià(
cUn™
->
j™Mode
 !ğ
kJ™M‘hod
) {

1511 
i
=0; i< 
kChaššgC–lG­
; i++) {

1512 
chašC–lCouÁs
.
u
.
couÁ
[
i
] = 
cUn™
->
numChaššgC–ls
[i];

1516 
chašC–lCouÁs
.
u
.
couÁ
[
kChaššgC–lG­
] = 
chaššgC–lG­
;

1518 
	`memıy
((*)
cUn™
->
ba£Addr
 + 
chašC–lOff£t
, &
chašC–lCouÁs
,

1519 (
chašC–lCouÁs
));

1522 
	`memıy
((*è
cUn™
->
ba£Addr
 + 
chašC–lOff£t
 +

1523 (
chašC–lCouÁs
),

1524 
cUn™
->
ŒaûDesc
, 
descSize
);

1528 
	`š¡®lL™”®PoŞs
(
cUn™
);

1531 
	`dvmComp”CacheFlush
(()
cUn™
->
ba£Addr
,

1532 ()((*è
cUn™
->
ba£Addr
 + 
off£t
), 0);

1533 
	`UPDATE_CODE_CACHE_PATCHES
();

1535 
	`PROTECT_CODE_CACHE
(
cUn™
->
ba£Addr
, 
off£t
);

1538 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

1541 
šfo
->
codeAdd»ss
 = (*)
cUn™
->
ba£Addr
 + cUn™->
h—d”Size
;

1543 ià(
šfo
->
š¡ruùiÚS‘
 !ğ
DALVIK_JIT_ARM
)

1544 
šfo
->
codeAdd»ss
 = (*)info->codeAddress + 1;

1546 
šfo
->
´ofeCodeSize
 = 
cUn™
->profileCodeSize;

1547 
	}
}

1553 
u4
 
	$g‘Sk–‘Ú
(
ArmOpcode
 
İ
)

1555  
EncodšgM­
[
İ
].
sk–‘Ú
;

1556 
	}
}

1558 
u4
 
	$as£mbËChaššgB¿nch
(
b¿nchOff£t
, 
boŞ
 
thumbT¬g‘
)

1560 
u4
 
thumb1
, 
thumb2
;

1562 ià(!
thumbT¬g‘
) {

1563 
thumb1
 = (
	`g‘Sk–‘Ú
(
kThumbBlx1
è| ((
b¿nchOff£t
>>12) & 0x7ff));

1564 
thumb2
 = (
	`g‘Sk–‘Ú
(
kThumbBlx2
è| ((
b¿nchOff£t
>> 1) & 0x7ff));

1565 } ià((
b¿nchOff£t
 < -2048) | (branchOffset > 2046)) {

1566 
thumb1
 = (
	`g‘Sk–‘Ú
(
kThumbBl1
è| ((
b¿nchOff£t
>>12) & 0x7ff));

1567 
thumb2
 = (
	`g‘Sk–‘Ú
(
kThumbBl2
è| ((
b¿nchOff£t
>> 1) & 0x7ff));

1569 
thumb1
 = (
	`g‘Sk–‘Ú
(
kThumbBUncÚd
è| ((
b¿nchOff£t
>> 1) & 0x7ff));

1570 
thumb2
 = 
	`g‘Sk–‘Ú
(
kThumbO¼
);

1573  
thumb2
<<16 | 
thumb1
;

1574 
	}
}

1589 * 
	$dvmJ™Chaš
(* 
tgtAddr
, 
u4
* 
b¿nchAddr
)

1591 
ba£Addr
 = (
u4
è
b¿nchAddr
 + 4;

1592 
b¿nchOff£t
 = (è
tgtAddr
 - 
ba£Addr
;

1593 
u4
 
ÃwIn¡
;

1594 
boŞ
 
thumbT¬g‘
;

1600 ià((
gDvmJ™
.
pProfTabË
 !ğ
NULL
è&& (
gDvm
.
sumTh»adSu¥’dCouÁ
 == 0) &&

1601 (
gDvmJ™
.
codeCacheFuÎ
 =ğ
çl£
)) {

1602 
	`as£¹
((
b¿nchOff£t
 >= -(1<<22)) && (branchOffset <= ((1<<22)-2)));

1604 
gDvmJ™
.
Œª¦©iÚChašs
++;

1606 
	`COMPILER_TRACE_CHAINING
(

1607 
	`ALOGD
("Jit Runtime: chaining %#xo %#x",

1608 (è
b¿nchAddr
, (è
tgtAddr
 & -2));

1617 
thumbT¬g‘
 = (
tgtAddr
 !ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
());

1619 
ÃwIn¡
 = 
	`as£mbËChaššgB¿nch
(
b¿nchOff£t
, 
thumbT¬g‘
);

1626 
	`as£¹
Ğ((*
b¿nchAddr
 >> 16è=ğ
	`g‘Sk–‘Ú
(
kThumbO¼
)) ||

1627 ((*
b¿nchAddr
 >> 16è=ğ(
ÃwIn¡
 >> 16)));

1629 
	`UNPROTECT_CODE_CACHE
(
b¿nchAddr
, (*branchAddr));

1631 *
b¿nchAddr
 = 
ÃwIn¡
;

1632 
	`dvmComp”CacheFlush
(()
b¿nchAddr
, ()branchAddr + 4, 0);

1633 
	`UPDATE_CODE_CACHE_PATCHES
();

1635 
	`PROTECT_CODE_CACHE
(
b¿nchAddr
, (*branchAddr));

1637 
gDvmJ™
.
hasNewChaš
 = 
Œue
;

1640  
tgtAddr
;

1641 
	}
}

1643 #ià!
defšed
(
WITH_SELF_VERIFICATION
)

1648 
	$šlšeCacheP©chEnqueue
(
P»diùedChaššgC–l
 *
ûÎAddr
,

1649 
P»diùedChaššgC–l
 *
ÃwCÚ‹Á
)

1656 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

1659 ià(
ûÎAddr
->
şazz
 =ğ
NULL
 &&

1660 
ûÎAddr
->
b¿nch
 =ğ
PREDICTED_CHAIN_BX_PAIR_INIT
) {

1662 
	`UNPROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1664 
ûÎAddr
->
m‘hod
 = 
ÃwCÚ‹Á
->method;

1665 
ûÎAddr
->
b¿nch
 = 
ÃwCÚ‹Á
->branch;

1670 
	`ªdroid_©omic_»Ëa£_¡Üe
((
št32_t
)
ÃwCÚ‹Á
->
şazz
,

1671 (vŞ©
št32_t
 *)(*)&
ûÎAddr
->
şazz
);

1672 
	`dvmComp”CacheFlush
((
šŒ_t
è
ûÎAddr
, (intptr_t) (cellAddr+1), 0);

1673 
	`UPDATE_CODE_CACHE_PATCHES
();

1675 
	`PROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1677 #ià
	`defšed
(
WITH_JIT_TUNING
)

1678 
gDvmJ™
.
icP©chIn™
++;

1681 } ià(
ûÎAddr
->
¡agedCÏzz
 !ğ
ÃwCÚ‹Á
->
şazz
) {

1683 
	`UNPROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1685 
ûÎAddr
->
¡agedCÏzz
 = 
ÃwCÚ‹Á
->
şazz
;

1687 
	`UPDATE_CODE_CACHE_PATCHES
();

1688 
	`PROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1690 #ià
	`defšed
(
WITH_JIT_TUNING
)

1691 
gDvmJ™
.
icP©chRejeùed
++;

1697 } ià(
ûÎAddr
->
m‘hod
 =ğ
ÃwCÚ‹Á
->method) {

1698 
	`UNPROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1700 
ûÎAddr
->
şazz
 = 
ÃwCÚ‹Á
->clazz;

1702 
	`UPDATE_CODE_CACHE_PATCHES
();

1704 
	`PROTECT_CODE_CACHE
(
ûÎAddr
, (*cellAddr));

1706 #ià
	`defšed
(
WITH_JIT_TUNING
)

1707 
gDvmJ™
.
icP©chLockF»e
++;

1713 } ià(
gDvmJ™
.
comp”ICP©chIndex
 < 
COMPILER_IC_PATCH_QUEUE_SIZE
) {

1714 
šdex
 = 
gDvmJ™
.
comp”ICP©chIndex
++;

1715 cÚ¡ 
CÏssObjeù
 *
şazz
 = 
ÃwCÚ‹Á
->clazz;

1717 
gDvmJ™
.
comp”ICP©chQueue
[
šdex
].
ûÎAddr
 = cellAddr;

1718 
gDvmJ™
.
comp”ICP©chQueue
[
šdex
].
ûÎCÚ‹Á
 = *
ÃwCÚ‹Á
;

1719 
gDvmJ™
.
comp”ICP©chQueue
[
šdex
].
şassDesütÜ
 = 
şazz
->
desütÜ
;

1720 
gDvmJ™
.
comp”ICP©chQueue
[
šdex
].
şassLßd”
 = 
şazz
->classLoader;

1722 
gDvmJ™
.
comp”ICP©chQueue
[
šdex
].
£rŸlNumb”
 = 
şazz
->serialNumber;

1723 #ià
	`defšed
(
WITH_JIT_TUNING
)

1724 
gDvmJ™
.
icP©chQueued
++;

1728 #ià
	`defšed
(
WITH_JIT_TUNING
)

1729 
gDvmJ™
.
icP©chDrİ³d
++;

1733 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

1734 
	}
}

1751 cÚ¡ 
M‘hod
 *
	$dvmJ™ToP©chP»diùedChaš
(cÚ¡ 
M‘hod
 *
m‘hod
,

1752 
Th»ad
 *
£lf
,

1753 
P»diùedChaššgC–l
 *
ûÎ
,

1754 cÚ¡ 
CÏssObjeù
 *
şazz
)

1756 
ÃwRechašCouÁ
 = 
PREDICTED_CHAIN_COUNTER_RECHAIN
;

1757 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1758 
ÃwRechašCouÁ
 = 
PREDICTED_CHAIN_COUNTER_AVOID
;

1759 
dÚe
;

1761 
P»diùedChaššgC–l
 
ÃwC–l
;

1762 
ba£Addr
, 
b¿nchOff£t
, 
tgtAddr
;

1763 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1764 
	`UNPROTECT_CODE_CACHE
(
ûÎ
, (*cell));

1771 
ûÎ
->
şazz
 = (
CÏssObjeù
 *è
PREDICTED_CHAIN_FAKE_CLAZZ
;

1773 
	`UPDATE_CODE_CACHE_PATCHES
();

1774 
	`PROTECT_CODE_CACHE
(
ûÎ
, (*cell));

1775 
dÚe
;

1777 
tgtAddr
 = (è
	`dvmJ™G‘T¿ûAddr
(
m‘hod
->
š¢s
);

1783 ià((
tgtAddr
 == 0) ||

1784 ((*)
tgtAddr
 =ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
())) {

1785 
	`COMPILER_TRACE_CHAINING
(

1786 
	`ALOGD
("Jit Runtime:…redicted chain %po method %s%s delayed",

1787 
ûÎ
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
));

1788 
dÚe
;

1791 ià(
ûÎ
->
şazz
 =ğ
NULL
) {

1792 
ÃwRechašCouÁ
 = 
£lf
->
icRechašCouÁ
;

1795 
ba£Addr
 = (è
ûÎ
 + 4;

1796 
b¿nchOff£t
 = 
tgtAddr
 - 
ba£Addr
;

1798 
ÃwC–l
.
b¿nch
 = 
	`as£mbËChaššgB¿nch
(
b¿nchOff£t
, 
Œue
);

1799 
ÃwC–l
.
şazz
 = clazz;

1800 
ÃwC–l
.
m‘hod
 = method;

1801 
ÃwC–l
.
¡agedCÏzz
 = 
NULL
;

1810 
	`šlšeCacheP©chEnqueue
(
ûÎ
, &
ÃwC–l
);

1812 
dÚe
:

1813 
£lf
->
icRechašCouÁ
 = 
ÃwRechašCouÁ
;

1814  
m‘hod
;

1815 
	}
}

1821 
	$dvmComp”P©chIÆšeCache
()

1823 
i
;

1824 
P»diùedChaššgC–l
 *
mšAddr
, *
maxAddr
;

1827 ià(
gDvmJ™
.
comp”ICP©chIndex
 == 0) ;

1834 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

1836 
	`UNPROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

1841 
mšAddr
 = (
P»diùedChaššgC–l
 *)

1842 ((*è
gDvmJ™
.
codeCache
 + gDvmJ™.
codeCacheSize
);

1843 
maxAddr
 = (
P»diùedChaššgC–l
 *è
gDvmJ™
.
codeCache
;

1845 
i
 = 0; i < 
gDvmJ™
.
comp”ICP©chIndex
; i++) {

1846 
ICP©chWÜkOrd”
 *
wÜkOrd”
 = &
gDvmJ™
.
comp”ICP©chQueue
[
i
];

1847 
P»diùedChaššgC–l
 *
ûÎAddr
 = 
wÜkOrd”
->cellAddr;

1848 
P»diùedChaššgC–l
 *
ûÎCÚ‹Á
 = &
wÜkOrd”
->cellContent;

1849 
CÏssObjeù
 *
şazz
 = 
	`dvmFšdCÏssNoIn™
(
wÜkOrd”
->
şassDesütÜ
,

1850 
wÜkOrd”
->
şassLßd”
);

1852 
	`as£¹
(
şazz
->
£rŸlNumb”
 =ğ
wÜkOrd”
->serialNumber);

1855 
ûÎCÚ‹Á
->
şazz
 = clazz;

1857 
	`COMPILER_TRACE_CHAINING
(

1858 
	`ALOGD
("Jit Runtime:…redicted chain %p from %so %s (%s) "

1860 
ûÎAddr
,

1861 
ûÎAddr
->
şazz
->
desütÜ
,

1862 
ûÎCÚ‹Á
->
şazz
->
desütÜ
,

1863 
ûÎCÚ‹Á
->
m‘hod
->
Çme
));

1866 *
ûÎAddr
 = *
ûÎCÚ‹Á
;

1867 
mšAddr
 = (
ûÎAddr
 < minAddr) ? cellAddr : minAddr;

1868 
maxAddr
 = (
ûÎAddr
 > maxAddr) ? cellAddr : maxAddr;

1872 
	`dvmComp”CacheFlush
((è
mšAddr
, (è(
maxAddr
+1), 0);

1873 
	`UPDATE_CODE_CACHE_PATCHES
();

1875 
	`PROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

1877 
gDvmJ™
.
comp”ICP©chIndex
 = 0;

1878 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”ICP©chLock
);

1879 
	}
}

1888 
u4
* 
	$unchašSšgË
(
J™EÁry
 *
Œaû
)

1890 cÚ¡ *
ba£
 = 
	`g‘T¿ûBa£
(
Œaû
);

1891 
ChašC–lCouÁs
 *
pChašC–lCouÁs
 = 
	`g‘ChašC–lCouÁsPoš‹r
(
ba£
);

1892 
ûÎSize
 = 
	`g‘ChašC–lSize
(
pChašC–lCouÁs
);

1893 
u4
* 
pChašC–ls
;

1894 
u4
 
ÃwIn¡
;

1895 
i
,
j
;

1896 
P»diùedChaššgC–l
 *
´edChašC–l
;

1898 ià(
ûÎSize
 == 0)

1899  (
u4
 *è
pChašC–lCouÁs
;

1902 
pChašC–ls
 = ((
u4
 *è
pChašC–lCouÁs
è- 
ûÎSize
 -

1903 
pChašC–lCouÁs
->
u
.
couÁ
[
kChaššgC–lG­
];

1906 
i
 = 0; i < 
kChaššgC–lG­
; i++) {

1907 
–emSize
 = 
CHAIN_CELL_NORMAL_SIZE
 >> 2;

1908 ià(
i
 =ğ
kChaššgC–lInvokeP»diùed
) {

1909 
–emSize
 = 
CHAIN_CELL_PREDICTED_SIZE
 >> 2;

1912 
j
 = 0; j < 
pChašC–lCouÁs
->
u
.
couÁ
[
i
]; j++) {

1913 
i
) {

1914 
kChaššgC–lNÜm®
:

1915 
kChaššgC–lHÙ
:

1916 
kChaššgC–lInvokeSšgËtÚ
:

1917 
kChaššgC–lBackw¬dB¿nch
:

1925 
ÃwIn¡
 = *
pChašC–ls
;

1926 
ÃwIn¡
 &= 0xFFFF0000;

1927 
ÃwIn¡
 |ğ
	`g‘Sk–‘Ú
(
kThumbBUncÚd
);

1928 *
pChašC–ls
 = 
ÃwIn¡
;

1930 
kChaššgC–lInvokeP»diùed
:

1931 
´edChašC–l
 = (
P»diùedChaššgC–l
 *è
pChašC–ls
;

1939 
´edChašC–l
->
şazz
 = 
PREDICTED_CHAIN_CLAZZ_INIT
;

1942 
	`ALOGE
("UÃx³ùed chaššgy³: %d", 
i
);

1943 
	`dvmAbÜt
();

1945 
	`COMPILER_TRACE_CHAINING
(

1946 
	`ALOGD
("J™ RuÁime: unchaššg %#x", ()
pChašC–ls
));

1947 
pChašC–ls
 +ğ
–emSize
;

1950  
pChašC–ls
;

1951 
	}
}

1954 
	$dvmJ™UnchašAÎ
()

1956 
u4
* 
lowAdd»ss
 = 
NULL
;

1957 
u4
* 
highAdd»ss
 = 
NULL
;

1958 
i
;

1959 ià(
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
) {

1960 
	`COMPILER_TRACE_CHAINING
(
	`LOGD
("Jit Runtime: unchaining‡ll"));

1961 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

1963 
	`UNPROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

1965 
i
 = 0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

1966 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
dPC
 &&

1967 !
gDvmJ™
.
pJ™EÁryTabË
[
i
].
u
.
šfo
.
isM‘hodEÁry
 &&

1968 
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
 &&

1969 (
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
 !=

1970 
	`dvmComp”G‘IÁ”´‘Tem¶©e
())) {

1971 
u4
* 
Ï¡Add»ss
;

1972 
Ï¡Add»ss
 = 
	`unchašSšgË
(&
gDvmJ™
.
pJ™EÁryTabË
[
i
]);

1973 ià(
lowAdd»ss
 =ğ
NULL
 ||

1974 (
u4
*)
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
 <

1975 
lowAdd»ss
)

1976 
lowAdd»ss
 = 
Ï¡Add»ss
;

1977 ià(
Ï¡Add»ss
 > 
highAdd»ss
)

1978 
highAdd»ss
 = 
Ï¡Add»ss
;

1981 
	`dvmComp”CacheFlush
(()
lowAdd»ss
, ()
highAdd»ss
, 0);

1982 
	`UPDATE_CODE_CACHE_PATCHES
();

1984 
	`PROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

1986 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

1987 
gDvmJ™
.
Œª¦©iÚChašs
 = 0;

1989 
gDvmJ™
.
hasNewChaš
 = 
çl£
;

1990 
	}
}

1992 
	sj™ProfeAddrToLše
 {

1993 
u4
 
	mlšeNum
;

1994 
u4
 
	mby‹codeOff£t
;

1995 } 
	tj™ProfeAddrToLše
;

1999 
	$addrToLšeCb
 (*
úxt
, 
u4
 
by‹codeOff£t
, u4 
lšeNum
)

2001 
j™ProfeAddrToLše
 *
addrToLše
 = (j™ProfeAddrToLš*è
úxt
;

2004 ià(
addrToLše
->
by‹codeOff£t
 >= bytecodeOffset) {

2005 
addrToLše
->
lšeNum
 =†ineNum;

2008 
	}
}

2011 
	$dumpT¿ûProfe
(
J™EÁry
 *
p
, 
boŞ
 
s’t
, boŞ 
»£t
,

2012 
sum
)

2014 
idx
;

2016 ià(
p
->
codeAdd»ss
 =ğ
NULL
) {

2017 ià(!
s’t
)

2018 
	`ALOGD
("TRACEPROFILE NULL");

2021 ià(
p
->
codeAdd»ss
 =ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
()) {

2022 ià(!
s’t
)

2023 
	`ALOGD
("TRACEPROFILE INTERPRET_ONLY");

2026 
J™T¿ûCouÁ”_t
 
couÁ
 = 
	`g‘ProfeCouÁ
(
p
);

2027 ià(
»£t
) {

2028 
	`»£tProfeCouÁ
(
p
);

2030 ià(
s’t
) {

2031  
couÁ
;

2033 
J™T¿ûDesütiÚ
 *
desc
 = 
	`g‘T¿ûDesütiÚPoš‹r
(
	`g‘T¿ûBa£
(
p
));

2034 cÚ¡ 
M‘hod
 *
m‘hod
 = 
desc
->method;

2035 *
m‘hodDesc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

2036 
j™ProfeAddrToLše
 
addrToLše
 = {0, 
desc
->
Œaû
[0].
šfo
.
äag
.
¡¬tOff£t
};

2045 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

2046 
	`dvmG‘M‘hodCode
(
m‘hod
),

2047 
m‘hod
->
şazz
->
desütÜ
,

2048 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

2049 
m‘hod
->
acûssFÏgs
,

2050 
addrToLšeCb
, 
NULL
, &
addrToLše
);

2052 
	`ALOGD
("TRACEPROFILE 0x%08x % 10d %5.2f%% [%#x(+%d), %d] %s%s;%s",

2053 (è
	`g‘T¿ûBa£
(
p
),

2054 
couÁ
,

2055 ((è
couÁ
è/ 
sum
 * 100.0,

2056 
desc
->
Œaû
[0].
šfo
.
äag
.
¡¬tOff£t
,

2057 
desc
->
Œaû
[0].
šfo
.
äag
.
numIn¡s
,

2058 
addrToLše
.
lšeNum
,

2059 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
m‘hodDesc
);

2060 
	`ä“
(
m‘hodDesc
);

2063 
idx
 = 0;

2064 
desc
->
Œaû
[
idx
].
isCode
 && !desc->Œaû[idx].
šfo
.
äag
.
runEnd
;

2065 
idx
++) {

2072 ià(!
desc
->
Œaû
[
idx
].
isCode
) {

2073 cÚ¡ 
M‘hod
 *
m‘hod
 = (const Method *)

2074 
desc
->
Œaû
[
idx
+
JIT_TRACE_CUR_METHOD
-1].
šfo
.
m‘a
;

2075 *
m‘hodDesc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

2077 
	`ALOGD
(" -> %s%s;%s", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

2078 
m‘hodDesc
);

2081  
couÁ
;

2082 
	}
}

2085 
J™T¿ûDesütiÚ
 *
	$dvmCİyT¿ûDesütÜ
(cÚ¡ 
u2
 *
pc
,

2086 cÚ¡ 
J™EÁry
 *
knownEÁry
)

2088 cÚ¡ 
J™EÁry
 *
j™EÁry
 = 
knownEÁry
 ? knownEntry

2089 : 
	`dvmJ™FšdEÁry
(
pc
, 
çl£
);

2090 ià((
j™EÁry
 =ğ
NULL
è|| (j™EÁry->
codeAdd»ss
 == 0))

2091  
NULL
;

2093 
J™T¿ûDesütiÚ
 *
desc
 =

2094 
	`g‘T¿ûDesütiÚPoš‹r
(
	`g‘T¿ûBa£
(
j™EÁry
));

2097 
descSize
 = 
	`g‘T¿ûDesütiÚSize
(
desc
);

2098 
J™T¿ûDesütiÚ
 *
ÃwCİy
 = (J™T¿ûDesütiÚ *è
	`m®loc
(
descSize
);

2099 
	`memıy
(
ÃwCİy
, 
desc
, 
descSize
);

2100  
ÃwCİy
;

2101 
	}
}

2104 
	$sÜtT¿ûProfeCouÁ
(cÚ¡ *
’Œy1
, cÚ¡ *
’Œy2
)

2106 cÚ¡ 
J™EÁry
 *
j™EÁry1
 = (cÚ¡ J™EÁry *)
’Œy1
;

2107 cÚ¡ 
J™EÁry
 *
j™EÁry2
 = (cÚ¡ J™EÁry *)
’Œy2
;

2109 
J™T¿ûCouÁ”_t
 
couÁ1
 = 
	`g‘ProfeCouÁ
(
j™EÁry1
);

2110 
J™T¿ûCouÁ”_t
 
couÁ2
 = 
	`g‘ProfeCouÁ
(
j™EÁry2
);

2111  (
couÁ1
 =ğ
couÁ2
) ? 0 : ((count1 > count2) ? -1 : 1);

2112 
	}
}

2115 
	$dvmComp”SÜtAndPrštT¿ûProfes
()

2117 
J™EÁry
 *
sÜ‹dEÁr›s
;

2118 
numT¿ûs
 = 0;

2119 
sum
 = 0;

2120 
i
;

2123 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

2126 
sÜ‹dEÁr›s
 = (
J™EÁry
 *)
	`m®loc
((J™EÁryè* 
gDvmJ™
.
j™TabËSize
);

2127 ià(
sÜ‹dEÁr›s
 =ğ
NULL
)

2128 
dÚe
;

2129 
	`memıy
(
sÜ‹dEÁr›s
, 
gDvmJ™
.
pJ™EÁryTabË
,

2130 (
J™EÁry
è* 
gDvmJ™
.
j™TabËSize
);

2131 
	`qsÜt
(
sÜ‹dEÁr›s
, 
gDvmJ™
.
j™TabËSize
, (
J™EÁry
),

2132 
sÜtT¿ûProfeCouÁ
);

2135 
i
=0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

2136 ià(
sÜ‹dEÁr›s
[
i
].
dPC
 != 0) {

2137 
sum
 +ğ
	`dumpT¿ûProfe
(&
sÜ‹dEÁr›s
[
i
],

2138 
Œue
 ,

2139 
çl£
 ,

2141 
numT¿ûs
++;

2144 ià(
numT¿ûs
 == 0)

2145 
numT¿ûs
 = 1;

2146 ià(
sum
 == 0) {

2147 
sum
 = 1;

2150 
	`ALOGD
("JIT: Av”agexecutiÚ couÁ -> %d",()(
sum
 / 
numT¿ûs
));

2153 
i
=0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

2154 ià(
sÜ‹dEÁr›s
[
i
].
dPC
 != 0) {

2155 
	`dumpT¿ûProfe
(&
sÜ‹dEÁr›s
[
i
],

2156 
çl£
 ,

2157 
Œue
 ,

2158 
sum
);

2162 
i
=0; i < 
gDvmJ™
.
j™TabËSize
 && i < 10; i++) {

2164 ià(
sÜ‹dEÁr›s
[
i
].
codeAdd»ss
 =ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
()) {

2167 
J™T¿ûDesütiÚ
* 
desc
 =

2168 
	`dvmCİyT¿ûDesütÜ
(
NULL
, &
sÜ‹dEÁr›s
[
i
]);

2169 ià(
desc
) {

2170 
	`dvmComp”WÜkEnqueue
(
sÜ‹dEÁr›s
[
i
].
dPC
,

2171 
kWÜkOrd”T¿ûDebug
, 
desc
);

2175 
	`ä“
(
sÜ‹dEÁr›s
);

2176 
dÚe
:

2177 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

2179 
	}
}

2181 
fšdCÏssPoš‹rsSšgËT¿û
(*
ba£
, (*
ÿÎback
)(*))

2183 
chašTy³Idx
, 
chašIdx
;

2184 
ChašC–lCouÁs
 *
pChašC–lCouÁs
 = 
	`g‘ChašC–lCouÁsPoš‹r
(
ba£
);

2185 
ûÎSize
 = 
	`g‘ChašC–lSize
(
pChašC–lCouÁs
);

2187 ià(
ûÎSize
) {

2189 
u4
 *
pChašC–ls
 = ((u4 *è
pChašC–lCouÁs
è- 
ûÎSize
 -

2190 
pChašC–lCouÁs
->
u
.
couÁ
[
kChaššgC–lG­
];

2192 
chašTy³Idx
 = 0; chašTy³Idx < 
kChaššgC–lG­
;

2193 
chašTy³Idx
++) {

2194 ià(
chašTy³Idx
 !ğ
kChaššgC–lInvokeP»diùed
) {

2196 
pChašC–ls
 +ğ(
CHAIN_CELL_NORMAL_SIZE
 >> 2) *

2197 
pChašC–lCouÁs
->
u
.
couÁ
[
chašTy³Idx
];

2200 
chašIdx
 = 0;

2201 
chašIdx
 < 
pChašC–lCouÁs
->
u
.
couÁ
[
chašTy³Idx
];

2202 
chašIdx
++) {

2203 
P»diùedChaššgC–l
 *
ûÎ
 =

2204 (
P»diùedChaššgC–l
 *è
pChašC–ls
;

2209 ià(
ûÎ
->
şazz
 !ğ
NULL
 &&

2210 
ûÎ
->
şazz
 !=

2211 (
CÏssObjeù
 *è
PREDICTED_CHAIN_FAKE_CLAZZ
) {

2212 
	`ÿÎback
(&
ûÎ
->
şazz
);

2214 
pChašC–ls
 +ğ
CHAIN_CELL_PREDICTED_SIZE
 >> 2;

2220 
J™T¿ûDesütiÚ
 *
desc
 = 
	`g‘T¿ûDesütiÚPoš‹r
(
ba£
);

2221 
descSize
 = 
	`g‘T¿ûDesütiÚSize
(
desc
);

2222 *
şassPoš‹rP
 = (*è((*è
desc
 + 
descSize
);

2223 
numCÏssPoš‹rs
 = *
şassPoš‹rP
++;

2224 ; 
numCÏssPoš‹rs
;‚umCÏssPoš‹rs--, 
şassPoš‹rP
++) {

2225 
	`ÿÎback
(
şassPoš‹rP
);

2227 
	}
}

2234 
dvmJ™SÿnAÎCÏssPoš‹rs
((*
ÿÎback
)(*))

2236 
	`UNPROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

2239 ià(
gDvmJ™
.
šæightBa£Addr
)

2240 
	`fšdCÏssPoš‹rsSšgËT¿û
((*è
gDvmJ™
.
šæightBa£Addr
,

2241 
ÿÎback
);

2243 ià(
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
) {

2244 
ŒaûIdx
;

2245 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

2246 
ŒaûIdx
 = 0;¿ûIdx < 
gDvmJ™
.
j™TabËSize
;raceIdx++) {

2247 cÚ¡ 
J™EÁry
 *
’Œy
 = &
gDvmJ™
.
pJ™EÁryTabË
[
ŒaûIdx
];

2248 ià(
’Œy
->
dPC
 &&

2249 !
’Œy
->
u
.
šfo
.
isM‘hodEÁry
 &&

2250 
’Œy
->
codeAdd»ss
 &&

2251 (
’Œy
->
codeAdd»ss
 !ğ
	`dvmComp”G‘IÁ”´‘Tem¶©e
())) {

2252 *
ba£
 = 
	`g‘T¿ûBa£
(
’Œy
);

2253 
	`fšdCÏssPoš‹rsSšgËT¿û
(
ba£
, 
ÿÎback
);

2256 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

2258 
	`UPDATE_CODE_CACHE_PATCHES
();

2260 
	`PROTECT_CODE_CACHE
(
gDvmJ™
.
codeCache
, gDvmJ™.
codeCacheBy‹U£d
);

2261 
	}
}

2267 
	$dvmJ™In¡®lCÏssObjeùPoš‹rs
(
Comp©iÚUn™
 *
cUn™
, *
codeAdd»ss
)

2269 *
ba£
 = 
codeAdd»ss
 - 
cUn™
->
h—d”Size
 -

2270 (
cUn™
->
š¡ruùiÚS‘
 =ğ
DALVIK_JIT_ARM
 ? 0 : 1);

2273 
J™T¿ûDesütiÚ
 *
desc
 = 
	`g‘T¿ûDesütiÚPoš‹r
(
ba£
);

2274 
descSize
 = 
	`g‘T¿ûDesütiÚSize
(
desc
);

2275 
šŒ_t
 *
şassPoš‹rP
 = (*è((*è
desc
 + 
descSize
);

2276 
numCÏssPoš‹rs
 = *(*)
şassPoš‹rP
++;

2277 
šŒ_t
 *
¡¬tCÏssPoš‹rP
 = 
şassPoš‹rP
;

2285 
	`dvmChªgeStus
(
gDvmJ™
.
comp”Th»ad
, 
THREAD_RUNNING
);

2296 
	`UNPROTECT_CODE_CACHE
(
¡¬tCÏssPoš‹rP
,

2297 
numCÏssPoš‹rs
 * (
šŒ_t
));

2298 #ià
	`defšed
(
WITH_JIT_TUNING
)

2299 
u8
 
¡¬tTime
 = 
	`dvmG‘R–©iveTimeU£c
();

2301 ;
numCÏssPoš‹rs
;‚umClassPointers--) {

2302 
C®ls™eInfo
 *
ÿÎs™eInfo
 = (C®ls™eInfØ*è*
şassPoš‹rP
;

2303 
CÏssObjeù
 *
şazz
 = 
	`dvmFšdCÏssNoIn™
(

2304 
ÿÎs™eInfo
->
şassDesütÜ
, c®ls™eInfo->
şassLßd”
);

2305 
	`as£¹
(!
	`¡rcmp
(
şazz
->
desütÜ
, 
ÿÎs™eInfo
->
şassDesütÜ
));

2306 *
şassPoš‹rP
++ = (
šŒ_t
è
şazz
;

2315 
gDvmJ™
.
šæightBa£Addr
 = 
ba£
;

2317 #ià
	`defšed
(
WITH_JIT_TUNING
)

2318 
u8
 
blockTime
 = 
	`dvmG‘R–©iveTimeU£c
(è- 
¡¬tTime
;

2319 
gDvmJ™
.
comp”Th»adBlockGCTime
 +ğ
blockTime
;

2320 ià(
blockTime
 > 
gDvmJ™
.
maxComp”Th»adBlockGCTime
)

2321 
gDvmJ™
.
maxComp”Th»adBlockGCTime
 = 
blockTime
;

2322 
gDvmJ™
.
numComp”Th»adBlockGC
++;

2324 
	`UPDATE_CODE_CACHE_PATCHES
();

2326 
	`PROTECT_CODE_CACHE
(
¡¬tCÏssPoš‹rP
, 
numCÏssPoš‹rs
 * (
šŒ_t
));

2329 
	`dvmChªgeStus
(
gDvmJ™
.
comp”Th»ad
, 
THREAD_VMWAIT
);

2330 
	}
}

2332 #ià
defšed
(
WITH_SELF_VERIFICATION
)

2348 
	mkSVBy‹
,

2349 
	mkSVSigÃdBy‹
,

2350 
	mkSVH®fwÜd
,

2351 
	mkSVSigÃdH®fwÜd
,

2352 
	mkSVWÜd
,

2353 
	mkSVDoubËwÜd
,

2354 
	mkSVV¬ŸbË
,

2358 
	$£lfV”ifiÿtiÚMemRegLßd
(* 
¥
, 
»g
)

2360  *(
¥
 + 
»g
);

2361 
	}
}

2364 
s8
 
	$£lfV”ifiÿtiÚMemRegLßdDoubË
(* 
¥
, 
»g
)

2366  *((
s8
*)(
¥
 + 
»g
));

2367 
	}
}

2370 
	$£lfV”ifiÿtiÚMemRegStÜe
(* 
¥
, 
d©a
, 
»g
)

2372 *(
¥
 + 
»g
èğ
d©a
;

2373 
	}
}

2376 
	$£lfV”ifiÿtiÚMemRegStÜeDoubË
(* 
¥
, 
s8
 
d©a
, 
»g
)

2378 *((
s8
*)(
¥
 + 
»g
)èğ
d©a
;

2379 
	}
}

2386 
	$£lfV”ifiÿtiÚLßd
(
addr
, 
size
)

2388 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

2389 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

2390 
ShadowH—p
 *
h—pS·ûPŒ
;

2392 
d©a
;

2393 
maskedAddr
 = 
addr
 & 0xFFFFFFFC;

2394 
®ignm’t
 = 
addr
 & 0x3;

2396 
h—pS·ûPŒ
 = 
shadowS·û
->
h—pS·û
;

2397 
h—pS·ûPŒ
 !ğ
shadowS·û
->
h—pS·ûTa
; heapSpacePtr++) {

2398 ià(
h—pS·ûPŒ
->
addr
 =ğ
maskedAddr
) {

2399 
addr
 = ((è&(
h—pS·ûPŒ
->
d©a
)è| 
®ignm’t
;

2404 
size
) {

2405 
kSVBy‹
:

2406 
d©a
 = *((
u1
*è
addr
);

2408 
kSVSigÃdBy‹
:

2409 
d©a
 = *((
s1
*è
addr
);

2411 
kSVH®fwÜd
:

2412 
d©a
 = *((
u2
*è
addr
);

2414 
kSVSigÃdH®fwÜd
:

2415 
d©a
 = *((
s2
*è
addr
);

2417 
kSVWÜd
:

2418 
d©a
 = *((
u4
*è
addr
);

2421 
	`ALOGE
("*** ERROR: BAD SIZE IN s–fV”ifiÿtiÚLßd: %d", 
size
);

2422 
d©a
 = 0;

2423 
	`dvmAbÜt
();

2427  
d©a
;

2428 
	}
}

2431 
s8
 
	$£lfV”ifiÿtiÚLßdDoubËwÜd
(
addr
)

2433 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

2434 
ShadowS·û
* 
shadowS·û
 = 
£lf
->shadowSpace;

2435 
ShadowH—p
* 
h—pS·ûPŒ
;

2437 
addr2
 = 
addr
+4;

2438 
d©a
 = *((*è
addr
);

2439 
d©a2
 = *((*è
addr2
);

2441 
h—pS·ûPŒ
 = 
shadowS·û
->
h—pS·û
;

2442 
h—pS·ûPŒ
 !ğ
shadowS·û
->
h—pS·ûTa
; heapSpacePtr++) {

2443 ià(
h—pS·ûPŒ
->
addr
 ==‡ddr) {

2444 
d©a
 = 
h—pS·ûPŒ
->data;

2445 } ià(
h—pS·ûPŒ
->
addr
 =ğ
addr2
) {

2446 
d©a2
 = 
h—pS·ûPŒ
->
d©a
;

2452  (((
s8
è
d©a2
è<< 32è| 
d©a
;

2453 
	}
}

2461 
	$£lfV”ifiÿtiÚStÜe
(
addr
, 
d©a
, 
size
)

2463 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

2464 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

2465 
ShadowH—p
 *
h—pS·ûPŒ
;

2467 
maskedAddr
 = 
addr
 & 0xFFFFFFFC;

2468 
®ignm’t
 = 
addr
 & 0x3;

2472 
h—pS·ûPŒ
 = 
shadowS·û
->
h—pS·û
;

2473 
h—pS·ûPŒ
 !ğ
shadowS·û
->
h—pS·ûTa
; heapSpacePtr++) {

2474 ià(
h—pS·ûPŒ
->
addr
 =ğ
maskedAddr
) ;

2477 ià(
h—pS·ûPŒ
 =ğ
shadowS·û
->
h—pS·ûTa
) {

2478 
h—pS·ûPŒ
->
addr
 = 
maskedAddr
;

2479 
h—pS·ûPŒ
->
d©a
 = *((*è
maskedAddr
);

2480 
shadowS·û
->
h—pS·ûTa
++;

2483 
addr
 = ((è&(
h—pS·ûPŒ
->
d©a
)è| 
®ignm’t
;

2484 
size
) {

2485 
kSVBy‹
:

2486 *((
u1
*è
addr
èğ
d©a
;

2488 
kSVSigÃdBy‹
:

2489 *((
s1
*è
addr
èğ
d©a
;

2491 
kSVH®fwÜd
:

2492 *((
u2
*è
addr
èğ
d©a
;

2494 
kSVSigÃdH®fwÜd
:

2495 *((
s2
*è
addr
èğ
d©a
;

2497 
kSVWÜd
:

2498 *((
u4
*è
addr
èğ
d©a
;

2501 
	`ALOGE
("*** ERROR: BAD SIZE IN s–fV”ifiÿtiÚSave: %d", 
size
);

2502 
	`dvmAbÜt
();

2504 
	}
}

2507 
	$£lfV”ifiÿtiÚStÜeDoubËwÜd
(
addr
, 
s8
 
doubË_d©a
)

2509 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

2510 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

2511 
ShadowH—p
 *
h—pS·ûPŒ
;

2513 
addr2
 = 
addr
+4;

2514 
d©a
 = 
doubË_d©a
;

2515 
d©a2
 = 
doubË_d©a
 >> 32;

2516 
boŞ
 
¡Üe1
 = 
çl£
, 
¡Üe2
 = false;

2521 
h—pS·ûPŒ
 = 
shadowS·û
->
h—pS·û
;

2522 
h—pS·ûPŒ
 !ğ
shadowS·û
->
h—pS·ûTa
; heapSpacePtr++) {

2523 ià(
h—pS·ûPŒ
->
addr
 ==‡ddr) {

2524 
h—pS·ûPŒ
->
d©a
 = data;

2525 
¡Üe1
 = 
Œue
;

2526 } ià(
h—pS·ûPŒ
->
addr
 =ğ
addr2
) {

2527 
h—pS·ûPŒ
->
d©a
 = 
d©a2
;

2528 
¡Üe2
 = 
Œue
;

2532 ià(!
¡Üe1
) {

2533 
shadowS·û
->
h—pS·ûTa
->
addr
 =‡ddr;

2534 
shadowS·û
->
h—pS·ûTa
->
d©a
 = data;

2535 
shadowS·û
->
h—pS·ûTa
++;

2537 ià(!
¡Üe2
) {

2538 
shadowS·û
->
h—pS·ûTa
->
addr
 = 
addr2
;

2539 
shadowS·û
->
h—pS·ûTa
->
d©a
 = 
d©a2
;

2540 
shadowS·û
->
h—pS·ûTa
++;

2542 
	}
}

2551 
	$dvmS–fV”ifiÿtiÚMemOpDecode
(
Ì
, * 
¥
)

2554 
kMemOpLdrPcR–
 = 0x09,

2555 
kMemOpRRR
 = 0x0A,

2556 
kMemOp2SšgË
 = 0x0A,

2557 
kMemOpRRR2
 = 0x0B,

2558 
kMemOp2DoubË
 = 0x0B,

2559 
kMemOpSŒRRI5
 = 0x0C,

2560 
kMemOpLdrRRI5
 = 0x0D,

2561 
kMemOpSŒbRRI5
 = 0x0E,

2562 
kMemOpLdrbRRI5
 = 0x0F,

2563 
kMemOpSŒhRRI5
 = 0x10,

2564 
kMemOpLdrhRRI5
 = 0x11,

2565 
kMemOpLdrSpR–
 = 0x13,

2566 
kMemOpStmŸ
 = 0x18,

2567 
kMemOpLdmŸ
 = 0x19,

2568 
kMemOpSŒRRR
 = 0x28,

2569 
kMemOpSŒhRRR
 = 0x29,

2570 
kMemOpSŒbRRR
 = 0x2A,

2571 
kMemOpLdrsbRRR
 = 0x2B,

2572 
kMemOpLdrRRR
 = 0x2C,

2573 
kMemOpLdrhRRR
 = 0x2D,

2574 
kMemOpLdrbRRR
 = 0x2E,

2575 
kMemOpLdrshRRR
 = 0x2F,

2576 
kMemOp2StmŸ
 = 0xE88,

2577 
kMemOp2LdmŸ
 = 0xE89,

2578 
kMemOp2StmŸ2
 = 0xE8A,

2579 
kMemOp2LdmŸ2
 = 0xE8B,

2580 
kMemOp2V¡r
 = 0xED8,

2581 
kMemOp2Vldr
 = 0xED9,

2582 
kMemOp2V¡r2
 = 0xEDC,

2583 
kMemOp2Vldr2
 = 0xEDD,

2584 
kMemOp2SŒbRRR
 = 0xF80,

2586 
kMemOp2LdrbRRR
 = 0xF81,

2588 
kMemOp2SŒhRRR
 = 0xF82,

2590 
kMemOp2LdrhRRR
 = 0xF83,

2592 
kMemOp2SŒRRR
 = 0xF84,

2594 
kMemOp2LdrRRR
 = 0xF85,

2596 
kMemOp2SŒbRRI12
 = 0xF88,

2598 
kMemOp2LdrbRRI12
 = 0xF89,

2600 
kMemOp2SŒhRRI12
 = 0xF8A,

2602 
kMemOp2LdrhRRI12
 = 0xF8B,

2604 
kMemOp2SŒRRI12
 = 0xF8C,

2606 
kMemOp2LdrRRI12
 = 0xF8D,

2608 
kMemOp2LdrsbRRR
 = 0xF91,

2610 
kMemOp2LdrshRRR
 = 0xF93,

2612 
kMemOp2LdrsbRRI12
 = 0xF99,

2614 
kMemOp2LdrshRRI12
 = 0xF9B,

2616 
kMemOp2
 = 0xE000,

2619 
addr
, 
off£t
, 
d©a
;

2620 
doubË_d©a
;

2621 
size
 = 
kSVWÜd
;

2622 
boŞ
 
¡Üe
 = 
çl£
;

2623 *
Ì_masked
 = (*è(
Ì
 & 0xFFFFFFFE);

2624 
š¢
 = *
Ì_masked
;

2626 
Şd_Ì
;

2627 
Şd_Ì
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 13);

2629 ià((
š¢
 & 
kMemOp2
) == kMemOp2) {

2630 
š¢
 = (insn << 16) | (insn >> 16);

2633 
İcode12
 = (
š¢
 >> 20) & 0xFFF;

2634 
İcode4
 = (
š¢
 >> 8) & 0xF;

2635 
imm2
 = (
š¢
 >> 4) & 0x3;

2636 
imm8
 = 
š¢
 & 0xFF;

2637 
imm12
 = 
š¢
 & 0xFFF;

2638 
rd
 = (
š¢
 >> 12) & 0xF;

2639 
rm
 = 
š¢
 & 0xF;

2640 
º
 = (
š¢
 >> 16) & 0xF;

2641 
¹
 = (
š¢
 >> 12) & 0xF;

2642 
boŞ
 
wBack
 = 
Œue
;

2645 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
Şd_Ì
+4, 13);

2648 
İcode12
) {

2649 
kMemOp2StmŸ
:

2650 
kMemOp2StmŸ2
:

2651 
kMemOp2V¡r
:

2652 
kMemOp2V¡r2
:

2653 
kMemOp2SŒbRRR
:

2654 
kMemOp2SŒhRRR
:

2655 
kMemOp2SŒRRR
:

2656 
kMemOp2SŒbRRI12
:

2657 
kMemOp2SŒhRRI12
:

2658 
kMemOp2SŒRRI12
:

2659 
¡Üe
 = 
Œue
;

2663 
İcode12
) {

2664 
kMemOp2SŒbRRR
:

2665 
kMemOp2LdrbRRR
:

2666 
kMemOp2SŒbRRI12
:

2667 
kMemOp2LdrbRRI12
:

2668 
size
 = 
kSVBy‹
;

2670 
kMemOp2LdrsbRRR
:

2671 
kMemOp2LdrsbRRI12
:

2672 
size
 = 
kSVSigÃdBy‹
;

2674 
kMemOp2SŒhRRR
:

2675 
kMemOp2LdrhRRR
:

2676 
kMemOp2SŒhRRI12
:

2677 
kMemOp2LdrhRRI12
:

2678 
size
 = 
kSVH®fwÜd
;

2680 
kMemOp2LdrshRRR
:

2681 
kMemOp2LdrshRRI12
:

2682 
size
 = 
kSVSigÃdH®fwÜd
;

2684 
kMemOp2V¡r
:

2685 
kMemOp2V¡r2
:

2686 
kMemOp2Vldr
:

2687 
kMemOp2Vldr2
:

2688 ià(
İcode4
 =ğ
kMemOp2DoubË
è
size
 = 
kSVDoubËwÜd
;

2690 
kMemOp2StmŸ
:

2691 
kMemOp2LdmŸ
:

2692 
kMemOp2StmŸ2
:

2693 
kMemOp2LdmŸ2
:

2694 
size
 = 
kSVV¬ŸbË
;

2699 
addr
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
º
);

2702 
İcode12
) {

2703 
kMemOp2V¡r
:

2704 
kMemOp2V¡r2
:

2705 
kMemOp2Vldr
:

2706 
kMemOp2Vldr2
:

2707 
off£t
 = 
imm8
 << 2;

2708 ià(
İcode4
 =ğ
kMemOp2SšgË
) {

2709 
¹
 = 
rd
 << 1;

2710 ià(
š¢
 & 0x400000è
¹
 |= 0x1;

2711 } ià(
İcode4
 =ğ
kMemOp2DoubË
) {

2712 ià(
š¢
 & 0x400000è
¹
 |= 0x10;

2713 
¹
 =„t << 1;

2715 
	`ALOGE
("*** ERROR: UNRECOGNIZED VECTOR MEM OP: %x", 
İcode4
);

2716 
	`dvmAbÜt
();

2718 
¹
 += 14;

2720 
kMemOp2SŒbRRR
:

2721 
kMemOp2LdrbRRR
:

2722 
kMemOp2SŒhRRR
:

2723 
kMemOp2LdrhRRR
:

2724 
kMemOp2SŒRRR
:

2725 
kMemOp2LdrRRR
:

2726 
kMemOp2LdrsbRRR
:

2727 
kMemOp2LdrshRRR
:

2728 
off£t
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
rm
è<< 
imm2
;

2730 
kMemOp2SŒbRRI12
:

2731 
kMemOp2LdrbRRI12
:

2732 
kMemOp2SŒhRRI12
:

2733 
kMemOp2LdrhRRI12
:

2734 
kMemOp2SŒRRI12
:

2735 
kMemOp2LdrRRI12
:

2736 
kMemOp2LdrsbRRI12
:

2737 
kMemOp2LdrshRRI12
:

2738 
off£t
 = 
imm12
;

2740 
kMemOp2StmŸ
:

2741 
kMemOp2LdmŸ
:

2742 
wBack
 = 
çl£
;

2743 
kMemOp2StmŸ2
:

2744 
kMemOp2LdmŸ2
:

2745 
off£t
 = 0;

2748 
	`ALOGE
("*** ERROR: UNRECOGNIZED THUMB2 MEM OP: %x", 
İcode12
);

2749 
off£t
 = 0;

2750 
	`dvmAbÜt
();

2754 ià(
¡Üe
) {

2755 ià(
size
 =ğ
kSVV¬ŸbË
) {

2756 
	`ALOGD
("*** THUMB2 STMIA CURRENTLY UNUSED (AND UNTESTED)");

2757 
i
;

2758 
»gLi¡
 = 
š¢
 & 0xFFFF;

2759 
i
 = 0; i < 16; i++) {

2760 ià(
»gLi¡
 & 0x1) {

2761 
d©a
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
i
);

2762 
	`£lfV”ifiÿtiÚStÜe
(
addr
, 
d©a
, 
kSVWÜd
);

2763 
addr
 += 4;

2765 
»gLi¡
 =„egList >> 1;

2767 ià(
wBack
è
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
addr
, 
º
);

2768 } ià(
size
 =ğ
kSVDoubËwÜd
) {

2769 
doubË_d©a
 = 
	`£lfV”ifiÿtiÚMemRegLßdDoubË
(
¥
, 
¹
);

2770 
	`£lfV”ifiÿtiÚStÜeDoubËwÜd
(
addr
+
off£t
, 
doubË_d©a
);

2772 
d©a
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
¹
);

2773 
	`£lfV”ifiÿtiÚStÜe
(
addr
+
off£t
, 
d©a
, 
size
);

2776 ià(
size
 =ğ
kSVV¬ŸbË
) {

2777 
	`ALOGD
("*** THUMB2 LDMIA CURRENTLY UNUSED (AND UNTESTED)");

2778 
i
;

2779 
»gLi¡
 = 
š¢
 & 0xFFFF;

2780 
i
 = 0; i < 16; i++) {

2781 ià(
»gLi¡
 & 0x1) {

2782 
d©a
 = 
	`£lfV”ifiÿtiÚLßd
(
addr
, 
kSVWÜd
);

2783 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
d©a
, 
i
);

2784 
addr
 += 4;

2786 
»gLi¡
 =„egList >> 1;

2788 ià(
wBack
è
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
addr
, 
º
);

2789 } ià(
size
 =ğ
kSVDoubËwÜd
) {

2790 
doubË_d©a
 = 
	`£lfV”ifiÿtiÚLßdDoubËwÜd
(
addr
+
off£t
);

2791 
	`£lfV”ifiÿtiÚMemRegStÜeDoubË
(
¥
, 
doubË_d©a
, 
¹
);

2793 
d©a
 = 
	`£lfV”ifiÿtiÚLßd
(
addr
+
off£t
, 
size
);

2794 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
d©a
, 
¹
);

2801 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
Şd_Ì
+2, 13);

2803 
İcode5
 = (
š¢
 >> 11) & 0x1F;

2804 
İcode7
 = (
š¢
 >> 9) & 0x7F;

2805 
imm
 = (
š¢
 >> 6) & 0x1F;

2806 
rd
 = (
š¢
 >> 8) & 0x7;

2807 
rm
 = (
š¢
 >> 6) & 0x7;

2808 
º
 = (
š¢
 >> 3) & 0x7;

2809 
¹
 = 
š¢
 & 0x7;

2812 
İcode5
) {

2813 
kMemOpRRR
:

2814 
İcode7
) {

2815 
kMemOpSŒRRR
:

2816 
kMemOpSŒhRRR
:

2817 
kMemOpSŒbRRR
:

2818 
¡Üe
 = 
Œue
;

2821 
kMemOpSŒRRI5
:

2822 
kMemOpSŒbRRI5
:

2823 
kMemOpSŒhRRI5
:

2824 
kMemOpStmŸ
:

2825 
¡Üe
 = 
Œue
;

2829 
İcode5
) {

2830 
kMemOpRRR
:

2831 
kMemOpRRR2
:

2832 
İcode7
) {

2833 
kMemOpSŒbRRR
:

2834 
kMemOpLdrbRRR
:

2835 
size
 = 
kSVBy‹
;

2837 
kMemOpLdrsbRRR
:

2838 
size
 = 
kSVSigÃdBy‹
;

2840 
kMemOpSŒhRRR
:

2841 
kMemOpLdrhRRR
:

2842 
size
 = 
kSVH®fwÜd
;

2844 
kMemOpLdrshRRR
:

2845 
size
 = 
kSVSigÃdH®fwÜd
;

2849 
kMemOpSŒbRRI5
:

2850 
kMemOpLdrbRRI5
:

2851 
size
 = 
kSVBy‹
;

2853 
kMemOpSŒhRRI5
:

2854 
kMemOpLdrhRRI5
:

2855 
size
 = 
kSVH®fwÜd
;

2857 
kMemOpStmŸ
:

2858 
kMemOpLdmŸ
:

2859 
size
 = 
kSVV¬ŸbË
;

2864 ià(
İcode5
 =ğ
kMemOpLdrPcR–
)

2865 
addr
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 4);

2866 ià(
İcode5
 =ğ
kMemOpStmŸ
 || opcode5 =ğ
kMemOpLdmŸ
)

2867 
addr
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
rd
);

2869 
addr
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
º
);

2872 
İcode5
) {

2873 
kMemOpLdrPcR–
:

2874 
off£t
 = (
š¢
 & 0xFF) << 2;

2875 
¹
 = 
rd
;

2877 
kMemOpRRR
:

2878 
kMemOpRRR2
:

2879 
off£t
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
rm
);

2881 
kMemOpSŒRRI5
:

2882 
kMemOpLdrRRI5
:

2883 
off£t
 = 
imm
 << 2;

2885 
kMemOpSŒhRRI5
:

2886 
kMemOpLdrhRRI5
:

2887 
off£t
 = 
imm
 << 1;

2889 
kMemOpSŒbRRI5
:

2890 
kMemOpLdrbRRI5
:

2891 
off£t
 = 
imm
;

2893 
kMemOpStmŸ
:

2894 
kMemOpLdmŸ
:

2895 
off£t
 = 0;

2898 
	`ALOGE
("*** ERROR: UNRECOGNIZED THUMB MEM OP: %x", 
İcode5
);

2899 
off£t
 = 0;

2900 
	`dvmAbÜt
();

2904 ià(
¡Üe
) {

2905 ià(
size
 =ğ
kSVV¬ŸbË
) {

2906 
i
;

2907 
»gLi¡
 = 
š¢
 & 0xFF;

2908 
i
 = 0; i < 8; i++) {

2909 ià(
»gLi¡
 & 0x1) {

2910 
d©a
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
i
);

2911 
	`£lfV”ifiÿtiÚStÜe
(
addr
, 
d©a
, 
kSVWÜd
);

2912 
addr
 += 4;

2914 
»gLi¡
 =„egList >> 1;

2916 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
addr
, 
rd
);

2918 
d©a
 = 
	`£lfV”ifiÿtiÚMemRegLßd
(
¥
, 
¹
);

2919 
	`£lfV”ifiÿtiÚStÜe
(
addr
+
off£t
, 
d©a
, 
size
);

2922 ià(
size
 =ğ
kSVV¬ŸbË
) {

2923 
boŞ
 
wBack
 = 
Œue
;

2924 
i
;

2925 
»gLi¡
 = 
š¢
 & 0xFF;

2926 
i
 = 0; i < 8; i++) {

2927 ià(
»gLi¡
 & 0x1) {

2928 ià(
i
 =ğ
rd
è
wBack
 = 
çl£
;

2929 
d©a
 = 
	`£lfV”ifiÿtiÚLßd
(
addr
, 
kSVWÜd
);

2930 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
d©a
, 
i
);

2931 
addr
 += 4;

2933 
»gLi¡
 =„egList >> 1;

2935 ià(
wBack
è
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
addr
, 
rd
);

2937 
d©a
 = 
	`£lfV”ifiÿtiÚLßd
(
addr
+
off£t
, 
size
);

2938 
	`£lfV”ifiÿtiÚMemRegStÜe
(
¥
, 
d©a
, 
¹
);

2942 
	}
}

	@vm/compiler/codegen/arm/CalloutHelper.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_CALLOUT_HELPER_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_CALLOUT_HELPER_H_


	)

20 
	~"D®vik.h
"

31 
	#LOAD_FUNC_ADDR
(
cUn™
, 
»g
, 
addr
è
	`lßdCÚ¡ªt
(cUn™,„eg,‡ddr)

	)

34 "C" 
__«abi_i2f
(
İ1
);

35 "C" 
__«abi_f2iz
(
İ1
);

36 "C" 
__«abi_d2f
(
İ1
);

37 "C" 
__«abi_f2d
(
İ1
);

38 "C" 
__«abi_i2d
(
İ1
);

39 "C" 
__«abi_d2iz
(
İ1
);

40 "C" 
__«abi_l2f
(
İ1
);

41 "C" 
__«abi_l2d
(
İ1
);

42 
s8
 
dvmJ™f2l
(
İ1
);

43 
s8
 
dvmJ™d2l
(
İ1
);

46 "C" 
__«abi_çdd
(
a
, 
b
);

47 "C" 
__«abi_fsub
(
a
, 
b
);

48 "C" 
__«abi_fdiv
(
a
, 
b
);

49 "C" 
__«abi_fmul
(
a
, 
b
);

50 "C" 
fmodf
(
a
, 
b
);

53 "C" 
__«abi_dadd
(
a
, 
b
);

54 "C" 
__«abi_dsub
(
a
, 
b
);

55 "C" 
__«abi_ddiv
(
a
, 
b
);

56 "C" 
__«abi_dmul
(
a
, 
b
);

57 "C" 
fmod
(
a
, 
b
);

60 "C" 
__«abi_idivmod
(
İ1
, 
İ2
);

61 "C" 
__«abi_idiv
(
İ1
, 
İ2
);

64 "C" 
__«abi_ldivmod
(
İ1
, 
İ2
);

67 
boŞ
 
dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

70 
boŞ
 
dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
–emCÏss
,

71 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
);

72 
dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

73 cÚ¡ 
CÏssObjeù
* 
şazz
);

76 
A¼ayObjeù
* 
dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

77 
size_t
 
Ëngth
, 
®locFÏgs
);

80 
boŞ
 
dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObjeù
,

81 cÚ¡ 
u2
* 
¬¿yD©a
);

84 cÚ¡ 
M‘hod
 *
dvmJ™ToP©chP»diùedChaš
(cÚ¡ M‘hod *
m‘hod
,

85 
Th»ad
 *
£lf
,

86 
P»diùedChaššgC–l
 *
ûÎ
,

87 cÚ¡ 
CÏssObjeù
 *
şazz
);

107 
Objeù
* 
dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
);

113 "C" 
sq¹
(
x
);

	@vm/compiler/codegen/arm/Codegen.h

25 
	~"comp”/Comp”IR.h
"

26 
	~"C®loutH–³r.h
"

28 #ià
defšed
(
_CODEGEN_C
)

32 
ArmLIR
 *
İRegImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

33 
v®ue
);

34 
ArmLIR
 *
İRegReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

35 
rSrc2
);

38 
boŞ
 
g’Ar™hOpFlßtPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

39 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

40 
RegLoÿtiÚ
 
¾Src2
);

42 
boŞ
 
g’Ar™hOpDoubËPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

43 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

44 
RegLoÿtiÚ
 
¾Src2
);

46 
boŞ
 
g’CÚv”siÚPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

48 #ià
defšed
(
__ARM_ARCH_5__
)

49 
g’MÚ™ÜPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

52 
g’IÁ”pSšgËS‹p
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

57 #ià
defšed
(
WITH_SELF_VERIFICATION
)

59 "C" 
dvmS–fV”ifiÿtiÚMemOpDecode
(
Ì
, * 
¥
);

62 
dvmComp”S‘upResourûMasks
(
ArmLIR
 *
lœ
);

64 
ArmLIR
* 
dvmComp”RegCİyNoIn£¹
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
,

65 
rSrc
);

	@vm/compiler/codegen/arm/CodegenCommon.cpp

27 
	~"comp”/Loİ.h
"

30 
šŒ_t
 
	g‹m¶©eEÁryOff£ts
[
TEMPLATE_LAST_MARK
];

33 
	gİcodeCov”age
[
kNumPackedOpcodes
];

35 
	$£tMemRefTy³
(
ArmLIR
 *
lœ
, 
boŞ
 
isLßd
, 
memTy³
)

37 
u8
 *
maskPŒ
;

38 
u8
 
mask
 = 
ENCODE_MEM
;;

39 
	`as£¹
(
EncodšgM­
[
lœ
->
İcode
].
æags
 & (
IS_LOAD
 | 
IS_STORE
));

40 ià(
isLßd
) {

41 
maskPŒ
 = &
lœ
->
u£Mask
;

43 
maskPŒ
 = &
lœ
->
defMask
;

46 *
maskPŒ
 &ğ~
mask
;

48 
memTy³
) {

49 
kL™”®
:

50 
	`as£¹
(
isLßd
);

51 *
maskPŒ
 |ğ
ENCODE_LITERAL
;

53 
kD®vikReg
:

54 *
maskPŒ
 |ğ
ENCODE_DALVIK_REG
;

56 
kH—pRef
:

57 *
maskPŒ
 |ğ
ENCODE_HEAP_REF
;

59 
kMu¡NÙAlŸs
:

61 
	`as£¹
(!(
EncodšgM­
[
lœ
->
İcode
].
æags
 & 
IS_STORE
));

62 *
maskPŒ
 |ğ
ENCODE_MUST_NOT_ALIAS
;

65 
	`ALOGE
("J™: inv®id mem»àkšd - %d", 
memTy³
);

66 
	`as£¹
(0);

67 *
maskPŒ
 |ğ
ENCODE_ALL
;

69 
	}
}

75 
	$ªnÙ©eD®vikRegAcûss
(
ArmLIR
 *
lœ
, 
»gId
, 
boŞ
 
isLßd
)

77 
	`£tMemRefTy³
(
lœ
, 
isLßd
, 
kD®vikReg
);

83 
lœ
->
®ŸsInfo
 = 
»gId
;

84 ià(
	`DOUBLEREG
(
lœ
->
İ”ªds
[0])) {

85 
lœ
->
®ŸsInfo
 |= 0x80000000;

87 
	}
}

92 
šlše
 
u8
 
	$g‘RegMaskCommÚ
(
»g
)

94 
u8
 
£ed
;

95 
shiá
;

96 
»gId
 = 
»g
 & 0x1f;

101 
£ed
 = 
	`DOUBLEREG
(
»g
) ? 3 : 1;

103 
shiá
 = 
	`FPREG
(
»g
è? 
kFPReg0
 : 0;

105 
shiá
 +ğ
»gId
;

106  (
£ed
 << 
shiá
);

107 
	}
}

110 
u8
 
	$dvmG‘RegResourûMask
(
»g
)

112  
	`g‘RegMaskCommÚ
(
»g
);

113 
	}
}

118 
šlše
 
	$£tupRegMask
(
u8
 *
mask
, 
»g
)

120 *
mask
 |ğ
	`g‘RegMaskCommÚ
(
»g
);

121 
	}
}

126 
	$£tupResourûMasks
(
ArmLIR
 *
lœ
)

128 
İcode
 = 
lœ
->opcode;

129 
æags
;

131 ià(
İcode
 <= 0) {

132 
lœ
->
u£Mask
 =†œ->
defMask
 = 0;

136 
æags
 = 
EncodšgM­
[
lœ
->
İcode
].flags;

139 ià(
æags
 & (
IS_LOAD
 | 
IS_STORE
)) {

141 
	`£tMemRefTy³
(
lœ
, 
æags
 & 
IS_LOAD
, 
kH—pRef
);

148 ià(
æags
 & 
IS_BRANCH
) {

149 
lœ
->
defMask
 =†œ->
u£Mask
 = 
ENCODE_ALL
;

153 ià(
æags
 & 
REG_DEF0
) {

154 
	`£tupRegMask
(&
lœ
->
defMask
,†œ->
İ”ªds
[0]);

157 ià(
æags
 & 
REG_DEF1
) {

158 
	`£tupRegMask
(&
lœ
->
defMask
,†œ->
İ”ªds
[1]);

161 ià(
æags
 & 
REG_DEF_SP
) {

162 
lœ
->
defMask
 |ğ
ENCODE_REG_SP
;

165 ià(
æags
 & 
REG_DEF_LR
) {

166 
lœ
->
defMask
 |ğ
ENCODE_REG_LR
;

169 ià(
æags
 & 
REG_DEF_LIST0
) {

170 
lœ
->
defMask
 |ğ
	`ENCODE_REG_LIST
Öœ->
İ”ªds
[0]);

173 ià(
æags
 & 
REG_DEF_LIST1
) {

174 
lœ
->
defMask
 |ğ
	`ENCODE_REG_LIST
Öœ->
İ”ªds
[1]);

177 ià(
æags
 & 
SETS_CCODES
) {

178 
lœ
->
defMask
 |ğ
ENCODE_CCODE
;

182 ià(
æags
 & 
IS_IT
) {

183 
lœ
->
defMask
 = 
ENCODE_ALL
;

186 ià(
æags
 & (
REG_USE0
 | 
REG_USE1
 | 
REG_USE2
 | 
REG_USE3
)) {

187 
i
;

189 
i
 = 0; i < 4; i++) {

190 ià(
æags
 & (1 << (
kRegU£0
 + 
i
))) {

191 
	`£tupRegMask
(&
lœ
->
u£Mask
,†œ->
İ”ªds
[
i
]);

196 ià(
æags
 & 
REG_USE_PC
) {

197 
lœ
->
u£Mask
 |ğ
ENCODE_REG_PC
;

200 ià(
æags
 & 
REG_USE_SP
) {

201 
lœ
->
u£Mask
 |ğ
ENCODE_REG_SP
;

204 ià(
æags
 & 
REG_USE_LIST0
) {

205 
lœ
->
u£Mask
 |ğ
	`ENCODE_REG_LIST
Öœ->
İ”ªds
[0]);

208 ià(
æags
 & 
REG_USE_LIST1
) {

209 
lœ
->
u£Mask
 |ğ
	`ENCODE_REG_LIST
Öœ->
İ”ªds
[1]);

212 ià(
æags
 & 
USES_CCODES
) {

213 
lœ
->
u£Mask
 |ğ
ENCODE_CCODE
;

217 ià(
İcode
 =ğ
kThumbPush
 || opcod=ğ
kThumbPİ
) {

218 
u8
 
r8Mask
 = 
	`g‘RegMaskCommÚ
(
r8
);

219 ià((
İcode
 =ğ
kThumbPush
è&& (
lœ
->
u£Mask
 & 
r8Mask
)) {

220 
lœ
->
u£Mask
 &ğ~
r8Mask
;

221 
lœ
->
u£Mask
 |ğ
ENCODE_REG_LR
;

222 } ià((
İcode
 =ğ
kThumbPİ
è&& (
lœ
->
defMask
 & 
r8Mask
)) {

223 
lœ
->
defMask
 &ğ~
r8Mask
;

224 
lœ
->
defMask
 |ğ
ENCODE_REG_PC
;

227 
	}
}

232 
	$»ÏxB¿nchMasks
(
ArmLIR
 *
lœ
)

234 
æags
 = 
EncodšgM­
[
lœ
->
İcode
].flags;

237 
	`as£¹
(
æags
 & 
IS_BRANCH
);

239 
lœ
->
u£Mask
 =†œ->
defMask
 = 
ENCODE_REG_PC
;

241 ià(
æags
 & 
REG_DEF_LR
) {

242 
lœ
->
defMask
 |ğ
ENCODE_REG_LR
;

245 ià(
æags
 & (
REG_USE0
 | 
REG_USE1
 | 
REG_USE2
 | 
REG_USE3
)) {

246 
i
;

248 
i
 = 0; i < 4; i++) {

249 ià(
æags
 & (1 << (
kRegU£0
 + 
i
))) {

250 
	`£tupRegMask
(&
lœ
->
u£Mask
,†œ->
İ”ªds
[
i
]);

255 ià(
æags
 & 
USES_CCODES
) {

256 
lœ
->
u£Mask
 |ğ
ENCODE_CCODE
;

258 
	}
}

264 
ArmLIR
 *
	$ÃwLIR0
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpcode
 
İcode
)

266 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

267 
	`as£¹
(
	`isP£udoOpcode
(
İcode
è|| (
EncodšgM­
[İcode].
æags
 & 
NO_OPERAND
));

268 
š¢
->
İcode
 = opcode;

269 
	`£tupResourûMasks
(
š¢
);

270 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

271  
š¢
;

272 
	}
}

274 
ArmLIR
 *
	$ÃwLIR1
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpcode
 
İcode
,

275 
de¡
)

277 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

278 
	`as£¹
(
	`isP£udoOpcode
(
İcode
è|| (
EncodšgM­
[İcode].
æags
 & 
IS_UNARY_OP
));

279 
š¢
->
İcode
 = opcode;

280 
š¢
->
İ”ªds
[0] = 
de¡
;

281 
	`£tupResourûMasks
(
š¢
);

282 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

283  
š¢
;

284 
	}
}

286 
ArmLIR
 *
	$ÃwLIR2
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpcode
 
İcode
,

287 
de¡
, 
¤c1
)

289 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

290 
	`as£¹
(
	`isP£udoOpcode
(
İcode
) ||

291 (
EncodšgM­
[
İcode
].
æags
 & 
IS_BINARY_OP
));

292 
š¢
->
İcode
 = opcode;

293 
š¢
->
İ”ªds
[0] = 
de¡
;

294 
š¢
->
İ”ªds
[1] = 
¤c1
;

295 
	`£tupResourûMasks
(
š¢
);

296 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

297  
š¢
;

298 
	}
}

300 
ArmLIR
 *
	$ÃwLIR3
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpcode
 
İcode
,

301 
de¡
, 
¤c1
, 
¤c2
)

303 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

304 ià(!(
EncodšgM­
[
İcode
].
æags
 & 
IS_TERTIARY_OP
)) {

305 
	`ALOGE
("Bad LIR3: %s[%d]",
EncodšgM­
[
İcode
].
Çme
,opcode);

307 
	`as£¹
(
	`isP£udoOpcode
(
İcode
) ||

308 (
EncodšgM­
[
İcode
].
æags
 & 
IS_TERTIARY_OP
));

309 
š¢
->
İcode
 = opcode;

310 
š¢
->
İ”ªds
[0] = 
de¡
;

311 
š¢
->
İ”ªds
[1] = 
¤c1
;

312 
š¢
->
İ”ªds
[2] = 
¤c2
;

313 
	`£tupResourûMasks
(
š¢
);

314 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

315  
š¢
;

316 
	}
}

318 #ià
defšed
(
_ARMV7_A
è|| defšed(
_ARMV7_A_NEON
)

319 
ArmLIR
 *
	$ÃwLIR4
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpcode
 
İcode
,

320 
de¡
, 
¤c1
, 
¤c2
, 
šfo
)

322 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

323 
	`as£¹
(
	`isP£udoOpcode
(
İcode
) ||

324 (
EncodšgM­
[
İcode
].
æags
 & 
IS_QUAD_OP
));

325 
š¢
->
İcode
 = opcode;

326 
š¢
->
İ”ªds
[0] = 
de¡
;

327 
š¢
->
İ”ªds
[1] = 
¤c1
;

328 
š¢
->
İ”ªds
[2] = 
¤c2
;

329 
š¢
->
İ”ªds
[3] = 
šfo
;

330 
	`£tupResourûMasks
(
š¢
);

331 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

332  
š¢
;

333 
	}
}

341 
RegLoÿtiÚ
 
	$šlšedT¬g‘
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

342 
boŞ
 
åHšt
)

344 ià(
mœ
->
Ãxt
 &&

345 ((
mœ
->
Ãxt
->
d®vikIn¢
.
İcode
 =ğ
OP_MOVE_RESULT
) ||

346 (
mœ
->
Ãxt
->
d®vikIn¢
.
İcode
 =ğ
OP_MOVE_RESULT_OBJECT
))) {

347 
mœ
->
Ãxt
->
d®vikIn¢
.
İcode
 = 
OP_NOP
;

348  
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
->
Ãxt
, 0);

350 
RegLoÿtiÚ
 
»s
 = 
LOC_DALVIK_RETURN_VAL
;

351 
»s
.
å
 = 
åHšt
;

352  
»s
;

354 
	}
}

360 
ArmLIR
 *
	$sÿnL™”®PoŞ
(
LIR
 *
d©aT¬g‘
, 
v®ue
, 
d–
)

362 
d©aT¬g‘
) {

363 ià(((è(
v®ue
 - ((
ArmLIR
 *è
d©aT¬g‘
)->
İ”ªds
[0])) <=

364 
d–
)

365  (
ArmLIR
 *è
d©aT¬g‘
;

366 
d©aT¬g‘
 = d©aT¬g‘->
Ãxt
;

368  
NULL
;

369 
	}
}

377 
ArmLIR
 *
	$addWÜdD©a
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 **
cÚ¡ªtLi¡P
,

378 
v®ue
)

381 ià(
cÚ¡ªtLi¡P
) {

382 
ArmLIR
 *
ÃwV®ue
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

383 
ÃwV®ue
->
İ”ªds
[0] = 
v®ue
;

384 
ÃwV®ue
->
g’”ic
.
Ãxt
 = *
cÚ¡ªtLi¡P
;

385 *
cÚ¡ªtLi¡P
 = (
LIR
 *è
ÃwV®ue
;

386  
ÃwV®ue
;

389 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, (
v®ue
 & 0xffff));

390 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, (
v®ue
 >> 16));

392  
NULL
;

393 
	}
}

395 
RegLoÿtiÚ
 
	$šlšedT¬g‘Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

396 
boŞ
 
åHšt
)

398 ià(
mœ
->
Ãxt
 &&

399 (
mœ
->
Ãxt
->
d®vikIn¢
.
İcode
 =ğ
OP_MOVE_RESULT_WIDE
)) {

400 
mœ
->
Ãxt
->
d®vikIn¢
.
İcode
 = 
OP_NOP
;

401  
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
->
Ãxt
, 0, 1);

403 
RegLoÿtiÚ
 
»s
 = 
LOC_DALVIK_RETURN_VAL_WIDE
;

404 
»s
.
å
 = 
åHšt
;

405  
»s
;

407 
	}
}

414 
	$g’B¬r›r
(
Comp©iÚUn™
 *
cUn™
)

416 
ArmLIR
 *
b¬r›r
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoB¬r›r
);

418 
b¬r›r
->
defMask
 = -1;

419 
	}
}

422 
ArmLIR
 *
	$g’CheckCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
dOff£t
,

423 
ArmLIR
 *
b¿nch
,

424 
ArmLIR
 *
püLab–
)

427 
	`dvmComp”Re£tDefT¿ckšg
(
cUn™
);

430 ià(
püLab–
 =ğ
NULL
) {

431 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
dOff£t
);

432 
püLab–
 = (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

433 
püLab–
->
İcode
 = 
kArmP£udoPCRecÚ¡ruùiÚC–l
;

434 
püLab–
->
İ”ªds
[0] = 
dPC
;

435 
püLab–
->
İ”ªds
[1] = 
dOff£t
;

437 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
,

438 (
šŒ_t
è
püLab–
);

441 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *è
püLab–
;

444 
	`»ÏxB¿nchMasks
(
b¿nch
);

446  
püLab–
;

447 
	}
}

	@vm/compiler/codegen/arm/CodegenDriver.cpp

30 
	$m¬kC¬d
(
Comp©iÚUn™
 *
cUn™
, 
v®Reg
, 
tgtAddrReg
)

32 
»gC¬dBa£
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

33 
»gC¬dNo
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

34 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdEq
, 
v®Reg
, 0);

35 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
, 
ÿrdTabË
),

36 
»gC¬dBa£
);

37 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
»gC¬dNo
, 
tgtAddrReg
, 
GC_CARD_SHIFT
);

38 
	`¡ÜeBa£Indexed
(
cUn™
, 
»gC¬dBa£
, 
»gC¬dNo
,„egCardBase, 0,

39 
kUnsigÃdBy‹
);

40 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

41 
rg‘
->
defMask
 = 
ENCODE_ALL
;

42 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

43 
	`dvmComp”F»eTemp
(
cUn™
, 
»gC¬dBa£
);

44 
	`dvmComp”F»eTemp
(
cUn™
, 
»gC¬dNo
);

45 
	}
}

47 
boŞ
 
	$g’CÚv”siÚC®l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, *
funù
,

48 
¤cSize
, 
tgtSize
)

54 
RegLoÿtiÚ
 
¾Src
;

55 
RegLoÿtiÚ
 
¾De¡
;

56 
	`dvmComp”FlushAÎRegs
(
cUn™
);

57 ià(
¤cSize
 == 1) {

58 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

59 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

61 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

62 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src
, 
r0
, 
r1
);

64 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
funù
);

65 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

66 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

67 ià(
tgtSize
 == 1) {

68 
RegLoÿtiÚ
 
¾ResuÉ
;

69 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

70 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

71 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

73 
RegLoÿtiÚ
 
¾ResuÉ
;

74 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

75 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

76 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

78  
çl£
;

79 
	}
}

81 
boŞ
 
	$g’Ar™hOpFlßtPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

82 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

83 
RegLoÿtiÚ
 
¾Src2
)

85 
RegLoÿtiÚ
 
¾ResuÉ
;

86 * 
funù
;

88 
mœ
->
d®vikIn¢
.
İcode
) {

89 
OP_ADD_FLOAT_2ADDR
:

90 
OP_ADD_FLOAT
:

91 
funù
 = (*è
__«abi_çdd
;

93 
OP_SUB_FLOAT_2ADDR
:

94 
OP_SUB_FLOAT
:

95 
funù
 = (*è
__«abi_fsub
;

97 
OP_DIV_FLOAT_2ADDR
:

98 
OP_DIV_FLOAT
:

99 
funù
 = (*è
__«abi_fdiv
;

101 
OP_MUL_FLOAT_2ADDR
:

102 
OP_MUL_FLOAT
:

103 
funù
 = (*è
__«abi_fmul
;

105 
OP_REM_FLOAT_2ADDR
:

106 
OP_REM_FLOAT
:

107 
funù
 = (*è
fmodf
;

109 
OP_NEG_FLOAT
: {

110 
	`g’NegFlßt
(
cUn™
, 
¾De¡
, 
¾Src1
);

111  
çl£
;

114  
Œue
;

116 
	`dvmComp”FlushAÎRegs
(
cUn™
);

117 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src1
, 
r0
);

118 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src2
, 
r1
);

119 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
funù
);

120 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

121 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

122 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

123 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

124  
çl£
;

125 
	}
}

127 
boŞ
 
	$g’Ar™hOpDoubËPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

128 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

129 
RegLoÿtiÚ
 
¾Src2
)

131 
RegLoÿtiÚ
 
¾ResuÉ
;

132 * 
funù
;

134 
mœ
->
d®vikIn¢
.
İcode
) {

135 
OP_ADD_DOUBLE_2ADDR
:

136 
OP_ADD_DOUBLE
:

137 
funù
 = (*è
__«abi_dadd
;

139 
OP_SUB_DOUBLE_2ADDR
:

140 
OP_SUB_DOUBLE
:

141 
funù
 = (*è
__«abi_dsub
;

143 
OP_DIV_DOUBLE_2ADDR
:

144 
OP_DIV_DOUBLE
:

145 
funù
 = (*è
__«abi_ddiv
;

147 
OP_MUL_DOUBLE_2ADDR
:

148 
OP_MUL_DOUBLE
:

149 
funù
 = (*è
__«abi_dmul
;

151 
OP_REM_DOUBLE_2ADDR
:

152 
OP_REM_DOUBLE
:

153 
funù
 = (*è((*)(, )è
fmod
;

155 
OP_NEG_DOUBLE
: {

156 
	`g’NegDoubË
(
cUn™
, 
¾De¡
, 
¾Src1
);

157  
çl£
;

160  
Œue
;

162 
	`dvmComp”FlushAÎRegs
(
cUn™
);

163 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r14Ì
, ()
funù
);

164 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

165 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

166 
	`İReg
(
cUn™
, 
kOpBlx
, 
r14Ì
);

167 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

168 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

169 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

170 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

171 
cUn™
->
u£sLškRegi¡”
 = 
Œue
;

173  
çl£
;

174 
	}
}

176 
boŞ
 
	$g’CÚv”siÚPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

178 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

180 
İcode
) {

181 
OP_INT_TO_FLOAT
:

182  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_i2f
, 1, 1);

183 
OP_FLOAT_TO_INT
:

184  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_f2iz
, 1, 1);

185 
OP_DOUBLE_TO_FLOAT
:

186  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_d2f
, 2, 1);

187 
OP_FLOAT_TO_DOUBLE
:

188  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_f2d
, 1, 2);

189 
OP_INT_TO_DOUBLE
:

190  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_i2d
, 1, 2);

191 
OP_DOUBLE_TO_INT
:

192  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_d2iz
, 2, 1);

193 
OP_FLOAT_TO_LONG
:

194  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
dvmJ™f2l
, 1, 2);

195 
OP_LONG_TO_FLOAT
:

196  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_l2f
, 2, 1);

197 
OP_DOUBLE_TO_LONG
:

198  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
dvmJ™d2l
, 2, 2);

199 
OP_LONG_TO_DOUBLE
:

200  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_l2d
, 2, 2);

202  
Œue
;

204  
çl£
;

205 
	}
}

207 #ià
defšed
(
WITH_SELF_VERIFICATION
)

208 
	$£lfV”ifiÿtiÚB¿nchIn£¹
(
LIR
 *
cu¼’tLIR
, 
ArmOpcode
 
İcode
,

209 
de¡
, 
¤c1
)

211 
ArmLIR
 *
š¢
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

212 
š¢
->
İcode
 = opcode;

213 
š¢
->
İ”ªds
[0] = 
de¡
;

214 
š¢
->
İ”ªds
[1] = 
¤c1
;

215 
	`£tupResourûMasks
(
š¢
);

216 
	`dvmComp”In£¹LIRBefÜe
(
cu¼’tLIR
, (
LIR
 *è
š¢
);

217 
	}
}

244 
	$£lfV”ifiÿtiÚB¿nchIn£¹Pass
(
Comp©iÚUn™
 *
cUn™
)

246 
ArmLIR
 *
thisLIR
;

247 
Tem¶©eOpcode
 
İcode
 = 
TEMPLATE_MEM_OP_DECODE
;

249 
thisLIR
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;

250 
thisLIR
 !ğ(
ArmLIR
 *è
cUn™
->
Ï¡LIRIn¢
;

251 
thisLIR
 = 
	`NEXT_LIR
(thisLIR)) {

252 ià(!
thisLIR
->
æags
.
isNİ
 &&hisLIR->æags.
š£¹W¿µ”
) {

261 ià(
cUn™
->
u£sLškRegi¡”
) {

262 
	`g’S–fV”ifiÿtiÚP»B¿nch
(
cUn™
, 
thisLIR
);

266 
	`£lfV”ifiÿtiÚB¿nchIn£¹
((
LIR
 *è
thisLIR
, 
kThumbBlx1
,

267 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

268 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

269 
	`£lfV”ifiÿtiÚB¿nchIn£¹
((
LIR
 *è
thisLIR
, 
kThumbBlx2
,

270 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

271 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

274 ià(
cUn™
->
u£sLškRegi¡”
) {

275 
	`g’S–fV”ifiÿtiÚPo¡B¿nch
(
cUn™
, 
thisLIR
);

279 
	}
}

283 
ArmLIR
 *
	$g’CÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
,

284 
ArmCÚd™iÚCode
 
cÚd
,

285 
ArmLIR
 *
rg‘
)

287 
ArmLIR
 *
b¿nch
 = 
	`İCÚdB¿nch
(
cUn™
, 
cÚd
);

288 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

289  
b¿nch
;

290 
	}
}

293 
šlše
 
ArmLIR
 *
	$g’T¿p
(
Comp©iÚUn™
 *
cUn™
, 
dOff£t
,

294 
ArmLIR
 *
püLab–
)

296 
ArmLIR
 *
b¿nch
 = 
	`İNÚe
(
cUn™
, 
kOpUncÚdBr
);

297  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

298 
	}
}

301 
	$g’IG‘Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
f›ldOff£t
)

303 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

304 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

305 
RegLoÿtiÚ
 
¾ResuÉ
;

306 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

307 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

309 
	`as£¹
(
¾De¡
.
wide
);

311 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
, 
mœ
->
off£t
,

312 
NULL
);

313 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾Obj
.
lowReg
, 
f›ldOff£t
);

314 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

316 
	`HEAP_ACCESS_SHADOW
(
Œue
);

317 
	`lßdPaœ
(
cUn™
, 
»gPŒ
, 
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
);

318 
	`HEAP_ACCESS_SHADOW
(
çl£
);

320 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

321 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

322 
	}
}

325 
	$g’IPutWide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
f›ldOff£t
)

327 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

328 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 2);

329 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

330 
»gPŒ
;

331 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kAnyReg
);

332 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
, 
mœ
->
off£t
,

333 
NULL
);

334 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

335 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾Obj
.
lowReg
, 
f›ldOff£t
);

337 
	`HEAP_ACCESS_SHADOW
(
Œue
);

338 
	`¡ÜePaœ
(
cUn™
, 
»gPŒ
, 
¾Src
.
lowReg
,„lSrc.
highReg
);

339 
	`HEAP_ACCESS_SHADOW
(
çl£
);

341 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

342 
	}
}

348 
	$g’IG‘
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpSize
 
size
,

349 
f›ldOff£t
, 
boŞ
 
isVŞ©e
)

351 
RegLoÿtiÚ
 
¾ResuÉ
;

352 
Regi¡”CÏss
 
»gCÏss
 = 
	`dvmComp”RegCÏssBySize
(
size
);

353 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

354 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

355 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

356 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
»gCÏss
, 
Œue
);

357 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
, 
mœ
->
off£t
,

358 
NULL
);

360 
	`HEAP_ACCESS_SHADOW
(
Œue
);

361 
	`lßdBa£Di¥
(
cUn™
, 
mœ
, 
¾Obj
.
lowReg
, 
f›ldOff£t
, 
¾ResuÉ
.lowReg,

362 
size
, 
¾Obj
.
sRegLow
);

363 
	`HEAP_ACCESS_SHADOW
(
çl£
);

364 ià(
isVŞ©e
) {

365 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

368 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

369 
	}
}

375 
	$g’IPut
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpSize
 
size
,

376 
f›ldOff£t
, 
boŞ
 
isObjeù
, boŞ 
isVŞ©e
)

378 
Regi¡”CÏss
 
»gCÏss
 = 
	`dvmComp”RegCÏssBySize
(
size
);

379 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

380 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

381 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

382 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
»gCÏss
);

383 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
, 
mœ
->
off£t
,

384 
NULL
);

386 ià(
isVŞ©e
) {

387 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kST
);

389 
	`HEAP_ACCESS_SHADOW
(
Œue
);

390 
	`¡ÜeBa£Di¥
(
cUn™
, 
¾Obj
.
lowReg
, 
f›ldOff£t
, 
¾Src
.lowReg, 
size
);

391 
	`HEAP_ACCESS_SHADOW
(
çl£
);

392 ià(
isVŞ©e
) {

393 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

395 ià(
isObjeù
) {

397 
	`m¬kC¬d
(
cUn™
, 
¾Src
.
lowReg
, 
¾Obj
.lowReg);

399 
	}
}

405 
	$g’A¼ayG‘
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpSize
 
size
,

406 
RegLoÿtiÚ
 
¾A¼ay
, RegLoÿtiÚ 
¾Index
,

407 
RegLoÿtiÚ
 
¾De¡
, 
sÿË
)

409 
Regi¡”CÏss
 
»gCÏss
 = 
	`dvmComp”RegCÏssBySize
(
size
);

410 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

411 
d©aOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

412 
RegLoÿtiÚ
 
¾ResuÉ
;

413 
¾A¼ay
 = 
	`lßdV®ue
(
cUn™
,„lA¼ay, 
kCÜeReg
);

414 
¾Index
 = 
	`lßdV®ue
(
cUn™
,„lIndex, 
kCÜeReg
);

415 
»gPŒ
;

418 
ArmLIR
 * 
püLab–
 = 
NULL
;

420 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_NULL_CHECK
)) {

421 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
¾A¼ay
.
sRegLow
,

422 
¾A¼ay
.
lowReg
, 
mœ
->
off£t
, 
NULL
);

425 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

427 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_RANGE_CHECK
)) {

428 
»gL’
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

430 
	`lßdWÜdDi¥
(
cUn™
, 
¾A¼ay
.
lowReg
, 
ËnOff£t
, 
»gL’
);

432 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾A¼ay
.
lowReg
, 
d©aOff£t
);

433 
	`g’BoundsCheck
(
cUn™
, 
¾Index
.
lowReg
, 
»gL’
, 
mœ
->
off£t
,

434 
püLab–
);

435 
	`dvmComp”F»eTemp
(
cUn™
, 
»gL’
);

438 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾A¼ay
.
lowReg
, 
d©aOff£t
);

440 ià((
size
 =ğ
kLÚg
è|| (siz=ğ
kDoubË
)) {

441 ià(
sÿË
) {

442 
rNewIndex
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

443 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rNewIndex
, 
¾Index
.
lowReg
, 
sÿË
);

444 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
rNewIndex
);

445 
	`dvmComp”F»eTemp
(
cUn™
, 
rNewIndex
);

447 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾Index
.
lowReg
);

449 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
»gCÏss
, 
Œue
);

451 
	`HEAP_ACCESS_SHADOW
(
Œue
);

452 
	`lßdPaœ
(
cUn™
, 
»gPŒ
, 
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
);

453 
	`HEAP_ACCESS_SHADOW
(
çl£
);

455 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

456 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

458 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
»gCÏss
, 
Œue
);

460 
	`HEAP_ACCESS_SHADOW
(
Œue
);

461 
	`lßdBa£Indexed
(
cUn™
, 
»gPŒ
, 
¾Index
.
lowReg
, 
¾ResuÉ
.lowReg,

462 
sÿË
, 
size
);

463 
	`HEAP_ACCESS_SHADOW
(
çl£
);

465 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

466 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

468 
	}
}

474 
	$g’A¼ayPut
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpSize
 
size
,

475 
RegLoÿtiÚ
 
¾A¼ay
, RegLoÿtiÚ 
¾Index
,

476 
RegLoÿtiÚ
 
¾Src
, 
sÿË
)

478 
Regi¡”CÏss
 
»gCÏss
 = 
	`dvmComp”RegCÏssBySize
(
size
);

479 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

480 
d©aOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

482 
»gPŒ
;

483 
¾A¼ay
 = 
	`lßdV®ue
(
cUn™
,„lA¼ay, 
kCÜeReg
);

484 
¾Index
 = 
	`lßdV®ue
(
cUn™
,„lIndex, 
kCÜeReg
);

486 ià(
	`dvmComp”IsTemp
(
cUn™
, 
¾A¼ay
.
lowReg
)) {

487 
	`dvmComp”Clobb”
(
cUn™
, 
¾A¼ay
.
lowReg
);

488 
»gPŒ
 = 
¾A¼ay
.
lowReg
;

490 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

491 
	`g’RegCİy
(
cUn™
, 
»gPŒ
, 
¾A¼ay
.
lowReg
);

495 
ArmLIR
 * 
püLab–
 = 
NULL
;

497 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_NULL_CHECK
)) {

498 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
¾A¼ay
.
sRegLow
,„lA¼ay.
lowReg
,

499 
mœ
->
off£t
, 
NULL
);

502 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_RANGE_CHECK
)) {

503 
»gL’
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

506 
	`lßdWÜdDi¥
(
cUn™
, 
¾A¼ay
.
lowReg
, 
ËnOff£t
, 
»gL’
);

508 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
d©aOff£t
);

509 
	`g’BoundsCheck
(
cUn™
, 
¾Index
.
lowReg
, 
»gL’
, 
mœ
->
off£t
,

510 
püLab–
);

511 
	`dvmComp”F»eTemp
(
cUn™
, 
»gL’
);

514 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
d©aOff£t
);

517 ià((
size
 =ğ
kLÚg
è|| (siz=ğ
kDoubË
)) {

519 ià(
sÿË
) {

520 
rNewIndex
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

521 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rNewIndex
, 
¾Index
.
lowReg
, 
sÿË
);

522 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
rNewIndex
);

523 
	`dvmComp”F»eTemp
(
cUn™
, 
rNewIndex
);

525 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
¾Index
.
lowReg
);

527 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
»gCÏss
);

529 
	`HEAP_ACCESS_SHADOW
(
Œue
);

530 
	`¡ÜePaœ
(
cUn™
, 
»gPŒ
, 
¾Src
.
lowReg
,„lSrc.
highReg
);

531 
	`HEAP_ACCESS_SHADOW
(
çl£
);

533 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

535 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
»gCÏss
);

537 
	`HEAP_ACCESS_SHADOW
(
Œue
);

538 
	`¡ÜeBa£Indexed
(
cUn™
, 
»gPŒ
, 
¾Index
.
lowReg
, 
¾Src
.lowReg,

539 
sÿË
, 
size
);

540 
	`HEAP_ACCESS_SHADOW
(
çl£
);

542 
	}
}

549 
	$g’A¼ayObjeùPut
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

550 
RegLoÿtiÚ
 
¾A¼ay
, RegLoÿtiÚ 
¾Index
,

551 
RegLoÿtiÚ
 
¾Src
, 
sÿË
)

553 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

554 
d©aOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

556 
	`dvmComp”FlushAÎRegs
(
cUn™
);

558 
»gL’
 = 
r0
;

559 
»gPŒ
 = 
r4PC
;

560 
»gA¼ay
 = 
r1
;

561 
»gIndex
 = 
r7
;

563 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾A¼ay
, 
»gA¼ay
);

564 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Index
, 
»gIndex
);

567 
ArmLIR
 * 
püLab–
 = 
NULL
;

569 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_NULL_CHECK
)) {

570 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
¾A¼ay
.
sRegLow
, 
»gA¼ay
,

571 
mœ
->
off£t
, 
NULL
);

574 ià(!(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_IGNORE_RANGE_CHECK
)) {

576 
	`lßdWÜdDi¥
(
cUn™
, 
»gA¼ay
, 
ËnOff£t
, 
»gL’
);

578 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
»gA¼ay
, 
d©aOff£t
);

579 
	`g’BoundsCheck
(
cUn™
, 
»gIndex
, 
»gL’
, 
mœ
->
off£t
,

580 
püLab–
);

583 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
»gA¼ay
, 
d©aOff£t
);

587 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

588 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
dvmCªPutA¼ayEËm’t
);

591 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdEq
, 
r0
, 0);

594 
	`lßdWÜdDi¥
(
cUn™
, 
»gA¼ay
, 
	`off£tof
(
Objeù
, 
şazz
), 
r1
);

595 
	`lßdWÜdDi¥
(
cUn™
, 
r0
, 
	`off£tof
(
Objeù
, 
şazz
),„0);

596 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

597 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

604 
	`dvmComp”LockTemp
(
cUn™
, 
»gPŒ
);

605 
	`dvmComp”LockTemp
(
cUn™
, 
»gIndex
);

606 
	`dvmComp”LockTemp
(
cUn™
, 
r0
);

607 
	`dvmComp”LockTemp
(
cUn™
, 
r1
);

610 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdEq
, 
r0
, 0, 
mœ
->
off£t
, 
püLab–
);

613 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

614 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾A¼ay
, 
r1
);

616 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

617 
rg‘
->
defMask
 = 
ENCODE_ALL
;

618 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

620 
	`HEAP_ACCESS_SHADOW
(
Œue
);

621 
	`¡ÜeBa£Indexed
(
cUn™
, 
»gPŒ
, 
»gIndex
, 
r0
,

622 
sÿË
, 
kWÜd
);

623 
	`HEAP_ACCESS_SHADOW
(
çl£
);

625 
	`dvmComp”F»eTemp
(
cUn™
, 
»gPŒ
);

626 
	`dvmComp”F»eTemp
(
cUn™
, 
»gIndex
);

629 
	`m¬kC¬d
(
cUn™
, 
r0
, 
r1
);

630 
	}
}

632 
boŞ
 
	$g’ShiáOpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

633 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

634 
RegLoÿtiÚ
 
¾Shiá
)

640 
RegLoÿtiÚ
 
¾ResuÉ
;

642 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

643 
	`lßdV®ueDœeù
(
cUn™
, 
¾Shiá
, 
r2
);

644  
mœ
->
d®vikIn¢
.
İcode
) {

645 
OP_SHL_LONG
:

646 
OP_SHL_LONG_2ADDR
:

647 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SHL_LONG
);

649 
OP_SHR_LONG
:

650 
OP_SHR_LONG_2ADDR
:

651 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SHR_LONG
);

653 
OP_USHR_LONG
:

654 
OP_USHR_LONG_2ADDR
:

655 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_USHR_LONG
);

658  
Œue
;

660 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

661 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

662  
çl£
;

663 
	}
}

665 
boŞ
 
	$g’Ar™hOpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

666 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

667 
RegLoÿtiÚ
 
¾Src2
)

669 
RegLoÿtiÚ
 
¾ResuÉ
;

670 
OpKšd
 
fœ¡Op
 = 
kOpBk±
;

671 
OpKšd
 
£cÚdOp
 = 
kOpBk±
;

672 
boŞ
 
ÿÎOut
 = 
çl£
;

673 *
ÿÎTgt
;

674 
»tReg
 = 
r0
;

676 
mœ
->
d®vikIn¢
.
İcode
) {

677 
OP_NOT_LONG
:

678 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

679 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

680 
	`İRegReg
(
cUn™
, 
kOpMvn
, 
¾ResuÉ
.
lowReg
, 
¾Src2
.lowReg);

681 
	`İRegReg
(
cUn™
, 
kOpMvn
, 
¾ResuÉ
.
highReg
, 
¾Src2
.highReg);

682 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

683  
çl£
;

685 
OP_ADD_LONG
:

686 
OP_ADD_LONG_2ADDR
:

687 
fœ¡Op
 = 
kOpAdd
;

688 
£cÚdOp
 = 
kOpAdc
;

690 
OP_SUB_LONG
:

691 
OP_SUB_LONG_2ADDR
:

692 
fœ¡Op
 = 
kOpSub
;

693 
£cÚdOp
 = 
kOpSbc
;

695 
OP_MUL_LONG
:

696 
OP_MUL_LONG_2ADDR
:

697 
	`g’MulLÚg
(
cUn™
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

698  
çl£
;

699 
OP_DIV_LONG
:

700 
OP_DIV_LONG_2ADDR
:

701 
ÿÎOut
 = 
Œue
;

702 
»tReg
 = 
r0
;

703 
ÿÎTgt
 = (*)
__«abi_ldivmod
;

706 
OP_REM_LONG
:

707 
OP_REM_LONG_2ADDR
:

708 
ÿÎOut
 = 
Œue
;

709 
ÿÎTgt
 = (*)
__«abi_ldivmod
;

710 
»tReg
 = 
r2
;

712 
OP_AND_LONG_2ADDR
:

713 
OP_AND_LONG
:

714 
fœ¡Op
 = 
kOpAnd
;

715 
£cÚdOp
 = 
kOpAnd
;

717 
OP_OR_LONG
:

718 
OP_OR_LONG_2ADDR
:

719 
fœ¡Op
 = 
kOpOr
;

720 
£cÚdOp
 = 
kOpOr
;

722 
OP_XOR_LONG
:

723 
OP_XOR_LONG_2ADDR
:

724 
fœ¡Op
 = 
kOpXÜ
;

725 
£cÚdOp
 = 
kOpXÜ
;

727 
OP_NEG_LONG
: {

729 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

730 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

731 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

732 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
tReg
, 0);

733 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾ResuÉ
.
lowReg
,

734 
tReg
, 
¾Src2
.
lowReg
);

735 
	`İRegReg
(
cUn™
, 
kOpSbc
, 
tReg
, 
¾Src2
.
highReg
);

736 
	`g’RegCİy
(
cUn™
, 
¾ResuÉ
.
highReg
, 
tReg
);

737 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

738  
çl£
;

741 
	`ALOGE
("Invalid†ong‡rith op");

742 
	`dvmComp”AbÜt
(
cUn™
);

744 ià(!
ÿÎOut
) {

745 
	`g’LÚg3Addr
(
cUn™
, 
mœ
, 
fœ¡Op
, 
£cÚdOp
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

748 
	`dvmComp”FlushAÎRegs
(
cUn™
);

749 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

750 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r14Ì
, (è
ÿÎTgt
);

751 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

752 
	`İReg
(
cUn™
, 
kOpBlx
, 
r14Ì
);

753 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

754 ià(
»tReg
 =ğ
r0
)

755 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

757 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWideAÉ
(
cUn™
);

758 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

759 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

760 
cUn™
->
u£sLškRegi¡”
 = 
Œue
;

763  
çl£
;

764 
	}
}

766 
boŞ
 
	$g’Ar™hOpIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

767 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

768 
RegLoÿtiÚ
 
¾Src2
)

770 
OpKšd
 
İ
 = 
kOpBk±
;

771 
boŞ
 
ÿÎOut
 = 
çl£
;

772 
boŞ
 
checkZ”o
 = 
çl£
;

773 
boŞ
 
uÇry
 = 
çl£
;

774 
»tReg
 = 
r0
;

775 (*
ÿÎTgt
)(, );

776 
RegLoÿtiÚ
 
¾ResuÉ
;

777 
boŞ
 
shiáOp
 = 
çl£
;

779 
mœ
->
d®vikIn¢
.
İcode
) {

780 
OP_NEG_INT
:

781 
İ
 = 
kOpNeg
;

782 
uÇry
 = 
Œue
;

784 
OP_NOT_INT
:

785 
İ
 = 
kOpMvn
;

786 
uÇry
 = 
Œue
;

788 
OP_ADD_INT
:

789 
OP_ADD_INT_2ADDR
:

790 
İ
 = 
kOpAdd
;

792 
OP_SUB_INT
:

793 
OP_SUB_INT_2ADDR
:

794 
İ
 = 
kOpSub
;

796 
OP_MUL_INT
:

797 
OP_MUL_INT_2ADDR
:

798 
İ
 = 
kOpMul
;

800 
OP_DIV_INT
:

801 
OP_DIV_INT_2ADDR
:

802 
ÿÎOut
 = 
Œue
;

803 
checkZ”o
 = 
Œue
;

804 
ÿÎTgt
 = 
__«abi_idiv
;

805 
»tReg
 = 
r0
;

808 
OP_REM_INT
:

809 
OP_REM_INT_2ADDR
:

810 
ÿÎOut
 = 
Œue
;

811 
checkZ”o
 = 
Œue
;

812 
ÿÎTgt
 = 
__«abi_idivmod
;

813 
»tReg
 = 
r1
;

815 
OP_AND_INT
:

816 
OP_AND_INT_2ADDR
:

817 
İ
 = 
kOpAnd
;

819 
OP_OR_INT
:

820 
OP_OR_INT_2ADDR
:

821 
İ
 = 
kOpOr
;

823 
OP_XOR_INT
:

824 
OP_XOR_INT_2ADDR
:

825 
İ
 = 
kOpXÜ
;

827 
OP_SHL_INT
:

828 
OP_SHL_INT_2ADDR
:

829 
shiáOp
 = 
Œue
;

830 
İ
 = 
kOpL¦
;

832 
OP_SHR_INT
:

833 
OP_SHR_INT_2ADDR
:

834 
shiáOp
 = 
Œue
;

835 
İ
 = 
kOpA¤
;

837 
OP_USHR_INT
:

838 
OP_USHR_INT_2ADDR
:

839 
shiáOp
 = 
Œue
;

840 
İ
 = 
kOpL¤
;

843 
	`ALOGE
("Invalid word‡rith op: %#x(%d)",

844 
mœ
->
d®vikIn¢
.
İcode
, mir->dalvikInsn.opcode);

845 
	`dvmComp”AbÜt
(
cUn™
);

847 ià(!
ÿÎOut
) {

848 
¾Src1
 = 
	`lßdV®ue
(
cUn™
,„lSrc1, 
kCÜeReg
);

849 ià(
uÇry
) {

850 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

851 
	`İRegReg
(
cUn™
, 
İ
, 
¾ResuÉ
.
lowReg
,

852 
¾Src1
.
lowReg
);

854 
¾Src2
 = 
	`lßdV®ue
(
cUn™
,„lSrc2, 
kCÜeReg
);

855 ià(
shiáOp
) {

856 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

857 
	`İRegRegImm
(
cUn™
, 
kOpAnd
, 
tReg
, 
¾Src2
.
lowReg
, 31);

858 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

859 
	`İRegRegReg
(
cUn™
, 
İ
, 
¾ResuÉ
.
lowReg
,

860 
¾Src1
.
lowReg
, 
tReg
);

861 
	`dvmComp”F»eTemp
(
cUn™
, 
tReg
);

863 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

864 
	`İRegRegReg
(
cUn™
, 
İ
, 
¾ResuÉ
.
lowReg
,

865 
¾Src1
.
lowReg
, 
¾Src2
.lowReg);

868 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

870 
RegLoÿtiÚ
 
¾ResuÉ
;

871 
	`dvmComp”FlushAÎRegs
(
cUn™
);

872 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src2
, 
r1
);

873 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, (è
ÿÎTgt
);

874 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src1
, 
r0
);

875 ià(
checkZ”o
) {

876 
	`g’NuÎCheck
(
cUn™
, 
¾Src2
.
sRegLow
, 
r1
, 
mœ
->
off£t
, 
NULL
);

878 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

879 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

880 ià(
»tReg
 =ğ
r0
)

881 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

883 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºAÉ
(
cUn™
);

884 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

886  
çl£
;

887 
	}
}

889 
boŞ
 
	$g’Ar™hOp
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

891 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

892 
RegLoÿtiÚ
 
¾De¡
;

893 
RegLoÿtiÚ
 
¾Src1
;

894 
RegLoÿtiÚ
 
¾Src2
;

896 ià(
mœ
->
s§R•
->
numU£s
 == 2) {

897 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

898 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

899 } ià(
mœ
->
s§R•
->
numU£s
 == 3) {

900 
¾Src1
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

901 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 2);

903 
¾Src1
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

904 
¾Src2
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 2, 3);

905 
	`as£¹
(
mœ
->
s§R•
->
numU£s
 == 4);

907 ià(
mœ
->
s§R•
->
numDefs
 == 1) {

908 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

910 
	`as£¹
(
mœ
->
s§R•
->
numDefs
 == 2);

911 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

914 ià((
İcode
 >ğ
OP_ADD_LONG_2ADDR
è&& (İcod<ğ
OP_XOR_LONG_2ADDR
)) {

915  
	`g’Ar™hOpLÚg
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

917 ià((
İcode
 >ğ
OP_ADD_LONG
è&& (İcod<ğ
OP_XOR_LONG
)) {

918  
	`g’Ar™hOpLÚg
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

920 ià((
İcode
 >ğ
OP_SHL_LONG_2ADDR
è&& (İcod<ğ
OP_USHR_LONG_2ADDR
)) {

921  
	`g’ShiáOpLÚg
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

923 ià((
İcode
 >ğ
OP_SHL_LONG
è&& (İcod<ğ
OP_USHR_LONG
)) {

924  
	`g’ShiáOpLÚg
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

926 ià((
İcode
 >ğ
OP_ADD_INT_2ADDR
è&& (İcod<ğ
OP_USHR_INT_2ADDR
)) {

927  
	`g’Ar™hOpIÁ
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

929 ià((
İcode
 >ğ
OP_ADD_INT
è&& (İcod<ğ
OP_USHR_INT
)) {

930  
	`g’Ar™hOpIÁ
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

932 ià((
İcode
 >ğ
OP_ADD_FLOAT_2ADDR
è&& (İcod<ğ
OP_REM_FLOAT_2ADDR
)) {

933  
	`g’Ar™hOpFlßt
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

935 ià((
İcode
 >ğ
OP_ADD_FLOAT
è&& (İcod<ğ
OP_REM_FLOAT
)) {

936  
	`g’Ar™hOpFlßt
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

938 ià((
İcode
 >ğ
OP_ADD_DOUBLE_2ADDR
è&& (İcod<ğ
OP_REM_DOUBLE_2ADDR
)) {

939  
	`g’Ar™hOpDoubË
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

941 ià((
İcode
 >ğ
OP_ADD_DOUBLE
è&& (İcod<ğ
OP_REM_DOUBLE
)) {

942  
	`g’Ar™hOpDoubË
(
cUn™
,
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

944  
Œue
;

945 
	}
}

948 
ArmLIR
 *
	$g’UncÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
, 
ArmLIR
 *
rg‘
)

950 
ArmLIR
 *
b¿nch
 = 
	`İNÚe
(
cUn™
, 
kOpUncÚdBr
);

951 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

952  
b¿nch
;

953 
	}
}

956 
	$g’R‘uºCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

958 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

959 
TEMPLATE_RETURN_PROF
 : 
TEMPLATE_RETURN
);

960 #ià
	`defšed
(
WITH_JIT_TUNING
)

961 
gDvmJ™
.
»tuºOp
++;

963 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

965 
ArmLIR
 *
b¿nch
 = 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
NULL
);

967 
ArmLIR
 *
püLab–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

968 
püLab–
->
İcode
 = 
kArmP£udoPCRecÚ¡ruùiÚC–l
;

969 
püLab–
->
İ”ªds
[0] = 
dPC
;

970 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

972 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, (
šŒ_t
è
püLab–
);

974 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *è
püLab–
;

975 
	}
}

977 
	$g’ProûssArgsNoRªge
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

978 
DecodedIn¡ruùiÚ
 *
dIn¢
,

979 
ArmLIR
 **
püLab–
)

981 
i
;

982 
»gMask
 = 0;

983 
RegLoÿtiÚ
 
¾Arg
;

984 
numDÚe
 = 0;

991 
	`dvmComp”LockAÎTemps
(
cUn™
);

992 
i
 = 0; i < 
dIn¢
->
vA
; i++) {

993 
»gMask
 |ğ1 << 
i
;

994 
¾Arg
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 
numDÚe
++);

995 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Arg
, 
i
);

997 ià(
»gMask
) {

999 
	`İRegRegImm
(
cUn™
, 
kOpSub
, 
r7
, 
r5FP
,

1000 (
SckSaveA»a
è+ (
dIn¢
->
vA
 << 2));

1002 ià(
püLab–
) {

1003 *
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
	`dvmComp”SSASrc
(
mœ
, 0), 
r0
,

1004 
mœ
->
off£t
, 
NULL
);

1006 
	`¡ÜeMuÉË
(
cUn™
, 
r7
, 
»gMask
);

1008 
	}
}

1010 
	$g’ProûssArgsRªge
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1011 
DecodedIn¡ruùiÚ
 *
dIn¢
,

1012 
ArmLIR
 **
püLab–
)

1014 
¤cOff£t
 = 
dIn¢
->
vC
 << 2;

1015 
numArgs
 = 
dIn¢
->
vA
;

1016 
»gMask
;

1025 
	`dvmComp”LockAÎTemps
(
cUn™
);

1031 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r4PC
, 
r5FP
, 
¤cOff£t
);

1033 
»gMask
 = (1 << ((
numArgs
 < 4) ?‚umArgs : 4)) - 1;

1038 ià(
numArgs
 !ğ0è
	`lßdMuÉË
(
cUn™
, 
r4PC
, 
»gMask
);

1040 
	`İRegRegImm
(
cUn™
, 
kOpSub
, 
r7
, 
r5FP
,

1041 (
SckSaveA»a
è+ (
numArgs
 << 2));

1043 ià(
püLab–
) {

1044 *
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
	`dvmComp”SSASrc
(
mœ
, 0), 
r0
,

1045 
mœ
->
off£t
, 
NULL
);

1052 ià(
numArgs
 >= 8) {

1053 
ArmLIR
 *
loİLab–
 = 
NULL
;

1058 
	`İImm
(
cUn™
, 
kOpPush
, (1 << 
r0
 | 1 << 
r5FP
));

1060 ià(
numArgs
 > 11) {

1061 
	`lßdCÚ¡ªt
(
cUn™
, 5, ((
numArgs
 - 4) >> 2) << 2);

1062 
loİLab–
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

1063 
loİLab–
->
defMask
 = 
ENCODE_ALL
;

1065 
	`¡ÜeMuÉË
(
cUn™
, 
r7
, 
»gMask
);

1070 
	`lßdMuÉË
(
cUn™
, 
r4PC
, 
»gMask
);

1072 ià(
numArgs
 > 11) {

1073 
	`İRegImm
(
cUn™
, 
kOpSub
, 
r5FP
, 4);

1074 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
kArmCÚdNe
, 
loİLab–
);

1079 ià(
numArgs
 !ğ0è
	`¡ÜeMuÉË
(
cUn™
, 
r7
, 
»gMask
);

1082 ià((
numArgs
 > 4) && (numArgs % 4)) {

1083 
»gMask
 = ((1 << (
numArgs
 & 0x3)) - 1) << 1;

1088 
	`lßdMuÉË
(
cUn™
, 
r4PC
, 
»gMask
);

1090 ià(
numArgs
 >= 8)

1091 
	`İImm
(
cUn™
, 
kOpPİ
, (1 << 
r0
 | 1 << 
r5FP
));

1094 ià((
numArgs
 > 4) && (numArgs % 4)) {

1095 
	`¡ÜeMuÉË
(
cUn™
, 
r7
, 
»gMask
);

1097 
	}
}

1103 
	$g’InvokeSšgËtÚCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1104 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
,

1105 
ArmLIR
 *
püLab–
,

1106 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
)

1113 
	`dvmComp”LockAÎTemps
(
cUn™
);

1114 
ArmLIR
 *
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

1117 
ArmLIR
 *
addrR‘Chaš
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r1
, 
r15pc
, 0);

1120 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

1121 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1122 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1125 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
, 
ÿÎ“M‘hod
->
»gi¡”sSize
);

1133 ià(
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)) {

1134 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

1135 
TEMPLATE_INVOKE_METHOD_NATIVE_PROF
 :

1136 
TEMPLATE_INVOKE_METHOD_NATIVE
);

1137 #ià
	`defšed
(
WITH_JIT_TUNING
)

1138 
gDvmJ™
.
švokeN©ive
++;

1142 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, 
ÿÎ“M‘hod
->
outsSize
);

1143 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

1144 
TEMPLATE_INVOKE_METHOD_CHAIN_PROF
 :

1145 
TEMPLATE_INVOKE_METHOD_CHAIN
);

1146 #ià
	`defšed
(
WITH_JIT_TUNING
)

1147 
gDvmJ™
.
švokeMÚomÜphic
++;

1150 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

1153 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

1154 
	}
}

1176 
	$g’InvokeVœtu®CommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1177 
m‘hodIndex
,

1178 
ArmLIR
 *
»tChaššgC–l
,

1179 
ArmLIR
 *
´edChaššgC–l
,

1180 
ArmLIR
 *
püLab–
)

1188 
	`dvmComp”LockAÎTemps
(
cUn™
);

1194 
´edChaššgC–l
->
İ”ªds
[1] = (è
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

1199 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

1200 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1203 
ArmLIR
 *
addrR‘Chaš
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r1
, 
r15pc
, 0);

1204 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1207 
ArmLIR
 *
´ediùedChaššgC–l
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r2
, 
r15pc
, 0);

1208 
´ediùedChaššgC–l
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

1210 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

1211 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN_PROF
 :

1212 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN
);

1215 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
´edChaššgC–l
);

1221 ià(
püLab–
 =ğ
NULL
) {

1222 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

1223 
püLab–
 = (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

1224 
püLab–
->
İcode
 = 
kArmP£udoPCRecÚ¡ruùiÚC–l
;

1225 
püLab–
->
İ”ªds
[0] = 
dPC
;

1226 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

1228 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
,

1229 (
šŒ_t
è
püLab–
);

1233 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
püLab–
);

1245 
	`lßdWÜdDi¥
(
cUn™
, 
r7
, 
m‘hodIndex
 * 4, 
r0
);

1248 
ArmLIR
 *
by·ssRechaššg
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdGt
, 
r1
, 0);

1250 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r7
, (è
dvmJ™ToP©chP»diùedChaš
);

1252 
	`g’RegCİy
(
cUn™
, 
r1
, 
r6SELF
);

1263 
	`İReg
(
cUn™
, 
kOpBlx
, 
r7
);

1266 
addrR‘Chaš
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r1
, 
r15pc
, 0);

1267 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1269 
by·ssRechaššg
->
g’”ic
.
rg‘
 = (
LIR
 *è
addrR‘Chaš
;

1275 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

1276 
TEMPLATE_INVOKE_METHOD_NO_OPT_PROF
 :

1277 
TEMPLATE_INVOKE_METHOD_NO_OPT
);

1278 #ià
	`defšed
(
WITH_JIT_TUNING
)

1279 
gDvmJ™
.
švokePŞymÜphic
++;

1282 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

1283 
	}
}

1286 
	$g’InvokeVœtu®WhŞeM‘hod
(
Comp©iÚUn™
 *
cUn™
,

1287 
MIR
 *
mœ
,

1288 *
ÿÎ“Addr
,

1289 
ArmLIR
 *
»tChaššgC–l
)

1291 
C®ls™eInfo
 *
ÿÎs™eInfo
 = 
mœ
->
m‘a
.callsiteInfo;

1292 
	`dvmComp”LockAÎTemps
(
cUn™
);

1294 
	`lßdCÏssPoš‹r
(
cUn™
, 
r1
, (è
ÿÎs™eInfo
);

1296 
	`lßdWÜdDi¥
(
cUn™
, 
r0
, 
	`off£tof
(
Objeù
, 
şazz
), 
r2
);

1298 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
r1
, 
r2
);

1303 
ArmLIR
 *
şassCheck
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdNe
);

1306 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1308 
	`ÃwLIR2
(
cUn™
, 
kThumbBl1
, (è
ÿÎ“Addr
, () calleeAddr);

1309 
	`ÃwLIR2
(
cUn™
, 
kThumbBl2
, (è
ÿÎ“Addr
, () calleeAddr);

1310 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
»tChaššgC–l
);

1313 
ArmLIR
 *
¦owP©hLab–
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

1315 
¦owP©hLab–
->
defMask
 = 
ENCODE_ALL
;

1316 
şassCheck
->
g’”ic
.
rg‘
 = (
LIR
 *è
¦owP©hLab–
;

1319 
cUn™
->
´štMe
 = 
Œue
;

1320 
	}
}

1322 
	$g’InvokeSšgËtÚWhŞeM‘hod
(
Comp©iÚUn™
 *
cUn™
,

1323 
MIR
 *
mœ
,

1324 *
ÿÎ“Addr
,

1325 
ArmLIR
 *
»tChaššgC–l
)

1328 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1330 
	`ÃwLIR2
(
cUn™
, 
kThumbBl1
, (è
ÿÎ“Addr
, () calleeAddr);

1331 
	`ÃwLIR2
(
cUn™
, 
kThumbBl2
, (è
ÿÎ“Addr
, () calleeAddr);

1332 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
»tChaššgC–l
);

1335 
cUn™
->
´štMe
 = 
Œue
;

1336 
	}
}

1339 
	$g’PuÁToIÁ”p
(
Comp©iÚUn™
 *
cUn™
, 
off£t
)

1342 
	`dvmComp”FlushAÎRegs
(
cUn™
);

1343 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

1344 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
,

1345 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pPuÁ
), 
r1
);

1346 
	`İReg
(
cUn™
, 
kOpBlx
, 
r1
);

1347 
	}
}

1353 
	$g’IÁ”pSšgËS‹p
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1355 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
mœ
->
d®vikIn¢
.
İcode
);

1356 
æagsToCheck
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 | 
kIn¡rCªR‘uº
;

1359 ià(
cUn™
->
j™Mode
 =ğ
kJ™Loİ
) {

1360 
cUn™
->
qu™LoİMode
 = 
Œue
;

1365 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_NOP
)

1369 
	`dvmComp”FlushAÎRegs
(
cUn™
);

1371 ià((
mœ
->
Ãxt
 =ğ
NULL
è|| (
æags
 & 
æagsToCheck
)) {

1372 
	`g’PuÁToIÁ”p
(
cUn™
, 
mœ
->
off£t
);

1375 
’ŒyAddr
 = 
	`off£tof
(
Th»ad
,

1376 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pSšgËS‹p
);

1377 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
’ŒyAddr
, 
r2
);

1379 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1381 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
Ãxt
->
off£t
));

1382 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

1383 
	}
}

1385 #ià
defšed
(
_ARMV5TE
è|| defšed(
_ARMV5TE_VFP
)

1397 
	$g’MÚ™ÜPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1399 
boŞ
 
isEÁ”
 = (
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_MONITOR_ENTER
);

1400 
	`g’ExpÜtPC
(
cUn™
, 
mœ
);

1401 
	`dvmComp”FlushAÎRegs
(
cUn™
);

1402 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

1403 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r1
);

1404 
	`g’RegCİy
(
cUn™
, 
r0
, 
r6SELF
);

1405 
	`g’NuÎCheck
(
cUn™
, 
¾Src
.
sRegLow
, 
r1
, 
mœ
->
off£t
, 
NULL
);

1406 ià(
isEÁ”
) {

1408 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 +

1409 
	`dexG‘WidthFromOpcode
(
OP_MONITOR_ENTER
)));

1410 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_MONITOR_ENTER
);

1412 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
dvmUÆockObjeù
);

1414 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

1416 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

1417 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

1418 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 +

1419 
	`dexG‘WidthFromOpcode
(
OP_MONITOR_EXIT
)));

1420 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

1421 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

1422 
rg‘
->
defMask
 = 
ENCODE_ALL
;

1423 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

1424 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

1426 
	}
}

1433 
	$g’Su¥’dPŞl
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1435 
rTemp
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1436 
ArmLIR
 *
ld
;

1437 
ld
 = 
	`lßdBa£Di¥
(
cUn™
, 
NULL
, 
r6SELF
,

1438 
	`off£tof
(
Th»ad
, 
š‹½B»ak
.
ùl
.
b»akFÏgs
),

1439 
rTemp
, 
kUnsigÃdBy‹
, 
INVALID_SREG
);

1440 
	`£tMemRefTy³
(
ld
, 
Œue
 , 
kMu¡NÙAlŸs
);

1441 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdNe
, 
rTemp
, 0, 
mœ
->
off£t
, 
NULL
);

1442 
	}
}

1450 
boŞ
 
	$hªdËFmt10t_Fmt20t_Fmt30t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1451 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

1454 
boŞ
 
backw¬dB¿nch
 = (
bb
->
k’
->
¡¬tOff£t
 <ğ
mœ
->
off£t
);

1456 ià(
backw¬dB¿nch
 &&

1457 (
gDvmJ™
.
g’Su¥’dPŞl
 || 
cUn™
->
j™Mode
 =ğ
kJ™Loİ
)) {

1458 
	`g’Su¥’dPŞl
(
cUn™
, 
mœ
);

1461 
numP»deûssÜs
 = 
	`dvmCouÁS‘B™s
(
bb
->
k’
->
´edeûssÜs
);

1466 ià(
numP»deûssÜs
 =ğ1 && 
bb
->
k’
->
vis™ed
 =ğ
çl£
 &&

1467 
bb
->
k’
->
blockTy³
 =ğ
kD®vikBy‹Code
) {

1468 
cUn™
->
ÃxtCodeg’Block
 = 
bb
->
k’
;

1471 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

1473  
çl£
;

1474 
	}
}

1476 
boŞ
 
	$hªdËFmt10x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1478 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

1479 ià((
d®vikOpcode
 >ğ
OP_UNUSED_3E
è&& (d®vikOpcod<ğ
OP_UNUSED_43
)) {

1480 
	`ALOGE
("Codeg’: gÙ unu£d opcod%#x",
d®vikOpcode
);

1481  
Œue
;

1483 
d®vikOpcode
) {

1484 
OP_RETURN_VOID_BARRIER
:

1485 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kST
);

1487 
OP_RETURN_VOID
:

1488 
	`g’R‘uºCommÚ
(
cUn™
,
mœ
);

1490 
OP_UNUSED_73
:

1491 
OP_UNUSED_79
:

1492 
OP_UNUSED_7A
:

1493 
OP_UNUSED_FF
:

1494 
	`ALOGE
("Codeg’: gÙ unu£d opcod%#x",
d®vikOpcode
);

1495  
Œue
;

1496 
OP_NOP
:

1499  
Œue
;

1501  
çl£
;

1502 
	}
}

1504 
boŞ
 
	$hªdËFmt11n_Fmt31i
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1506 
RegLoÿtiÚ
 
¾De¡
;

1507 
RegLoÿtiÚ
 
¾ResuÉ
;

1508 ià(
mœ
->
s§R•
->
numDefs
 == 2) {

1509 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

1511 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1514 
mœ
->
d®vikIn¢
.
İcode
) {

1515 
OP_CONST
:

1516 
OP_CONST_4
: {

1517 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

1518 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
mœ
->
d®vikIn¢
.
vB
);

1519 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1522 
OP_CONST_WIDE_32
: {

1525 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

1526 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
mœ
->
d®vikIn¢
.
vB
);

1527 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
¾ResuÉ
.
highReg
,

1528 
¾ResuÉ
.
lowReg
, 31);

1529 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1533  
Œue
;

1535  
çl£
;

1536 
	}
}

1538 
boŞ
 
	$hªdËFmt21h
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1540 
RegLoÿtiÚ
 
¾De¡
;

1541 
RegLoÿtiÚ
 
¾ResuÉ
;

1542 ià(
mœ
->
s§R•
->
numDefs
 == 2) {

1543 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

1545 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1547 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

1549 
mœ
->
d®vikIn¢
.
İcode
) {

1550 
OP_CONST_HIGH16
: {

1551 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
,

1552 
mœ
->
d®vikIn¢
.
vB
 << 16);

1553 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1556 
OP_CONST_WIDE_HIGH16
: {

1557 
	`lßdCÚ¡ªtV®ueWide
(
cUn™
, 
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
,

1558 0, 
mœ
->
d®vikIn¢
.
vB
 << 16);

1559 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1563  
Œue
;

1565  
çl£
;

1566 
	}
}

1568 
boŞ
 
	$hªdËFmt20bc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1571 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1572  
çl£
;

1573 
	}
}

1575 
boŞ
 
	$hªdËFmt21c_Fmt31c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1577 
RegLoÿtiÚ
 
¾ResuÉ
;

1578 
RegLoÿtiÚ
 
¾De¡
;

1579 
RegLoÿtiÚ
 
¾Src
;

1581 
mœ
->
d®vikIn¢
.
İcode
) {

1582 
OP_CONST_STRING_JUMBO
:

1583 
OP_CONST_STRING
: {

1584 *
¡rPŒ
 = (*)

1585 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResSŒšgs
[
mœ
->
d®vikIn¢
.
vB
]);

1587 ià(
¡rPŒ
 =ğ
NULL
) {

1588 
	`BAIL_LOOP_COMPILATION
();

1589 
	`ALOGE
("Unexpected‚ull string");

1590 
	`dvmAbÜt
();

1593 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1594 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

1595 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, (è
¡rPŒ
 );

1596 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1599 
OP_CONST_CLASS
: {

1600 *
şassPŒ
 = (*)

1601 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1603 ià(
şassPŒ
 =ğ
NULL
) {

1604 
	`BAIL_LOOP_COMPILATION
();

1605 
	`ALOGE
("Unexpected‚ull class");

1606 
	`dvmAbÜt
();

1609 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1610 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

1611 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, (è
şassPŒ
 );

1612 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1615 
OP_SGET
:

1616 
OP_SGET_VOLATILE
:

1617 
OP_SGET_OBJECT
:

1618 
OP_SGET_OBJECT_VOLATILE
:

1619 
OP_SGET_BOOLEAN
:

1620 
OP_SGET_CHAR
:

1621 
OP_SGET_BYTE
:

1622 
OP_SGET_SHORT
: {

1623 
v®Off£t
 = 
	`OFFSETOF_MEMBER
(
SticF›ld
, 
v®ue
);

1624 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1625 
boŞ
 
isVŞ©e
;

1626 cÚ¡ 
M‘hod
 *
m‘hod
 = (
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) ?

1627 
mœ
->
m‘a
.
ÿÎ“M‘hod
 : 
cUn™
->
m‘hod
;

1628 *
f›ldPŒ
 = (*)

1629 (
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1631 ià(
f›ldPŒ
 =ğ
NULL
) {

1632 
	`BAIL_LOOP_COMPILATION
();

1633 
	`ALOGE
("Unexpected‚ull static field");

1634 
	`dvmAbÜt
();

1645 #ià
ANDROID_SMP
 != 0

1646 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

1647 
isVŞ©e
 = (
İcode
 =ğ
OP_SGET_VOLATILE
) ||

1648 (
İcode
 =ğ
OP_SGET_OBJECT_VOLATILE
);

1649 
	`as£¹
(
isVŞ©e
 =ğ
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
));

1651 
isVŞ©e
 = 
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
);

1654 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1655 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

1656 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, (è
f›ldPŒ
 + 
v®Off£t
);

1658 ià(
isVŞ©e
) {

1659 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

1661 
	`HEAP_ACCESS_SHADOW
(
Œue
);

1662 
	`lßdWÜdDi¥
(
cUn™
, 
tReg
, 0, 
¾ResuÉ
.
lowReg
);

1663 
	`HEAP_ACCESS_SHADOW
(
çl£
);

1665 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1668 
OP_SGET_WIDE
: {

1669 
v®Off£t
 = 
	`OFFSETOF_MEMBER
(
SticF›ld
, 
v®ue
);

1670 cÚ¡ 
M‘hod
 *
m‘hod
 = (
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) ?

1671 
mœ
->
m‘a
.
ÿÎ“M‘hod
 : 
cUn™
->
m‘hod
;

1672 *
f›ldPŒ
 = (*)

1673 (
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1675 ià(
f›ldPŒ
 =ğ
NULL
) {

1676 
	`BAIL_LOOP_COMPILATION
();

1677 
	`ALOGE
("Unexpected‚ull static field");

1678 
	`dvmAbÜt
();

1681 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1682 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

1683 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

1684 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, (è
f›ldPŒ
 + 
v®Off£t
);

1686 
	`HEAP_ACCESS_SHADOW
(
Œue
);

1687 
	`lßdPaœ
(
cUn™
, 
tReg
, 
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
);

1688 
	`HEAP_ACCESS_SHADOW
(
çl£
);

1690 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1693 
OP_SPUT
:

1694 
OP_SPUT_VOLATILE
:

1695 
OP_SPUT_OBJECT
:

1696 
OP_SPUT_OBJECT_VOLATILE
:

1697 
OP_SPUT_BOOLEAN
:

1698 
OP_SPUT_CHAR
:

1699 
OP_SPUT_BYTE
:

1700 
OP_SPUT_SHORT
: {

1701 
v®Off£t
 = 
	`OFFSETOF_MEMBER
(
SticF›ld
, 
v®ue
);

1702 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1703 
objH—d
;

1704 
boŞ
 
isVŞ©e
;

1705 
boŞ
 
isSputObjeù
;

1706 cÚ¡ 
M‘hod
 *
m‘hod
 = (
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) ?

1707 
mœ
->
m‘a
.
ÿÎ“M‘hod
 : 
cUn™
->
m‘hod
;

1708 *
f›ldPŒ
 = (*)

1709 (
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1710 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

1712 ià(
f›ldPŒ
 =ğ
NULL
) {

1713 
	`BAIL_LOOP_COMPILATION
();

1714 
	`ALOGE
("Unexpected‚ull static field");

1715 
	`dvmAbÜt
();

1718 #ià
ANDROID_SMP
 != 0

1719 
isVŞ©e
 = (
İcode
 =ğ
OP_SPUT_VOLATILE
) ||

1720 (
İcode
 =ğ
OP_SPUT_OBJECT_VOLATILE
);

1721 
	`as£¹
(
isVŞ©e
 =ğ
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
));

1723 
isVŞ©e
 = 
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
);

1726 
isSputObjeù
 = (
İcode
 =ğ
OP_SPUT_OBJECT
) ||

1727 (
İcode
 =ğ
OP_SPUT_OBJECT_VOLATILE
);

1729 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

1730 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kAnyReg
);

1731 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, (è
f›ldPŒ
);

1732 ià(
isSputObjeù
) {

1733 
objH—d
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1734 
	`lßdWÜdDi¥
(
cUn™
, 
tReg
, 
	`OFFSETOF_MEMBER
(
F›ld
, 
şazz
), 
objH—d
);

1736 ià(
isVŞ©e
) {

1737 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kST
);

1739 
	`HEAP_ACCESS_SHADOW
(
Œue
);

1740 
	`¡ÜeWÜdDi¥
(
cUn™
, 
tReg
, 
v®Off£t
 ,
¾Src
.
lowReg
);

1741 
	`dvmComp”F»eTemp
(
cUn™
, 
tReg
);

1742 
	`HEAP_ACCESS_SHADOW
(
çl£
);

1743 ià(
isVŞ©e
) {

1744 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

1746 ià(
isSputObjeù
) {

1748 
	`m¬kC¬d
(
cUn™
, 
¾Src
.
lowReg
, 
objH—d
);

1749 
	`dvmComp”F»eTemp
(
cUn™
, 
objH—d
);

1754 
OP_SPUT_WIDE
: {

1755 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1756 
v®Off£t
 = 
	`OFFSETOF_MEMBER
(
SticF›ld
, 
v®ue
);

1757 cÚ¡ 
M‘hod
 *
m‘hod
 = (
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) ?

1758 
mœ
->
m‘a
.
ÿÎ“M‘hod
 : 
cUn™
->
m‘hod
;

1759 *
f›ldPŒ
 = (*)

1760 (
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1762 ià(
f›ldPŒ
 =ğ
NULL
) {

1763 
	`BAIL_LOOP_COMPILATION
();

1764 
	`ALOGE
("Unexpected‚ull static field");

1765 
	`dvmAbÜt
();

1768 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

1769 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kAnyReg
);

1770 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, (è
f›ldPŒ
 + 
v®Off£t
);

1772 
	`HEAP_ACCESS_SHADOW
(
Œue
);

1773 
	`¡ÜePaœ
(
cUn™
, 
tReg
, 
¾Src
.
lowReg
,„lSrc.
highReg
);

1774 
	`HEAP_ACCESS_SHADOW
(
çl£
);

1777 
OP_NEW_INSTANCE
: {

1782 
CÏssObjeù
 *
şassPŒ
 = (ClassObject *)

1783 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1785 ià(
şassPŒ
 =ğ
NULL
) {

1786 
	`BAIL_LOOP_COMPILATION
();

1787 
	`ALOGE
("Unexpected‚ull class");

1788 
	`dvmAbÜt
();

1795 
	`as£¹
((
şassPŒ
->
acûssFÏgs
 & (
ACC_INTERFACE
|
ACC_ABSTRACT
)) == 0);

1796 
	`dvmComp”FlushAÎRegs
(
cUn™
);

1797 
	`g’ExpÜtPC
(
cUn™
, 
mœ
);

1798 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
dvmAÎocObjeù
);

1799 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
şassPŒ
);

1800 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
ALLOC_DONT_TRACK
);

1801 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

1802 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

1804 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

1808 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

1809 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1810 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

1813 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

1814 
rg‘
->
defMask
 = 
ENCODE_ALL
;

1815 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

1816 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1817 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

1818 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1821 
OP_CHECK_CAST
: {

1826 
CÏssObjeù
 *
şassPŒ
 =

1827 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1836 ià(
şassPŒ
 =ğ
NULL
) {

1837 
	`BAIL_LOOP_COMPILATION
();

1838 
	`LOGVV
("null clazz in OP_CHECK_CAST, single-stepping");

1839 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1840  
çl£
;

1842 
	`dvmComp”FlushAÎRegs
(
cUn™
);

1843 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (è
şassPŒ
 );

1844 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

1845 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

1847 
ArmLIR
 *
b¿nch1
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdEq
,

1848 
¾Src
.
lowReg
, 0);

1856 
	`lßdWÜdDi¥
(
cUn™
, 
¾Src
.
lowReg
, 
	`off£tof
(
Objeù
, 
şazz
), 
r0
);

1857 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
dvmIn¡ªûofNÚTrivŸl
);

1858 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
r0
, 
r1
);

1859 
ArmLIR
 *
b¿nch2
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdEq
);

1860 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

1861 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

1867 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
NULL
);

1869 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

1870 
rg‘
->
defMask
 = 
ENCODE_ALL
;

1871 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

1872 
b¿nch2
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

1875 
OP_SGET_WIDE_VOLATILE
:

1876 
OP_SPUT_WIDE_VOLATILE
:

1877 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1880  
Œue
;

1882  
çl£
;

1883 
	}
}

1900 
boŞ
 
	$hªdËFmt11x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1902 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

1903 
RegLoÿtiÚ
 
¾ResuÉ
;

1904 
d®vikOpcode
) {

1905 
OP_MOVE_EXCEPTION
: {

1906 
exOff£t
 = 
	`off£tof
(
Th»ad
, 
exû±iÚ
);

1907 
»£tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1908 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1909 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

1910 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
exOff£t
, 
¾ResuÉ
.
lowReg
);

1911 
	`lßdCÚ¡ªt
(
cUn™
, 
»£tReg
, 0);

1912 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
exOff£t
, 
»£tReg
);

1913 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

1916 
OP_MOVE_RESULT
:

1917 
OP_MOVE_RESULT_OBJECT
: {

1919 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED
)

1921 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1922 
RegLoÿtiÚ
 
¾Src
 = 
LOC_DALVIK_RETURN_VAL
;

1923 
¾Src
.
å
 = 
¾De¡
.fp;

1924 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾Src
);

1927 
OP_MOVE_RESULT_WIDE
: {

1929 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED
)

1931 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

1932 
RegLoÿtiÚ
 
¾Src
 = 
LOC_DALVIK_RETURN_VAL_WIDE
;

1933 
¾Src
.
å
 = 
¾De¡
.fp;

1934 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾Src
);

1937 
OP_RETURN_WIDE
: {

1938 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

1939 
RegLoÿtiÚ
 
¾De¡
 = 
LOC_DALVIK_RETURN_VAL_WIDE
;

1940 
¾De¡
.
å
 = 
¾Src
.fp;

1941 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾Src
);

1942 
	`g’R‘uºCommÚ
(
cUn™
,
mœ
);

1945 
OP_RETURN
:

1946 
OP_RETURN_OBJECT
: {

1947 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

1948 
RegLoÿtiÚ
 
¾De¡
 = 
LOC_DALVIK_RETURN_VAL
;

1949 
¾De¡
.
å
 = 
¾Src
.fp;

1950 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾Src
);

1951 
	`g’R‘uºCommÚ
(
cUn™
, 
mœ
);

1954 
OP_MONITOR_EXIT
:

1955 
OP_MONITOR_ENTER
:

1956 
	`g’MÚ™Ü
(
cUn™
, 
mœ
);

1958 
OP_THROW
:

1959 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1962  
Œue
;

1964  
çl£
;

1965 
	}
}

1967 
boŞ
 
	$hªdËFmt12x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1969 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

1970 
RegLoÿtiÚ
 
¾De¡
;

1971 
RegLoÿtiÚ
 
¾Src
;

1972 
RegLoÿtiÚ
 
¾ResuÉ
;

1974 iàĞ(
İcode
 >ğ
OP_ADD_INT_2ADDR
è&& (İcod<ğ
OP_REM_DOUBLE_2ADDR
)) {

1975  
	`g’Ar™hOp
Ğ
cUn™
, 
mœ
 );

1978 ià(
mœ
->
s§R•
->
numU£s
 == 2)

1979 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

1981 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

1982 ià(
mœ
->
s§R•
->
numDefs
 == 2)

1983 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

1985 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

1987 
İcode
) {

1988 
OP_DOUBLE_TO_INT
:

1989 
OP_INT_TO_FLOAT
:

1990 
OP_FLOAT_TO_INT
:

1991 
OP_DOUBLE_TO_FLOAT
:

1992 
OP_FLOAT_TO_DOUBLE
:

1993 
OP_INT_TO_DOUBLE
:

1994 
OP_FLOAT_TO_LONG
:

1995 
OP_LONG_TO_FLOAT
:

1996 
OP_DOUBLE_TO_LONG
:

1997 
OP_LONG_TO_DOUBLE
:

1998  
	`g’CÚv”siÚ
(
cUn™
, 
mœ
);

1999 
OP_NEG_INT
:

2000 
OP_NOT_INT
:

2001  
	`g’Ar™hOpIÁ
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src
,„lSrc);

2002 
OP_NEG_LONG
:

2003 
OP_NOT_LONG
:

2004  
	`g’Ar™hOpLÚg
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src
,„lSrc);

2005 
OP_NEG_FLOAT
:

2006  
	`g’Ar™hOpFlßt
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src
,„lSrc);

2007 
OP_NEG_DOUBLE
:

2008  
	`g’Ar™hOpDoubË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src
,„lSrc);

2009 
OP_MOVE_WIDE
:

2010 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾Src
);

2012 
OP_INT_TO_LONG
:

2013 
¾Src
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lSrc);

2014 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2016 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

2017 
	`g’RegCİy
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

2019 
	`lßdV®ueDœeù
(
cUn™
, 
¾Src
, 
¾ResuÉ
.
lowReg
);

2021 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
¾ResuÉ
.
highReg
,

2022 
¾ResuÉ
.
lowReg
, 31);

2023 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2025 
OP_LONG_TO_INT
:

2026 
¾Src
 = 
	`dvmComp”Upd©eLocWide
(
cUn™
,„lSrc);

2027 
¾Src
 = 
	`dvmComp”WideToN¬row
(
cUn™
,„lSrc);

2029 
OP_MOVE
:

2030 
OP_MOVE_OBJECT
:

2031 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾Src
);

2033 
OP_INT_TO_BYTE
:

2034 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2035 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2036 
	`İRegReg
(
cUn™
, 
kOp2By‹
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

2037 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2039 
OP_INT_TO_SHORT
:

2040 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2041 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2042 
	`İRegReg
(
cUn™
, 
kOp2ShÜt
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

2043 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2045 
OP_INT_TO_CHAR
:

2046 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2047 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2048 
	`İRegReg
(
cUn™
, 
kOp2Ch¬
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

2049 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2051 
OP_ARRAY_LENGTH
: {

2052 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

2053 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2054 
	`g’NuÎCheck
(
cUn™
, 
¾Src
.
sRegLow
,„lSrc.
lowReg
,

2055 
mœ
->
off£t
, 
NULL
);

2056 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2057 
	`lßdWÜdDi¥
(
cUn™
, 
¾Src
.
lowReg
, 
ËnOff£t
,

2058 
¾ResuÉ
.
lowReg
);

2059 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2063  
Œue
;

2065  
çl£
;

2066 
	}
}

2068 
boŞ
 
	$hªdËFmt21s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2070 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2071 
RegLoÿtiÚ
 
¾De¡
;

2072 
RegLoÿtiÚ
 
¾ResuÉ
;

2073 
BBBB
 = 
mœ
->
d®vikIn¢
.
vB
;

2074 ià(
d®vikOpcode
 =ğ
OP_CONST_WIDE_16
) {

2075 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

2076 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2077 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
BBBB
);

2079 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
¾ResuÉ
.
highReg
,„lResuÉ.
lowReg
, 31);

2080 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2081 } ià(
d®vikOpcode
 =ğ
OP_CONST_16
) {

2082 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

2083 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kAnyReg
, 
Œue
);

2084 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
BBBB
);

2085 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2087  
Œue
;

2088  
çl£
;

2089 
	}
}

2092 
boŞ
 
	$hªdËFmt21t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

2093 
ArmLIR
 *
Ïb–Li¡
)

2095 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2096 
ArmCÚd™iÚCode
 
cÚd
;

2098 
boŞ
 
backw¬dB¿nch
 = (
bb
->
k’
->
¡¬tOff£t
 <ğ
mœ
->
off£t
);

2100 ià(
backw¬dB¿nch
 &&

2101 (
gDvmJ™
.
g’Su¥’dPŞl
 || 
cUn™
->
j™Mode
 =ğ
kJ™Loİ
)) {

2102 
	`g’Su¥’dPŞl
(
cUn™
, 
mœ
);

2105 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2106 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2108 
	`İRegImm
(
cUn™
, 
kOpCmp
, 
¾Src
.
lowReg
, 0);

2111 
d®vikOpcode
) {

2112 
OP_IF_EQZ
:

2113 
cÚd
 = 
kArmCÚdEq
;

2115 
OP_IF_NEZ
:

2116 
cÚd
 = 
kArmCÚdNe
;

2118 
OP_IF_LTZ
:

2119 
cÚd
 = 
kArmCÚdLt
;

2121 
OP_IF_GEZ
:

2122 
cÚd
 = 
kArmCÚdGe
;

2124 
OP_IF_GTZ
:

2125 
cÚd
 = 
kArmCÚdGt
;

2127 
OP_IF_LEZ
:

2128 
cÚd
 = 
kArmCÚdLe
;

2131 
cÚd
 = (
ArmCÚd™iÚCode
)0;

2132 
	`ALOGE
("UÃx³ùed opcod(%dèfÜ Fmt21t", 
d®vikOpcode
);

2133 
	`dvmComp”AbÜt
(
cUn™
);

2135 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
cÚd
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

2137 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

2138  
çl£
;

2139 
	}
}

2141 
boŞ
 
	$isPow”OfTwo
(
x
)

2143  (
x
 & (x - 1)) == 0;

2144 
	}
}

2147 
boŞ
 
	$isPİCouÁLE2
(
x
)

2149 
x
 &= x - 1;

2150  (
x
 & (x - 1)) == 0;

2151 
	}
}

2154 
	$lowe¡S‘B™
(
x
) {

2155 
b™_po¢
 = 0;

2156 (
x
 & 0xf) == 0) {

2157 
b™_po¢
 += 4;

2158 
x
 >>= 4;

2160 (
x
 & 1) == 0) {

2161 
b™_po¢
++;

2162 
x
 >>= 1;

2164  
b™_po¢
;

2165 
	}
}

2169 
boŞ
 
	$hªdËEasyDivide
(
Comp©iÚUn™
 *
cUn™
, 
Opcode
 
d®vikOpcode
,

2170 
RegLoÿtiÚ
 
¾Src
, RegLoÿtiÚ 
¾De¡
, 
l™
)

2172 ià(
l™
 < 2 || !
	`isPow”OfTwo
(lit)) {

2173  
çl£
;

2175 
k
 = 
	`lowe¡S‘B™
(
l™
);

2176 ià(
k
 >= 30) {

2178  
çl£
;

2180 
boŞ
 
div
 = (
d®vikOpcode
 =ğ
OP_DIV_INT_LIT8
 || d®vikOpcod=ğ
OP_DIV_INT_LIT16
);

2181 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2182 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2183 ià(
div
) {

2184 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2185 ià(
l™
 == 2) {

2187 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
tReg
, 
¾Src
.
lowReg
, 32 - 
k
);

2188 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
tReg
,Reg, 
¾Src
.
lowReg
);

2189 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
¾ResuÉ
.
lowReg
, 
tReg
, 
k
);

2191 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
tReg
, 
¾Src
.
lowReg
, 31);

2192 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
tReg
,Reg, 32 - 
k
);

2193 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
tReg
,Reg, 
¾Src
.
lowReg
);

2194 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
¾ResuÉ
.
lowReg
, 
tReg
, 
k
);

2197 
cReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2198 
	`lßdCÚ¡ªt
(
cUn™
, 
cReg
, 
l™
 - 1);

2199 
tReg1
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2200 
tReg2
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2201 ià(
l™
 == 2) {

2202 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
tReg1
, 
¾Src
.
lowReg
, 32 - 
k
);

2203 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
tReg2
, 
tReg1
, 
¾Src
.
lowReg
);

2204 
	`İRegRegReg
(
cUn™
, 
kOpAnd
, 
tReg2
,Reg2, 
cReg
);

2205 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾ResuÉ
.
lowReg
, 
tReg2
, 
tReg1
);

2207 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
tReg1
, 
¾Src
.
lowReg
, 31);

2208 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
tReg1
,Reg1, 32 - 
k
);

2209 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
tReg2
, 
tReg1
, 
¾Src
.
lowReg
);

2210 
	`İRegRegReg
(
cUn™
, 
kOpAnd
, 
tReg2
,Reg2, 
cReg
);

2211 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾ResuÉ
.
lowReg
, 
tReg2
, 
tReg1
);

2214 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2215  
Œue
;

2216 
	}
}

2220 
boŞ
 
	$hªdËEasyMuÉly
(
Comp©iÚUn™
 *
cUn™
,

2221 
RegLoÿtiÚ
 
¾Src
, RegLoÿtiÚ 
¾De¡
, 
l™
)

2224 
boŞ
 
pow”OfTwo
 = 
çl£
;

2225 
boŞ
 
pİCouÁLE2
 = 
çl£
;

2226 
boŞ
 
pow”OfTwoMšusOÃ
 = 
çl£
;

2227 ià(
l™
 < 2) {

2229  
çl£
;

2230 } ià(
	`isPow”OfTwo
(
l™
)) {

2231 
pow”OfTwo
 = 
Œue
;

2232 } ià(
	`isPİCouÁLE2
(
l™
)) {

2233 
pİCouÁLE2
 = 
Œue
;

2234 } ià(
	`isPow”OfTwo
(
l™
 + 1)) {

2235 
pow”OfTwoMšusOÃ
 = 
Œue
;

2237  
çl£
;

2239 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2240 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2241 ià(
pow”OfTwo
) {

2243 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg,

2244 
	`lowe¡S‘B™
(
l™
));

2245 } ià(
pİCouÁLE2
) {

2247 
fœ¡B™
 = 
	`lowe¡S‘B™
(
l™
);

2248 
£cÚdB™
 = 
	`lowe¡S‘B™
(
l™
 ^ (1 << 
fœ¡B™
));

2249 
	`g’MuÉlyByTwoB™MuÉl›r
(
cUn™
, 
¾Src
, 
¾ResuÉ
, 
l™
,

2250 
fœ¡B™
, 
£cÚdB™
);

2253 
	`as£¹
(
pow”OfTwoMšusOÃ
);

2255 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2256 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
tReg
, 
¾Src
.
lowReg
, 
	`lowe¡S‘B™
(
l™
 + 1));

2257 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾ResuÉ
.
lowReg
, 
tReg
, 
¾Src
.lowReg);

2259 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2260  
Œue
;

2261 
	}
}

2263 
boŞ
 
	$hªdËFmt22b_Fmt22s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2265 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2266 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2267 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

2268 
RegLoÿtiÚ
 
¾ResuÉ
;

2269 
l™
 = 
mœ
->
d®vikIn¢
.
vC
;

2270 
OpKšd
 
İ
 = (OpKind)0;

2271 
shiáOp
 = 
çl£
;

2272 
boŞ
 
isDiv
 = 
çl£
;

2274 
d®vikOpcode
) {

2275 
OP_RSUB_INT_LIT8
:

2276 
OP_RSUB_INT
: {

2277 
tReg
;

2279 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2280 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

2281 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, 
l™
);

2282 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2283 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾ResuÉ
.
lowReg
,

2284 
tReg
, 
¾Src
.
lowReg
);

2285 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2286  
çl£
;

2290 
OP_ADD_INT_LIT8
:

2291 
OP_ADD_INT_LIT16
:

2292 
İ
 = 
kOpAdd
;

2294 
OP_MUL_INT_LIT8
:

2295 
OP_MUL_INT_LIT16
: {

2296 ià(
	`hªdËEasyMuÉly
(
cUn™
, 
¾Src
, 
¾De¡
, 
l™
)) {

2297  
çl£
;

2299 
İ
 = 
kOpMul
;

2302 
OP_AND_INT_LIT8
:

2303 
OP_AND_INT_LIT16
:

2304 
İ
 = 
kOpAnd
;

2306 
OP_OR_INT_LIT8
:

2307 
OP_OR_INT_LIT16
:

2308 
İ
 = 
kOpOr
;

2310 
OP_XOR_INT_LIT8
:

2311 
OP_XOR_INT_LIT16
:

2312 
İ
 = 
kOpXÜ
;

2314 
OP_SHL_INT_LIT8
:

2315 
l™
 &= 31;

2316 
shiáOp
 = 
Œue
;

2317 
İ
 = 
kOpL¦
;

2319 
OP_SHR_INT_LIT8
:

2320 
l™
 &= 31;

2321 
shiáOp
 = 
Œue
;

2322 
İ
 = 
kOpA¤
;

2324 
OP_USHR_INT_LIT8
:

2325 
l™
 &= 31;

2326 
shiáOp
 = 
Œue
;

2327 
İ
 = 
kOpL¤
;

2330 
OP_DIV_INT_LIT8
:

2331 
OP_DIV_INT_LIT16
:

2332 
OP_REM_INT_LIT8
:

2333 
OP_REM_INT_LIT16
:

2334 ià(
l™
 == 0) {

2336 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2337  
çl£
;

2339 ià(
	`hªdËEasyDivide
(
cUn™
, 
d®vikOpcode
, 
¾Src
, 
¾De¡
, 
l™
)) {

2340  
çl£
;

2342 
	`dvmComp”FlushAÎRegs
(
cUn™
);

2343 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

2344 
	`dvmComp”Clobb”
(
cUn™
, 
r0
);

2345 ià((
d®vikOpcode
 =ğ
OP_DIV_INT_LIT8
) ||

2346 (
d®vikOpcode
 =ğ
OP_DIV_INT_LIT16
)) {

2347 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
__«abi_idiv
);

2348 
isDiv
 = 
Œue
;

2350 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
__«abi_idivmod
);

2351 
isDiv
 = 
çl£
;

2353 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
l™
);

2354 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

2355 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

2356 ià(
isDiv
)

2357 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

2359 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºAÉ
(
cUn™
);

2360 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2361  
çl£
;

2364  
Œue
;

2366 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

2367 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

2369 ià(
shiáOp
 && (
l™
 == 0)) {

2370 
	`g’RegCİy
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

2372 
	`İRegRegImm
(
cUn™
, 
İ
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg, 
l™
);

2374 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2375  
çl£
;

2376 
	}
}

2378 
boŞ
 
	$hªdËFmt22c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2380 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2381 
f›ldOff£t
 = -1;

2382 
boŞ
 
isVŞ©e
 = 
çl£
;

2383 
d®vikOpcode
) {

2390 
OP_IGET_VOLATILE
:

2391 
OP_IGET_OBJECT_VOLATILE
:

2392 
OP_IPUT_VOLATILE
:

2393 
OP_IPUT_OBJECT_VOLATILE
:

2394 #ià
ANDROID_SMP
 != 0

2395 
isVŞ©e
 = 
Œue
;

2398 
OP_IGET
:

2399 
OP_IGET_WIDE
:

2400 
OP_IGET_OBJECT
:

2401 
OP_IGET_BOOLEAN
:

2402 
OP_IGET_BYTE
:

2403 
OP_IGET_CHAR
:

2404 
OP_IGET_SHORT
:

2405 
OP_IPUT
:

2406 
OP_IPUT_WIDE
:

2407 
OP_IPUT_OBJECT
:

2408 
OP_IPUT_BOOLEAN
:

2409 
OP_IPUT_BYTE
:

2410 
OP_IPUT_CHAR
:

2411 
OP_IPUT_SHORT
: {

2412 cÚ¡ 
M‘hod
 *
m‘hod
 = (
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) ?

2413 
mœ
->
m‘a
.
ÿÎ“M‘hod
 : 
cUn™
->
m‘hod
;

2414 
F›ld
 *
f›ldPŒ
 =

2415 
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vC
];

2417 ià(
f›ldPŒ
 =ğ
NULL
) {

2418 
	`BAIL_LOOP_COMPILATION
();

2419 
	`ALOGE
("Unexpected‚ull instance field");

2420 
	`dvmAbÜt
();

2423 #ià
ANDROID_SMP
 != 0

2424 
	`as£¹
(
isVŞ©e
 =ğ
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
));

2426 
isVŞ©e
 = 
	`dvmIsVŞ©eF›ld
((
F›ld
 *è
f›ldPŒ
);

2428 
f›ldOff£t
 = ((
In¡F›ld
 *)
f›ldPŒ
)->
by‹Off£t
;

2435 
d®vikOpcode
) {

2436 
OP_NEW_ARRAY
: {

2438 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2439 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

2440 
RegLoÿtiÚ
 
¾ResuÉ
;

2441 *
şassPŒ
 = (*)

2442 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vC
]);

2444 ià(
şassPŒ
 =ğ
NULL
) {

2445 
	`BAIL_LOOP_COMPILATION
();

2446 
	`ALOGE
("Unexpected‚ull class");

2447 
	`dvmAbÜt
();

2450 
	`dvmComp”FlushAÎRegs
(
cUn™
);

2451 
	`g’ExpÜtPC
(
cUn™
, 
mœ
);

2452 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r1
);

2453 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
şassPŒ
 );

2454 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r3
, ()
dvmAÎocA¼ayByCÏss
);

2459 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdMi
, 
r1
, 0, 
mœ
->
off£t
, 
NULL
);

2460 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, 
ALLOC_DONT_TRACK
);

2461 
	`İReg
(
cUn™
, 
kOpBlx
, 
r3
);

2462 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

2464 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

2468 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

2469 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2470 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

2473 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

2474 
rg‘
->
defMask
 = 
ENCODE_ALL
;

2475 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

2476 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

2477 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2480 
OP_INSTANCE_OF
: {

2482 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2483 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

2484 
RegLoÿtiÚ
 
¾ResuÉ
;

2485 
CÏssObjeù
 *
şassPŒ
 =

2486 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vC
]);

2495 ià(
şassPŒ
 =ğ
NULL
) {

2496 
	`BAIL_LOOP_COMPILATION
();

2497 
	`ALOGD
("null clazz in OP_INSTANCE_OF, single-stepping");

2498 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2501 
	`dvmComp”FlushAÎRegs
(
cUn™
);

2502 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

2503 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, (è
şassPŒ
 );

2505 
ArmLIR
 *
b¿nch1
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdEq
, 
r0
, 0);

2507 
	`lßdWÜdDi¥
(
cUn™
, 
r0
, 
	`off£tof
(
Objeù
, 
şazz
), 
r1
);

2509 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r3
, ()
dvmIn¡ªûofNÚTrivŸl
);

2510 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 1);

2511 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
r1
, 
r2
);

2512 
ArmLIR
 *
b¿nch2
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdEq
);

2513 
	`g’RegCİy
(
cUn™
, 
r0
, 
r1
);

2514 
	`g’RegCİy
(
cUn™
, 
r1
, 
r2
);

2515 
	`İReg
(
cUn™
, 
kOpBlx
, 
r3
);

2516 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

2518 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

2519 
rg‘
->
defMask
 = 
ENCODE_ALL
;

2520 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

2521 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

2522 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

2523 
b¿nch2
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

2526 
OP_IGET_WIDE
:

2527 
	`g’IG‘Wide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2529 
OP_IGET_VOLATILE
:

2530 
OP_IGET_OBJECT_VOLATILE
:

2531 
OP_IGET
:

2532 
OP_IGET_OBJECT
:

2533 
OP_IGET_BOOLEAN
:

2534 
OP_IGET_BYTE
:

2535 
OP_IGET_CHAR
:

2536 
OP_IGET_SHORT
:

2537 
	`g’IG‘
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
isVŞ©e
);

2539 
OP_IPUT_WIDE
:

2540 
	`g’IPutWide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2542 
OP_IPUT_VOLATILE
:

2543 
OP_IPUT
:

2544 
OP_IPUT_BOOLEAN
:

2545 
OP_IPUT_BYTE
:

2546 
OP_IPUT_CHAR
:

2547 
OP_IPUT_SHORT
:

2548 
	`g’IPut
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
çl£
, 
isVŞ©e
);

2550 
OP_IPUT_OBJECT_VOLATILE
:

2551 
OP_IPUT_OBJECT
:

2552 
	`g’IPut
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
Œue
, 
isVŞ©e
);

2554 
OP_IGET_WIDE_VOLATILE
:

2555 
OP_IPUT_WIDE_VOLATILE
:

2556 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2559  
Œue
;

2561  
çl£
;

2562 
	}
}

2564 
boŞ
 
	$hªdËFmt22cs
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2566 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2567 
f›ldOff£t
 = 
mœ
->
d®vikIn¢
.
vC
;

2568 
d®vikOpcode
) {

2569 
OP_IGET_QUICK
:

2570 
OP_IGET_OBJECT_QUICK
:

2571 
	`g’IG‘
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
çl£
);

2573 
OP_IPUT_QUICK
:

2574 
	`g’IPut
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
çl£
, false);

2576 
OP_IPUT_OBJECT_QUICK
:

2577 
	`g’IPut
(
cUn™
, 
mœ
, 
kWÜd
, 
f›ldOff£t
, 
Œue
, 
çl£
);

2579 
OP_IGET_WIDE_QUICK
:

2580 
	`g’IG‘Wide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2582 
OP_IPUT_WIDE_QUICK
:

2583 
	`g’IPutWide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2586  
Œue
;

2588  
çl£
;

2590 
	}
}

2593 
boŞ
 
	$hªdËFmt22t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

2594 
ArmLIR
 *
Ïb–Li¡
)

2596 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2597 
ArmCÚd™iÚCode
 
cÚd
;

2599 
boŞ
 
backw¬dB¿nch
 = (
bb
->
k’
->
¡¬tOff£t
 <ğ
mœ
->
off£t
);

2601 ià(
backw¬dB¿nch
 &&

2602 (
gDvmJ™
.
g’Su¥’dPŞl
 || 
cUn™
->
j™Mode
 =ğ
kJ™Loİ
)) {

2603 
	`g’Su¥’dPŞl
(
cUn™
, 
mœ
);

2606 
RegLoÿtiÚ
 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2607 
RegLoÿtiÚ
 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

2609 
¾Src1
 = 
	`lßdV®ue
(
cUn™
,„lSrc1, 
kCÜeReg
);

2610 
¾Src2
 = 
	`lßdV®ue
(
cUn™
,„lSrc2, 
kCÜeReg
);

2612 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
¾Src1
.
lowReg
, 
¾Src2
.lowReg);

2614 
d®vikOpcode
) {

2615 
OP_IF_EQ
:

2616 
cÚd
 = 
kArmCÚdEq
;

2618 
OP_IF_NE
:

2619 
cÚd
 = 
kArmCÚdNe
;

2621 
OP_IF_LT
:

2622 
cÚd
 = 
kArmCÚdLt
;

2624 
OP_IF_GE
:

2625 
cÚd
 = 
kArmCÚdGe
;

2627 
OP_IF_GT
:

2628 
cÚd
 = 
kArmCÚdGt
;

2630 
OP_IF_LE
:

2631 
cÚd
 = 
kArmCÚdLe
;

2634 
cÚd
 = (
ArmCÚd™iÚCode
)0;

2635 
	`ALOGE
("UÃx³ùed opcod(%dèfÜ Fmt22t", 
d®vikOpcode
);

2636 
	`dvmComp”AbÜt
(
cUn™
);

2638 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
cÚd
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

2640 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

2641  
çl£
;

2642 
	}
}

2644 
boŞ
 
	$hªdËFmt22x_Fmt32x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2646 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

2648 
İcode
) {

2649 
OP_MOVE_16
:

2650 
OP_MOVE_OBJECT_16
:

2651 
OP_MOVE_FROM16
:

2652 
OP_MOVE_OBJECT_FROM16
: {

2653 
	`¡ÜeV®ue
(
cUn™
, 
	`dvmComp”G‘De¡
(cUn™, 
mœ
, 0),

2654 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0));

2657 
OP_MOVE_WIDE_16
:

2658 
OP_MOVE_WIDE_FROM16
: {

2659 
	`¡ÜeV®ueWide
(
cUn™
, 
	`dvmComp”G‘De¡Wide
(cUn™, 
mœ
, 0, 1),

2660 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1));

2664  
Œue
;

2666  
çl£
;

2667 
	}
}

2669 
boŞ
 
	$hªdËFmt23x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2671 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

2672 
RegLoÿtiÚ
 
¾Src1
;

2673 
RegLoÿtiÚ
 
¾Src2
;

2674 
RegLoÿtiÚ
 
¾De¡
;

2676 iàĞ(
İcode
 >ğ
OP_ADD_INT
è&& (İcod<ğ
OP_REM_DOUBLE
)) {

2677  
	`g’Ar™hOp
Ğ
cUn™
, 
mœ
 );

2681 ià(
mœ
->
s§R•
->
numDefs
 == 0) {

2682 ià(
mœ
->
s§R•
->
numU£s
 == 3) {

2683 
¾De¡
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2684 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

2685 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 2);

2687 
	`as£¹
(
mœ
->
s§R•
->
numU£s
 == 4);

2688 
¾De¡
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

2689 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 2);

2690 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 3);

2694 ià(
mœ
->
s§R•
->
numU£s
 == 4) {

2695 
¾Src1
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

2696 
¾Src2
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 2, 3);

2698 
	`as£¹
(
mœ
->
s§R•
->
numU£s
 == 2);

2699 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2700 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

2702 ià(
mœ
->
s§R•
->
numDefs
 == 2) {

2703 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

2705 
	`as£¹
(
mœ
->
s§R•
->
numDefs
 == 1);

2706 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

2711 
İcode
) {

2712 
OP_CMPL_FLOAT
:

2713 
OP_CMPG_FLOAT
:

2714 
OP_CMPL_DOUBLE
:

2715 
OP_CMPG_DOUBLE
:

2716  
	`g’CmpFP
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

2717 
OP_CMP_LONG
:

2718 
	`g’CmpLÚg
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

2720 
OP_AGET_WIDE
:

2721 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kLÚg
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 3);

2723 
OP_AGET
:

2724 
OP_AGET_OBJECT
:

2725 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kWÜd
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 2);

2727 
OP_AGET_BOOLEAN
:

2728 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kUnsigÃdBy‹
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 0);

2730 
OP_AGET_BYTE
:

2731 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kSigÃdBy‹
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 0);

2733 
OP_AGET_CHAR
:

2734 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kUnsigÃdH®f
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 1);

2736 
OP_AGET_SHORT
:

2737 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
kSigÃdH®f
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 1);

2739 
OP_APUT_WIDE
:

2740 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
kLÚg
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 3);

2742 
OP_APUT
:

2743 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
kWÜd
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 2);

2745 
OP_APUT_OBJECT
:

2746 
	`g’A¼ayObjeùPut
(
cUn™
, 
mœ
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 2);

2748 
OP_APUT_SHORT
:

2749 
OP_APUT_CHAR
:

2750 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
kUnsigÃdH®f
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 1);

2752 
OP_APUT_BYTE
:

2753 
OP_APUT_BOOLEAN
:

2754 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
kUnsigÃdBy‹
, 
¾Src1
, 
¾Src2
, 
¾De¡
, 0);

2757  
Œue
;

2759  
çl£
;

2760 
	}
}

2784 
s8
 
	$fšdPackedSw™chIndex
(cÚ¡ 
u2
* 
sw™chD©a
, 
‹¡V®
, 
pc
)

2786 
size
;

2787 
fœ¡Key
;

2788 cÚ¡ *
’Œ›s
;

2789 
šdex
;

2790 
jumpIndex
;

2791 
ÿ£DPCOff£t
 = 0;

2793 
chaššgPC
 = (
pc
 + 4) & ~3;

2804 
size
 = 
sw™chD©a
[1];

2805 
	`as£¹
(
size
 > 0);

2807 
fœ¡Key
 = 
sw™chD©a
[2];

2808 
fœ¡Key
 |ğ
sw™chD©a
[3] << 16;

2814 
’Œ›s
 = (cÚ¡ *è&
sw™chD©a
[4];

2815 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

2817 
šdex
 = 
‹¡V®
 - 
fœ¡Key
;

2820 ià(
šdex
 < 0 || index >ğ
size
) {

2821 
jumpIndex
 = 
	`MIN
(
size
, 
MAX_CHAINED_SWITCH_CASES
);

2823 } ià(
šdex
 >ğ
MAX_CHAINED_SWITCH_CASES
) {

2824 
jumpIndex
 = 
MAX_CHAINED_SWITCH_CASES
 + 1;

2825 
ÿ£DPCOff£t
 = 
’Œ›s
[
šdex
];

2828 
jumpIndex
 = 
šdex
;

2831 
chaššgPC
 +ğ
jumpIndex
 * 
CHAIN_CELL_NORMAL_SIZE
;

2832  (((
s8
è
ÿ£DPCOff£t
è<< 32è| (
u8
è
chaššgPC
;

2833 
	}
}

2836 
s8
 
	$fšdS·r£Sw™chIndex
(cÚ¡ 
u2
* 
sw™chD©a
, 
‹¡V®
, 
pc
)

2838 
size
;

2839 cÚ¡ *
keys
;

2840 cÚ¡ *
’Œ›s
;

2841 
chaššgPC
 = (
pc
 + 4) & ~3;

2842 
i
;

2854 
size
 = 
sw™chD©a
[1];

2855 
	`as£¹
(
size
 > 0);

2860 
keys
 = (cÚ¡ *è&
sw™chD©a
[2];

2861 
	`as£¹
(((
u4
)
keys
 & 0x3) == 0);

2866 
’Œ›s
 = 
keys
 + 
size
;

2867 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

2876 
i
 = 0; i < 
size
; i++) {

2877 
k
 = 
keys
[
i
];

2878 ià(
k
 =ğ
‹¡V®
) {

2880 
jumpIndex
 = (
i
 < 
MAX_CHAINED_SWITCH_CASES
) ?

2881 
i
 : 
MAX_CHAINED_SWITCH_CASES
 + 1;

2882 
chaššgPC
 +ğ
jumpIndex
 * 
CHAIN_CELL_NORMAL_SIZE
;

2883  (((
s8
è
’Œ›s
[
i
]è<< 32è| (
u8
è
chaššgPC
;

2884 } ià(
k
 > 
‹¡V®
) {

2888  
chaššgPC
 + 
	`MIN
(
size
, 
MAX_CHAINED_SWITCH_CASES
) *

2889 
CHAIN_CELL_NORMAL_SIZE
;

2890 
	}
}

2892 
boŞ
 
	$hªdËFmt31t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2894 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

2895 
d®vikOpcode
) {

2896 
OP_FILL_ARRAY_DATA
: {

2897 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2899 
	`dvmComp”FlushAÎRegs
(
cUn™
);

2900 
	`g’ExpÜtPC
(
cUn™
, 
mœ
);

2901 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r0
);

2902 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, ()
dvmIÁ”pHªdËFlA¼ayD©a
);

2903 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
,

2904 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 + mœ->
d®vikIn¢
.
vB
));

2905 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

2906 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

2908 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

2909 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

2910 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2911 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

2912 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

2913 
rg‘
->
defMask
 = 
ENCODE_ALL
;

2914 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

2922 
OP_PACKED_SWITCH
:

2923 
OP_SPARSE_SWITCH
: {

2924 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

2925 
	`dvmComp”FlushAÎRegs
(
cUn™
);

2926 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r1
);

2927 
	`dvmComp”LockAÎTemps
(
cUn™
);

2928 ià(
d®vikOpcode
 =ğ
OP_PACKED_SWITCH
) {

2929 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r4PC
, ()
fšdPackedSw™chIndex
);

2931 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r4PC
, ()
fšdS·r£Sw™chIndex
);

2934 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

2935 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 + mœ->
d®vikIn¢
.
vB
));

2937 
	`İRegReg
(
cUn™
, 
kOpMov
, 
r2
, 
r15pc
);

2938 
	`İReg
(
cUn™
, 
kOpBlx
, 
r4PC
);

2939 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

2941 
	`İRegReg
(
cUn™
, 
kOpMov
, 
r15pc
, 
r0
);

2945  
Œue
;

2947  
çl£
;

2948 
	}
}

2955 
	$g’LªdšgPadFÜMi¥»diùedC®Ëe
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

2956 
BasicBlock
 *
bb
,

2957 
ArmLIR
 *
Ïb–Li¡
)

2959 
BasicBlock
 *
çÎThrough
 = 
bb
->fallThrough;

2962 ià(
çÎThrough
->
fœ¡MIRIn¢
) {

2963 
	`as£¹
(
çÎThrough
->
fœ¡MIRIn¢
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED_PRED
);

2964 
çÎThrough
 = fallThrough->fallThrough;

2967 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
çÎThrough
->
id
]);

2970 
	`dvmComp”Re£tRegPoŞ
(
cUn™
);

2971 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

2972 
	`dvmComp”Re£tNuÎCheck
(
cUn™
);

2975 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

2976 
rg‘
->
defMask
 = 
ENCODE_ALL
;

2978 
mœ
->
m‘a
.
ÿÎs™eInfo
->
misP»dB¿nchOv”
->
rg‘
 = (
LIR
 *)arget;

2979 
	}
}

2981 
boŞ
 
	$hªdËFmt35c_3rc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

2982 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

2984 
ArmLIR
 *
»tChaššgC–l
 = 
NULL
;

2985 
ArmLIR
 *
püLab–
 = 
NULL
;

2988 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED
)

2989  
çl£
;

2991 ià(
bb
->
çÎThrough
 !ğ
NULL
)

2992 
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

2994 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

2995 
mœ
->
d®vikIn¢
.
İcode
) {

3001 
OP_INVOKE_VIRTUAL
:

3002 
OP_INVOKE_VIRTUAL_RANGE
: {

3003 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

3004 
m‘hodIndex
 =

3005 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
]->

3006 
m‘hodIndex
;

3013 ià(
mœ
->
m‘a
.
ÿÎs™eInfo
->
misP»dB¿nchOv”
) {

3014 
	`g’LªdšgPadFÜMi¥»diùedC®Ëe
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

3017 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_VIRTUAL
)

3018 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3020 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3022 
	`g’InvokeVœtu®CommÚ
(
cUn™
, 
mœ
, 
m‘hodIndex
,

3023 
»tChaššgC–l
,

3024 
´edChaššgC–l
,

3025 
püLab–
);

3032 
OP_INVOKE_SUPER
:

3033 
OP_INVOKE_SUPER_RANGE
: {

3035 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3036 
	`as£¹
(
ÿÎ“M‘hod
 =ğ
cUn™
->
m‘hod
->
şazz
->
su³r
->
vbË
[

3037 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->

3038 
pResM‘hods
[
dIn¢
->
vB
]->
m‘hodIndex
]);

3040 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_SUPER
)

3041 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3043 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3045 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INVOKE_METHOD_JIT
) {

3046 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3047 *
ÿÎ“Addr
 = 
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
);

3048 
	`as£¹
(
ÿÎ“Addr
);

3049 
	`g’InvokeSšgËtÚWhŞeM‘hod
(
cUn™
, 
mœ
, 
ÿÎ“Addr
,

3050 
»tChaššgC–l
);

3053 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

3055 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

3056 
ÿÎ“M‘hod
);

3061 
OP_INVOKE_DIRECT
:

3062 
OP_INVOKE_DIRECT_RANGE
: {

3064 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3065 
	`as£¹
(
ÿÎ“M‘hod
 ==

3066 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
]);

3068 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_DIRECT
)

3069 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3071 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3074 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

3076 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

3077 
ÿÎ“M‘hod
);

3081 
OP_INVOKE_STATIC
:

3082 
OP_INVOKE_STATIC_RANGE
: {

3084 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3085 
	`as£¹
(
ÿÎ“M‘hod
 ==

3086 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
]);

3088 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_STATIC
)

3089 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
,

3090 
NULL
 );

3092 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
,

3093 
NULL
 );

3095 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INVOKE_METHOD_JIT
) {

3096 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3097 *
ÿÎ“Addr
 = 
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
);

3098 
	`as£¹
(
ÿÎ“Addr
);

3099 
	`g’InvokeSšgËtÚWhŞeM‘hod
(
cUn™
, 
mœ
, 
ÿÎ“Addr
,

3100 
»tChaššgC–l
);

3103 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

3105 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

3106 
ÿÎ“M‘hod
);

3181 
OP_INVOKE_INTERFACE
:

3182 
OP_INVOKE_INTERFACE_RANGE
: {

3183 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

3190 ià(
mœ
->
m‘a
.
ÿÎs™eInfo
->
misP»dB¿nchOv”
) {

3191 
	`g’LªdšgPadFÜMi¥»diùedC®Ëe
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

3194 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_INTERFACE
)

3195 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3197 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3202 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

3203 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

3206 
ArmLIR
 *
addrR‘Chaš
 =

3207 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r1
, 
r15pc
, 0);

3208 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

3211 
ArmLIR
 *
´ediùedChaššgC–l
 =

3212 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r2
, 
r15pc
, 0);

3213 
´ediùedChaššgC–l
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

3215 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

3216 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN_PROF
 :

3217 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN
);

3220 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
´edChaššgC–l
);

3226 ià(
püLab–
 =ğ
NULL
) {

3227 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

3228 
püLab–
 = (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

3229 
püLab–
->
İcode
 = 
kArmP£udoPCRecÚ¡ruùiÚC–l
;

3230 
püLab–
->
İ”ªds
[0] = 
dPC
;

3231 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

3233 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
,

3234 (
šŒ_t
è
püLab–
);

3238 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
püLab–
);

3250 
	`g’RegCİy
(
cUn™
, 
r8
, 
r1
);

3251 
	`g’RegCİy
(
cUn™
, 
r9
, 
r2
);

3252 
	`g’RegCİy
(
cUn™
, 
r10
, 
r3
);

3255 
	`g’RegCİy
(
cUn™
, 
r0
, 
r3
);

3258 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
dIn¢
->
vB
);

3261 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, (ècUn™->
m‘hod
);

3264 
	`lßdCÚ¡ªt
(
cUn™
, 
r3
, (ècUn™->
m‘hod
->
şazz
->
pDvmDex
);

3266 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r7
,

3267 (
šŒ_t
è
dvmFšdIÁ”çûM‘hodInCache
);

3268 
	`İReg
(
cUn™
, 
kOpBlx
, 
r7
);

3271 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

3273 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

3277 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

3278 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

3279 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

3282 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

3283 
rg‘
->
defMask
 = 
ENCODE_ALL
;

3284 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

3286 
	`g’RegCİy
(
cUn™
, 
r1
, 
r8
);

3289 
ArmLIR
 *
by·ssRechaššg
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdGt
,

3290 
r1
, 0);

3292 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r7
, (è
dvmJ™ToP©chP»diùedChaš
);

3294 
	`g’RegCİy
(
cUn™
, 
r1
, 
r6SELF
);

3295 
	`g’RegCİy
(
cUn™
, 
r2
, 
r9
);

3296 
	`g’RegCİy
(
cUn™
, 
r3
, 
r10
);

3307 
	`İReg
(
cUn™
, 
kOpBlx
, 
r7
);

3310 
addrR‘Chaš
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r1
, 
r15pc
, 0);

3311 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

3313 
by·ssRechaššg
->
g’”ic
.
rg‘
 = (
LIR
 *è
addrR‘Chaš
;

3320 
	`g’Di¥©chToHªdËr
(
cUn™
, 
gDvmJ™
.
m‘hodT¿ûSuµÜt
 ?

3321 
TEMPLATE_INVOKE_METHOD_NO_OPT_PROF
 :

3322 
TEMPLATE_INVOKE_METHOD_NO_OPT
);

3323 #ià
	`defšed
(
WITH_JIT_TUNING
)

3324 
gDvmJ™
.
švokePŞymÜphic
++;

3327 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

3330 
OP_INVOKE_OBJECT_INIT_RANGE
:

3331 
OP_FILLED_NEW_ARRAY
:

3332 
OP_FILLED_NEW_ARRAY_RANGE
: {

3334 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

3338  
Œue
;

3340  
çl£
;

3341 
	}
}

3343 
boŞ
 
	$hªdËFmt35ms_3rms
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

3344 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

3346 
ArmLIR
 *
püLab–
 = 
NULL
;

3349 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED
)

3350  
çl£
;

3352 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3353 
mœ
->
d®vikIn¢
.
İcode
) {

3355 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

3356 
OP_INVOKE_VIRTUAL_QUICK
: {

3357 
m‘hodIndex
 = 
dIn¢
->
vB
;

3358 
ArmLIR
 *
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

3359 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

3366 ià(
mœ
->
m‘a
.
ÿÎs™eInfo
->
misP»dB¿nchOv”
) {

3367 
	`g’LªdšgPadFÜMi¥»diùedC®Ëe
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

3370 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_VIRTUAL_QUICK
)

3371 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3373 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3376 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INVOKE_METHOD_JIT
) {

3377 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3378 *
ÿÎ“Addr
 = 
	`dvmJ™G‘M‘hodAddr
(
ÿÎ“M‘hod
->
š¢s
);

3379 
	`as£¹
(
ÿÎ“Addr
);

3380 
	`g’InvokeVœtu®WhŞeM‘hod
(
cUn™
, 
mœ
, 
ÿÎ“Addr
,

3381 
»tChaššgC–l
);

3384 
	`g’InvokeVœtu®CommÚ
(
cUn™
, 
mœ
, 
m‘hodIndex
,

3385 
»tChaššgC–l
,

3386 
´edChaššgC–l
,

3387 
püLab–
);

3391 
OP_INVOKE_SUPER_QUICK
:

3392 
OP_INVOKE_SUPER_QUICK_RANGE
: {

3394 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 = 
mœ
->
m‘a
.
ÿÎs™eInfo
->
m‘hod
;

3395 
	`as£¹
(
ÿÎ“M‘hod
 ==

3396 
cUn™
->
m‘hod
->
şazz
->
su³r
->
vbË
[
dIn¢
->
vB
]);

3398 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_INVOKE_SUPER_QUICK
)

3399 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3401 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

3404 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

3406 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

3407 
ÿÎ“M‘hod
);

3411  
Œue
;

3413  
çl£
;

3414 
	}
}

3422 
boŞ
 
	$g’IÆšedCom·»To
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3424 #ià
	`defšed
(
USE_GLOBAL_STRING_DEFS
)

3425  
	`hªdËExecu‹IÆšeC
(
cUn™
, 
mœ
);

3427 
ArmLIR
 *
rŞlback
;

3428 
RegLoÿtiÚ
 
¾This
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3429 
RegLoÿtiÚ
 
¾Comp
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

3431 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾This
, 
r0
);

3432 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Comp
, 
r1
);

3434 
rŞlback
 = 
	`g’NuÎCheck
(
cUn™
, 
¾This
.
sRegLow
, 
r0
, 
mœ
->
off£t
, 
NULL
);

3435 
	`g’NuÎCheck
(
cUn™
, 
¾Comp
.
sRegLow
, 
r1
, 
mœ
->
off£t
, 
rŞlback
);

3441 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_STRING_COMPARETO
);

3442 
	`¡ÜeV®ue
(
cUn™
, 
	`šlšedT¬g‘
(cUn™, 
mœ
, 
çl£
),

3443 
	`dvmComp”G‘R‘uº
(
cUn™
));

3444  
çl£
;

3446 
	}
}

3448 
boŞ
 
	$g’IÆšedFa¡IndexOf
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3450 #ià
	`defšed
(
USE_GLOBAL_STRING_DEFS
)

3451  
	`hªdËExecu‹IÆšeC
(
cUn™
, 
mœ
);

3453 
RegLoÿtiÚ
 
¾This
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3454 
RegLoÿtiÚ
 
¾Ch¬
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

3456 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾This
, 
r0
);

3457 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Ch¬
, 
r1
);

3458 
RegLoÿtiÚ
 
¾S¹
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 2);

3459 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾S¹
, 
r2
);

3461 
	`g’NuÎCheck
(
cUn™
, 
¾This
.
sRegLow
, 
r0
, 
mœ
->
off£t
, 
NULL
);

3462 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_STRING_INDEXOF
);

3463 
	`¡ÜeV®ue
(
cUn™
, 
	`šlšedT¬g‘
(cUn™, 
mœ
, 
çl£
),

3464 
	`dvmComp”G‘R‘uº
(
cUn™
));

3465  
çl£
;

3467 
	}
}

3470 
boŞ
 
	$g’IÆšedSŒšgIsEm±yOrL’gth
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

3471 
boŞ
 
isEm±y
)

3474 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3475 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
çl£
);

3476 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

3477 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

3478 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
, 
mœ
->
off£t
, 
NULL
);

3479 
	`lßdWÜdDi¥
(
cUn™
, 
¾Obj
.
lowReg
, 
gDvm
.
offJavaLªgSŒšg_couÁ
,

3480 
¾ResuÉ
.
lowReg
);

3481 ià(
isEm±y
) {

3483 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3484 
	`İRegReg
(
cUn™
, 
kOpNeg
, 
tReg
, 
¾ResuÉ
.
lowReg
);

3485 
	`İRegRegReg
(
cUn™
, 
kOpAdc
, 
¾ResuÉ
.
lowReg
,„lResuÉ.lowReg, 
tReg
);

3487 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

3488  
çl£
;

3489 
	}
}

3491 
boŞ
 
	$g’IÆšedSŒšgL’gth
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3493  
	`g’IÆšedSŒšgIsEm±yOrL’gth
(
cUn™
, 
mœ
, 
çl£
);

3494 
	}
}

3496 
boŞ
 
	$g’IÆšedSŒšgIsEm±y
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3498  
	`g’IÆšedSŒšgIsEm±yOrL’gth
(
cUn™
, 
mœ
, 
Œue
);

3499 
	}
}

3501 
boŞ
 
	$g’IÆšedSŒšgCh¬At
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3503 
cÚ‹Ás
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, contents);

3504 
RegLoÿtiÚ
 
¾Obj
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3505 
RegLoÿtiÚ
 
¾Idx
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

3506 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
çl£
);

3507 
RegLoÿtiÚ
 
¾ResuÉ
;

3508 
¾Obj
 = 
	`lßdV®ue
(
cUn™
,„lObj, 
kCÜeReg
);

3509 
¾Idx
 = 
	`lßdV®ue
(
cUn™
,„lIdx, 
kCÜeReg
);

3510 
»gMax
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3511 
»gOff
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3512 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3513 
ArmLIR
 *
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
¾Obj
.
sRegLow
,„lObj.
lowReg
,

3514 
mœ
->
off£t
, 
NULL
);

3515 
	`lßdWÜdDi¥
(
cUn™
, 
¾Obj
.
lowReg
, 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
»gMax
);

3516 
	`lßdWÜdDi¥
(
cUn™
, 
¾Obj
.
lowReg
, 
gDvm
.
offJavaLªgSŒšg_off£t
, 
»gOff
);

3517 
	`lßdWÜdDi¥
(
cUn™
, 
¾Obj
.
lowReg
, 
gDvm
.
offJavaLªgSŒšg_v®ue
, 
»gPŒ
);

3518 
	`g’BoundsCheck
(
cUn™
, 
¾Idx
.
lowReg
, 
»gMax
, 
mœ
->
off£t
, 
püLab–
);

3519 
	`dvmComp”F»eTemp
(
cUn™
, 
»gMax
);

3520 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
cÚ‹Ás
);

3521 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
»gOff
, 
¾Idx
.
lowReg
);

3522 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

3523 
	`lßdBa£Indexed
(
cUn™
, 
»gPŒ
, 
»gOff
, 
¾ResuÉ
.
lowReg
, 1, 
kUnsigÃdH®f
);

3524 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

3525  
çl£
;

3526 
	}
}

3528 
boŞ
 
	$g’IÆšedAbsIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3530 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3531 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

3532 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
çl£
);

3533 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

3534 
signReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3540 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
signReg
, 
¾Src
.
lowReg
, 31);

3541 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg, 
signReg
);

3542 
	`İRegReg
(
cUn™
, 
kOpXÜ
, 
¾ResuÉ
.
lowReg
, 
signReg
);

3543 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

3544  
çl£
;

3545 
	}
}

3547 
boŞ
 
	$g’IÆšedAbsLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3549 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

3550 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘Wide
(
cUn™
, 
mœ
, 
çl£
);

3551 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kCÜeReg
);

3552 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

3553 
signReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3560 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
signReg
, 
¾Src
.
highReg
, 31);

3561 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg, 
signReg
);

3562 
	`İRegRegReg
(
cUn™
, 
kOpAdc
, 
¾ResuÉ
.
highReg
, 
¾Src
.highReg, 
signReg
);

3563 
	`İRegReg
(
cUn™
, 
kOpXÜ
, 
¾ResuÉ
.
lowReg
, 
signReg
);

3564 
	`İRegReg
(
cUn™
, 
kOpXÜ
, 
¾ResuÉ
.
highReg
, 
signReg
);

3565 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

3566  
çl£
;

3567 
	}
}

3569 
boŞ
 
	$g’IÆšedIÁFlßtCÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3572 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

3573 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
çl£
);

3574 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾Src
);

3575  
çl£
;

3576 
	}
}

3578 
boŞ
 
	$g’IÆšedLÚgDoubËCÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3581 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

3582 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘Wide
(
cUn™
, 
mœ
, 
çl£
);

3583 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾Src
);

3584  
çl£
;

3585 
	}
}

3592 
boŞ
 
	$hªdËExecu‹IÆšeC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3594 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3595 
İ”©iÚ
 = 
dIn¢
->
vB
;

3596 
i
;

3597 cÚ¡ 
IÆšeO³¿tiÚ
* 
šLšeTabË
 = 
	`dvmG‘IÆšeOpsTabË
();

3598 
ušŒ_t
 
â
 = (è
šLšeTabË
[
İ”©iÚ
].
func
;

3599 ià(
â
 == 0) {

3600 
	`dvmComp”AbÜt
(
cUn™
);

3602 
	`dvmComp”FlushAÎRegs
(
cUn™
);

3603 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

3604 
	`dvmComp”Clobb”
(
cUn™
, 
r4PC
);

3605 
	`dvmComp”Clobb”
(
cUn™
, 
r7
);

3606 
off£t
 = 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
);

3607 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
r4PC
, 
r6SELF
, 
off£t
);

3608 
	`İImm
(
cUn™
, 
kOpPush
, (1<<
r4PC
è| (1<<
r7
));

3609 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r4PC
, 
â
);

3610 
	`g’ExpÜtPC
(
cUn™
, 
mœ
);

3611 
i
=0; i < 
dIn¢
->
vA
; i++) {

3612 
	`lßdV®ueDœeù
(
cUn™
, 
	`dvmComp”G‘Src
(cUn™, 
mœ
, 
i
), i);

3614 
	`İReg
(
cUn™
, 
kOpBlx
, 
r4PC
);

3615 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
r13¥
, 8);

3617 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

3618 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

3619 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

3620 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

3621 
rg‘
->
defMask
 = 
ENCODE_ALL
;

3622 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

3623  
çl£
;

3624 
	}
}

3630 
boŞ
 
	$hªdËExecu‹IÆše
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3632 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3633 
	`as£¹
(
dIn¢
->
İcode
 =ğ
OP_EXECUTE_INLINE_RANGE
 ||

3634 
dIn¢
->
İcode
 =ğ
OP_EXECUTE_INLINE
);

3635 
dIn¢
->
vB
) {

3636 
INLINE_EMPTYINLINEMETHOD
:

3637  
çl£
;

3640 
INLINE_STRING_LENGTH
:

3641  
	`g’IÆšedSŒšgL’gth
(
cUn™
, 
mœ
);

3642 
INLINE_STRING_IS_EMPTY
:

3643  
	`g’IÆšedSŒšgIsEm±y
(
cUn™
, 
mœ
);

3644 
INLINE_MATH_ABS_INT
:

3645  
	`g’IÆšedAbsIÁ
(
cUn™
, 
mœ
);

3646 
INLINE_MATH_ABS_LONG
:

3647  
	`g’IÆšedAbsLÚg
(
cUn™
, 
mœ
);

3648 
INLINE_MATH_MIN_INT
:

3649  
	`g’IÆšedMšMaxIÁ
(
cUn™
, 
mœ
, 
Œue
);

3650 
INLINE_MATH_MAX_INT
:

3651  
	`g’IÆšedMšMaxIÁ
(
cUn™
, 
mœ
, 
çl£
);

3652 
INLINE_STRING_CHARAT
:

3653  
	`g’IÆšedSŒšgCh¬At
(
cUn™
, 
mœ
);

3654 
INLINE_MATH_SQRT
:

3655  
	`g’IÆšeSq¹
(
cUn™
, 
mœ
);

3656 
INLINE_MATH_ABS_FLOAT
:

3657  
	`g’IÆšedAbsFlßt
(
cUn™
, 
mœ
);

3658 
INLINE_MATH_ABS_DOUBLE
:

3659  
	`g’IÆšedAbsDoubË
(
cUn™
, 
mœ
);

3660 
INLINE_STRING_COMPARETO
:

3661  
	`g’IÆšedCom·»To
(
cUn™
, 
mœ
);

3662 
INLINE_STRING_FASTINDEXOF_II
:

3663  
	`g’IÆšedFa¡IndexOf
(
cUn™
, 
mœ
);

3664 
INLINE_FLOAT_TO_RAW_INT_BITS
:

3665 
INLINE_INT_BITS_TO_FLOAT
:

3666  
	`g’IÆšedIÁFlßtCÚv”siÚ
(
cUn™
, 
mœ
);

3667 
INLINE_DOUBLE_TO_RAW_LONG_BITS
:

3668 
INLINE_LONG_BITS_TO_DOUBLE
:

3669  
	`g’IÆšedLÚgDoubËCÚv”siÚ
(
cUn™
, 
mœ
);

3675 
INLINE_STRING_EQUALS
:

3676 
INLINE_MATH_COS
:

3677 
INLINE_MATH_SIN
:

3678 
INLINE_FLOAT_TO_INT_BITS
:

3679 
INLINE_DOUBLE_TO_LONG_BITS
:

3680  
	`hªdËExecu‹IÆšeC
(
cUn™
, 
mœ
);

3682 
	`dvmComp”AbÜt
(
cUn™
);

3683  
çl£
;

3684 
	}
}

3686 
boŞ
 
	$hªdËFmt51l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3689 
RegLoÿtiÚ
 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

3690 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

3691 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
,

3692 
mœ
->
d®vikIn¢
.
vB_wide
 & 0xFFFFFFFFUL);

3693 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
¾ResuÉ
.
highReg
,

3694 (
mœ
->
d®vikIn¢
.
vB_wide
>>32) & 0xFFFFFFFFUL);

3695 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

3696  
çl£
;

3697 
	}
}

3717 
	$š£¹ChaššgSw™ch
(
Comp©iÚUn™
 *
cUn™
)

3719 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR0
(
cUn™
, 
kThumbBUncÚd
);

3720 
	`ÃwLIR2
(
cUn™
, 
kThumbO¼
, 
r0
,„0);

3721 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

3722 
rg‘
->
defMask
 = 
ENCODE_ALL
;

3723 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

3724 
	}
}

3727 
	$hªdËNÜm®ChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

3728 
off£t
)

3734 
	`š£¹ChaššgSw™ch
(
cUn™
);

3735 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
, 
r6SELF
,

3736 
	`off£tof
(
Th»ad
,

3737 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNÜm®
) >> 2);

3738 
	`ÃwLIR1
(
cUn™
, 
kThumbBlxR
, 
r0
);

3739 
	`addWÜdD©a
(
cUn™
, 
NULL
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

3740 
	}
}

3746 
	$hªdËHÙChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

3747 
off£t
)

3753 
	`š£¹ChaššgSw™ch
(
cUn™
);

3754 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
, 
r6SELF
,

3755 
	`off£tof
(
Th»ad
,

3756 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pT¿ûS–eù
) >> 2);

3757 
	`ÃwLIR1
(
cUn™
, 
kThumbBlxR
, 
r0
);

3758 
	`addWÜdD©a
(
cUn™
, 
NULL
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

3759 
	}
}

3762 
	$hªdËBackw¬dB¿nchChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

3763 
off£t
)

3769 
	`š£¹ChaššgSw™ch
(
cUn™
);

3770 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

3771 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
, 
r6SELF
,

3772 
	`off£tof
(
Th»ad
,

3773 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pBackw¬dB¿nch
) >> 2);

3775 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
, 
r6SELF
,

3776 
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNÜm®
) >> 2);

3778 
	`ÃwLIR1
(
cUn™
, 
kThumbBlxR
, 
r0
);

3779 
	`addWÜdD©a
(
cUn™
, 
NULL
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

3780 
	}
}

3783 
	$hªdËInvokeSšgËtÚChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

3784 cÚ¡ 
M‘hod
 *
ÿÎ“
)

3790 
	`š£¹ChaššgSw™ch
(
cUn™
);

3791 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
, 
r6SELF
,

3792 
	`off£tof
(
Th»ad
,

3793 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pT¿ûS–eù
) >> 2);

3794 
	`ÃwLIR1
(
cUn™
, 
kThumbBlxR
, 
r0
);

3795 
	`addWÜdD©a
(
cUn™
, 
NULL
, (è(
ÿÎ“
->
š¢s
));

3796 
	}
}

3799 
	$hªdËInvokeP»diùedChaššgC–l
(
Comp©iÚUn™
 *
cUn™
)

3803 
	`addWÜdD©a
(
cUn™
, 
NULL
, 
PREDICTED_CHAIN_BX_PAIR_INIT
);

3805 
	`addWÜdD©a
(
cUn™
, 
NULL
, 
PREDICTED_CHAIN_CLAZZ_INIT
);

3807 
	`addWÜdD©a
(
cUn™
, 
NULL
, 
PREDICTED_CHAIN_METHOD_INIT
);

3812 
	`addWÜdD©a
(
cUn™
, 
NULL
, 
PREDICTED_CHAIN_COUNTER_INIT
);

3813 
	}
}

3816 
	$hªdËPCRecÚ¡ruùiÚ
(
Comp©iÚUn™
 *
cUn™
,

3817 
ArmLIR
 *
rg‘Lab–
)

3819 
ArmLIR
 **
püLab–
 =

3820 (
ArmLIR
 **è
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
–emLi¡
;

3821 
numEËms
 = 
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
numU£d
;

3822 
i
;

3828 ià(
numEËms
) {

3829 
	`ÃwLIR0
(
cUn™
, 
kThumbUndefšed
);

3832 
i
 = 0; i < 
numEËms
; i++) {

3833 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
püLab–
[
i
]);

3835 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 
püLab–
[
i
]->
İ”ªds
[0]);

3836 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
rg‘Lab–
);

3838 
	}
}

3840 cÚ¡ *
	gex‹ndedMIROpNames
[
kMœOpLa¡
 - 
kMœOpFœ¡
] = {

3857 
	$g’Hoi¡edChecksFÜCouÁUpLoİ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3865 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3866 cÚ¡ 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

3867 cÚ¡ 
maxC
 = 
dIn¢
->
¬g
[0];

3868 
»gL’gth
;

3869 
RegLoÿtiÚ
 
¾A¼ay
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vA
];

3870 
RegLoÿtiÚ
 
¾IdxEnd
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vC
];

3873 
¾A¼ay
 = 
	`lßdV®ue
(
cUn™
,„lA¼ay, 
kCÜeReg
);

3874 
¾IdxEnd
 = 
	`lßdV®ue
(
cUn™
,„lIdxEnd, 
kCÜeReg
);

3875 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdEq
, 
¾A¼ay
.
lowReg
, 0, 0,

3876 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

3879 
»gL’gth
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3880 
	`lßdWÜdDi¥
(
cUn™
, 
¾A¼ay
.
lowReg
, 
ËnOff£t
, 
»gL’gth
);

3882 
d–
 = 
maxC
;

3887 ià(
dIn¢
->
¬g
[2] =ğ
OP_IF_GE
) {

3888 
d–
--;

3891 ià(
d–
) {

3892 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3893 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
tReg
, 
¾IdxEnd
.
lowReg
, 
d–
);

3894 
¾IdxEnd
.
lowReg
 = 
tReg
;

3895 
	`dvmComp”F»eTemp
(
cUn™
, 
tReg
);

3898 
	`g’RegRegCheck
(
cUn™
, 
kArmCÚdGe
, 
¾IdxEnd
.
lowReg
, 
»gL’gth
, 0,

3899 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

3900 
	}
}

3910 
	$g’Hoi¡edChecksFÜCouÁDownLoİ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3912 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3913 cÚ¡ 
ËnOff£t
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
);

3914 cÚ¡ 
»gL’gth
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3915 cÚ¡ 
maxC
 = 
dIn¢
->
¬g
[0];

3916 
RegLoÿtiÚ
 
¾A¼ay
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vA
];

3917 
RegLoÿtiÚ
 
¾IdxIn™
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vB
];

3920 
¾A¼ay
 = 
	`lßdV®ue
(
cUn™
,„lA¼ay, 
kCÜeReg
);

3921 
¾IdxIn™
 = 
	`lßdV®ue
(
cUn™
,„lIdxIn™, 
kCÜeReg
);

3922 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdEq
, 
¾A¼ay
.
lowReg
, 0, 0,

3923 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

3926 
	`lßdWÜdDi¥
(
cUn™
, 
¾A¼ay
.
lowReg
, 
ËnOff£t
, 
»gL’gth
);

3928 ià(
maxC
) {

3929 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

3930 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
tReg
, 
¾IdxIn™
.
lowReg
, 
maxC
);

3931 
¾IdxIn™
.
lowReg
 = 
tReg
;

3932 
	`dvmComp”F»eTemp
(
cUn™
, 
tReg
);

3936 
	`g’RegRegCheck
(
cUn™
, 
kArmCÚdGe
, 
¾IdxIn™
.
lowReg
, 
»gL’gth
, 0,

3937 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

3938 
	}
}

3944 
	$g’Hoi¡edLow”BoundCheck
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

3946 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

3947 cÚ¡ 
mšC
 = 
dIn¢
->
vB
;

3948 
RegLoÿtiÚ
 
¾Idx
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vA
];

3951 
¾Idx
 = 
	`lßdV®ue
(
cUn™
,„lIdx, 
kCÜeReg
);

3954 
	`g’RegImmCheck
(
cUn™
, 
kArmCÚdLt
, 
¾Idx
.
lowReg
, -
mšC
, 0,

3955 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

3956 
	}
}

4042 
	$g’V®id©iÚFÜP»diùedIÆše
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

4044 
C®ls™eInfo
 *
ÿÎs™eInfo
 = 
mœ
->
m‘a
.callsiteInfo;

4045 
RegLoÿtiÚ
 
¾This
 = 
cUn™
->
»gLoÿtiÚ
[
mœ
->
d®vikIn¢
.
vC
];

4047 
¾This
 = 
	`lßdV®ue
(
cUn™
,„lThis, 
kCÜeReg
);

4048 
»gP»diùedCÏss
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

4049 
	`lßdCÏssPoš‹r
(
cUn™
, 
»gP»diùedCÏss
, (è
ÿÎs™eInfo
);

4050 
	`g’NuÎCheck
(
cUn™
, 
¾This
.
sRegLow
,„lThis.
lowReg
, 
mœ
->
off£t
,

4051 
NULL
);

4052 
»gAùu®CÏss
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

4053 
	`lßdWÜdDi¥
(
cUn™
, 
¾This
.
lowReg
, 
	`off£tof
(
Objeù
, 
şazz
), 
»gAùu®CÏss
);

4054 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
»gP»diùedCÏss
, 
»gAùu®CÏss
);

4059 
ÿÎs™eInfo
->
misP»dB¿nchOv”
 = (
LIR
 *è
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdNe
);

4060 
	}
}

4063 
	$hªdËEx‹ndedMIR
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

4065 
İOff£t
 = 
mœ
->
d®vikIn¢
.
İcode
 - 
kMœOpFœ¡
;

4066 *
msg
 = (*)
	`dvmComp”New
(
	`¡¾’
(
ex‹ndedMIROpNames
[
İOff£t
]) + 1,

4067 
çl£
);

4068 
	`¡rıy
(
msg
, 
ex‹ndedMIROpNames
[
İOff£t
]);

4069 
	`ÃwLIR1
(
cUn™
, 
kArmP£udoEx‹nded
, (è
msg
);

4071 (
Ex‹ndedMIROpcode
)
mœ
->
d®vikIn¢
.
İcode
) {

4072 
kMœOpPhi
: {

4073 *
s§SŒšg
 = 
	`dvmComp”G‘SSASŒšg
(
cUn™
, 
mœ
->
s§R•
);

4074 
	`ÃwLIR1
(
cUn™
, 
kArmP£udoSSAR•
, (è
s§SŒšg
);

4077 
kMœOpNuÎNRªgeUpCheck
: {

4078 
	`g’Hoi¡edChecksFÜCouÁUpLoİ
(
cUn™
, 
mœ
);

4081 
kMœOpNuÎNRªgeDownCheck
: {

4082 
	`g’Hoi¡edChecksFÜCouÁDownLoİ
(
cUn™
, 
mœ
);

4085 
kMœOpLow”Bound
: {

4086 
	`g’Hoi¡edLow”BoundCheck
(
cUn™
, 
mœ
);

4089 
kMœOpPuÁ
: {

4090 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
,

4091 (
ArmLIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

4094 
kMœOpCheckIÆšeP»diùiÚ
: {

4095 
	`g’V®id©iÚFÜP»diùedIÆše
(
cUn™
, 
mœ
);

4101 
	}
}

4110 
	$£tupLoİEÁryBlock
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
’Œy
,

4111 
ArmLIR
 *
bodyLab–
)

4114 
ArmLIR
 *
püLab–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

4115 
püLab–
->
İcode
 = 
kArmP£udoPCRecÚ¡ruùiÚC–l
;

4116 
püLab–
->
İ”ªds
[0] =

4117 (è(
cUn™
->
m‘hod
->
š¢s
 + 
’Œy
->
¡¬tOff£t
);

4118 
püLab–
->
İ”ªds
[1] = 
’Œy
->
¡¬tOff£t
;

4120 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, (
šŒ_t
è
püLab–
);

4126 
ArmLIR
 *
b¿nchToBody
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

4127 
b¿nchToBody
->
İcode
 = 
kThumbBUncÚd
;

4128 
b¿nchToBody
->
g’”ic
.
rg‘
 = (
LIR
 *è
bodyLab–
;

4129 
	`£tupResourûMasks
(
b¿nchToBody
);

4130 
cUn™
->
loİAÇlysis
->
b¿nchToBody
 = (
LIR
 *) branchToBody;

4132 
ArmLIR
 *
b¿nchToPCR
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

4133 
b¿nchToPCR
->
İcode
 = 
kThumbBUncÚd
;

4134 
b¿nchToPCR
->
g’”ic
.
rg‘
 = (
LIR
 *è
püLab–
;

4135 
	`£tupResourûMasks
(
b¿nchToPCR
);

4136 
cUn™
->
loİAÇlysis
->
b¿nchToPCR
 = (
LIR
 *) branchToPCR;

4137 
	}
}

4139 #ià
defšed
(
WITH_SELF_VERIFICATION
)

4140 
boŞ
 
	$£lfV”ifiÿtiÚPuÁOps
(
MIR
 *
mœ
)

4142 
DecodedIn¡ruùiÚ
 *
decIn¢
 = &
mœ
->
d®vikIn¢
;

4149 
decIn¢
->
İcode
) {

4150 
OP_MONITOR_ENTER
:

4151 
OP_MONITOR_EXIT
:

4152 
OP_NEW_INSTANCE
:

4153 
OP_NEW_ARRAY
:

4154 
OP_CHECK_CAST
:

4155 
OP_MOVE_EXCEPTION
:

4156 
OP_FILL_ARRAY_DATA
:

4157 
OP_EXECUTE_INLINE
:

4158 
OP_EXECUTE_INLINE_RANGE
:

4159  
Œue
;

4161  
çl£
;

4163 
	}
}

4166 
	$dvmComp”MIR2LIR
(
Comp©iÚUn™
 *
cUn™
)

4169 
ArmLIR
 *
Ïb–Li¡
 =

4170 (
ArmLIR
 *è
	`dvmComp”New
((ArmLIRè* 
cUn™
->
numBlocks
, 
Œue
);

4171 
ArmLIR
 *
h—dLIR
 = 
NULL
;

4172 
GrowabËLi¡
 
chaššgLi¡ByTy³
[
kChaššgC–lG­
];

4173 
i
;

4178 
i
 = 0; i < 
kChaššgC–lG­
; i++) {

4179 
	`dvmIn™GrowabËLi¡
(&
chaššgLi¡ByTy³
[
i
], 2);

4183 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
dvmComp”CË¬Vis™edFÏg
,

4184 
kAÎNodes
, 
çl£
 );

4186 
GrowabËLi¡I‹¿tÜ
 
™”©Ü
;

4187 
	`dvmGrowabËLi¡I‹¿tÜIn™
(&
cUn™
->
blockLi¡
, &
™”©Ü
);

4190 
cUn™
->
´ofeCodeSize
 = 
	`g’T¿ûProfeEÁry
(cUnit);

4193 
i
 = 0; ; i++) {

4194 
MIR
 *
mœ
;

4195 
BasicBlock
 *
bb
 = (BasicBlock *è
	`dvmGrowabËLi¡I‹¿tÜNext
(&
™”©Ü
);

4196 ià(
bb
 =ğ
NULL
) ;

4197 ià(
bb
->
vis™ed
 =ğ
Œue
) ;

4199 
Ïb–Li¡
[
i
].
İ”ªds
[0] = 
bb
->
¡¬tOff£t
;

4201 ià(
bb
->
blockTy³
 >ğ
kChaššgC–lG­
) {

4202 ià(
bb
->
isF®lThroughFromInvoke
 =ğ
Œue
) {

4204 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoP£udoAlign4
);

4210 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è&
Ïb–Li¡
[
i
]);

4213 ià(
bb
->
blockTy³
 =ğ
kEÁryBlock
) {

4214 
Ïb–Li¡
[
i
].
İcode
 = 
kArmP£udoEÁryBlock
;

4215 ià(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
) {

4218 
	`£tupLoİEÁryBlock
(
cUn™
, 
bb
,

4219 &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

4221 } ià(
bb
->
blockTy³
 =ğ
kEx™Block
) {

4222 
Ïb–Li¡
[
i
].
İcode
 = 
kArmP£udoEx™Block
;

4223 
g’_çÎthrough
;

4224 } ià(
bb
->
blockTy³
 =ğ
kD®vikBy‹Code
) {

4225 ià(
bb
->
hidd’
 =ğ
Œue
) ;

4226 
Ïb–Li¡
[
i
].
İcode
 = 
kArmP£udoNÜm®BlockLab–
;

4228 
	`dvmComp”Re£tRegPoŞ
(
cUn™
);

4229 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

4230 
	`dvmComp”Re£tNuÎCheck
(
cUn™
);

4232 
bb
->
blockTy³
) {

4233 
kChaššgC–lNÜm®
:

4234 
Ïb–Li¡
[
i
].
İcode
 = 
kArmP£udoChaššgC–lNÜm®
;

4236 
	`dvmIn£¹GrowabËLi¡
(

4237 &
chaššgLi¡ByTy³
[
kChaššgC–lNÜm®
], 
i
);

4239 
kChaššgC–lInvokeSšgËtÚ
:

4240 
Ïb–Li¡
[
i
].
İcode
 =

4241 
kArmP£udoChaššgC–lInvokeSšgËtÚ
;

4242 
Ïb–Li¡
[
i
].
İ”ªds
[0] =

4243 (è
bb
->
cÚššgM‘hod
;

4245 
	`dvmIn£¹GrowabËLi¡
(

4246 &
chaššgLi¡ByTy³
[
kChaššgC–lInvokeSšgËtÚ
], 
i
);

4248 
kChaššgC–lInvokeP»diùed
:

4249 
Ïb–Li¡
[
i
].
İcode
 =

4250 
kArmP£udoChaššgC–lInvokeP»diùed
;

4257 
Ïb–Li¡
[
i
].
İ”ªds
[0] =†abelList[i].operands[1];

4259 
	`dvmIn£¹GrowabËLi¡
(

4260 &
chaššgLi¡ByTy³
[
kChaššgC–lInvokeP»diùed
], 
i
);

4262 
kChaššgC–lHÙ
:

4263 
Ïb–Li¡
[
i
].
İcode
 =

4264 
kArmP£udoChaššgC–lHÙ
;

4266 
	`dvmIn£¹GrowabËLi¡
(

4267 &
chaššgLi¡ByTy³
[
kChaššgC–lHÙ
], 
i
);

4269 
kPCRecÚ¡ruùiÚ
:

4271 
Ïb–Li¡
[
i
].
İcode
 =

4272 
kArmP£udoPCRecÚ¡ruùiÚBlockLab–
;

4273 
	`hªdËPCRecÚ¡ruùiÚ
(
cUn™
,

4274 &
Ïb–Li¡
[
cUn™
->
puÁBlock
->
id
]);

4276 
kExû±iÚHªdlšg
:

4277 
Ïb–Li¡
[
i
].
İcode
 = 
kArmP£udoEHBlockLab–
;

4278 ià(
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
numU£d
) {

4279 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
,

4280 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pPuÁ
),

4281 
r1
);

4282 
	`İReg
(
cUn™
, 
kOpBlx
, 
r1
);

4285 
kChaššgC–lBackw¬dB¿nch
:

4286 
Ïb–Li¡
[
i
].
İcode
 =

4287 
kArmP£udoChaššgC–lBackw¬dB¿nch
;

4289 
	`dvmIn£¹GrowabËLi¡
(

4290 &
chaššgLi¡ByTy³
[
kChaššgC–lBackw¬dB¿nch
],

4291 
i
);

4304 
BasicBlock
 *
ÃxtBB
 = 
bb
;‚extBB !ğ
NULL
;‚extBB = 
cUn™
->
ÃxtCodeg’Block
) {

4305 
bb
 = 
ÃxtBB
;

4306 
bb
->
vis™ed
 = 
Œue
;

4307 
cUn™
->
ÃxtCodeg’Block
 = 
NULL
;

4309 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

4311 
	`dvmComp”Re£tRegPoŞ
(
cUn™
);

4312 ià(
gDvmJ™
.
di§bËO±
 & (1 << 
kT¿ckLiveTemps
)) {

4313 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

4316 ià(
gDvmJ™
.
di§bËO±
 & (1 << 
kSuµ»ssLßds
)) {

4317 
	`dvmComp”Re£tDefT¿ckšg
(
cUn™
);

4320 ià(()
mœ
->
d®vikIn¢
.
İcode
 >ğ()
kMœOpFœ¡
) {

4321 
	`hªdËEx‹ndedMIR
(
cUn™
, 
mœ
);

4325 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

4326 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 =

4327 
	`dexG‘FÜm©FromOpcode
(
d®vikOpcode
);

4328 cÚ¡ *
nÙe
;

4329 ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED
) {

4330 
nÙe
 = " (I)";

4331 } ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_INLINED_PRED
) {

4332 
nÙe
 = " (PI)";

4333 } ià(
mœ
->
O±imiz©iÚFÏgs
 & 
MIR_CALLEE
) {

4334 
nÙe
 = " (C)";

4336 
nÙe
 = 
NULL
;

4339 
ArmLIR
 *
bound¬yLIR
;

4345 ià(
h—dLIR
 =ğ
NULL
 || 
cUn™
->
´štMe
 =ğ
Œue
) {

4346 
bound¬yLIR
 =

4347 
	`ÃwLIR2
(
cUn™
, 
kArmP£udoD®vikBy‹CodeBound¬y
,

4348 
mœ
->
off£t
,

4349 (è
	`dvmComp”G‘D®vikDi§s£mbly
(

4350 &
mœ
->
d®vikIn¢
, 
nÙe
));

4352 ià(
h—dLIR
 =ğ
NULL
) {

4353 
h—dLIR
 = 
bound¬yLIR
;

4355 
h—dLIR
->
defMask
 = 
ENCODE_ALL
;

4362 ià(
cUn™
->
´štMe
 && 
mœ
->
s§R•
) {

4363 *
s§SŒšg
 = 
	`dvmComp”G‘SSASŒšg
(
cUn™
,

4364 
mœ
->
s§R•
);

4365 
	`ÃwLIR1
(
cUn™
, 
kArmP£udoSSAR•
, (è
s§SŒšg
);

4368 
boŞ
 
nÙHªdËd
;

4373 
boŞ
 
sšgËS‹pMe
 = 
	`SINGLE_STEP_OP
(
d®vikOpcode
);

4374 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

4375 ià(
sšgËS‹pMe
 =ğ
çl£
) {

4376 
sšgËS‹pMe
 = 
	`£lfV”ifiÿtiÚPuÁOps
(
mœ
);

4379 ià(
sšgËS‹pMe
 || 
cUn™
->
®lSšgËS‹p
) {

4380 
nÙHªdËd
 = 
çl£
;

4381 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

4383 
İcodeCov”age
[
d®vikOpcode
]++;

4384 
d®vikFÜm©
) {

4385 
kFmt10t
:

4386 
kFmt20t
:

4387 
kFmt30t
:

4388 
nÙHªdËd
 = 
	`hªdËFmt10t_Fmt20t_Fmt30t
(
cUn™
,

4389 
mœ
, 
bb
, 
Ïb–Li¡
);

4391 
kFmt10x
:

4392 
nÙHªdËd
 = 
	`hªdËFmt10x
(
cUn™
, 
mœ
);

4394 
kFmt11n
:

4395 
kFmt31i
:

4396 
nÙHªdËd
 = 
	`hªdËFmt11n_Fmt31i
(
cUn™
, 
mœ
);

4398 
kFmt11x
:

4399 
nÙHªdËd
 = 
	`hªdËFmt11x
(
cUn™
, 
mœ
);

4401 
kFmt12x
:

4402 
nÙHªdËd
 = 
	`hªdËFmt12x
(
cUn™
, 
mœ
);

4404 
kFmt20bc
:

4405 
nÙHªdËd
 = 
	`hªdËFmt20bc
(
cUn™
, 
mœ
);

4407 
kFmt21c
:

4408 
kFmt31c
:

4409 
nÙHªdËd
 = 
	`hªdËFmt21c_Fmt31c
(
cUn™
, 
mœ
);

4411 
kFmt21h
:

4412 
nÙHªdËd
 = 
	`hªdËFmt21h
(
cUn™
, 
mœ
);

4414 
kFmt21s
:

4415 
nÙHªdËd
 = 
	`hªdËFmt21s
(
cUn™
, 
mœ
);

4417 
kFmt21t
:

4418 
nÙHªdËd
 = 
	`hªdËFmt21t
(
cUn™
, 
mœ
, 
bb
,

4419 
Ïb–Li¡
);

4421 
kFmt22b
:

4422 
kFmt22s
:

4423 
nÙHªdËd
 = 
	`hªdËFmt22b_Fmt22s
(
cUn™
, 
mœ
);

4425 
kFmt22c
:

4426 
nÙHªdËd
 = 
	`hªdËFmt22c
(
cUn™
, 
mœ
);

4428 
kFmt22cs
:

4429 
nÙHªdËd
 = 
	`hªdËFmt22cs
(
cUn™
, 
mœ
);

4431 
kFmt22t
:

4432 
nÙHªdËd
 = 
	`hªdËFmt22t
(
cUn™
, 
mœ
, 
bb
,

4433 
Ïb–Li¡
);

4435 
kFmt22x
:

4436 
kFmt32x
:

4437 
nÙHªdËd
 = 
	`hªdËFmt22x_Fmt32x
(
cUn™
, 
mœ
);

4439 
kFmt23x
:

4440 
nÙHªdËd
 = 
	`hªdËFmt23x
(
cUn™
, 
mœ
);

4442 
kFmt31t
:

4443 
nÙHªdËd
 = 
	`hªdËFmt31t
(
cUn™
, 
mœ
);

4445 
kFmt3rc
:

4446 
kFmt35c
:

4447 
nÙHªdËd
 = 
	`hªdËFmt35c_3rc
(
cUn™
, 
mœ
, 
bb
,

4448 
Ïb–Li¡
);

4450 
kFmt3rms
:

4451 
kFmt35ms
:

4452 
nÙHªdËd
 = 
	`hªdËFmt35ms_3rms
(
cUn™
, 
mœ
, 
bb
,

4453 
Ïb–Li¡
);

4455 
kFmt35mi
:

4456 
kFmt3rmi
:

4457 
nÙHªdËd
 = 
	`hªdËExecu‹IÆše
(
cUn™
, 
mœ
);

4459 
kFmt51l
:

4460 
nÙHªdËd
 = 
	`hªdËFmt51l
(
cUn™
, 
mœ
);

4463 
nÙHªdËd
 = 
Œue
;

4467 ià(
nÙHªdËd
) {

4468 
	`ALOGE
("%#06x: Opcode %#x (%s) / Fmt %d‚ot handled",

4469 
mœ
->
off£t
,

4470 
d®vikOpcode
, 
	`dexG‘OpcodeName
(dalvikOpcode),

4471 
d®vikFÜm©
);

4472 
	`dvmComp”AbÜt
(
cUn™
);

4478 ià(
bb
->
blockTy³
 =ğ
kEÁryBlock
) {

4479 
	`dvmComp”Aµ’dLIR
(
cUn™
,

4480 (
LIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToBody
);

4481 
	`dvmComp”Aµ’dLIR
(
cUn™
,

4482 (
LIR
 *è
cUn™
->
loİAÇlysis
->
b¿nchToPCR
);

4485 ià(
h—dLIR
) {

4490 
	`dvmComp”AµlyLoÿlO±imiz©iÚs
(
cUn™
, (
LIR
 *è
h—dLIR
,

4491 
cUn™
->
Ï¡LIRIn¢
);

4493 
h—dLIR
 = 
NULL
;

4496 
g’_çÎthrough
:

4501 ià(
bb
->
ÃedF®lThroughB¿nch
) {

4502 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

4507 
i
 = 0; i < 
kChaššgC–lG­
; i++) {

4508 
size_t
 
j
;

4509 *
blockIdLi¡
 = (*è
chaššgLi¡ByTy³
[
i
].
–emLi¡
;

4511 
cUn™
->
numChaššgC–ls
[
i
] = 
chaššgLi¡ByTy³
[i].
numU£d
;

4514 ià(
cUn™
->
numChaššgC–ls
[
i
] == 0)

4518 
cUn™
->
fœ¡ChaššgLIR
[
i
] = (
LIR
 *è&
Ïb–Li¡
[
blockIdLi¡
[0]];

4520 
j
 = 0; j < 
chaššgLi¡ByTy³
[
i
].
numU£d
; j++) {

4521 
blockId
 = 
blockIdLi¡
[
j
];

4522 
BasicBlock
 *
chaššgBlock
 =

4523 (
BasicBlock
 *è
	`dvmGrowabËLi¡G‘EËm’t
(&
cUn™
->
blockLi¡
,

4524 
blockId
);

4527 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoP£udoAlign4
);

4530 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è&
Ïb–Li¡
[
blockId
]);

4533 
chaššgBlock
->
blockTy³
) {

4534 
kChaššgC–lNÜm®
:

4535 
	`hªdËNÜm®ChaššgC–l
(
cUn™
, 
chaššgBlock
->
¡¬tOff£t
);

4537 
kChaššgC–lInvokeSšgËtÚ
:

4538 
	`hªdËInvokeSšgËtÚChaššgC–l
(
cUn™
,

4539 
chaššgBlock
->
cÚššgM‘hod
);

4541 
kChaššgC–lInvokeP»diùed
:

4542 
	`hªdËInvokeP»diùedChaššgC–l
(
cUn™
);

4544 
kChaššgC–lHÙ
:

4545 
	`hªdËHÙChaššgC–l
(
cUn™
, 
chaššgBlock
->
¡¬tOff£t
);

4547 
kChaššgC–lBackw¬dB¿nch
:

4548 
	`hªdËBackw¬dB¿nchChaššgC–l
(
cUn™
,

4549 
chaššgBlock
->
¡¬tOff£t
);

4552 
	`ALOGE
("Bad blockty³ %d", 
chaššgBlock
->
blockTy³
);

4553 
	`dvmComp”AbÜt
(
cUn™
);

4559 
cUn™
->
chaššgC–lBÙtom
 = (
LIR
 *è
	`ÃwLIR0
(cUn™, 
kArmChaššgC–lBÙtom
);

4565 ià(
cUn™
->
sw™chOv”æowPad
) {

4566 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (ècUn™->
sw™chOv”æowPad
);

4567 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
,

4568 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNoChaš
), 
r2
);

4569 
	`İRegReg
(
cUn™
, 
kOpAdd
, 
r1
,„1);

4570 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
r4PC
, 
r0
, 
r1
);

4571 #ià
	`defšed
(
WITH_JIT_TUNING
)

4572 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 
kSw™chOv”æow
);

4574 
	`İReg
(
cUn™
, 
kOpBlx
, 
r2
);

4577 
	`dvmComp”AµlyGlob®O±imiz©iÚs
(
cUn™
);

4579 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

4580 
	`£lfV”ifiÿtiÚB¿nchIn£¹Pass
(
cUn™
);

4582 
	}
}

4588 
boŞ
 
	$dvmComp”DoWÜk
(
Comp”WÜkOrd”
 *
wÜk
)

4590 
J™T¿ûDesütiÚ
 *
desc
;

4591 
boŞ
 
isCompe
;

4592 
boŞ
 
sucûss
 = 
Œue
;

4594 ià(
gDvmJ™
.
codeCacheFuÎ
) {

4595  
çl£
;

4598 
wÜk
->
kšd
) {

4599 
kWÜkOrd”T¿û
:

4600 
isCompe
 = 
Œue
;

4602 
desc
 = (
J™T¿ûDesütiÚ
 *)
wÜk
->
šfo
;

4603 
sucûss
 = 
	`dvmCompeT¿û
(
desc
, 
JIT_MAX_TRACE_LEN
, &
wÜk
->
»suÉ
,

4604 
wÜk
->
baPŒ
, 0 );

4606 
kWÜkOrd”T¿ûDebug
: {

4607 
boŞ
 
ŞdPrštMe
 = 
gDvmJ™
.
´štMe
;

4608 
gDvmJ™
.
´štMe
 = 
Œue
;

4609 
isCompe
 = 
Œue
;

4611 
desc
 = (
J™T¿ûDesütiÚ
 *)
wÜk
->
šfo
;

4612 
sucûss
 = 
	`dvmCompeT¿û
(
desc
, 
JIT_MAX_TRACE_LEN
, &
wÜk
->
»suÉ
,

4613 
wÜk
->
baPŒ
, 0 );

4614 
gDvmJ™
.
´štMe
 = 
ŞdPrštMe
;

4617 
kWÜkOrd”ProfeMode
:

4618 
	`dvmJ™ChªgeProfeMode
((
T¿ûProfšgModes
)()
wÜk
->
šfo
);

4619 
isCompe
 = 
çl£
;

4622 
isCompe
 = 
çl£
;

4623 
	`ALOGE
("Jit: unknown work orderype");

4624 
	`as£¹
(0);

4626 ià(!
sucûss
)

4627 
wÜk
->
»suÉ
.
codeAdd»ss
 = 
NULL
;

4628  
isCompe
;

4629 
	}
}

4632 
	$dvmComp”ArchDump
()

4635 
i
, 
¡¬t
, 
¡»ak
;

4636 
buf
[1024];

4638 
¡»ak
 = 
i
 = 0;

4639 
buf
[0] = 0;

4640 
İcodeCov”age
[
i
] =ğ0 && i < 
kNumPackedOpcodes
) {

4641 
i
++;

4643 ià(
i
 =ğ
kNumPackedOpcodes
) {

4646 
¡¬t
 = 
i
++, 
¡»ak
 = 1; i < 
kNumPackedOpcodes
; i++) {

4647 ià(
İcodeCov”age
[
i
]) {

4648 
¡»ak
++;

4650 ià(
¡»ak
 == 1) {

4651 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x,", 
¡¬t
);

4653 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x,", 
¡¬t
, s¹ + 
¡»ak
 - 1);

4655 
¡»ak
 = 0;

4656 
İcodeCov”age
[
i
] =ğ0 && i < 
kNumPackedOpcodes
) {

4657 
i
++;

4659 ià(
i
 < 
kNumPackedOpcodes
) {

4660 
¡»ak
 = 1;

4661 
¡¬t
 = 
i
;

4665 ià(
¡»ak
) {

4666 ià(
¡»ak
 == 1) {

4667 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x", 
¡¬t
);

4669 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x", 
¡¬t
, s¹ + 
¡»ak
 - 1);

4672 ià(
	`¡¾’
(
buf
)) {

4673 
	`ALOGD
("d®vik.vm.j™.İ = %s", 
buf
);

4675 
	}
}

4678 
boŞ
 
	$dvmComp”ArchIn™
()

4680 
i
;

4682 
i
 = 0; i < 
kArmLa¡
; i++) {

4683 ià(
EncodšgM­
[
i
].
İcode
 != i) {

4684 
	`ALOGE
("Encoding order for %s is wrong:ƒxpecting %d, seeing %d",

4685 
EncodšgM­
[
i
].
Çme
, i, EncodšgM­[i].
İcode
);

4686 
	`dvmAbÜt
();

4690  
	`dvmComp”ArchV¬ŸÁIn™
();

4691 
	}
}

4693 *
	$dvmComp”G‘IÁ”´‘Tem¶©e
()

4695  (*è(()
gDvmJ™
.
codeCache
 +

4696 
‹m¶©eEÁryOff£ts
[
TEMPLATE_INTERPRET
]);

4697 
	}
}

4699 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”G‘IÁ”´‘Tem¶©eS‘
()

4701  
DALVIK_JIT_ARM
;

4702 
	}
}

4705 
	$dvmComp”S‘upResourûMasks
(
ArmLIR
 *
lœ
)

4707 
	`£tupResourûMasks
(
lœ
);

4708 
	}
}

4711 
ArmLIR
* 
	$dvmComp”RegCİyNoIn£¹
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

4713  
	`g’RegCİyNoIn£¹
(
cUn™
, 
rDe¡
, 
rSrc
);

4714 
	}
}

4717 
ArmLIR
* 
	$dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

4719  
	`g’RegCİy
(
cUn™
, 
rDe¡
, 
rSrc
);

4720 
	}
}

4723 
	$dvmComp”RegCİyWide
(
Comp©iÚUn™
 *
cUn™
, 
de¡Lo
, 
de¡Hi
,

4724 
¤cLo
, 
¤cHi
)

4726 
	`g’RegCİyWide
(
cUn™
, 
de¡Lo
, 
de¡Hi
, 
¤cLo
, 
¤cHi
);

4727 
	}
}

4729 
	$dvmComp”FlushRegIm¶
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

4730 
di¥Ïûm’t
, 
rSrc
, 
OpSize
 
size
)

4732 
	`¡ÜeBa£Di¥
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrc
, 
size
);

4733 
	}
}

4735 
	$dvmComp”FlushRegWideIm¶
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

4736 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
)

4738 
	`¡ÜeBa£Di¥Wide
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
);

4739 
	}
}

	@vm/compiler/codegen/arm/FP/Thumb2VFP.cpp

17 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

18 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

19 
RegLoÿtiÚ
 
¾Src2
)

21 
İ
 = 
kThumbBk±
;

22 
RegLoÿtiÚ
 
¾ResuÉ
;

28 
mœ
->
d®vikIn¢
.
İcode
) {

29 
OP_ADD_FLOAT_2ADDR
:

30 
OP_ADD_FLOAT
:

31 
İ
 = 
kThumb2Vadds
;

33 
OP_SUB_FLOAT_2ADDR
:

34 
OP_SUB_FLOAT
:

35 
İ
 = 
kThumb2Vsubs
;

37 
OP_DIV_FLOAT_2ADDR
:

38 
OP_DIV_FLOAT
:

39 
İ
 = 
kThumb2Vdivs
;

41 
OP_MUL_FLOAT_2ADDR
:

42 
OP_MUL_FLOAT
:

43 
İ
 = 
kThumb2Vmuls
;

45 
OP_REM_FLOAT_2ADDR
:

46 
OP_REM_FLOAT
:

47 
OP_NEG_FLOAT
: {

48  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
,

49 
¾Src2
);

52  
Œue
;

54 
¾Src1
 = 
	`lßdV®ue
(
cUn™
,„lSrc1, 
kFPReg
);

55 
¾Src2
 = 
	`lßdV®ue
(
cUn™
,„lSrc2, 
kFPReg
);

56 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

57 
	`ÃwLIR3
(
cUn™
, (
ArmOpcode
)
İ
, 
¾ResuÉ
.
lowReg
, 
¾Src1
.lowReg,

58 
¾Src2
.
lowReg
);

59 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

60  
çl£
;

61 
	}
}

63 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

64 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

65 
RegLoÿtiÚ
 
¾Src2
)

67 
İ
 = 
kThumbBk±
;

68 
RegLoÿtiÚ
 
¾ResuÉ
;

70 
mœ
->
d®vikIn¢
.
İcode
) {

71 
OP_ADD_DOUBLE_2ADDR
:

72 
OP_ADD_DOUBLE
:

73 
İ
 = 
kThumb2Vaddd
;

75 
OP_SUB_DOUBLE_2ADDR
:

76 
OP_SUB_DOUBLE
:

77 
İ
 = 
kThumb2Vsubd
;

79 
OP_DIV_DOUBLE_2ADDR
:

80 
OP_DIV_DOUBLE
:

81 
İ
 = 
kThumb2Vdivd
;

83 
OP_MUL_DOUBLE_2ADDR
:

84 
OP_MUL_DOUBLE
:

85 
İ
 = 
kThumb2Vmuld
;

87 
OP_REM_DOUBLE_2ADDR
:

88 
OP_REM_DOUBLE
:

89 
OP_NEG_DOUBLE
: {

90  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
,

91 
¾Src2
);

94  
Œue
;

97 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kFPReg
);

98 
	`as£¹
(
¾Src1
.
wide
);

99 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kFPReg
);

100 
	`as£¹
(
¾Src2
.
wide
);

101 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

102 
	`as£¹
(
¾De¡
.
wide
);

103 
	`as£¹
(
¾ResuÉ
.
wide
);

104 
	`ÃwLIR3
(
cUn™
, (
ArmOpcode
)
İ
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

105 
	`S2D
(
¾Src1
.
lowReg
,„lSrc1.
highReg
),

106 
	`S2D
(
¾Src2
.
lowReg
,„lSrc2.
highReg
));

107 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

108  
çl£
;

109 
	}
}

111 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

113 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

114 
İ
 = 
kThumbBk±
;

115 
boŞ
 
lÚgSrc
 = 
çl£
;

116 
boŞ
 
lÚgDe¡
 = 
çl£
;

117 
¤cReg
;

118 
RegLoÿtiÚ
 
¾Src
;

119 
RegLoÿtiÚ
 
¾De¡
;

120 
RegLoÿtiÚ
 
¾ResuÉ
;

122 
İcode
) {

123 
OP_INT_TO_FLOAT
:

124 
lÚgSrc
 = 
çl£
;

125 
lÚgDe¡
 = 
çl£
;

126 
İ
 = 
kThumb2VcvtIF
;

128 
OP_FLOAT_TO_INT
:

129 
lÚgSrc
 = 
çl£
;

130 
lÚgDe¡
 = 
çl£
;

131 
İ
 = 
kThumb2VcvtFI
;

133 
OP_DOUBLE_TO_FLOAT
:

134 
lÚgSrc
 = 
Œue
;

135 
lÚgDe¡
 = 
çl£
;

136 
İ
 = 
kThumb2VcvtDF
;

138 
OP_FLOAT_TO_DOUBLE
:

139 
lÚgSrc
 = 
çl£
;

140 
lÚgDe¡
 = 
Œue
;

141 
İ
 = 
kThumb2VcvtFd
;

143 
OP_INT_TO_DOUBLE
:

144 
lÚgSrc
 = 
çl£
;

145 
lÚgDe¡
 = 
Œue
;

146 
İ
 = 
kThumb2VcvtID
;

148 
OP_DOUBLE_TO_INT
:

149 
lÚgSrc
 = 
Œue
;

150 
lÚgDe¡
 = 
çl£
;

151 
İ
 = 
kThumb2VcvtDI
;

153 
OP_LONG_TO_DOUBLE
:

154 
OP_FLOAT_TO_LONG
:

155 
OP_LONG_TO_FLOAT
:

156 
OP_DOUBLE_TO_LONG
:

157  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

159  
Œue
;

161 ià(
lÚgSrc
) {

162 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

163 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kFPReg
);

164 
¤cReg
 = 
	`S2D
(
¾Src
.
lowReg
,„lSrc.
highReg
);

166 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

167 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kFPReg
);

168 
¤cReg
 = 
¾Src
.
lowReg
;

170 ià(
lÚgDe¡
) {

171 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

172 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

173 
	`ÃwLIR2
(
cUn™
, (
ArmOpcode
)
İ
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

174 
¤cReg
);

175 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

177 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

178 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

179 
	`ÃwLIR2
(
cUn™
, (
ArmOpcode
)
İ
, 
¾ResuÉ
.
lowReg
, 
¤cReg
);

180 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

182  
çl£
;

183 
	}
}

185 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

187 
ArmLIR
 *
b¿nch
;

188 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

189 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘Wide
(
cUn™
, 
mœ
, 
Œue
);

190 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kFPReg
);

191 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

192 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vsq¹d
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

193 
	`S2D
(
¾Src
.
lowReg
,„lSrc.
highReg
));

194 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vcmpd
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

195 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
));

196 
	`ÃwLIR0
(
cUn™
, 
kThumb2Fm¡©
);

197 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbBCÚd
, 0, 
kArmCÚdEq
);

198 
	`dvmComp”Clobb”C®lRegs
(
cUn™
);

199 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r2
, (è((*)()è
sq¹
);

200 
	`ÃwLIR3
(
cUn™
, 
kThumb2Fm¼d
, 
r0
, 
r1
, 
	`S2D
(
¾Src
.
lowReg
,„lSrc.
highReg
));

201 
	`ÃwLIR1
(
cUn™
, 
kThumbBlxR
, 
r2
);

202 
	`ÃwLIR3
(
cUn™
, 
kThumb2Fmd¼
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

203 
r0
, 
r1
);

204 
ArmLIR
 *
Ïb–
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

205 
Ïb–
->
defMask
 = 
ENCODE_ALL
;

206 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)
Ïb–
;

207 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

208  
çl£
;

209 
	}
}

211 
boŞ
 
	$g’CmpFP
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
RegLoÿtiÚ
 
¾De¡
,

212 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

214 
boŞ
 
isDoubË
;

215 
deçuÉResuÉ
;

216 
RegLoÿtiÚ
 
¾ResuÉ
;

218 
mœ
->
d®vikIn¢
.
İcode
) {

219 
OP_CMPL_FLOAT
:

220 
isDoubË
 = 
çl£
;

221 
deçuÉResuÉ
 = -1;

223 
OP_CMPG_FLOAT
:

224 
isDoubË
 = 
çl£
;

225 
deçuÉResuÉ
 = 1;

227 
OP_CMPL_DOUBLE
:

228 
isDoubË
 = 
Œue
;

229 
deçuÉResuÉ
 = -1;

231 
OP_CMPG_DOUBLE
:

232 
isDoubË
 = 
Œue
;

233 
deçuÉResuÉ
 = 1;

236  
Œue
;

238 ià(
isDoubË
) {

239 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kFPReg
);

240 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kFPReg
);

241 
	`dvmComp”Clobb”SReg
(
cUn™
, 
¾De¡
.
sRegLow
);

242 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

243 
	`lßdCÚ¡ªt
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
deçuÉResuÉ
);

244 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vcmpd
, 
	`S2D
(
¾Src1
.
lowReg
, 
r1Src2
.
highReg
),

245 
	`S2D
(
¾Src2
.
lowReg
,„lSrc2.
highReg
));

247 
¾Src1
 = 
	`lßdV®ue
(
cUn™
,„lSrc1, 
kFPReg
);

248 
¾Src2
 = 
	`lßdV®ue
(
cUn™
,„lSrc2, 
kFPReg
);

249 
	`dvmComp”Clobb”SReg
(
cUn™
, 
¾De¡
.
sRegLow
);

250 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

251 
	`lßdCÚ¡ªt
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
deçuÉResuÉ
);

252 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vcmps
, 
¾Src1
.
lowReg
, 
¾Src2
.lowReg);

254 
	`as£¹
(!
	`FPREG
(
¾ResuÉ
.
lowReg
));

255 
	`ÃwLIR0
(
cUn™
, 
kThumb2Fm¡©
);

257 
	`g’IT
(
cUn™
, (
deçuÉResuÉ
 =ğ-1è? 
kArmCÚdGt
 : 
kArmCÚdMi
, "");

258 
	`ÃwLIR2
(
cUn™
, 
kThumb2MovImmShiá
, 
¾ResuÉ
.
lowReg
,

259 
	`modif›dImmedŸ‹
(-
deçuÉResuÉ
));

260 
	`g’B¬r›r
(
cUn™
);

262 
	`g’IT
(
cUn™
, 
kArmCÚdEq
, "");

263 
	`lßdCÚ¡ªt
(
cUn™
, 
¾ResuÉ
.
lowReg
, 0);

264 
	`g’B¬r›r
(
cUn™
);

266 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

267  
çl£
;

268 
	}
}

	@vm/compiler/codegen/arm/FP/ThumbPortableFP.cpp

18 
boŞ
 
g’Ar™hOpFlßtPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

19 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

20 
RegLoÿtiÚ
 
¾Src2
);

22 
boŞ
 
g’Ar™hOpDoubËPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

23 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

24 
RegLoÿtiÚ
 
¾Src2
);

26 
boŞ
 
g’CÚv”siÚPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

28 
boŞ
 
hªdËExecu‹IÆšeC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

30 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

32  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

33 
	}
}

35 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

36 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

37 
RegLoÿtiÚ
 
¾Src2
)

39  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

40 
	}
}

42 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

43 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

44 
RegLoÿtiÚ
 
¾Src2
)

46  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

47 
	}
}

49 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

51  
	`hªdËExecu‹IÆšeC
(
cUn™
, 
mœ
);

52 
	}
}

54 
boŞ
 
	$g’CmpFP
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
RegLoÿtiÚ
 
¾De¡
,

55 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

57 
RegLoÿtiÚ
 
¾ResuÉ
 = 
LOC_C_RETURN
;

62 
mœ
->
d®vikIn¢
.
İcode
) {

63 
OP_CMPL_FLOAT
:

64 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src1
, 
r0
);

65 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src2
, 
r1
);

66 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPL_FLOAT
);

67 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

69 
OP_CMPG_FLOAT
:

70 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src1
, 
r0
);

71 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src2
, 
r1
);

72 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPG_FLOAT
);

73 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

75 
OP_CMPL_DOUBLE
:

76 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

77 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

78 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPL_DOUBLE
);

79 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

81 
OP_CMPG_DOUBLE
:

82 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

83 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

84 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPG_DOUBLE
);

85 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

88  
Œue
;

90  
çl£
;

91 
	}
}

	@vm/compiler/codegen/arm/FP/ThumbVFP.cpp

27 
	$lßdV®ueAdd»ssDœeù
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾Src
,

28 
rDe¡
)

30 
¾Src
 =„lSrc.
wide
 ? 
	`dvmComp”Upd©eLocWide
(
cUn™
,„lSrc) :

31 
	`dvmComp”Upd©eLoc
(
cUn™
, 
¾Src
);

32 ià(
¾Src
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

33 ià(
¾Src
.
wide
) {

34 
	`dvmComp”FlushRegWide
(
cUn™
, 
¾Src
.
lowReg
,„lSrc.
highReg
);

36 
	`dvmComp”FlushReg
(
cUn™
, 
¾Src
.
lowReg
);

39 
	`dvmComp”Clobb”
(
cUn™
, 
rDe¡
);

40 
	`dvmComp”LockTemp
(
cUn™
, 
rDe¡
);

41 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
rDe¡
, 
r5FP
,

42 
	`dvmComp”S2VReg
(
cUn™
, 
¾Src
.
sRegLow
) << 2);

43 
	}
}

45 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

47 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

48 
RegLoÿtiÚ
 
¾ResuÉ
 = 
LOC_C_RETURN_WIDE
;

49 
RegLoÿtiÚ
 
¾De¡
 = 
LOC_DALVIK_RETURN_VAL_WIDE
;

50 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src
, 
r2
);

51 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SQRT_DOUBLE_VFP
);

52 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

53  
çl£
;

54 
	}
}

64 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

65 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

66 
RegLoÿtiÚ
 
¾Src2
)

68 
Tem¶©eOpcode
 
İcode
;

74 
mœ
->
d®vikIn¢
.
İcode
) {

75 
OP_ADD_FLOAT_2ADDR
:

76 
OP_ADD_FLOAT
:

77 
İcode
 = 
TEMPLATE_ADD_FLOAT_VFP
;

79 
OP_SUB_FLOAT_2ADDR
:

80 
OP_SUB_FLOAT
:

81 
İcode
 = 
TEMPLATE_SUB_FLOAT_VFP
;

83 
OP_DIV_FLOAT_2ADDR
:

84 
OP_DIV_FLOAT
:

85 
İcode
 = 
TEMPLATE_DIV_FLOAT_VFP
;

87 
OP_MUL_FLOAT_2ADDR
:

88 
OP_MUL_FLOAT
:

89 
İcode
 = 
TEMPLATE_MUL_FLOAT_VFP
;

91 
OP_REM_FLOAT_2ADDR
:

92 
OP_REM_FLOAT
:

93 
OP_NEG_FLOAT
: {

94  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
, 
¾Src2
);

97  
Œue
;

99 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾De¡
, 
r0
);

100 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src1
, 
r1
);

101 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src2
, 
r2
);

102 
	`g’Di¥©chToHªdËr
(
cUn™
, 
İcode
);

103 
¾De¡
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lDest);

104 ià(
¾De¡
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

105 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
lowReg
);

107  
çl£
;

108 
	}
}

110 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

111 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

112 
RegLoÿtiÚ
 
¾Src2
)

114 
Tem¶©eOpcode
 
İcode
;

116 
mœ
->
d®vikIn¢
.
İcode
) {

117 
OP_ADD_DOUBLE_2ADDR
:

118 
OP_ADD_DOUBLE
:

119 
İcode
 = 
TEMPLATE_ADD_DOUBLE_VFP
;

121 
OP_SUB_DOUBLE_2ADDR
:

122 
OP_SUB_DOUBLE
:

123 
İcode
 = 
TEMPLATE_SUB_DOUBLE_VFP
;

125 
OP_DIV_DOUBLE_2ADDR
:

126 
OP_DIV_DOUBLE
:

127 
İcode
 = 
TEMPLATE_DIV_DOUBLE_VFP
;

129 
OP_MUL_DOUBLE_2ADDR
:

130 
OP_MUL_DOUBLE
:

131 
İcode
 = 
TEMPLATE_MUL_DOUBLE_VFP
;

133 
OP_REM_DOUBLE_2ADDR
:

134 
OP_REM_DOUBLE
:

135 
OP_NEG_DOUBLE
: {

136  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
¾De¡
, 
¾Src1
,

137 
¾Src2
);

140  
Œue
;

142 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾De¡
, 
r0
);

143 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src1
, 
r1
);

144 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src2
, 
r2
);

145 
	`g’Di¥©chToHªdËr
(
cUn™
, 
İcode
);

146 
¾De¡
 = 
	`dvmComp”Upd©eLocWide
(
cUn™
,„lDest);

147 ià(
¾De¡
.
loÿtiÚ
 =ğ
kLocPhysReg
) {

148 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
lowReg
);

149 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
highReg
);

151  
çl£
;

152 
	}
}

154 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

156 
Opcode
 
İcode
 = 
mœ
->
d®vikIn¢
.opcode;

157 
boŞ
 
lÚgSrc
 = 
çl£
;

158 
boŞ
 
lÚgDe¡
 = 
çl£
;

159 
RegLoÿtiÚ
 
¾Src
;

160 
RegLoÿtiÚ
 
¾De¡
;

161 
Tem¶©eOpcode
 
‹m¶©eOpcode
;

162 
İcode
) {

163 
OP_INT_TO_FLOAT
:

164 
lÚgSrc
 = 
çl£
;

165 
lÚgDe¡
 = 
çl£
;

166 
‹m¶©eOpcode
 = 
TEMPLATE_INT_TO_FLOAT_VFP
;

168 
OP_FLOAT_TO_INT
:

169 
lÚgSrc
 = 
çl£
;

170 
lÚgDe¡
 = 
çl£
;

171 
‹m¶©eOpcode
 = 
TEMPLATE_FLOAT_TO_INT_VFP
;

173 
OP_DOUBLE_TO_FLOAT
:

174 
lÚgSrc
 = 
Œue
;

175 
lÚgDe¡
 = 
çl£
;

176 
‹m¶©eOpcode
 = 
TEMPLATE_DOUBLE_TO_FLOAT_VFP
;

178 
OP_FLOAT_TO_DOUBLE
:

179 
lÚgSrc
 = 
çl£
;

180 
lÚgDe¡
 = 
Œue
;

181 
‹m¶©eOpcode
 = 
TEMPLATE_FLOAT_TO_DOUBLE_VFP
;

183 
OP_INT_TO_DOUBLE
:

184 
lÚgSrc
 = 
çl£
;

185 
lÚgDe¡
 = 
Œue
;

186 
‹m¶©eOpcode
 = 
TEMPLATE_INT_TO_DOUBLE_VFP
;

188 
OP_DOUBLE_TO_INT
:

189 
lÚgSrc
 = 
Œue
;

190 
lÚgDe¡
 = 
çl£
;

191 
‹m¶©eOpcode
 = 
TEMPLATE_DOUBLE_TO_INT_VFP
;

193 
OP_LONG_TO_DOUBLE
:

194 
OP_FLOAT_TO_LONG
:

195 
OP_LONG_TO_FLOAT
:

196 
OP_DOUBLE_TO_LONG
:

197  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

199  
Œue
;

202 ià(
lÚgSrc
) {

203 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

205 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

208 ià(
lÚgDe¡
) {

209 
¾De¡
 = 
	`dvmComp”G‘De¡Wide
(
cUn™
, 
mœ
, 0, 1);

211 
¾De¡
 = 
	`dvmComp”G‘De¡
(
cUn™
, 
mœ
, 0);

213 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾De¡
, 
r0
);

214 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src
, 
r1
);

215 
	`g’Di¥©chToHªdËr
(
cUn™
, 
‹m¶©eOpcode
);

216 ià(
¾De¡
.
wide
) {

217 
¾De¡
 = 
	`dvmComp”Upd©eLocWide
(
cUn™
,„lDest);

218 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
highReg
);

220 
¾De¡
 = 
	`dvmComp”Upd©eLoc
(
cUn™
,„lDest);

222 
	`dvmComp”Clobb”
(
cUn™
, 
¾De¡
.
lowReg
);

223  
çl£
;

224 
	}
}

226 
boŞ
 
	$g’CmpFP
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
RegLoÿtiÚ
 
¾De¡
,

227 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

229 
Tem¶©eOpcode
 
‹m¶©eOpcode
;

230 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

231 
boŞ
 
wide
 = 
Œue
;

233 
mœ
->
d®vikIn¢
.
İcode
) {

234 
OP_CMPL_FLOAT
:

235 
‹m¶©eOpcode
 = 
TEMPLATE_CMPL_FLOAT_VFP
;

236 
wide
 = 
çl£
;

238 
OP_CMPG_FLOAT
:

239 
‹m¶©eOpcode
 = 
TEMPLATE_CMPG_FLOAT_VFP
;

240 
wide
 = 
çl£
;

242 
OP_CMPL_DOUBLE
:

243 
‹m¶©eOpcode
 = 
TEMPLATE_CMPL_DOUBLE_VFP
;

245 
OP_CMPG_DOUBLE
:

246 
‹m¶©eOpcode
 = 
TEMPLATE_CMPG_DOUBLE_VFP
;

249  
Œue
;

251 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src1
, 
r0
);

252 
	`lßdV®ueAdd»ssDœeù
(
cUn™
, 
¾Src2
, 
r1
);

253 
	`g’Di¥©chToHªdËr
(
cUn™
, 
‹m¶©eOpcode
);

254 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

255  
çl£
;

256 
	}
}

	@vm/compiler/codegen/arm/GlobalOptimizations.cpp

17 
	~"D®vik.h
"

18 
	~"vm/comp”/Comp”IÁ”Çls.h
"

19 
	~"ArmLIR.h
"

25 
	$­¶yRedundªtB¿nchElimš©iÚ
(
Comp©iÚUn™
 *
cUn™
)

27 
ArmLIR
 *
thisLIR
;

29 
thisLIR
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;

30 
thisLIR
 !ğ(
ArmLIR
 *è
cUn™
->
Ï¡LIRIn¢
;

31 
thisLIR
 = 
	`NEXT_LIR
(thisLIR)) {

34 ià(
thisLIR
->
İcode
 =ğ
kThumbBUncÚd
) {

35 
ArmLIR
 *
ÃxtLIR
 = 
thisLIR
;

37 
Œue
) {

38 
ÃxtLIR
 = 
	`NEXT_LIR
(nextLIR);

43 ià(
ÃxtLIR
 =ğ(
ArmLIR
 *è
thisLIR
->
g’”ic
.
rg‘
) {

44 
thisLIR
->
æags
.
isNİ
 = 
Œue
;

54 ià(!
	`isP£udoOpcode
(
ÃxtLIR
->
İcode
) ||

55 (
ÃxtLIR
 = (
ArmLIR
 *è
cUn™
->
Ï¡LIRIn¢
))

60 
	}
}

62 
	$dvmComp”AµlyGlob®O±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
)

64 
	`­¶yRedundªtB¿nchElimš©iÚ
(
cUn™
);

65 
	}
}

	@vm/compiler/codegen/arm/LocalOptimizations.cpp

17 
	~"D®vik.h
"

18 
	~"vm/comp”/Comp”IÁ”Çls.h
"

19 
	~"ArmLIR.h
"

20 
	~"Codeg’.h
"

22 
	#DEBUG_OPT
(
X
)

	)

25 
	#CHECK_REG_DEP
(
u£
, 
def
, 
check
è((deà& check->
u£Mask
) || \

26 ((
u£
 | 
def
è& 
check
->
defMask
))

	)

29 
	#MAX_HOIST_DISTANCE
 20

	)

30 
	#LDLD_DISTANCE
 4

	)

31 
	#LD_LATENCY
 2

	)

33 
šlše
 
boŞ
 
	$isD®vikRegi¡”Clobb”ed
(
ArmLIR
 *
lœ1
, ArmLIR *
lœ2
)

35 
»g1Lo
 = 
	`DECODE_ALIAS_INFO_REG
(
lœ1
->
®ŸsInfo
);

36 
»g1Hi
 = 
»g1Lo
 + 
	`DECODE_ALIAS_INFO_WIDE
(
lœ1
->
®ŸsInfo
);

37 
»g2Lo
 = 
	`DECODE_ALIAS_INFO_REG
(
lœ2
->
®ŸsInfo
);

38 
»g2Hi
 = 
»g2Lo
 + 
	`DECODE_ALIAS_INFO_WIDE
(
lœ2
->
®ŸsInfo
);

40  (
»g1Lo
 =ğ
»g2Lo
è|| (»g1LØ=ğ
»g2Hi
è|| (
»g1Hi
 ==„eg2Lo);

41 
	}
}

45 
	$dumpD•’d’tIn¢Paœ
(
ArmLIR
 *
thisLIR
, ArmLIR *
checkLIR
,

46 cÚ¡ *
İtimiz©iÚ
)

48 
	`ALOGD
("************ % ************", 
İtimiz©iÚ
);

49 
	`dvmDumpLIRIn¢
((
LIR
 *è
thisLIR
, 0);

50 
	`dvmDumpLIRIn¢
((
LIR
 *è
checkLIR
, 0);

51 
	}
}

55 
	$cÚv”tMemOpIÁoMove
(
Comp©iÚUn™
 *
cUn™
, 
ArmLIR
 *
ÜigLIR
,

56 
de¡
, 
¤c
)

59 
ArmLIR
 *
moveLIR
;

60 
moveLIR
 = 
	`dvmComp”RegCİyNoIn£¹
Ğ
cUn™
, 
de¡
, 
¤c
);

67 
	`dvmComp”In£¹LIRAá”
((
LIR
 *è
ÜigLIR
, (LIR *è
moveLIR
);

68 
	}
}

88 
	$­¶yLßdStÜeElimš©iÚ
(
Comp©iÚUn™
 *
cUn™
,

89 
ArmLIR
 *
h—dLIR
,

90 
ArmLIR
 *
LIR
)

92 
ArmLIR
 *
thisLIR
;

94 ià(
h—dLIR
 =ğ
LIR
) ;

96 
thisLIR
 = 
	`PREV_LIR
(
LIR
);

97 
thisLIR
 !ğ
h—dLIR
;

98 
thisLIR
 = 
	`PREV_LIR
(thisLIR)) {

99 
sškDi¡ªû
 = 0;

102 ià((
thisLIR
->
æags
.
isNİ
 =ğ
Œue
) ||

103 
	`isP£udoOpcode
(
thisLIR
->
İcode
) ||

104 !(
EncodšgM­
[
thisLIR
->
İcode
].
æags
 & (
IS_LOAD
 | 
IS_STORE
))) {

108 
ÇtiveRegId
 = 
thisLIR
->
İ”ªds
[0];

109 
boŞ
 
isThisLIRLßd
 = 
EncodšgM­
[
thisLIR
->
İcode
].
æags
 & 
IS_LOAD
;

110 
ArmLIR
 *
checkLIR
;

112 
u8
 
thisMemMask
 = (
thisLIR
->
u£Mask
 |hisLIR->
defMask
è& 
ENCODE_MEM
;

118 ià(!(
thisMemMask
 & (
ENCODE_LITERAL
 | 
ENCODE_DALVIK_REG
))) ;

126 
u8
 
¡İU£RegMask
 = (
ENCODE_REG_PC
 | 
thisLIR
->
u£Mask
) &

127 ~
ENCODE_MEM
;

128 
u8
 
¡İDefRegMask
 = 
thisLIR
->
defMask
 & ~
ENCODE_MEM
;

130 
checkLIR
 = 
	`NEXT_LIR
(
thisLIR
);

131 
checkLIR
 !ğ
LIR
;

132 
checkLIR
 = 
	`NEXT_LIR
(checkLIR)) {

138 ià(
checkLIR
->
æags
.
isNİ
) ;

140 
u8
 
checkMemMask
 = (
checkLIR
->
u£Mask
 | checkLIR->
defMask
) &

141 
ENCODE_MEM
;

142 
u8
 
®ŸsCÚd™iÚ
 = 
thisMemMask
 & 
checkMemMask
;

143 
boŞ
 
¡İH”e
 = 
çl£
;

148 ià(
checkMemMask
 !ğ
ENCODE_MEM
 && 
®ŸsCÚd™iÚ
 != 0) {

149 
boŞ
 
isCheckLIRLßd
 = 
EncodšgM­
[
checkLIR
->
İcode
].
æags
 &

150 
IS_LOAD
;

151 ià(
®ŸsCÚd™iÚ
 =ğ
ENCODE_LITERAL
) {

156 
	`as£¹
(!(
EncodšgM­
[
checkLIR
->
İcode
].
æags
 &

157 
IS_STORE
));

159 ià(
checkLIR
->
®ŸsInfo
 =ğ
thisLIR
->aliasInfo &&

160 
	`REGTYPE
(
checkLIR
->
İ”ªds
[0]è=ğREGTYPE(
ÇtiveRegId
)){

165 ià(
checkLIR
->
İ”ªds
[0] !ğ
ÇtiveRegId
) {

166 
	`cÚv”tMemOpIÁoMove
(
cUn™
, 
checkLIR
,

167 
checkLIR
->
İ”ªds
[0],

168 
ÇtiveRegId
);

170 
checkLIR
->
æags
.
isNİ
 = 
Œue
;

172 } ià(
®ŸsCÚd™iÚ
 =ğ
ENCODE_DALVIK_REG
) {

174 ià(
checkLIR
->
®ŸsInfo
 =ğ
thisLIR
->aliasInfo) {

176 
boŞ
 
»gCom·tibË
 =

177 
	`REGTYPE
(
checkLIR
->
İ”ªds
[0]) ==

178 
	`REGTYPE
(
ÇtiveRegId
);

179 ià((
isThisLIRLßd
 && 
isCheckLIRLßd
) ||

180 (!
isThisLIRLßd
 && 
isCheckLIRLßd
)) {

182 ià(
»gCom·tibË
) {

187 ià(
checkLIR
->
İ”ªds
[0] !=

188 
ÇtiveRegId
) {

189 
	`cÚv”tMemOpIÁoMove
(
cUn™
,

190 
checkLIR
,

191 
checkLIR
->
İ”ªds
[0],

192 
ÇtiveRegId
);

194 
checkLIR
->
æags
.
isNİ
 = 
Œue
;

201 
¡İH”e
 = 
Œue
;

203 } ià(
isThisLIRLßd
 && !
isCheckLIRLßd
) {

205 
¡İH”e
 = 
Œue
;

206 } ià(!
isThisLIRLßd
 && !
isCheckLIRLßd
) {

208 
thisLIR
->
æags
.
isNİ
 = 
Œue
;

209 
¡İH”e
 = 
Œue
;

212 } ià(
	`isD®vikRegi¡”Clobb”ed
(
thisLIR
, 
checkLIR
)) {

219 
¡İH”e
 = 
Œue
;

223 ià(
¡İH”e
) {

226 } ià(
checkLIR
->
æags
.
isNİ
) {

237 ià(
¡İH”e
 =ğ
çl£
) {

238 
¡İH”e
 = 
	`CHECK_REG_DEP
(
¡İU£RegMask
, 
¡İDefRegMask
,

239 
checkLIR
);

242 ià(
¡İH”e
 =ğ
Œue
) {

243 
	`DEBUG_OPT
(
	`dumpD•’d’tIn¢Paœ
(
thisLIR
, 
checkLIR
,

246 ià(
sškDi¡ªû
 && !
isThisLIRLßd
) {

247 
ArmLIR
 *
ÃwStÜeLIR
 =

248 (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

249 *
ÃwStÜeLIR
 = *
thisLIR
;

255 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
checkLIR
,

256 (
LIR
 *è
ÃwStÜeLIR
);

257 
thisLIR
->
æags
.
isNİ
 = 
Œue
;

260 } ià(!
checkLIR
->
æags
.
isNİ
) {

261 
sškDi¡ªû
++;

265 
	}
}

271 
	$­¶yLßdHoi¡šg
(
Comp©iÚUn™
 *
cUn™
,

272 
ArmLIR
 *
h—dLIR
,

273 
ArmLIR
 *
LIR
)

275 
ArmLIR
 *
thisLIR
, *
checkLIR
;

280 
ArmLIR
 *
´evIn¡Li¡
[
MAX_HOIST_DISTANCE
];

283 ià(
h—dLIR
 =ğ
LIR
) ;

286 
thisLIR
 = 
	`NEXT_LIR
(
h—dLIR
);

287 
thisLIR
 !ğ
LIR
;

288 
thisLIR
 = 
	`NEXT_LIR
(thisLIR)) {

291 ià((
thisLIR
->
æags
.
isNİ
 =ğ
Œue
) ||

292 
	`isP£udoOpcode
(
thisLIR
->
İcode
) ||

293 !(
EncodšgM­
[
thisLIR
->
İcode
].
æags
 & 
IS_LOAD
)) {

297 
u8
 
¡İU£AÎMask
 = 
thisLIR
->
u£Mask
;

305 ià(
¡İU£AÎMask
 & 
ENCODE_HEAP_REF
) {

306 
¡İU£AÎMask
 |ğ
ENCODE_REG_PC
;

310 
u8
 
¡İU£RegMask
 = 
¡İU£AÎMask
 & ~
ENCODE_MEM
;

311 
u8
 
¡İDefRegMask
 = 
thisLIR
->
defMask
 & ~
ENCODE_MEM
;

313 
ÃxtSlÙ
 = 0;

314 
boŞ
 
¡İH”e
 = 
çl£
;

317 
checkLIR
 = 
	`PREV_LIR
(
thisLIR
);

318 
checkLIR
 !ğ
h—dLIR
;

319 
checkLIR
 = 
	`PREV_LIR
(checkLIR)) {

325 ià(
checkLIR
->
æags
.
isNİ
) ;

327 
u8
 
checkMemMask
 = 
checkLIR
->
defMask
 & 
ENCODE_MEM
;

328 
u8
 
®ŸsCÚd™iÚ
 = 
¡İU£AÎMask
 & 
checkMemMask
;

329 
¡İH”e
 = 
çl£
;

332 ià(
checkMemMask
 !ğ
ENCODE_MEM
 && 
®ŸsCÚd™iÚ
 != 0) {

334 ià(
®ŸsCÚd™iÚ
 =ğ
ENCODE_DALVIK_REG
) {

336 ià((
checkLIR
->
®ŸsInfo
 =ğ
thisLIR
->aliasInfo) ||

337 
	`isD®vikRegi¡”Clobb”ed
(
thisLIR
, 
checkLIR
)) {

338 
¡İH”e
 = 
Œue
;

342 
	`as£¹
(
®ŸsCÚd™iÚ
 =ğ
ENCODE_HEAP_REF
);

343 
¡İH”e
 = 
Œue
;

346 ià(
¡İH”e
) {

347 
´evIn¡Li¡
[
ÃxtSlÙ
++] = 
checkLIR
;

352 ià(
¡İH”e
 =ğ
çl£
) {

353 
¡İH”e
 = 
	`CHECK_REG_DEP
(
¡İU£RegMask
, 
¡İDefRegMask
,

354 
checkLIR
);

361 ià(
¡İH”e
 || !
	`isP£udoOpcode
(
checkLIR
->
İcode
)) {

362 
´evIn¡Li¡
[
ÃxtSlÙ
++] = 
checkLIR
;

363 ià(
ÃxtSlÙ
 =ğ
MAX_HOIST_DISTANCE
) ;

367 ià(
¡İH”e
 =ğ
Œue
) {

368 
	`DEBUG_OPT
(
	`dumpD•’d’tIn¢Paœ
(
checkLIR
, 
thisLIR


378 ià(
¡İH”e
 =ğ
çl£
 && 
ÃxtSlÙ
 < 
MAX_HOIST_DISTANCE
) {

379 
´evIn¡Li¡
[
ÃxtSlÙ
++] = 
h—dLIR
;

386 ià(
ÃxtSlÙ
 >= 2) {

387 
fœ¡SlÙ
 = 
ÃxtSlÙ
 - 2;

388 
¦Ù
;

389 
ArmLIR
 *
d•LIR
 = 
´evIn¡Li¡
[
ÃxtSlÙ
-1];

391 ià(!
	`isP£udoOpcode
(
d•LIR
->
İcode
) &&

392 (
EncodšgM­
[
d•LIR
->
İcode
].
æags
 & 
IS_LOAD
)) {

393 
fœ¡SlÙ
 -ğ
LDLD_DISTANCE
;

399 
¦Ù
 = 
fœ¡SlÙ
; slot >= 0; slot--) {

400 
ArmLIR
 *
curLIR
 = 
´evIn¡Li¡
[
¦Ù
];

401 
ArmLIR
 *
´evLIR
 = 
´evIn¡Li¡
[
¦Ù
+1];

407 ià(
´evLIR
->
defMask
 =ğ
ENCODE_ALL
) {

412 ià(
EncodšgM­
[
curLIR
->
İcode
].
æags
 & 
IS_LOAD
) ;

431 ià(((
curLIR
->
u£Mask
 & 
´evLIR
->
defMask
) &&

432 (
EncodšgM­
[
´evLIR
->
İcode
].
æags
 & 
IS_LOAD
)) ||

433 (
¦Ù
 < 
LD_LATENCY
)) {

439 ià(
¦Ù
 >= 0) {

440 
ArmLIR
 *
curLIR
 = 
´evIn¡Li¡
[
¦Ù
];

441 
ArmLIR
 *
ÃwLßdLIR
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR),

442 
Œue
);

443 *
ÃwLßdLIR
 = *
thisLIR
;

448 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
curLIR
,

449 (
LIR
 *è
ÃwLßdLIR
);

450 
thisLIR
->
æags
.
isNİ
 = 
Œue
;

454 
	}
}

456 
	$dvmComp”AµlyLoÿlO±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
h—dLIR
,

457 
LIR
 *
LIR
)

459 ià(!(
gDvmJ™
.
di§bËO±
 & (1 << 
kLßdStÜeElimš©iÚ
))) {

460 
	`­¶yLßdStÜeElimš©iÚ
(
cUn™
, (
ArmLIR
 *è
h—dLIR
,

461 (
ArmLIR
 *è
LIR
);

463 ià(!(
gDvmJ™
.
di§bËO±
 & (1 << 
kLßdHoi¡šg
))) {

464 
	`­¶yLßdHoi¡šg
(
cUn™
, (
ArmLIR
 *è
h—dLIR
, (ArmLIR *è
LIR
);

466 
	}
}

	@vm/compiler/codegen/arm/Thumb/Factory.cpp

25 
	gcÜeTemps
[] = {
r0
, 
r1
, 
r2
, 
r3
, 
r4PC
, 
r7
};

27 
¡ÜePaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
,

28 
highReg
);

29 
lßdPaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
, 
highReg
);

30 
ArmLIR
 *
lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
di¥Ïûm’t
,

31 
rDe¡
);

32 
ArmLIR
 *
¡ÜeWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

33 
di¥Ïûm’t
, 
rSrc
);

34 
ArmLIR
 *
g’RegRegCheck
(
Comp©iÚUn™
 *
cUn™
,

35 
ArmCÚd™iÚCode
 
cÚd
,

36 
»g1
, 
»g2
, 
dOff£t
,

37 
ArmLIR
 *
püLab–
);

49 
ArmLIR
 *
	$lßdCÚ¡ªtNoClobb”
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
,

50 
v®ue
)

52 
ArmLIR
 *
»s
;

53 
tDe¡
 = 
	`LOWREG
(
rDe¡
è?„De¡ : 
	`dvmComp”AÎocTemp
(
cUn™
);

55 ià((
v®ue
 >= 0) && (value <= 255)) {

56 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbMovImm
, 
tDe¡
, 
v®ue
);

57 ià(
rDe¡
 !ğ
tDe¡
) {

58 
	`İRegReg
(
cUn™
, 
kOpMov
, 
rDe¡
, 
tDe¡
);

59 
	`dvmComp”F»eTemp
(
cUn™
, 
tDe¡
);

61  
»s
;

62 } ià((
v®ue
 & 0xFFFFFF00) == 0xFFFFFF00) {

63 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbMovImm
, 
tDe¡
, ~
v®ue
);

64 
	`ÃwLIR2
(
cUn™
, 
kThumbMvn
, 
tDe¡
,Dest);

65 ià(
rDe¡
 !ğ
tDe¡
) {

66 
	`İRegReg
(
cUn™
, 
kOpMov
, 
rDe¡
, 
tDe¡
);

67 
	`dvmComp”F»eTemp
(
cUn™
, 
tDe¡
);

69  
»s
;

72 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
->
l™”®Li¡
, 
v®ue
, 255);

73 ià(
d©aT¬g‘
 =ğ
NULL
) {

74 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, &cUn™->
l™”®Li¡
, 
v®ue
);

76 
ArmLIR
 *
lßdPcR–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

77 
lßdPcR–
->
İcode
 = 
kThumbLdrPcR–
;

78 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

79 
lßdPcR–
->
İ”ªds
[0] = 
tDe¡
;

80 
	`£tupResourûMasks
(
lßdPcR–
);

81 
	`£tMemRefTy³
(
lßdPcR–
, 
Œue
, 
kL™”®
);

82 
lßdPcR–
->
®ŸsInfo
 = 
d©aT¬g‘
->
İ”ªds
[0];

83 
»s
 = 
lßdPcR–
;

84 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

90 ià(
d©aT¬g‘
->
İ”ªds
[0] !ğ
v®ue
) {

91 
	`ÃwLIR2
(
cUn™
, 
kThumbAddRI8
, 
tDe¡
, 
v®ue
 - 
d©aT¬g‘
->
İ”ªds
[0]);

93 ià(
rDe¡
 !ğ
tDe¡
) {

94 
	`İRegReg
(
cUn™
, 
kOpMov
, 
rDe¡
, 
tDe¡
);

95 
	`dvmComp”F»eTemp
(
cUn™
, 
tDe¡
);

97  
»s
;

98 
	}
}

104 
ArmLIR
 *
	$lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

106 ià(
	`dvmComp”IsTemp
(
cUn™
, 
rDe¡
)) {

107 
	`dvmComp”Clobb”
(
cUn™
, 
rDe¡
);

108 
	`dvmComp”M¬kInU£
(
cUn™
, 
rDe¡
);

110  
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡
, 
v®ue
);

111 
	}
}

117 
ArmLIR
 *
	$lßdCÏssPoš‹r
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

119 
ArmLIR
 *
»s
;

120 
cUn™
->
hasCÏssL™”®s
 = 
Œue
;

121 ià(
	`dvmComp”IsTemp
(
cUn™
, 
rDe¡
)) {

122 
	`dvmComp”Clobb”
(
cUn™
, 
rDe¡
);

123 
	`dvmComp”M¬kInU£
(
cUn™
, 
rDe¡
);

125 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
->
şassPoš‹rLi¡
, 
v®ue
, 0);

126 ià(
d©aT¬g‘
 =ğ
NULL
) {

127 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, &cUn™->
şassPoš‹rLi¡
, 
v®ue
);

129 
cUn™
->
numCÏssPoš‹rs
++;

131 
ArmLIR
 *
lßdPcR–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

132 
lßdPcR–
->
İcode
 = 
kThumbLdrPcR–
;

133 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

134 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

135 
	`£tupResourûMasks
(
lßdPcR–
);

136 
	`£tMemRefTy³
(
lßdPcR–
, 
Œue
, 
kL™”®
);

137 
lßdPcR–
->
®ŸsInfo
 = 
d©aT¬g‘
->
İ”ªds
[0];

138 
»s
 = 
lßdPcR–
;

139 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

140  
»s
;

141 
	}
}

143 
ArmLIR
 *
	$İNÚe
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
)

145 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

146 
İ
) {

147 
kOpUncÚdBr
:

148 
İcode
 = 
kThumbBUncÚd
;

151 
	`ALOGE
("Jit: bad case in opNone");

152 
	`dvmComp”AbÜt
(
cUn™
);

154  
	`ÃwLIR0
(
cUn™
, 
İcode
);

155 
	}
}

157 
ArmLIR
 *
	$İCÚdB¿nch
(
Comp©iÚUn™
 *
cUn™
, 
ArmCÚd™iÚCode
 
cc
)

159  
	`ÃwLIR2
(
cUn™
, 
kThumbBCÚd
, 0 , 
cc
);

160 
	}
}

162 
ArmLIR
 *
	$İImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
v®ue
)

164 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

165 
İ
) {

166 
kOpPush
:

167 
İcode
 = 
kThumbPush
;

169 
kOpPİ
:

170 
İcode
 = 
kThumbPİ
;

173 
	`ALOGE
("Jit: bad case in opCondBranch");

174 
	`dvmComp”AbÜt
(
cUn™
);

176  
	`ÃwLIR1
(
cUn™
, 
İcode
, 
v®ue
);

177 
	}
}

179 
ArmLIR
 *
	$İReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src
)

181 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

182 
İ
) {

183 
kOpBlx
:

184 
İcode
 = 
kThumbBlxR
;

187 
	`ALOGE
("Jit: bad case in opReg");

188 
	`dvmComp”AbÜt
(
cUn™
);

190  
	`ÃwLIR1
(
cUn™
, 
İcode
, 
rDe¡Src
);

191 
	}
}

193 
ArmLIR
 *
	$İRegImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

194 
v®ue
)

196 
ArmLIR
 *
»s
;

197 
boŞ
 
Ãg
 = (
v®ue
 < 0);

198 
absV®ue
 = (
Ãg
è? -
v®ue
 : value;

199 
boŞ
 
shÜtFÜm
 = (
absV®ue
 & 0xff) ==‡bsValue;

200 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

201 
İ
) {

202 
kOpAdd
:

203 iàĞ!
Ãg
 && (
rDe¡Src1
 =ğ
r13¥
è&& (
v®ue
 <= 508)) {

204 
	`as£¹
((
v®ue
 & 0x3) == 0);

205  
	`ÃwLIR1
(
cUn™
, 
kThumbAddSpI7
, 
v®ue
 >> 2);

206 } ià(
shÜtFÜm
) {

207 
İcode
 = (
Ãg
è? 
kThumbSubRI8
 : 
kThumbAddRI8
;

209 
İcode
 = 
kThumbAddRRR
;

211 
kOpSub
:

212 ià(!
Ãg
 && (
rDe¡Src1
 =ğ
r13¥
è&& (
v®ue
 <= 508)) {

213 
	`as£¹
((
v®ue
 & 0x3) == 0);

214  
	`ÃwLIR1
(
cUn™
, 
kThumbSubSpI7
, 
v®ue
 >> 2);

215 } ià(
shÜtFÜm
) {

216 
İcode
 = (
Ãg
è? 
kThumbAddRI8
 : 
kThumbSubRI8
;

218 
İcode
 = 
kThumbSubRRR
;

220 
kOpCmp
:

221 ià(
Ãg
)

222 
shÜtFÜm
 = 
çl£
;

223 ià(
	`LOWREG
(
rDe¡Src1
è&& 
shÜtFÜm
) {

224 
İcode
 = 
kThumbCmpRI8
;

225 } ià(
	`LOWREG
(
rDe¡Src1
)) {

226 
İcode
 = 
kThumbCmpRR
;

228 
shÜtFÜm
 = 
çl£
;

229 
İcode
 = 
kThumbCmpHL
;

233 
	`ALOGE
("Jit: bad case in opRegImm");

234 
	`dvmComp”AbÜt
(
cUn™
);

237 ià(
shÜtFÜm
)

238 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
absV®ue
);

240 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

241 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
v®ue
);

242 ià(
İ
 =ğ
kOpCmp
)

243 
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
rSü©ch
);

245 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡Src1
,„De¡Src1, 
rSü©ch
);

247  
»s
;

248 
	}
}

250 
ArmLIR
 *
	$İRegRegReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡
,

251 
rSrc1
, 
rSrc2
)

253 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

254 
İ
) {

255 
kOpAdd
:

256 
İcode
 = 
kThumbAddRRR
;

258 
kOpSub
:

259 
İcode
 = 
kThumbSubRRR
;

262 ià(
rDe¡
 =ğ
rSrc1
) {

263  
	`İRegReg
(
cUn™
, 
İ
, 
rDe¡
, 
rSrc2
);

264 } ià(
rDe¡
 =ğ
rSrc2
) {

265 
	`as£¹
(
	`dvmComp”IsTemp
(
cUn™
, 
rSrc1
));

266 
	`dvmComp”Clobb”
(
cUn™
, 
rSrc1
);

267 
	`İRegReg
(
cUn™
, 
İ
, 
rSrc1
, 
rSrc2
);

268  
	`İRegReg
(
cUn™
, 
kOpMov
, 
rDe¡
, 
rSrc1
);

270 
	`İRegReg
(
cUn™
, 
kOpMov
, 
rDe¡
, 
rSrc1
);

271  
	`İRegReg
(
cUn™
, 
İ
, 
rDe¡
, 
rSrc2
);

275  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
rSrc2
);

276 
	}
}

278 
ArmLIR
 *
	$İRegRegImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡
,

279 
rSrc1
, 
v®ue
)

281 
ArmLIR
 *
»s
;

282 
boŞ
 
Ãg
 = (
v®ue
 < 0);

283 
absV®ue
 = (
Ãg
è? -
v®ue
 : value;

284 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

285 
boŞ
 
shÜtFÜm
 = (
absV®ue
 & 0x7) ==‡bsValue;

286 
İ
) {

287 
kOpAdd
:

288 ià(
rDe¡
 =ğ
rSrc1
)

289  
	`İRegImm
(
cUn™
, 
İ
, 
rDe¡
, 
v®ue
);

290 ià((
rSrc1
 =ğ
r13¥
è&& (
v®ue
 <= 1020)) {

291 
	`as£¹
((
v®ue
 & 0x3) == 0);

292 
shÜtFÜm
 = 
Œue
;

293 
İcode
 = 
kThumbAddSpR–
;

294 
v®ue
 >>= 2;

295 } ià((
rSrc1
 =ğ
r15pc
è&& (
v®ue
 <= 1020)) {

296 
	`as£¹
((
v®ue
 & 0x3) == 0);

297 
shÜtFÜm
 = 
Œue
;

298 
İcode
 = 
kThumbAddPcR–
;

299 
v®ue
 >>= 2;

300 } ià(
shÜtFÜm
) {

301 
İcode
 = (
Ãg
è? 
kThumbSubRRI3
 : 
kThumbAddRRI3
;

302 } ià((
absV®ue
 > 0) && (absValue <= (255 + 7))) {

304 
İcode
 = (
Ãg
è? 
kThumbSubRRI3
 : 
kThumbAddRRI3
;

305 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 7);

306 
İcode
 = (
Ãg
è? 
kThumbSubRI8
 : 
kThumbAddRI8
;

307 
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡
, 
absV®ue
 - 7);

308  
»s
;

310 
İcode
 = 
kThumbAddRRR
;

313 
kOpSub
:

314 ià(
rDe¡
 =ğ
rSrc1
)

315  
	`İRegImm
(
cUn™
, 
İ
, 
rDe¡
, 
v®ue
);

316 ià(
shÜtFÜm
) {

317 
İcode
 = (
Ãg
è? 
kThumbAddRRI3
 : 
kThumbSubRRI3
;

318 } ià((
absV®ue
 > 0) && (absValue <= (255 + 7))) {

320 
İcode
 = (
Ãg
è? 
kThumbAddRRI3
 : 
kThumbSubRRI3
;

321 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 7);

322 
İcode
 = (
Ãg
è? 
kThumbAddRI8
 : 
kThumbSubRI8
;

323 
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡
, 
absV®ue
 - 7);

324  
»s
;

326 
İcode
 = 
kThumbSubRRR
;

328 
kOpL¦
:

329 
shÜtFÜm
 = (!
Ãg
 && 
v®ue
 <= 31);

330 
İcode
 = 
kThumbL¦RRI5
;

332 
kOpL¤
:

333 
shÜtFÜm
 = (!
Ãg
 && 
v®ue
 <= 31);

334 
İcode
 = 
kThumbL¤RRI5
;

336 
kOpA¤
:

337 
shÜtFÜm
 = (!
Ãg
 && 
v®ue
 <= 31);

338 
İcode
 = 
kThumbA¤RRI5
;

340 
kOpMul
:

341 
kOpAnd
:

342 
kOpOr
:

343 
kOpXÜ
:

344 ià(
rDe¡
 =ğ
rSrc1
) {

345 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

346 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
v®ue
);

347 
	`İRegReg
(
cUn™
, 
İ
, 
rDe¡
, 
rSü©ch
);

349 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
v®ue
);

350 
	`İRegReg
(
cUn™
, 
İ
, 
rDe¡
, 
rSrc1
);

352  
»s
;

354 
	`ALOGE
("Jit: bad case in opRegRegImm");

355 
	`dvmComp”AbÜt
(
cUn™
);

358 ià(
shÜtFÜm
)

359 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
absV®ue
);

361 ià(
rDe¡
 !ğ
rSrc1
) {

362 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
v®ue
);

363 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
,„Dest);

365 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

366 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
v®ue
);

367 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
rSü©ch
);

370  
»s
;

371 
	}
}

373 
ArmLIR
 *
	$İRegReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

374 
rSrc2
)

376 
ArmLIR
 *
»s
;

377 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

378 
İ
) {

379 
kOpAdc
:

380 
İcode
 = 
kThumbAdcRR
;

382 
kOpAnd
:

383 
İcode
 = 
kThumbAndRR
;

385 
kOpBic
:

386 
İcode
 = 
kThumbBicRR
;

388 
kOpCmn
:

389 
İcode
 = 
kThumbCmnRR
;

391 
kOpCmp
:

392 
İcode
 = 
kThumbCmpRR
;

394 
kOpXÜ
:

395 
İcode
 = 
kThumbEÜRR
;

397 
kOpMov
:

398 ià(
	`LOWREG
(
rDe¡Src1
è&& LOWREG(
rSrc2
))

399 
İcode
 = 
kThumbMovRR
;

400 ià(!
	`LOWREG
(
rDe¡Src1
è&& !LOWREG(
rSrc2
))

401 
İcode
 = 
kThumbMovRR_H2H
;

402 ià(
	`LOWREG
(
rDe¡Src1
))

403 
İcode
 = 
kThumbMovRR_H2L
;

405 
İcode
 = 
kThumbMovRR_L2H
;

407 
kOpMul
:

408 
İcode
 = 
kThumbMul
;

410 
kOpMvn
:

411 
İcode
 = 
kThumbMvn
;

413 
kOpNeg
:

414 
İcode
 = 
kThumbNeg
;

416 
kOpOr
:

417 
İcode
 = 
kThumbO¼
;

419 
kOpSbc
:

420 
İcode
 = 
kThumbSbc
;

422 
kOpT¡
:

423 
İcode
 = 
kThumbT¡
;

425 
kOpL¦
:

426 
İcode
 = 
kThumbL¦RR
;

428 
kOpL¤
:

429 
İcode
 = 
kThumbL¤RR
;

431 
kOpA¤
:

432 
İcode
 = 
kThumbA¤RR
;

434 
kOpRÜ
:

435 
İcode
 = 
kThumbRÜRR
;

436 
kOpAdd
:

437 
kOpSub
:

438  
	`İRegRegReg
(
cUn™
, 
İ
, 
rDe¡Src1
,„De¡Src1, 
rSrc2
);

439 
kOp2By‹
:

440 
»s
 = 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rDe¡Src1
, 
rSrc2
, 24);

441 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
rDe¡Src1
,„DestSrc1, 24);

442  
»s
;

443 
kOp2ShÜt
:

444 
»s
 = 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rDe¡Src1
, 
rSrc2
, 16);

445 
	`İRegRegImm
(
cUn™
, 
kOpA¤
, 
rDe¡Src1
,„DestSrc1, 16);

446  
»s
;

447 
kOp2Ch¬
:

448 
»s
 = 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rDe¡Src1
, 
rSrc2
, 16);

449 
	`İRegRegImm
(
cUn™
, 
kOpL¤
, 
rDe¡Src1
,„DestSrc1, 16);

450  
»s
;

452 
	`ALOGE
("Jit: bad case in opRegReg");

453 
	`dvmComp”AbÜt
(
cUn™
);

456  
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
rSrc2
);

457 
	}
}

459 
ArmLIR
 *
	$lßdCÚ¡ªtV®ueWide
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡Lo
,

460 
rDe¡Hi
, 
v®Lo
, 
v®Hi
)

462 
ArmLIR
 *
»s
;

463 
»s
 = 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡Lo
, 
v®Lo
);

464 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡Hi
, 
v®Hi
);

465  
»s
;

466 
	}
}

469 
ArmLIR
 *
	$lßdBa£Indexed
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

470 
rIndex
, 
rDe¡
, 
sÿË
, 
OpSize
 
size
)

472 
ArmLIR
 *
fœ¡
 = 
NULL
;

473 
ArmLIR
 *
»s
;

474 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

475 
rNewIndex
 = 
rIndex
;

476 ià(
sÿË
) {

478 
rNewIndex
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

479 
fœ¡
 = 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rNewIndex
, 
rIndex
, 
sÿË
);

481 
size
) {

482 
kWÜd
:

483 
İcode
 = 
kThumbLdrRRR
;

485 
kUnsigÃdH®f
:

486 
İcode
 = 
kThumbLdrhRRR
;

488 
kSigÃdH®f
:

489 
İcode
 = 
kThumbLdrshRRR
;

491 
kUnsigÃdBy‹
:

492 
İcode
 = 
kThumbLdrbRRR
;

494 
kSigÃdBy‹
:

495 
İcode
 = 
kThumbLdrsbRRR
;

498 
	`ALOGE
("Jit: bad case in†oadBaseIndexed");

499 
	`dvmComp”AbÜt
(
cUn™
);

501 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
rNewIndex
);

502 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

503 ià(
cUn™
->
h—pMemOp
)

504 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

506 ià(
sÿË
)

507 
	`dvmComp”F»eTemp
(
cUn™
, 
rNewIndex
);

508  (
fœ¡
è? fœ¡ : 
»s
;

509 
	}
}

512 
ArmLIR
 *
	$¡ÜeBa£Indexed
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

513 
rIndex
, 
rSrc
, 
sÿË
, 
OpSize
 
size
)

515 
ArmLIR
 *
fœ¡
 = 
NULL
;

516 
ArmLIR
 *
»s
;

517 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

518 
rNewIndex
 = 
rIndex
;

519 ià(
sÿË
) {

520 
rNewIndex
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

521 
fœ¡
 = 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
rNewIndex
, 
rIndex
, 
sÿË
);

523 
size
) {

524 
kWÜd
:

525 
İcode
 = 
kThumbSŒRRR
;

527 
kUnsigÃdH®f
:

528 
kSigÃdH®f
:

529 
İcode
 = 
kThumbSŒhRRR
;

531 
kUnsigÃdBy‹
:

532 
kSigÃdBy‹
:

533 
İcode
 = 
kThumbSŒbRRR
;

536 
	`ALOGE
("Jit: bad case in storeBaseIndexed");

537 
	`dvmComp”AbÜt
(
cUn™
);

539 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
rNewIndex
);

540 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

541 ià(
cUn™
->
h—pMemOp
)

542 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

544 ià(
sÿË
)

545 
	`dvmComp”F»eTemp
(
cUn™
, 
rNewIndex
);

546  (
fœ¡
è? fœ¡ : 
»s
;

547 
	}
}

549 
ArmLIR
 *
	$lßdMuÉË
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
rMask
)

551 
ArmLIR
 *
»s
;

552 
	`g’B¬r›r
(
cUn™
);

553 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbLdmŸ
, 
rBa£
, 
rMask
);

554 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

555 ià(
cUn™
->
h—pMemOp
)

556 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

558 
	`g’B¬r›r
(
cUn™
);

559  
»s
;

560 
	}
}

562 
ArmLIR
 *
	$¡ÜeMuÉË
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
rMask
)

564 
ArmLIR
 *
»s
;

565 
	`g’B¬r›r
(
cUn™
);

566 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbStmŸ
, 
rBa£
, 
rMask
);

567 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

568 ià(
cUn™
->
h—pMemOp
)

569 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

571 
	`g’B¬r›r
(
cUn™
);

572  
»s
;

573 
	}
}

575 
ArmLIR
 *
	$lßdBa£Di¥Body
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

576 
di¥Ïûm’t
, 
rDe¡
, 
rDe¡Hi
,

577 
OpSize
 
size
, 
sReg
)

587 
ArmLIR
 *
»s
;

588 
ArmLIR
 *
lßd
 = 
NULL
;

589 
ArmLIR
 *
lßd2
 = 
NULL
;

590 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

591 
boŞ
 
shÜtFÜm
 = 
çl£
;

592 
’codedDi¥
 = 
di¥Ïûm’t
;

593 
boŞ
 
·œ
 = 
çl£
;

595 
size
) {

596 
kLÚg
:

597 
kDoubË
:

598 
·œ
 = 
Œue
;

599 ià((
di¥Ïûm’t
 < 124) && (displacement >= 0)) {

600 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

601 
shÜtFÜm
 = 
Œue
;

602 
’codedDi¥
 >>= 2;

603 
İcode
 = 
kThumbLdrRRI5
;

605 
İcode
 = 
kThumbLdrRRR
;

608 
kWÜd
:

609 ià(
	`LOWREG
(
rDe¡
è&& (
rBa£
 =ğ
r15pc
) &&

610 (
di¥Ïûm’t
 <= 1020) && (displacement >= 0)) {

611 
shÜtFÜm
 = 
Œue
;

612 
’codedDi¥
 >>= 2;

613 
İcode
 = 
kThumbLdrPcR–
;

614 } ià(
	`LOWREG
(
rDe¡
è&& (
rBa£
 =ğ
r13¥
) &&

615 (
di¥Ïûm’t
 <= 1020) && (displacement >= 0)) {

616 
shÜtFÜm
 = 
Œue
;

617 
’codedDi¥
 >>= 2;

618 
İcode
 = 
kThumbLdrSpR–
;

619 } ià(
di¥Ïûm’t
 < 128 && displacement >= 0) {

620 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

621 
shÜtFÜm
 = 
Œue
;

622 
’codedDi¥
 >>= 2;

623 
İcode
 = 
kThumbLdrRRI5
;

625 
İcode
 = 
kThumbLdrRRR
;

628 
kUnsigÃdH®f
:

629 ià(
di¥Ïûm’t
 < 64 && displacement >= 0) {

630 
	`as£¹
((
di¥Ïûm’t
 & 0x1) == 0);

631 
shÜtFÜm
 = 
Œue
;

632 
’codedDi¥
 >>= 1;

633 
İcode
 = 
kThumbLdrhRRI5
;

635 
İcode
 = 
kThumbLdrhRRR
;

638 
kSigÃdH®f
:

639 
İcode
 = 
kThumbLdrshRRR
;

641 
kUnsigÃdBy‹
:

642 ià(
di¥Ïûm’t
 < 32 && displacement >= 0) {

643 
shÜtFÜm
 = 
Œue
;

644 
İcode
 = 
kThumbLdrbRRI5
;

646 
İcode
 = 
kThumbLdrbRRR
;

649 
kSigÃdBy‹
:

650 
İcode
 = 
kThumbLdrsbRRR
;

653 
	`ALOGE
("Jit: bad case in†oadBaseIndexedBody");

654 
	`dvmComp”AbÜt
(
cUn™
);

656 ià(
shÜtFÜm
) {

657 
lßd
 = 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
’codedDi¥
);

658 ià(
·œ
) {

659 
lßd2
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡Hi
, 
rBa£
, 
’codedDi¥
+1);

662 ià(
·œ
) {

663 
rTmp
 = 
	`dvmComp”AÎocF»eTemp
(
cUn™
);

664 
»s
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
rTmp
, 
rBa£
, 
di¥Ïûm’t
);

665 
lßd
 = 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
rDe¡
, 
rTmp
, 0);

666 
lßd2
 = 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
rDe¡Hi
, 
rTmp
, 1);

667 
	`dvmComp”F»eTemp
(
cUn™
, 
rTmp
);

669 
rTmp
 = (
rBa£
 =ğ
rDe¡
è? 
	`dvmComp”AÎocF»eTemp
(
cUn™
)

670 : 
rDe¡
;

671 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rTmp
, 
di¥Ïûm’t
);

672 
lßd
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
rTmp
);

673 ià(
rBa£
 =ğ
r5FP
)

674 
	`ªnÙ©eD®vikRegAcûss
(
lßd
, 
di¥Ïûm’t
 >> 2,

675 
Œue
 );

676 ià(
rTmp
 !ğ
rDe¡
)

677 
	`dvmComp”F»eTemp
(
cUn™
, 
rTmp
);

680 ià(
rBa£
 =ğ
r5FP
) {

681 ià(
lßd
 !ğ
NULL
)

682 
	`ªnÙ©eD®vikRegAcûss
(
lßd
, 
di¥Ïûm’t
 >> 2,

683 
Œue
 );

684 ià(
lßd2
 !ğ
NULL
)

685 
	`ªnÙ©eD®vikRegAcûss
(
lßd2
, (
di¥Ïûm’t
 >> 2) + 1,

686 
Œue
 );

688 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

689 ià(
lßd
 !ğ
NULL
 && 
cUn™
->
h—pMemOp
)

690 
lßd
->
æags
.
š£¹W¿µ”
 = 
Œue
;

691 ià(
lßd2
 !ğ
NULL
 && 
cUn™
->
h—pMemOp
)

692 
lßd2
->
æags
.
š£¹W¿µ”
 = 
Œue
;

694  
lßd
;

695 
	}
}

697 
ArmLIR
 *
	$lßdBa£Di¥
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

698 
di¥Ïûm’t
, 
rDe¡
, 
OpSize
 
size
,

699 
sReg
)

701  
	`lßdBa£Di¥Body
(
cUn™
, 
mœ
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡
, -1,

702 
size
, 
sReg
);

703 
	}
}

705 
ArmLIR
 *
	$lßdBa£Di¥Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

706 
di¥Ïûm’t
, 
rDe¡Lo
, 
rDe¡Hi
,

707 
sReg
)

709  
	`lßdBa£Di¥Body
(
cUn™
, 
mœ
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡Lo
, 
rDe¡Hi
,

710 
kLÚg
, 
sReg
);

711 
	}
}

713 
ArmLIR
 *
	$¡ÜeBa£Di¥Body
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

714 
di¥Ïûm’t
, 
rSrc
, 
rSrcHi
,

715 
OpSize
 
size
)

717 
ArmLIR
 *
»s
;

718 
ArmLIR
 *
¡Üe
 = 
NULL
;

719 
ArmLIR
 *
¡Üe2
 = 
NULL
;

720 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

721 
boŞ
 
shÜtFÜm
 = 
çl£
;

722 
’codedDi¥
 = 
di¥Ïûm’t
;

723 
boŞ
 
·œ
 = 
çl£
;

725 
size
) {

726 
kLÚg
:

727 
kDoubË
:

728 
·œ
 = 
Œue
;

729 ià((
di¥Ïûm’t
 < 124) && (displacement >= 0)) {

730 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

731 
·œ
 = 
Œue
;

732 
shÜtFÜm
 = 
Œue
;

733 
’codedDi¥
 >>= 2;

734 
İcode
 = 
kThumbSŒRRI5
;

736 
İcode
 = 
kThumbSŒRRR
;

739 
kWÜd
:

740 ià(
di¥Ïûm’t
 < 128 && displacement >= 0) {

741 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

742 
shÜtFÜm
 = 
Œue
;

743 
’codedDi¥
 >>= 2;

744 
İcode
 = 
kThumbSŒRRI5
;

746 
İcode
 = 
kThumbSŒRRR
;

749 
kUnsigÃdH®f
:

750 
kSigÃdH®f
:

751 ià(
di¥Ïûm’t
 < 64 && displacement >= 0) {

752 
	`as£¹
((
di¥Ïûm’t
 & 0x1) == 0);

753 
shÜtFÜm
 = 
Œue
;

754 
’codedDi¥
 >>= 1;

755 
İcode
 = 
kThumbSŒhRRI5
;

757 
İcode
 = 
kThumbSŒhRRR
;

760 
kUnsigÃdBy‹
:

761 
kSigÃdBy‹
:

762 ià(
di¥Ïûm’t
 < 32 && displacement >= 0) {

763 
shÜtFÜm
 = 
Œue
;

764 
İcode
 = 
kThumbSŒbRRI5
;

766 
İcode
 = 
kThumbSŒbRRR
;

770 
	`ALOGE
("Jit: bad case in storeBaseIndexedBody");

771 
	`dvmComp”AbÜt
(
cUn™
);

773 ià(
shÜtFÜm
) {

774 
¡Üe
 = 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
’codedDi¥
);

775 ià(
·œ
) {

776 
¡Üe2
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrcHi
, 
rBa£
, 
’codedDi¥
 + 1);

779 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

780 ià(
·œ
) {

781 
»s
 = 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
rSü©ch
, 
rBa£
, 
di¥Ïûm’t
);

782 
¡Üe
 = 
	`ÃwLIR3
(
cUn™
, 
kThumbSŒRRI5
, 
rSrc
, 
rSü©ch
, 0);

783 
¡Üe2
 = 
	`ÃwLIR3
(
cUn™
, 
kThumbSŒRRI5
, 
rSrcHi
, 
rSü©ch
, 1);

785 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
di¥Ïûm’t
);

786 
¡Üe
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
rSü©ch
);

788 
	`dvmComp”F»eTemp
(
cUn™
, 
rSü©ch
);

790 ià(
rBa£
 =ğ
r5FP
) {

791 ià(
¡Üe
 !ğ
NULL
)

792 
	`ªnÙ©eD®vikRegAcûss
(
¡Üe
, 
di¥Ïûm’t
 >> 2,

793 
çl£
 );

794 ià(
¡Üe2
 !ğ
NULL
)

795 
	`ªnÙ©eD®vikRegAcûss
(
¡Üe2
, (
di¥Ïûm’t
 >> 2) + 1,

796 
çl£
 );

798 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

799 ià(
¡Üe
 !ğ
NULL
 && 
cUn™
->
h—pMemOp
)

800 
¡Üe
->
æags
.
š£¹W¿µ”
 = 
Œue
;

801 ià(
¡Üe2
 !ğ
NULL
 && 
cUn™
->
h—pMemOp
)

802 
¡Üe2
->
æags
.
š£¹W¿µ”
 = 
Œue
;

804  
»s
;

805 
	}
}

807 
ArmLIR
 *
	$¡ÜeBa£Di¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

808 
di¥Ïûm’t
, 
rSrc
, 
OpSize
 
size
)

810  
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrc
, -1, 
size
);

811 
	}
}

813 
ArmLIR
 *
	$¡ÜeBa£Di¥Wide
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

814 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
)

816  
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
, 
kLÚg
);

817 
	}
}

819 
	$¡ÜePaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
, 
highReg
)

821 ià(
lowReg
 < 
highReg
) {

822 
	`¡ÜeMuÉË
(
cUn™
, 
ba£
, (1 << 
lowReg
è| (1 << 
highReg
));

824 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ba£
, 0, 
lowReg
);

825 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ba£
, 4, 
highReg
);

827 
	}
}

829 
	$lßdPaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
, 
highReg
)

831 ià(
lowReg
 < 
highReg
) {

832 
	`lßdMuÉË
(
cUn™
, 
ba£
, (1 << 
lowReg
è| (1 << 
highReg
));

834 
	`lßdWÜdDi¥
(
cUn™
, 
ba£
, 0 , 
lowReg
);

835 
	`lßdWÜdDi¥
(
cUn™
, 
ba£
, 4 , 
highReg
);

837 
	}
}

839 
ArmLIR
* 
	$g’RegCİyNoIn£¹
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

841 
ArmLIR
* 
»s
;

842 
ArmOpcode
 
İcode
;

843 
»s
 = (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

844 ià(
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc
))

845 
İcode
 = 
kThumbMovRR
;

846 ià(!
	`LOWREG
(
rDe¡
è&& !LOWREG(
rSrc
))

847 
İcode
 = 
kThumbMovRR_H2H
;

848 ià(
	`LOWREG
(
rDe¡
))

849 
İcode
 = 
kThumbMovRR_H2L
;

851 
İcode
 = 
kThumbMovRR_L2H
;

853 
»s
->
İ”ªds
[0] = 
rDe¡
;

854 
»s
->
İ”ªds
[1] = 
rSrc
;

855 
»s
->
İcode
 = opcode;

856 
	`£tupResourûMasks
(
»s
);

857 ià(
rDe¡
 =ğ
rSrc
) {

858 
»s
->
æags
.
isNİ
 = 
Œue
;

860  
»s
;

861 
	}
}

863 
ArmLIR
* 
	$g’RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

865 
ArmLIR
 *
»s
 = 
	`g’RegCİyNoIn£¹
(
cUn™
, 
rDe¡
, 
rSrc
);

866 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
*)
»s
);

867  
»s
;

868 
	}
}

870 
	$g’RegCİyWide
(
Comp©iÚUn™
 *
cUn™
, 
de¡Lo
, 
de¡Hi
,

871 
¤cLo
, 
¤cHi
)

874 ià(
¤cHi
 =ğ
de¡Lo
) {

875 
	`g’RegCİy
(
cUn™
, 
de¡Hi
, 
¤cHi
);

876 
	`g’RegCİy
(
cUn™
, 
de¡Lo
, 
¤cLo
);

878 
	`g’RegCİy
(
cUn™
, 
de¡Lo
, 
¤cLo
);

879 
	`g’RegCİy
(
cUn™
, 
de¡Hi
, 
¤cHi
);

881 
	}
}

883 
ArmLIR
 *
	$g’CmpImmB¿nch
(
Comp©iÚUn™
 *
cUn™
,

884 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

885 
checkV®ue
)

887 ià((
checkV®ue
 & 0xff) != checkValue) {

888 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

889 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, 
checkV®ue
);

890 
	`ÃwLIR2
(
cUn™
, 
kThumbCmpRR
, 
»g
, 
tReg
);

891 
	`dvmComp”F»eTemp
(
cUn™
, 
tReg
);

893 
	`ÃwLIR2
(
cUn™
, 
kThumbCmpRI8
, 
»g
, 
checkV®ue
);

895 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbBCÚd
, 0, 
cÚd
);

896  
b¿nch
;

897 
	}
}

899 #ià
defšed
(
WITH_SELF_VERIFICATION
)

900 
	$g’S–fV”ifiÿtiÚP»B¿nch
(
Comp©iÚUn™
 *
cUn™
,

901 
ArmLIR
 *
ÜigLIR
) {

906 
ArmLIR
 *
pushFP
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

907 
pushFP
->
İcode
 = 
kThumbPush
;

908 
pushFP
->
İ”ªds
[0] = 1 << 
r5FP
;

909 
	`£tupResourûMasks
(
pushFP
);

910 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
ÜigLIR
, (LIR *è
pushFP
);

912 
ArmLIR
 *
pushLR
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

913 
pushLR
->
İcode
 = 
kThumbPush
;

915 
pushLR
->
İ”ªds
[0] = 1 << 8;

916 
	`£tupResourûMasks
(
pushLR
);

917 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
ÜigLIR
, (LIR *è
pushLR
);

918 
	}
}

920 
	$g’S–fV”ifiÿtiÚPo¡B¿nch
(
Comp©iÚUn™
 *
cUn™
,

921 
ArmLIR
 *
ÜigLIR
) {

928 
ArmLIR
 *
pİFÜLR
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

929 
pİFÜLR
->
İcode
 = 
kThumbPİ
;

930 
pİFÜLR
->
İ”ªds
[0] = 1 << 
r5FP
;

931 
	`£tupResourûMasks
(
pİFÜLR
);

932 
	`dvmComp”In£¹LIRAá”
((
LIR
 *è
ÜigLIR
, (LIR *è
pİFÜLR
);

934 
ArmLIR
 *
cİy
 = 
	`g’RegCİyNoIn£¹
(
cUn™
, 
r14Ì
, 
r5FP
);

935 
	`dvmComp”In£¹LIRAá”
((
LIR
 *è
pİFÜLR
, (LIR *è
cİy
);

938 
ArmLIR
 *
pİFP
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

939 
pİFP
->
İcode
 = 
kThumbPİ
;

940 
pİFP
->
İ”ªds
[0] = 1 << 
r5FP
;

941 
	`£tupResourûMasks
(
pİFP
);

942 
	`dvmComp”In£¹LIRAá”
((
LIR
 *è
cİy
, (LIR *è
pİFP
);

943 
	}
}

	@vm/compiler/codegen/arm/Thumb/Gen.cpp

50 
	$g’T¿ûProfeEÁry
(
Comp©iÚUn™
 *
cUn™
)

52 
šŒ_t
 
addr
 = (šŒ_t)
	`dvmJ™NextT¿ûCouÁ”
();

53 
	`as£¹
(
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN
);

54 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, 
addr
 & 0xffff);

55 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, (
addr
 >> 16) & 0xffff);

56 
cUn™
->
chašC–lOff£tLIR
 =

57 (
LIR
 *è
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, 
CHAIN_CELL_OFFSET_TAG
);

58 
cUn™
->
h—d”Size
 = 6;

59 ià((
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgCÚtšuous
) ||

60 (
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgDi§bËd
)) {

62 
	`ÃwLIR2
(
cUn™
, 
kThumbMovRR_H2L
, 
r0
, 
r15pc
);

63 
	`ÃwLIR2
(
cUn™
, 
kThumbSubRI8
, 
r0
, 10);

64 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r0
,„0, 0);

65 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r1
, 
r0
, 0);

66 
	`ÃwLIR2
(
cUn™
, 
kThumbAddRI8
, 
r1
, 1);

67 
	`ÃwLIR3
(
cUn™
, 
kThumbSŒRRI5
, 
r1
, 
r0
, 0);

70 
İcode
 = 
TEMPLATE_PERIODIC_PROFILING
;

71 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx1
,

72 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

73 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

74 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx2
,

75 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

76 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

79 
	}
}

85 
	$g’NegFlßt
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

86 
RegLoÿtiÚ
 
¾Src
)

88 
RegLoÿtiÚ
 
¾ResuÉ
;

89 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kCÜeReg
);

90 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

91 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
¾ResuÉ
.
lowReg
,

92 
¾Src
.
lowReg
, 0x80000000);

93 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

94 
	}
}

96 
	$g’NegDoubË
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

97 
RegLoÿtiÚ
 
¾Src
)

99 
RegLoÿtiÚ
 
¾ResuÉ
;

100 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kCÜeReg
);

101 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

102 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
¾ResuÉ
.
highReg
, 
¾Src
.highReg,

104 
	`g’RegCİy
(
cUn™
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

105 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

106 
	}
}

108 
	$g’MulLÚg
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

109 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

111 
RegLoÿtiÚ
 
¾ResuÉ
;

112 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

113 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

114 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_MUL_LONG
);

115 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

116 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

117 
	}
}

119 
boŞ
 
	$·¹ŸlOv”Ïp
(
¤eg1
, 
¤eg2
)

121  
	`abs
(
¤eg1
 - 
¤eg2
) == 1;

122 
	}
}

124 
	$g’LÚg3Addr
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpKšd
 
fœ¡Op
,

125 
OpKšd
 
£cÚdOp
, 
RegLoÿtiÚ
 
¾De¡
,

126 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

128 
RegLoÿtiÚ
 
¾ResuÉ
;

129 ià(
	`·¹ŸlOv”Ïp
(
¾Src1
.
sRegLow
,
¾Src2
.sRegLow) ||

130 
	`·¹ŸlOv”Ïp
(
¾Src1
.
sRegLow
,
¾De¡
.sRegLow) ||

131 
	`·¹ŸlOv”Ïp
(
¾Src2
.
sRegLow
,
¾De¡
.sRegLow)) {

133 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

134 } ià(
¾De¡
.
sRegLow
 =ğ
¾Src1
.sRegLow) {

136 
¾ResuÉ
 = 
	`lßdV®ueWide
(
cUn™
, 
¾De¡
, 
kCÜeReg
);

137 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

138 
	`İRegReg
(
cUn™
, 
fœ¡Op
, 
¾ResuÉ
.
lowReg
, 
¾Src2
.lowReg);

139 
	`İRegReg
(
cUn™
, 
£cÚdOp
, 
¾ResuÉ
.
highReg
, 
¾Src2
.highReg);

140 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

141 } ià(
¾De¡
.
sRegLow
 =ğ
¾Src2
.sRegLow) {

143 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kCÜeReg
);

144 
¾ResuÉ
 = 
	`lßdV®ueWide
(
cUn™
, 
¾De¡
, 
kCÜeReg
);

145 
	`İRegReg
(
cUn™
, 
fœ¡Op
, 
¾Src1
.
lowReg
, 
¾ResuÉ
.lowReg);

146 
	`İRegReg
(
cUn™
, 
£cÚdOp
, 
¾Src1
.
highReg
, 
¾ResuÉ
.highReg);

148 
	`dvmComp”Clobb”
(
cUn™
, 
¾ResuÉ
.
lowReg
);

149 
	`dvmComp”Clobb”
(
cUn™
, 
¾ResuÉ
.
highReg
);

150 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src1
.
lowReg
);

151 
	`dvmComp”Clobb”
(
cUn™
, 
¾Src1
.
highReg
);

152 
¾De¡
.
loÿtiÚ
 = 
kLocD®vikF¿me
;

153 
	`as£¹
(
¾Src1
.
loÿtiÚ
 =ğ
kLocPhysReg
);

155 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾Src1
);

158 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

159 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
çl£
);

160 
	`lßdV®ueDœeùWide
(
cUn™
, 
¾Src1
, 
¾ResuÉ
.
lowReg
,

161 
¾ResuÉ
.
highReg
);

162 
¾ResuÉ
.
loÿtiÚ
 = 
kLocPhysReg
;

163 
	`İRegReg
(
cUn™
, 
fœ¡Op
, 
¾ResuÉ
.
lowReg
, 
¾Src2
.lowReg);

164 
	`İRegReg
(
cUn™
, 
£cÚdOp
, 
¾ResuÉ
.
highReg
, 
¾Src2
.highReg);

165 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

167 
	}
}

169 
	$dvmComp”In™ŸlizeRegAÎoc
(
Comp©iÚUn™
 *
cUn™
)

171 
numTemps
 = (
cÜeTemps
)/();

172 
Regi¡”PoŞ
 *
poŞ
 = (Regi¡”PoŞ *è
	`dvmComp”New
((*poŞ), 
Œue
);

173 
cUn™
->
»gPoŞ
 = 
poŞ
;

174 
poŞ
->
numCÜeTemps
 = 
numTemps
;

175 
poŞ
->
cÜeTemps
 = (
Regi¡”Info
 *)

176 
	`dvmComp”New
(
numTemps
 * (*
poŞ
->
cÜeTemps
), 
Œue
);

177 
poŞ
->
numFPTemps
 = 0;

178 
poŞ
->
FPTemps
 = 
NULL
;

179 
	`dvmComp”In™PoŞ
(
poŞ
->
cÜeTemps
, cÜeTemps,…oŞ->
numCÜeTemps
);

180 
	`dvmComp”In™PoŞ
(
poŞ
->
FPTemps
, 
NULL
, 0);

181 
poŞ
->
nuÎCheckedRegs
 =

182 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numSSARegs
, 
çl£
);

183 
	}
}

186 
ArmLIR
 *
	$g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

188 
ArmLIR
 *
»s
;

189 
rDPC
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

190 
rAddr
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

191 
off£t
 = 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
);

192 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rDPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

193 
	`ÃwLIR2
(
cUn™
, 
kThumbMovRR
, 
rAddr
, 
r5FP
);

194 
	`ÃwLIR2
(
cUn™
, 
kThumbSubRI8
, 
rAddr
, (
SckSaveA»a
è- 
off£t
);

195 
	`¡ÜeWÜdDi¥
Ğ
cUn™
, 
rAddr
, 0, 
rDPC
);

196  
»s
;

197 
	}
}

199 
	$g’MÚ™Ü
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

201 
	`g’MÚ™ÜPÜbË
(
cUn™
, 
mœ
);

202 
	}
}

204 
	$g’CmpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
RegLoÿtiÚ
 
¾De¡
,

205 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

207 
RegLoÿtiÚ
 
¾ResuÉ
;

208 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src1
, 
r0
, 
r1
);

209 
	`lßdV®ueDœeùWideFixed
(
cUn™
, 
¾Src2
, 
r2
, 
r3
);

210 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMP_LONG
);

211 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uº
(
cUn™
);

212 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

213 
	}
}

215 
boŞ
 
	$g’IÆšedAbsFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

217 
off£t
 = 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
);

218 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

219 
»g0
 = 
	`lßdV®ue
(
cUn™
, 
¾Src
, 
kCÜeReg
).
lowReg
;

220 
signMask
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

221 
	`lßdCÚ¡ªt
(
cUn™
, 
signMask
, 0x7fffffff);

222 
	`ÃwLIR2
(
cUn™
, 
kThumbAndRR
, 
»g0
, 
signMask
);

223 
	`dvmComp”F»eTemp
(
cUn™
, 
signMask
);

224 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
off£t
, 
»g0
);

226 
	`dvmComp”Clobb”
(
cUn™
, 
»g0
);

227  
çl£
;

228 
	}
}

230 
boŞ
 
	$g’IÆšedAbsDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

232 
off£t
 = 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
);

233 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

234 
RegLoÿtiÚ
 
»gSrc
 = 
	`lßdV®ueWide
(
cUn™
, 
¾Src
, 
kCÜeReg
);

235 
»glo
 = 
»gSrc
.
lowReg
;

236 
»ghi
 = 
»gSrc
.
highReg
;

237 
signMask
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

238 
	`lßdCÚ¡ªt
(
cUn™
, 
signMask
, 0x7fffffff);

239 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
off£t
, 
»glo
);

240 
	`ÃwLIR2
(
cUn™
, 
kThumbAndRR
, 
»ghi
, 
signMask
);

241 
	`dvmComp”F»eTemp
(
cUn™
, 
signMask
);

242 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
off£t
 + 4, 
»ghi
);

244 
	`dvmComp”Clobb”
(
cUn™
, 
»ghi
);

245  
çl£
;

246 
	}
}

249 
boŞ
 
	$g’IÆšedMšMaxIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
boŞ
 
isMš
)

251 
off£t
 = 
	`off£tof
(
Th»ad
, 
š‹½Save
.
»tv®
);

252 
RegLoÿtiÚ
 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

253 
RegLoÿtiÚ
 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

254 
»g0
 = 
	`lßdV®ue
(
cUn™
, 
¾Src1
, 
kCÜeReg
).
lowReg
;

255 
»g1
 = 
	`lßdV®ue
(
cUn™
, 
¾Src2
, 
kCÜeReg
).
lowReg
;

256 
	`ÃwLIR2
(
cUn™
, 
kThumbCmpRR
, 
»g0
, 
»g1
);

257 
ArmLIR
 *
b¿nch1
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbBCÚd
, 2,

258 
isMš
 ? 
kArmCÚdLt
 : 
kArmCÚdGt
);

259 
	`ÃwLIR2
(
cUn™
, 
kThumbMovRR
, 
»g0
, 
»g1
);

260 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

261 
rg‘
->
defMask
 = 
ENCODE_ALL
;

262 
	`ÃwLIR3
(
cUn™
, 
kThumbSŒRRI5
, 
»g0
, 
r6SELF
, 
off£t
 >> 2);

263 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

265 
	`dvmComp”Clobb”
(
cUn™
,
»g0
);

266  
çl£
;

267 
	}
}

269 
	$g’MuÉlyByTwoB™MuÉl›r
(
Comp©iÚUn™
 *
cUn™
,

270 
RegLoÿtiÚ
 
¾Src
, RegLoÿtiÚ 
¾ResuÉ
, 
l™
,

271 
fœ¡B™
, 
£cÚdB™
)

275 
	`İRegRegImm
(
cUn™
, 
kOpMul
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg, 
l™
);

276 
	}
}

	@vm/compiler/codegen/arm/Thumb/Ralloc.cpp

29 
	$dvmComp”AÎocTy³dTempPaœ
(
Comp©iÚUn™
 *
cUn™
, 
boŞ
 
åHšt
,

30 
»gCÏss
)

32 
highReg
;

33 
lowReg
;

34 
»s
 = 0;

35 
lowReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

36 
highReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

37 
»s
 = (
lowReg
 & 0xffè| ((
highReg
 & 0xff) << 8);

38  
»s
;

39 
	}
}

41 
	$dvmComp”AÎocTy³dTemp
(
Comp©iÚUn™
 *
cUn™
, 
boŞ
 
åHšt
, 
»gCÏss
)

43  
	`dvmComp”AÎocTemp
(
cUn™
);

44 
	}
}

	@vm/compiler/codegen/arm/Thumb2/Factory.cpp

25 
	gcÜeTemps
[] = {
r0
, 
r1
, 
r2
, 
r3
, 
r4PC
, 
r7
, 
r8
, 
r9
, 
r10
, 
r11
, 
r12
};

26 
	gåTemps
[] = {
ä16
, 
ä17
, 
ä18
, 
ä19
, 
ä20
, 
ä21
, 
ä22
, 
ä23
,

27 
ä24
, 
ä25
, 
ä26
, 
ä27
, 
ä28
, 
ä29
, 
ä30
, 
ä31
};

29 
	$’codeImmSšgË
(
v®ue
)

31 
»s
;

32 
b™A
 = (
v®ue
 & 0x80000000) >> 31;

33 
nÙB™B
 = (
v®ue
 & 0x40000000) >> 30;

34 
b™B
 = (
v®ue
 & 0x20000000) >> 29;

35 
bSm—r
 = (
v®ue
 & 0x3e000000) >> 25;

36 
¦iû
 = (
v®ue
 & 0x01f80000) >> 19;

37 
z”Ûs
 = (
v®ue
 & 0x0007ffff);

38 ià(
z”Ûs
 != 0)

40 ià(
b™B
) {

41 ià((
nÙB™B
 !ğ0è|| (
bSm—r
 != 0x1f))

44 ià((
nÙB™B
 !ğ1è|| (
bSm—r
 != 0x0))

47 
»s
 = (
b™A
 << 7è| (
b™B
 << 6è| 
¦iû
;

48  
»s
;

49 
	}
}

51 
ArmLIR
 *
	$lßdFPCÚ¡ªtV®ue
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
,

52 
v®ue
)

54 
’codedImm
 = 
	`’codeImmSšgË
(
v®ue
);

55 
	`as£¹
(
	`SINGLEREG
(
rDe¡
));

56 ià(
’codedImm
 >= 0) {

57  
	`ÃwLIR2
(
cUn™
, 
kThumb2Vmovs_IMM8
, 
rDe¡
, 
’codedImm
);

59 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
->
l™”®Li¡
, 
v®ue
, 0);

60 ià(
d©aT¬g‘
 =ğ
NULL
) {

61 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, &cUn™->
l™”®Li¡
, 
v®ue
);

63 
ArmLIR
 *
lßdPcR–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

64 
lßdPcR–
->
İcode
 = 
kThumb2Vldrs
;

65 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

66 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

67 
lßdPcR–
->
İ”ªds
[1] = 
r15pc
;

68 
	`£tupResourûMasks
(
lßdPcR–
);

69 
	`£tMemRefTy³
(
lßdPcR–
, 
Œue
, 
kL™”®
);

70 
lßdPcR–
->
®ŸsInfo
 = 
d©aT¬g‘
->
İ”ªds
[0];

71 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

72  
lßdPcR–
;

73 
	}
}

75 
	$ËadšgZ”os
(
u4
 
v®
)

77 
u4
 
®t
;

78 
n
;

79 
couÁ
;

81 
couÁ
 = 16;

82 
n
 = 32;

84 
®t
 = 
v®
 >> 
couÁ
;

85 ià(
®t
 != 0) {

86 
n
 =‚ - 
couÁ
;

87 
v®
 = 
®t
;

89 
couÁ
 >>= 1;

90 } 
couÁ
);

91  
n
 - 
v®
;

92 
	}
}

98 
	$modif›dImmedŸ‹
(
u4
 
v®ue
)

100 
zL—dšg
;

101 
zT¿šg
;

102 
u4
 
b0
 = 
v®ue
 & 0xff;

105 ià(
v®ue
 <= 0xFF)

106  
b0
;

107 ià(
v®ue
 =ğ((
b0
 << 16) | b0))

108  (0x1 << 8è| 
b0
;

109 ià(
v®ue
 =ğ((
b0
 << 24) | (b0 << 16) | (b0 << 8) | b0))

110  (0x3 << 8è| 
b0
;

111 
b0
 = (
v®ue
 >> 8) & 0xff;

112 ià(
v®ue
 =ğ((
b0
 << 24) | (b0 << 8)))

113  (0x2 << 8è| 
b0
;

115 
zL—dšg
 = 
	`ËadšgZ”os
(
v®ue
);

116 
zT¿šg
 = 32 - 
	`ËadšgZ”os
(~
v®ue
 & (value - 1));

118 ià((
zL—dšg
 + 
zT¿šg
) < 24)

121 
v®ue
 <<ğ
zL—dšg
 + 1;

123 
v®ue
 >>= 25;

125  
v®ue
 | ((0x8 + 
zL—dšg
) << 7);

126 
	}
}

136 
ArmLIR
 *
	$lßdCÚ¡ªtNoClobb”
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
,

137 
v®ue
)

139 
ArmLIR
 *
»s
;

140 
modImm
;

142 ià(
	`FPREG
(
rDe¡
)) {

143  
	`lßdFPCÚ¡ªtV®ue
(
cUn™
, 
rDe¡
, 
v®ue
);

147 ià(
	`LOWREG
(
rDe¡
è&& (
v®ue
 >= 0) && (value <= 255)) {

148  
	`ÃwLIR2
(
cUn™
, 
kThumbMovImm
, 
rDe¡
, 
v®ue
);

151 
modImm
 = 
	`modif›dImmedŸ‹
(
v®ue
);

152 ià(
modImm
 >= 0) {

153 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2MovImmShiá
, 
rDe¡
, 
modImm
);

154  
»s
;

156 
modImm
 = 
	`modif›dImmedŸ‹
(~
v®ue
);

157 ià(
modImm
 >= 0) {

158 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2MvnImmShiá
, 
rDe¡
, 
modImm
);

159  
»s
;

162 ià((
v®ue
 & 0xffff) == value) {

163 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2MovImm16
, 
rDe¡
, 
v®ue
);

164  
»s
;

167 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
->
l™”®Li¡
, 
v®ue
, 0);

168 ià(
d©aT¬g‘
 =ğ
NULL
) {

169 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, &cUn™->
l™”®Li¡
, 
v®ue
);

171 
ArmLIR
 *
lßdPcR–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

172 
lßdPcR–
->
İcode
 = 
kThumb2LdrPcR–12
;

173 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

174 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

175 
	`£tupResourûMasks
(
lßdPcR–
);

176 
	`£tMemRefTy³
(
lßdPcR–
, 
Œue
, 
kL™”®
);

177 
lßdPcR–
->
®ŸsInfo
 = 
d©aT¬g‘
->
İ”ªds
[0];

178 
»s
 = 
lßdPcR–
;

179 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

185 ià(
d©aT¬g‘
->
İ”ªds
[0] !ğ
v®ue
) {

186 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
rDe¡
, 
v®ue
 - 
d©aT¬g‘
->
İ”ªds
[0]);

188  
»s
;

189 
	}
}

195 
ArmLIR
 *
	$lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

197 ià(
	`dvmComp”IsTemp
(
cUn™
, 
rDe¡
)) {

198 
	`dvmComp”Clobb”
(
cUn™
, 
rDe¡
);

199 
	`dvmComp”M¬kInU£
(
cUn™
, 
rDe¡
);

201  
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡
, 
v®ue
);

202 
	}
}

208 
ArmLIR
 *
	$lßdCÏssPoš‹r
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

210 
ArmLIR
 *
»s
;

211 
cUn™
->
hasCÏssL™”®s
 = 
Œue
;

212 ià(
	`dvmComp”IsTemp
(
cUn™
, 
rDe¡
)) {

213 
	`dvmComp”Clobb”
(
cUn™
, 
rDe¡
);

214 
	`dvmComp”M¬kInU£
(
cUn™
, 
rDe¡
);

216 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
->
şassPoš‹rLi¡
, 
v®ue
, 0);

217 ià(
d©aT¬g‘
 =ğ
NULL
) {

218 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, &cUn™->
şassPoš‹rLi¡
, 
v®ue
);

220 
cUn™
->
numCÏssPoš‹rs
++;

222 
ArmLIR
 *
lßdPcR–
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

223 
lßdPcR–
->
İcode
 = 
kThumb2LdrPcR–12
;

224 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

225 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

226 
	`£tupResourûMasks
(
lßdPcR–
);

227 
	`£tMemRefTy³
(
lßdPcR–
, 
Œue
, 
kL™”®
);

228 
lßdPcR–
->
®ŸsInfo
 = 
d©aT¬g‘
->
İ”ªds
[0];

229 
»s
 = 
lßdPcR–
;

230 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

231  
»s
;

232 
	}
}

234 
ArmLIR
 *
	$İNÚe
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
)

236 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

237 
İ
) {

238 
kOpUncÚdBr
:

239 
İcode
 = 
kThumbBUncÚd
;

242 
	`as£¹
(0);

244  
	`ÃwLIR0
(
cUn™
, 
İcode
);

245 
	}
}

247 
ArmLIR
 *
	$İCÚdB¿nch
(
Comp©iÚUn™
 *
cUn™
, 
ArmCÚd™iÚCode
 
cc
)

249  
	`ÃwLIR2
(
cUn™
, 
kThumb2BCÚd
, 0 , 
cc
);

250 
	}
}

252 
ArmLIR
 *
	$İImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
v®ue
)

254 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

255 
İ
) {

256 
kOpPush
: {

257 ià((
v®ue
 & 0xff00) == 0) {

258 
İcode
 = 
kThumbPush
;

259 } ià((
v®ue
 & 0xff00è=ğ(1 << 
r14Ì
)) {

261 
İcode
 = 
kThumbPush
;

262 
v®ue
 = (value & 0xff) | (1<<8);

264 
İcode
 = 
kThumb2Push
;

268 
kOpPİ
: {

269 ià((
v®ue
 & 0xff00) == 0) {

270 
İcode
 = 
kThumbPİ
;

271 } ià((
v®ue
 & 0xff00è=ğ(1 << 
r15pc
)) {

273 
İcode
 = 
kThumbPİ
;

274 
v®ue
 = (value & 0xff) | (1<<8);

276 
İcode
 = 
kThumb2Pİ
;

281 
	`as£¹
(0);

283  
	`ÃwLIR1
(
cUn™
, 
İcode
, 
v®ue
);

284 
	}
}

286 
ArmLIR
 *
	$İReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src
)

288 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

289 
İ
) {

290 
kOpBlx
:

291 
İcode
 = 
kThumbBlxR
;

294 
	`as£¹
(0);

296  
	`ÃwLIR1
(
cUn™
, 
İcode
, 
rDe¡Src
);

297 
	}
}

299 
ArmLIR
 *
	$İRegRegShiá
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

300 
rSrc2
, 
shiá
)

302 
boŞ
 
thumbFÜm
 = ((
shiá
 =ğ0è&& 
	`LOWREG
(
rDe¡Src1
è&& LOWREG(
rSrc2
));

303 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

304 
İ
) {

305 
kOpAdc
:

306 
İcode
 = (
thumbFÜm
è? 
kThumbAdcRR
 : 
kThumb2AdcRRR
;

308 
kOpAnd
:

309 
İcode
 = (
thumbFÜm
è? 
kThumbAndRR
 : 
kThumb2AndRRR
;

311 
kOpBic
:

312 
İcode
 = (
thumbFÜm
è? 
kThumbBicRR
 : 
kThumb2BicRRR
;

314 
kOpCmn
:

315 
	`as£¹
(
shiá
 == 0);

316 
İcode
 = (
thumbFÜm
è? 
kThumbCmnRR
 : 
kThumb2CmnRR
;

318 
kOpCmp
:

319 ià(
thumbFÜm
)

320 
İcode
 = 
kThumbCmpRR
;

321 ià((
shiá
 =ğ0è&& !
	`LOWREG
(
rDe¡Src1
è&& !LOWREG(
rSrc2
))

322 
İcode
 = 
kThumbCmpHH
;

323 ià((
shiá
 =ğ0è&& 
	`LOWREG
(
rDe¡Src1
))

324 
İcode
 = 
kThumbCmpLH
;

325 ià(
shiá
 == 0)

326 
İcode
 = 
kThumbCmpHL
;

328 
İcode
 = 
kThumb2CmpRR
;

330 
kOpXÜ
:

331 
İcode
 = (
thumbFÜm
è? 
kThumbEÜRR
 : 
kThumb2EÜRRR
;

333 
kOpMov
:

334 
	`as£¹
(
shiá
 == 0);

335 ià(
	`LOWREG
(
rDe¡Src1
è&& LOWREG(
rSrc2
))

336 
İcode
 = 
kThumbMovRR
;

337 ià(!
	`LOWREG
(
rDe¡Src1
è&& !LOWREG(
rSrc2
))

338 
İcode
 = 
kThumbMovRR_H2H
;

339 ià(
	`LOWREG
(
rDe¡Src1
))

340 
İcode
 = 
kThumbMovRR_H2L
;

342 
İcode
 = 
kThumbMovRR_L2H
;

344 
kOpMul
:

345 
	`as£¹
(
shiá
 == 0);

346 
İcode
 = (
thumbFÜm
è? 
kThumbMul
 : 
kThumb2MulRRR
;

348 
kOpMvn
:

349 
İcode
 = (
thumbFÜm
è? 
kThumbMvn
 : 
kThumb2MnvRR
;

351 
kOpNeg
:

352 
	`as£¹
(
shiá
 == 0);

353 
İcode
 = (
thumbFÜm
è? 
kThumbNeg
 : 
kThumb2NegRR
;

355 
kOpOr
:

356 
İcode
 = (
thumbFÜm
è? 
kThumbO¼
 : 
kThumb2O¼RRR
;

358 
kOpSbc
:

359 
İcode
 = (
thumbFÜm
è? 
kThumbSbc
 : 
kThumb2SbcRRR
;

361 
kOpT¡
:

362 
İcode
 = (
thumbFÜm
è? 
kThumbT¡
 : 
kThumb2T¡RR
;

364 
kOpL¦
:

365 
	`as£¹
(
shiá
 == 0);

366 
İcode
 = (
thumbFÜm
è? 
kThumbL¦RR
 : 
kThumb2L¦RRR
;

368 
kOpL¤
:

369 
	`as£¹
(
shiá
 == 0);

370 
İcode
 = (
thumbFÜm
è? 
kThumbL¤RR
 : 
kThumb2L¤RRR
;

372 
kOpA¤
:

373 
	`as£¹
(
shiá
 == 0);

374 
İcode
 = (
thumbFÜm
è? 
kThumbA¤RR
 : 
kThumb2A¤RRR
;

376 
kOpRÜ
:

377 
	`as£¹
(
shiá
 == 0);

378 
İcode
 = (
thumbFÜm
è? 
kThumbRÜRR
 : 
kThumb2RÜRRR
;

380 
kOpAdd
:

381 
İcode
 = (
thumbFÜm
è? 
kThumbAddRRR
 : 
kThumb2AddRRR
;

383 
kOpSub
:

384 
İcode
 = (
thumbFÜm
è? 
kThumbSubRRR
 : 
kThumb2SubRRR
;

386 
kOp2By‹
:

387 
	`as£¹
(
shiá
 == 0);

388  
	`ÃwLIR4
(
cUn™
, 
kThumb2Sbfx
, 
rDe¡Src1
, 
rSrc2
, 0, 8);

389 
kOp2ShÜt
:

390 
	`as£¹
(
shiá
 == 0);

391  
	`ÃwLIR4
(
cUn™
, 
kThumb2Sbfx
, 
rDe¡Src1
, 
rSrc2
, 0, 16);

392 
kOp2Ch¬
:

393 
	`as£¹
(
shiá
 == 0);

394  
	`ÃwLIR4
(
cUn™
, 
kThumb2Ubfx
, 
rDe¡Src1
, 
rSrc2
, 0, 16);

396 
	`as£¹
(0);

399 
	`as£¹
(
İcode
 >= 0);

400 ià(
EncodšgM­
[
İcode
].
æags
 & 
IS_BINARY_OP
)

401  
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
rSrc2
);

402 ià(
EncodšgM­
[
İcode
].
æags
 & 
IS_TERTIARY_OP
) {

403 ià(
EncodšgM­
[
İcode
].
f›ldLoc
[2].
kšd
 =ğ
kFmtShiá
)

404  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
rSrc2
, 
shiá
);

406  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡Src1
,„De¡Src1, 
rSrc2
);

407 } ià(
EncodšgM­
[
İcode
].
æags
 & 
IS_QUAD_OP
)

408  
	`ÃwLIR4
(
cUn™
, 
İcode
, 
rDe¡Src1
,„De¡Src1, 
rSrc2
, 
shiá
);

410 
	`as£¹
(0);

411  
NULL
;

413 
	}
}

415 
ArmLIR
 *
	$İRegReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

416 
rSrc2
)

418  
	`İRegRegShiá
(
cUn™
, 
İ
, 
rDe¡Src1
, 
rSrc2
, 0);

419 
	}
}

421 
ArmLIR
 *
	$İRegRegRegShiá
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
,

422 
rDe¡
, 
rSrc1
, 
rSrc2
, 
shiá
)

424 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

425 
boŞ
 
thumbFÜm
 = (
shiá
 =ğ0è&& 
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc1
) &&

426 
	`LOWREG
(
rSrc2
);

427 
İ
) {

428 
kOpAdd
:

429 
İcode
 = (
thumbFÜm
è? 
kThumbAddRRR
 : 
kThumb2AddRRR
;

431 
kOpSub
:

432 
İcode
 = (
thumbFÜm
è? 
kThumbSubRRR
 : 
kThumb2SubRRR
;

434 
kOpAdc
:

435 
İcode
 = 
kThumb2AdcRRR
;

437 
kOpAnd
:

438 
İcode
 = 
kThumb2AndRRR
;

440 
kOpBic
:

441 
İcode
 = 
kThumb2BicRRR
;

443 
kOpXÜ
:

444 
İcode
 = 
kThumb2EÜRRR
;

446 
kOpMul
:

447 
	`as£¹
(
shiá
 == 0);

448 
İcode
 = 
kThumb2MulRRR
;

450 
kOpOr
:

451 
İcode
 = 
kThumb2O¼RRR
;

453 
kOpSbc
:

454 
İcode
 = 
kThumb2SbcRRR
;

456 
kOpL¦
:

457 
	`as£¹
(
shiá
 == 0);

458 
İcode
 = 
kThumb2L¦RRR
;

460 
kOpL¤
:

461 
	`as£¹
(
shiá
 == 0);

462 
İcode
 = 
kThumb2L¤RRR
;

464 
kOpA¤
:

465 
	`as£¹
(
shiá
 == 0);

466 
İcode
 = 
kThumb2A¤RRR
;

468 
kOpRÜ
:

469 
	`as£¹
(
shiá
 == 0);

470 
İcode
 = 
kThumb2RÜRRR
;

473 
	`as£¹
(0);

476 
	`as£¹
(
İcode
 >= 0);

477 ià(
EncodšgM­
[
İcode
].
æags
 & 
IS_QUAD_OP
)

478  
	`ÃwLIR4
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
rSrc2
, 
shiá
);

480 
	`as£¹
(
EncodšgM­
[
İcode
].
æags
 & 
IS_TERTIARY_OP
);

481  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
rSrc2
);

483 
	}
}

485 
ArmLIR
 *
	$İRegRegReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡
,

486 
rSrc1
, 
rSrc2
)

488  
	`İRegRegRegShiá
(
cUn™
, 
İ
, 
rDe¡
, 
rSrc1
, 
rSrc2
, 0);

489 
	}
}

491 
ArmLIR
 *
	$İRegRegImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡
,

492 
rSrc1
, 
v®ue
)

494 
ArmLIR
 *
»s
;

495 
boŞ
 
Ãg
 = (
v®ue
 < 0);

496 
absV®ue
 = (
Ãg
è? -
v®ue
 : value;

497 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

498 
ArmOpcode
 
®tOpcode
 = 
kThumbBk±
;

499 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc1
));

500 
modImm
 = 
	`modif›dImmedŸ‹
(
v®ue
);

501 
modImmNeg
 = 
	`modif›dImmedŸ‹
(-
v®ue
);

503 
İ
) {

504 
kOpL¦
:

505 ià(
®lLowRegs
)

506  
	`ÃwLIR3
(
cUn™
, 
kThumbL¦RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

508  
	`ÃwLIR3
(
cUn™
, 
kThumb2L¦RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

509 
kOpL¤
:

510 ià(
®lLowRegs
)

511  
	`ÃwLIR3
(
cUn™
, 
kThumbL¤RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

513  
	`ÃwLIR3
(
cUn™
, 
kThumb2L¤RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

514 
kOpA¤
:

515 ià(
®lLowRegs
)

516  
	`ÃwLIR3
(
cUn™
, 
kThumbA¤RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

518  
	`ÃwLIR3
(
cUn™
, 
kThumb2A¤RRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

519 
kOpRÜ
:

520  
	`ÃwLIR3
(
cUn™
, 
kThumb2RÜRRI5
, 
rDe¡
, 
rSrc1
, 
v®ue
);

521 
kOpAdd
:

522 ià(
	`LOWREG
(
rDe¡
è&& (
rSrc1
 =ğ
r13¥
) &&

523 (
v®ue
 <= 1020) && ((value & 0x3)==0)) {

524  
	`ÃwLIR3
(
cUn™
, 
kThumbAddSpR–
, 
rDe¡
, 
rSrc1
,

525 
v®ue
 >> 2);

526 } ià(
	`LOWREG
(
rDe¡
è&& (
rSrc1
 =ğ
r15pc
) &&

527 (
v®ue
 <= 1020) && ((value & 0x3)==0)) {

528  
	`ÃwLIR3
(
cUn™
, 
kThumbAddPcR–
, 
rDe¡
, 
rSrc1
,

529 
v®ue
 >> 2);

531 
İcode
 = 
kThumb2AddRRI8
;

532 
®tOpcode
 = 
kThumb2AddRRR
;

534 
kOpSub
:

535 ià(
®lLowRegs
 && ((
absV®ue
 & 0x7) ==‡bsValue)) {

536 ià(
İ
 =ğ
kOpAdd
)

537 
İcode
 = (
Ãg
è? 
kThumbSubRRI3
 : 
kThumbAddRRI3
;

539 
İcode
 = (
Ãg
è? 
kThumbAddRRI3
 : 
kThumbSubRRI3
;

540  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
absV®ue
);

541 } ià((
absV®ue
 & 0xff) ==‡bsValue) {

542 ià(
İ
 =ğ
kOpAdd
)

543 
İcode
 = (
Ãg
è? 
kThumb2SubRRI12
 : 
kThumb2AddRRI12
;

545 
İcode
 = (
Ãg
è? 
kThumb2AddRRI12
 : 
kThumb2SubRRI12
;

546  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
absV®ue
);

548 ià(
modImmNeg
 >= 0) {

549 
İ
 = (İ =ğ
kOpAdd
è? 
kOpSub
 : kOpAdd;

550 
modImm
 = 
modImmNeg
;

552 ià(
İ
 =ğ
kOpSub
) {

553 
İcode
 = 
kThumb2SubRRI8
;

554 
®tOpcode
 = 
kThumb2SubRRR
;

557 
kOpAdc
:

558 
İcode
 = 
kThumb2AdcRRI8
;

559 
®tOpcode
 = 
kThumb2AdcRRR
;

561 
kOpSbc
:

562 
İcode
 = 
kThumb2SbcRRI8
;

563 
®tOpcode
 = 
kThumb2SbcRRR
;

565 
kOpOr
:

566 
İcode
 = 
kThumb2O¼RRI8
;

567 
®tOpcode
 = 
kThumb2O¼RRR
;

569 
kOpAnd
:

570 
İcode
 = 
kThumb2AndRRI8
;

571 
®tOpcode
 = 
kThumb2AndRRR
;

573 
kOpXÜ
:

574 
İcode
 = 
kThumb2EÜRRI8
;

575 
®tOpcode
 = 
kThumb2EÜRRR
;

577 
kOpMul
:

579 
modImm
 = -1;

580 
®tOpcode
 = 
kThumb2MulRRR
;

582 
kOpCmp
: {

583 
modImm
 = 
	`modif›dImmedŸ‹
(
v®ue
);

584 
ArmLIR
 *
»s
;

585 ià(
modImm
 >= 0) {

586 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2CmpRI8
, 
rSrc1
, 
modImm
);

588 
rTmp
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

589 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rTmp
, 
v®ue
);

590 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
rSrc1
, 
rTmp
);

591 
	`dvmComp”F»eTemp
(
cUn™
, 
rTmp
);

593  
»s
;

596 
	`as£¹
(0);

599 ià(
modImm
 >= 0) {

600  
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rSrc1
, 
modImm
);

602 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

603 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
v®ue
);

604 ià(
EncodšgM­
[
®tOpcode
].
æags
 & 
IS_QUAD_OP
)

605 
»s
 = 
	`ÃwLIR4
(
cUn™
, 
®tOpcode
, 
rDe¡
, 
rSrc1
, 
rSü©ch
, 0);

607 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
®tOpcode
, 
rDe¡
, 
rSrc1
, 
rSü©ch
);

608 
	`dvmComp”F»eTemp
(
cUn™
, 
rSü©ch
);

609  
»s
;

611 
	}
}

614 
ArmLIR
 *
	$İRegImm
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src1
,

615 
v®ue
)

617 
boŞ
 
Ãg
 = (
v®ue
 < 0);

618 
absV®ue
 = (
Ãg
è? -
v®ue
 : value;

619 
boŞ
 
shÜtFÜm
 = (((
absV®ue
 & 0xffè=ğabsV®ueè&& 
	`LOWREG
(
rDe¡Src1
));

620 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

621 
İ
) {

622 
kOpAdd
:

623 iàĞ!
Ãg
 && (
rDe¡Src1
 =ğ
r13¥
è&& (
v®ue
 <= 508)) {

624 
	`as£¹
((
v®ue
 & 0x3) == 0);

625  
	`ÃwLIR1
(
cUn™
, 
kThumbAddSpI7
, 
v®ue
 >> 2);

626 } ià(
shÜtFÜm
) {

627 
İcode
 = (
Ãg
è? 
kThumbSubRI8
 : 
kThumbAddRI8
;

630 
kOpSub
:

631 ià(!
Ãg
 && (
rDe¡Src1
 =ğ
r13¥
è&& (
v®ue
 <= 508)) {

632 
	`as£¹
((
v®ue
 & 0x3) == 0);

633  
	`ÃwLIR1
(
cUn™
, 
kThumbSubSpI7
, 
v®ue
 >> 2);

634 } ià(
shÜtFÜm
) {

635 
İcode
 = (
Ãg
è? 
kThumbAddRI8
 : 
kThumbSubRI8
;

638 
kOpCmp
:

639 ià(
	`LOWREG
(
rDe¡Src1
è&& 
shÜtFÜm
)

640 
İcode
 = (
shÜtFÜm
è? 
kThumbCmpRI8
 : 
kThumbCmpRR
;

641 ià(
	`LOWREG
(
rDe¡Src1
))

642 
İcode
 = 
kThumbCmpRR
;

644 
shÜtFÜm
 = 
çl£
;

645 
İcode
 = 
kThumbCmpHL
;

650 
shÜtFÜm
 = 
çl£
;

653 ià(
shÜtFÜm
)

654  
	`ÃwLIR2
(
cUn™
, 
İcode
, 
rDe¡Src1
, 
absV®ue
);

656  
	`İRegRegImm
(
cUn™
, 
İ
, 
rDe¡Src1
,„De¡Src1, 
v®ue
);

658 
	}
}

664 
	$’codeImmDoubËHigh
(
v®ue
)

666 
»s
;

667 
b™A
 = (
v®ue
 & 0x80000000) >> 31;

668 
nÙB™B
 = (
v®ue
 & 0x40000000) >> 30;

669 
b™B
 = (
v®ue
 & 0x20000000) >> 29;

670 
bSm—r
 = (
v®ue
 & 0x3fc00000) >> 22;

671 
¦iû
 = (
v®ue
 & 0x003f0000) >> 16;

672 
z”Ûs
 = (
v®ue
 & 0x0000ffff);

673 ià(
z”Ûs
 != 0)

675 ià(
b™B
) {

676 ià((
nÙB™B
 !ğ0è|| (
bSm—r
 != 0x1f))

679 ià((
nÙB™B
 !ğ1è|| (
bSm—r
 != 0x0))

682 
»s
 = (
b™A
 << 7è| (
b™B
 << 6è| 
¦iû
;

683  
»s
;

684 
	}
}

686 
	$’codeImmDoubË
(
v®Lo
, 
v®Hi
)

688 
»s
 = -1;

689 ià(
v®Lo
 == 0)

690 
»s
 = 
	`’codeImmDoubËHigh
(
v®Hi
);

691  
»s
;

692 
	}
}

694 
ArmLIR
 *
	$lßdCÚ¡ªtV®ueWide
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡Lo
,

695 
rDe¡Hi
, 
v®Lo
, 
v®Hi
)

697 
’codedImm
 = 
	`’codeImmDoubË
(
v®Lo
, 
v®Hi
);

698 
ArmLIR
 *
»s
;

699 ià(
	`FPREG
(
rDe¡Lo
è&& (
’codedImm
 >= 0)) {

700 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vmovd_IMM8
, 
	`S2D
(
rDe¡Lo
, 
rDe¡Hi
),

701 
’codedImm
);

703 
»s
 = 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡Lo
, 
v®Lo
);

704 
	`lßdCÚ¡ªtNoClobb”
(
cUn™
, 
rDe¡Hi
, 
v®Hi
);

706  
»s
;

707 
	}
}

709 
	$’codeShiá
(
code
, 
amouÁ
) {

710  ((
amouÁ
 & 0x1fè<< 2è| 
code
;

711 
	}
}

713 
ArmLIR
 *
	$lßdBa£Indexed
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

714 
rIndex
, 
rDe¡
, 
sÿË
, 
OpSize
 
size
)

716 
boŞ
 
®lLowRegs
 = 
	`LOWREG
(
rBa£
è&& LOWREG(
rIndex
è&& LOWREG(
rDe¡
);

717 
ArmLIR
 *
lßd
;

718 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

719 
boŞ
 
thumbFÜm
 = (
®lLowRegs
 && (
sÿË
 == 0));

720 
»gPŒ
;

722 ià(
	`FPREG
(
rDe¡
)) {

723 
	`as£¹
(
	`SINGLEREG
(
rDe¡
));

724 
	`as£¹
((
size
 =ğ
kWÜd
è|| (siz=ğ
kSšgË
));

725 
İcode
 = 
kThumb2Vldrs
;

726 
size
 = 
kSšgË
;

728 ià(
size
 =ğ
kSšgË
)

729 
size
 = 
kWÜd
;

732 
size
) {

733 
kSšgË
:

734 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

735 ià(
sÿË
) {

736 
	`ÃwLIR4
(
cUn™
, 
kThumb2AddRRR
, 
»gPŒ
, 
rBa£
, 
rIndex
,

737 
	`’codeShiá
(
kArmL¦
, 
sÿË
));

739 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
rBa£
, 
rIndex
);

741 
lßd
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
»gPŒ
, 0);

742 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

743 ià(
cUn™
->
h—pMemOp
)

744 
lßd
->
æags
.
š£¹W¿µ”
 = 
Œue
;

746  
lßd
;

747 
kWÜd
:

748 
İcode
 = (
thumbFÜm
è? 
kThumbLdrRRR
 : 
kThumb2LdrRRR
;

750 
kUnsigÃdH®f
:

751 
İcode
 = (
thumbFÜm
è? 
kThumbLdrhRRR
 : 
kThumb2LdrhRRR
;

753 
kSigÃdH®f
:

754 
İcode
 = (
thumbFÜm
è? 
kThumbLdrshRRR
 : 
kThumb2LdrshRRR
;

756 
kUnsigÃdBy‹
:

757 
İcode
 = (
thumbFÜm
è? 
kThumbLdrbRRR
 : 
kThumb2LdrbRRR
;

759 
kSigÃdBy‹
:

760 
İcode
 = (
thumbFÜm
è? 
kThumbLdrsbRRR
 : 
kThumb2LdrsbRRR
;

763 
	`as£¹
(0);

765 ià(
thumbFÜm
)

766 
lßd
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
rIndex
);

768 
lßd
 = 
	`ÃwLIR4
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
rIndex
, 
sÿË
);

770 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

771 ià(
cUn™
->
h—pMemOp
)

772 
lßd
->
æags
.
š£¹W¿µ”
 = 
Œue
;

774  
lßd
;

775 
	}
}

777 
ArmLIR
 *
	$¡ÜeBa£Indexed
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

778 
rIndex
, 
rSrc
, 
sÿË
, 
OpSize
 
size
)

780 
boŞ
 
®lLowRegs
 = 
	`LOWREG
(
rBa£
è&& LOWREG(
rIndex
è&& LOWREG(
rSrc
);

781 
ArmLIR
 *
¡Üe
;

782 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

783 
boŞ
 
thumbFÜm
 = (
®lLowRegs
 && (
sÿË
 == 0));

784 
»gPŒ
;

786 ià(
	`FPREG
(
rSrc
)) {

787 
	`as£¹
(
	`SINGLEREG
(
rSrc
));

788 
	`as£¹
((
size
 =ğ
kWÜd
è|| (siz=ğ
kSšgË
));

789 
İcode
 = 
kThumb2V¡rs
;

790 
size
 = 
kSšgË
;

792 ià(
size
 =ğ
kSšgË
)

793 
size
 = 
kWÜd
;

796 
size
) {

797 
kSšgË
:

798 
»gPŒ
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

799 ià(
sÿË
) {

800 
	`ÃwLIR4
(
cUn™
, 
kThumb2AddRRR
, 
»gPŒ
, 
rBa£
, 
rIndex
,

801 
	`’codeShiá
(
kArmL¦
, 
sÿË
));

803 
	`İRegRegReg
(
cUn™
, 
kOpAdd
, 
»gPŒ
, 
rBa£
, 
rIndex
);

805 
¡Üe
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
»gPŒ
, 0);

806 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

807 ià(
cUn™
->
h—pMemOp
)

808 
¡Üe
->
æags
.
š£¹W¿µ”
 = 
Œue
;

810  
¡Üe
;

811 
kWÜd
:

812 
İcode
 = (
thumbFÜm
è? 
kThumbSŒRRR
 : 
kThumb2SŒRRR
;

814 
kUnsigÃdH®f
:

815 
kSigÃdH®f
:

816 
İcode
 = (
thumbFÜm
è? 
kThumbSŒhRRR
 : 
kThumb2SŒhRRR
;

818 
kUnsigÃdBy‹
:

819 
kSigÃdBy‹
:

820 
İcode
 = (
thumbFÜm
è? 
kThumbSŒbRRR
 : 
kThumb2SŒbRRR
;

823 
	`as£¹
(0);

825 ià(
thumbFÜm
)

826 
¡Üe
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
rIndex
);

828 
¡Üe
 = 
	`ÃwLIR4
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
rIndex
, 
sÿË
);

830 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

831 ià(
cUn™
->
h—pMemOp
)

832 
¡Üe
->
æags
.
š£¹W¿µ”
 = 
Œue
;

834  
¡Üe
;

835 
	}
}

842 
ArmLIR
 *
	$lßdBa£Di¥Body
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

843 
di¥Ïûm’t
, 
rDe¡
, 
rDe¡Hi
,

844 
OpSize
 
size
, 
sReg
)

846 
ArmLIR
 *
»s
, *
lßd
;

847 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

848 
boŞ
 
shÜtFÜm
 = 
çl£
;

849 
boŞ
 
thumb2FÜm
 = (
di¥Ïûm’t
 < 4092 && displacement >= 0);

850 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rBa£
è&& LOWREG(
rDe¡
));

851 
’codedDi¥
 = 
di¥Ïûm’t
;

853 
size
) {

854 
kDoubË
:

855 
kLÚg
:

856 ià(
	`FPREG
(
rDe¡
)) {

857 ià(
	`SINGLEREG
(
rDe¡
)) {

858 
	`as£¹
(
	`FPREG
(
rDe¡Hi
));

859 
rDe¡
 = 
	`S2D
ÔDe¡, 
rDe¡Hi
);

861 
İcode
 = 
kThumb2Vldrd
;

862 ià(
di¥Ïûm’t
 <= 1020) {

863 
shÜtFÜm
 = 
Œue
;

864 
’codedDi¥
 >>= 2;

868 
»s
 = 
	`lßdBa£Di¥Body
(
cUn™
, 
mœ
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡
,

869 -1, 
kWÜd
, 
sReg
);

870 
	`lßdBa£Di¥Body
(
cUn™
, 
NULL
, 
rBa£
, 
di¥Ïûm’t
 + 4, 
rDe¡Hi
,

871 -1, 
kWÜd
, 
INVALID_SREG
);

872  
»s
;

874 
kSšgË
:

875 
kWÜd
:

876 ià(
	`FPREG
(
rDe¡
)) {

877 
İcode
 = 
kThumb2Vldrs
;

878 ià(
di¥Ïûm’t
 <= 1020) {

879 
shÜtFÜm
 = 
Œue
;

880 
’codedDi¥
 >>= 2;

884 ià(
	`LOWREG
(
rDe¡
è&& (
rBa£
 =ğ
r15pc
) &&

885 (
di¥Ïûm’t
 <= 1020) && (displacement >= 0)) {

886 
shÜtFÜm
 = 
Œue
;

887 
’codedDi¥
 >>= 2;

888 
İcode
 = 
kThumbLdrPcR–
;

889 } ià(
	`LOWREG
(
rDe¡
è&& (
rBa£
 =ğ
r13¥
) &&

890 (
di¥Ïûm’t
 <= 1020) && (displacement >= 0)) {

891 
shÜtFÜm
 = 
Œue
;

892 
’codedDi¥
 >>= 2;

893 
İcode
 = 
kThumbLdrSpR–
;

894 } ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 128 && displacement >= 0) {

895 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

896 
shÜtFÜm
 = 
Œue
;

897 
’codedDi¥
 >>= 2;

898 
İcode
 = 
kThumbLdrRRI5
;

899 } ià(
thumb2FÜm
) {

900 
shÜtFÜm
 = 
Œue
;

901 
İcode
 = 
kThumb2LdrRRI12
;

904 
kUnsigÃdH®f
:

905 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 64 && displacement >= 0) {

906 
	`as£¹
((
di¥Ïûm’t
 & 0x1) == 0);

907 
shÜtFÜm
 = 
Œue
;

908 
’codedDi¥
 >>= 1;

909 
İcode
 = 
kThumbLdrhRRI5
;

910 } ià(
di¥Ïûm’t
 < 4092 && displacement >= 0) {

911 
shÜtFÜm
 = 
Œue
;

912 
İcode
 = 
kThumb2LdrhRRI12
;

915 
kSigÃdH®f
:

916 ià(
thumb2FÜm
) {

917 
shÜtFÜm
 = 
Œue
;

918 
İcode
 = 
kThumb2LdrshRRI12
;

921 
kUnsigÃdBy‹
:

922 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 32 && displacement >= 0) {

923 
shÜtFÜm
 = 
Œue
;

924 
İcode
 = 
kThumbLdrbRRI5
;

925 } ià(
thumb2FÜm
) {

926 
shÜtFÜm
 = 
Œue
;

927 
İcode
 = 
kThumb2LdrbRRI12
;

930 
kSigÃdBy‹
:

931 ià(
thumb2FÜm
) {

932 
shÜtFÜm
 = 
Œue
;

933 
İcode
 = 
kThumb2LdrsbRRI12
;

937 
	`as£¹
(0);

940 ià(
shÜtFÜm
) {

941 
lßd
 = 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rDe¡
, 
rBa£
, 
’codedDi¥
);

943 
»gOff£t
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

944 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
»gOff£t
, 
’codedDi¥
);

945 
lßd
 = 
	`lßdBa£Indexed
(
cUn™
, 
rBa£
, 
»gOff£t
, 
rDe¡
, 0, 
size
);

946 
	`dvmComp”F»eTemp
(
cUn™
, 
»gOff£t
);

949 ià(
rBa£
 =ğ
r5FP
) {

950 
	`ªnÙ©eD®vikRegAcûss
(
lßd
, 
di¥Ïûm’t
 >> 2, 
Œue
 );

952 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

953 ià(
cUn™
->
h—pMemOp
)

954 
lßd
->
æags
.
š£¹W¿µ”
 = 
Œue
;

956  
lßd
;

957 
	}
}

959 
ArmLIR
 *
	$lßdBa£Di¥
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

960 
di¥Ïûm’t
, 
rDe¡
, 
OpSize
 
size
,

961 
sReg
)

963  
	`lßdBa£Di¥Body
(
cUn™
, 
mœ
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡
, -1,

964 
size
, 
sReg
);

965 
	}
}

967 
ArmLIR
 *
	$lßdBa£Di¥Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rBa£
,

968 
di¥Ïûm’t
, 
rDe¡Lo
, 
rDe¡Hi
,

969 
sReg
)

971  
	`lßdBa£Di¥Body
(
cUn™
, 
mœ
, 
rBa£
, 
di¥Ïûm’t
, 
rDe¡Lo
, 
rDe¡Hi
,

972 
kLÚg
, 
sReg
);

973 
	}
}

976 
ArmLIR
 *
	$¡ÜeBa£Di¥Body
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

977 
di¥Ïûm’t
, 
rSrc
, 
rSrcHi
,

978 
OpSize
 
size
)

980 
ArmLIR
 *
»s
, *
¡Üe
;

981 
ArmOpcode
 
İcode
 = 
kThumbBk±
;

982 
boŞ
 
shÜtFÜm
 = 
çl£
;

983 
boŞ
 
thumb2FÜm
 = (
di¥Ïûm’t
 < 4092 && displacement >= 0);

984 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rBa£
è&& LOWREG(
rSrc
));

985 
’codedDi¥
 = 
di¥Ïûm’t
;

987 
size
) {

988 
kLÚg
:

989 
kDoubË
:

990 ià(!
	`FPREG
(
rSrc
)) {

991 
»s
 = 
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrc
,

992 -1, 
kWÜd
);

993 
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
 + 4, 
rSrcHi
,

994 -1, 
kWÜd
);

995  
»s
;

997 ià(
	`SINGLEREG
(
rSrc
)) {

998 
	`as£¹
(
	`FPREG
(
rSrcHi
));

999 
rSrc
 = 
	`S2D
ÔSrc, 
rSrcHi
);

1001 
İcode
 = 
kThumb2V¡rd
;

1002 ià(
di¥Ïûm’t
 <= 1020) {

1003 
shÜtFÜm
 = 
Œue
;

1004 
’codedDi¥
 >>= 2;

1007 
kSšgË
:

1008 
kWÜd
:

1009 ià(
	`FPREG
(
rSrc
)) {

1010 
	`as£¹
(
	`SINGLEREG
(
rSrc
));

1011 
İcode
 = 
kThumb2V¡rs
;

1012 ià(
di¥Ïûm’t
 <= 1020) {

1013 
shÜtFÜm
 = 
Œue
;

1014 
’codedDi¥
 >>= 2;

1018 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 128 && displacement >= 0) {

1019 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

1020 
shÜtFÜm
 = 
Œue
;

1021 
’codedDi¥
 >>= 2;

1022 
İcode
 = 
kThumbSŒRRI5
;

1023 } ià(
thumb2FÜm
) {

1024 
shÜtFÜm
 = 
Œue
;

1025 
İcode
 = 
kThumb2SŒRRI12
;

1028 
kUnsigÃdH®f
:

1029 
kSigÃdH®f
:

1030 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 64 && displacement >= 0) {

1031 
	`as£¹
((
di¥Ïûm’t
 & 0x1) == 0);

1032 
shÜtFÜm
 = 
Œue
;

1033 
’codedDi¥
 >>= 1;

1034 
İcode
 = 
kThumbSŒhRRI5
;

1035 } ià(
thumb2FÜm
) {

1036 
shÜtFÜm
 = 
Œue
;

1037 
İcode
 = 
kThumb2SŒhRRI12
;

1040 
kUnsigÃdBy‹
:

1041 
kSigÃdBy‹
:

1042 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 32 && displacement >= 0) {

1043 
shÜtFÜm
 = 
Œue
;

1044 
İcode
 = 
kThumbSŒbRRI5
;

1045 } ià(
thumb2FÜm
) {

1046 
shÜtFÜm
 = 
Œue
;

1047 
İcode
 = 
kThumb2SŒbRRI12
;

1051 
	`as£¹
(0);

1053 ià(
shÜtFÜm
) {

1054 
¡Üe
 = 
»s
 = 
	`ÃwLIR3
(
cUn™
, 
İcode
, 
rSrc
, 
rBa£
, 
’codedDi¥
);

1056 
rSü©ch
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1057 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
’codedDi¥
);

1058 
¡Üe
 = 
	`¡ÜeBa£Indexed
(
cUn™
, 
rBa£
, 
rSü©ch
, 
rSrc
, 0, 
size
);

1059 
	`dvmComp”F»eTemp
(
cUn™
, 
rSü©ch
);

1062 ià(
rBa£
 =ğ
r5FP
) {

1063 
	`ªnÙ©eD®vikRegAcûss
(
¡Üe
, 
di¥Ïûm’t
 >> 2, 
çl£
 );

1065 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1066 ià(
cUn™
->
h—pMemOp
)

1067 
¡Üe
->
æags
.
š£¹W¿µ”
 = 
Œue
;

1069  
»s
;

1070 
	}
}

1072 
ArmLIR
 *
	$¡ÜeBa£Di¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

1073 
di¥Ïûm’t
, 
rSrc
, 
OpSize
 
size
)

1075  
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrc
, -1, 
size
);

1076 
	}
}

1078 
ArmLIR
 *
	$¡ÜeBa£Di¥Wide
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

1079 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
)

1081  
	`¡ÜeBa£Di¥Body
(
cUn™
, 
rBa£
, 
di¥Ïûm’t
, 
rSrcLo
, 
rSrcHi
, 
kLÚg
);

1082 
	}
}

1084 
ArmLIR
 *
	$lßdMuÉË
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
rMask
)

1086 
ArmLIR
 *
»s
;

1087 
	`g’B¬r›r
(
cUn™
);

1088 ià(
	`LOWREG
(
rBa£
è&& ((
rMask
 & 0xff)==rMask)) {

1089 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbLdmŸ
, 
rBa£
, 
rMask
);

1091 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2LdmŸ
, 
rBa£
, 
rMask
);

1093 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1094 ià(
cUn™
->
h—pMemOp
)

1095 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

1097 
	`g’B¬r›r
(
cUn™
);

1098  
»s
;

1099 
	}
}

1101 
ArmLIR
 *
	$¡ÜeMuÉË
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
rMask
)

1103 
ArmLIR
 *
»s
;

1104 
	`g’B¬r›r
(
cUn™
);

1105 ià(
	`LOWREG
(
rBa£
è&& ((
rMask
 & 0xff)==rMask)) {

1106 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbStmŸ
, 
rBa£
, 
rMask
);

1108 
»s
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2StmŸ
, 
rBa£
, 
rMask
);

1110 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1111 ià(
cUn™
->
h—pMemOp
)

1112 
»s
->
æags
.
š£¹W¿µ”
 = 
Œue
;

1114 
	`g’B¬r›r
(
cUn™
);

1115  
»s
;

1116 
	}
}

1118 
	$¡ÜePaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
, 
highReg
)

1120 
	`¡ÜeBa£Di¥Wide
(
cUn™
, 
ba£
, 0, 
lowReg
, 
highReg
);

1121 
	}
}

1123 
	$lßdPaœ
(
Comp©iÚUn™
 *
cUn™
, 
ba£
, 
lowReg
, 
highReg
)

1125 
	`lßdBa£Di¥Wide
(
cUn™
, 
NULL
, 
ba£
, 0, 
lowReg
, 
highReg
, 
INVALID_SREG
);

1126 
	}
}

1132 
ArmLIR
 *
	$g’CmpImmB¿nch
(
Comp©iÚUn™
 *
cUn™
,

1133 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

1134 
checkV®ue
)

1136 
ArmLIR
 *
b¿nch
;

1137 
modImm
;

1138 ià((
	`LOWREG
(
»g
)è&& (
checkV®ue
 == 0) &&

1139 ((
cÚd
 =ğ
kArmCÚdEq
è|| (cÚd =ğ
kArmCÚdNe
))) {

1140 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
,

1141 (
cÚd
 =ğ
kArmCÚdEq
è? 
kThumb2Cbz
 : 
kThumb2Cbnz
,

1142 
»g
, 0);

1144 
modImm
 = 
	`modif›dImmedŸ‹
(
checkV®ue
);

1145 ià(
	`LOWREG
(
»g
è&& ((
checkV®ue
 & 0xff) == checkValue)) {

1146 
	`ÃwLIR2
(
cUn™
, 
kThumbCmpRI8
, 
»g
, 
checkV®ue
);

1147 } ià(
modImm
 >= 0) {

1148 
	`ÃwLIR2
(
cUn™
, 
kThumb2CmpRI8
, 
»g
, 
modImm
);

1150 
tReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

1151 
	`lßdCÚ¡ªt
(
cUn™
, 
tReg
, 
checkV®ue
);

1152 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
»g
, 
tReg
);

1154 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
kThumbBCÚd
, 0, 
cÚd
);

1156  
b¿nch
;

1157 
	}
}

1159 
ArmLIR
 *
	$åRegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

1161 
ArmLIR
* 
»s
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

1162 
»s
->
İ”ªds
[0] = 
rDe¡
;

1163 
»s
->
İ”ªds
[1] = 
rSrc
;

1164 ià(
rDe¡
 =ğ
rSrc
) {

1165 
»s
->
æags
.
isNİ
 = 
Œue
;

1167 
	`as£¹
(
	`DOUBLEREG
(
rDe¡
è=ğDOUBLEREG(
rSrc
));

1168 ià(
	`DOUBLEREG
(
rDe¡
)) {

1169 
»s
->
İcode
 = 
kThumb2Vmovd
;

1171 ià(
	`SINGLEREG
(
rDe¡
)) {

1172 
»s
->
İcode
 = 
	`SINGLEREG
(
rSrc
è? 
kThumb2Vmovs
 : 
kThumb2Fm¤
;

1174 
	`as£¹
(
	`SINGLEREG
(
rSrc
));

1175 
»s
->
İcode
 = 
kThumb2Fmrs
;

1178 
»s
->
İ”ªds
[0] = 
rDe¡
;

1179 
»s
->
İ”ªds
[1] = 
rSrc
;

1181 
	`£tupResourûMasks
(
»s
);

1182  
»s
;

1183 
	}
}

1185 
ArmLIR
* 
	$g’RegCİyNoIn£¹
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

1187 
ArmLIR
* 
»s
;

1188 
ArmOpcode
 
İcode
;

1189 ià(
	`FPREG
(
rDe¡
è|| FPREG(
rSrc
))

1190  
	`åRegCİy
(
cUn™
, 
rDe¡
, 
rSrc
);

1191 
»s
 = (
ArmLIR
 *è
	`dvmComp”New
((ArmLIR), 
Œue
);

1192 ià(
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc
))

1193 
İcode
 = 
kThumbMovRR
;

1194 ià(!
	`LOWREG
(
rDe¡
è&& !LOWREG(
rSrc
))

1195 
İcode
 = 
kThumbMovRR_H2H
;

1196 ià(
	`LOWREG
(
rDe¡
))

1197 
İcode
 = 
kThumbMovRR_H2L
;

1199 
İcode
 = 
kThumbMovRR_L2H
;

1201 
»s
->
İ”ªds
[0] = 
rDe¡
;

1202 
»s
->
İ”ªds
[1] = 
rSrc
;

1203 
»s
->
İcode
 = opcode;

1204 
	`£tupResourûMasks
(
»s
);

1205 ià(
rDe¡
 =ğ
rSrc
) {

1206 
»s
->
æags
.
isNİ
 = 
Œue
;

1208  
»s
;

1209 
	}
}

1211 
ArmLIR
* 
	$g’RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

1213 
ArmLIR
 *
»s
 = 
	`g’RegCİyNoIn£¹
(
cUn™
, 
rDe¡
, 
rSrc
);

1214 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
*)
»s
);

1215  
»s
;

1216 
	}
}

1218 
	$g’RegCİyWide
(
Comp©iÚUn™
 *
cUn™
, 
de¡Lo
, 
de¡Hi
,

1219 
¤cLo
, 
¤cHi
)

1221 
boŞ
 
de¡FP
 = 
	`FPREG
(
de¡Lo
è&& FPREG(
de¡Hi
);

1222 
boŞ
 
¤cFP
 = 
	`FPREG
(
¤cLo
è&& FPREG(
¤cHi
);

1223 
	`as£¹
(
	`FPREG
(
¤cLo
è=ğFPREG(
¤cHi
));

1224 
	`as£¹
(
	`FPREG
(
de¡Lo
è=ğFPREG(
de¡Hi
));

1225 ià(
de¡FP
) {

1226 ià(
¤cFP
) {

1227 
	`g’RegCİy
(
cUn™
, 
	`S2D
(
de¡Lo
, 
de¡Hi
), S2D(
¤cLo
, 
¤cHi
));

1229 
	`ÃwLIR3
(
cUn™
, 
kThumb2Fmd¼
, 
	`S2D
(
de¡Lo
, 
de¡Hi
), 
¤cLo
, 
¤cHi
);

1232 ià(
¤cFP
) {

1233 
	`ÃwLIR3
(
cUn™
, 
kThumb2Fm¼d
, 
de¡Lo
, 
de¡Hi
, 
	`S2D
(
¤cLo
, 
¤cHi
));

1236 ià(
¤cHi
 =ğ
de¡Lo
) {

1237 
	`g’RegCİy
(
cUn™
, 
de¡Hi
, 
¤cHi
);

1238 
	`g’RegCİy
(
cUn™
, 
de¡Lo
, 
¤cLo
);

1240 
	`g’RegCİy
(
cUn™
, 
de¡Lo
, 
¤cLo
);

1241 
	`g’RegCİy
(
cUn™
, 
de¡Hi
, 
¤cHi
);

1245 
	}
}

1247 #ià
defšed
(
WITH_SELF_VERIFICATION
)

1248 
	$g’S–fV”ifiÿtiÚP»B¿nch
(
Comp©iÚUn™
 *
cUn™
,

1249 
ArmLIR
 *
ÜigLIR
) {

1250 
ArmLIR
 *
push
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

1251 
push
->
İcode
 = 
kThumbPush
;

1253 
push
->
İ”ªds
[0] = (1 << 
r5FP
 | 1 << 8);

1254 
	`£tupResourûMasks
(
push
);

1255 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
ÜigLIR
, (LIR *è
push
);

1256 
	}
}

1258 
	$g’S–fV”ifiÿtiÚPo¡B¿nch
(
Comp©iÚUn™
 *
cUn™
,

1259 
ArmLIR
 *
ÜigLIR
) {

1260 
ArmLIR
 *
pİ
 = (ArmLIR *è
	`dvmComp”New
((ArmLIR), 
Œue
);

1262 
pİ
->
İcode
 = 
kThumb2Pİ
;

1263 
pİ
->
İ”ªds
[0] = (1 << 
r5FP
 | 1 << 
r14Ì
);

1264 
	`£tupResourûMasks
(
pİ
);

1265 
	`dvmComp”In£¹LIRAá”
((
LIR
 *è
ÜigLIR
, (LIR *è
pİ
);

1266 
	}
}

	@vm/compiler/codegen/arm/Thumb2/Gen.cpp

47 
	$g’T¿ûProfeEÁry
(
Comp©iÚUn™
 *
cUn™
)

49 
šŒ_t
 
addr
 = (šŒ_t)
	`dvmJ™NextT¿ûCouÁ”
();

50 
	`as£¹
(
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN
);

51 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, 
addr
 & 0xffff);

52 
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, (
addr
 >> 16) & 0xffff);

53 
cUn™
->
chašC–lOff£tLIR
 =

54 (
LIR
 *è
	`ÃwLIR1
(
cUn™
, 
kArm16B™D©a
, 
CHAIN_CELL_OFFSET_TAG
);

55 
cUn™
->
h—d”Size
 = 6;

56 ià((
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgCÚtšuous
) ||

57 (
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgDi§bËd
)) {

59 
	`ÃwLIR2
(
cUn™
, 
kThumb2LdrPcR–n12
, 
r0
, 8);

60 
	`ÃwLIR3
(
cUn™
, 
kThumbLdrRRI5
, 
r1
, 
r0
, 0);

61 
	`ÃwLIR2
(
cUn™
, 
kThumbAddRI8
, 
r1
, 1);

62 
	`ÃwLIR3
(
cUn™
, 
kThumbSŒRRI5
, 
r1
, 
r0
, 0);

65 
İcode
 = 
TEMPLATE_PERIODIC_PROFILING
;

66 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx1
,

67 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

68 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

69 
	`ÃwLIR2
(
cUn™
, 
kThumbBlx2
,

70 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
],

71 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İcode
]);

74 
	}
}

76 
	$g’NegFlßt
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

77 
RegLoÿtiÚ
 
¾Src
)

79 
RegLoÿtiÚ
 
¾ResuÉ
;

80 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kFPReg
);

81 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

82 
	`ÃwLIR2
(
cUn™
, 
kThumb2VÃgs
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

83 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

84 
	}
}

86 
	$g’NegDoubË
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

87 
RegLoÿtiÚ
 
¾Src
)

89 
RegLoÿtiÚ
 
¾ResuÉ
;

90 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kFPReg
);

91 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

92 
	`ÃwLIR2
(
cUn™
, 
kThumb2VÃgd
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

93 
	`S2D
(
¾Src
.
lowReg
,„lSrc.
highReg
));

94 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

95 
	}
}

102 
	$g’MulLÚg
(
Comp©iÚUn™
 *
cUn™
, 
RegLoÿtiÚ
 
¾De¡
,

103 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

105 
RegLoÿtiÚ
 
¾ResuÉ
;

106 
»sLo
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

107 
»sHi
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

108 
tmp1
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

110 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kCÜeReg
);

111 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

113 
	`ÃwLIR3
(
cUn™
, 
kThumb2MulRRR
, 
tmp1
, 
¾Src2
.
lowReg
, 
¾Src1
.
highReg
);

114 
	`ÃwLIR4
(
cUn™
, 
kThumb2UmuÎ
, 
»sLo
, 
»sHi
, 
¾Src2
.
lowReg
, 
¾Src1
.lowReg);

115 
	`ÃwLIR4
(
cUn™
, 
kThumb2MÏ
, 
tmp1
, 
¾Src1
.
lowReg
, 
¾Src2
.
highReg
,mp1);

116 
	`ÃwLIR4
(
cUn™
, 
kThumb2AddRRR
, 
»sHi
, 
tmp1
,„esHi, 0);

117 
	`dvmComp”F»eTemp
(
cUn™
, 
tmp1
);

119 
¾ResuÉ
 = 
	`dvmComp”G‘R‘uºWide
(
cUn™
);

120 
¾ResuÉ
.
lowReg
 = 
»sLo
;

121 
¾ResuÉ
.
highReg
 = 
»sHi
;

122 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

123 
	}
}

125 
	$g’LÚg3Addr
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
OpKšd
 
fœ¡Op
,

126 
OpKšd
 
£cÚdOp
, 
RegLoÿtiÚ
 
¾De¡
,

127 
RegLoÿtiÚ
 
¾Src1
, RegLoÿtiÚ 
¾Src2
)

129 
RegLoÿtiÚ
 
¾ResuÉ
;

130 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kCÜeReg
);

131 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

132 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

133 
	`İRegRegReg
(
cUn™
, 
fœ¡Op
, 
¾ResuÉ
.
lowReg
, 
¾Src1
.lowReg, 
¾Src2
.lowReg);

134 
	`İRegRegReg
(
cUn™
, 
£cÚdOp
, 
¾ResuÉ
.
highReg
, 
¾Src1
.highReg,

135 
¾Src2
.
highReg
);

136 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

137 
	}
}

139 
	$dvmComp”In™ŸlizeRegAÎoc
(
Comp©iÚUn™
 *
cUn™
)

141 
numTemps
 = (
cÜeTemps
)/();

142 
numFPTemps
 = (
åTemps
)/();

143 
Regi¡”PoŞ
 *
poŞ
 = (Regi¡”PoŞ *)
	`dvmComp”New
((*poŞ), 
Œue
);

144 
cUn™
->
»gPoŞ
 = 
poŞ
;

145 
poŞ
->
numCÜeTemps
 = 
numTemps
;

146 
poŞ
->
cÜeTemps
 = (
Regi¡”Info
 *)

147 
	`dvmComp”New
(
numTemps
 * (*
cUn™
->
»gPoŞ
->
cÜeTemps
), 
Œue
);

148 
poŞ
->
numFPTemps
 =‚umFPTemps;

149 
poŞ
->
FPTemps
 = (
Regi¡”Info
 *)

150 
	`dvmComp”New
(
numFPTemps
 * (*
cUn™
->
»gPoŞ
->
FPTemps
), 
Œue
);

151 
	`dvmComp”In™PoŞ
(
poŞ
->
cÜeTemps
, cÜeTemps,…oŞ->
numCÜeTemps
);

152 
	`dvmComp”In™PoŞ
(
poŞ
->
FPTemps
, 
åTemps
,…oŞ->
numFPTemps
);

153 
poŞ
->
nuÎCheckedRegs
 =

154 
	`dvmComp”AÎocB™VeùÜ
(
cUn™
->
numSSARegs
, 
çl£
);

155 
	}
}

167 
ArmLIR
 *
	$g’IT
(
Comp©iÚUn™
 *
cUn™
, 
ArmCÚd™iÚCode
 
code
,

168 cÚ¡ *
guide
)

170 
mask
;

171 
cÚdB™
 = 
code
 & 1;

172 
®tB™
 = 
cÚdB™
 ^ 1;

173 
mask3
 = 0;

174 
mask2
 = 0;

175 
mask1
 = 0;

178 
	`¡¾’
(
guide
)) {

180 
mask1
 = (
guide
[2] =ğ'T'è? 
cÚdB™
 : 
®tB™
;

182 
mask2
 = (
guide
[1] =ğ'T'è? 
cÚdB™
 : 
®tB™
;

184 
mask3
 = (
guide
[0] =ğ'T'è? 
cÚdB™
 : 
®tB™
;

189 
	`ALOGE
("Jit: bad case in genIT");

190 
	`dvmComp”AbÜt
(
cUn™
);

192 
mask
 = (
mask3
 << 3è| (
mask2
 << 2è| (
mask1
 << 1) |

193 (1 << (3 - 
	`¡¾’
(
guide
)));

194  
	`ÃwLIR2
(
cUn™
, 
kThumb2It
, 
code
, 
mask
);

195 
	}
}

198 
ArmLIR
 *
	$g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

200 
ArmLIR
 *
»s
;

201 
off£t
 = 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
);

202 
rDPC
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

203 
»s
 = 
	`lßdCÚ¡ªt
(
cUn™
, 
rDPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

204 
	`ÃwLIR3
(
cUn™
, 
kThumb2SŒRRI8P»dec
, 
rDPC
, 
r5FP
,

205 (
SckSaveA»a
è- 
off£t
);

206 
	`dvmComp”F»eTemp
(
cUn™
, 
rDPC
);

207  
»s
;

208 
	}
}

237 
	$g’MÚ™ÜEÁ”
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

239 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

240 
ArmLIR
 *
rg‘
;

241 
ArmLIR
 *
hİT¬g‘
;

242 
ArmLIR
 *
b¿nch
;

243 
ArmLIR
 *
hİB¿nch
;

245 
	`as£¹
(
LW_SHAPE_THIN
 == 0);

246 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r1
);

247 
	`dvmComp”LockAÎTemps
(
cUn™
);

248 
	`dvmComp”F»eTemp
(
cUn™
, 
r4PC
);

249 
	`g’NuÎCheck
(
cUn™
, 
¾Src
.
sRegLow
, 
r1
, 
mœ
->
off£t
, 
NULL
);

250 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
, 
th»adId
), 
r3
);

251 
	`ÃwLIR3
(
cUn™
, 
kThumb2Ld»x
, 
r2
, 
r1
,

252 
	`off£tof
(
Objeù
, 
lock
) >> 2);

253 
	`İRegImm
(
cUn™
, 
kOpL¦
, 
r3
, 
LW_LOCK_OWNER_SHIFT
);

255 
	`ÃwLIR4
(
cUn™
, 
kThumb2Bfi
, 
r3
, 
r2
, 0, 
LW_LOCK_OWNER_SHIFT
 - 1);

256 
	`ÃwLIR3
(
cUn™
, 
kThumb2Bfc
, 
r2
, 
LW_HASH_STATE_SHIFT
,

257 
LW_LOCK_OWNER_SHIFT
 - 1);

258 
hİB¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2Cbnz
, 
r2
, 0);

259 
	`ÃwLIR4
(
cUn™
, 
kThumb2SŒex
, 
r2
, 
r3
, 
r1
, 
	`off£tof
(
Objeù
, 
lock
) >> 2);

260 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

261 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
kThumb2Cbz
, 
r2
, 0);

263 
hİT¬g‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

264 
hİT¬g‘
->
defMask
 = 
ENCODE_ALL
;

265 
hİB¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)
hİT¬g‘
;

268 
	`lßdCÚ¡ªt
(
cUn™
, 
r3
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

271 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 +

272 
	`dexG‘WidthFromOpcode
(
OP_MONITOR_ENTER
)));

274 
	`ÃwLIR3
(
cUn™
, 
kThumb2SŒRRI8P»dec
, 
r3
, 
r5FP
,

275 (
SckSaveA»a
) -

276 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
));

278 
	`g’RegCİy
(
cUn™
, 
r0
, 
r6SELF
);

279 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_MONITOR_ENTER
);

281 
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

282 
rg‘
->
defMask
 = 
ENCODE_ALL
;

283 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

284 
	}
}

292 
	$g’MÚ™ÜEx™
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

294 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

295 
ArmLIR
 *
rg‘
;

296 
ArmLIR
 *
b¿nch
;

297 
ArmLIR
 *
hİT¬g‘
;

298 
ArmLIR
 *
hİB¿nch
;

300 
	`as£¹
(
LW_SHAPE_THIN
 == 0);

301 
	`lßdV®ueDœeùFixed
(
cUn™
, 
¾Src
, 
r1
);

302 
	`dvmComp”LockAÎTemps
(
cUn™
);

303 
	`dvmComp”F»eTemp
(
cUn™
, 
r4PC
);

304 
	`g’NuÎCheck
(
cUn™
, 
¾Src
.
sRegLow
, 
r1
, 
mœ
->
off£t
, 
NULL
);

305 
	`lßdWÜdDi¥
(
cUn™
, 
r1
, 
	`off£tof
(
Objeù
, 
lock
), 
r2
);

306 
	`lßdWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
, 
th»adId
), 
r3
);

308 
	`İRegRegImm
(
cUn™
, 
kOpAnd
, 
r7
, 
r2
,

309 (
LW_HASH_STATE_MASK
 << 
LW_HASH_STATE_SHIFT
));

310 
	`İRegImm
(
cUn™
, 
kOpL¦
, 
r3
, 
LW_LOCK_OWNER_SHIFT
);

311 
	`ÃwLIR3
(
cUn™
, 
kThumb2Bfc
, 
r2
, 
LW_HASH_STATE_SHIFT
,

312 
LW_LOCK_OWNER_SHIFT
 - 1);

313 
	`İRegReg
(
cUn™
, 
kOpSub
, 
r2
, 
r3
);

314 
hİB¿nch
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdNe
);

315 
	`dvmComp”G’MemB¬r›r
(
cUn™
, 
kSY
);

316 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r1
, 
	`off£tof
(
Objeù
, 
lock
), 
r7
);

317 
b¿nch
 = 
	`İNÚe
(
cUn™
, 
kOpUncÚdBr
);

319 
hİT¬g‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

320 
hİT¬g‘
->
defMask
 = 
ENCODE_ALL
;

321 
hİB¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)
hİT¬g‘
;

324 
	`lßdCÚ¡ªt
(
cUn™
, 
r3
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

326 
	`LOAD_FUNC_ADDR
(
cUn™
, 
r7
, ()
dvmUÆockObjeù
);

327 
	`g’RegCİy
(
cUn™
, 
r0
, 
r6SELF
);

329 
	`ÃwLIR3
(
cUn™
, 
kThumb2SŒRRI8P»dec
, 
r3
, 
r5FP
,

330 (
SckSaveA»a
) -

331 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
));

332 
	`İReg
(
cUn™
, 
kOpBlx
, 
r7
);

334 
ArmLIR
 *
b¿nchOv”
 = 
	`g’CmpImmB¿nch
(
cUn™
, 
kArmCÚdNe
, 
r0
, 0);

335 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
,

336 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
 +

337 
	`dexG‘WidthFromOpcode
(
OP_MONITOR_EXIT
)));

338 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_THROW_EXCEPTION_COMMON
);

341 
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

342 
rg‘
->
defMask
 = 
ENCODE_ALL
;

343 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

344 
b¿nchOv”
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

345 
	}
}

347 
	$g’MÚ™Ü
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

349 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_MONITOR_ENTER
)

350 
	`g’MÚ™ÜEÁ”
(
cUn™
, 
mœ
);

352 
	`g’MÚ™ÜEx™
(
cUn™
, 
mœ
);

353 
	}
}

370 
	$g’CmpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

371 
RegLoÿtiÚ
 
¾De¡
, RegLoÿtiÚ 
¾Src1
,

372 
RegLoÿtiÚ
 
¾Src2
)

374 
RegLoÿtiÚ
 
¾Temp
 = 
LOC_C_RETURN
;

375 
ArmLIR
 *
rg‘1
;

376 
ArmLIR
 *
rg‘2
;

377 
¾Src1
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc1, 
kCÜeReg
);

378 
¾Src2
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc2, 
kCÜeReg
);

379 
¾Temp
.
lowReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

380 
	`lßdCÚ¡ªt
(
cUn™
, 
¾Temp
.
lowReg
, -1);

381 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
¾Src1
.
highReg
, 
¾Src2
.highReg);

382 
ArmLIR
 *
b¿nch1
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdLt
);

383 
ArmLIR
 *
b¿nch2
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdGt
);

384 
	`İRegRegReg
(
cUn™
, 
kOpSub
, 
¾Temp
.
lowReg
, 
¾Src1
.lowReg, 
¾Src2
.lowReg);

385 
ArmLIR
 *
b¿nch3
 = 
	`İCÚdB¿nch
(
cUn™
, 
kArmCÚdEq
);

387 
	`g’IT
(
cUn™
, 
kArmCÚdHi
, "E");

388 
	`ÃwLIR2
(
cUn™
, 
kThumb2MovImmShiá
, 
¾Temp
.
lowReg
, 
	`modif›dImmedŸ‹
(-1));

389 
	`lßdCÚ¡ªt
(
cUn™
, 
¾Temp
.
lowReg
, 1);

390 
	`g’B¬r›r
(
cUn™
);

392 
rg‘2
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

393 
rg‘2
->
defMask
 = -1;

394 
	`İRegReg
(
cUn™
, 
kOpNeg
, 
¾Temp
.
lowReg
,„lTemp.lowReg);

396 
rg‘1
 = 
	`ÃwLIR0
(
cUn™
, 
kArmP£udoT¬g‘Lab–
);

397 
rg‘1
->
defMask
 = -1;

399 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾Temp
);

401 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)
rg‘1
;

402 
b¿nch2
->
g’”ic
.
rg‘
 = (
LIR
 *)
rg‘2
;

403 
b¿nch3
->
g’”ic
.
rg‘
 = 
b¿nch1
->generic.target;

404 
	}
}

406 
boŞ
 
	$g’IÆšedAbsFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

408 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

409 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
Œue
);

410 
¾Src
 = 
	`lßdV®ue
(
cUn™
,„lSrc, 
kFPReg
);

411 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

412 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vabss
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg);

413 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

414  
çl£
;

415 
	}
}

417 
boŞ
 
	$g’IÆšedAbsDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

419 
RegLoÿtiÚ
 
¾Src
 = 
	`dvmComp”G‘SrcWide
(
cUn™
, 
mœ
, 0, 1);

420 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘Wide
(
cUn™
, 
mœ
, 
Œue
);

421 
¾Src
 = 
	`lßdV®ueWide
(
cUn™
,„lSrc, 
kFPReg
);

422 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kFPReg
, 
Œue
);

423 
	`ÃwLIR2
(
cUn™
, 
kThumb2Vabsd
, 
	`S2D
(
¾ResuÉ
.
lowReg
,„lResuÉ.
highReg
),

424 
	`S2D
(
¾Src
.
lowReg
,„lSrc.
highReg
));

425 
	`¡ÜeV®ueWide
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

426  
çl£
;

427 
	}
}

429 
boŞ
 
	$g’IÆšedMšMaxIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
boŞ
 
isMš
)

431 
RegLoÿtiÚ
 
¾Src1
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 0);

432 
RegLoÿtiÚ
 
¾Src2
 = 
	`dvmComp”G‘Src
(
cUn™
, 
mœ
, 1);

433 
¾Src1
 = 
	`lßdV®ue
(
cUn™
,„lSrc1, 
kCÜeReg
);

434 
¾Src2
 = 
	`lßdV®ue
(
cUn™
,„lSrc2, 
kCÜeReg
);

435 
RegLoÿtiÚ
 
¾De¡
 = 
	`šlšedT¬g‘
(
cUn™
, 
mœ
, 
çl£
);

436 
RegLoÿtiÚ
 
¾ResuÉ
 = 
	`dvmComp”Ev®Loc
(
cUn™
, 
¾De¡
, 
kCÜeReg
, 
Œue
);

437 
	`İRegReg
(
cUn™
, 
kOpCmp
, 
¾Src1
.
lowReg
, 
¾Src2
.lowReg);

438 
	`g’IT
(
cUn™
, (
isMš
è? 
kArmCÚdGt
 : 
kArmCÚdLt
, "E");

439 
	`İRegReg
(
cUn™
, 
kOpMov
, 
¾ResuÉ
.
lowReg
, 
¾Src2
.lowReg);

440 
	`İRegReg
(
cUn™
, 
kOpMov
, 
¾ResuÉ
.
lowReg
, 
¾Src1
.lowReg);

441 
	`g’B¬r›r
(
cUn™
);

442 
	`¡ÜeV®ue
(
cUn™
, 
¾De¡
, 
¾ResuÉ
);

443  
çl£
;

444 
	}
}

446 
	$g’MuÉlyByTwoB™MuÉl›r
(
Comp©iÚUn™
 *
cUn™
,

447 
RegLoÿtiÚ
 
¾Src
, RegLoÿtiÚ 
¾ResuÉ
, 
l™
,

448 
fœ¡B™
, 
£cÚdB™
)

450 
	`İRegRegRegShiá
(
cUn™
, 
kOpAdd
, 
¾ResuÉ
.
lowReg
, 
¾Src
.lowReg,„lSrc.lowReg,

451 
	`’codeShiá
(
kArmL¦
, 
£cÚdB™
 - 
fœ¡B™
));

452 ià(
fœ¡B™
 != 0) {

453 
	`İRegRegImm
(
cUn™
, 
kOpL¦
, 
¾ResuÉ
.
lowReg
,„lResuÉ.lowReg, 
fœ¡B™
);

455 
	}
}

	@vm/compiler/codegen/arm/Thumb2/Ralloc.cpp

32 
	$dvmComp”AÎocTy³dTempPaœ
(
Comp©iÚUn™
 *
cUn™
,

33 
boŞ
 
åHšt
, 
»gCÏss
)

35 
highReg
;

36 
lowReg
;

37 
»s
 = 0;

39 #ià
	`defšed
(
REGCLASS_STRESS_MODE
)

40 
åHšt
 = !fpHint;

43 ià(((
»gCÏss
 =ğ
kAnyReg
è&& 
åHšt
è|| (»gCÏs =ğ
kFPReg
)) {

44 
lowReg
 = 
	`dvmComp”AÎocTempDoubË
(
cUn™
);

45 
highReg
 = 
lowReg
 + 1;

47 
lowReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

48 
highReg
 = 
	`dvmComp”AÎocTemp
(
cUn™
);

50 
»s
 = (
lowReg
 & 0xffè| ((
highReg
 & 0xff) << 8);

51  
»s
;

52 
	}
}

54 
	$dvmComp”AÎocTy³dTemp
(
Comp©iÚUn™
 *
cUn™
, 
boŞ
 
åHšt
,

55 
»gCÏss
)

57 #ià
	`defšed
(
REGCLASS_STRESS_MODE
)

58 
åHšt
 = !fpHint;

60 ià(((
»gCÏss
 =ğ
kAnyReg
è&& 
åHšt
è|| (»gCÏs =ğ
kFPReg
))

61  
	`dvmComp”AÎocTempFlßt
(
cUn™
);

62  
	`dvmComp”AÎocTemp
(
cUn™
);

63 
	}
}

	@vm/compiler/codegen/arm/armv5te-vfp/ArchVariant.cpp

17 "C" 
dvmComp”Tem¶©eS¹
();

28 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
()

30  
DALVIK_JIT_THUMB
;

31 
	}
}

34 
	#JIT_TEMPLATE
(
X
è"C" 
dvmComp”_TEMPLATE_
##
	`X
();

	)

35 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

36 #undeà
JIT_TEMPLATE


39 
boŞ
 
	$dvmComp”ArchV¬ŸÁIn™
()

41 
i
 = 0;

47 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

48 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

49 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

50 #undeà
JIT_TEMPLATE


53 
gDvmJ™
.
j™TabËSize
 = 1 << 9;

54 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

55 
gDvmJ™
.
th»shŞd
 = 200;

56 
gDvmJ™
.
codeCacheSize
 = 512*1024;

58 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

60 
gDvmJ™
.
blockšgMode
 = 
Œue
;

61 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

65 
	`as£¹
(
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) < 128 &&

66 (
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

67 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

68 (
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

69 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

72 
	`as£¹
((
SckSaveA»a
) < 236);

78 ià((
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
) +

79 (
J™ToIÁ”pEÁr›s
)) >= 128) {

80 
	`ALOGE
("Thread.jitToInterpEntries size overflow");

81 
	`dvmAbÜt
();

85 
gDvmJ™
.
di§bËO±
 |ğ(1 << 
kM‘hodJ™
);

88 
	`dvmJ™Upd©eTh»adS‹AÎ
();

90  
Œue
;

91 
	}
}

93 
	$dvmComp”T¬g‘O±Hšt
(
key
)

95 
»s
;

96 
key
) {

97 
kMaxHoi¡Di¡ªû
:

98 
»s
 = 2;

101 
	`ALOGE
("UnknowÀrg‘ o±imiz©iÚ hšˆkey: %d",
key
);

102 
»s
 = 0;

104  
»s
;

105 
	}
}

107 
	$dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
)

109 #ià
ANDROID_SMP
 != 0

110 #”rÜ 
¬mv5
+
smp
 
nÙ
 
suµÜ‹d


112 
	}
}

	@vm/compiler/codegen/arm/armv5te-vfp/ArchVariant.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H_


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

22 
	eTem¶©eOpcode
 {

23 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

32 #undeà
JIT_TEMPLATE


	@vm/compiler/codegen/arm/armv5te-vfp/Codegen.cpp

16 
	#_CODEGEN_C


	)

17 
	#_ARMV5TE_VFP


	)

18 
	#TGT_LIR
 
ArmLIR


	)

20 
	~"D®vik.h
"

21 
	~"š‹½/IÁ”pDefs.h
"

22 
	~"libdex/DexOpcodes.h
"

23 
	~"comp”/Comp”IÁ”Çls.h
"

24 
	~"comp”/codeg’/¬m/ArmLIR.h
"

25 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

26 
	~"comp”/codeg’/R®loc.h
"

27 
	~"comp”/codeg’/¬m/Codeg’.h
"

28 
	~"comp”/Loİ.h
"

29 
	~"ArchV¬ŸÁ.h
"

32 
	~"../Codeg’CommÚ.ıp
"

35 
	~"../Thumb/FaùÜy.ıp
"

37 
	~"../../Codeg’FaùÜy.ıp
"

39 
	~"../ArchFaùÜy.ıp
"

42 
	~"../Thumb/G’.ıp
"

44 
	~"../FP/ThumbVFP.ıp
"

47 
	~"../Thumb/R®loc.ıp
"

50 
	~"../Codeg’Driv”.ıp
"

53 
	~"../¬mv5‹/M‘hodCodeg’Driv”.ıp
"

56 
	~"ArchV¬ŸÁ.ıp
"

	@vm/compiler/codegen/arm/armv5te/ArchVariant.cpp

17 "C" 
dvmComp”Tem¶©eS¹
();

28 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
()

30  
DALVIK_JIT_THUMB
;

31 
	}
}

34 
	#JIT_TEMPLATE
(
X
è"C" 
dvmComp”_TEMPLATE_
##
	`X
();

	)

35 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

36 #undeà
JIT_TEMPLATE


39 
boŞ
 
	$dvmComp”ArchV¬ŸÁIn™
()

41 
i
 = 0;

47 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

48 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

49 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

50 #undeà
JIT_TEMPLATE


53 
gDvmJ™
.
j™TabËSize
 = 1 << 9;

54 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

55 
gDvmJ™
.
th»shŞd
 = 200;

56 
gDvmJ™
.
codeCacheSize
 = 512*1024;

58 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

60 
gDvmJ™
.
blockšgMode
 = 
Œue
;

61 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

65 
	`as£¹
(
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) < 128 &&

66 (
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

67 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

68 (
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

69 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

72 
	`as£¹
((
SckSaveA»a
) < 236);

78 ià((
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
) +

79 (
J™ToIÁ”pEÁr›s
)) >= 128) {

80 
	`ALOGE
("Thread.jitToInterpEntries size overflow");

81 
	`dvmAbÜt
();

85 
gDvmJ™
.
di§bËO±
 |ğ(1 << 
kM‘hodJ™
);

88 
	`dvmJ™Upd©eTh»adS‹AÎ
();

90  
Œue
;

91 
	}
}

93 
	$dvmComp”T¬g‘O±Hšt
(
key
)

95 
»s
;

96 
key
) {

97 
kMaxHoi¡Di¡ªû
:

98 
»s
 = 2;

101 
	`ALOGE
("UnknowÀrg‘ o±imiz©iÚ hšˆkey: %d",
key
);

102 
»s
 = 0;

104  
»s
;

105 
	}
}

107 
	$dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
)

109 #ià
ANDROID_SMP
 != 0

110 #”rÜ 
¬mv5
+
smp
 
nÙ
 
suµÜ‹d


112 
	}
}

	@vm/compiler/codegen/arm/armv5te/ArchVariant.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_ARCHVARIANT_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_ARCHVARIANT_H_


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

22 
	eTem¶©eOpcode
 {

23 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

32 #undeà
JIT_TEMPLATE


	@vm/compiler/codegen/arm/armv5te/Codegen.cpp

16 
	#_CODEGEN_C


	)

17 
	#_ARMV5TE


	)

18 
	#TGT_LIR
 
ArmLIR


	)

20 
	~"D®vik.h
"

21 
	~"š‹½/IÁ”pDefs.h
"

22 
	~"libdex/DexOpcodes.h
"

23 
	~"comp”/Comp”IÁ”Çls.h
"

24 
	~"comp”/codeg’/¬m/ArmLIR.h
"

25 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

26 
	~"comp”/codeg’/R®loc.h
"

27 
	~"comp”/codeg’/¬m/Codeg’.h
"

28 
	~"comp”/Loİ.h
"

29 
	~"ArchV¬ŸÁ.h
"

32 
	~"../Codeg’CommÚ.ıp
"

35 
	~"../Thumb/FaùÜy.ıp
"

37 
	~"../../Codeg’FaùÜy.ıp
"

39 
	~"../ArchFaùÜy.ıp
"

42 
	~"../Thumb/G’.ıp
"

44 
	~"../FP/ThumbPÜbËFP.ıp
"

47 
	~"../Thumb/R®loc.ıp
"

50 
	~"../Codeg’Driv”.ıp
"

53 
	~"M‘hodCodeg’Driv”.ıp
"

56 
	~"ArchV¬ŸÁ.ıp
"

	@vm/compiler/codegen/arm/armv5te/MethodCodegenDriver.cpp

17 
	$dvmComp”M‘hodMIR2LIR
(
Comp©iÚUn™
 *
cUn™
)

19 
	`ALOGE
("Method-based JIT‚ot supported forhe v5tearget");

20 
	`dvmAbÜt
();

21 
	}
}

	@vm/compiler/codegen/arm/armv7-a-neon/ArchVariant.cpp

17 "C" 
dvmComp”Tem¶©eS¹
();

23 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
()

25  
DALVIK_JIT_THUMB2
;

26 
	}
}

29 
	#JIT_TEMPLATE
(
X
è"C" 
dvmComp”_TEMPLATE_
##
	`X
();

	)

30 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

31 #undeà
JIT_TEMPLATE


34 
boŞ
 
	$dvmComp”ArchV¬ŸÁIn™
()

36 
i
 = 0;

42 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

43 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

44 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

45 #undeà
JIT_TEMPLATE


48 
gDvmJ™
.
j™TabËSize
 = 1 << 12;

49 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

50 
gDvmJ™
.
th»shŞd
 = 40;

51 
gDvmJ™
.
codeCacheSize
 = 1024*1024;

53 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

55 
gDvmJ™
.
blockšgMode
 = 
Œue
;

56 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

60 
	`as£¹
(
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) < 128 &&

61 (
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

62 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

63 (
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

64 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

67 
	`as£¹
((
SckSaveA»a
) < 236);

73 ià((
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
) +

74 (
J™ToIÁ”pEÁr›s
)) >= 128) {

75 
	`ALOGE
("Thread.jitToInterpEntries size overflow");

76 
	`dvmAbÜt
();

80 
gDvmJ™
.
di§bËO±
 |ğ(1 << 
kM‘hodJ™
);

83 
	`dvmJ™Upd©eTh»adS‹AÎ
();

85  
Œue
;

86 
	}
}

88 
	$dvmComp”T¬g‘O±Hšt
(
key
)

90 
»s
;

91 
key
) {

92 
kMaxHoi¡Di¡ªû
:

93 
»s
 = 7;

96 
	`ALOGE
("UnknowÀrg‘ o±imiz©iÚ hšˆkey: %d",
key
);

97 
»s
 = 0;

99  
»s
;

100 
	}
}

102 
	$dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
)

104 #ià
ANDROID_SMP
 != 0

105 
ArmLIR
 *
dmb
 = 
	`ÃwLIR1
(
cUn™
, 
kThumb2Dmb
, 
b¬r›rKšd
);

106 
dmb
->
defMask
 = 
ENCODE_ALL
;

108 
	}
}

	@vm/compiler/codegen/arm/armv7-a-neon/ArchVariant.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H_


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

23 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

31 } 
	tTem¶©eOpcode
;

32 #undeà
JIT_TEMPLATE


	@vm/compiler/codegen/arm/armv7-a-neon/Codegen.cpp

16 
	#_CODEGEN_C


	)

17 
	#_ARMV7_A_NEON


	)

18 
	#TGT_LIR
 
ArmLIR


	)

20 
	~"D®vik.h
"

21 
	~"š‹½/IÁ”pDefs.h
"

22 
	~"libdex/DexOpcodes.h
"

23 
	~"comp”/Comp”IÁ”Çls.h
"

24 
	~"comp”/codeg’/¬m/ArmLIR.h
"

25 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

26 
	~"comp”/codeg’/R®loc.h
"

27 
	~"comp”/codeg’/¬m/Codeg’.h
"

28 
	~"comp”/Loİ.h
"

29 
	~"ArchV¬ŸÁ.h
"

32 
	~"../Codeg’CommÚ.ıp
"

35 
	~"../Thumb2/FaùÜy.ıp
"

37 
	~"../../Codeg’FaùÜy.ıp
"

39 
	~"../ArchFaùÜy.ıp
"

42 
	~"../Thumb2/G’.ıp
"

44 
	~"../FP/Thumb2VFP.ıp
"

47 
	~"../Thumb2/R®loc.ıp
"

50 
	~"../Codeg’Driv”.ıp
"

53 
	~"M‘hodCodeg’Driv”.ıp
"

56 
	~"ArchV¬ŸÁ.ıp
"

	@vm/compiler/codegen/arm/armv7-a-neon/MethodCodegenDriver.cpp

38 
	$g’M‘hodInæ©eAndPuÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

39 
BasicBlock
 *
bb
)

41 
ŞdSckSave
 = 
r0
;

42 
ÃwSckSave
 = 
r1
;

43 
ŞdFP
 = 
r2
;

44 
§vedPC
 = 
r3
;

45 
cu¼’tPC
 = 
r4PC
;

46 
»tuºAddr
 = 
r7
;

47 
m‘hod
 = 
r8
;

48 
pDvmDex
 = 
r9
;

56 
	`dvmComp”FlushAÎRegs
(
cUn™
);

59 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
ŞdSckSave
, 
r5FP
,

60 
cUn™
->
m‘hod
->
»gi¡”sSize
 * 4);

62 
	`İRegRegImm
(
cUn™
, 
kOpAdd
, 
ŞdFP
, 
ŞdSckSave
, (
SckSaveA»a
));

64 
	`İRegRegImm
(
cUn™
, 
kOpSub
, 
ÃwSckSave
, 
r5FP
, (
SckSaveA»a
));

66 
	`lßdWÜdDi¥
(
cUn™
, 
r13¥
, 0, 
§vedPC
);

67 
	`lßdCÚ¡ªt
(
cUn™
, 
cu¼’tPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

68 
	`lßdCÚ¡ªt
(
cUn™
, 
m‘hod
, () cUnit->method);

69 
	`lßdCÚ¡ªt
(
cUn™
, 
pDvmDex
, (ècUn™->
m‘hod
->
şazz
->pDvmDex);

70 #ifdeà
EASY_GDB


72 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ÃwSckSave
, 
	`off£tof
(
SckSaveA»a
, 
´evSave
),

73 
ŞdSckSave
);

76 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ÃwSckSave
, 
	`off£tof
(
SckSaveA»a
, 
´evF¿me
),

77 
ŞdFP
);

79 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ÃwSckSave
, 
	`off£tof
(
SckSaveA»a
, 
§vedPc
),

80 
§vedPC
);

82 
	`lßdCÚ¡ªt
(
cUn™
, 
»tuºAddr
, 0);

83 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ÃwSckSave
, 
	`off£tof
(
SckSaveA»a
, 
»tuºAddr
),

84 
»tuºAddr
);

86 
	`¡ÜeWÜdDi¥
(
cUn™
, 
ÃwSckSave
, 
	`off£tof
(
SckSaveA»a
, 
m‘hod
), method);

88 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
IÁ”pSaveS‹
, 
m‘hod
), method);

90 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
Th»ad
, 
š‹½Save
.
curF¿me
), 
r5FP
);

92 
	`¡ÜeWÜdDi¥
(
cUn™
, 
r6SELF
, 
	`off£tof
(
IÁ”pSaveS‹
, 
m‘hodCÏssDex
),

93 
pDvmDex
);

95 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
r13¥
, 16);

96 
	`g’PuÁToIÁ”p
(
cUn™
, 
mœ
->
off£t
);

97 
	}
}

106 
boŞ
 
	$hªdËM‘hodFmt10t_Fmt20t_Fmt30t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

107 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

110 
boŞ
 
backw¬dB¿nch
 = (
bb
->
k’
->
¡¬tOff£t
 <ğ
mœ
->
off£t
);

112 ià(
backw¬dB¿nch
 && 
gDvmJ™
.
g’Su¥’dPŞl
) {

113 
	`g’Su¥’dPŞl
(
cUn™
, 
mœ
);

117 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

118  
çl£
;

119 
	}
}

121 
boŞ
 
	$hªdËM‘hodFmt10x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

123 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

124 
d®vikOpcode
) {

125 
OP_RETURN_VOID
:

126  
çl£
;

128  
	`hªdËFmt10x
(
cUn™
, 
mœ
);

130 
	}
}

132 
boŞ
 
	$hªdËM‘hodFmt11n_Fmt31i
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

134  
	`hªdËFmt11n_Fmt31i
(
cUn™
, 
mœ
);

135 
	}
}

137 
boŞ
 
	$hªdËM‘hodFmt11x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

138 
ArmLIR
 *
Ïb–Li¡
)

140 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

141 
d®vikOpcode
) {

142 
OP_THROW
:

143 
	`g’M‘hodInæ©eAndPuÁ
(
cUn™
, 
mœ
, 
bb
);

144  
çl£
;

146  
	`hªdËFmt11x
(
cUn™
, 
mœ
);

148 
	}
}

150 
boŞ
 
	$hªdËM‘hodFmt12x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

152  
	`hªdËFmt12x
(
cUn™
, 
mœ
);

153 
	}
}

155 
boŞ
 
	$hªdËM‘hodFmt20bc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

157  
	`hªdËFmt20bc
(
cUn™
, 
mœ
);

158 
	}
}

160 
boŞ
 
	$hªdËM‘hodFmt21c_Fmt31c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

162  
	`hªdËFmt21c_Fmt31c
(
cUn™
, 
mœ
);

163 
	}
}

165 
boŞ
 
	$hªdËM‘hodFmt21h
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

167  
	`hªdËFmt21h
(
cUn™
, 
mœ
);

168 
	}
}

170 
boŞ
 
	$hªdËM‘hodFmt21s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

172  
	`hªdËFmt21s
(
cUn™
, 
mœ
);

173 
	}
}

175 
boŞ
 
	$hªdËM‘hodFmt21t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

176 
ArmLIR
 *
Ïb–Li¡
)

178  
	`hªdËFmt21t
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

179 
	}
}

181 
boŞ
 
	$hªdËM‘hodFmt22b_Fmt22s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

183  
	`hªdËFmt22b_Fmt22s
(
cUn™
, 
mœ
);

184 
	}
}

186 
boŞ
 
	$hªdËM‘hodFmt22c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

188  
	`hªdËFmt22c
(
cUn™
, 
mœ
);

189 
	}
}

191 
boŞ
 
	$hªdËM‘hodFmt22cs
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

193  
	`hªdËFmt22cs
(
cUn™
, 
mœ
);

194 
	}
}

196 
boŞ
 
	$hªdËM‘hodFmt22t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

197 
ArmLIR
 *
Ïb–Li¡
)

199  
	`hªdËFmt22t
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

200 
	}
}

202 
boŞ
 
	$hªdËM‘hodFmt22x_Fmt32x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

204  
	`hªdËFmt22x_Fmt32x
(
cUn™
, 
mœ
);

205 
	}
}

207 
boŞ
 
	$hªdËM‘hodFmt23x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

209  
	`hªdËFmt23x
(
cUn™
, 
mœ
);

210 
	}
}

212 
boŞ
 
	$hªdËM‘hodFmt31t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

214  
	`hªdËFmt31t
(
cUn™
, 
mœ
);

215 
	}
}

217 
boŞ
 
	$hªdËM‘hodFmt35c_3rc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

218 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

220  
	`hªdËFmt35c_3rc
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

221 
	}
}

223 
boŞ
 
	$hªdËM‘hodFmt35ms_3rms
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

224 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

226  
	`hªdËFmt35ms_3rms
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

227 
	}
}

229 
boŞ
 
	$hªdËM‘hodExecu‹IÆše
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

231  
	`hªdËExecu‹IÆše
(
cUn™
, 
mœ
);

232 
	}
}

234 
boŞ
 
	$hªdËM‘hodFmt51l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

236  
	`hªdËFmt51l
(
cUn™
, 
mœ
);

237 
	}
}

240 
boŞ
 
	$m‘hodBlockCodeG’
(
Comp©iÚUn™
 *
cUn™
, 
BasicBlock
 *
bb
)

242 
MIR
 *
mœ
;

243 
ArmLIR
 *
Ïb–Li¡
 = (ArmLIR *è
cUn™
->
blockLab–Li¡
;

244 
blockId
 = 
bb
->
id
;

246 
cUn™
->
curBlock
 = 
bb
;

247 
Ïb–Li¡
[
blockId
].
İ”ªds
[0] = 
bb
->
¡¬tOff£t
;

250 
Ïb–Li¡
[
blockId
].
İcode
 = 
kArmP£udoNÜm®BlockLab–
;

251 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è&
Ïb–Li¡
[
blockId
]);

253 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

254 
	`dvmComp”Re£tNuÎCheck
(
cUn™
);

256 
ArmLIR
 *
h—dLIR
 = 
NULL
;

258 ià(
bb
->
blockTy³
 =ğ
kEÁryBlock
) {

260 
	`İImm
(
cUn™
, 
kOpPush
, (1 << 
r0
 | 1 << 
r1
 | 1 << 
r5FP
 | 1 << 
r14Ì
));

261 
	`İRegImm
(
cUn™
, 
kOpSub
, 
r5FP
,

262 (
SckSaveA»a
è+ 
cUn™
->
m‘hod
->
»gi¡”sSize
 * 4);

264 } ià(
bb
->
blockTy³
 =ğ
kEx™Block
) {

266 
	`İRegImm
(
cUn™
, 
kOpAdd
, 
r13¥
, 8);

267 
	`İImm
(
cUn™
, 
kOpPİ
, (1 << 
r5FP
 | 1 << 
r15pc
));

270 
mœ
 = 
bb
->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

272 
	`dvmComp”Re£tRegPoŞ
(
cUn™
);

273 ià(
gDvmJ™
.
di§bËO±
 & (1 << 
kT¿ckLiveTemps
)) {

274 
	`dvmComp”Clobb”AÎRegs
(
cUn™
);

277 ià(
gDvmJ™
.
di§bËO±
 & (1 << 
kSuµ»ssLßds
)) {

278 
	`dvmComp”Re£tDefT¿ckšg
(
cUn™
);

281 
Opcode
 
d®vikOpcode
 = 
mœ
->
d®vikIn¢
.
İcode
;

282 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 =

283 
	`dexG‘FÜm©FromOpcode
(
d®vikOpcode
);

285 
ArmLIR
 *
bound¬yLIR
;

291 ià(
h—dLIR
 =ğ
NULL
 || 
cUn™
->
´štMe
 =ğ
Œue
) {

292 
bound¬yLIR
 =

293 
	`ÃwLIR2
(
cUn™
, 
kArmP£udoD®vikBy‹CodeBound¬y
,

294 
mœ
->
off£t
,

295 (è
	`dvmComp”G‘D®vikDi§s£mbly
(

296 &
mœ
->
d®vikIn¢
, ""));

298 ià(
h—dLIR
 =ğ
NULL
) {

299 
h—dLIR
 = 
bound¬yLIR
;

301 
h—dLIR
->
defMask
 = 
ENCODE_ALL
;

306 ià(
cUn™
->
´štMe
 && 
mœ
->
s§R•
) {

307 *
s§SŒšg
 = 
	`dvmComp”G‘SSASŒšg
(
cUn™
, 
mœ
->
s§R•
);

308 
	`ÃwLIR1
(
cUn™
, 
kArmP£udoSSAR•
, (è
s§SŒšg
);

311 
boŞ
 
nÙHªdËd
;

312 
d®vikFÜm©
) {

313 
kFmt10t
:

314 
kFmt20t
:

315 
kFmt30t
:

316 
nÙHªdËd
 = 
	`hªdËM‘hodFmt10t_Fmt20t_Fmt30t
(
cUn™
, 
mœ
, 
bb
,

317 
Ïb–Li¡
);

319 
kFmt10x
:

320 
nÙHªdËd
 = 
	`hªdËM‘hodFmt10x
(
cUn™
, 
mœ
);

322 
kFmt11n
:

323 
kFmt31i
:

324 
nÙHªdËd
 = 
	`hªdËM‘hodFmt11n_Fmt31i
(
cUn™
, 
mœ
);

326 
kFmt11x
:

327 
nÙHªdËd
 = 
	`hªdËM‘hodFmt11x
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

329 
kFmt12x
:

330 
nÙHªdËd
 = 
	`hªdËM‘hodFmt12x
(
cUn™
, 
mœ
);

332 
kFmt20bc
:

333 
nÙHªdËd
 = 
	`hªdËM‘hodFmt20bc
(
cUn™
, 
mœ
);

335 
kFmt21c
:

336 
kFmt31c
:

337 
nÙHªdËd
 = 
	`hªdËM‘hodFmt21c_Fmt31c
(
cUn™
, 
mœ
);

339 
kFmt21h
:

340 
nÙHªdËd
 = 
	`hªdËM‘hodFmt21h
(
cUn™
, 
mœ
);

342 
kFmt21s
:

343 
nÙHªdËd
 = 
	`hªdËM‘hodFmt21s
(
cUn™
, 
mœ
);

345 
kFmt21t
:

346 
nÙHªdËd
 = 
	`hªdËM‘hodFmt21t
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

348 
kFmt22b
:

349 
kFmt22s
:

350 
nÙHªdËd
 = 
	`hªdËM‘hodFmt22b_Fmt22s
(
cUn™
, 
mœ
);

352 
kFmt22c
:

353 
nÙHªdËd
 = 
	`hªdËM‘hodFmt22c
(
cUn™
, 
mœ
);

355 
kFmt22cs
:

356 
nÙHªdËd
 = 
	`hªdËM‘hodFmt22cs
(
cUn™
, 
mœ
);

358 
kFmt22t
:

359 
nÙHªdËd
 = 
	`hªdËM‘hodFmt22t
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

361 
kFmt22x
:

362 
kFmt32x
:

363 
nÙHªdËd
 = 
	`hªdËM‘hodFmt22x_Fmt32x
(
cUn™
, 
mœ
);

365 
kFmt23x
:

366 
nÙHªdËd
 = 
	`hªdËM‘hodFmt23x
(
cUn™
, 
mœ
);

368 
kFmt31t
:

369 
nÙHªdËd
 = 
	`hªdËM‘hodFmt31t
(
cUn™
, 
mœ
);

371 
kFmt3rc
:

372 
kFmt35c
:

373 
nÙHªdËd
 = 
	`hªdËM‘hodFmt35c_3rc
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
);

375 
kFmt3rms
:

376 
kFmt35ms
:

377 
nÙHªdËd
 = 
	`hªdËM‘hodFmt35ms_3rms
(
cUn™
, 
mœ
, 
bb
,

378 
Ïb–Li¡
);

380 
kFmt35mi
:

381 
kFmt3rmi
:

382 
nÙHªdËd
 = 
	`hªdËM‘hodExecu‹IÆše
(
cUn™
, 
mœ
);

384 
kFmt51l
:

385 
nÙHªdËd
 = 
	`hªdËM‘hodFmt51l
(
cUn™
, 
mœ
);

388 
nÙHªdËd
 = 
Œue
;

393 ià(
nÙHªdËd
 =ğ
Œue
 && 
d®vikOpcode
 >ğ
kNumPackedOpcodes
) {

394 
nÙHªdËd
 = 
çl£
;

397 ià(
nÙHªdËd
) {

398 
	`ALOGE
("%#06x: Opcode %#x (%s) / Fmt %d‚ot handled",

399 
mœ
->
off£t
,

400 
d®vikOpcode
, 
	`dexG‘OpcodeName
(dalvikOpcode),

401 
d®vikFÜm©
);

402 
	`dvmComp”AbÜt
(
cUn™
);

407 ià(
h—dLIR
) {

412 
	`dvmComp”AµlyLoÿlO±imiz©iÚs
(
cUn™
, (
LIR
 *è
h—dLIR
,

413 
cUn™
->
Ï¡LIRIn¢
);

418 ià(
bb
->
çÎThrough
) {

419 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
,

420 &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

423  
çl£
;

424 
	}
}

426 
	$dvmComp”M‘hodMIR2LIR
(
Comp©iÚUn™
 *
cUn™
)

429 ià(
	`¡rcmp
(
cUn™
->
m‘hod
->
Çme
, "add")) ;

432 
cUn™
->
blockLab–Li¡
 =

433 (*è
	`dvmComp”New
((
ArmLIR
è* 
cUn™
->
numBlocks
, 
Œue
);

435 
	`dvmComp”D©aFlowAÇlysisDi¥©ch”
(
cUn™
, 
m‘hodBlockCodeG’
,

436 
kP»Ord”DFST¿v”§l
,

437 
çl£
 );

439 
	`dvmComp”AµlyGlob®O±imiz©iÚs
(
cUn™
);

442 
cUn™
->
´štMe
 = 
Œue
;

444 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

445 
	`£lfV”ifiÿtiÚB¿nchIn£¹Pass
(
cUn™
);

447 
	}
}

	@vm/compiler/codegen/arm/armv7-a/ArchVariant.cpp

17 "C" 
dvmComp”Tem¶©eS¹
();

23 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
()

25  
DALVIK_JIT_THUMB2
;

26 
	}
}

29 
	#JIT_TEMPLATE
(
X
è"C" 
dvmComp”_TEMPLATE_
##
	`X
();

	)

30 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

31 #undeà
JIT_TEMPLATE


34 
boŞ
 
	$dvmComp”ArchV¬ŸÁIn™
()

36 
i
 = 0;

42 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

43 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

44 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

45 #undeà
JIT_TEMPLATE


48 
gDvmJ™
.
j™TabËSize
 = 1 << 12;

49 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

50 
gDvmJ™
.
th»shŞd
 = 40;

51 
gDvmJ™
.
codeCacheSize
 = 1024*1024;

53 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

55 
gDvmJ™
.
blockšgMode
 = 
Œue
;

56 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

60 
	`as£¹
(
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) < 128 &&

61 (
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

62 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

63 (
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

64 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

67 
	`as£¹
((
SckSaveA»a
) < 236);

73 ià((
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
) +

74 (
J™ToIÁ”pEÁr›s
)) >= 128) {

75 
	`ALOGE
("Thread.jitToInterpEntries size overflow");

76 
	`dvmAbÜt
();

80 
gDvmJ™
.
di§bËO±
 |ğ(1 << 
kM‘hodJ™
);

83 
	`dvmJ™Upd©eTh»adS‹AÎ
();

85  
Œue
;

86 
	}
}

88 
	$dvmComp”T¬g‘O±Hšt
(
key
)

90 
»s
;

91 
key
) {

92 
kMaxHoi¡Di¡ªû
:

93 
»s
 = 7;

96 
	`ALOGE
("UnknowÀrg‘ o±imiz©iÚ hšˆkey: %d",
key
);

97 
»s
 = 0;

99  
»s
;

100 
	}
}

102 
	$dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
)

104 #ià
ANDROID_SMP
 != 0

105 
ArmLIR
 *
dmb
 = 
	`ÃwLIR1
(
cUn™
, 
kThumb2Dmb
, 
b¬r›rKšd
);

106 
dmb
->
defMask
 = 
ENCODE_ALL
;

108 
	}
}

	@vm/compiler/codegen/arm/armv7-a/ArchVariant.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV7_A_ARCHVARIANT_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV7_A_ARCHVARIANT_H_


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

22 
	eTem¶©eOpcode
 {

23 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

32 #undeà
JIT_TEMPLATE


	@vm/compiler/codegen/arm/armv7-a/Codegen.cpp

16 
	#_CODEGEN_C


	)

17 
	#_ARMV7_A


	)

18 
	#TGT_LIR
 
ArmLIR


	)

20 
	~"D®vik.h
"

21 
	~"š‹½/IÁ”pDefs.h
"

22 
	~"libdex/DexOpcodes.h
"

23 
	~"comp”/Comp”IÁ”Çls.h
"

24 
	~"comp”/codeg’/¬m/ArmLIR.h
"

25 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

26 
	~"comp”/codeg’/R®loc.h
"

27 
	~"comp”/codeg’/¬m/Codeg’.h
"

28 
	~"comp”/Loİ.h
"

29 
	~"ArchV¬ŸÁ.h
"

32 
	~"../Codeg’CommÚ.ıp
"

35 
	~"../Thumb2/FaùÜy.ıp
"

37 
	~"../../Codeg’FaùÜy.ıp
"

39 
	~"../ArchFaùÜy.ıp
"

42 
	~"../Thumb2/G’.ıp
"

44 
	~"../FP/Thumb2VFP.ıp
"

47 
	~"../Thumb2/R®loc.ıp
"

50 
	~"../Codeg’Driv”.ıp
"

53 
	~"../¬mv7-a-ÃÚ/M‘hodCodeg’Driv”.ıp
"

56 
	~"ArchV¬ŸÁ.ıp
"

	@vm/compiler/codegen/x86/ArchUtility.cpp

17 
	~"../../Comp”IÁ”Çls.h
"

18 
	~"libdex/DexOpcodes.h
"

19 
	~"X86LIR.h
"

22 
	$dvmComp”Codeg’Dump
(
Comp©iÚUn™
 *
cUn™
)

24 
	}
}

27 
	$dvmComp”CacheFlush
(
¡¬t
, 
’d
, 
æags
)

30 
	}
}

	@vm/compiler/codegen/x86/Assemble.cpp

17 
	~"D®vik.h
"

18 
	~"libdex/DexOpcodes.h
"

20 
	~"../../Comp”IÁ”Çls.h
"

21 
	~"X86LIR.h
"

22 
	~"Codeg’.h
"

23 
	~<sys/mmª.h
>

25 
	#MAX_ASSEMBLER_RETRIES
 10

	)

29 #ià
defšed
(
WITH_JIT_TUNING
)

30 
	#UPDATE_CODE_CACHE_PATCHES
(è(
gDvmJ™
.
codeCacheP©ches
++)

	)

32 
	#UPDATE_CODE_CACHE_PATCHES
()

	)

75 
	$dvmComp”As£mbËLIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
)

77 
	}
}

82 * 
	$dvmJ™Chaš
(* 
tgtAddr
, 
u4
* 
b¿nchAddr
)

85 
	}
}

101 cÚ¡ 
M‘hod
 *
	$dvmJ™ToP©chP»diùedChaš
(cÚ¡ 
M‘hod
 *
m‘hod
,

102 
Th»ad
 *
£lf
,

103 
P»diùedChaššgC–l
 *
ûÎ
,

104 cÚ¡ 
CÏssObjeù
 *
şazz
)

107 
	}
}

113 
	$dvmComp”P©chIÆšeCache
()

115 
	}
}

124 
u4
* 
	$dvmJ™Unchaš
(* 
codeAddr
)

127 
	}
}

130 
	$dvmJ™UnchašAÎ
()

132 
	}
}

135 
J™T¿ûDesütiÚ
 *
	$dvmCİyT¿ûDesütÜ
(cÚ¡ 
u2
 *
pc
,

136 cÚ¡ 
J™EÁry
 *
knownEÁry
)

139 
	}
}

142 
	$dvmComp”SÜtAndPrštT¿ûProfes
()

144 
	}
}

146 
dvmJ™SÿnAÎCÏssPoš‹rs
((*
ÿÎback
)(*))

148 
	}
}

	@vm/compiler/codegen/x86/CalloutHelper.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_X86_CALLOUT_HELPER_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_X86_CALLOUT_HELPER_H_


	)

20 
	~"D®vik.h
"

31 
	#LOAD_FUNC_ADDR
(
cUn™
, 
»g
, 
addr
è
	`lßdCÚ¡ªt
(cUn™,„eg,‡ddr)

	)

34 
boŞ
 
dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

37 
boŞ
 
dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
–emCÏss
,

38 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
);

39 
dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

40 cÚ¡ 
CÏssObjeù
* 
şazz
);

43 
A¼ayObjeù
* 
dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

44 
size_t
 
Ëngth
, 
®locFÏgs
);

47 
boŞ
 
dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObjeù
,

48 cÚ¡ 
u2
* 
¬¿yD©a
);

51 
Objeù
* 
dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
);

57 "C" 
sq¹
(
x
);

	@vm/compiler/codegen/x86/Codegen.h

25 
	~"comp”/Comp”IR.h
"

26 
	~"C®loutH–³r.h
"

	@vm/compiler/codegen/x86/CodegenDriver.cpp

27 
X86LIR
 *
lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
);

28 
X86LIR
 *
lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

29 
di¥Ïûm’t
, 
rDe¡
);

30 
dvmComp”FlushAÎRegs
(
Comp©iÚUn™
 *
cUn™
);

31 
¡ÜeWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
,

32 
di¥Ïûm’t
, 
rSrc
);

33 
X86LIR
 *
İReg
(
Comp©iÚUn™
 *
cUn™
, 
OpKšd
 
İ
, 
rDe¡Src
);

35 
	gİcodeCov”age
[
kNumPackedOpcodes
];

36 
šŒ_t
 
	g‹m¶©eEÁryOff£ts
[
TEMPLATE_LAST_MARK
];

43 
	$g’PuÁToIÁ”p
(
Comp©iÚUn™
 *
cUn™
, 
off£t
)

45 
	`dvmComp”FlushAÎRegs
(
cUn™
);

46 
	`lßdCÚ¡ªt
(
cUn™
, 
rPC
, ()(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

47 
	`lßdWÜdDi¥
(
cUn™
, 
rEBP
, 0, 
rECX
);

48 
	`lßdWÜdDi¥
(
cUn™
, 
rECX
,

49 
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pPuÁ
),

50 
rEAX
);

51 
	`İReg
(
cUn™
, 
kOpUncÚdBr
, 
rEAX
);

52 
	}
}

54 
	$g’IÁ”pSšgËS‹p
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

56 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
mœ
->
d®vikIn¢
.
İcode
);

57 
æagsToCheck
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 | 
kIn¡rCªR‘uº
 |

58 
kIn¡rCªThrow
;

61 ià(
mœ
->
d®vikIn¢
.
İcode
 =ğ
OP_NOP
)

65 
	`dvmComp”FlushAÎRegs
(
cUn™
);

67 ià((
mœ
->
Ãxt
 =ğ
NULL
è|| (
æags
 & 
æagsToCheck
)) {

68 
	`g’PuÁToIÁ”p
(
cUn™
, 
mœ
->
off£t
);

71 
’ŒyAddr
 = 
	`off£tof
(
Th»ad
,

72 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pSšgËS‹p
);

73 
	`lßdWÜdDi¥
(
cUn™
, 
rEBP
, 0, 
rECX
);

74 
	`lßdWÜdDi¥
(
cUn™
, 
rECX
, 
’ŒyAddr
, 
rEAX
);

76 
	`lßdCÚ¡ªt
(
cUn™
, 
rPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

78 
	`lßdCÚ¡ªt
(
cUn™
, 
rECX
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
Ãxt
->
off£t
));

80 
	`¡ÜeWÜdDi¥
(
cUn™
, 
rESP
, 
OUT_ARG0
, 
rECX
);

81 
	`İReg
(
cUn™
, 
kOpC®l
, 
rEAX
);

82 
	}
}

92 
boŞ
 
	$hªdËFmt10t_Fmt20t_Fmt30t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

93 
BasicBlock
 *
bb
, 
X86LIR
 *
Ïb–Li¡
)

96  
Œue
;

97 
	}
}

99 
boŞ
 
	$hªdËFmt10x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

101  
Œue
;

102 
	}
}

104 
boŞ
 
	$hªdËFmt11n_Fmt31i
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

106  
Œue
;

107 
	}
}

109 
boŞ
 
	$hªdËFmt21h
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

111  
Œue
;

112 
	}
}

114 
boŞ
 
	$hªdËFmt20bc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

116  
Œue
;

117 
	}
}

119 
boŞ
 
	$hªdËFmt21c_Fmt31c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

121  
Œue
;

122 
	}
}

124 
boŞ
 
	$hªdËFmt11x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

126  
Œue
;

127 
	}
}

129 
boŞ
 
	$hªdËFmt12x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

131  
Œue
;

132 
	}
}

134 
boŞ
 
	$hªdËFmt21s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

136  
Œue
;

137 
	}
}

139 
boŞ
 
	$hªdËFmt21t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

140 
X86LIR
 *
Ïb–Li¡
)

142  
Œue
;

143 
	}
}

145 
boŞ
 
	$hªdËFmt22b_Fmt22s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

147  
Œue
;

148 
	}
}

150 
boŞ
 
	$hªdËFmt22c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

152  
Œue
;

153 
	}
}

155 
boŞ
 
	$hªdËFmt22cs
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

157  
Œue
;

158 
	}
}

160 
boŞ
 
	$hªdËFmt22t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

161 
X86LIR
 *
Ïb–Li¡
)

163  
Œue
;

164 
	}
}

166 
boŞ
 
	$hªdËFmt22x_Fmt32x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

168  
Œue
;

169 
	}
}

171 
boŞ
 
	$hªdËFmt23x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

173  
Œue
;

174 
	}
}

176 
boŞ
 
	$hªdËFmt31t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

178  
Œue
;

179 
	}
}

181 
boŞ
 
	$hªdËFmt35c_3rc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

182 
X86LIR
 *
Ïb–Li¡
)

184  
Œue
;

185 
	}
}

187 
boŞ
 
	$hªdËFmt35ms_3rms
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

188 
BasicBlock
 *
bb
, 
X86LIR
 *
Ïb–Li¡
)

190  
Œue
;

191 
	}
}

197 
boŞ
 
	$hªdËExecu‹IÆše
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

199  
Œue
;

200 
	}
}

202 
boŞ
 
	$hªdËFmt51l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

204  
Œue
;

205 
	}
}

209 
	$dvmComp”MIR2LIR
(
Comp©iÚUn™
 *
cUn™
)

211 
	}
}

214 
boŞ
 
	$dvmComp”DoWÜk
(
Comp”WÜkOrd”
 *
wÜk
)

216 
J™T¿ûDesütiÚ
 *
desc
;

217 
boŞ
 
»s
;

219 ià(
gDvmJ™
.
codeCacheFuÎ
) {

220  
çl£
;

223 
wÜk
->
kšd
) {

224 
kWÜkOrd”T¿û
:

226 
desc
 = (
J™T¿ûDesütiÚ
 *)
wÜk
->
šfo
;

227 
»s
 = 
	`dvmCompeT¿û
(
desc
, 
JIT_MAX_TRACE_LEN
, &
wÜk
->
»suÉ
,

228 
wÜk
->
baPŒ
, 0 );

230 
kWÜkOrd”T¿ûDebug
: {

231 
boŞ
 
ŞdPrštMe
 = 
gDvmJ™
.
´štMe
;

232 
gDvmJ™
.
´štMe
 = 
Œue
;

234 
desc
 = (
J™T¿ûDesütiÚ
 *)
wÜk
->
šfo
;

235 
»s
 = 
	`dvmCompeT¿û
(
desc
, 
JIT_MAX_TRACE_LEN
, &
wÜk
->
»suÉ
,

236 
wÜk
->
baPŒ
, 0 );

237 
gDvmJ™
.
´štMe
 = 
ŞdPrštMe
;

241 
»s
 = 
çl£
;

242 
	`ALOGE
("Jit: unknown work orderype");

243 
	`as£¹
(0);

245  
»s
;

246 
	}
}

249 
	$dvmComp”ArchDump
()

252 
i
, 
¡¬t
, 
¡»ak
;

253 
buf
[1024];

255 
¡»ak
 = 
i
 = 0;

256 
buf
[0] = 0;

257 
İcodeCov”age
[
i
] =ğ0 && i < 
kNumPackedOpcodes
) {

258 
i
++;

260 ià(
i
 =ğ
kNumPackedOpcodes
) {

263 
¡¬t
 = 
i
++, 
¡»ak
 = 1; i < 
kNumPackedOpcodes
; i++) {

264 ià(
İcodeCov”age
[
i
]) {

265 
¡»ak
++;

267 ià(
¡»ak
 == 1) {

268 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x,", 
¡¬t
);

270 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x,", 
¡¬t
, s¹ + 
¡»ak
 - 1);

272 
¡»ak
 = 0;

273 
İcodeCov”age
[
i
] =ğ0 && i < 
kNumPackedOpcodes
) {

274 
i
++;

276 ià(
i
 < 
kNumPackedOpcodes
) {

277 
¡»ak
 = 1;

278 
¡¬t
 = 
i
;

282 ià(
¡»ak
) {

283 ià(
¡»ak
 == 1) {

284 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x", 
¡¬t
);

286 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x", 
¡¬t
, s¹ + 
¡»ak
 - 1);

289 ià(
	`¡¾’
(
buf
)) {

290 
	`ALOGD
("d®vik.vm.j™.İ = %s", 
buf
);

292 
	}
}

295 
boŞ
 
	$dvmComp”ArchIn™
()

297  
	`dvmComp”ArchV¬ŸÁIn™
();

298 
	}
}

300 *
	$dvmComp”G‘IÁ”´‘Tem¶©e
()

302  (*è(()
gDvmJ™
.
codeCache
 +

303 
‹m¶©eEÁryOff£ts
[
TEMPLATE_INTERPRET
]);

304 
	}
}

306 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”G‘IÁ”´‘Tem¶©eS‘
()

308  
DALVIK_JIT_X86
;

309 
	}
}

311 
	$dvmComp”In™ŸlizeRegAÎoc
(
Comp©iÚUn™
 *
cUn™
)

313 
	}
}

	@vm/compiler/codegen/x86/X86LIR.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_X86_X86LIR_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_X86_X86LIR_H_


	)

20 
	~"D®vik.h
"

21 
	~"comp”/Comp”IÁ”Çls.h
"

53 
	eX86T¬g‘O±Hšts
 {

54 
	mkMaxHoi¡Di¡ªû
,

55 } 
	tX86T¬g‘O±Hšts
;

63 
	sRegi¡”Info
 {

64 
	m»g
;

65 
boŞ
 
	mšU£
;

66 
boŞ
 
	m·œ
;

67 
	m·¹Ãr
;

68 
boŞ
 
	mlive
;

69 
boŞ
 
	mdœty
;

70 
	msReg
;

71 
LIR
 *
	mdefS¹
;

72 
LIR
 *
	mdefEnd
;

73 } 
	tRegi¡”Info
;

75 
	sRegi¡”PoŞ
 {

76 
B™VeùÜ
 *
	mnuÎCheckedRegs
;

77 
	mnumCÜeTemps
;

78 
Regi¡”Info
 *
	mcÜeTemps
;

79 
	mÃxtCÜeTemp
;

80 
	mnumFPTemps
;

81 
Regi¡”Info
 *
	mFPTemps
;

82 
	mÃxtFPTemp
;

83 } 
	tRegi¡”PoŞ
;

85 
	eOpSize
 {

86 
	mkWÜd
,

87 
	mkLÚg
,

88 
	mkSšgË
,

89 
	mkDoubË
,

90 
	mkUnsigÃdH®f
,

91 
	mkSigÃdH®f
,

92 
	mkUnsigÃdBy‹
,

93 
	mkSigÃdBy‹
,

94 } 
	tOpSize
;

96 
	eOpKšd
 {

97 
	mkOpMov
,

98 
	mkOpCmp
,

99 
	mkOpL¦
,

100 
	mkOpL¤
,

101 
	mkOpA¤
,

102 
	mkOpRÜ
,

103 
	mkOpNÙ
,

104 
	mkOpAnd
,

105 
	mkOpOr
,

106 
	mkOpXÜ
,

107 
	mkOpNeg
,

108 
	mkOpAdd
,

109 
	mkOpAdc
,

110 
	mkOpSub
,

111 
	mkOpSbc
,

112 
	mkOpMul
,

113 
	mkOpDiv
,

114 
	mkOpRem
,

115 
	mkOpT¡
,

116 
	mkOpC®l
,

117 
	mkOpPush
,

118 
	mkOpPİ
,

119 
	mkOp2Ch¬
,

120 
	mkOp2ShÜt
,

121 
	mkOp2By‹
,

122 
	mkOpCÚdBr
,

123 
	mkOpUncÚdBr
,

124 } 
	tOpKšd
;

126 
	#FP_REG_OFFSET
 8

	)

128 
	eN©iveRegi¡”PoŞ
 {

129 
	mrEAX
 = 0,

130 
	mrECX
 = 1,

131 
	mrEDX
 = 2,

132 
	mrEBX
 = 3,

133 
	mrESP
 = 4,

134 
	mrEBP
 = 5,

135 
	mrESI
 = 6,

136 
	mrEDI
 = 7,

137 
	mrXMM0
 = 0 + 
FP_REG_OFFSET
,

138 
	mrXMM1
 = 1 + 
FP_REG_OFFSET
,

139 
	mrXMM2
 = 2 + 
FP_REG_OFFSET
,

140 
	mrXMM3
 = 3 + 
FP_REG_OFFSET
,

141 
	mrXMM4
 = 4 + 
FP_REG_OFFSET
,

142 
	mrXMM5
 = 5 + 
FP_REG_OFFSET
,

143 
	mrXMM6
 = 6 + 
FP_REG_OFFSET
,

144 
	mrXMM7
 = 7 + 
FP_REG_OFFSET
,

145 } 
	tN©iveRegi¡”PoŞ
;

147 
	#rPC
 
rEDI


	)

148 
	#rFP
 
rESI


	)

149 
	#rINST
 
rEBX


	)

151 
	#OUT_ARG0
 0

	)

152 
	#OUT_ARG1
 4

	)

153 
	#OUT_ARG2
 8

	)

154 
	#OUT_ARG3
 12

	)

155 
	#OUT_ARG4
 16

	)

157 
	sX86LIR
 {

158 
LIR
 
	mg’”ic
;

160 
	mİ”ªds
[4];

161 
boŞ
 
	misNİ
;

162 
boŞ
 
	mb¿nchIn£¹SV
;

164 
	mage
;

165 
	m®ŸsInfo
;

166 
u8
 
	mu£Mask
;

167 
u8
 
	mdefMask
;

168 } 
	tX86LIR
;

171 
	#NEXT_LIR
(
lœ
è((
X86LIR
 *èlœ->
g’”ic
.
Ãxt
)

	)

172 
	#PREV_LIR
(
lœ
è((
X86LIR
 *èlœ->
g’”ic
.
´ev
)

	)

174 
	#NEXT_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
Ãxt


	)

175 
	#PREV_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
´ev


	)

177 
	#CHAIN_CELL_OFFSET_TAG
 0xcdab

	)

179 
	#CHAIN_CELL_NORMAL_SIZE
 12

	)

180 
	#CHAIN_CELL_PREDICTED_SIZE
 16

	)

	@vm/compiler/codegen/x86/ia32/ArchVariant.cpp

17 "C" 
dvmComp”Tem¶©eS¹
();

28 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
()

30  
DALVIK_JIT_IA32
;

31 
	}
}

34 
	#JIT_TEMPLATE
(
X
è"C" 
dvmComp”_TEMPLATE_
##
	`X
();

	)

35 
	~"../../../‹m¶©e/Ÿ32/Tem¶©eOpLi¡.h
"

36 #undeà
JIT_TEMPLATE


39 
boŞ
 
	$dvmComp”ArchV¬ŸÁIn™
()

41 
i
 = 0;

47 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

48 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

49 
	~"../../../‹m¶©e/Ÿ32/Tem¶©eOpLi¡.h
"

50 #undeà
JIT_TEMPLATE


53 
gDvmJ™
.
j™TabËSize
 = 1 << 9;

54 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

55 
gDvmJ™
.
th»shŞd
 = 200;

56 
gDvmJ™
.
codeCacheSize
 = 512*1024;

58 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

60 
gDvmJ™
.
blockšgMode
 = 
Œue
;

61 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

65 
	`as£¹
(
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) < 128 &&

66 (
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

67 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

68 (
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

69 
	`as£¹
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

72 
	`as£¹
((
SckSaveA»a
) < 236);

78 
	`as£¹
((
	`off£tof
(
Th»ad
, 
j™ToIÁ”pEÁr›s
) +

79 (
J™ToIÁ”pEÁr›s
)) <= 128);

82 
	`dvmJ™Upd©eTh»adS‹AÎ
();

83  
Œue
;

84 
	}
}

86 
	$dvmComp”T¬g‘O±Hšt
(
key
)

88 
»s
;

89 
key
) {

90 
kMaxHoi¡Di¡ªû
:

91 
»s
 = 2;

94 
	`ALOGE
("UnknowÀrg‘ o±imiz©iÚ hšˆkey: %d",
key
);

95 
»s
 = 0;

97  
»s
;

98 
	}
}

100 
	$dvmComp”G’MemB¬r›r
(
Comp©iÚUn™
 *
cUn™
, 
b¬r›rKšd
)

102 
	}
}

	@vm/compiler/codegen/x86/ia32/ArchVariant.h

17 #iâdeà
DALVIK_VM_COMPILER_CODEGEN_X86_IA32_ARCHVARIANT_H_


18 
	#DALVIK_VM_COMPILER_CODEGEN_X86_IA32_ARCHVARIANT_H_


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

22 
	eTem¶©eOpcode
 {

23 
	~"../../../‹m¶©e/Ÿ32/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

32 #undeà
JIT_TEMPLATE


	@vm/compiler/codegen/x86/ia32/Codegen.cpp

16 
	#_CODEGEN_C


	)

17 
	#_IA32


	)

19 
	~"D®vik.h
"

20 
	~"š‹½/IÁ”pDefs.h
"

21 
	~"libdex/DexOpcodes.h
"

22 
	~"comp”/Comp”IÁ”Çls.h
"

23 
	~"comp”/codeg’/x86/X86LIR.h
"

24 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

26 
	~"comp”/codeg’/x86/Codeg’.h
"

27 
	~"comp”/Loİ.h
"

28 
	~"ArchV¬ŸÁ.h
"

42 
	~"../Codeg’Driv”.ıp
"

45 
	~"ArchV¬ŸÁ.ıp
"

	@vm/compiler/template/armv5te-vfp/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
MUL_LONG
)

31 
	$JIT_TEMPLATE
(
SHL_LONG
)

32 
	$JIT_TEMPLATE
(
SHR_LONG
)

33 
	$JIT_TEMPLATE
(
USHR_LONG
)

34 
	$JIT_TEMPLATE
(
ADD_FLOAT_VFP
)

35 
	$JIT_TEMPLATE
(
SUB_FLOAT_VFP
)

36 
	$JIT_TEMPLATE
(
MUL_FLOAT_VFP
)

37 
	$JIT_TEMPLATE
(
DIV_FLOAT_VFP
)

38 
	$JIT_TEMPLATE
(
ADD_DOUBLE_VFP
)

39 
	$JIT_TEMPLATE
(
SUB_DOUBLE_VFP
)

40 
	$JIT_TEMPLATE
(
MUL_DOUBLE_VFP
)

41 
	$JIT_TEMPLATE
(
DIV_DOUBLE_VFP
)

42 
	$JIT_TEMPLATE
(
DOUBLE_TO_FLOAT_VFP
)

43 
	$JIT_TEMPLATE
(
DOUBLE_TO_INT_VFP
)

44 
	$JIT_TEMPLATE
(
FLOAT_TO_DOUBLE_VFP
)

45 
	$JIT_TEMPLATE
(
FLOAT_TO_INT_VFP
)

46 
	$JIT_TEMPLATE
(
INT_TO_DOUBLE_VFP
)

47 
	$JIT_TEMPLATE
(
INT_TO_FLOAT_VFP
)

48 
	$JIT_TEMPLATE
(
CMPG_DOUBLE_VFP
)

49 
	$JIT_TEMPLATE
(
CMPL_DOUBLE_VFP
)

50 
	$JIT_TEMPLATE
(
CMPG_FLOAT_VFP
)

51 
	$JIT_TEMPLATE
(
CMPL_FLOAT_VFP
)

52 
	$JIT_TEMPLATE
(
SQRT_DOUBLE_VFP
)

53 
	$JIT_TEMPLATE
(
THROW_EXCEPTION_COMMON
)

54 
	$JIT_TEMPLATE
(
MEM_OP_DECODE
)

55 
	$JIT_TEMPLATE
(
STRING_COMPARETO
)

56 
	$JIT_TEMPLATE
(
STRING_INDEXOF
)

57 
	$JIT_TEMPLATE
(
INTERPRET
)

58 
	$JIT_TEMPLATE
(
MONITOR_ENTER
)

59 
	$JIT_TEMPLATE
(
MONITOR_ENTER_DEBUG
)

60 
	$JIT_TEMPLATE
(
PERIODIC_PROFILING
)

61 
	$JIT_TEMPLATE
(
RETURN_PROF
)

62 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT_PROF
)

63 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN_PROF
)

64 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN_PROF
)

65 
	`JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE_PROF
)

	@vm/compiler/template/armv5te/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
CMPG_DOUBLE
)

31 
	$JIT_TEMPLATE
(
CMPL_DOUBLE
)

32 
	$JIT_TEMPLATE
(
CMPG_FLOAT
)

33 
	$JIT_TEMPLATE
(
CMPL_FLOAT
)

34 
	$JIT_TEMPLATE
(
MUL_LONG
)

35 
	$JIT_TEMPLATE
(
SHL_LONG
)

36 
	$JIT_TEMPLATE
(
SHR_LONG
)

37 
	$JIT_TEMPLATE
(
USHR_LONG
)

38 
	$JIT_TEMPLATE
(
THROW_EXCEPTION_COMMON
)

39 
	$JIT_TEMPLATE
(
MEM_OP_DECODE
)

40 
	$JIT_TEMPLATE
(
STRING_COMPARETO
)

41 
	$JIT_TEMPLATE
(
STRING_INDEXOF
)

42 
	$JIT_TEMPLATE
(
INTERPRET
)

43 
	$JIT_TEMPLATE
(
MONITOR_ENTER
)

44 
	$JIT_TEMPLATE
(
MONITOR_ENTER_DEBUG
)

45 
	$JIT_TEMPLATE
(
PERIODIC_PROFILING
)

46 
	$JIT_TEMPLATE
(
RETURN_PROF
)

47 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT_PROF
)

48 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN_PROF
)

49 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN_PROF
)

50 
	`JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE_PROF
)

	@vm/compiler/template/armv7-a-neon/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
MUL_LONG
)

31 
	$JIT_TEMPLATE
(
SHL_LONG
)

32 
	$JIT_TEMPLATE
(
SHR_LONG
)

33 
	$JIT_TEMPLATE
(
USHR_LONG
)

34 
	$JIT_TEMPLATE
(
ADD_FLOAT_VFP
)

35 
	$JIT_TEMPLATE
(
SUB_FLOAT_VFP
)

36 
	$JIT_TEMPLATE
(
MUL_FLOAT_VFP
)

37 
	$JIT_TEMPLATE
(
DIV_FLOAT_VFP
)

38 
	$JIT_TEMPLATE
(
ADD_DOUBLE_VFP
)

39 
	$JIT_TEMPLATE
(
SUB_DOUBLE_VFP
)

40 
	$JIT_TEMPLATE
(
MUL_DOUBLE_VFP
)

41 
	$JIT_TEMPLATE
(
DIV_DOUBLE_VFP
)

42 
	$JIT_TEMPLATE
(
DOUBLE_TO_FLOAT_VFP
)

43 
	$JIT_TEMPLATE
(
DOUBLE_TO_INT_VFP
)

44 
	$JIT_TEMPLATE
(
FLOAT_TO_DOUBLE_VFP
)

45 
	$JIT_TEMPLATE
(
FLOAT_TO_INT_VFP
)

46 
	$JIT_TEMPLATE
(
INT_TO_DOUBLE_VFP
)

47 
	$JIT_TEMPLATE
(
INT_TO_FLOAT_VFP
)

48 
	$JIT_TEMPLATE
(
CMPG_DOUBLE_VFP
)

49 
	$JIT_TEMPLATE
(
CMPL_DOUBLE_VFP
)

50 
	$JIT_TEMPLATE
(
CMPG_FLOAT_VFP
)

51 
	$JIT_TEMPLATE
(
CMPL_FLOAT_VFP
)

52 
	$JIT_TEMPLATE
(
SQRT_DOUBLE_VFP
)

53 
	$JIT_TEMPLATE
(
THROW_EXCEPTION_COMMON
)

54 
	$JIT_TEMPLATE
(
MEM_OP_DECODE
)

55 
	$JIT_TEMPLATE
(
STRING_COMPARETO
)

56 
	$JIT_TEMPLATE
(
STRING_INDEXOF
)

57 
	$JIT_TEMPLATE
(
INTERPRET
)

58 
	$JIT_TEMPLATE
(
MONITOR_ENTER
)

59 
	$JIT_TEMPLATE
(
MONITOR_ENTER_DEBUG
)

60 
	$JIT_TEMPLATE
(
PERIODIC_PROFILING
)

61 
	$JIT_TEMPLATE
(
RETURN_PROF
)

62 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT_PROF
)

63 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN_PROF
)

64 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN_PROF
)

65 
	`JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE_PROF
)

	@vm/compiler/template/armv7-a/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
MUL_LONG
)

31 
	$JIT_TEMPLATE
(
SHL_LONG
)

32 
	$JIT_TEMPLATE
(
SHR_LONG
)

33 
	$JIT_TEMPLATE
(
USHR_LONG
)

34 
	$JIT_TEMPLATE
(
ADD_FLOAT_VFP
)

35 
	$JIT_TEMPLATE
(
SUB_FLOAT_VFP
)

36 
	$JIT_TEMPLATE
(
MUL_FLOAT_VFP
)

37 
	$JIT_TEMPLATE
(
DIV_FLOAT_VFP
)

38 
	$JIT_TEMPLATE
(
ADD_DOUBLE_VFP
)

39 
	$JIT_TEMPLATE
(
SUB_DOUBLE_VFP
)

40 
	$JIT_TEMPLATE
(
MUL_DOUBLE_VFP
)

41 
	$JIT_TEMPLATE
(
DIV_DOUBLE_VFP
)

42 
	$JIT_TEMPLATE
(
DOUBLE_TO_FLOAT_VFP
)

43 
	$JIT_TEMPLATE
(
DOUBLE_TO_INT_VFP
)

44 
	$JIT_TEMPLATE
(
FLOAT_TO_DOUBLE_VFP
)

45 
	$JIT_TEMPLATE
(
FLOAT_TO_INT_VFP
)

46 
	$JIT_TEMPLATE
(
INT_TO_DOUBLE_VFP
)

47 
	$JIT_TEMPLATE
(
INT_TO_FLOAT_VFP
)

48 
	$JIT_TEMPLATE
(
CMPG_DOUBLE_VFP
)

49 
	$JIT_TEMPLATE
(
CMPL_DOUBLE_VFP
)

50 
	$JIT_TEMPLATE
(
CMPG_FLOAT_VFP
)

51 
	$JIT_TEMPLATE
(
CMPL_FLOAT_VFP
)

52 
	$JIT_TEMPLATE
(
SQRT_DOUBLE_VFP
)

53 
	$JIT_TEMPLATE
(
THROW_EXCEPTION_COMMON
)

54 
	$JIT_TEMPLATE
(
MEM_OP_DECODE
)

55 
	$JIT_TEMPLATE
(
STRING_COMPARETO
)

56 
	$JIT_TEMPLATE
(
STRING_INDEXOF
)

57 
	$JIT_TEMPLATE
(
INTERPRET
)

58 
	$JIT_TEMPLATE
(
MONITOR_ENTER
)

59 
	$JIT_TEMPLATE
(
MONITOR_ENTER_DEBUG
)

60 
	$JIT_TEMPLATE
(
PERIODIC_PROFILING
)

61 
	$JIT_TEMPLATE
(
RETURN_PROF
)

62 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT_PROF
)

63 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN_PROF
)

64 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN_PROF
)

65 
	`JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE_PROF
)

	@vm/compiler/template/ia32/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
JIT_TEMPLATE
(
INTERPRET
)

	@vm/hprof/Hprof.cpp

25 
	~"H´of.h
"

26 
	~"®loc/H—pIÁ”Çl.h
"

27 
	~"®loc/Vis™.h
"

29 
	~<¡ršg.h
>

30 
	~<uni¡d.h
>

31 
	~<fú.h
>

32 
	~<”ºo.h
>

33 
	~<sys/time.h
>

34 
	~<time.h
>

36 
	#kH—dSuffix
 "-h±emp"

	)

38 
h´of_cÚ‹xt_t
* 
	$h´ofS¹up
(cÚ¡ *
ouutFeName
, 
fd
,

39 
boŞ
 
dœeùToDdms
)

41 
	`h´ofS¹up_SŒšg
();

42 
	`h´ofS¹up_CÏss
();

44 
h´of_cÚ‹xt_t
 *
ùx
 = (h´of_cÚ‹xt_ˆ*)
	`ÿÎoc
(1, (*ctx));

45 ià(
ùx
 =ğ
NULL
) {

46 
	`ALOGE
("hprof: can't‡llocate context.");

47  
NULL
;

51 
	`h´ofCÚ‹xtIn™
(
ùx
, 
	`¡rdup
(
ouutFeName
), 
fd
, 
çl£
, 
dœeùToDdms
);

53 
	`as£¹
(
ùx
->
memFp
 !ğ
NULL
);

55  
ùx
;

56 
	}
}

61 
boŞ
 
	$h´ofShutdown
(
h´of_cÚ‹xt_t
 *
Ctx
)

64 
	`h´ofFlushCu¼’tRecÜd
(
Ctx
);

70 
h´of_cÚ‹xt_t
 *
h—dCtx
 = (h´of_cÚ‹xt_ˆ*)
	`ÿÎoc
(1, (*headCtx));

71 ià(
h—dCtx
 =ğ
NULL
) {

72 
	`ALOGE
("hprof: can't‡llocate context.");

73 
	`h´ofF»eCÚ‹xt
(
Ctx
);

74  
çl£
;

76 
	`h´ofCÚ‹xtIn™
(
h—dCtx
, 
	`¡rdup
(
Ctx
->
feName
),aCtx->
fd
, 
Œue
,

77 
Ctx
->
dœeùToDdms
);

79 
	`ALOGI
("h´of: dumpšg h—°¡ršg tØ\"%s\".", 
Ctx
->
feName
);

80 
	`h´ofDumpSŒšgs
(
h—dCtx
);

81 
	`h´ofDumpCÏs£s
(
h—dCtx
);

86 
	`h´ofS¹NewRecÜd
(
h—dCtx
, 
HPROF_TAG_STACK_TRACE
, 
HPROF_TIME
);

87 
	`h´ofAddU4ToRecÜd
(&
h—dCtx
->
curRec
, 
HPROF_NULL_STACK_TRACE
);

88 
	`h´ofAddU4ToRecÜd
(&
h—dCtx
->
curRec
, 
HPROF_NULL_THREAD
);

89 
	`h´ofAddU4ToRecÜd
(&
h—dCtx
->
curRec
, 0);

91 
	`h´ofFlushCu¼’tRecÜd
(
h—dCtx
);

93 
	`h´ofShutdown_CÏss
();

94 
	`h´ofShutdown_SŒšg
();

97 
	`fæush
(
h—dCtx
->
memFp
);

98 
	`fæush
(
Ctx
->
memFp
);

100 ià(
Ctx
->
dœeùToDdms
) {

102 
iovec
 
iov
[2];

103 
iov
[0].
iov_ba£
 = 
h—dCtx
->
feD©aPŒ
;

104 
iov
[0].
iov_Ën
 = 
h—dCtx
->
feD©aSize
;

105 
iov
[1].
iov_ba£
 = 
Ctx
->
feD©aPŒ
;

106 
iov
[1].
iov_Ën
 = 
Ctx
->
feD©aSize
;

107 
	`dvmDbgDdmS’dChunkV
(
	`CHUNK_TYPE
("HPDS"), 
iov
, 2);

112 
	`as£¹
(
h—dCtx
->
fd
 =ğ
Ctx
->fd);

114 
outFd
;

115 ià(
h—dCtx
->
fd
 >= 0) {

116 
outFd
 = 
	`dup
(
h—dCtx
->
fd
);

117 ià(
outFd
 < 0) {

118 
	`ALOGE
("dup(%dèçed: %s", 
h—dCtx
->
fd
, 
	`¡»¼Ü
(
”ºo
));

122 
outFd
 = 
	`İ’
(
Ctx
->
feName
, 
O_WRONLY
|
O_CREAT
|
O_TRUNC
, 0644);

123 ià(
outFd
 < 0) {

124 
	`ALOGE
("ÿn'ˆİ’ %s: %s", 
h—dCtx
->
feName
, 
	`¡»¼Ü
(
”ºo
));

128 ià(
outFd
 < 0) {

129 
	`h´ofF»eCÚ‹xt
(
h—dCtx
);

130 
	`h´ofF»eCÚ‹xt
(
Ctx
);

131  
çl£
;

134 
»suÉ
;

135 
»suÉ
 = 
	`sysWr™eFuÎy
(
outFd
, 
h—dCtx
->
feD©aPŒ
,

136 
h—dCtx
->
feD©aSize
, "hprof-head");

137 
»suÉ
 |ğ
	`sysWr™eFuÎy
(
outFd
, 
Ctx
->
feD©aPŒ
,

138 
Ctx
->
feD©aSize
, "hprof-tail");

139 
	`şo£
(
outFd
);

140 ià(
»suÉ
 != 0) {

141 
	`h´ofF»eCÚ‹xt
(
h—dCtx
);

142 
	`h´ofF»eCÚ‹xt
(
Ctx
);

143  
çl£
;

148 
	`ALOGI
("hprof: heap dump completed (%dKB)",

149 (
h—dCtx
->
feD©aSize
 + 
Ctx
->fileDataSize + 1023) / 1024);

151 
	`h´ofF»eCÚ‹xt
(
h—dCtx
);

152 
	`h´ofF»eCÚ‹xt
(
Ctx
);

154  
Œue
;

155 
	}
}

160 
	$h´ofF»eCÚ‹xt
(
h´of_cÚ‹xt_t
 *
ùx
)

162 
	`as£¹
(
ùx
 !ğ
NULL
);

166 ià(
ùx
->
memFp
 !ğ
NULL
)

167 
	`fşo£
(
ùx
->
memFp
);

168 
	`ä“
(
ùx
->
curRec
.
body
);

169 
	`ä“
(
ùx
->
feName
);

170 
	`ä“
(
ùx
->
feD©aPŒ
);

171 
	`ä“
(
ùx
);

172 
	}
}

177 
	$h´ofRoÙVis™Ü
(*
addr
, 
u4
 
th»adId
, 
RoÙTy³
 
ty³
, *
¬g
)

179 cÚ¡ 
h´of_h—p_g_t
 
xÏ‹
[] = {

180 
HPROF_ROOT_UNKNOWN
,

181 
HPROF_ROOT_JNI_GLOBAL
,

182 
HPROF_ROOT_JNI_LOCAL
,

183 
HPROF_ROOT_JAVA_FRAME
,

184 
HPROF_ROOT_NATIVE_STACK
,

185 
HPROF_ROOT_STICKY_CLASS
,

186 
HPROF_ROOT_THREAD_BLOCK
,

187 
HPROF_ROOT_MONITOR_USED
,

188 
HPROF_ROOT_THREAD_OBJECT
,

189 
HPROF_ROOT_INTERNED_STRING
,

190 
HPROF_ROOT_FINALIZING
,

191 
HPROF_ROOT_DEBUGGER
,

192 
HPROF_ROOT_REFERENCE_CLEANUP
,

193 
HPROF_ROOT_VM_INTERNAL
,

194 
HPROF_ROOT_JNI_MONITOR
,

196 
h´of_cÚ‹xt_t
 *
ùx
;

197 
Objeù
 *
obj
;

199 
	`as£¹
(
addr
 !ğ
NULL
);

200 
	`as£¹
(
¬g
 !ğ
NULL
);

201 
	`as£¹
(
ty³
 < 
	`NELEM
(
xÏ‹
));

202 
obj
 = *(
Objeù
 **)
addr
;

203 ià(
obj
 =ğ
NULL
) {

206 
ùx
 = (
h´of_cÚ‹xt_t
 *)
¬g
;

207 
ùx
->
gcSÿnS‹
 = 
xÏ‹
[
ty³
];

208 
ùx
->
gcTh»adS”ŸlNumb”
 = 
th»adId
;

209 
	`h´ofM¬kRoÙObjeù
(
ùx
, 
obj
, 0);

210 
ùx
->
gcSÿnS‹
 = 0;

211 
ùx
->
gcTh»adS”ŸlNumb”
 = 0;

212 
	}
}

217 
	$h´ofB™m­C®lback
(
Objeù
 *
obj
, *
¬g
)

219 
	`as£¹
(
obj
 !ğ
NULL
);

220 
	`as£¹
(
¬g
 !ğ
NULL
);

221 
h´of_cÚ‹xt_t
 *
ùx
 = (h´of_cÚ‹xt_ˆ*)
¬g
;

222 
	`h´ofDumpH—pObjeù
(
ùx
, 
obj
);

223 
	}
}

237 
	$h´ofDumpH—p
(cÚ¡ * 
feName
, 
fd
, 
boŞ
 
dœeùToDdms
)

239 
h´of_cÚ‹xt_t
 *
ùx
;

240 
sucûss
;

242 
	`as£¹
(
feName
 !ğ
NULL
);

243 
	`dvmLockH—p
();

244 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_HPROF
);

245 
ùx
 = 
	`h´ofS¹up
(
feName
, 
fd
, 
dœeùToDdms
);

246 ià(
ùx
 =ğ
NULL
) {

249 
	`dvmVis™RoÙs
(
h´ofRoÙVis™Ü
, 
ùx
);

250 
	`dvmH—pB™m­W®k
(
	`dvmH—pSourûG‘LiveB™s
(), 
h´ofB™m­C®lback
, 
ùx
);

251 
	`h´ofFšishH—pDump
(
ùx
);

253 
sucûss
 = 
	`h´ofShutdown
(
ùx
) ? 0 : -1;

254 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_HPROF
);

255 
	`dvmUÆockH—p
();

256  
sucûss
;

257 
	}
}

	@vm/hprof/Hprof.h

16 #iâdeà
DALVIK_HPROF_HPROF_H_


17 
	#DALVIK_HPROF_HPROF_H_


	)

19 
	~"D®vik.h
"

21 
	#HPROF_ID_SIZE
 ( (
u4
))

	)

23 
	#UNIQUE_ERROR
() \

24 -((((
ušŒ_t
)
__func__
è<< 16 | 
__LINE__
è& (0x7fffffff))

	)

26 
	#HPROF_TIME
 0

	)

27 
	#HPROF_NULL_STACK_TRACE
 0

	)

28 
	#HPROF_NULL_THREAD
 0

	)

30 
u4
 
	th´of_id
;

31 
h´of_id
 
	th´of_¡ršg_id
;

32 
h´of_id
 
	th´of_objeù_id
;

33 
h´of_id
 
	th´of_şass_objeù_id
;

35 
	eh´of_basic_ty³
 {

36 
	mh´of_basic_objeù
 = 2,

37 
	mh´of_basic_boŞ—n
 = 4,

38 
	mh´of_basic_ch¬
 = 5,

39 
	mh´of_basic_æßt
 = 6,

40 
	mh´of_basic_doubË
 = 7,

41 
	mh´of_basic_by‹
 = 8,

42 
	mh´of_basic_shÜt
 = 9,

43 
	mh´of_basic_št
 = 10,

44 
	mh´of_basic_lÚg
 = 11,

47 
	eh´of_g_t
 {

48 
	mHPROF_TAG_STRING
 = 0x01,

49 
	mHPROF_TAG_LOAD_CLASS
 = 0x02,

50 
	mHPROF_TAG_UNLOAD_CLASS
 = 0x03,

51 
	mHPROF_TAG_STACK_FRAME
 = 0x04,

52 
	mHPROF_TAG_STACK_TRACE
 = 0x05,

53 
	mHPROF_TAG_ALLOC_SITES
 = 0x06,

54 
	mHPROF_TAG_HEAP_SUMMARY
 = 0x07,

55 
	mHPROF_TAG_START_THREAD
 = 0x0A,

56 
	mHPROF_TAG_END_THREAD
 = 0x0B,

57 
	mHPROF_TAG_HEAP_DUMP
 = 0x0C,

58 
	mHPROF_TAG_HEAP_DUMP_SEGMENT
 = 0x1C,

59 
	mHPROF_TAG_HEAP_DUMP_END
 = 0x2C,

60 
	mHPROF_TAG_CPU_SAMPLES
 = 0x0D,

61 
	mHPROF_TAG_CONTROL_SETTINGS
 = 0x0E,

68 
	eh´of_h—p_g_t
 {

70 
	mHPROF_ROOT_UNKNOWN
 = 0xFF,

71 
	mHPROF_ROOT_JNI_GLOBAL
 = 0x01,

72 
	mHPROF_ROOT_JNI_LOCAL
 = 0x02,

73 
	mHPROF_ROOT_JAVA_FRAME
 = 0x03,

74 
	mHPROF_ROOT_NATIVE_STACK
 = 0x04,

75 
	mHPROF_ROOT_STICKY_CLASS
 = 0x05,

76 
	mHPROF_ROOT_THREAD_BLOCK
 = 0x06,

77 
	mHPROF_ROOT_MONITOR_USED
 = 0x07,

78 
	mHPROF_ROOT_THREAD_OBJECT
 = 0x08,

79 
	mHPROF_CLASS_DUMP
 = 0x20,

80 
	mHPROF_INSTANCE_DUMP
 = 0x21,

81 
	mHPROF_OBJECT_ARRAY_DUMP
 = 0x22,

82 
	mHPROF_PRIMITIVE_ARRAY_DUMP
 = 0x23,

85 
	mHPROF_HEAP_DUMP_INFO
 = 0xfe,

86 
	mHPROF_ROOT_INTERNED_STRING
 = 0x89,

87 
	mHPROF_ROOT_FINALIZING
 = 0x8a,

88 
	mHPROF_ROOT_DEBUGGER
 = 0x8b,

89 
	mHPROF_ROOT_REFERENCE_CLEANUP
 = 0x8c,

90 
	mHPROF_ROOT_VM_INTERNAL
 = 0x8d,

91 
	mHPROF_ROOT_JNI_MONITOR
 = 0x8e,

92 
	mHPROF_UNREACHABLE
 = 0x90,

93 
	mHPROF_PRIMITIVE_ARRAY_NODATA_DUMP
 = 0xc3,

105 
	sh´of_»cÜd_t
 {

106 *
	mbody
;

107 
u4
 
	mtime
;

108 
u4
 
	mËngth
;

109 
size_t
 
	m®locL’
;

110 
u1
 
	mg
;

111 
boŞ
 
	mdœty
;

114 
	eH´ofH—pId
 {

115 
	mHPROF_HEAP_DEFAULT
 = 0,

116 
	mHPROF_HEAP_ZYGOTE
 = 'Z',

117 
	mHPROF_HEAP_APP
 = 'A'

120 
	sh´of_cÚ‹xt_t
 {

124 
h´of_»cÜd_t
 
	mcurRec
;

126 
u4
 
	mgcTh»adS”ŸlNumb”
;

127 
u1
 
	mgcSÿnS‹
;

128 
H´ofH—pId
 
	mcu¼’tH—p
;

129 
u4
 
	m¡ackT¿ûS”ŸlNumb”
;

130 
size_t
 
	mobjeùsInSegm’t
;

137 
boŞ
 
	mdœeùToDdms
;

138 *
	mfeName
;

139 *
	mfeD©aPŒ
;

140 
size_t
 
	mfeD©aSize
;

141 
FILE
 *
	mmemFp
;

142 
	mfd
;

150 
h´of_¡ršg_id
 
h´ofLookupSŒšgId
(cÚ¡ *
¡r
);

152 
h´ofDumpSŒšgs
(
h´of_cÚ‹xt_t
 *
ùx
);

154 
h´ofS¹up_SŒšg
();

155 
h´ofShutdown_SŒšg
();

162 
h´of_şass_objeù_id
 
h´ofLookupCÏssId
(cÚ¡ 
CÏssObjeù
 *
şazz
);

164 
h´ofDumpCÏs£s
(
h´of_cÚ‹xt_t
 *
ùx
);

166 
h´ofS¹up_CÏss
();

167 
h´ofShutdown_CÏss
();

174 
h´ofS¹H—pDump
(
h´of_cÚ‹xt_t
 *
ùx
);

175 
h´ofFšishH—pDump
(
h´of_cÚ‹xt_t
 *
ùx
);

177 
h´ofS‘GcSÿnS‹
(
h´of_cÚ‹xt_t
 *
ùx
,

178 
h´of_h—p_g_t
 
¡©e
, 
u4
 
th»adS”ŸlNumb”
);

179 
h´ofM¬kRoÙObjeù
(
h´of_cÚ‹xt_t
 *
ùx
,

180 cÚ¡ 
Objeù
 *
obj
, 
jobjeù
 
jniObj
);

182 
h´ofDumpH—pObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
);

188 
h´ofCÚ‹xtIn™
(
h´of_cÚ‹xt_t
 *
ùx
, *
feName
, 
fd
,

189 
boŞ
 
wr™eH—d”
, boŞ 
dœeùToDdms
);

191 
h´ofFlushRecÜd
(
h´of_»cÜd_t
 *
»c
, 
FILE
 *
å
);

192 
h´ofFlushCu¼’tRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
);

193 
h´ofS¹NewRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
, 
u1
 
g
, 
u4
 
time
);

195 
h´ofAddU1ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u1
 
v®ue
);

196 
h´ofAddU1Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

197 cÚ¡ 
u1
 *
v®ues
, 
size_t
 
numV®ues
);

199 
h´ofAddUtf8SŒšgToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ *
¡r
);

201 
h´ofAddU2ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u2
 
v®ue
);

202 
h´ofAddU2Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

203 cÚ¡ 
u2
 *
v®ues
, 
size_t
 
numV®ues
);

205 
h´ofAddU4ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u4
 
v®ue
);

206 
h´ofAddU4Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

207 cÚ¡ 
u4
 *
v®ues
, 
size_t
 
numV®ues
);

209 
h´ofAddU8ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u8
 
v®ue
);

210 
h´ofAddU8Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

211 cÚ¡ 
u8
 *
v®ues
, 
size_t
 
numV®ues
);

213 
	#h´ofAddIdToRecÜd
(
»c
, 
id
è
	`h´ofAddU4ToRecÜd
(Ôec), (
u4
)(id))

	)

214 
	#h´ofAddIdLi¡ToRecÜd
(
»c
, 
v®ues
, 
numV®ues
) \

215 
	`h´ofAddU4Li¡ToRecÜd
((
»c
), (cÚ¡ 
u4
 *)(
v®ues
), (
numV®ues
))

	)

221 
h´of_cÚ‹xt_t
* 
h´ofS¹up
(cÚ¡ *
ouutFeName
, 
fd
,

222 
boŞ
 
dœeùToDdms
);

223 
boŞ
 
h´ofShutdown
(
h´of_cÚ‹xt_t
 *
ùx
);

224 
h´ofF»eCÚ‹xt
(
h´of_cÚ‹xt_t
 *
ùx
);

225 
h´ofDumpH—p
(cÚ¡ * 
feName
, 
fd
, 
boŞ
 
dœeùToDdms
);

	@vm/hprof/HprofClass.cpp

20 
	~"H´of.h
"

22 
HashTabË
 *
	ggCÏssHashTabË
;

24 
	$h´ofS¹up_CÏss
()

26 
gCÏssHashTabË
 = 
	`dvmHashTabËC»©e
(128, 
NULL
);

27 ià(
gCÏssHashTabË
 =ğ
NULL
) {

28  
	`UNIQUE_ERROR
();

31 
	}
}

33 
	$h´ofShutdown_CÏss
()

35 
	`dvmHashTabËF»e
(
gCÏssHashTabË
);

38 
	}
}

40 
u4
 
	$compu‹CÏssHash
(cÚ¡ 
CÏssObjeù
 *
şazz
)

42 
u4
 
hash
;

43 cÚ¡ *
ı
;

44 
c
;

46 
ı
 = 
şazz
->
desütÜ
;

47 
hash
 = (
u4
)
şazz
->
şassLßd”
;

48 (
c
 = *
ı
++) != '\0') {

49 
hash
 = hash * 31 + 
c
;

52  
hash
;

53 
	}
}

55 
	$şassCmp
(cÚ¡ *
v1
, cÚ¡ *
v2
)

57 cÚ¡ 
CÏssObjeù
 *
c1
 = (cÚ¡ CÏssObjeù *)
v1
;

58 cÚ¡ 
CÏssObjeù
 *
c2
 = (cÚ¡ CÏssObjeù *)
v2
;

59 
šŒ_t
 
diff
;

61 
diff
 = (
ušŒ_t
)
c1
->
şassLßd”
 - (ušŒ_t)
c2
->classLoader;

62 ià(
diff
 == 0) {

63  
	`¡rcmp
(
c1
->
desütÜ
, 
c2
->descriptor);

65  
diff
;

66 
	}
}

68 
	$g‘P»‰yCÏssNameId
(cÚ¡ *
desütÜ
) {

69 
¡d
::
¡ršg
 
	`Çme
(
	`dvmHumªR—dabËDesütÜ
(
desütÜ
));

70  
	`h´ofLookupSŒšgId
(
Çme
.
	`c_¡r
());

71 
	}
}

73 
h´of_şass_objeù_id
 
	$h´ofLookupCÏssId
(cÚ¡ 
CÏssObjeù
 *
şazz
)

75 *
v®
;

77 ià(
şazz
 =ğ
NULL
) {

81  (
h´of_şass_objeù_id
)0;

84 
	`dvmHashTabËLock
(
gCÏssHashTabË
);

89 
v®
 = 
	`dvmHashTabËLookup
(
gCÏssHashTabË
, 
	`compu‹CÏssHash
(
şazz
),

90 (*)
şazz
, 
şassCmp
, 
Œue
);

91 
	`as£¹
(
v®
 !ğ
NULL
);

93 
	`dvmHashTabËUÆock
(
gCÏssHashTabË
);

100 
	`g‘P»‰yCÏssNameId
(
şazz
->
desütÜ
);

102  (
h´of_şass_objeù_id
)
şazz
;

103 
	}
}

105 
	$h´ofDumpCÏs£s
(
h´of_cÚ‹xt_t
 *
ùx
)

107 
HashI‹r
 
™”
;

108 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

109 
”r
;

111 
	`dvmHashTabËLock
(
gCÏssHashTabË
);

113 
”r
 = 0, 
	`dvmHashI‹rBegš
(
gCÏssHashTabË
, &
™”
);

114 
”r
 =ğ0 && !
	`dvmHashI‹rDÚe
(&
™”
);

115 
	`dvmHashI‹rNext
(&
™”
))

117 
”r
 = 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_LOAD_CLASS
, 
HPROF_TIME
);

118 ià(
”r
 == 0) {

119 cÚ¡ 
CÏssObjeù
 *
şazz
;

121 
şazz
 = (cÚ¡ 
CÏssObjeù
 *)
	`dvmHashI‹rD©a
(&
™”
);

122 
	`as£¹
(
şazz
 !ğ
NULL
);

133 
	`h´ofAddU4ToRecÜd
(
»c
, 
şazz
->
£rŸlNumb”
);

134 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_şass_objeù_id
)
şazz
);

135 
	`h´ofAddU4ToRecÜd
(
»c
, 
HPROF_NULL_STACK_TRACE
);

136 
	`h´ofAddIdToRecÜd
(
»c
, 
	`g‘P»‰yCÏssNameId
(
şazz
->
desütÜ
));

140 
	`dvmHashTabËUÆock
(
gCÏssHashTabË
);

142  
”r
;

143 
	}
}

	@vm/hprof/HprofHeap.cpp

19 
	~"H´of.h
"

25 
	#DUMP_PRIM_DATA
 1

	)

27 
	#OBJECTS_PER_SEGMENT
 ((
size_t
)128)

	)

28 
	#BYTES_PER_SEGMENT
 ((
size_t
)4096)

	)

33 
	#STATIC_OVERHEAD_NAME
 "$¡©icOv”h—d"

	)

37 
	#CLASS_STATICS_ID
(
şazz
è((
h´of_objeù_id
)(((
u4
)(şazz)è| 1))

	)

39 
	$h´ofS¹H—pDump
(
h´of_cÚ‹xt_t
 *
ùx
)

41 
	`UNUSED_PARAMETER
(
ùx
);

43 
ùx
->
objeùsInSegm’t
 = 
OBJECTS_PER_SEGMENT
;

44 
ùx
->
cu¼’tH—p
 = 
HPROF_HEAP_DEFAULT
;

46 
	}
}

48 
	$h´ofFšishH—pDump
(
h´of_cÚ‹xt_t
 *
ùx
)

50  
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_END
, 
HPROF_TIME
);

51 
	}
}

53 
	$h´ofS‘GcSÿnS‹
(
h´of_cÚ‹xt_t
 *
ùx
,

54 
h´of_h—p_g_t
 
¡©e
,

55 
u4
 
th»adS”ŸlNumb”
)

59 
ùx
->
gcSÿnS‹
 = 
¡©e
;

60 
ùx
->
gcTh»adS”ŸlNumb”
 = 
th»adS”ŸlNumb”
;

62 
	}
}

64 
h´of_basic_ty³
 
	$sigÇtu»ToBasicTy³AndSize
(cÚ¡ *
sig
,

65 
size_t
 *
sizeOut
)

67 
c
 = 
sig
[0];

68 
h´of_basic_ty³
 
»t
;

69 
size_t
 
size
;

71 
c
) {

73 'L': 
»t
 = 
h´of_basic_objeù
; 
size
 = 4; ;

74 'Z': 
»t
 = 
h´of_basic_boŞ—n
; 
size
 = 1; ;

75 'C': 
»t
 = 
h´of_basic_ch¬
; 
size
 = 2; ;

76 'F': 
»t
 = 
h´of_basic_æßt
; 
size
 = 4; ;

77 'D': 
»t
 = 
h´of_basic_doubË
; 
size
 = 8; ;

78 'B': 
»t
 = 
h´of_basic_by‹
; 
size
 = 1; ;

79 'S': 
»t
 = 
h´of_basic_shÜt
; 
size
 = 2; ;

80 : 
	`as£¹
(
çl£
);

81 'I': 
»t
 = 
h´of_basic_št
; 
size
 = 4; ;

82 'J': 
»t
 = 
h´of_basic_lÚg
; 
size
 = 8; ;

85 ià(
sizeOut
 !ğ
NULL
) {

86 *
sizeOut
 = 
size
;

89  
»t
;

90 
	}
}

92 
h´of_basic_ty³
 
	$´im™iveToBasicTy³AndSize
(
Prim™iveTy³
 
´im
,

93 
size_t
 *
sizeOut
)

95 
h´of_basic_ty³
 
»t
;

96 
size_t
 
size
;

98 
´im
) {

99 
PRIM_BOOLEAN
: 
»t
 = 
h´of_basic_boŞ—n
; 
size
 = 1; ;

100 
PRIM_CHAR
: 
»t
 = 
h´of_basic_ch¬
; 
size
 = 2; ;

101 
PRIM_FLOAT
: 
»t
 = 
h´of_basic_æßt
; 
size
 = 4; ;

102 
PRIM_DOUBLE
: 
»t
 = 
h´of_basic_doubË
; 
size
 = 8; ;

103 
PRIM_BYTE
: 
»t
 = 
h´of_basic_by‹
; 
size
 = 1; ;

104 
PRIM_SHORT
: 
»t
 = 
h´of_basic_shÜt
; 
size
 = 2; ;

105 : 
	`as£¹
(
çl£
);

106 
PRIM_INT
: 
»t
 = 
h´of_basic_št
; 
size
 = 4; ;

107 
PRIM_LONG
: 
»t
 = 
h´of_basic_lÚg
; 
size
 = 8; ;

110 ià(
sizeOut
 !ğ
NULL
) {

111 *
sizeOut
 = 
size
;

114  
»t
;

115 
	}
}

122 
	$h´ofM¬kRoÙObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
, 
jobjeù
 
jniObj
)

124 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

125 
”r
;

126 
h´of_h—p_g_t
 
h—pTag
 = (h´of_h—p_g_t)
ùx
->
gcSÿnS‹
;

128 ià(
h—pTag
 == 0) {

132 ià(
ùx
->
objeùsInSegm’t
 >ğ
OBJECTS_PER_SEGMENT
 ||

133 
»c
->
Ëngth
 >ğ
BYTES_PER_SEGMENT
)

137 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_SEGMENT
, 
HPROF_TIME
);

138 
ùx
->
objeùsInSegm’t
 = 0;

141 
h—pTag
) {

144 
HPROF_ROOT_UNKNOWN
:

145 
HPROF_ROOT_STICKY_CLASS
:

146 
HPROF_ROOT_MONITOR_USED
:

147 
HPROF_ROOT_INTERNED_STRING
:

148 
HPROF_ROOT_FINALIZING
:

149 
HPROF_ROOT_DEBUGGER
:

150 
HPROF_ROOT_REFERENCE_CLEANUP
:

151 
HPROF_ROOT_VM_INTERNAL
:

152 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

153 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

159 
HPROF_ROOT_JNI_GLOBAL
:

160 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

161 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

162 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)
jniObj
);

169 
HPROF_ROOT_JNI_LOCAL
:

170 
HPROF_ROOT_JNI_MONITOR
:

171 
HPROF_ROOT_JAVA_FRAME
:

172 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

173 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

174 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

175 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)-1);

181 
HPROF_ROOT_NATIVE_STACK
:

182 
HPROF_ROOT_THREAD_BLOCK
:

183 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

184 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

185 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

192 
HPROF_ROOT_THREAD_OBJECT
:

193 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

194 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

195 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

196 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)-1);

200 
”r
 = 0;

204 
ùx
->
objeùsInSegm’t
++;

206  
”r
;

207 
	}
}

209 
	$¡ackT¿ûS”ŸlNumb”
(cÚ¡ *
obj
)

211  
HPROF_NULL_STACK_TRACE
;

212 
	}
}

214 
	$h´ofDumpH—pObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
)

216 cÚ¡ 
CÏssObjeù
 *
şazz
;

217 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

218 
H´ofH—pId
 
desœedH—p
;

220 
desœedH—p
 = 
	`dvmIsZygÙeObjeù
(
obj
è? 
HPROF_HEAP_ZYGOTE
 : 
HPROF_HEAP_APP
;

222 ià(
ùx
->
objeùsInSegm’t
 >ğ
OBJECTS_PER_SEGMENT
 ||

223 
»c
->
Ëngth
 >ğ
BYTES_PER_SEGMENT
)

227 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_SEGMENT
, 
HPROF_TIME
);

228 
ùx
->
objeùsInSegm’t
 = 0;

232 
ùx
->
cu¼’tH—p
 = 
HPROF_HEAP_DEFAULT
;

235 ià(
desœedH—p
 !ğ
ùx
->
cu¼’tH—p
) {

236 
h´of_¡ršg_id
 
ÇmeId
;

241 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_HEAP_DUMP_INFO
);

242 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
desœedH—p
);

243 
desœedH—p
) {

244 
HPROF_HEAP_APP
:

245 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("app");

247 
HPROF_HEAP_ZYGOTE
:

248 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("zygote");

252 
	`as£¹
(!"Unexpected desiredHeap");

253 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("<ILLEGAL>");

256 
	`h´ofAddIdToRecÜd
(
»c
, 
ÇmeId
);

257 
ùx
->
cu¼’tH—p
 = 
desœedH—p
;

260 
şazz
 = 
obj
->clazz;

262 ià(
şazz
 =ğ
NULL
) {

269 ià(
	`dvmIsCÏssObjeù
(
obj
)) {

270 cÚ¡ 
CÏssObjeù
 *
thisCÏss
 = (cÚ¡ CÏssObjeù *)
obj
;

273 
sF›ldCouÁ
 = 
thisCÏss
->
sf›ldCouÁ
;

274 ià(
sF›ldCouÁ
 != 0) {

275 
by‹L’gth
 = 
sF›ldCouÁ
*(
SticF›ld
);

279 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_PRIMITIVE_ARRAY_DUMP
);

280 
	`h´ofAddIdToRecÜd
(
»c
, 
	`CLASS_STATICS_ID
(
obj
));

281 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

282 
	`h´ofAddU4ToRecÜd
(
»c
, 
by‹L’gth
);

283 
	`h´ofAddU1ToRecÜd
(
»c
, 
h´of_basic_by‹
);

284 
i
 = 0; i < 
by‹L’gth
; i++) {

285 
	`h´ofAddU1ToRecÜd
(
»c
, 0);

289 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_CLASS_DUMP
);

290 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
thisCÏss
));

291 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
thisCÏss
));

292 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
thisCÏss
->
su³r
));

293 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
thisCÏss
->
şassLßd”
);

294 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

295 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

296 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

297 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

298 ià(
obj
 =ğ(
Objeù
 *)
gDvm
.
şassJavaLªgCÏss
) {

302 
	`h´ofAddU4ToRecÜd
(
»c
, (
CÏssObjeù
));

304 
	`h´ofAddU4ToRecÜd
(
»c
, 
thisCÏss
->
objeùSize
);

307 
	`h´ofAddU2ToRecÜd
(
»c
, 0);

311 ià(
sF›ldCouÁ
 == 0) {

312 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)0);

314 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)(
sF›ldCouÁ
+1));

315 
	`h´ofAddIdToRecÜd
(
»c
,

316 
	`h´ofLookupSŒšgId
(
STATIC_OVERHEAD_NAME
));

317 
	`h´ofAddU1ToRecÜd
(
»c
, 
h´of_basic_objeù
);

318 
	`h´ofAddIdToRecÜd
(
»c
, 
	`CLASS_STATICS_ID
(
obj
));

319 
i
 = 0; i < 
sF›ldCouÁ
; i++) {

320 
h´of_basic_ty³
 
t
;

321 
size_t
 
size
;

322 cÚ¡ 
SticF›ld
 *
f
 = &
thisCÏss
->
sf›lds
[
i
];

324 
t
 = 
	`sigÇtu»ToBasicTy³AndSize
(
f
->
sigÇtu»
, &
size
);

325 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
f
->
Çme
));

326 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

327 ià(
size
 == 1) {

328 
	`h´ofAddU1ToRecÜd
(
»c
, (
u1
)
f
->
v®ue
.
b
);

329 } ià(
size
 == 2) {

330 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)
f
->
v®ue
.
c
);

331 } ià(
size
 == 4) {

332 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
f
->
v®ue
.
i
);

333 } ià(
size
 == 8) {

334 
	`h´ofAddU8ToRecÜd
(
»c
, (
u8
)
f
->
v®ue
.
j
);

336 
	`as£¹
(
çl£
);

343 
iF›ldCouÁ
 = 
thisCÏss
->
if›ldCouÁ
;

344 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)
iF›ldCouÁ
);

345 
i
 = 0; i < 
iF›ldCouÁ
; i++) {

346 cÚ¡ 
In¡F›ld
 *
f
 = &
thisCÏss
->
if›lds
[
i
];

347 
h´of_basic_ty³
 
t
;

349 
t
 = 
	`sigÇtu»ToBasicTy³AndSize
(
f
->
sigÇtu»
, 
NULL
);

350 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
f
->
Çme
));

351 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

353 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

354 cÚ¡ 
A¼ayObjeù
 *
aobj
 = (cÚ¡ A¼ayObjeù *)
obj
;

355 
u4
 
Ëngth
 = 
aobj
->length;

357 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOBJECTARRAY
)) {

360 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_OBJECT_ARRAY_DUMP
);

362 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

363 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

364 
	`h´ofAddU4ToRecÜd
(
»c
, 
Ëngth
);

365 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
şazz
));

369 
	`h´ofAddIdLi¡ToRecÜd
(
»c
,

370 (cÚ¡ 
h´of_objeù_id
 *)(*)
aobj
->
cÚ‹Ás
, 
Ëngth
);

372 
h´of_basic_ty³
 
t
;

373 
size_t
 
size
;

375 
t
 = 
	`´im™iveToBasicTy³AndSize
(
şazz
->
–em’tCÏss
->

376 
´im™iveTy³
, &
size
);

380 #ià
DUMP_PRIM_DATA


381 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_PRIMITIVE_ARRAY_DUMP
);

383 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_PRIMITIVE_ARRAY_NODATA_DUMP
);

386 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

387 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

388 
	`h´ofAddU4ToRecÜd
(
»c
, 
Ëngth
);

389 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

391 #ià
DUMP_PRIM_DATA


394 ià(
size
 == 1) {

395 
	`h´ofAddU1Li¡ToRecÜd
(
»c
, (cÚ¡ 
u1
 *)
aobj
->
cÚ‹Ás
,

396 
Ëngth
);

397 } ià(
size
 == 2) {

398 
	`h´ofAddU2Li¡ToRecÜd
(
»c
, (cÚ¡ 
u2
 *)(*)
aobj
->
cÚ‹Ás
,

399 
Ëngth
);

400 } ià(
size
 == 4) {

401 
	`h´ofAddU4Li¡ToRecÜd
(
»c
, (cÚ¡ 
u4
 *)(*)
aobj
->
cÚ‹Ás
,

402 
Ëngth
);

403 } ià(
size
 == 8) {

404 
	`h´ofAddU8Li¡ToRecÜd
(
»c
, (cÚ¡ 
u8
 *)
aobj
->
cÚ‹Ás
,

405 
Ëngth
);

410 cÚ¡ 
CÏssObjeù
 *
sşass
;

411 
size_t
 
sizeP©chOff£t
, 
§vedL’
;

415 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_INSTANCE_DUMP
);

416 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

417 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

418 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
şazz
));

424 
sizeP©chOff£t
 = 
»c
->
Ëngth
;

425 
	`h´ofAddU4ToRecÜd
(
»c
, 0x77777777);

430 
sşass
 = 
şazz
;

431 
sşass
 !ğ
NULL
) {

432 
if›ldCouÁ
 = 
sşass
->ifieldCount;

433 
i
 = 0; i < 
if›ldCouÁ
; i++) {

434 cÚ¡ 
In¡F›ld
 *
f
 = &
sşass
->
if›lds
[
i
];

435 
size_t
 
size
;

437 (è
	`sigÇtu»ToBasicTy³AndSize
(
f
->
sigÇtu»
, &
size
);

438 ià(
size
 == 1) {

439 
	`h´ofAddU1ToRecÜd
(
»c
,

440 (
u1
)
	`dvmG‘F›ldBy‹
(
obj
, 
f
->
by‹Off£t
));

441 } ià(
size
 == 2) {

442 
	`h´ofAddU2ToRecÜd
(
»c
,

443 (
u2
)
	`dvmG‘F›ldCh¬
(
obj
, 
f
->
by‹Off£t
));

444 } ià(
size
 == 4) {

445 
	`h´ofAddU4ToRecÜd
(
»c
,

446 (
u4
)
	`dvmG‘F›ldIÁ
(
obj
, 
f
->
by‹Off£t
));

447 } ià(
size
 == 8) {

448 
	`h´ofAddU8ToRecÜd
(
»c
,

449 (
u8
)
	`dvmG‘F›ldLÚg
(
obj
, 
f
->
by‹Off£t
));

451 
	`as£¹
(
çl£
);

455 
sşass
 = sşass->
su³r
;

460 
§vedL’
 = 
»c
->
Ëngth
;

461 
»c
->
Ëngth
 = 
sizeP©chOff£t
;

462 
	`h´ofAddU4ToRecÜd
(
»c
, 
§vedL’
 - (
sizeP©chOff£t
 + 4));

463 
»c
->
Ëngth
 = 
§vedL’
;

467 
ùx
->
objeùsInSegm’t
++;

470 
	}
}

	@vm/hprof/HprofOutput.cpp

16 
	~<sys/time.h
>

17 
	~<cuts/İ’_mem¡»am.h
>

18 
	~<time.h
>

19 
	~<”ºo.h
>

20 
	~"H´of.h
"

22 
	#HPROF_MAGIC_STRING
 "JAVA PROFILE 1.0.3"

	)

24 
	#U2_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

26 *
buf_
 = (*)(
buf
); \

27 
off£t_
 = ()(
off£t
); \

28 
u2
 
v®ue_
 = (u2)(
v®ue
); \

29 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 8); \

30 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 ); \

31 } 0)

	)

33 
	#U4_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

35 *
buf_
 = (*)(
buf
); \

36 
off£t_
 = ()(
off£t
); \

37 
u4
 
v®ue_
 = (u4)(
v®ue
); \

38 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 24); \

39 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 >> 16); \

40 
buf_
[
off£t_
 + 2] = ()(
v®ue_
 >> 8); \

41 
buf_
[
off£t_
 + 3] = ()(
v®ue_
 ); \

42 } 0)

	)

44 
	#U8_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

46 *
buf_
 = (*)(
buf
); \

47 
off£t_
 = ()(
off£t
); \

48 
u8
 
v®ue_
 = (u8)(
v®ue
); \

49 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 56); \

50 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 >> 48); \

51 
buf_
[
off£t_
 + 2] = ()(
v®ue_
 >> 40); \

52 
buf_
[
off£t_
 + 3] = ()(
v®ue_
 >> 32); \

53 
buf_
[
off£t_
 + 4] = ()(
v®ue_
 >> 24); \

54 
buf_
[
off£t_
 + 5] = ()(
v®ue_
 >> 16); \

55 
buf_
[
off£t_
 + 6] = ()(
v®ue_
 >> 8); \

56 
buf_
[
off£t_
 + 7] = ()(
v®ue_
 ); \

57 } 0)

	)

67 
	$h´ofCÚ‹xtIn™
(
h´of_cÚ‹xt_t
 *
ùx
, *
feName
, 
fd
,

68 
boŞ
 
wr™eH—d”
, boŞ 
dœeùToDdms
)

75 
FILE
* 
å
 = 
	`İ’_mem¡»am
(&
ùx
->
feD©aPŒ
, &ùx->
feD©aSize
);

76 ià(
å
 =ğ
NULL
) {

78 
	`ALOGE
("h´of: o³n_mem¡»am faed: %s", 
	`¡»¼Ü
(
”ºo
));

79 
	`dvmAbÜt
();

82 
ùx
->
dœeùToDdms
 = directToDdms;

83 
ùx
->
feName
 = fileName;

84 
ùx
->
memFp
 = 
å
;

85 
ùx
->
fd
 = fd;

87 
ùx
->
curRec
.
®locL’
 = 128;

88 
ùx
->
curRec
.
body
 = (*)
	`m®loc
(ùx->curRec.
®locL’
);

91 ià(
wr™eH—d”
) {

92 
magic
[] = 
HPROF_MAGIC_STRING
;

93 
buf
[4];

94 
timev®
 
now
;

95 
u8
 
nowMs
;

101 
	`fwr™e
(
magic
, 1, (magic), 
å
);

106 
	`U4_TO_BUF_BE
(
buf
, 0, (*));

107 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

111 ià(
	`g‘timeofday
(&
now
, 
NULL
) < 0) {

112 
nowMs
 = 0;

114 
nowMs
 = (
u8
)
now
.
tv_£c
 * 1000 +‚ow.
tv_u£c
 / 1000;

119 
	`U4_TO_BUF_BE
(
buf
, 0, (
u4
)(
nowMs
 >> 32));

120 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

124 
	`U4_TO_BUF_BE
(
buf
, 0, (
u4
)(
nowMs
 & 0xffffffffULL));

125 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

127 
	}
}

129 
	$h´ofFlushRecÜd
(
h´of_»cÜd_t
 *
»c
, 
FILE
 *
å
)

131 ià(
»c
->
dœty
) {

132 
h—dBuf
[ (
u1
è+ 2 *  (
u4
)];

133 
nb
;

135 
h—dBuf
[0] = 
»c
->
g
;

136 
	`U4_TO_BUF_BE
(
h—dBuf
, 1, 
»c
->
time
);

137 
	`U4_TO_BUF_BE
(
h—dBuf
, 5, 
»c
->
Ëngth
);

139 
nb
 = 
	`fwr™e
(
h—dBuf
, 1, (h—dBuf), 
å
);

140 ià(
nb
 !ğ(
h—dBuf
)) {

141  
	`UNIQUE_ERROR
();

143 
nb
 = 
	`fwr™e
(
»c
->
body
, 1,„ec->
Ëngth
, 
å
);

144 ià(
nb
 !ğ()
»c
->
Ëngth
) {

145  
	`UNIQUE_ERROR
();

148 
»c
->
dœty
 = 
çl£
;

153 
	}
}

155 
	$h´ofFlushCu¼’tRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
)

157  
	`h´ofFlushRecÜd
(&
ùx
->
curRec
, ctx->
memFp
);

158 
	}
}

160 
	$h´ofS¹NewRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
, 
u1
 
g
, 
u4
 
time
)

162 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

163 
”r
;

165 
”r
 = 
	`h´ofFlushRecÜd
(
»c
, 
ùx
->
memFp
);

166 ià(
”r
 != 0) {

167  
”r
;

168 } ià(
»c
->
dœty
) {

169  
	`UNIQUE_ERROR
();

172 
»c
->
dœty
 = 
Œue
;

173 
»c
->
g
 =ag;

174 
»c
->
time
 =ime;

175 
»c
->
Ëngth
 = 0;

178 
	}
}

180 
šlše
 
	$gu¬ª‹eRecÜdAµ’d
(
h´of_»cÜd_t
 *
»c
, 
size_t
 
nmÜe
)

182 
size_t
 
mšSize
;

184 
mšSize
 = 
»c
->
Ëngth
 + 
nmÜe
;

185 ià(
mšSize
 > 
»c
->
®locL’
) {

186 *
ÃwBody
;

187 
size_t
 
ÃwAÎocL’
;

189 
ÃwAÎocL’
 = 
»c
->
®locL’
 * 2;

190 ià(
ÃwAÎocL’
 < 
mšSize
) {

191 
ÃwAÎocL’
 = 
»c
->
®locL’
 + 
nmÜe
 +‚more/2;

193 
ÃwBody
 = (*)
	`»®loc
(
»c
->
body
, 
ÃwAÎocL’
);

194 ià(
ÃwBody
 !ğ
NULL
) {

195 
»c
->
body
 = 
ÃwBody
;

196 
»c
->
®locL’
 = 
ÃwAÎocL’
;

199  
	`UNIQUE_ERROR
();

203 
	`as£¹
(
»c
->
Ëngth
 + 
nmÜe
 <ğ»c->
®locL’
);

205 
	}
}

207 
	$h´ofAddU1Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u1
 *
v®ues
,

208 
size_t
 
numV®ues
)

210 
”r
;

212 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
);

213 ià(
”r
 != 0) {

214  
”r
;

217 
	`memıy
(
»c
->
body
 +„ec->
Ëngth
, 
v®ues
, 
numV®ues
);

218 
»c
->
Ëngth
 +ğ
numV®ues
;

221 
	}
}

223 
	$h´ofAddU1ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u1
 
v®ue
)

225 
”r
;

227 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 1);

228 ià(
”r
 != 0) {

229  
”r
;

232 
»c
->
body
[»c->
Ëngth
++] = 
v®ue
;

235 
	}
}

237 
	$h´ofAddUtf8SŒšgToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ *
¡r
)

242  
	`h´ofAddU1Li¡ToRecÜd
(
»c
, (cÚ¡ 
u1
 *)
¡r
, 
	`¡¾’
(str));

243 
	}
}

245 
	$h´ofAddU2Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u2
 *
v®ues
,

246 
size_t
 
numV®ues
)

248 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 2);

249 ià(
”r
 != 0) {

250  
”r
;

255 *
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

256 
size_t
 
i
 = 0; i < 
numV®ues
; i++) {

257 
	`U2_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

258 
š£¹
 +ğ(*
v®ues
);

260 
»c
->
Ëngth
 +ğ
numV®ues
 * 2;

263 
	}
}

265 
	$h´ofAddU2ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u2
 
v®ue
)

267  
	`h´ofAddU2Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

268 
	}
}

270 
	$h´ofAddU4Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u4
 *
v®ues
,

271 
size_t
 
numV®ues
)

273 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 4);

274 ià(
”r
 != 0) {

275  
”r
;

280 *
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

281 
size_t
 
i
 = 0; i < 
numV®ues
; i++) {

282 
	`U4_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

283 
š£¹
 +ğ(*
v®ues
);

285 
»c
->
Ëngth
 +ğ
numV®ues
 * 4;

288 
	}
}

290 
	$h´ofAddU4ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u4
 
v®ue
)

292  
	`h´ofAddU4Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

293 
	}
}

295 
	$h´ofAddU8Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u8
 *
v®ues
,

296 
size_t
 
numV®ues
)

298 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 8);

299 ià(
”r
 != 0) {

300  
”r
;

305 *
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

306 
size_t
 
i
 = 0; i < 
numV®ues
; i++) {

307 
	`U8_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

308 
š£¹
 +ğ(*
v®ues
);

310 
»c
->
Ëngth
 +ğ
numV®ues
 * 8;

313 
	}
}

315 
	$h´ofAddU8ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u8
 
v®ue
)

317  
	`h´ofAddU8Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

318 
	}
}

	@vm/hprof/HprofString.cpp

19 
	~"H´of.h
"

21 
HashTabË
 *
	ggSŒšgHashTabË
;

23 
	$h´ofS¹up_SŒšg
()

25 
gSŒšgHashTabË
 = 
	`dvmHashTabËC»©e
(512, 
ä“
);

26 ià(
gSŒšgHashTabË
 =ğ
NULL
) {

27  
	`UNIQUE_ERROR
();

30 
	}
}

32 
	$h´ofShutdown_SŒšg
()

34 
	`dvmHashTabËF»e
(
gSŒšgHashTabË
);

36 
	}
}

38 
u4
 
	$compu‹Utf8Hash
(cÚ¡ *
¡r
)

40 
u4
 
hash
 = 0;

41 cÚ¡ *
ı
;

42 
c
;

44 
ı
 = 
¡r
;

45 (
c
 = *
ı
++) != '\0') {

46 
hash
 = hash * 31 + 
c
;

49  
hash
;

50 
	}
}

52 
h´of_¡ršg_id
 
	$h´ofLookupSŒšgId
(cÚ¡ *
¡r
)

54 *
v®
;

55 
u4
 
hashV®ue
;

57 
	`dvmHashTabËLock
(
gSŒšgHashTabË
);

59 
hashV®ue
 = 
	`compu‹Utf8Hash
(
¡r
);

60 
v®
 = 
	`dvmHashTabËLookup
(
gSŒšgHashTabË
, 
hashV®ue
, (*)
¡r
,

61 (
HashCom·»Func
)
¡rcmp
, 
çl£
);

62 ià(
v®
 =ğ
NULL
) {

63 cÚ¡ *
ÃwSŒ
;

65 
ÃwSŒ
 = 
	`¡rdup
(
¡r
);

66 
v®
 = 
	`dvmHashTabËLookup
(
gSŒšgHashTabË
, 
hashV®ue
, (*)
ÃwSŒ
,

67 (
HashCom·»Func
)
¡rcmp
, 
Œue
);

68 
	`as£¹
(
v®
 !ğ
NULL
);

71 
	`dvmHashTabËUÆock
(
gSŒšgHashTabË
);

73  (
h´of_¡ršg_id
)
v®
;

74 
	}
}

76 
	$h´ofDumpSŒšgs
(
h´of_cÚ‹xt_t
 *
ùx
)

78 
HashI‹r
 
™”
;

79 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

80 
”r
;

82 
	`dvmHashTabËLock
(
gSŒšgHashTabË
);

84 
”r
 = 0, 
	`dvmHashI‹rBegš
(
gSŒšgHashTabË
, &
™”
);

85 
”r
 =ğ0 && !
	`dvmHashI‹rDÚe
(&
™”
);

86 
	`dvmHashI‹rNext
(&
™”
))

88 
”r
 = 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_STRING
, 
HPROF_TIME
);

89 ià(
”r
 == 0) {

90 cÚ¡ *
¡r
;

92 
¡r
 = (cÚ¡ *)
	`dvmHashI‹rD©a
(&
™”
);

93 
	`as£¹
(
¡r
 !ğ
NULL
);

103 
”r
 = 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
¡r
);

104 ià(
”r
 == 0) {

105 
”r
 = 
	`h´ofAddUtf8SŒšgToRecÜd
(
»c
, 
¡r
);

110 
	`dvmHashTabËUÆock
(
gSŒšgHashTabË
);

112  
”r
;

113 
	}
}

	@vm/interp/Interp.cpp

26 
	~"D®vik.h
"

27 
	~"š‹½/IÁ”pDefs.h
"

28 #ià
defšed
(
WITH_JIT
)

29 
	~"š‹½/J™.h
"

40 
B»akpoštS‘
* 
dvmB»akpoštS‘AÎoc
();

41 
dvmB»akpoštS‘F»e
(
B»akpoštS‘
* 
pS‘
);

43 #ià
defšed
(
WITH_JIT
)

45 "C" 
dvmJ™C®ËeSave
(*
§veA»a
);

46 "C" 
dvmJ™C®ËeRe¡Üe
(*
§veA»a
);

48 "C" 
dvmJ™ToIÁ”pNÜm®
();

49 "C" 
dvmJ™ToIÁ”pNoChaš
();

50 "C" 
dvmJ™ToIÁ”pPuÁ
();

51 "C" 
dvmJ™ToIÁ”pSšgËS‹p
();

52 "C" 
dvmJ™ToIÁ”pT¿ûS–eù
();

53 #ià
defšed
(
WITH_SELF_VERIFICATION
)

54 "C" 
dvmJ™ToIÁ”pBackw¬dB¿nch
();

61 
boŞ
 
	$dvmB»akpoštS¹up
()

63 
gDvm
.
b»akpoštS‘
 = 
	`dvmB»akpoštS‘AÎoc
();

64  (
gDvm
.
b»akpoštS‘
 !ğ
NULL
);

65 
	}
}

70 
	$dvmB»akpoštShutdown
()

72 
	`dvmB»akpoštS‘F»e
(
gDvm
.
b»akpoštS‘
);

73 
	}
}

82 
	sB»akpošt
 {

83 
M‘hod
* 
	mm‘hod
;

84 
u2
* 
	maddr
;

85 
u1
 
	mÜigš®Opcode
;

86 
	m£tCouÁ
;

92 
	sB»akpoštS‘
 {

94 
±h»ad_mu‹x_t
 
	mlock
;

97 
	m®loc
;

98 
	mcouÁ
;

99 
B»akpošt
* 
	mb»akpošts
;

105 
B»akpoštS‘
* 
	$dvmB»akpoštS‘AÎoc
()

107 
B»akpoštS‘
* 
pS‘
 = (B»akpoštS‘*è
	`ÿÎoc
(1, (*pSet));

109 
	`dvmIn™Mu‹x
(&
pS‘
->
lock
);

112  
pS‘
;

113 
	}
}

118 
	$dvmB»akpoštS‘F»e
(
B»akpoštS‘
* 
pS‘
)

120 ià(
pS‘
 =ğ
NULL
)

123 
	`ä“
(
pS‘
->
b»akpošts
);

124 
	`ä“
(
pS‘
);

125 
	}
}

135 
	$dvmB»akpoštS‘Lock
(
B»akpoštS‘
* 
pS‘
)

137 ià(
	`dvmTryLockMu‹x
(&
pS‘
->
lock
) != 0) {

138 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

139 
Th»adStus
 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

140 
	`dvmLockMu‹x
(&
pS‘
->
lock
);

141 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

143 
	}
}

148 
	$dvmB»akpoštS‘UÆock
(
B»akpoštS‘
* 
pS‘
)

150 
	`dvmUÆockMu‹x
(&
pS‘
->
lock
);

151 
	}
}

156 
	$dvmB»akpoštS‘CouÁ
(cÚ¡ 
B»akpoštS‘
* 
pS‘
)

158  
pS‘
->
couÁ
;

159 
	}
}

168 
	$dvmB»akpoštS‘Fšd
(cÚ¡ 
B»akpoštS‘
* 
pS‘
, cÚ¡ 
u2
* 
addr
)

170 
i
;

172 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

173 
B»akpošt
* 
pB»ak
 = &
pS‘
->
b»akpošts
[
i
];

174 ià(
pB»ak
->
addr
 ==‡ddr)

175  
i
;

179 
	}
}

188 
boŞ
 
	$dvmB»akpoštS‘Origš®Opcode
(cÚ¡ 
B»akpoštS‘
* 
pS‘
,

189 cÚ¡ 
u2
* 
addr
, 
u1
* 
pOrig
)

191 
idx
 = 
	`dvmB»akpoštS‘Fšd
(
pS‘
, 
addr
);

192 ià(
idx
 < 0)

193  
çl£
;

195 *
pOrig
 = 
pS‘
->
b»akpošts
[
idx
].
Üigš®Opcode
;

196  
Œue
;

197 
	}
}

216 
boŞ
 
	$š¡ruùiÚIsMagicNİ
(cÚ¡ 
u2
* 
addr
)

218 
u2
 
curV®
 = *
addr
;

219  ((
	`GET_OPCODE
(
curV®
)è=ğ
OP_NOP
 && (curVal >> 8) != 0);

220 
	}
}

233 
boŞ
 
	$dvmB»akpoštS‘Add
(
B»akpoštS‘
* 
pS‘
, 
M‘hod
* 
m‘hod
,

234 
š¡rOff£t
)

236 cÚ¡ 
kB»akpoštGrowth
 = 10;

237 cÚ¡ 
u2
* 
addr
 = 
m‘hod
->
š¢s
 + 
š¡rOff£t
;

238 
idx
 = 
	`dvmB»akpoštS‘Fšd
(
pS‘
, 
addr
);

239 
B»akpošt
* 
pB»ak
;

241 ià(
idx
 < 0) {

242 ià(
pS‘
->
couÁ
 =ğpS‘->
®loc
) {

243 
ÃwSize
 = 
pS‘
->
®loc
 + 
kB»akpoštGrowth
;

244 
B»akpošt
* 
ÃwVec
;

246 
	`ALOGV
("+++ inü—sšg b»akpošˆ£ˆsiztØ%d", 
ÃwSize
);

249 
ÃwVec
 = (
B»akpošt
*)
	`»®loc
(
pS‘
->
b»akpošts
, 
ÃwSize
 * (Breakpoint));

250 ià(
ÃwVec
 =ğ
NULL
)

251  
çl£
;

253 
pS‘
->
b»akpošts
 = 
ÃwVec
;

254 
pS‘
->
®loc
 = 
ÃwSize
;

257 
pB»ak
 = &
pS‘
->
b»akpošts
[pS‘->
couÁ
++];

258 
pB»ak
->
m‘hod
 = method;

259 
pB»ak
->
addr
 = (
u2
*)addr;

260 
pB»ak
->
Üigš®Opcode
 = *(
u1
*)
addr
;

261 
pB»ak
->
£tCouÁ
 = 1;

276 
	`as£¹
(*(
u1
*)
addr
 !ğ
OP_BREAKPOINT
);

277 ià(
	`dvmIsCÏssV”if›d
(
m‘hod
->
şazz
)) {

278 
	`ALOGV
("Class %s verified,‡dding breakpoint‡t %p",

279 
m‘hod
->
şazz
->
desütÜ
, 
addr
);

280 ià(
	`š¡ruùiÚIsMagicNİ
(
addr
)) {

281 
	`ALOGV
("Refusingo set breakpoint on %04x‡t %s.%s + %#x",

282 *
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

283 
š¡rOff£t
);

285 
	`ANDROID_MEMBAR_FULL
();

286 
	`dvmDexChªgeDex1
(
m‘hod
->
şazz
->
pDvmDex
, (
u1
*)
addr
,

287 
OP_BREAKPOINT
);

290 
	`ALOGV
("Class %s NOT verified, deferring breakpoint‡t %p",

291 
m‘hod
->
şazz
->
desütÜ
, 
addr
);

297 
pB»ak
 = &
pS‘
->
b»akpošts
[
idx
];

298 
pB»ak
->
£tCouÁ
++;

301  
Œue
;

302 
	}
}

311 
	$dvmB»akpoštS‘Remove
(
B»akpoštS‘
* 
pS‘
, 
M‘hod
* 
m‘hod
,

312 
š¡rOff£t
)

314 cÚ¡ 
u2
* 
addr
 = 
m‘hod
->
š¢s
 + 
š¡rOff£t
;

315 
idx
 = 
	`dvmB»akpoštS‘Fšd
(
pS‘
, 
addr
);

317 ià(
idx
 < 0) {

319 ià(*(
u1
*)
addr
 =ğ
OP_BREAKPOINT
) {

320 
	`ALOGE
("Unableo„estore breakpoint opcode (%s.%s +%#x)",

321 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
š¡rOff£t
);

322 
	`dvmAbÜt
();

324 
	`ALOGW
("Breakpoint was‡lready„estored? (%s.%s +%#x)",

325 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
š¡rOff£t
);

328 
B»akpošt
* 
pB»ak
 = &
pS‘
->
b»akpošts
[
idx
];

329 ià(
pB»ak
->
£tCouÁ
 == 1) {

338 
	`dvmDexChªgeDex1
(
m‘hod
->
şazz
->
pDvmDex
, (
u1
*)
addr
,

339 
pB»ak
->
Üigš®Opcode
);

340 
	`ANDROID_MEMBAR_FULL
();

342 ià(
idx
 !ğ
pS‘
->
couÁ
-1) {

344 
	`memmove
(&
pS‘
->
b»akpošts
[
idx
], &pSet->breakpoints[idx+1],

345 (
pS‘
->
couÁ
-1 - 
idx
è* ÕS‘->
b»akpošts
[0]));

347 
pS‘
->
couÁ
--;

348 
pS‘
->
b»akpošts
[pS‘->
couÁ
].
addr
 = (
u2
*) 0xdecadead;

350 
pB»ak
->
£tCouÁ
--;

351 
	`as£¹
(
pB»ak
->
£tCouÁ
 > 0);

354 
	}
}

364 
	$dvmB»akpoštS‘Flush
(
B»akpoštS‘
* 
pS‘
, 
CÏssObjeù
* 
şazz
)

366 
i
;

367 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

368 
B»akpošt
* 
pB»ak
 = &
pS‘
->
b»akpošts
[
i
];

369 ià(
pB»ak
->
m‘hod
->
şazz
 == clazz) {

375 
	`ALOGV
("Flushing breakpoint‡t %p for %s",

376 
pB»ak
->
addr
, 
şazz
->
desütÜ
);

377 ià(
	`š¡ruùiÚIsMagicNİ
(
pB»ak
->
addr
)) {

378 
	`ALOGV
("Refusingo flush breakpoint on %04x‡t %s.%s + %#x",

379 *
pB»ak
->
addr
,…B»ak->
m‘hod
->
şazz
->
desütÜ
,

380 
pB»ak
->
m‘hod
->
Çme
,…B»ak->
addr
 -…B»ak->m‘hod->
š¢s
);

382 
	`dvmDexChªgeDex1
(
şazz
->
pDvmDex
, (
u1
*)
pB»ak
->
addr
,

383 
OP_BREAKPOINT
);

387 
	}
}

393 
	$dvmIn™B»akpošts
()

396 
B»akpoštS‘
* 
pS‘
 = 
gDvm
.
b»akpoštS‘
;

397 
	`dvmB»akpoštS‘Lock
(
pS‘
);

398 ià(
	`dvmB»akpoštS‘CouÁ
(
pS‘
) != 0) {

399 
	`ALOGW
("WARNING: %d†eáov” b»akpošts", 
	`dvmB»akpoštS‘CouÁ
(
pS‘
));

402 
	`dvmB»akpoštS‘UÆock
(
pS‘
);

403 
	}
}

419 
	$dvmAddB»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
)

421 
B»akpoštS‘
* 
pS‘
 = 
gDvm
.
b»akpoštS‘
;

422 
	`dvmB»akpoštS‘Lock
(
pS‘
);

423 
	`dvmB»akpoštS‘Add
(
pS‘
, 
m‘hod
, 
š¡rOff£t
);

424 
	`dvmB»akpoštS‘UÆock
(
pS‘
);

425 
	}
}

437 
	$dvmCË¬B»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
)

439 
B»akpoštS‘
* 
pS‘
 = 
gDvm
.
b»akpoštS‘
;

440 
	`dvmB»akpoštS‘Lock
(
pS‘
);

441 
	`dvmB»akpoštS‘Remove
(
pS‘
, 
m‘hod
, 
š¡rOff£t
);

442 
	`dvmB»akpoštS‘UÆock
(
pS‘
);

443 
	}
}

456 
u1
 
	$dvmG‘Origš®Opcode
(cÚ¡ 
u2
* 
addr
)

458 
B»akpoštS‘
* 
pS‘
 = 
gDvm
.
b»akpoštS‘
;

459 
u1
 
Üig
 = 0;

461 
	`dvmB»akpoštS‘Lock
(
pS‘
);

462 ià(!
	`dvmB»akpoštS‘Origš®Opcode
(
pS‘
, 
addr
, &
Üig
)) {

463 
Üig
 = *(
u1
*)
addr
;

464 ià(
Üig
 =ğ
OP_BREAKPOINT
) {

465 
	`ALOGE
("GLITCH: can't find breakpoint, opcode is still set");

466 
	`dvmAbÜt
();

469 
	`dvmB»akpoštS‘UÆock
(
pS‘
);

471  
Üig
;

472 
	}
}

481 
	$dvmFlushB»akpošts
(
CÏssObjeù
* 
şazz
)

483 
B»akpoštS‘
* 
pS‘
 = 
gDvm
.
b»akpoštS‘
;

485 ià(
pS‘
 =ğ
NULL
)

488 
	`as£¹
(
	`dvmIsCÏssV”if›d
(
şazz
));

489 
	`dvmB»akpoštS‘Lock
(
pS‘
);

490 
	`dvmB»akpoštS‘Flush
(
pS‘
, 
şazz
);

491 
	`dvmB»akpoštS‘UÆock
(
pS‘
);

492 
	}
}

503 
boŞ
 
	$dvmAddSšgËS‹p
(
Th»ad
* 
th»ad
, 
size
, 
d•th
)

505 
S‹pCÚŒŞ
* 
pCŒl
 = &
gDvm
.
¡•CÚŒŞ
;

507 ià(
pCŒl
->
aùive
 && 
th»ad
 !=…Ctrl->thread) {

508 
	`ALOGW
("WARNING: single-step‡ctive for %p;‡dding %p",

509 
pCŒl
->
th»ad
,hread);

522 
pCŒl
->
size
 = 
¡©ic_ÿ¡
<
JdwpS‹pSize
>(size);

523 
pCŒl
->
d•th
 = 
¡©ic_ÿ¡
<
JdwpS‹pD•th
>(depth);

524 
pCŒl
->
th»ad
 =hread;

539 cÚ¡ 
SckSaveA»a
* 
§veA»a
;

540 
u4
* 
å
;

541 
u4
* 
´evFp
 = 
NULL
;

543 
å
 = 
th»ad
->
š‹½Save
.
curF¿me
; f°!ğ
NULL
;

544 
å
 = 
§veA»a
->
´evF¿me
) {

545 cÚ¡ 
M‘hod
* 
m‘hod
;

547 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

548 
m‘hod
 = 
§veA»a
->method;

550 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
è&& !
	`dvmIsN©iveM‘hod
(
m‘hod
))

552 
´evFp
 = 
å
;

554 ià(
å
 =ğ
NULL
) {

555 
	`ALOGW
("Unexpected: step„eq in‚ative-onlyhreadid=%d",

556 
th»ad
->
th»adId
);

557  
çl£
;

559 ià(
´evFp
 !ğ
NULL
) {

565 
	`ALOGV
("##### init step while in‚ative method");

566 
å
 = 
´evFp
;

567 
	`as£¹
(!
	`dvmIsB»akF¿me
((
u4
*)
å
));

568 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
));

569 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

576 
pCŒl
->
m‘hod
 = 
§veA»a
->method;

578 ià(
pCŒl
->
pAdd»ssS‘
 !ğ
NULL
) {

580 
	`ä“
((*)
pCŒl
->
pAdd»ssS‘
);

581 
pCŒl
->
pAdd»ssS‘
 = 
NULL
;

583 ià(
	`dvmIsN©iveM‘hod
(
pCŒl
->
m‘hod
)) {

584 
pCŒl
->
lše
 = -1;

586 
pCŒl
->
lše
 = 
	`dvmLšeNumFromPC
(
§veA»a
->
m‘hod
,

587 
§veA»a
->
xŒa
.
cu¼’tPc
 - saveA»a->
m‘hod
->
š¢s
);

588 
pCŒl
->
pAdd»ssS‘


589 ğ
	`dvmAdd»ssS‘FÜLše
(
§veA»a
->
m‘hod
, 
pCŒl
->
lše
);

591 
pCŒl
->
äameD•th
 =

592 
	`dvmCompu‹VagueF¿meD•th
(
th»ad
,h»ad->
š‹½Save
.
curF¿me
);

593 
pCŒl
->
aùive
 = 
Œue
;

595 
	`ALOGV
("##### step init:hread=%p meth=%p '%s'†ine=%d frameDepth=%d depth=%s size=%s",

596 
pCŒl
->
th»ad
,…CŒl->
m‘hod
,…CŒl->m‘hod->
Çme
,

597 
pCŒl
->
lše
,…CŒl->
äameD•th
,

598 
	`dvmJdwpS‹pD•thSŒ
(
pCŒl
->
d•th
),

599 
	`dvmJdwpS‹pSizeSŒ
(
pCŒl
->
size
));

601  
Œue
;

602 
	}
}

607 
	$dvmCË¬SšgËS‹p
(
Th»ad
* 
th»ad
)

609 
	`UNUSED_PARAMETER
(
th»ad
);

611 
gDvm
.
¡•CÚŒŞ
.
aùive
 = 
çl£
;

612 
	}
}

618 
	$dvmR•ÜtExû±iÚThrow
(
Th»ad
* 
£lf
, 
Objeù
* 
exû±iÚ
)

620 cÚ¡ 
M‘hod
* 
curM‘hod
 = 
£lf
->
š‹½Save
.
m‘hod
;

621 #ià
	`defšed
(
WITH_JIT
)

622 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) {

623 
	`dvmJ™EndT¿ûS–eù
(
£lf
, s–f->
š‹½Save
.
pc
);

625 ià(
£lf
->
š‹½B»ak
.
ùl
.
b»akFÏgs
 & 
kIÁ”pSšgËS‹p
) {

627 
£lf
->
j™ResumeNPC
 = 
NULL
;

630 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

631 *
ÿtchF¿me
;

632 
off£t
 = 
£lf
->
š‹½Save
.
pc
 - 
curM‘hod
->
š¢s
;

633 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
off£t
, 
exû±iÚ
,

634 
Œue
, &
ÿtchF¿me
);

635 
	`dvmDbgPo¡Exû±iÚ
(
£lf
->
š‹½Save
.
curF¿me
, 
off£t
, 
ÿtchF¿me
,

636 
ÿtchR–Pc
, 
exû±iÚ
);

638 
	}
}

645 
	$dvmR•ÜtInvoke
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
)

647 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

648 
	}
}

657 
	$dvmR•ÜtP»N©iveInvoke
(cÚ¡ 
M‘hod
* 
m‘hodToC®l
, 
Th»ad
* 
£lf
, 
u4
* 
å
)

659 #ià
	`defšed
(
WITH_JIT
)

664 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) {

665 
	`dvmCheckJ™
(
£lf
->
š‹½Save
.
pc
, self);

668 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

669 
Objeù
* 
thisPŒ
 = 
	`dvmG‘ThisPŒ
(
£lf
->
š‹½Save
.
m‘hod
, 
å
);

670 
	`as£¹
(
thisPŒ
 =ğ
NULL
 || 
	`dvmIsH—pAdd»ss
(thisPtr));

671 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1, 
thisPŒ
, 
DBG_METHOD_ENTRY
);

673 
	}
}

680 
	$dvmR•ÜtPo¡N©iveInvoke
(cÚ¡ 
M‘hod
* 
m‘hodToC®l
, 
Th»ad
* 
£lf
, 
u4
* 
å
)

682 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

683 
Objeù
* 
thisPŒ
 = 
	`dvmG‘ThisPŒ
(
£lf
->
š‹½Save
.
m‘hod
, 
å
);

684 
	`as£¹
(
thisPŒ
 =ğ
NULL
 || 
	`dvmIsH—pAdd»ss
(thisPtr));

685 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1, 
thisPŒ
, 
DBG_METHOD_EXIT
);

687 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeM‘hodT¿û
) {

688 
	`dvmFa¡N©iveM‘hodT¿ûEx™
(
m‘hodToC®l
, 
£lf
);

690 
	}
}

696 
	$dvmR•ÜtR‘uº
(
Th»ad
* 
£lf
)

698 
	`TRACE_METHOD_EXIT
(
£lf
, s–f->
š‹½Save
.
m‘hod
);

699 #ià
	`defšed
(
WITH_JIT
)

700 ià(
	`dvmIsB»akF¿me
(
£lf
->
š‹½Save
.
curF¿me
) &&

701 (
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
)) {

702 
	`dvmCheckJ™
(
£lf
->
š‹½Save
.
pc
, self);

705 
	}
}

731 
	$upd©eDebugg”
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
,

732 
Th»ad
* 
£lf
)

734 
ev’tFÏgs
 = 0;

743 
	`dvmExpÜtPC
(
pc
, 
å
);

745 ià(
£lf
->
debugIsM‘hodEÁry
) {

746 
ev’tFÏgs
 |ğ
DBG_METHOD_ENTRY
;

747 
£lf
->
debugIsM‘hodEÁry
 = 
çl£
;

756 ià(
	`GET_OPCODE
(*
pc
è=ğ
OP_BREAKPOINT
) {

757 
	`ALOGV
("+++ b»akpošˆh™‡ˆ%p", 
pc
);

758 
ev’tFÏgs
 |ğ
DBG_BREAKPOINT
;

765 cÚ¡ 
S‹pCÚŒŞ
* 
pCŒl
 = &
gDvm
.
¡•CÚŒŞ
;

766 ià(
pCŒl
->
aùive
 &&…CŒl->
th»ad
 =ğ
£lf
) {

767 
äameD•th
;

768 
boŞ
 
doStİ
 = 
çl£
;

769 cÚ¡ * 
msg
 = 
NULL
;

771 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

773 ià(
pCŒl
->
d•th
 =ğ
SD_INTO
) {

779 ià(
pCŒl
->
m‘hod
 != method) {

780 
doStİ
 = 
Œue
;

781 
msg
 = "new method";

782 } ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

783 
doStİ
 = 
Œue
;

784 
msg
 = "new instruction";

785 } ià(!
	`dvmAdd»ssS‘G‘
(

786 
pCŒl
->
pAdd»ssS‘
, 
pc
 - 
m‘hod
->
š¢s
)) {

787 
doStİ
 = 
Œue
;

788 
msg
 = "new†ine";

790 } ià(
pCŒl
->
d•th
 =ğ
SD_OVER
) {

798 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

799 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

801 
doStİ
 = 
Œue
;

802 
msg
 = "method…op";

803 } ià(
äameD•th
 =ğ
pCŒl
->frameDepth) {

805 ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

806 
doStİ
 = 
Œue
;

807 
msg
 = "new instruction";

808 } ià(!
	`dvmAdd»ssS‘G‘
(
pCŒl
->
pAdd»ssS‘
,

809 
pc
 - 
m‘hod
->
š¢s
)) {

810 
doStİ
 = 
Œue
;

811 
msg
 = "new†ine";

815 
	`as£¹
(
pCŒl
->
d•th
 =ğ
SD_OUT
);

824 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

825 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

826 
doStİ
 = 
Œue
;

827 
msg
 = "method…op";

831 ià(
doStİ
) {

832 
	`ALOGV
("#####S %s", 
msg
);

833 
ev’tFÏgs
 |ğ
DBG_SINGLE_STEP
;

848 
u2
 
İcode
 = 
	`GET_OPCODE
(*
pc
);

849 ià(
İcode
 =ğ
OP_RETURN_VOID
 || opcod=ğ
OP_RETURN
 ||

850 
İcode
 =ğ
OP_RETURN_WIDE
 ||İcod=ğ
OP_RETURN_OBJECT
)

852 
ev’tFÏgs
 |ğ
DBG_METHOD_EXIT
;

859 ià(
ev’tFÏgs
 != 0) {

860 
Objeù
* 
thisPŒ
 = 
	`dvmG‘ThisPŒ
(
m‘hod
, 
å
);

861 ià(
thisPŒ
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(thisPtr)) {

867 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

868 
	`ALOGE
("HEY: inv®id 'this'…Œ %°(%s.% %s)", 
thisPŒ
,

869 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

870 
	`ä“
(
desc
);

871 
	`dvmAbÜt
();

873 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hod
, 
pc
 - m‘hod->
š¢s
, 
thisPŒ
,

874 
ev’tFÏgs
);

876 
	}
}

895 
Objeù
* 
	$dvmG‘ThisPŒ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
å
)

897 ià(
	`dvmIsSticM‘hod
(
m‘hod
))

898  
NULL
;

899  (
Objeù
*)
å
[
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
];

900 
	}
}

903 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

911 
	$dvmIÁ”pCheckT¿ckedRefs
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
,

912 
debugT¿ckedRefS¹
)

914 ià(
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
)

915 !ğ(
size_t
è
debugT¿ckedRefS¹
)

917 * 
desc
;

918 
Objeù
** 
tİ
;

919 
couÁ
;

921 
couÁ
 = 
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
);

923 
	`ALOGE
("TRACK: unreleased internal„eference (prev=%dotal=%d)",

924 
debugT¿ckedRefS¹
, 
couÁ
);

925 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

926 
	`ALOGE
(" cu¼’ˆm‘hod i %s.% %s", 
m‘hod
->
şazz
->
desütÜ
,

927 
m‘hod
->
Çme
, 
desc
);

928 
	`ä“
(
desc
);

929 
tİ
 = 
£lf
->
š‹º®LoÿlRefTabË
.
bË
 + 
debugT¿ckedRefS¹
;

930 
tİ
 < 
£lf
->
š‹º®LoÿlRefTabË
.
ÃxtEÁry
) {

931 
	`ALOGE
(" %p (%s)",

932 *
tİ
,

933 ((*
tİ
)->
şazz
 !ğ
NULL
è? (*tİ)->şazz->
desütÜ
 : "");

934 
tİ
++;

936 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

938 
	`dvmAbÜt
();

941 
	}
}

945 #ifdeà
LOG_INSTR


949 
	$dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
)

951 
i
, 
loÿlCouÁ
;

953 
loÿlCouÁ
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

955 
	`ALOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", "Regi¡” (å=%p):", 
äamePŒ
);

956 
i
 = 
m‘hod
->
»gi¡”sSize
-1; i >= 0; i--) {

957 ià(
i
 >ğ
loÿlCouÁ
) {

958 
	`ALOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " v%-2d in%-2d : 0x%08x",

959 
i
, i-
loÿlCouÁ
, 
äamePŒ
[i]);

961 ià(
šOÆy
) {

962 
	`ALOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " [...]");

965 cÚ¡ * 
Çme
 = "";

967 
j
;

968 
DexFe
* 
pDexFe
 = 
m‘hod
->
şazz
->pDexFile;

969 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

970 
loÿlsSize
 = 
	`dexG‘LoÿlsSize
(
pDexFe
, 
pDexCode
);

971 cÚ¡ 
DexLoÿl
* 
loÿls
 = 
	`dvmDexG‘Loÿls
(
pDexFe
, 
pDexCode
);

972 
j
 = 0; j < 
loÿlsSize
, j++) {

973 ià(
loÿls
[
j
].
»gi¡”Num
 =ğ(
u4
è
i
) {

974 
Çme
 = 
	`dvmDexSŒšgSŒ
(
loÿls
[
j
].
pName
);

979 
	`ALOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " v%-2d : 0x%08x %s",

980 
i
, 
äamePŒ
[i], 
Çme
);

983 
	}
}

1000 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


1001 
šlše
 
s4
 
	$s4FromSw™chD©a
(cÚ¡ * 
sw™chD©a
) {

1002  *(
s4
*è
sw™chD©a
;

1003 
	}
}

1005 
šlše
 
s4
 
	$s4FromSw™chD©a
(cÚ¡ * 
sw™chD©a
) {

1006 
u2
* 
d©a
 = 
sw™chD©a
;

1007  
d©a
[0] | (((
s4
) data[1]) << 16);

1008 
	}
}

1017 
s4
 
	$dvmIÁ”pHªdËPackedSw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, 
s4
 
‹¡V®
)

1019 cÚ¡ 
kIn¡rL’
 = 3;

1020 
u2
 
size
;

1021 
s4
 
fœ¡Key
;

1022 cÚ¡ 
s4
* 
’Œ›s
;

1033 ià(*
sw™chD©a
++ !ğ
kPackedSw™chSigÇtu»
) {

1035 
	`dvmThrowIÁ”ÇlE¼Ü
("bad…acked switch magic");

1036  
kIn¡rL’
;

1039 
size
 = *
sw™chD©a
++;

1040 
	`as£¹
(
size
 > 0);

1042 
fœ¡Key
 = *
sw™chD©a
++;

1043 
fœ¡Key
 |ğ(*
sw™chD©a
++) << 16;

1045 ià(
‹¡V®
 < 
fœ¡Key
 ||e¡V® >ğfœ¡Key + 
size
) {

1046 
	`LOGVV
("Value %d‚ot found in switch (%d-%d)",

1047 
‹¡V®
, 
fœ¡Key
, fœ¡Key+
size
-1);

1048  
kIn¡rL’
;

1054 
’Œ›s
 = (cÚ¡ 
s4
*è
sw™chD©a
;

1055 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

1057 
	`as£¹
(
‹¡V®
 - 
fœ¡Key
 >ğ0 &&e¡V® - fœ¡Key < 
size
);

1058 
	`LOGVV
("Value %d found in slot %d (goto 0x%02x)",

1059 
‹¡V®
,e¡V® - 
fœ¡Key
,

1060 
	`s4FromSw™chD©a
(&
’Œ›s
[
‹¡V®
 - 
fœ¡Key
]));

1061  
	`s4FromSw™chD©a
(&
’Œ›s
[
‹¡V®
 - 
fœ¡Key
]);

1062 
	}
}

1070 
s4
 
	$dvmIÁ”pHªdËS·r£Sw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, 
s4
 
‹¡V®
)

1072 cÚ¡ 
kIn¡rL’
 = 3;

1073 
u2
 
size
;

1074 cÚ¡ 
s4
* 
keys
;

1075 cÚ¡ 
s4
* 
’Œ›s
;

1087 ià(*
sw™chD©a
++ !ğ
kS·r£Sw™chSigÇtu»
) {

1089 
	`dvmThrowIÁ”ÇlE¼Ü
("bad sparse switch magic");

1090  
kIn¡rL’
;

1093 
size
 = *
sw™chD©a
++;

1094 
	`as£¹
(
size
 > 0);

1099 
keys
 = (cÚ¡ 
s4
*è
sw™chD©a
;

1100 
	`as£¹
(((
u4
)
keys
 & 0x3) == 0);

1105 
’Œ›s
 = 
keys
 + 
size
;

1106 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

1112 
lo
 = 0;

1113 
hi
 = 
size
 - 1;

1114 
lo
 <ğ
hi
) {

1115 
mid
 = (
lo
 + 
hi
) >> 1;

1117 
s4
 
foundV®
 = 
	`s4FromSw™chD©a
(&
keys
[
mid
]);

1118 ià(
‹¡V®
 < 
foundV®
) {

1119 
hi
 = 
mid
 - 1;

1120 } ià(
‹¡V®
 > 
foundV®
) {

1121 
lo
 = 
mid
 + 1;

1123 
	`LOGVV
("Value %d found inƒntry %d (goto 0x%02x)",

1124 
‹¡V®
, 
mid
, 
	`s4FromSw™chD©a
(&
’Œ›s
[mid]));

1125  
	`s4FromSw™chD©a
(&
’Œ›s
[
mid
]);

1129 
	`LOGVV
("V®u%d‚Ù found iÀsw™ch", 
‹¡V®
);

1130  
kIn¡rL’
;

1131 
	}
}

1142 
	$cİySw­³dA¼ayD©a
(* 
de¡
, cÚ¡ 
u2
* 
¤c
, 
u4
 
size
, u2 
width
)

1144 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


1145 
	`memıy
(
de¡
, 
¤c
, 
size
*
width
);

1147 
i
;

1149 
width
) {

1152 
i
 = (
size
-1) & ~1; i >= 0; i -= 2) {

1153 ((
u1
*)
de¡
)[
i
] = ((u1*)
¤c
)[i+1];

1154 ((
u1
*)
de¡
)[
i
+1] = ((u1*)
¤c
)[i];

1160 ià((
size
 & 1) != 0) {

1161 ((
u1
*)
de¡
)[
size
-1] = ((u1*)
¤c
)[size];

1166 
	`memıy
(
de¡
, 
¤c
, 
size
*
width
);

1170 
i
 = 0; i < (è
size
; i++) {

1171 ((
u4
*)
de¡
)[
i
] = (
¤c
[(i << 1) + 1] << 16) | src[i << 1];

1176 
i
 = 0; i < (è(
size
 << 1); i += 2) {

1177 ((*)
de¡
)[
i
] = (
¤c
[(i << 1) + 3] << 16) | src[(i << 1) + 2];

1178 ((*)
de¡
)[
i
+1] = (
¤c
[(i << 1) + 1] << 16) | src[i << 1];

1182 
	`ALOGE
("UÃx³ùed width %d iÀcİySw­³dA¼ayD©a", 
width
);

1183 
	`dvmAbÜt
();

1187 
	}
}

1195 
boŞ
 
	$dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObj
, cÚ¡ 
u2
* 
¬¿yD©a
)

1197 
u2
 
width
;

1198 
u4
 
size
;

1200 ià(
¬¿yObj
 =ğ
NULL
) {

1201 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

1202  
çl£
;

1204 
	`as£¹
 (!
	`IS_CLASS_FLAG_SET
(((
Objeù
 *)
¬¿yObj
)->
şazz
,

1205 
CLASS_ISOBJECTARRAY
));

1217 ià(
¬¿yD©a
[0] !ğ
kA¼ayD©aSigÇtu»
) {

1218 
	`dvmThrowIÁ”ÇlE¼Ü
("bad‡rray data magic");

1219  
çl£
;

1222 
width
 = 
¬¿yD©a
[1];

1223 
size
 = 
¬¿yD©a
[2] | (((
u4
)arrayData[3]) << 16);

1225 ià(
size
 > 
¬¿yObj
->
Ëngth
) {

1226 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(
¬¿yObj
->
Ëngth
, 
size
);

1227  
çl£
;

1229 
	`cİySw­³dA¼ayD©a
(
¬¿yObj
->
cÚ‹Ás
, &
¬¿yD©a
[4], 
size
, 
width
);

1230  
Œue
;

1231 
	}
}

1239 
M‘hod
* 
	$dvmIÁ”pFšdIÁ”çûM‘hod
(
CÏssObjeù
* 
thisCÏss
, 
u4
 
m‘hodIdx
,

1240 cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
)

1242 
M‘hod
* 
absM‘hod
;

1243 
M‘hod
* 
m‘hodToC®l
;

1244 
i
, 
vbËIndex
;

1250 
absM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
m‘hodIdx
);

1251 ià(
absM‘hod
 =ğ
NULL
) {

1252 
absM‘hod
 = 
	`dvmResŞveIÁ”çûM‘hod
(
m‘hod
->
şazz
, 
m‘hodIdx
);

1253 ià(
absM‘hod
 =ğ
NULL
) {

1254 
	`ALOGV
("+ unknown method");

1255  
NULL
;

1260 
	`as£¹
(
	`dvmIsAb¡¿ùM‘hod
(
absM‘hod
));

1272 
i
 = 0; i < 
thisCÏss
->
iáabËCouÁ
; i++) {

1273 ià(
thisCÏss
->
iáabË
[
i
].
şazz
 =ğ
absM‘hod
->clazz)

1276 ià(
i
 =ğ
thisCÏss
->
iáabËCouÁ
) {

1278 
	`dvmThrowIncom·tibËCÏssChªgeE¼Ü
("interface‚ot implemented");

1279  
NULL
;

1282 
	`as£¹
(
absM‘hod
->
m‘hodIndex
 <

1283 
thisCÏss
->
iáabË
[
i
].
şazz
->
vœtu®M‘hodCouÁ
);

1285 
vbËIndex
 =

1286 
thisCÏss
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
absM‘hod
->
m‘hodIndex
];

1287 
	`as£¹
(
vbËIndex
 >ğ0 && vbËIndex < 
thisCÏss
->
vbËCouÁ
);

1288 
m‘hodToC®l
 = 
thisCÏss
->
vbË
[
vbËIndex
];

1292 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1293 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("interface method‚ot implemented");

1294  
NULL
;

1297 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1298 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1301 
	`LOGVV
("+++ interface=%s.%s concrete=%s.%s",

1302 
absM‘hod
->
şazz
->
desütÜ
,‡bsM‘hod->
Çme
,

1303 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1304 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1306  
m‘hodToC®l
;

1307 
	}
}

1316 
	#kThrowShow_acûssFromCÏss
 1

	)

1317 
	g¡d
::
¡ršg
 
	$şassNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

1318 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

1320 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

1321 ià(
»fTy³
 =ğ
VERIFY_ERROR_REF_FIELD
) {

1323 cÚ¡ 
DexF›ldId
* 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
»f
);

1324 
»f
 = 
pF›ldId
->
şassIdx
;

1325 } ià(
»fTy³
 =ğ
VERIFY_ERROR_REF_METHOD
) {

1327 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
»f
);

1328 
»f
 = 
pM‘hodId
->
şassIdx
;

1331 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
»f
);

1332 
¡d
::
¡ršg
 
	`dÙCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
şassName
));

1333 ià(
æags
 == 0) {

1334  
dÙCÏssName
;

1337 
¡d
::
¡ršg
 
»suÉ
;

1338 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

1339 
»suÉ
 +ğ"Œ›dØacûs şas " + 
dÙCÏssName
;

1340 
»suÉ
 +ğ" from cÏs " + 
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
);

1342 
	`as£¹
(
çl£
);

1345  
»suÉ
;

1346 
	}
}

1347 
	g¡d
::
¡ršg
 
	$f›ldNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

1348 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

1350 ià(
»fTy³
 !ğ
VERIFY_ERROR_REF_FIELD
) {

1351 
	`ALOGW
("Ex³ùed„eàty³ %d, gÙ %d", 
VERIFY_ERROR_REF_FIELD
, 
»fTy³
);

1352  
NULL
;

1355 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

1356 cÚ¡ 
DexF›ldId
* 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
»f
);

1357 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
şassIdx
);

1358 cÚ¡ * 
f›ldName
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

1360 
¡d
::
¡ršg
 
	`dÙName
(
	`dvmHumªR—dabËDesütÜ
(
şassName
));

1362 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

1363 
¡d
::
¡ršg
 
»suÉ
;

1364 
»suÉ
 += "triedo‡ccess field ";

1365 
»suÉ
 +ğ
dÙName
 + "." + 
f›ldName
;

1366 
»suÉ
 += " from class ";

1367 
»suÉ
 +ğ
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
);

1368  
»suÉ
;

1370  
dÙName
 + "." + 
f›ldName
;

1371 
	}
}

1372 
	g¡d
::
¡ršg
 
	$m‘hodNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

1373 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

1375 ià(
»fTy³
 !ğ
VERIFY_ERROR_REF_METHOD
) {

1376 
	`ALOGW
("Ex³ùed„eàty³ %d, gÙ %d", 
VERIFY_ERROR_REF_METHOD
,
»fTy³
);

1377  
NULL
;

1380 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

1381 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
»f
);

1382 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
şassIdx
);

1383 cÚ¡ * 
m‘hodName
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1385 
¡d
::
¡ršg
 
	`dÙName
(
	`dvmHumªR—dabËDesütÜ
(
şassName
));

1387 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

1388 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1389 
¡d
::
¡ršg
 
»suÉ
;

1390 
»suÉ
 += "triedo‡ccess method ";

1391 
»suÉ
 +ğ
dÙName
 + "." + 
m‘hodName
 + ":" + 
desc
;

1392 
»suÉ
 +ğ" from cÏs " + 
	`dvmHumªR—dabËDesütÜ
(
m‘hod
->
şazz
->
desütÜ
);

1393 
	`ä“
(
desc
);

1394  
»suÉ
;

1396  
dÙName
 + "." + 
m‘hodName
;

1397 
	}
}

1408 
	$dvmThrowV”ifiÿtiÚE¼Ü
(cÚ¡ 
M‘hod
* 
m‘hod
, 
kšd
, 
»f
)

1410 
”rÜP¬t
 = 
kšd
 & ~(0xfà<< 
kV”ifyE¼ÜRefTy³Shiá
);

1411 
”rÜRefP¬t
 = 
kšd
 >> 
kV”ifyE¼ÜRefTy³Shiá
;

1412 
V”ifyE¼Ü
 
”rÜKšd
 = 
¡©ic_ÿ¡
<V”ifyE¼Ü>(
”rÜP¬t
);

1413 
V”ifyE¼ÜRefTy³
 
»fTy³
 = 
¡©ic_ÿ¡
<V”ifyE¼ÜRefTy³>(
”rÜRefP¬t
);

1414 
CÏssObjeù
* 
exû±iÚCÏss
 = 
gDvm
.
exV”ifyE¼Ü
;

1415 
¡d
::
¡ršg
 
msg
;

1417 (
V”ifyE¼Ü
è
”rÜKšd
) {

1418 
VERIFY_ERROR_NO_CLASS
:

1419 
exû±iÚCÏss
 = 
gDvm
.
exNoCÏssDefFoundE¼Ü
;

1420 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

1422 
VERIFY_ERROR_NO_FIELD
:

1423 
exû±iÚCÏss
 = 
gDvm
.
exNoSuchF›ldE¼Ü
;

1424 
msg
 = 
	`f›ldNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

1426 
VERIFY_ERROR_NO_METHOD
:

1427 
exû±iÚCÏss
 = 
gDvm
.
exNoSuchM‘hodE¼Ü
;

1428 
msg
 = 
	`m‘hodNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

1430 
VERIFY_ERROR_ACCESS_CLASS
:

1431 
exû±iÚCÏss
 = 
gDvm
.
exIÎeg®AcûssE¼Ü
;

1432 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

1433 
kThrowShow_acûssFromCÏss
);

1435 
VERIFY_ERROR_ACCESS_FIELD
:

1436 
exû±iÚCÏss
 = 
gDvm
.
exIÎeg®AcûssE¼Ü
;

1437 
msg
 = 
	`f›ldNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

1438 
kThrowShow_acûssFromCÏss
);

1440 
VERIFY_ERROR_ACCESS_METHOD
:

1441 
exû±iÚCÏss
 = 
gDvm
.
exIÎeg®AcûssE¼Ü
;

1442 
msg
 = 
	`m‘hodNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

1443 
kThrowShow_acûssFromCÏss
);

1445 
VERIFY_ERROR_CLASS_CHANGE
:

1446 
exû±iÚCÏss
 = 
gDvm
.
exIncom·tibËCÏssChªgeE¼Ü
;

1447 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

1449 
VERIFY_ERROR_INSTANTIATION
:

1450 
exû±iÚCÏss
 = 
gDvm
.
exIn¡ªtŸtiÚE¼Ü
;

1451 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

1454 
VERIFY_ERROR_GENERIC
:

1457 
VERIFY_ERROR_NONE
:

1459 
	`as£¹
(
çl£
);

1460 
msg
 = 
	`¡rdup
("weird -‚oƒrror specified");

1466 
	`dvmThrowExû±iÚ
(
exû±iÚCÏss
, 
msg
.
	`c_¡r
());

1467 
	}
}

1472 
	$upd©eIÁ”pB»ak
(
Th»ad
* 
th»ad
, 
ExecutiÚSubModes
 
subMode
, 
boŞ
 
’abË
)

1474 
IÁ”pB»ak
 
ŞdV®ue
, 
ÃwV®ue
;

1476 
ŞdV®ue
 = 
ÃwV®ue
 = 
th»ad
->
š‹½B»ak
;

1477 
ÃwV®ue
.
ùl
.
b»akFÏgs
 = 
kIÁ”pNoB»ak
;

1478 ià(
’abË
)

1479 
ÃwV®ue
.
ùl
.
subMode
 |= subMode;

1481 
ÃwV®ue
.
ùl
.
subMode
 &= ~subMode;

1482 ià(
ÃwV®ue
.
ùl
.
subMode
 & 
SINGLESTEP_BREAK_MASK
)

1483 
ÃwV®ue
.
ùl
.
b»akFÏgs
 |ğ
kIÁ”pSšgËS‹p
;

1484 ià(
ÃwV®ue
.
ùl
.
subMode
 & 
SAFEPOINT_BREAK_MASK
)

1485 
ÃwV®ue
.
ùl
.
b»akFÏgs
 |ğ
kIÁ”pSaãPošt
;

1486 
ÃwV®ue
.
ùl
.
curHªdËrTabË
 = (ÃwV®ue.ùl.
b»akFÏgs
) ?

1487 
th»ad
->
®tHªdËrTabË
 :h»ad->
mašHªdËrTabË
;

1488 } 
	`dvmQuasiAtomicCas64
(
ŞdV®ue
.
®l
, 
ÃwV®ue
.all,

1489 &
th»ad
->
š‹½B»ak
.
®l
) != 0);

1490 
	}
}

1495 
	$upd©eAÎIÁ”pB»ak
(
ExecutiÚSubModes
 
subMode
, 
boŞ
 
’abË
)

1497 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1498 
Th»ad
* 
th»ad
;

1500 
	`dvmLockTh»adLi¡
(
£lf
);

1501 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1502 
	`upd©eIÁ”pB»ak
(
th»ad
, 
subMode
, 
’abË
);

1504 
	`dvmUÆockTh»adLi¡
();

1505 
	}
}

1516 
	$dvmAddToSu¥’dCouÁs
(
Th»ad
* 
th»ad
, 
d–
, 
dbgD–
)

1518 
th»ad
->
su¥’dCouÁ
 +ğ
d–
;

1519 
th»ad
->
dbgSu¥’dCouÁ
 +ğ
dbgD–
;

1520 
	`upd©eIÁ”pB»ak
(
th»ad
, 
kSubModeSu¥’dP’dšg
,

1521 (
th»ad
->
su¥’dCouÁ
 != 0));

1523 
gDvm
.
sumTh»adSu¥’dCouÁ
 +ğ
d–
;

1524 
	}
}

1527 
	$dvmDi§bËSubMode
(
Th»ad
* 
th»ad
, 
ExecutiÚSubModes
 
subMode
)

1529 
	`upd©eIÁ”pB»ak
(
th»ad
, 
subMode
, 
çl£
);

1530 
	}
}

1532 
	$dvmEÇbËSubMode
(
Th»ad
* 
th»ad
, 
ExecutiÚSubModes
 
subMode
)

1534 
	`upd©eIÁ”pB»ak
(
th»ad
, 
subMode
, 
Œue
);

1535 
	}
}

1537 
	$dvmEÇbËAÎSubMode
(
ExecutiÚSubModes
 
subMode
)

1539 
	`upd©eAÎIÁ”pB»ak
(
subMode
, 
Œue
);

1540 
	}
}

1542 
	$dvmDi§bËAÎSubMode
(
ExecutiÚSubModes
 
subMode
)

1544 
	`upd©eAÎIÁ”pB»ak
(
subMode
, 
çl£
);

1545 
	}
}

1553 
	$dvmCheckIÁ”pS‹CÚsi¡’cy
()

1555 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1556 
Th»ad
* 
th»ad
;

1557 
ušt8_t
 
b»akFÏgs
;

1558 
ušt8_t
 
subMode
;

1559 * 
hªdËrTabË
;

1561 
	`dvmLockTh»adLi¡
(
£lf
);

1562 
b»akFÏgs
 = 
£lf
->
š‹½B»ak
.
ùl
.breakFlags;

1563 
subMode
 = 
£lf
->
š‹½B»ak
.
ùl
.subMode;

1564 
hªdËrTabË
 = 
£lf
->
š‹½B»ak
.
ùl
.
curHªdËrTabË
;

1565 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1566 ià(
subMode
 !ğ
th»ad
->
š‹½B»ak
.
ùl
.subMode) {

1567 
	`ALOGD
("Warning: subMode mismatch - %#x:%#x,id[%d]",

1568 
subMode
,
th»ad
->
š‹½B»ak
.
ùl
.subMode,th»ad->
th»adId
);

1570 ià(
b»akFÏgs
 !ğ
th»ad
->
š‹½B»ak
.
ùl
.breakFlags) {

1571 
	`ALOGD
("Warning: breakFlags mismatch - %#x:%#x,id[%d]",

1572 
b»akFÏgs
,
th»ad
->
š‹½B»ak
.
ùl
.b»akFÏgs,th»ad->
th»adId
);

1574 ià(
hªdËrTabË
 !ğ
th»ad
->
š‹½B»ak
.
ùl
.
curHªdËrTabË
) {

1575 
	`ALOGD
("Warning: curHandlerTable mismatch - %#x:%#x,id[%d]",

1576 ()
hªdËrTabË
,()
th»ad
->
š‹½B»ak
.
ùl
.
curHªdËrTabË
,

1577 
th»ad
->
th»adId
);

1579 #ià
	`defšed
(
WITH_JIT
)

1580 ià(
th»ad
->
pJ™ProfTabË
 !ğ
gDvmJ™
.
pProfTabË
) {

1581 
	`ALOGD
("Warning:…JitProfTable mismatch - %#x:%#x,id[%d]",

1582 ()
th»ad
->
pJ™ProfTabË
,()
gDvmJ™
.
pProfTabË
,

1583 
th»ad
->
th»adId
);

1585 ià(
th»ad
->
j™Th»shŞd
 !ğ
gDvmJ™
.
th»shŞd
) {

1586 
	`ALOGD
("Warning: jitThreshold mismatch - %#x:%#x,id[%d]",

1587 ()
th»ad
->
j™Th»shŞd
,()
gDvmJ™
.
th»shŞd
,

1588 
th»ad
->
th»adId
);

1592 
	`dvmUÆockTh»adLi¡
();

1593 
	}
}

1602 
	$dvmArmSaãPoštC®lback
(
Th»ad
* 
th»ad
, 
SaãPoštC®lback
 
funù
,

1603 * 
¬g
)

1605 
	`dvmLockMu‹x
(&
th»ad
->
ÿÎbackMu‹x
);

1606 ià((
funù
 =ğ
NULL
è|| (
th»ad
->
ÿÎback
 == NULL)) {

1607 
th»ad
->
ÿÎback
 = 
funù
;

1608 
th»ad
->
ÿÎbackArg
 = 
¬g
;

1609 ià(
funù
 !ğ
NULL
) {

1610 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeC®lbackP’dšg
);

1612 
	`dvmDi§bËSubMode
(
th»ad
, 
kSubModeC®lbackP’dšg
);

1616 ià((
funù
 !ğ
th»ad
->
ÿÎback
) ||

1617 (
¬g
 !ğ
th»ad
->
ÿÎbackArg
)) {

1619 
	`ALOGE
("ArmSaãPoštC®lback faed,h»ad %d", 
th»ad
->
th»adId
);

1620 
	`dvmUÆockMu‹x
(&
th»ad
->
ÿÎbackMu‹x
);

1621 
	`dvmAbÜt
();

1624 
	`dvmUÆockMu‹x
(&
th»ad
->
ÿÎbackMu‹x
);

1625 
	}
}

1631 
	$dvmIn™IÁ”´‘”S‹
(
Th»ad
* 
£lf
)

1633 #ià
	`defšed
(
WITH_JIT
)

1638 
J™ToIÁ”pEÁr›s
 
j™ToIÁ”pEÁr›s
 = {

1639 
dvmJ™ToIÁ”pNÜm®
,

1640 
dvmJ™ToIÁ”pNoChaš
,

1641 
dvmJ™ToIÁ”pPuÁ
,

1642 
dvmJ™ToIÁ”pSšgËS‹p
,

1643 
dvmJ™ToIÁ”pT¿ûS–eù
,

1644 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1645 
dvmJ™ToIÁ”pBackw¬dB¿nch
,

1647 
NULL
,

1653 
£lf
->
ÿrdTabË
 = 
gDvm
.
bŸ£dC¬dTabËBa£
;

1654 #ià
	`defšed
(
WITH_JIT
)

1656 
£lf
->
j™ToIÁ”pEÁr›s
 = jitToInterpEntries;

1657 
£lf
->
icRechašCouÁ
 = 
PREDICTED_CHAIN_COUNTER_RECHAIN
;

1658 
£lf
->
pProfeCouÁdown
 = &
gDvmJ™
.
´ofeCouÁdown
;

1660 
	`dvmJ™Upd©eTh»adS‹SšgË
(
£lf
);

1662 
	`dvmIn™ŸlizeIÁ”pB»ak
(
£lf
);

1663 
	}
}

1670 
	$dvmIn™ŸlizeIÁ”pB»ak
(
Th»ad
* 
th»ad
)

1672 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 > 0) {

1673 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeIn¡CouÁšg
);

1675 ià(
	`dvmIsM‘hodT¿ûAùive
()) {

1676 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeM‘hodT¿û
);

1678 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 > 0) {

1679 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeEmuÏtÜT¿û
);

1681 ià(
gDvm
.
debugg”Aùive
) {

1682 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeDebugg”Aùive
);

1686 
	`dvmEÇbËSubMode
(
th»ad
, 
kSubModeCheckAlways
);

1688 
	}
}

1696 
	$dvmCheckBefÜe
(cÚ¡ 
u2
 *
pc
, 
u4
 *
å
, 
Th»ad
* 
£lf
)

1698 cÚ¡ 
M‘hod
* 
m‘hod
 = 
£lf
->
š‹½Save
.method;

1699 
	`as£¹
(
pc
 >ğ
m‘hod
->
š¢s
 &&…c <

1700 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

1707 ià(*
pIsM‘hodEÁry
) {

1708 cÚ¡ * 
cd
 = "Landroid/test/Arithmetic;";

1709 cÚ¡ * 
mn
 = "shiftTest2";

1710 cÚ¡ * 
sg
 = "()V";

1713 
	`¡rcmp
(
m‘hod
->
şazz
->
desütÜ
, 
cd
) == 0 &&

1714 
	`¡rcmp
(
m‘hod
->
Çme
, 
mn
) == 0 &&

1715 
	`¡rcmp
(
m‘hod
->
shÜty
, 
sg
) == 0)

1717 
	`ALOGW
("Reached %s.%s,ƒnabling verbose mode",

1718 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1719 
	`ªdroid_£tMšPriÜ™y
(
LOG_TAG
"i", 
ANDROID_LOG_VERBOSE
);

1720 
	`dumpRegs
(
m‘hod
, 
å
, 
Œue
);

1723 ià(!
gDvm
.
debugg”Aùive
)

1724 *
pIsM‘hodEÁry
 = 
çl£
;

1729 ià(
£lf
->
su¥’dCouÁ
 ||

1730 (
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeC®lbackP’dšg
)) {

1732 
æags
;

1733 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
	`dexOpcodeFromCodeUn™
(*
pc
));

1734 ià(
æags
 & (
VERIFY_GC_INST_MASK
 & ~
kIn¡rCªThrow
)) {

1736 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeC®lbackP’dšg
) {

1737 
SaãPoštC®lback
 
ÿÎback
;

1738 * 
¬g
;

1740 
	`dvmLockMu‹x
(&
£lf
->
ÿÎbackMu‹x
);

1741 
ÿÎback
 = 
£lf
->callback;

1742 
¬g
 = 
£lf
->
ÿÎbackArg
;

1743 
	`dvmUÆockMu‹x
(&
£lf
->
ÿÎbackMu‹x
);

1745 
£lf
->
š‹½Save
.
pc
 =…c;

1746 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

1747 ià(
ÿÎback
 !ğ
NULL
) {

1749 ià(!
	`ÿÎback
(
£lf
,
¬g
)) {

1751 
	`dvmArmSaãPoštC®lback
(
£lf
, 
NULL
, NULL);

1756 ià(
£lf
->
su¥’dCouÁ
) {

1757 
	`dvmExpÜtPC
(
pc
, 
å
);

1758 
	`dvmCheckSu¥’dP’dšg
(
£lf
);

1763 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

1764 
	`upd©eDebugg”
(
m‘hod
, 
pc
, 
å
, 
£lf
);

1766 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 != 0) {

1774 
gDvm
.
execu‹dIn¡rCouÁs
[
	`GET_OPCODE
(*
pc
)]++;

1778 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

1779 
	`dvmIÁ”pCheckT¿ckedRefs
(
£lf
, 
m‘hod
,

1780 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹
);

1783 #ià
	`defšed
(
WITH_JIT
)

1785 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 &

1786 (
kSubModeJ™T¿ûBud
 | 
kSubModeJ™SV
)) {

1788 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) {

1789 
	`dvmCheckJ™
(
pc
, 
£lf
);

1792 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

1794 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™SV
) {

1795 
	`dvmCheckS–fV”ifiÿtiÚ
(
pc
, 
£lf
);

1805 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeCouÁedS‹p
) {

1806 ià(
£lf
->
sšgËS‹pCouÁ
 == 0) {

1808 
	`dvmDi§bËSubMode
(
£lf
, 
kSubModeCouÁedS‹p
);

1809 #ià
	`defšed
(
WITH_JIT
)

1817 ià(
£lf
->
j™ResumeDPC
 !ğ
NULL
) {

1818 ià(
£lf
->
j™ResumeDPC
 =ğ
pc
) {

1819 ià(
£lf
->
j™ResumeNPC
 !ğ
NULL
) {

1820 
	`ALOGD
("SS„eturnorace -…c:%#xo 0x:%x",

1821 ()
pc
, ()
£lf
->
j™ResumeNPC
);

1823 
	`ALOGD
("SS„‘uºØš‹½ -…c:%#x",()
pc
);

1826 
	`ALOGD
("SS failedo„eturn. Expected %#x,‚ow‡t %#x",

1827 ()
£lf
->
j™ResumeDPC
, ()
pc
);

1837 ià(
£lf
->
j™ResumeNPC
 !ğ
NULL
 &&

1838 
£lf
->
š‹½B»ak
.
ùl
.
b»akFÏgs
 == 0) {

1839 
	`as£¹
(
£lf
->
j™ResumeDPC
 =ğ
pc
);

1840 
£lf
->
j™ResumeDPC
 = 
NULL
;

1841 
	`dvmJ™ResumeT¿n¦©iÚ
(
£lf
, 
pc
, 
å
);

1843 
	`dvmAbÜt
();

1847 
£lf
->
j™ResumeNPC
 = 
NULL
;

1848 
£lf
->
j™ResumeDPC
 = 
NULL
;

1849 
£lf
->
šJ™CodeCache
 = 
NULL
;

1853 
£lf
->
sšgËS‹pCouÁ
--;

1854 #ià
	`defšed
(
WITH_JIT
)

1855 ià((
£lf
->
sšgËS‹pCouÁ
 > 0è&& (£lf->
j™ResumeNPC
 !ğ
NULL
)) {

1862 
£lf
->
j™ResumeNPC
 = 
NULL
;

1863 
£lf
->
šJ™CodeCache
 = 
NULL
;

1868 
	}
}

1880 
	$dvmIÁ”´‘
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
)

1882 
IÁ”pSaveS‹
 
š‹½SaveS‹
;

1883 
ExecutiÚSubModes
 
§vedSubModes
;

1885 #ià
	`defšed
(
WITH_JIT
)

1887 
ÿÎ“Save
[
JIT_CALLEE_SAVE_DOUBLE_COUNT
];

1901 
š‹½SaveS‹
 = 
£lf
->
š‹½Save
;

1902 
£lf
->
š‹½Save
.
´ev
 = &
š‹½SaveS‹
;

1907 
§vedSubModes
 = (
ExecutiÚSubModes
)(

1908 
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
LOCAL_SUBMODE
);

1909 ià(
§vedSubModes
 !ğ
kSubModeNÜm®
) {

1910 
	`dvmDi§bËSubMode
(
£lf
, 
§vedSubModes
);

1912 #ià
	`defšed
(
WITH_JIT
)

1913 
	`dvmJ™C®ËeSave
(
ÿÎ“Save
);

1917 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

1918 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹
 =

1919 
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
);

1921 
£lf
->
debugIsM‘hodEÁry
 = 
Œue
;

1922 #ià
	`defšed
(
WITH_JIT
)

1923 
	`dvmJ™C®ËeSave
(
ÿÎ“Save
);

1925 
£lf
->
j™S‹
 = 
kJ™NÙ
;

1933 
£lf
->
š‹½Save
.
m‘hod
 = method;

1934 
£lf
->
š‹½Save
.
curF¿me
 = (
u4
*) self->interpSave.curFrame;

1935 
£lf
->
š‹½Save
.
pc
 = 
m‘hod
->
š¢s
;

1937 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

1943 ià(
m‘hod
->
şazz
->
¡©us
 < 
CLASS_INITIALIZING
 ||

1944 
m‘hod
->
şazz
->
¡©us
 =ğ
CLASS_ERROR
)

1946 
	`ALOGE
("ERROR:riedoƒxecute code in unprepared class '%s' (%d)",

1947 
m‘hod
->
şazz
->
desütÜ
, m‘hod->şazz->
¡©us
);

1948 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

1949 
	`dvmAbÜt
();

1952 (*
	tIÁ”´‘”
)(
	tTh»ad
*);

1953 
IÁ”´‘”
 
¡dIÁ”p
;

1954 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeIÁ”pFa¡
)

1955 
¡dIÁ”p
 = 
dvmM‹½Std
;

1956 #ià
	`defšed
(
WITH_JIT
)

1957 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
)

1958 
¡dIÁ”p
 = 
dvmM‹½Std
;

1961 
¡dIÁ”p
 = 
dvmIÁ”´‘PÜbË
;

1964 (*
¡dIÁ”p
)(
£lf
);

1966 *
pResuÉ
 = 
£lf
->
š‹½Save
.
»tv®
;

1969 
£lf
->
š‹½Save
 = 
š‹½SaveS‹
;

1970 #ià
	`defšed
(
WITH_JIT
)

1971 
	`dvmJ™C®ËeRe¡Üe
(
ÿÎ“Save
);

1973 ià(
§vedSubModes
 !ğ
kSubModeNÜm®
) {

1974 
	`dvmEÇbËSubMode
(
£lf
, 
§vedSubModes
);

1976 
	}
}

	@vm/interp/Interp.h

20 #iâdeà
DALVIK_INTERP_INTERP_H_


21 
	#DALVIK_INTERP_INTERP_H_


	)

26 
INLINE
 
	$dvmExpÜtPC
(cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
)

28 
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
;

29 
	}
}

34 
	#GET_OPCODE
(
_š¡
è(_š¡ & 0xff)

	)

40 
dvmIÁ”´‘
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
);

48 "C" 
dvmThrowV”ifiÿtiÚE¼Ü
(cÚ¡ 
M‘hod
* 
m‘hod
,

49 
kšd
, 
»f
);

54 
boŞ
 
dvmB»akpoštS¹up
();

55 
dvmB»akpoštShutdown
();

56 
dvmIn™IÁ”´‘”S‹
(
Th»ad
* 
£lf
);

61 
dvmIn™B»akpošts
();

62 
dvmAddB»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
);

63 
dvmCË¬B»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
);

64 
boŞ
 
dvmAddSšgËS‹p
(
Th»ad
* 
th»ad
, 
size
, 
d•th
);

65 
dvmCË¬SšgËS‹p
(
Th»ad
* 
th»ad
);

70 "C" 
u1
 
dvmG‘Origš®Opcode
(cÚ¡ 
u2
* 
addr
);

75 
dvmFlushB»akpošts
(
CÏssObjeù
* 
şazz
);

80 "C" 
dvmCheckBefÜe
(cÚ¡ 
u2
 *
dPC
, 
u4
 *
å
, 
Th»ad
* 
£lf
);

81 "C" 
dvmR•ÜtExû±iÚThrow
(
Th»ad
* 
£lf
, 
Objeù
* 
exû±iÚ
);

82 "C" 
dvmR•ÜtP»N©iveInvoke
(cÚ¡ 
M‘hod
* 
m‘hodToC®l
, 
Th»ad
* 
£lf
, 
u4
* 
å
);

83 "C" 
dvmR•ÜtPo¡N©iveInvoke
(cÚ¡ 
M‘hod
* 
m‘hodToC®l
, 
Th»ad
* 
£lf
, 
u4
* 
å
);

84 "C" 
dvmR•ÜtInvoke
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
);

85 "C" 
dvmR•ÜtR‘uº
(
Th»ad
* 
£lf
);

90 
dvmDi§bËSubMode
(
Th»ad
* 
th»ad
, 
ExecutiÚSubModes
 
subMode
);

91 "C" 
dvmEÇbËSubMode
(
Th»ad
* 
th»ad
, 
ExecutiÚSubModes
 
subMode
);

92 
dvmDi§bËAÎSubMode
(
ExecutiÚSubModes
 
subMode
);

93 
dvmEÇbËAÎSubMode
(
ExecutiÚSubModes
 
subMode
);

94 
dvmAddToSu¥’dCouÁs
(
Th»ad
* 
th»ad
, 
d–
, 
dbgD–
);

95 
dvmCheckIÁ”pS‹CÚsi¡’cy
();

96 
dvmIn™ŸlizeIÁ”pB»ak
(
Th»ad
* 
th»ad
);

108 
dvmArmSaãPoštC®lback
(
Th»ad
* 
th»ad
, 
SaãPoštC®lback
 
funù
,

109 * 
¬g
);

112 #iâdeà
DVM_NO_ASM_INTERP


113 * 
dvmAsmIn¡ruùiÚS¹
[];

114 * 
dvmAsmAÉIn¡ruùiÚS¹
[];

	@vm/interp/InterpDefs.h

24 #iâdeà
DALVIK_INTERP_DEFS_H_


25 
	#DALVIK_INTERP_DEFS_H_


	)

27 #ià
defšed
(
WITH_JIT
)

34 
	#JIT_CALLEE_SAVE_DOUBLE_COUNT
 8

	)

41 
dvmIÁ”´‘PÜbË
(
Th»ad
* 
£lf
);

46 
dvmM‹½Std
(
Th»ad
* 
£lf
);

51 
Objeù
* 
dvmG‘ThisPŒ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
å
);

56 
dvmIÁ”pCheckT¿ckedRefs
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
,

57 
debugT¿ckedRefS¹
);

62 "C" 
s4
 
dvmIÁ”pHªdËPackedSw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, s4 
‹¡V®
);

63 "C" 
s4
 
dvmIÁ”pHªdËS·r£Sw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, s4 
‹¡V®
);

68 "C" 
boŞ
 
dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObjeù
,

69 cÚ¡ 
u2
* 
¬¿yD©a
);

74 
M‘hod
* 
dvmIÁ”pFšdIÁ”çûM‘hod
(
CÏssObjeù
* 
thisCÏss
, 
u4
 
m‘hodIdx
,

75 cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
);

80 
šlše
 
boŞ
 
	$dvmDebugg”OrProf”Aùive
()

82  
gDvm
.
debugg”Aùive
 || gDvm.
aùiveProf”s
 != 0;

83 
	}
}

85 #ià
defšed
(
WITH_JIT
)

90 
šlše
 
boŞ
 
	$dvmJ™Debugg”OrProf”Aùive
()

92  (
gDvmJ™
.
pProfTabË
 !ğ
NULL
è|| 
	`dvmDebugg”OrProf”Aùive
();

93 
	}
}

99 
šlše
 
boŞ
 
	$dvmJ™HideT¿n¦©iÚ
()

101  (
gDvm
.
sumTh»adSu¥’dCouÁ
 != 0) ||

102 (
gDvmJ™
.
codeCacheFuÎ
 =ğ
Œue
) ||

103 (
gDvmJ™
.
pProfTabË
 =ğ
NULL
);

104 
	}
}

	@vm/interp/InterpState.h

24 #iâdeà
DALVIK_INTERP_STATE_H_


25 
	#DALVIK_INTERP_STATE_H_


	)

30 
	eExecutiÚMode
 {

31 
	mkExecutiÚModeUnknown
 = 0,

32 
	mkExecutiÚModeIÁ”pPÜbË
,

33 
	mkExecutiÚModeIÁ”pFa¡
,

34 #ià
defšed
(
WITH_JIT
)

35 
	mkExecutiÚModeJ™
,

45 
	eExecutiÚSubModes
 {

46 
	mkSubModeNÜm®
 = 0x0000,

47 
	mkSubModeM‘hodT¿û
 = 0x0001,

48 
	mkSubModeEmuÏtÜT¿û
 = 0x0002,

49 
	mkSubModeIn¡CouÁšg
 = 0x0004,

50 
	mkSubModeDebugg”Aùive
 = 0x0008,

51 
	mkSubModeSu¥’dP’dšg
 = 0x0010,

52 
	mkSubModeC®lbackP’dšg
 = 0x0020,

53 
	mkSubModeCouÁedS‹p
 = 0x0040,

54 
	mkSubModeCheckAlways
 = 0x0080,

55 
	mkSubModeJ™T¿ûBud
 = 0x4000,

56 
	mkSubModeJ™SV
 = 0x8000,

57 
	mkSubModeDebugProfe
 = (
kSubModeM‘hodT¿û
 |

58 
kSubModeEmuÏtÜT¿û
 |

59 
kSubModeIn¡CouÁšg
 |

60 
kSubModeDebugg”Aùive
)

69 
	eIÁ”pB»akFÏgs
 {

70 
	mkIÁ”pNoB»ak
 = 0x00,

71 
	mkIÁ”pSšgËS‹p
 = 0x01,

72 
	mkIÁ”pSaãPošt
 = 0x02,

79 
	#SINGLESTEP_BREAK_MASK
 ( 
kSubModeIn¡CouÁšg
 | \

80 
kSubModeDebugg”Aùive
 | \

81 
kSubModeCouÁedS‹p
 | \

82 
kSubModeCheckAlways
 | \

83 
kSubModeJ™SV
 | \

84 
kSubModeJ™T¿ûBud
 )

	)

86 
	#SAFEPOINT_BREAK_MASK
 ( 
kSubModeSu¥’dP’dšg
 | \

87 
kSubModeC®lbackP’dšg
 )

	)

89 
	$boŞ
 (*
	tSaãPoštC®lback
)(
	tTh»ad
* 
	tth»ad
, * 
	t¬g
);

95 
	#LOCAL_SUBMODE
 (
kSubModeJ™T¿ûBud
)

	)

97 
	sIÁ”pSaveS‹
 {

98 cÚ¡ 
u2
* 
pc
;

99 
u4
* 
curF¿me
;

100 cÚ¡ 
M‘hod
 *
m‘hod
;

101 
DvmDex
* 
m‘hodCÏssDex
;

102 
JV®ue
 
»tv®
;

103 * 
baPŒ
;

104 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

105 
debugT¿ckedRefS¹
;

107 
unu£d
;

109 
IÁ”pSaveS‹
* 
´ev
;

110 } 
	`__©Œibu‹__
 ((
__·cked__
));

112 #ifdeà
WITH_JIT


138 
	sJ™ToIÁ”pEÁr›s
 {

139 (*
dvmJ™ToIÁ”pNÜm®
)();

140 (*
dvmJ™ToIÁ”pNoChaš
)();

141 (*
dvmJ™ToIÁ”pPuÁ
)();

142 (*
dvmJ™ToIÁ”pSšgËS‹p
)();

143 (*
dvmJ™ToIÁ”pT¿ûS–eù
)();

144 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

145 (*
dvmJ™ToIÁ”pBackw¬dB¿nch
)();

147 (*
unu£d
)();

152 
	eJ™S‹
 {

154 
kJ™NÙ
 = 0,

155 
kJ™TS–eùReque¡
 = 1,

156 
kJ™TS–eùReque¡HÙ
 = 2,

157 
kJ™S–fV”ifiÿtiÚ
 = 3,

160 
kJ™TS–eù
 = 4,

161 
kJ™TS–eùEnd
 = 5,

162 
kJ™DÚe
 = 6,

165 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

166 
	eS–fV”ifiÿtiÚS‹
 {

167 
kSVSIdË
 = 0,

168 
kSVSS¹
 = 1,

169 
kSVSPuÁ
 = 2,

170 
kSVSSšgËS‹p
 = 3,

171 
kSVSNoProfe
 = 4,

172 
kSVST¿ûS–eù
 = 5,

173 
kSVSNÜm®
 = 6,

174 
kSVSNoChaš
 = 7,

175 
kSVSBackw¬dB¿nch
 = 8,

176 
kSVSDebugIÁ”p
 = 9,

181 
	#JIT_TRACE_THRESH_FILTER_SIZE
 32

	)

183 
	#JIT_TRACE_THRESH_FILTER_PC_BITS
 4

	)

184 
	#MAX_JIT_RUN_LEN
 64

	)

186 
	eJ™Hšt
 {

187 
kJ™HštNÚe
 = 0,

188 
kJ™HštTak’
 = 1,

189 
kJ™HštNÙTak’
 = 2,

190 
kJ™HštNoBŸs
 = 3,

197 
	sJ™CodeDesc
 {

198 
numIn¡s
:8;

199 
runEnd
:1;

200 
J™Hšt
 
hšt
:7;

201 
u2
 
¡¬tOff£t
;

226 
	sJ™T¿ûRun
 {

228 
J™CodeDesc
 
äag
;

229 * 
m‘a
;

230 } 
šfo
;

231 
u4
 
isCode
:1;

232 
u4
 
unu£d
:31;

	@vm/interp/Jit.cpp

16 #ifdeà
WITH_JIT


22 
	~"D®vik.h
"

23 
	~"J™.h
"

25 
	~"libdex/DexOpcodes.h
"

26 
	~<uni¡d.h
>

27 
	~<±h»ad.h
>

28 
	~<sys/time.h
>

29 
	~<sigÇl.h
>

30 
	~"comp”/Comp”.h
"

31 
	~"comp”/Comp”Ut™y.h
"

32 
	~"comp”/Comp”IR.h
"

33 
	~<”ºo.h
>

35 #ià
defšed
(
WITH_SELF_VERIFICATION
)

37 * 
	$dvmS–fV”ifiÿtiÚShadowS·ûAÎoc
(
Th»ad
* 
£lf
)

39 
£lf
->
shadowS·û
 = (
ShadowS·û
*è
	`ÿÎoc
(1, (ShadowSpace));

40 ià(
£lf
->
shadowS·û
 =ğ
NULL
)

41  
NULL
;

43 
£lf
->
shadowS·û
->
»gi¡”S·ûSize
 = 
REG_SPACE
;

44 
£lf
->
shadowS·û
->
»gi¡”S·û
 =

45 (*è
	`ÿÎoc
(
£lf
->
shadowS·û
->
»gi¡”S·ûSize
, ());

47  
£lf
->
shadowS·û
->
»gi¡”S·û
;

48 
	}
}

51 
	$dvmS–fV”ifiÿtiÚShadowS·ûF»e
(
Th»ad
* 
£lf
)

53 
	`ä“
(
£lf
->
shadowS·û
->
»gi¡”S·û
);

54 
	`ä“
(
£lf
->
shadowS·û
);

55 
	}
}

69 * 
	$dvmS–fV”ifiÿtiÚSaveS‹
(cÚ¡ 
u2
* 
pc
, 
u4
* 
å
,

70 
Th»ad
* 
£lf
, 
rg‘T¿û
)

72 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

73 
´eBy‹s
 = 
£lf
->
š‹½Save
.
m‘hod
->
outsSize
*4 +

74 (
SckSaveA»a
);

75 
po¡By‹s
 = 
£lf
->
š‹½Save
.
m‘hod
->
»gi¡”sSize
*4;

80 ià(
shadowS·û
->
£lfV”ifiÿtiÚS‹
 !ğ
kSVSIdË
) {

81 
	`ALOGD
("~~~ Save: INCORRECT PREVIOUS STATE(%d): %d",

82 
£lf
->
th»adId
, 
shadowS·û
->
£lfV”ifiÿtiÚS‹
);

83 
	`ALOGD
("********** SHADOW STATE DUMP **********");

84 
	`ALOGD
("PC: %#x FP: %#x", ()
pc
, ()
å
);

86 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSS¹
;

89 ià(
´eBy‹s
 + 
po¡By‹s
 > 
shadowS·û
->
»gi¡”S·ûSize
 * (
u4
)) {

90 
	`ä“
(
shadowS·û
->
»gi¡”S·û
);

91 
shadowS·û
->
»gi¡”S·ûSize
 = (
´eBy‹s
 + 
po¡By‹s
è/ (
u4
);

92 
shadowS·û
->
»gi¡”S·û
 =

93 (*è
	`ÿÎoc
(
shadowS·û
->
»gi¡”S·ûSize
, (
u4
));

97 
shadowS·û
->
¡¬tPC
 = 
pc
;

98 
shadowS·û
->
å
 = fp;

99 
shadowS·û
->
»tv®
 = 
£lf
->
š‹½Save
.retval;

100 
shadowS·û
->
š‹½SckEnd
 = 
£lf
->interpStackEnd;

106 
shadowS·û
->
m‘hod
 = 
£lf
->
š‹½Save
.method;

107 
shadowS·û
->
m‘hodCÏssDex
 = 
£lf
->
š‹½Save
.methodClassDex;

109 
shadowS·û
->
shadowFP
 = shadowS·û->
»gi¡”S·û
 +

110 
shadowS·û
->
»gi¡”S·ûSize
 - 
po¡By‹s
/4;

112 
£lf
->
š‹½Save
.
curF¿me
 = (
u4
*)
shadowS·û
->
shadowFP
;

113 
£lf
->
š‹½SckEnd
 = (
u1
*)
shadowS·û
->
»gi¡”S·û
;

116 
	`memıy
(((*)
shadowS·û
->
shadowFP
)-
´eBy‹s
, ((*)
å
)-preBytes,

117 
´eBy‹s
+
po¡By‹s
);

120 
shadowS·û
->
h—pS·ûTa
 = shadowS·û->
h—pS·û
;

123 
shadowS·û
->
ŒaûL’gth
 = 0;

125  
shadowS·û
;

126 
	}
}

132 * 
	$dvmS–fV”ifiÿtiÚRe¡ÜeS‹
(cÚ¡ 
u2
* 
pc
, 
u4
* 
å
,

133 
S–fV”ifiÿtiÚS‹
 
ex™S‹
,

134 
Th»ad
* 
£lf
)

136 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

137 
shadowS·û
->
’dPC
 = 
pc
;

138 
shadowS·û
->
’dShadowFP
 = 
å
;

139 
shadowS·û
->
j™Ex™S‹
 = 
ex™S‹
;

145 ià(
shadowS·û
->
£lfV”ifiÿtiÚS‹
 !ğ
kSVSS¹
) {

146 
	`ALOGD
("~~~ Restore: INCORRECT PREVIOUS STATE(%d): %d",

147 
£lf
->
th»adId
, 
shadowS·û
->
£lfV”ifiÿtiÚS‹
);

148 
	`ALOGD
("********** SHADOW STATE DUMP **********");

149 
	`ALOGD
("D®vik PC: %#xƒndPC: %#x", ()
shadowS·û
->
¡¬tPC
,

150 ()
shadowS·û
->
’dPC
);

151 
	`ALOGD
("IÁ”°FP: %#x", ()
shadowS·û
->
å
);

152 
	`ALOGD
("Shadow FP: %#xƒndFP: %#x", ()
shadowS·û
->
shadowFP
,

153 ()
shadowS·û
->
’dShadowFP
);

157 ià(
ex™S‹
 =ğ
kSVSPuÁ
 && 
pc
 =ğ
shadowS·û
->
¡¬tPC
) {

158 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSIdË
;

160 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
ex™S‹
;

164 
£lf
->
š‹½Save
.
pc
 = 
shadowS·û
->
¡¬tPC
;

165 
£lf
->
š‹½Save
.
curF¿me
 = 
shadowS·û
->
å
;

166 
£lf
->
š‹½Save
.
m‘hod
 = 
shadowS·û
->method;

167 
£lf
->
š‹½Save
.
m‘hodCÏssDex
 = 
shadowS·û
->methodClassDex;

168 
£lf
->
š‹½Save
.
»tv®
 = 
shadowS·û
->retval;

169 
£lf
->
š‹½SckEnd
 = 
shadowS·û
->interpStackEnd;

171  
shadowS·û
;

172 
	}
}

175 
	$£lfV”ifiÿtiÚPrštRegi¡”s
(* 
addr
, * 
addrRef
,

176 
numWÜds
)

178 
i
;

179 
i
 = 0; i < 
numWÜds
; i++) {

180 
	`ALOGD
("(v%dè0x%8x%s", 
i
, 
addr
[i],‡ddr[i] !ğ
addrRef
[i] ? " X" : "");

182 
	}
}

185 
	$£lfV”ifiÿtiÚDumpS‹
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
)

187 
ShadowS·û
* 
shadowS·û
 = 
£lf
->shadowSpace;

188 
SckSaveA»a
* 
¡ackSave
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

189 
äameBy‹s
 = (è
shadowS·û
->
»gi¡”S·û
 +

190 
shadowS·û
->
»gi¡”S·ûSize
*4 -

191 (è
shadowS·û
->
shadowFP
;

192 
loÿlRegs
 = 0;

193 
äameBy‹s2
 = 0;

194 ià((
ušŒ_t
)
£lf
->
š‹½Save
.
curF¿me
 < (ušŒ_t)
shadowS·û
->
å
) {

195 
loÿlRegs
 = (
¡ackSave
->
m‘hod
->
»gi¡”sSize
 -

196 
¡ackSave
->
m‘hod
->
šsSize
)*4;

197 
äameBy‹s2
 = (è
shadowS·û
->
å
 -

198 ()
£lf
->
š‹½Save
.
curF¿me
 - 
loÿlRegs
;

200 
	`ALOGD
("********** SHADOW STATE DUMP **********");

201 
	`ALOGD
("Cu¼’tPC: %#x, Off£t: 0x%04x", ()
pc
,

202 ()(
pc
 - 
¡ackSave
->
m‘hod
->
š¢s
));

203 
	`ALOGD
("CÏss: %s", 
shadowS·û
->
m‘hod
->
şazz
->
desütÜ
);

204 
	`ALOGD
("M‘hod: %s", 
shadowS·û
->
m‘hod
->
Çme
);

205 
	`ALOGD
("D®vik PC: %#xƒndPC: %#x", ()
shadowS·û
->
¡¬tPC
,

206 ()
shadowS·û
->
’dPC
);

207 
	`ALOGD
("IÁ”°FP: %#xƒndFP: %#x", ()
shadowS·û
->
å
,

208 ()
£lf
->
š‹½Save
.
curF¿me
);

209 
	`ALOGD
("Shadow FP: %#xƒndFP: %#x", ()
shadowS·û
->
shadowFP
,

210 ()
shadowS·û
->
’dShadowFP
);

211 
	`ALOGD
("F¿me1 By‹s: %d F¿me2 Loÿl: %d By‹s: %d", 
äameBy‹s
,

212 
loÿlRegs
, 
äameBy‹s2
);

213 
	`ALOGD
("T¿û†’gth: %d S‹: %d", 
shadowS·û
->
ŒaûL’gth
,

214 
shadowS·û
->
£lfV”ifiÿtiÚS‹
);

215 
	}
}

218 
	$£lfV”ifiÿtiÚDumpT¿û
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
)

220 
ShadowS·û
* 
shadowS·û
 = 
£lf
->shadowSpace;

221 
SckSaveA»a
* 
¡ackSave
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

222 
i
, 
addr
, 
off£t
;

223 
DecodedIn¡ruùiÚ
 *
decIn¢
;

225 
	`ALOGD
("********** SHADOW TRACE DUMP **********");

226 
i
 = 0; i < 
shadowS·û
->
ŒaûL’gth
; i++) {

227 
addr
 = 
shadowS·û
->
Œaû
[
i
].addr;

228 
off£t
 = ()((
u2
*)
addr
 - 
¡ackSave
->
m‘hod
->
š¢s
);

229 
decIn¢
 = &(
shadowS·û
->
Œaû
[
i
].decInsn);

231 
	`ALOGD
("%#x: (0x%04x) %s",

232 
addr
, 
off£t
, 
	`dexG‘OpcodeName
(
decIn¢
->
İcode
));

234 
	}
}

237 
	$£lfV”ifiÿtiÚSpšLoİ
(
ShadowS·û
 *
shadowS·û
)

239 cÚ¡ 
u2
 *
¡¬tPC
 = 
shadowS·û
->startPC;

240 
J™T¿ûDesütiÚ
* 
desc
 = 
	`dvmCİyT¿ûDesütÜ
(
¡¬tPC
, 
NULL
);

241 ià(
desc
) {

242 
	`dvmComp”WÜkEnqueue
(
¡¬tPC
, 
kWÜkOrd”T¿ûDebug
, 
desc
);

248 
gDvmJ™
.
£lfV”ifiÿtiÚSpš
 = 
Œue
;

249 
gDvmJ™
.
£lfV”ifiÿtiÚSpš
è
	`¦“p
(10);

250 
	}
}

264 
	$dvmCheckS–fV”ifiÿtiÚ
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
)

266 
ShadowS·û
 *
shadowS·û
 = 
£lf
->shadowSpace;

267 
S–fV”ifiÿtiÚS‹
 
¡©e
 = 
shadowS·û
->
£lfV”ifiÿtiÚS‹
;

269 
DecodedIn¡ruùiÚ
 
decIn¢
;

270 
	`dexDecodeIn¡ruùiÚ
(
pc
, &
decIn¢
);

276 ià(
¡©e
 =ğ
kSVSIdË
 || s‹ =ğ
kSVSS¹
) {

277 
	`ALOGD
("~~~ DbgIntrp: INCORRECT PREVIOUS STATE(%d): %d",

278 
£lf
->
th»adId
, 
¡©e
);

279 
	`£lfV”ifiÿtiÚDumpS‹
(
pc
, 
£lf
);

280 
	`£lfV”ifiÿtiÚDumpT¿û
(
pc
, 
£lf
);

287 ià(
¡©e
 !ğ
kSVSBackw¬dB¿nch
 && s‹ !ğ
kSVSSšgËS‹p
) {

288 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSDebugIÁ”p
;

295 ià(
pc
 =ğ
shadowS·û
->
’dPC
 &&

296 (
¡©e
 =ğ
kSVSDebugIÁ”p
 || s‹ =ğ
kSVSSšgËS‹p
 ||

297 (
¡©e
 =ğ
kSVSBackw¬dB¿nch
 && 
shadowS·û
->
ŒaûL’gth
 != 0))) {

299 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSIdË
;

302 
äameBy‹s
 = (è
shadowS·û
->
»gi¡”S·û
 +

303 
shadowS·û
->
»gi¡”S·ûSize
*4 -

304 (è
shadowS·û
->
shadowFP
;

305 ià(
	`memcmp
(
shadowS·û
->
å
, shadowS·û->
shadowFP
, 
äameBy‹s
)) {

306 ià(
¡©e
 =ğ
kSVSBackw¬dB¿nch
) {

308 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSDebugIÁ”p
;

309 
log_ªd_cÚtšue
;

311 
	`ALOGD
("~~~ DbgIÁp(%d): REGISTERS DIVERGENCE!", 
£lf
->
th»adId
);

312 
	`£lfV”ifiÿtiÚDumpS‹
(
pc
, 
£lf
);

313 
	`£lfV”ifiÿtiÚDumpT¿û
(
pc
, 
£lf
);

314 
	`ALOGD
("*** Interp Registers:‡ddr: %#x bytes: %d",

315 ()
shadowS·û
->
å
, 
äameBy‹s
);

316 
	`£lfV”ifiÿtiÚPrštRegi¡”s
((*)
shadowS·û
->
å
,

317 (*)
shadowS·û
->
shadowFP
,

318 
äameBy‹s
/4);

319 
	`ALOGD
("*** Shadow Registers:‡ddr: %#x bytes: %d",

320 ()
shadowS·û
->
shadowFP
, 
äameBy‹s
);

321 
	`£lfV”ifiÿtiÚPrštRegi¡”s
((*)
shadowS·û
->
shadowFP
,

322 (*)
shadowS·û
->
å
,

323 
äameBy‹s
/4);

324 
	`£lfV”ifiÿtiÚSpšLoİ
(
shadowS·û
);

327 ià((
ušŒ_t
)
£lf
->
š‹½Save
.
curF¿me
 < (ušŒ_t)
shadowS·û
->
å
) {

328 
SckSaveA»a
* 
¡ackSave
 =

329 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

330 
loÿlRegs
 = (
¡ackSave
->
m‘hod
->
»gi¡”sSize
 -

331 
¡ackSave
->
m‘hod
->
šsSize
)*4;

332 
äameBy‹s2
 = (è
shadowS·û
->
å
 -

333 (è
£lf
->
š‹½Save
.
curF¿me
 - 
loÿlRegs
;

334 ià(
	`memcmp
(((*)
£lf
->
š‹½Save
.
curF¿me
)+
loÿlRegs
,

335 ((*)
shadowS·û
->
’dShadowFP
)+
loÿlRegs
, 
äameBy‹s2
)) {

336 ià(
¡©e
 =ğ
kSVSBackw¬dB¿nch
) {

341 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSDebugIÁ”p
;

342 
log_ªd_cÚtšue
;

344 
	`ALOGD
("~~~ DbgIntp(%d): REGISTERS (FRAME2) DIVERGENCE!",

345 
£lf
->
th»adId
);

346 
	`£lfV”ifiÿtiÚDumpS‹
(
pc
, 
£lf
);

347 
	`£lfV”ifiÿtiÚDumpT¿û
(
pc
, 
£lf
);

348 
	`ALOGD
("*** Interp Registers:‡ddr: %#x†: %d bytes: %d",

349 ()
£lf
->
š‹½Save
.
curF¿me
, 
loÿlRegs
, 
äameBy‹s2
);

350 
	`£lfV”ifiÿtiÚPrštRegi¡”s
((*)
£lf
->
š‹½Save
.
curF¿me
,

351 (*)
shadowS·û
->
’dShadowFP
,

352 (
äameBy‹s2
+
loÿlRegs
)/4);

353 
	`ALOGD
("*** Shadow Registers:‡ddr: %#x†: %d bytes: %d",

354 ()
shadowS·û
->
’dShadowFP
, 
loÿlRegs
, 
äameBy‹s2
);

355 
	`£lfV”ifiÿtiÚPrštRegi¡”s
((*)
shadowS·û
->
’dShadowFP
,

356 (*)
£lf
->
š‹½Save
.
curF¿me
,

357 (
äameBy‹s2
+
loÿlRegs
)/4);

358 
	`£lfV”ifiÿtiÚSpšLoİ
(
shadowS·û
);

363 
boŞ
 
memDiff
 = 
çl£
;

364 
ShadowH—p
* 
h—pS·ûPŒ
;

365 
h—pS·ûPŒ
 = 
shadowS·û
->
h—pS·û
;

366 
h—pS·ûPŒ
 !ğ
shadowS·û
->
h—pS·ûTa
; heapSpacePtr++) {

367 
memD©a
 = *((*è
h—pS·ûPŒ
->
addr
);

368 ià(
h—pS·ûPŒ
->
d©a
 !ğ
memD©a
) {

369 ià(
¡©e
 =ğ
kSVSBackw¬dB¿nch
) {

374 
shadowS·û
->
£lfV”ifiÿtiÚS‹
 = 
kSVSDebugIÁ”p
;

375 
log_ªd_cÚtšue
;

377 
	`ALOGD
("~~~ DbgIÁp(%d): MEMORY DIVERGENCE!", 
£lf
->
th»adId
);

378 
	`ALOGD
("Addr: %#x Intrp Data: %#x Jit Data: %#x",

379 
h—pS·ûPŒ
->
addr
, 
memD©a
, h—pS·ûPŒ->
d©a
);

380 
	`£lfV”ifiÿtiÚDumpS‹
(
pc
, 
£lf
);

381 
	`£lfV”ifiÿtiÚDumpT¿û
(
pc
, 
£lf
);

382 
memDiff
 = 
Œue
;

385 ià(
memDiff
è
	`£lfV”ifiÿtiÚSpšLoİ
(
shadowS·û
);

393 ià(
¡©e
 =ğ
kSVSSšgËS‹p
) {

394 
	`as£¹
(
£lf
->
j™ResumeNPC
 !ğ
NULL
);

395 
	`as£¹
(
£lf
->
sšgËS‹pCouÁ
 == 0);

396 
£lf
->
sšgËS‹pCouÁ
 = 1;

397 
	`dvmEÇbËSubMode
(
£lf
, 
kSubModeCouÁedS‹p
);

404 
	`dvmDi§bËSubMode
(
£lf
, 
kSubModeJ™SV
);

406 
£lf
->
j™S‹
 = 
kJ™DÚe
;

409 
log_ªd_cÚtšue
:

411 ià(
shadowS·û
->
ŒaûL’gth
 >ğ
JIT_MAX_TRACE_LEN
) {

412 
	`ALOGD
("~~~ DbgIÁp(%d): CONTROL DIVERGENCE!", 
£lf
->
th»adId
);

413 
	`ALOGD
("startPC: %#xƒndPC: %#x currPC: %#x",

414 ()
shadowS·û
->
¡¬tPC
, ()shadowS·û->
’dPC
, ()
pc
);

415 
	`£lfV”ifiÿtiÚDumpS‹
(
pc
, 
£lf
);

416 
	`£lfV”ifiÿtiÚDumpT¿û
(
pc
, 
£lf
);

417 
	`£lfV”ifiÿtiÚSpšLoİ
(
shadowS·û
);

421 
shadowS·û
->
Œaû
[shadowS·û->
ŒaûL’gth
].
addr
 = ()
pc
;

422 
shadowS·û
->
Œaû
[shadowS·û->
ŒaûL’gth
].
decIn¢
 = decInsn;

423 
shadowS·û
->
ŒaûL’gth
++;

424 
	}
}

431 
	$dvmJ™StİT¿n¦©iÚReque¡s
()

444 
gDvmJ™
.
pProfTabË
 = 
NULL
;

445 
	`dvmJ™Upd©eTh»adS‹AÎ
();

446 
	}
}

448 #ià
defšed
(
WITH_JIT_TUNING
)

450 
	$dvmBumpNoChaš
(
äom
)

452 
gDvmJ™
.
noChašEx™
[
äom
]++;

453 
	}
}

456 
	$dvmBumpNÜm®
()

458 
gDvmJ™
.
nÜm®Ex™
++;

459 
	}
}

462 
	$dvmBumpPuÁ
(
äom
)

464 
gDvmJ™
.
puÁEx™
++;

465 
	}
}

469 
	$dvmJ™Sts
()

471 
i
;

472 
h™
;

473 
nÙ_h™
;

474 
chašs
;

475 
¡ubs
;

476 ià(
gDvmJ™
.
pJ™EÁryTabË
) {

477 
i
=0, 
¡ubs
=
chašs
=
h™
=
nÙ_h™
=0;

478 
i
 < (è
gDvmJ™
.
j™TabËSize
;

479 
i
++) {

480 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
dPC
 != 0) {

481 
h™
++;

482 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
 ==

483 
	`dvmComp”G‘IÁ”´‘Tem¶©e
())

484 
¡ubs
++;

486 
nÙ_h™
++;

487 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
u
.
šfo
.
chaš
 !ğgDvmJ™.
j™TabËSize
)

488 
chašs
++;

490 
	`ALOGD
("JIT:able size is %d,ƒntries used is %d",

491 
gDvmJ™
.
j™TabËSize
, gDvmJ™.
j™TabËEÁr›sU£d
);

492 
	`ALOGD
("JIT: %draces, %d slots, %d chains, %dhresh, %s",

493 
h™
, 
nÙ_h™
 + h™, 
chašs
, 
gDvmJ™
.
th»shŞd
,

494 
gDvmJ™
.
blockšgMode
 ? "Blocking" : "Non-blocking");

496 #ià
	`defšed
(
WITH_JIT_TUNING
)

497 
	`ALOGD
("JIT: Codÿch·tches: %d", 
gDvmJ™
.
codeCacheP©ches
);

499 
	`ALOGD
("JIT: Lookups: %d hits, %d misses; %d‚ormal, %d…unt",

500 
gDvmJ™
.
addrLookupsFound
, gDvmJ™.
addrLookupsNÙFound
,

501 
gDvmJ™
.
nÜm®Ex™
, gDvmJ™.
puÁEx™
);

503 
	`ALOGD
("JIT: ICH™s: %d", 
gDvmICH™CouÁ
);

505 
	`ALOGD
("JIT:‚oChainExit: %d IC miss, %d interp callsite, "

507 
gDvmJ™
.
noChašEx™
[
kIÆšeCacheMiss
],

508 
gDvmJ™
.
noChašEx™
[
kC®ls™eIÁ”´‘ed
],

509 
gDvmJ™
.
noChašEx™
[
kSw™chOv”æow
]);

511 
	`ALOGD
("JIT: ICPatch: %d init, %d„ejected, %d†ock-free, %d queued, "

513 
gDvmJ™
.
icP©chIn™
, gDvmJ™.
icP©chRejeùed
,

514 
gDvmJ™
.
icP©chLockF»e
, gDvmJ™.
icP©chQueued
,

515 
gDvmJ™
.
icP©chDrİ³d
);

517 
	`ALOGD
("JIT: Invoke: %d mono, %d…oly, %d‚ative, %d„eturn",

518 
gDvmJ™
.
švokeMÚomÜphic
, gDvmJ™.
švokePŞymÜphic
,

519 
gDvmJ™
.
švokeN©ive
, gDvmJ™.
»tuºOp
);

520 
	`ALOGD
("JIT: Inline: %d mgetter, %d msetter, %d…getter, %d…setter",

521 
gDvmJ™
.
švokeMÚoG‘‹rIÆšed
, gDvmJ™.
švokeMÚoS‘‹rIÆšed
,

522 
gDvmJ™
.
švokePŞyG‘‹rIÆšed
, gDvmJ™.
švokePŞyS‘‹rIÆšed
);

523 
	`ALOGD
("JIT: TÙ® comp©iÚime: %Îu ms", 
gDvmJ™
.
j™Time
 / 1000);

524 
	`ALOGD
("JIT: Avg unit compilationime: %llu us",

525 
gDvmJ™
.
numComp©iÚs
 == 0 ? 0 :

526 
gDvmJ™
.
j™Time
 / gDvmJ™.
numComp©iÚs
);

527 
	`ALOGD
("JIT: Potential GC blocked by compiler: max %llu us / "

529 
gDvmJ™
.
maxComp”Th»adBlockGCTime
,

530 
gDvmJ™
.
numComp”Th»adBlockGC
 == 0 ?

531 0 : 
gDvmJ™
.
comp”Th»adBlockGCTime
 /

532 
gDvmJ™
.
numComp”Th»adBlockGC
,

533 
gDvmJ™
.
numComp”Th»adBlockGC
);

536 
	`ALOGD
("JIT: %d Translation chains, %d interp stubs",

537 
gDvmJ™
.
Œª¦©iÚChašs
, 
¡ubs
);

538 ià(
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgCÚtšuous
) {

539 
	`dvmComp”SÜtAndPrštT¿ûProfes
();

542 
	}
}

546 
	$dvmJ™EndT¿ûS–eù
(
Th»ad
* 
£lf
, cÚ¡ 
u2
* 
dPC
)

548 ià(
£lf
->
j™S‹
 =ğ
kJ™TS–eù
) {

549 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

551 ià(
£lf
->
j™S‹
 =ğ
kJ™TS–eùEnd
) {

553 
	`dvmCheckJ™
(
dPC
, 
£lf
);

555 
	}
}

561 
J™EÁry
 *
	$lookupAndAdd
(cÚ¡ 
u2
* 
dPC
, 
boŞ
 
ÿÎ”Locked
,

562 
boŞ
 
isM‘hodEÁry
)

564 
u4
 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

565 
u4
 
idx
 = 
	`dvmJ™Hash
(
dPC
);

571 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) &&

572 ((
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 != dPC) ||

573 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 !=

574 
isM‘hodEÁry
))) {

575 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

578 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 != dPC ||

579 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 != isMethodEntry) {

586 ià(!
ÿÎ”Locked
)

587 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

594 
	`ANDROID_MEMBAR_FULL
();

595 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 !ğ
NULL
) {

596 
u4
 
´ev
;

597 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

598 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 == dPC &&

599 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 ==

600 
isM‘hodEÁry
) {

602 ià(!
ÿÎ”Locked
)

603 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

604  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

606 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

610 
	`as£¹
(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 !ğ
NULL
);

612 
´ev
 = 
idx
;

613 
Œue
) {

614 
idx
++;

615 ià(
idx
 =ğ
chašEndM¬k”
)

616 
idx
 = 0;

617 ià((
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
NULL
) ||

618 (
idx
 =ğ
´ev
))

621 ià(
idx
 !ğ
´ev
) {

622 
J™EÁryInfoUniÚ
 
ŞdV®ue
;

623 
J™EÁryInfoUniÚ
 
ÃwV®ue
;

630 
ŞdV®ue
 = 
gDvmJ™
.
pJ™EÁryTabË
[
´ev
].
u
;

631 
ÃwV®ue
 = 
ŞdV®ue
;

632 
ÃwV®ue
.
šfo
.
chaš
 = 
idx
;

633 } 
	`ªdroid_©omic_»Ëa£_ÿs
(
ŞdV®ue
.
šfoWÜd
,

634 
ÃwV®ue
.
šfoWÜd
,

635 &
gDvmJ™
.
pJ™EÁryTabË
[
´ev
].
u
.
šfoWÜd
) != 0);

638 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
NULL
) {

639 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 = isMethodEntry;

644 
	`ªdroid_©omic_»Ëa£_¡Üe
((
št32_t
)
dPC
,

645 (vŞ©
št32_t
 *)(*)&
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
);

646 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 = dPC;

647 
gDvmJ™
.
j™TabËEÁr›sU£d
++;

650 
idx
 = 
chašEndM¬k”
;

652 ià(!
ÿÎ”Locked
)

653 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

655  (
idx
 =ğ
chašEndM¬k”
è? 
NULL
 : &
gDvmJ™
.
pJ™EÁryTabË
[idx];

656 
	}
}

659 
	$dvmJ™DumpT¿ûDesc
(
J™T¿ûDesütiÚ
 *
Œaû
)

661 
i
;

662 
boŞ
 
dÚe
 = 
çl£
;

663 cÚ¡ 
u2
* 
dpc
;

664 cÚ¡ 
u2
* 
dpcBa£
;

665 
curF¿g
 = 0;

666 
	`ALOGD
("===========================================");

667 
	`ALOGD
("T¿û dum°%#x, M‘hod % ofà%#x",()
Œaû
,

668 
Œaû
->
m‘hod
->
Çme
,Œaû->Œaû[
curF¿g
].
šfo
.
äag
.
¡¬tOff£t
);

669 
dpcBa£
 = 
Œaû
->
m‘hod
->
š¢s
;

670 !
dÚe
) {

671 
DecodedIn¡ruùiÚ
 
decIn¢
;

672 ià(
Œaû
->Œaû[
curF¿g
].
isCode
) {

673 
	`ALOGD
("Frag[%d]- Insts: %d, start: %#x, hint: %#x,ƒnd: %d",

674 
curF¿g
, 
Œaû
->Œaû[curF¿g].
šfo
.
äag
.
numIn¡s
,

675 
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
¡¬tOff£t
,

676 
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
hšt
,

677 
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
runEnd
);

678 
dpc
 = 
dpcBa£
 + 
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
¡¬tOff£t
;

679 
i
=0; i<
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
numIn¡s
; i++) {

680 
	`dexDecodeIn¡ruùiÚ
(
dpc
, &
decIn¢
);

681 
	`ALOGD
(" 0x%04x - % %#x",(
dpc
-
dpcBa£
),

682 
	`dexG‘OpcodeName
(
decIn¢
.
İcode
),()
dpc
);

683 
dpc
 +ğ
	`dexG‘WidthFromOpcode
(
decIn¢
.
İcode
);

685 ià(
Œaû
->Œaû[
curF¿g
].
šfo
.
äag
.
runEnd
) {

686 
dÚe
 = 
Œue
;

689 
	`ALOGD
("F¿g[%d]- META info: 0x%08x", 
curF¿g
,

690 ()
Œaû
->Œaû[
curF¿g
].
šfo
.
m‘a
);

692 
curF¿g
++;

694 
	`ALOGD
("-------------------------------------------");

695 
	}
}

704 
	$š£¹CÏssM‘hodInfo
(
Th»ad
* 
£lf
,

705 cÚ¡ 
CÏssObjeù
* 
thisCÏss
,

706 cÚ¡ 
M‘hod
* 
ÿÎ“M‘hod
,

707 cÚ¡ 
DecodedIn¡ruùiÚ
* 
š¢
)

709 
cu¼T¿ûRun
 = ++
£lf
->currTraceRun;

710 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
m‘a
 = 
thisCÏss
 ?

711 (*è
thisCÏss
->
desütÜ
 : 
NULL
;

712 
£lf
->
Œaû
[
cu¼T¿ûRun
].
isCode
 = 
çl£
;

714 
cu¼T¿ûRun
 = ++
£lf
->currTraceRun;

715 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
m‘a
 = 
thisCÏss
 ?

716 (*è
thisCÏss
->
şassLßd”
 : 
NULL
;

717 
£lf
->
Œaû
[
cu¼T¿ûRun
].
isCode
 = 
çl£
;

719 
cu¼T¿ûRun
 = ++
£lf
->currTraceRun;

720 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
m‘a
 = (*è
ÿÎ“M‘hod
;

721 
£lf
->
Œaû
[
cu¼T¿ûRun
].
isCode
 = 
çl£
;

722 
	}
}

736 
	$š£¹MoveResuÉ
(cÚ¡ 
u2
 *
Ï¡PC
, 
Ën
, 
off£t
,

737 
Th»ad
 *
£lf
)

739 
DecodedIn¡ruùiÚ
 
ÃxtDecIn¢
;

740 cÚ¡ 
u2
 *
moveResuÉPC
 = 
Ï¡PC
 + 
Ën
;

742 
	`dexDecodeIn¡ruùiÚ
(
moveResuÉPC
, &
ÃxtDecIn¢
);

743 ià((
ÃxtDecIn¢
.
İcode
 !ğ
OP_MOVE_RESULT
) &&

744 (
ÃxtDecIn¢
.
İcode
 !ğ
OP_MOVE_RESULT_WIDE
) &&

745 (
ÃxtDecIn¢
.
İcode
 !ğ
OP_MOVE_RESULT_OBJECT
))

749 
cu¼T¿ûRun
 = ++
£lf
->currTraceRun;

750 
£lf
->
cu¼RunH—d
 = 
moveResuÉPC
;

751 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
¡¬tOff£t
 = 
off£t
 + 
Ën
;

752 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
numIn¡s
 = 1;

753 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
runEnd
 = 
çl£
;

754 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
hšt
 = 
kJ™HštNÚe
;

755 
£lf
->
Œaû
[
cu¼T¿ûRun
].
isCode
 = 
Œue
;

756 
£lf
->
tÙ®T¿ûL’
++;

758 
£lf
->
cu¼RunL’
 = 
	`dexG‘WidthFromIn¡ruùiÚ
(
moveResuÉPC
);

759 
	}
}

777 
	$dvmCheckJ™
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
)

779 cÚ¡ 
CÏssObjeù
 *
thisCÏss
 = 
£lf
->
ÿÎs™eCÏss
;

780 cÚ¡ 
M‘hod
* 
curM‘hod
 = 
£lf
->
m‘hodToC®l
;

781 
æags
, 
Ën
;

782 
®lDÚe
 = 
çl£
;

784 
boŞ
 
¡ayOÃMÜeIn¡
 = 
çl£
;

787 cÚ¡ 
u2
 *
Ï¡PC
 = 
£lf
->lastPC;

789 
£lf
->
Ï¡PC
 = 
pc
;

791 
£lf
->
j™S‹
) {

792 
off£t
;

793 
DecodedIn¡ruùiÚ
 
decIn¢
;

794 
kJ™TS–eù
:

796 ià(
Ï¡PC
 =ğ
NULL
) ;

798 
	`dexDecodeIn¡ruùiÚ
(
Ï¡PC
, &
decIn¢
);

805 ià(
£lf
->
tÙ®T¿ûL’
 != 0 &&

806 (
decIn¢
.
İcode
 =ğ
OP_PACKED_SWITCH
 ||

807 
decIn¢
.
İcode
 =ğ
OP_SPARSE_SWITCH
)) {

808 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

812 #ià
	`defšed
(
SHOW_TRACE
)

813 
	`ALOGD
("TraceGen:‡dding %s.†pc:%#x,…c:%#x",

814 
	`dexG‘OpcodeName
(
decIn¢
.
İcode
), ()
Ï¡PC
, ()
pc
);

816 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
decIn¢
.
İcode
);

817 
Ën
 = 
	`dexG‘WidthFromIn¡ruùiÚ
(
Ï¡PC
);

818 
off£t
 = 
Ï¡PC
 - 
£lf
->
ŒaûM‘hod
->
š¢s
;

819 
	`as£¹
((è
off£t
 <

820 
	`dvmG‘M‘hodIn¢sSize
(
£lf
->
ŒaûM‘hod
));

821 ià(
Ï¡PC
 !ğ
£lf
->
cu¼RunH—d
 + s–f->
cu¼RunL’
) {

822 
cu¼T¿ûRun
;

824 
cu¼T¿ûRun
 = ++
£lf
->currTraceRun;

825 
£lf
->
cu¼RunL’
 = 0;

826 
£lf
->
cu¼RunH—d
 = (
u2
*)
Ï¡PC
;

827 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
¡¬tOff£t
 = 
off£t
;

828 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
numIn¡s
 = 0;

829 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
runEnd
 = 
çl£
;

830 
£lf
->
Œaû
[
cu¼T¿ûRun
].
šfo
.
äag
.
hšt
 = 
kJ™HštNÚe
;

831 
£lf
->
Œaû
[
cu¼T¿ûRun
].
isCode
 = 
Œue
;

833 
£lf
->
Œaû
[£lf->
cu¼T¿ûRun
].
šfo
.
äag
.
numIn¡s
++;

834 
£lf
->
tÙ®T¿ûL’
++;

835 
£lf
->
cu¼RunL’
 +ğ
Ën
;

842 
ÃedRe£rvedRun
 = (
æags
 & 
kIn¡rInvoke
) ? 1 : 0;

845 ià(
£lf
->
cu¼T¿ûRun
 ==

846 (
MAX_JIT_RUN_LEN
 - 1 - 
ÃedRe£rvedRun
)) {

847 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

851 ià(!
	`dexIsGÙo
(
æags
) &&

852 ((
æags
 & (
kIn¡rCªB¿nch
 |

853 
kIn¡rCªSw™ch
 |

854 
kIn¡rCªR‘uº
 |

855 
kIn¡rInvoke
)) != 0)) {

856 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

857 #ià
	`defšed
(
SHOW_TRACE
)

858 
	`ALOGD
("TraceGen:ƒnding on %s, basic blockƒnd",

859 
	`dexG‘OpcodeName
(
decIn¢
.
İcode
));

868 ià(
æags
 & 
kIn¡rInvoke
) {

869 
	`š£¹CÏssM‘hodInfo
(
£lf
, 
thisCÏss
, 
curM‘hod
,

870 &
decIn¢
);

871 
	`š£¹MoveResuÉ
(
Ï¡PC
, 
Ën
, 
off£t
, 
£lf
);

875 ià((
decIn¢
.
İcode
 =ğ
OP_THROW
è|| (
Ï¡PC
 =ğ
pc
)){

876 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

878 ià(
£lf
->
tÙ®T¿ûL’
 >ğ
JIT_MAX_TRACE_LEN
) {

879 
£lf
->
j™S‹
 = 
kJ™TS–eùEnd
;

881 ià((
æags
 & 
kIn¡rCªR‘uº
) != kInstrCanReturn) {

892 ià(
decIn¢
.
İcode
 !ğ
OP_RETURN_VOID
) {

893 
¡ayOÃMÜeIn¡
 = 
Œue
;

897 
kJ™TS–eùEnd
:

900 ià(
£lf
->
tÙ®T¿ûL’
 == 0) {

901 
	`dvmJ™S‘CodeAddr
(
£lf
->
cu¼T¿ûH—d
,

902 
	`dvmComp”G‘IÁ”´‘Tem¶©e
(),

903 
	`dvmComp”G‘IÁ”´‘Tem¶©eS‘
(),

904 
çl£
 , 0);

905 
£lf
->
j™S‹
 = 
kJ™DÚe
;

906 
®lDÚe
 = 
Œue
;

910 
Ï¡T¿ûDesc
 = 
£lf
->
cu¼T¿ûRun
;

913 ià(!
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
isCode
) {

914 
Ï¡T¿ûDesc
 = ++
£lf
->
cu¼T¿ûRun
;

915 
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
šfo
.
äag
.
¡¬tOff£t
 = 0;

916 
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
šfo
.
äag
.
numIn¡s
 = 0;

917 
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
šfo
.
äag
.
hšt
 = 
kJ™HštNÚe
;

918 
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
isCode
 = 
Œue
;

922 
£lf
->
Œaû
[
Ï¡T¿ûDesc
].
šfo
.
äag
.
runEnd
 = 
Œue
;

924 
J™T¿ûDesütiÚ
* 
desc
 =

925 (
J™T¿ûDesütiÚ
*)
	`m®loc
((JitTraceDescription) +

926 (
J™T¿ûRun
è* (
£lf
->
cu¼T¿ûRun
+1));

928 ià(
desc
 =ğ
NULL
) {

929 
	`ALOGE
("Out of memory inrace selection");

930 
	`dvmJ™StİT¿n¦©iÚReque¡s
();

931 
£lf
->
j™S‹
 = 
kJ™DÚe
;

932 
®lDÚe
 = 
Œue
;

936 
desc
->
m‘hod
 = 
£lf
->
ŒaûM‘hod
;

937 
	`memıy
((*)&(
desc
->
Œaû
[0]),

938 (*)&(
£lf
->
Œaû
[0]),

939 (
J™T¿ûRun
è* (
£lf
->
cu¼T¿ûRun
+1));

940 #ià
	`defšed
(
SHOW_TRACE
)

941 
	`ALOGD
("TraceGen:race done,‡ddingo queue");

942 
	`dvmJ™DumpT¿ûDesc
(
desc
);

944 ià(
	`dvmComp”WÜkEnqueue
(

945 
£lf
->
cu¼T¿ûH—d
,
kWÜkOrd”T¿û
,
desc
)) {

947 ià(
gDvmJ™
.
blockšgMode
) {

948 
	`dvmComp”D¿šQueue
();

955 
	`ä“
(
desc
);

957 
£lf
->
j™S‹
 = 
kJ™DÚe
;

958 
®lDÚe
 = 
Œue
;

961 
kJ™DÚe
:

962 
®lDÚe
 = 
Œue
;

964 
kJ™NÙ
:

965 
®lDÚe
 = 
Œue
;

968 
	`ALOGE
("UÃx³ùed JIT s‹: %d", 
£lf
->
j™S‹
);

969 
	`dvmAbÜt
();

976 ià(
®lDÚe
) {

977 
	`dvmDi§bËSubMode
(
£lf
, 
kSubModeJ™T¿ûBud
);

978 ià(
¡ayOÃMÜeIn¡
) {

981 
£lf
->
j™ResumeNPC
 = 
NULL
;

983 ià(
£lf
->
sšgËS‹pCouÁ
 == 0)

984 
£lf
->
sšgËS‹pCouÁ
 = 1;

985 
	`dvmEÇbËSubMode
(
£lf
, 
kSubModeCouÁedS‹p
);

989 
	}
}

991 
J™EÁry
 *
	$dvmJ™FšdEÁry
(cÚ¡ 
u2
* 
pc
, 
boŞ
 
isM‘hodEÁry
)

993 
idx
 = 
	`dvmJ™Hash
(
pc
);

996 ià((
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
pc
) &&

997 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 == isMethodEntry))

998  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

1000 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

1001 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

1002 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

1003 ià((
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
pc
) &&

1004 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 ==

1005 
isM‘hodEÁry
))

1006  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

1009  
NULL
;

1010 
	}
}

1016 * 
	$g‘CodeAddrCommÚ
(cÚ¡ 
u2
* 
dPC
, 
boŞ
 
m‘hodEÁry
)

1018 
idx
 = 
	`dvmJ™Hash
(
dPC
);

1019 cÚ¡ 
u2
* 
pc
 = 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
;

1020 ià(
pc
 !ğ
NULL
) {

1021 
boŞ
 
hideT¿n¦©iÚ
 = 
	`dvmJ™HideT¿n¦©iÚ
();

1022 ià(
pc
 =ğ
dPC
 &&

1023 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 =ğ
m‘hodEÁry
) {

1024 
off£t
 = (
gDvmJ™
.
´ofeMode
 >ğ
kT¿ûProfšgCÚtšuous
) ?

1025 0 : 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
´ofeOff£t
;

1026 
šŒ_t
 
codeAdd»ss
 =

1027 (
šŒ_t
)
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
codeAdd»ss
;

1028 #ià
	`defšed
(
WITH_JIT_TUNING
)

1029 
gDvmJ™
.
addrLookupsFound
++;

1031  
hideT¿n¦©iÚ
 || !
codeAdd»ss
 ? 
NULL
 :

1032 (*)(
codeAdd»ss
 + 
off£t
);

1034 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

1035 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

1036 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

1037 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 == dPC &&

1038 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
isM‘hodEÁry
 ==

1039 
m‘hodEÁry
) {

1040 
off£t
 = (
gDvmJ™
.
´ofeMode
 >=

1041 
kT¿ûProfšgCÚtšuous
) ? 0 :

1042 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
´ofeOff£t
;

1043 
šŒ_t
 
codeAdd»ss
 =

1044 (
šŒ_t
)
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
codeAdd»ss
;

1045 #ià
	`defšed
(
WITH_JIT_TUNING
)

1046 
gDvmJ™
.
addrLookupsFound
++;

1048  
hideT¿n¦©iÚ
 || !
codeAdd»ss
 ? 
NULL
 :

1049 (*)(
codeAdd»ss
 + 
off£t
);

1054 #ià
	`defšed
(
WITH_JIT_TUNING
)

1055 
gDvmJ™
.
addrLookupsNÙFound
++;

1057  
NULL
;

1058 
	}
}

1064 * 
	$dvmJ™G‘T¿ûAddr
(cÚ¡ 
u2
* 
dPC
)

1066  
	`g‘CodeAddrCommÚ
(
dPC
, 
çl£
 );

1067 
	}
}

1073 * 
	$dvmJ™G‘M‘hodAddr
(cÚ¡ 
u2
* 
dPC
)

1075  
	`g‘CodeAddrCommÚ
(
dPC
, 
Œue
 );

1076 
	}
}

1082 * 
	$dvmJ™G‘T¿ûAddrTh»ad
(cÚ¡ 
u2
* 
dPC
, 
Th»ad
* 
£lf
)

1084  (
£lf
->
š‹½B»ak
.
ùl
.
b»akFÏgs
 !ğ0è? 
NULL
 :

1085 
	`g‘CodeAddrCommÚ
(
dPC
, 
çl£
 );

1086 
	}
}

1092 * 
	$dvmJ™G‘M‘hodAddrTh»ad
(cÚ¡ 
u2
* 
dPC
, 
Th»ad
* 
£lf
)

1094  (
£lf
->
š‹½B»ak
.
ùl
.
b»akFÏgs
 !ğ0è? 
NULL
 :

1095 
	`g‘CodeAddrCommÚ
(
dPC
, 
Œue
 );

1096 
	}
}

1111 
	$dvmJ™S‘CodeAddr
(cÚ¡ 
u2
* 
dPC
, *
nPC
, 
J™In¡ruùiÚS‘Ty³
 
£t
,

1112 
boŞ
 
isM‘hodEÁry
, 
´ofeP»fixSize
)

1114 
J™EÁryInfoUniÚ
 
ŞdV®ue
;

1115 
J™EÁryInfoUniÚ
 
ÃwV®ue
;

1121 
J™EÁry
 *
j™EÁry
 = 
isM‘hodEÁry
 ?

1122 
	`lookupAndAdd
(
dPC
, 
çl£
 , 
isM‘hodEÁry
) :

1123 
	`dvmJ™FšdEÁry
(
dPC
, 
isM‘hodEÁry
);

1124 
	`as£¹
(
j™EÁry
);

1127 
ŞdV®ue
 = 
j™EÁry
->
u
;

1128 
ÃwV®ue
 = 
ŞdV®ue
;

1129 
ÃwV®ue
.
šfo
.
isM‘hodEÁry
 = isMethodEntry;

1130 
ÃwV®ue
.
šfo
.
š¡ruùiÚS‘
 = 
£t
;

1131 
ÃwV®ue
.
šfo
.
´ofeOff£t
 = 
´ofeP»fixSize
;

1132 } 
	`ªdroid_©omic_»Ëa£_ÿs
(

1133 
ŞdV®ue
.
šfoWÜd
, 
ÃwV®ue
.infoWord,

1134 &
j™EÁry
->
u
.
šfoWÜd
) != 0);

1135 
j™EÁry
->
codeAdd»ss
 = 
nPC
;

1136 
	}
}

1143 
	$dvmJ™CheckT¿ûReque¡
(
Th»ad
* 
£lf
)

1145 
i
;

1194 
u4
 
m‘hodKey
 = (u4)
£lf
->
š‹½Save
.
m‘hod
 <<

1195 (
JIT_TRACE_THRESH_FILTER_PC_BITS
 - 2);

1196 
u4
 
pcKey
 = ((u4)
£lf
->
š‹½Save
.
pc
 >> 1) &

1197 ((1 << 
JIT_TRACE_THRESH_FILTER_PC_BITS
) - 1);

1198 
šŒ_t
 
f‹rKey
 = (šŒ_t)(
m‘hodKey
 | 
pcKey
);

1201 
	`as£¹
((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
)==0);

1204 ià((
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
) &&

1205 ((
£lf
->
š‹½B»ak
.
ùl
.
b»akFÏgs
 & 
kIÁ”pSšgËS‹p
) == 0)){

1207 ià(
£lf
->
j™S‹
 =ğ
kJ™TS–eùReque¡
 &&

1208 
gDvmJ™
.
th»shŞd
 > 6) {

1210 
i
=0; i< 
JIT_TRACE_THRESH_FILTER_SIZE
; i++) {

1211 ià(
f‹rKey
 =ğ
£lf
->
th»shF‹r
[
i
]) {

1212 
£lf
->
th»shF‹r
[
i
] = 0;

1216 ià(
i
 =ğ
JIT_TRACE_THRESH_FILTER_SIZE
) {

1222 
i
 = 
	`¿nd
(è% 
JIT_TRACE_THRESH_FILTER_SIZE
;

1223 
£lf
->
th»shF‹r
[
i
] = 
f‹rKey
;

1224 
£lf
->
j™S‹
 = 
kJ™DÚe
;

1229 ià(
gDvmJ™
.
comp”QueueL’gth
 >ğgDvmJ™.
comp”HighW©”
) {

1230 
£lf
->
j™S‹
 = 
kJ™DÚe
;

1237 ià(
£lf
->
j™S‹
 =ğ
kJ™TS–eùReque¡
 ||

1238 
£lf
->
j™S‹
 =ğ
kJ™TS–eùReque¡HÙ
) {

1239 ià(
	`dvmJ™FšdEÁry
(
£lf
->
š‹½Save
.
pc
, 
çl£
)) {

1241 
£lf
->
j™S‹
 = 
kJ™DÚe
;

1243 
J™EÁry
 *
¦Ù
 = 
	`lookupAndAdd
(
£lf
->
š‹½Save
.
pc
,

1244 
çl£
 ,

1245 
çl£
 );

1246 ià(
¦Ù
 =ğ
NULL
) {

1253 
£lf
->
j™S‹
 = 
kJ™DÚe
;

1254 
	`ALOGD
("JIT: JitTable full, disabling…rofiling");

1255 
	`dvmJ™StİT¿n¦©iÚReque¡s
();

1260 
£lf
->
j™S‹
) {

1261 
kJ™TS–eùReque¡
:

1262 
kJ™TS–eùReque¡HÙ
:

1263 
£lf
->
j™S‹
 = 
kJ™TS–eù
;

1264 
£lf
->
ŒaûM‘hod
 = s–f->
š‹½Save
.
m‘hod
;

1265 
£lf
->
cu¼T¿ûH—d
 = s–f->
š‹½Save
.
pc
;

1266 
£lf
->
cu¼T¿ûRun
 = 0;

1267 
£lf
->
tÙ®T¿ûL’
 = 0;

1268 
£lf
->
cu¼RunH—d
 = s–f->
š‹½Save
.
pc
;

1269 
£lf
->
cu¼RunL’
 = 0;

1270 
£lf
->
Œaû
[0].
šfo
.
äag
.
¡¬tOff£t
 =

1271 
£lf
->
š‹½Save
.
pc
 - s–f->š‹½Save.
m‘hod
->
š¢s
;

1272 
£lf
->
Œaû
[0].
šfo
.
äag
.
numIn¡s
 = 0;

1273 
£lf
->
Œaû
[0].
šfo
.
äag
.
runEnd
 = 
çl£
;

1274 
£lf
->
Œaû
[0].
šfo
.
äag
.
hšt
 = 
kJ™HštNÚe
;

1275 
£lf
->
Œaû
[0].
isCode
 = 
Œue
;

1276 
£lf
->
Ï¡PC
 = 0;

1278 
	`dvmEÇbËSubMode
(
£lf
, 
kSubModeJ™T¿ûBud
);

1279 #ià
	`defšed
(
SHOW_TRACE
)

1280 
	`ALOGD
("Startingrace for %s‡t %#x",

1281 
£lf
->
š‹½Save
.
m‘hod
->
Çme
, ()£lf->š‹½Save.
pc
);

1284 
kJ™DÚe
:

1287 
	`ALOGE
("UÃx³ùed JIT s‹: %d", 
£lf
->
j™S‹
);

1288 
	`dvmAbÜt
();

1292 
£lf
->
j™S‹
 = 
kJ™DÚe
;

1294 
	}
}

1301 
boŞ
 
	$dvmJ™ResizeJ™TabË
Ğ
size
 )

1303 
J™EÁry
 *
pNewTabË
;

1304 
J™EÁry
 *
pOldTabË
;

1305 
J™EÁry
 
‹mpEÁry
;

1306 
ŞdSize
;

1307 
i
;

1309 
	`as£¹
(
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
);

1310 
	`as£¹
(
size
 && !(size & (size - 1)));

1312 
	`ALOGI
("J™:„esizšg J™TabË from %dØ%d", 
gDvmJ™
.
j™TabËSize
, 
size
);

1314 ià(
size
 <ğ
gDvmJ™
.
j™TabËSize
) {

1315  
Œue
;

1319 
‹mpEÁry
.
u
.
šfo
.
chaš
 = 
size
;

1320 ià(
‹mpEÁry
.
u
.
šfo
.
chaš
 !ğ
size
) {

1321 
	`ALOGD
("J™: J™TabË„eque¡ oà%doØbig", 
size
);

1322  
Œue
;

1325 
pNewTabË
 = (
J™EÁry
*)
	`ÿÎoc
(
size
, (*pNewTable));

1326 ià(
pNewTabË
 =ğ
NULL
) {

1327  
Œue
;

1329 
i
=0; i< 
size
; i++) {

1330 
pNewTabË
[
i
].
u
.
šfo
.
chaš
 = 
size
;

1334 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_TBL_RESIZE
);

1336 
pOldTabË
 = 
gDvmJ™
.
pJ™EÁryTabË
;

1337 
ŞdSize
 = 
gDvmJ™
.
j™TabËSize
;

1339 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

1340 
gDvmJ™
.
pJ™EÁryTabË
 = 
pNewTabË
;

1341 
gDvmJ™
.
j™TabËSize
 = 
size
;

1342 
gDvmJ™
.
j™TabËMask
 = 
size
 - 1;

1343 
gDvmJ™
.
j™TabËEÁr›sU£d
 = 0;

1345 
i
=0; i < 
ŞdSize
; i++) {

1346 ià(
pOldTabË
[
i
].
dPC
) {

1347 
J™EÁry
 *
p
;

1348 
u2
 
chaš
;

1349 
p
 = 
	`lookupAndAdd
(
pOldTabË
[
i
].
dPC
, 
Œue
 ,

1350 
pOldTabË
[
i
].
u
.
šfo
.
isM‘hodEÁry
);

1351 
p
->
codeAdd»ss
 = 
pOldTabË
[
i
].codeAddress;

1353 
chaš
 = 
p
->
u
.
šfo
.chain;

1354 
p
->
u
 = 
pOldTabË
[
i
].u;

1355 
p
->
u
.
šfo
.
chaš
 = chain;

1359 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

1361 
	`ä“
(
pOldTabË
);

1364 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_TBL_RESIZE
);

1366  
çl£
;

1367 
	}
}

1372 
	$dvmJ™Re£tTabË
()

1374 
J™EÁry
 *
j™EÁry
 = 
gDvmJ™
.
pJ™EÁryTabË
;

1375 
size
 = 
gDvmJ™
.
j™TabËSize
;

1376 
i
;

1378 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

1381 ià(
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
) {

1382 
i
=0; i < 
JIT_PROF_BLOCK_BUCKETS
; i++) {

1383 ià(
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
buck‘s
[
i
])

1384 
	`mem£t
((*è
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
buck‘s
[
i
],

1385 0, (
J™T¿ûCouÁ”_t
è* 
JIT_PROF_BLOCK_ENTRIES
);

1387 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
Ãxt
 = 0;

1390 
	`mem£t
((*è
j™EÁry
, 0, (
J™EÁry
è* 
size
);

1391 
i
=0; i< 
size
; i++) {

1392 
j™EÁry
[
i
].
u
.
šfo
.
chaš
 = 
size
;

1394 
gDvmJ™
.
j™TabËEÁr›sU£d
 = 0;

1395 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

1396 
	}
}

1403 
J™T¿ûCouÁ”_t
 *
	$dvmJ™NextT¿ûCouÁ”
()

1405 
idx
 = 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
Ãxt
 / 
JIT_PROF_BLOCK_ENTRIES
;

1406 
–em
 = 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
Ãxt
 % 
JIT_PROF_BLOCK_ENTRIES
;

1407 
J™T¿ûCouÁ”_t
 *
»s
;

1409 ià(!
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
buck‘s
[
idx
]) {

1410 
J™T¿ûCouÁ”_t
 *
p
 =

1411 (
J™T¿ûCouÁ”_t
*è
	`ÿÎoc
(
JIT_PROF_BLOCK_ENTRIES
, (*
p
));

1412 ià(!
p
) {

1413 
	`ALOGE
("Failedo‡llocate block ofrace…rofile counters");

1414 
	`dvmAbÜt
();

1416 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
buck‘s
[
idx
] = 
p
;

1418 
»s
 = &
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
buck‘s
[
idx
][
–em
];

1419 
gDvmJ™
.
pJ™T¿ûProfCouÁ”s
->
Ãxt
++;

1420  
»s
;

1421 
	}
}

1427 
s8
 
	$dvmJ™d2l
(
d
)

1429 cÚ¡ 
kMaxLÚg
 = ()(
s8
)0x7fffffffffffffffULL;

1430 cÚ¡ 
kMšLÚg
 = ()(
s8
)0x8000000000000000ULL;

1431 ià(
d
 >ğ
kMaxLÚg
)

1432  (
s8
)0x7fffffffffffffffULL;

1433 ià(
d
 <ğ
kMšLÚg
)

1434  (
s8
)0x8000000000000000ULL;

1435 ià(
d
 != d)

1438  (
s8
)
d
;

1439 
	}
}

1441 
s8
 
	$dvmJ™f2l
(
f
)

1443 cÚ¡ 
kMaxLÚg
 = ()(
s8
)0x7fffffffffffffffULL;

1444 cÚ¡ 
kMšLÚg
 = ()(
s8
)0x8000000000000000ULL;

1445 ià(
f
 >ğ
kMaxLÚg
)

1446  (
s8
)0x7fffffffffffffffULL;

1447 ià(
f
 <ğ
kMšLÚg
)

1448  (
s8
)0x8000000000000000ULL;

1449 ià(
f
 != f)

1452  (
s8
)
f
;

1453 
	}
}

1456 
	$dvmJ™ChªgeProfeMode
(
T¿ûProfšgModes
 
ÃwS‹
)

1458 ià(
gDvmJ™
.
´ofeMode
 !ğ
ÃwS‹
) {

1459 
gDvmJ™
.
´ofeMode
 = 
ÃwS‹
;

1460 
	`dvmJ™UnchašAÎ
();

1462 
	}
}

1464 
	$dvmJ™T¿ûProfšgOn
()

1466 ià(
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgP”iodicOff
)

1467 
	`dvmComp”FÜûWÜkEnqueue
(
NULL
, 
kWÜkOrd”ProfeMode
,

1468 (*è
kT¿ûProfšgP”iodicOn
);

1469 ià(
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgDi§bËd
)

1470 
	`dvmComp”FÜûWÜkEnqueue
(
NULL
, 
kWÜkOrd”ProfeMode
,

1471 (*è
kT¿ûProfšgCÚtšuous
);

1472 
	}
}

1474 
	$dvmJ™T¿ûProfšgOff
()

1476 ià(
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgP”iodicOn
)

1477 
	`dvmComp”FÜûWÜkEnqueue
(
NULL
, 
kWÜkOrd”ProfeMode
,

1478 (*è
kT¿ûProfšgP”iodicOff
);

1479 ià(
gDvmJ™
.
´ofeMode
 =ğ
kT¿ûProfšgCÚtšuous
)

1480 
	`dvmComp”FÜûWÜkEnqueue
(
NULL
, 
kWÜkOrd”ProfeMode
,

1481 (*è
kT¿ûProfšgDi§bËd
);

1482 
	}
}

1487 
	$dvmJ™Upd©eTh»adS‹SšgË
(
Th»ad
* 
th»ad
)

1489 
th»ad
->
pJ™ProfTabË
 = 
gDvmJ™
.
pProfTabË
;

1490 
th»ad
->
j™Th»shŞd
 = 
gDvmJ™
.
th»shŞd
;

1491 
	}
}

1497 
	$dvmJ™Upd©eTh»adS‹AÎ
()

1499 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1500 
Th»ad
* 
th»ad
;

1502 
	`dvmLockTh»adLi¡
(
£lf
);

1503 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1504 
	`dvmJ™Upd©eTh»adS‹SšgË
(
th»ad
);

1506 
	`dvmUÆockTh»adLi¡
();

1508 
	}
}

	@vm/interp/Jit.h

19 #iâdeà
DALVIK_INTERP_JIT_H_


20 
	#DALVIK_INTERP_JIT_H_


	)

22 
	~"IÁ”pDefs.h
"

23 
	~"m‹½/commÚ/j™-cÚfig.h
"

25 
	#JIT_MAX_TRACE_LEN
 100

	)

27 #ià
defšed
 (
WITH_SELF_VERIFICATION
)

29 
	#REG_SPACE
 256

	)

30 
	#HEAP_SPACE
 
JIT_MAX_TRACE_LEN


	)

32 
	sShadowH—p
 {

33 
	maddr
;

34 
	md©a
;

37 
	sIn¡ruùiÚT¿û
 {

38 
	maddr
;

39 
DecodedIn¡ruùiÚ
 
	mdecIn¢
;

42 
	sShadowS·û
 {

43 cÚ¡ 
u2
* 
	m¡¬tPC
;

44 
u4
* 
	må
;

45 cÚ¡ 
M‘hod
 *
	mm‘hod
;

46 
DvmDex
* 
	mm‘hodCÏssDex
;

47 
JV®ue
 
	m»tv®
;

48 cÚ¡ 
u1
* 
	mš‹½SckEnd
;

49 
S–fV”ifiÿtiÚS‹
 
	mj™Ex™S‹
;

50 
S–fV”ifiÿtiÚS‹
 
	m£lfV”ifiÿtiÚS‹
;

51 cÚ¡ 
u2
* 
	m’dPC
;

52 * 
	mshadowFP
;

53 * 
	m»gi¡”S·û
;

54 
	m»gi¡”S·ûSize
;

55 
ShadowH—p
 
	mh—pS·û
[
HEAP_SPACE
];

56 
ShadowH—p
* 
	mh—pS·ûTa
;

57 cÚ¡ * 
	m’dShadowFP
;

58 
In¡ruùiÚT¿û
 
	mŒaû
[
JIT_MAX_TRACE_LEN
];

59 
	mŒaûL’gth
;

66 * 
dvmS–fV”ifiÿtiÚShadowS·ûAÎoc
(
Th»ad
* 
£lf
);

67 
dvmS–fV”ifiÿtiÚShadowS·ûF»e
(
Th»ad
* 
£lf
);

68 * 
dvmS–fV”ifiÿtiÚSaveS‹
(cÚ¡ 
u2
* 
pc
, 
u4
* 
å
,

69 
Th»ad
* 
£lf
,

70 
rg‘T¿û
);

71 * 
dvmS–fV”ifiÿtiÚRe¡ÜeS‹
(cÚ¡ 
u2
* 
pc
, 
u4
* 
å
,

72 
S–fV”ifiÿtiÚS‹
 
ex™Pošt
,

73 
Th»ad
 *
£lf
);

74 
dvmCheckS–fV”ifiÿtiÚ
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
);

82 
	#JIT_TRACE_CLASS_DESC
 1

	)

83 
	#JIT_TRACE_CLASS_LOADER
 2

	)

84 
	#JIT_TRACE_CUR_METHOD
 3

	)

90 
šlše
 
u4
 
	$dvmJ™HashMask
ĞcÚ¡ 
u2
* 
p
, 
u4
 
mask
 ) {

91  ((((
u4
)
p
>>12)^(u4í)>>1è& (
mask
);

92 
	}
}

94 
šlše
 
u4
 
	$dvmJ™Hash
ĞcÚ¡ 
u2
* 
p
 ) {

95  
	`dvmJ™HashMask
Ğ
p
, 
gDvmJ™
.
j™TabËMask
 );

96 
	}
}

104 
	#JIT_ENTRY_CHAIN_WIDTH
 2

	)

105 
	#JIT_MAX_ENTRIES
 (1 << (
JIT_ENTRY_CHAIN_WIDTH
 * 8))

	)

111 
	#JIT_PROF_BLOCK_ENTRIES
 1024

	)

112 
	#JIT_PROF_BLOCK_BUCKETS
 (
JIT_MAX_ENTRIES
 / 
JIT_PROF_BLOCK_ENTRIES
)

	)

114 
s4
 
	tJ™T¿ûCouÁ”_t
;

116 
	sJ™T¿ûProfCouÁ”s
 {

117 
	mÃxt
;

118 
J™T¿ûCouÁ”_t
 *
	mbuck‘s
[
JIT_PROF_BLOCK_BUCKETS
];

127 
	sJ™EÁryInfo
 {

128 
	misM‘hodEÁry
:1;

129 
	mšlšeCªdid©e
:1;

130 
	m´ofeEÇbËd
:1;

131 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
:3;

132 
	m´ofeOff£t
:5;

133 
	munu£d
:5;

134 
u2
 
	mchaš
;

137 
	uJ™EÁryInfoUniÚ
 {

138 
J™EÁryInfo
 
	mšfo
;

139 vŞ©
	mšfoWÜd
;

142 
	sJ™EÁry
 {

143 
J™EÁryInfoUniÚ
 
	mu
;

144 cÚ¡ 
u2
* 
	mdPC
;

145 * 
	mcodeAdd»ss
;

149 
dvmCheckJ™
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
);

150 * 
dvmJ™G‘T¿ûAddr
(cÚ¡ 
u2
* 
dPC
);

151 * 
dvmJ™G‘M‘hodAddr
(cÚ¡ 
u2
* 
dPC
);

152 * 
dvmJ™G‘T¿ûAddrTh»ad
(cÚ¡ 
u2
* 
dPC
, 
Th»ad
* 
£lf
);

153 * 
dvmJ™G‘M‘hodAddrTh»ad
(cÚ¡ 
u2
* 
dPC
, 
Th»ad
* 
£lf
);

154 
dvmJ™CheckT¿ûReque¡
(
Th»ad
* 
£lf
);

155 
dvmJ™StİT¿n¦©iÚReque¡s
();

156 #ià
defšed
(
WITH_JIT_TUNING
)

157 
dvmBumpNoChaš
(
äom
);

158 
dvmBumpNÜm®
();

159 
dvmBumpPuÁ
(
äom
);

161 
dvmJ™Sts
();

162 
boŞ
 
dvmJ™ResizeJ™TabË
(
size
);

163 
dvmJ™Re£tTabË
();

164 
J™EÁry
 *
dvmJ™FšdEÁry
(cÚ¡ 
u2
* 
pc
, 
boŞ
 
isM‘hodEÁry
);

165 
s8
 
dvmJ™d2l
(
d
);

166 
s8
 
dvmJ™f2l
(
f
);

167 
dvmJ™S‘CodeAddr
(cÚ¡ 
u2
* 
dPC
, *
nPC
, 
J™In¡ruùiÚS‘Ty³
 
£t
,

168 
boŞ
 
isM‘hodEÁry
, 
´ofeP»fixSize
);

169 
dvmJ™EndT¿ûS–eù
(
Th»ad
* 
£lf
, cÚ¡ 
u2
* 
dPC
);

170 
J™T¿ûCouÁ”_t
 *
dvmJ™NextT¿ûCouÁ”
();

171 
dvmJ™T¿ûProfšgOff
();

172 
dvmJ™T¿ûProfšgOn
();

173 
dvmJ™ChªgeProfeMode
(
T¿ûProfšgModes
 
ÃwS‹
);

174 
dvmJ™DumpT¿ûDesc
(
J™T¿ûDesütiÚ
 *
Œaû
);

175 
dvmJ™Upd©eTh»adS‹SšgË
(
Th»ad
* 
th»—d
);

176 
dvmJ™Upd©eTh»adS‹AÎ
();

177 
dvmJ™ResumeT¿n¦©iÚ
(
Th»ad
* 
£lf
, cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
);

	@vm/interp/Stack.cpp

22 
	~"D®vik.h
"

23 
	~"jni.h
"

25 
	~<¡dlib.h
>

26 
	~<¡d¬g.h
>

28 #ifdeà
HAVE_ANDROID_OS


29 
	~<cÜksüew/backŒaû.h
>

38 
boŞ
 
	$dvmIn™IÁ”pSck
(
Th»ad
* 
th»ad
, 
¡ackSize
)

40 
	`as£¹
(
th»ad
->
š‹½SckS¹
 !ğ
NULL
);

42 
	`as£¹
(
th»ad
->
š‹½Save
.
curF¿me
 =ğ
NULL
);

44  
Œue
;

45 
	}
}

63 
boŞ
 
	$dvmPushIÁ”pF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

65 
SckSaveA»a
* 
§veBlock
;

66 
SckSaveA»a
* 
b»akSaveBlock
;

67 
¡ackReq
;

68 
u1
* 
¡ackPŒ
;

70 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

71 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hod
));

73 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 4

74 + (
SckSaveA»a
) * 2

75 + 
m‘hod
->
outsSize
 * 4;

77 ià(
£lf
->
š‹½Save
.
curF¿me
 !ğ
NULL
)

78 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

80 
¡ackPŒ
 = 
£lf
->
š‹½SckS¹
;

82 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

84 
	`ALOGW
("Stack overflow on callo interp "

86 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
š‹½Save
.
curF¿me
,

87 
£lf
->
š‹½SckSize
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

88 
	`dvmHªdËSckOv”æow
(
£lf
, 
m‘hod
);

89 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

90  
çl£
;

97 
¡ackPŒ
 -ğ(
SckSaveA»a
);

98 
b»akSaveBlock
 = (
SckSaveA»a
*)
¡ackPŒ
;

99 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 4 + (
SckSaveA»a
);

100 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

102 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

104 
	`mem£t
(
¡ackPŒ
 - (
m‘hod
->
outsSize
*4), 0xaf, 
¡ackReq
);

106 #ifdeà
EASY_GDB


107 
b»akSaveBlock
->
´evSave
 =

108 (
SckSaveA»a
*)
	`FP_FROM_SAVEAREA
(
£lf
->
š‹½Save
.
curF¿me
);

109 
§veBlock
->
´evSave
 = 
b»akSaveBlock
;

112 
b»akSaveBlock
->
´evF¿me
 = 
£lf
->
š‹½Save
.
curF¿me
;

113 
b»akSaveBlock
->
§vedPc
 = 
NULL
;

114 
b»akSaveBlock
->
xŒa
.
loÿlRefCook›
 = 0;

115 
b»akSaveBlock
->
m‘hod
 = 
NULL
;

116 
§veBlock
->
´evF¿me
 = 
	`FP_FROM_SAVEAREA
(
b»akSaveBlock
);

117 
§veBlock
->
§vedPc
 = 
NULL
;

118 
§veBlock
->
xŒa
.
cu¼’tPc
 = 
NULL
;

119 
§veBlock
->
m‘hod
 = method;

121 
	`LOGVV
("PUSH frame: old=%p‚ew=%p (size=%d)",

122 
£lf
->
š‹½Save
.
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

123 (
u1
*)
£lf
->
š‹½Save
.
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

125 
£lf
->
š‹½Save
.
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

127  
Œue
;

128 
	}
}

139 
boŞ
 
	$dvmPushJNIF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

141 
SckSaveA»a
* 
§veBlock
;

142 
SckSaveA»a
* 
b»akSaveBlock
;

143 
¡ackReq
;

144 
u1
* 
¡ackPŒ
;

146 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘hod
));

148 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 4

149 + (
SckSaveA»a
) * 2;

151 ià(
£lf
->
š‹½Save
.
curF¿me
 !ğ
NULL
)

152 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

154 
¡ackPŒ
 = 
£lf
->
š‹½SckS¹
;

156 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

158 
	`ALOGW
("Stack overflow on callo‚ative "

160 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
š‹½Save
.
curF¿me
,

161 
£lf
->
š‹½SckSize
, 
m‘hod
->
Çme
);

162 
	`dvmHªdËSckOv”æow
(
£lf
, 
m‘hod
);

163 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

164  
çl£
;

172 
¡ackPŒ
 -ğ(
SckSaveA»a
);

173 
b»akSaveBlock
 = (
SckSaveA»a
*)
¡ackPŒ
;

174 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 4 + (
SckSaveA»a
);

175 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

177 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

179 
	`mem£t
(
¡ackPŒ
, 0xaf, 
¡ackReq
);

181 #ifdeà
EASY_GDB


182 ià(
£lf
->
š‹½Save
.
curF¿me
 =ğ
NULL
)

183 
b»akSaveBlock
->
´evSave
 = 
NULL
;

185 * 
å
 = 
	`FP_FROM_SAVEAREA
(
£lf
->
š‹½Save
.
curF¿me
);

186 
b»akSaveBlock
->
´evSave
 = (
SckSaveA»a
*)
å
;

188 
§veBlock
->
´evSave
 = 
b»akSaveBlock
;

191 
b»akSaveBlock
->
´evF¿me
 = 
£lf
->
š‹½Save
.
curF¿me
;

192 
b»akSaveBlock
->
§vedPc
 = 
NULL
;

193 
b»akSaveBlock
->
xŒa
.
loÿlRefCook›
 = 0;

194 
b»akSaveBlock
->
m‘hod
 = 
NULL
;

195 
§veBlock
->
´evF¿me
 = 
	`FP_FROM_SAVEAREA
(
b»akSaveBlock
);

196 
§veBlock
->
§vedPc
 = 
NULL
;

197 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

198 
§veBlock
->
m‘hod
 = method;

200 
	`LOGVV
("PUSH JNI frame: old=%p‚ew=%p (size=%d)",

201 
£lf
->
š‹½Save
.
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

202 (
u1
*)
£lf
->
š‹½Save
.
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

204 
£lf
->
š‹½Save
.
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

206  
Œue
;

207 
	}
}

215 
boŞ
 
	$dvmPushLoÿlF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

217 
SckSaveA»a
* 
§veBlock
;

218 
¡ackReq
;

219 
u1
* 
¡ackPŒ
;

221 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘hod
));

223 
¡ackReq
 = (
SckSaveA»a
);

225 
	`as£¹
(
£lf
->
š‹½Save
.
curF¿me
 !ğ
NULL
);

226 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

228 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

230 
	`ALOGW
("Stack overflow on PushLocal "

232 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
š‹½Save
.
curF¿me
,

233 
£lf
->
š‹½SckSize
, 
m‘hod
->
Çme
);

234 
	`dvmHªdËSckOv”æow
(
£lf
, 
m‘hod
);

235 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

236  
çl£
;

243 
¡ackPŒ
 -ğ(
SckSaveA»a
);

244 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

246 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

248 
	`mem£t
(
¡ackPŒ
, 0xaf, 
¡ackReq
);

250 #ifdeà
EASY_GDB


251 
§veBlock
->
´evSave
 =

252 (
SckSaveA»a
*)
	`FP_FROM_SAVEAREA
(
£lf
->
š‹½Save
.
curF¿me
);

255 
§veBlock
->
´evF¿me
 = 
£lf
->
š‹½Save
.
curF¿me
;

256 
§veBlock
->
§vedPc
 = 
NULL
;

257 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

258 
§veBlock
->
m‘hod
 = method;

260 
	`LOGVV
("PUSH JNI†ocal frame: old=%p‚ew=%p (size=%d)",

261 
£lf
->
š‹½Save
.
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

262 (
u1
*)
£lf
->
š‹½Save
.
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

264 
£lf
->
š‹½Save
.
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

266  
Œue
;

267 
	}
}

275 
boŞ
 
	$dvmPİLoÿlF¿me
(
Th»ad
* 
£lf
)

277 
SckSaveA»a
* 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

279 
	`as£¹
(!
	`dvmIsB»akF¿me
((
u4
*)
£lf
->
š‹½Save
.
curF¿me
));

280 ià(
§veBlock
->
m‘hod
 !ğ
	`SAVEAREA_FROM_FP
(§veBlock->
´evF¿me
)->method) {

285 
	`as£¹
(
	`dvmIsB»akF¿me
((
u4
*)
§veBlock
->
´evF¿me
) ||

286 !
	`dvmIsN©iveM‘hod
(

287 
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
));

288  
çl£
;

291 
	`LOGVV
("POP JNI†ocal frame:„emoving %s,‚ow %s",

292 
§veBlock
->
m‘hod
->
Çme
,

293 
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
->
Çme
);

294 
	`dvmPİJniLoÿls
(
£lf
, 
§veBlock
);

295 
£lf
->
š‹½Save
.
curF¿me
 = 
§veBlock
->
´evF¿me
;

297  
Œue
;

298 
	}
}

309 
boŞ
 
	$dvmPİF¿me
(
Th»ad
* 
£lf
)

311 
SckSaveA»a
* 
§veBlock
;

313 ià(
£lf
->
š‹½Save
.
curF¿me
 =ğ
NULL
)

314  
çl£
;

316 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

317 
	`as£¹
(!
	`dvmIsB»akF¿me
((
u4
*)
£lf
->
š‹½Save
.
curF¿me
));

323 
§veBlock
->
´evF¿me
 !ğ
NULL
 && saveBlock->
m‘hod
 != NULL) {

326 ià(
	`dvmIsN©iveM‘hod
(
§veBlock
->
m‘hod
)) {

327 
	`LOGVV
("Popping JNI stack frame for %s.%s%s",

328 
§veBlock
->
m‘hod
->
şazz
->
desütÜ
,

329 
§veBlock
->
m‘hod
->
Çme
,

330 (
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
 =ğ
NULL
) ?

332 
	`dvmPİJniLoÿls
(
£lf
, 
§veBlock
);

335 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(§veBlock->
´evF¿me
);

337 ià(
§veBlock
->
m‘hod
 !ğ
NULL
) {

338 
	`ALOGE
("PopFrame missedhe break");

339 
	`as£¹
(
çl£
);

340 
	`dvmAbÜt
();

343 
	`LOGVV
("POP frame: cur=%p‚ew=%p",

344 
£lf
->
š‹½Save
.
curF¿me
, 
§veBlock
->
´evF¿me
);

346 
£lf
->
š‹½Save
.
curF¿me
 = 
§veBlock
->
´evF¿me
;

347  
Œue
;

348 
	}
}

355 
CÏssObjeù
* 
	$ÿÎP»p
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

356 
boŞ
 
checkAcûss
)

358 
CÏssObjeù
* 
şazz
;

360 #iâdeà
NDEBUG


361 ià(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
) {

362 
	`ALOGW
("threadid=%d: status=%d on callo %s.%s -",

363 
£lf
->
th»adId
, s–f->
¡©us
,

364 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

368 
	`as£¹
(
£lf
 !ğ
NULL
);

369 
	`as£¹
(
m‘hod
 !ğ
NULL
);

371 ià(
obj
 !ğ
NULL
)

372 
şazz
 = 
obj
->clazz;

374 
şazz
 = 
m‘hod
->clazz;

376 
	`IF_LOGVV
() {

377 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

378 
	`LOGVV
("th»ad=%d‚©ivcodÿÎšg %s.% %s", 
£lf
->
th»adId
,

379 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

380 
	`ä“
(
desc
);

383 ià(
checkAcûss
) {

385 ià(!
	`dvmCheckM‘hodAcûss
(
	`dvmG‘C®Ër2CÏss
(
£lf
->
š‹½Save
.
curF¿me
),

386 
m‘hod
))

389 
	`dvmThrowIÎeg®AcûssExû±iÚ
("accesso method denied");

390  
NULL
;

400 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

402 ià(!
	`dvmPushJNIF¿me
(
£lf
, 
m‘hod
)) {

403 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

404  
NULL
;

408 ià(!
	`dvmPushIÁ”pF¿me
(
£lf
, 
m‘hod
)) {

409 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

410  
NULL
;

414  
şazz
;

415 
	}
}

424 
	$dvmC®lM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

425 
JV®ue
* 
pResuÉ
, ...)

427 
va_li¡
 
¬gs
;

428 
	`va_¡¬t
(
¬gs
, 
pResuÉ
);

429 
	`dvmC®lM‘hodV
(
£lf
, 
m‘hod
, 
obj
, 
çl£
, 
pResuÉ
, 
¬gs
);

430 
	`va_’d
(
¬gs
);

431 
	}
}

442 
	$dvmC®lM‘hodV
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

443 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, 
va_li¡
 
¬gs
)

445 cÚ¡ * 
desc
 = &(
m‘hod
->
shÜty
[1]);

446 
v”ifyCouÁ
 = 0;

447 
CÏssObjeù
* 
şazz
;

448 
u4
* 
šs
;

450 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, 
çl£
);

451 ià(
şazz
 =ğ
NULL
)

455 
šs
 = ((
u4
*)
£lf
->
š‹½Save
.
curF¿me
) +

456 (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

461 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

462 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


463 
	`as£¹
(
obj
 !ğ
NULL
 && 
	`dvmIsH—pAdd»ss
(obj));

465 *
šs
++ = (
u4
è
obj
;

466 
v”ifyCouÁ
++;

469 *
desc
 != '\0') {

470 *(
desc
++)) {

472 
u8
 
v®
 = 
	`va_¬g
(
¬gs
, u8);

473 
	`memıy
(
šs
, &
v®
, 8);

474 
šs
 += 2;

475 
v”ifyCouÁ
 += 2;

480 
f
 = (è
	`va_¬g
(
¬gs
, );

481 *
šs
++ = 
	`dvmFlßtToU4
(
f
);

482 
v”ifyCouÁ
++;

486 * 
¬g
 = 
	`va_¬g
(
¬gs
, *);

487 
	`as£¹
(
obj
 =ğ
NULL
 || 
	`dvmIsH—pAdd»ss
(obj));

488 
jobjeù
 
¬gObj
 = 
»š‹½»t_ÿ¡
<jobjeù>(
¬g
);

489 ià(
äomJni
)

490 *
šs
++ = (
u4
è
	`dvmDecodeIndœeùRef
(
£lf
, 
¬gObj
);

492 *
šs
++ = (
u4
è
¬gObj
;

493 
v”ifyCouÁ
++;

498 *
šs
++ = 
	`va_¬g
(
¬gs
, 
u4
);

499 
v”ifyCouÁ
++;

505 #iâdeà
NDEBUG


506 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

507 
	`ALOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s", 
v”ifyCouÁ
,

508 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

509 
	`as£¹
(
çl£
);

510 
ba
;

516 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

517 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

522 (*
m‘hod
->
ÇtiveFunc
)((
u4
*)
£lf
->
š‹½Save
.
curF¿me
, 
pResuÉ
,

523 
m‘hod
, 
£lf
);

524 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

526 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
);

529 #iâdeà
NDEBUG


530 
ba
:

532 
	`dvmPİF¿me
(
£lf
);

533 
	}
}

548 
	$dvmC®lM‘hodA
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

549 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
jv®ue
* 
¬gs
)

551 cÚ¡ * 
desc
 = &(
m‘hod
->
shÜty
[1]);

552 
v”ifyCouÁ
 = 0;

553 
CÏssObjeù
* 
şazz
;

554 
u4
* 
šs
;

556 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, 
çl£
);

557 ià(
şazz
 =ğ
NULL
)

561 
šs
 = ((
u4
*)
£lf
->
š‹½Save
.
curF¿me
) +

562 (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

565 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

566 
	`as£¹
(
obj
 !ğ
NULL
);

567 *
šs
++ = (
u4
è
obj
;

568 
v”ifyCouÁ
++;

571 *
desc
 != '\0') {

572 *
desc
++) {

575 
	`memıy
(
šs
, &
¬gs
->
j
, 8);

576 
šs
 += 2;

577 
v”ifyCouÁ
++;

580 ià(
äomJni
)

581 *
šs
++ = (
u4
è
	`dvmDecodeIndœeùRef
(
£lf
, 
¬gs
->
l
);

583 *
šs
++ = (
u4
è
¬gs
->
l
;

587 *
šs
++ = 
¬gs
->
i
;

590 *
šs
++ = 
¬gs
->
s
;

593 *
šs
++ = 
¬gs
->
c
;

596 *
šs
++ = 
¬gs
->
b
;

599 *
šs
++ = 
¬gs
->
z
;

602 
	`ALOGE
("Invalid char %c in short signature of %s.%s",

603 *(
desc
-1), 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

604 
	`as£¹
(
çl£
);

605 
ba
;

608 
v”ifyCouÁ
++;

609 
¬gs
++;

612 #iâdeà
NDEBUG


613 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

614 
	`ALOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s", 
v”ifyCouÁ
,

615 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

616 
	`as£¹
(
çl£
);

617 
ba
;

621 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

622 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

627 (*
m‘hod
->
ÇtiveFunc
)((
u4
*)
£lf
->
š‹½Save
.
curF¿me
, 
pResuÉ
,

628 
m‘hod
, 
£lf
);

629 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

631 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
);

634 
ba
:

635 
	`dvmPİF¿me
(
£lf
);

636 
	}
}

638 
	$throwArgum’tTy³Mism©ch
(
¬gIndex
, 
CÏssObjeù
* 
ex³ùed
, 
D©aObjeù
* 
¬g
) {

639 
¡d
::
¡ršg
 
	`ex³ùedCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
ex³ùed
->
desütÜ
));

640 
¡d
::
¡ršg
 
aùu®CÏssName
 = 
	`dvmHumªR—dabËTy³
(
¬g
);

641 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exIÎeg®Argum’tExû±iÚ
, "argument %d should haveype %s, got %s",

642 
¬gIndex
 + 1, 
ex³ùedCÏssName
.
	`c_¡r
(), 
aùu®CÏssName
.c_str());

643 
	}
}

656 
Objeù
* 
	$dvmInvokeM‘hod
(
Objeù
* 
obj
, cÚ¡ 
M‘hod
* 
m‘hod
,

657 
A¼ayObjeù
* 
¬gLi¡
, A¼ayObjeù* 
·¿ms
, 
CÏssObjeù
* 
»tuºTy³
,

658 
boŞ
 
noAcûssCheck
)

660 
CÏssObjeù
* 
şazz
;

661 
Objeù
* 
»tObj
 = 
NULL
;

662 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

663 
s4
* 
šs
;

664 
v”ifyCouÁ
, 
¬gLi¡L’gth
;

665 
JV®ue
 
»tv®
;

666 
boŞ
 
ÃedPİ
 = 
çl£
;

669 ià(
¬gLi¡
 !ğ
NULL
)

670 
¬gLi¡L’gth
 = 
¬gLi¡
->
Ëngth
;

672 
¬gLi¡L’gth
 = 0;

673 ià(
¬gLi¡L’gth
 !ğ(è
·¿ms
->
Ëngth
) {

674 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exIÎeg®Argum’tExû±iÚ
,

676 
·¿ms
->
Ëngth
, 
¬gLi¡L’gth
);

677  
NULL
;

680 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, !
noAcûssCheck
);

681 ià(
şazz
 =ğ
NULL
)

682  
NULL
;

683 
ÃedPİ
 = 
Œue
;

686 
šs
 = ((
s4
*)
£lf
->
š‹½Save
.
curF¿me
) +

687 (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

688 
v”ifyCouÁ
 = 0;

693 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

694 
	`as£¹
(
obj
 !ğ
NULL
);

695 *
šs
++ = (
s4
è
obj
;

696 
v”ifyCouÁ
++;

703 
D©aObjeù
** 
¬gs
 = (D©aObjeù**)(*)
¬gLi¡
->
cÚ‹Ás
;

704 
CÏssObjeù
** 
ty³s
 = (CÏssObjeù**)(*)
·¿ms
->
cÚ‹Ás
;

705 
i
 = 0; i < 
¬gLi¡L’gth
; i++) {

706 
width
 = 
	`dvmCÚv”tArgum’t
(*
¬gs
++, *
ty³s
++, 
šs
);

707 ià(
width
 < 0) {

708 
	`dvmPİF¿me
(
£lf
);

709 
ÃedPİ
 = 
çl£
;

710 
	`throwArgum’tTy³Mism©ch
(
i
, *(
ty³s
-1), *(
¬gs
-1));

711 
ba
;

714 
šs
 +ğ
width
;

715 
v”ifyCouÁ
 +ğ
width
;

718 #iâdeà
NDEBUG


719 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

720 
	`ALOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s", 
v”ifyCouÁ
,

721 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

722 
	`as£¹
(
çl£
);

723 
ba
;

727 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

728 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

733 (*
m‘hod
->
ÇtiveFunc
)((
u4
*)
£lf
->
š‹½Save
.
curF¿me
, &
»tv®
,

734 
m‘hod
, 
£lf
);

735 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

737 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, &
»tv®
);

744 
	`dvmPİF¿me
(
£lf
);

745 
ÃedPİ
 = 
çl£
;

755 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

756 
	`dvmW¿pExû±iÚ
("Ljava/lang/reflect/InvocationTargetException;");

765 ià(
»tuºTy³
 !ğ
NULL
) {

766 
»tObj
 = (
Objeù
*)
	`dvmBoxPrim™ive
(
»tv®
, 
»tuºTy³
);

767 
	`dvmR–—£T¿ckedAÎoc
(
»tObj
, 
NULL
);

771 
ba
:

772 ià(
ÃedPİ
) {

773 
	`dvmPİF¿me
(
£lf
);

775  
»tObj
;

776 
	}
}

778 
	sLšeNumFromPcCÚ‹xt
 {

779 
u4
 
	madd»ss
;

780 
u4
 
	mlšeNum
;

783 
	$lšeNumFÜPcCb
(*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

785 
LšeNumFromPcCÚ‹xt
 *
pCÚ‹xt
 = (LšeNumFromPcCÚ‹xˆ*)
úxt
;

791 ià(
add»ss
 > 
pCÚ‹xt
->address) {

797 
pCÚ‹xt
->
lšeNum
 =†ineNum;

799  (
add»ss
 =ğ
pCÚ‹xt
->address) ? 1 : 0;

800 
	}
}

810 
	$dvmLšeNumFromPC
(cÚ¡ 
M‘hod
* 
m‘hod
, 
u4
 
»lPc
)

812 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

814 ià(
pDexCode
 =ğ
NULL
) {

815 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è&& !
	`dvmIsAb¡¿ùM‘hod
(method))

820 
LšeNumFromPcCÚ‹xt
 
cÚ‹xt
;

821 
	`mem£t
(&
cÚ‹xt
, 0, (context));

822 
cÚ‹xt
.
add»ss
 = 
»lPc
;

824 
cÚ‹xt
.
lšeNum
 = -1;

826 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
, 
pDexCode
,

827 
m‘hod
->
şazz
->
desütÜ
,

828 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

829 
m‘hod
->
acûssFÏgs
,

830 
lšeNumFÜPcCb
, 
NULL
, &
cÚ‹xt
);

832  
cÚ‹xt
.
lšeNum
;

833 
	}
}

840 
	$dvmCompu‹ExaùF¿meD•th
(cÚ¡ * 
å
)

842 
couÁ
 = 0;

844  ; 
å
 !ğ
NULL
; f°ğ
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
) {

845 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
))

846 
couÁ
++;

849  
couÁ
;

850 
	}
}

861 
	$dvmCompu‹VagueF¿meD•th
(
Th»ad
* 
th»ad
, cÚ¡ * 
å
)

863 cÚ¡ 
u1
* 
š‹½SckS¹
 = 
th»ad
->interpStackStart;

865 
	`as£¹
((
u1
*è
å
 >ğ
š‹½SckS¹
 - 
th»ad
->
š‹½SckSize
);

866 
	`as£¹
((
u1
*è
å
 < 
š‹½SckS¹
);

867  
š‹½SckS¹
 - (
u1
*è
å
;

868 
	}
}

875 * 
	$dvmG‘C®ËrFP
(cÚ¡ * 
curF¿me
)

877 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

878 
SckSaveA»a
* 
§veA»a
;

880 
»Œy
:

881 ià(
	`dvmIsB»akF¿me
((
u4
*)
ÿÎ”
)) {

883 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(ÿÎ”)->
´evF¿me
;

884 ià(
ÿÎ”
 =ğ
NULL
)

885  
NULL
;

892 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
ÿÎ”
);

893 ià(
	`dvmIsReæeùiÚM‘hod
(
§veA»a
->
m‘hod
)) {

894 
ÿÎ”
 = 
§veA»a
->
´evF¿me
;

895 
	`as£¹
(
ÿÎ”
 !ğ
NULL
);

896 
»Œy
;

900  
ÿÎ”
;

901 
	}
}

908 
CÏssObjeù
* 
	$dvmG‘C®ËrCÏss
(cÚ¡ * 
curF¿me
)

910 * 
ÿÎ”
;

912 
ÿÎ”
 = 
	`dvmG‘C®ËrFP
(
curF¿me
);

913 ià(
ÿÎ”
 =ğ
NULL
)

914  
NULL
;

916  
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
m‘hod
->
şazz
;

917 
	}
}

925 
CÏssObjeù
* 
	$dvmG‘C®Ër2CÏss
(cÚ¡ * 
curF¿me
)

927 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

928 * 
ÿÎ”C®Ër
;

931 ià(
	`dvmIsB»akF¿me
((
u4
*)
ÿÎ”
) &&

932 
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
´evF¿me
 =ğ
NULL
)

933  
NULL
;

936 
ÿÎ”C®Ër
 = 
	`dvmG‘C®ËrFP
(
ÿÎ”
);

937 ià(
ÿÎ”C®Ër
 =ğ
NULL
)

938  
NULL
;

940  
	`SAVEAREA_FROM_FP
(
ÿÎ”C®Ër
)->
m‘hod
->
şazz
;

941 
	}
}

949 
CÏssObjeù
* 
	$dvmG‘C®Ër3CÏss
(cÚ¡ * 
curF¿me
)

951 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

952 
i
;

955 ià(
	`dvmIsB»akF¿me
((
u4
*)
ÿÎ”
) &&

956 
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
´evF¿me
 =ğ
NULL
)

957  
NULL
;

960 
i
 = 0; i < 2; i++) {

961 
ÿÎ”
 = 
	`dvmG‘C®ËrFP
(caller);

962 ià(
ÿÎ”
 =ğ
NULL
)

963  
NULL
;

966  
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
m‘hod
->
şazz
;

967 
	}
}

976 
	$dvmFlSckT¿ûA¼ay
(cÚ¡ * 
å
, cÚ¡ 
M‘hod
** 
¬¿y
, 
size_t
 
Ëngth
)

978 
	`as£¹
(
å
 !ğ
NULL
);

979 
	`as£¹
(
¬¿y
 !ğ
NULL
);

980 
size_t
 
i
 = 0;

981 
å
 !ğ
NULL
) {

982 ià(!
	`dvmIsB»akF¿me
((
u4
*)
å
)) {

983 
	`as£¹
(
i
 < 
Ëngth
);

984 
¬¿y
[
i
++] = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

986 
å
 = 
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
;

988 
	}
}

1001 
	$dvmHªdËSckOv”æow
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

1006 ià(
£lf
->
¡ackOv”æowed
) {

1010 
	`ALOGE
("DalvikVM: double-overflow of stack inhreadid=%d;‡borting",

1011 
£lf
->
th»adId
);

1012 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

1013 
	`dvmAbÜt
();

1017 
	`ALOGI
("threadid=%d: stack overflow on callo %s.%s:%s",

1018 
£lf
->
th»adId
,

1019 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, m‘hod->
shÜty
);

1020 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

1021 
	`ALOGI
(" method„equires %d+%d+%d=%d bytes, fp is %p (%d†eft)",

1022 
m‘hod
->
»gi¡”sSize
 * 4, (
SckSaveA»a
), m‘hod->
outsSize
 * 4,

1023 (
m‘hod
->
»gi¡”sSize
 + m‘hod->
outsSize
è* 4 + (
SckSaveA»a
),

1024 
§veA»a
, (
u1
*è§veA»¨- 
£lf
->
š‹½SckEnd
);

1025 
	`ALOGI
("ƒx·ndšg sckƒnd (%°tØ%p)", 
£lf
->
š‹½SckEnd
,

1026 
£lf
->
š‹½SckS¹
 - s–f->
š‹½SckSize
);

1028 
£lf
->
š‹½SckEnd
 = s–f->
š‹½SckS¹
 - s–f->
š‹½SckSize
;

1029 
£lf
->
¡ackOv”æowed
 = 
Œue
;

1037 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1038 ià(
exûp
 !ğ
NULL
) {

1039 
	`ALOGW
("Stack overflow whilehrowingƒxception");

1040 
	`dvmCË¬Exû±iÚ
(
£lf
);

1042 
	`dvmThrowChašedExû±iÚ
(
gDvm
.
exSckOv”æowE¼Ü
, 
NULL
, 
exûp
);

1043 
	}
}

1049 
	$dvmCËªupSckOv”æow
(
Th»ad
* 
£lf
, cÚ¡ 
Objeù
* 
exû±iÚ
)

1051 cÚ¡ 
u1
* 
ÃwSckEnd
;

1053 
	`as£¹
(
£lf
->
¡ackOv”æowed
);

1055 ià(
exû±iÚ
->
şazz
 !ğ
gDvm
.
exSckOv”æowE¼Ü
) {

1060 
ÃwSckEnd
 = (
£lf
->
š‹½SckS¹
 - s–f->
š‹½SckSize
)

1061 + 
STACK_OVERFLOW_RESERVE
;

1062 ià((
u1
*)
£lf
->
š‹½Save
.
curF¿me
 <ğ
ÃwSckEnd
) {

1063 
	`ALOGE
("Can't shrink stack: curFrame is in„eserved‡rea (%p %p)",

1064 
£lf
->
š‹½SckEnd
, s–f->
š‹½Save
.
curF¿me
);

1065 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

1066 
	`dvmAbÜt
();

1069 
£lf
->
š‹½SckEnd
 = 
ÃwSckEnd
;

1070 
£lf
->
¡ackOv”æowed
 = 
çl£
;

1072 
	`ALOGI
("Sh¿nk sck (tØ%p, curF¿mi %p)", 
£lf
->
š‹½SckEnd
,

1073 
£lf
->
š‹½Save
.
curF¿me
);

1074 
	}
}

1089 
boŞ
 
	$exŒaùMÚ™ÜEÁ”Objeù
(
Th»ad
* 
th»ad
, 
Objeù
** 
pLockObj
,

1090 
Th»ad
** 
pOwÃr
)

1092 * 
äamePŒ
 = 
th»ad
->
š‹½Save
.
curF¿me
;

1094 ià(
äamePŒ
 =ğ
NULL
 || 
	`dvmIsB»akF¿me
((
u4
*)framePtr))

1095  
çl£
;

1097 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1098 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

1099 cÚ¡ 
u2
* 
cu¼’tPc
 = 
§veA»a
->
xŒa
.currentPc;

1102 ià(!
	`dvmLš—rAÎocCÚšs
(
m‘hod
, (
M‘hod
))) {

1103 
	`ALOGD
("ExŒMÚ: m‘hod %°nÙ v®id", 
m‘hod
);

1104  
çl£
;

1108 
u4
 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

1109 ià(
cu¼’tPc
 < 
m‘hod
->
š¢s
 ||

1110 
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 + 
š¢sSize
)

1112 
	`ALOGD
("ExtrMon: insns %p‚ot valid (%p - %p)",

1113 
cu¼’tPc
, 
m‘hod
->
š¢s
, m‘hod->š¢ + 
š¢sSize
);

1114  
çl£
;

1118 ià((*
cu¼’tPc
 & 0xffè!ğ
OP_MONITOR_ENTER
) {

1119 
	`ALOGD
("ExtrMon: insn‡t %p is‚ot monitor-enter (0x%02x)",

1120 
cu¼’tPc
, *currentPc & 0xff);

1121  
çl£
;

1125 
»g
 = *
cu¼’tPc
 >> 8;

1126 ià(
»g
 >ğ
m‘hod
->
»gi¡”sSize
) {

1127 
	`ALOGD
("ExtrMon: invalid„egister %d (max %d)",

1128 
»g
, 
m‘hod
->
»gi¡”sSize
);

1129  
çl£
;

1133 
u4
* 
å
 = (u4*è
äamePŒ
;

1134 
Objeù
* 
obj
 = (Objeù*è
å
[
»g
];

1135 ià(
obj
 !ğ
NULL
 && !
	`dvmIsH—pAdd»ss
(obj)) {

1136 
	`ALOGD
("ExŒMÚ: inv®id objeù %°© %p[%d]", 
obj
, 
å
, 
»g
);

1137  
çl£
;

1139 *
pLockObj
 = 
obj
;

1151 *
pOwÃr
 = 
	`dvmG‘ObjeùLockHŞd”
(
obj
);

1153  
Œue
;

1154 
	}
}

1156 
	$´štWa™Mes§ge
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, cÚ¡ * 
d‘a
, 
Objeù
* 
obj
,

1157 
Th»ad
* 
th»ad
)

1159 
¡d
::
¡ršg
 
	`msg
(
	`SŒšgPrštf
(" - wa™šg % <%p> ", 
d‘a
, 
obj
));

1161 ià(
obj
->
şazz
 !ğ
gDvm
.
şassJavaLªgCÏss
) {

1164 
msg
 +ğ"× " + 
	`dvmHumªR—dabËTy³
(
obj
) + ")";

1167 ià(
th»ad
 !ğ
NULL
) {

1168 
¡d
::
¡ršg
 
	`th»adName
(
	`dvmG‘Th»adName
(
th»ad
));

1169 
	`SŒšgAµ’dF
(&
msg
, " h–d byid=%d (%s)", 
th»ad
->
th»adId
, 
th»adName
.
	`c_¡r
());

1172 
	`dvmPrštDebugMes§ge
(
rg‘
, "%s\n", 
msg
.
	`c_¡r
());

1173 
	}
}

1187 
	$dumpF¿mes
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, * 
äamePŒ
,

1188 
Th»ad
* 
th»ad
)

1190 cÚ¡ 
SckSaveA»a
* 
§veA»a
;

1191 cÚ¡ 
M‘hod
* 
m‘hod
;

1192 
checkCouÁ
 = 0;

1193 cÚ¡ 
u2
* 
cu¼’tPc
 = 
NULL
;

1194 
boŞ
 
fœ¡
 = 
Œue
;

1201 
boŞ
 
ÃedTh»adUÆock
 = 
	`dvmTryLockTh»adLi¡
();

1207 ià(
äamePŒ
 !ğ
NULL
 && !
	`dvmIsB»akF¿me
((
u4
*)framePtr)) {

1208 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1210 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
)

1211 
cu¼’tPc
 = 
§veA»a
->
xŒa
.currentPc;

1214 
äamePŒ
 !ğ
NULL
) {

1215 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1216 
m‘hod
 = 
§veA»a
->method;

1218 ià(
	`dvmIsB»akF¿me
((
u4
*)
äamePŒ
)) {

1221 
»lPc
;

1223 ià(
cu¼’tPc
 !ğ
NULL
)

1224 
»lPc
 = 
cu¼’tPc
 - 
§veA»a
->
m‘hod
->
š¢s
;

1226 
»lPc
 = -1;

1228 
¡d
::
¡ršg
 
	`m‘hodName
(
	`dvmHumªR—dabËM‘hod
(
m‘hod
, 
çl£
));

1229 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1230 
	`dvmPrštDebugMes§ge
(
rg‘
, "‡t %s(Native Method)\n",

1231 
m‘hodName
.
	`c_¡r
());

1233 
	`dvmPrštDebugMes§ge
(
rg‘
, "‡t %s(%s:%s%d)\n",

1234 
m‘hodName
.
	`c_¡r
(), 
	`dvmG‘M‘hodSourûFe
(
m‘hod
),

1235 (
»lPc
 >ğ0 && 
fœ¡
) ? "~" : "",

1236 
»lPc
 < 0 ? -1 : 
	`dvmLšeNumFromPC
(
m‘hod
,„elPc));

1239 ià(
fœ¡
) {

1246 ià(
th»ad
->
¡©us
 =ğ
THREAD_WAIT
 ||

1247 
th»ad
->
¡©us
 =ğ
THREAD_TIMED_WAIT
)

1249 
MÚ™Ü
* 
mÚ
 = 
th»ad
->
wa™MÚ™Ü
;

1250 
Objeù
* 
obj
 = 
	`dvmG‘MÚ™ÜObjeù
(
mÚ
);

1251 ià(
obj
 !ğ
NULL
) {

1252 
Th»ad
* 
jošTh»ad
 = 
NULL
;

1253 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgVMTh»ad
) {

1254 
jošTh»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
obj
);

1256 
	`´štWa™Mes§ge
(
rg‘
, "Ú", 
obj
, 
jošTh»ad
);

1258 } ià(
th»ad
->
¡©us
 =ğ
THREAD_MONITOR
) {

1259 
Objeù
* 
obj
;

1260 
Th»ad
* 
owÃr
;

1261 ià(
	`exŒaùMÚ™ÜEÁ”Objeù
(
th»ad
, &
obj
, &
owÃr
)) {

1262 
	`´štWa™Mes§ge
(
rg‘
, "tØlock", 
obj
, 
owÃr
);

1274 
cu¼’tPc
 = 
§veA»a
->
§vedPc
;

1276 
fœ¡
 = 
çl£
;

1278 ià(
§veA»a
->
´evF¿me
 !ğ
NULL
 && saveA»a->´evF¿m<ğ
äamePŒ
) {

1279 
	`ALOGW
("Warning:†oop in stackrace‡t frame %d (%p -> %p)",

1280 
checkCouÁ
, 
äamePŒ
, 
§veA»a
->
´evF¿me
);

1283 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

1285 
checkCouÁ
++;

1286 ià(
checkCouÁ
 > 300) {

1287 
	`dvmPrštDebugMes§ge
(
rg‘
,

1289 
checkCouÁ
);

1294 ià(
ÃedTh»adUÆock
) {

1295 
	`dvmUÆockTh»adLi¡
();

1297 
	}
}

1303 
	$dvmDumpTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
)

1305 
	`dumpF¿mes
(
rg‘
, 
th»ad
->
š‹½Save
.
curF¿me
,hread);

1306 
	}
}

1319 
	$dvmDumpRuÂšgTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
)

1321 
SckSaveA»a
* 
§veA»a
;

1322 cÚ¡ 
u1
* 
ÜigSck
;

1323 
u1
* 
¡ackCİy
 = 
NULL
;

1324 
ÜigSize
, 
åOff£t
;

1325 * 
å
;

1326 
d•thLim™
 = 200;

1328 ià(
th»ad
 =ğ
NULL
 ||h»ad->
š‹½Save
.
curF¿me
 == NULL) {

1329 
	`dvmPrštDebugMes§ge
(
rg‘
,

1331 
th»ad
, (th»ad !ğ
NULL
è?h»ad->
th»adId
 : 0);

1336 
	`sched_y›ld
();

1339 
ÜigSize
 = 
th»ad
->
š‹½SckSize
;

1340 
ÜigSck
 = (cÚ¡ 
u1
*è
th»ad
->
š‹½SckS¹
 - 
ÜigSize
;

1341 
¡ackCİy
 = (
u1
*è
	`m®loc
(
ÜigSize
);

1342 
åOff£t
 = (
u1
*è
th»ad
->
š‹½Save
.
curF¿me
 - 
ÜigSck
;

1343 
	`memıy
(
¡ackCİy
, 
ÜigSck
, 
ÜigSize
);

1350 
å
 = 
¡ackCİy
 + 
åOff£t
;

1351 
Œue
) {

1352 
´evOff£t
;

1354 ià(
d•thLim™
-- < 0) {

1356 
	`dvmPrštDebugMes§ge
(
rg‘
, "DumpRunning: depth†imit hit\n");

1357 
	`dvmAbÜt
();

1359 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1360 ià(
§veA»a
->
´evF¿me
 =ğ
NULL
)

1363 
´evOff£t
 = (
u1
*è
§veA»a
->
´evF¿me
 - 
ÜigSck
;

1364 ià(
´evOff£t
 < 0 ||…»vOff£ˆ> 
ÜigSize
) {

1365 
	`dvmPrštDebugMes§ge
(
rg‘
,

1367 
´evOff£t
, 
ÜigSck
, 
§veA»a
->
´evF¿me
);

1368 
§veA»a
->
´evF¿me
 = 
NULL
;

1372 
§veA»a
->
´evF¿me
 = (
u4
*)(
¡ackCİy
 + 
´evOff£t
);

1373 
å
 = 
§veA»a
->
´evF¿me
;

1379 
	`dumpF¿mes
(
rg‘
, 
¡ackCİy
 + 
åOff£t
, 
th»ad
);

1380 
	`ä“
(
¡ackCİy
);

1381 
	}
}

1386 
	$dvmDumpN©iveSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
pid_t
 
tid
)

1388 #ifdeà
HAVE_ANDROID_OS


1389 cÚ¡ 
size_t
 
MAX_DEPTH
 = 32;

1390 
backŒaû_äame_t
 
backŒaû
[
MAX_DEPTH
];

1391 
ssize_t
 
äames
 = 
	`unwšd_backŒaû_th»ad
(
tid
, 
backŒaû
, 0, 
MAX_DEPTH
);

1392 ià(
äames
 > 0) {

1393 
backŒaû_symbŞ_t
 
backŒaû_symbŞs
[
MAX_DEPTH
];

1394 
	`g‘_backŒaû_symbŞs
(
backŒaû
, 
äames
, 
backŒaû_symbŞs
);

1396 
size_t
 
i
 = 0; i < 
	`size_t
(
äames
); i++) {

1397 
lše
[
MAX_BACKTRACE_LINE_LENGTH
];

1398 
	`fÜm©_backŒaû_lše
(
i
, &
backŒaû
[i], &
backŒaû_symbŞs
[i],

1399 
lše
, 
MAX_BACKTRACE_LINE_LENGTH
);

1400 
	`dvmPrštDebugMes§ge
(
rg‘
, " %s\n", 
lše
);

1403 
	`ä“_backŒaû_symbŞs
(
backŒaû_symbŞs
, 
äames
);

1406 
	}
}

	@vm/interp/Stack.h

20 #iâdeà
DALVIK_INTERP_STACK_H_


21 
	#DALVIK_INTERP_STACK_H_


	)

23 
	~"jni.h
"

24 
	~<¡d¬g.h
>

109 
	gSckSaveA»a
;

120 
	sSckSaveA»a
 {

121 #ifdeà
PAD_SAVE_AREA


122 
u4
 
	m·d0
, 
	m·d1
, 
	m·d2
;

125 #ifdeà
EASY_GDB


127 
SckSaveA»a
* 
	m´evSave
;

131 
u4
* 
	m´evF¿me
;

134 cÚ¡ 
u2
* 
	m§vedPc
;

137 cÚ¡ 
M‘hod
* 
	mm‘hod
;

141 
u4
 
	mloÿlRefCook›
;

145 cÚ¡ 
u2
* 
	mcu¼’tPc
;

146 } 
	mxŒa
;

149 cÚ¡ 
u2
* 
	m»tuºAddr
;

150 #ifdeà
PAD_SAVE_AREA


151 
u4
 
	m·d3
, 
	m·d4
, 
	m·d5
;

156 
	#SAVEAREA_FROM_FP
(
_å
è((
SckSaveA»a
*)(_åè-1)

	)

157 
	#FP_FROM_SAVEAREA
(
_§ve
è((
u4
*è((
SckSaveA»a
*)(_§veè+1))

	)

160 
	#OUTS_FROM_FP
(
_å
, 
_¬gCouÁ
) \

161 ((
u4
*è((
u1
*)
	`SAVEAREA_FROM_FP
(
_å
è- (u4è* (
_¬gCouÁ
)))

	)

164 
	#STACK_OVERFLOW_RESERVE
 768

	)

169 
INLINE
 
boŞ
 
	$dvmIsB»akF¿me
(cÚ¡ 
u4
* 
å
)

171  
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
 =ğ
NULL
;

172 
	}
}

178 
boŞ
 
dvmIn™IÁ”pSck
(
Th»ad
* 
th»ad
, 
¡ackSize
);

184 
boŞ
 
dvmPushJNIF¿me
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
);

189 
boŞ
 
dvmPushLoÿlF¿me
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
);

190 
boŞ
 
dvmPİLoÿlF¿me
(
Th»ad
* 
th»ad
);

199 
dvmC®lM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

200 
JV®ue
* 
pResuÉ
, ...);

201 
dvmC®lM‘hodV
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

202 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, 
va_li¡
 
¬gs
);

203 
dvmC®lM‘hodA
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

204 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
jv®ue
* 
¬gs
);

218 
Objeù
* 
dvmInvokeM‘hod
(Objeù* 
švokeObj
, cÚ¡ 
M‘hod
* 
m‘h
,

219 
A¼ayObjeù
* 
¬gLi¡
, A¼ayObjeù* 
·¿ms
, 
CÏssObjeù
* 
»tuºTy³
,

220 
boŞ
 
noAcûssCheck
);

227 "C" 
dvmLšeNumFromPC
(cÚ¡ 
M‘hod
* 
m‘hod
, 
u4
 
»lPc
);

234 
dvmCompu‹ExaùF¿meD•th
(cÚ¡ * 
å
);

235 
dvmCompu‹VagueF¿meD•th
(
Th»ad
* 
th»ad
, cÚ¡ * 
å
);

240 * 
dvmG‘C®ËrFP
(cÚ¡ * 
curF¿me
);

245 
CÏssObjeù
* 
dvmG‘C®ËrCÏss
(cÚ¡ * 
curF¿me
);

253 
CÏssObjeù
* 
dvmG‘C®Ër2CÏss
(cÚ¡ * 
curF¿me
);

261 
CÏssObjeù
* 
dvmG‘C®Ër3CÏss
(cÚ¡ * 
curF¿me
);

267 
dvmFlSckT¿ûA¼ay
(cÚ¡ * 
å
, cÚ¡ 
M‘hod
** 
¬¿y
, 
size_t
 
Ëngth
);

272 "C" 
dvmHªdËSckOv”æow
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
);

273 "C" 
dvmCËªupSckOv”æow
(
Th»ad
* 
£lf
, cÚ¡ 
Objeù
* 
exû±iÚ
);

276 
dvmDumpTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
);

277 
dvmDumpRuÂšgTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
);

278 
dvmDumpN©iveSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
pid_t
 
tid
);

	@vm/jdwp/ExpandBuf.cpp

20 
	~"jdwp/Ex·ndBuf.h
"

21 
	~"B™s.h
"

22 
	~"CommÚ.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ršg.h
>

30 
	sEx·ndBuf
 {

31 
u1
* 
	m¡Üage
;

32 
	mcurL’
;

33 
	mmaxL’
;

36 
	#kIn™ŸlStÜage
 64

	)

41 
Ex·ndBuf
* 
	$ex·ndBufAÎoc
()

43 
Ex·ndBuf
* 
ÃwBuf
;

45 
ÃwBuf
 = (
Ex·ndBuf
*è
	`m®loc
((*newBuf));

46 
ÃwBuf
->
¡Üage
 = (
u1
*è
	`m®loc
(
kIn™ŸlStÜage
);

47 
ÃwBuf
->
curL’
 = 0;

48 
ÃwBuf
->
maxL’
 = 
kIn™ŸlStÜage
;

50  
ÃwBuf
;

51 
	}
}

56 
	$ex·ndBufF»e
(
Ex·ndBuf
* 
pBuf
)

58 ià(
pBuf
 =ğ
NULL
)

61 
	`ä“
(
pBuf
->
¡Üage
);

62 
	`ä“
(
pBuf
);

63 
	}
}

68 
u1
* 
	$ex·ndBufG‘Bufãr
(
Ex·ndBuf
* 
pBuf
)

70  
pBuf
->
¡Üage
;

71 
	}
}

76 
size_t
 
	$ex·ndBufG‘L’gth
(
Ex·ndBuf
* 
pBuf
)

78  
pBuf
->
curL’
;

79 
	}
}

86 
	$’su»S·û
(
Ex·ndBuf
* 
pBuf
, 
ÃwCouÁ
)

88 
u1
* 
ÃwPŒ
;

90 ià(
pBuf
->
curL’
 + 
ÃwCouÁ
 <ğpBuf->
maxL’
)

93 
pBuf
->
curL’
 + 
ÃwCouÁ
 >…Buf->
maxL’
)

94 
pBuf
->
maxL’
 *= 2;

96 
ÃwPŒ
 = (
u1
*è
	`»®loc
(
pBuf
->
¡Üage
,…Buf->
maxL’
);

97 ià(
ÃwPŒ
 =ğ
NULL
) {

98 
	`ALOGE
("»®loc(%dèçed", 
pBuf
->
maxL’
);

99 
	`abÜt
();

102 
pBuf
->
¡Üage
 = 
ÃwPŒ
;

103 
	}
}

108 
u1
* 
	$ex·ndBufAddS·û
(
Ex·ndBuf
* 
pBuf
, 
g­Size
)

110 
u1
* 
g­S¹
;

112 
	`’su»S·û
(
pBuf
, 
g­Size
);

113 
g­S¹
 = 
pBuf
->
¡Üage
 +…Buf->
curL’
;

115 
pBuf
->
curL’
 +ğ
g­Size
;

117  
g­S¹
;

118 
	}
}

123 
	$ex·ndBufAdd1
(
Ex·ndBuf
* 
pBuf
, 
u1
 
v®
)

125 
	`’su»S·û
(
pBuf
, (
v®
));

126 *(
pBuf
->
¡Üage
 +…Buf->
curL’
èğ
v®
;

127 
pBuf
->
curL’
++;

128 
	}
}

133 
	$ex·ndBufAdd2BE
(
Ex·ndBuf
* 
pBuf
, 
u2
 
v®
)

135 
	`’su»S·û
(
pBuf
, (
v®
));

136 
	`£t2BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

137 
pBuf
->
curL’
 +ğ(
v®
);

138 
	}
}

143 
	$ex·ndBufAdd4BE
(
Ex·ndBuf
* 
pBuf
, 
u4
 
v®
)

145 
	`’su»S·û
(
pBuf
, (
v®
));

146 
	`£t4BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

147 
pBuf
->
curL’
 +ğ(
v®
);

148 
	}
}

153 
	$ex·ndBufAdd8BE
(
Ex·ndBuf
* 
pBuf
, 
u8
 
v®
)

155 
	`’su»S·û
(
pBuf
, (
v®
));

156 
	`£t8BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

157 
pBuf
->
curL’
 +ğ(
v®
);

158 
	}
}

168 
	$ex·ndBufAddUtf8SŒšg
(
Ex·ndBuf
* 
pBuf
, cÚ¡ 
u1
* 
¡r
)

170 
¡rL’
 = 
	`¡¾’
((cÚ¡ *)
¡r
);

172 
	`’su»S·û
(
pBuf
, (
u4
è+ 
¡rL’
);

173 
	`£tUtf8SŒšg
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
¡r
);

174 
pBuf
->
curL’
 +ğ(
u4
è+ 
¡rL’
;

175 
	}
}

	@vm/jdwp/ExpandBuf.h

19 #iâdeà
DALVIK_JDWP_EXPANDBUF_H_


20 
	#DALVIK_JDWP_EXPANDBUF_H_


	)

22 
	~"CommÚ.h
"

24 
	gEx·ndBuf
;

27 
Ex·ndBuf
* 
ex·ndBufAÎoc
();

29 
ex·ndBufF»e
(
Ex·ndBuf
* 
pBuf
);

35 
u1
* 
ex·ndBufG‘Bufãr
(
Ex·ndBuf
* 
pBuf
);

36 
size_t
 
ex·ndBufG‘L’gth
(
Ex·ndBuf
* 
pBuf
);

49 
u1
* 
ex·ndBufAddS·û
(
Ex·ndBuf
* 
pBuf
, 
g­Size
);

50 
ex·ndBufAdd1
(
Ex·ndBuf
* 
pBuf
, 
u1
 
v®
);

51 
ex·ndBufAdd2BE
(
Ex·ndBuf
* 
pBuf
, 
u2
 
v®
);

52 
ex·ndBufAdd4BE
(
Ex·ndBuf
* 
pBuf
, 
u4
 
v®
);

53 
ex·ndBufAdd8BE
(
Ex·ndBuf
* 
pBuf
, 
u8
 
v®
);

54 
ex·ndBufAddUtf8SŒšg
(
Ex·ndBuf
* 
pBuf
, cÚ¡ 
u1
* 
¡r
);

	@vm/jdwp/Jdwp.h

24 #iâdeà
DALVIK_JDWP_JDWP_H_


25 
	#DALVIK_JDWP_JDWP_H_


	)

27 
	~"jdwp/JdwpCÚ¡ªts.h
"

28 
	~"jdwp/Ex·ndBuf.h
"

29 
	~"CommÚ.h
"

30 
	~"B™s.h
"

31 
	~<±h»ad.h
>

33 
	gJdwpS‹
;

40 
u4
 
	tF›ldId
;

41 
u4
 
	tM‘hodId
;

42 
u8
 
	tObjeùId
;

43 
u8
 
	tRefTy³Id
;

44 
u8
 
	tF¿meId
;

50 
INLINE
 
F›ldId
 
	$dvmR—dF›ldId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad4BE
ÕBuf); 
	}
}

51 
INLINE
 
M‘hodId
 
	$dvmR—dM‘hodId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad4BE
ÕBuf); 
	}
}

52 
INLINE
 
ObjeùId
 
	$dvmR—dObjeùId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

53 
INLINE
 
RefTy³Id
 
	$dvmR—dRefTy³Id
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

54 
INLINE
 
F¿meId
 
	$dvmR—dF¿meId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

55 
INLINE
 
	$dvmS‘F›ldId
(
u1
* 
buf
, 
F›ldId
 
v®
è{  
	`£t4BE
(buf, v®); 
	}
}

56 
INLINE
 
	$dvmS‘M‘hodId
(
u1
* 
buf
, 
M‘hodId
 
v®
è{  
	`£t4BE
(buf, v®); 
	}
}

57 
INLINE
 
	$dvmS‘ObjeùId
(
u1
* 
buf
, 
ObjeùId
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

58 
INLINE
 
	$dvmS‘RefTy³Id
(
u1
* 
buf
, 
RefTy³Id
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

59 
INLINE
 
	$dvmS‘F¿meId
(
u1
* 
buf
, 
F¿meId
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

60 
INLINE
 
	$ex·ndBufAddF›ldId
(
Ex·ndBuf
* 
pR•ly
, 
F›ldId
 
id
) {

61 
	`ex·ndBufAdd4BE
(
pR•ly
, 
id
);

62 
	}
}

63 
INLINE
 
	$ex·ndBufAddM‘hodId
(
Ex·ndBuf
* 
pR•ly
, 
M‘hodId
 
id
) {

64 
	`ex·ndBufAdd4BE
(
pR•ly
, 
id
);

65 
	}
}

66 
INLINE
 
	$ex·ndBufAddObjeùId
(
Ex·ndBuf
* 
pR•ly
, 
ObjeùId
 
id
) {

67 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

68 
	}
}

69 
INLINE
 
	$ex·ndBufAddRefTy³Id
(
Ex·ndBuf
* 
pR•ly
, 
RefTy³Id
 
id
) {

70 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

71 
	}
}

72 
INLINE
 
	$ex·ndBufAddF¿meId
(
Ex·ndBuf
* 
pR•ly
, 
F¿meId
 
id
) {

73 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

74 
	}
}

80 
	sJdwpLoÿtiÚ
 {

81 
u1
 
	mty³Tag
;

82 
RefTy³Id
 
	mşassId
;

83 
M‘hodId
 
	mm‘hodId
;

84 
u8
 
	midx
;

90 
	eJdwpT¿n¥ÜtTy³
 {

91 
	mkJdwpT¿n¥ÜtUnknown
 = 0,

92 
	mkJdwpT¿n¥ÜtSock‘
,

93 
	mkJdwpT¿n¥ÜtAndroidAdb
,

99 
	sJdwpS¹upP¬ams
 {

100 
JdwpT¿n¥ÜtTy³
 
	mŒª¥Üt
;

101 
boŞ
 
	m£rv”
;

102 
boŞ
 
	msu¥’d
;

103 
	mho¡
[64];

104 
	mpÜt
;

116 
JdwpS‹
* 
dvmJdwpS¹up
(cÚ¡ 
JdwpS¹upP¬ams
* 
·¿ms
);

121 
dvmJdwpShutdown
(
JdwpS‹
* 
¡©e
);

126 
boŞ
 
dvmJdwpIsAùive
(
JdwpS‹
* 
¡©e
);

132 
±h»ad_t
 
dvmJdwpG‘DebugTh»ad
(
JdwpS‹
* 
¡©e
);

137 
s8
 
dvmJdwpLa¡Debugg”Aùiv™y
(
JdwpS‹
* 
¡©e
);

159 
dvmJdwpS‘Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
);

160 
dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
);

165 
boŞ
 
dvmJdwpCheckCÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

166 
boŞ
 
dvmJdwpAcû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

167 
boŞ
 
dvmJdwpE¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

168 
dvmJdwpClo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

169 
boŞ
 
dvmJdwpProûssIncomšg
(
JdwpS‹
* 
¡©e
);

190 
boŞ
 
dvmJdwpPo¡VMS¹
(
JdwpS‹
* 
¡©e
, boŞ 
su¥’d
);

202 
boŞ
 
dvmJdwpPo¡LoÿtiÚEv’t
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
,

203 
ObjeùId
 
thisPŒ
, 
ev’tFÏgs
);

210 
boŞ
 
dvmJdwpPo¡Exû±iÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pThrowLoc
,

211 
ObjeùId
 
exûpId
, 
RefTy³Id
 
exûpCÏssId
, cÚ¡ 
JdwpLoÿtiÚ
* 
pC©chLoc
,

212 
ObjeùId
 
thisPŒ
);

217 
boŞ
 
dvmJdwpPo¡Th»adChªge
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
, boŞ 
¡¬t
);

222 
boŞ
 
dvmJdwpPo¡CÏssP»·»
(
JdwpS‹
* 
¡©e
, 
g
, 
RefTy³Id
 
»fTy³Id
,

223 cÚ¡ * 
sigÇtu»
, 
¡©us
);

228 
boŞ
 
dvmJdwpPo¡VMD—th
(
JdwpS‹
* 
¡©e
);

233 
dvmJdwpDdmS’dChunkV
(
JdwpS‹
* 
¡©e
, 
ty³
, cÚ¡ 
iovec
* 
iov
,

234 
iovút
);

	@vm/jdwp/JdwpAdb.cpp

17 
	~"jdwp/JdwpPriv.h
"

18 
	~"jdwp/JdwpHªdËr.h
"

19 
	~<sys/sock‘.h
>

20 
	~<sys/un.h
>

21 
	~<”ºo.h
>

22 
	~<uni¡d.h
>

23 
	~<cuts/sock‘s.h
>

42 
	#kIÅutBufãrSize
 8192

	)

44 
	#kMagicHªdshake
 "JDWP-Hªdshake"

	)

45 
	#kMagicHªdshakeL’
 ((
kMagicHªdshake
)-1)

	)

47 
	#kJdwpCÚŒŞName
 "\0jdwp-cÚŒŞ"

	)

48 
	#kJdwpCÚŒŞNameL’
 ((
kJdwpCÚŒŞName
)-1)

	)

50 
	gJdwpN‘S‹
 : 
public
 
JdwpN‘S‹Ba£
 {

51 
cÚŒŞSock
;

52 
boŞ
 
	gawa™šgHªdshake
;

53 
boŞ
 
	gshu‰šgDown
;

54 
	gwakeFds
[2];

56 
	gšputCouÁ
;

57 
	gšputBufãr
[
kIÅutBufãrSize
];

59 
sockËn_t
 
	gcÚŒŞAddrL’
;

61 
sockaddr_un
 
	gcÚŒŞAddrUn
;

62 
sockaddr
 
	gcÚŒŞAddrPÏš
;

63 } 
	gcÚŒŞAddr
;

65 
JdwpN‘S‹
()

67 
	gcÚŒŞSock
 = -1;

68 
	gawa™šgHªdshake
 = 
çl£
;

69 
	gshu‰šgDown
 = 
çl£
;

70 
	gwakeFds
[0] = -1;

71 
	gwakeFds
[1] = -1;

73 
	gšputCouÁ
 = 0;

75 
	gcÚŒŞAddr
.
	gcÚŒŞAddrUn
.
	gsun_çmy
 = 
AF_UNIX
;

76 
	gcÚŒŞAddrL’
 = (
cÚŒŞAddr
.
cÚŒŞAddrUn
.
sun_çmy
) +

77 
kJdwpCÚŒŞNameL’
;

78 
memıy
(
cÚŒŞAddr
.
cÚŒŞAddrUn
.
sun_·th
, 
kJdwpCÚŒŞName
,

79 
kJdwpCÚŒŞNameL’
);

84 
	$adbS‹F»e
Ğ
JdwpN‘S‹
* 
ÃtS‹
 )

86 ià(
ÃtS‹
 =ğ
NULL
)

89 ià(
ÃtS‹
->
ş›ÁSock
 >= 0) {

90 
	`shutdown
(
ÃtS‹
->
ş›ÁSock
, 
SHUT_RDWR
);

91 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

93 ià(
ÃtS‹
->
cÚŒŞSock
 >= 0) {

94 
	`shutdown
(
ÃtS‹
->
cÚŒŞSock
, 
SHUT_RDWR
);

95 
	`şo£
(
ÃtS‹
->
cÚŒŞSock
);

97 ià(
ÃtS‹
->
wakeFds
[0] >= 0) {

98 
	`şo£
(
ÃtS‹
->
wakeFds
[0]);

99 
ÃtS‹
->
wakeFds
[0] = -1;

101 ià(
ÃtS‹
->
wakeFds
[1] >= 0) {

102 
	`şo£
(
ÃtS‹
->
wakeFds
[1]);

103 
ÃtS‹
->
wakeFds
[1] = -1;

106 
d–‘e
 
ÃtS‹
;

107 
	}
}

114 
boŞ
 
	$¡¬tup
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

116 
JdwpN‘S‹
* 
ÃtS‹
;

118 
	`ALOGV
("ADBransport startup");

120 
¡©e
->
ÃtS‹
 =‚‘S‹ = 
Ãw
 
JdwpN‘S‹
;

121 ià(
ÃtS‹
 =ğ
NULL
)

122  
çl£
;

124  
Œue
;

125 
	}
}

134 
	$»ûiveCl›ÁFd
(
JdwpN‘S‹
* 
ÃtS‹
)

136 
msghdr
 
msg
;

137 
cmsghdr
* 
cmsg
;

138 
iovec
 
iov
;

139 
dummy
 = '!';

141 
cmsghdr
 
cm
;

142 
bufãr
[
	`CMSG_SPACE
(())];

143 } 
cm_un
;

144 
»t
;

146 
iov
.
iov_ba£
 = &
dummy
;

147 
iov
.
iov_Ën
 = 1;

148 
msg
.
msg_Çme
 = 
NULL
;

149 
msg
.
msg_Çm–’
 = 0;

150 
msg
.
msg_iov
 = &
iov
;

151 
msg
.
msg_iovËn
 = 1;

152 
msg
.
msg_æags
 = 0;

153 
msg
.
msg_cÚŒŞ
 = 
cm_un
.
bufãr
;

154 
msg
.
msg_cÚŒŞËn
 = (
cm_un
.
bufãr
);

156 
cmsg
 = 
	`CMSG_FIRSTHDR
(&
msg
);

157 
cmsg
->
cmsg_Ën
 = 
msg
.
msg_cÚŒŞËn
;

158 
cmsg
->
cmsg_Ëv–
 = 
SOL_SOCKET
;

159 
cmsg
->
cmsg_ty³
 = 
SCM_RIGHTS
;

160 ((*)(*)
	`CMSG_DATA
(
cmsg
))[0] = -1;

163 
»t
 = 
	`»cvmsg
(
ÃtS‹
->
cÚŒŞSock
, &
msg
, 0);

164 } 
»t
 < 0 && 
”ºo
 =ğ
EINTR
);

166 ià(
»t
 <= 0) {

167 ià(
»t
 < 0) {

168 
	`ALOGW
("receiving file descriptor from ADB failed (socket %d): %s",

169 
ÃtS‹
->
cÚŒŞSock
, 
	`¡»¼Ü
(
”ºo
));

171 
	`şo£
(
ÃtS‹
->
cÚŒŞSock
);

172 
ÃtS‹
->
cÚŒŞSock
 = -1;

176  ((*)(*)
	`CMSG_DATA
(
cmsg
))[0];

177 
	}
}

186 
boŞ
 
	$acû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

188 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

189 
»ŒyCouÁ
 = 0;

193 
»Œy
:

194 ià(
ÃtS‹
->
shu‰šgDown
)

195  
çl£
;

197 ià(
ÃtS‹
->
cÚŒŞSock
 < 0) {

198 
¦“p_ms
 = 500;

199 cÚ¡ 
¦“p_max_ms
 = 2*1000;

200 
buff
[5];

202 
ÃtS‹
->
cÚŒŞSock
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

203 ià(
ÃtS‹
->
cÚŒŞSock
 < 0) {

204 
	`ALOGE
("Could‚ot create ADB control socket:%s",

205 
	`¡»¼Ü
(
”ºo
));

206  
çl£
;

209 ià(
	`pe
(
ÃtS‹
->
wakeFds
) < 0) {

210 
	`ALOGE
("pipe failed");

211  
çl£
;

214 
	`¢´štf
(
buff
, (buff), "%04x", 
	`g‘pid
());

215 
buff
[4] = 0;

231 
»t
 = 
	`cÚÃù
(
ÃtS‹
->
cÚŒŞSock
,

232 &
ÃtS‹
->
cÚŒŞAddr
.
cÚŒŞAddrPÏš
,

233 
ÃtS‹
->
cÚŒŞAddrL’
);

234 ià(!
»t
) {

235 ià(!
	`sock‘_³”_is_Œu¡ed
(
ÃtS‹
->
cÚŒŞSock
)) {

236 ià(
	`shutdown
(
ÃtS‹
->
cÚŒŞSock
, 
SHUT_RDWR
)) {

237 
	`ALOGE
("ŒoubË shu‰šg dowÀsock‘: %s", 
	`¡»¼Ü
(
”ºo
));

239  
çl£
;

244 
»t
 = 
	`£nd
Ğ
ÃtS‹
->
cÚŒŞSock
, 
buff
, 4, 0 );

245 } 
»t
 < 0 && 
”ºo
 =ğ
EINTR
);

247 ià(
»t
 >= 0) {

248 
	`ALOGV
("PID s’ˆa '%.*s'ØADB", 4, 
buff
);

252 
	`ALOGE
("Weird, can't send JDWP…rocess…ido ADB: %s",

253 
	`¡»¼Ü
(
”ºo
));

254  
çl£
;

256 
	`ALOGV
("Can't connecto ADB control socket:%s",

257 
	`¡»¼Ü
(
”ºo
));

259 
	`u¦“p
Ğ
¦“p_ms
*1000 );

261 
¦“p_ms
 += (sleep_ms >> 1);

262 ià(
¦“p_ms
 > 
¦“p_max_ms
)

263 
¦“p_ms
 = 
¦“p_max_ms
;

265 ià(
ÃtS‹
->
shu‰šgDown
)

266  
çl£
;

270 
	`ALOGV
("tryingo„eceive file descriptor from ADB");

272 
ÃtS‹
->
ş›ÁSock
 = 
	`»ûiveCl›ÁFd
(netState);

273 ià(
ÃtS‹
->
shu‰šgDown
)

274  
çl£
;

276 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

277 ià(++
»ŒyCouÁ
 > 5) {

278 
	`ALOGE
("adb connection max„etriesƒxceeded");

279  
çl£
;

281 
»Œy
;

283 
	`ALOGV
("»ûived fdesütÜ %d from ADB", 
ÃtS‹
->
ş›ÁSock
);

284 
ÃtS‹
->
awa™šgHªdshake
 = 1;

285 
ÃtS‹
->
šputCouÁ
 = 0;

286  
Œue
;

288 
	}
}

293 
boŞ
 
	$e¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

295  
çl£
;

296 
	}
}

302 
	$şo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

304 
JdwpN‘S‹
* 
ÃtS‹
;

306 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

308 
ÃtS‹
 = 
¡©e
->netState;

309 ià(
ÃtS‹
->
ş›ÁSock
 < 0)

312 
	`ALOGV
("+++ closed JDWP <-> ADB connection");

314 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

315 
ÃtS‹
->
ş›ÁSock
 = -1;

316 
	}
}

324 
	$adbS‹Shutdown
(
JdwpN‘S‹
* 
ÃtS‹
)

326 
cÚŒŞSock
;

327 
ş›ÁSock
;

329 ià(
ÃtS‹
 =ğ
NULL
)

332 
ÃtS‹
->
shu‰šgDown
 = 
Œue
;

334 
ş›ÁSock
 = 
ÃtS‹
->clientSock;

335 ià(
ş›ÁSock
 >= 0) {

336 
	`shutdown
(
ş›ÁSock
, 
SHUT_RDWR
);

337 
ÃtS‹
->
ş›ÁSock
 = -1;

340 
cÚŒŞSock
 = 
ÃtS‹
->controlSock;

341 ià(
cÚŒŞSock
 >= 0) {

342 
	`shutdown
(
cÚŒŞSock
, 
SHUT_RDWR
);

343 
ÃtS‹
->
cÚŒŞSock
 = -1;

346 ià(
ÃtS‹
->
wakeFds
[1] >= 0) {

347 
	`ALOGV
("+++ writingo wakePipe");

348 
	`wr™e
(
ÃtS‹
->
wakeFds
[1], "", 1);

350 
	}
}

352 
	$ÃtShutdown
(
JdwpS‹
* 
¡©e
)

354 
	`adbS‹Shutdown
(
¡©e
->
ÃtS‹
);

355 
	}
}

361 
	$ÃtF»e
(
JdwpS‹
* 
¡©e
)

363 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

365 
	`adbS‹F»e
(
ÃtS‹
);

366 
	}
}

371 
boŞ
 
	$isCÚÃùed
(
JdwpS‹
* 
¡©e
)

373  (
¡©e
->
ÃtS‹
 !ğ
NULL
 &&

374 
¡©e
->
ÃtS‹
->
ş›ÁSock
 >= 0);

375 
	}
}

380 
boŞ
 
	$awa™šgHªdshake
(
JdwpS‹
* 
¡©e
)

382  
¡©e
->
ÃtS‹
->
awa™šgHªdshake
;

383 
	}
}

388 
boŞ
 
	$haveFuÎPack‘
(
JdwpN‘S‹
* 
ÃtS‹
)

390 
Ëngth
;

392 ià(
ÃtS‹
->
awa™šgHªdshake
)

393  (
ÃtS‹
->
šputCouÁ
 >ğ(è
kMagicHªdshakeL’
);

395 ià(
ÃtS‹
->
šputCouÁ
 < 4)

396  
çl£
;

398 
Ëngth
 = 
	`g‘4BE
(
ÃtS‹
->
šputBufãr
);

399  (
ÃtS‹
->
šputCouÁ
 >ğ
Ëngth
);

400 
	}
}

408 
	$cÚsumeBy‹s
(
JdwpN‘S‹
* 
ÃtS‹
, 
couÁ
)

410 
	`as£¹
(
couÁ
 > 0);

411 
	`as£¹
(
couÁ
 <ğ
ÃtS‹
->
šputCouÁ
);

413 ià(
couÁ
 =ğ
ÃtS‹
->
šputCouÁ
) {

414 
ÃtS‹
->
šputCouÁ
 = 0;

418 
	`memmove
(
ÃtS‹
->
šputBufãr
,‚‘S‹->šputBufã¸+ 
couÁ
,

419 
ÃtS‹
->
šputCouÁ
 - 
couÁ
);

420 
ÃtS‹
->
šputCouÁ
 -ğ
couÁ
;

421 
	}
}

426 
boŞ
 
	$hªdËPack‘
(
JdwpS‹
* 
¡©e
)

428 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

429 cÚ¡ * 
buf
 = 
ÃtS‹
->
šputBufãr
;

430 
JdwpReqH—d”
 
hdr
;

431 
u4
 
Ëngth
, 
id
;

432 
u1
 
æags
, 
cmdS‘
, 
cmd
;

433 
u2
 
”rÜ
;

434 
boŞ
 
»¶y
;

435 
d©aL’
;

437 
cmd
 = 
cmdS‘
 = 0;

439 
Ëngth
 = 
	`»ad4BE
(&
buf
);

440 
id
 = 
	`»ad4BE
(&
buf
);

441 
æags
 = 
	`»ad1
(&
buf
);

442 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

443 
»¶y
 = 
Œue
;

444 
”rÜ
 = 
	`»ad2BE
(&
buf
);

446 
»¶y
 = 
çl£
;

447 
cmdS‘
 = 
	`»ad1
(&
buf
);

448 
cmd
 = 
	`»ad1
(&
buf
);

451 
	`as£¹
((è
Ëngth
 <ğ
ÃtS‹
->
šputCouÁ
);

452 
d©aL’
 = 
Ëngth
 - (
buf
 - 
ÃtS‹
->
šputBufãr
);

454 ià(!
»¶y
) {

455 
Ex·ndBuf
* 
pR•ly
 = 
	`ex·ndBufAÎoc
();

457 
hdr
.
Ëngth
 =†ength;

458 
hdr
.
id
 = id;

459 
hdr
.
cmdS‘
 = cmdSet;

460 
hdr
.
cmd
 = cmd;

461 
	`dvmJdwpProûssReque¡
(
¡©e
, &
hdr
, 
buf
, 
d©aL’
, 
pR•ly
);

462 ià(
	`ex·ndBufG‘L’gth
(
pR•ly
) > 0) {

463 
ssize_t
 
cc
 = 
ÃtS‹
->
	`wr™ePack‘
(
pR•ly
);

465 ià(
cc
 !ğ(
ssize_t
è
	`ex·ndBufG‘L’gth
(
pR•ly
)) {

466 
	`ALOGE
("Faed s’dšg„•lyØdebugg”: %s", 
	`¡»¼Ü
(
”ºo
));

467 
	`ex·ndBufF»e
(
pR•ly
);

468  
çl£
;

471 
	`ALOGW
("NØ»¶y c»©ed fÜ s‘=%d cmd=%d", 
cmdS‘
, 
cmd
);

473 
	`ex·ndBufF»e
(
pR•ly
);

475 
	`ALOGV
("reply?!");

476 
	`as£¹
(
çl£
);

479 
	`ALOGV
("----------");

481 
	`cÚsumeBy‹s
(
ÃtS‹
, 
Ëngth
);

482  
Œue
;

483 
	}
}

500 
boŞ
 
	$´oûssIncomšg
(
JdwpS‹
* 
¡©e
)

502 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

503 
»adCouÁ
;

505 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 >= 0);

507 ià(!
	`haveFuÎPack‘
(
ÃtS‹
)) {

509 
”ºo
 = 0;

511 
£lCouÁ
;

512 
fd_£t
 
»adfds
;

513 
maxfd
 = -1;

514 
fd
;

516 
	`FD_ZERO
(&
»adfds
);

519 
fd
 = 
ÃtS‹
->
cÚŒŞSock
;

520 ià(
fd
 >= 0) {

521 
	`FD_SET
(
fd
, &
»adfds
);

522 ià(
maxfd
 < 
fd
)

523 
maxfd
 = 
fd
;

525 
fd
 = 
ÃtS‹
->
ş›ÁSock
;

526 ià(
fd
 >= 0) {

527 
	`FD_SET
(
fd
, &
»adfds
);

528 ià(
maxfd
 < 
fd
)

529 
maxfd
 = 
fd
;

531 
fd
 = 
ÃtS‹
->
wakeFds
[0];

532 ià(
fd
 >= 0) {

533 
	`FD_SET
(
fd
, &
»adfds
);

534 ià(
maxfd
 < 
fd
)

535 
maxfd
 = 
fd
;

537 
	`ALOGI
("NOTE:ƒntering select w/o wakepipe");

540 ià(
maxfd
 < 0) {

541 
	`ALOGV
("+++‡ll fds‡re closed");

542  
çl£
;

557 
£lCouÁ
 = 
	`£Ëù
(
maxfd
+1, &
»adfds
, 
NULL
, NULL, NULL);

558 ià(
£lCouÁ
 < 0) {

559 ià(
”ºo
 =ğ
EINTR
)

561 
	`ALOGE
("£Ëù faed: %s", 
	`¡»¼Ü
(
”ºo
));

562 
ç
;

565 ià(
ÃtS‹
->
wakeFds
[0] >= 0 &&

566 
	`FD_ISSET
(
ÃtS‹
->
wakeFds
[0], &
»adfds
))

568 
	`ALOGD
("Got wake-up signal, bailing out of select");

569 
ç
;

571 ià(
ÃtS‹
->
cÚŒŞSock
 >= 0 &&

572 
	`FD_ISSET
(
ÃtS‹
->
cÚŒŞSock
, &
»adfds
))

574 
sock
 = 
	`»ûiveCl›ÁFd
(
ÃtS‹
);

575 ià(
sock
 >= 0) {

576 
	`ALOGI
("Ignoring second debugger --‡ccepting‡nd dropping");

577 
	`şo£
(
sock
);

579 
	`as£¹
(
ÃtS‹
->
cÚŒŞSock
 < 0);

587 ià(
ÃtS‹
->
ş›ÁSock
 >= 0 &&

588 
	`FD_ISSET
(
ÃtS‹
->
ş›ÁSock
, &
»adfds
))

590 
»adCouÁ
 = 
	`»ad
(
ÃtS‹
->
ş›ÁSock
,

591 
ÃtS‹
->
šputBufãr
 +‚‘S‹->
šputCouÁ
,

592 (
ÃtS‹
->
šputBufãr
è-‚‘S‹->
šputCouÁ
);

593 ià(
»adCouÁ
 < 0) {

595 ià(
”ºo
 !ğ
EINTR
)

596 
ç
;

597 
	`ALOGD
("+++ EINTR hit");

598  
Œue
;

599 } ià(
»adCouÁ
 == 0) {

601 
	`ALOGV
("+++…eer disconnected");

602 
ç
;

608 
ÃtS‹
->
šputCouÁ
 +ğ
»adCouÁ
;

609 ià(!
	`haveFuÎPack‘
(
ÃtS‹
))

610  
Œue
;

621 ià(
ÃtS‹
->
awa™šgHªdshake
) {

622 
cc
;

624 ià(
	`memcmp
(
ÃtS‹
->
šputBufãr
,

625 
kMagicHªdshake
, 
kMagicHªdshakeL’
) != 0)

627 
	`ALOGE
("ERROR: bad hªdshak'%.14s'", 
ÃtS‹
->
šputBufãr
);

628 
ç
;

631 
”ºo
 = 0;

632 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
,‚‘S‹->
šputBufãr
,

633 
kMagicHªdshakeL’
);

634 ià(
cc
 !ğ
kMagicHªdshakeL’
) {

635 
	`ALOGE
("Failed writing handshake bytes: %s (%d of %d)",

636 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
kMagicHªdshakeL’
);

637 
ç
;

640 
	`cÚsumeBy‹s
(
ÃtS‹
, 
kMagicHªdshakeL’
);

641 
ÃtS‹
->
awa™šgHªdshake
 = 
çl£
;

642 
	`ALOGV
("+++ handshake complete");

643  
Œue
;

649  
	`hªdËPack‘
(
¡©e
);

651 
ç
:

652 
	`şo£CÚÃùiÚ
(
¡©e
);

653  
çl£
;

654 
	}
}

664 
boŞ
 
	$£ndReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

666 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

668 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

670 
	`ALOGV
("NOT sending„equest --‚o debugger is‡ttached");

671  
çl£
;

674 
”ºo
 = 0;

676 
ssize_t
 
cc
 = 
ÃtS‹
->
	`wr™ePack‘
(
pReq
);

678 ià(
cc
 !ğ(
ssize_t
è
	`ex·ndBufG‘L’gth
(
pReq
)) {

679 
	`ALOGE
("Failed sending„eqo debugger: %s (%d of %d)",

680 
	`¡»¼Ü
(
”ºo
), (è
cc
, (è
	`ex·ndBufG‘L’gth
(
pReq
));

681  
çl£
;

684  
Œue
;

685 
	}
}

695 
boŞ
 
	$£ndBufã»dReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
iovec
* 
iov
,

696 
iovút
)

698 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

700 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

702 
	`ALOGV
("NOT sending„equest --‚o debugger is‡ttached");

703  
çl£
;

706 
size_t
 
ex³ùed
 = 0;

707 
i
;

708 
i
 = 0; i < 
iovút
; i++)

709 
ex³ùed
 +ğ
iov
[
i
].
iov_Ën
;

711 
ssize_t
 
aùu®
 = 
ÃtS‹
->
	`wr™eBufã»dPack‘
(
iov
, 
iovút
);

713 ià((
size_t
)
aùu®
 !ğ
ex³ùed
) {

714 
	`ALOGE
("Failed sending b-reqo debugger: %s (%d of %zu)",

715 
	`¡»¼Ü
(
”ºo
), (è
aùu®
, 
ex³ùed
);

716  
çl£
;

719  
Œue
;

720 
	}
}

726 cÚ¡ 
JdwpT¿n¥Üt
 
	gsock‘T¿n¥Üt
 = {

727 
¡¬tup
,

728 
acû±CÚÃùiÚ
,

729 
e¡ablishCÚÃùiÚ
,

730 
şo£CÚÃùiÚ
,

731 
ÃtShutdown
,

732 
ÃtF»e
,

733 
isCÚÃùed
,

734 
awa™šgHªdshake
,

735 
´oûssIncomšg
,

736 
£ndReque¡
,

737 
£ndBufã»dReque¡


743 cÚ¡ 
JdwpT¿n¥Üt
* 
	$dvmJdwpAndroidAdbT¿n¥Üt
()

745  &
sock‘T¿n¥Üt
;

746 
	}
}

	@vm/jdwp/JdwpConstants.cpp

21 
	~"jdwp/JdwpCÚ¡ªts.h
"

26 cÚ¡ * 
	$dvmJdwpE¼ÜSŒ
(
JdwpE¼Ü
 
”rÜ
)

28 
”rÜ
) {

29 
ERR_NONE
:

31 
ERR_INVALID_THREAD
:

33 
ERR_INVALID_THREAD_GROUP
:

35 
ERR_INVALID_PRIORITY
:

37 
ERR_THREAD_NOT_SUSPENDED
:

39 
ERR_THREAD_SUSPENDED
:

41 
ERR_INVALID_OBJECT
:

43 
ERR_INVALID_CLASS
:

45 
ERR_CLASS_NOT_PREPARED
:

47 
ERR_INVALID_METHODID
:

49 
ERR_INVALID_LOCATION
:

51 
ERR_INVALID_FIELDID
:

53 
ERR_INVALID_FRAMEID
:

55 
ERR_NO_MORE_FRAMES
:

57 
ERR_OPAQUE_FRAME
:

59 
ERR_NOT_CURRENT_FRAME
:

61 
ERR_TYPE_MISMATCH
:

63 
ERR_INVALID_SLOT
:

65 
ERR_DUPLICATE
:

67 
ERR_NOT_FOUND
:

69 
ERR_INVALID_MONITOR
:

71 
ERR_NOT_MONITOR_OWNER
:

73 
ERR_INTERRUPT
:

75 
ERR_INVALID_CLASS_FORMAT
:

77 
ERR_CIRCULAR_CLASS_DEFINITION
:

79 
ERR_FAILS_VERIFICATION
:

81 
ERR_ADD_METHOD_NOT_IMPLEMENTED
:

83 
ERR_SCHEMA_CHANGE_NOT_IMPLEMENTED
:

85 
ERR_INVALID_TYPESTATE
:

87 
ERR_HIERARCHY_CHANGE_NOT_IMPLEMENTED
:

89 
ERR_DELETE_METHOD_NOT_IMPLEMENTED
:

91 
ERR_UNSUPPORTED_VERSION
:

93 
ERR_NAMES_DONT_MATCH
:

95 
ERR_CLASS_MODIFIERS_CHANGE_NOT_IMPLEMENTED
:

97 
ERR_METHOD_MODIFIERS_CHANGE_NOT_IMPLEMENTED
:

99 
ERR_NOT_IMPLEMENTED
:

101 
ERR_NULL_POINTER
:

103 
ERR_ABSENT_INFORMATION
:

105 
ERR_INVALID_EVENT_TYPE
:

107 
ERR_ILLEGAL_ARGUMENT
:

109 
ERR_OUT_OF_MEMORY
:

111 
ERR_ACCESS_DENIED
:

113 
ERR_VM_DEAD
:

115 
ERR_INTERNAL
:

117 
ERR_UNATTACHED_THREAD
:

119 
ERR_INVALID_TAG
:

121 
ERR_ALREADY_INVOKING
:

123 
ERR_INVALID_INDEX
:

125 
ERR_INVALID_LENGTH
:

127 
ERR_INVALID_STRING
:

129 
ERR_INVALID_CLASS_LOADER
:

131 
ERR_INVALID_ARRAY
:

133 
ERR_TRANSPORT_LOAD
:

135 
ERR_TRANSPORT_INIT
:

137 
ERR_NATIVE_METHOD
:

139 
ERR_INVALID_COUNT
:

144 
	}
}

149 cÚ¡ * 
	$dvmJdwpEv’tKšdSŒ
(
JdwpEv’tKšd
 
kšd
)

151 
kšd
) {

152 
EK_SINGLE_STEP
:  "SINGLE_STEP";

153 
EK_BREAKPOINT
:  "BREAKPOINT";

154 
EK_FRAME_POP
:  "FRAME_POP";

155 
EK_EXCEPTION
:  "EXCEPTION";

156 
EK_USER_DEFINED
:  "USER_DEFINED";

157 
EK_THREAD_START
:  "THREAD_START";

159 
EK_CLASS_PREPARE
:  "CLASS_PREPARE";

160 
EK_CLASS_UNLOAD
:  "CLASS_UNLOAD";

161 
EK_CLASS_LOAD
:  "CLASS_LOAD";

162 
EK_FIELD_ACCESS
:  "FIELD_ACCESS";

163 
EK_FIELD_MODIFICATION
:  "FIELD_MODIFICATION";

164 
EK_EXCEPTION_CATCH
:  "EXCEPTION_CATCH";

165 
EK_METHOD_ENTRY
:  "METHOD_ENTRY";

166 
EK_METHOD_EXIT
:  "METHOD_EXIT";

167 
EK_VM_INIT
:  "VM_INIT";

168 
EK_VM_DEATH
:  "VM_DEATH";

169 
EK_VM_DISCONNECTED
:  "VM_DISCONNECTED";

171 
EK_THREAD_DEATH
:  "THREAD_DEATH";

174 
	}
}

179 cÚ¡ * 
	$dvmJdwpModKšdSŒ
(
JdwpModKšd
 
kšd
)

181 
kšd
) {

182 
MK_COUNT
:  "COUNT";

183 
MK_CONDITIONAL
:  "CONDITIONAL";

184 
MK_THREAD_ONLY
:  "THREAD_ONLY";

185 
MK_CLASS_ONLY
:  "CLASS_ONLY";

186 
MK_CLASS_MATCH
:  "CLASS_MATCH";

187 
MK_CLASS_EXCLUDE
:  "CLASS_EXCLUDE";

188 
MK_LOCATION_ONLY
:  "LOCATION_ONLY";

189 
MK_EXCEPTION_ONLY
:  "EXCEPTION_ONLY";

190 
MK_FIELD_ONLY
:  "FIELD_ONLY";

191 
MK_STEP
:  "STEP";

192 
MK_INSTANCE_ONLY
:  "INSTANCE_ONLY";

195 
	}
}

200 cÚ¡ * 
	$dvmJdwpS‹pD•thSŒ
(
JdwpS‹pD•th
 
d•th
)

202 
d•th
) {

203 
SD_INTO
:  "INTO";

204 
SD_OVER
:  "OVER";

205 
SD_OUT
:  "OUT";

208 
	}
}

213 cÚ¡ * 
	$dvmJdwpS‹pSizeSŒ
(
JdwpS‹pSize
 
size
)

215 
size
) {

216 
SS_MIN
:  "MIN";

217 
SS_LINE
:  "LINE";

220 
	}
}

225 cÚ¡ * 
	$dvmJdwpSu¥’dPŞicySŒ
(
JdwpSu¥’dPŞicy
 
pŞicy
)

227 
pŞicy
) {

228 
SP_NONE
:  "NONE";

229 
SP_EVENT_THREAD
:  "EVENT_THREAD";

230 
SP_ALL
:  "ALL";

233 
	}
}

238 cÚ¡ * 
	$dvmJdwpSu¥’dStusSŒ
(
JdwpSu¥’dStus
 
¡©us
)

240 
¡©us
) {

241 
SUSPEND_STATUS_NOT_SUSPENDED
:  "Not SUSPENDED";

242 
SUSPEND_STATUS_SUSPENDED
:  "SUSPENDED";

245 
	}
}

250 cÚ¡ * 
	$dvmJdwpTh»adStusSŒ
(
JdwpTh»adStus
 
¡©us
)

252 
¡©us
) {

253 
TS_ZOMBIE
:  "ZOMBIE";

254 
TS_RUNNING
:  "RUNNING";

255 
TS_SLEEPING
:  "SLEEPING";

256 
TS_MONITOR
:  "MONITOR";

257 
TS_WAIT
:  "WAIT";

260 
	}
};

	@vm/jdwp/JdwpConstants.h

19 #iâdeà
DALVIK_JDWP_JDWPCONSTANTS_H_


20 
	#DALVIK_JDWP_JDWPCONSTANTS_H_


	)

25 
	eJdwpE¼Ü
 {

26 
	mERR_NONE
 = 0,

27 
	mERR_INVALID_THREAD
 = 10,

28 
	mERR_INVALID_THREAD_GROUP
 = 11,

29 
	mERR_INVALID_PRIORITY
 = 12,

30 
	mERR_THREAD_NOT_SUSPENDED
 = 13,

31 
	mERR_THREAD_SUSPENDED
 = 14,

32 
	mERR_INVALID_OBJECT
 = 20,

33 
	mERR_INVALID_CLASS
 = 21,

34 
	mERR_CLASS_NOT_PREPARED
 = 22,

35 
	mERR_INVALID_METHODID
 = 23,

36 
	mERR_INVALID_LOCATION
 = 24,

37 
	mERR_INVALID_FIELDID
 = 25,

38 
	mERR_INVALID_FRAMEID
 = 30,

39 
	mERR_NO_MORE_FRAMES
 = 31,

40 
	mERR_OPAQUE_FRAME
 = 32,

41 
	mERR_NOT_CURRENT_FRAME
 = 33,

42 
	mERR_TYPE_MISMATCH
 = 34,

43 
	mERR_INVALID_SLOT
 = 35,

44 
	mERR_DUPLICATE
 = 40,

45 
	mERR_NOT_FOUND
 = 41,

46 
	mERR_INVALID_MONITOR
 = 50,

47 
	mERR_NOT_MONITOR_OWNER
 = 51,

48 
	mERR_INTERRUPT
 = 52,

49 
	mERR_INVALID_CLASS_FORMAT
 = 60,

50 
	mERR_CIRCULAR_CLASS_DEFINITION
 = 61,

51 
	mERR_FAILS_VERIFICATION
 = 62,

52 
	mERR_ADD_METHOD_NOT_IMPLEMENTED
 = 63,

53 
	mERR_SCHEMA_CHANGE_NOT_IMPLEMENTED
 = 64,

54 
	mERR_INVALID_TYPESTATE
 = 65,

55 
	mERR_HIERARCHY_CHANGE_NOT_IMPLEMENTED
 = 66,

56 
	mERR_DELETE_METHOD_NOT_IMPLEMENTED
 = 67,

57 
	mERR_UNSUPPORTED_VERSION
 = 68,

58 
	mERR_NAMES_DONT_MATCH
 = 69,

59 
	mERR_CLASS_MODIFIERS_CHANGE_NOT_IMPLEMENTED
 = 70,

60 
	mERR_METHOD_MODIFIERS_CHANGE_NOT_IMPLEMENTED
 = 71,

61 
	mERR_NOT_IMPLEMENTED
 = 99,

62 
	mERR_NULL_POINTER
 = 100,

63 
	mERR_ABSENT_INFORMATION
 = 101,

64 
	mERR_INVALID_EVENT_TYPE
 = 102,

65 
	mERR_ILLEGAL_ARGUMENT
 = 103,

66 
	mERR_OUT_OF_MEMORY
 = 110,

67 
	mERR_ACCESS_DENIED
 = 111,

68 
	mERR_VM_DEAD
 = 112,

69 
	mERR_INTERNAL
 = 113,

70 
	mERR_UNATTACHED_THREAD
 = 115,

71 
	mERR_INVALID_TAG
 = 500,

72 
	mERR_ALREADY_INVOKING
 = 502,

73 
	mERR_INVALID_INDEX
 = 503,

74 
	mERR_INVALID_LENGTH
 = 504,

75 
	mERR_INVALID_STRING
 = 506,

76 
	mERR_INVALID_CLASS_LOADER
 = 507,

77 
	mERR_INVALID_ARRAY
 = 508,

78 
	mERR_TRANSPORT_LOAD
 = 509,

79 
	mERR_TRANSPORT_INIT
 = 510,

80 
	mERR_NATIVE_METHOD
 = 511,

81 
	mERR_INVALID_COUNT
 = 512,

83 cÚ¡ * 
dvmJdwpE¼ÜSŒ
(
JdwpE¼Ü
 
”rÜ
);

89 
	eJdwpCÏssStus
 {

90 
	mCS_VERIFIED
 = 0x01,

91 
	mCS_PREPARED
 = 0x02,

92 
	mCS_INITIALIZED
 = 0x04,

93 
	mCS_ERROR
 = 0x08,

99 
	eJdwpEv’tKšd
 {

100 
	mEK_SINGLE_STEP
 = 1,

101 
	mEK_BREAKPOINT
 = 2,

102 
	mEK_FRAME_POP
 = 3,

103 
	mEK_EXCEPTION
 = 4,

104 
	mEK_USER_DEFINED
 = 5,

105 
	mEK_THREAD_START
 = 6,

106 
	mEK_THREAD_END
 = 7,

107 
	mEK_CLASS_PREPARE
 = 8,

108 
	mEK_CLASS_UNLOAD
 = 9,

109 
	mEK_CLASS_LOAD
 = 10,

110 
	mEK_FIELD_ACCESS
 = 20,

111 
	mEK_FIELD_MODIFICATION
 = 21,

112 
	mEK_EXCEPTION_CATCH
 = 30,

113 
	mEK_METHOD_ENTRY
 = 40,

114 
	mEK_METHOD_EXIT
 = 41,

115 
	mEK_VM_INIT
 = 90,

116 
	mEK_VM_DEATH
 = 99,

117 
	mEK_VM_DISCONNECTED
 = 100,

118 
	mEK_VM_START
 = 
EK_VM_INIT
,

119 
	mEK_THREAD_DEATH
 = 
EK_THREAD_END
,

121 cÚ¡ * 
dvmJdwpEv’tKšdSŒ
(
JdwpEv’tKšd
 
kšd
);

126 
	eJdwpModKšd
 {

127 
	mMK_COUNT
 = 1,

128 
	mMK_CONDITIONAL
 = 2,

129 
	mMK_THREAD_ONLY
 = 3,

130 
	mMK_CLASS_ONLY
 = 4,

131 
	mMK_CLASS_MATCH
 = 5,

132 
	mMK_CLASS_EXCLUDE
 = 6,

133 
	mMK_LOCATION_ONLY
 = 7,

134 
	mMK_EXCEPTION_ONLY
 = 8,

135 
	mMK_FIELD_ONLY
 = 9,

136 
	mMK_STEP
 = 10,

137 
	mMK_INSTANCE_ONLY
 = 11,

139 cÚ¡ * 
dvmJdwpModKšdSŒ
(
JdwpModKšd
 
kšd
);

144 
	eJdwpInvokeO±iÚs
 {

145 
	mINVOKE_SINGLE_THREADED
 = 0x01,

146 
	mINVOKE_NONVIRTUAL
 = 0x02,

152 
	eJdwpS‹pD•th
 {

153 
	mSD_INTO
 = 0,

154 
	mSD_OVER
 = 1,

155 
	mSD_OUT
 = 2,

157 cÚ¡ * 
dvmJdwpS‹pD•thSŒ
(
JdwpS‹pD•th
 
d•th
);

162 
	eJdwpS‹pSize
 {

163 
	mSS_MIN
 = 0,

164 
	mSS_LINE
 = 1,

166 cÚ¡ * 
dvmJdwpS‹pSizeSŒ
(
JdwpS‹pSize
 
size
);

171 
	eJdwpSu¥’dPŞicy
 {

172 
	mSP_NONE
 = 0,

173 
	mSP_EVENT_THREAD
 = 1,

174 
	mSP_ALL
 = 2,

176 cÚ¡ * 
dvmJdwpSu¥’dPŞicySŒ
(
JdwpSu¥’dPŞicy
 
pŞicy
);

181 
	eJdwpSu¥’dStus
 {

182 
	mSUSPEND_STATUS_NOT_SUSPENDED
 = 0,

183 
	mSUSPEND_STATUS_SUSPENDED
 = 1,

185 cÚ¡ * 
dvmJdwpSu¥’dStusSŒ
(
JdwpSu¥’dStus
 
¡©us
);

190 
	eJdwpTh»adStus
 {

191 
	mTS_ZOMBIE
 = 0,

192 
	mTS_RUNNING
 = 1,

193 
	mTS_SLEEPING
 = 2,

194 
	mTS_MONITOR
 = 3,

195 
	mTS_WAIT
 = 4,

197 cÚ¡ * 
dvmJdwpTh»adStusSŒ
(
JdwpTh»adStus
 
¡©us
);

202 
	eJdwpTy³Tag
 {

203 
	mTT_CLASS
 = 1,

204 
	mTT_INTERFACE
 = 2,

205 
	mTT_ARRAY
 = 3,

211 
	eJdwpTy³
 {

212 
	mJT_ARRAY
 = '[',

213 
	mJT_BYTE
 = 'B',

214 
	mJT_CHAR
 = 'C',

215 
	mJT_OBJECT
 = 'L',

216 
	mJT_FLOAT
 = 'F',

217 
	mJT_DOUBLE
 = 'D',

218 
	mJT_INT
 = 'I',

219 
	mJT_LONG
 = 'J',

220 
	mJT_SHORT
 = 'S',

221 
	mJT_VOID
 = 'V',

222 
	mJT_BOOLEAN
 = 'Z',

223 
	mJT_STRING
 = 's',

224 
	mJT_THREAD
 = 't',

225 
	mJT_THREAD_GROUP
 = 'g',

226 
	mJT_CLASS_LOADER
 = 'l',

227 
	mJT_CLASS_OBJECT
 = 'c',

	@vm/jdwp/JdwpEvent.cpp

19 
	~"jdwp/JdwpPriv.h
"

20 
	~"jdwp/JdwpCÚ¡ªts.h
"

21 
	~"jdwp/JdwpHªdËr.h
"

22 
	~"jdwp/JdwpEv’t.h
"

23 
	~"jdwp/Ex·ndBuf.h
"

25 
	~<¡dlib.h
>

26 
	~<¡ršg.h
>

27 
	~<¡ddef.h
>

28 
	~<uni¡d.h
>

95 
	#kJdwpEv’tCommªdS‘
 64

	)

96 
	#kJdwpCompos™eCommªd
 100

	)

103 
	sModBask‘
 {

104 cÚ¡ 
JdwpLoÿtiÚ
* 
	mpLoc
;

105 cÚ¡ * 
	mşassName
;

106 
ObjeùId
 
	mth»adId
;

107 
RefTy³Id
 
	mşassId
;

108 
RefTy³Id
 
	mexûpCÏssId
;

109 
boŞ
 
	mÿught
;

110 
F›ldId
 
	mf›ld
;

111 
ObjeùId
 
	mthisPŒ
;

119 
u4
 
	$dvmJdwpNextReque¡S”Ÿl
(
JdwpS‹
* 
¡©e
)

121 
	`dvmDbgLockMu‹x
(&
¡©e
->
£rŸlLock
);

122 
u4
 
»suÉ
 = 
¡©e
->
»que¡S”Ÿl
++;

123 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
£rŸlLock
);

125  
»suÉ
;

126 
	}
}

132 
u4
 
	$dvmJdwpNextEv’tS”Ÿl
(
JdwpS‹
* 
¡©e
)

134 
	`dvmDbgLockMu‹x
(&
¡©e
->
£rŸlLock
);

135 
u4
 
»suÉ
 = 
¡©e
->
ev’tS”Ÿl
++;

136 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
£rŸlLock
);

138  
»suÉ
;

139 
	}
}

144 
	$lockEv’tMu‹x
(
JdwpS‹
* 
¡©e
)

147 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tLock
);

149 
	}
}

154 
	$uÆockEv’tMu‹x
(
JdwpS‹
* 
¡©e
)

156 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tLock
);

157 
	}
}

162 
	$dumpEv’t
(cÚ¡ 
JdwpEv’t
* 
pEv’t
)

164 
	`ALOGI
("Event id=0x%4x %p (prev=%p‚ext=%p):",

165 
pEv’t
->
»que¡Id
,…Ev’t,…Ev’t->
´ev
,…Ev’t->
Ãxt
);

166 
	`ALOGI
(" kind=%s susp=%s modCount=%d",

167 
	`dvmJdwpEv’tKšdSŒ
(
pEv’t
->
ev’tKšd
),

168 
	`dvmJdwpSu¥’dPŞicySŒ
(
pEv’t
->
su¥’dPŞicy
),

169 
pEv’t
->
modCouÁ
);

171 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

172 cÚ¡ 
JdwpEv’tMod
* 
pMod
 = &
pEv’t
->
mods
[
i
];

173 
JdwpModKšd
 
kšd
 = 
¡©ic_ÿ¡
<JdwpModKšd>(
pMod
->
modKšd
);

174 
	`ALOGI
(" %s", 
	`dvmJdwpModKšdSŒ
(
kšd
));

177 
	}
}

186 
JdwpE¼Ü
 
	$dvmJdwpRegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
)

188 
	`lockEv’tMu‹x
(
¡©e
);

190 
	`as£¹
(
¡©e
 !ğ
NULL
);

191 
	`as£¹
(
pEv’t
 !ğ
NULL
);

192 
	`as£¹
(
pEv’t
->
´ev
 =ğ
NULL
);

193 
	`as£¹
(
pEv’t
->
Ãxt
 =ğ
NULL
);

199 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

200 cÚ¡ 
JdwpEv’tMod
* 
pMod
 = &
pEv’t
->
mods
[
i
];

201 ià(
pMod
->
modKšd
 =ğ
MK_LOCATION_ONLY
) {

203 
	`dvmDbgW©chLoÿtiÚ
(&
pMod
->
loÿtiÚOÆy
.
loc
);

204 } ià(
pMod
->
modKšd
 =ğ
MK_STEP
) {

206 
JdwpS‹pSize
 
size
 = 
¡©ic_ÿ¡
<JdwpS‹pSize>(
pMod
->
¡•
.size);

207 
JdwpS‹pD•th
 
d•th
 = 
¡©ic_ÿ¡
<JdwpS‹pD•th>(
pMod
->
¡•
.depth);

208 
	`dvmDbgCÚfigu»S‹p
(
pMod
->
¡•
.
th»adId
, 
size
, 
d•th
);

209 } ià(
pMod
->
modKšd
 =ğ
MK_FIELD_ONLY
) {

211 
	`dumpEv’t
(
pEv’t
);

218 ià(
¡©e
->
ev’tLi¡
 !ğ
NULL
) {

219 
pEv’t
->
Ãxt
 = 
¡©e
->
ev’tLi¡
;

220 
¡©e
->
ev’tLi¡
->
´ev
 = 
pEv’t
;

222 
¡©e
->
ev’tLi¡
 = 
pEv’t
;

223 
¡©e
->
numEv’ts
++;

225 
	`uÆockEv’tMu‹x
(
¡©e
);

227  
ERR_NONE
;

228 
	}
}

238 
	$uÄegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
)

240 ià(
pEv’t
->
´ev
 =ğ
NULL
) {

242 
	`as£¹
(
¡©e
->
ev’tLi¡
 =ğ
pEv’t
);

244 
¡©e
->
ev’tLi¡
 = 
pEv’t
->
Ãxt
;

246 
pEv’t
->
´ev
->
Ãxt
 =…Event->next;

249 ià(
pEv’t
->
Ãxt
 !ğ
NULL
) {

250 
pEv’t
->
Ãxt
->
´ev
 =…Event->prev;

251 
pEv’t
->
Ãxt
 = 
NULL
;

253 
pEv’t
->
´ev
 = 
NULL
;

258 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

259 
JdwpEv’tMod
* 
pMod
 = &
pEv’t
->
mods
[
i
];

260 ià(
pMod
->
modKšd
 =ğ
MK_LOCATION_ONLY
) {

262 
	`dvmDbgUnw©chLoÿtiÚ
(&
pMod
->
loÿtiÚOÆy
.
loc
);

264 ià(
pMod
->
modKšd
 =ğ
MK_STEP
) {

266 
	`dvmDbgUncÚfigu»S‹p
(
pMod
->
¡•
.
th»adId
);

270 
¡©e
->
numEv’ts
--;

271 
	`as£¹
(
¡©e
->
numEv’ts
 !ğ0 || s‹->
ev’tLi¡
 =ğ
NULL
);

272 
	}
}

281 
	$dvmJdwpUÄegi¡”Ev’tById
(
JdwpS‹
* 
¡©e
, 
u4
 
»que¡Id
)

283 
	`lockEv’tMu‹x
(
¡©e
);

285 
JdwpEv’t
* 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

286 
pEv’t
 !ğ
NULL
) {

287 ià(
pEv’t
->
»que¡Id
 ==„equestId) {

288 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

289 
	`dvmJdwpEv’tF»e
(
pEv’t
);

290 
dÚe
;

293 
pEv’t
 =…Ev’t->
Ãxt
;

298 
dÚe
:

299 
	`uÆockEv’tMu‹x
(
¡©e
);

300 
	}
}

305 
	$dvmJdwpUÄegi¡”AÎ
(
JdwpS‹
* 
¡©e
)

307 
	`lockEv’tMu‹x
(
¡©e
);

309 
JdwpEv’t
* 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

310 
pEv’t
 !ğ
NULL
) {

311 
JdwpEv’t
* 
pNextEv’t
 = 
pEv’t
->
Ãxt
;

313 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

314 
	`dvmJdwpEv’tF»e
(
pEv’t
);

315 
pEv’t
 = 
pNextEv’t
;

318 
¡©e
->
ev’tLi¡
 = 
NULL
;

320 
	`uÆockEv’tMu‹x
(
¡©e
);

321 
	}
}

329 
JdwpEv’t
* 
	$dvmJdwpEv’tAÎoc
(
numMods
)

331 
JdwpEv’t
* 
ÃwEv’t
;

332 
®locSize
 = 
	`off£tof
(
JdwpEv’t
, 
mods
) +

333 
numMods
 * (
ÃwEv’t
->
mods
[0]);

335 
ÃwEv’t
 = (
JdwpEv’t
*)
	`ÿÎoc
(1, 
®locSize
);

336  
ÃwEv’t
;

337 
	}
}

344 
	$dvmJdwpEv’tF»e
(
JdwpEv’t
* 
pEv’t
)

346 ià(
pEv’t
 =ğ
NULL
)

350 
	`as£¹
(
pEv’t
->
´ev
 =ğ
NULL
);

351 
	`as£¹
(
pEv’t
->
Ãxt
 =ğ
NULL
);

357 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

358 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_CLASS_MATCH
) {

359 
	`ä“
(
pEv’t
->
mods
[
i
].
şassM©ch
.
şassP©‹º
);

360 
pEv’t
->
mods
[
i
].
şassM©ch
.
şassP©‹º
 = 
NULL
;

362 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_CLASS_EXCLUDE
) {

363 
	`ä“
(
pEv’t
->
mods
[
i
].
şassExşude
.
şassP©‹º
);

364 
pEv’t
->
mods
[
i
].
şassExşude
.
şassP©‹º
 = 
NULL
;

368 
	`ä“
(
pEv’t
);

369 
	}
}

377 
JdwpEv’t
** 
	$®locM©chLi¡
(
JdwpS‹
* 
¡©e
)

379  (
JdwpEv’t
**è
	`m®loc
((JdwpEv’t*è* 
¡©e
->
numEv’ts
);

380 
	}
}

386 
	$ş—nupM©chLi¡
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
** 
m©chLi¡
,

387 
m©chCouÁ
)

389 
JdwpEv’t
** 
µEv’t
 = 
m©chLi¡
;

391 
m©chCouÁ
--) {

392 
JdwpEv’t
* 
pEv’t
 = *
µEv’t
;

394 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

395 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_COUNT
 &&

396 
pEv’t
->
mods
[
i
].
couÁ
.count == 0)

398 
	`ALOGV
("##### Removingƒxpiredƒvent");

399 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

400 
	`dvmJdwpEv’tF»e
(
pEv’t
);

405 
µEv’t
++;

408 
	`ä“
(
m©chLi¡
);

409 
	}
}

417 
boŞ
 
	$·‰”nM©ch
(cÚ¡ * 
·‰”n
, cÚ¡ * 
rg‘
)

419 
·tL’
 = 
	`¡¾’
(
·‰”n
);

421 ià(
·‰”n
[0] == '*') {

422 
rg‘L’
 = 
	`¡¾’
(
rg‘
);

423 
·tL’
--;

425 
	`ALOGE
(">>> comparing '%s'o '%s'",

426 
·‰”n
+1, 
rg‘
 + (
rg‘L’
-
·tL’
));

428 ià(
rg‘L’
 < 
·tL’
)

429  
çl£
;

430  
	`¡rcmp
(
·‰”n
+1, 
rg‘
 + (
rg‘L’
-
·tL’
)) == 0;

431 } ià(
·‰”n
[
·tL’
-1] == '*') {

432  
	`¡ºcmp
(
·‰”n
, 
rg‘
, 
·tL’
-1) == 0;

434  
	`¡rcmp
(
·‰”n
, 
rg‘
) == 0;

436 
	}
}

446 
šlše
 
boŞ
 
	$loÿtiÚM©ch
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc1
,

447 cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc2
)

449  
pLoc1
->
idx
 =ğ
pLoc2
->idx &&

450 
pLoc1
->
m‘hodId
 =ğ
pLoc2
->methodId &&

451 
pLoc1
->
şassId
 =ğ
pLoc2
->classId &&

452 
pLoc1
->
ty³Tag
 =ğ
pLoc2
->typeTag;

453 
	}
}

461 
boŞ
 
	$modsM©ch
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
, 
ModBask‘
* 
bask‘
)

463 
JdwpEv’tMod
* 
pMod
 = 
pEv’t
->
mods
;

465 
i
 = 
pEv’t
->
modCouÁ
; i > 0; i--, 
pMod
++) {

466 
pMod
->
modKšd
) {

467 
MK_COUNT
:

468 
	`as£¹
(
pMod
->
couÁ
.count > 0);

469 
pMod
->
couÁ
.count--;

471 
MK_CONDITIONAL
:

472 
	`as£¹
(
çl£
);

474 
MK_THREAD_ONLY
:

475 ià(
pMod
->
th»adOÆy
.
th»adId
 !ğ
bask‘
->threadId)

476  
çl£
;

478 
MK_CLASS_ONLY
:

479 ià(!
	`dvmDbgM©chTy³
(
bask‘
->
şassId
, 
pMod
->
şassOÆy
.
»fTy³Id
))

480  
çl£
;

482 
MK_CLASS_MATCH
:

483 ià(!
	`·‰”nM©ch
(
pMod
->
şassM©ch
.
şassP©‹º
,

484 
bask‘
->
şassName
))

485  
çl£
;

487 
MK_CLASS_EXCLUDE
:

488 ià(
	`·‰”nM©ch
(
pMod
->
şassM©ch
.
şassP©‹º
,

489 
bask‘
->
şassName
))

490  
çl£
;

492 
MK_LOCATION_ONLY
:

493 ià(!
	`loÿtiÚM©ch
(&
pMod
->
loÿtiÚOÆy
.
loc
, 
bask‘
->
pLoc
))

494  
çl£
;

496 
MK_EXCEPTION_ONLY
:

497 ià(
pMod
->
exû±iÚOÆy
.
»fTy³Id
 != 0 &&

498 !
	`dvmDbgM©chTy³
(
bask‘
->
exûpCÏssId
,

499 
pMod
->
exû±iÚOÆy
.
»fTy³Id
))

500  
çl£
;

501 ià((
bask‘
->
ÿught
 && !
pMod
->
exû±iÚOÆy
.caught) ||

502 (!
bask‘
->
ÿught
 && !
pMod
->
exû±iÚOÆy
.
unÿught
))

503  
çl£
;

505 
MK_FIELD_ONLY
:

506 ià(!
	`dvmDbgM©chTy³
(
bask‘
->
şassId
, 
pMod
->
f›ldOÆy
.
»fTy³Id
) ||

507 
pMod
->
f›ldOÆy
.
f›ldId
 !ğ
bask‘
->
f›ld
)

508  
çl£
;

510 
MK_STEP
:

511 ià(
pMod
->
¡•
.
th»adId
 !ğ
bask‘
->threadId)

512  
çl£
;

514 
MK_INSTANCE_ONLY
:

515 ià(
pMod
->
š¡ªûOÆy
.
objeùId
 !ğ
bask‘
->
thisPŒ
)

516  
çl£
;

519 
	`ALOGE
("unhªdËd mod kšd %d", 
pMod
->
modKšd
);

520 
	`as£¹
(
çl£
);

525  
Œue
;

526 
	}
}

538 
	$fšdM©chšgEv’ts
(
JdwpS‹
* 
¡©e
, 
JdwpEv’tKšd
 
ev’tKšd
,

539 
ModBask‘
* 
bask‘
, 
JdwpEv’t
** 
m©chLi¡
, * 
pM©chCouÁ
)

542 
m©chLi¡
 +ğ*
pM©chCouÁ
;

544 
JdwpEv’t
* 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

545 
pEv’t
 !ğ
NULL
) {

546 ià(
pEv’t
->
ev’tKšd
 =ğev’tKšd && 
	`modsM©ch
(
¡©e
,…Ev’t, 
bask‘
))

548 *
m©chLi¡
++ = 
pEv’t
;

549 (*
pM©chCouÁ
)++;

552 
pEv’t
 =…Ev’t->
Ãxt
;

554 
	}
}

560 
JdwpSu¥’dPŞicy
 
	$sÿnSu¥’dPŞicy
(
JdwpEv’t
** 
m©chLi¡
,

561 
m©chCouÁ
)

563 
JdwpSu¥’dPŞicy
 
pŞicy
 = 
SP_NONE
;

565 
m©chCouÁ
--) {

566 ià((*
m©chLi¡
)->
su¥’dPŞicy
 > 
pŞicy
)

567 
pŞicy
 = (*
m©chLi¡
)->
su¥’dPŞicy
;

568 
m©chLi¡
++;

571  
pŞicy
;

572 
	}
}

580 
	$su¥’dByPŞicy
(
JdwpS‹
* 
¡©e
, 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
)

582 ià(
su¥’dPŞicy
 =ğ
SP_NONE
)

585 ià(
su¥’dPŞicy
 =ğ
SP_ALL
) {

586 
	`dvmDbgSu¥’dVM
(
Œue
);

588 
	`as£¹
(
su¥’dPŞicy
 =ğ
SP_EVENT_THREAD
);

592 ià(
	`dvmDbgG‘Th»adS–fId
(è=ğ
¡©e
->
debugTh»adId
) {

593 
	`ALOGI
("NOTE: suspendByPolicy‚ot suspending JDWPhread");

597 
DebugInvokeReq
* 
pReq
 = 
	`dvmDbgG‘InvokeReq
();

598 
Œue
) {

599 
pReq
->
»ady
 = 
Œue
;

600 
	`dvmDbgSu¥’dS–f
();

601 
pReq
->
»ady
 = 
çl£
;

607 ià(!
pReq
->
švokeN“ded
) {

613 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
	`dvmDbgG‘Th»adS–fId
());

616 
	`ALOGV
("invoking method...");

617 
	`dvmDbgExecu‹M‘hod
(
pReq
);

619 
pReq
->
”r
 = 
ERR_NONE
;

622 
pReq
->
švokeN“ded
 = 
çl£
;

624 
	`ALOGV
("invoke complete, signaling‡nd self-suspending");

625 
	`dvmDbgLockMu‹x
(&
pReq
->
lock
);

626 
	`dvmDbgCÚdSigÇl
(&
pReq
->
cv
);

627 
	`dvmDbgUÆockMu‹x
(&
pReq
->
lock
);

629 
	}
}

638 
boŞ
 
	$švokeInProg»ss
(
JdwpS‹
* 
¡©e
)

640 
DebugInvokeReq
* 
pReq
 = 
	`dvmDbgG‘InvokeReq
();

641  
pReq
->
švokeN“ded
;

642 
	}
}

654 
	$dvmJdwpS‘Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
)

656 
boŞ
 
wa™ed
 = 
çl£
;

659 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

665 
¡©e
->
ev’tTh»adId
 != 0) {

666 
	`ALOGV
("event in…rogress (0x%llx), 0x%llx sleeping",

667 
¡©e
->
ev’tTh»adId
, 
th»adId
);

668 
wa™ed
 = 
Œue
;

669 
	`dvmDbgCÚdWa™
(&
¡©e
->
ev’tTh»adCÚd
, &¡©e->
ev’tTh»adLock
);

672 ià(
wa™ed
 || 
th»adId
 != 0)

673 
	`ALOGV
("ev’ˆtok’ g¿bbed (0x%Îx)", 
th»adId
);

674 ià(
th»adId
 != 0)

675 
¡©e
->
ev’tTh»adId
 = 
th»adId
;

677 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

678 
	}
}

683 
	$dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
)

690 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

692 
	`as£¹
(
¡©e
->
ev’tTh»adId
 != 0);

693 
	`ALOGV
("ş—»dƒv’ˆtok’ (0x%Îx)", 
¡©e
->
ev’tTh»adId
);

695 
¡©e
->
ev’tTh»adId
 = 0;

697 
	`dvmDbgCÚdSigÇl
(&
¡©e
->
ev’tTh»adCÚd
);

699 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

700 
	}
}

707 
Ex·ndBuf
* 
	$ev’tP»p
()

709 
Ex·ndBuf
* 
pReq
 = 
	`ex·ndBufAÎoc
();

710 
	`ex·ndBufAddS·û
(
pReq
, 
kJDWPH—d”L’
);

712  
pReq
;

713 
	}
}

720 
	$ev’tFšish
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

722 
u1
* 
buf
 = 
	`ex·ndBufG‘Bufãr
(
pReq
);

724 
	`£t4BE
(
buf
, 
	`ex·ndBufG‘L’gth
(
pReq
));

725 
	`£t4BE
(
buf
+4, 
	`dvmJdwpNextReque¡S”Ÿl
(
¡©e
));

726 
	`£t1
(
buf
+8, 0);

727 
	`£t1
(
buf
+9, 
kJdwpEv’tCommªdS‘
);

728 
	`£t1
(
buf
+10, 
kJdwpCompos™eCommªd
);

730 
	`dvmJdwpS’dReque¡
(
¡©e
, 
pReq
);

732 
	`ex·ndBufF»e
(
pReq
);

733 
	}
}

744 
boŞ
 
	$dvmJdwpPo¡VMS¹
(
JdwpS‹
* 
¡©e
, 
boŞ
 
su¥’d
)

746 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
;

747 
ObjeùId
 
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

749 ià(
su¥’d
)

750 
su¥’dPŞicy
 = 
SP_ALL
;

752 
su¥’dPŞicy
 = 
SP_NONE
;

755 
	`lockEv’tMu‹x
(
¡©e
);

757 
Ex·ndBuf
* 
pReq
 = 
NULL
;

758 ià(
Œue
) {

759 
	`ALOGV
("EVENT: %s", 
	`dvmJdwpEv’tKšdSŒ
(
EK_VM_START
));

760 
	`ALOGV
(" su¥’dPŞicy=%s", 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

762 
pReq
 = 
	`ev’tP»p
();

763 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

764 
	`ex·ndBufAdd4BE
(
pReq
, 1);

766 
	`ex·ndBufAdd1
(
pReq
, 
EK_VM_START
);

767 
	`ex·ndBufAdd4BE
(
pReq
, 0);

768 
	`ex·ndBufAdd8BE
(
pReq
, 
th»adId
);

771 
	`uÆockEv’tMu‹x
(
¡©e
);

774 ià(
pReq
 !ğ
NULL
) {

775 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

776 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

777 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
th»adId
);

779 
	`ev’tFšish
(
¡©e
, 
pReq
);

781 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

782 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

785  
Œue
;

786 
	}
}

809 
boŞ
 
	$dvmJdwpPo¡LoÿtiÚEv’t
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
,

810 
ObjeùId
 
thisPŒ
, 
ev’tFÏgs
)

812 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

813 
ModBask‘
 
bask‘
;

814 * 
ÇmeAÎoc
 = 
NULL
;

816 
	`mem£t
(&
bask‘
, 0, (basket));

817 
bask‘
.
pLoc
 =…Loc;

818 
bask‘
.
şassId
 = 
pLoc
->classId;

819 
bask‘
.
thisPŒ
 =hisPtr;

820 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

821 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

822 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
pLoc
->
şassId
));

830 ià(
bask‘
.
th»adId
 =ğ
¡©e
->
debugTh»adId
) {

831 
	`ALOGV
("Ignoring†ocationƒvent in JDWPhread");

832 
	`ä“
(
ÇmeAÎoc
);

833  
çl£
;

845 ià(
	`švokeInProg»ss
(
¡©e
)) {

846 
	`ALOGV
("NÙ checkšg b»akpošt duršg invok(%s)", 
bask‘
.
şassName
);

847 
	`ä“
(
ÇmeAÎoc
);

848  
çl£
;

852 
	`lockEv’tMu‹x
(
¡©e
);

854 
JdwpEv’t
** 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

855 
m©chCouÁ
 = 0;

857 ià((
ev’tFÏgs
 & 
DBG_BREAKPOINT
) != 0)

858 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_BREAKPOINT
, &
bask‘
, 
m©chLi¡
,

859 &
m©chCouÁ
);

860 ià((
ev’tFÏgs
 & 
DBG_SINGLE_STEP
) != 0)

861 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_SINGLE_STEP
, &
bask‘
, 
m©chLi¡
,

862 &
m©chCouÁ
);

863 ià((
ev’tFÏgs
 & 
DBG_METHOD_ENTRY
) != 0)

864 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_METHOD_ENTRY
, &
bask‘
, 
m©chLi¡
,

865 &
m©chCouÁ
);

866 ià((
ev’tFÏgs
 & 
DBG_METHOD_EXIT
) != 0)

867 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_METHOD_EXIT
, &
bask‘
, 
m©chLi¡
,

868 &
m©chCouÁ
);

870 
Ex·ndBuf
* 
pReq
 = 
NULL
;

871 ià(
m©chCouÁ
 != 0) {

872 
	`ALOGV
("EVENT: %s(%dotal) %s.%shread=%llx code=%llx)",

873 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

874 
bask‘
.
şassName
,

875 
	`dvmDbgG‘M‘hodName
(
pLoc
->
şassId
,…Loc->
m‘hodId
),

876 
bask‘
.
th»adId
, 
pLoc
->
idx
);

878 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

879 
	`ALOGV
(" suspendPolicy=%s",

880 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

882 
pReq
 = 
	`ev’tP»p
();

883 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

884 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

886 
i
 = 0; i < 
m©chCouÁ
; i++) {

887 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

888 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

889 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

890 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pLoc
);

894 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

895 
	`uÆockEv’tMu‹x
(
¡©e
);

898 ià(
pReq
 !ğ
NULL
) {

899 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

900 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

901 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

903 
	`ev’tFšish
(
¡©e
, 
pReq
);

905 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

906 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

909 
	`ä“
(
ÇmeAÎoc
);

910  
m©chCouÁ
 != 0;

911 
	}
}

919 
boŞ
 
	$dvmJdwpPo¡Th»adChªge
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
, 
boŞ
 
¡¬t
)

921 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

923 
	`as£¹
(
th»adId
 =ğ
	`dvmDbgG‘Th»adS–fId
());

928 ià(
	`švokeInProg»ss
(
¡©e
)) {

929 
	`ALOGW
("Not…ostinghread change during invoke");

930  
çl£
;

933 
ModBask‘
 
bask‘
;

934 
	`mem£t
(&
bask‘
, 0, (basket));

935 
bask‘
.
th»adId
 =hreadId;

938 
	`lockEv’tMu‹x
(
¡©e
);

940 
JdwpEv’t
** 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

941 
m©chCouÁ
 = 0;

943 ià(
¡¬t
)

944 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_THREAD_START
, &
bask‘
, 
m©chLi¡
,

945 &
m©chCouÁ
);

947 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_THREAD_DEATH
, &
bask‘
, 
m©chLi¡
,

948 &
m©chCouÁ
);

950 
Ex·ndBuf
* 
pReq
 = 
NULL
;

951 ià(
m©chCouÁ
 != 0) {

952 
	`ALOGV
("EVENT: %s(%dotal)hread=%llx)",

953 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

954 
bask‘
.
th»adId
);

956 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

957 
	`ALOGV
(" suspendPolicy=%s",

958 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

960 
pReq
 = 
	`ev’tP»p
();

961 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

962 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

964 
i
 = 0; i < 
m©chCouÁ
; i++) {

965 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

966 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

967 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

972 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

973 
	`uÆockEv’tMu‹x
(
¡©e
);

976 ià(
pReq
 !ğ
NULL
) {

977 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

978 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

979 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

981 
	`ev’tFšish
(
¡©e
, 
pReq
);

983 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

984 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

987  
m©chCouÁ
 != 0;

988 
	}
}

995 
boŞ
 
	$dvmJdwpPo¡VMD—th
(
JdwpS‹
* 
¡©e
)

997 
	`ALOGV
("EVENT: %s", 
	`dvmJdwpEv’tKšdSŒ
(
EK_VM_DEATH
));

999 
Ex·ndBuf
* 
pReq
 = 
	`ev’tP»p
();

1000 
	`ex·ndBufAdd1
(
pReq
, 
SP_NONE
);

1001 
	`ex·ndBufAdd4BE
(
pReq
, 1);

1003 
	`ex·ndBufAdd1
(
pReq
, 
EK_VM_DEATH
);

1004 
	`ex·ndBufAdd4BE
(
pReq
, 0);

1005 
	`ev’tFšish
(
¡©e
, 
pReq
);

1006  
Œue
;

1007 
	}
}

1021 
boŞ
 
	$dvmJdwpPo¡Exû±iÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pThrowLoc
,

1022 
ObjeùId
 
exû±iÚId
, 
RefTy³Id
 
exû±iÚCÏssId
,

1023 cÚ¡ 
JdwpLoÿtiÚ
* 
pC©chLoc
, 
ObjeùId
 
thisPŒ
)

1025 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

1026 
ModBask‘
 
bask‘
;

1027 * 
ÇmeAÎoc
 = 
NULL
;

1029 
	`mem£t
(&
bask‘
, 0, (basket));

1030 
bask‘
.
pLoc
 = 
pThrowLoc
;

1031 
bask‘
.
şassId
 = 
pThrowLoc
->classId;

1032 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

1033 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

1034 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
bask‘
.
şassId
));

1035 
bask‘
.
exûpCÏssId
 = 
exû±iÚCÏssId
;

1036 
bask‘
.
ÿught
 = (
pC©chLoc
->
şassId
 != 0);

1037 
bask‘
.
thisPŒ
 =hisPtr;

1040 ià(
	`švokeInProg»ss
(
¡©e
)) {

1041 
	`ALOGV
("NÙ…o¡šgƒxû±iÚ h™ duršg invok(%s)",
bask‘
.
şassName
);

1042 
	`ä“
(
ÇmeAÎoc
);

1043  
çl£
;

1047 
	`lockEv’tMu‹x
(
¡©e
);

1049 
JdwpEv’t
** 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

1050 
m©chCouÁ
 = 0;

1052 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_EXCEPTION
, &
bask‘
, 
m©chLi¡
, &
m©chCouÁ
);

1054 
Ex·ndBuf
* 
pReq
 = 
NULL
;

1055 ià(
m©chCouÁ
 != 0) {

1056 
	`ALOGV
("EVENT: %s(%dotal)hread=%llxƒxceptId=%llx caught=%d)",

1057 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

1058 
bask‘
.
th»adId
, 
exû±iÚId
, bask‘.
ÿught
);

1059 
	`ALOGV
("hrow: %d %Îx %x %Îd (%s.%s)", 
pThrowLoc
->
ty³Tag
,

1060 
pThrowLoc
->
şassId
,…ThrowLoc->
m‘hodId
,…ThrowLoc->
idx
,

1061 
	`dvmDbgG‘CÏssDesütÜ
(
pThrowLoc
->
şassId
),

1062 
	`dvmDbgG‘M‘hodName
(
pThrowLoc
->
şassId
,…ThrowLoc->
m‘hodId
));

1063 ià(
pC©chLoc
->
şassId
 == 0) {

1064 
	`ALOGV
(" catch: (not caught)");

1066 
	`ALOGV
(" c©ch: %d %Îx %x %Îd (%s.%s)", 
pC©chLoc
->
ty³Tag
,

1067 
pC©chLoc
->
şassId
,…C©chLoc->
m‘hodId
,…C©chLoc->
idx
,

1068 
	`dvmDbgG‘CÏssDesütÜ
(
pC©chLoc
->
şassId
),

1069 
	`dvmDbgG‘M‘hodName
(
pC©chLoc
->
şassId
,…C©chLoc->
m‘hodId
));

1072 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

1073 
	`ALOGV
(" suspendPolicy=%s",

1074 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

1076 
pReq
 = 
	`ev’tP»p
();

1077 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

1078 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

1080 
i
 = 0; i < 
m©chCouÁ
; i++) {

1081 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

1082 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

1083 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

1085 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pThrowLoc
);

1086 
	`ex·ndBufAdd1
(
pReq
, 
JT_OBJECT
);

1087 
	`ex·ndBufAdd8BE
(
pReq
, 
exû±iÚId
);

1088 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pC©chLoc
);

1092 
	`dvmDbgRegi¡”ObjeùId
(
exû±iÚId
);

1095 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

1096 
	`uÆockEv’tMu‹x
(
¡©e
);

1099 ià(
pReq
 !ğ
NULL
) {

1100 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

1101 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

1102 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

1104 
	`ev’tFšish
(
¡©e
, 
pReq
);

1106 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

1107 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

1110 
	`ä“
(
ÇmeAÎoc
);

1111  
m©chCouÁ
 != 0;

1112 
	}
}

1120 
boŞ
 
	$dvmJdwpPo¡CÏssP»·»
(
JdwpS‹
* 
¡©e
, 
g
, 
RefTy³Id
 
»fTy³Id
,

1121 cÚ¡ * 
sigÇtu»
, 
¡©us
)

1123 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

1124 
ModBask‘
 
bask‘
;

1125 * 
ÇmeAÎoc
 = 
NULL
;

1127 
	`mem£t
(&
bask‘
, 0, (basket));

1128 
bask‘
.
şassId
 = 
»fTy³Id
;

1129 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

1130 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

1131 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
bask‘
.
şassId
));

1134 ià(
	`švokeInProg»ss
(
¡©e
)) {

1135 
	`ALOGV
("NÙ…o¡šg cÏs ´• cau£d by invok(%s)",
bask‘
.
şassName
);

1136 
	`ä“
(
ÇmeAÎoc
);

1137  
çl£
;

1141 
	`lockEv’tMu‹x
(
¡©e
);

1143 
JdwpEv’t
** 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

1144 
m©chCouÁ
 = 0;

1146 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_CLASS_PREPARE
, &
bask‘
, 
m©chLi¡
,

1147 &
m©chCouÁ
);

1149 
Ex·ndBuf
* 
pReq
 = 
NULL
;

1150 ià(
m©chCouÁ
 != 0) {

1151 
	`ALOGV
("EVENT: %s(%dotal)hread=%llx)",

1152 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

1153 
bask‘
.
th»adId
);

1155 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

1156 
	`ALOGV
(" suspendPolicy=%s",

1157 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

1159 ià(
bask‘
.
th»adId
 =ğ
¡©e
->
debugTh»adId
) {

1165 
	`ALOGV
(" NOTE: class…repare in debuggerhread!");

1166 
bask‘
.
th»adId
 = 0;

1167 ià(
su¥’dPŞicy
 =ğ
SP_EVENT_THREAD
)

1168 
su¥’dPŞicy
 = 
SP_ALL
;

1171 
pReq
 = 
	`ev’tP»p
();

1172 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

1173 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

1175 
i
 = 0; i < 
m©chCouÁ
; i++) {

1176 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

1177 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

1178 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

1180 
	`ex·ndBufAdd1
(
pReq
, 
g
);

1181 
	`ex·ndBufAdd8BE
(
pReq
, 
»fTy³Id
);

1182 
	`ex·ndBufAddUtf8SŒšg
(
pReq
, (cÚ¡ 
u1
*è
sigÇtu»
);

1183 
	`ex·ndBufAdd4BE
(
pReq
, 
¡©us
);

1187 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

1189 
	`uÆockEv’tMu‹x
(
¡©e
);

1192 ià(
pReq
 !ğ
NULL
) {

1193 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

1194 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

1195 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

1197 
	`ev’tFšish
(
¡©e
, 
pReq
);

1199 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

1200 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

1203 
	`ä“
(
ÇmeAÎoc
);

1204  
m©chCouÁ
 != 0;

1205 
	}
}

1213 
boŞ
 
	$dvmJdwpPo¡CÏssUÆßd
(
JdwpS‹
* 
¡©e
, 
RefTy³Id
 
»fTy³Id
)

1215 
	`as£¹
(
çl£
);

1216  
çl£
;

1217 
	}
}

1226 
boŞ
 
	$dvmJdwpPo¡F›ldAcûss
(
JdwpS‹
* 
¡©e
, 
STUFF
, 
ObjeùId
 
thisPŒ
,

1227 
boŞ
 
modif›d
, 
JV®ue
 
ÃwV®ue
)

1229 
	`as£¹
(
çl£
);

1230  
çl£
;

1231 
	}
}

1240 
	$dvmJdwpDdmS’dChunkV
(
JdwpS‹
* 
¡©e
, 
ty³
, cÚ¡ 
iovec
* 
iov
,

1241 
iovút
)

1243 
u1
 
h—d”
[
kJDWPH—d”L’
 + 8];

1244 
size_t
 
d©aL’
 = 0;

1246 
	`as£¹
(
iov
 !ğ
NULL
);

1247 
	`as£¹
(
iovút
 > 0 && iovcnt < 10);

1253 
iovec
 
w¿piov
[
iovút
+1];

1254 
i
 = 0; i < 
iovút
; i++) {

1255 
w¿piov
[
i
+1].
iov_ba£
 = 
iov
[i].iov_base;

1256 
w¿piov
[
i
+1].
iov_Ën
 = 
iov
[i].iov_len;

1257 
d©aL’
 +ğ
iov
[
i
].
iov_Ën
;

1261 
	`£t4BE
(
h—d”
, (h—d”è+ 
d©aL’
);

1262 
	`£t4BE
(
h—d”
+4, 
	`dvmJdwpNextReque¡S”Ÿl
(
¡©e
));

1263 
	`£t1
(
h—d”
+8, 0);

1264 
	`£t1
(
h—d”
+9, 
kJDWPDdmCmdS‘
);

1265 
	`£t1
(
h—d”
+10, 
kJDWPDdmCmd
);

1266 
	`£t4BE
(
h—d”
+11, 
ty³
);

1267 
	`£t4BE
(
h—d”
+15, 
d©aL’
);

1269 
w¿piov
[0].
iov_ba£
 = 
h—d”
;

1270 
w¿piov
[0].
iov_Ën
 = (
h—d”
);

1275 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

1276 
	`dvmJdwpS’dBufã»dReque¡
(
¡©e
, 
w¿piov
, 
iovút
+1);

1277 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

1278 
	}
}

	@vm/jdwp/JdwpEvent.h

19 #iâdeà
DALVIK_JDWP_JDWPEVENT_H_


20 
	#DALVIK_JDWP_JDWPEVENT_H_


	)

22 
	~"JdwpCÚ¡ªts.h
"

23 
	~"Ex·ndBuf.h
"

28 
	uJdwpEv’tMod
 {

29 
u1
 
	mmodKšd
;

31 
u1
 
	mmodKšd
;

32 
	mcouÁ
;

33 } 
	mcouÁ
;

35 
u1
 
	mmodKšd
;

36 
u4
 
	mex´Id
;

37 } 
	mcÚd™iÚ®
;

39 
u1
 
	mmodKšd
;

40 
ObjeùId
 
	mth»adId
;

41 } 
	mth»adOÆy
;

43 
u1
 
	mmodKšd
;

44 
RefTy³Id
 
	m»fTy³Id
;

45 } 
	mşassOÆy
;

47 
u1
 
	mmodKšd
;

48 * 
	mşassP©‹º
;

49 } 
	mşassM©ch
;

51 
u1
 
	mmodKšd
;

52 * 
	mşassP©‹º
;

53 } 
	mşassExşude
;

55 
u1
 
	mmodKšd
;

56 
JdwpLoÿtiÚ
 
	mloc
;

57 } 
	mloÿtiÚOÆy
;

59 
u1
 
	mmodKšd
;

60 
u1
 
	mÿught
;

61 
u1
 
	munÿught
;

62 
RefTy³Id
 
	m»fTy³Id
;

63 } 
	mexû±iÚOÆy
;

65 
u1
 
	mmodKšd
;

66 
RefTy³Id
 
	m»fTy³Id
;

67 
F›ldId
 
	mf›ldId
;

68 } 
	mf›ldOÆy
;

70 
u1
 
	mmodKšd
;

71 
ObjeùId
 
	mth»adId
;

72 
	msize
;

73 
	md•th
;

74 } 
	m¡•
;

76 
u1
 
	mmodKšd
;

77 
ObjeùId
 
	mobjeùId
;

78 } 
	mš¡ªûOÆy
;

86 
	sJdwpEv’t
 {

87 
JdwpEv’t
* 
	m´ev
;

88 
JdwpEv’t
* 
	mÃxt
;

90 
JdwpEv’tKšd
 
	mev’tKšd
;

91 
JdwpSu¥’dPŞicy
 
	msu¥’dPŞicy
;

92 
	mmodCouÁ
;

93 
u4
 
	m»que¡Id
;

95 
JdwpEv’tMod
 
	mmods
[1];

101 
JdwpEv’t
* 
dvmJdwpEv’tAÎoc
(
numMods
);

102 
dvmJdwpEv’tF»e
(
JdwpEv’t
* 
pEv’t
);

110 
JdwpE¼Ü
 
dvmJdwpRegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
);

115 
dvmJdwpUÄegi¡”Ev’tById
(
JdwpS‹
* 
¡©e
, 
u4
 
»que¡Id
);

120 
dvmJdwpUÄegi¡”AÎ
(
JdwpS‹
* 
¡©e
);

127 
boŞ
 
dvmJdwpS’dReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
);

	@vm/jdwp/JdwpHandler.cpp

27 
	~"jdwp/JdwpPriv.h
"

28 
	~"jdwp/JdwpHªdËr.h
"

29 
	~"jdwp/JdwpEv’t.h
"

30 
	~"jdwp/JdwpCÚ¡ªts.h
"

31 
	~"jdwp/Ex·ndBuf.h
"

33 
	~"B™s.h
"

34 
	~"Atomic.h
"

35 
	~"D®vikV”siÚ.h
"

37 
	~<¡dlib.h
>

38 
	~<¡ršg.h
>

39 
	~<uni¡d.h
>

44 
	$jdwpR—dLoÿtiÚ
(cÚ¡ 
u1
** 
pBuf
, 
JdwpLoÿtiÚ
* 
pLoc
)

46 
	`mem£t
(
pLoc
, 0, (*pLoc));

47 
pLoc
->
ty³Tag
 = 
	`»ad1
(
pBuf
);

48 
pLoc
->
şassId
 = 
	`dvmR—dObjeùId
(
pBuf
);

49 
pLoc
->
m‘hodId
 = 
	`dvmR—dM‘hodId
(
pBuf
);

50 
pLoc
->
idx
 = 
	`»ad8BE
(
pBuf
);

51 
	}
}

56 
	$dvmJdwpAddLoÿtiÚ
(
Ex·ndBuf
* 
pR•ly
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

58 
	`ex·ndBufAdd1
(
pR•ly
, 
pLoc
->
ty³Tag
);

59 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
pLoc
->
şassId
);

60 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
pLoc
->
m‘hodId
);

61 
	`ex·ndBufAdd8BE
(
pR•ly
, 
pLoc
->
idx
);

62 
	}
}

67 
u8
 
	$jdwpR—dV®ue
(cÚ¡ 
u1
** 
pBuf
, 
width
)

69 
u8
 
v®ue
;

71 
width
) {

72 1: 
v®ue
 = 
	`»ad1
(
pBuf
); ;

73 2: 
v®ue
 = 
	`»ad2BE
(
pBuf
); ;

74 4: 
v®ue
 = 
	`»ad4BE
(
pBuf
); ;

75 8: 
v®ue
 = 
	`»ad8BE
(
pBuf
); ;

76 : 
v®ue
 = (
u8
è-1; 
	`as£¹
(
çl£
); ;

79  
v®ue
;

80 
	}
}

85 
	$jdwpWr™eV®ue
(
Ex·ndBuf
* 
pR•ly
, 
width
, 
u8
 
v®ue
)

87 
width
) {

88 1: 
	`ex·ndBufAdd1
(
pR•ly
, 
v®ue
); ;

89 2: 
	`ex·ndBufAdd2BE
(
pR•ly
, 
v®ue
); ;

90 4: 
	`ex·ndBufAdd4BE
(
pR•ly
, 
v®ue
); ;

91 8: 
	`ex·ndBufAdd8BE
(
pR•ly
, 
v®ue
); ;

92 : 
	`as£¹
(
çl£
); ;

94 
	}
}

102 
JdwpE¼Ü
 
	$fšishInvoke
(
JdwpS‹
* 
¡©e
,

103 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
,

104 
ObjeùId
 
th»adId
, ObjeùId 
objeùId
, 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
,

105 
boŞ
 
isCÚ¡ruùÜ
)

107 
	`as£¹
(!
isCÚ¡ruùÜ
 || 
objeùId
 != 0);

109 
u4
 
numArgs
 = 
	`»ad4BE
(&
buf
);

111 
	`ALOGV
(" -->h»adId=%Îx objeùId=%Îx", 
th»adId
, 
objeùId
);

112 
	`ALOGV
(" classId=%llx methodId=%x %s.%s",

113 
şassId
, 
m‘hodId
,

114 
	`dvmDbgG‘CÏssDesütÜ
(
şassId
),

115 
	`dvmDbgG‘M‘hodName
(
şassId
, 
m‘hodId
));

116 
	`ALOGV
(" %d‡rgs:", 
numArgs
);

118 
u8
* 
¬gA¼ay
 = 
NULL
;

119 ià(
numArgs
 > 0)

120 
¬gA¼ay
 = (
ObjeùId
*è
	`m®loc
((ObjeùIdè* 
numArgs
);

122 
u4
 
i
 = 0; i < 
numArgs
; i++) {

123 
u1
 
ty³Tag
 = 
	`»ad1
(&
buf
);

124 
width
 = 
	`dvmDbgG‘TagWidth
(
ty³Tag
);

125 
u8
 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

127 
	`ALOGV
(" '%c'(%d): 0x%Îx", 
ty³Tag
, 
width
, 
v®ue
);

128 
¬gA¼ay
[
i
] = 
v®ue
;

131 
u4
 
İtiÚs
 = 
	`»ad4BE
(&
buf
);

132 
	`ALOGV
(" o±iÚs=0x%04x%s%s", 
İtiÚs
,

133 (
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) ? " (SINGLE_THREADED)" : "",

134 (
İtiÚs
 & 
INVOKE_NONVIRTUAL
) ? " (NONVIRTUAL)" : "");

137 
u1
 
»suÉTag
;

138 
u8
 
»suÉV®ue
;

139 
ObjeùId
 
exû±ObjId
;

140 
JdwpE¼Ü
 
”r
 = 
	`dvmDbgInvokeM‘hod
(
th»adId
, 
objeùId
, 
şassId
, 
m‘hodId
,

141 
numArgs
, 
¬gA¼ay
, 
İtiÚs
,

142 &
»suÉTag
, &
»suÉV®ue
, &
exû±ObjId
);

143 ià(
”r
 !ğ
ERR_NONE
)

144 
ba
;

146 ià(
”r
 =ğ
ERR_NONE
) {

147 ià(
isCÚ¡ruùÜ
) {

148 
	`ex·ndBufAdd1
(
pR•ly
, 
JT_OBJECT
);

149 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
objeùId
);

151 
width
 = 
	`dvmDbgG‘TagWidth
(
»suÉTag
);

153 
	`ex·ndBufAdd1
(
pR•ly
, 
»suÉTag
);

154 ià(
width
 != 0)

155 
	`jdwpWr™eV®ue
(
pR•ly
, 
width
, 
»suÉV®ue
);

157 
	`ex·ndBufAdd1
(
pR•ly
, 
JT_OBJECT
);

158 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
exû±ObjId
);

160 
	`ALOGV
(" -->„eturned '%c' 0x%llx (except=%08llx)",

161 
»suÉTag
, 
»suÉV®ue
, 
exû±ObjId
);

164 ià(
»suÉTag
 =ğ
JT_STRING
 && 
exû±ObjId
 == 0) {

165 ià(
»suÉV®ue
 != 0) {

166 * 
¡r
 = 
	`dvmDbgSŒšgToUtf8
(
»suÉV®ue
);

167 
	`ALOGV
(" sŒšg '%s'", 
¡r
);

168 
	`ä“
(
¡r
);

170 
	`ALOGV
(" string (null)");

175 
ba
:

176 
	`ä“
(
¬gA¼ay
);

177  
”r
;

178 
	}
}

184 
JdwpE¼Ü
 
	$hªdËVM_V”siÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
u1
* 
buf
,

185 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

187 
tmpBuf
[128];

190 
	`¥rštf
(
tmpBuf
, "Android DalvikVM %d.%d.%d",

191 
DALVIK_MAJOR_VERSION
, 
DALVIK_MINOR_VERSION
, 
DALVIK_BUG_VERSION
);

192 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
tmpBuf
);

194 
	`ex·ndBufAdd4BE
(
pR•ly
, 1);

195 
	`ex·ndBufAdd4BE
(
pR•ly
, 5);

197 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "1.5.0");

199 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "DalvikVM");

201  
ERR_NONE
;

202 
	}
}

209 
JdwpE¼Ü
 
	$hªdËVM_CÏs£sBySigÇtu»
(
JdwpS‹
* 
¡©e
,

210 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

212 
size_t
 
¡rL’
;

213 * 
şassDesütÜ
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

214 
	`ALOGV
(" Req fÜ cÏs by sigÇtu» '%s'", 
şassDesütÜ
);

222 
u4
 
numCÏs£s
;

223 
RefTy³Id
 
»fTy³Id
;

224 ià(!
	`dvmDbgFšdLßdedCÏssBySigÇtu»
(
şassDesütÜ
, &
»fTy³Id
)) {

226 
	`ALOGV
(" -->‚o match!");

227 
numCÏs£s
 = 0;

230 
numCÏs£s
 = 1;

233 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

235 ià(
numCÏs£s
 > 0) {

236 
u1
 
ty³Tag
;

237 
u4
 
¡©us
;

240 
	`dvmDbgG‘CÏssInfo
(
»fTy³Id
, &
ty³Tag
, &
¡©us
, 
NULL
);

242 
	`ex·ndBufAdd1
(
pR•ly
, 
ty³Tag
);

243 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
»fTy³Id
);

244 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

247 
	`ä“
(
şassDesütÜ
);

249  
ERR_NONE
;

250 
	}
}

258 
JdwpE¼Ü
 
	$hªdËVM_AÎTh»ads
(
JdwpS‹
* 
¡©e
,

259 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

261 
ObjeùId
* 
pTh»adIds
;

262 
u4
 
th»adCouÁ
;

263 
	`dvmDbgG‘AÎTh»ads
(&
pTh»adIds
, &
th»adCouÁ
);

265 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adCouÁ
);

267 
ObjeùId
* 
w®k”
 = 
pTh»adIds
;

268 
u4
 
i
 = 0; i < 
th»adCouÁ
; i++) {

269 
	`ex·ndBufAddObjeùId
(
pR•ly
, *
w®k”
++);

272 
	`ä“
(
pTh»adIds
);

274  
ERR_NONE
;

275 
	}
}

280 
JdwpE¼Ü
 
	$hªdËVM_TİLev–Th»adGroups
(
JdwpS‹
* 
¡©e
,

281 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

289 
u4
 
groups
 = 1;

290 
	`ex·ndBufAdd4BE
(
pR•ly
, 
groups
);

293 
ObjeùId
 
th»adGroupId
 = 
	`dvmDbgG‘Sy¡emTh»adGroupId
();

294 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
th»adGroupId
);

296  
ERR_NONE
;

297 
	}
}

304 
JdwpE¼Ü
 
	$hªdËVM_IDSizes
(
JdwpS‹
* 
¡©e
,

305 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

307 
	`ex·ndBufAdd4BE
(
pR•ly
, (
F›ldId
));

308 
	`ex·ndBufAdd4BE
(
pR•ly
, (
M‘hodId
));

309 
	`ex·ndBufAdd4BE
(
pR•ly
, (
ObjeùId
));

310 
	`ex·ndBufAdd4BE
(
pR•ly
, (
RefTy³Id
));

311 
	`ex·ndBufAdd4BE
(
pR•ly
, (
F¿meId
));

312  
ERR_NONE
;

313 
	}
}

321 
JdwpE¼Ü
 
	$hªdËVM_Di¥o£
(
JdwpS‹
* 
¡©e
,

322 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

324  
ERR_NONE
;

325 
	}
}

333 
JdwpE¼Ü
 
	$hªdËVM_Su¥’d
(
JdwpS‹
* 
¡©e
,

334 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

336 
	`dvmDbgSu¥’dVM
(
çl£
);

337  
ERR_NONE
;

338 
	}
}

343 
JdwpE¼Ü
 
	$hªdËVM_Resume
(
JdwpS‹
* 
¡©e
,

344 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

346 
	`dvmDbgResumeVM
();

347  
ERR_NONE
;

348 
	}
}

353 
JdwpE¼Ü
 
	$hªdËVM_Ex™
(
JdwpS‹
* 
¡©e
,

354 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

356 
u4
 
ex™Code
 = 
	`g‘4BE
(
buf
);

358 
	`ALOGW
("Debugg” i ‹ÎšghVMØex™ w™h code=%d", 
ex™Code
);

360 
	`dvmDbgEx™
(
ex™Code
);

361  
ERR_NOT_IMPLEMENTED
;

362 
	}
}

370 
JdwpE¼Ü
 
	$hªdËVM_C»©eSŒšg
(
JdwpS‹
* 
¡©e
,

371 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

373 
size_t
 
¡rL’
;

374 * 
¡r
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

376 
	`ALOGV
(" ReqØü—‹ sŒšg '%s'", 
¡r
);

378 
ObjeùId
 
¡ršgId
 = 
	`dvmDbgC»©eSŒšg
(
¡r
);

379 ià(
¡ršgId
 == 0)

380  
ERR_OUT_OF_MEMORY
;

382 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
¡ršgId
);

383  
ERR_NONE
;

384 
	}
}

389 
JdwpE¼Ü
 
	$hªdËVM_C­ab™›s
(
JdwpS‹
* 
¡©e
,

390 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

392 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

393 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

394 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

395 
	`ex·ndBufAdd1
(
pR•ly
, 
Œue
);

396 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

397 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

398 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

399  
ERR_NONE
;

400 
	}
}

405 
JdwpE¼Ü
 
	$hªdËVM_CÏssP©hs
(
JdwpS‹
* 
¡©e
,

406 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

408 
ba£Dœ
[2] = "/";

414 
u4
 
şassP©hs
 = 1;

415 
u4
 
boÙCÏssP©hs
 = 0;

417 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
ba£Dœ
);

418 
	`ex·ndBufAdd4BE
(
pR•ly
, 
şassP©hs
);

419 
u4
 
i
 = 0; i < 
şassP©hs
; i++) {

420 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) ".");

423 
	`ex·ndBufAdd4BE
(
pR•ly
, 
boÙCÏssP©hs
);

424 
u4
 
i
 = 0; i < 
şassP©hs
; i++) {

428  
ERR_NONE
;

429 
	}
}

436 
JdwpE¼Ü
 
	$HªdËVM_Di¥o£Objeùs
(
JdwpS‹
* 
¡©e
,

437 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

439  
ERR_NONE
;

440 
	}
}

445 
JdwpE¼Ü
 
	$hªdËVM_C­ab™›sNew
(
JdwpS‹
* 
¡©e
,

446 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

448 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

449 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

450 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

451 
	`ex·ndBufAdd1
(
pR•ly
, 
Œue
);

452 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

453 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

454 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

455 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

456 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

457 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

458 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

459 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

460 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

461 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

462 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

463 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

464 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

465 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

466 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

467 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

468 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

471 
i
 = 22; i <= 32; i++)

472 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

473  
ERR_NONE
;

474 
	}
}

479 
JdwpE¼Ü
 
	$hªdËVM_AÎCÏs£sW™hG’”ic
(
JdwpS‹
* 
¡©e
,

480 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

482 
u4
 
numCÏs£s
 = 0;

483 
RefTy³Id
* 
şassRefBuf
 = 
NULL
;

485 
	`dvmDbgG‘CÏssLi¡
(&
numCÏs£s
, &
şassRefBuf
);

487 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

489 
u4
 
i
 = 0; i < 
numCÏs£s
; i++) {

490 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

491 
u1
 
»fTy³Tag
;

492 cÚ¡ * 
sigÇtu»
;

493 
u4
 
¡©us
;

495 
	`dvmDbgG‘CÏssInfo
(
şassRefBuf
[
i
], &
»fTy³Tag
, &
¡©us
, &
sigÇtu»
);

497 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

498 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassRefBuf
[
i
]);

499 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

500 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

501 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

504 
	`ä“
(
şassRefBuf
);

506  
ERR_NONE
;

507 
	}
}

513 
JdwpE¼Ü
 
	$hªdËRT_SigÇtu»
(
JdwpS‹
* 
¡©e
,

514 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

516 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

518 
	`ALOGV
(" Req fÜ sigÇtu» oà»fTy³Id=0x%Îx", 
»fTy³Id
);

519 cÚ¡ * 
sigÇtu»
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

520 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

522  
ERR_NONE
;

523 
	}
}

528 
JdwpE¼Ü
 
	$hªdËRT_Modif›rs
(
JdwpS‹
* 
¡©e
,

529 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

531 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

532 
u4
 
modB™s
 = 
	`dvmDbgG‘AcûssFÏgs
(
»fTy³Id
);

534 
	`ex·ndBufAdd4BE
(
pR•ly
, 
modB™s
);

536  
ERR_NONE
;

537 
	}
}

542 
JdwpE¼Ü
 
	$hªdËRT_G‘V®ues
(
JdwpS‹
* 
¡©e
,

543 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

545 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

546 
u4
 
numF›lds
 = 
	`»ad4BE
(&
buf
);

548 
	`ALOGV
(" RT_G‘V®ue %u:", 
numF›lds
);

550 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numF›lds
);

551 
u4
 
i
 = 0; i < 
numF›lds
; i++) {

552 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

553 
	`dvmDbgG‘SticF›ldV®ue
(
»fTy³Id
, 
f›ldId
, 
pR•ly
);

556  
ERR_NONE
;

557 
	}
}

562 
JdwpE¼Ü
 
	$hªdËRT_SourûFe
(
JdwpS‹
* 
¡©e
,

563 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

565 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

567 cÚ¡ * 
feName
 = 
	`dvmDbgG‘SourûFe
(
»fTy³Id
);

568 ià(
feName
 !ğ
NULL
) {

569 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
feName
);

570  
ERR_NONE
;

572  
ERR_ABSENT_INFORMATION
;

574 
	}
}

579 
JdwpE¼Ü
 
	$hªdËRT_Stus
(
JdwpS‹
* 
¡©e
,

580 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

582 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

585 
u1
 
ty³Tag
;

586 
u4
 
¡©us
;

587 
	`dvmDbgG‘CÏssInfo
(
»fTy³Id
, &
ty³Tag
, &
¡©us
, 
NULL
);

588 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

589  
ERR_NONE
;

590 
	}
}

595 
JdwpE¼Ü
 
	$hªdËRT_IÁ”çûs
(
JdwpS‹
* 
¡©e
,

596 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

598 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

600 
	`ALOGV
(" Req fÜ iÁ”çû š %Îx (%s)", 
»fTy³Id
,

601 
	`dvmDbgG‘CÏssDesütÜ
(
»fTy³Id
));

603 
	`dvmDbgOuutAÎIÁ”çûs
(
»fTy³Id
, 
pR•ly
);

605  
ERR_NONE
;

606 
	}
}

611 
JdwpE¼Ü
 
	$hªdËRT_CÏssObjeù
(
JdwpS‹
* 
¡©e
,

612 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

614 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

615 
ObjeùId
 
şassObjId
 = 
	`dvmDbgG‘CÏssObjeù
(
»fTy³Id
);

617 
	`ALOGV
(" RefTy³Id %Îx -> ObjeùId %Îx", 
»fTy³Id
, 
şassObjId
);

619 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
şassObjId
);

621  
ERR_NONE
;

622 
	}
}

629 
JdwpE¼Ü
 
	$hªdËRT_SourûDebugEx‹nsiÚ
(
JdwpS‹
* 
¡©e
,

630 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

633  
ERR_ABSENT_INFORMATION
;

634 
	}
}

639 
JdwpE¼Ü
 
	$hªdËRT_SigÇtu»W™hG’”ic
(
JdwpS‹
* 
¡©e
,

640 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

642 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

644 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

646 
	`ALOGV
(" Req fÜ sigÇtu» oà»fTy³Id=0x%Îx", 
»fTy³Id
);

647 cÚ¡ * 
sigÇtu»
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

648 ià(
sigÇtu»
 !ğ
NULL
) {

649 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

651 
	`ALOGW
("NØsigÇtu» fÜ„efTy³Id=0x%Îx", 
»fTy³Id
);

652 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "Lunknown;");

654 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

656  
ERR_NONE
;

657 
	}
}

663 
JdwpE¼Ü
 
	$hªdËRT_CÏssLßd”
(
JdwpS‹
* 
¡©e
,

664 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

666 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

668 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`dvmDbgG‘CÏssLßd”
(
»fTy³Id
));

670  
ERR_NONE
;

671 
	}
}

677 
JdwpE¼Ü
 
	$hªdËRT_F›ldsW™hG’”ic
(
JdwpS‹
* 
¡©e
,

678 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

680 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

681 
	`ALOGV
(" Req fÜ f›ld š„efTy³Id=0x%Îx", 
»fTy³Id
);

682 
	`ALOGV
(" --> '%s'", 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
));

684 
	`dvmDbgOuutAÎF›lds
(
»fTy³Id
, 
Œue
, 
pR•ly
);

686  
ERR_NONE
;

687 
	}
}

693 
JdwpE¼Ü
 
	$hªdËRT_M‘hodsW™hG’”ic
(
JdwpS‹
* 
¡©e
,

694 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

696 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

698 
	`ALOGV
(" Req fÜ m‘hod š„efTy³Id=0x%Îx", 
»fTy³Id
);

699 
	`ALOGV
(" --> '%s'", 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
));

701 
	`dvmDbgOuutAÎM‘hods
(
»fTy³Id
, 
Œue
, 
pR•ly
);

703  
ERR_NONE
;

704 
	}
}

709 
JdwpE¼Ü
 
	$hªdËCT_Su³rşass
(
JdwpS‹
* 
¡©e
,

710 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

712 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

714 
RefTy³Id
 
su³rCÏssId
 = 
	`dvmDbgG‘Su³rşass
(
şassId
);

716 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
su³rCÏssId
);

718  
ERR_NONE
;

719 
	}
}

724 
JdwpE¼Ü
 
	$hªdËCT_S‘V®ues
(
JdwpS‹
* 
¡©e
,

725 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

727 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

728 
u4
 
v®ues
 = 
	`»ad4BE
(&
buf
);

730 
	`ALOGV
(" ReqØ£ˆ%d v®ue š cÏssId=%Îx", 
v®ues
, 
şassId
);

732 
u4
 
i
 = 0; i < 
v®ues
; i++) {

733 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

734 
u1
 
f›ldTag
 = 
	`dvmDbgG‘SticF›ldBasicTag
(
şassId
, 
f›ldId
);

735 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

736 
u8
 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

738 
	`ALOGV
(" --> f›ld=%xag=%ø-> %Îd", 
f›ldId
, 
f›ldTag
, 
v®ue
);

739 
	`dvmDbgS‘SticF›ldV®ue
(
şassId
, 
f›ldId
, 
v®ue
, 
width
);

742  
ERR_NONE
;

743 
	}
}

751 
JdwpE¼Ü
 
	$hªdËCT_InvokeM‘hod
(
JdwpS‹
* 
¡©e
,

752 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

754 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

755 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

756 
M‘hodId
 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

758  
	`fšishInvoke
(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
,

759 
th»adId
, 0, 
şassId
, 
m‘hodId
, 
çl£
);

760 
	}
}

769 
JdwpE¼Ü
 
	$hªdËCT_NewIn¡ªû
(
JdwpS‹
* 
¡©e
,

770 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

772 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

773 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

774 
M‘hodId
 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

776 
	`ALOGV
("C»©šg in¡ªû oà%s", 
	`dvmDbgG‘CÏssDesütÜ
(
şassId
));

777 
ObjeùId
 
objeùId
 = 
	`dvmDbgC»©eObjeù
(
şassId
);

778 ià(
objeùId
 == 0)

779  
ERR_OUT_OF_MEMORY
;

781  
	`fšishInvoke
(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
,

782 
th»adId
, 
objeùId
, 
şassId
, 
m‘hodId
, 
Œue
);

783 
	}
}

788 
JdwpE¼Ü
 
	$hªdËAT_ÃwIn¡ªû
(
JdwpS‹
* 
¡©e
,

789 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

791 
RefTy³Id
 
¬¿yTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

792 
u4
 
Ëngth
 = 
	`»ad4BE
(&
buf
);

794 
	`ALOGV
("Creating‡rray %s[%u]",

795 
	`dvmDbgG‘CÏssDesütÜ
(
¬¿yTy³Id
), 
Ëngth
);

796 
ObjeùId
 
objeùId
 = 
	`dvmDbgC»©eA¼ayObjeù
(
¬¿yTy³Id
, 
Ëngth
);

797 ià(
objeùId
 == 0)

798  
ERR_OUT_OF_MEMORY
;

800 
	`ex·ndBufAdd1
(
pR•ly
, 
JT_ARRAY
);

801 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
objeùId
);

802  
ERR_NONE
;

803 
	}
}

808 
JdwpE¼Ü
 
	$hªdËM_LšeTabË
(
JdwpS‹
* 
¡©e
,

809 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

811 
RefTy³Id
 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

812 
M‘hodId
 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

814 
	`ALOGV
(" Req for†ineable in %s.%s",

815 
	`dvmDbgG‘CÏssDesütÜ
(
»fTy³Id
),

816 
	`dvmDbgG‘M‘hodName
(
»fTy³Id
,
m‘hodId
));

818 
	`dvmDbgOuutLšeTabË
(
»fTy³Id
, 
m‘hodId
, 
pR•ly
);

820  
ERR_NONE
;

821 
	}
}

826 
JdwpE¼Ü
 
	$hªdËM_V¬ŸbËTabËW™hG’”ic
(
JdwpS‹
* 
¡©e
,

827 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

829 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

830 
M‘hodId
 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

832 
	`ALOGV
(" Req for LocalVarTab in class=%s method=%s",

833 
	`dvmDbgG‘CÏssDesütÜ
(
şassId
),

834 
	`dvmDbgG‘M‘hodName
(
şassId
, 
m‘hodId
));

843 
	`dvmDbgOuutV¬ŸbËTabË
(
şassId
, 
m‘hodId
, 
Œue
, 
pR•ly
);

844  
ERR_NONE
;

845 
	}
}

854 
JdwpE¼Ü
 
	$hªdËOR_Reã»nûTy³
(
JdwpS‹
* 
¡©e
,

855 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

857 
ObjeùId
 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

858 
	`ALOGV
(" Req fÜy³ oàobjeùId=0x%Îx", 
objeùId
);

860 
u1
 
»fTy³Tag
;

861 
RefTy³Id
 
ty³Id
;

862 
	`dvmDbgG‘ObjeùTy³
(
objeùId
, &
»fTy³Tag
, &
ty³Id
);

864 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

865 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
ty³Id
);

867  
ERR_NONE
;

868 
	}
}

873 
JdwpE¼Ü
 
	$hªdËOR_G‘V®ues
(
JdwpS‹
* 
¡©e
,

874 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

876 
ObjeùId
 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

877 
u4
 
numF›lds
 = 
	`»ad4BE
(&
buf
);

879 
	`ALOGV
(" Req fÜ %d f›ld äom objeùId=0x%Îx", 
numF›lds
, 
objeùId
);

881 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numF›lds
);

883 
u4
 
i
 = 0; i < 
numF›lds
; i++) {

884 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

885 
	`dvmDbgG‘F›ldV®ue
(
objeùId
, 
f›ldId
, 
pR•ly
);

888  
ERR_NONE
;

889 
	}
}

894 
JdwpE¼Ü
 
	$hªdËOR_S‘V®ues
(
JdwpS‹
* 
¡©e
,

895 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

897 
ObjeùId
 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

898 
u4
 
numF›lds
 = 
	`»ad4BE
(&
buf
);

900 
	`ALOGV
(" ReqØ£ˆ%d f›ld š objeùId=0x%Îx", 
numF›lds
, 
objeùId
);

902 
u4
 
i
 = 0; i < 
numF›lds
; i++) {

903 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

905 
u1
 
f›ldTag
 = 
	`dvmDbgG‘F›ldBasicTag
(
objeùId
, 
f›ldId
);

906 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

907 
u8
 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

909 
	`ALOGV
(" --> fieldId=%xag='%c'(%d) value=%lld",

910 
f›ldId
, 
f›ldTag
, 
width
, 
v®ue
);

912 
	`dvmDbgS‘F›ldV®ue
(
objeùId
, 
f›ldId
, 
v®ue
, 
width
);

915  
ERR_NONE
;

916 
	}
}

929 
JdwpE¼Ü
 
	$hªdËOR_InvokeM‘hod
(
JdwpS‹
* 
¡©e
,

930 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

932 
ObjeùId
 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

933 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

934 
RefTy³Id
 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

935 
M‘hodId
 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

937  
	`fšishInvoke
(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
,

938 
th»adId
, 
objeùId
, 
şassId
, 
m‘hodId
, 
çl£
);

939 
	}
}

944 
JdwpE¼Ü
 
	$hªdËOR_Di§bËCŞËùiÚ
(
JdwpS‹
* 
¡©e
,

945 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

948  
ERR_NONE
;

949 
	}
}

954 
JdwpE¼Ü
 
	$hªdËOR_EÇbËCŞËùiÚ
(
JdwpS‹
* 
¡©e
,

955 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

958  
ERR_NONE
;

959 
	}
}

964 
JdwpE¼Ü
 
	$hªdËOR_IsCŞËùed
(
JdwpS‹
* 
¡©e
,

965 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

967 
ObjeùId
 
objeùId
;

969 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

970 
	`ALOGV
(" Req IsCŞËùed(0x%Îx)", 
objeùId
);

973 
	`ex·ndBufAdd1
(
pR•ly
, 0);

975  
ERR_NONE
;

976 
	}
}

981 
JdwpE¼Ü
 
	$hªdËSR_V®ue
(
JdwpS‹
* 
¡©e
,

982 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

984 
ObjeùId
 
¡ršgObjeù
 = 
	`dvmR—dObjeùId
(&
buf
);

985 * 
¡r
 = 
	`dvmDbgSŒšgToUtf8
(
¡ršgObjeù
);

987 
	`ALOGV
(" Req fÜ sŒ %Îx --> '%s'", 
¡ršgObjeù
, 
¡r
);

989 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
¡r
);

990 
	`ä“
(
¡r
);

992  
ERR_NONE
;

993 
	}
}

998 
JdwpE¼Ü
 
	$hªdËTR_Name
(
JdwpS‹
* 
¡©e
,

999 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1001 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1003 
	`ALOGV
(" Req fÜ‚amoàth»ad 0x%Îx", 
th»adId
);

1004 * 
Çme
 = 
	`dvmDbgG‘Th»adName
(
th»adId
);

1005 ià(
Çme
 =ğ
NULL
)

1006  
ERR_INVALID_THREAD
;

1008 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
Çme
);

1009 
	`ä“
(
Çme
);

1011  
ERR_NONE
;

1012 
	}
}

1020 
JdwpE¼Ü
 
	$hªdËTR_Su¥’d
(
JdwpS‹
* 
¡©e
,

1021 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1023 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1025 ià(
th»adId
 =ğ
	`dvmDbgG‘Th»adS–fId
()) {

1026 
	`ALOGI
(" Warning: ignoring„equesto suspend self");

1027  
ERR_THREAD_NOT_SUSPENDED
;

1029 
	`ALOGV
(" ReqØsu¥’dh»ad 0x%Îx", 
th»adId
);

1031 
	`dvmDbgSu¥’dTh»ad
(
th»adId
);

1033  
ERR_NONE
;

1034 
	}
}

1039 
JdwpE¼Ü
 
	$hªdËTR_Resume
(
JdwpS‹
* 
¡©e
,

1040 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1042 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1044 ià(
th»adId
 =ğ
	`dvmDbgG‘Th»adS–fId
()) {

1045 
	`ALOGI
(" Warning: ignoring„equesto„esume self");

1046  
ERR_NONE
;

1048 
	`ALOGV
(" ReqØ»sumth»ad 0x%Îx", 
th»adId
);

1050 
	`dvmDbgResumeTh»ad
(
th»adId
);

1052  
ERR_NONE
;

1053 
	}
}

1058 
JdwpE¼Ü
 
	$hªdËTR_Stus
(
JdwpS‹
* 
¡©e
,

1059 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1061 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1063 
	`ALOGV
(" Req fÜ stu oàth»ad 0x%Îx", 
th»adId
);

1065 
u4
 
th»adStus
;

1066 
u4
 
su¥’dStus
;

1067 ià(!
	`dvmDbgG‘Th»adStus
(
th»adId
, &
th»adStus
, &
su¥’dStus
))

1068  
ERR_INVALID_THREAD
;

1070 
	`ALOGV
(" --> %s, %s", 
	`dvmJdwpTh»adStusSŒ
(
th»adStus
),

1071 
	`dvmJdwpSu¥’dStusSŒ
(
su¥’dStus
));

1073 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adStus
);

1074 
	`ex·ndBufAdd4BE
(
pR•ly
, 
su¥’dStus
);

1076  
ERR_NONE
;

1077 
	}
}

1082 
JdwpE¼Ü
 
	$hªdËTR_Th»adGroup
(
JdwpS‹
* 
¡©e
,

1083 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1085 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1088 
ObjeùId
 
th»adGroupId
 = 
	`dvmDbgG‘Th»adGroup
(
th»adId
);

1089 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
th»adGroupId
);

1091  
ERR_NONE
;

1092 
	}
}

1100 
JdwpE¼Ü
 
	$hªdËTR_F¿mes
(
JdwpS‹
* 
¡©e
,

1101 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1103 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1104 
u4
 
¡¬tF¿me
 = 
	`»ad4BE
(&
buf
);

1105 
u4
 
Ëngth
 = 
	`»ad4BE
(&
buf
);

1107 ià(!
	`dvmDbgTh»adExi¡s
(
th»adId
))

1108  
ERR_INVALID_THREAD
;

1109 ià(!
	`dvmDbgIsSu¥’ded
(
th»adId
)) {

1110 
	`ALOGV
(" Rejecting„eq for frames in„unninghread '%s' (%llx)",

1111 
	`dvmDbgG‘Th»adName
(
th»adId
),hreadId);

1112  
ERR_THREAD_NOT_SUSPENDED
;

1115 
äameCouÁ
 = 
	`dvmDbgG‘Th»adF¿meCouÁ
(
th»adId
);

1117 
	`ALOGV
(" Request for frames:hreadId=%llx start=%d†ength=%d [count=%d]",

1118 
th»adId
, 
¡¬tF¿me
, 
Ëngth
, 
äameCouÁ
);

1119 ià(
äameCouÁ
 <= 0)

1120  
ERR_THREAD_NOT_SUSPENDED
;

1122 ià(
Ëngth
 =ğ(
u4
) -1)

1123 
Ëngth
 = 
äameCouÁ
;

1124 
	`as£¹
((è
¡¬tF¿me
 >ğ0 && (è¡¬tF¿m< 
äameCouÁ
);

1125 
	`as£¹
((è(
¡¬tF¿me
 + 
Ëngth
è<ğ
äameCouÁ
);

1127 
u4
 
äames
 = 
Ëngth
;

1128 
	`ex·ndBufAdd4BE
(
pR•ly
, 
äames
);

1129 
u4
 
i
 = 
¡¬tF¿me
; i < (¡¬tF¿me+
Ëngth
); i++) {

1130 
F¿meId
 
äameId
;

1131 
JdwpLoÿtiÚ
 
loc
;

1133 
	`dvmDbgG‘Th»adF¿me
(
th»adId
, 
i
, &
äameId
, &
loc
);

1135 
	`ex·ndBufAdd8BE
(
pR•ly
, 
äameId
);

1136 
	`dvmJdwpAddLoÿtiÚ
(
pR•ly
, &
loc
);

1138 
	`LOGVV
(" Frame %d: id=%llx†oc={type=%d cls=%llx mth=%x†oc=%llx}",

1139 
i
, 
äameId
, 
loc
.
ty³Tag
,†oc.
şassId
,†oc.
m‘hodId
,†oc.
idx
);

1142  
ERR_NONE
;

1143 
	}
}

1148 
JdwpE¼Ü
 
	$hªdËTR_F¿meCouÁ
(
JdwpS‹
* 
¡©e
,

1149 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1151 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1153 ià(!
	`dvmDbgTh»adExi¡s
(
th»adId
))

1154  
ERR_INVALID_THREAD
;

1155 ià(!
	`dvmDbgIsSu¥’ded
(
th»adId
)) {

1156 
	`ALOGV
(" Rejecting„eq for frames in„unninghread '%s' (%llx)",

1157 
	`dvmDbgG‘Th»adName
(
th»adId
),hreadId);

1158  
ERR_THREAD_NOT_SUSPENDED
;

1161 
äameCouÁ
 = 
	`dvmDbgG‘Th»adF¿meCouÁ
(
th»adId
);

1162 ià(
äameCouÁ
 < 0)

1163  
ERR_INVALID_THREAD
;

1164 
	`ex·ndBufAdd4BE
(
pR•ly
, (
u4
)
äameCouÁ
);

1166  
ERR_NONE
;

1167 
	}
}

1172 
JdwpE¼Ü
 
	$hªdËTR_Cu¼’tCÚ‹ndedMÚ™Ü
(
JdwpS‹
* 
¡©e
,

1173 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1175 
ObjeùId
 
th»adId
;

1177 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1182  
ERR_NOT_IMPLEMENTED
;

1183 
	}
}

1191 
JdwpE¼Ü
 
	$hªdËTR_Su¥’dCouÁ
(
JdwpS‹
* 
¡©e
,

1192 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1194 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1196 
u4
 
su¥’dCouÁ
 = 
	`dvmDbgG‘Th»adSu¥’dCouÁ
(
th»adId
);

1197 
	`ex·ndBufAdd4BE
(
pR•ly
, 
su¥’dCouÁ
);

1199  
ERR_NONE
;

1200 
	}
}

1207 
JdwpE¼Ü
 
	$hªdËTGR_Name
(
JdwpS‹
* 
¡©e
,

1208 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1210 
ObjeùId
 
th»adGroupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1211 
	`ALOGV
(" Req fÜ‚amoàth»adGroupId=0x%Îx", 
th»adGroupId
);

1213 * 
Çme
 = 
	`dvmDbgG‘Th»adGroupName
(
th»adGroupId
);

1214 ià(
Çme
 !ğ
NULL
)

1215 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
Çme
);

1217 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*) "BAD-GROUP-ID");

1218 
	`ALOGW
("badhread group ID");

1221 
	`ä“
(
Çme
);

1223  
ERR_NONE
;

1224 
	}
}

1230 
JdwpE¼Ü
 
	$hªdËTGR_P¬’t
(
JdwpS‹
* 
¡©e
,

1231 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1233 
ObjeùId
 
groupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1235 
ObjeùId
 
·»ÁGroup
 = 
	`dvmDbgG‘Th»adGroupP¬’t
(
groupId
);

1236 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
·»ÁGroup
);

1238  
ERR_NONE
;

1239 
	}
}

1245 
JdwpE¼Ü
 
	$hªdËTGR_Chd»n
(
JdwpS‹
* 
¡©e
,

1246 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1248 
ObjeùId
 
th»adGroupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1249 
	`ALOGV
(" Req fÜh»ad šh»adGroupId=0x%Îx", 
th»adGroupId
);

1251 
ObjeùId
* 
pTh»adIds
;

1252 
u4
 
th»adCouÁ
;

1253 
	`dvmDbgG‘Th»adGroupTh»ads
(
th»adGroupId
, &
pTh»adIds
, &
th»adCouÁ
);

1255 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adCouÁ
);

1257 
u4
 
i
 = 0; i < 
th»adCouÁ
; i++)

1258 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
pTh»adIds
[
i
]);

1259 
	`ä“
(
pTh»adIds
);

1266 ià(
th»adGroupId
 =ğ
	`dvmDbgG‘Sy¡emTh»adGroupId
()) {

1267 
	`ex·ndBufAdd4BE
(
pR•ly
, 1);

1268 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`dvmDbgG‘MašTh»adGroupId
());

1270 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1273  
ERR_NONE
;

1274 
	}
}

1279 
JdwpE¼Ü
 
	$hªdËAR_L’gth
(
JdwpS‹
* 
¡©e
,

1280 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1282 
ObjeùId
 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1283 
	`ALOGV
(" Req fÜ†’gth oà¬¿y 0x%Îx", 
¬¿yId
);

1285 
u4
 
¬¿yL’gth
 = 
	`dvmDbgG‘A¼ayL’gth
(
¬¿yId
);

1287 
	`ALOGV
(" --> %d", 
¬¿yL’gth
);

1289 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¬¿yL’gth
);

1291  
ERR_NONE
;

1292 
	}
}

1297 
JdwpE¼Ü
 
	$hªdËAR_G‘V®ues
(
JdwpS‹
* 
¡©e
,

1298 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1300 
ObjeùId
 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1301 
u4
 
fœ¡Index
 = 
	`»ad4BE
(&
buf
);

1302 
u4
 
Ëngth
 = 
	`»ad4BE
(&
buf
);

1304 
u1
 
g
 = 
	`dvmDbgG‘A¼ayEËm’tTag
(
¬¿yId
);

1305 
	`ALOGV
(" Req for‡rray values 0x%llx first=%d†en=%d (elemag=%c)",

1306 
¬¿yId
, 
fœ¡Index
, 
Ëngth
, 
g
);

1308 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1309 
	`ex·ndBufAdd4BE
(
pR•ly
, 
Ëngth
);

1311 ià(!
	`dvmDbgOuutA¼ay
(
¬¿yId
, 
fœ¡Index
, 
Ëngth
, 
pR•ly
))

1312  
ERR_INVALID_LENGTH
;

1314  
ERR_NONE
;

1315 
	}
}

1320 
JdwpE¼Ü
 
	$hªdËAR_S‘V®ues
(
JdwpS‹
* 
¡©e
,

1321 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1323 
ObjeùId
 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1324 
u4
 
fœ¡Index
 = 
	`»ad4BE
(&
buf
);

1325 
u4
 
v®ues
 = 
	`»ad4BE
(&
buf
);

1327 
	`ALOGV
(" Reqo set‡rray values 0x%llx first=%d count=%d",

1328 
¬¿yId
, 
fœ¡Index
, 
v®ues
);

1330 ià(!
	`dvmDbgS‘A¼ayEËm’ts
(
¬¿yId
, 
fœ¡Index
, 
v®ues
, 
buf
))

1331  
ERR_INVALID_LENGTH
;

1333  
ERR_NONE
;

1334 
	}
}

1340 
JdwpE¼Ü
 
	$hªdËCLR_VisibËCÏs£s
(
JdwpS‹
* 
¡©e
,

1341 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1343 
ObjeùId
 
şassLßd”Objeù
;

1344 
u4
 
numCÏs£s
 = 0;

1345 
RefTy³Id
* 
şassRefBuf
 = 
NULL
;

1346 
i
;

1348 
şassLßd”Objeù
 = 
	`dvmR—dObjeùId
(&
buf
);

1350 
	`dvmDbgG‘VisibËCÏssLi¡
(
şassLßd”Objeù
, &
numCÏs£s
, &
şassRefBuf
);

1352 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

1353 
i
 = 0; i < (è
numCÏs£s
; i++) {

1354 
u1
 
»fTy³Tag
;

1356 
»fTy³Tag
 = 
	`dvmDbgG‘CÏssObjeùTy³
(
şassRefBuf
[
i
]);

1358 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

1359 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassRefBuf
[
i
]);

1362  
ERR_NONE
;

1363 
	}
}

1370 
JdwpE¼Ü
 
	$hªdËER_S‘
(
JdwpS‹
* 
¡©e
,

1371 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1373 cÚ¡ 
u1
* 
ÜigBuf
 = 
buf
;

1375 
u1
 
ev’tKšd
 = 
	`»ad1
(&
buf
);

1376 
u1
 
su¥’dPŞicy
 = 
	`»ad1
(&
buf
);

1377 
u4
 
modif›rCouÁ
 = 
	`»ad4BE
(&
buf
);

1379 
	`LOGVV
(" Set(kind=%s(%u) suspend=%s(%u) mods=%u)",

1380 
	`dvmJdwpEv’tKšdSŒ
(
ev’tKšd
),ƒventKind,

1381 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
), suspendPolicy,

1382 
modif›rCouÁ
);

1384 
	`as£¹
(
modif›rCouÁ
 < 256);

1386 
JdwpEv’t
* 
pEv’t
 = 
	`dvmJdwpEv’tAÎoc
(
modif›rCouÁ
);

1387 
pEv’t
->
ev’tKšd
 = 
¡©ic_ÿ¡
<
JdwpEv’tKšd
>(eventKind);

1388 
pEv’t
->
su¥’dPŞicy
 = 
¡©ic_ÿ¡
<
JdwpSu¥’dPŞicy
>(suspendPolicy);

1389 
pEv’t
->
modCouÁ
 = 
modif›rCouÁ
;

1395 
u4
 
idx
 = 0; idx < 
modif›rCouÁ
; idx++) {

1396 
u1
 
modKšd
 = 
	`»ad1
(&
buf
);

1398 
pEv’t
->
mods
[
idx
].
modKšd
 = modKind;

1400 
modKšd
) {

1401 
MK_COUNT
:

1403 
u4
 
couÁ
 = 
	`»ad4BE
(&
buf
);

1404 
	`LOGVV
(" CouÁ: %u", 
couÁ
);

1405 ià(
couÁ
 == 0)

1406  
ERR_INVALID_COUNT
;

1407 
pEv’t
->
mods
[
idx
].
couÁ
.count = count;

1410 
MK_CONDITIONAL
:

1412 
u4
 
ex´Id
 = 
	`»ad4BE
(&
buf
);

1413 
	`LOGVV
(" CÚd™iÚ®: %d", 
ex´Id
);

1414 
pEv’t
->
mods
[
idx
].
cÚd™iÚ®
.
ex´Id
 =ƒxprId;

1417 
MK_THREAD_ONLY
:

1419 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1420 
	`LOGVV
(" Th»adOÆy: %Îx", 
th»adId
);

1421 
pEv’t
->
mods
[
idx
].
th»adOÆy
.
th»adId
 =hreadId;

1424 
MK_CLASS_ONLY
:

1426 
RefTy³Id
 
şazzId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1427 
	`LOGVV
(" ClassOnly: %llx (%s)",

1428 
şazzId
, 
	`dvmDbgG‘CÏssDesütÜ
(clazzId));

1429 
pEv’t
->
mods
[
idx
].
şassOÆy
.
»fTy³Id
 = 
şazzId
;

1432 
MK_CLASS_MATCH
:

1434 * 
·‰”n
;

1435 
size_t
 
¡rL’
;

1437 
·‰”n
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

1438 
	`LOGVV
(" CÏssM©ch: '%s'", 
·‰”n
);

1440 
pEv’t
->
mods
[
idx
].
şassM©ch
.
şassP©‹º
 =

1441 
	`dvmDÙToSÏsh
(
·‰”n
);

1442 
	`ä“
(
·‰”n
);

1445 
MK_CLASS_EXCLUDE
:

1447 * 
·‰”n
;

1448 
size_t
 
¡rL’
;

1450 
·‰”n
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

1451 
	`LOGVV
(" CÏssExşude: '%s'", 
·‰”n
);

1452 
pEv’t
->
mods
[
idx
].
şassExşude
.
şassP©‹º
 =

1453 
	`dvmDÙToSÏsh
(
·‰”n
);

1454 
	`ä“
(
·‰”n
);

1457 
MK_LOCATION_ONLY
:

1459 
JdwpLoÿtiÚ
 
loc
;

1461 
	`jdwpR—dLoÿtiÚ
(&
buf
, &
loc
);

1462 
	`LOGVV
(" LocationOnly:ypeTag=%d classId=%llx methodId=%x idx=%llx",

1463 
loc
.
ty³Tag
,†oc.
şassId
,†oc.
m‘hodId
,†oc.
idx
);

1464 
pEv’t
->
mods
[
idx
].
loÿtiÚOÆy
.
loc
 =†oc;

1467 
MK_EXCEPTION_ONLY
:

1469 
RefTy³Id
 
exû±iÚOrNuÎ
;

1470 
u1
 
ÿught
, 
unÿught
;

1472 
exû±iÚOrNuÎ
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1473 
ÿught
 = 
	`»ad1
(&
buf
);

1474 
unÿught
 = 
	`»ad1
(&
buf
);

1475 
	`LOGVV
(" ExceptionOnly:ype=%llx(%s) caught=%d uncaught=%d",

1476 
exû±iÚOrNuÎ
, (exceptionOrNull == 0) ? "null"

1477 : 
	`dvmDbgG‘CÏssDesütÜ
(
exû±iÚOrNuÎ
),

1478 
ÿught
, 
unÿught
);

1480 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
»fTy³Id
 = 
exû±iÚOrNuÎ
;

1481 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
ÿught
 = caught;

1482 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
unÿught
 = uncaught;

1485 
MK_FIELD_ONLY
:

1487 
RefTy³Id
 
deş¬šg
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1488 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

1489 
	`LOGVV
(" F›ldOÆy: %Îx %x", 
deş¬šg
, 
f›ldId
);

1490 
pEv’t
->
mods
[
idx
].
f›ldOÆy
.
»fTy³Id
 = 
deş¬šg
;

1491 
pEv’t
->
mods
[
idx
].
f›ldOÆy
.
f›ldId
 = fieldId;

1494 
MK_STEP
:

1496 
ObjeùId
 
th»adId
;

1497 
u4
 
size
, 
d•th
;

1499 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1500 
size
 = 
	`»ad4BE
(&
buf
);

1501 
d•th
 = 
	`»ad4BE
(&
buf
);

1502 
	`LOGVV
(" Step:hread=%llx size=%s depth=%s",

1503 
th»adId
, 
	`dvmJdwpS‹pSizeSŒ
(
size
),

1504 
	`dvmJdwpS‹pD•thSŒ
(
d•th
));

1506 
pEv’t
->
mods
[
idx
].
¡•
.
th»adId
 =hreadId;

1507 
pEv’t
->
mods
[
idx
].
¡•
.
size
 = size;

1508 
pEv’t
->
mods
[
idx
].
¡•
.
d•th
 = depth;

1511 
MK_INSTANCE_ONLY
:

1513 
ObjeùId
 
š¡ªû
 = 
	`dvmR—dObjeùId
(&
buf
);

1514 
	`LOGVV
(" In¡ªûOÆy: %Îx", 
š¡ªû
);

1515 
pEv’t
->
mods
[
idx
].
š¡ªûOÆy
.
objeùId
 = 
š¡ªû
;

1519 
	`ALOGW
("GLITCH: unsuµÜ‹d modKšd=%d", 
modKšd
);

1528 ià(
buf
 !ğ
ÜigBuf
 + 
d©aL’
) {

1529 
	`ALOGW
("GLITCH: d©aL’ i %d, whavcÚsumed %d", 
d©aL’
,

1530 (è(
buf
 - 
ÜigBuf
));

1536 
u4
 
»que¡Id
 = 
	`dvmJdwpNextEv’tS”Ÿl
(
¡©e
);

1537 
	`ex·ndBufAdd4BE
(
pR•ly
, 
»que¡Id
);

1539 
pEv’t
->
»que¡Id
 =„equestId;

1541 
	`ALOGV
(" -->ƒv’ˆ»que¡Id=%#x", 
»que¡Id
);

1544 
JdwpE¼Ü
 
”r
 = 
	`dvmJdwpRegi¡”Ev’t
(
¡©e
, 
pEv’t
);

1545 ià(
”r
 !ğ
ERR_NONE
) {

1547 
	`dvmJdwpEv’tF»e
(
pEv’t
);

1548 
	`ALOGW
("WARNING:ƒvent„equest„ejected");

1550  
”r
;

1551 
	}
}

1557 
JdwpE¼Ü
 
	$hªdËER_CË¬
(
JdwpS‹
* 
¡©e
,

1558 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1560 
u1
 
ev’tKšd
;

1561 
ev’tKšd
 = 
	`»ad1
(&
buf
);

1562 
u4
 
»que¡Id
 = 
	`»ad4BE
(&
buf
);

1564 
	`ALOGV
(" ReqØş—¸ev’tKšd=%d„eque¡Id=%#x", 
ev’tKšd
, 
»que¡Id
);

1566 
	`dvmJdwpUÄegi¡”Ev’tById
(
¡©e
, 
»que¡Id
);

1568  
ERR_NONE
;

1569 
	}
}

1574 
JdwpE¼Ü
 
	$hªdËSF_G‘V®ues
(
JdwpS‹
* 
¡©e
,

1575 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1577 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1578 
F¿meId
 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1579 
u4
 
¦Ùs
 = 
	`»ad4BE
(&
buf
);

1581 
	`ALOGV
(" Req for %d slots inhreadId=%llx frameId=%llx",

1582 
¦Ùs
, 
th»adId
, 
äameId
);

1584 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¦Ùs
);

1585 
u4
 
i
 = 0; i < 
¦Ùs
; i++) {

1586 
u4
 
¦Ù
 = 
	`»ad4BE
(&
buf
);

1587 
u1
 
»qSigBy‹
 = 
	`»ad1
(&
buf
);

1589 
	`ALOGV
(" --> slÙ %d '%c'", 
¦Ù
, 
»qSigBy‹
);

1591 
width
 = 
	`dvmDbgG‘TagWidth
(
»qSigBy‹
);

1592 
u1
* 
±r
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
width
+1);

1593 
	`dvmDbgG‘LoÿlV®ue
(
th»adId
, 
äameId
, 
¦Ù
, 
»qSigBy‹
, 
±r
, 
width
);

1596  
ERR_NONE
;

1597 
	}
}

1602 
JdwpE¼Ü
 
	$hªdËSF_S‘V®ues
(
JdwpS‹
* 
¡©e
,

1603 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1605 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1606 
F¿meId
 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1607 
u4
 
¦Ùs
 = 
	`»ad4BE
(&
buf
);

1609 
	`ALOGV
(" Reqo set %d slots inhreadId=%llx frameId=%llx",

1610 
¦Ùs
, 
th»adId
, 
äameId
);

1612 
u4
 
i
 = 0; i < 
¦Ùs
; i++) {

1613 
u4
 
¦Ù
 = 
	`»ad4BE
(&
buf
);

1614 
u1
 
sigBy‹
 = 
	`»ad1
(&
buf
);

1615 
width
 = 
	`dvmDbgG‘TagWidth
(
sigBy‹
);

1616 
u8
 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

1618 
	`ALOGV
(" --> slÙ %d '%c' %Îx", 
¦Ù
, 
sigBy‹
, 
v®ue
);

1619 
	`dvmDbgS‘LoÿlV®ue
(
th»adId
, 
äameId
, 
¦Ù
, 
sigBy‹
, 
v®ue
, 
width
);

1622  
ERR_NONE
;

1623 
	}
}

1628 
JdwpE¼Ü
 
	$hªdËSF_ThisObjeù
(
JdwpS‹
* 
¡©e
,

1629 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1631 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1632 
F¿meId
 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1634 
ObjeùId
 
objeùId
;

1635 ià(!
	`dvmDbgG‘ThisObjeù
(
th»adId
, 
äameId
, &
objeùId
))

1636  
ERR_INVALID_FRAMEID
;

1638 
u1
 
objeùTag
 = 
	`dvmDbgG‘ObjeùTag
(
objeùId
);

1639 
	`ALOGV
(" Req for 'this' inhread=%llx frame=%llx --> %llx %s '%c'",

1640 
th»adId
, 
äameId
, 
objeùId
, 
	`dvmDbgG‘ObjeùTy³Name
(objectId),

1641 ()
objeùTag
);

1643 
	`ex·ndBufAdd1
(
pR•ly
, 
objeùTag
);

1644 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
objeùId
);

1646  
ERR_NONE
;

1647 
	}
}

1656 
JdwpE¼Ü
 
	$hªdËCOR_ReæeùedTy³
(
JdwpS‹
* 
¡©e
,

1657 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1659 
RefTy³Id
 
şassObjeùId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1661 
	`ALOGV
(" Req for„efTypeId for class=%llx (%s)",

1662 
şassObjeùId
, 
	`dvmDbgG‘CÏssDesütÜ
(classObjectId));

1665 ià(
	`dvmDbgIsIÁ”çû
(
şassObjeùId
))

1666 
	`ex·ndBufAdd1
(
pR•ly
, 
TT_INTERFACE
);

1668 
	`ex·ndBufAdd1
(
pR•ly
, 
TT_CLASS
);

1669 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassObjeùId
);

1671  
ERR_NONE
;

1672 
	}
}

1677 
JdwpE¼Ü
 
	$hªdËDDM_Chunk
(
JdwpS‹
* 
¡©e
,

1678 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1680 
u1
* 
»¶yBuf
 = 
NULL
;

1681 
»¶yL’
 = -1;

1683 
	`ALOGV
(" Hªdlšg DDM…ack‘ (%.4s)", 
buf
);

1688 ià(!
¡©e
->
ddmAùive
) {

1689 
¡©e
->
ddmAùive
 = 
Œue
;

1690 
	`dvmDbgDdmCÚÃùed
();

1702 ià(
	`dvmDbgDdmHªdËPack‘
(
buf
, 
d©aL’
, &
»¶yBuf
, &
»¶yL’
)) {

1703 
	`as£¹
(
»¶yL’
 > 0 &&„eplyLen < 1*1024*1024);

1704 
	`memıy
(
	`ex·ndBufAddS·û
(
pR•ly
, 
»¶yL’
), 
»¶yBuf
,„eplyLen);

1705 
	`ä“
(
»¶yBuf
);

1707  
ERR_NONE
;

1708 
	}
}

1713 
	$JdwpE¼Ü
 (*
	tJdwpReque¡HªdËr
)(
	tJdwpS‹
* 
	t¡©e
,

1714 cÚ¡ 
	tu1
* 
	tbuf
, 
	td©aL’
, 
	tEx·ndBuf
* 
	t»¶y
);

1716 
	sJdwpHªdËrM­
 {

1717 
u1
 
cmdS‘
;

1718 
u1
 
cmd
;

1719 
JdwpReque¡HªdËr
 
func
;

1720 cÚ¡ * 
desü
;

1729 cÚ¡ 
JdwpHªdËrM­
 
gHªdËrM­
[] = {

1731 { 1, 1, 
hªdËVM_V”siÚ
, "VirtualMachine.Version" },

1732 { 1, 2, 
hªdËVM_CÏs£sBySigÇtu»
,

1735 { 1, 4, 
hªdËVM_AÎTh»ads
, "VirtualMachine.AllThreads" },

1736 { 1, 5, 
hªdËVM_TİLev–Th»adGroups
,

1738 { 1, 6, 
hªdËVM_Di¥o£
, "VirtualMachine.Dispose" },

1739 { 1, 7, 
hªdËVM_IDSizes
, "VirtualMachine.IDSizes" },

1740 { 1, 8, 
hªdËVM_Su¥’d
, "VirtualMachine.Suspend" },

1741 { 1, 9, 
hªdËVM_Resume
, "VirtualMachine.Resume" },

1742 { 1, 10, 
hªdËVM_Ex™
, "VirtualMachine.Exit" },

1743 { 1, 11, 
hªdËVM_C»©eSŒšg
, "VirtualMachine.CreateString" },

1744 { 1, 12, 
hªdËVM_C­ab™›s
, "VirtualMachine.Capabilities" },

1745 { 1, 13, 
hªdËVM_CÏssP©hs
, "VirtualMachine.ClassPaths" },

1746 { 1, 14, 
HªdËVM_Di¥o£Objeùs
, "VirtualMachine.DisposeObjects" },

1749 { 1, 17, 
hªdËVM_C­ab™›sNew
,

1753 { 1, 20, 
hªdËVM_AÎCÏs£sW™hG’”ic
,

1758 { 2, 1, 
hªdËRT_SigÇtu»
, "ReferenceType.Signature" },

1759 { 2, 2, 
hªdËRT_CÏssLßd”
, "ReferenceType.ClassLoader" },

1760 { 2, 3, 
hªdËRT_Modif›rs
, "ReferenceType.Modifiers" },

1763 { 2, 6, 
hªdËRT_G‘V®ues
, "ReferenceType.GetValues" },

1764 { 2, 7, 
hªdËRT_SourûFe
, "ReferenceType.SourceFile" },

1766 { 2, 9, 
hªdËRT_Stus
, "ReferenceType.Status" },

1767 { 2, 10, 
hªdËRT_IÁ”çûs
, "ReferenceType.Interfaces" },

1768 { 2, 11, 
hªdËRT_CÏssObjeù
, "ReferenceType.ClassObject" },

1769 { 2, 12, 
hªdËRT_SourûDebugEx‹nsiÚ
,

1771 { 2, 13, 
hªdËRT_SigÇtu»W™hG’”ic
,

1773 { 2, 14, 
hªdËRT_F›ldsW™hG’”ic
,

1775 { 2, 15, 
hªdËRT_M‘hodsW™hG’”ic
,

1782 { 3, 1, 
hªdËCT_Su³rşass
, "ClassType.Superclass" },

1783 { 3, 2, 
hªdËCT_S‘V®ues
, "ClassType.SetValues" },

1784 { 3, 3, 
hªdËCT_InvokeM‘hod
, "ClassType.InvokeMethod" },

1785 { 3, 4, 
hªdËCT_NewIn¡ªû
, "ClassType.NewInstance" },

1788 { 4, 1, 
hªdËAT_ÃwIn¡ªû
, "ArrayType.NewInstance" },

1793 { 6, 1, 
hªdËM_LšeTabË
, "Method.LineTable" },

1797 { 6, 5, 
hªdËM_V¬ŸbËTabËW™hG’”ic
,

1803 { 9, 1, 
hªdËOR_Reã»nûTy³
, "ObjectReference.ReferenceType" },

1804 { 9, 2, 
hªdËOR_G‘V®ues
, "ObjectReference.GetValues" },

1805 { 9, 3, 
hªdËOR_S‘V®ues
, "ObjectReference.SetValues" },

1808 { 9, 6, 
hªdËOR_InvokeM‘hod
, "ObjectReference.InvokeMethod" },

1809 { 9, 7, 
hªdËOR_Di§bËCŞËùiÚ
,

1811 { 9, 8, 
hªdËOR_EÇbËCŞËùiÚ
,

1813 { 9, 9, 
hªdËOR_IsCŞËùed
, "ObjectReference.IsCollected" },

1817 { 10, 1, 
hªdËSR_V®ue
, "StringReference.Value" },

1820 { 11, 1, 
hªdËTR_Name
, "ThreadReference.Name" },

1821 { 11, 2, 
hªdËTR_Su¥’d
, "ThreadReference.Suspend" },

1822 { 11, 3, 
hªdËTR_Resume
, "ThreadReference.Resume" },

1823 { 11, 4, 
hªdËTR_Stus
, "ThreadReference.Status" },

1824 { 11, 5, 
hªdËTR_Th»adGroup
, "ThreadReference.ThreadGroup" },

1825 { 11, 6, 
hªdËTR_F¿mes
, "ThreadReference.Frames" },

1826 { 11, 7, 
hªdËTR_F¿meCouÁ
, "ThreadReference.FrameCount" },

1828 { 11, 9, 
hªdËTR_Cu¼’tCÚ‹ndedMÚ™Ü
,

1832 { 11, 12, 
hªdËTR_Su¥’dCouÁ
, "ThreadReference.SuspendCount" },

1837 { 12, 1, 
hªdËTGR_Name
, "ThreadGroupReference.Name" },

1838 { 12, 2, 
hªdËTGR_P¬’t
, "ThreadGroupReference.Parent" },

1839 { 12, 3, 
hªdËTGR_Chd»n
, "ThreadGroupReference.Children" },

1842 { 13, 1, 
hªdËAR_L’gth
, "ArrayReference.Length" },

1843 { 13, 2, 
hªdËAR_G‘V®ues
, "ArrayReference.GetValues" },

1844 { 13, 3, 
hªdËAR_S‘V®ues
, "ArrayReference.SetValues" },

1847 { 14, 1, 
hªdËCLR_VisibËCÏs£s
,

1851 { 15, 1, 
hªdËER_S‘
, "EventRequest.Set" },

1852 { 15, 2, 
hªdËER_CË¬
, "EventRequest.Clear" },

1856 { 16, 1, 
hªdËSF_G‘V®ues
, "StackFrame.GetValues" },

1857 { 16, 2, 
hªdËSF_S‘V®ues
, "StackFrame.SetValues" },

1858 { 16, 3, 
hªdËSF_ThisObjeù
, "StackFrame.ThisObject" },

1862 { 17, 1, 
hªdËCOR_ReæeùedTy³
,"ClassObjectReference.ReflectedType" },

1867 { 199, 1, 
hªdËDDM_Chunk
, "DDM.Chunk" },

1868 
	}
};

1876 
	$dvmJdwpProûssReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpReqH—d”
* 
pH—d”
,

1877 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1879 
JdwpE¼Ü
 
»suÉ
 = 
ERR_NONE
;

1880 
i
, 
»¥L’
;

1882 ià(
pH—d”
->
cmdS‘
 !ğ
kJDWPDdmCmdS‘
) {

1888 
	`dvmDbgAùive
();

1889 
	`dvmQuasiAtomicSw­64
(0, &
¡©e
->
Ï¡Aùiv™yWh’
);

1908 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 0);

1914 
	`dvmDbgTh»adRuÂšg
();

1916 
	`ex·ndBufAddS·û
(
pR•ly
, 
kJDWPH—d”L’
);

1918 
i
 = 0; i < (è
	`NELEM
(
gHªdËrM­
); i++) {

1919 ià(
gHªdËrM­
[
i
].
cmdS‘
 =ğ
pH—d”
->cmdSet &&

1920 
gHªdËrM­
[
i
].
cmd
 =ğ
pH—d”
->cmd)

1922 
	`ALOGV
("REQ: %s (cmd=%d/%d dataLen=%d id=0x%06x)",

1923 
gHªdËrM­
[
i
].
desü
, 
pH—d”
->
cmdS‘
,…H—d”->
cmd
,

1924 
d©aL’
, 
pH—d”
->
id
);

1925 
»suÉ
 = (*
gHªdËrM­
[
i
].
func
)(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
);

1929 ià(
i
 =ğ
	`NELEM
(
gHªdËrM­
)) {

1930 
	`ALOGE
("REQ: UNSUPPORTED (cmd=%d/%d dataLen=%d id=0x%06x)",

1931 
pH—d”
->
cmdS‘
,…H—d”->
cmd
, 
d©aL’
,…H—d”->
id
);

1932 ià(
d©aL’
 > 0)

1933 
	`dvmPrštHexDumpDbg
(
buf
, 
d©aL’
, 
LOG_TAG
);

1934 
	`as£¹
(!"command‚ot implemented");

1935 
»suÉ
 = 
ERR_NOT_IMPLEMENTED
;

1943 
u1
* 
»¶yBuf
 = 
	`ex·ndBufG‘Bufãr
(
pR•ly
);

1944 
	`£t4BE
(
»¶yBuf
 + 4, 
pH—d”
->
id
);

1945 
	`£t1
(
»¶yBuf
 + 8, 
kJDWPFÏgR•ly
);

1946 
	`£t2BE
(
»¶yBuf
 + 9, 
»suÉ
);

1947 ià(
»suÉ
 =ğ
ERR_NONE
)

1948 
	`£t4BE
(
»¶yBuf
 + 0, 
	`ex·ndBufG‘L’gth
(
pR•ly
));

1950 
	`£t4BE
(
»¶yBuf
 + 0, 
kJDWPH—d”L’
);

1952 
»¥L’
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
è- 
kJDWPH—d”L’
;

1953 
	`IF_ALOG
(
LOG_VERBOSE
, 
LOG_TAG
) {

1954 
	`ALOGV
("»¶y: d©aL’=%dƒ¼=%s(%d)%s", 
»¥L’
,

1955 
	`dvmJdwpE¼ÜSŒ
(
»suÉ
),„esult,

1956 
»suÉ
 !ğ
ERR_NONE
 ? " **FAILED**" : "");

1957 ià(
»¥L’
 > 0)

1958 
	`dvmPrštHexDumpDbg
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
kJDWPH—d”L’
,

1959 
»¥L’
, 
LOG_TAG
);

1966 ià(
pH—d”
->
cmdS‘
 !ğ
kJDWPDdmCmdS‘
) {

1967 
	`dvmQuasiAtomicSw­64
(
	`dvmJdwpG‘NowM£c
(), &
¡©e
->
Ï¡Aùiv™yWh’
);

1971 
	`dvmDbgTh»adWa™šg
();

1972 
	}
}

	@vm/jdwp/JdwpHandler.h

19 #iâdeà
DALVIK_JDWP_JDWPHANDLER_H_


20 
	#DALVIK_JDWP_JDWPHANDLER_H_


	)

22 
	~"CommÚ.h
"

23 
	~"Ex·ndBuf.h
"

28 
	sJdwpReqH—d”
 {

29 
u4
 
	mËngth
;

30 
u4
 
	mid
;

31 
u1
 
	mcmdS‘
;

32 
u1
 
	mcmd
;

41 
dvmJdwpProûssReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpReqH—d”
* 
pH—d”
,

42 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
);

45 
dvmJdwpAddLoÿtiÚ
(
Ex·ndBuf
* 
pR•ly
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

	@vm/jdwp/JdwpMain.cpp

20 
	~"jdwp/JdwpPriv.h
"

21 
	~"D®vik.h
"

22 
	~"Atomic.h
"

24 
	~<¡dlib.h
>

25 
	~<uni¡d.h
>

26 
	~<sys/time.h
>

27 
	~<time.h
>

28 
	~<”ºo.h
>

31 * 
jdwpTh»adS¹
(* 
¬g
);

36 
	gJdwpN‘S‹Ba£
::
	$JdwpN‘S‹Ba£
()

38 
ş›ÁSock
 = -1;

39 
	`dvmDbgIn™Mu‹x
(&
sock‘Lock
);

40 
	}
}

45 
ssize_t
 
	gJdwpN‘S‹Ba£
::
	$wr™ePack‘
(
Ex·ndBuf
* 
pR•ly
)

47 
	`dvmDbgLockMu‹x
(&
sock‘Lock
);

48 
ssize_t
 
cc
 = 
	`wr™e
(
ş›ÁSock
, 
	`ex·ndBufG‘Bufãr
(
pR•ly
),

49 
	`ex·ndBufG‘L’gth
(
pR•ly
));

50 
	`dvmDbgUÆockMu‹x
(&
sock‘Lock
);

52  
cc
;

53 
	}
}

58 
ssize_t
 
	gJdwpN‘S‹Ba£
::
	$wr™eBufã»dPack‘
(cÚ¡ 
iovec
* 
iov
,

59 
iovút
)

61 
	`dvmDbgLockMu‹x
(&
sock‘Lock
);

62 
ssize_t
 
aùu®
 = 
	`wr™ev
(
ş›ÁSock
, 
iov
, 
iovút
);

63 
	`dvmDbgUÆockMu‹x
(&
sock‘Lock
);

65  
aùu®
;

66 
	}
}

74 
JdwpS‹
* 
	$dvmJdwpS¹up
(cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

76 
JdwpS‹
* 
¡©e
 = 
NULL
;

79 
	`ªdroid_£tMšPriÜ™y
(
LOG_TAG
, 
ANDROID_LOG_DEBUG
);

81 
¡©e
 = (
JdwpS‹
*è
	`ÿÎoc
(1, (JdwpState));

83 
¡©e
->
·¿ms
 = *
pP¬ams
;

85 
¡©e
->
»que¡S”Ÿl
 = 0x10000000;

86 
¡©e
->
ev’tS”Ÿl
 = 0x20000000;

87 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
th»adS¹Lock
);

88 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
©chLock
);

89 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
£rŸlLock
);

90 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
ev’tLock
);

91 
¡©e
->
ev’tTh»adId
 = 0;

92 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
ev’tTh»adLock
);

93 
	`dvmDbgIn™CÚd
(&
¡©e
->
th»adS¹CÚd
);

94 
	`dvmDbgIn™CÚd
(&
¡©e
->
©chCÚd
);

95 
	`dvmDbgIn™CÚd
(&
¡©e
->
ev’tTh»adCÚd
);

97 
pP¬ams
->
Œª¥Üt
) {

98 
kJdwpT¿n¥ÜtSock‘
:

100 
¡©e
->
Œª¥Üt
 = 
	`dvmJdwpSock‘T¿n¥Üt
();

102 
kJdwpT¿n¥ÜtAndroidAdb
:

104 
¡©e
->
Œª¥Üt
 = 
	`dvmJdwpAndroidAdbT¿n¥Üt
();

108 
	`ALOGE
("UnknowÀŒª¥Üˆ%d", 
pP¬ams
->
Œª¥Üt
);

109 
	`as£¹
(
çl£
);

110 
ç
;

113 ià(!
	`dvmJdwpN‘S¹up
(
¡©e
, 
pP¬ams
))

114 
ç
;

120 
	`dvmDbgLockMu‹x
(&
¡©e
->
th»adS¹Lock
);

121 ià(
pP¬ams
->
su¥’d
)

122 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

128 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
¡©e
->
debugTh»adHªdË
, "JDWP",

129 
jdwpTh»adS¹
, 
¡©e
))

132 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

133 ià(
pP¬ams
->
su¥’d
)

134 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

135 
ç
;

142 
	`dvmDbgCÚdWa™
(&
¡©e
->
th»adS¹CÚd
, &¡©e->
th»adS¹Lock
);

143 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

154 ià(
pP¬ams
->
su¥’d
) {

155 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

156 
	`dvmDbgCÚdWa™
(&
¡©e
->
©chCÚd
, &¡©e->
©chLock
);

157 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

158 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

160 ià(!
	`dvmJdwpIsAùive
(
¡©e
)) {

161 
	`ALOGE
("JDWP connection failed");

162 
ç
;

165 
	`ALOGI
("JDWP connected");

174  
¡©e
;

176 
ç
:

177 
	`dvmJdwpShutdown
(
¡©e
);

178  
NULL
;

179 
	}
}

188 
	$dvmJdwpRe£tS‹
(
JdwpS‹
* 
¡©e
)

192 
	`dvmJdwpUÄegi¡”AÎ
(
¡©e
);

193 
	`as£¹
(
¡©e
->
ev’tLi¡
 =ğ
NULL
);

199 ià(
¡©e
->
ev’tTh»adId
 != 0) {

200 
	`ALOGW
("WARNING:„esetting state whileƒvent in…rogress");

201 
	`as£¹
(
çl£
);

203 
	}
}

208 
	$dvmJdwpShutdown
(
JdwpS‹
* 
¡©e
)

210 * 
th»adR‘uº
;

212 ià(
¡©e
 =ğ
NULL
)

215 ià(
	`dvmJdwpIsT¿n¥ÜtDefšed
(
¡©e
)) {

216 ià(
	`dvmJdwpIsCÚÃùed
(
¡©e
))

217 
	`dvmJdwpPo¡VMD—th
(
¡©e
);

222 ià(
gDvm
.
v”bo£Shutdown
)

223 
	`ALOGD
("JDWP shutting down‚et...");

224 
	`dvmJdwpN‘Shutdown
(
¡©e
);

226 ià(
¡©e
->
debugTh»adS¹ed
) {

227 
¡©e
->
run
 = 
çl£
;

228 ià(
	`±h»ad_još
(
¡©e
->
debugTh»adHªdË
, &
th»adR‘uº
) != 0) {

229 
	`ALOGW
("JDWPhread join failed");

233 ià(
gDvm
.
v”bo£Shutdown
)

234 
	`ALOGD
("JDWP freeing‚etstate...");

235 
	`dvmJdwpN‘F»e
(
¡©e
);

236 
¡©e
->
ÃtS‹
 = 
NULL
;

238 
	`as£¹
(
¡©e
->
ÃtS‹
 =ğ
NULL
);

240 
	`dvmJdwpRe£tS‹
(
¡©e
);

241 
	`ä“
(
¡©e
);

242 
	}
}

247 
boŞ
 
	$dvmJdwpIsAùive
(
JdwpS‹
* 
¡©e
)

249  
	`dvmJdwpIsCÚÃùed
(
¡©e
);

250 
	}
}

256 * 
	$jdwpTh»adS¹
(* 
¬g
)

258 
JdwpS‹
* 
¡©e
 = (JdwpS‹*è
¬g
;

260 
	`ALOGV
("JDWP:hread„unning");

266 
¡©e
->
debugTh»adHªdË
 = 
	`dvmTh»adS–f
()->
hªdË
;

267 
¡©e
->
run
 = 
Œue
;

268 
	`ªdroid_©omic_»Ëa£_¡Üe
(
Œue
, &
¡©e
->
debugTh»adS¹ed
);

270 
	`dvmDbgLockMu‹x
(&
¡©e
->
th»adS¹Lock
);

271 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
th»adS¹CÚd
);

272 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

275 
	`dvmDbgTh»adWa™šg
();

285 
¡©e
->
run
) {

286 
boŞ
 
fœ¡
;

288 ià(
¡©e
->
·¿ms
.
£rv”
) {

293 ià(!
	`dvmJdwpAcû±CÚÃùiÚ
(
¡©e
))

302 ià(!
	`dvmJdwpE¡ablishCÚÃùiÚ
(
¡©e
)) {

304 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

305 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
©chCÚd
);

306 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

312 
	`dvmDbgCÚÃùed
();

315 
fœ¡
 = 
Œue
;

316 
Œue
) {

318 ià(
	`dvmTh»adS–f
()->
¡©us
 !ğ
THREAD_VMWAIT
) {

319 
	`ALOGE
("JDWPhread‚o†onger in VMWAIT (now %d);„esetting",

320 
	`dvmTh»adS–f
()->
¡©us
);

321 
	`dvmDbgTh»adWa™šg
();

324 ià(!
	`dvmJdwpProûssIncomšg
(
¡©e
))

327 ià(
fœ¡
 && !
	`dvmJdwpAwa™šgHªdshake
(
¡©e
)) {

329 
fœ¡
 = 
çl£
;

332 
¡©e
->
debugTh»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

335 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

336 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
©chCÚd
);

337 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

341 
	`dvmJdwpClo£CÚÃùiÚ
(
¡©e
);

343 ià(
¡©e
->
ddmAùive
) {

344 
¡©e
->
ddmAùive
 = 
çl£
;

347 
	`dvmDbgTh»adRuÂšg
();

348 
	`dvmDbgDdmDiscÚÃùed
();

349 
	`dvmDbgTh»adWa™šg
();

353 
	`dvmJdwpRe£tS‹
(
¡©e
);

356 
	`dvmDbgDiscÚÃùed
();

359 
	`dvmUndoDebugg”Su¥’siÚs
();

362 ià(!
¡©e
->
·¿ms
.
£rv”
)

363 
¡©e
->
run
 = 
çl£
;

367 
	`dvmDbgTh»adRuÂšg
();

369 
	`ALOGV
("JDWP:hreadƒxiting");

370  
NULL
;

371 
	}
}

377 
±h»ad_t
 
	$dvmJdwpG‘DebugTh»ad
(
JdwpS‹
* 
¡©e
)

379 ià(
¡©e
 =ğ
NULL
)

382  
¡©e
->
debugTh»adHªdË
;

383 
	}
}

409 
s8
 
	$dvmJdwpG‘NowM£c
()

411 #ifdeà
HAVE_POSIX_CLOCKS


412 
time¥ec
 
now
;

413 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

414  
now
.
tv_£c
 * 1000LL +‚ow.
tv_n£c
 / 1000000LL;

416 
timev®
 
now
;

417 
	`g‘timeofday
(&
now
, 
NULL
);

418  
now
.
tv_£c
 * 1000LL +‚ow.
tv_u£c
 / 1000LL;

420 
	}
}

428 
s8
 
	$dvmJdwpLa¡Debugg”Aùiv™y
(
JdwpS‹
* 
¡©e
)

430 ià(!
gDvm
.
debugg”Aùive
) {

431 
	`ALOGD
("dvmJdwpLastDebuggerActivity:‚o‡ctive debugger");

435 
s8
 
Ï¡
 = 
	`dvmQuasiAtomicR—d64
(&
¡©e
->
Ï¡Aùiv™yWh’
);

438 ià(
Ï¡
 == 0) {

439 
	`ALOGV
("+++†ast=busy");

444 
s8
 
now
 = 
	`dvmJdwpG‘NowM£c
();

445 
	`as£¹
(
now
 >ğ
Ï¡
);

447 
	`ALOGV
("+++ debugg” iÁ”v®=%Îd", 
now
 - 
Ï¡
);

448  
now
 - 
Ï¡
;

449 
	}
}

	@vm/jdwp/JdwpPriv.h

19 #iâdeà
DALVIK_JDWP_JDWPPRIV_H_


20 
	#DALVIK_JDWP_JDWPPRIV_H_


	)

22 
	#LOG_TAG
 "jdwp"

	)

24 
	~"jdwp/Jdwp.h
"

25 
	~"jdwp/JdwpEv’t.h
"

26 
	~"Debugg”.h
"

28 
	~<±h»ad.h
>

29 
	~<sys/uio.h
>

34 
	#kJDWPH—d”L’
 11

	)

35 
	#kJDWPFÏgR•ly
 0x80

	)

38 
	#kJDWPDdmCmdS‘
 199

	)

39 
	#kJDWPDdmCmd
 1

	)

45 
	gJdwpN‘S‹
;

46 
	gJdwpS‹
;

51 
	sJdwpT¿n¥Üt
 {

52 
boŞ
 (*
¡¬tup
)(
JdwpS‹
* 
	m¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
	mpP¬ams
);

53 
boŞ
 (*
acû±
)(
JdwpS‹
* 
	m¡©e
);

54 
boŞ
 (*
e¡ablish
)(
JdwpS‹
* 
	m¡©e
);

55 (*
	mşo£
)(
JdwpS‹
* 
	m¡©e
);

56 (*
	mshutdown
)(
JdwpS‹
* 
	m¡©e
);

57 (*
	mä“
)(
JdwpS‹
* 
	m¡©e
);

58 
boŞ
 (*
isCÚÃùed
)(
JdwpS‹
* 
	m¡©e
);

59 
boŞ
 (*
awa™šgHªdshake
)(
JdwpS‹
* 
	m¡©e
);

60 
boŞ
 (*
´oûssIncomšg
)(
JdwpS‹
* 
	m¡©e
);

61 
boŞ
 (*
£ndReque¡
)(
JdwpS‹
* 
	m¡©e
, 
Ex·ndBuf
* 
	mpReq
);

62 
boŞ
 (*
£ndBufã»dReque¡
)(
JdwpS‹
* 
	m¡©e
,

63 cÚ¡ 
iovec
* 
	miov
, 
	miovút
);

66 cÚ¡ 
JdwpT¿n¥Üt
* 
dvmJdwpSock‘T¿n¥Üt
();

67 cÚ¡ 
JdwpT¿n¥Üt
* 
dvmJdwpAndroidAdbT¿n¥Üt
();

73 
	sJdwpS‹
 {

74 
JdwpS¹upP¬ams
 
	m·¿ms
;

77 
±h»ad_mu‹x_t
 
	mth»adS¹Lock
;

78 
±h»ad_cÚd_t
 
	mth»adS¹CÚd
;

80 
	mdebugTh»adS¹ed
;

81 
±h»ad_t
 
	mdebugTh»adHªdË
;

82 
ObjeùId
 
	mdebugTh»adId
;

83 
boŞ
 
	mrun
;

85 cÚ¡ 
JdwpT¿n¥Üt
* 
	mŒª¥Üt
;

86 
JdwpN‘S‹
* 
	mÃtS‹
;

89 
±h»ad_mu‹x_t
 
	m©chLock
;

90 
±h»ad_cÚd_t
 
	m©chCÚd
;

93 
s8
 
	mÏ¡Aùiv™yWh’
;

96 
u4
 
	m»que¡S”Ÿl
;

97 
u4
 
	mev’tS”Ÿl
;

98 
±h»ad_mu‹x_t
 
	m£rŸlLock
;

103 
	mnumEv’ts
;

104 
JdwpEv’t
* 
	mev’tLi¡
;

105 
±h»ad_mu‹x_t
 
	mev’tLock
;

111 
±h»ad_mu‹x_t
 
	mev’tTh»adLock
;

112 
±h»ad_cÚd_t
 
	mev’tTh»adCÚd
;

113 
ObjeùId
 
	mev’tTh»adId
;

118 
boŞ
 
	mddmAùive
;

124 şas 
	cJdwpN‘S‹Ba£
 {

125 
	mpublic
:

126 
ş›ÁSock
;

128 
JdwpN‘S‹Ba£
();

129 
ssize_t
 
wr™ePack‘
(
Ex·ndBuf
* 
pR•ly
);

130 
ssize_t
 
wr™eBufã»dPack‘
(cÚ¡ 
iovec
* 
iov
, 
iovút
);

132 
	m´iv©e
:

133 
±h»ad_mu‹x_t
 
sock‘Lock
;

138 
dvmJdwpRe£tS‹
(
JdwpS‹
* 
¡©e
);

141 
u4
 
dvmJdwpNextReque¡S”Ÿl
(
JdwpS‹
* 
¡©e
);

142 
u4
 
dvmJdwpNextEv’tS”Ÿl
(
JdwpS‹
* 
¡©e
);

145 
s8
 
dvmJdwpG‘NowM£c
();

151 
INLINE
 
boŞ
 
	$dvmJdwpN‘S¹up
(
JdwpS‹
* 
¡©e
,

152 cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

154  (*
¡©e
->
Œª¥Üt
->
¡¬tup
)(¡©e, 
pP¬ams
);

155 
	}
}

156 
INLINE
 
boŞ
 
	$dvmJdwpAcû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

157  (*
¡©e
->
Œª¥Üt
->
acû±
)(state);

158 
	}
}

159 
INLINE
 
boŞ
 
	$dvmJdwpE¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

160  (*
¡©e
->
Œª¥Üt
->
e¡ablish
)(state);

161 
	}
}

162 
INLINE
 
	$dvmJdwpClo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

163 (*
¡©e
->
Œª¥Üt
->
şo£
)(state);

164 
	}
}

165 
INLINE
 
	$dvmJdwpN‘Shutdown
(
JdwpS‹
* 
¡©e
) {

166 (*
¡©e
->
Œª¥Üt
->
shutdown
)(state);

167 
	}
}

168 
INLINE
 
	$dvmJdwpN‘F»e
(
JdwpS‹
* 
¡©e
) {

169 (*
¡©e
->
Œª¥Üt
->
ä“
)(state);

170 
	}
}

171 
INLINE
 
boŞ
 
	$dvmJdwpIsT¿n¥ÜtDefšed
(
JdwpS‹
* 
¡©e
) {

172  
¡©e
 !ğ
NULL
 && s‹->
Œª¥Üt
 != NULL;

173 
	}
}

174 
INLINE
 
boŞ
 
	$dvmJdwpIsCÚÃùed
(
JdwpS‹
* 
¡©e
) {

175  
¡©e
 !ğ
NULL
 && (*¡©e->
Œª¥Üt
->
isCÚÃùed
)(state);

176 
	}
}

177 
INLINE
 
boŞ
 
	$dvmJdwpAwa™šgHªdshake
(
JdwpS‹
* 
¡©e
) {

178  (*
¡©e
->
Œª¥Üt
->
awa™šgHªdshake
)(state);

179 
	}
}

180 
INLINE
 
boŞ
 
	$dvmJdwpProûssIncomšg
(
JdwpS‹
* 
¡©e
) {

181  (*
¡©e
->
Œª¥Üt
->
´oûssIncomšg
)(state);

182 
	}
}

183 
INLINE
 
boŞ
 
	$dvmJdwpS’dReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
) {

184  (*
¡©e
->
Œª¥Üt
->
£ndReque¡
)(¡©e, 
pReq
);

185 
	}
}

186 
INLINE
 
boŞ
 
	$dvmJdwpS’dBufã»dReque¡
(
JdwpS‹
* 
¡©e
,

187 cÚ¡ 
iovec
* 
iov
, 
iovút
)

189  (*
¡©e
->
Œª¥Üt
->
£ndBufã»dReque¡
)(¡©e, 
iov
, 
iovút
);

190 
	}
}

	@vm/jdwp/JdwpSocket.cpp

19 
	~"jdwp/JdwpPriv.h
"

20 
	~"jdwp/JdwpHªdËr.h
"

21 
	~"B™s.h
"

23 
	~<¡dlib.h
>

24 
	~<uni¡d.h
>

25 
	~<¡dio.h
>

26 
	~<¡ršg.h
>

27 
	~<”ºo.h
>

28 
	~<sys/ty³s.h
>

29 
	~<sys/sock‘.h
>

30 
	~<Ãtš‘/š.h
>

31 
	~<Ãtš‘/tı.h
>

32 
	~<¬·/š‘.h
>

33 
	~<Ãtdb.h
>

35 
	#kBa£PÜt
 8000

	)

36 
	#kMaxPÜt
 8040

	)

38 
	#kIÅutBufãrSize
 8192

	)

40 
	#kMagicHªdshake
 "JDWP-Hªdshake"

	)

41 
	#kMagicHªdshakeL’
 ((
kMagicHªdshake
)-1)

	)

44 
ÃtShutdown
(
JdwpN‘S‹
* 
¡©e
);

45 
ÃtF»e
(
JdwpN‘S‹
* 
¡©e
);

53 
	gJdwpN‘S‹
 : 
public
 
JdwpN‘S‹Ba£
 {

54 
li¡’PÜt
;

55 
	gli¡’Sock
;

56 
	gwakePe
[2];

58 
š_addr
 
	g»mÙeAddr
;

59 
	g»mÙePÜt
;

61 
boŞ
 
	gawa™šgHªdshake
;

64 
	gšputBufãr
[
kIÅutBufãrSize
];

65 
	gšputCouÁ
;

67 
JdwpN‘S‹
()

69 
	gli¡’PÜt
 = 0;

70 
	gli¡’Sock
 = -1;

71 
	gwakePe
[0] = -1;

72 
	gwakePe
[1] = -1;

74 
	gawa™šgHªdshake
 = 
çl£
;

76 
	gšputCouÁ
 = 0;

80 
JdwpN‘S‹
* 
ÃtS¹up
(
pÜt
);

85 
boŞ
 
	$´•¬eSock‘
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

87 
pÜt
;

89 ià(
pP¬ams
->
£rv”
) {

90 ià(
pP¬ams
->
pÜt
 != 0) {

92 
pÜt
 = 
pP¬ams
->port;

93 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(
pÜt
);

96 
pÜt
 = 
kBa£PÜt
;…Üˆ<ğ
kMaxPÜt
;…ort++) {

97 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(
pÜt
);

98 ià(
¡©e
->
ÃtS‹
 !ğ
NULL
)

102 ià(
¡©e
->
ÃtS‹
 =ğ
NULL
) {

103 
	`ALOGE
("JDWP‚‘ s¹u°çed (»q…Üt=%d)", 
pP¬ams
->
pÜt
);

104  
çl£
;

107 
pÜt
 = 
pP¬ams
->port;

108 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(-1);

111 ià(
pP¬ams
->
su¥’d
)

112 
	`ALOGI
("JDWP wÈwa™ fÜ debugg” oÀpÜˆ%d", 
pÜt
);

114 
	`ALOGD
("JDWP will %s on…ort %d",

115 
pP¬ams
->
£rv”
 ? "li¡’" : "cÚÃù", 
pÜt
);

117  
Œue
;

118 
	}
}

124 
boŞ
 
	$awa™šgHªdshake
(
JdwpS‹
* 
¡©e
)

126  
¡©e
->
ÃtS‹
->
awa™šgHªdshake
;

127 
	}
}

141 
JdwpN‘S‹
* 
	$ÃtS¹up
(
pÜt
)

143 
Úe
 = 1;

144 
JdwpN‘S‹
* 
ÃtS‹
 = 
Ãw
 JdwpNetState;

146 ià(
pÜt
 < 0)

147  
ÃtS‹
;

149 
	`as£¹
(
pÜt
 != 0);

151 
ÃtS‹
->
li¡’Sock
 = 
	`sock‘
(
PF_INET
, 
SOCK_STREAM
, 
IPPROTO_TCP
);

152 ià(
ÃtS‹
->
li¡’Sock
 < 0) {

153 
	`ALOGE
("Sock‘ c»©çed: %s", 
	`¡»¼Ü
(
”ºo
));

154 
ç
;

158 ià(
	`£tsockİt
(
ÃtS‹
->
li¡’Sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
, &
Úe
,

159 (
Úe
)) < 0)

161 
	`ALOGE
("£tsockİt(SO_REUSEADDRèçed: %s", 
	`¡»¼Ü
(
”ºo
));

162 
ç
;

166 
sockaddr_š
 
addrIÃt
;

167 
sockaddr
 
addrPÏš
;

168 } 
addr
;

169 
addr
.
addrIÃt
.
sš_çmy
 = 
AF_INET
;

170 
addr
.
addrIÃt
.
sš_pÜt
 = 
	`htÚs
(
pÜt
);

171 
	`š‘_©Ú
("127.0.0.1", &
addr
.
addrIÃt
.
sš_addr
);

173 ià(
	`bšd
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
, (addr)) != 0) {

174 
	`ALOGV
("©‹m±ØbšdØpÜˆ%u faed: %s", 
pÜt
, 
	`¡»¼Ü
(
”ºo
));

175 
ç
;

178 
ÃtS‹
->
li¡’PÜt
 = 
pÜt
;

179 
	`LOGVV
("+++ boundØpÜˆ%d", 
ÃtS‹
->
li¡’PÜt
);

181 ià(
	`li¡’
(
ÃtS‹
->
li¡’Sock
, 5) != 0) {

182 
	`ALOGE
("Li¡’ faed: %s", 
	`¡»¼Ü
(
”ºo
));

183 
ç
;

186  
ÃtS‹
;

188 
ç
:

189 
	`ÃtShutdown
(
ÃtS‹
);

190 
	`ÃtF»e
(
ÃtS‹
);

191  
NULL
;

192 
	}
}

205 
	$ÃtShutdown
(
JdwpN‘S‹
* 
ÃtS‹
)

207 ià(
ÃtS‹
 =ğ
NULL
)

210 
li¡’Sock
 = 
ÃtS‹
->listenSock;

211 
ş›ÁSock
 = 
ÃtS‹
->clientSock;

214 
ÃtS‹
->
li¡’Sock
 =‚‘S‹->
ş›ÁSock
 = -1;

217 ià(
li¡’Sock
 >= 0) {

218 
	`shutdown
(
li¡’Sock
, 
SHUT_RDWR
);

219 
	`şo£
(
li¡’Sock
);

221 ià(
ş›ÁSock
 >= 0) {

222 
	`shutdown
(
ş›ÁSock
, 
SHUT_RDWR
);

223 
	`şo£
(
ş›ÁSock
);

227 ià(
ÃtS‹
->
wakePe
[1] >= 0) {

228 
	`ALOGV
("+++ writingo wakePipe");

229 (è
	`wr™e
(
ÃtS‹
->
wakePe
[1], "", 1);

231 
	}
}

232 
	$ÃtShutdownEx‹º
(
JdwpS‹
* 
¡©e
)

234 
	`ÃtShutdown
(
¡©e
->
ÃtS‹
);

235 
	}
}

242 
	$ÃtF»e
(
JdwpN‘S‹
* 
ÃtS‹
)

244 ià(
ÃtS‹
 =ğ
NULL
)

246 
	`as£¹
(
ÃtS‹
->
li¡’Sock
 == -1);

247 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 == -1);

249 ià(
ÃtS‹
->
wakePe
[0] >= 0) {

250 
	`şo£
(
ÃtS‹
->
wakePe
[0]);

251 
ÃtS‹
->
wakePe
[0] = -1;

253 ià(
ÃtS‹
->
wakePe
[1] >= 0) {

254 
	`şo£
(
ÃtS‹
->
wakePe
[1]);

255 
ÃtS‹
->
wakePe
[1] = -1;

258 
d–‘e
 
ÃtS‹
;

259 
	}
}

260 
	$ÃtF»eEx‹º
(
JdwpS‹
* 
¡©e
)

262 
	`ÃtF»e
(
¡©e
->
ÃtS‹
);

263 
	}
}

268 
boŞ
 
	$isCÚÃùed
(
JdwpS‹
* 
¡©e
)

270  (
¡©e
->
ÃtS‹
 !ğ
NULL
 &&

271 
¡©e
->
ÃtS‹
->
ş›ÁSock
 >= 0);

272 
	}
}

278 
boŞ
 
	$isFdR—dabË
(
sock
)

280 
fd_£t
 
»adfds
;

281 
timev®
 
tv
;

282 
couÁ
;

284 
	`FD_ZERO
(&
»adfds
);

285 
	`FD_SET
(
sock
, &
»adfds
);

287 
tv
.
tv_£c
 = 0;

288 
tv
.
tv_u£c
 = 0;

289 
couÁ
 = 
	`£Ëù
(
sock
+1, &
»adfds
, 
NULL
, NULL, &
tv
);

290 ià(
couÁ
 <= 0)

291  
çl£
;

293 ià(
	`FD_ISSET
(
sock
, &
»adfds
))

294  
Œue
;

296 
	`ALOGE
("WEIRD: odd behaviÜ iÀ£Ëù (couÁ=%d)", 
couÁ
);

297  
çl£
;

298 
	}
}

307 
boŞ
 
	$checkCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

309 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

311 
	`as£¹
(
ÃtS‹
->
li¡’Sock
 >= 0);

313 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 < 0);

315 ià(!
	`isFdR—dabË
(
ÃtS‹
->
li¡’Sock
))

316  
çl£
;

317  
Œue
;

318 
	}
}

326 
	$£tNoD–ay
(
fd
)

328 
cc
, 
Ú
 = 1;

330 
cc
 = 
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_NODELAY
, &
Ú
, (on));

331 
	`as£¹
(
cc
 == 0);

332  
cc
;

333 
	}
}

340 
boŞ
 
	$acû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

342 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

344 
sockaddr_š
 
addrIÃt
;

345 
sockaddr
 
addrPÏš
;

346 } 
addr
;

347 
sockËn_t
 
add¾’
;

348 
sock
;

350 ià(
ÃtS‹
->
li¡’Sock
 < 0)

351  
çl£
;

353 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 < 0);

355 
add¾’
 = (
addr
);

357 
sock
 = 
	`acû±
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
, &
add¾’
);

358 ià(
sock
 < 0 && 
”ºo
 !ğ
EINTR
) {

361 ià(
”ºo
 =ğ
EINVAL
)

362 
	`LOGVV
("acû± faed: %s", 
	`¡»¼Ü
(
”ºo
));

364 
	`ALOGE
("acû± faed: %s", 
	`¡»¼Ü
(
”ºo
));

365  
çl£
;

367 } 
sock
 < 0);

369 
ÃtS‹
->
»mÙeAddr
 = 
addr
.
addrIÃt
.
sš_addr
;

370 
ÃtS‹
->
»mÙePÜt
 = 
	`Áohs
(
addr
.
addrIÃt
.
sš_pÜt
);

371 
	`ALOGV
("+++‡ccepted connection from %s:%u",

372 
	`š‘_Áß
(
ÃtS‹
->
»mÙeAddr
),‚‘S‹->
»mÙePÜt
);

374 
ÃtS‹
->
ş›ÁSock
 = 
sock
;

375 
ÃtS‹
->
awa™šgHªdshake
 = 
Œue
;

376 
ÃtS‹
->
šputCouÁ
 = 0;

378 
	`ALOGV
("Setting TCP_NODELAY on‡ccepted socket");

379 
	`£tNoD–ay
(
ÃtS‹
->
ş›ÁSock
);

381 ià(
	`pe
(
ÃtS‹
->
wakePe
) < 0) {

382 
	`ALOGE
("pipe failed");

383  
çl£
;

386  
Œue
;

387 
	}
}

392 
boŞ
 
	$e¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

395 
sockaddr_š
 
addrIÃt
;

396 
sockaddr
 
addrPÏš
;

397 } 
addr
;

398 
ho¡’t
* 
pEÁry
;

399 
h_”ºo
;

401 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

402 
	`as£¹
(!
¡©e
->
·¿ms
.
£rv”
);

403 
	`as£¹
(
¡©e
->
·¿ms
.
ho¡
[0] != '\0');

404 
	`as£¹
(
¡©e
->
·¿ms
.
pÜt
 != 0);

411 #ifdeà
HAVE_GETHOSTBYNAME_R


412 
ho¡’t
 
he
;

413 
auxBuf
[128];

414 
cc
 = 
	`g‘ho¡byÇme_r
(
¡©e
->
·¿ms
.
ho¡
, &
he
, 
auxBuf
, (auxBuf),

415 &
pEÁry
, &
h_”ºo
);

416 ià(
cc
 != 0) {

417 
	`ALOGW
("gethostbyname_r('%s') failed: %s",

418 
¡©e
->
·¿ms
.
ho¡
, 
	`¡»¼Ü
(
”ºo
));

419  
çl£
;

423 
h_”ºo
 = 0;

424 
pEÁry
 = 
	`g‘ho¡byÇme
(
¡©e
->
·¿ms
.
ho¡
);

425 ià(
pEÁry
 =ğ
NULL
) {

426 
	`ALOGW
("gethostbyname('%s') failed: %s",

427 
¡©e
->
·¿ms
.
ho¡
, 
	`¡»¼Ü
(
h_”ºo
));

428  
çl£
;

433 
	`memıy
(&
addr
.
addrIÃt
.
sš_addr
, 
pEÁry
->
h_addr
,…EÁry->
h_Ëngth
);

434 
addr
.
addrIÃt
.
sš_çmy
 = 
pEÁry
->
h_add¹y³
;

436 
addr
.
addrIÃt
.
sš_pÜt
 = 
	`htÚs
(
¡©e
->
·¿ms
.
pÜt
);

438 
	`ALOGI
("Connecting outo '%s' %d",

439 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
), 
	`Áohs
×ddr.addrIÃt.
sš_pÜt
));

444 
JdwpN‘S‹
* 
ÃtS‹
;

445 
ÃtS‹
 = 
¡©e
->netState;

446 
ÃtS‹
->
ş›ÁSock
 = 
	`sock‘
(
PF_INET
, 
SOCK_STREAM
, 
IPPROTO_TCP
);

447 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

448 
	`ALOGE
("UÇbËØü—‹ sock‘: %s", 
	`¡»¼Ü
(
”ºo
));

449  
çl£
;

455 ià(
	`cÚÃù
(
ÃtS‹
->
ş›ÁSock
, &
addr
.
addrPÏš
, (addr)) != 0) {

456 
	`ALOGE
("Unableo connecto %s:%d: %s",

457 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
), 
	`Áohs
×ddr.addrIÃt.
sš_pÜt
),

458 
	`¡»¼Ü
(
”ºo
));

459 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

460 
ÃtS‹
->
ş›ÁSock
 = -1;

461  
çl£
;

464 
	`ALOGI
("Connectionƒstablishedo %s (%s:%d)",

465 
¡©e
->
·¿ms
.
ho¡
, 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
),

466 
	`Áohs
(
addr
.
addrIÃt
.
sš_pÜt
));

467 
ÃtS‹
->
awa™šgHªdshake
 = 
Œue
;

468 
ÃtS‹
->
šputCouÁ
 = 0;

470 
	`£tNoD–ay
(
ÃtS‹
->
ş›ÁSock
);

472 ià(
	`pe
(
ÃtS‹
->
wakePe
) < 0) {

473 
	`ALOGE
("pipe failed");

474  
çl£
;

477  
Œue
;

478 
	}
}

485 
	$şo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

487 
JdwpN‘S‹
* 
ÃtS‹
;

489 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

491 
ÃtS‹
 = 
¡©e
->netState;

492 ià(
ÃtS‹
->
ş›ÁSock
 < 0)

495 
	`ALOGV
("+++ closed connectiono %s:%u",

496 
	`š‘_Áß
(
ÃtS‹
->
»mÙeAddr
),‚‘S‹->
»mÙePÜt
);

498 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

499 
ÃtS‹
->
ş›ÁSock
 = -1;

502 
	}
}

507 
boŞ
 
	$haveFuÎPack‘
(
JdwpN‘S‹
* 
ÃtS‹
)

509 
Ëngth
;

511 ià(
ÃtS‹
->
awa™šgHªdshake
)

512  (
ÃtS‹
->
šputCouÁ
 >ğ(è
kMagicHªdshakeL’
);

514 ià(
ÃtS‹
->
šputCouÁ
 < 4)

515  
çl£
;

517 
Ëngth
 = 
	`g‘4BE
(
ÃtS‹
->
šputBufãr
);

518  (
ÃtS‹
->
šputCouÁ
 >ğ
Ëngth
);

519 
	}
}

527 
	$cÚsumeBy‹s
(
JdwpN‘S‹
* 
ÃtS‹
, 
couÁ
)

529 
	`as£¹
(
couÁ
 > 0);

530 
	`as£¹
(
couÁ
 <ğ
ÃtS‹
->
šputCouÁ
);

532 ià(
couÁ
 =ğ
ÃtS‹
->
šputCouÁ
) {

533 
ÃtS‹
->
šputCouÁ
 = 0;

537 
	`memmove
(
ÃtS‹
->
šputBufãr
,‚‘S‹->šputBufã¸+ 
couÁ
,

538 
ÃtS‹
->
šputCouÁ
 - 
couÁ
);

539 
ÃtS‹
->
šputCouÁ
 -ğ
couÁ
;

540 
	}
}

546 
	$dumpPack‘
(cÚ¡ * 
·ck‘Buf
)

548 cÚ¡ * 
buf
 = 
·ck‘Buf
;

549 
u4
 
Ëngth
, 
id
;

550 
u1
 
æags
, 
cmdS‘
, 
cmd
;

551 
u2
 
”rÜ
;

552 
boŞ
 
»¶y
;

553 
d©aL’
;

555 
cmd
 = 
cmdS‘
 = 0xcc;

557 
Ëngth
 = 
	`»ad4BE
(&
buf
);

558 
id
 = 
	`»ad4BE
(&
buf
);

559 
æags
 = 
	`»ad1
(&
buf
);

560 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

561 
»¶y
 = 
Œue
;

562 
”rÜ
 = 
	`»ad2BE
(&
buf
);

564 
»¶y
 = 
çl£
;

565 
cmdS‘
 = 
	`»ad1
(&
buf
);

566 
cmd
 = 
	`»ad1
(&
buf
);

569 
d©aL’
 = 
Ëngth
 - (
buf
 - 
·ck‘Buf
);

571 
	`ALOGV
("--- %s: dataLen=%u id=0x%08x flags=0x%02x cmd=%d/%d",

572 
»¶y
 ? "reply" : "req",

573 
d©aL’
, 
id
, 
æags
, 
cmdS‘
, 
cmd
);

574 ià(
d©aL’
 > 0)

575 
	`dvmPrštHexDumpDbg
(
buf
, 
d©aL’
, 
LOG_TAG
);

576 
	}
}

582 
boŞ
 
	$hªdËPack‘
(
JdwpS‹
* 
¡©e
)

584 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

585 cÚ¡ * 
buf
 = 
ÃtS‹
->
šputBufãr
;

586 
JdwpReqH—d”
 
hdr
;

587 
u4
 
Ëngth
, 
id
;

588 
u1
 
æags
, 
cmdS‘
, 
cmd
;

589 
u2
 
”rÜ
;

590 
boŞ
 
»¶y
;

591 
d©aL’
;

593 
cmd
 = 
cmdS‘
 = 0;

597 
Ëngth
 = 
	`»ad4BE
(&
buf
);

598 
id
 = 
	`»ad4BE
(&
buf
);

599 
æags
 = 
	`»ad1
(&
buf
);

600 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

601 
»¶y
 = 
Œue
;

602 
”rÜ
 = 
	`»ad2BE
(&
buf
);

604 
»¶y
 = 
çl£
;

605 
cmdS‘
 = 
	`»ad1
(&
buf
);

606 
cmd
 = 
	`»ad1
(&
buf
);

609 
	`as£¹
((è
Ëngth
 <ğ
ÃtS‹
->
šputCouÁ
);

610 
d©aL’
 = 
Ëngth
 - (
buf
 - 
ÃtS‹
->
šputBufãr
);

612 ià(!
»¶y
) {

613 
Ex·ndBuf
* 
pR•ly
 = 
	`ex·ndBufAÎoc
();

615 
hdr
.
Ëngth
 =†ength;

616 
hdr
.
id
 = id;

617 
hdr
.
cmdS‘
 = cmdSet;

618 
hdr
.
cmd
 = cmd;

619 
	`dvmJdwpProûssReque¡
(
¡©e
, &
hdr
, 
buf
, 
d©aL’
, 
pR•ly
);

620 ià(
	`ex·ndBufG‘L’gth
(
pR•ly
) > 0) {

621 
ssize_t
 
cc
 = 
ÃtS‹
->
	`wr™ePack‘
(
pR•ly
);

623 ià(
cc
 !ğ(
ssize_t
è
	`ex·ndBufG‘L’gth
(
pR•ly
)) {

624 
	`ALOGE
("Faed s’dšg„•lyØdebugg”: %s", 
	`¡»¼Ü
(
”ºo
));

625 
	`ex·ndBufF»e
(
pR•ly
);

626  
çl£
;

629 
	`ALOGW
("NØ»¶y c»©ed fÜ s‘=%d cmd=%d", 
cmdS‘
, 
cmd
);

631 
	`ex·ndBufF»e
(
pR•ly
);

633 
	`ALOGV
("reply?!");

634 
	`as£¹
(
çl£
);

637 
	`ALOGV
("----------");

639 
	`cÚsumeBy‹s
(
ÃtS‹
, 
Ëngth
);

640  
Œue
;

641 
	}
}

658 
boŞ
 
	$´oûssIncomšg
(
JdwpS‹
* 
¡©e
)

660 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

661 
»adCouÁ
;

663 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 >= 0);

665 ià(!
	`haveFuÎPack‘
(
ÃtS‹
)) {

667 
”ºo
 = 0;

669 
£lCouÁ
;

670 
fd_£t
 
»adfds
;

671 
maxfd
;

672 
fd
;

674 
maxfd
 = 
ÃtS‹
->
li¡’Sock
;

675 ià(
ÃtS‹
->
ş›ÁSock
 > 
maxfd
)

676 
maxfd
 = 
ÃtS‹
->
ş›ÁSock
;

677 ià(
ÃtS‹
->
wakePe
[0] > 
maxfd
)

678 
maxfd
 = 
ÃtS‹
->
wakePe
[0];

680 ià(
maxfd
 < 0) {

681 
	`ALOGV
("+++‡ll fds‡re closed");

682  
çl£
;

685 
	`FD_ZERO
(&
»adfds
);

688 
fd
 = 
ÃtS‹
->
li¡’Sock
;

689 ià(
fd
 >= 0)

690 
	`FD_SET
(
fd
, &
»adfds
);

691 
fd
 = 
ÃtS‹
->
ş›ÁSock
;

692 ià(
fd
 >= 0)

693 
	`FD_SET
(
fd
, &
»adfds
);

694 
fd
 = 
ÃtS‹
->
wakePe
[0];

695 ià(
fd
 >= 0) {

696 
	`FD_SET
(
fd
, &
»adfds
);

698 
	`ALOGI
("NOTE:ƒntering select w/o wakepipe");

713 
£lCouÁ
 = 
	`£Ëù
(
maxfd
+1, &
»adfds
, 
NULL
, NULL, NULL);

714 ià(
£lCouÁ
 < 0) {

715 ià(
”ºo
 =ğ
EINTR
)

717 
	`ALOGE
("£Ëù faed: %s", 
	`¡»¼Ü
(
”ºo
));

718 
ç
;

721 ià(
ÃtS‹
->
wakePe
[0] >= 0 &&

722 
	`FD_ISSET
(
ÃtS‹
->
wakePe
[0], &
»adfds
))

724 ià(
ÃtS‹
->
li¡’Sock
 >= 0)

725 
	`ALOGE
("Exit wake set, but‚otƒxiting?");

727 
	`ALOGD
("Got wake-up signal, bailing out of select");

728 
ç
;

730 ià(
ÃtS‹
->
li¡’Sock
 >= 0 &&

731 
	`FD_ISSET
(
ÃtS‹
->
li¡’Sock
, &
»adfds
))

733 
	`ALOGI
("Ignoring second debugger --‡ccepting‡nd dropping");

735 
sockaddr_š
 
addrIÃt
;

736 
sockaddr
 
addrPÏš
;

737 } 
addr
;

738 
sockËn_t
 
add¾’
;

739 
tmpSock
;

740 
tmpSock
 = 
	`acû±
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
,

741 &
add¾’
);

742 ià(
tmpSock
 < 0)

743 
	`ALOGI
("Weird --‡ccept failed");

745 
	`şo£
(
tmpSock
);

747 ià(
ÃtS‹
->
ş›ÁSock
 >= 0 &&

748 
	`FD_ISSET
(
ÃtS‹
->
ş›ÁSock
, &
»adfds
))

750 
»adCouÁ
 = 
	`»ad
(
ÃtS‹
->
ş›ÁSock
,

751 
ÃtS‹
->
šputBufãr
 +‚‘S‹->
šputCouÁ
,

752 (
ÃtS‹
->
šputBufãr
è-‚‘S‹->
šputCouÁ
);

753 ià(
»adCouÁ
 < 0) {

755 ià(
”ºo
 !ğ
EINTR
)

756 
ç
;

757 
	`ALOGD
("+++ EINTR hit");

758  
Œue
;

759 } ià(
»adCouÁ
 == 0) {

761 
	`ALOGD
("+++…eer disconnected");

762 
ç
;

768 
ÃtS‹
->
šputCouÁ
 +ğ
»adCouÁ
;

769 ià(!
	`haveFuÎPack‘
(
ÃtS‹
))

770  
Œue
;

781 ià(
ÃtS‹
->
awa™šgHªdshake
) {

782 
cc
;

784 ià(
	`memcmp
(
ÃtS‹
->
šputBufãr
,

785 
kMagicHªdshake
, 
kMagicHªdshakeL’
) != 0)

787 
	`ALOGE
("ERROR: bad hªdshak'%.14s'", 
ÃtS‹
->
šputBufãr
);

788 
ç
;

791 
”ºo
 = 0;

792 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
,‚‘S‹->
šputBufãr
,

793 
kMagicHªdshakeL’
);

794 ià(
cc
 !ğ
kMagicHªdshakeL’
) {

795 
	`ALOGE
("Failed writing handshake bytes: %s (%d of %d)",

796 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
kMagicHªdshakeL’
);

797 
ç
;

800 
	`cÚsumeBy‹s
(
ÃtS‹
, 
kMagicHªdshakeL’
);

801 
ÃtS‹
->
awa™šgHªdshake
 = 
çl£
;

802 
	`ALOGV
("+++ handshake complete");

803  
Œue
;

809  
	`hªdËPack‘
(
¡©e
);

811 
ç
:

812 
	`şo£CÚÃùiÚ
(
¡©e
);

813  
çl£
;

814 
	}
}

824 
boŞ
 
	$£ndReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

826 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

829 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

831 
	`ALOGV
("NOT sending„equest --‚o debugger is‡ttached");

832  
çl£
;

835 
”ºo
 = 0;

836 
ssize_t
 
cc
 = 
ÃtS‹
->
	`wr™ePack‘
(
pReq
);

838 ià(
cc
 !ğ(
ssize_t
è
	`ex·ndBufG‘L’gth
(
pReq
)) {

839 
	`ALOGE
("Failed sending„eqo debugger: %s (%d of %d)",

840 
	`¡»¼Ü
(
”ºo
), (è
cc
, (è
	`ex·ndBufG‘L’gth
(
pReq
));

841  
çl£
;

844  
Œue
;

845 
	}
}

855 
boŞ
 
	$£ndBufã»dReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
iovec
* 
iov
,

856 
iovút
)

858 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

860 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

862 
	`ALOGV
("NOT sending„equest --‚o debugger is‡ttached");

863  
çl£
;

866 
size_t
 
ex³ùed
 = 0;

867 
i
;

868 
i
 = 0; i < 
iovút
; i++)

869 
ex³ùed
 +ğ
iov
[
i
].
iov_Ën
;

871 
ssize_t
 
aùu®
 = 
ÃtS‹
->
	`wr™eBufã»dPack‘
(
iov
, 
iovút
);

873 ià((
size_t
)
aùu®
 !ğ
ex³ùed
) {

874 
	`ALOGE
("Failed sending b-reqo debugger: %s (%d of %zu)",

875 
	`¡»¼Ü
(
”ºo
), (è
aùu®
, 
ex³ùed
);

876  
çl£
;

879  
Œue
;

880 
	}
}

890 cÚ¡ 
JdwpT¿n¥Üt
 
	gsock‘T¿n¥Üt
 = {

891 
´•¬eSock‘
,

892 
acû±CÚÃùiÚ
,

893 
e¡ablishCÚÃùiÚ
,

894 
şo£CÚÃùiÚ
,

895 
ÃtShutdownEx‹º
,

896 
ÃtF»eEx‹º
,

897 
isCÚÃùed
,

898 
awa™šgHªdshake
,

899 
´oûssIncomšg
,

900 
£ndReque¡
,

901 
£ndBufã»dReque¡
,

907 cÚ¡ 
JdwpT¿n¥Üt
* 
	$dvmJdwpSock‘T¿n¥Üt
()

909  &
sock‘T¿n¥Üt
;

910 
	}
}

	@vm/mterp/Mterp.cpp

20 
	~"D®vik.h
"

21 
	~"m‹½/M‹½.h
"

23 
	~<¡ddef.h
>

29 
boŞ
 
	$dvmCheckAsmCÚ¡ªts
()

31 
boŞ
 
çed
 = 
çl£
;

33 #iâdeà
DVM_NO_ASM_INTERP


35 #iâdeà
DVM_JMP_TABLE_MTERP


36 * 
dvmAsmIn¡ruùiÚS¹
[];

37 * 
dvmAsmIn¡ruùiÚEnd
[];

40 
	#ASM_DEF_VERIFY


	)

41 
	~"m‹½/commÚ/asm-cÚ¡ªts.h
"

43 ià(
çed
) {

44 
	`ALOGE
("Please correcthe values in mterp/common/asm-constants.h");

45 
	`dvmAbÜt
();

48 #iâdeà
DVM_JMP_TABLE_MTERP


55 cÚ¡ 
width
 = 64;

56 
š‹½Size
 = (
ušŒ_t
è
dvmAsmIn¡ruùiÚEnd
 -

57 (
ušŒ_t
è
dvmAsmIn¡ruùiÚS¹
;

58 ià(
š‹½Size
 !ğ0 && iÁ”pSiz!ğ
kNumPackedOpcodes
*
width
) {

59 
	`ALOGE
("ERROR: uÃx³ùed‡sm iÁ”°siz%d", 
š‹½Size
);

60 
	`ALOGE
("(did‡Àš¡ruùiÚ hªdË¸exûed %d by‹s?)", 
width
);

61 
	`dvmAbÜt
();

67  !
çed
;

68 
	}
}

74 
	$dvmM‹½Std
(
Th»ad
* 
£lf
)

77 
£lf
->
š‹½Save
.
m‘hodCÏssDex
 = s–f->š‹½Save.
m‘hod
->
şazz
->
pDvmDex
;

79 
	`IF_LOGVV
() {

80 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

81 &
£lf
->
š‹½Save
.
m‘hod
->
´ÙÙy³
);

82 
	`LOGVV
("mterphreadid=%d : %s.%s %s",

83 
	`dvmTh»adS–f
()->
th»adId
,

84 
£lf
->
š‹½Save
.
m‘hod
->
şazz
->
desütÜ
,

85 
£lf
->
š‹½Save
.
m‘hod
->
Çme
,

86 
desc
);

87 
	`ä“
(
desc
);

96 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

97 
	`TRACE_METHOD_ENTER
(
£lf
, s–f->
š‹½Save
.
m‘hod
);

98 
£lf
->
debugIsM‘hodEÁry
 = 
Œue
;

101 
	`dvmM‹½StdRun
(
£lf
);

103 #ifdeà
LOG_INSTR


104 
	`ALOGD
("|-- Leaving interpreter†oop");

106 
	}
}

	@vm/mterp/Mterp.h

20 #iâdeà
DALVIK_MTERP_MTERP_H_


21 
	#DALVIK_MTERP_MTERP_H_


	)

23 
	~"D®vik.h
"

24 
	~"š‹½/IÁ”pDefs.h
"

25 #ià
defšed
(
WITH_JIT
)

26 
	~"š‹½/J™.h
"

33 "C" 
boŞ
 
dvmCheckAsmCÚ¡ªts
();

45 "C" 
boŞ
 
dvmM‹½StdRun
(
Th»ad
* 
£lf
);

46 "C" 
dvmM‹½StdBa
(
Th»ad
* 
£lf
, 
boŞ
 
chªgeIÁ”p
);

52 "C" 
dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
);

	@vm/mterp/armv5te/debug.cpp

1 
	~<š‰y³s.h
>

11 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

14 #iâdeà
__şªg__


15 
ušt32_t
 
rPC
 
	`asm
("r4");

16 
ušt32_t
 
rFP
 
	`asm
("r5");

17 
ušt32_t
 
rSELF
 
	`asm
("r6");

18 
ušt32_t
 
rINST
 
	`asm
("r7");

19 
ušt32_t
 
rIBASE
 
	`asm
("r8");

20 
ušt32_t
 
r9
 
	`asm
("r9");

21 
ušt32_t
 
r10
 
	`asm
("r10");

25 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

26 
	`´štf
(" :„PC=%08x„FP=%08x„SELF=%08x„INST=%08x\n",

27 
rPC
, 
rFP
, 
rSELF
, 
rINST
);

28 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

33 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

39 
	}
}

44 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

46 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

47 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

48 #ifdeà
EASY_GDB


49 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

50 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

51 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

53 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

54 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

55 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

56 *(
u4
*)
å
);

58 
	}
}

63 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

69 
boŞ
 
isDœeù
 =

70 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

71 (
m‘hod
->
Çme
[0] == '<');

73 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

75 
	`´štf
("<%c:%s.%s %s> ",

76 
isDœeù
 ? 'D' : 'V',

77 
m‘hod
->
şazz
->
desütÜ
,

78 
m‘hod
->
Çme
,

79 
desc
);

81 
	`ä“
(
desc
);

82 
	}
}

	@vm/mterp/c/OP_ADD_DOUBLE.cpp

1 
HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_DOUBLE_2ADDR.cpp

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_FLOAT.cpp

1 
HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_FLOAT_2ADDR.cpp

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_ADD_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AGET.cpp

1 
HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_BOOLEAN.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_BYTE.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_CHAR.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_OBJECT.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_SHORT.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2 
	gOP_END


	@vm/mterp/c/OP_AGET_WIDE.cpp

1 
HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_AND_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AND_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AND_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AND_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AND_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_AND_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

2 
	gOP_END


	@vm/mterp/c/OP_APUT.cpp

1 
HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2 
	gOP_END


	@vm/mterp/c/OP_APUT_BOOLEAN.cpp

1 
HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2 
	gOP_END


	@vm/mterp/c/OP_APUT_BYTE.cpp

1 
HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2 
	gOP_END


	@vm/mterp/c/OP_APUT_CHAR.cpp

1 
HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2 
	gOP_END


	@vm/mterp/c/OP_APUT_OBJECT.cpp

1 
	$HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

3 
A¼ayObjeù
* 
¬¿yObj
;

4 
Objeù
* 
obj
;

5 
u2
 
¬¿yInfo
;

6 
	`EXPORT_PC
();

7 
vd¡
 = 
	`INST_AA
(
š¡
);

8 
¬¿yInfo
 = 
	`FETCH
(1);

9 
v¤c1
 = 
¬¿yInfo
 & 0xff;

10 
v¤c2
 = 
¬¿yInfo
 >> 8;

11 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

12 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

13 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

14 
	`GOTO_exû±iÚThrown
();

15 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

16 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(

17 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
));

18 
	`GOTO_exû±iÚThrown
();

20 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

21 ià(
obj
 !ğ
NULL
) {

22 ià(!
	`checkFÜNuÎ
(
obj
))

23 
	`GOTO_exû±iÚThrown
();

24 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz)) {

25 
	`ALOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)",

26 
obj
->
şazz
->
desütÜ
, obj,

27 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

28 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz);

29 
	`GOTO_exû±iÚThrown
();

32 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

33 
	`dvmS‘ObjeùA¼ayEËm’t
(
¬¿yObj
,

34 
	`GET_REGISTER
(
v¤c2
),

35 (
Objeù
 *)
	`GET_REGISTER
(
vd¡
));

36 
	}
}

37 
FINISH
(2);

38 
	gOP_END


	@vm/mterp/c/OP_APUT_SHORT.cpp

1 
HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2 
	gOP_END


	@vm/mterp/c/OP_APUT_WIDE.cpp

1 
HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_ARRAY_LENGTH.cpp

1 
	$HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

3 
A¼ayObjeù
* 
¬¿yObj
;

5 
vd¡
 = 
	`INST_A
(
š¡
);

6 
v¤c1
 = 
	`INST_B
(
š¡
);

7 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

8 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

9 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

10 
	`GOTO_exû±iÚThrown
();

12 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

13 
	}
}

14 
FINISH
(1);

15 
	gOP_END


	@vm/mterp/c/OP_BREAKPOINT.cpp

1 
	$HANDLE_OPCODE
(
OP_BREAKPOINT
)

18 
u1
 
Üigš®Opcode
 = 
	`dvmG‘Origš®Opcode
(
pc
);

19 
	`ALOGV
("+++ b»ak 0x%02x (0x%04x -> 0x%04x)", 
Üigš®Opcode
, 
š¡
,

20 
	`INST_REPLACE_OP
(
š¡
, 
Üigš®Opcode
));

21 
š¡
 = 
	`INST_REPLACE_OP
(š¡, 
Üigš®Opcode
);

22 
	`FINISH_BKPT
(
Üigš®Opcode
);

23 
	}
}

24 
	gOP_END


	@vm/mterp/c/OP_CHECK_CAST.cpp

1 
	$HANDLE_OPCODE
(
OP_CHECK_CAST
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
obj
;

6 
	`EXPORT_PC
();

8 
v¤c1
 = 
	`INST_AA
(
š¡
);

9 
»f
 = 
	`FETCH
(1);

10 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

12 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

13 ià(
obj
 !ğ
NULL
) {

14 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

15 ià(!
	`checkFÜNuÎ
(
obj
))

16 
	`GOTO_exû±iÚThrown
();

18 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

19 ià(
şazz
 =ğ
NULL
) {

20 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

21 ià(
şazz
 =ğ
NULL
)

22 
	`GOTO_exû±iÚThrown
();

24 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

25 
	`dvmThrowCÏssCa¡Exû±iÚ
(
obj
->
şazz
, clazz);

26 
	`GOTO_exû±iÚThrown
();

29 
	}
}

30 
FINISH
(2);

31 
	gOP_END


	@vm/mterp/c/OP_CMPG_DOUBLE.cpp

1 
HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

2 
	gOP_END


	@vm/mterp/c/OP_CMPG_FLOAT.cpp

1 
HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

2 
	gOP_END


	@vm/mterp/c/OP_CMPL_DOUBLE.cpp

1 
HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

2 
	gOP_END


	@vm/mterp/c/OP_CMPL_FLOAT.cpp

1 
HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

2 
	gOP_END


	@vm/mterp/c/OP_CMP_LONG.cpp

1 
HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

2 
	gOP_END


	@vm/mterp/c/OP_CONST.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST
 )

3 
u4
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

8 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

9 
	`SET_REGISTER
(
vd¡
, 
tmp
);

10 
	}
}

11 
FINISH
(3);

12 
	gOP_END


	@vm/mterp/c/OP_CONST_16.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

5 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

6 
	`FINISH
(2);

7 
OP_END


	@vm/mterp/c/OP_CONST_4.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_4
 )

3 
s4
 
tmp
;

5 
vd¡
 = 
	`INST_A
(
š¡
);

6 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

7 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

8 
	`SET_REGISTER
(
vd¡
, 
tmp
);

9 
	}
}

10 
FINISH
(1);

11 
	gOP_END


	@vm/mterp/c/OP_CONST_CLASS.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_CLASS
 )

3 
CÏssObjeù
* 
şazz
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
»f
 = 
	`FETCH
(1);

7 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

8 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

9 ià(
şazz
 =ğ
NULL
) {

10 
	`EXPORT_PC
();

11 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

12 ià(
şazz
 =ğ
NULL
)

13 
	`GOTO_exû±iÚThrown
();

15 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

16 
	}
}

17 
FINISH
(2);

18 
	gOP_END


	@vm/mterp/c/OP_CONST_HIGH16.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

6 
	`FINISH
(2);

7 
OP_END


	@vm/mterp/c/OP_CONST_STRING.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_STRING
 )

3 
SŒšgObjeù
* 
¡rObj
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
»f
 = 
	`FETCH
(1);

7 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

8 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

9 ià(
¡rObj
 =ğ
NULL
) {

10 
	`EXPORT_PC
();

11 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

12 ià(
¡rObj
 =ğ
NULL
)

13 
	`GOTO_exû±iÚThrown
();

15 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

16 
	}
}

17 
FINISH
(2);

18 
	gOP_END


	@vm/mterp/c/OP_CONST_STRING_JUMBO.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

3 
SŒšgObjeù
* 
¡rObj
;

4 
u4
 
tmp
;

6 
vd¡
 = 
	`INST_AA
(
š¡
);

7 
tmp
 = 
	`FETCH
(1);

8 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

9 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

10 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

11 ià(
¡rObj
 =ğ
NULL
) {

12 
	`EXPORT_PC
();

13 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

14 ià(
¡rObj
 =ğ
NULL
)

15 
	`GOTO_exû±iÚThrown
();

17 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

18 
	}
}

19 
FINISH
(3);

20 
	gOP_END


	@vm/mterp/c/OP_CONST_WIDE.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE
 )

3 
u8
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

8 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

9 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

10 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

11 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

12 
	}
}

13 
FINISH
(5);

14 
	gOP_END


	@vm/mterp/c/OP_CONST_WIDE_16.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

5 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

6 
	`FINISH
(2);

7 
OP_END


	@vm/mterp/c/OP_CONST_WIDE_32.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

3 
u4
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

8 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

9 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

10 
	}
}

11 
FINISH
(3);

12 
	gOP_END


	@vm/mterp/c/OP_CONST_WIDE_HIGH16.cpp

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

6 
	`FINISH
(2);

7 
OP_END


	@vm/mterp/c/OP_DIV_DOUBLE.cpp

1 
HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_DOUBLE_2ADDR.cpp

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_FLOAT.cpp

1 
HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_FLOAT_2ADDR.cpp

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DIV_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

2 
	gOP_END


	@vm/mterp/c/OP_DOUBLE_TO_FLOAT.cpp

1 
HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2 
	gOP_END


	@vm/mterp/c/OP_DOUBLE_TO_INT.cpp

1 
HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2 , 
_DOUBLE
, 
s4
, 
_INT
)

3 
	gOP_END


	@vm/mterp/c/OP_DOUBLE_TO_LONG.cpp

1 
HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2 , 
_DOUBLE
, 
s8
, 
_WIDE
)

3 
	gOP_END


	@vm/mterp/c/OP_EXECUTE_INLINE.cpp

1 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

19 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

20 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

22 
	`EXPORT_PC
();

24 
v¤c1
 = 
	`INST_B
(
š¡
);

25 
»f
 = 
	`FETCH
(1);

26 
vd¡
 = 
	`FETCH
(2);

27 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

28 
v¤c1
, 
»f
, 
vd¡
);

30 
	`as£¹
((
vd¡
 >> 16) == 0);

31 
	`as£¹
(
v¤c1
 <= 4);

33 
v¤c1
) {

35 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

38 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

41 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

44 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

50 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

51 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

52 
	`GOTO_exû±iÚThrown
();

54 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

55 
	`GOTO_exû±iÚThrown
();

57 
	}
}

58 
FINISH
(3);

59 
	gOP_END


	@vm/mterp/c/OP_EXECUTE_INLINE_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE_RANGE
 )

3 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

4 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

6 
	`EXPORT_PC
();

8 
v¤c1
 = 
	`INST_AA
(
š¡
);

9 
»f
 = 
	`FETCH
(1);

10 
vd¡
 = 
	`FETCH
(2);

11 
	`ILOGV
("|execute-inline-range‡rgs=%d @%d {regs=v%d-v%d}",

12 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

14 
	`as£¹
((
vd¡
 >> 16) == 0);

15 
	`as£¹
(
v¤c1
 <= 4);

17 
v¤c1
) {

19 
¬g3
 = 
	`GET_REGISTER
(
vd¡
+3);

22 
¬g2
 = 
	`GET_REGISTER
(
vd¡
+2);

25 
¬g1
 = 
	`GET_REGISTER
(
vd¡
+1);

28 
¬g0
 = 
	`GET_REGISTER
(
vd¡
+0);

34 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

35 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

36 
	`GOTO_exû±iÚThrown
();

38 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

39 
	`GOTO_exû±iÚThrown
();

41 
	}
}

42 
FINISH
(3);

43 
	gOP_END


	@vm/mterp/c/OP_FILLED_NEW_ARRAY.cpp

1 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

2 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_FILLED_NEW_ARRAY_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

2 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_FILL_ARRAY_DATA.cpp

1 
	$HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

3 cÚ¡ 
u2
* 
¬¿yD©a
;

4 
s4
 
off£t
;

5 
A¼ayObjeù
* 
¬¿yObj
;

7 
	`EXPORT_PC
();

8 
v¤c1
 = 
	`INST_AA
(
š¡
);

9 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

10 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

11 
¬¿yD©a
 = 
pc
 + 
off£t
;

12 #iâdeà
NDEBUG


13 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

14 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

17 
	`dvmThrowIÁ”ÇlE¼Ü
("bad fill‡rray data");

18 
	`GOTO_exû±iÚThrown
();

21 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

22 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

23 
	`GOTO_exû±iÚThrown
();

25 
	`FINISH
(3);

26 
	}
}

27 
	gOP_END


	@vm/mterp/c/OP_FLOAT_TO_DOUBLE.cpp

1 
HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2 
	gOP_END


	@vm/mterp/c/OP_FLOAT_TO_INT.cpp

1 
HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2 , 
_FLOAT
, 
s4
, 
_INT
)

3 
	gOP_END


	@vm/mterp/c/OP_FLOAT_TO_LONG.cpp

1 
HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2 , 
_FLOAT
, 
s8
, 
_WIDE
)

3 
	gOP_END


	@vm/mterp/c/OP_GOTO.cpp

1 
	$HANDLE_OPCODE
(
OP_GOTO
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 ià((
s1
)
vd¡
 < 0)

4 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

6 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

7 
	`ILOGV
("> branchaken");

8 ià((
s1
)
vd¡
 < 0)

9 
	`PERIODIC_CHECKS
((
s1
)
vd¡
);

10 
	`FINISH
((
s1
)
vd¡
);

11 
OP_END


	@vm/mterp/c/OP_GOTO_16.cpp

1 
	$HANDLE_OPCODE
(
OP_GOTO_16
 )

3 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

5 ià(
off£t
 < 0)

6 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

8 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

9 
	`ILOGV
("> branchaken");

10 ià(
off£t
 < 0)

11 
	`PERIODIC_CHECKS
(
off£t
);

12 
	`FINISH
(
off£t
);

13 
	}
}

14 
	gOP_END


	@vm/mterp/c/OP_GOTO_32.cpp

1 
	$HANDLE_OPCODE
(
OP_GOTO_32
 )

3 
s4
 
off£t
 = 
	`FETCH
(1);

4 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

6 ià(
off£t
 < 0)

7 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

9 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

10 
	`ILOGV
("> branchaken");

11 ià(
off£t
 <= 0)

12 
	`PERIODIC_CHECKS
(
off£t
);

13 
	`FINISH
(
off£t
);

14 
	}
}

15 
	gOP_END


	@vm/mterp/c/OP_IF_EQ.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

2 
OP_END


	@vm/mterp/c/OP_IF_EQZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

2 
OP_END


	@vm/mterp/c/OP_IF_GE.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

2 
OP_END


	@vm/mterp/c/OP_IF_GEZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

2 
OP_END


	@vm/mterp/c/OP_IF_GT.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

2 
	gOP_END


	@vm/mterp/c/OP_IF_GTZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

2 
	gOP_END


	@vm/mterp/c/OP_IF_LE.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

2 
OP_END


	@vm/mterp/c/OP_IF_LEZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

2 
OP_END


	@vm/mterp/c/OP_IF_LT.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

2 
	gOP_END


	@vm/mterp/c/OP_IF_LTZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

2 
	gOP_END


	@vm/mterp/c/OP_IF_NE.cpp

1 
HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

2 
OP_END


	@vm/mterp/c/OP_IF_NEZ.cpp

1 
HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

2 
OP_END


	@vm/mterp/c/OP_IGET.cpp

1 
HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_BOOLEAN.cpp

1 
HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_BYTE.cpp

1 
HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_CHAR.cpp

1 
HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_OBJECT.cpp

1 
HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_IGET_OBJECT_QUICK.cpp

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_IGET_OBJECT_VOLATILE.cpp

1 
HANDLE_IGET_X
(
OP_IGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_IGET_QUICK.cpp

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_SHORT.cpp

1 
HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_VOLATILE.cpp

1 
HANDLE_IGET_X
(
OP_IGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2 
	gOP_END


	@vm/mterp/c/OP_IGET_WIDE.cpp

1 
HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_IGET_WIDE_QUICK.cpp

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_IGET_WIDE_VOLATILE.cpp

1 
HANDLE_IGET_X
(
OP_IGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_INSTANCE_OF.cpp

1 
	$HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
obj
;

6 
vd¡
 = 
	`INST_A
(
š¡
);

7 
v¤c1
 = 
	`INST_B
(
š¡
);

8 
»f
 = 
	`FETCH
(1);

9 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

11 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

12 ià(
obj
 =ğ
NULL
) {

13 
	`SET_REGISTER
(
vd¡
, 0);

15 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

16 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

17 
	`GOTO_exû±iÚThrown
();

19 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

20 ià(
şazz
 =ğ
NULL
) {

21 
	`EXPORT_PC
();

22 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

23 ià(
şazz
 =ğ
NULL
)

24 
	`GOTO_exû±iÚThrown
();

26 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

28 
	}
}

29 
FINISH
(2);

30 
	gOP_END


	@vm/mterp/c/OP_INT_TO_BYTE.cpp

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2 
	gOP_END


	@vm/mterp/c/OP_INT_TO_CHAR.cpp

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2 
	gOP_END


	@vm/mterp/c/OP_INT_TO_DOUBLE.cpp

1 
HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2 
	gOP_END


	@vm/mterp/c/OP_INT_TO_FLOAT.cpp

1 
HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2 
	gOP_END


	@vm/mterp/c/OP_INT_TO_LONG.cpp

1 
HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_INT_TO_SHORT.cpp

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2 
	gOP_END


	@vm/mterp/c/OP_INVOKE_DIRECT.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_DIRECT_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_INTERFACE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_INTERFACE_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_OBJECT_INIT_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_OBJECT_INIT_RANGE
 )

3 
Objeù
* 
obj
;

5 
v¤c1
 = 
	`FETCH
(2);

6 
obj
 = 
	`GET_REGISTER_AS_OBJECT
(
v¤c1
);

8 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

9 
	`GOTO_exû±iÚThrown
();

16 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
)) {

17 
	`EXPORT_PC
();

18 
	`dvmS‘Fš®izabË
(
obj
);

19 ià(
	`dvmG‘Exû±iÚ
(
£lf
))

20 
	`GOTO_exû±iÚThrown
();

23 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

25 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

27 
	`FINISH
(3);

28 
	}
}

29 
	gOP_END


	@vm/mterp/c/OP_INVOKE_STATIC.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_STATIC_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_SUPER.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_SUPER_QUICK.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

2 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_SUPER_QUICK_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

2 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_SUPER_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_VIRTUAL.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_VIRTUAL_QUICK.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

2 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_VIRTUAL_QUICK_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

2 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_INVOKE_VIRTUAL_RANGE.cpp

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

3 
OP_END


	@vm/mterp/c/OP_IPUT.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_BOOLEAN.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_BYTE.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_CHAR.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_OBJECT.cpp

12 
HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

13 
	gOP_END


	@vm/mterp/c/OP_IPUT_OBJECT_QUICK.cpp

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_OBJECT_VOLATILE.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_QUICK.cpp

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_SHORT.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_VOLATILE.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_WIDE.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_WIDE_QUICK.cpp

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_IPUT_WIDE_VOLATILE.cpp

1 
HANDLE_IPUT_X
(
OP_IPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_LONG_TO_DOUBLE.cpp

1 
HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2 
	gOP_END


	@vm/mterp/c/OP_LONG_TO_FLOAT.cpp

1 
HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2 
	gOP_END


	@vm/mterp/c/OP_LONG_TO_INT.cpp

1 
HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2 
	gOP_END


	@vm/mterp/c/OP_MONITOR_ENTER.cpp

1 
	$HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

3 
Objeù
* 
obj
;

5 
v¤c1
 = 
	`INST_AA
(
š¡
);

6 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

7 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

8 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

9 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

10 
	`GOTO_exû±iÚThrown
();

11 
	`ILOGV
("+†ockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

12 
	`EXPORT_PC
();

13 
	`dvmLockObjeù
(
£lf
, 
obj
);

14 
	}
}

15 
FINISH
(1);

16 
	gOP_END


	@vm/mterp/c/OP_MONITOR_EXIT.cpp

1 
	$HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

3 
Objeù
* 
obj
;

5 
	`EXPORT_PC
();

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

9 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

10 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

11 ià(!
	`checkFÜNuÎ
(
obj
)) {

19 
	`ADJUST_PC
(1);

20 
	`GOTO_exû±iÚThrown
();

22 
	`ILOGV
("+ uÆockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

23 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

24 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

25 
	`ADJUST_PC
(1);

26 
	`GOTO_exû±iÚThrown
();

28 
	}
}

29 
FINISH
(1);

30 
	gOP_END


	@vm/mterp/c/OP_MOVE.cpp

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

8 
	`FINISH
(1);

9 
OP_END


	@vm/mterp/c/OP_MOVE_16.cpp

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`FETCH
(1);

3 
v¤c1
 = 
	`FETCH
(2);

4 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

8 
	`FINISH
(3);

9 
OP_END


	@vm/mterp/c/OP_MOVE_EXCEPTION.cpp

1 
	$HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

4 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

5 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

6 
	`dvmCË¬Exû±iÚ
(
£lf
);

7 
	`FINISH
(1);

8 
OP_END


	@vm/mterp/c/OP_MOVE_FROM16.cpp

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

8 
	`FINISH
(2);

9 
OP_END


	@vm/mterp/c/OP_MOVE_OBJECT.cpp

1 %
	gšşude
 "c/OP_MOVE.cpp"

	@vm/mterp/c/OP_MOVE_OBJECT_16.cpp

1 %
	gšşude
 "c/OP_MOVE_16.cpp"

	@vm/mterp/c/OP_MOVE_OBJECT_FROM16.cpp

1 %
	gšşude
 "c/OP_MOVE_FROM16.cpp"

	@vm/mterp/c/OP_MOVE_RESULT.cpp

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

4 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

5 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

6 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

7 
	`FINISH
(1);

8 
OP_END


	@vm/mterp/c/OP_MOVE_RESULT_OBJECT.cpp

1 %
	gšşude
 "c/OP_MOVE_RESULT.cpp"

	@vm/mterp/c/OP_MOVE_RESULT_WIDE.cpp

1 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

4 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

5 
	`FINISH
(1);

6 
OP_END


	@vm/mterp/c/OP_MOVE_WIDE.cpp

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

4 
vd¡
 = 
	`INST_A
(
š¡
);

5 
v¤c1
 = 
	`INST_B
(
š¡
);

6 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

7 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

8 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

9 
	`FINISH
(1);

10 
OP_END


	@vm/mterp/c/OP_MOVE_WIDE_16.cpp

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

2 
vd¡
 = 
	`FETCH
(1);

3 
v¤c1
 = 
	`FETCH
(2);

4 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

5 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

6 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

7 
	`FINISH
(3);

8 
OP_END


	@vm/mterp/c/OP_MOVE_WIDE_FROM16.cpp

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

5 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

6 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

7 
	`FINISH
(2);

8 
OP_END


	@vm/mterp/c/OP_MUL_DOUBLE.cpp

1 
HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_DOUBLE_2ADDR.cpp

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_FLOAT.cpp

1 
HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_FLOAT_2ADDR.cpp

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_MUL_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

2 
	gOP_END


	@vm/mterp/c/OP_NEG_DOUBLE.cpp

1 
HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2 
	gOP_END


	@vm/mterp/c/OP_NEG_FLOAT.cpp

1 
HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2 
	gOP_END


	@vm/mterp/c/OP_NEG_INT.cpp

1 
HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2 
	gOP_END


	@vm/mterp/c/OP_NEG_LONG.cpp

1 
HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_NEW_ARRAY.cpp

1 
	$HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

3 
CÏssObjeù
* 
¬¿yCÏss
;

4 
A¼ayObjeù
* 
ÃwA¼ay
;

5 
s4
 
Ëngth
;

7 
	`EXPORT_PC
();

9 
vd¡
 = 
	`INST_A
(
š¡
);

10 
v¤c1
 = 
	`INST_B
(
š¡
);

11 
»f
 = 
	`FETCH
(1);

12 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

13 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

14 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

15 ià(
Ëngth
 < 0) {

16 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
Ëngth
);

17 
	`GOTO_exû±iÚThrown
();

19 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

20 ià(
¬¿yCÏss
 =ğ
NULL
) {

21 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

22 ià(
¬¿yCÏss
 =ğ
NULL
)

23 
	`GOTO_exû±iÚThrown
();

26 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

27 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

29 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

30 ià(
ÃwA¼ay
 =ğ
NULL
)

31 
	`GOTO_exû±iÚThrown
();

32 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

33 
	}
}

34 
FINISH
(2);

35 
	gOP_END


	@vm/mterp/c/OP_NEW_INSTANCE.cpp

1 
	$HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
ÃwObj
;

6 
	`EXPORT_PC
();

8 
vd¡
 = 
	`INST_AA
(
š¡
);

9 
»f
 = 
	`FETCH
(1);

10 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

11 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

12 ià(
şazz
 =ğ
NULL
) {

13 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

14 ià(
şazz
 =ğ
NULL
)

15 
	`GOTO_exû±iÚThrown
();

18 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

19 
	`GOTO_exû±iÚThrown
();

21 #ià
	`defšed
(
WITH_JIT
)

27 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

28 (!
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
))) {

30 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

42 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

43 ià(
ÃwObj
 =ğ
NULL
)

44 
	`GOTO_exû±iÚThrown
();

45 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

46 
	}
}

47 
FINISH
(2);

48 
	gOP_END


	@vm/mterp/c/OP_NOP.cpp

1 
	$HANDLE_OPCODE
(
OP_NOP
)

2 
	`FINISH
(1);

3 
OP_END


	@vm/mterp/c/OP_NOT_INT.cpp

1 
HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2 
	gOP_END


	@vm/mterp/c/OP_NOT_LONG.cpp

1 
HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_OR_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_OR_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_OR_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_OR_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_OR_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_OR_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

2 
	gOP_END


	@vm/mterp/c/OP_PACKED_SWITCH.cpp

1 
	$HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

3 cÚ¡ 
u2
* 
sw™chD©a
;

4 
u4
 
‹¡V®
;

5 
s4
 
off£t
;

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

9 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

10 
sw™chD©a
 = 
pc
 + 
off£t
;

11 #iâdeà
NDEBUG


12 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

13 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

16 
	`EXPORT_PC
();

17 
	`dvmThrowIÁ”ÇlE¼Ü
("bad…acked switch");

18 
	`GOTO_exû±iÚThrown
();

21 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

23 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

24 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

25 ià(
off£t
 <= 0)

26 
	`PERIODIC_CHECKS
(
off£t
);

27 
	`FINISH
(
off£t
);

28 
	}
}

29 
	gOP_END


	@vm/mterp/c/OP_REM_DOUBLE.cpp

1 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

3 
u2
 
¤cRegs
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
¤cRegs
 = 
	`FETCH
(1);

6 
v¤c1
 = 
¤cRegs
 & 0xff;

7 
v¤c2
 = 
¤cRegs
 >> 8;

8 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER_DOUBLE
(
vd¡
,

10 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

11 
	}
}

12 
FINISH
(2);

13 
	gOP_END


	@vm/mterp/c/OP_REM_DOUBLE_2ADDR.cpp

1 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_DOUBLE
(
vd¡
,

6 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

7 
	`FINISH
(1);

8 
OP_END


	@vm/mterp/c/OP_REM_FLOAT.cpp

1 
	$HANDLE_OPCODE
(
OP_REM_FLOAT
 )

3 
u2
 
¤cRegs
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
¤cRegs
 = 
	`FETCH
(1);

6 
v¤c1
 = 
¤cRegs
 & 0xff;

7 
v¤c2
 = 
¤cRegs
 >> 8;

8 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER_FLOAT
(
vd¡
,

10 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

11 
	}
}

12 
FINISH
(2);

13 
	gOP_END


	@vm/mterp/c/OP_REM_FLOAT_2ADDR.cpp

1 
	$HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_FLOAT
(
vd¡
,

6 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

7 
	`FINISH
(1);

8 
OP_END


	@vm/mterp/c/OP_REM_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_REM_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_REM_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_REM_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_REM_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_REM_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

2 
	gOP_END


	@vm/mterp/c/OP_RETURN.cpp

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
v¤c1
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|return%s v%d",

4 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

5 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

6 
	`GOTO_»tuºFromM‘hod
();

7 
OP_END


	@vm/mterp/c/OP_RETURN_OBJECT.cpp

1 %
	gšşude
 "c/OP_RETURN.cpp"

	@vm/mterp/c/OP_RETURN_VOID.cpp

1 
	$HANDLE_OPCODE
(
OP_RETURN_VOID
 )

2 
	`ILOGV
("|return-void");

3 #iâdeà
NDEBUG


4 
»tv®
.
j
 = 0xababababULL;

6 
	`GOTO_»tuºFromM‘hod
();

7 
OP_END


	@vm/mterp/c/OP_RETURN_VOID_BARRIER.cpp

1 
	$HANDLE_OPCODE
(
OP_RETURN_VOID_BARRIER
 )

2 
	`ILOGV
("|return-void");

3 #iâdeà
NDEBUG


4 
»tv®
.
j
 = 0xababababULL;

6 
	`ANDROID_MEMBAR_STORE
();

7 
	`GOTO_»tuºFromM‘hod
();

8 
OP_END


	@vm/mterp/c/OP_RETURN_WIDE.cpp

1 
	$HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

2 
v¤c1
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

4 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

5 
	`GOTO_»tuºFromM‘hod
();

6 
OP_END


	@vm/mterp/c/OP_RSUB_INT.cpp

1 
	$HANDLE_OPCODE
(
OP_RSUB_INT
 )

3 
vd¡
 = 
	`INST_A
(
š¡
);

4 
v¤c1
 = 
	`INST_B
(
š¡
);

5 
v¤c2
 = 
	`FETCH
(1);

6 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

7 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

8 
	}
}

9 
FINISH
(2);

10 
	gOP_END


	@vm/mterp/c/OP_RSUB_INT_LIT8.cpp

1 
	$HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

3 
u2
 
l™Info
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
l™Info
 = 
	`FETCH
(1);

6 
v¤c1
 = 
l™Info
 & 0xff;

7 
v¤c2
 = 
l™Info
 >> 8;

8 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

10 
	}
}

11 
FINISH
(2);

12 
	gOP_END


	@vm/mterp/c/OP_SGET.cpp

1 
HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_BOOLEAN.cpp

1 
HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_BYTE.cpp

1 
HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_CHAR.cpp

1 
HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_OBJECT.cpp

1 
HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_SGET_OBJECT_VOLATILE.cpp

1 
HANDLE_SGET_X
(
OP_SGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_SGET_SHORT.cpp

1 
HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_VOLATILE.cpp

1 
HANDLE_SGET_X
(
OP_SGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2 
	gOP_END


	@vm/mterp/c/OP_SGET_WIDE.cpp

1 
HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_SGET_WIDE_VOLATILE.cpp

1 
HANDLE_SGET_X
(
OP_SGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_SHL_INT.cpp

1 
HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2 
	gOP_END


	@vm/mterp/c/OP_SHL_INT_2ADDR.cpp

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

2 
	gOP_END


	@vm/mterp/c/OP_SHL_INT_LIT8.cpp

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

2 
	gOP_END


	@vm/mterp/c/OP_SHL_LONG.cpp

1 
HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2 
	gOP_END


	@vm/mterp/c/OP_SHL_LONG_2ADDR.cpp

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

2 
	gOP_END


	@vm/mterp/c/OP_SHR_INT.cpp

1 
HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_SHR_INT_2ADDR.cpp

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_SHR_INT_LIT8.cpp

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_SHR_LONG.cpp

1 
HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_SHR_LONG_2ADDR.cpp

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_SPARSE_SWITCH.cpp

1 
	$HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

3 cÚ¡ 
u2
* 
sw™chD©a
;

4 
u4
 
‹¡V®
;

5 
s4
 
off£t
;

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

9 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

10 
sw™chD©a
 = 
pc
 + 
off£t
;

11 #iâdeà
NDEBUG


12 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

13 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

16 
	`EXPORT_PC
();

17 
	`dvmThrowIÁ”ÇlE¼Ü
("bad sparse switch");

18 
	`GOTO_exû±iÚThrown
();

21 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

23 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

24 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

25 ià(
off£t
 <= 0)

26 
	`PERIODIC_CHECKS
(
off£t
);

27 
	`FINISH
(
off£t
);

28 
	}
}

29 
	gOP_END


	@vm/mterp/c/OP_SPUT.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_BOOLEAN.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_BYTE.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_CHAR.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_OBJECT.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_OBJECT_VOLATILE.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_SHORT.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_VOLATILE.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_WIDE.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_SPUT_WIDE_VOLATILE.cpp

1 
HANDLE_SPUT_X
(
OP_SPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_DOUBLE.cpp

1 
HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_DOUBLE_2ADDR.cpp

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_FLOAT.cpp

1 
HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_FLOAT_2ADDR.cpp

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2 
	gOP_END


	@vm/mterp/c/OP_SUB_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

2 
	gOP_END


	@vm/mterp/c/OP_THROW.cpp

1 
	$HANDLE_OPCODE
(
OP_THROW
 )

3 
Objeù
* 
obj
;

10 
	`EXPORT_PC
();

12 
v¤c1
 = 
	`INST_AA
(
š¡
);

13 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

14 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

15 ià(!
	`checkFÜNuÎ
(
obj
)) {

17 
	`LOGVV
("Badƒxception");

20 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

22 
	`GOTO_exû±iÚThrown
();

23 
	}
}

24 
	gOP_END


	@vm/mterp/c/OP_THROW_VERIFICATION_ERROR.cpp

1 
	$HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

2 
	`EXPORT_PC
();

3 
v¤c1
 = 
	`INST_AA
(
š¡
);

4 
»f
 = 
	`FETCH
(1);

5 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

6 
	`GOTO_exû±iÚThrown
();

7 
OP_END


	@vm/mterp/c/OP_UNUSED_3E.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_3E
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_3F.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_3F
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_40.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_40
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_41.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_41
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_42.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_42
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_43.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_43
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_73.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_73
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_79.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_79
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_7A.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_7A
)

2 
OP_END


	@vm/mterp/c/OP_UNUSED_FF.cpp

1 
	$HANDLE_OPCODE
(
OP_UNUSED_FF
)

5 
	`ALOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

6 
	`dvmAbÜt
();

7 
	`FINISH
(1);

8 
OP_END


	@vm/mterp/c/OP_USHR_INT.cpp

1 
HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_USHR_INT_2ADDR.cpp

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_USHR_INT_LIT8.cpp

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_USHR_LONG.cpp

1 
HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_USHR_LONG_2ADDR.cpp

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_INT.cpp

1 
HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_INT_2ADDR.cpp

1 
HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_INT_LIT16.cpp

1 
HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_INT_LIT8.cpp

1 
HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_LONG.cpp

1 
HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/OP_XOR_LONG_2ADDR.cpp

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

2 
	gOP_END


	@vm/mterp/c/gotoTargets.cpp

11 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
, bool)

13 
CÏssObjeù
* 
¬¿yCÏss
;

14 
A¼ayObjeù
* 
ÃwA¼ay
;

15 
u4
* 
cÚ‹Ás
;

16 
ty³Ch
;

17 
i
;

18 
u4
 
¬g5
;

20 
	`EXPORT_PC
();

22 
»f
 = 
	`FETCH
(1);

23 
vd¡
 = 
	`FETCH
(2);

25 ià(
m‘hodC®lRªge
) {

26 
v¤c1
 = 
	`INST_AA
(
š¡
);

27 
¬g5
 = -1;

28 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

29 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

31 
¬g5
 = 
	`INST_A
(
š¡
);

32 
v¤c1
 = 
	`INST_B
(
š¡
);

33 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

34 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

40 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

41 ià(
¬¿yCÏss
 =ğ
NULL
) {

42 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

43 ià(
¬¿yCÏss
 =ğ
NULL
)

44 
	`GOTO_exû±iÚThrown
();

54 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

55 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

60 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'", 
¬¿yCÏss
->
desütÜ
);

61 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

62 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

64 
	`dvmThrowRuÁimeExû±iÚ
("bad filled‡rray„eq");

65 
	`GOTO_exû±iÚThrown
();

66 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

68 
	`ALOGE
("non-int…rimitives‚ot implemented");

69 
	`dvmThrowIÁ”ÇlE¼Ü
(

71 
	`GOTO_exû±iÚThrown
();

74 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

75 ià(
ÃwA¼ay
 =ğ
NULL
)

76 
	`GOTO_exû±iÚThrown
();

81 
cÚ‹Ás
 = (
u4
*)(*)
ÃwA¼ay
->contents;

82 ià(
m‘hodC®lRªge
) {

83 
i
 = 0; i < 
v¤c1
; i++)

84 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

86 
	`as£¹
(
v¤c1
 <= 5);

87 ià(
v¤c1
 == 5) {

88 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

89 
v¤c1
--;

91 
i
 = 0; i < 
v¤c1
; i++) {

92 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

93 
vd¡
 >>= 4;

96 ià(
ty³Ch
 == 'L' ||ypeCh == '[') {

97 
	`dvmWr™eB¬r›rA¼ay
(
ÃwA¼ay
, 0,‚ewA¼ay->
Ëngth
);

100 
»tv®
.
l
 = (
Objeù
*)
ÃwA¼ay
;

101 
	}
}

102 
FINISH
(3);

103 
GOTO_TARGET_END


106 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
, bool)

108 
M‘hod
* 
ba£M‘hod
;

109 
Objeù
* 
thisPŒ
;

111 
	`EXPORT_PC
();

113 
v¤c1
 = 
	`INST_AA
(
š¡
);

114 
»f
 = 
	`FETCH
(1);

115 
vd¡
 = 
	`FETCH
(2);

121 ià(
m‘hodC®lRªge
) {

122 
	`as£¹
(
v¤c1
 > 0);

123 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

124 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

125 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

127 
	`as£¹
((
v¤c1
>>4) > 0);

128 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

129 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

130 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

133 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

134 
	`GOTO_exû±iÚThrown
();

140 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

141 ià(
ba£M‘hod
 =ğ
NULL
) {

142 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

143 ià(
ba£M‘hod
 =ğ
NULL
) {

144 
	`ILOGV
("+ unknown method or‡ccess denied");

145 
	`GOTO_exû±iÚThrown
();

153 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

154 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

156 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

157 
£lf
->
m‘hodToC®l
 = methodToCall;

158 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

162 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

172 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

173 
	`GOTO_exû±iÚThrown
();

176 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

177 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

180 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s",

181 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

182 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

183 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

184 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

187 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

188 
	`ALOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s",

189 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

190 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

191 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

194 
	`dvmDumpAÎCÏs£s
(0);

198 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

199 
	}
}

200 
GOTO_TARGET_END


202 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

204 
M‘hod
* 
ba£M‘hod
;

205 
u2
 
thisReg
;

207 
	`EXPORT_PC
();

209 
v¤c1
 = 
	`INST_AA
(
š¡
);

210 
»f
 = 
	`FETCH
(1);

211 
vd¡
 = 
	`FETCH
(2);

213 ià(
m‘hodC®lRªge
) {

214 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

215 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

216 
thisReg
 = 
vd¡
;

218 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

219 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

220 
thisReg
 = 
vd¡
 & 0x0f;

224 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

225 
	`GOTO_exû±iÚThrown
();

234 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

235 ià(
ba£M‘hod
 =ğ
NULL
) {

236 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

237 ià(
ba£M‘hod
 =ğ
NULL
) {

238 
	`ILOGV
("+ unknown method or‡ccess denied");

239 
	`GOTO_exû±iÚThrown
();

252 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

257 
	`dvmThrowNoSuchM‘hodE¼Ü
(
ba£M‘hod
->
Çme
);

258 
	`GOTO_exû±iÚThrown
();

260 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

263 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

264 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

265 
	`GOTO_exû±iÚThrown
();

268 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

269 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

271 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s",

272 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

273 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

274 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

276 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

277 
	}
}

278 
GOTO_TARGET_END


280 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

282 
Objeù
* 
thisPŒ
;

283 
CÏssObjeù
* 
thisCÏss
;

285 
	`EXPORT_PC
();

287 
v¤c1
 = 
	`INST_AA
(
š¡
);

288 
»f
 = 
	`FETCH
(1);

289 
vd¡
 = 
	`FETCH
(2);

295 ià(
m‘hodC®lRªge
) {

296 
	`as£¹
(
v¤c1
 > 0);

297 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

298 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

299 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

301 
	`as£¹
((
v¤c1
>>4) > 0);

302 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

303 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

304 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

307 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

308 
	`GOTO_exû±iÚThrown
();

310 
thisCÏss
 = 
thisPŒ
->
şazz
;

316 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

317 
m‘hodCÏssDex
);

318 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

319 
£lf
->
ÿÎs™eCÏss
 = 
thisCÏss
;

320 
£lf
->
m‘hodToC®l
 = methodToCall;

322 ià(
m‘hodToC®l
 =ğ
NULL
) {

323 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

324 
	`GOTO_exû±iÚThrown
();

327 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

328 
	}
}

329 
GOTO_TARGET_END


331 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

333 
u2
 
thisReg
;

335 
	`EXPORT_PC
();

337 
v¤c1
 = 
	`INST_AA
(
š¡
);

338 
»f
 = 
	`FETCH
(1);

339 
vd¡
 = 
	`FETCH
(2);

341 ià(
m‘hodC®lRªge
) {

342 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

343 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

344 
thisReg
 = 
vd¡
;

346 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

347 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

348 
thisReg
 = 
vd¡
 & 0x0f;

351 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

352 
	`GOTO_exû±iÚThrown
();

354 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

355 ià(
m‘hodToC®l
 =ğ
NULL
) {

356 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

357 
METHOD_DIRECT
);

358 ià(
m‘hodToC®l
 =ğ
NULL
) {

359 
	`ILOGV
("+ unknown direct method");

360 
	`GOTO_exû±iÚThrown
();

363 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

364 
	}
}

365 
GOTO_TARGET_END


367 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

368 
	`EXPORT_PC
();

370 
v¤c1
 = 
	`INST_AA
(
š¡
);

371 
»f
 = 
	`FETCH
(1);

372 
vd¡
 = 
	`FETCH
(2);

374 ià(
m‘hodC®lRªge
)

375 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

376 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

378 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

379 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

381 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

382 ià(
m‘hodToC®l
 =ğ
NULL
) {

383 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

384 ià(
m‘hodToC®l
 =ğ
NULL
) {

385 
	`ILOGV
("+ unknown method");

386 
	`GOTO_exû±iÚThrown
();

389 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

395 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

396 (
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
)) {

398 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

401 
	}
}

402 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

403 
GOTO_TARGET_END


405 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

407 
Objeù
* 
thisPŒ
;

409 
	`EXPORT_PC
();

411 
v¤c1
 = 
	`INST_AA
(
š¡
);

412 
»f
 = 
	`FETCH
(1);

413 
vd¡
 = 
	`FETCH
(2);

419 ià(
m‘hodC®lRªge
) {

420 
	`as£¹
(
v¤c1
 > 0);

421 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

422 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

423 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

425 
	`as£¹
((
v¤c1
>>4) > 0);

426 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

427 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

428 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

431 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

432 
	`GOTO_exû±iÚThrown
();

439 
	`as£¹
(
»f
 < (è
thisPŒ
->
şazz
->
vbËCouÁ
);

440 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

441 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

442 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

443 
£lf
->
m‘hodToC®l
 = methodToCall;

447 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

448 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

449 
	`GOTO_exû±iÚThrown
();

452 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

453 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

456 
	`LOGVV
("+++ virtual[%d]=%s.%s",

457 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

458 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

460 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

461 
	}
}

462 
GOTO_TARGET_END


464 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

466 
u2
 
thisReg
;

468 
	`EXPORT_PC
();

470 
v¤c1
 = 
	`INST_AA
(
š¡
);

471 
»f
 = 
	`FETCH
(1);

472 
vd¡
 = 
	`FETCH
(2);

474 ià(
m‘hodC®lRªge
) {

475 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

476 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

477 
thisReg
 = 
vd¡
;

479 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

480 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

481 
thisReg
 = 
vd¡
 & 0x0f;

484 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

485 
	`GOTO_exû±iÚThrown
();

488 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

489 
	`dvmThrowNoSuchM‘hodE¼Ü
(
NULL
);

490 
	`GOTO_exû±iÚThrown
();

493 
	`as£¹
(
»f
 < (è
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

505 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

508 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

509 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

510 
	`GOTO_exû±iÚThrown
();

513 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

514 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

516 
	`LOGVV
("+++ super-virtual[%d]=%s.%s",

517 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

518 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

519 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

520 
	}
}

521 
GOTO_TARGET_END


528 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

530 
SckSaveA»a
* 
§veA»a
;

539 
	`PERIODIC_CHECKS
(0);

541 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

542 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

543 
curM‘hod
->
shÜty
);

546 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

548 #ifdeà
EASY_GDB


549 
debugSaveA»a
 = 
§veA»a
;

553 
å
 = (
u4
*)
§veA»a
->
´evF¿me
;

554 
	`as£¹
(
å
 !ğ
NULL
);

557 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

558 
	`PC_FP_TO_SELF
();

559 
	`dvmR•ÜtR‘uº
(
£lf
);

562 ià(
	`dvmIsB»akF¿me
(
å
)) {

564 
	`LOGVV
("+++„eturned into break frame");

565 
	`GOTO_ba
();

569 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

570 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

571 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

573 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

574 
pc
 = 
§veA»a
->
§vedPc
;

575 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

576 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

580 ià(
Œue


583 
	`FINISH
(3);

587 
	`as£¹
(
çl£
);

589 
	}
}

590 
GOTO_TARGET_END


599 
	$GOTO_TARGET
(
exû±iÚThrown
)

601 
Objeù
* 
exû±iÚ
;

602 
ÿtchR–Pc
;

604 
	`PERIODIC_CHECKS
(0);

612 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

613 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

614 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

615 
	`dvmCË¬Exû±iÚ
(
£lf
);

617 
	`ALOGV
("Handlingƒxception %s‡t %s:%d",

618 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

619 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

635 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

636 
	`PC_FP_TO_SELF
();

637 
	`dvmR•ÜtExû±iÚThrow
(
£lf
, 
exû±iÚ
);

655 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

656 
exû±iÚ
, 
çl£
, (**)(*)&
å
);

679 ià(
£lf
->
¡ackOv”æowed
)

680 
	`dvmCËªupSckOv”æow
(
£lf
, 
exû±iÚ
);

682 ià(
ÿtchR–Pc
 < 0) {

684 #ià
DVM_SHOW_EXCEPTION
 >= 2

685 
	`ALOGD
("Exception %s from %s:%d‚ot caught†ocally",

686 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

687 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

689 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

690 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

691 
	`GOTO_ba
();

694 #ià
DVM_SHOW_EXCEPTION
 >= 3

696 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

697 
	`ALOGD
("Exception %shrown from %s:%do %s:%d",

698 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

699 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

700 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

701 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

710 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

711 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

713 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

714 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

715 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

716 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

717 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

731 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

732 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

734 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

735 
	`FINISH
(0);

736 
	}
}

737 
GOTO_TARGET_END


758 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

759 
u2
 
couÁ
, u2 
»gs
)

761 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

768 
u4
* 
outs
;

769 
i
;

774 ià(
m‘hodC®lRªge
) {

777 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

778 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

779 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

780 
i
 = 0; i < 
v¤c1
; i++)

781 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

783 
u4
 
couÁ
 = 
v¤c1
 >> 4;

785 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

786 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

787 
	`as£¹
(
couÁ
 <= 5);

789 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

791 ià(
couÁ
 == 5) {

792 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

793 
couÁ
--;

795 
i
 = 0; i < (è
couÁ
; i++) {

796 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

797 
vd¡
 >>= 4;

802 
	`as£¹
((
vd¡
 >> 16) == 0);

803 
couÁ
) {

805 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

807 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

809 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

811 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

813 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

819 
	}
}

830 
SckSaveA»a
* 
	gÃwSaveA»a
;

831 
u4
* 
	gÃwFp
;

833 
ILOGV
("> %s%s.%s %s",

834 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

835 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

836 
m‘hodToC®l
->
shÜty
);

838 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

839 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

842 ià(
	gŒue
) {

843 
u1
* 
	gbÙtom
;

844 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

845 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

847 
ALOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p(%d) size=%d '%s')",

848 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

849 (
u1
*è
å
 - 
bÙtom
, 
£lf
->
š‹½SckSize
,

850 
m‘hodToC®l
->
Çme
);

851 
dvmHªdËSckOv”æow
(
£lf
, 
m‘hodToC®l
);

852 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

853 
GOTO_exû±iÚThrown
();

859 #ifdeà
LOG_INSTR


860 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

867 
mem£t
(
ÃwFp
, 0xcc,

868 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

872 #ifdeà
EASY_GDB


873 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

875 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

876 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

877 #ià
defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

878 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

880 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

882 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

888 
PC_TO_SELF
();

889 
dvmR•ÜtInvoke
(
£lf
, 
m‘hodToC®l
);

892 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

897 
	gcurM‘hod
 = 
m‘hodToC®l
;

898 
	g£lf
->
	gš‹½Save
.
	gm‘hod
 = 
curM‘hod
;

899 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

900 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

901 
	gå
 = 
ÃwFp
;

902 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

903 #ifdeà
EASY_GDB


904 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

906 
	g£lf
->
	gdebugIsM‘hodEÁry
 = 
Œue
;

907 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

908 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

909 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

910 
FINISH
(0);

913 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

915 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
ÃwFp
;

917 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

919 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

920 
dvmR•ÜtP»N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

923 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

924 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

931 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

933 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

934 
dvmR•ÜtPo¡N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

938 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

939 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

946 ià(
dvmCheckExû±iÚ
(
£lf
)) {

947 
ALOGV
("Exceptionhrown by/below‚ative code");

948 
GOTO_exû±iÚThrown
();

951 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

952 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

953 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

954 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

955 
curM‘hod
->
shÜty
);

958 ià(
	gŒue


961 
FINISH
(3);

965 
as£¹
(
çl£
);

969 
as£¹
(
çl£
);

970 
	gGOTO_TARGET_END


	@vm/mterp/c/header.cpp

18 
	~"D®vik.h
"

19 
	~"š‹½/IÁ”pDefs.h
"

20 
	~"m‹½/M‹½.h
"

21 
	~<m©h.h
>

22 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

35 #ifdeà
WITH_INSTR_CHECKS


36 
	#CHECK_BRANCH_OFFSETS


	)

37 
	#CHECK_REGISTER_INDICES


	)

61 #ià
defšed
(
__ARM_EABI__
)

62 
	#NO_UNALIGN_64__UNION


	)

75 #ià
WITH_EXTRA_GC_CHECKS
 > 1

76 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

78 
	#EXPORT_EXTRA_PC
()

	)

90 #ifdeà
CHECK_BRANCH_OFFSETS


91 
	#ADJUST_PC
(
_off£t
) do { \

92 
myoff
 = 
_off£t
; \

93 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

94 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

96 * 
desc
; \

97 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

98 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

99 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

100 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

101 
	`ä“
(
desc
); \

102 
	`dvmAbÜt
(); \

104 
pc
 +ğ
myoff
; \

105 
	`EXPORT_EXTRA_PC
(); \

106 } 
çl£
)

	)

108 
	#ADJUST_PC
(
_off£t
) do { \

109 
pc
 +ğ
_off£t
; \

110 
	`EXPORT_EXTRA_PC
(); \

111 } 
çl£
)

	)

117 #ifdeà
LOG_INSTR


118 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

119 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

120 
	#ILOG
(
_Ëv–
, ...) do { \

121 
debugSŒBuf
[128]; \

122 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

123 ià(
curM‘hod
 !ğ
NULL
) \

124 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

125 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

127 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

128 
£lf
->
th»adId
, 
debugSŒBuf
); \

129 } 
çl£
)

	)

130 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

131 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

132 cÚ¡ 
	gkS·cšg
[] = " ";

134 
	#ILOGD
(...è(()0)

	)

135 
	#ILOGV
(...è(()0)

	)

136 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

140 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

142 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

143 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

145 
±r
 +ğ
idx
;

146 
cÚv
.
·¹s
[0] = 
±r
[0];

147 
cÚv
.
·¹s
[1] = 
±r
[1];

148  
cÚv
.
Î
;

150 
s8
 
v®
;

151 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

152  
v®
;

154 
	}
}

157 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

159 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

160 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

162 
±r
 +ğ
idx
;

163 
cÚv
.
Î
 = 
v®
;

164 
±r
[0] = 
cÚv
.
·¹s
[0];

165 
±r
[1] = 
cÚv
.
·¹s
[1];

167 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

169 
	}
}

172 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

174 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

175 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

177 
±r
 +ğ
idx
;

178 
cÚv
.
·¹s
[0] = 
±r
[0];

179 
cÚv
.
·¹s
[1] = 
±r
[1];

180  
cÚv
.
d
;

182 
dv®
;

183 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

184  
dv®
;

186 
	}
}

189 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

191 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

192 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

194 
±r
 +ğ
idx
;

195 
cÚv
.
d
 = 
dv®
;

196 
±r
[0] = 
cÚv
.
·¹s
[0];

197 
±r
[1] = 
cÚv
.
·¹s
[1];

199 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

201 
	}
}

211 #ifdeà
CHECK_REGISTER_INDICES


212 
	#GET_REGISTER
(
_idx
) \

213 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

214 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

215 
	#SET_REGISTER
(
_idx
, 
_v®
) \

216 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

217 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

218 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

219 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

220 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

221 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

222 
	#GET_REGISTER_WIDE
(
_idx
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

224 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

226 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

227 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

228 
	#GET_REGISTER_FLOAT
(
_idx
) \

229 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

230 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

231 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

232 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

233 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

234 
	#GET_REGISTER_DOUBLE
(
_idx
) \

235 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

236 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

237 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

238 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

239 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

241 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

242 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

243 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

244 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

245 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

246 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

247 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

248 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

249 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

250 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

251 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

252 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

262 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

267 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

272 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

277 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

278 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

284 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

297 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

309 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

311 ià(
obj
 =ğ
NULL
) {

312 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

313  
çl£
;

315 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


316 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

317 
	`ALOGE
("Inv®id objeù %p", 
obj
);

318 
	`dvmAbÜt
();

321 #iâdeà
NDEBUG


322 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

324 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

325 
	`dvmAbÜt
();

328  
Œue
;

329 
	}
}

340 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

342 ià(
obj
 =ğ
NULL
) {

343 
	`EXPORT_PC
();

344 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

345  
çl£
;

347 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


348 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

349 
	`ALOGE
("Inv®id objeù %p", 
obj
);

350 
	`dvmAbÜt
();

353 #iâdeà
NDEBUG


354 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

356 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

357 
	`dvmAbÜt
();

360  
Œue
;

361 
	}
}

	@vm/mterp/c/opcommon.cpp

2 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

3 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

4 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

5 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

6 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

7 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

8 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

9 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

10 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

11 
u2
 
couÁ
, u2 
»gs
);

12 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

13 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

27 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

28 
	`HANDLE_OPCODE
(
_İcode
 ) \

29 
vd¡
 = 
	`INST_A
(
š¡
); \

30 
v¤c1
 = 
	`INST_B
(
š¡
); \

31 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

32 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

33 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

34 
	`FINISH
(1);

	)

36 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

37 
_tovty³
, 
_tÜty³
) \

38 
	`HANDLE_OPCODE
(
_İcode
 ) \

41 
_äomvty³
 
v®
; \

42 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

43 
vd¡
 = 
	`INST_A
(
š¡
); \

44 
v¤c1
 = 
	`INST_B
(
š¡
); \

45 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

46 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

47 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

48 
štMax
 = ~
štMš
; \

49 
»suÉ
 = (
_tovty³
è
v®
; \

50 ià(
v®
 >ğ
štMax
) \

51 
»suÉ
 = 
štMax
; \

52 ià(
v®
 <ğ
štMš
) \

53 
»suÉ
 = 
štMš
; \

54 ià(
v®
 != val) \

55 
»suÉ
 = 0; \

57 
»suÉ
 = (
_tovty³
è
v®
; \

58 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

60 
	`FINISH
(1);

	)

62 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

63 
	`HANDLE_OPCODE
(
_İcode
 ) \

64 
vd¡
 = 
	`INST_A
(
š¡
); \

65 
v¤c1
 = 
	`INST_B
(
š¡
); \

66 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

67 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

68 
	`FINISH
(1);

	)

71 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

72 
	`HANDLE_OPCODE
(
_İcode
 ) \

74 
»suÉ
; \

75 
u2
 
»gs
; \

76 
_v¬Ty³
 
v®1
, 
v®2
; \

77 
vd¡
 = 
	`INST_AA
(
š¡
); \

78 
»gs
 = 
	`FETCH
(1); \

79 
v¤c1
 = 
»gs
 & 0xff; \

80 
v¤c2
 = 
»gs
 >> 8; \

81 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

82 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

83 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

84 ià(
v®1
 =ğ
v®2
) \

85 
»suÉ
 = 0; \

86 ià(
v®1
 < 
v®2
) \

87 
»suÉ
 = -1; \

88 ià(
v®1
 > 
v®2
) \

89 
»suÉ
 = 1; \

91 
»suÉ
 = (
_ÇnV®
); \

92 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

93 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

95 
	`FINISH
(2);

	)

97 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

98 
	`HANDLE_OPCODE
(
_İcode
 ) \

99 
v¤c1
 = 
	`INST_A
(
š¡
); \

100 
v¤c2
 = 
	`INST_B
(
š¡
); \

101 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

102 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

103 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

104 
b¿nchOff£t
); \

105 
	`ILOGV
("> branchaken"); \

106 ià(
b¿nchOff£t
 < 0) \

107 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

108 
	`FINISH
(
b¿nchOff£t
); \

110 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

111 
	`FINISH
(2); \

112 }

	)

114 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

115 
	`HANDLE_OPCODE
(
_İcode
 ) \

116 
v¤c1
 = 
	`INST_AA
(
š¡
); \

117 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

118 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

119 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

120 
	`ILOGV
("> branchaken"); \

121 ià(
b¿nchOff£t
 < 0) \

122 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

123 
	`FINISH
(
b¿nchOff£t
); \

125 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

126 
	`FINISH
(2); \

127 }

	)

129 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

130 
	`HANDLE_OPCODE
(
_İcode
 ) \

131 
vd¡
 = 
	`INST_A
(
š¡
); \

132 
v¤c1
 = 
	`INST_B
(
š¡
); \

133 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

134 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

135 
	`FINISH
(1);

	)

137 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

138 
	`HANDLE_OPCODE
(
_İcode
 ) \

140 
u2
 
¤cRegs
; \

141 
vd¡
 = 
	`INST_AA
(
š¡
); \

142 
¤cRegs
 = 
	`FETCH
(1); \

143 
v¤c1
 = 
¤cRegs
 & 0xff; \

144 
v¤c2
 = 
¤cRegs
 >> 8; \

145 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

146 ià(
_chkdiv
 != 0) { \

147 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

148 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

149 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

150 ià(
£cÚdV®
 == 0) { \

151 
	`EXPORT_PC
(); \

152 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

153 
	`GOTO_exû±iÚThrown
(); \

155 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

156 ià(
_chkdiv
 == 1) \

157 
»suÉ
 = 
fœ¡V®
; \

159 
»suÉ
 = 0; \

161 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

163 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

166 
	`SET_REGISTER
(
vd¡
, \

167 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

170 
	`FINISH
(2);

	)

172 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

173 
	`HANDLE_OPCODE
(
_İcode
 ) \

175 
u2
 
¤cRegs
; \

176 
vd¡
 = 
	`INST_AA
(
š¡
); \

177 
¤cRegs
 = 
	`FETCH
(1); \

178 
v¤c1
 = 
¤cRegs
 & 0xff; \

179 
v¤c2
 = 
¤cRegs
 >> 8; \

180 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

181 
	`SET_REGISTER
(
vd¡
, \

182 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

184 
	`FINISH
(2);

	)

186 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

187 
	`HANDLE_OPCODE
(
_İcode
 ) \

188 
vd¡
 = 
	`INST_A
(
š¡
); \

189 
v¤c1
 = 
	`INST_B
(
š¡
); \

190 
v¤c2
 = 
	`FETCH
(1); \

191 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

192 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

193 ià(
_chkdiv
 != 0) { \

194 
s4
 
fœ¡V®
, 
»suÉ
; \

195 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

196 ià((
s2
è
v¤c2
 == 0) { \

197 
	`EXPORT_PC
(); \

198 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

199 
	`GOTO_exû±iÚThrown
(); \

201 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

203 ià(
_chkdiv
 == 1) \

204 
»suÉ
 = 
fœ¡V®
; \

206 
»suÉ
 = 0; \

208 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

210 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

213 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

215 
	`FINISH
(2);

	)

217 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

218 
	`HANDLE_OPCODE
(
_İcode
 ) \

220 
u2
 
l™Info
; \

221 
vd¡
 = 
	`INST_AA
(
š¡
); \

222 
l™Info
 = 
	`FETCH
(1); \

223 
v¤c1
 = 
l™Info
 & 0xff; \

224 
v¤c2
 = 
l™Info
 >> 8; \

225 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

226 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

227 ià(
_chkdiv
 != 0) { \

228 
s4
 
fœ¡V®
, 
»suÉ
; \

229 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

230 ià((
s1
è
v¤c2
 == 0) { \

231 
	`EXPORT_PC
(); \

232 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

233 
	`GOTO_exû±iÚThrown
(); \

235 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

236 ià(
_chkdiv
 == 1) \

237 
»suÉ
 = 
fœ¡V®
; \

239 
»suÉ
 = 0; \

241 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

243 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

245 
	`SET_REGISTER
(
vd¡
, \

246 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

249 
	`FINISH
(2);

	)

251 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

252 
	`HANDLE_OPCODE
(
_İcode
 ) \

254 
u2
 
l™Info
; \

255 
vd¡
 = 
	`INST_AA
(
š¡
); \

256 
l™Info
 = 
	`FETCH
(1); \

257 
v¤c1
 = 
l™Info
 & 0xff; \

258 
v¤c2
 = 
l™Info
 >> 8; \

259 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

260 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

261 
	`SET_REGISTER
(
vd¡
, \

262 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

264 
	`FINISH
(2);

	)

266 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

267 
	`HANDLE_OPCODE
(
_İcode
 ) \

268 
vd¡
 = 
	`INST_A
(
š¡
); \

269 
v¤c1
 = 
	`INST_B
(
š¡
); \

270 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

271 ià(
_chkdiv
 != 0) { \

272 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

273 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

274 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

275 ià(
£cÚdV®
 == 0) { \

276 
	`EXPORT_PC
(); \

277 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

278 
	`GOTO_exû±iÚThrown
(); \

280 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

281 ià(
_chkdiv
 == 1) \

282 
»suÉ
 = 
fœ¡V®
; \

284 
»suÉ
 = 0; \

286 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

288 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

290 
	`SET_REGISTER
(
vd¡
, \

291 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

293 
	`FINISH
(1);

	)

295 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

296 
	`HANDLE_OPCODE
(
_İcode
 ) \

297 
vd¡
 = 
	`INST_A
(
š¡
); \

298 
v¤c1
 = 
	`INST_B
(
š¡
); \

299 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

300 
	`SET_REGISTER
(
vd¡
, \

301 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

302 
	`FINISH
(1);

	)

304 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

305 
	`HANDLE_OPCODE
(
_İcode
 ) \

307 
u2
 
¤cRegs
; \

308 
vd¡
 = 
	`INST_AA
(
š¡
); \

309 
¤cRegs
 = 
	`FETCH
(1); \

310 
v¤c1
 = 
¤cRegs
 & 0xff; \

311 
v¤c2
 = 
¤cRegs
 >> 8; \

312 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

313 ià(
_chkdiv
 != 0) { \

314 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

315 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

316 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

317 ià(
£cÚdV®
 == 0LL) { \

318 
	`EXPORT_PC
(); \

319 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

320 
	`GOTO_exû±iÚThrown
(); \

322 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

323 
£cÚdV®
 == -1LL) \

325 ià(
_chkdiv
 == 1) \

326 
»suÉ
 = 
fœ¡V®
; \

328 
»suÉ
 = 0; \

330 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

332 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

334 
	`SET_REGISTER_WIDE
(
vd¡
, \

335 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

338 
	`FINISH
(2);

	)

340 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

341 
	`HANDLE_OPCODE
(
_İcode
 ) \

343 
u2
 
¤cRegs
; \

344 
vd¡
 = 
	`INST_AA
(
š¡
); \

345 
¤cRegs
 = 
	`FETCH
(1); \

346 
v¤c1
 = 
¤cRegs
 & 0xff; \

347 
v¤c2
 = 
¤cRegs
 >> 8; \

348 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

349 
	`SET_REGISTER_WIDE
(
vd¡
, \

350 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

352 
	`FINISH
(2);

	)

354 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

355 
	`HANDLE_OPCODE
(
_İcode
 ) \

356 
vd¡
 = 
	`INST_A
(
š¡
); \

357 
v¤c1
 = 
	`INST_B
(
š¡
); \

358 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

359 ià(
_chkdiv
 != 0) { \

360 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

361 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

362 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

363 ià(
£cÚdV®
 == 0LL) { \

364 
	`EXPORT_PC
(); \

365 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

366 
	`GOTO_exû±iÚThrown
(); \

368 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

369 
£cÚdV®
 == -1LL) \

371 ià(
_chkdiv
 == 1) \

372 
»suÉ
 = 
fœ¡V®
; \

374 
»suÉ
 = 0; \

376 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

378 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

380 
	`SET_REGISTER_WIDE
(
vd¡
, \

381 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

383 
	`FINISH
(1);

	)

385 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

386 
	`HANDLE_OPCODE
(
_İcode
 ) \

387 
vd¡
 = 
	`INST_A
(
š¡
); \

388 
v¤c1
 = 
	`INST_B
(
š¡
); \

389 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

390 
	`SET_REGISTER_WIDE
(
vd¡
, \

391 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

392 
	`FINISH
(1);

	)

394 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

395 
	`HANDLE_OPCODE
(
_İcode
 ) \

397 
u2
 
¤cRegs
; \

398 
vd¡
 = 
	`INST_AA
(
š¡
); \

399 
¤cRegs
 = 
	`FETCH
(1); \

400 
v¤c1
 = 
¤cRegs
 & 0xff; \

401 
v¤c2
 = 
¤cRegs
 >> 8; \

402 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

403 
	`SET_REGISTER_FLOAT
(
vd¡
, \

404 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

406 
	`FINISH
(2);

	)

408 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

409 
	`HANDLE_OPCODE
(
_İcode
 ) \

411 
u2
 
¤cRegs
; \

412 
vd¡
 = 
	`INST_AA
(
š¡
); \

413 
¤cRegs
 = 
	`FETCH
(1); \

414 
v¤c1
 = 
¤cRegs
 & 0xff; \

415 
v¤c2
 = 
¤cRegs
 >> 8; \

416 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

417 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

418 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

420 
	`FINISH
(2);

	)

422 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

423 
	`HANDLE_OPCODE
(
_İcode
 ) \

424 
vd¡
 = 
	`INST_A
(
š¡
); \

425 
v¤c1
 = 
	`INST_B
(
š¡
); \

426 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

427 
	`SET_REGISTER_FLOAT
(
vd¡
, \

428 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

429 
	`FINISH
(1);

	)

431 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

432 
	`HANDLE_OPCODE
(
_İcode
 ) \

433 
vd¡
 = 
	`INST_A
(
š¡
); \

434 
v¤c1
 = 
	`INST_B
(
š¡
); \

435 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

436 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

437 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

438 
	`FINISH
(1);

	)

440 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

441 
	`HANDLE_OPCODE
(
_İcode
 ) \

443 
A¼ayObjeù
* 
¬¿yObj
; \

444 
u2
 
¬¿yInfo
; \

445 
	`EXPORT_PC
(); \

446 
vd¡
 = 
	`INST_AA
(
š¡
); \

447 
¬¿yInfo
 = 
	`FETCH
(1); \

448 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

449 
v¤c2
 = 
¬¿yInfo
 >> 8; \

450 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

451 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

452 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

453 
	`GOTO_exû±iÚThrown
(); \

454 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

455 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

456 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

457 
	`GOTO_exû±iÚThrown
(); \

459 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

460 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

461 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

463 
	`FINISH
(2);

	)

465 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

466 
	`HANDLE_OPCODE
(
_İcode
 ) \

468 
A¼ayObjeù
* 
¬¿yObj
; \

469 
u2
 
¬¿yInfo
; \

470 
	`EXPORT_PC
(); \

471 
vd¡
 = 
	`INST_AA
(
š¡
); \

472 
¬¿yInfo
 = 
	`FETCH
(1); \

473 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

474 
v¤c2
 = 
¬¿yInfo
 >> 8; \

475 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

476 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

477 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

478 
	`GOTO_exû±iÚThrown
(); \

479 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

480 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

481 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

482 
	`GOTO_exû±iÚThrown
(); \

484 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

485 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

486 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

488 
	`FINISH
(2);

	)

507 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

508 
	`HANDLE_OPCODE
(
_İcode
 ) \

510 
In¡F›ld
* 
if›ld
; \

511 
Objeù
* 
obj
; \

512 
	`EXPORT_PC
(); \

513 
vd¡
 = 
	`INST_A
(
š¡
); \

514 
v¤c1
 = 
	`INST_B
(
š¡
); \

515 
»f
 = 
	`FETCH
(1); \

516 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

517 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

518 ià(!
	`checkFÜNuÎ
(
obj
)) \

519 
	`GOTO_exû±iÚThrown
(); \

520 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

521 ià(
if›ld
 =ğ
NULL
) { \

522 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

523 ià(
if›ld
 =ğ
NULL
) \

524 
	`GOTO_exû±iÚThrown
(); \

526 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

527 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

528 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

529 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

531 
	`FINISH
(2);

	)

533 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

536 
Objeù
* 
obj
; \

537 
vd¡
 = 
	`INST_A
(
š¡
); \

538 
v¤c1
 = 
	`INST_B
(
š¡
); \

539 
»f
 = 
	`FETCH
(1); \

540 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

541 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

542 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

543 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

544 
	`GOTO_exû±iÚThrown
(); \

545 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

546 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

547 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

549 
	`FINISH
(2);

	)

551 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

552 
	`HANDLE_OPCODE
(
_İcode
 ) \

554 
In¡F›ld
* 
if›ld
; \

555 
Objeù
* 
obj
; \

556 
	`EXPORT_PC
(); \

557 
vd¡
 = 
	`INST_A
(
š¡
); \

558 
v¤c1
 = 
	`INST_B
(
š¡
); \

559 
»f
 = 
	`FETCH
(1); \

560 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

561 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

562 ià(!
	`checkFÜNuÎ
(
obj
)) \

563 
	`GOTO_exû±iÚThrown
(); \

564 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

565 ià(
if›ld
 =ğ
NULL
) { \

566 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

567 ià(
if›ld
 =ğ
NULL
) \

568 
	`GOTO_exû±iÚThrown
(); \

570 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

571 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

572 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

573 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

575 
	`FINISH
(2);

	)

577 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
Objeù
* 
obj
; \

581 
vd¡
 = 
	`INST_A
(
š¡
); \

582 
v¤c1
 = 
	`INST_B
(
š¡
); \

583 
»f
 = 
	`FETCH
(1); \

584 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

585 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

586 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

587 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

588 
	`GOTO_exû±iÚThrown
(); \

589 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

590 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

591 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

593 
	`FINISH
(2);

	)

603 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

606 
SticF›ld
* 
sf›ld
; \

607 
vd¡
 = 
	`INST_AA
(
š¡
); \

608 
»f
 = 
	`FETCH
(1); \

609 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

610 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

611 ià(
sf›ld
 =ğ
NULL
) { \

612 
	`EXPORT_PC
(); \

613 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

614 ià(
sf›ld
 =ğ
NULL
) \

615 
	`GOTO_exû±iÚThrown
(); \

616 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

617 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

620 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

621 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

622 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

624 
	`FINISH
(2);

	)

626 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

627 
	`HANDLE_OPCODE
(
_İcode
 ) \

629 
SticF›ld
* 
sf›ld
; \

630 
vd¡
 = 
	`INST_AA
(
š¡
); \

631 
»f
 = 
	`FETCH
(1); \

632 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

633 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

634 ià(
sf›ld
 =ğ
NULL
) { \

635 
	`EXPORT_PC
(); \

636 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

637 ià(
sf›ld
 =ğ
NULL
) \

638 
	`GOTO_exû±iÚThrown
(); \

639 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

640 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

643 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

644 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

645 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

647 
	`FINISH
(2);

	)

	@vm/mterp/common/FindInterface.h

18 
	~"D®vik.h
"

29 
INLINE
 
M‘hod
* 
dvmFšdIÁ”çûM‘hodInCache
(
CÏssObjeù
* 
thisCÏss
,

30 
u4
 
m‘hodIdx
, cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
)

32 
	#ATOMIC_CACHE_CALC
 \

33 
	`dvmIÁ”pFšdIÁ”çûM‘hod
(
thisCÏss
, 
m‘hodIdx
, 
m‘hod
, 
m‘hodCÏssDex
)

	)

35  (
M‘hod
*è
ATOMIC_CACHE_LOOKUP
(
m‘hodCÏssDex
->
pIÁ”çûCache
,

36 
DEX_INTERFACE_CACHE_SIZE
, 
thisCÏss
, 
m‘hodIdx
);

38 #undeà
ATOMIC_CACHE_CALC


	@vm/mterp/common/asm-constants.h

7 #ià
defšed
(
ASM_DEF_VERIFY
)

13 
	#MTERP_OFFSET
(
_Çme
, 
_ty³
, 
_f›ld
, 
_off£t
) \

14 ià(
	`OFFSETOF_MEMBER
(
_ty³
, 
_f›ld
è!ğ
_off£t
) { \

15 
	`ALOGE
("Bad‡sm offset %s (%d), should be %d", \

16 #_Çme, 
_off£t
, 
	`OFFSETOF_MEMBER
(
_ty³
, 
_f›ld
)); \

17 
çed
 = 
Œue
; \

18 }

	)

19 
	#MTERP_SIZEOF
(
_Çme
, 
_ty³
, 
_size
) \

20 ià((
_ty³
è!ğ(
_size
)) { \

21 
	`ALOGE
("Bad‡sm sizeof %s (%d), should be %d", \

22 #_Çme, (
_size
), (
_ty³
)); \

23 
çed
 = 
Œue
; \

24 }

	)

25 
	#MTERP_CONSTANT
(
_Çme
, 
_v®ue
) \

26 ià((
_Çme
è!ğ(
_v®ue
)) { \

27 
	`ALOGE
("Bad‡sm constant %s (%d), should be %d", \

28 #_Çme, (
_v®ue
), (
_Çme
)); \

29 
çed
 = 
Œue
; \

30 }

	)

33 
	#MTERP_OFFSET
(
Çme
, 
ty³
, 
f›ld
, 
off£t
èÇmğ
	)
offset

34 
	#MTERP_SIZEOF
(
Çme
, 
ty³
, 
size
èÇmğ
	)
size

35 
	#MTERP_CONSTANT
(
Çme
, 
v®ue
èÇmğ
	)
value

43 #ià
defšed
(
__ARM_EABI__
)

44 
	#MTERP_NO_UNALIGN_64


	)

46 #ià
defšed
(
HAVE_SHORT_ENUMS
)

47 
	#MTERP_SMALL_ENUM
 1

	)

49 
	#MTERP_SMALL_ENUM
 4

	)

85 
	$MTERP_OFFSET
(
offDvmDex_pResSŒšgs
, 
DvmDex
, 
pResSŒšgs
, 8)

86 
	$MTERP_OFFSET
(
offDvmDex_pResCÏs£s
, 
DvmDex
, 
pResCÏs£s
, 12)

87 
	$MTERP_OFFSET
(
offDvmDex_pResM‘hods
, 
DvmDex
, 
pResM‘hods
, 16)

88 
	$MTERP_OFFSET
(
offDvmDex_pResF›lds
, 
DvmDex
, 
pResF›lds
, 20)

89 
	$MTERP_OFFSET
(
offDvmDex_pIÁ”çûCache
, 
DvmDex
, 
pIÁ”çûCache
, 24)

92 #ifdeà
EASY_GDB


93 
	$MTERP_OFFSET
(
offSckSaveA»a_´evSave
, 
SckSaveA»a
, 
´evSave
, 0)

94 
	$MTERP_OFFSET
(
offSckSaveA»a_´evF¿me
, 
SckSaveA»a
, 
´evF¿me
, 4)

95 
	$MTERP_OFFSET
(
offSckSaveA»a_§vedPc
, 
SckSaveA»a
, 
§vedPc
, 8)

96 
	$MTERP_OFFSET
(
offSckSaveA»a_m‘hod
, 
SckSaveA»a
, 
m‘hod
, 12)

97 
	$MTERP_OFFSET
(
offSckSaveA»a_cu¼’tPc
, 
SckSaveA»a
, 
xŒa
.
cu¼’tPc
, 16)

98 
	`MTERP_OFFSET
(
offSckSaveA»a_loÿlRefCook›
, \

99 
SckSaveA»a
, 
xŒa
.
loÿlRefCook›
, 16)

100 
	$MTERP_OFFSET
(
offSckSaveA»a_»tuºAddr
, 
SckSaveA»a
, 
»tuºAddr
, 20)

101 
	$MTERP_SIZEOF
(
sizeofSckSaveA»a
, 
SckSaveA»a
, 24)

103 
	$MTERP_OFFSET
(
offSckSaveA»a_´evF¿me
, 
SckSaveA»a
, 
´evF¿me
, 0)

104 
	$MTERP_OFFSET
(
offSckSaveA»a_§vedPc
, 
SckSaveA»a
, 
§vedPc
, 4)

105 
	$MTERP_OFFSET
(
offSckSaveA»a_m‘hod
, 
SckSaveA»a
, 
m‘hod
, 8)

106 
	$MTERP_OFFSET
(
offSckSaveA»a_cu¼’tPc
, 
SckSaveA»a
, 
xŒa
.
cu¼’tPc
, 12)

107 
	`MTERP_OFFSET
(
offSckSaveA»a_loÿlRefCook›
, \

108 
SckSaveA»a
, 
xŒa
.
loÿlRefCook›
, 12)

109 
	$MTERP_OFFSET
(
offSckSaveA»a_»tuºAddr
, 
SckSaveA»a
, 
»tuºAddr
, 16)

110 
	$MTERP_SIZEOF
(
sizeofSckSaveA»a
, 
SckSaveA»a
, 20)

114 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_SELF_VERIFICATION
)

115 
	$MTERP_OFFSET
(
offShadowS·û_¡¬tPC
, 
ShadowS·û
, 
¡¬tPC
, 0)

116 
	$MTERP_OFFSET
(
offShadowS·û_å
, 
ShadowS·û
, 
å
, 4)

117 
	$MTERP_OFFSET
(
offShadowS·û_m‘hod
, 
ShadowS·û
, 
m‘hod
, 8)

118 
	$MTERP_OFFSET
(
offShadowS·û_m‘hodCÏssDex
, 
ShadowS·û
, 
m‘hodCÏssDex
, 12)

119 
	$MTERP_OFFSET
(
offShadowS·û_»tv®
, 
ShadowS·û
, 
»tv®
, 16)

120 
	$MTERP_OFFSET
(
offShadowS·û_š‹½SckEnd
, 
ShadowS·û
, 
š‹½SckEnd
, 24)

121 
	$MTERP_OFFSET
(
offShadowS·û_j™Ex™S‹
,
ShadowS·û
, 
j™Ex™S‹
, 28)

122 
	$MTERP_OFFSET
(
offShadowS·û_svS‹
, 
ShadowS·û
, 
£lfV”ifiÿtiÚS‹
, 32)

123 
	$MTERP_OFFSET
(
offShadowS·û_shadowFP
, 
ShadowS·û
, 
shadowFP
, 40)

127 
	$MTERP_OFFSET
(
offIn¡F›ld_by‹Off£t
, 
In¡F›ld
, 
by‹Off£t
, 16)

130 
	$MTERP_OFFSET
(
offF›ld_şazz
, 
F›ld
, 
şazz
, 0)

133 
	$MTERP_OFFSET
(
offSticF›ld_v®ue
, 
SticF›ld
, 
v®ue
, 16)

136 
	$MTERP_OFFSET
(
offM‘hod_şazz
, 
M‘hod
, 
şazz
, 0)

137 
	$MTERP_OFFSET
(
offM‘hod_acûssFÏgs
, 
M‘hod
, 
acûssFÏgs
, 4)

138 
	$MTERP_OFFSET
(
offM‘hod_m‘hodIndex
, 
M‘hod
, 
m‘hodIndex
, 8)

139 
	$MTERP_OFFSET
(
offM‘hod_»gi¡”sSize
, 
M‘hod
, 
»gi¡”sSize
, 10)

140 
	$MTERP_OFFSET
(
offM‘hod_outsSize
, 
M‘hod
, 
outsSize
, 12)

141 
	$MTERP_OFFSET
(
offM‘hod_Çme
, 
M‘hod
, 
Çme
, 16)

142 
	$MTERP_OFFSET
(
offM‘hod_š¢s
, 
M‘hod
, 
š¢s
, 32)

143 
	$MTERP_OFFSET
(
offM‘hod_ÇtiveFunc
, 
M‘hod
, 
ÇtiveFunc
, 40)

146 
	$MTERP_OFFSET
(
offIÆšeO³¿tiÚ_func
, 
IÆšeO³¿tiÚ
, 
func
, 0)

149 
	$MTERP_OFFSET
(
offTh»ad_pc
, 
Th»ad
, 
š‹½Save
.
pc
, 0)

150 
	$MTERP_OFFSET
(
offTh»ad_curF¿me
, 
Th»ad
, 
š‹½Save
.
curF¿me
, 4)

151 
	$MTERP_OFFSET
(
offTh»ad_m‘hod
, 
Th»ad
, 
š‹½Save
.
m‘hod
, 8)

152 
	$MTERP_OFFSET
(
offTh»ad_m‘hodCÏssDex
, 
Th»ad
, 
š‹½Save
.
m‘hodCÏssDex
, 12)

154 
	$MTERP_OFFSET
(
offTh»ad_»tv®
, 
Th»ad
, 
š‹½Save
.
»tv®
, 16)

155 
	$MTERP_OFFSET
(
offTh»ad_»tv®_z
, 
Th»ad
, 
š‹½Save
.
»tv®
.
z
, 16)

156 
	$MTERP_OFFSET
(
offTh»ad_»tv®_i
, 
Th»ad
, 
š‹½Save
.
»tv®
.
i
, 16)

157 
	$MTERP_OFFSET
(
offTh»ad_»tv®_j
, 
Th»ad
, 
š‹½Save
.
»tv®
.
j
, 16)

158 
	$MTERP_OFFSET
(
offTh»ad_»tv®_l
, 
Th»ad
, 
š‹½Save
.
»tv®
.
l
, 16)

159 
	$MTERP_OFFSET
(
offTh»ad_baPŒ
, 
Th»ad
, 
š‹½Save
.
baPŒ
, 24)

160 
	$MTERP_OFFSET
(
offTh»ad_th»adId
, 
Th»ad
, 
th»adId
, 36)

163 
	`MTERP_OFFSET
(
offTh»ad_subMode
, \

164 
Th»ad
, 
š‹½B»ak
.
ùl
.
subMode
, 40)

165 
	`MTERP_OFFSET
(
offTh»ad_b»akFÏgs
, \

166 
Th»ad
, 
š‹½B»ak
.
ùl
.
b»akFÏgs
, 42)

167 
	`MTERP_OFFSET
(
offTh»ad_curHªdËrTabË
, \

168 
Th»ad
, 
š‹½B»ak
.
ùl
.
curHªdËrTabË
, 44)

169 
	`MTERP_OFFSET
(
offTh»ad_su¥’dCouÁ
, 
Th»ad
, 
su¥’dCouÁ
, 48);

170 
	`MTERP_OFFSET
(
offTh»ad_dbgSu¥’dCouÁ
, 
Th»ad
, 
dbgSu¥’dCouÁ
, 52);

171 
	$MTERP_OFFSET
(
offTh»ad_ÿrdTabË
, 
Th»ad
, 
ÿrdTabË
, 56)

172 
	$MTERP_OFFSET
(
offTh»ad_š‹½SckEnd
, 
Th»ad
, 
š‹½SckEnd
, 60)

173 
	$MTERP_OFFSET
(
offTh»ad_exû±iÚ
, 
Th»ad
, 
exû±iÚ
, 68)

174 
	$MTERP_OFFSET
(
offTh»ad_debugIsM‘hodEÁry
, 
Th»ad
, 
debugIsM‘hodEÁry
, 72)

175 
	$MTERP_OFFSET
(
offTh»ad_š‹½SckSize
, 
Th»ad
, 
š‹½SckSize
, 76)

176 
	$MTERP_OFFSET
(
offTh»ad_¡ackOv”æowed
, 
Th»ad
, 
¡ackOv”æowed
, 80)

177 
	$MTERP_OFFSET
(
offTh»ad_mašHªdËrTabË
, 
Th»ad
, 
mašHªdËrTabË
, 88)

178 
	$MTERP_OFFSET
(
offTh»ad_sšgËS‹pCouÁ
, 
Th»ad
, 
sšgËS‹pCouÁ
, 96)

180 #ifdeà
WITH_JIT


181 
	$MTERP_OFFSET
(
offTh»ad_j™ToIÁ”pEÁr›s
,
Th»ad
, 
j™ToIÁ”pEÁr›s
, 100)

182 
	$MTERP_OFFSET
(
offTh»ad_šJ™CodeCache
, 
Th»ad
, 
šJ™CodeCache
, 124)

183 
	$MTERP_OFFSET
(
offTh»ad_pJ™ProfTabË
, 
Th»ad
, 
pJ™ProfTabË
, 128)

184 
	$MTERP_OFFSET
(
offTh»ad_j™Th»shŞd
, 
Th»ad
, 
j™Th»shŞd
, 132)

185 
	$MTERP_OFFSET
(
offTh»ad_j™ResumeNPC
, 
Th»ad
, 
j™ResumeNPC
, 136)

186 
	$MTERP_OFFSET
(
offTh»ad_j™ResumeNSP
, 
Th»ad
, 
j™ResumeNSP
, 140)

187 
	$MTERP_OFFSET
(
offTh»ad_j™ResumeDPC
, 
Th»ad
, 
j™ResumeDPC
, 144)

188 
	$MTERP_OFFSET
(
offTh»ad_j™S‹
, 
Th»ad
, 
j™S‹
, 148)

189 
	$MTERP_OFFSET
(
offTh»ad_icRechašCouÁ
, 
Th»ad
, 
icRechašCouÁ
, 152)

190 
	$MTERP_OFFSET
(
offTh»ad_pProfeCouÁdown
, 
Th»ad
, 
pProfeCouÁdown
, 156)

191 
	$MTERP_OFFSET
(
offTh»ad_ÿÎs™eCÏss
, 
Th»ad
, 
ÿÎs™eCÏss
, 160)

192 
	$MTERP_OFFSET
(
offTh»ad_m‘hodToC®l
, 
Th»ad
, 
m‘hodToC®l
, 164)

193 
	`MTERP_OFFSET
(
offTh»ad_jniLoÿl_tİCook›
, \

194 
Th»ad
, 
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
, 168)

195 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

196 
	$MTERP_OFFSET
(
offTh»ad_shadowS·û
, 
Th»ad
, 
shadowS·û
, 188)

199 
	`MTERP_OFFSET
(
offTh»ad_jniLoÿl_tİCook›
, \

200 
Th»ad
, 
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
, 100)

204 
	$MTERP_OFFSET
(
offObjeù_şazz
, 
Objeù
, 
şazz
, 0)

205 
	$MTERP_OFFSET
(
offObjeù_lock
, 
Objeù
, 
lock
, 4)

206 
	$MTERP_OFFSET
(
offObjeù_uuid
, 
Objeù
, 
uuid
, 8)

209 
	$MTERP_CONSTANT
(
LW_LOCK_OWNER_SHIFT
, 3)

210 
	$MTERP_CONSTANT
(
LW_HASH_STATE_SHIFT
, 1)

213 
	$MTERP_OFFSET
(
offA¼ayObjeù_Ëngth
, 
A¼ayObjeù
, 
Ëngth
, 16)

214 #ifdeà
MTERP_NO_UNALIGN_64


215 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 24)

217 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 20)

221 
	$MTERP_CONSTANT
(
STRING_FIELDOFF_VALUE
, 16)

222 
	$MTERP_CONSTANT
(
STRING_FIELDOFF_HASHCODE
, 20)

223 
	$MTERP_CONSTANT
(
STRING_FIELDOFF_OFFSET
, 24)

224 
	$MTERP_CONSTANT
(
STRING_FIELDOFF_COUNT
, 28)

226 #ià
	`defšed
(
WITH_JIT
)

231 
	$MTERP_CONSTANT
(
kIÆšeCacheMiss
, 0)

232 
	$MTERP_CONSTANT
(
kC®ls™eIÁ”´‘ed
, 1)

233 
	$MTERP_CONSTANT
(
kSw™chOv”æow
, 2)

234 
	$MTERP_CONSTANT
(
kH—vyweightMÚ™Ü
, 3)

237 
	$MTERP_CONSTANT
(
JIT_CALLEE_SAVE_DOUBLE_COUNT
, 8)

241 
	$MTERP_OFFSET
(
offCÏssObjeù_desütÜ
, 
CÏssObjeù
, 
desütÜ
, 32)

242 
	$MTERP_OFFSET
(
offCÏssObjeù_acûssFÏgs
, 
CÏssObjeù
, 
acûssFÏgs
, 40)

243 
	$MTERP_OFFSET
(
offCÏssObjeù_pDvmDex
, 
CÏssObjeù
, 
pDvmDex
, 48)

244 
	$MTERP_OFFSET
(
offCÏssObjeù_¡©us
, 
CÏssObjeù
, 
¡©us
, 52)

245 
	$MTERP_OFFSET
(
offCÏssObjeù_su³r
, 
CÏssObjeù
, 
su³r
, 80)

246 
	$MTERP_OFFSET
(
offCÏssObjeù_vbËCouÁ
, 
CÏssObjeù
, 
vbËCouÁ
, 120)

247 
	$MTERP_OFFSET
(
offCÏssObjeù_vbË
, 
CÏssObjeù
, 
vbË
, 124)

249 #ià
	`defšed
(
WITH_JIT
)

250 
	$MTERP_CONSTANT
(
kJ™NÙ
, 0)

251 
	$MTERP_CONSTANT
(
kJ™TS–eùReque¡
, 1)

252 
	$MTERP_CONSTANT
(
kJ™TS–eùReque¡HÙ
, 2)

253 
	$MTERP_CONSTANT
(
kJ™S–fV”ifiÿtiÚ
, 3)

254 
	$MTERP_CONSTANT
(
kJ™TS–eù
, 4)

255 
	$MTERP_CONSTANT
(
kJ™TS–eùEnd
, 5)

256 
	$MTERP_CONSTANT
(
kJ™DÚe
, 6)

258 #ià
	`defšed
(
WITH_SELF_VERIFICATION
)

259 
	$MTERP_CONSTANT
(
kSVSIdË
, 0)

260 
	$MTERP_CONSTANT
(
kSVSS¹
, 1)

261 
	$MTERP_CONSTANT
(
kSVSPuÁ
, 2)

262 
	$MTERP_CONSTANT
(
kSVSSšgËS‹p
, 3)

263 
	$MTERP_CONSTANT
(
kSVSNoProfe
, 4)

264 
	$MTERP_CONSTANT
(
kSVST¿ûS–eù
, 5)

265 
	$MTERP_CONSTANT
(
kSVSNÜm®
, 6)

266 
	$MTERP_CONSTANT
(
kSVSNoChaš
, 7)

267 
	$MTERP_CONSTANT
(
kSVSBackw¬dB¿nch
, 8)

268 
	$MTERP_CONSTANT
(
kSVSDebugIÁ”p
, 9)

273 
	$MTERP_SIZEOF
(
sizeofCÏssStus
, 
CÏssStus
, 
MTERP_SMALL_ENUM
)

274 
	$MTERP_CONSTANT
(
CLASS_INITIALIZED
, 7)

277 
	$MTERP_SIZEOF
(
sizeofM‘hodTy³
, 
M‘hodTy³
, 
MTERP_SMALL_ENUM
)

278 
	$MTERP_CONSTANT
(
METHOD_DIRECT
, 1)

279 
	$MTERP_CONSTANT
(
METHOD_STATIC
, 2)

280 
	$MTERP_CONSTANT
(
METHOD_VIRTUAL
, 3)

281 
	$MTERP_CONSTANT
(
METHOD_INTERFACE
, 4)

284 
	$MTERP_CONSTANT
(
ACC_PRIVATE
, 0x0002)

285 
	$MTERP_CONSTANT
(
ACC_STATIC
, 0x0008)

286 
	$MTERP_CONSTANT
(
ACC_NATIVE
, 0x0100)

287 
	$MTERP_CONSTANT
(
ACC_INTERFACE
, 0x0200)

288 
	$MTERP_CONSTANT
(
ACC_ABSTRACT
, 0x0400)

289 
	`MTERP_CONSTANT
(
CLASS_ISFINALIZABLE
, 1<<31)

292 
	$MTERP_CONSTANT
(
ALLOC_DONT_TRACK
, 0x01)

295 
	$MTERP_CONSTANT
(
GC_CARD_SHIFT
, 7)

298 
	$MTERP_CONSTANT
(
OP_MOVE_EXCEPTION
, 0x0d)

299 
	$MTERP_CONSTANT
(
OP_INVOKE_DIRECT_RANGE
, 0x76)

302 
	$MTERP_CONSTANT
(
kSubModeNÜm®
, 0x0000)

303 
	$MTERP_CONSTANT
(
kSubModeM‘hodT¿û
, 0x0001)

304 
	$MTERP_CONSTANT
(
kSubModeEmuÏtÜT¿û
, 0x0002)

305 
	$MTERP_CONSTANT
(
kSubModeIn¡CouÁšg
, 0x0004)

306 
	$MTERP_CONSTANT
(
kSubModeDebugg”Aùive
, 0x0008)

307 
	$MTERP_CONSTANT
(
kSubModeSu¥’dP’dšg
, 0x0010)

308 
	$MTERP_CONSTANT
(
kSubModeC®lbackP’dšg
, 0x0020)

309 
	$MTERP_CONSTANT
(
kSubModeCouÁedS‹p
, 0x0040)

310 
	$MTERP_CONSTANT
(
kSubModeJ™T¿ûBud
, 0x4000)

311 
	$MTERP_CONSTANT
(
kSubModeJ™SV
, 0x8000)

312 
	$MTERP_CONSTANT
(
kSubModeDebugProfe
, 0x000f)

314 
	$MTERP_CONSTANT
(
kIÁ”pNoB»ak
, 0x00)

315 
	$MTERP_CONSTANT
(
kIÁ”pSšgËS‹p
, 0x01)

316 
	$MTERP_CONSTANT
(
kIÁ”pSaãPošt
, 0x02)

318 
	$MTERP_CONSTANT
(
DBG_METHOD_ENTRY
, 0x04)

319 
	`MTERP_CONSTANT
(
DBG_METHOD_EXIT
, 0x08)

	@vm/mterp/common/jit-config.h

17 #ià
__ARM_ARCH_5TE__


18 
	#JIT_PROF_SIZE_LOG_2
 9

	)

20 
	#JIT_PROF_SIZE_LOG_2
 11

	)

23 
	#JIT_PROF_SIZE
 (1 << 
JIT_PROF_SIZE_LOG_2
)

	)

	@vm/mterp/cstubs/enddefs.cpp

3 #undeà
»tv®


4 #undeà
pc


5 #undeà
å


6 #undeà
curM‘hod


7 #undeà
m‘hodCÏssDex


8 #undeà
£lf


9 #undeà
debugT¿ckedRefS¹


	@vm/mterp/cstubs/entry.cpp

4 #undeà
H


5 
	#H
(
_İ
è
dvmM‹½_
##
	)
_op

6 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrs
)

8 #undeà
H


9 
	#H
(
_İ
è#_İ

	)

10 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrNames
)

12 
	~<£tjmp.h
>

20 
	$dvmM‹½StdRun
(
Th»ad
* 
£lf
)

22 
jmp_buf
 
jmpBuf
;

24 
£lf
->
baPŒ
 = &
jmpBuf
;

27 ià(
	`£tjmp
(
jmpBuf
)) {

28 
	`LOGVV
("m‹½h»adid=%d„‘uºšg", 
	`dvmTh»adS–f
()->
th»adId
);

33 
Œue
) {

34 (*
	tHªdËr
)(
	tTh»ad
* 
	t£lf
);

36 
u2
 
š¡
 = 
pc
[0];

43 ià(
£lf
-
š‹½B»ak
.
ùl
.
subMode
) {

44 
	`dvmCheckBefÜe
(
pc
, 
å
, 
£lf
, 
curM‘hod
);

46 
HªdËr
 
hªdËr
 = (HªdËrè
gDvmM‹½HªdËrs
[
š¡
 & 0xff];

47 (è
gDvmM‹½HªdËrNames
;

48 
	`LOGVV
("handler %p %s",

49 
hªdËr
, (cÚ¡ *è
gDvmM‹½HªdËrNames
[
š¡
 & 0xff]);

50 (*
hªdËr
)(
£lf
);

52 
	}
}

57 
	$dvmM‹½StdBa
(
Th»ad
* 
£lf
)

59 
jmp_buf
* 
pJmpBuf
 = 
£lf
->
baPŒ
;

60 
	`lÚgjmp
(*
pJmpBuf
, 1);

61 
	}
}

	@vm/mterp/cstubs/stubdefs.cpp

6 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

7 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

10 
	#GOTO_TARGET
(
_rg‘
, ...) \

11 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

12 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

13 
u2
 
š¡
 = 
	`FETCH
(0); \

14 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

15 
SckSaveA»a
* 
debugSaveA»a
; \

16 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

17 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

19 
	#GOTO_TARGET_END
 }

	)

25 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

26 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

27 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

28 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

29 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

30 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

33 
	#STUB_HACK
(
x
è
	)
x

34 #ià
defšed
(
WITH_JIT
)

35 
	#JIT_STUB_HACK
(
x
è
	)
x

37 
	#JIT_STUB_HACK
(
x
)

	)

46 
	#PC_FP_TO_SELF
()

	)

47 
	#PC_TO_SELF
()

	)

55 
	#HANDLE_OPCODE
(
_İ
) \

56 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

57 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

58 
u4
 
»f
; \

59 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

60 
u2
 
š¡
 = 
	`FETCH
(0); \

61 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

63 
	#OP_END
 }

	)

70 #ià
defšed
(
WITH_JIT
)

71 
	#FINISH
(
_off£t
) { \

72 
	`ADJUST_PC
(
_off£t
); \

73 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

74 
	`dvmCheckJ™
(
pc
, 
£lf
); \

77 }

	)

79 
	#FINISH
(
_off£t
) { \

80 
	`ADJUST_PC
(
_off£t
); \

82 }

	)

92 
	#GOTO_exû±iÚThrown
() \

94 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

96 } 
çl£
)

	)

98 
	#GOTO_»tuºFromM‘hod
() \

100 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

102 } 
çl£
)

	)

104 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

106 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

108 } 
çl£
)

	)

110 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

112 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

113 
_v¤c1
, 
_vd¡
); \

115 } 
çl£
)

	)

120 
	#GOTO_ba
() \

121 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

129 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

130 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

131 
	`EXPORT_PC
(); \

132 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

134 }

	)

	@vm/mterp/out/InterpC-allstubs.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1156 
	$HANDLE_OPCODE
(
OP_NOP
)

1157 
	`FINISH
(1);

1158 
OP_END


1161 
	$HANDLE_OPCODE
(
OP_MOVE
 )

1162 
vd¡
 = 
	`INST_A
(
š¡
);

1163 
v¤c1
 = 
	`INST_B
(
š¡
);

1164 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1165 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1166 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1167 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1168 
	`FINISH
(1);

1169 
OP_END


1172 
	$HANDLE_OPCODE
(
OP_MOVE_FROM16
 )

1173 
vd¡
 = 
	`INST_AA
(
š¡
);

1174 
v¤c1
 = 
	`FETCH
(1);

1175 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1176 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1177 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1178 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1179 
	`FINISH
(2);

1180 
OP_END


1183 
	$HANDLE_OPCODE
(
OP_MOVE_16
 )

1184 
vd¡
 = 
	`FETCH
(1);

1185 
v¤c1
 = 
	`FETCH
(2);

1186 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1187 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1188 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1189 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1190 
	`FINISH
(3);

1191 
OP_END


1194 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

1197 
vd¡
 = 
	`INST_A
(
š¡
);

1198 
v¤c1
 = 
	`INST_B
(
š¡
);

1199 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1200 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1201 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1202 
	`FINISH
(1);

1203 
OP_END


1206 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

1207 
vd¡
 = 
	`INST_AA
(
š¡
);

1208 
v¤c1
 = 
	`FETCH
(1);

1209 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1210 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1211 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1212 
	`FINISH
(2);

1213 
OP_END


1216 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

1217 
vd¡
 = 
	`FETCH
(1);

1218 
v¤c1
 = 
	`FETCH
(2);

1219 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1220 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1221 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1222 
	`FINISH
(3);

1223 
OP_END


1227 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT
 )

1228 
vd¡
 = 
	`INST_A
(
š¡
);

1229 
v¤c1
 = 
	`INST_B
(
š¡
);

1230 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1231 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1232 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1233 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1234 
	`FINISH
(1);

1235 
OP_END


1240 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT_FROM16
 )

1241 
vd¡
 = 
	`INST_AA
(
š¡
);

1242 
v¤c1
 = 
	`FETCH
(1);

1243 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1244 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1245 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1246 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1247 
	`FINISH
(2);

1248 
OP_END


1253 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT_16
 )

1254 
vd¡
 = 
	`FETCH
(1);

1255 
v¤c1
 = 
	`FETCH
(2);

1256 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1257 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1258 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1259 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1260 
	`FINISH
(3);

1261 
OP_END


1265 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT
 )

1266 
vd¡
 = 
	`INST_AA
(
š¡
);

1267 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1268 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1269 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1270 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1271 
	`FINISH
(1);

1272 
OP_END


1275 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

1276 
vd¡
 = 
	`INST_AA
(
š¡
);

1277 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

1278 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

1279 
	`FINISH
(1);

1280 
OP_END


1284 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_OBJECT
 )

1285 
vd¡
 = 
	`INST_AA
(
š¡
);

1286 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1287 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1288 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1289 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1290 
	`FINISH
(1);

1291 
OP_END


1295 
	$HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

1296 
vd¡
 = 
	`INST_AA
(
š¡
);

1297 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

1298 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

1299 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

1300 
	`dvmCË¬Exû±iÚ
(
£lf
);

1301 
	`FINISH
(1);

1302 
OP_END


1305 
	$HANDLE_OPCODE
(
OP_RETURN_VOID
 )

1306 
	`ILOGV
("|return-void");

1307 #iâdeà
NDEBUG


1308 
»tv®
.
j
 = 0xababababULL;

1310 
	`GOTO_»tuºFromM‘hod
();

1311 
OP_END


1314 
	$HANDLE_OPCODE
(
OP_RETURN
 )

1315 
v¤c1
 = 
	`INST_AA
(
š¡
);

1316 
	`ILOGV
("|return%s v%d",

1317 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1318 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1319 
	`GOTO_»tuºFromM‘hod
();

1320 
OP_END


1323 
	$HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

1324 
v¤c1
 = 
	`INST_AA
(
š¡
);

1325 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

1326 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

1327 
	`GOTO_»tuºFromM‘hod
();

1328 
OP_END


1332 
	$HANDLE_OPCODE
(
OP_RETURN_OBJECT
 )

1333 
v¤c1
 = 
	`INST_AA
(
š¡
);

1334 
	`ILOGV
("|return%s v%d",

1335 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1336 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1337 
	`GOTO_»tuºFromM‘hod
();

1338 
OP_END


1342 
	$HANDLE_OPCODE
(
OP_CONST_4
 )

1344 
s4
 
tmp
;

1346 
vd¡
 = 
	`INST_A
(
š¡
);

1347 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

1348 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

1349 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1350 
	}
}

1351 
FINISH
(1);

1352 
OP_END


1355 
	$HANDLE_OPCODE
(
OP_CONST_16
 )

1356 
vd¡
 = 
	`INST_AA
(
š¡
);

1357 
v¤c1
 = 
	`FETCH
(1);

1358 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1359 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

1360 
	`FINISH
(2);

1361 
OP_END


1364 
	$HANDLE_OPCODE
(
OP_CONST
 )

1366 
u4
 
tmp
;

1368 
vd¡
 = 
	`INST_AA
(
š¡
);

1369 
tmp
 = 
	`FETCH
(1);

1370 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1371 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

1372 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1373 
	}
}

1374 
FINISH
(3);

1375 
OP_END


1378 
	$HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

1379 
vd¡
 = 
	`INST_AA
(
š¡
);

1380 
v¤c1
 = 
	`FETCH
(1);

1381 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

1382 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

1383 
	`FINISH
(2);

1384 
OP_END


1387 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

1388 
vd¡
 = 
	`INST_AA
(
š¡
);

1389 
v¤c1
 = 
	`FETCH
(1);

1390 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1391 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

1392 
	`FINISH
(2);

1393 
OP_END


1396 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

1398 
u4
 
tmp
;

1400 
vd¡
 = 
	`INST_AA
(
š¡
);

1401 
tmp
 = 
	`FETCH
(1);

1402 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1403 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

1404 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

1405 
	}
}

1406 
FINISH
(3);

1407 
OP_END


1410 
	$HANDLE_OPCODE
(
OP_CONST_WIDE
 )

1412 
u8
 
tmp
;

1414 
vd¡
 = 
	`INST_AA
(
š¡
);

1415 
tmp
 = 
	`FETCH
(1);

1416 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

1417 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

1418 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

1419 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

1420 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

1421 
	}
}

1422 
FINISH
(5);

1423 
OP_END


1426 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

1427 
vd¡
 = 
	`INST_AA
(
š¡
);

1428 
v¤c1
 = 
	`FETCH
(1);

1429 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

1430 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

1431 
	`FINISH
(2);

1432 
OP_END


1435 
	$HANDLE_OPCODE
(
OP_CONST_STRING
 )

1437 
SŒšgObjeù
* 
¡rObj
;

1439 
vd¡
 = 
	`INST_AA
(
š¡
);

1440 
»f
 = 
	`FETCH
(1);

1441 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

1442 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

1443 ià(
¡rObj
 =ğ
NULL
) {

1444 
	`EXPORT_PC
();

1445 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

1446 ià(
¡rObj
 =ğ
NULL
)

1447 
	`GOTO_exû±iÚThrown
();

1449 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1450 
	}
}

1451 
FINISH
(2);

1452 
OP_END


1455 
	$HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

1457 
SŒšgObjeù
* 
¡rObj
;

1458 
u4
 
tmp
;

1460 
vd¡
 = 
	`INST_AA
(
š¡
);

1461 
tmp
 = 
	`FETCH
(1);

1462 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1463 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

1464 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

1465 ià(
¡rObj
 =ğ
NULL
) {

1466 
	`EXPORT_PC
();

1467 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

1468 ià(
¡rObj
 =ğ
NULL
)

1469 
	`GOTO_exû±iÚThrown
();

1471 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1472 
	}
}

1473 
FINISH
(3);

1474 
OP_END


1477 
	$HANDLE_OPCODE
(
OP_CONST_CLASS
 )

1479 
CÏssObjeù
* 
şazz
;

1481 
vd¡
 = 
	`INST_AA
(
š¡
);

1482 
»f
 = 
	`FETCH
(1);

1483 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

1484 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1485 ià(
şazz
 =ğ
NULL
) {

1486 
	`EXPORT_PC
();

1487 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1488 ià(
şazz
 =ğ
NULL
)

1489 
	`GOTO_exû±iÚThrown
();

1491 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

1492 
	}
}

1493 
FINISH
(2);

1494 
OP_END


1497 
	$HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

1499 
Objeù
* 
obj
;

1501 
v¤c1
 = 
	`INST_AA
(
š¡
);

1502 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

1503 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

1504 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1505 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1506 
	`GOTO_exû±iÚThrown
();

1507 
	`ILOGV
("+†ockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

1508 
	`EXPORT_PC
();

1509 
	`dvmLockObjeù
(
£lf
, 
obj
);

1510 
	}
}

1511 
FINISH
(1);

1512 
OP_END


1515 
	$HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

1517 
Objeù
* 
obj
;

1519 
	`EXPORT_PC
();

1521 
v¤c1
 = 
	`INST_AA
(
š¡
);

1522 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

1523 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

1524 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1525 ià(!
	`checkFÜNuÎ
(
obj
)) {

1533 
	`ADJUST_PC
(1);

1534 
	`GOTO_exû±iÚThrown
();

1536 
	`ILOGV
("+ uÆockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

1537 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

1538 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1539 
	`ADJUST_PC
(1);

1540 
	`GOTO_exû±iÚThrown
();

1542 
	}
}

1543 
FINISH
(1);

1544 
OP_END


1547 
	$HANDLE_OPCODE
(
OP_CHECK_CAST
 )

1549 
CÏssObjeù
* 
şazz
;

1550 
Objeù
* 
obj
;

1552 
	`EXPORT_PC
();

1554 
v¤c1
 = 
	`INST_AA
(
š¡
);

1555 
»f
 = 
	`FETCH
(1);

1556 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

1558 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1559 ià(
obj
 !ğ
NULL
) {

1560 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

1561 ià(!
	`checkFÜNuÎ
(
obj
))

1562 
	`GOTO_exû±iÚThrown
();

1564 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1565 ià(
şazz
 =ğ
NULL
) {

1566 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

1567 ià(
şazz
 =ğ
NULL
)

1568 
	`GOTO_exû±iÚThrown
();

1570 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

1571 
	`dvmThrowCÏssCa¡Exû±iÚ
(
obj
->
şazz
, clazz);

1572 
	`GOTO_exû±iÚThrown
();

1575 
	}
}

1576 
FINISH
(2);

1577 
OP_END


1580 
	$HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

1582 
CÏssObjeù
* 
şazz
;

1583 
Objeù
* 
obj
;

1585 
vd¡
 = 
	`INST_A
(
š¡
);

1586 
v¤c1
 = 
	`INST_B
(
š¡
);

1587 
»f
 = 
	`FETCH
(1);

1588 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

1590 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1591 ià(
obj
 =ğ
NULL
) {

1592 
	`SET_REGISTER
(
vd¡
, 0);

1594 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

1595 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1596 
	`GOTO_exû±iÚThrown
();

1598 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1599 ià(
şazz
 =ğ
NULL
) {

1600 
	`EXPORT_PC
();

1601 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1602 ià(
şazz
 =ğ
NULL
)

1603 
	`GOTO_exû±iÚThrown
();

1605 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

1607 
	}
}

1608 
FINISH
(2);

1609 
OP_END


1612 
	$HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

1614 
A¼ayObjeù
* 
¬¿yObj
;

1616 
vd¡
 = 
	`INST_A
(
š¡
);

1617 
v¤c1
 = 
	`INST_B
(
š¡
);

1618 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

1619 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

1620 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

1621 
	`GOTO_exû±iÚThrown
();

1623 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

1624 
	}
}

1625 
FINISH
(1);

1626 
OP_END


1629 
	$HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

1631 
CÏssObjeù
* 
şazz
;

1632 
Objeù
* 
ÃwObj
;

1634 
	`EXPORT_PC
();

1636 
vd¡
 = 
	`INST_AA
(
š¡
);

1637 
»f
 = 
	`FETCH
(1);

1638 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

1639 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1640 ià(
şazz
 =ğ
NULL
) {

1641 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

1642 ià(
şazz
 =ğ
NULL
)

1643 
	`GOTO_exû±iÚThrown
();

1646 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

1647 
	`GOTO_exû±iÚThrown
();

1649 #ià
	`defšed
(
WITH_JIT
)

1655 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

1656 (!
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
))) {

1658 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

1670 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1671 ià(
ÃwObj
 =ğ
NULL
)

1672 
	`GOTO_exû±iÚThrown
();

1673 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

1674 
	}
}

1675 
FINISH
(2);

1676 
OP_END


1679 
	$HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

1681 
CÏssObjeù
* 
¬¿yCÏss
;

1682 
A¼ayObjeù
* 
ÃwA¼ay
;

1683 
s4
 
Ëngth
;

1685 
	`EXPORT_PC
();

1687 
vd¡
 = 
	`INST_A
(
š¡
);

1688 
v¤c1
 = 
	`INST_B
(
š¡
);

1689 
»f
 = 
	`FETCH
(1);

1690 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

1691 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

1692 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

1693 ià(
Ëngth
 < 0) {

1694 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
Ëngth
);

1695 
	`GOTO_exû±iÚThrown
();

1697 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1698 ià(
¬¿yCÏss
 =ğ
NULL
) {

1699 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1700 ià(
¬¿yCÏss
 =ğ
NULL
)

1701 
	`GOTO_exû±iÚThrown
();

1704 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1705 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1707 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

1708 ià(
ÃwA¼ay
 =ğ
NULL
)

1709 
	`GOTO_exû±iÚThrown
();

1710 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

1711 
	}
}

1712 
FINISH
(2);

1713 
OP_END


1716 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

1717 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

1718 
OP_END


1721 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

1722 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

1723 
OP_END


1726 
	$HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

1728 cÚ¡ 
u2
* 
¬¿yD©a
;

1729 
s4
 
off£t
;

1730 
A¼ayObjeù
* 
¬¿yObj
;

1732 
	`EXPORT_PC
();

1733 
v¤c1
 = 
	`INST_AA
(
š¡
);

1734 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1735 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

1736 
¬¿yD©a
 = 
pc
 + 
off£t
;

1737 #iâdeà
NDEBUG


1738 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

1739 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1742 
	`dvmThrowIÁ”ÇlE¼Ü
("bad fill‡rray data");

1743 
	`GOTO_exû±iÚThrown
();

1746 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

1747 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

1748 
	`GOTO_exû±iÚThrown
();

1750 
	`FINISH
(3);

1751 
	}
}

1752 
OP_END


1755 
	$HANDLE_OPCODE
(
OP_THROW
 )

1757 
Objeù
* 
obj
;

1764 
	`EXPORT_PC
();

1766 
v¤c1
 = 
	`INST_AA
(
š¡
);

1767 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

1768 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

1769 ià(!
	`checkFÜNuÎ
(
obj
)) {

1771 
	`LOGVV
("Badƒxception");

1774 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

1776 
	`GOTO_exû±iÚThrown
();

1777 
	}
}

1778 
OP_END


1781 
	$HANDLE_OPCODE
(
OP_GOTO
 )

1782 
vd¡
 = 
	`INST_AA
(
š¡
);

1783 ià((
s1
)
vd¡
 < 0)

1784 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

1786 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

1787 
	`ILOGV
("> branchaken");

1788 ià((
s1
)
vd¡
 < 0)

1789 
	`PERIODIC_CHECKS
((
s1
)
vd¡
);

1790 
	`FINISH
((
s1
)
vd¡
);

1791 
OP_END


1794 
	$HANDLE_OPCODE
(
OP_GOTO_16
 )

1796 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

1798 ià(
off£t
 < 0)

1799 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

1801 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

1802 
	`ILOGV
("> branchaken");

1803 ià(
off£t
 < 0)

1804 
	`PERIODIC_CHECKS
(
off£t
);

1805 
	`FINISH
(
off£t
);

1806 
	}
}

1807 
OP_END


1810 
	$HANDLE_OPCODE
(
OP_GOTO_32
 )

1812 
s4
 
off£t
 = 
	`FETCH
(1);

1813 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

1815 ià(
off£t
 < 0)

1816 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

1818 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

1819 
	`ILOGV
("> branchaken");

1820 ià(
off£t
 <= 0)

1821 
	`PERIODIC_CHECKS
(
off£t
);

1822 
	`FINISH
(
off£t
);

1823 
	}
}

1824 
OP_END


1827 
	$HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

1829 cÚ¡ 
u2
* 
sw™chD©a
;

1830 
u4
 
‹¡V®
;

1831 
s4
 
off£t
;

1833 
v¤c1
 = 
	`INST_AA
(
š¡
);

1834 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1835 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

1836 
sw™chD©a
 = 
pc
 + 
off£t
;

1837 #iâdeà
NDEBUG


1838 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

1839 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1842 
	`EXPORT_PC
();

1843 
	`dvmThrowIÁ”ÇlE¼Ü
("bad…acked switch");

1844 
	`GOTO_exû±iÚThrown
();

1847 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

1849 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

1850 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

1851 ià(
off£t
 <= 0)

1852 
	`PERIODIC_CHECKS
(
off£t
);

1853 
	`FINISH
(
off£t
);

1854 
	}
}

1855 
OP_END


1858 
	$HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

1860 cÚ¡ 
u2
* 
sw™chD©a
;

1861 
u4
 
‹¡V®
;

1862 
s4
 
off£t
;

1864 
v¤c1
 = 
	`INST_AA
(
š¡
);

1865 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1866 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

1867 
sw™chD©a
 = 
pc
 + 
off£t
;

1868 #iâdeà
NDEBUG


1869 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

1870 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1873 
	`EXPORT_PC
();

1874 
	`dvmThrowIÁ”ÇlE¼Ü
("bad sparse switch");

1875 
	`GOTO_exû±iÚThrown
();

1878 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

1880 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

1881 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

1882 ià(
off£t
 <= 0)

1883 
	`PERIODIC_CHECKS
(
off£t
);

1884 
	`FINISH
(
off£t
);

1885 
	}
}

1886 
OP_END


1889 
HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

1890 
OP_END


1893 
HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

1894 
OP_END


1897 
HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

1898 
OP_END


1901 
HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

1902 
OP_END


1905 
HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

1906 
OP_END


1909 
HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

1910 
OP_END


1913 
HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

1914 
OP_END


1917 
HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

1918 
OP_END


1921 
HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

1922 
OP_END


1925 
HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

1926 
OP_END


1929 
HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

1930 
OP_END


1933 
HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

1934 
OP_END


1937 
HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

1938 
OP_END


1941 
HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

1942 
OP_END


1945 
HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

1946 
OP_END


1949 
HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

1950 
OP_END


1953 
HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

1954 
OP_END


1957 
	$HANDLE_OPCODE
(
OP_UNUSED_3E
)

1958 
OP_END


1961 
	$HANDLE_OPCODE
(
OP_UNUSED_3F
)

1962 
OP_END


1965 
	$HANDLE_OPCODE
(
OP_UNUSED_40
)

1966 
OP_END


1969 
	$HANDLE_OPCODE
(
OP_UNUSED_41
)

1970 
OP_END


1973 
	$HANDLE_OPCODE
(
OP_UNUSED_42
)

1974 
OP_END


1977 
	$HANDLE_OPCODE
(
OP_UNUSED_43
)

1978 
OP_END


1981 
	`HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

1982 
OP_END


1985 
	`HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

1986 
OP_END


1989 
	`HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

1990 
OP_END


1993 
	`HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

1994 
OP_END


1997 
	`HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

1998 
OP_END


2001 
	`HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2002 
OP_END


2005 
	`HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2006 
OP_END


2009 
	`HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2010 
OP_END


2013 
	`HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2014 
OP_END


2017 
	$HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

2019 
A¼ayObjeù
* 
¬¿yObj
;

2020 
Objeù
* 
obj
;

2021 
u2
 
¬¿yInfo
;

2022 
	`EXPORT_PC
();

2023 
vd¡
 = 
	`INST_AA
(
š¡
);

2024 
¬¿yInfo
 = 
	`FETCH
(1);

2025 
v¤c1
 = 
¬¿yInfo
 & 0xff;

2026 
v¤c2
 = 
¬¿yInfo
 >> 8;

2027 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

2028 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2029 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

2030 
	`GOTO_exû±iÚThrown
();

2031 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

2032 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(

2033 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
));

2034 
	`GOTO_exû±iÚThrown
();

2036 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

2037 ià(
obj
 !ğ
NULL
) {

2038 ià(!
	`checkFÜNuÎ
(
obj
))

2039 
	`GOTO_exû±iÚThrown
();

2040 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz)) {

2041 
	`ALOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)",

2042 
obj
->
şazz
->
desütÜ
, obj,

2043 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2044 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz);

2045 
	`GOTO_exû±iÚThrown
();

2048 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

2049 
	`dvmS‘ObjeùA¼ayEËm’t
(
¬¿yObj
,

2050 
	`GET_REGISTER
(
v¤c2
),

2051 (
Objeù
 *)
	`GET_REGISTER
(
vd¡
));

2052 
	}
}

2053 
FINISH
(2);

2054 
OP_END


2057 
HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2058 
OP_END


2061 
HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2062 
OP_END


2065 
HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2066 
OP_END


2069 
HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2070 
OP_END


2073 
HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2074 
OP_END


2077 
HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2078 
OP_END


2081 
HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2082 
OP_END


2085 
HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2086 
OP_END


2089 
HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2090 
OP_END


2093 
HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2094 
OP_END


2097 
HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2098 
OP_END


2101 
HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2102 
OP_END


2105 
HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2106 
OP_END


2120 
HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2121 
OP_END


2124 
HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2125 
OP_END


2128 
HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2129 
OP_END


2132 
HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2133 
OP_END


2136 
HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2137 
OP_END


2140 
HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2141 
OP_END


2144 
HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2145 
OP_END


2148 
HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2149 
OP_END


2152 
HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2153 
OP_END


2156 
HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2157 
OP_END


2160 
HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2161 
OP_END


2164 
HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2165 
OP_END


2168 
HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2169 
OP_END


2172 
HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2173 
OP_END


2176 
HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2177 
OP_END


2180 
HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2181 
OP_END


2184 
HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2185 
OP_END


2188 
HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2189 
OP_END


2192 
HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2193 
OP_END


2196 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2197 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

2198 
OP_END


2201 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2202 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

2203 
OP_END


2206 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2207 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

2208 
OP_END


2211 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2212 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

2213 
OP_END


2216 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2217 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

2218 
OP_END


2221 
	$HANDLE_OPCODE
(
OP_UNUSED_73
)

2222 
OP_END


2225 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2226 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

2227 
OP_END


2230 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2231 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

2232 
OP_END


2235 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2236 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2237 
OP_END


2240 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2241 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

2242 
OP_END


2245 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2246 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

2247 
OP_END


2250 
	$HANDLE_OPCODE
(
OP_UNUSED_79
)

2251 
OP_END


2254 
	$HANDLE_OPCODE
(
OP_UNUSED_7A
)

2255 
OP_END


2258 
	`HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2259 
OP_END


2262 
	`HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2263 
OP_END


2266 
	`HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2267 
OP_END


2270 
	`HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2271 
OP_END


2274 
	`HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2275 
OP_END


2278 
	`HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2279 
OP_END


2282 
	`HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2283 
OP_END


2286 
	`HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2287 
OP_END


2290 
	`HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2291 
OP_END


2294 
	`HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2295 
OP_END


2298 
	`HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2299 
OP_END


2302 
	`HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2303 
OP_END


2306 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2307 , 
_FLOAT
, 
s4
, 
_INT
)

2308 
OP_END


2311 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2312 , 
_FLOAT
, 
s8
, 
_WIDE
)

2313 
OP_END


2316 
	`HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2317 
OP_END


2320 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2321 , 
_DOUBLE
, 
s4
, 
_INT
)

2322 
OP_END


2325 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2326 , 
_DOUBLE
, 
s8
, 
_WIDE
)

2327 
OP_END


2330 
	`HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2331 
OP_END


2334 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2335 
OP_END


2338 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2339 
OP_END


2342 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2343 
OP_END


2346 
	`HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2347 
OP_END


2350 
	`HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2351 
OP_END


2354 
	`HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2355 
OP_END


2358 
	`HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2359 
OP_END


2362 
	`HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2363 
OP_END


2366 
	`HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2367 
OP_END


2370 
	`HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2371 
OP_END


2374 
	`HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2375 
OP_END


2378 
	`HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2379 
OP_END


2382 
	`HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2383 
OP_END


2386 
	`HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2387 
OP_END


2390 
	`HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2391 
OP_END


2394 
	`HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2395 
OP_END


2398 
	`HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2399 
OP_END


2402 
	`HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2403 
OP_END


2406 
	`HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2407 
OP_END


2410 
	`HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2411 
OP_END


2414 
	`HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2415 
OP_END


2418 
	`HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2419 
OP_END


2422 
	`HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2423 
OP_END


2426 
	`HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2427 
OP_END


2430 
	`HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2431 
OP_END


2434 
	`HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2435 
OP_END


2438 
	`HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2439 
OP_END


2442 
	`HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2443 
OP_END


2446 
	`HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2447 
OP_END


2450 
	$HANDLE_OPCODE
(
OP_REM_FLOAT
 )

2452 
u2
 
¤cRegs
;

2453 
vd¡
 = 
	`INST_AA
(
š¡
);

2454 
¤cRegs
 = 
	`FETCH
(1);

2455 
v¤c1
 = 
¤cRegs
 & 0xff;

2456 
v¤c2
 = 
¤cRegs
 >> 8;

2457 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2458 
	`SET_REGISTER_FLOAT
(
vd¡
,

2459 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

2460 
	}
}

2461 
FINISH
(2);

2462 
OP_END


2465 
HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2466 
OP_END


2469 
HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2470 
OP_END


2473 
HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2474 
OP_END


2477 
HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2478 
OP_END


2481 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

2483 
u2
 
¤cRegs
;

2484 
vd¡
 = 
	`INST_AA
(
š¡
);

2485 
¤cRegs
 = 
	`FETCH
(1);

2486 
v¤c1
 = 
¤cRegs
 & 0xff;

2487 
v¤c2
 = 
¤cRegs
 >> 8;

2488 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2489 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2490 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

2491 
	}
}

2492 
FINISH
(2);

2493 
OP_END


2496 
HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

2497 
OP_END


2500 
HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

2501 
OP_END


2504 
HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

2505 
OP_END


2508 
HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

2509 
OP_END


2512 
HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

2513 
OP_END


2516 
HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

2517 
OP_END


2520 
HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

2521 
OP_END


2524 
HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

2525 
OP_END


2528 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

2529 
OP_END


2532 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

2533 
OP_END


2536 
HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

2537 
OP_END


2540 
HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

2541 
OP_END


2544 
HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

2545 
OP_END


2548 
HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

2549 
OP_END


2552 
HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

2553 
OP_END


2556 
HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

2557 
OP_END


2560 
HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

2561 
OP_END


2564 
HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

2565 
OP_END


2568 
HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

2569 
OP_END


2572 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

2573 
OP_END


2576 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

2577 
OP_END


2580 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

2581 
OP_END


2584 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

2585 
OP_END


2588 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

2589 
OP_END


2592 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

2593 
OP_END


2596 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

2597 
OP_END


2600 
	$HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

2601 
vd¡
 = 
	`INST_A
(
š¡
);

2602 
v¤c1
 = 
	`INST_B
(
š¡
);

2603 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

2604 
	`SET_REGISTER_FLOAT
(
vd¡
,

2605 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

2606 
	`FINISH
(1);

2607 
OP_END


2610 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

2611 
OP_END


2614 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

2615 
OP_END


2618 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

2619 
OP_END


2622 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

2623 
OP_END


2626 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

2627 
vd¡
 = 
	`INST_A
(
š¡
);

2628 
v¤c1
 = 
	`INST_B
(
š¡
);

2629 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

2630 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2631 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

2632 
	`FINISH
(1);

2633 
OP_END


2636 
	`HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

2637 
OP_END


2640 
	$HANDLE_OPCODE
(
OP_RSUB_INT
 )

2642 
vd¡
 = 
	`INST_A
(
š¡
);

2643 
v¤c1
 = 
	`INST_B
(
š¡
);

2644 
v¤c2
 = 
	`FETCH
(1);

2645 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

2646 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

2647 
	}
}

2648 
FINISH
(2);

2649 
OP_END


2652 
HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

2653 
OP_END


2656 
HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

2657 
OP_END


2660 
HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

2661 
OP_END


2664 
HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

2665 
OP_END


2668 
HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

2669 
OP_END


2672 
HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

2673 
OP_END


2676 
HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

2677 
OP_END


2680 
	$HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

2682 
u2
 
l™Info
;

2683 
vd¡
 = 
	`INST_AA
(
š¡
);

2684 
l™Info
 = 
	`FETCH
(1);

2685 
v¤c1
 = 
l™Info
 & 0xff;

2686 
v¤c2
 = 
l™Info
 >> 8;

2687 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

2688 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

2689 
	}
}

2690 
FINISH
(2);

2691 
OP_END


2694 
HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

2695 
OP_END


2698 
HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

2699 
OP_END


2702 
HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

2703 
OP_END


2706 
HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

2707 
OP_END


2710 
HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

2711 
OP_END


2714 
HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

2715 
OP_END


2718 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

2719 
OP_END


2722 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

2723 
OP_END


2726 
HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

2727 
OP_END


2730 
HANDLE_IGET_X
(
OP_IGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2731 
OP_END


2734 
HANDLE_IPUT_X
(
OP_IPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2735 
OP_END


2738 
HANDLE_SGET_X
(
OP_SGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2739 
OP_END


2742 
HANDLE_SPUT_X
(
OP_SPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2743 
OP_END


2746 
HANDLE_IGET_X
(
OP_IGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2747 
OP_END


2750 
HANDLE_IGET_X
(
OP_IGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2751 
OP_END


2754 
HANDLE_IPUT_X
(
OP_IPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2755 
OP_END


2758 
HANDLE_SGET_X
(
OP_SGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2759 
OP_END


2762 
HANDLE_SPUT_X
(
OP_SPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2763 
OP_END


2766 
	$HANDLE_OPCODE
(
OP_BREAKPOINT
)

2783 
u1
 
Üigš®Opcode
 = 
	`dvmG‘Origš®Opcode
(
pc
);

2784 
	`ALOGV
("+++ b»ak 0x%02x (0x%04x -> 0x%04x)", 
Üigš®Opcode
, 
š¡
,

2785 
	`INST_REPLACE_OP
(
š¡
, 
Üigš®Opcode
));

2786 
š¡
 = 
	`INST_REPLACE_OP
(š¡, 
Üigš®Opcode
);

2787 
	`FINISH_BKPT
(
Üigš®Opcode
);

2788 
	}
}

2789 
OP_END


2792 
	$HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

2793 
	`EXPORT_PC
();

2794 
v¤c1
 = 
	`INST_AA
(
š¡
);

2795 
»f
 = 
	`FETCH
(1);

2796 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

2797 
	`GOTO_exû±iÚThrown
();

2798 
OP_END


2801 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

2819 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

2820 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

2822 
	`EXPORT_PC
();

2824 
v¤c1
 = 
	`INST_B
(
š¡
);

2825 
»f
 = 
	`FETCH
(1);

2826 
vd¡
 = 
	`FETCH
(2);

2827 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

2828 
v¤c1
, 
»f
, 
vd¡
);

2830 
	`as£¹
((
vd¡
 >> 16) == 0);

2831 
	`as£¹
(
v¤c1
 <= 4);

2833 
v¤c1
) {

2835 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

2838 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2841 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2844 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2850 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2851 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2852 
	`GOTO_exû±iÚThrown
();

2854 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2855 
	`GOTO_exû±iÚThrown
();

2857 
	}
}

2858 
FINISH
(3);

2859 
OP_END


2862 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE_RANGE
 )

2864 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

2865 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

2867 
	`EXPORT_PC
();

2869 
v¤c1
 = 
	`INST_AA
(
š¡
);

2870 
»f
 = 
	`FETCH
(1);

2871 
vd¡
 = 
	`FETCH
(2);

2872 
	`ILOGV
("|execute-inline-range‡rgs=%d @%d {regs=v%d-v%d}",

2873 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

2875 
	`as£¹
((
vd¡
 >> 16) == 0);

2876 
	`as£¹
(
v¤c1
 <= 4);

2878 
v¤c1
) {

2880 
¬g3
 = 
	`GET_REGISTER
(
vd¡
+3);

2883 
¬g2
 = 
	`GET_REGISTER
(
vd¡
+2);

2886 
¬g1
 = 
	`GET_REGISTER
(
vd¡
+1);

2889 
¬g0
 = 
	`GET_REGISTER
(
vd¡
+0);

2895 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2896 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2897 
	`GOTO_exû±iÚThrown
();

2899 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2900 
	`GOTO_exû±iÚThrown
();

2902 
	}
}

2903 
FINISH
(3);

2904 
OP_END


2907 
	$HANDLE_OPCODE
(
OP_INVOKE_OBJECT_INIT_RANGE
 )

2909 
Objeù
* 
obj
;

2911 
v¤c1
 = 
	`FETCH
(2);

2912 
obj
 = 
	`GET_REGISTER_AS_OBJECT
(
v¤c1
);

2914 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2915 
	`GOTO_exû±iÚThrown
();

2922 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
)) {

2923 
	`EXPORT_PC
();

2924 
	`dvmS‘Fš®izabË
(
obj
);

2925 ià(
	`dvmG‘Exû±iÚ
(
£lf
))

2926 
	`GOTO_exû±iÚThrown
();

2929 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2931 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2933 
	`FINISH
(3);

2934 
	}
}

2935 
OP_END


2938 
	$HANDLE_OPCODE
(
OP_RETURN_VOID_BARRIER
 )

2939 
	`ILOGV
("|return-void");

2940 #iâdeà
NDEBUG


2941 
»tv®
.
j
 = 0xababababULL;

2943 
	`ANDROID_MEMBAR_STORE
();

2944 
	`GOTO_»tuºFromM‘hod
();

2945 
OP_END


2948 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

2949 
OP_END


2952 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2953 
OP_END


2956 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2957 
OP_END


2960 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

2961 
OP_END


2964 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2965 
OP_END


2968 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2969 
OP_END


2972 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

2973 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

2974 
OP_END


2977 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

2978 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

2979 
OP_END


2982 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

2983 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

2984 
OP_END


2987 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

2988 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

2989 
OP_END


2992 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2993 
OP_END


2996 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2997 
OP_END


3000 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

3001 
OP_END


3004 
	$HANDLE_OPCODE
(
OP_UNUSED_FF
)

3008 
	`ALOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

3009 
	`dvmAbÜt
();

3010 
	`FINISH
(1);

3011 
OP_END


3017 #undeà
H


3018 
	#H
(
_İ
è
dvmM‹½_
##
	)
_op

3019 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrs
)

3021 #undeà
H


3022 
	#H
(
_İ
è#_İ

	)

3023 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrNames
)

3025 
	~<£tjmp.h
>

3033 
	$dvmM‹½StdRun
(
Th»ad
* 
£lf
)

3035 
jmp_buf
 
jmpBuf
;

3037 
£lf
->
baPŒ
 = &
jmpBuf
;

3040 ià(
	`£tjmp
(
jmpBuf
)) {

3041 
	`LOGVV
("m‹½h»adid=%d„‘uºšg", 
	`dvmTh»adS–f
()->
th»adId
);

3046 
Œue
) {

3047 (*
	tHªdËr
)(
	tTh»ad
* 
	t£lf
);

3049 
u2
 
š¡
 = 
pc
[0];

3056 ià(
£lf
-
š‹½B»ak
.
ùl
.
subMode
) {

3057 
	`dvmCheckBefÜe
(
pc
, 
å
, 
£lf
, 
curM‘hod
);

3059 
HªdËr
 
hªdËr
 = (HªdËrè
gDvmM‹½HªdËrs
[
š¡
 & 0xff];

3060 (è
gDvmM‹½HªdËrNames
;

3061 
	`LOGVV
("handler %p %s",

3062 
hªdËr
, (cÚ¡ *è
gDvmM‹½HªdËrNames
[
š¡
 & 0xff]);

3063 (*
hªdËr
)(
£lf
);

3065 
	}
}

3070 
	$dvmM‹½StdBa
(
Th»ad
* 
£lf
)

3072 
jmp_buf
* 
pJmpBuf
 = 
£lf
->
baPŒ
;

3073 
	`lÚgjmp
(*
pJmpBuf
, 1);

3074 
	}
}

3087 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
, bool)

3089 
CÏssObjeù
* 
¬¿yCÏss
;

3090 
A¼ayObjeù
* 
ÃwA¼ay
;

3091 
u4
* 
cÚ‹Ás
;

3092 
ty³Ch
;

3093 
i
;

3094 
u4
 
¬g5
;

3096 
	`EXPORT_PC
();

3098 
»f
 = 
	`FETCH
(1);

3099 
vd¡
 = 
	`FETCH
(2);

3101 ià(
m‘hodC®lRªge
) {

3102 
v¤c1
 = 
	`INST_AA
(
š¡
);

3103 
¬g5
 = -1;

3104 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3105 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3107 
¬g5
 = 
	`INST_A
(
š¡
);

3108 
v¤c1
 = 
	`INST_B
(
š¡
);

3109 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

3110 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

3116 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

3117 ià(
¬¿yCÏss
 =ğ
NULL
) {

3118 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

3119 ià(
¬¿yCÏss
 =ğ
NULL
)

3120 
	`GOTO_exû±iÚThrown
();

3130 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

3131 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

3136 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'", 
¬¿yCÏss
->
desütÜ
);

3137 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

3138 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

3140 
	`dvmThrowRuÁimeExû±iÚ
("bad filled‡rray„eq");

3141 
	`GOTO_exû±iÚThrown
();

3142 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

3144 
	`ALOGE
("non-int…rimitives‚ot implemented");

3145 
	`dvmThrowIÁ”ÇlE¼Ü
(

3147 
	`GOTO_exû±iÚThrown
();

3150 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

3151 ià(
ÃwA¼ay
 =ğ
NULL
)

3152 
	`GOTO_exû±iÚThrown
();

3157 
cÚ‹Ás
 = (
u4
*)(*)
ÃwA¼ay
->contents;

3158 ià(
m‘hodC®lRªge
) {

3159 
i
 = 0; i < 
v¤c1
; i++)

3160 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3162 
	`as£¹
(
v¤c1
 <= 5);

3163 ià(
v¤c1
 == 5) {

3164 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

3165 
v¤c1
--;

3167 
i
 = 0; i < 
v¤c1
; i++) {

3168 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3169 
vd¡
 >>= 4;

3172 ià(
ty³Ch
 == 'L' ||ypeCh == '[') {

3173 
	`dvmWr™eB¬r›rA¼ay
(
ÃwA¼ay
, 0,‚ewA¼ay->
Ëngth
);

3176 
»tv®
.
l
 = (
Objeù
*)
ÃwA¼ay
;

3177 
	}
}

3178 
FINISH
(3);

3179 
GOTO_TARGET_END


3182 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
, bool)

3184 
M‘hod
* 
ba£M‘hod
;

3185 
Objeù
* 
thisPŒ
;

3187 
	`EXPORT_PC
();

3189 
v¤c1
 = 
	`INST_AA
(
š¡
);

3190 
»f
 = 
	`FETCH
(1);

3191 
vd¡
 = 
	`FETCH
(2);

3197 ià(
m‘hodC®lRªge
) {

3198 
	`as£¹
(
v¤c1
 > 0);

3199 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3200 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3201 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3203 
	`as£¹
((
v¤c1
>>4) > 0);

3204 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

3205 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3206 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3209 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3210 
	`GOTO_exû±iÚThrown
();

3216 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3217 ià(
ba£M‘hod
 =ğ
NULL
) {

3218 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3219 ià(
ba£M‘hod
 =ğ
NULL
) {

3220 
	`ILOGV
("+ unknown method or‡ccess denied");

3221 
	`GOTO_exû±iÚThrown
();

3229 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3230 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3232 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3233 
£lf
->
m‘hodToC®l
 = methodToCall;

3234 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

3238 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3248 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3249 
	`GOTO_exû±iÚThrown
();

3252 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3253 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3256 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s",

3257 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3258 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3259 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3260 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3263 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

3264 
	`ALOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s",

3265 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3266 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3267 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3270 
	`dvmDumpAÎCÏs£s
(0);

3274 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3275 
	}
}

3276 
GOTO_TARGET_END


3278 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

3280 
M‘hod
* 
ba£M‘hod
;

3281 
u2
 
thisReg
;

3283 
	`EXPORT_PC
();

3285 
v¤c1
 = 
	`INST_AA
(
š¡
);

3286 
»f
 = 
	`FETCH
(1);

3287 
vd¡
 = 
	`FETCH
(2);

3289 ià(
m‘hodC®lRªge
) {

3290 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3291 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3292 
thisReg
 = 
vd¡
;

3294 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

3295 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3296 
thisReg
 = 
vd¡
 & 0x0f;

3300 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3301 
	`GOTO_exû±iÚThrown
();

3310 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3311 ià(
ba£M‘hod
 =ğ
NULL
) {

3312 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3313 ià(
ba£M‘hod
 =ğ
NULL
) {

3314 
	`ILOGV
("+ unknown method or‡ccess denied");

3315 
	`GOTO_exû±iÚThrown
();

3328 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3333 
	`dvmThrowNoSuchM‘hodE¼Ü
(
ba£M‘hod
->
Çme
);

3334 
	`GOTO_exû±iÚThrown
();

3336 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3339 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3340 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3341 
	`GOTO_exû±iÚThrown
();

3344 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3345 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3347 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s",

3348 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3349 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3350 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3352 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3353 
	}
}

3354 
GOTO_TARGET_END


3356 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

3358 
Objeù
* 
thisPŒ
;

3359 
CÏssObjeù
* 
thisCÏss
;

3361 
	`EXPORT_PC
();

3363 
v¤c1
 = 
	`INST_AA
(
š¡
);

3364 
»f
 = 
	`FETCH
(1);

3365 
vd¡
 = 
	`FETCH
(2);

3371 ià(
m‘hodC®lRªge
) {

3372 
	`as£¹
(
v¤c1
 > 0);

3373 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3374 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3375 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3377 
	`as£¹
((
v¤c1
>>4) > 0);

3378 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

3379 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3380 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3383 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3384 
	`GOTO_exû±iÚThrown
();

3386 
thisCÏss
 = 
thisPŒ
->
şazz
;

3392 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

3393 
m‘hodCÏssDex
);

3394 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3395 
£lf
->
ÿÎs™eCÏss
 = 
thisCÏss
;

3396 
£lf
->
m‘hodToC®l
 = methodToCall;

3398 ià(
m‘hodToC®l
 =ğ
NULL
) {

3399 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3400 
	`GOTO_exû±iÚThrown
();

3403 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3404 
	}
}

3405 
GOTO_TARGET_END


3407 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

3409 
u2
 
thisReg
;

3411 
	`EXPORT_PC
();

3413 
v¤c1
 = 
	`INST_AA
(
š¡
);

3414 
»f
 = 
	`FETCH
(1);

3415 
vd¡
 = 
	`FETCH
(2);

3417 ià(
m‘hodC®lRªge
) {

3418 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3419 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3420 
thisReg
 = 
vd¡
;

3422 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

3423 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3424 
thisReg
 = 
vd¡
 & 0x0f;

3427 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3428 
	`GOTO_exû±iÚThrown
();

3430 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3431 ià(
m‘hodToC®l
 =ğ
NULL
) {

3432 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

3433 
METHOD_DIRECT
);

3434 ià(
m‘hodToC®l
 =ğ
NULL
) {

3435 
	`ILOGV
("+ unknown direct method");

3436 
	`GOTO_exû±iÚThrown
();

3439 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3440 
	}
}

3441 
GOTO_TARGET_END


3443 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

3444 
	`EXPORT_PC
();

3446 
v¤c1
 = 
	`INST_AA
(
š¡
);

3447 
»f
 = 
	`FETCH
(1);

3448 
vd¡
 = 
	`FETCH
(2);

3450 ià(
m‘hodC®lRªge
)

3451 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3452 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3454 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

3455 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3457 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3458 ià(
m‘hodToC®l
 =ğ
NULL
) {

3459 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

3460 ià(
m‘hodToC®l
 =ğ
NULL
) {

3461 
	`ILOGV
("+ unknown method");

3462 
	`GOTO_exû±iÚThrown
();

3465 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3471 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

3472 (
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
)) {

3474 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

3477 
	}
}

3478 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3479 
GOTO_TARGET_END


3481 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

3483 
Objeù
* 
thisPŒ
;

3485 
	`EXPORT_PC
();

3487 
v¤c1
 = 
	`INST_AA
(
š¡
);

3488 
»f
 = 
	`FETCH
(1);

3489 
vd¡
 = 
	`FETCH
(2);

3495 ià(
m‘hodC®lRªge
) {

3496 
	`as£¹
(
v¤c1
 > 0);

3497 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3498 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3499 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3501 
	`as£¹
((
v¤c1
>>4) > 0);

3502 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3503 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3504 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3507 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3508 
	`GOTO_exû±iÚThrown
();

3515 
	`as£¹
(
»f
 < (è
thisPŒ
->
şazz
->
vbËCouÁ
);

3516 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

3517 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3518 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

3519 
£lf
->
m‘hodToC®l
 = methodToCall;

3523 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3524 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3525 
	`GOTO_exû±iÚThrown
();

3528 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3529 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3532 
	`LOGVV
("+++ virtual[%d]=%s.%s",

3533 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3534 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3536 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3537 
	}
}

3538 
GOTO_TARGET_END


3540 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

3542 
u2
 
thisReg
;

3544 
	`EXPORT_PC
();

3546 
v¤c1
 = 
	`INST_AA
(
š¡
);

3547 
»f
 = 
	`FETCH
(1);

3548 
vd¡
 = 
	`FETCH
(2);

3550 ià(
m‘hodC®lRªge
) {

3551 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3552 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3553 
thisReg
 = 
vd¡
;

3555 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3556 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3557 
thisReg
 = 
vd¡
 & 0x0f;

3560 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3561 
	`GOTO_exû±iÚThrown
();

3564 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3565 
	`dvmThrowNoSuchM‘hodE¼Ü
(
NULL
);

3566 
	`GOTO_exû±iÚThrown
();

3569 
	`as£¹
(
»f
 < (è
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

3581 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

3584 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3585 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3586 
	`GOTO_exû±iÚThrown
();

3589 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3590 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3592 
	`LOGVV
("+++ super-virtual[%d]=%s.%s",

3593 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3594 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3595 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3596 
	}
}

3597 
GOTO_TARGET_END


3604 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

3606 
SckSaveA»a
* 
§veA»a
;

3615 
	`PERIODIC_CHECKS
(0);

3617 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

3618 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

3619 
curM‘hod
->
shÜty
);

3622 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

3624 #ifdeà
EASY_GDB


3625 
debugSaveA»a
 = 
§veA»a
;

3629 
å
 = (
u4
*)
§veA»a
->
´evF¿me
;

3630 
	`as£¹
(
å
 !ğ
NULL
);

3633 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3634 
	`PC_FP_TO_SELF
();

3635 
	`dvmR•ÜtR‘uº
(
£lf
);

3638 ià(
	`dvmIsB»akF¿me
(
å
)) {

3640 
	`LOGVV
("+++„eturned into break frame");

3641 
	`GOTO_ba
();

3645 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

3646 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3647 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

3649 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3650 
pc
 = 
§veA»a
->
§vedPc
;

3651 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

3652 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3656 ià(
Œue


3659 
	`FINISH
(3);

3663 
	`as£¹
(
çl£
);

3665 
	}
}

3666 
GOTO_TARGET_END


3675 
	$GOTO_TARGET
(
exû±iÚThrown
)

3677 
Objeù
* 
exû±iÚ
;

3678 
ÿtchR–Pc
;

3680 
	`PERIODIC_CHECKS
(0);

3688 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3689 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

3690 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3691 
	`dvmCË¬Exû±iÚ
(
£lf
);

3693 
	`ALOGV
("Handlingƒxception %s‡t %s:%d",

3694 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

3695 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

3711 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3712 
	`PC_FP_TO_SELF
();

3713 
	`dvmR•ÜtExû±iÚThrow
(
£lf
, 
exû±iÚ
);

3731 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

3732 
exû±iÚ
, 
çl£
, (**)(*)&
å
);

3755 ià(
£lf
->
¡ackOv”æowed
)

3756 
	`dvmCËªupSckOv”æow
(
£lf
, 
exû±iÚ
);

3758 ià(
ÿtchR–Pc
 < 0) {

3760 #ià
DVM_SHOW_EXCEPTION
 >= 2

3761 
	`ALOGD
("Exception %s from %s:%d‚ot caught†ocally",

3762 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

3763 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

3765 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

3766 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3767 
	`GOTO_ba
();

3770 #ià
DVM_SHOW_EXCEPTION
 >= 3

3772 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3773 
	`ALOGD
("Exception %shrown from %s:%do %s:%d",

3774 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

3775 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

3776 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

3777 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

3786 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3787 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

3789 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3790 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

3791 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

3792 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3793 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

3807 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

3808 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

3810 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3811 
	`FINISH
(0);

3812 
	}
}

3813 
GOTO_TARGET_END


3834 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

3835 
u2
 
couÁ
, u2 
»gs
)

3837 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

3844 
u4
* 
outs
;

3845 
i
;

3850 ià(
m‘hodC®lRªge
) {

3853 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

3854 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

3855 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

3856 
i
 = 0; i < 
v¤c1
; i++)

3857 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3859 
u4
 
couÁ
 = 
v¤c1
 >> 4;

3861 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

3862 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

3863 
	`as£¹
(
couÁ
 <= 5);

3865 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

3867 ià(
couÁ
 == 5) {

3868 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

3869 
couÁ
--;

3871 
i
 = 0; i < (è
couÁ
; i++) {

3872 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3873 
vd¡
 >>= 4;

3878 
	`as£¹
((
vd¡
 >> 16) == 0);

3879 
couÁ
) {

3881 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

3883 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

3885 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

3887 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

3889 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3895 
	}
}

3906 
SckSaveA»a
* 
	gÃwSaveA»a
;

3907 
u4
* 
	gÃwFp
;

3909 
ILOGV
("> %s%s.%s %s",

3910 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

3911 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

3912 
m‘hodToC®l
->
shÜty
);

3914 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

3915 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

3918 ià(
	gŒue
) {

3919 
u1
* 
	gbÙtom
;

3920 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

3921 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

3923 
ALOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p(%d) size=%d '%s')",

3924 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

3925 (
u1
*è
å
 - 
bÙtom
, 
£lf
->
š‹½SckSize
,

3926 
m‘hodToC®l
->
Çme
);

3927 
dvmHªdËSckOv”æow
(
£lf
, 
m‘hodToC®l
);

3928 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

3929 
GOTO_exû±iÚThrown
();

3935 #ifdeà
LOG_INSTR


3936 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

3943 
mem£t
(
ÃwFp
, 0xcc,

3944 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

3948 #ifdeà
EASY_GDB


3949 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

3951 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

3952 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

3953 #ià
defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3954 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

3956 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

3958 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

3964 
PC_TO_SELF
();

3965 
dvmR•ÜtInvoke
(
£lf
, 
m‘hodToC®l
);

3968 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

3973 
	gcurM‘hod
 = 
m‘hodToC®l
;

3974 
	g£lf
->
	gš‹½Save
.
	gm‘hod
 = 
curM‘hod
;

3975 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3976 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

3977 
	gå
 = 
ÃwFp
;

3978 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

3979 #ifdeà
EASY_GDB


3980 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

3982 
	g£lf
->
	gdebugIsM‘hodEÁry
 = 
Œue
;

3983 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

3984 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3985 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

3986 
FINISH
(0);

3989 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

3991 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
ÃwFp
;

3993 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

3995 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

3996 
dvmR•ÜtP»N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

3999 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

4000 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

4007 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

4009 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

4010 
dvmR•ÜtPo¡N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

4014 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

4015 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

4022 ià(
dvmCheckExû±iÚ
(
£lf
)) {

4023 
ALOGV
("Exceptionhrown by/below‚ative code");

4024 
GOTO_exû±iÚThrown
();

4027 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

4028 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

4029 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4030 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4031 
curM‘hod
->
shÜty
);

4034 ià(
	gŒue


4037 
FINISH
(3);

4041 
as£¹
(
çl£
);

4045 
as£¹
(
çl£
);

4046 
	gGOTO_TARGET_END


4051 #undeà
»tv®


4052 #undeà
pc


4053 #undeà
å


4054 #undeà
curM‘hod


4055 #undeà
m‘hodCÏssDex


4056 #undeà
£lf


4057 #undeà
debugT¿ckedRefS¹


	@vm/mterp/out/InterpC-armv5te-vfp.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1158 #undeà
»tv®


1159 #undeà
pc


1160 #undeà
å


1161 #undeà
curM‘hod


1162 #undeà
m‘hodCÏssDex


1163 #undeà
£lf


1164 #undeà
debugT¿ckedRefS¹


1167 
	~<š‰y³s.h
>

1177 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1180 #iâdeà
__şªg__


1181 
ušt32_t
 
rPC
 
	`asm
("r4");

1182 
ušt32_t
 
rFP
 
	`asm
("r5");

1183 
ušt32_t
 
rSELF
 
	`asm
("r6");

1184 
ušt32_t
 
rINST
 
	`asm
("r7");

1185 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1186 
ušt32_t
 
r9
 
	`asm
("r9");

1187 
ušt32_t
 
r10
 
	`asm
("r10");

1191 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1192 
	`´štf
(" :„PC=%08x„FP=%08x„SELF=%08x„INST=%08x\n",

1193 
rPC
, 
rFP
, 
rSELF
, 
rINST
);

1194 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1199 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1205 
	}
}

1210 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1212 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1213 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1214 #ifdeà
EASY_GDB


1215 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1216 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1217 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1219 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1220 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1221 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1222 *(
u4
*)
å
);

1224 
	}
}

1229 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1235 
boŞ
 
isDœeù
 =

1236 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1237 (
m‘hod
->
Çme
[0] == '<');

1239 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1241 
	`´štf
("<%c:%s.%s %s> ",

1242 
isDœeù
 ? 'D' : 'V',

1243 
m‘hod
->
şazz
->
desütÜ
,

1244 
m‘hod
->
Çme
,

1245 
desc
);

1247 
	`ä“
(
desc
);

1248 
	}
}

	@vm/mterp/out/InterpC-armv5te.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1158 #undeà
»tv®


1159 #undeà
pc


1160 #undeà
å


1161 #undeà
curM‘hod


1162 #undeà
m‘hodCÏssDex


1163 #undeà
£lf


1164 #undeà
debugT¿ckedRefS¹


1167 
	~<š‰y³s.h
>

1177 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1180 #iâdeà
__şªg__


1181 
ušt32_t
 
rPC
 
	`asm
("r4");

1182 
ušt32_t
 
rFP
 
	`asm
("r5");

1183 
ušt32_t
 
rSELF
 
	`asm
("r6");

1184 
ušt32_t
 
rINST
 
	`asm
("r7");

1185 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1186 
ušt32_t
 
r9
 
	`asm
("r9");

1187 
ušt32_t
 
r10
 
	`asm
("r10");

1191 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1192 
	`´štf
(" :„PC=%08x„FP=%08x„SELF=%08x„INST=%08x\n",

1193 
rPC
, 
rFP
, 
rSELF
, 
rINST
);

1194 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1199 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1205 
	}
}

1210 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1212 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1213 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1214 #ifdeà
EASY_GDB


1215 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1216 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1217 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1219 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1220 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1221 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1222 *(
u4
*)
å
);

1224 
	}
}

1229 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1235 
boŞ
 
isDœeù
 =

1236 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1237 (
m‘hod
->
Çme
[0] == '<');

1239 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1241 
	`´štf
("<%c:%s.%s %s> ",

1242 
isDœeù
 ? 'D' : 'V',

1243 
m‘hod
->
şazz
->
desütÜ
,

1244 
m‘hod
->
Çme
,

1245 
desc
);

1247 
	`ä“
(
desc
);

1248 
	}
}

	@vm/mterp/out/InterpC-armv7-a-neon.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1158 #undeà
»tv®


1159 #undeà
pc


1160 #undeà
å


1161 #undeà
curM‘hod


1162 #undeà
m‘hodCÏssDex


1163 #undeà
£lf


1164 #undeà
debugT¿ckedRefS¹


1167 
	~<š‰y³s.h
>

1177 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1180 #iâdeà
__şªg__


1181 
ušt32_t
 
rPC
 
	`asm
("r4");

1182 
ušt32_t
 
rFP
 
	`asm
("r5");

1183 
ušt32_t
 
rSELF
 
	`asm
("r6");

1184 
ušt32_t
 
rINST
 
	`asm
("r7");

1185 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1186 
ušt32_t
 
r9
 
	`asm
("r9");

1187 
ušt32_t
 
r10
 
	`asm
("r10");

1191 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1192 
	`´štf
(" :„PC=%08x„FP=%08x„SELF=%08x„INST=%08x\n",

1193 
rPC
, 
rFP
, 
rSELF
, 
rINST
);

1194 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1199 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1205 
	}
}

1210 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1212 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1213 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1214 #ifdeà
EASY_GDB


1215 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1216 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1217 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1219 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1220 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1221 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1222 *(
u4
*)
å
);

1224 
	}
}

1229 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1235 
boŞ
 
isDœeù
 =

1236 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1237 (
m‘hod
->
Çme
[0] == '<');

1239 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1241 
	`´štf
("<%c:%s.%s %s> ",

1242 
isDœeù
 ? 'D' : 'V',

1243 
m‘hod
->
şazz
->
desütÜ
,

1244 
m‘hod
->
Çme
,

1245 
desc
);

1247 
	`ä“
(
desc
);

1248 
	}
}

	@vm/mterp/out/InterpC-armv7-a.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1158 #undeà
»tv®


1159 #undeà
pc


1160 #undeà
å


1161 #undeà
curM‘hod


1162 #undeà
m‘hodCÏssDex


1163 #undeà
£lf


1164 #undeà
debugT¿ckedRefS¹


1167 
	~<š‰y³s.h
>

1177 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1180 #iâdeà
__şªg__


1181 
ušt32_t
 
rPC
 
	`asm
("r4");

1182 
ušt32_t
 
rFP
 
	`asm
("r5");

1183 
ušt32_t
 
rSELF
 
	`asm
("r6");

1184 
ušt32_t
 
rINST
 
	`asm
("r7");

1185 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1186 
ušt32_t
 
r9
 
	`asm
("r9");

1187 
ušt32_t
 
r10
 
	`asm
("r10");

1191 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1192 
	`´štf
(" :„PC=%08x„FP=%08x„SELF=%08x„INST=%08x\n",

1193 
rPC
, 
rFP
, 
rSELF
, 
rINST
);

1194 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1199 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1205 
	}
}

1210 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1212 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1213 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1214 #ifdeà
EASY_GDB


1215 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1216 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1217 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1219 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1220 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1221 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1222 *(
u4
*)
å
);

1224 
	}
}

1229 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1235 
boŞ
 
isDœeù
 =

1236 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1237 (
m‘hod
->
Çme
[0] == '<');

1239 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1241 
	`´štf
("<%c:%s.%s %s> ",

1242 
isDœeù
 ? 'D' : 'V',

1243 
m‘hod
->
şazz
->
desütÜ
,

1244 
m‘hod
->
Çme
,

1245 
desc
);

1247 
	`ä“
(
desc
);

1248 
	}
}

	@vm/mterp/out/InterpC-portable.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...)

	)

378 
	#GOTO_TARGET
(
_rg‘
, ...è_rg‘:

	)

380 
	#GOTO_TARGET_END


	)

383 
	#STUB_HACK
(
x
)

	)

384 
	#JIT_STUB_HACK
(
x
)

	)

392 
	#PC_FP_TO_SELF
() \

393 
£lf
->
š‹½Save
.
pc
 =…c; \

394 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

	)

395 
	#PC_TO_SELF
(è
£lf
->
š‹½Save
.
pc
 =…c;

	)

405 
	#H
(
_İ
è&&
İ_
##
	)
_op

406 
	#HANDLE_OPCODE
(
_İ
è
İ_
##_İ:

	)

407 
	#FINISH
(
_off£t
) { \

408 
	`ADJUST_PC
(
_off£t
); \

409 
š¡
 = 
	`FETCH
(0); \

410 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
) { \

411 
	`dvmCheckBefÜe
(
pc
, 
å
, 
£lf
); \

413 *
hªdËrTabË
[
	`INST_INST
(
š¡
)]; \

414 }

	)

415 
	#FINISH_BKPT
(
_İcode
) { \

416 *
hªdËrTabË
[
_İcode
]; \

417 }

	)

419 
	#OP_END


	)

426 
	#GOTO_exû±iÚThrown
(è
exû±iÚThrown
;

	)

428 
	#GOTO_»tuºFromM‘hod
(è
»tuºFromM‘hod
;

	)

430 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

432 
m‘hodC®lRªge
 = 
_m‘hodC®lRªge
; \

433 
_rg‘
; \

434 } 
çl£
)

	)

437 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
è
švokeM‘hod
;

	)

439 
	#GOTO_ba
(è
ba
;

	)

447 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

448 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

449 
	`EXPORT_PC
(); \

450 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

452 }

	)

456 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

457 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

458 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

459 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

460 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

461 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

462 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

463 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

464 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

465 
u2
 
couÁ
, u2 
»gs
);

466 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

467 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

481 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

482 
	`HANDLE_OPCODE
(
_İcode
 ) \

483 
vd¡
 = 
	`INST_A
(
š¡
); \

484 
v¤c1
 = 
	`INST_B
(
š¡
); \

485 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

486 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

487 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

488 
	`FINISH
(1);

	)

490 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

491 
_tovty³
, 
_tÜty³
) \

492 
	`HANDLE_OPCODE
(
_İcode
 ) \

495 
_äomvty³
 
v®
; \

496 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

497 
vd¡
 = 
	`INST_A
(
š¡
); \

498 
v¤c1
 = 
	`INST_B
(
š¡
); \

499 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

500 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

501 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

502 
štMax
 = ~
štMš
; \

503 
»suÉ
 = (
_tovty³
è
v®
; \

504 ià(
v®
 >ğ
štMax
) \

505 
»suÉ
 = 
štMax
; \

506 ià(
v®
 <ğ
štMš
) \

507 
»suÉ
 = 
štMš
; \

508 ià(
v®
 != val) \

509 
»suÉ
 = 0; \

511 
»suÉ
 = (
_tovty³
è
v®
; \

512 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

514 
	`FINISH
(1);

	)

516 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

517 
	`HANDLE_OPCODE
(
_İcode
 ) \

518 
vd¡
 = 
	`INST_A
(
š¡
); \

519 
v¤c1
 = 
	`INST_B
(
š¡
); \

520 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

521 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

522 
	`FINISH
(1);

	)

525 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

526 
	`HANDLE_OPCODE
(
_İcode
 ) \

528 
»suÉ
; \

529 
u2
 
»gs
; \

530 
_v¬Ty³
 
v®1
, 
v®2
; \

531 
vd¡
 = 
	`INST_AA
(
š¡
); \

532 
»gs
 = 
	`FETCH
(1); \

533 
v¤c1
 = 
»gs
 & 0xff; \

534 
v¤c2
 = 
»gs
 >> 8; \

535 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

536 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

537 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

538 ià(
v®1
 =ğ
v®2
) \

539 
»suÉ
 = 0; \

540 ià(
v®1
 < 
v®2
) \

541 
»suÉ
 = -1; \

542 ià(
v®1
 > 
v®2
) \

543 
»suÉ
 = 1; \

545 
»suÉ
 = (
_ÇnV®
); \

546 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

547 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

549 
	`FINISH
(2);

	)

551 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

552 
	`HANDLE_OPCODE
(
_İcode
 ) \

553 
v¤c1
 = 
	`INST_A
(
š¡
); \

554 
v¤c2
 = 
	`INST_B
(
š¡
); \

555 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

556 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

557 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

558 
b¿nchOff£t
); \

559 
	`ILOGV
("> branchaken"); \

560 ià(
b¿nchOff£t
 < 0) \

561 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

562 
	`FINISH
(
b¿nchOff£t
); \

564 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

565 
	`FINISH
(2); \

566 }

	)

568 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
v¤c1
 = 
	`INST_AA
(
š¡
); \

571 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

572 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

573 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

574 
	`ILOGV
("> branchaken"); \

575 ià(
b¿nchOff£t
 < 0) \

576 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

577 
	`FINISH
(
b¿nchOff£t
); \

579 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

580 
	`FINISH
(2); \

581 }

	)

583 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

584 
	`HANDLE_OPCODE
(
_İcode
 ) \

585 
vd¡
 = 
	`INST_A
(
š¡
); \

586 
v¤c1
 = 
	`INST_B
(
š¡
); \

587 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

588 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

589 
	`FINISH
(1);

	)

591 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

592 
	`HANDLE_OPCODE
(
_İcode
 ) \

594 
u2
 
¤cRegs
; \

595 
vd¡
 = 
	`INST_AA
(
š¡
); \

596 
¤cRegs
 = 
	`FETCH
(1); \

597 
v¤c1
 = 
¤cRegs
 & 0xff; \

598 
v¤c2
 = 
¤cRegs
 >> 8; \

599 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

600 ià(
_chkdiv
 != 0) { \

601 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

602 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

603 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

604 ià(
£cÚdV®
 == 0) { \

605 
	`EXPORT_PC
(); \

606 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

607 
	`GOTO_exû±iÚThrown
(); \

609 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

610 ià(
_chkdiv
 == 1) \

611 
»suÉ
 = 
fœ¡V®
; \

613 
»suÉ
 = 0; \

615 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

617 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

620 
	`SET_REGISTER
(
vd¡
, \

621 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

624 
	`FINISH
(2);

	)

626 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

627 
	`HANDLE_OPCODE
(
_İcode
 ) \

629 
u2
 
¤cRegs
; \

630 
vd¡
 = 
	`INST_AA
(
š¡
); \

631 
¤cRegs
 = 
	`FETCH
(1); \

632 
v¤c1
 = 
¤cRegs
 & 0xff; \

633 
v¤c2
 = 
¤cRegs
 >> 8; \

634 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

635 
	`SET_REGISTER
(
vd¡
, \

636 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

638 
	`FINISH
(2);

	)

640 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

641 
	`HANDLE_OPCODE
(
_İcode
 ) \

642 
vd¡
 = 
	`INST_A
(
š¡
); \

643 
v¤c1
 = 
	`INST_B
(
š¡
); \

644 
v¤c2
 = 
	`FETCH
(1); \

645 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

646 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

647 ià(
_chkdiv
 != 0) { \

648 
s4
 
fœ¡V®
, 
»suÉ
; \

649 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

650 ià((
s2
è
v¤c2
 == 0) { \

651 
	`EXPORT_PC
(); \

652 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

653 
	`GOTO_exû±iÚThrown
(); \

655 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

657 ià(
_chkdiv
 == 1) \

658 
»suÉ
 = 
fœ¡V®
; \

660 
»suÉ
 = 0; \

662 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

664 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

667 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

669 
	`FINISH
(2);

	)

671 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

672 
	`HANDLE_OPCODE
(
_İcode
 ) \

674 
u2
 
l™Info
; \

675 
vd¡
 = 
	`INST_AA
(
š¡
); \

676 
l™Info
 = 
	`FETCH
(1); \

677 
v¤c1
 = 
l™Info
 & 0xff; \

678 
v¤c2
 = 
l™Info
 >> 8; \

679 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

680 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

681 ià(
_chkdiv
 != 0) { \

682 
s4
 
fœ¡V®
, 
»suÉ
; \

683 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

684 ià((
s1
è
v¤c2
 == 0) { \

685 
	`EXPORT_PC
(); \

686 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

687 
	`GOTO_exû±iÚThrown
(); \

689 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

690 ià(
_chkdiv
 == 1) \

691 
»suÉ
 = 
fœ¡V®
; \

693 
»suÉ
 = 0; \

695 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

697 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

699 
	`SET_REGISTER
(
vd¡
, \

700 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

703 
	`FINISH
(2);

	)

705 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

706 
	`HANDLE_OPCODE
(
_İcode
 ) \

708 
u2
 
l™Info
; \

709 
vd¡
 = 
	`INST_AA
(
š¡
); \

710 
l™Info
 = 
	`FETCH
(1); \

711 
v¤c1
 = 
l™Info
 & 0xff; \

712 
v¤c2
 = 
l™Info
 >> 8; \

713 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

714 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

715 
	`SET_REGISTER
(
vd¡
, \

716 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

718 
	`FINISH
(2);

	)

720 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

721 
	`HANDLE_OPCODE
(
_İcode
 ) \

722 
vd¡
 = 
	`INST_A
(
š¡
); \

723 
v¤c1
 = 
	`INST_B
(
š¡
); \

724 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

725 ià(
_chkdiv
 != 0) { \

726 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

727 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

728 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

729 ià(
£cÚdV®
 == 0) { \

730 
	`EXPORT_PC
(); \

731 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

732 
	`GOTO_exû±iÚThrown
(); \

734 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

735 ià(
_chkdiv
 == 1) \

736 
»suÉ
 = 
fœ¡V®
; \

738 
»suÉ
 = 0; \

740 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

742 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

744 
	`SET_REGISTER
(
vd¡
, \

745 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

747 
	`FINISH
(1);

	)

749 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

750 
	`HANDLE_OPCODE
(
_İcode
 ) \

751 
vd¡
 = 
	`INST_A
(
š¡
); \

752 
v¤c1
 = 
	`INST_B
(
š¡
); \

753 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

754 
	`SET_REGISTER
(
vd¡
, \

755 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

756 
	`FINISH
(1);

	)

758 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

759 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
u2
 
¤cRegs
; \

762 
vd¡
 = 
	`INST_AA
(
š¡
); \

763 
¤cRegs
 = 
	`FETCH
(1); \

764 
v¤c1
 = 
¤cRegs
 & 0xff; \

765 
v¤c2
 = 
¤cRegs
 >> 8; \

766 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 ià(
_chkdiv
 != 0) { \

768 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

769 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

770 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

771 ià(
£cÚdV®
 == 0LL) { \

772 
	`EXPORT_PC
(); \

773 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

774 
	`GOTO_exû±iÚThrown
(); \

776 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

777 
£cÚdV®
 == -1LL) \

779 ià(
_chkdiv
 == 1) \

780 
»suÉ
 = 
fœ¡V®
; \

782 
»suÉ
 = 0; \

784 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

786 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

788 
	`SET_REGISTER_WIDE
(
vd¡
, \

789 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

792 
	`FINISH
(2);

	)

794 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

795 
	`HANDLE_OPCODE
(
_İcode
 ) \

797 
u2
 
¤cRegs
; \

798 
vd¡
 = 
	`INST_AA
(
š¡
); \

799 
¤cRegs
 = 
	`FETCH
(1); \

800 
v¤c1
 = 
¤cRegs
 & 0xff; \

801 
v¤c2
 = 
¤cRegs
 >> 8; \

802 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

803 
	`SET_REGISTER_WIDE
(
vd¡
, \

804 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

806 
	`FINISH
(2);

	)

808 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

809 
	`HANDLE_OPCODE
(
_İcode
 ) \

810 
vd¡
 = 
	`INST_A
(
š¡
); \

811 
v¤c1
 = 
	`INST_B
(
š¡
); \

812 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

813 ià(
_chkdiv
 != 0) { \

814 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

815 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

816 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

817 ià(
£cÚdV®
 == 0LL) { \

818 
	`EXPORT_PC
(); \

819 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

820 
	`GOTO_exû±iÚThrown
(); \

822 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

823 
£cÚdV®
 == -1LL) \

825 ià(
_chkdiv
 == 1) \

826 
»suÉ
 = 
fœ¡V®
; \

828 
»suÉ
 = 0; \

830 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

832 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

834 
	`SET_REGISTER_WIDE
(
vd¡
, \

835 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

837 
	`FINISH
(1);

	)

839 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

840 
	`HANDLE_OPCODE
(
_İcode
 ) \

841 
vd¡
 = 
	`INST_A
(
š¡
); \

842 
v¤c1
 = 
	`INST_B
(
š¡
); \

843 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

844 
	`SET_REGISTER_WIDE
(
vd¡
, \

845 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

846 
	`FINISH
(1);

	)

848 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

849 
	`HANDLE_OPCODE
(
_İcode
 ) \

851 
u2
 
¤cRegs
; \

852 
vd¡
 = 
	`INST_AA
(
š¡
); \

853 
¤cRegs
 = 
	`FETCH
(1); \

854 
v¤c1
 = 
¤cRegs
 & 0xff; \

855 
v¤c2
 = 
¤cRegs
 >> 8; \

856 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

857 
	`SET_REGISTER_FLOAT
(
vd¡
, \

858 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

860 
	`FINISH
(2);

	)

862 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

863 
	`HANDLE_OPCODE
(
_İcode
 ) \

865 
u2
 
¤cRegs
; \

866 
vd¡
 = 
	`INST_AA
(
š¡
); \

867 
¤cRegs
 = 
	`FETCH
(1); \

868 
v¤c1
 = 
¤cRegs
 & 0xff; \

869 
v¤c2
 = 
¤cRegs
 >> 8; \

870 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

871 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

872 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

874 
	`FINISH
(2);

	)

876 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

877 
	`HANDLE_OPCODE
(
_İcode
 ) \

878 
vd¡
 = 
	`INST_A
(
š¡
); \

879 
v¤c1
 = 
	`INST_B
(
š¡
); \

880 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

881 
	`SET_REGISTER_FLOAT
(
vd¡
, \

882 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

883 
	`FINISH
(1);

	)

885 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

886 
	`HANDLE_OPCODE
(
_İcode
 ) \

887 
vd¡
 = 
	`INST_A
(
š¡
); \

888 
v¤c1
 = 
	`INST_B
(
š¡
); \

889 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

890 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

891 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

892 
	`FINISH
(1);

	)

894 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

895 
	`HANDLE_OPCODE
(
_İcode
 ) \

897 
A¼ayObjeù
* 
¬¿yObj
; \

898 
u2
 
¬¿yInfo
; \

899 
	`EXPORT_PC
(); \

900 
vd¡
 = 
	`INST_AA
(
š¡
); \

901 
¬¿yInfo
 = 
	`FETCH
(1); \

902 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

903 
v¤c2
 = 
¬¿yInfo
 >> 8; \

904 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

905 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

906 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

907 
	`GOTO_exû±iÚThrown
(); \

908 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

909 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

910 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

911 
	`GOTO_exû±iÚThrown
(); \

913 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

914 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

915 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

917 
	`FINISH
(2);

	)

919 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

920 
	`HANDLE_OPCODE
(
_İcode
 ) \

922 
A¼ayObjeù
* 
¬¿yObj
; \

923 
u2
 
¬¿yInfo
; \

924 
	`EXPORT_PC
(); \

925 
vd¡
 = 
	`INST_AA
(
š¡
); \

926 
¬¿yInfo
 = 
	`FETCH
(1); \

927 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

928 
v¤c2
 = 
¬¿yInfo
 >> 8; \

929 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

930 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

931 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

932 
	`GOTO_exû±iÚThrown
(); \

933 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

934 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

935 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

936 
	`GOTO_exû±iÚThrown
(); \

938 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

939 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

940 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

942 
	`FINISH
(2);

	)

961 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

962 
	`HANDLE_OPCODE
(
_İcode
 ) \

964 
In¡F›ld
* 
if›ld
; \

965 
Objeù
* 
obj
; \

966 
	`EXPORT_PC
(); \

967 
vd¡
 = 
	`INST_A
(
š¡
); \

968 
v¤c1
 = 
	`INST_B
(
š¡
); \

969 
»f
 = 
	`FETCH
(1); \

970 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

971 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

972 ià(!
	`checkFÜNuÎ
(
obj
)) \

973 
	`GOTO_exû±iÚThrown
(); \

974 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

975 ià(
if›ld
 =ğ
NULL
) { \

976 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

977 ià(
if›ld
 =ğ
NULL
) \

978 
	`GOTO_exû±iÚThrown
(); \

980 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

981 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

982 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

983 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

985 
	`FINISH
(2);

	)

987 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

988 
	`HANDLE_OPCODE
(
_İcode
 ) \

990 
Objeù
* 
obj
; \

991 
vd¡
 = 
	`INST_A
(
š¡
); \

992 
v¤c1
 = 
	`INST_B
(
š¡
); \

993 
»f
 = 
	`FETCH
(1); \

994 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

995 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

996 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

997 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

998 
	`GOTO_exû±iÚThrown
(); \

999 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1000 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1001 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1003 
	`FINISH
(2);

	)

1005 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1006 
	`HANDLE_OPCODE
(
_İcode
 ) \

1008 
In¡F›ld
* 
if›ld
; \

1009 
Objeù
* 
obj
; \

1010 
	`EXPORT_PC
(); \

1011 
vd¡
 = 
	`INST_A
(
š¡
); \

1012 
v¤c1
 = 
	`INST_B
(
š¡
); \

1013 
»f
 = 
	`FETCH
(1); \

1014 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1015 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1016 ià(!
	`checkFÜNuÎ
(
obj
)) \

1017 
	`GOTO_exû±iÚThrown
(); \

1018 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1019 ià(
if›ld
 =ğ
NULL
) { \

1020 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1021 ià(
if›ld
 =ğ
NULL
) \

1022 
	`GOTO_exû±iÚThrown
(); \

1024 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1025 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1026 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1027 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1029 
	`FINISH
(2);

	)

1031 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1032 
	`HANDLE_OPCODE
(
_İcode
 ) \

1034 
Objeù
* 
obj
; \

1035 
vd¡
 = 
	`INST_A
(
š¡
); \

1036 
v¤c1
 = 
	`INST_B
(
š¡
); \

1037 
»f
 = 
	`FETCH
(1); \

1038 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1039 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1040 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1041 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1042 
	`GOTO_exû±iÚThrown
(); \

1043 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1044 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1045 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1047 
	`FINISH
(2);

	)

1057 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
SticF›ld
* 
sf›ld
; \

1061 
vd¡
 = 
	`INST_AA
(
š¡
); \

1062 
»f
 = 
	`FETCH
(1); \

1063 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1064 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1065 ià(
sf›ld
 =ğ
NULL
) { \

1066 
	`EXPORT_PC
(); \

1067 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1068 ià(
sf›ld
 =ğ
NULL
) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1071 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1074 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1075 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1076 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`FINISH
(2);

	)

1080 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1081 
	`HANDLE_OPCODE
(
_İcode
 ) \

1083 
SticF›ld
* 
sf›ld
; \

1084 
vd¡
 = 
	`INST_AA
(
š¡
); \

1085 
»f
 = 
	`FETCH
(1); \

1086 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1087 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1088 ià(
sf›ld
 =ğ
NULL
) { \

1089 
	`EXPORT_PC
(); \

1090 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1091 ià(
sf›ld
 =ğ
NULL
) \

1092 
	`GOTO_exû±iÚThrown
(); \

1093 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1094 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1097 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1098 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1099 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1101 
	`FINISH
(2);

	)

1109 
	$dvmIÁ”´‘PÜbË
(
Th»ad
* 
£lf
)

1111 #ià
	`defšed
(
EASY_GDB
)

1112 
SckSaveA»a
* 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

1114 
DvmDex
* 
m‘hodCÏssDex
;

1115 
JV®ue
 
»tv®
;

1118 cÚ¡ 
M‘hod
* 
curM‘hod
;

1119 cÚ¡ 
u2
* 
pc
;

1120 
u4
* 
å
;

1121 
u2
 
š¡
;

1123 
u4
 
»f
;

1124 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
;

1126 cÚ¡ 
M‘hod
* 
m‘hodToC®l
;

1127 
boŞ
 
m‘hodC®lRªge
;

1130 
	`DEFINE_GOTO_TABLE
(
hªdËrTabË
);

1133 
curM‘hod
 = 
£lf
->
š‹½Save
.
m‘hod
;

1134 
pc
 = 
£lf
->
š‹½Save
.pc;

1135 
å
 = 
£lf
->
š‹½Save
.
curF¿me
;

1136 
»tv®
 = 
£lf
->
š‹½Save
.retval;

1138 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1140 
	`LOGVV
("threadid=%d: %s.%s…c=%#x fp=%p",

1141 
£lf
->
th»adId
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

1142 
pc
 - 
curM‘hod
->
š¢s
, 
å
);

1147 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

1148 
	`TRACE_METHOD_ENTER
(
£lf
, 
curM‘hod
);

1149 
£lf
->
debugIsM‘hodEÁry
 = 
Œue
;

1154 
m‘hodToC®l
 = (cÚ¡ 
M‘hod
*) -1;

1157 ià(
£lf
->
debugIsM‘hodEÁry
) {

1158 
	`ILOGD
("|-- Now iÁ”´‘šg %s.%s", 
curM‘hod
->
şazz
->
desütÜ
,

1159 
curM‘hod
->
Çme
);

1160 
	`DUMP_REGS
(
curM‘hod
, 
£lf
->
š‹½Save
.
curF¿me
, 
çl£
);

1164 
	`FINISH
(0);

1169 
	`HANDLE_OPCODE
(
OP_NOP
)

1170 
	`FINISH
(1);

1171 
OP_END


1174 
	`HANDLE_OPCODE
(
OP_MOVE
 )

1175 
vd¡
 = 
	`INST_A
(
š¡
);

1176 
v¤c1
 = 
	`INST_B
(
š¡
);

1177 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1178 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1179 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1180 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1181 
	`FINISH
(1);

1182 
OP_END


1185 
	`HANDLE_OPCODE
(
OP_MOVE_FROM16
 )

1186 
vd¡
 = 
	`INST_AA
(
š¡
);

1187 
v¤c1
 = 
	`FETCH
(1);

1188 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1189 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1190 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1191 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1192 
	`FINISH
(2);

1193 
OP_END


1196 
	`HANDLE_OPCODE
(
OP_MOVE_16
 )

1197 
vd¡
 = 
	`FETCH
(1);

1198 
v¤c1
 = 
	`FETCH
(2);

1199 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1200 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1201 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1202 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1203 
	`FINISH
(3);

1204 
OP_END


1207 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

1210 
vd¡
 = 
	`INST_A
(
š¡
);

1211 
v¤c1
 = 
	`INST_B
(
š¡
);

1212 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1213 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1214 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1215 
	`FINISH
(1);

1216 
OP_END


1219 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

1220 
vd¡
 = 
	`INST_AA
(
š¡
);

1221 
v¤c1
 = 
	`FETCH
(1);

1222 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1223 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1224 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1225 
	`FINISH
(2);

1226 
OP_END


1229 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

1230 
vd¡
 = 
	`FETCH
(1);

1231 
v¤c1
 = 
	`FETCH
(2);

1232 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1233 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1234 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1235 
	`FINISH
(3);

1236 
OP_END


1240 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT
 )

1241 
vd¡
 = 
	`INST_A
(
š¡
);

1242 
v¤c1
 = 
	`INST_B
(
š¡
);

1243 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1244 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1245 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1246 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1247 
	`FINISH
(1);

1248 
OP_END


1253 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_FROM16
 )

1254 
vd¡
 = 
	`INST_AA
(
š¡
);

1255 
v¤c1
 = 
	`FETCH
(1);

1256 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1257 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1258 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1259 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1260 
	`FINISH
(2);

1261 
OP_END


1266 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_16
 )

1267 
vd¡
 = 
	`FETCH
(1);

1268 
v¤c1
 = 
	`FETCH
(2);

1269 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1270 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1271 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1272 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1273 
	`FINISH
(3);

1274 
OP_END


1278 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT
 )

1279 
vd¡
 = 
	`INST_AA
(
š¡
);

1280 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1281 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1282 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1283 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1284 
	`FINISH
(1);

1285 
OP_END


1288 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

1289 
vd¡
 = 
	`INST_AA
(
š¡
);

1290 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

1291 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

1292 
	`FINISH
(1);

1293 
OP_END


1297 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_OBJECT
 )

1298 
vd¡
 = 
	`INST_AA
(
š¡
);

1299 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1300 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1301 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1302 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1303 
	`FINISH
(1);

1304 
OP_END


1308 
	`HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

1309 
vd¡
 = 
	`INST_AA
(
š¡
);

1310 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

1311 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

1312 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

1313 
	`dvmCË¬Exû±iÚ
(
£lf
);

1314 
	`FINISH
(1);

1315 
OP_END


1318 
	`HANDLE_OPCODE
(
OP_RETURN_VOID
 )

1319 
	`ILOGV
("|return-void");

1320 #iâdeà
NDEBUG


1321 
»tv®
.
j
 = 0xababababULL;

1323 
	`GOTO_»tuºFromM‘hod
();

1324 
OP_END


1327 
	`HANDLE_OPCODE
(
OP_RETURN
 )

1328 
v¤c1
 = 
	`INST_AA
(
š¡
);

1329 
	`ILOGV
("|return%s v%d",

1330 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1331 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1332 
	`GOTO_»tuºFromM‘hod
();

1333 
OP_END


1336 
	`HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

1337 
v¤c1
 = 
	`INST_AA
(
š¡
);

1338 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

1339 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

1340 
	`GOTO_»tuºFromM‘hod
();

1341 
OP_END


1345 
	`HANDLE_OPCODE
(
OP_RETURN_OBJECT
 )

1346 
v¤c1
 = 
	`INST_AA
(
š¡
);

1347 
	`ILOGV
("|return%s v%d",

1348 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1349 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1350 
	`GOTO_»tuºFromM‘hod
();

1351 
OP_END


1355 
	`HANDLE_OPCODE
(
OP_CONST_4
 )

1357 
s4
 
tmp
;

1359 
vd¡
 = 
	`INST_A
(
š¡
);

1360 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

1361 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

1362 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1364 
	`FINISH
(1);

1365 
OP_END


1368 
	`HANDLE_OPCODE
(
OP_CONST_16
 )

1369 
vd¡
 = 
	`INST_AA
(
š¡
);

1370 
v¤c1
 = 
	`FETCH
(1);

1371 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1372 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

1373 
	`FINISH
(2);

1374 
OP_END


1377 
	`HANDLE_OPCODE
(
OP_CONST
 )

1379 
u4
 
tmp
;

1381 
vd¡
 = 
	`INST_AA
(
š¡
);

1382 
tmp
 = 
	`FETCH
(1);

1383 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1384 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

1385 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1387 
	`FINISH
(3);

1388 
OP_END


1391 
	`HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

1392 
vd¡
 = 
	`INST_AA
(
š¡
);

1393 
v¤c1
 = 
	`FETCH
(1);

1394 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

1395 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

1396 
	`FINISH
(2);

1397 
OP_END


1400 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

1401 
vd¡
 = 
	`INST_AA
(
š¡
);

1402 
v¤c1
 = 
	`FETCH
(1);

1403 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1404 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

1405 
	`FINISH
(2);

1406 
OP_END


1409 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

1411 
u4
 
tmp
;

1413 
vd¡
 = 
	`INST_AA
(
š¡
);

1414 
tmp
 = 
	`FETCH
(1);

1415 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1416 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

1417 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

1419 
	`FINISH
(3);

1420 
OP_END


1423 
	`HANDLE_OPCODE
(
OP_CONST_WIDE
 )

1425 
u8
 
tmp
;

1427 
vd¡
 = 
	`INST_AA
(
š¡
);

1428 
tmp
 = 
	`FETCH
(1);

1429 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

1430 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

1431 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

1432 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

1433 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

1435 
	`FINISH
(5);

1436 
OP_END


1439 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

1440 
vd¡
 = 
	`INST_AA
(
š¡
);

1441 
v¤c1
 = 
	`FETCH
(1);

1442 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

1443 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

1444 
	`FINISH
(2);

1445 
OP_END


1448 
	`HANDLE_OPCODE
(
OP_CONST_STRING
 )

1450 
SŒšgObjeù
* 
¡rObj
;

1452 
vd¡
 = 
	`INST_AA
(
š¡
);

1453 
»f
 = 
	`FETCH
(1);

1454 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

1455 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

1456 ià(
¡rObj
 =ğ
NULL
) {

1457 
	`EXPORT_PC
();

1458 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

1459 ià(
¡rObj
 =ğ
NULL
)

1460 
	`GOTO_exû±iÚThrown
();

1462 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1464 
	`FINISH
(2);

1465 
OP_END


1468 
	`HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

1470 
SŒšgObjeù
* 
¡rObj
;

1471 
u4
 
tmp
;

1473 
vd¡
 = 
	`INST_AA
(
š¡
);

1474 
tmp
 = 
	`FETCH
(1);

1475 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1476 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

1477 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

1478 ià(
¡rObj
 =ğ
NULL
) {

1479 
	`EXPORT_PC
();

1480 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

1481 ià(
¡rObj
 =ğ
NULL
)

1482 
	`GOTO_exû±iÚThrown
();

1484 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1486 
	`FINISH
(3);

1487 
OP_END


1490 
	`HANDLE_OPCODE
(
OP_CONST_CLASS
 )

1492 
CÏssObjeù
* 
şazz
;

1494 
vd¡
 = 
	`INST_AA
(
š¡
);

1495 
»f
 = 
	`FETCH
(1);

1496 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

1497 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1498 ià(
şazz
 =ğ
NULL
) {

1499 
	`EXPORT_PC
();

1500 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1501 ià(
şazz
 =ğ
NULL
)

1502 
	`GOTO_exû±iÚThrown
();

1504 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

1506 
	`FINISH
(2);

1507 
OP_END


1510 
	`HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

1512 
Objeù
* 
obj
;

1514 
v¤c1
 = 
	`INST_AA
(
š¡
);

1515 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

1516 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

1517 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1518 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1519 
	`GOTO_exû±iÚThrown
();

1520 
	`ILOGV
("+†ockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

1521 
	`EXPORT_PC
();

1522 
	`dvmLockObjeù
(
£lf
, 
obj
);

1524 
	`FINISH
(1);

1525 
OP_END


1528 
	`HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

1530 
Objeù
* 
obj
;

1532 
	`EXPORT_PC
();

1534 
v¤c1
 = 
	`INST_AA
(
š¡
);

1535 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

1536 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

1537 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1538 ià(!
	`checkFÜNuÎ
(
obj
)) {

1546 
	`ADJUST_PC
(1);

1547 
	`GOTO_exû±iÚThrown
();

1549 
	`ILOGV
("+ uÆockšg %°%s", 
obj
, obj->
şazz
->
desütÜ
);

1550 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

1551 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1552 
	`ADJUST_PC
(1);

1553 
	`GOTO_exû±iÚThrown
();

1556 
	`FINISH
(1);

1557 
OP_END


1560 
	`HANDLE_OPCODE
(
OP_CHECK_CAST
 )

1562 
CÏssObjeù
* 
şazz
;

1563 
Objeù
* 
obj
;

1565 
	`EXPORT_PC
();

1567 
v¤c1
 = 
	`INST_AA
(
š¡
);

1568 
»f
 = 
	`FETCH
(1);

1569 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

1571 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1572 ià(
obj
 !ğ
NULL
) {

1573 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

1574 ià(!
	`checkFÜNuÎ
(
obj
))

1575 
	`GOTO_exû±iÚThrown
();

1577 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1578 ià(
şazz
 =ğ
NULL
) {

1579 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

1580 ià(
şazz
 =ğ
NULL
)

1581 
	`GOTO_exû±iÚThrown
();

1583 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

1584 
	`dvmThrowCÏssCa¡Exû±iÚ
(
obj
->
şazz
, clazz);

1585 
	`GOTO_exû±iÚThrown
();

1589 
	`FINISH
(2);

1590 
OP_END


1593 
	`HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

1595 
CÏssObjeù
* 
şazz
;

1596 
Objeù
* 
obj
;

1598 
vd¡
 = 
	`INST_A
(
š¡
);

1599 
v¤c1
 = 
	`INST_B
(
š¡
);

1600 
»f
 = 
	`FETCH
(1);

1601 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

1603 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1604 ià(
obj
 =ğ
NULL
) {

1605 
	`SET_REGISTER
(
vd¡
, 0);

1607 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

1608 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1609 
	`GOTO_exû±iÚThrown
();

1611 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1612 ià(
şazz
 =ğ
NULL
) {

1613 
	`EXPORT_PC
();

1614 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1615 ià(
şazz
 =ğ
NULL
)

1616 
	`GOTO_exû±iÚThrown
();

1618 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

1621 
	`FINISH
(2);

1622 
OP_END


1625 
	`HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

1627 
A¼ayObjeù
* 
¬¿yObj
;

1629 
vd¡
 = 
	`INST_A
(
š¡
);

1630 
v¤c1
 = 
	`INST_B
(
š¡
);

1631 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

1632 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

1633 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

1634 
	`GOTO_exû±iÚThrown
();

1636 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

1638 
	`FINISH
(1);

1639 
OP_END


1642 
	`HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

1644 
CÏssObjeù
* 
şazz
;

1645 
Objeù
* 
ÃwObj
;

1647 
	`EXPORT_PC
();

1649 
vd¡
 = 
	`INST_AA
(
š¡
);

1650 
»f
 = 
	`FETCH
(1);

1651 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

1652 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1653 ià(
şazz
 =ğ
NULL
) {

1654 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

1655 ià(
şazz
 =ğ
NULL
)

1656 
	`GOTO_exû±iÚThrown
();

1659 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

1660 
	`GOTO_exû±iÚThrown
();

1662 #ià
	`defšed
(
WITH_JIT
)

1668 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

1669 (!
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
))) {

1671 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

1683 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

1684 ià(
ÃwObj
 =ğ
NULL
)

1685 
	`GOTO_exû±iÚThrown
();

1686 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

1688 
	`FINISH
(2);

1689 
OP_END


1692 
	`HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

1694 
CÏssObjeù
* 
¬¿yCÏss
;

1695 
A¼ayObjeù
* 
ÃwA¼ay
;

1696 
s4
 
Ëngth
;

1698 
	`EXPORT_PC
();

1700 
vd¡
 = 
	`INST_A
(
š¡
);

1701 
v¤c1
 = 
	`INST_B
(
š¡
);

1702 
»f
 = 
	`FETCH
(1);

1703 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

1704 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

1705 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

1706 ià(
Ëngth
 < 0) {

1707 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
Ëngth
);

1708 
	`GOTO_exû±iÚThrown
();

1710 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1711 ià(
¬¿yCÏss
 =ğ
NULL
) {

1712 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1713 ià(
¬¿yCÏss
 =ğ
NULL
)

1714 
	`GOTO_exû±iÚThrown
();

1717 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1718 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1720 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

1721 ià(
ÃwA¼ay
 =ğ
NULL
)

1722 
	`GOTO_exû±iÚThrown
();

1723 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

1725 
	`FINISH
(2);

1726 
OP_END


1729 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

1730 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

1731 
OP_END


1734 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

1735 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

1736 
OP_END


1739 
	`HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

1741 cÚ¡ 
u2
* 
¬¿yD©a
;

1742 
s4
 
off£t
;

1743 
A¼ayObjeù
* 
¬¿yObj
;

1745 
	`EXPORT_PC
();

1746 
v¤c1
 = 
	`INST_AA
(
š¡
);

1747 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1748 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

1749 
¬¿yD©a
 = 
pc
 + 
off£t
;

1750 #iâdeà
NDEBUG


1751 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

1752 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1755 
	`dvmThrowIÁ”ÇlE¼Ü
("bad fill‡rray data");

1756 
	`GOTO_exû±iÚThrown
();

1759 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

1760 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

1761 
	`GOTO_exû±iÚThrown
();

1763 
	`FINISH
(3);

1765 
OP_END


1768 
	`HANDLE_OPCODE
(
OP_THROW
 )

1770 
Objeù
* 
obj
;

1777 
	`EXPORT_PC
();

1779 
v¤c1
 = 
	`INST_AA
(
š¡
);

1780 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

1781 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

1782 ià(!
	`checkFÜNuÎ
(
obj
)) {

1784 
	`LOGVV
("Badƒxception");

1787 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

1789 
	`GOTO_exû±iÚThrown
();

1791 
OP_END


1794 
	`HANDLE_OPCODE
(
OP_GOTO
 )

1795 
vd¡
 = 
	`INST_AA
(
š¡
);

1796 ià((
s1
)
vd¡
 < 0)

1797 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

1799 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

1800 
	`ILOGV
("> branchaken");

1801 ià((
s1
)
vd¡
 < 0)

1802 
	`PERIODIC_CHECKS
((
s1
)
vd¡
);

1803 
	`FINISH
((
s1
)
vd¡
);

1804 
OP_END


1807 
	`HANDLE_OPCODE
(
OP_GOTO_16
 )

1809 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

1811 ià(
off£t
 < 0)

1812 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

1814 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

1815 
	`ILOGV
("> branchaken");

1816 ià(
off£t
 < 0)

1817 
	`PERIODIC_CHECKS
(
off£t
);

1818 
	`FINISH
(
off£t
);

1820 
OP_END


1823 
	`HANDLE_OPCODE
(
OP_GOTO_32
 )

1825 
s4
 
off£t
 = 
	`FETCH
(1);

1826 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

1828 ià(
off£t
 < 0)

1829 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

1831 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

1832 
	`ILOGV
("> branchaken");

1833 ià(
off£t
 <= 0)

1834 
	`PERIODIC_CHECKS
(
off£t
);

1835 
	`FINISH
(
off£t
);

1837 
OP_END


1840 
	`HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

1842 cÚ¡ 
u2
* 
sw™chD©a
;

1843 
u4
 
‹¡V®
;

1844 
s4
 
off£t
;

1846 
v¤c1
 = 
	`INST_AA
(
š¡
);

1847 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1848 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

1849 
sw™chD©a
 = 
pc
 + 
off£t
;

1850 #iâdeà
NDEBUG


1851 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

1852 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1855 
	`EXPORT_PC
();

1856 
	`dvmThrowIÁ”ÇlE¼Ü
("bad…acked switch");

1857 
	`GOTO_exû±iÚThrown
();

1860 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

1862 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

1863 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

1864 ià(
off£t
 <= 0)

1865 
	`PERIODIC_CHECKS
(
off£t
);

1866 
	`FINISH
(
off£t
);

1868 
OP_END


1871 
	`HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

1873 cÚ¡ 
u2
* 
sw™chD©a
;

1874 
u4
 
‹¡V®
;

1875 
s4
 
off£t
;

1877 
v¤c1
 = 
	`INST_AA
(
š¡
);

1878 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

1879 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

1880 
sw™chD©a
 = 
pc
 + 
off£t
;

1881 #iâdeà
NDEBUG


1882 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

1883 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

1886 
	`EXPORT_PC
();

1887 
	`dvmThrowIÁ”ÇlE¼Ü
("bad sparse switch");

1888 
	`GOTO_exû±iÚThrown
();

1891 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

1893 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

1894 
	`ILOGV
("> b¿nchak’ (0x%04x)", 
off£t
);

1895 ià(
off£t
 <= 0)

1896 
	`PERIODIC_CHECKS
(
off£t
);

1897 
	`FINISH
(
off£t
);

1899 
OP_END


1902 
	`HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

1903 
OP_END


1906 
	`HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

1907 
OP_END


1910 
	`HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

1911 
OP_END


1914 
	`HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

1915 
OP_END


1918 
	`HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

1919 
OP_END


1922 
	`HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

1923 
OP_END


1926 
	`HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

1927 
OP_END


1930 
	`HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

1931 
OP_END


1934 
	`HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

1935 
OP_END


1938 
	`HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

1939 
OP_END


1942 
	`HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

1943 
OP_END


1946 
	`HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

1947 
OP_END


1950 
	`HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

1951 
OP_END


1954 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

1955 
OP_END


1958 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

1959 
OP_END


1962 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

1963 
OP_END


1966 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

1967 
OP_END


1970 
	`HANDLE_OPCODE
(
OP_UNUSED_3E
)

1971 
OP_END


1974 
	`HANDLE_OPCODE
(
OP_UNUSED_3F
)

1975 
OP_END


1978 
	`HANDLE_OPCODE
(
OP_UNUSED_40
)

1979 
OP_END


1982 
	`HANDLE_OPCODE
(
OP_UNUSED_41
)

1983 
OP_END


1986 
	`HANDLE_OPCODE
(
OP_UNUSED_42
)

1987 
OP_END


1990 
	`HANDLE_OPCODE
(
OP_UNUSED_43
)

1991 
OP_END


1994 
	`HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

1995 
OP_END


1998 
	`HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

1999 
OP_END


2002 
	`HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2003 
OP_END


2006 
	`HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2007 
OP_END


2010 
	`HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2011 
OP_END


2014 
	`HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2015 
OP_END


2018 
	`HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2019 
OP_END


2022 
	`HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2023 
OP_END


2026 
	`HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2027 
OP_END


2030 
	`HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

2032 
A¼ayObjeù
* 
¬¿yObj
;

2033 
Objeù
* 
obj
;

2034 
u2
 
¬¿yInfo
;

2035 
	`EXPORT_PC
();

2036 
vd¡
 = 
	`INST_AA
(
š¡
);

2037 
¬¿yInfo
 = 
	`FETCH
(1);

2038 
v¤c1
 = 
¬¿yInfo
 & 0xff;

2039 
v¤c2
 = 
¬¿yInfo
 >> 8;

2040 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

2041 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2042 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

2043 
	`GOTO_exû±iÚThrown
();

2044 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

2045 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
(

2046 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
));

2047 
	`GOTO_exû±iÚThrown
();

2049 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

2050 ià(
obj
 !ğ
NULL
) {

2051 ià(!
	`checkFÜNuÎ
(
obj
))

2052 
	`GOTO_exû±iÚThrown
();

2053 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz)) {

2054 
	`ALOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)",

2055 
obj
->
şazz
->
desütÜ
, obj,

2056 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2057 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËEËm’t
(
obj
->
şazz
, 
¬¿yObj
->clazz);

2058 
	`GOTO_exû±iÚThrown
();

2061 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

2062 
	`dvmS‘ObjeùA¼ayEËm’t
(
¬¿yObj
,

2063 
	`GET_REGISTER
(
v¤c2
),

2064 (
Objeù
 *)
	`GET_REGISTER
(
vd¡
));

2066 
	`FINISH
(2);

2067 
OP_END


2070 
	`HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2071 
OP_END


2074 
	`HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2075 
OP_END


2078 
	`HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2079 
OP_END


2082 
	`HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2083 
OP_END


2086 
	`HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2087 
OP_END


2090 
	`HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2091 
OP_END


2094 
	`HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2095 
OP_END


2098 
	`HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2099 
OP_END


2102 
	`HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2103 
OP_END


2106 
	`HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2107 
OP_END


2110 
	`HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2111 
OP_END


2114 
	`HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2115 
OP_END


2118 
	`HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2119 
OP_END


2133 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2134 
OP_END


2137 
	`HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2138 
OP_END


2141 
	`HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2142 
OP_END


2145 
	`HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2146 
OP_END


2149 
	`HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2150 
OP_END


2153 
	`HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2154 
OP_END


2157 
	`HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2158 
OP_END


2161 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2162 
OP_END


2165 
	`HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2166 
OP_END


2169 
	`HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2170 
OP_END


2173 
	`HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2174 
OP_END


2177 
	`HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2178 
OP_END


2181 
	`HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2182 
OP_END


2185 
	`HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2186 
OP_END


2189 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2190 
OP_END


2193 
	`HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2194 
OP_END


2197 
	`HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2198 
OP_END


2201 
	`HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2202 
OP_END


2205 
	`HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2206 
OP_END


2209 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2210 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

2211 
OP_END


2214 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2215 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

2216 
OP_END


2219 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2220 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

2221 
OP_END


2224 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2225 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

2226 
OP_END


2229 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2230 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

2231 
OP_END


2234 
	`HANDLE_OPCODE
(
OP_UNUSED_73
)

2235 
OP_END


2238 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2239 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

2240 
OP_END


2243 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2244 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

2245 
OP_END


2248 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2249 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2250 
OP_END


2253 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2254 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

2255 
OP_END


2258 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2259 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

2260 
OP_END


2263 
	`HANDLE_OPCODE
(
OP_UNUSED_79
)

2264 
OP_END


2267 
	`HANDLE_OPCODE
(
OP_UNUSED_7A
)

2268 
OP_END


2271 
	`HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2272 
OP_END


2275 
	`HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2276 
OP_END


2279 
	`HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2280 
OP_END


2283 
	`HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2284 
OP_END


2287 
	`HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2288 
OP_END


2291 
	`HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2292 
OP_END


2295 
	`HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2296 
OP_END


2299 
	`HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2300 
OP_END


2303 
	`HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2304 
OP_END


2307 
	`HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2308 
OP_END


2311 
	`HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2312 
OP_END


2315 
	`HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2316 
OP_END


2319 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2320 , 
_FLOAT
, 
s4
, 
_INT
)

2321 
OP_END


2324 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2325 , 
_FLOAT
, 
s8
, 
_WIDE
)

2326 
OP_END


2329 
	`HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2330 
OP_END


2333 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2334 , 
_DOUBLE
, 
s4
, 
_INT
)

2335 
OP_END


2338 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2339 , 
_DOUBLE
, 
s8
, 
_WIDE
)

2340 
OP_END


2343 
	`HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2344 
OP_END


2347 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2348 
OP_END


2351 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2352 
OP_END


2355 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2356 
OP_END


2359 
	`HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2360 
OP_END


2363 
	`HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2364 
OP_END


2367 
	`HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2368 
OP_END


2371 
	`HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2372 
OP_END


2375 
	`HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2376 
OP_END


2379 
	`HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2380 
OP_END


2383 
	`HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2384 
OP_END


2387 
	`HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2388 
OP_END


2391 
	`HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2392 
OP_END


2395 
	`HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2396 
OP_END


2399 
	`HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2400 
OP_END


2403 
	`HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2404 
OP_END


2407 
	`HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2408 
OP_END


2411 
	`HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2412 
OP_END


2415 
	`HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2416 
OP_END


2419 
	`HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2420 
OP_END


2423 
	`HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2424 
OP_END


2427 
	`HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2428 
OP_END


2431 
	`HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2432 
OP_END


2435 
	`HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2436 
OP_END


2439 
	`HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2440 
OP_END


2443 
	`HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2444 
OP_END


2447 
	`HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2448 
OP_END


2451 
	`HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2452 
OP_END


2455 
	`HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2456 
OP_END


2459 
	`HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2460 
OP_END


2463 
	`HANDLE_OPCODE
(
OP_REM_FLOAT
 )

2465 
u2
 
¤cRegs
;

2466 
vd¡
 = 
	`INST_AA
(
š¡
);

2467 
¤cRegs
 = 
	`FETCH
(1);

2468 
v¤c1
 = 
¤cRegs
 & 0xff;

2469 
v¤c2
 = 
¤cRegs
 >> 8;

2470 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2471 
	`SET_REGISTER_FLOAT
(
vd¡
,

2472 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

2474 
	`FINISH
(2);

2475 
OP_END


2478 
	`HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2479 
OP_END


2482 
	`HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2483 
OP_END


2486 
	`HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2487 
OP_END


2490 
	`HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2491 
OP_END


2494 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

2496 
u2
 
¤cRegs
;

2497 
vd¡
 = 
	`INST_AA
(
š¡
);

2498 
¤cRegs
 = 
	`FETCH
(1);

2499 
v¤c1
 = 
¤cRegs
 & 0xff;

2500 
v¤c2
 = 
¤cRegs
 >> 8;

2501 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2502 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2503 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

2505 
	`FINISH
(2);

2506 
OP_END


2509 
	`HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

2510 
OP_END


2513 
	`HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

2514 
OP_END


2517 
	`HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

2518 
OP_END


2521 
	`HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

2522 
OP_END


2525 
	`HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

2526 
OP_END


2529 
	`HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

2530 
OP_END


2533 
	`HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

2534 
OP_END


2537 
	`HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

2538 
OP_END


2541 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

2542 
OP_END


2545 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

2546 
OP_END


2549 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

2550 
OP_END


2553 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

2554 
OP_END


2557 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

2558 
OP_END


2561 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

2562 
OP_END


2565 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

2566 
OP_END


2569 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

2570 
OP_END


2573 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

2574 
OP_END


2577 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

2578 
OP_END


2581 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

2582 
OP_END


2585 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

2586 
OP_END


2589 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

2590 
OP_END


2593 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

2594 
OP_END


2597 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

2598 
OP_END


2601 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

2602 
OP_END


2605 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

2606 
OP_END


2609 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

2610 
OP_END


2613 
	`HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

2614 
vd¡
 = 
	`INST_A
(
š¡
);

2615 
v¤c1
 = 
	`INST_B
(
š¡
);

2616 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

2617 
	`SET_REGISTER_FLOAT
(
vd¡
,

2618 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

2619 
	`FINISH
(1);

2620 
OP_END


2623 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

2624 
OP_END


2627 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

2628 
OP_END


2631 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

2632 
OP_END


2635 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

2636 
OP_END


2639 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

2640 
vd¡
 = 
	`INST_A
(
š¡
);

2641 
v¤c1
 = 
	`INST_B
(
š¡
);

2642 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

2643 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2644 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

2645 
	`FINISH
(1);

2646 
OP_END


2649 
	`HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

2650 
OP_END


2653 
	`HANDLE_OPCODE
(
OP_RSUB_INT
 )

2655 
vd¡
 = 
	`INST_A
(
š¡
);

2656 
v¤c1
 = 
	`INST_B
(
š¡
);

2657 
v¤c2
 = 
	`FETCH
(1);

2658 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

2659 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

2661 
	`FINISH
(2);

2662 
OP_END


2665 
	`HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

2666 
OP_END


2669 
	`HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

2670 
OP_END


2673 
	`HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

2674 
OP_END


2677 
	`HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

2678 
OP_END


2681 
	`HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

2682 
OP_END


2685 
	`HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

2686 
OP_END


2689 
	`HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

2690 
OP_END


2693 
	`HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

2695 
u2
 
l™Info
;

2696 
vd¡
 = 
	`INST_AA
(
š¡
);

2697 
l™Info
 = 
	`FETCH
(1);

2698 
v¤c1
 = 
l™Info
 & 0xff;

2699 
v¤c2
 = 
l™Info
 >> 8;

2700 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

2701 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

2703 
	`FINISH
(2);

2704 
OP_END


2707 
	`HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

2708 
OP_END


2711 
	`HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

2712 
OP_END


2715 
	`HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

2716 
OP_END


2719 
	`HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

2720 
OP_END


2723 
	`HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

2724 
OP_END


2727 
	`HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

2728 
OP_END


2731 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

2732 
OP_END


2735 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

2736 
OP_END


2739 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

2740 
OP_END


2743 
	`HANDLE_IGET_X
(
OP_IGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2744 
OP_END


2747 
	`HANDLE_IPUT_X
(
OP_IPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2748 
OP_END


2751 
	`HANDLE_SGET_X
(
OP_SGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2752 
OP_END


2755 
	`HANDLE_SPUT_X
(
OP_SPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

2756 
OP_END


2759 
	`HANDLE_IGET_X
(
OP_IGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

2760 
OP_END


2763 
	`HANDLE_IGET_X
(
OP_IGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2764 
OP_END


2767 
	`HANDLE_IPUT_X
(
OP_IPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2768 
OP_END


2771 
	`HANDLE_SGET_X
(
OP_SGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2772 
OP_END


2775 
	`HANDLE_SPUT_X
(
OP_SPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

2776 
OP_END


2779 
	`HANDLE_OPCODE
(
OP_BREAKPOINT
)

2796 
u1
 
Üigš®Opcode
 = 
	`dvmG‘Origš®Opcode
(
pc
);

2797 
	`ALOGV
("+++ b»ak 0x%02x (0x%04x -> 0x%04x)", 
Üigš®Opcode
, 
š¡
,

2798 
	`INST_REPLACE_OP
(
š¡
, 
Üigš®Opcode
));

2799 
š¡
 = 
	`INST_REPLACE_OP
(š¡, 
Üigš®Opcode
);

2800 
	`FINISH_BKPT
(
Üigš®Opcode
);

2802 
OP_END


2805 
	`HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

2806 
	`EXPORT_PC
();

2807 
v¤c1
 = 
	`INST_AA
(
š¡
);

2808 
»f
 = 
	`FETCH
(1);

2809 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

2810 
	`GOTO_exû±iÚThrown
();

2811 
OP_END


2814 
	`HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

2832 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

2833 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

2835 
	`EXPORT_PC
();

2837 
v¤c1
 = 
	`INST_B
(
š¡
);

2838 
»f
 = 
	`FETCH
(1);

2839 
vd¡
 = 
	`FETCH
(2);

2840 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

2841 
v¤c1
, 
»f
, 
vd¡
);

2843 
	`as£¹
((
vd¡
 >> 16) == 0);

2844 
	`as£¹
(
v¤c1
 <= 4);

2846 
v¤c1
) {

2848 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

2851 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2854 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2857 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2863 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2864 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2865 
	`GOTO_exû±iÚThrown
();

2867 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2868 
	`GOTO_exû±iÚThrown
();

2871 
	`FINISH
(3);

2872 
OP_END


2875 
	`HANDLE_OPCODE
(
OP_EXECUTE_INLINE_RANGE
 )

2877 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

2878 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

2880 
	`EXPORT_PC
();

2882 
v¤c1
 = 
	`INST_AA
(
š¡
);

2883 
»f
 = 
	`FETCH
(1);

2884 
vd¡
 = 
	`FETCH
(2);

2885 
	`ILOGV
("|execute-inline-range‡rgs=%d @%d {regs=v%d-v%d}",

2886 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

2888 
	`as£¹
((
vd¡
 >> 16) == 0);

2889 
	`as£¹
(
v¤c1
 <= 4);

2891 
v¤c1
) {

2893 
¬g3
 = 
	`GET_REGISTER
(
vd¡
+3);

2896 
¬g2
 = 
	`GET_REGISTER
(
vd¡
+2);

2899 
¬g1
 = 
	`GET_REGISTER
(
vd¡
+1);

2902 
¬g0
 = 
	`GET_REGISTER
(
vd¡
+0);

2908 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2909 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2910 
	`GOTO_exû±iÚThrown
();

2912 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

2913 
	`GOTO_exû±iÚThrown
();

2916 
	`FINISH
(3);

2917 
OP_END


2920 
	`HANDLE_OPCODE
(
OP_INVOKE_OBJECT_INIT_RANGE
 )

2922 
Objeù
* 
obj
;

2924 
v¤c1
 = 
	`FETCH
(2);

2925 
obj
 = 
	`GET_REGISTER_AS_OBJECT
(
v¤c1
);

2927 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2928 
	`GOTO_exû±iÚThrown
();

2935 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
)) {

2936 
	`EXPORT_PC
();

2937 
	`dvmS‘Fš®izabË
(
obj
);

2938 ià(
	`dvmG‘Exû±iÚ
(
£lf
))

2939 
	`GOTO_exû±iÚThrown
();

2942 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

2944 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2946 
	`FINISH
(3);

2948 
OP_END


2951 
	`HANDLE_OPCODE
(
OP_RETURN_VOID_BARRIER
 )

2952 
	`ILOGV
("|return-void");

2953 #iâdeà
NDEBUG


2954 
»tv®
.
j
 = 0xababababULL;

2956 
	`ANDROID_MEMBAR_STORE
();

2957 
	`GOTO_»tuºFromM‘hod
();

2958 
OP_END


2961 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

2962 
OP_END


2965 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2966 
OP_END


2969 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2970 
OP_END


2973 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

2974 
OP_END


2977 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2978 
OP_END


2981 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2982 
OP_END


2985 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

2986 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

2987 
OP_END


2990 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

2991 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

2992 
OP_END


2995 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

2996 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

2997 
OP_END


3000 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

3001 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3002 
OP_END


3005 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

3006 
OP_END


3009 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

3010 
OP_END


3013 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

3014 
OP_END


3017 
	`HANDLE_OPCODE
(
OP_UNUSED_FF
)

3021 
	`ALOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

3022 
	`dvmAbÜt
();

3023 
	`FINISH
(1);

3024 
OP_END


3037 
	`GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
, bool)

3039 
CÏssObjeù
* 
¬¿yCÏss
;

3040 
A¼ayObjeù
* 
ÃwA¼ay
;

3041 
u4
* 
cÚ‹Ás
;

3042 
ty³Ch
;

3043 
i
;

3044 
u4
 
¬g5
;

3046 
	`EXPORT_PC
();

3048 
»f
 = 
	`FETCH
(1);

3049 
vd¡
 = 
	`FETCH
(2);

3051 ià(
m‘hodC®lRªge
) {

3052 
v¤c1
 = 
	`INST_AA
(
š¡
);

3053 
¬g5
 = -1;

3054 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3055 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3057 
¬g5
 = 
	`INST_A
(
š¡
);

3058 
v¤c1
 = 
	`INST_B
(
š¡
);

3059 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

3060 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

3066 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

3067 ià(
¬¿yCÏss
 =ğ
NULL
) {

3068 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

3069 ià(
¬¿yCÏss
 =ğ
NULL
)

3070 
	`GOTO_exû±iÚThrown
();

3080 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

3081 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

3086 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'", 
¬¿yCÏss
->
desütÜ
);

3087 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

3088 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

3090 
	`dvmThrowRuÁimeExû±iÚ
("bad filled‡rray„eq");

3091 
	`GOTO_exû±iÚThrown
();

3092 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

3094 
	`ALOGE
("non-int…rimitives‚ot implemented");

3095 
	`dvmThrowIÁ”ÇlE¼Ü
(

3097 
	`GOTO_exû±iÚThrown
();

3100 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

3101 ià(
ÃwA¼ay
 =ğ
NULL
)

3102 
	`GOTO_exû±iÚThrown
();

3107 
cÚ‹Ás
 = (
u4
*)(*)
ÃwA¼ay
->contents;

3108 ià(
m‘hodC®lRªge
) {

3109 
i
 = 0; i < 
v¤c1
; i++)

3110 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3112 
	`as£¹
(
v¤c1
 <= 5);

3113 ià(
v¤c1
 == 5) {

3114 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

3115 
v¤c1
--;

3117 
i
 = 0; i < 
v¤c1
; i++) {

3118 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3119 
vd¡
 >>= 4;

3122 ià(
ty³Ch
 == 'L' ||ypeCh == '[') {

3123 
	`dvmWr™eB¬r›rA¼ay
(
ÃwA¼ay
, 0,‚ewA¼ay->
Ëngth
);

3126 
»tv®
.
l
 = (
Objeù
*)
ÃwA¼ay
;

3128 
	`FINISH
(3);

3129 
GOTO_TARGET_END


3132 
	`GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
, bool)

3134 
M‘hod
* 
ba£M‘hod
;

3135 
Objeù
* 
thisPŒ
;

3137 
	`EXPORT_PC
();

3139 
v¤c1
 = 
	`INST_AA
(
š¡
);

3140 
»f
 = 
	`FETCH
(1);

3141 
vd¡
 = 
	`FETCH
(2);

3147 ià(
m‘hodC®lRªge
) {

3148 
	`as£¹
(
v¤c1
 > 0);

3149 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3150 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3151 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3153 
	`as£¹
((
v¤c1
>>4) > 0);

3154 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

3155 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3156 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3159 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3160 
	`GOTO_exû±iÚThrown
();

3166 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3167 ià(
ba£M‘hod
 =ğ
NULL
) {

3168 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3169 ià(
ba£M‘hod
 =ğ
NULL
) {

3170 
	`ILOGV
("+ unknown method or‡ccess denied");

3171 
	`GOTO_exû±iÚThrown
();

3179 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3180 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3182 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3183 
£lf
->
m‘hodToC®l
 = methodToCall;

3184 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

3188 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3198 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3199 
	`GOTO_exû±iÚThrown
();

3202 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3203 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3206 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s",

3207 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3208 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3209 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3210 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3213 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

3214 
	`ALOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s",

3215 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3216 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3217 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3220 
	`dvmDumpAÎCÏs£s
(0);

3224 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3226 
GOTO_TARGET_END


3228 
	`GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

3230 
M‘hod
* 
ba£M‘hod
;

3231 
u2
 
thisReg
;

3233 
	`EXPORT_PC
();

3235 
v¤c1
 = 
	`INST_AA
(
š¡
);

3236 
»f
 = 
	`FETCH
(1);

3237 
vd¡
 = 
	`FETCH
(2);

3239 ià(
m‘hodC®lRªge
) {

3240 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3241 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3242 
thisReg
 = 
vd¡
;

3244 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

3245 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3246 
thisReg
 = 
vd¡
 & 0x0f;

3250 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3251 
	`GOTO_exû±iÚThrown
();

3260 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3261 ià(
ba£M‘hod
 =ğ
NULL
) {

3262 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3263 ià(
ba£M‘hod
 =ğ
NULL
) {

3264 
	`ILOGV
("+ unknown method or‡ccess denied");

3265 
	`GOTO_exû±iÚThrown
();

3278 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3283 
	`dvmThrowNoSuchM‘hodE¼Ü
(
ba£M‘hod
->
Çme
);

3284 
	`GOTO_exû±iÚThrown
();

3286 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3289 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3290 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3291 
	`GOTO_exû±iÚThrown
();

3294 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3295 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3297 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s",

3298 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3299 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3300 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3302 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3304 
GOTO_TARGET_END


3306 
	`GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

3308 
Objeù
* 
thisPŒ
;

3309 
CÏssObjeù
* 
thisCÏss
;

3311 
	`EXPORT_PC
();

3313 
v¤c1
 = 
	`INST_AA
(
š¡
);

3314 
»f
 = 
	`FETCH
(1);

3315 
vd¡
 = 
	`FETCH
(2);

3321 ià(
m‘hodC®lRªge
) {

3322 
	`as£¹
(
v¤c1
 > 0);

3323 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3324 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3325 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3327 
	`as£¹
((
v¤c1
>>4) > 0);

3328 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

3329 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3330 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3333 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3334 
	`GOTO_exû±iÚThrown
();

3336 
thisCÏss
 = 
thisPŒ
->
şazz
;

3342 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

3343 
m‘hodCÏssDex
);

3344 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3345 
£lf
->
ÿÎs™eCÏss
 = 
thisCÏss
;

3346 
£lf
->
m‘hodToC®l
 = methodToCall;

3348 ià(
m‘hodToC®l
 =ğ
NULL
) {

3349 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3350 
	`GOTO_exû±iÚThrown
();

3353 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3355 
GOTO_TARGET_END


3357 
	`GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

3359 
u2
 
thisReg
;

3361 
	`EXPORT_PC
();

3363 
v¤c1
 = 
	`INST_AA
(
š¡
);

3364 
»f
 = 
	`FETCH
(1);

3365 
vd¡
 = 
	`FETCH
(2);

3367 ià(
m‘hodC®lRªge
) {

3368 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3369 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3370 
thisReg
 = 
vd¡
;

3372 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

3373 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3374 
thisReg
 = 
vd¡
 & 0x0f;

3377 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3378 
	`GOTO_exû±iÚThrown
();

3380 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3381 ià(
m‘hodToC®l
 =ğ
NULL
) {

3382 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

3383 
METHOD_DIRECT
);

3384 ià(
m‘hodToC®l
 =ğ
NULL
) {

3385 
	`ILOGV
("+ unknown direct method");

3386 
	`GOTO_exû±iÚThrown
();

3389 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3391 
GOTO_TARGET_END


3393 
	`GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

3394 
	`EXPORT_PC
();

3396 
v¤c1
 = 
	`INST_AA
(
š¡
);

3397 
»f
 = 
	`FETCH
(1);

3398 
vd¡
 = 
	`FETCH
(2);

3400 ià(
m‘hodC®lRªge
)

3401 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3402 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3404 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

3405 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3407 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3408 ià(
m‘hodToC®l
 =ğ
NULL
) {

3409 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

3410 ià(
m‘hodToC®l
 =ğ
NULL
) {

3411 
	`ILOGV
("+ unknown method");

3412 
	`GOTO_exû±iÚThrown
();

3415 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3421 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

3422 (
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
)) {

3424 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

3428 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3429 
GOTO_TARGET_END


3431 
	`GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

3433 
Objeù
* 
thisPŒ
;

3435 
	`EXPORT_PC
();

3437 
v¤c1
 = 
	`INST_AA
(
š¡
);

3438 
»f
 = 
	`FETCH
(1);

3439 
vd¡
 = 
	`FETCH
(2);

3445 ià(
m‘hodC®lRªge
) {

3446 
	`as£¹
(
v¤c1
 > 0);

3447 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3448 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3449 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3451 
	`as£¹
((
v¤c1
>>4) > 0);

3452 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3453 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3454 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3457 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3458 
	`GOTO_exû±iÚThrown
();

3465 
	`as£¹
(
»f
 < (è
thisPŒ
->
şazz
->
vbËCouÁ
);

3466 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

3467 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3468 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

3469 
£lf
->
m‘hodToC®l
 = methodToCall;

3473 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3474 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3475 
	`GOTO_exû±iÚThrown
();

3478 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3479 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3482 
	`LOGVV
("+++ virtual[%d]=%s.%s",

3483 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3484 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3486 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3488 
GOTO_TARGET_END


3490 
	`GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

3492 
u2
 
thisReg
;

3494 
	`EXPORT_PC
();

3496 
v¤c1
 = 
	`INST_AA
(
š¡
);

3497 
»f
 = 
	`FETCH
(1);

3498 
vd¡
 = 
	`FETCH
(2);

3500 ià(
m‘hodC®lRªge
) {

3501 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3502 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3503 
thisReg
 = 
vd¡
;

3505 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3506 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3507 
thisReg
 = 
vd¡
 & 0x0f;

3510 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3511 
	`GOTO_exû±iÚThrown
();

3514 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3515 
	`dvmThrowNoSuchM‘hodE¼Ü
(
NULL
);

3516 
	`GOTO_exû±iÚThrown
();

3519 
	`as£¹
(
»f
 < (è
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

3531 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

3534 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3535 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

3536 
	`GOTO_exû±iÚThrown
();

3539 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3540 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3542 
	`LOGVV
("+++ super-virtual[%d]=%s.%s",

3543 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3544 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3545 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3547 
GOTO_TARGET_END


3554 
	`GOTO_TARGET
(
»tuºFromM‘hod
)

3556 
SckSaveA»a
* 
§veA»a
;

3565 
	`PERIODIC_CHECKS
(0);

3567 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

3568 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

3569 
curM‘hod
->
shÜty
);

3572 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

3574 #ifdeà
EASY_GDB


3575 
debugSaveA»a
 = 
§veA»a
;

3579 
å
 = (
u4
*)
§veA»a
->
´evF¿me
;

3580 
	`as£¹
(
å
 !ğ
NULL
);

3583 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3584 
	`PC_FP_TO_SELF
();

3585 
	`dvmR•ÜtR‘uº
(
£lf
);

3588 ià(
	`dvmIsB»akF¿me
(
å
)) {

3590 
	`LOGVV
("+++„eturned into break frame");

3591 
	`GOTO_ba
();

3595 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

3596 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3597 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

3599 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3600 
pc
 = 
§veA»a
->
§vedPc
;

3601 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

3602 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3606 ià(
Œue


3609 
	`FINISH
(3);

3613 
	`as£¹
(
çl£
);

3616 
GOTO_TARGET_END


3625 
	`GOTO_TARGET
(
exû±iÚThrown
)

3627 
Objeù
* 
exû±iÚ
;

3628 
ÿtchR–Pc
;

3630 
	`PERIODIC_CHECKS
(0);

3638 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3639 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

3640 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3641 
	`dvmCË¬Exû±iÚ
(
£lf
);

3643 
	`ALOGV
("Handlingƒxception %s‡t %s:%d",

3644 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

3645 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

3661 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3662 
	`PC_FP_TO_SELF
();

3663 
	`dvmR•ÜtExû±iÚThrow
(
£lf
, 
exû±iÚ
);

3681 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

3682 
exû±iÚ
, 
çl£
, (**)(*)&
å
);

3705 ià(
£lf
->
¡ackOv”æowed
)

3706 
	`dvmCËªupSckOv”æow
(
£lf
, 
exû±iÚ
);

3708 ià(
ÿtchR–Pc
 < 0) {

3710 #ià
DVM_SHOW_EXCEPTION
 >= 2

3711 
	`ALOGD
("Exception %s from %s:%d‚ot caught†ocally",

3712 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

3713 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

3715 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

3716 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3717 
	`GOTO_ba
();

3720 #ià
DVM_SHOW_EXCEPTION
 >= 3

3722 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3723 
	`ALOGD
("Exception %shrown from %s:%do %s:%d",

3724 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

3725 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

3726 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

3727 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

3736 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3737 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

3739 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3740 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

3741 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

3742 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3743 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

3757 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

3758 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

3760 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3761 
	`FINISH
(0);

3763 
GOTO_TARGET_END


3784 
	`GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

3785 
u2
 
couÁ
, u2 
»gs
)

3787 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

3794 
u4
* 
outs
;

3795 
i
;

3800 ià(
m‘hodC®lRªge
) {

3803 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

3804 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

3805 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

3806 
i
 = 0; i < 
v¤c1
; i++)

3807 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3809 
u4
 
couÁ
 = 
v¤c1
 >> 4;

3811 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

3812 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

3813 
	`as£¹
(
couÁ
 <= 5);

3815 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

3817 ià(
couÁ
 == 5) {

3818 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

3819 
couÁ
--;

3821 
i
 = 0; i < (è
couÁ
; i++) {

3822 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3823 
vd¡
 >>= 4;

3828 
	`as£¹
((
vd¡
 >> 16) == 0);

3829 
couÁ
) {

3831 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

3833 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

3835 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

3837 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

3839 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3856 
SckSaveA»a
* 
ÃwSaveA»a
;

3857 
u4
* 
ÃwFp
;

3859 
	`ILOGV
("> %s%s.%s %s",

3860 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

3861 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

3862 
m‘hodToC®l
->
shÜty
);

3864 
ÃwFp
 = (
u4
*è
	`SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

3865 
ÃwSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

3868 ià(
Œue
) {

3869 
u1
* 
bÙtom
;

3870 
bÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

3871 ià(
bÙtom
 < 
£lf
->
š‹½SckEnd
) {

3873 
	`ALOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p(%d) size=%d '%s')",

3874 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

3875 (
u1
*è
å
 - 
bÙtom
, 
£lf
->
š‹½SckSize
,

3876 
m‘hodToC®l
->
Çme
);

3877 
	`dvmHªdËSckOv”æow
(
£lf
, 
m‘hodToC®l
);

3878 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3879 
	`GOTO_exû±iÚThrown
();

3885 #ifdeà
LOG_INSTR


3886 ià(
m‘hodToC®l
->
»gi¡”sSize
 > m‘hodToC®l->
šsSize
) {

3893 
	`mem£t
(
ÃwFp
, 0xcc,

3894 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

3898 #ifdeà
EASY_GDB


3899 
ÃwSaveA»a
->
´evSave
 = 
	`SAVEAREA_FROM_FP
(
å
);

3901 
ÃwSaveA»a
->
´evF¿me
 = 
å
;

3902 
ÃwSaveA»a
->
§vedPc
 = 
pc
;

3903 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

3904 
ÃwSaveA»a
->
»tuºAddr
 = 0;

3906 
ÃwSaveA»a
->
m‘hod
 = 
m‘hodToC®l
;

3908 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3914 
	`PC_TO_SELF
();

3915 
	`dvmR•ÜtInvoke
(
£lf
, 
m‘hodToC®l
);

3918 ià(!
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

3923 
curM‘hod
 = 
m‘hodToC®l
;

3924 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

3925 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3926 
pc
 = 
m‘hodToC®l
->
š¢s
;

3927 
å
 = 
ÃwFp
;

3928 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

3929 #ifdeà
EASY_GDB


3930 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

3932 
£lf
->
debugIsM‘hodEÁry
 = 
Œue
;

3933 
	`ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

3934 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3935 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

3936 
	`FINISH
(0);

3939 
ÃwSaveA»a
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

3941 
£lf
->
š‹½Save
.
curF¿me
 = 
ÃwFp
;

3943 
	`DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

3945 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3946 
	`dvmR•ÜtP»N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

3949 
	`ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

3950 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

3957 (*
m‘hodToC®l
->
ÇtiveFunc
)(
ÃwFp
, &
»tv®
, m‘hodToC®l, 
£lf
);

3959 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

3960 
	`dvmR•ÜtPo¡N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

3964 
	`dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

3965 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

3972 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

3973 
	`ALOGV
("Exceptionhrown by/below‚ative code");

3974 
	`GOTO_exû±iÚThrown
();

3977 
	`ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

3978 
	`ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

3979 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

3980 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

3981 
curM‘hod
->
shÜty
);

3984 ià(
Œue


3987 
	`FINISH
(3);

3991 
	`as£¹
(
çl£
);

3995 
	`as£¹
(
çl£
);

3996 
GOTO_TARGET_END


4001 
ba
:

4002 
	`ILOGD
("|-- Leaving interpreter†oop");

4004 
£lf
->
š‹½Save
.
»tv®
 =„etval;

4005 
	}
}

	@vm/mterp/out/InterpC-x86-atom.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1156 
HANDLE_IGET_X
(
OP_IGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

1157 
OP_END


1160 
HANDLE_IPUT_X
(
OP_IPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

1161 
OP_END


1164 
HANDLE_SGET_X
(
OP_SGET_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

1165 
OP_END


1168 
HANDLE_SPUT_X
(
OP_SPUT_VOLATILE
, "-vŞ©e", 
IÁVŞ©e
, )

1169 
OP_END


1172 
HANDLE_IGET_X
(
OP_IGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

1173 
OP_END


1176 
HANDLE_IGET_X
(
OP_IGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1177 
OP_END


1180 
HANDLE_IPUT_X
(
OP_IPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1181 
OP_END


1184 
HANDLE_SGET_X
(
OP_SGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1185 
OP_END


1188 
HANDLE_SPUT_X
(
OP_SPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1189 
OP_END


1192 
	$HANDLE_OPCODE
(
OP_BREAKPOINT
)

1209 
u1
 
Üigš®Opcode
 = 
	`dvmG‘Origš®Opcode
(
pc
);

1210 
	`ALOGV
("+++ b»ak 0x%02x (0x%04x -> 0x%04x)", 
Üigš®Opcode
, 
š¡
,

1211 
	`INST_REPLACE_OP
(
š¡
, 
Üigš®Opcode
));

1212 
š¡
 = 
	`INST_REPLACE_OP
(š¡, 
Üigš®Opcode
);

1213 
	`FINISH_BKPT
(
Üigš®Opcode
);

1214 
	}
}

1215 
OP_END


1218 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE_RANGE
 )

1220 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

1221 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

1223 
	`EXPORT_PC
();

1225 
v¤c1
 = 
	`INST_AA
(
š¡
);

1226 
»f
 = 
	`FETCH
(1);

1227 
vd¡
 = 
	`FETCH
(2);

1228 
	`ILOGV
("|execute-inline-range‡rgs=%d @%d {regs=v%d-v%d}",

1229 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1231 
	`as£¹
((
vd¡
 >> 16) == 0);

1232 
	`as£¹
(
v¤c1
 <= 4);

1234 
v¤c1
) {

1236 
¬g3
 = 
	`GET_REGISTER
(
vd¡
+3);

1239 
¬g2
 = 
	`GET_REGISTER
(
vd¡
+2);

1242 
¬g1
 = 
	`GET_REGISTER
(
vd¡
+1);

1245 
¬g0
 = 
	`GET_REGISTER
(
vd¡
+0);

1251 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

1252 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

1253 
	`GOTO_exû±iÚThrown
();

1255 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

1256 
	`GOTO_exû±iÚThrown
();

1258 
	}
}

1259 
FINISH
(3);

1260 
OP_END


1263 
	$HANDLE_OPCODE
(
OP_INVOKE_OBJECT_INIT_RANGE
 )

1265 
Objeù
* 
obj
;

1267 
v¤c1
 = 
	`FETCH
(2);

1268 
obj
 = 
	`GET_REGISTER_AS_OBJECT
(
v¤c1
);

1270 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1271 
	`GOTO_exû±iÚThrown
();

1278 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
)) {

1279 
	`EXPORT_PC
();

1280 
	`dvmS‘Fš®izabË
(
obj
);

1281 ià(
	`dvmG‘Exû±iÚ
(
£lf
))

1282 
	`GOTO_exû±iÚThrown
();

1285 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

1287 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

1289 
	`FINISH
(3);

1290 
	}
}

1291 
OP_END


1294 
	$HANDLE_OPCODE
(
OP_RETURN_VOID_BARRIER
 )

1295 
	`ILOGV
("|return-void");

1296 #iâdeà
NDEBUG


1297 
»tv®
.
j
 = 0xababababULL;

1299 
	`ANDROID_MEMBAR_STORE
();

1300 
	`GOTO_»tuºFromM‘hod
();

1301 
OP_END


1304 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

1305 
OP_END


1308 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

1309 
OP_END


1312 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT_VOLATILE
, "-objeù-vŞ©e", 
ObjeùVŞ©e
, 
_AS_OBJECT
)

1313 
OP_END


1326 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
, bool)

1328 
CÏssObjeù
* 
¬¿yCÏss
;

1329 
A¼ayObjeù
* 
ÃwA¼ay
;

1330 
u4
* 
cÚ‹Ás
;

1331 
ty³Ch
;

1332 
i
;

1333 
u4
 
¬g5
;

1335 
	`EXPORT_PC
();

1337 
»f
 = 
	`FETCH
(1);

1338 
vd¡
 = 
	`FETCH
(2);

1340 ià(
m‘hodC®lRªge
) {

1341 
v¤c1
 = 
	`INST_AA
(
š¡
);

1342 
¬g5
 = -1;

1343 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1344 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1346 
¬g5
 = 
	`INST_A
(
š¡
);

1347 
v¤c1
 = 
	`INST_B
(
š¡
);

1348 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

1349 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

1355 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1356 ià(
¬¿yCÏss
 =ğ
NULL
) {

1357 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1358 ià(
¬¿yCÏss
 =ğ
NULL
)

1359 
	`GOTO_exû±iÚThrown
();

1369 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1370 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1375 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'", 
¬¿yCÏss
->
desütÜ
);

1376 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

1377 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

1379 
	`dvmThrowRuÁimeExû±iÚ
("bad filled‡rray„eq");

1380 
	`GOTO_exû±iÚThrown
();

1381 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

1383 
	`ALOGE
("non-int…rimitives‚ot implemented");

1384 
	`dvmThrowIÁ”ÇlE¼Ü
(

1386 
	`GOTO_exû±iÚThrown
();

1389 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

1390 ià(
ÃwA¼ay
 =ğ
NULL
)

1391 
	`GOTO_exû±iÚThrown
();

1396 
cÚ‹Ás
 = (
u4
*)(*)
ÃwA¼ay
->contents;

1397 ià(
m‘hodC®lRªge
) {

1398 
i
 = 0; i < 
v¤c1
; i++)

1399 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

1401 
	`as£¹
(
v¤c1
 <= 5);

1402 ià(
v¤c1
 == 5) {

1403 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

1404 
v¤c1
--;

1406 
i
 = 0; i < 
v¤c1
; i++) {

1407 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

1408 
vd¡
 >>= 4;

1411 ià(
ty³Ch
 == 'L' ||ypeCh == '[') {

1412 
	`dvmWr™eB¬r›rA¼ay
(
ÃwA¼ay
, 0,‚ewA¼ay->
Ëngth
);

1415 
»tv®
.
l
 = (
Objeù
*)
ÃwA¼ay
;

1416 
	}
}

1417 
FINISH
(3);

1418 
GOTO_TARGET_END


1421 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
, bool)

1423 
M‘hod
* 
ba£M‘hod
;

1424 
Objeù
* 
thisPŒ
;

1426 
	`EXPORT_PC
();

1428 
v¤c1
 = 
	`INST_AA
(
š¡
);

1429 
»f
 = 
	`FETCH
(1);

1430 
vd¡
 = 
	`FETCH
(2);

1436 ià(
m‘hodC®lRªge
) {

1437 
	`as£¹
(
v¤c1
 > 0);

1438 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1439 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1440 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1442 
	`as£¹
((
v¤c1
>>4) > 0);

1443 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

1444 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1445 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1448 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1449 
	`GOTO_exû±iÚThrown
();

1455 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1456 ià(
ba£M‘hod
 =ğ
NULL
) {

1457 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1458 ià(
ba£M‘hod
 =ğ
NULL
) {

1459 
	`ILOGV
("+ unknown method or‡ccess denied");

1460 
	`GOTO_exû±iÚThrown
();

1468 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1469 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1471 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1472 
£lf
->
m‘hodToC®l
 = methodToCall;

1473 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

1477 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1487 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1488 
	`GOTO_exû±iÚThrown
();

1491 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1492 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1495 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s",

1496 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1497 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1498 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1499 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1502 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

1503 
	`ALOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s",

1504 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1505 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1506 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1509 
	`dvmDumpAÎCÏs£s
(0);

1513 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1514 
	}
}

1515 
GOTO_TARGET_END


1517 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

1519 
M‘hod
* 
ba£M‘hod
;

1520 
u2
 
thisReg
;

1522 
	`EXPORT_PC
();

1524 
v¤c1
 = 
	`INST_AA
(
š¡
);

1525 
»f
 = 
	`FETCH
(1);

1526 
vd¡
 = 
	`FETCH
(2);

1528 ià(
m‘hodC®lRªge
) {

1529 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1530 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1531 
thisReg
 = 
vd¡
;

1533 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

1534 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1535 
thisReg
 = 
vd¡
 & 0x0f;

1539 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1540 
	`GOTO_exû±iÚThrown
();

1549 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1550 ià(
ba£M‘hod
 =ğ
NULL
) {

1551 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1552 ià(
ba£M‘hod
 =ğ
NULL
) {

1553 
	`ILOGV
("+ unknown method or‡ccess denied");

1554 
	`GOTO_exû±iÚThrown
();

1567 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1572 
	`dvmThrowNoSuchM‘hodE¼Ü
(
ba£M‘hod
->
Çme
);

1573 
	`GOTO_exû±iÚThrown
();

1575 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1578 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1579 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1580 
	`GOTO_exû±iÚThrown
();

1583 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1584 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1586 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s",

1587 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1588 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1589 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1591 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1592 
	}
}

1593 
GOTO_TARGET_END


1595 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

1597 
Objeù
* 
thisPŒ
;

1598 
CÏssObjeù
* 
thisCÏss
;

1600 
	`EXPORT_PC
();

1602 
v¤c1
 = 
	`INST_AA
(
š¡
);

1603 
»f
 = 
	`FETCH
(1);

1604 
vd¡
 = 
	`FETCH
(2);

1610 ià(
m‘hodC®lRªge
) {

1611 
	`as£¹
(
v¤c1
 > 0);

1612 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1613 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1614 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1616 
	`as£¹
((
v¤c1
>>4) > 0);

1617 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

1618 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1619 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1622 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1623 
	`GOTO_exû±iÚThrown
();

1625 
thisCÏss
 = 
thisPŒ
->
şazz
;

1631 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

1632 
m‘hodCÏssDex
);

1633 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1634 
£lf
->
ÿÎs™eCÏss
 = 
thisCÏss
;

1635 
£lf
->
m‘hodToC®l
 = methodToCall;

1637 ià(
m‘hodToC®l
 =ğ
NULL
) {

1638 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1639 
	`GOTO_exû±iÚThrown
();

1642 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1643 
	}
}

1644 
GOTO_TARGET_END


1646 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

1648 
u2
 
thisReg
;

1650 
	`EXPORT_PC
();

1652 
v¤c1
 = 
	`INST_AA
(
š¡
);

1653 
»f
 = 
	`FETCH
(1);

1654 
vd¡
 = 
	`FETCH
(2);

1656 ià(
m‘hodC®lRªge
) {

1657 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1658 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1659 
thisReg
 = 
vd¡
;

1661 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

1662 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1663 
thisReg
 = 
vd¡
 & 0x0f;

1666 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1667 
	`GOTO_exû±iÚThrown
();

1669 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1670 ià(
m‘hodToC®l
 =ğ
NULL
) {

1671 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

1672 
METHOD_DIRECT
);

1673 ià(
m‘hodToC®l
 =ğ
NULL
) {

1674 
	`ILOGV
("+ unknown direct method");

1675 
	`GOTO_exû±iÚThrown
();

1678 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1679 
	}
}

1680 
GOTO_TARGET_END


1682 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

1683 
	`EXPORT_PC
();

1685 
v¤c1
 = 
	`INST_AA
(
š¡
);

1686 
»f
 = 
	`FETCH
(1);

1687 
vd¡
 = 
	`FETCH
(2);

1689 ià(
m‘hodC®lRªge
)

1690 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1691 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1693 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

1694 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1696 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1697 ià(
m‘hodToC®l
 =ğ
NULL
) {

1698 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

1699 ià(
m‘hodToC®l
 =ğ
NULL
) {

1700 
	`ILOGV
("+ unknown method");

1701 
	`GOTO_exû±iÚThrown
();

1704 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1710 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

1711 (
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
)) {

1713 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

1716 
	}
}

1717 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1718 
GOTO_TARGET_END


1720 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

1722 
Objeù
* 
thisPŒ
;

1724 
	`EXPORT_PC
();

1726 
v¤c1
 = 
	`INST_AA
(
š¡
);

1727 
»f
 = 
	`FETCH
(1);

1728 
vd¡
 = 
	`FETCH
(2);

1734 ià(
m‘hodC®lRªge
) {

1735 
	`as£¹
(
v¤c1
 > 0);

1736 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1737 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1738 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1740 
	`as£¹
((
v¤c1
>>4) > 0);

1741 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1742 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1743 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1746 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1747 
	`GOTO_exû±iÚThrown
();

1754 
	`as£¹
(
»f
 < (è
thisPŒ
->
şazz
->
vbËCouÁ
);

1755 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

1756 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1757 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

1758 
£lf
->
m‘hodToC®l
 = methodToCall;

1762 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1763 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1764 
	`GOTO_exû±iÚThrown
();

1767 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1768 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1771 
	`LOGVV
("+++ virtual[%d]=%s.%s",

1772 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1773 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1775 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1776 
	}
}

1777 
GOTO_TARGET_END


1779 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

1781 
u2
 
thisReg
;

1783 
	`EXPORT_PC
();

1785 
v¤c1
 = 
	`INST_AA
(
š¡
);

1786 
»f
 = 
	`FETCH
(1);

1787 
vd¡
 = 
	`FETCH
(2);

1789 ià(
m‘hodC®lRªge
) {

1790 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1791 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1792 
thisReg
 = 
vd¡
;

1794 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1795 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1796 
thisReg
 = 
vd¡
 & 0x0f;

1799 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1800 
	`GOTO_exû±iÚThrown
();

1803 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1804 
	`dvmThrowNoSuchM‘hodE¼Ü
(
NULL
);

1805 
	`GOTO_exû±iÚThrown
();

1808 
	`as£¹
(
»f
 < (è
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

1820 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

1823 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1824 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1825 
	`GOTO_exû±iÚThrown
();

1828 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1829 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1831 
	`LOGVV
("+++ super-virtual[%d]=%s.%s",

1832 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1833 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1834 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1835 
	}
}

1836 
GOTO_TARGET_END


1843 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

1845 
SckSaveA»a
* 
§veA»a
;

1854 
	`PERIODIC_CHECKS
(0);

1856 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

1857 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

1858 
curM‘hod
->
shÜty
);

1861 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1863 #ifdeà
EASY_GDB


1864 
debugSaveA»a
 = 
§veA»a
;

1868 
å
 = (
u4
*)
§veA»a
->
´evF¿me
;

1869 
	`as£¹
(
å
 !ğ
NULL
);

1872 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

1873 
	`PC_FP_TO_SELF
();

1874 
	`dvmR•ÜtR‘uº
(
£lf
);

1877 ià(
	`dvmIsB»akF¿me
(
å
)) {

1879 
	`LOGVV
("+++„eturned into break frame");

1880 
	`GOTO_ba
();

1884 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

1885 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1886 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

1888 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1889 
pc
 = 
§veA»a
->
§vedPc
;

1890 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

1891 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

1895 ià(
Œue


1898 
	`FINISH
(3);

1902 
	`as£¹
(
çl£
);

1904 
	}
}

1905 
GOTO_TARGET_END


1914 
	$GOTO_TARGET
(
exû±iÚThrown
)

1916 
Objeù
* 
exû±iÚ
;

1917 
ÿtchR–Pc
;

1919 
	`PERIODIC_CHECKS
(0);

1927 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1928 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1929 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1930 
	`dvmCË¬Exû±iÚ
(
£lf
);

1932 
	`ALOGV
("Handlingƒxception %s‡t %s:%d",

1933 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

1934 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

1950 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

1951 
	`PC_FP_TO_SELF
();

1952 
	`dvmR•ÜtExû±iÚThrow
(
£lf
, 
exû±iÚ
);

1970 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

1971 
exû±iÚ
, 
çl£
, (**)(*)&
å
);

1994 ià(
£lf
->
¡ackOv”æowed
)

1995 
	`dvmCËªupSckOv”æow
(
£lf
, 
exû±iÚ
);

1997 ià(
ÿtchR–Pc
 < 0) {

1999 #ià
DVM_SHOW_EXCEPTION
 >= 2

2000 
	`ALOGD
("Exception %s from %s:%d‚ot caught†ocally",

2001 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2002 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

2004 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2005 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2006 
	`GOTO_ba
();

2009 #ià
DVM_SHOW_EXCEPTION
 >= 3

2011 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2012 
	`ALOGD
("Exception %shrown from %s:%do %s:%d",

2013 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2014 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

2015 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

2016 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

2025 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2026 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

2028 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2029 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

2030 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2031 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2032 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

2046 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

2047 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2049 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2050 
	`FINISH
(0);

2051 
	}
}

2052 
GOTO_TARGET_END


2073 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

2074 
u2
 
couÁ
, u2 
»gs
)

2076 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

2083 
u4
* 
outs
;

2084 
i
;

2089 ià(
m‘hodC®lRªge
) {

2092 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

2093 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

2094 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

2095 
i
 = 0; i < 
v¤c1
; i++)

2096 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2098 
u4
 
couÁ
 = 
v¤c1
 >> 4;

2100 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

2101 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

2102 
	`as£¹
(
couÁ
 <= 5);

2104 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

2106 ià(
couÁ
 == 5) {

2107 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2108 
couÁ
--;

2110 
i
 = 0; i < (è
couÁ
; i++) {

2111 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2112 
vd¡
 >>= 4;

2117 
	`as£¹
((
vd¡
 >> 16) == 0);

2118 
couÁ
) {

2120 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2122 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2124 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2126 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2128 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2134 
	}
}

2145 
SckSaveA»a
* 
	gÃwSaveA»a
;

2146 
u4
* 
	gÃwFp
;

2148 
ILOGV
("> %s%s.%s %s",

2149 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

2150 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2151 
m‘hodToC®l
->
shÜty
);

2153 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

2154 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2157 ià(
	gŒue
) {

2158 
u1
* 
	gbÙtom
;

2159 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

2160 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

2162 
ALOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p(%d) size=%d '%s')",

2163 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

2164 (
u1
*è
å
 - 
bÙtom
, 
£lf
->
š‹½SckSize
,

2165 
m‘hodToC®l
->
Çme
);

2166 
dvmHªdËSckOv”æow
(
£lf
, 
m‘hodToC®l
);

2167 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

2168 
GOTO_exû±iÚThrown
();

2174 #ifdeà
LOG_INSTR


2175 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

2182 
mem£t
(
ÃwFp
, 0xcc,

2183 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

2187 #ifdeà
EASY_GDB


2188 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

2190 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

2191 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

2192 #ià
defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

2193 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

2195 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

2197 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2203 
PC_TO_SELF
();

2204 
dvmR•ÜtInvoke
(
£lf
, 
m‘hodToC®l
);

2207 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

2212 
	gcurM‘hod
 = 
m‘hodToC®l
;

2213 
	g£lf
->
	gš‹½Save
.
	gm‘hod
 = 
curM‘hod
;

2214 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2215 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

2216 
	gå
 = 
ÃwFp
;

2217 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

2218 #ifdeà
EASY_GDB


2219 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2221 
	g£lf
->
	gdebugIsM‘hodEÁry
 = 
Œue
;

2222 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2223 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2224 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

2225 
FINISH
(0);

2228 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

2230 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
ÃwFp
;

2232 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

2234 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2235 
dvmR•ÜtP»N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

2238 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

2239 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

2246 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

2248 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2249 
dvmR•ÜtPo¡N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

2253 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

2254 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

2261 ià(
dvmCheckExû±iÚ
(
£lf
)) {

2262 
ALOGV
("Exceptionhrown by/below‚ative code");

2263 
GOTO_exû±iÚThrown
();

2266 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

2267 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

2268 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2269 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

2270 
curM‘hod
->
shÜty
);

2273 ià(
	gŒue


2276 
FINISH
(3);

2280 
as£¹
(
çl£
);

2284 
as£¹
(
çl£
);

2285 
	gGOTO_TARGET_END


2290 #undeà
»tv®


2291 #undeà
pc


2292 #undeà
å


2293 #undeà
curM‘hod


2294 #undeà
m‘hodCÏssDex


2295 #undeà
£lf


2296 #undeà
debugT¿ckedRefS¹


	@vm/mterp/out/InterpC-x86.cpp

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

42 #ifdeà
WITH_INSTR_CHECKS


43 
	#CHECK_BRANCH_OFFSETS


	)

44 
	#CHECK_REGISTER_INDICES


	)

68 #ià
defšed
(
__ARM_EABI__
)

69 
	#NO_UNALIGN_64__UNION


	)

82 #ià
WITH_EXTRA_GC_CHECKS
 > 1

83 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

85 
	#EXPORT_EXTRA_PC
()

	)

97 #ifdeà
CHECK_BRANCH_OFFSETS


98 
	#ADJUST_PC
(
_off£t
) do { \

99 
myoff
 = 
_off£t
; \

100 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

101 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

103 * 
desc
; \

104 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

105 
	`ALOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s", \

106 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

107 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

108 
	`ä“
(
desc
); \

109 
	`dvmAbÜt
(); \

111 
pc
 +ğ
myoff
; \

112 
	`EXPORT_EXTRA_PC
(); \

113 } 
çl£
)

	)

115 
	#ADJUST_PC
(
_off£t
) do { \

116 
pc
 +ğ
_off£t
; \

117 
	`EXPORT_EXTRA_PC
(); \

118 } 
çl£
)

	)

124 #ifdeà
LOG_INSTR


125 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

126 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

127 
	#ILOG
(
_Ëv–
, ...) do { \

128 
debugSŒBuf
[128]; \

129 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

130 ià(
curM‘hod
 !ğ
NULL
) \

131 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s", \

132 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

134 
	`ALOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s", \

135 
£lf
->
th»adId
, 
debugSŒBuf
); \

136 } 
çl£
)

	)

137 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

138 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

139 cÚ¡ 
	gkS·cšg
[] = " ";

141 
	#ILOGD
(...è(()0)

	)

142 
	#ILOGV
(...è(()0)

	)

143 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

147 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

149 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

150 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

152 
±r
 +ğ
idx
;

153 
cÚv
.
·¹s
[0] = 
±r
[0];

154 
cÚv
.
·¹s
[1] = 
±r
[1];

155  
cÚv
.
Î
;

157 
s8
 
v®
;

158 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

159  
v®
;

161 
	}
}

164 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

166 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

167 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

169 
±r
 +ğ
idx
;

170 
cÚv
.
Î
 = 
v®
;

171 
±r
[0] = 
cÚv
.
·¹s
[0];

172 
±r
[1] = 
cÚv
.
·¹s
[1];

174 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

176 
	}
}

179 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

181 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

182 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

184 
±r
 +ğ
idx
;

185 
cÚv
.
·¹s
[0] = 
±r
[0];

186 
cÚv
.
·¹s
[1] = 
±r
[1];

187  
cÚv
.
d
;

189 
dv®
;

190 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

191  
dv®
;

193 
	}
}

196 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

198 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

199 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

201 
±r
 +ğ
idx
;

202 
cÚv
.
d
 = 
dv®
;

203 
±r
[0] = 
cÚv
.
·¹s
[0];

204 
±r
[1] = 
cÚv
.
·¹s
[1];

206 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

208 
	}
}

218 #ifdeà
CHECK_REGISTER_INDICES


219 
	#GET_REGISTER
(
_idx
) \

220 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

221 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

222 
	#SET_REGISTER
(
_idx
, 
_v®
) \

223 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

224 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

225 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

226 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

227 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

228 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

229 
	#GET_REGISTER_WIDE
(
_idx
) \

230 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

231 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

232 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

233 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

234 ()
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

235 
	#GET_REGISTER_FLOAT
(
_idx
) \

236 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

237 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

238 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

239 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

240 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

241 
	#GET_REGISTER_DOUBLE
(
_idx
) \

242 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

243 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

244 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

245 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

246 ()
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: 
	`as£¹
(!"bad„eg"è)

	)

248 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

249 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

250 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

251 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

252 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

253 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

254 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

255 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

256 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

257 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

258 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

259 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

269 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

274 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

279 
	#INST_REPLACE_OP
(
_š¡
, 
_İcode
è(((_š¡è& 0xff00è| _İcode)

	)

284 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

285 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

291 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

304 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

316 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

318 ià(
obj
 =ğ
NULL
) {

319 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

320  
çl£
;

322 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


323 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

324 
	`ALOGE
("Inv®id objeù %p", 
obj
);

325 
	`dvmAbÜt
();

328 #iâdeà
NDEBUG


329 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

331 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

332 
	`dvmAbÜt
();

335  
Œue
;

336 
	}
}

347 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

349 ià(
obj
 =ğ
NULL
) {

350 
	`EXPORT_PC
();

351 
	`dvmThrowNuÎPoš‹rExû±iÚ
(
NULL
);

352  
çl£
;

354 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


355 ià(!
	`dvmIsH—pAdd»ss
(
obj
)) {

356 
	`ALOGE
("Inv®id objeù %p", 
obj
);

357 
	`dvmAbÜt
();

360 #iâdeà
NDEBUG


361 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

363 
	`ALOGE
("Inv®id objeù cÏs %°(š %p)", 
obj
->
şazz
, obj);

364 
	`dvmAbÜt
();

367  
Œue
;

368 
	}
}

376 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

377 "C" 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
);

	)

380 
	#GOTO_TARGET
(
_rg‘
, ...) \

381 
dvmM‹½_
##
	`_rg‘
(
Th»ad
* 
£lf
, ## 
__VA_ARGS__
) { \

382 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

383 
u2
 
š¡
 = 
	`FETCH
(0); \

384 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

385 
SckSaveA»a
* 
debugSaveA»a
; \

386 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
; \

387 ()
m‘hodToC®l
; ()
debugSaveA»a
;

	)

389 
	#GOTO_TARGET_END
 }

	)

395 
	#»tv®
 
£lf
->
š‹½Save
.
»tv®


	)

396 
	#pc
 
£lf
->
š‹½Save
.
pc


	)

397 
	#å
 
£lf
->
š‹½Save
.
curF¿me


	)

398 
	#curM‘hod
 
£lf
->
š‹½Save
.
m‘hod


	)

399 
	#m‘hodCÏssDex
 
£lf
->
š‹½Save
.
m‘hodCÏssDex


	)

400 
	#debugT¿ckedRefS¹
 
£lf
->
š‹½Save
.
debugT¿ckedRefS¹


	)

403 
	#STUB_HACK
(
x
è
	)
x

404 #ià
defšed
(
WITH_JIT
)

405 
	#JIT_STUB_HACK
(
x
è
	)
x

407 
	#JIT_STUB_HACK
(
x
)

	)

416 
	#PC_FP_TO_SELF
()

	)

417 
	#PC_TO_SELF
()

	)

425 
	#HANDLE_OPCODE
(
_İ
) \

426 "C" 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
); \

427 
dvmM‹½_
##
	`_İ
(
Th»ad
* 
£lf
) { \

428 
u4
 
»f
; \

429 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
; \

430 
u2
 
š¡
 = 
	`FETCH
(0); \

431 ()
»f
; ()
v¤c1
; ()
v¤c2
; ()
vd¡
; ()
š¡
;

	)

433 
	#OP_END
 }

	)

440 #ià
defšed
(
WITH_JIT
)

441 
	#FINISH
(
_off£t
) { \

442 
	`ADJUST_PC
(
_off£t
); \

443 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) { \

444 
	`dvmCheckJ™
(
pc
, 
£lf
); \

447 }

	)

449 
	#FINISH
(
_off£t
) { \

450 
	`ADJUST_PC
(
_off£t
); \

452 }

	)

462 
	#GOTO_exû±iÚThrown
() \

464 
	`dvmM‹½_exû±iÚThrown
(
£lf
); \

466 } 
çl£
)

	)

468 
	#GOTO_»tuºFromM‘hod
() \

470 
	`dvmM‹½_»tuºFromM‘hod
(
£lf
); \

472 } 
çl£
)

	)

474 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

476 
dvmM‹½_
##
	`_rg‘
(
£lf
, 
_m‘hodC®lRªge
); \

478 } 
çl£
)

	)

480 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

482 
	`dvmM‹½_švokeM‘hod
(
£lf
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

483 
_v¤c1
, 
_vd¡
); \

485 } 
çl£
)

	)

490 
	#GOTO_ba
() \

491 
	`dvmM‹½StdBa
(
£lf
, 
çl£
);

	)

499 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

500 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

501 
	`EXPORT_PC
(); \

502 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

504 }

	)

508 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

509 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

510 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

511 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

512 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

513 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

514 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

515 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

516 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

517 
u2
 
couÁ
, u2 
»gs
);

518 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

519 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

533 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

534 
	`HANDLE_OPCODE
(
_İcode
 ) \

535 
vd¡
 = 
	`INST_A
(
š¡
); \

536 
v¤c1
 = 
	`INST_B
(
š¡
); \

537 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

538 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

539 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

540 
	`FINISH
(1);

	)

542 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

543 
_tovty³
, 
_tÜty³
) \

544 
	`HANDLE_OPCODE
(
_İcode
 ) \

547 
_äomvty³
 
v®
; \

548 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

549 
vd¡
 = 
	`INST_A
(
š¡
); \

550 
v¤c1
 = 
	`INST_B
(
š¡
); \

551 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

552 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

553 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

554 
štMax
 = ~
štMš
; \

555 
»suÉ
 = (
_tovty³
è
v®
; \

556 ià(
v®
 >ğ
štMax
) \

557 
»suÉ
 = 
štMax
; \

558 ià(
v®
 <ğ
štMš
) \

559 
»suÉ
 = 
štMš
; \

560 ià(
v®
 != val) \

561 
»suÉ
 = 0; \

563 
»suÉ
 = (
_tovty³
è
v®
; \

564 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

566 
	`FINISH
(1);

	)

568 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

569 
	`HANDLE_OPCODE
(
_İcode
 ) \

570 
vd¡
 = 
	`INST_A
(
š¡
); \

571 
v¤c1
 = 
	`INST_B
(
š¡
); \

572 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

573 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

574 
	`FINISH
(1);

	)

577 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

578 
	`HANDLE_OPCODE
(
_İcode
 ) \

580 
»suÉ
; \

581 
u2
 
»gs
; \

582 
_v¬Ty³
 
v®1
, 
v®2
; \

583 
vd¡
 = 
	`INST_AA
(
š¡
); \

584 
»gs
 = 
	`FETCH
(1); \

585 
v¤c1
 = 
»gs
 & 0xff; \

586 
v¤c2
 = 
»gs
 >> 8; \

587 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

588 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

589 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

590 ià(
v®1
 =ğ
v®2
) \

591 
»suÉ
 = 0; \

592 ià(
v®1
 < 
v®2
) \

593 
»suÉ
 = -1; \

594 ià(
v®1
 > 
v®2
) \

595 
»suÉ
 = 1; \

597 
»suÉ
 = (
_ÇnV®
); \

598 
	`ILOGV
("+„esuÉ=%d", 
»suÉ
); \

599 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

601 
	`FINISH
(2);

	)

603 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

604 
	`HANDLE_OPCODE
(
_İcode
 ) \

605 
v¤c1
 = 
	`INST_A
(
š¡
); \

606 
v¤c2
 = 
	`INST_B
(
š¡
); \

607 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

608 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

609 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

610 
b¿nchOff£t
); \

611 
	`ILOGV
("> branchaken"); \

612 ià(
b¿nchOff£t
 < 0) \

613 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

614 
	`FINISH
(
b¿nchOff£t
); \

616 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

617 
	`FINISH
(2); \

618 }

	)

620 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

621 
	`HANDLE_OPCODE
(
_İcode
 ) \

622 
v¤c1
 = 
	`INST_AA
(
š¡
); \

623 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

624 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

625 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

626 
	`ILOGV
("> branchaken"); \

627 ià(
b¿nchOff£t
 < 0) \

628 
	`PERIODIC_CHECKS
(
b¿nchOff£t
); \

629 
	`FINISH
(
b¿nchOff£t
); \

631 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

632 
	`FINISH
(2); \

633 }

	)

635 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

636 
	`HANDLE_OPCODE
(
_İcode
 ) \

637 
vd¡
 = 
	`INST_A
(
š¡
); \

638 
v¤c1
 = 
	`INST_B
(
š¡
); \

639 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

640 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

641 
	`FINISH
(1);

	)

643 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

644 
	`HANDLE_OPCODE
(
_İcode
 ) \

646 
u2
 
¤cRegs
; \

647 
vd¡
 = 
	`INST_AA
(
š¡
); \

648 
¤cRegs
 = 
	`FETCH
(1); \

649 
v¤c1
 = 
¤cRegs
 & 0xff; \

650 
v¤c2
 = 
¤cRegs
 >> 8; \

651 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

652 ià(
_chkdiv
 != 0) { \

653 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

654 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

655 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

656 ià(
£cÚdV®
 == 0) { \

657 
	`EXPORT_PC
(); \

658 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

659 
	`GOTO_exû±iÚThrown
(); \

661 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

662 ià(
_chkdiv
 == 1) \

663 
»suÉ
 = 
fœ¡V®
; \

665 
»suÉ
 = 0; \

667 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

669 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

672 
	`SET_REGISTER
(
vd¡
, \

673 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

676 
	`FINISH
(2);

	)

678 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

679 
	`HANDLE_OPCODE
(
_İcode
 ) \

681 
u2
 
¤cRegs
; \

682 
vd¡
 = 
	`INST_AA
(
š¡
); \

683 
¤cRegs
 = 
	`FETCH
(1); \

684 
v¤c1
 = 
¤cRegs
 & 0xff; \

685 
v¤c2
 = 
¤cRegs
 >> 8; \

686 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

687 
	`SET_REGISTER
(
vd¡
, \

688 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

690 
	`FINISH
(2);

	)

692 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

693 
	`HANDLE_OPCODE
(
_İcode
 ) \

694 
vd¡
 = 
	`INST_A
(
š¡
); \

695 
v¤c1
 = 
	`INST_B
(
š¡
); \

696 
v¤c2
 = 
	`FETCH
(1); \

697 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

698 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

699 ià(
_chkdiv
 != 0) { \

700 
s4
 
fœ¡V®
, 
»suÉ
; \

701 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

702 ià((
s2
è
v¤c2
 == 0) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

705 
	`GOTO_exû±iÚThrown
(); \

707 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

709 ià(
_chkdiv
 == 1) \

710 
»suÉ
 = 
fœ¡V®
; \

712 
»suÉ
 = 0; \

714 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

716 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

719 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

721 
	`FINISH
(2);

	)

723 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

726 
u2
 
l™Info
; \

727 
vd¡
 = 
	`INST_AA
(
š¡
); \

728 
l™Info
 = 
	`FETCH
(1); \

729 
v¤c1
 = 
l™Info
 & 0xff; \

730 
v¤c2
 = 
l™Info
 >> 8; \

731 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

732 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

733 ià(
_chkdiv
 != 0) { \

734 
s4
 
fœ¡V®
, 
»suÉ
; \

735 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

736 ià((
s1
è
v¤c2
 == 0) { \

737 
	`EXPORT_PC
(); \

738 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

739 
	`GOTO_exû±iÚThrown
(); \

741 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

742 ià(
_chkdiv
 == 1) \

743 
»suÉ
 = 
fœ¡V®
; \

745 
»suÉ
 = 0; \

747 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

749 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

751 
	`SET_REGISTER
(
vd¡
, \

752 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

755 
	`FINISH
(2);

	)

757 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

760 
u2
 
l™Info
; \

761 
vd¡
 = 
	`INST_AA
(
š¡
); \

762 
l™Info
 = 
	`FETCH
(1); \

763 
v¤c1
 = 
l™Info
 & 0xff; \

764 
v¤c2
 = 
l™Info
 >> 8; \

765 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

766 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

767 
	`SET_REGISTER
(
vd¡
, \

768 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

770 
	`FINISH
(2);

	)

772 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

773 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
vd¡
 = 
	`INST_A
(
š¡
); \

775 
v¤c1
 = 
	`INST_B
(
š¡
); \

776 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

777 ià(
_chkdiv
 != 0) { \

778 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

779 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

780 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

781 ià(
£cÚdV®
 == 0) { \

782 
	`EXPORT_PC
(); \

783 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

784 
	`GOTO_exû±iÚThrown
(); \

786 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

787 ià(
_chkdiv
 == 1) \

788 
»suÉ
 = 
fœ¡V®
; \

790 
»suÉ
 = 0; \

792 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

794 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

796 
	`SET_REGISTER
(
vd¡
, \

797 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

799 
	`FINISH
(1);

	)

801 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

802 
	`HANDLE_OPCODE
(
_İcode
 ) \

803 
vd¡
 = 
	`INST_A
(
š¡
); \

804 
v¤c1
 = 
	`INST_B
(
š¡
); \

805 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

806 
	`SET_REGISTER
(
vd¡
, \

807 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

808 
	`FINISH
(1);

	)

810 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

811 
	`HANDLE_OPCODE
(
_İcode
 ) \

813 
u2
 
¤cRegs
; \

814 
vd¡
 = 
	`INST_AA
(
š¡
); \

815 
¤cRegs
 = 
	`FETCH
(1); \

816 
v¤c1
 = 
¤cRegs
 & 0xff; \

817 
v¤c2
 = 
¤cRegs
 >> 8; \

818 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

819 ià(
_chkdiv
 != 0) { \

820 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

821 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

822 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

823 ià(
£cÚdV®
 == 0LL) { \

824 
	`EXPORT_PC
(); \

825 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

826 
	`GOTO_exû±iÚThrown
(); \

828 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

829 
£cÚdV®
 == -1LL) \

831 ià(
_chkdiv
 == 1) \

832 
»suÉ
 = 
fœ¡V®
; \

834 
»suÉ
 = 0; \

836 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

838 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

840 
	`SET_REGISTER_WIDE
(
vd¡
, \

841 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

844 
	`FINISH
(2);

	)

846 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

847 
	`HANDLE_OPCODE
(
_İcode
 ) \

849 
u2
 
¤cRegs
; \

850 
vd¡
 = 
	`INST_AA
(
š¡
); \

851 
¤cRegs
 = 
	`FETCH
(1); \

852 
v¤c1
 = 
¤cRegs
 & 0xff; \

853 
v¤c2
 = 
¤cRegs
 >> 8; \

854 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

855 
	`SET_REGISTER_WIDE
(
vd¡
, \

856 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

858 
	`FINISH
(2);

	)

860 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

861 
	`HANDLE_OPCODE
(
_İcode
 ) \

862 
vd¡
 = 
	`INST_A
(
š¡
); \

863 
v¤c1
 = 
	`INST_B
(
š¡
); \

864 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

865 ià(
_chkdiv
 != 0) { \

866 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

867 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

868 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

869 ià(
£cÚdV®
 == 0LL) { \

870 
	`EXPORT_PC
(); \

871 
	`dvmThrowAr™hm‘icExû±iÚ
("divide by zero"); \

872 
	`GOTO_exû±iÚThrown
(); \

874 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

875 
£cÚdV®
 == -1LL) \

877 ià(
_chkdiv
 == 1) \

878 
»suÉ
 = 
fœ¡V®
; \

880 
»suÉ
 = 0; \

882 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

884 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

886 
	`SET_REGISTER_WIDE
(
vd¡
, \

887 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

889 
	`FINISH
(1);

	)

891 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

892 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
vd¡
 = 
	`INST_A
(
š¡
); \

894 
v¤c1
 = 
	`INST_B
(
š¡
); \

895 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

896 
	`SET_REGISTER_WIDE
(
vd¡
, \

897 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

898 
	`FINISH
(1);

	)

900 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

901 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
u2
 
¤cRegs
; \

904 
vd¡
 = 
	`INST_AA
(
š¡
); \

905 
¤cRegs
 = 
	`FETCH
(1); \

906 
v¤c1
 = 
¤cRegs
 & 0xff; \

907 
v¤c2
 = 
¤cRegs
 >> 8; \

908 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

909 
	`SET_REGISTER_FLOAT
(
vd¡
, \

910 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

912 
	`FINISH
(2);

	)

914 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

915 
	`HANDLE_OPCODE
(
_İcode
 ) \

917 
u2
 
¤cRegs
; \

918 
vd¡
 = 
	`INST_AA
(
š¡
); \

919 
¤cRegs
 = 
	`FETCH
(1); \

920 
v¤c1
 = 
¤cRegs
 & 0xff; \

921 
v¤c2
 = 
¤cRegs
 >> 8; \

922 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

923 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

924 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

933 
	`SET_REGISTER_FLOAT
(
vd¡
, \

934 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

935 
	`FINISH
(1);

	)

937 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

938 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
vd¡
 = 
	`INST_A
(
š¡
); \

940 
v¤c1
 = 
	`INST_B
(
š¡
); \

941 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

942 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

943 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

944 
	`FINISH
(1);

	)

946 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

947 
	`HANDLE_OPCODE
(
_İcode
 ) \

949 
A¼ayObjeù
* 
¬¿yObj
; \

950 
u2
 
¬¿yInfo
; \

951 
	`EXPORT_PC
(); \

952 
vd¡
 = 
	`INST_AA
(
š¡
); \

953 
¬¿yInfo
 = 
	`FETCH
(1); \

954 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

955 
v¤c2
 = 
¬¿yInfo
 >> 8; \

956 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

957 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

958 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

959 
	`GOTO_exû±iÚThrown
(); \

960 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

961 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

962 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

963 
	`GOTO_exû±iÚThrown
(); \

965 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

966 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

967 
	`ILOGV
("+ AGET[%d]=%#x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

969 
	`FINISH
(2);

	)

971 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

972 
	`HANDLE_OPCODE
(
_İcode
 ) \

974 
A¼ayObjeù
* 
¬¿yObj
; \

975 
u2
 
¬¿yInfo
; \

976 
	`EXPORT_PC
(); \

977 
vd¡
 = 
	`INST_AA
(
š¡
); \

978 
¬¿yInfo
 = 
	`FETCH
(1); \

979 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

980 
v¤c2
 = 
¬¿yInfo
 >> 8; \

981 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

982 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

983 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

984 
	`GOTO_exû±iÚThrown
(); \

985 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

986 
	`dvmThrowA¼ayIndexOutOfBoundsExû±iÚ
( \

987 
¬¿yObj
->
Ëngth
, 
	`GET_REGISTER
(
v¤c2
)); \

988 
	`GOTO_exû±iÚThrown
(); \

990 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

991 ((
_ty³
*)(*)
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

992 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

994 
	`FINISH
(2);

	)

1013 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1014 
	`HANDLE_OPCODE
(
_İcode
 ) \

1016 
In¡F›ld
* 
if›ld
; \

1017 
Objeù
* 
obj
; \

1018 
	`EXPORT_PC
(); \

1019 
vd¡
 = 
	`INST_A
(
š¡
); \

1020 
v¤c1
 = 
	`INST_B
(
š¡
); \

1021 
»f
 = 
	`FETCH
(1); \

1022 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1023 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1024 ià(!
	`checkFÜNuÎ
(
obj
)) \

1025 
	`GOTO_exû±iÚThrown
(); \

1026 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1027 ià(
if›ld
 =ğ
NULL
) { \

1028 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1029 ià(
if›ld
 =ğ
NULL
) \

1030 
	`GOTO_exû±iÚThrown
(); \

1032 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1033 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1034 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1035 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1037 
	`FINISH
(2);

	)

1039 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
Objeù
* 
obj
; \

1043 
vd¡
 = 
	`INST_A
(
š¡
); \

1044 
v¤c1
 = 
	`INST_B
(
š¡
); \

1045 
»f
 = 
	`FETCH
(1); \

1046 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1047 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1048 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1049 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1050 
	`GOTO_exû±iÚThrown
(); \

1051 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1052 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1053 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1055 
	`FINISH
(2);

	)

1057 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1058 
	`HANDLE_OPCODE
(
_İcode
 ) \

1060 
In¡F›ld
* 
if›ld
; \

1061 
Objeù
* 
obj
; \

1062 
	`EXPORT_PC
(); \

1063 
vd¡
 = 
	`INST_A
(
š¡
); \

1064 
v¤c1
 = 
	`INST_B
(
š¡
); \

1065 
»f
 = 
	`FETCH
(1); \

1066 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1067 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1068 ià(!
	`checkFÜNuÎ
(
obj
)) \

1069 
	`GOTO_exû±iÚThrown
(); \

1070 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1071 ià(
if›ld
 =ğ
NULL
) { \

1072 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1073 ià(
if›ld
 =ğ
NULL
) \

1074 
	`GOTO_exû±iÚThrown
(); \

1076 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1077 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1078 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1079 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1081 
	`FINISH
(2);

	)

1083 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1084 
	`HANDLE_OPCODE
(
_İcode
 ) \

1086 
Objeù
* 
obj
; \

1087 
vd¡
 = 
	`INST_A
(
š¡
); \

1088 
v¤c1
 = 
	`INST_B
(
š¡
); \

1089 
»f
 = 
	`FETCH
(1); \

1090 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1091 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1092 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1093 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1094 
	`GOTO_exû±iÚThrown
(); \

1095 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1096 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1097 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1099 
	`FINISH
(2);

	)

1109 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1110 
	`HANDLE_OPCODE
(
_İcode
 ) \

1112 
SticF›ld
* 
sf›ld
; \

1113 
vd¡
 = 
	`INST_AA
(
š¡
); \

1114 
»f
 = 
	`FETCH
(1); \

1115 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1116 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1117 ià(
sf›ld
 =ğ
NULL
) { \

1118 
	`EXPORT_PC
(); \

1119 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1120 ià(
sf›ld
 =ğ
NULL
) \

1121 
	`GOTO_exû±iÚThrown
(); \

1122 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1123 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1126 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1127 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1128 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1130 
	`FINISH
(2);

	)

1132 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1133 
	`HANDLE_OPCODE
(
_İcode
 ) \

1135 
SticF›ld
* 
sf›ld
; \

1136 
vd¡
 = 
	`INST_AA
(
š¡
); \

1137 
»f
 = 
	`FETCH
(1); \

1138 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1139 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1140 ià(
sf›ld
 =ğ
NULL
) { \

1141 
	`EXPORT_PC
(); \

1142 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1143 ià(
sf›ld
 =ğ
NULL
) \

1144 
	`GOTO_exû±iÚThrown
(); \

1145 ià(
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
) { \

1146 
	`JIT_STUB_HACK
(
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
)); \

1149 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1150 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1151 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1153 
	`FINISH
(2);

	)

1156 
HANDLE_IGET_X
(
OP_IGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1157 
OP_END


1160 
HANDLE_IPUT_X
(
OP_IPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1161 
OP_END


1164 
HANDLE_SGET_X
(
OP_SGET_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1165 
OP_END


1168 
HANDLE_SPUT_X
(
OP_SPUT_WIDE_VOLATILE
, "-wide-vŞ©e", 
LÚgVŞ©e
, 
_WIDE
)

1169 
OP_END


1172 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE_RANGE
 )

1174 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

1175 
¬g0
 = 
¬g1
 = 
¬g2
 = 
¬g3
 = 0;

1177 
	`EXPORT_PC
();

1179 
v¤c1
 = 
	`INST_AA
(
š¡
);

1180 
»f
 = 
	`FETCH
(1);

1181 
vd¡
 = 
	`FETCH
(2);

1182 
	`ILOGV
("|execute-inline-range‡rgs=%d @%d {regs=v%d-v%d}",

1183 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1185 
	`as£¹
((
vd¡
 >> 16) == 0);

1186 
	`as£¹
(
v¤c1
 <= 4);

1188 
v¤c1
) {

1190 
¬g3
 = 
	`GET_REGISTER
(
vd¡
+3);

1193 
¬g2
 = 
	`GET_REGISTER
(
vd¡
+2);

1196 
¬g1
 = 
	`GET_REGISTER
(
vd¡
+1);

1199 
¬g0
 = 
	`GET_REGISTER
(
vd¡
+0);

1205 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

1206 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

1207 
	`GOTO_exû±iÚThrown
();

1209 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

1210 
	`GOTO_exû±iÚThrown
();

1212 
	}
}

1213 
FINISH
(3);

1214 
OP_END


1217 
	$HANDLE_OPCODE
(
OP_INVOKE_OBJECT_INIT_RANGE
 )

1219 
Objeù
* 
obj
;

1221 
v¤c1
 = 
	`FETCH
(2);

1222 
obj
 = 
	`GET_REGISTER_AS_OBJECT
(
v¤c1
);

1224 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1225 
	`GOTO_exû±iÚThrown
();

1232 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
)) {

1233 
	`EXPORT_PC
();

1234 
	`dvmS‘Fš®izabË
(
obj
);

1235 ià(
	`dvmG‘Exû±iÚ
(
£lf
))

1236 
	`GOTO_exû±iÚThrown
();

1239 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeDebugg”Aùive
) {

1241 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

1243 
	`FINISH
(3);

1244 
	}
}

1245 
OP_END


1248 
	$HANDLE_OPCODE
(
OP_RETURN_VOID_BARRIER
 )

1249 
	`ILOGV
("|return-void");

1250 #iâdeà
NDEBUG


1251 
»tv®
.
j
 = 0xababababULL;

1253 
	`ANDROID_MEMBAR_STORE
();

1254 
	`GOTO_»tuºFromM‘hod
();

1255 
OP_END


1268 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
, bool)

1270 
CÏssObjeù
* 
¬¿yCÏss
;

1271 
A¼ayObjeù
* 
ÃwA¼ay
;

1272 
u4
* 
cÚ‹Ás
;

1273 
ty³Ch
;

1274 
i
;

1275 
u4
 
¬g5
;

1277 
	`EXPORT_PC
();

1279 
»f
 = 
	`FETCH
(1);

1280 
vd¡
 = 
	`FETCH
(2);

1282 ià(
m‘hodC®lRªge
) {

1283 
v¤c1
 = 
	`INST_AA
(
š¡
);

1284 
¬g5
 = -1;

1285 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1286 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1288 
¬g5
 = 
	`INST_A
(
š¡
);

1289 
v¤c1
 = 
	`INST_B
(
š¡
);

1290 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

1291 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

1297 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1298 ià(
¬¿yCÏss
 =ğ
NULL
) {

1299 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1300 ià(
¬¿yCÏss
 =ğ
NULL
)

1301 
	`GOTO_exû±iÚThrown
();

1311 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1312 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1317 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'", 
¬¿yCÏss
->
desütÜ
);

1318 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

1319 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

1321 
	`dvmThrowRuÁimeExû±iÚ
("bad filled‡rray„eq");

1322 
	`GOTO_exû±iÚThrown
();

1323 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

1325 
	`ALOGE
("non-int…rimitives‚ot implemented");

1326 
	`dvmThrowIÁ”ÇlE¼Ü
(

1328 
	`GOTO_exû±iÚThrown
();

1331 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

1332 ià(
ÃwA¼ay
 =ğ
NULL
)

1333 
	`GOTO_exû±iÚThrown
();

1338 
cÚ‹Ás
 = (
u4
*)(*)
ÃwA¼ay
->contents;

1339 ià(
m‘hodC®lRªge
) {

1340 
i
 = 0; i < 
v¤c1
; i++)

1341 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

1343 
	`as£¹
(
v¤c1
 <= 5);

1344 ià(
v¤c1
 == 5) {

1345 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

1346 
v¤c1
--;

1348 
i
 = 0; i < 
v¤c1
; i++) {

1349 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

1350 
vd¡
 >>= 4;

1353 ià(
ty³Ch
 == 'L' ||ypeCh == '[') {

1354 
	`dvmWr™eB¬r›rA¼ay
(
ÃwA¼ay
, 0,‚ewA¼ay->
Ëngth
);

1357 
»tv®
.
l
 = (
Objeù
*)
ÃwA¼ay
;

1358 
	}
}

1359 
FINISH
(3);

1360 
GOTO_TARGET_END


1363 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
, bool)

1365 
M‘hod
* 
ba£M‘hod
;

1366 
Objeù
* 
thisPŒ
;

1368 
	`EXPORT_PC
();

1370 
v¤c1
 = 
	`INST_AA
(
š¡
);

1371 
»f
 = 
	`FETCH
(1);

1372 
vd¡
 = 
	`FETCH
(2);

1378 ià(
m‘hodC®lRªge
) {

1379 
	`as£¹
(
v¤c1
 > 0);

1380 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1381 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1382 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1384 
	`as£¹
((
v¤c1
>>4) > 0);

1385 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

1386 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1387 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1390 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1391 
	`GOTO_exû±iÚThrown
();

1397 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1398 ià(
ba£M‘hod
 =ğ
NULL
) {

1399 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1400 ià(
ba£M‘hod
 =ğ
NULL
) {

1401 
	`ILOGV
("+ unknown method or‡ccess denied");

1402 
	`GOTO_exû±iÚThrown
();

1410 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1411 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1413 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1414 
£lf
->
m‘hodToC®l
 = methodToCall;

1415 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

1419 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1429 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1430 
	`GOTO_exû±iÚThrown
();

1433 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1434 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1437 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s",

1438 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1439 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1440 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1441 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1444 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

1445 
	`ALOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s",

1446 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1447 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1448 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1451 
	`dvmDumpAÎCÏs£s
(0);

1455 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1456 
	}
}

1457 
GOTO_TARGET_END


1459 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

1461 
M‘hod
* 
ba£M‘hod
;

1462 
u2
 
thisReg
;

1464 
	`EXPORT_PC
();

1466 
v¤c1
 = 
	`INST_AA
(
š¡
);

1467 
»f
 = 
	`FETCH
(1);

1468 
vd¡
 = 
	`FETCH
(2);

1470 ià(
m‘hodC®lRªge
) {

1471 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1472 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1473 
thisReg
 = 
vd¡
;

1475 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

1476 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1477 
thisReg
 = 
vd¡
 & 0x0f;

1481 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1482 
	`GOTO_exû±iÚThrown
();

1491 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1492 ià(
ba£M‘hod
 =ğ
NULL
) {

1493 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1494 ià(
ba£M‘hod
 =ğ
NULL
) {

1495 
	`ILOGV
("+ unknown method or‡ccess denied");

1496 
	`GOTO_exû±iÚThrown
();

1509 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1514 
	`dvmThrowNoSuchM‘hodE¼Ü
(
ba£M‘hod
->
Çme
);

1515 
	`GOTO_exû±iÚThrown
();

1517 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1520 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1521 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1522 
	`GOTO_exû±iÚThrown
();

1525 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1526 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1528 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s",

1529 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1530 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1531 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1533 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1534 
	}
}

1535 
GOTO_TARGET_END


1537 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

1539 
Objeù
* 
thisPŒ
;

1540 
CÏssObjeù
* 
thisCÏss
;

1542 
	`EXPORT_PC
();

1544 
v¤c1
 = 
	`INST_AA
(
š¡
);

1545 
»f
 = 
	`FETCH
(1);

1546 
vd¡
 = 
	`FETCH
(2);

1552 ià(
m‘hodC®lRªge
) {

1553 
	`as£¹
(
v¤c1
 > 0);

1554 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1555 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1556 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1558 
	`as£¹
((
v¤c1
>>4) > 0);

1559 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

1560 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1561 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1564 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1565 
	`GOTO_exû±iÚThrown
();

1567 
thisCÏss
 = 
thisPŒ
->
şazz
;

1573 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

1574 
m‘hodCÏssDex
);

1575 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1576 
£lf
->
ÿÎs™eCÏss
 = 
thisCÏss
;

1577 
£lf
->
m‘hodToC®l
 = methodToCall;

1579 ià(
m‘hodToC®l
 =ğ
NULL
) {

1580 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1581 
	`GOTO_exû±iÚThrown
();

1584 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1585 
	}
}

1586 
GOTO_TARGET_END


1588 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

1590 
u2
 
thisReg
;

1592 
	`EXPORT_PC
();

1594 
v¤c1
 = 
	`INST_AA
(
š¡
);

1595 
»f
 = 
	`FETCH
(1);

1596 
vd¡
 = 
	`FETCH
(2);

1598 ià(
m‘hodC®lRªge
) {

1599 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1600 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1601 
thisReg
 = 
vd¡
;

1603 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

1604 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1605 
thisReg
 = 
vd¡
 & 0x0f;

1608 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1609 
	`GOTO_exû±iÚThrown
();

1611 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1612 ià(
m‘hodToC®l
 =ğ
NULL
) {

1613 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

1614 
METHOD_DIRECT
);

1615 ià(
m‘hodToC®l
 =ğ
NULL
) {

1616 
	`ILOGV
("+ unknown direct method");

1617 
	`GOTO_exû±iÚThrown
();

1620 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1621 
	}
}

1622 
GOTO_TARGET_END


1624 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

1625 
	`EXPORT_PC
();

1627 
v¤c1
 = 
	`INST_AA
(
š¡
);

1628 
»f
 = 
	`FETCH
(1);

1629 
vd¡
 = 
	`FETCH
(2);

1631 ià(
m‘hodC®lRªge
)

1632 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1633 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1635 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

1636 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1638 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1639 ià(
m‘hodToC®l
 =ğ
NULL
) {

1640 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

1641 ià(
m‘hodToC®l
 =ğ
NULL
) {

1642 
	`ILOGV
("+ unknown method");

1643 
	`GOTO_exû±iÚThrown
();

1646 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1652 ià((
£lf
->
š‹½B»ak
.
ùl
.
subMode
 & 
kSubModeJ™T¿ûBud
) &&

1653 (
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
è=ğ
NULL
)) {

1655 
	`dvmJ™EndT¿ûS–eù
(
£lf
,
pc
);

1658 
	}
}

1659 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1660 
GOTO_TARGET_END


1662 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

1664 
Objeù
* 
thisPŒ
;

1666 
	`EXPORT_PC
();

1668 
v¤c1
 = 
	`INST_AA
(
š¡
);

1669 
»f
 = 
	`FETCH
(1);

1670 
vd¡
 = 
	`FETCH
(2);

1676 ià(
m‘hodC®lRªge
) {

1677 
	`as£¹
(
v¤c1
 > 0);

1678 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1679 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1680 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1682 
	`as£¹
((
v¤c1
>>4) > 0);

1683 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1684 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1685 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1688 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1689 
	`GOTO_exû±iÚThrown
();

1696 
	`as£¹
(
»f
 < (è
thisPŒ
->
şazz
->
vbËCouÁ
);

1697 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

1698 #ià
	`defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

1699 
£lf
->
ÿÎs™eCÏss
 = 
thisPŒ
->
şazz
;

1700 
£lf
->
m‘hodToC®l
 = methodToCall;

1704 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1705 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1706 
	`GOTO_exû±iÚThrown
();

1709 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1710 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1713 
	`LOGVV
("+++ virtual[%d]=%s.%s",

1714 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1715 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1717 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1718 
	}
}

1719 
GOTO_TARGET_END


1721 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

1723 
u2
 
thisReg
;

1725 
	`EXPORT_PC
();

1727 
v¤c1
 = 
	`INST_AA
(
š¡
);

1728 
»f
 = 
	`FETCH
(1);

1729 
vd¡
 = 
	`FETCH
(2);

1731 ià(
m‘hodC®lRªge
) {

1732 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1733 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1734 
thisReg
 = 
vd¡
;

1736 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1737 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1738 
thisReg
 = 
vd¡
 & 0x0f;

1741 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1742 
	`GOTO_exû±iÚThrown
();

1745 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1746 
	`dvmThrowNoSuchM‘hodE¼Ü
(
NULL
);

1747 
	`GOTO_exû±iÚThrown
();

1750 
	`as£¹
(
»f
 < (è
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

1762 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

1765 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1766 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

1767 
	`GOTO_exû±iÚThrown
();

1770 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1771 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1773 
	`LOGVV
("+++ super-virtual[%d]=%s.%s",

1774 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1775 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1776 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1777 
	}
}

1778 
GOTO_TARGET_END


1785 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

1787 
SckSaveA»a
* 
§veA»a
;

1796 
	`PERIODIC_CHECKS
(0);

1798 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

1799 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

1800 
curM‘hod
->
shÜty
);

1803 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1805 #ifdeà
EASY_GDB


1806 
debugSaveA»a
 = 
§veA»a
;

1810 
å
 = (
u4
*)
§veA»a
->
´evF¿me
;

1811 
	`as£¹
(
å
 !ğ
NULL
);

1814 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

1815 
	`PC_FP_TO_SELF
();

1816 
	`dvmR•ÜtR‘uº
(
£lf
);

1819 ià(
	`dvmIsB»akF¿me
(
å
)) {

1821 
	`LOGVV
("+++„eturned into break frame");

1822 
	`GOTO_ba
();

1826 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

1827 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1828 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

1830 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1831 
pc
 = 
§veA»a
->
§vedPc
;

1832 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

1833 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

1837 ià(
Œue


1840 
	`FINISH
(3);

1844 
	`as£¹
(
çl£
);

1846 
	}
}

1847 
GOTO_TARGET_END


1856 
	$GOTO_TARGET
(
exû±iÚThrown
)

1858 
Objeù
* 
exû±iÚ
;

1859 
ÿtchR–Pc
;

1861 
	`PERIODIC_CHECKS
(0);

1869 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1870 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1871 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1872 
	`dvmCË¬Exû±iÚ
(
£lf
);

1874 
	`ALOGV
("Handlingƒxception %s‡t %s:%d",

1875 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

1876 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

1892 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

1893 
	`PC_FP_TO_SELF
();

1894 
	`dvmR•ÜtExû±iÚThrow
(
£lf
, 
exû±iÚ
);

1912 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

1913 
exû±iÚ
, 
çl£
, (**)(*)&
å
);

1936 ià(
£lf
->
¡ackOv”æowed
)

1937 
	`dvmCËªupSckOv”æow
(
£lf
, 
exû±iÚ
);

1939 ià(
ÿtchR–Pc
 < 0) {

1941 #ià
DVM_SHOW_EXCEPTION
 >= 2

1942 
	`ALOGD
("Exception %s from %s:%d‚ot caught†ocally",

1943 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

1944 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

1946 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

1947 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1948 
	`GOTO_ba
();

1951 #ià
DVM_SHOW_EXCEPTION
 >= 3

1953 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1954 
	`ALOGD
("Exception %shrown from %s:%do %s:%d",

1955 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

1956 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

1957 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

1958 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

1967 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1968 
£lf
->
š‹½Save
.
m‘hod
 = 
curM‘hod
;

1970 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1971 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

1972 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

1973 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

1974 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

1988 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

1989 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

1991 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1992 
	`FINISH
(0);

1993 
	}
}

1994 
GOTO_TARGET_END


2015 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

2016 
u2
 
couÁ
, u2 
»gs
)

2018 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

2025 
u4
* 
outs
;

2026 
i
;

2031 ià(
m‘hodC®lRªge
) {

2034 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

2035 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

2036 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

2037 
i
 = 0; i < 
v¤c1
; i++)

2038 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2040 
u4
 
couÁ
 = 
v¤c1
 >> 4;

2042 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

2043 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

2044 
	`as£¹
(
couÁ
 <= 5);

2046 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

2048 ià(
couÁ
 == 5) {

2049 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2050 
couÁ
--;

2052 
i
 = 0; i < (è
couÁ
; i++) {

2053 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2054 
vd¡
 >>= 4;

2059 
	`as£¹
((
vd¡
 >> 16) == 0);

2060 
couÁ
) {

2062 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2064 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2066 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2068 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2070 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2076 
	}
}

2087 
SckSaveA»a
* 
	gÃwSaveA»a
;

2088 
u4
* 
	gÃwFp
;

2090 
ILOGV
("> %s%s.%s %s",

2091 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

2092 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2093 
m‘hodToC®l
->
shÜty
);

2095 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

2096 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2099 ià(
	gŒue
) {

2100 
u1
* 
	gbÙtom
;

2101 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

2102 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

2104 
ALOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p(%d) size=%d '%s')",

2105 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

2106 (
u1
*è
å
 - 
bÙtom
, 
£lf
->
š‹½SckSize
,

2107 
m‘hodToC®l
->
Çme
);

2108 
dvmHªdËSckOv”æow
(
£lf
, 
m‘hodToC®l
);

2109 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

2110 
GOTO_exû±iÚThrown
();

2116 #ifdeà
LOG_INSTR


2117 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

2124 
mem£t
(
ÃwFp
, 0xcc,

2125 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

2129 #ifdeà
EASY_GDB


2130 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

2132 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

2133 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

2134 #ià
defšed
(
WITH_JIT
è&& defšed(
MTERP_STUB
)

2135 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

2137 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

2139 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2145 
PC_TO_SELF
();

2146 
dvmR•ÜtInvoke
(
£lf
, 
m‘hodToC®l
);

2149 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

2154 
	gcurM‘hod
 = 
m‘hodToC®l
;

2155 
	g£lf
->
	gš‹½Save
.
	gm‘hod
 = 
curM‘hod
;

2156 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2157 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

2158 
	gå
 = 
ÃwFp
;

2159 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

2160 #ifdeà
EASY_GDB


2161 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2163 
	g£lf
->
	gdebugIsM‘hodEÁry
 = 
Œue
;

2164 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2165 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2166 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

2167 
FINISH
(0);

2170 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

2172 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
ÃwFp
;

2174 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

2176 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2177 
dvmR•ÜtP»N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

2180 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

2181 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

2188 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

2190 ià(
	g£lf
->
	gš‹½B»ak
.
	gùl
.
	gsubMode
 != 0) {

2191 
dvmR•ÜtPo¡N©iveInvoke
(
m‘hodToC®l
, 
£lf
, 
å
);

2195 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

2196 
	g£lf
->
	gš‹½Save
.
	gcurF¿me
 = 
å
;

2203 ià(
dvmCheckExû±iÚ
(
£lf
)) {

2204 
ALOGV
("Exceptionhrown by/below‚ative code");

2205 
GOTO_exû±iÚThrown
();

2208 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

2209 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

2210 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2211 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

2212 
curM‘hod
->
shÜty
);

2215 ià(
	gŒue


2218 
FINISH
(3);

2222 
as£¹
(
çl£
);

2226 
as£¹
(
çl£
);

2227 
	gGOTO_TARGET_END


2232 #undeà
»tv®


2233 #undeà
pc


2234 #undeà
å


2235 #undeà
curM‘hod


2236 #undeà
m‘hodCÏssDex


2237 #undeà
£lf


2238 #undeà
debugT¿ckedRefS¹


	@vm/mterp/portable/enddefs.cpp

3 
	gba
:

4 
ILOGD
("|-- Leaving interpreter†oop");

6 
	g£lf
->
	gš‹½Save
.
	g»tv®
 = 
»tv®
;

	@vm/mterp/portable/entry.cpp

6 
	$dvmIÁ”´‘PÜbË
(
Th»ad
* 
£lf
)

8 #ià
	`defšed
(
EASY_GDB
)

9 
SckSaveA»a
* 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
š‹½Save
.
curF¿me
);

11 
DvmDex
* 
m‘hodCÏssDex
;

12 
JV®ue
 
»tv®
;

15 cÚ¡ 
M‘hod
* 
curM‘hod
;

16 cÚ¡ 
u2
* 
pc
;

17 
u4
* 
å
;

18 
u2
 
š¡
;

20 
u4
 
»f
;

21 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
;

23 cÚ¡ 
M‘hod
* 
m‘hodToC®l
;

24 
boŞ
 
m‘hodC®lRªge
;

27 
	`DEFINE_GOTO_TABLE
(
hªdËrTabË
);

30 
curM‘hod
 = 
£lf
->
š‹½Save
.
m‘hod
;

31 
pc
 = 
£lf
->
š‹½Save
.pc;

32 
å
 = 
£lf
->
š‹½Save
.
curF¿me
;

33 
»tv®
 = 
£lf
->
š‹½Save
.retval;

35 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

37 
	`LOGVV
("threadid=%d: %s.%s…c=%#x fp=%p",

38 
£lf
->
th»adId
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

39 
pc
 - 
curM‘hod
->
š¢s
, 
å
);

44 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
 != 0) {

45 
	`TRACE_METHOD_ENTER
(
£lf
, 
curM‘hod
);

46 
£lf
->
debugIsM‘hodEÁry
 = 
Œue
;

51 
m‘hodToC®l
 = (cÚ¡ 
M‘hod
*) -1;

54 ià(
£lf
->
debugIsM‘hodEÁry
) {

55 
	`ILOGD
("|-- Now iÁ”´‘šg %s.%s", 
curM‘hod
->
şazz
->
desütÜ
,

56 
curM‘hod
->
Çme
);

57 
	`DUMP_REGS
(
curM‘hod
, 
£lf
->
š‹½Save
.
curF¿me
, 
çl£
);

61 
	`FINISH
(0);

	@vm/mterp/portable/stubdefs.cpp

6 
	#GOTO_TARGET_DECL
(
_rg‘
, ...)

	)

8 
	#GOTO_TARGET
(
_rg‘
, ...è_rg‘:

	)

10 
	#GOTO_TARGET_END


	)

13 
	#STUB_HACK
(
x
)

	)

14 
	#JIT_STUB_HACK
(
x
)

	)

22 
	#PC_FP_TO_SELF
() \

23 
£lf
->
š‹½Save
.
pc
 =…c; \

24 
£lf
->
š‹½Save
.
curF¿me
 = 
å
;

	)

25 
	#PC_TO_SELF
(è
£lf
->
š‹½Save
.
pc
 =…c;

	)

35 
	#H
(
_İ
è&&
İ_
##
	)
_op

36 
	#HANDLE_OPCODE
(
_İ
è
İ_
##_İ:

	)

37 
	#FINISH
(
_off£t
) { \

38 
	`ADJUST_PC
(
_off£t
); \

39 
š¡
 = 
	`FETCH
(0); \

40 ià(
£lf
->
š‹½B»ak
.
ùl
.
subMode
) { \

41 
	`dvmCheckBefÜe
(
pc
, 
å
, 
£lf
); \

43 *
hªdËrTabË
[
	`INST_INST
(
š¡
)]; \

44 }

	)

45 
	#FINISH_BKPT
(
_İcode
) { \

46 *
hªdËrTabË
[
_İcode
]; \

47 }

	)

49 
	#OP_END


	)

56 
	#GOTO_exû±iÚThrown
(è
exû±iÚThrown
;

	)

58 
	#GOTO_»tuºFromM‘hod
(è
»tuºFromM‘hod
;

	)

60 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

62 
m‘hodC®lRªge
 = 
_m‘hodC®lRªge
; \

63 
_rg‘
; \

64 } 
çl£
)

	)

67 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
è
švokeM‘hod
;

	)

69 
	#GOTO_ba
(è
ba
;

	)

77 
	#PERIODIC_CHECKS
(
_pÿdj
) { \

78 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

79 
	`EXPORT_PC
(); \

80 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

82 }

	)

	@vm/native/InternalNative.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

28 
D®vikN©iveCÏss
 
	ggDvmN©iveM‘hodS‘
[] = {

29 { "Ljava/Ïng/Objeù;", 
dvm_java_Ïng_Objeù
, 0 },

30 { "Ljava/Ïng/CÏss;", 
dvm_java_Ïng_CÏss
, 0 },

31 { "Ljava/Ïng/DoubË;", 
dvm_java_Ïng_DoubË
, 0 },

32 { "Ljava/Ïng/Flßt;", 
dvm_java_Ïng_Flßt
, 0 },

33 { "Ljava/Ïng/M©h;", 
dvm_java_Ïng_M©h
, 0 },

34 { "Ljava/Ïng/RuÁime;", 
dvm_java_Ïng_RuÁime
, 0 },

35 { "Ljava/Ïng/SŒšg;", 
dvm_java_Ïng_SŒšg
, 0 },

36 { "Ljava/Ïng/Sy¡em;", 
dvm_java_Ïng_Sy¡em
, 0 },

37 { "Ljava/Ïng/ThrowabË;", 
dvm_java_Ïng_ThrowabË
, 0 },

38 { "Ljava/Ïng/VMCÏssLßd”;", 
dvm_java_Ïng_VMCÏssLßd”
, 0 },

39 { "Ljava/Ïng/VMTh»ad;", 
dvm_java_Ïng_VMTh»ad
, 0 },

41 
dvm_java_Ïng_»æeù_AcûssibËObjeù
, 0 },

42 { "Ljava/Ïng/»æeù/A¼ay;", 
dvm_java_Ïng_»æeù_A¼ay
, 0 },

44 
dvm_java_Ïng_»æeù_CÚ¡ruùÜ
, 0 },

45 { "Ljava/Ïng/»æeù/F›ld;", 
dvm_java_Ïng_»æeù_F›ld
, 0 },

46 { "Ljava/Ïng/»æeù/M‘hod;", 
dvm_java_Ïng_»æeù_M‘hod
, 0 },

47 { "Ljava/Ïng/»æeù/Proxy;", 
dvm_java_Ïng_»æeù_Proxy
, 0 },

49 
dvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
, 0 },

50 { "Ld®vik/by‹code/OpcodeInfo;", 
dvm_d®vik_by‹code_OpcodeInfo
, 0 },

51 { "Ld®vik/sy¡em/VMDebug;", 
dvm_d®vik_sy¡em_VMDebug
, 0 },

52 { "Ld®vik/sy¡em/DexFe;", 
dvm_d®vik_sy¡em_DexFe
, 0 },

53 { "Ld®vik/sy¡em/VMRuÁime;", 
dvm_d®vik_sy¡em_VMRuÁime
, 0 },

54 { "Ld®vik/sy¡em/ZygÙe;", 
dvm_d®vik_sy¡em_ZygÙe
, 0 },

55 { "Ld®vik/sy¡em/VMSck;", 
dvm_d®vik_sy¡em_VMSck
, 0 },

57 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
, 0 },

59 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
, 0 },

61 
dvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
, 0 },

62 { "Lsun/misc/Un§ã;", 
dvm_sun_misc_Un§ã
, 0 },

63 { "Lch/usi/dag/di¦»/AREDi¥©ch;", 
dvm_ch_usi_dag_di¦»_AREDi¥©ch
, 0 },

64 { 
NULL
, NULL, 0 },

71 
boŞ
 
	$dvmIÁ”ÇlN©iveS¹up
()

73 
D®vikN©iveCÏss
* 
şassPŒ
 = 
gDvmN©iveM‘hodS‘
;

75 
şassPŒ
->
şassDesütÜ
 !ğ
NULL
) {

76 
şassPŒ
->
şassDesütÜHash
 =

77 
	`dvmCompu‹Utf8Hash
(
şassPŒ
->
şassDesütÜ
);

78 
şassPŒ
++;

81 
gDvm
.
u£rDexFes
 = 
	`dvmHashTabËC»©e
(2, 
dvmF»eDexOrJ¬
);

82 ià(
gDvm
.
u£rDexFes
 =ğ
NULL
)

83  
çl£
;

85  
Œue
;

86 
	}
}

91 
	$dvmIÁ”ÇlN©iveShutdown
()

93 
	`dvmHashTabËF»e
(
gDvm
.
u£rDexFes
);

94 
	}
}

99 
D®vikN©iveFunc
 
	$dvmLookupIÁ”ÇlN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

101 cÚ¡ * 
şassDesütÜ
 = 
m‘hod
->
şazz
->
desütÜ
;

102 cÚ¡ 
D®vikN©iveCÏss
* 
pCÏss
;

103 
u4
 
hash
;

105 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şassDesütÜ
);

106 
pCÏss
 = 
gDvmN©iveM‘hodS‘
;

107 
Œue
) {

108 ià(
pCÏss
->
şassDesütÜ
 =ğ
NULL
)

110 ià(
pCÏss
->
şassDesütÜHash
 =ğ
hash
 &&

111 
	`¡rcmp
(
pCÏss
->
şassDesütÜ
, classDescriptor) == 0)

113 cÚ¡ 
D®vikN©iveM‘hod
* 
pM‘h
 = 
pCÏss
->
m‘hodInfo
;

114 
Œue
) {

115 ià(
pM‘h
->
Çme
 =ğ
NULL
)

118 ià(
	`dvmCom·»NameDesütÜAndM‘hod
(
pM‘h
->
Çme
,

119 
pM‘h
->
sigÇtu»
, 
m‘hod
) == 0)

124  
pM‘h
->
âPŒ
;

127 
pM‘h
++;

131 
pCÏss
++;

134  
NULL
;

135 
	}
}

143 
	$dvmAb¡¿ùM‘hodStub
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

145 
	`ALOGD
("--- called into dvmAbstractMethodStub");

146 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
("abstract method‚ot implemented");

147 
	}
}

156 
boŞ
 
	$dvmV”ifyObjeùInCÏss
(
Objeù
* 
obj
, 
CÏssObjeù
* 
şazz
) {

157 
CÏssObjeù
* 
exû±iÚCÏss
 = 
NULL
;

158 ià(
obj
 =ğ
NULL
) {

159 
exû±iÚCÏss
 = 
gDvm
.
exNuÎPoš‹rExû±iÚ
;

160 } ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

161 
exû±iÚCÏss
 = 
gDvm
.
exIÎeg®Argum’tExû±iÚ
;

164 ià(
exû±iÚCÏss
 =ğ
NULL
) {

165  
Œue
;

168 
¡d
::
¡ršg
 
	`ex³ùedCÏssName
(
	`dvmHumªR—dabËDesütÜ
(
şazz
->
desütÜ
));

169 
¡d
::
¡ršg
 
	`aùu®CÏssName
(
	`dvmHumªR—dabËTy³
(
obj
));

170 
	`dvmThrowExû±iÚFmt
(
exû±iÚCÏss
, "expected„eceiver ofype %s, but got %s",

171 
ex³ùedCÏssName
.
	`c_¡r
(), 
aùu®CÏssName
.c_str());

172  
çl£
;

173 
	}
}

178 
CÏssObjeù
* 
	$dvmFšdCÏssByName
(
SŒšgObjeù
* 
ÇmeObj
, 
Objeù
* 
lßd”
,

179 
boŞ
 
doIn™
)

181 
CÏssObjeù
* 
şazz
 = 
NULL
;

182 * 
Çme
 = 
NULL
;

183 * 
desütÜ
 = 
NULL
;

185 ià(
ÇmeObj
 =ğ
NULL
) {

186 
	`dvmThrowNuÎPoš‹rExû±iÚ
("name ==‚ull");

187 
ba
;

189 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

196 ià(!
	`dexIsV®idCÏssName
(
Çme
, 
Œue
)) {

197 
	`ALOGW
("dvmFšdCÏssByNam»jeùšg '%s'", 
Çme
);

198 
	`dvmThrowCÏssNÙFoundExû±iÚ
(
Çme
);

199 
ba
;

202 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

203 ià(
desütÜ
 =ğ
NULL
) {

204 
ba
;

207 ià(
doIn™
)

208 
şazz
 = 
	`dvmFšdCÏss
(
desütÜ
, 
lßd”
);

210 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

212 ià(
şazz
 =ğ
NULL
) {

213 
	`LOGVV
("FAIL:†ßd % (%d)", 
desütÜ
, 
doIn™
);

214 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

215 
Objeù
* 
ŞdExûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

216 
	`dvmAddT¿ckedAÎoc
(
ŞdExûp
, 
£lf
);

217 
	`dvmCË¬Exû±iÚ
(
£lf
);

218 
	`dvmThrowChašedCÏssNÙFoundExû±iÚ
(
Çme
, 
ŞdExûp
);

219 
	`dvmR–—£T¿ckedAÎoc
(
ŞdExûp
, 
£lf
);

221 
	`LOGVV
("GOOD:†oad %s (%d) --> %p†dr=%p",

222 
desütÜ
, 
doIn™
, 
şazz
, cÏzz->
şassLßd”
);

225 
ba
:

226 
	`ä“
(
Çme
);

227 
	`ä“
(
desütÜ
);

228  
şazz
;

229 
	}
}

241 
u4
 
	$dvmFixM‘hodFÏgs
(
u4
 
æags
)

243 ià((
æags
 & 
ACC_ABSTRACT
) != 0) {

244 
æags
 &ğ~
ACC_NATIVE
;

247 
æags
 &ğ~
ACC_SYNCHRONIZED
;

249 ià((
æags
 & 
ACC_DECLARED_SYNCHRONIZED
) != 0) {

250 
æags
 |ğ
ACC_SYNCHRONIZED
;

253  
æags
 & 
JAVA_FLAGS_MASK
;

254 
	}
}

	@vm/native/InternalNative.h

17 #iâdeà
DALVIK_NATIVE_INTERNALNATIVE_H_


18 
	#DALVIK_NATIVE_INTERNALNATIVE_H_


	)

23 
boŞ
 
dvmIÁ”ÇlN©iveS¹up
();

24 
dvmIÁ”ÇlN©iveShutdown
();

27 
D®vikN©iveFunc
 
dvmLookupIÁ”ÇlN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
);

30 "C" 
dvmAb¡¿ùM‘hodStub
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
);

	@vm/native/InternalNativePriv.h

20 #iâdeà
DALVIK_NATIVE_INTERNALNATIVEPRIV_H_


21 
	#DALVIK_NATIVE_INTERNALNATIVEPRIV_H_


	)

27 #ifdeà
NDEBUG


28 
	#RETURN_VOID
(èdØ{ ()(
pResuÉ
); ; } 0)

	)

30 
	#RETURN_VOID
(èdØ{ 
pResuÉ
->
i
 = 0xããabab; ; }0)

	)

32 
	#RETURN_BOOLEAN
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

33 
	#RETURN_INT
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

34 
	#RETURN_LONG
(
_v®
èdØ{ 
pResuÉ
->
j
 = (_v®); ; } 0)

	)

35 
	#RETURN_FLOAT
(
_v®
èdØ{ 
pResuÉ
->
f
 = (_v®); ; } 0)

	)

36 
	#RETURN_DOUBLE
(
_v®
èdØ{ 
pResuÉ
->
d
 = (_v®); ; } 0)

	)

37 
	#RETURN_PTR
(
_v®
èdØ{ 
pResuÉ
->
l
 = (
Objeù
*)(_v®); ; } 0)

	)

47 
	#MAKE_INTRINSIC_TRAMPOLINE
(
INTRINSIC_FN
) \

48 
boŞ
 
	`INTRINSIC_FN
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
, \

49 
JV®ue
* 
pResuÉ
); \

50 
	`INTRINSIC_FN
(
¬gs
[0],‡rgs[1],‡rgs[2],‡rgs[3], 
pResuÉ
);

	)

57 
boŞ
 
dvmV”ifyObjeùInCÏss
(
Objeù
* 
obj
, 
CÏssObjeù
* 
şazz
);

62 
CÏssObjeù
* 
dvmFšdCÏssByName
(
SŒšgObjeù
* 
ÇmeObj
, 
Objeù
* 
lßd”
,

63 
boŞ
 
doIn™
);

75 
u4
 
dvmFixM‘hodFÏgs
(u4 
æags
);

80 
dvmF»eDexOrJ¬
(* 
v±r
);

85 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Objeù
[];

86 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_CÏss
[];

87 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_DoubË
[];

88 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Flßt
[];

89 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_M©h
[];

90 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_RuÁime
[];

91 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_SŒšg
[];

92 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Sy¡em
[];

93 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_ThrowabË
[];

94 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_VMCÏssLßd”
[];

95 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_VMTh»ad
[];

96 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_AcûssibËObjeù
[];

97 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_A¼ay
[];

98 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_CÚ¡ruùÜ
[];

99 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_F›ld
[];

100 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_M‘hod
[];

101 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_Proxy
[];

102 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
[];

103 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_by‹code_OpcodeInfo
[];

104 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_Sam¶šgProf”
[];

105 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMDebug
[];

106 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_DexFe
[];

107 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMRuÁime
[];

108 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_ZygÙe
[];

109 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMSck
[];

110 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
[];

111 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
[];

112 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
[];

113 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_sun_misc_Un§ã
[];

114 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_ch_usi_dag_di¦»_AREDi¥©ch
[];

	@vm/native/Test.cpp

1 
	~"D®vik.h
"

2 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

3 
	~<cuts/log.h
>

5 
	$D®vik_ch_usi_dag_di¦»_AREDi¥©ch_‹¡
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
){

6 
	`ALOG
(
LOG_DEBUG
,"SHADOW","IN TEST NATIVE: %s",
__FUNCTION__
);

7 
	`RETURN_VOID
();

9 
	}
}

11 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_ch_usi_dag_di¦»_AREDi¥©ch
[] = {

13 
D®vik_ch_usi_dag_di¦»_AREDi¥©ch_‹¡
},

14 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_bytecode_OpcodeInfo.cpp

25 
	~"D®vik.h
"

26 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_d®vik_by‹code_OpcodeInfo_isInvoke
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
Opcode
 
İcode
 = 
¡©ic_ÿ¡
<Opcode>(
¬gs
[0]);

35 
æags
 = 
	`dexG‘FÏgsFromOpcode
(
İcode
);

36 
boŞ
 
»suÉ
 = (
æags
 & 
kIn¡rInvoke
) != 0;

37 
	`RETURN_BOOLEAN
(
»suÉ
);

38 
	}
}

40 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_by‹code_OpcodeInfo
[] = {

41 { "isInvoke", "(I)Z", 
D®vik_d®vik_by‹code_OpcodeInfo_isInvoke
 },

42 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_system_DexFile.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

26 
boŞ
 
	$hasDexEx‹nsiÚ
(cÚ¡ * 
Çme
) {

27 
size_t
 
Ën
 = 
	`¡¾’
(
Çme
);

29  (
Ën
 >= 5)

30 && (
Çme
[
Ën
 - 5] != '/')

31 && (
	`¡rcmp
(&
Çme
[
Ën
 - 4], ".dex") == 0);

32 
	}
}

37 
	sDexOrJ¬
 {

38 * 
	mfeName
;

39 
boŞ
 
	misDex
;

40 
boŞ
 
	mokayToF»e
;

41 
RawDexFe
* 
	mpRawDexFe
;

42 
J¬Fe
* 
	mpJ¬Fe
;

43 
u1
* 
	mpDexMemÜy
;

49 
	$dvmF»eDexOrJ¬
(* 
v±r
)

51 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
v±r
;

53 
	`ALOGV
("F»ešg DexOrJ¬ '%s'", 
pDexOrJ¬
->
feName
);

55 ià(
pDexOrJ¬
->
isDex
)

56 
	`dvmRawDexFeF»e
(
pDexOrJ¬
->
pRawDexFe
);

58 
	`dvmJ¬FeF»e
(
pDexOrJ¬
->
pJ¬Fe
);

59 
	`ä“
(
pDexOrJ¬
->
feName
);

60 
	`ä“
(
pDexOrJ¬
->
pDexMemÜy
);

61 
	`ä“
(
pDexOrJ¬
);

62 
	}
}

69 
	$hashcmpDexOrJ¬
(cÚ¡ * 
bËV®
, cÚ¡ * 
ÃwV®
)

71  (è
ÃwV®
 - (è
bËV®
;

72 
	}
}

81 
boŞ
 
	$v®id©eCook›
(
cook›
)

83 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

85 
	`LOGVV
("+++ dex v”ifyšg cook› %p", 
pDexOrJ¬
);

87 ià(
pDexOrJ¬
 =ğ
NULL
)

88  
çl£
;

90 
u4
 
hash
 = 
cook›
;

91 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

92 * 
»suÉ
 = 
	`dvmHashTabËLookup
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
,

93 
hashcmpDexOrJ¬
, 
çl£
);

94 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

95 ià(
»suÉ
 =ğ
NULL
) {

96 
	`dvmThrowRuÁimeExû±iÚ
("invalid DexFile cookie");

97  
çl£
;

100  
Œue
;

101 
	}
}

107 
	$addToDexFeTabË
(
DexOrJ¬
* 
pDexOrJ¬
) {

116 
u4
 
hash
 = (u4è
pDexOrJ¬
;

117 * 
»suÉ
;

119 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

120 
»suÉ
 = 
	`dvmHashTabËLookup
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
,

121 
hashcmpDexOrJ¬
, 
Œue
);

122 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

124 ià(
»suÉ
 !ğ
pDexOrJ¬
) {

125 
	`ALOGE
("Pointer has‡lready been‡dded?");

126 
	`dvmAbÜt
();

129 
pDexOrJ¬
->
okayToF»e
 = 
Œue
;

130 
	}
}

151 
	$D®vik_d®vik_sy¡em_DexFe_İ’DexFe
(cÚ¡ 
u4
* 
¬gs
,

152 
JV®ue
* 
pResuÉ
)

154 
SŒšgObjeù
* 
sourûNameObj
 = (SŒšgObjeù*è
¬gs
[0];

155 
SŒšgObjeù
* 
ouutNameObj
 = (SŒšgObjeù*è
¬gs
[1];

156 
DexOrJ¬
* 
pDexOrJ¬
 = 
NULL
;

157 
J¬Fe
* 
pJ¬Fe
;

158 
RawDexFe
* 
pRawDexFe
;

159 * 
sourûName
;

160 * 
ouutName
;

162 ià(
sourûNameObj
 =ğ
NULL
) {

163 
	`dvmThrowNuÎPoš‹rExû±iÚ
("sourceName ==‚ull");

164 
	`RETURN_VOID
();

167 
sourûName
 = 
	`dvmC»©eC¡rFromSŒšg
(
sourûNameObj
);

168 ià(
ouutNameObj
 !ğ
NULL
)

169 
ouutName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ouutNameObj
);

171 
ouutName
 = 
NULL
;

194 ià(
	`dvmCÏssP©hCÚšs
(
gDvm
.
boÙCÏssP©h
, 
sourûName
)) {

195 
	`ALOGW
("RefusšgØ»İ’ boÙ DEX '%s'", 
sourûName
);

196 
	`dvmThrowIOExû±iÚ
(

198 
	`ä“
(
sourûName
);

199 
	`ä“
(
ouutName
);

200 
	`RETURN_VOID
();

208 ià(
	`hasDexEx‹nsiÚ
(
sourûName
)

209 && 
	`dvmRawDexFeO³n
(
sourûName
, 
ouutName
, &
pRawDexFe
, 
çl£
) == 0) {

210 
	`ALOGV
("O³nšg DEX f'%s' (DEX)", 
sourûName
);

212 
pDexOrJ¬
 = (
DexOrJ¬
*è
	`m®loc
((DexOrJar));

213 
pDexOrJ¬
->
isDex
 = 
Œue
;

214 
pDexOrJ¬
->
pRawDexFe
 =…RawDexFile;

215 
pDexOrJ¬
->
pDexMemÜy
 = 
NULL
;

216 } ià(
	`dvmJ¬FeO³n
(
sourûName
, 
ouutName
, &
pJ¬Fe
, 
çl£
) == 0) {

217 
	`ALOGV
("O³nšg DEX f'%s' (J¬)", 
sourûName
);

219 
pDexOrJ¬
 = (
DexOrJ¬
*è
	`m®loc
((DexOrJar));

220 
pDexOrJ¬
->
isDex
 = 
çl£
;

221 
pDexOrJ¬
->
pJ¬Fe
 =…JarFile;

222 
pDexOrJ¬
->
pDexMemÜy
 = 
NULL
;

224 
	`ALOGV
("UÇbËØİ’ DEX f'%s'", 
sourûName
);

225 
	`dvmThrowIOExû±iÚ
("unableo open DEX file");

228 ià(
pDexOrJ¬
 !ğ
NULL
) {

229 
pDexOrJ¬
->
feName
 = 
sourûName
;

230 
	`addToDexFeTabË
(
pDexOrJ¬
);

232 
	`ä“
(
sourûName
);

235 
	`RETURN_PTR
(
pDexOrJ¬
);

236 
	}
}

248 
	$D®vik_d®vik_sy¡em_DexFe_İ’DexFe_by‹¬¿y
(cÚ¡ 
u4
* 
¬gs
,

249 
JV®ue
* 
pResuÉ
)

251 
A¼ayObjeù
* 
feCÚ‹ÁsObj
 = (A¼ayObjeù*è
¬gs
[0];

252 
u4
 
Ëngth
;

253 
u1
* 
pBy‹s
;

254 
RawDexFe
* 
pRawDexFe
;

255 
DexOrJ¬
* 
pDexOrJ¬
 = 
NULL
;

257 ià(
feCÚ‹ÁsObj
 =ğ
NULL
) {

258 
	`dvmThrowNuÎPoš‹rExû±iÚ
("fileContents ==‚ull");

259 
	`RETURN_VOID
();

263 
Ëngth
 = 
feCÚ‹ÁsObj
->length;

264 
pBy‹s
 = (
u1
*è
	`m®loc
(
Ëngth
);

266 ià(
pBy‹s
 =ğ
NULL
) {

267 
	`dvmThrowRuÁimeExû±iÚ
("unableo‡llocate DEX memory");

268 
	`RETURN_VOID
();

271 
	`memıy
(
pBy‹s
, 
feCÚ‹ÁsObj
->
cÚ‹Ás
, 
Ëngth
);

273 ià(
	`dvmRawDexFeO³nA¼ay
(
pBy‹s
, 
Ëngth
, &
pRawDexFe
) != 0) {

274 
	`ALOGV
("Unableo open in-memory DEX file");

275 
	`ä“
(
pBy‹s
);

276 
	`dvmThrowRuÁimeExû±iÚ
("unableo open in-memory DEX file");

277 
	`RETURN_VOID
();

280 
	`ALOGV
("Opening in-memory DEX");

281 
pDexOrJ¬
 = (
DexOrJ¬
*è
	`m®loc
((DexOrJar));

282 
pDexOrJ¬
->
isDex
 = 
Œue
;

283 
pDexOrJ¬
->
pRawDexFe
 =…RawDexFile;

284 
pDexOrJ¬
->
pDexMemÜy
 = 
pBy‹s
;

285 
pDexOrJ¬
->
feName
 = 
	`¡rdup
("<memory>");

286 
	`addToDexFeTabË
(
pDexOrJ¬
);

288 
	`RETURN_PTR
(
pDexOrJ¬
);

289 
	}
}

296 
	$D®vik_d®vik_sy¡em_DexFe_şo£DexFe
(cÚ¡ 
u4
* 
¬gs
,

297 
JV®ue
* 
pResuÉ
)

299 
cook›
 = 
¬gs
[0];

300 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

302 ià(
pDexOrJ¬
 =ğ
NULL
)

303 
	`RETURN_VOID
();

304 ià(!
	`v®id©eCook›
(
cook›
))

305 
	`RETURN_VOID
();

307 
	`ALOGV
("Closšg DEX f%°(%s)", 
pDexOrJ¬
,…DexOrJ¬->
feName
);

317 ià(
pDexOrJ¬
->
okayToF»e
) {

318 
u4
 
hash
 = (u4è
pDexOrJ¬
;

319 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

320 ià(!
	`dvmHashTabËRemove
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
)) {

321 
	`ALOGW
("WARNING: could‚ot„emove '%s' from DEX hashable",

322 
pDexOrJ¬
->
feName
);

324 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

325 
	`ALOGV
("+++ f»ešg DexF'%s'„esourûs", 
pDexOrJ¬
->
feName
);

326 
	`dvmF»eDexOrJ¬
(
pDexOrJ¬
);

328 
	`ALOGV
("+++ NOT f»ešg DexF'%s'„esourûs", 
pDexOrJ¬
->
feName
);

331 
	`RETURN_VOID
();

332 
	}
}

348 
	$D®vik_d®vik_sy¡em_DexFe_defšeCÏss
(cÚ¡ 
u4
* 
¬gs
,

349 
JV®ue
* 
pResuÉ
)

351 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

352 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[1];

353 
cook›
 = 
¬gs
[2];

354 
CÏssObjeù
* 
şazz
 = 
NULL
;

355 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

356 
DvmDex
* 
pDvmDex
;

357 * 
Çme
;

358 * 
desütÜ
;

360 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

361 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

362 
	`ALOGV
("--- Explicit class†oad '%s'†=%p c=0x%08x",

363 
desütÜ
, 
lßd”
, 
cook›
);

364 
	`ä“
(
Çme
);

366 ià(!
	`v®id©eCook›
(
cook›
))

367 
	`RETURN_VOID
();

369 ià(
pDexOrJ¬
->
isDex
)

370 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pDexOrJ¬
->
pRawDexFe
);

372 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pDexOrJ¬
->
pJ¬Fe
);

375 
pDexOrJ¬
->
okayToF»e
 = 
çl£
;

377 
şazz
 = 
	`dvmDefšeCÏss
(
pDvmDex
, 
desütÜ
, 
lßd”
);

378 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

379 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

385 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

386 ià(
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

388 
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

391 
	`dvmCË¬Exû±iÚ
(
£lf
);

393 
şazz
 = 
NULL
;

396 
	`ä“
(
desütÜ
);

397 
	`RETURN_PTR
(
şazz
);

398 
	}
}

406 
	$D®vik_d®vik_sy¡em_DexFe_g‘CÏssNameLi¡
(cÚ¡ 
u4
* 
¬gs
,

407 
JV®ue
* 
pResuÉ
)

409 
cook›
 = 
¬gs
[0];

410 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

411 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

413 ià(!
	`v®id©eCook›
(
cook›
))

414 
	`RETURN_VOID
();

416 
DvmDex
* 
pDvmDex
;

417 ià(
pDexOrJ¬
->
isDex
)

418 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pDexOrJ¬
->
pRawDexFe
);

420 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pDexOrJ¬
->
pJ¬Fe
);

421 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

422 
DexFe
* 
pDexFe
 = 
pDvmDex
->pDexFile;

424 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

425 
CÏssObjeù
* 
¬¿yCÏss
 =

426 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
gDvm
.
şassJavaLªgSŒšg
);

427 
A¼ayObjeù
* 
¡ršgA¼ay
 =

428 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
couÁ
, 
ALLOC_DEFAULT
);

429 ià(
¡ršgA¼ay
 =ğ
NULL
) {

431 
	`ALOGD
("Faed‡Îoÿtšg‡¼ay oà%d sŒšgs", 
couÁ
);

432 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

433 
	`RETURN_VOID
();

436 
i
;

437 
i
 = 0; i < 
couÁ
; i++) {

438 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
i
);

439 cÚ¡ * 
desütÜ
 =

440 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

442 * 
şassName
 = 
	`dvmDesütÜToDÙ
(
desütÜ
);

443 
SŒšgObjeù
* 
¡r
 = 
	`dvmC»©eSŒšgFromC¡r
(
şassName
);

444 
	`dvmS‘ObjeùA¼ayEËm’t
(
¡ršgA¼ay
, 
i
, (
Objeù
 *)
¡r
);

445 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
 *)
¡r
, 
£lf
);

446 
	`ä“
(
şassName
);

449 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
¡ršgA¼ay
, 
£lf
);

450 
	`RETURN_PTR
(
¡ršgA¼ay
);

451 
	}
}

470 
	$D®vik_d®vik_sy¡em_DexFe_isDexO±N“ded
(cÚ¡ 
u4
* 
¬gs
,

471 
JV®ue
* 
pResuÉ
)

473 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

474 * 
Çme
;

475 
DexCacheStus
 
¡©us
;

476 
»suÉ
;

478 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

479 ià(
Çme
 =ğ
NULL
) {

480 
	`dvmThrowNuÎPoš‹rExû±iÚ
("fileName ==‚ull");

481 
	`RETURN_VOID
();

483 ià(
	`acûss
(
Çme
, 
R_OK
) != 0) {

484 
	`dvmThrowFeNÙFoundExû±iÚ
(
Çme
);

485 
	`ä“
(
Çme
);

486 
	`RETURN_VOID
();

488 
¡©us
 = 
	`dvmDexCacheStus
(
Çme
);

489 
	`ALOGV
("dvmDexCacheStus(%sè»tuºed %d", 
Çme
, 
¡©us
);

491 
»suÉ
 = 
Œue
;

492 
¡©us
) {

494 
DEX_CACHE_BAD_ARCHIVE
:

495 
	`dvmThrowIOExû±iÚ
(
Çme
);

496 
»suÉ
 = -1;

498 
DEX_CACHE_OK
:

499 
»suÉ
 = 
çl£
;

501 
DEX_CACHE_STALE
:

502 
»suÉ
 = 
Œue
;

504 
DEX_CACHE_STALE_ODEX
:

505 
	`dvmThrowSËDexCacheE¼Ü
(
Çme
);

506 
»suÉ
 = -1;

509 
	`ä“
(
Çme
);

511 ià(
»suÉ
 >= 0) {

512 
	`RETURN_BOOLEAN
(
»suÉ
);

514 
	`RETURN_VOID
();

516 
	}
}

518 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_DexFe
[] = {

520 
D®vik_d®vik_sy¡em_DexFe_İ’DexFe
 },

522 
D®vik_d®vik_sy¡em_DexFe_İ’DexFe_by‹¬¿y
 },

524 
D®vik_d®vik_sy¡em_DexFe_şo£DexFe
 },

526 
D®vik_d®vik_sy¡em_DexFe_defšeCÏss
 },

528 
D®vik_d®vik_sy¡em_DexFe_g‘CÏssNameLi¡
 },

530 
D®vik_d®vik_sy¡em_DexFe_isDexO±N“ded
 },

531 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_system_VMDebug.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

22 
	~"h´of/H´of.h
"

24 
	~<¡ršg.h
>

25 
	~<uni¡d.h
>

34 
	$g‘FeDesütÜ
(
Objeù
* 
obj
)

36 
	`as£¹
(
obj
 !ğ
NULL
);

37 
	`as£¹
(
	`¡rcmp
(
obj
->
şazz
->
desütÜ
, "Ljava/io/FileDescriptor;") == 0);

39 
fd
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaIoFeDesütÜ_desütÜ
);

40 ià(
fd
 < 0) {

41 
	`dvmThrowRuÁimeExû±iÚ
("Invalid file descriptor");

45  
fd
;

46 
	}
}

54 
	$D®vik_d®vik_sy¡em_VMDebug_g‘VmF—tu»Li¡
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
) {

55 
¡d
::
veùÜ
<¡d::
¡ršg
> 
ã©u»s
;

56 
ã©u»s
.
	`push_back
("method-trace-profiling");

57 
ã©u»s
.
	`push_back
("method-trace-profiling-streaming");

58 
ã©u»s
.
	`push_back
("hprof-heap-dump");

59 
ã©u»s
.
	`push_back
("hprof-heap-dump-streaming");

61 
A¼ayObjeù
* 
»suÉ
 = 
	`dvmC»©eSŒšgA¼ay
(
ã©u»s
);

62 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
	`dvmTh»adS–f
());

63 
	`RETURN_PTR
(
»suÉ
);

64 
	}
}

69 
	mKIND_ALLOCATED_OBJECTS
 = 1<<0,

70 
	mKIND_ALLOCATED_BYTES
 = 1<<1,

71 
	mKIND_FREED_OBJECTS
 = 1<<2,

72 
	mKIND_FREED_BYTES
 = 1<<3,

73 
	mKIND_GC_INVOCATIONS
 = 1<<4,

74 
	mKIND_CLASS_INIT_COUNT
 = 1<<5,

75 
	mKIND_CLASS_INIT_TIME
 = 1<<6,

78 
	mKIND_EXT_ALLOCATED_OBJECTS
 = 1<<12,

79 
	mKIND_EXT_ALLOCATED_BYTES
 = 1<<13,

80 
	mKIND_EXT_FREED_OBJECTS
 = 1<<14,

81 
	mKIND_EXT_FREED_BYTES
 = 1<<15,

83 
	mKIND_GLOBAL_ALLOCATED_OBJECTS
 = 
KIND_ALLOCATED_OBJECTS
,

84 
	mKIND_GLOBAL_ALLOCATED_BYTES
 = 
KIND_ALLOCATED_BYTES
,

85 
	mKIND_GLOBAL_FREED_OBJECTS
 = 
KIND_FREED_OBJECTS
,

86 
	mKIND_GLOBAL_FREED_BYTES
 = 
KIND_FREED_BYTES
,

87 
	mKIND_GLOBAL_GC_INVOCATIONS
 = 
KIND_GC_INVOCATIONS
,

88 
	mKIND_GLOBAL_CLASS_INIT_COUNT
 = 
KIND_CLASS_INIT_COUNT
,

89 
	mKIND_GLOBAL_CLASS_INIT_TIME
 = 
KIND_CLASS_INIT_TIME
,

91 
	mKIND_THREAD_ALLOCATED_OBJECTS
 = 
KIND_ALLOCATED_OBJECTS
 << 16,

92 
	mKIND_THREAD_ALLOCATED_BYTES
 = 
KIND_ALLOCATED_BYTES
 << 16,

93 
	mKIND_THREAD_FREED_OBJECTS
 = 
KIND_FREED_OBJECTS
 << 16,

94 
	mKIND_THREAD_FREED_BYTES
 = 
KIND_FREED_BYTES
 << 16,

96 
	mKIND_THREAD_GC_INVOCATIONS
 = 
KIND_GC_INVOCATIONS
 << 16,

101 
	#KIND_ALL_COUNTS
 0xffffffff

	)

106 
	$ş—rAÎocProfS‹F›lds
(
AÎocProfS‹
 *
®locProf
,

107 
kšds
)

109 ià(
kšds
 & 
KIND_ALLOCATED_OBJECTS
) {

110 
®locProf
->
®locCouÁ
 = 0;

112 ià(
kšds
 & 
KIND_ALLOCATED_BYTES
) {

113 
®locProf
->
®locSize
 = 0;

115 ià(
kšds
 & 
KIND_FREED_OBJECTS
) {

116 
®locProf
->
ä“CouÁ
 = 0;

118 ià(
kšds
 & 
KIND_FREED_BYTES
) {

119 
®locProf
->
ä“Size
 = 0;

121 ià(
kšds
 & 
KIND_GC_INVOCATIONS
) {

122 
®locProf
->
gcCouÁ
 = 0;

124 ià(
kšds
 & 
KIND_CLASS_INIT_COUNT
) {

125 
®locProf
->
şassIn™CouÁ
 = 0;

127 ià(
kšds
 & 
KIND_CLASS_INIT_TIME
) {

128 
®locProf
->
şassIn™Time
 = 0;

130 
	}
}

141 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tAÎocCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

142 
JV®ue
* 
pResuÉ
)

144 
	`UNUSED_PARAMETER
(
¬gs
);

146 
	`ş—rAÎocProfS‹F›lds
(&
gDvm
.
®locProf
, 
KIND_ALL_COUNTS
);

147 
	`ş—rAÎocProfS‹F›lds
(&
	`dvmTh»adS–f
()->
®locProf
, 
KIND_ALL_COUNTS
);

148 
	`dvmS¹AÎocCouÁšg
();

149 
	`RETURN_VOID
();

150 
	}
}

155 
	$D®vik_d®vik_sy¡em_VMDebug_¡İAÎocCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

156 
JV®ue
* 
pResuÉ
)

158 
	`UNUSED_PARAMETER
(
¬gs
);

160 
	`dvmStİAÎocCouÁšg
();

161 
	`RETURN_VOID
();

162 
	}
}

167 
	$D®vik_d®vik_sy¡em_VMDebug_g‘AÎocCouÁ
(cÚ¡ 
u4
* 
¬gs
,

168 
JV®ue
* 
pResuÉ
)

170 
AÎocProfS‹
 *
®locProf
;

171 
kšd
 = 
¬gs
[0];

172 ià(
kšd
 < (1<<16)) {

173 
®locProf
 = &
gDvm
.allocProf;

175 
®locProf
 = &
	`dvmTh»adS–f
()->allocProf;

176 
kšd
 >>= 16;

178 
kšd
) {

179 
KIND_ALLOCATED_OBJECTS
:

180 
pResuÉ
->
i
 = 
®locProf
->
®locCouÁ
;

182 
KIND_ALLOCATED_BYTES
:

183 
pResuÉ
->
i
 = 
®locProf
->
®locSize
;

185 
KIND_FREED_OBJECTS
:

186 
pResuÉ
->
i
 = 
®locProf
->
ä“CouÁ
;

188 
KIND_FREED_BYTES
:

189 
pResuÉ
->
i
 = 
®locProf
->
ä“Size
;

191 
KIND_GC_INVOCATIONS
:

192 
pResuÉ
->
i
 = 
®locProf
->
gcCouÁ
;

194 
KIND_CLASS_INIT_COUNT
:

195 
pResuÉ
->
i
 = 
®locProf
->
şassIn™CouÁ
;

197 
KIND_CLASS_INIT_TIME
:

199 
pResuÉ
->
i
 = (è(
®locProf
->
şassIn™Time
 / 1000);

201 
KIND_EXT_ALLOCATED_OBJECTS
:

202 
KIND_EXT_ALLOCATED_BYTES
:

203 
KIND_EXT_FREED_OBJECTS
:

204 
KIND_EXT_FREED_BYTES
:

205 
pResuÉ
->
i
 = 0;

208 
	`as£¹
(
çl£
);

209 
pResuÉ
->
i
 = -1;

211 
	}
}

216 
	$D®vik_d®vik_sy¡em_VMDebug_»£tAÎocCouÁ
(cÚ¡ 
u4
* 
¬gs
,

217 
JV®ue
* 
pResuÉ
)

219 
kšds
 = 
¬gs
[0];

220 
	`ş—rAÎocProfS‹F›lds
(&
gDvm
.
®locProf
, 
kšds
 & 0xffff);

221 
	`ş—rAÎocProfS‹F›lds
(&
	`dvmTh»adS–f
()->
®locProf
, 
kšds
 >> 16);

222 
	`RETURN_VOID
();

223 
	}
}

235 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tM‘hodT¿cšgN©ive
(cÚ¡ 
u4
* 
¬gs
,

236 
JV®ue
* 
pResuÉ
)

238 
SŒšgObjeù
* 
ŒaûFeSŒ
 = (SŒšgObjeù*è
¬gs
[0];

239 
Objeù
* 
ŒaûFd
 = (Objeù*è
¬gs
[1];

240 
bufãrSize
 = 
¬gs
[2];

241 
æags
 = 
¬gs
[3];

243 ià(
bufãrSize
 == 0) {

245 
bufãrSize
 = 8 * 1024 * 1024;

248 ià(
bufãrSize
 < 1024) {

249 
	`dvmThrowIÎeg®Argum’tExû±iÚ
(
NULL
);

250 
	`RETURN_VOID
();

253 * 
ŒaûFeName
 = 
NULL
;

254 ià(
ŒaûFeSŒ
 !ğ
NULL
)

255 
ŒaûFeName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ŒaûFeSŒ
);

257 
fd
 = -1;

258 ià(
ŒaûFd
 !ğ
NULL
) {

259 
ÜigFd
 = 
	`g‘FeDesütÜ
(
ŒaûFd
);

260 ià(
ÜigFd
 < 0)

261 
	`RETURN_VOID
();

263 
fd
 = 
	`dup
(
ÜigFd
);

264 ià(
fd
 < 0) {

265 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exRuÁimeExû±iÚ
,

266 "dup(%dèçed: %s", 
ÜigFd
, 
	`¡»¼Ü
(
”ºo
));

267 
	`RETURN_VOID
();

271 
	`dvmM‘hodT¿ûS¹
(
ŒaûFeName
 !ğ
NULL
 ?raceFileName : "[DDMS]",

272 
fd
, 
bufãrSize
, 
æags
, (
ŒaûFeName
 =ğ
NULL
 && fd == -1));

273 
	`ä“
(
ŒaûFeName
);

274 
	`RETURN_VOID
();

275 
	}
}

282 
	$D®vik_d®vik_sy¡em_VMDebug_isM‘hodT¿cšgAùive
(cÚ¡ 
u4
* 
¬gs
,

283 
JV®ue
* 
pResuÉ
)

285 
	`UNUSED_PARAMETER
(
¬gs
);

287 
	`RETURN_BOOLEAN
(
	`dvmIsM‘hodT¿ûAùive
());

288 
	}
}

295 
	$D®vik_d®vik_sy¡em_VMDebug_¡İM‘hodT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

296 
JV®ue
* 
pResuÉ
)

298 
	`UNUSED_PARAMETER
(
¬gs
);

300 
	`dvmM‘hodT¿ûStİ
();

301 
	`RETURN_VOID
();

302 
	}
}

309 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tEmuÏtÜT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

310 
JV®ue
* 
pResuÉ
)

312 
	`UNUSED_PARAMETER
(
¬gs
);

314 
	`dvmEmuÏtÜT¿ûS¹
();

315 
	`RETURN_VOID
();

316 
	}
}

323 
	$D®vik_d®vik_sy¡em_VMDebug_¡İEmuÏtÜT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

324 
JV®ue
* 
pResuÉ
)

326 
	`UNUSED_PARAMETER
(
¬gs
);

328 
	`dvmEmuÏtÜT¿ûStİ
();

329 
	`RETURN_VOID
();

330 
	}
}

337 
	$D®vik_d®vik_sy¡em_VMDebug_isDebugg”CÚÃùed
(cÚ¡ 
u4
* 
¬gs
,

338 
JV®ue
* 
pResuÉ
)

340 
	`UNUSED_PARAMETER
(
¬gs
);

342 
	`RETURN_BOOLEAN
(
	`dvmDbgIsDebugg”CÚÃùed
());

343 
	}
}

350 
	$D®vik_d®vik_sy¡em_VMDebug_isDebuggšgEÇbËd
(cÚ¡ 
u4
* 
¬gs
,

351 
JV®ue
* 
pResuÉ
)

353 
	`UNUSED_PARAMETER
(
¬gs
);

355 
	`RETURN_BOOLEAN
(
gDvm
.
jdwpCÚfigu»d
);

356 
	}
}

364 
	$D®vik_d®vik_sy¡em_VMDebug_Ï¡Debugg”Aùiv™y
(cÚ¡ 
u4
* 
¬gs
,

365 
JV®ue
* 
pResuÉ
)

367 
	`UNUSED_PARAMETER
(
¬gs
);

369 
	`RETURN_LONG
(
	`dvmDbgLa¡Debugg”Aùiv™y
());

370 
	}
}

375 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tIn¡ruùiÚCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

376 
JV®ue
* 
pResuÉ
)

378 
	`dvmS¹In¡ruùiÚCouÁšg
();

379 
	`RETURN_VOID
();

380 
	}
}

385 
	$D®vik_d®vik_sy¡em_VMDebug_¡İIn¡ruùiÚCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

386 
JV®ue
* 
pResuÉ
)

388 
	`dvmStİIn¡ruùiÚCouÁšg
();

389 
	`RETURN_VOID
();

390 
	}
}

401 
	$D®vik_d®vik_sy¡em_VMDebug_g‘In¡ruùiÚCouÁ
(cÚ¡ 
u4
* 
¬gs
,

402 
JV®ue
* 
pResuÉ
)

404 
A¼ayObjeù
* 
couÁA¼ay
 = (A¼ayObjeù*è
¬gs
[0];

406 ià(
couÁA¼ay
 !ğ
NULL
) {

407 * 
¡Üage
 = (*)(*)
couÁA¼ay
->
cÚ‹Ás
;

408 
u4
 
Ëngth
 = 
couÁA¼ay
->length;

414 ià(
Ëngth
 > 
kNumPackedOpcodes
) {

415 
Ëngth
 = 
kNumPackedOpcodes
;

418 
	`sched_y›ld
();

419 
	`memıy
(
¡Üage
, 
gDvm
.
execu‹dIn¡rCouÁs
, 
Ëngth
 * ());

422 
	`RETURN_VOID
();

423 
	}
}

430 
	$D®vik_d®vik_sy¡em_VMDebug_»£tIn¡ruùiÚCouÁ
(cÚ¡ 
u4
* 
¬gs
,

431 
JV®ue
* 
pResuÉ
)

433 
	`sched_y›ld
();

434 
	`mem£t
(
gDvm
.
execu‹dIn¡rCouÁs
, 0, 
kNumPackedOpcodes
 * ());

435 
	`RETURN_VOID
();

436 
	}
}

443 
	$D®vik_d®vik_sy¡em_VMDebug_´štLßdedCÏs£s
(cÚ¡ 
u4
* 
¬gs
,

444 
JV®ue
* 
pResuÉ
)

446 
æags
 = 
¬gs
[0];

448 
	`dvmDumpAÎCÏs£s
(
æags
);

450 
	`RETURN_VOID
();

451 
	}
}

458 
	$D®vik_d®vik_sy¡em_VMDebug_g‘LßdedCÏssCouÁ
(cÚ¡ 
u4
* 
¬gs
,

459 
JV®ue
* 
pResuÉ
)

461 
couÁ
;

463 
	`UNUSED_PARAMETER
(
¬gs
);

465 
couÁ
 = 
	`dvmG‘NumLßdedCÏs£s
();

467 
	`RETURN_INT
(
couÁ
);

468 
	}
}

474 
	$D®vik_d®vik_sy¡em_VMDebug_th»adCpuTimeNªos
(cÚ¡ 
u4
* 
¬gs
,

475 
JV®ue
* 
pResuÉ
)

477 
jlÚg
 
»suÉ
;

479 #ifdeà
HAVE_POSIX_CLOCKS


480 
time¥ec
 
now
;

481 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
now
);

482 
»suÉ
 = (
jlÚg
è(
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
);

484 
»suÉ
 = (
jlÚg
) -1;

487 
	`RETURN_LONG
(
»suÉ
);

488 
	}
}

496 
	$D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©a
(cÚ¡ 
u4
* 
¬gs
,

497 
JV®ue
* 
pResuÉ
)

499 
SŒšgObjeù
* 
feNameSŒ
 = (SŒšgObjeù*è
¬gs
[0];

500 
Objeù
* 
feDesütÜ
 = (Objeù*è
¬gs
[1];

501 * 
feName
;

502 
»suÉ
;

507 ià(
feNameSŒ
 =ğ
NULL
 && 
feDesütÜ
 == NULL) {

508 
	`dvmThrowNuÎPoš‹rExû±iÚ
("fileName ==‚ull && fd ==‚ull");

509 
	`RETURN_VOID
();

512 ià(
feNameSŒ
 !ğ
NULL
) {

513 
feName
 = 
	`dvmC»©eC¡rFromSŒšg
(
feNameSŒ
);

514 ià(
feName
 =ğ
NULL
) {

516 
	`dvmThrowRuÁimeExû±iÚ
("malloc failure?");

517 
	`RETURN_VOID
();

520 
feName
 = 
	`¡rdup
("[fd]");

523 
fd
 = -1;

524 ià(
feDesütÜ
 !ğ
NULL
) {

525 
fd
 = 
	`g‘FeDesütÜ
(
feDesütÜ
);

526 ià(
fd
 < 0) {

527 
	`ä“
(
feName
);

528 
	`RETURN_VOID
();

532 
»suÉ
 = 
	`h´ofDumpH—p
(
feName
, 
fd
, 
çl£
);

533 
	`ä“
(
feName
);

535 ià(
»suÉ
 != 0) {

537 
	`dvmThrowRuÁimeExû±iÚ
(

539 
	`RETURN_VOID
();

542 
	`RETURN_VOID
();

543 
	}
}

550 
	$D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©aDdms
(cÚ¡ 
u4
* 
¬gs
,

551 
JV®ue
* 
pResuÉ
)

553 
»suÉ
;

555 
»suÉ
 = 
	`h´ofDumpH—p
("[DDMS]", -1, 
Œue
);

557 ià(
»suÉ
 != 0) {

559 
	`dvmThrowRuÁimeExû±iÚ
(

561 
	`RETURN_VOID
();

564 
	`RETURN_VOID
();

565 
	}
}

583 
	$D®vik_d®vik_sy¡em_VMDebug_ÿcheRegi¡”M­
(cÚ¡ 
u4
* 
¬gs
,

584 
JV®ue
* 
pResuÉ
)

586 
SŒšgObjeù
* 
şassAndM‘hodDescSŒ
 = (SŒšgObjeù*è
¬gs
[0];

587 
CÏssObjeù
* 
şazz
;

588 
boŞ
 
»suÉ
 = 
çl£
;

590 ià(
şassAndM‘hodDescSŒ
 =ğ
NULL
) {

591 
	`dvmThrowNuÎPoš‹rExû±iÚ
("classAndMethodDesc ==‚ull");

592 
	`RETURN_VOID
();

595 * 
şassAndM‘hodDesc
 = 
NULL
;

601 
şassAndM‘hodDesc
 = 
	`dvmC»©eC¡rFromSŒšg
(
şassAndM‘hodDescSŒ
);

603 * 
m‘hodName
 = 
	`¡rchr
(
şassAndM‘hodDesc
, '.');

604 ià(
m‘hodName
 =ğ
NULL
) {

605 
	`dvmThrowRuÁimeExû±iÚ
("method‚ame‚ot found in string");

606 
	`RETURN_VOID
();

608 *
m‘hodName
++ = '\0';

610 * 
m‘hodDesü
 = 
	`¡rchr
(
m‘hodName
, ':');

611 ià(
m‘hodDesü
 =ğ
NULL
) {

612 
	`dvmThrowRuÁimeExû±iÚ
("method descriptor‚ot found in string");

613 
	`RETURN_VOID
();

615 *
m‘hodDesü
++ = '\0';

622 
şazz
 = 
	`dvmLookupCÏss
(
şassAndM‘hodDesc
, 
NULL
, 
çl£
);

623 ià(
şazz
 =ğ
NULL
) {

624 
	`ALOGD
("CÏs % nÙ found iÀboÙ¡¿°lßd”", 
şassAndM‘hodDesc
);

625 
ba
;

628 
M‘hod
* 
m‘hod
;

634 ià(
m‘hodName
[0] == '<') {

639 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
m‘hodName
,

640 
m‘hodDesü
);

645 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
şazz
, 
m‘hodName
,

646 
m‘hodDesü
);

647 ià(
m‘hod
 =ğ
NULL
) {

648 
m‘hod
 = 
	`dvmFšdDœeùM‘hodH›rByDesütÜ
(
şazz
, 
m‘hodName
,

649 
m‘hodDesü
);

653 ià(
m‘hod
 !ğ
NULL
) {

657 cÚ¡ 
Regi¡”M­
* 
pM­
;

658 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
m‘hod
);

659 ià(
pM­
 =ğ
NULL
) {

660 
	`ALOGV
("No map for %s.%s %s",

661 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

663 
	`ALOGV
("Found map %s.%s %s",

664 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

665 
»suÉ
 = 
Œue
;

668 
	`ALOGV
("Unableo find %s.%s %s",

669 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

672 
ba
:

673 
	`ä“
(
şassAndM‘hodDesc
);

674 
	`RETURN_BOOLEAN
(
»suÉ
);

675 
	}
}

680 
	$D®vik_d®vik_sy¡em_VMDebug_dumpReã»nûTabËs
(cÚ¡ 
u4
* 
¬gs
,

681 
JV®ue
* 
pResuÉ
)

683 
	`UNUSED_PARAMETER
(
¬gs
);

684 
	`UNUSED_PARAMETER
(
pResuÉ
);

686 
	`ALOGI
("---„eferenceable dump ---");

687 
	`dvmDumpJniReã»nûTabËs
();

690 
	`ALOGI
("---");

691 
	`RETURN_VOID
();

692 
	}
}

703 
	$D®vik_d®vik_sy¡em_VMDebug_üash
(cÚ¡ 
u4
* 
¬gs
,

704 
JV®ue
* 
pResuÉ
)

706 
	`UNUSED_PARAMETER
(
¬gs
);

707 
	`UNUSED_PARAMETER
(
pResuÉ
);

709 
	`ALOGW
("Crashing VM on„equest");

710 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

711 
	`dvmAbÜt
();

712 
	}
}

720 
	$D®vik_d®vik_sy¡em_VMDebug_šfİošt
(cÚ¡ 
u4
* 
¬gs
,

721 
JV®ue
* 
pResuÉ
)

723 
gDvm
.
ÇtiveDebugg”Aùive
 = 
Œue
;

725 
	`ALOGD
("VMDebug infİošˆ%d h™", 
¬gs
[0]);

727 
gDvm
.
ÇtiveDebugg”Aùive
 = 
çl£
;

728 
	`RETURN_VOID
();

729 
	}
}

731 
	$D®vik_d®vik_sy¡em_VMDebug_couÁIn¡ªûsOfCÏss
(cÚ¡ 
u4
* 
¬gs
,

732 
JV®ue
* 
pResuÉ
)

734 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*)
¬gs
[0];

735 
boŞ
 
couÁAssigÇbË
 = 
¬gs
[1];

736 ià(
şazz
 =ğ
NULL
) {

737 
	`RETURN_LONG
(0);

739 ià(
couÁAssigÇbË
) {

740 
size_t
 
couÁ
 = 
	`dvmCouÁAssigÇbËIn¡ªûsOfCÏss
(
şazz
);

741 
	`RETURN_LONG
(()
couÁ
);

743 
size_t
 
couÁ
 = 
	`dvmCouÁIn¡ªûsOfCÏss
(
şazz
);

744 
	`RETURN_LONG
(()
couÁ
);

746 
	}
}

748 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMDebug
[] = {

750 
D®vik_d®vik_sy¡em_VMDebug_g‘VmF—tu»Li¡
 },

752 
D®vik_d®vik_sy¡em_VMDebug_g‘AÎocCouÁ
 },

754 
D®vik_d®vik_sy¡em_VMDebug_»£tAÎocCouÁ
 },

756 
D®vik_d®vik_sy¡em_VMDebug_¡¬tAÎocCouÁšg
 },

758 
D®vik_d®vik_sy¡em_VMDebug_¡İAÎocCouÁšg
 },

760 
D®vik_d®vik_sy¡em_VMDebug_¡¬tM‘hodT¿cšgN©ive
 },

762 
D®vik_d®vik_sy¡em_VMDebug_isM‘hodT¿cšgAùive
 },

764 
D®vik_d®vik_sy¡em_VMDebug_¡İM‘hodT¿cšg
 },

766 
D®vik_d®vik_sy¡em_VMDebug_¡¬tEmuÏtÜT¿cšg
 },

768 
D®vik_d®vik_sy¡em_VMDebug_¡İEmuÏtÜT¿cšg
 },

770 
D®vik_d®vik_sy¡em_VMDebug_¡¬tIn¡ruùiÚCouÁšg
 },

772 
D®vik_d®vik_sy¡em_VMDebug_¡İIn¡ruùiÚCouÁšg
 },

774 
D®vik_d®vik_sy¡em_VMDebug_»£tIn¡ruùiÚCouÁ
 },

776 
D®vik_d®vik_sy¡em_VMDebug_g‘In¡ruùiÚCouÁ
 },

778 
D®vik_d®vik_sy¡em_VMDebug_isDebugg”CÚÃùed
 },

780 
D®vik_d®vik_sy¡em_VMDebug_isDebuggšgEÇbËd
 },

782 
D®vik_d®vik_sy¡em_VMDebug_Ï¡Debugg”Aùiv™y
 },

784 
D®vik_d®vik_sy¡em_VMDebug_´štLßdedCÏs£s
 },

786 
D®vik_d®vik_sy¡em_VMDebug_g‘LßdedCÏssCouÁ
 },

788 
D®vik_d®vik_sy¡em_VMDebug_th»adCpuTimeNªos
 },

790 
D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©a
 },

792 
D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©aDdms
 },

794 
D®vik_d®vik_sy¡em_VMDebug_ÿcheRegi¡”M­
 },

796 
D®vik_d®vik_sy¡em_VMDebug_dumpReã»nûTabËs
 },

798 
D®vik_d®vik_sy¡em_VMDebug_üash
 },

800 
D®vik_d®vik_sy¡em_VMDebug_šfİošt
 },

802 
D®vik_d®vik_sy¡em_VMDebug_couÁIn¡ªûsOfCÏss
 },

803 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_system_VMRuntime.cpp

20 
	~"D®vik.h
"

21 
	~"ScİedPth»adMu‹xLock.h
"

22 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

24 
	~<cuts/¬¿y.h
>

25 
	~<lim™s.h
>

34 
	$D®vik_d®vik_sy¡em_VMRuÁime_g‘T¬g‘H—pUtiz©iÚ
(

35 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

37 
	`UNUSED_PARAMETER
(
¬gs
);

39 
	`RETURN_FLOAT
(
	`dvmG‘T¬g‘H—pUtiz©iÚ
());

40 
	}
}

50 
	$D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveS‘T¬g‘H—pUtiz©iÚ
(

51 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

53 
	`dvmS‘T¬g‘H—pUtiz©iÚ
(
	`dvmU4ToFlßt
(
¬gs
[1]));

55 
	`RETURN_VOID
();

56 
	}
}

64 
	$D®vik_d®vik_sy¡em_VMRuÁime_¡¬tJ™Comp©iÚ
(cÚ¡ 
u4
* 
¬gs
,

65 
JV®ue
* 
pResuÉ
)

67 #ià
	`defšed
(
WITH_JIT
)

68 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
 && 
gDvmJ™
.
di§bËJ™
 =ğ
çl£
) {

69 
ScİedPth»adMu‹xLock
 
	`lock
(&
gDvmJ™
.
comp”Lock
);

70 
gDvmJ™
.
®»adyEÇbËdVŸF¿mewÜk
 = 
Œue
;

71 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueAùiv™y
);

74 
	`RETURN_VOID
();

75 
	}
}

84 
	$D®vik_d®vik_sy¡em_VMRuÁime_di§bËJ™Comp©iÚ
(cÚ¡ 
u4
* 
¬gs
,

85 
JV®ue
* 
pResuÉ
)

87 #ià
	`defšed
(
WITH_JIT
)

88 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
) {

89 
gDvmJ™
.
di§bËJ™
 = 
Œue
;

92 
	`RETURN_VOID
();

93 
	}
}

95 
	$D®vik_d®vik_sy¡em_VMRuÁime_ÃwNÚMovabËA¼ay
(cÚ¡ 
u4
* 
¬gs
,

96 
JV®ue
* 
pResuÉ
)

98 
CÏssObjeù
* 
–em’tCÏss
 = (CÏssObjeù*è
¬gs
[1];

99 
Ëngth
 = 
¬gs
[2];

101 ià(
–em’tCÏss
 =ğ
NULL
) {

102 
	`dvmThrowNuÎPoš‹rExû±iÚ
("elementClass ==‚ull");

103 
	`RETURN_VOID
();

105 ià(
Ëngth
 < 0) {

106 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
Ëngth
);

107 
	`RETURN_VOID
();

113 
CÏssObjeù
* 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
–em’tCÏss
);

114 
A¼ayObjeù
* 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
,

115 
Ëngth
,

116 
ALLOC_NON_MOVING
);

117 ià(
ÃwA¼ay
 =ğ
NULL
) {

118 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

119 
	`RETURN_VOID
();

121 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

123 
	`RETURN_PTR
(
ÃwA¼ay
);

124 
	}
}

126 
	$D®vik_d®vik_sy¡em_VMRuÁime_add»ssOf
(cÚ¡ 
u4
* 
¬gs
,

127 
JV®ue
* 
pResuÉ
)

129 
A¼ayObjeù
* 
¬¿y
 = (A¼ayObjeù*è
¬gs
[1];

130 ià(!
	`dvmIsA¼ay
(
¬¿y
)) {

131 
	`dvmThrowIÎeg®Argum’tExû±iÚ
(
NULL
);

132 
	`RETURN_VOID
();

135 
s8
 
»suÉ
 = (
ušŒ_t
è
¬¿y
->
cÚ‹Ás
;

136 
	`RETURN_LONG
(
»suÉ
);

137 
	}
}

139 
	$D®vik_d®vik_sy¡em_VMRuÁime_ş—rGrowthLim™
(cÚ¡ 
u4
* 
¬gs
,

140 
JV®ue
* 
pResuÉ
)

142 
	`dvmCË¬GrowthLim™
();

143 
	`RETURN_VOID
();

144 
	}
}

146 
	$D®vik_d®vik_sy¡em_VMRuÁime_isDebugg”Aùive
(

147 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

149 
	`RETURN_BOOLEAN
(
gDvm
.
debugg”Aùive
 || gDvm.
ÇtiveDebugg”Aùive
);

150 
	}
}

152 
	$D®vik_d®vik_sy¡em_VMRuÁime_´İ”t›s
(cÚ¡ 
u4
* 
¬gs
,

153 
JV®ue
* 
pResuÉ
)

155 
A¼ayObjeù
* 
»suÉ
 = 
	`dvmC»©eSŒšgA¼ay
(*
gDvm
.
´İ”t›s
);

156 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
	`dvmTh»adS–f
());

157 
	`RETURN_PTR
(
»suÉ
);

158 
	}
}

160 
	$»tuºCSŒšg
(
JV®ue
* 
pResuÉ
, cÚ¡ * 
s
)

162 
Objeù
* 
»suÉ
 = (Objeù*è
	`dvmC»©eSŒšgFromC¡r
(
s
);

163 
	`dvmR–—£T¿ckedAÎoc
(
»suÉ
, 
	`dvmTh»adS–f
());

164 
	`RETURN_PTR
(
»suÉ
);

165 
	}
}

167 
	$D®vik_d®vik_sy¡em_VMRuÁime_boÙCÏssP©h
(cÚ¡ 
u4
* 
¬gs
,

168 
JV®ue
* 
pResuÉ
)

170 
	`»tuºCSŒšg
(
pResuÉ
, 
gDvm
.
boÙCÏssP©hSŒ
);

171 
	}
}

173 
	$D®vik_d®vik_sy¡em_VMRuÁime_şassP©h
(cÚ¡ 
u4
* 
¬gs
,

174 
JV®ue
* 
pResuÉ
)

176 
	`»tuºCSŒšg
(
pResuÉ
, 
gDvm
.
şassP©hSŒ
);

177 
	}
}

179 
	$D®vik_d®vik_sy¡em_VMRuÁime_vmV”siÚ
(cÚ¡ 
u4
* 
¬gs
,

180 
JV®ue
* 
pResuÉ
)

182 
buf
[64];

183 
	`¥rštf
(
buf
, "%d.%d.%d",

184 
DALVIK_MAJOR_VERSION
, 
DALVIK_MINOR_VERSION
, 
DALVIK_BUG_VERSION
);

185 
	`»tuºCSŒšg
(
pResuÉ
, 
buf
);

186 
	}
}

188 
	$D®vik_d®vik_sy¡em_VMRuÁime_£tT¬g‘SdkV”siÚ
(cÚ¡ 
u4
* 
¬gs
,

189 
JV®ue
* 
pResuÉ
)

194 
rg‘SdkV”siÚ
 = 
¬gs
[1];

195 ià(
rg‘SdkV”siÚ
 > 0 &&argetSdkVersion <= 13 ) {

197 
	`ALOGI
("Tuºšg oÀJNI‡µ bug wÜk¬ound fÜ¬g‘ SDK v”siÚ %i...", 
rg‘SdkV”siÚ
);

198 
gDvmJni
.
wÜkAroundAµJniBugs
 = 
Œue
;

200 
	`RETURN_VOID
();

201 
	}
}

203 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMRuÁime
[] = {

205 
D®vik_d®vik_sy¡em_VMRuÁime_add»ssOf
 },

207 
D®vik_d®vik_sy¡em_VMRuÁime_boÙCÏssP©h
 },

209 
D®vik_d®vik_sy¡em_VMRuÁime_şassP©h
 },

211 
D®vik_d®vik_sy¡em_VMRuÁime_ş—rGrowthLim™
 },

213 
D®vik_d®vik_sy¡em_VMRuÁime_di§bËJ™Comp©iÚ
 },

215 
D®vik_d®vik_sy¡em_VMRuÁime_isDebugg”Aùive
 },

217 
D®vik_d®vik_sy¡em_VMRuÁime_g‘T¬g‘H—pUtiz©iÚ
 },

219 
D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveS‘T¬g‘H—pUtiz©iÚ
 },

221 
D®vik_d®vik_sy¡em_VMRuÁime_ÃwNÚMovabËA¼ay
 },

223 
D®vik_d®vik_sy¡em_VMRuÁime_´İ”t›s
 },

225 
D®vik_d®vik_sy¡em_VMRuÁime_£tT¬g‘SdkV”siÚ
 },

227 
D®vik_d®vik_sy¡em_VMRuÁime_¡¬tJ™Comp©iÚ
 },

229 
D®vik_d®vik_sy¡em_VMRuÁime_vmV”siÚ
 },

230 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_system_VMStack.cpp

20 
	~"D®vik.h
"

21 
	~"UniquePŒ.h
"

22 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”
(cÚ¡ 
u4
* 
¬gs
,

30 
JV®ue
* 
pResuÉ
)

32 
CÏssObjeù
* 
şazz
 =

33 
	`dvmG‘C®Ër2CÏss
(
	`dvmTh»adS–f
()->
š‹½Save
.
curF¿me
);

35 
	`UNUSED_PARAMETER
(
¬gs
);

37 ià(
şazz
 =ğ
NULL
)

38 
	`RETURN_PTR
(
NULL
);

39 
	`RETURN_PTR
(
şazz
->
şassLßd”
);

40 
	}
}

47 
	$D®vik_d®vik_sy¡em_VMSck_g‘SckCÏss2
(cÚ¡ 
u4
* 
¬gs
,

48 
JV®ue
* 
pResuÉ
)

50 
CÏssObjeù
* 
şazz
 =

51 
	`dvmG‘C®Ër3CÏss
(
	`dvmTh»adS–f
()->
š‹½Save
.
curF¿me
);

53 
	`UNUSED_PARAMETER
(
¬gs
);

55 
	`RETURN_PTR
(
şazz
);

56 
	}
}

65 
	$D®vik_d®vik_sy¡em_VMSck_g‘CÏs£s
(cÚ¡ 
u4
* 
¬gs
,

66 
JV®ue
* 
pResuÉ
)

69 
size_t
 
maxSize
 = 
¬gs
[0];

70 
size_t
 
size
 = 0;

71 cÚ¡ 
size_t
 
kSk
 = 2;

76 *
å
 = 
	`dvmTh»adS–f
()->
š‹½Save
.
curF¿me
;

77 
size_t
 
d•th
 = 
	`dvmCompu‹ExaùF¿meD•th
(
å
);

78 
UniquePŒ
<cÚ¡ 
M‘hod
*[]> 
	`m‘hods
(
Ãw
 cÚ¡ M‘hod*[
d•th
]);

79 
	`dvmFlSckT¿ûA¼ay
(
å
, 
m‘hods
.
	`g‘
(), 
d•th
);

84 
size_t
 
i
 = 
kSk
; i < 
d•th
 && 
size
 < 
maxSize
; ++i) {

85 cÚ¡ 
M‘hod
* 
m‘h
 = 
m‘hods
[
i
];

87 ià(
	`dvmIsReæeùiÚM‘hod
(
m‘h
))

90 
size
++;

97 
CÏssObjeù
* 
şassA¼ayCÏss
 = 
	`dvmFšdA¼ayCÏss
("[Ljava/lang/Class;",

98 
NULL
);

99 ià(
şassA¼ayCÏss
 =ğ
NULL
) {

100 
	`ALOGW
("Unableo find java.lang.Class‡rray class");

103 
A¼ayObjeù
* 
şas£s
 = 
	`dvmAÎocA¼ayByCÏss
(
şassA¼ayCÏss
,

104 
size
,

105 
ALLOC_DEFAULT
);

106 ià(
şas£s
 =ğ
NULL
) {

107 
	`ALOGW
("UÇbËØ®loÿ‹ cÏs ¬¿y oà%zdƒËm’ts", 
size
);

114 
size_t
 
objCouÁ
 = 0;

115 
size_t
 
i
 = 
kSk
; i < 
d•th
; ++i) {

116 ià(
	`dvmIsReæeùiÚM‘hod
(
m‘hods
[
i
])) {

119 
Objeù
* 
kÏss
 = (Objeù *)
m‘hods
[
i
]->
şazz
;

120 
	`dvmS‘ObjeùA¼ayEËm’t
(
şas£s
, 
objCouÁ
, 
kÏss
);

121 
objCouÁ
++;

123 
	`as£¹
(
objCouÁ
 =ğ
şas£s
->
Ëngth
);

125 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
şas£s
, 
NULL
);

126 
	`RETURN_PTR
(
şas£s
);

127 
	}
}

135 * 
	$g‘T¿ûBuf
(
Objeù
* 
rg‘Th»adObj
, 
size_t
* 
pSckD•th
)

137 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

138 
Th»ad
* 
th»ad
;

139 * 
ŒaûBuf
;

141 
	`as£¹
(
rg‘Th»adObj
 !ğ
NULL
);

143 
	`dvmLockTh»adLi¡
(
£lf
);

148 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

149 ià(
th»ad
->
th»adObj
 =ğ
rg‘Th»adObj
)

152 ià(
th»ad
 =ğ
NULL
) {

153 
	`ALOGI
("VMStack.getTraceBuf:hreadObj %p‚ot‡ctive",

154 
rg‘Th»adObj
);

155 
	`dvmUÆockTh»adLi¡
();

156  
NULL
;

164 ià(
th»ad
 !ğ
£lf
)

165 
	`dvmSu¥’dTh»ad
(
th»ad
);

166 
ŒaûBuf
 = 
	`dvmFlInSckT¿ûRaw
(
th»ad
, 
pSckD•th
);

167 ià(
th»ad
 !ğ
£lf
)

168 
	`dvmResumeTh»ad
(
th»ad
);

169 
	`dvmUÆockTh»adLi¡
();

171  
ŒaûBuf
;

172 
	}
}

180 
	$D®vik_d®vik_sy¡em_VMSck_g‘Th»adSckT¿û
(cÚ¡ 
u4
* 
¬gs
,

181 
JV®ue
* 
pResuÉ
)

183 
Objeù
* 
rg‘Th»adObj
 = (Objeù*è
¬gs
[0];

184 
size_t
 
¡ackD•th
;

185 * 
ŒaûBuf
 = 
	`g‘T¿ûBuf
(
rg‘Th»adObj
, &
¡ackD•th
);

187 ià(
ŒaûBuf
 =ğ
NULL
)

188 
	`RETURN_PTR
(
NULL
);

193 
A¼ayObjeù
* 
Œaû
 = 
	`dvmG‘SckT¿ûRaw
(
ŒaûBuf
, 
¡ackD•th
);

194 
	`ä“
(
ŒaûBuf
);

195 
	`RETURN_PTR
(
Œaû
);

196 
	}
}

204 
	$D®vik_d®vik_sy¡em_VMSck_flSckT¿ûEËm’ts
(cÚ¡ 
u4
* 
¬gs
,

205 
JV®ue
* 
pResuÉ
)

207 
Objeù
* 
rg‘Th»adObj
 = (Objeù*è
¬gs
[0];

208 
A¼ayObjeù
* 
¡eA¼ay
 = (A¼ayObjeù*è
¬gs
[1];

209 
size_t
 
¡ackD•th
;

210 * 
ŒaûBuf
 = 
	`g‘T¿ûBuf
(
rg‘Th»adObj
, &
¡ackD•th
);

212 ià(
ŒaûBuf
 =ğ
NULL
)

213 
	`RETURN_PTR
(
NULL
);

218 ià(
¡ackD•th
 > 
¡eA¼ay
->
Ëngth
) {

219 
¡ackD•th
 = 
¡eA¼ay
->
Ëngth
;

221 
	`dvmFlSckT¿ûEËm’ts
(
ŒaûBuf
, 
¡ackD•th
, 
¡eA¼ay
);

222 
	`ä“
(
ŒaûBuf
);

223 
	`RETURN_INT
(
¡ackD•th
);

224 
	}
}

226 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMSck
[] = {

228 
D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”
 },

230 
D®vik_d®vik_sy¡em_VMSck_g‘SckCÏss2
 },

232 
D®vik_d®vik_sy¡em_VMSck_g‘CÏs£s
 },

234 
D®vik_d®vik_sy¡em_VMSck_g‘Th»adSckT¿û
 },

236 
D®vik_d®vik_sy¡em_VMSck_flSckT¿ûEËm’ts
 },

237 { 
NULL
, NULL, NULL },

	@vm/native/dalvik_system_Zygote.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

22 
	~"shadowlib/ShadowLib.h
"

24 
	~<sigÇl.h
>

25 
	~<sys/ty³s.h
>

26 
	~<sys/wa™.h
>

27 
	~<g½.h
>

28 
	~<”ºo.h
>

29 
	~<·ths.h
>

30 
	~<sys/³rsÚ®™y.h
>

31 
	~<cuts/sched_pŞicy.h
>

33 #ià
defšed
(
HAVE_PRCTL
)

34 
	~<sys/´ùl.h
>

37 
	#ZYGOTE_LOG_TAG
 "ZygÙe"

	)

40 
	~<Ãtš‘/š.h
>

41 
	~<sys/ty³s.h
>

42 
	~<sys/sock‘.h
>

43 
	~<¡dio.h
>

44 
	~<¡dlib.h
>

45 
	~<¡ršg.h
>

46 
	~<uni¡d.h
>

47 
	~<Ãtš‘/š.h
>

48 
	~<¬·/š‘.h
>

49 
	~<sys/un.h
>

50 
	#UNIX_PATH_MAX
 108

	)

54 
	mDEBUG_ENABLE_DEBUGGER
 = 1,

55 
	mDEBUG_ENABLE_CHECKJNI
 = 1 << 1,

56 
	mDEBUG_ENABLE_ASSERT
 = 1 << 2,

57 
	mDEBUG_ENABLE_SAFEMODE
 = 1 << 3,

58 
	mDEBUG_ENABLE_JNI_LOGGING
 = 1 << 4,

65 
	$sigchldHªdËr
(
s
)

67 
pid_t
 
pid
;

68 
¡©us
;

70 (
pid
 = 
	`wa™pid
(-1, &
¡©us
, 
WNOHANG
)) > 0) {

78 ià(
	`WIFEXITED
(
¡©us
)) {

79 ià(
	`WEXITSTATUS
(
¡©us
)) {

80 
	`ALOG
(
LOG_DEBUG
, 
ZYGOTE_LOG_TAG
, "Process %dƒxited cleanly (%d)",

81 (è
pid
, 
	`WEXITSTATUS
(
¡©us
));

83 
	`IF_ALOGV
( ) {

84 
	`ALOG
(
LOG_VERBOSE
, 
ZYGOTE_LOG_TAG
,

86 (è
pid
, 
	`WEXITSTATUS
(
¡©us
));

89 } ià(
	`WIFSIGNALED
(
¡©us
)) {

90 ià(
	`WTERMSIG
(
¡©us
è!ğ
SIGKILL
) {

91 
	`ALOG
(
LOG_DEBUG
, 
ZYGOTE_LOG_TAG
,

93 (è
pid
, 
	`WTERMSIG
(
¡©us
));

95 
	`IF_ALOGV
( ) {

96 
	`ALOG
(
LOG_VERBOSE
, 
ZYGOTE_LOG_TAG
,

98 (è
pid
, 
	`WTERMSIG
(
¡©us
));

101 #ifdeà
WCOREDUMP


102 ià(
	`WCOREDUMP
(
¡©us
)) {

103 
	`ALOG
(
LOG_INFO
, 
ZYGOTE_LOG_TAG
, "Process %d dumped core",

104 (è
pid
);

114 ià(
pid
 =ğ
gDvm
.
sy¡emS”v”Pid
) {

115 
	`ALOG
(
LOG_INFO
, 
ZYGOTE_LOG_TAG
,

117 (è
pid
);

118 
	`kl
(
	`g‘pid
(), 
SIGKILL
);

122 ià(
pid
 < 0) {

123 
	`ALOG
(
LOG_WARN
, 
ZYGOTE_LOG_TAG
,

124 "ZygÙSIGCHLDƒ¼Ü iÀwa™pid: %s",
	`¡»¼Ü
(
”ºo
));

126 
	}
}

137 
	$£tSigÇlHªdËr
()

139 
”r
;

140 
sigaùiÚ
 
§
;

142 
	`mem£t
(&
§
, 0, (sa));

144 
§
.
§_hªdËr
 = 
sigchldHªdËr
;

146 
”r
 = 
	`sigaùiÚ
 (
SIGCHLD
, &
§
, 
NULL
);

148 ià(
”r
 < 0) {

149 
	`ALOGW
("E¼Ü s‘tšg SIGCHLD hªdËr: %s", 
	`¡»¼Ü
(
”ºo
));

151 
	}
}

156 
	$un£tSigÇlHªdËr
()

158 
”r
;

159 
sigaùiÚ
 
§
;

161 
	`mem£t
(&
§
, 0, (sa));

163 
§
.
§_hªdËr
 = 
SIG_DFL
;

165 
”r
 = 
	`sigaùiÚ
 (
SIGCHLD
, &
§
, 
NULL
);

167 ià(
”r
 < 0) {

168 
	`ALOGW
("E¼Ü un£‰šg SIGCHLD hªdËr: %s", 
	`¡»¼Ü
(
”ºo
));

170 
	}
}

177 
	$£tgroupsIÁ¬¿y
(
A¼ayObjeù
* 
gidA¼ay
)

179 
gid_t
 *
gids
;

180 
u4
 
i
;

181 
s4
 *
cÚ‹Ás
;

183 ià(
gidA¼ay
 =ğ
NULL
) {

188 
gids
 = (
gid_t
 *)
	`®loÿ
((gid_tè* 
gidA¼ay
->
Ëngth
);

189 
cÚ‹Ás
 = (
s4
 *)(*)
gidA¼ay
->contents;

191 
i
 = 0 ; i < 
gidA¼ay
->
Ëngth
 ; i++) {

192 
gids
[
i
] = (
gid_t
è
cÚ‹Ás
[i];

195  
	`£tgroups
((
size_t
è
gidA¼ay
->
Ëngth
, 
gids
);

196 
	}
}

206 
	$£Œlim™sFromA¼ay
(
A¼ayObjeù
* 
¾im™s
)

208 
u4
 
i
;

209 
¾im™
 
¾im
;

211 ià(
¾im™s
 =ğ
NULL
) {

215 
	`mem£t
 (&
¾im
, 0, (rlim));

217 
A¼ayObjeù
** 
tu¶es
 = (A¼ayObjeù **)(*)
¾im™s
->
cÚ‹Ás
;

219 
i
 = 0; i < 
¾im™s
->
Ëngth
; i++) {

220 
A¼ayObjeù
 * 
¾im™_tu¶e
 = 
tu¶es
[
i
];

221 
s4
* 
cÚ‹Ás
 = (s4 *)(*)
¾im™_tu¶e
->contents;

222 
”r
;

224 ià(
¾im™_tu¶e
->
Ëngth
 != 3) {

225 
	`ALOGE
("rlimits‡rray must have‡ second dimension of size 3");

229 
¾im
.
¾im_cur
 = 
cÚ‹Ás
[1];

230 
¾im
.
¾im_max
 = 
cÚ‹Ás
[2];

232 
”r
 = 
	`£Œlim™
(
cÚ‹Ás
[0], &
¾im
);

234 ià(
”r
 < 0) {

240 
	}
}

243 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜk
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

245 
pid_t
 
pid
;

247 ià(!
gDvm
.
zygÙe
) {

248 
	`dvmThrowIÎeg®S‹Exû±iÚ
(

251 
	`RETURN_VOID
();

254 ià(!
	`dvmGcP»ZygÙeFÜk
()) {

255 
	`ALOGE
("pre-fork heap failed");

256 
	`dvmAbÜt
();

259 
	`£tSigÇlHªdËr
();

261 
	`dvmDumpLßd”Sts
("zygote");

262 
pid
 = 
	`fÜk
();

264 #ifdeà
HAVE_ANDROID_OS


265 ià(
pid
 == 0) {

267 
gM®locL—kZygÙeChd
;

268 
gM®locL—kZygÙeChd
 = 1;

272 
	`RETURN_INT
(
pid
);

273 
	}
}

294 
	$’abËDebugF—tu»s
(
u4
 
debugFÏgs
)

296 
	`ALOGV
("debugFÏg i 0x%02x", 
debugFÏgs
);

298 
gDvm
.
jdwpAÎowed
 = ((
debugFÏgs
 & 
DEBUG_ENABLE_DEBUGGER
) != 0);

300 ià((
debugFÏgs
 & 
DEBUG_ENABLE_CHECKJNI
) != 0) {

302 
	`dvmL©eEÇbËCheckedJni
();

305 ià((
debugFÏgs
 & 
DEBUG_ENABLE_JNI_LOGGING
) != 0) {

306 
gDvmJni
.
logThœdP¬tyJni
 = 
Œue
;

309 ià((
debugFÏgs
 & 
DEBUG_ENABLE_ASSERT
) != 0) {

311 
	`dvmL©eEÇbËAs£¹iÚs
();

314 ià((
debugFÏgs
 & 
DEBUG_ENABLE_SAFEMODE
) != 0) {

315 #ià
	`defšed
(
WITH_JIT
)

317 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
)

318 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

322 #ifdeà
HAVE_ANDROID_OS


323 ià((
debugFÏgs
 & 
DEBUG_ENABLE_DEBUGGER
) != 0) {

330 ià(
	`´ùl
(
PR_SET_DUMPABLE
, 1, 0, 0, 0) < 0) {

331 
	`ALOGE
("could‚ot set dumpable bit flag for…id %d: %s",

332 
	`g‘pid
(), 
	`¡»¼Ü
(
”ºo
));

334 
¾im™
 
¾
;

335 
¾
.
¾im_cur
 = 0;

336 
¾
.
¾im_max
 = 
RLIM_INFINITY
;

337 ià(
	`£Œlim™
(
RLIMIT_CORE
, &
¾
) < 0) {

338 
	`ALOGE
("could‚ot disable core file generation for…id %d: %s",

339 
	`g‘pid
(), 
	`¡»¼Ü
(
”ºo
));

344 
	}
}

351 
	$£tC­ab™›s
(
št64_t
 
³rm™‹d
, iÁ64_ˆ
efãùive
)

353 #ifdeà
HAVE_ANDROID_OS


354 
__u£r_ÿp_h—d”_¡ruù
 
ÿph—d”
;

355 
__u£r_ÿp_d©a_¡ruù
 
ÿpd©a
;

357 
	`mem£t
(&
ÿph—d”
, 0, (capheader));

358 
	`mem£t
(&
ÿpd©a
, 0, (capdata));

360 
ÿph—d”
.
v”siÚ
 = 
_LINUX_CAPABILITY_VERSION
;

361 
ÿph—d”
.
pid
 = 0;

363 
ÿpd©a
.
efãùive
 =ƒffective;

364 
ÿpd©a
.
³rm™‹d
 =…ermitted;

366 
	`ALOGV
("CAPSET…”m=%Îxƒff=%Îx", 
³rm™‹d
, 
efãùive
);

367 ià(
	`ÿp£t
(&
ÿph—d”
, &
ÿpd©a
) != 0)

368  
”ºo
;

372 
	}
}

374 
pid_t
 
	$fÜkAndS³cŸlizeCommÚ_2
(cÚ¡ 
u4
* 
¬gs
, 
boŞ
 
isSy¡emS”v”
)

376 
pid_t
 
pid
;

378 
uid_t
 
uid
 = (uid_tè
¬gs
[0];

379 
gid_t
 
gid
 = (gid_tè
¬gs
[1];

380 
A¼ayObjeù
* 
gids
 = (A¼ayObjeù *)
¬gs
[2];

381 
u4
 
debugFÏgs
 = 
¬gs
[3];

382 
A¼ayObjeù
 *
¾im™s
 = (A¼ayObjeù *)
¬gs
[4];

383 
SŒšgObjeù
* 
niûNameObj
 = (SŒšgObjeù* )
¬gs
[5];

384 * 
niûName
 = 
	`dvmC»©eC¡rFromSŒšg
(
niûNameObj
);

385 
št64_t
 
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
;

387 ià(
isSy¡emS”v”
) {

395 
³rm™‹dC­ab™›s
 = 
¬gs
[5] | (
št64_t
)‡rgs[6] << 32;

396 
efãùiveC­ab™›s
 = 
¬gs
[7] | (
št64_t
)‡rgs[8] << 32;

398 
³rm™‹dC­ab™›s
 = 
efãùiveC­ab™›s
 = 0;

401 ià(!
gDvm
.
zygÙe
) {

402 
	`dvmThrowIÎeg®S‹Exû±iÚ
(

408 ià(!
	`dvmGcP»ZygÙeFÜk
()) {

409 
	`ALOGE
("pre-fork heap failed");

410 
	`dvmAbÜt
();

413 
	`£tSigÇlHªdËr
();

415 
	`dvmDumpLßd”Sts
("zygote");

417 
	`BefÜeFÜk
();

418 
·»Á
 = 
	`g‘pid
();

420 
pid
 = 
	`fÜk
();

422 ià(
pid
 == 0) {

423 
	`_m­PID
(
	`g‘pid
(),
niûName
);

424 
	`ä“
(
niûName
);

425 
	`ÚFÜk
(
·»Á
);

426 
”r
;

429 #ifdeà
HAVE_ANDROID_OS


430 
gM®locL—kZygÙeChd
;

431 
gM®locL—kZygÙeChd
 = 1;

434 ià(
uid
 != 0) {

435 
”r
 = 
	`´ùl
(
PR_SET_KEEPCAPS
, 1, 0, 0, 0);

437 ià(
”r
 < 0) {

438 
	`ALOGE
("ÿÂÙ PR_SET_KEEPCAPS: %s", 
	`¡»¼Ü
(
”ºo
));

439 
	`dvmAbÜt
();

445 
”r
 = 
	`£tgroupsIÁ¬¿y
(
gids
);

447 ià(
”r
 < 0) {

448 
	`ALOGE
("ÿÂÙ s‘groups(): %s", 
	`¡»¼Ü
(
”ºo
));

449 
	`dvmAbÜt
();

452 
”r
 = 
	`£Œlim™sFromA¼ay
(
¾im™s
);

454 ià(
”r
 < 0) {

455 
	`ALOGE
("ÿÂÙ s‘¾im™(): %s", 
	`¡»¼Ü
(
”ºo
));

456 
	`dvmAbÜt
();

459 
”r
 = 
	`£tgid
(
gid
);

460 ià(
”r
 < 0) {

461 
	`ALOGE
("ÿÂÙ s‘gid(%d): %s", 
gid
, 
	`¡»¼Ü
(
”ºo
));

462 
	`dvmAbÜt
();

465 
”r
 = 
	`£tuid
(
uid
);

466 ià(
”r
 < 0) {

467 
	`ALOGE
("ÿÂÙ s‘uid(%d): %s", 
uid
, 
	`¡»¼Ü
(
”ºo
));

468 
	`dvmAbÜt
();

471 
cu¼’t
 = 
	`³rsÚ®™y
(0xffffFFFF);

472 
sucûss
 = 
	`³rsÚ®™y
((
ADDR_NO_RANDOMIZE
 | 
cu¼’t
));

473 ià(
sucûss
 == -1) {

474 
	`ALOGW
("P”sÚ®™y sw™ch faed. cu¼’t=%dƒ¼Ü=%d\n", 
cu¼’t
, 
”ºo
);

477 
”r
 = 
	`£tC­ab™›s
(
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
);

478 ià(
”r
 != 0) {

479 
	`ALOGE
("cannot set capabilities (%llx,%llx): %s",

480 
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
, 
	`¡»¼Ü
(
”r
));

481 
	`dvmAbÜt
();

484 
”r
 = 
	`£t_sched_pŞicy
(0, 
SP_DEFAULT
);

485 ià(
”r
 < 0) {

486 
	`ALOGE
("ÿÂÙ s‘_sched_pŞicy(0, SP_DEFAULT): %s", 
	`¡»¼Ü
(-
”r
));

487 
	`dvmAbÜt
();

493 
Th»ad
* 
th»ad
 = 
	`dvmTh»adS–f
();

494 
th»ad
->
sy¡emTid
 = 
	`dvmG‘SysTh»adId
();

497 
	`’abËDebugF—tu»s
(
debugFÏgs
);

499 
	`un£tSigÇlHªdËr
();

500 
gDvm
.
zygÙe
 = 
çl£
;

503 if(
çl£
)

505 
sockaddr_un
 
add»ss
;

506 
ş›Á_sock‘
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

507 if(
ş›Á_sock‘
 < 0)

509 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: C»©Sock‘ Faed! %d",
”ºo
);

513 
	`mem£t
(&
add»ss
, 0, (
sockaddr_un
));

515 
add»ss
.
sun_çmy
 = 
AF_UNIX
;

516 
	`¢´štf
(
add»ss
.
sun_·th
, 
UNIX_PATH_MAX
, "/dev/socket/instrument");

518 * 
tmp
=
NULL
;

519 
tmp
 = &
add»ss
;

521 if(
	`cÚÃù
(
ş›Á_sock‘
,

524 (
sockaddr
 *è
tmp
,

525 (
sockaddr_un
)) != 0)

527 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: CÚÃù Sock‘ Faed! %d",
”ºo
);

528 
ş›Á_sock‘
 = -1;

530 
sigÇl
 = -5;

531 
	`£nd
(
ş›Á_sock‘
, &
sigÇl
, (), 0);

532 
pid
 = 
	`g‘pid
();

533 
	`£nd
(
ş›Á_sock‘
, &
pid
, (),0);

534 
qu”y
 = -1;

535 
	`»cv
(
ş›Á_sock‘
, &
qu”y
, (), 0);

536 
	`ALOG
(
LOG_INFO
,"HAIYANG","Qu”y„esuÉ is: % , gDvm i %s",
qu”y
==0?"çl£":"Œue", 
gDvm
.
isShadow
==
çl£
?"false":"true");

537 if(
qu”y
 == 0) {

538 
gDvm
.
isShadow
=
çl£
;

540 
gDvm
.
isShadow
=
Œue
;

543 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","PROCESS START:\n\t\t\ˆ% isshadow iÀÃw…roûs %dØ%s", 
__FUNCTION__
, 
	`g‘pid
(), 
gDvm
.
isShadow
?"true":"false");

545 if(
gDvm
.
ä“ObjHook
==
NULL
)

546 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","FREE OBJ HOOK IS NOT SET");

548 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","FREE OBJ HOOK IS SET");

551 if(!
isSy¡emS”v”
)

552 
	`ShadowLib_OnLßd
(
gDvmJni
.
jniVm
, 
NULL
);

556 ià(!
	`dvmIn™Aá”ZygÙe
()) {

557 
	`ALOGE
("error in…ost-zygote initialization");

558 
	`dvmAbÜt
();

560 } ià(
pid
 > 0) {

564  
pid
;

565 
	}
}

569 
pid_t
 
	$fÜkAndS³cŸlizeCommÚ
(cÚ¡ 
u4
* 
¬gs
, 
boŞ
 
isSy¡emS”v”
)

571 
pid_t
 
pid
;

573 
uid_t
 
uid
 = (uid_tè
¬gs
[0];

574 
gid_t
 
gid
 = (gid_tè
¬gs
[1];

575 
A¼ayObjeù
* 
gids
 = (A¼ayObjeù *)
¬gs
[2];

576 
u4
 
debugFÏgs
 = 
¬gs
[3];

577 
A¼ayObjeù
 *
¾im™s
 = (A¼ayObjeù *)
¬gs
[4];

578 
št64_t
 
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
;

580 ià(
isSy¡emS”v”
) {

588 
³rm™‹dC­ab™›s
 = 
¬gs
[5] | (
št64_t
)‡rgs[6] << 32;

589 
efãùiveC­ab™›s
 = 
¬gs
[7] | (
št64_t
)‡rgs[8] << 32;

591 
³rm™‹dC­ab™›s
 = 
efãùiveC­ab™›s
 = 0;

594 ià(!
gDvm
.
zygÙe
) {

595 
	`dvmThrowIÎeg®S‹Exû±iÚ
(

601 ià(!
	`dvmGcP»ZygÙeFÜk
()) {

602 
	`ALOGE
("pre-fork heap failed");

603 
	`dvmAbÜt
();

606 
	`£tSigÇlHªdËr
();

608 
	`dvmDumpLßd”Sts
("zygote");

609 
pid
 = 
	`fÜk
();

611 ià(
pid
 == 0) {

612 
”r
;

615 #ifdeà
HAVE_ANDROID_OS


616 
gM®locL—kZygÙeChd
;

617 
gM®locL—kZygÙeChd
 = 1;

620 ià(
uid
 != 0) {

621 
”r
 = 
	`´ùl
(
PR_SET_KEEPCAPS
, 1, 0, 0, 0);

623 ià(
”r
 < 0) {

624 
	`ALOGE
("ÿÂÙ PR_SET_KEEPCAPS: %s", 
	`¡»¼Ü
(
”ºo
));

625 
	`dvmAbÜt
();

631 
”r
 = 
	`£tgroupsIÁ¬¿y
(
gids
);

633 ià(
”r
 < 0) {

634 
	`ALOGE
("ÿÂÙ s‘groups(): %s", 
	`¡»¼Ü
(
”ºo
));

635 
	`dvmAbÜt
();

638 
”r
 = 
	`£Œlim™sFromA¼ay
(
¾im™s
);

640 ià(
”r
 < 0) {

641 
	`ALOGE
("ÿÂÙ s‘¾im™(): %s", 
	`¡»¼Ü
(
”ºo
));

642 
	`dvmAbÜt
();

645 
”r
 = 
	`£tgid
(
gid
);

646 ià(
”r
 < 0) {

647 
	`ALOGE
("ÿÂÙ s‘gid(%d): %s", 
gid
, 
	`¡»¼Ü
(
”ºo
));

648 
	`dvmAbÜt
();

651 
”r
 = 
	`£tuid
(
uid
);

652 ià(
”r
 < 0) {

653 
	`ALOGE
("ÿÂÙ s‘uid(%d): %s", 
uid
, 
	`¡»¼Ü
(
”ºo
));

654 
	`dvmAbÜt
();

657 
cu¼’t
 = 
	`³rsÚ®™y
(0xffffFFFF);

658 
sucûss
 = 
	`³rsÚ®™y
((
ADDR_NO_RANDOMIZE
 | 
cu¼’t
));

659 ià(
sucûss
 == -1) {

660 
	`ALOGW
("P”sÚ®™y sw™ch faed. cu¼’t=%dƒ¼Ü=%d\n", 
cu¼’t
, 
”ºo
);

663 
”r
 = 
	`£tC­ab™›s
(
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
);

664 ià(
”r
 != 0) {

665 
	`ALOGE
("cannot set capabilities (%llx,%llx): %s",

666 
³rm™‹dC­ab™›s
, 
efãùiveC­ab™›s
, 
	`¡»¼Ü
(
”r
));

667 
	`dvmAbÜt
();

670 
”r
 = 
	`£t_sched_pŞicy
(0, 
SP_DEFAULT
);

671 ià(
”r
 < 0) {

672 
	`ALOGE
("ÿÂÙ s‘_sched_pŞicy(0, SP_DEFAULT): %s", 
	`¡»¼Ü
(-
”r
));

673 
	`dvmAbÜt
();

679 
Th»ad
* 
th»ad
 = 
	`dvmTh»adS–f
();

680 
th»ad
->
sy¡emTid
 = 
	`dvmG‘SysTh»adId
();

681 
boŞ
 
by·ss
 = 
	`dvmG‘F›ldBoŞ—n
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
);

682 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s,…id:%did:%d‚ame:%s, by·ss: %s", 
__FUNCTION__
,
	`g‘pid
(), 
th»ad
->
th»adId
, 
	`dvmG‘Th»adName
Ñh»ad).
	`c_¡r
(), 
by·ss
?"true":"false");

683 
	`dvmS‘F›ldBoŞ—n
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
, 
Œue
);

686 
	`’abËDebugF—tu»s
(
debugFÏgs
);

688 
	`un£tSigÇlHªdËr
();

689 
gDvm
.
zygÙe
 = 
çl£
;

692 if(
Œue
)

694 
sockaddr_un
 
add»ss
;

695 
ş›Á_sock‘
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

696 if(
ş›Á_sock‘
 < 0)

698 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: C»©Sock‘ Faed! %d",
”ºo
);

702 
	`mem£t
(&
add»ss
, 0, (
sockaddr_un
));

704 
add»ss
.
sun_çmy
 = 
AF_UNIX
;

705 
	`¢´štf
(
add»ss
.
sun_·th
, 
UNIX_PATH_MAX
, "/dev/socket/instrument");

707 * 
tmp
=
NULL
;

708 
tmp
 = &
add»ss
;

710 if(
	`cÚÃù
(
ş›Á_sock‘
,

713 (
sockaddr
 *è
tmp
,

714 (
sockaddr_un
)) != 0)

716 
	`ALOG
(
LOG_INFO
,"HAIYANG","CL: CÚÃù Sock‘ Faed! %d",
”ºo
);

717 
ş›Á_sock‘
 = -1;

719 
sigÇl
 = -5;

720 
	`£nd
(
ş›Á_sock‘
, &
sigÇl
, (), 0);

721 
pid
 = 
	`g‘pid
();

722 
	`£nd
(
ş›Á_sock‘
, &
pid
, (),0);

723 
qu”y
 = -1;

724 
	`»cv
(
ş›Á_sock‘
, &
qu”y
, (), 0);

725 
	`ALOG
(
LOG_INFO
,"HAIYANG","Qu”y„esuÉ is: %d",
qu”y
);

726 if(
qu”y
 == 0) {

727 
gDvm
.
isShadow
=
çl£
;

729 
gDvm
.
isShadow
=
Œue
;

732 
gDvm
.
isShadow
 = 
çl£
;

734 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","PROCESS START:\n\t\t\ˆ% isshadow iÀÃw…roûs %dØ%s", 
__FUNCTION__
, 
	`g‘pid
(), 
gDvm
.
isShadow
?"true":"false");

736 
gDvm
.
shadowHook
 = 
NULL
;

737 
gDvm
.
ÃwObjHook
 = 
NULL
;

738 
gDvm
.
ä“ObjHook
 = 
NULL
;

739 
gDvm
.
th»adEndHook
 = 
NULL
;

740 
gDvm
.
vmS¹Hook
 = 
NULL
;

741 
gDvm
.
vmEndHook
 = 
NULL
;

742 
gDvm
.
vmIn™Hook
 = 
NULL
;

743 
gDvm
.
şassfeLßdHook
 = 
NULL
;

744 
gDvm
.
şassIn™Hook
 = 
NULL
;

746 if(
gDvm
.
ä“ObjHook
==
NULL
)

747 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","FREE OBJ HOOK IS NOT SET");

749 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","FREE OBJ HOOK IS SET");

754 if(!
isSy¡emS”v”
)

755 
	`ShadowLib_OnLßd
(
gDvmJni
.
jniVm
, 
NULL
);

759 ià(!
	`dvmIn™Aá”ZygÙe
()) {

760 
	`ALOGE
("error in…ost-zygote initialization");

761 
	`dvmAbÜt
();

763 } ià(
pid
 > 0) {

767  
pid
;

768 
	}
}

773 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize
(cÚ¡ 
u4
* 
¬gs
,

774 
JV®ue
* 
pResuÉ
)

776 
pid_t
 
pid
;

778 
pid
 = 
	`fÜkAndS³cŸlizeCommÚ
(
¬gs
, 
çl£
);

780 
	`RETURN_INT
(
pid
);

781 
	}
}

782 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize_2
(cÚ¡ 
u4
* 
¬gs
,

783 
JV®ue
* 
pResuÉ
)

785 
pid_t
 
pid
;

787 
pid
 = 
	`fÜkAndS³cŸlizeCommÚ_2
(
¬gs
, 
çl£
);

789 
	`RETURN_INT
(
pid
);

790 
	}
}

796 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜkSy¡emS”v”
(

797 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

799 
pid_t
 
pid
;

800 
pid
 = 
	`fÜkAndS³cŸlizeCommÚ
(
¬gs
, 
Œue
);

803 ià(
pid
 > 0) {

804 
¡©us
;

806 
	`ALOGI
("Sy¡em s”v”…roûs %d ha b“Àü—‹d", 
pid
);

807 
gDvm
.
sy¡emS”v”Pid
 = 
pid
;

812 ià(
	`wa™pid
(
pid
, &
¡©us
, 
WNOHANG
) ==…id) {

813 
	`ALOGE
("Sy¡em s”v”…roûs %d ha d›d. Re¡¬tšg ZygÙe!", 
pid
);

814 
	`kl
(
	`g‘pid
(), 
SIGKILL
);

817 
	`RETURN_INT
(
pid
);

818 
	}
}

822 
	$D®vik_d®vik_sy¡em_ZygÙe_execSh–l
(

823 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

825 
SŒšgObjeù
* 
commªd
 = (SŒšgObjeù*)
¬gs
[0];

827 cÚ¡ *
¬gp
[] = {
_PATH_BSHELL
, "-c", 
NULL
, NULL};

828 
¬gp
[2] = 
	`dvmC»©eC¡rFromSŒšg
(
commªd
);

830 
	`ALOGI
("Exec: % % %s", 
¬gp
[0],‡rgp[1],‡rgp[2]);

832 
	`execv
(
_PATH_BSHELL
, (**)
¬gp
);

833 
	`ex™
(127);

834 
	}
}

836 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_ZygÙe
[] = {

838 
D®vik_d®vik_sy¡em_ZygÙe_fÜk
 },

840 
D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize
 },

842 
D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize_2
 },

844 
D®vik_d®vik_sy¡em_ZygÙe_fÜkSy¡emS”v”
 },

846 
D®vik_d®vik_sy¡em_ZygÙe_execSh–l
 },

847 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Class.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_CÏss_desœedAs£¹iÚStus
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

35 * 
şassName
 = 
	`dvmDesütÜToName
(
thisPŒ
->
desütÜ
);

36 
i
;

37 
boŞ
 
’abË
 = 
çl£
;

43 
i
 = 0; i < 
gDvm
.
as£¹iÚCŒlCouÁ
; i++) {

44 cÚ¡ 
As£¹iÚCÚŒŞ
* 
pCŒl
 = &
gDvm
.
as£¹iÚCŒl
[
i
];

46 ià(
pCŒl
->
isPackage
) {

59 cÚ¡ * 
Ï¡SÏsh
;

60 
pkgL’
;

62 
Ï¡SÏsh
 = 
	`¡¼chr
(
şassName
, '/');

63 ià(
Ï¡SÏsh
 =ğ
NULL
) {

64 
pkgL’
 = 0;

66 
pkgL’
 = 
Ï¡SÏsh
 - 
şassName
 +1;

69 ià(
pCŒl
->
pkgOrCÏssL’
 > 
pkgL’
 ||

70 
	`memcmp
(
pCŒl
->
pkgOrCÏss
, 
şassName
,…CŒl->
pkgOrCÏssL’
) != 0)

72 
	`ALOGV
("ASRT:…kg‚o match: '%s'(%d) vs '%s'",

73 
şassName
, 
pkgL’
, 
pCŒl
->
pkgOrCÏss
);

75 
	`ALOGV
("ASRT:…kg match: '%s'(%d) vs '%s' --> %d",

76 
şassName
, 
pkgL’
, 
pCŒl
->
pkgOrCÏss
,…CŒl->
’abË
);

77 
’abË
 = 
pCŒl
->enable;

84 ià(
pCŒl
->
pkgOrCÏss
 =ğ
NULL
) {

86 ià(
	`¡ºcmp
(
şassName
, "java/", 5) != 0) {

87 
	`ALOGV
("ASRT: sy nØm©ch: '%s'", 
şassName
);

89 
	`ALOGV
("ASRT: sys match: '%s' --> %d",

90 
şassName
, 
pCŒl
->
’abË
);

91 
’abË
 = 
pCŒl
->enable;

93 } ià(*
pCŒl
->
pkgOrCÏss
 == '\0') {

94 
	`ALOGV
("ASRT: class‡ll: '%s' --> %d",

95 
şassName
, 
pCŒl
->
’abË
);

96 
’abË
 = 
pCŒl
->enable;

98 ià(
	`¡rcmp
(
pCŒl
->
pkgOrCÏss
, 
şassName
) != 0) {

99 
	`ALOGV
("ASRT: cls‚o match: '%s' vs '%s'",

100 
şassName
, 
pCŒl
->
pkgOrCÏss
);

102 
	`ALOGV
("ASRT: cls match: '%s' vs '%s' --> %d",

103 
şassName
, 
pCŒl
->
pkgOrCÏss
,…CŒl->
’abË
);

104 
’abË
 = 
pCŒl
->enable;

110 
	`ä“
(
şassName
);

111 
	`RETURN_INT
(
’abË
);

112 
	}
}

123 
	$D®vik_java_Ïng_CÏss_şassFÜName
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

125 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

126 
boŞ
 
š™Ÿlize
 = (
¬gs
[1] != 0);

127 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[2];

129 
	`RETURN_PTR
(
	`dvmFšdCÏssByName
(
ÇmeObj
, 
lßd”
, 
š™Ÿlize
));

130 
	}
}

137 
	$D®vik_java_Ïng_CÏss_g‘CÏssLßd”
(cÚ¡ 
u4
* 
¬gs
,

138 
JV®ue
* 
pResuÉ
)

140 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

142 
	`RETURN_PTR
(
şazz
->
şassLßd”
);

143 
	}
}

151 
	$D®vik_java_Ïng_CÏss_g‘CompÚ’tTy³
(cÚ¡ 
u4
* 
¬gs
,

152 
JV®ue
* 
pResuÉ
)

154 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

156 ià(!
	`dvmIsA¼ayCÏss
(
thisPŒ
))

157 
	`RETURN_PTR
(
NULL
);

164 ià(
thisPŒ
->
desütÜ
[1] == '[')

165 
	`RETURN_PTR
(
	`dvmFšdA¼ayCÏss
(&
thisPŒ
->
desütÜ
[1],

166 
thisPŒ
->
şassLßd”
));

168 
	`RETURN_PTR
(
thisPŒ
->
–em’tCÏss
);

169 
	}
}

179 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edCÏs£s
(cÚ¡ 
u4
* 
¬gs
,

180 
JV®ue
* 
pResuÉ
)

182 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

183 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

184 
A¼ayObjeù
* 
şas£s
;

186 
şas£s
 = 
	`dvmG‘Deş¬edCÏs£s
(
şazz
);

187 ià(
şas£s
 =ğ
NULL
) {

188 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

190 
şas£s
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
,

191 0, 
ALLOC_DEFAULT
);

193 } ià(
publicOÆy
) {

194 
u4
 
couÁ
, 
ÃwIdx
, 
publicCouÁ
 = 0;

195 
CÏssObjeù
** 
pSourû
 = (CÏssObjeù**)(*)
şas£s
->
cÚ‹Ás
;

196 
u4
 
Ëngth
 = 
şas£s
->length;

199 
couÁ
 = 0; couÁ < 
Ëngth
; count++) {

200 ià(
	`dvmIsPublicCÏss
(
pSourû
[
couÁ
]))

201 
publicCouÁ
++;

205 
A¼ayObjeù
* 
ÃwCÏs£s
;

206 
ÃwCÏs£s
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
,

207 
publicCouÁ
, 
ALLOC_DEFAULT
);

210 
couÁ
 = 
ÃwIdx
 = 0; couÁ < 
Ëngth
; count++) {

211 ià(
	`dvmIsPublicCÏss
(
pSourû
[
couÁ
])) {

212 
	`dvmS‘ObjeùA¼ayEËm’t
(
ÃwCÏs£s
, 
ÃwIdx
,

213 (
Objeù
 *)
pSourû
[
couÁ
]);

214 
ÃwIdx
++;

217 
	`as£¹
(
ÃwIdx
 =ğ
publicCouÁ
);

218 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şas£s
, 
NULL
);

219 
şas£s
 = 
ÃwCÏs£s
;

222 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şas£s
, 
NULL
);

223 
	`RETURN_PTR
(
şas£s
);

224 
	}
}

230 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜs
(cÚ¡ 
u4
* 
¬gs
,

231 
JV®ue
* 
pResuÉ
)

233 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

234 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

235 
A¼ayObjeù
* 
cÚ¡ruùÜs
;

237 
cÚ¡ruùÜs
 = 
	`dvmG‘Deş¬edCÚ¡ruùÜs
(
şazz
, 
publicOÆy
);

238 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
cÚ¡ruùÜs
, 
NULL
);

240 
	`RETURN_PTR
(
cÚ¡ruùÜs
);

241 
	}
}

246 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edF›lds
(cÚ¡ 
u4
* 
¬gs
,

247 
JV®ue
* 
pResuÉ
)

249 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

250 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

251 
A¼ayObjeù
* 
f›lds
;

253 
f›lds
 = 
	`dvmG‘Deş¬edF›lds
(
şazz
, 
publicOÆy
);

254 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›lds
, 
NULL
);

256 
	`RETURN_PTR
(
f›lds
);

257 
	}
}

262 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edF›ld
(cÚ¡ 
u4
* 
¬gs
,

263 
JV®ue
* 
pResuÉ
)

265 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

266 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

267 
Objeù
* 
f›ldObj
 = 
	`dvmG‘Deş¬edF›ld
(
şazz
, 
ÇmeObj
);

268 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›ldObj
, 
NULL
);

269 
	`RETURN_PTR
(
f›ldObj
);

270 
	}
}

276 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edM‘hods
(cÚ¡ 
u4
* 
¬gs
,

277 
JV®ue
* 
pResuÉ
)

279 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

280 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

281 
A¼ayObjeù
* 
m‘hods
;

283 
m‘hods
 = 
	`dvmG‘Deş¬edM‘hods
(
şazz
, 
publicOÆy
);

284 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hods
, 
NULL
);

286 
	`RETURN_PTR
(
m‘hods
);

287 
	}
}

293 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜOrM‘hod
(

294 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

296 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

297 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

298 
A¼ayObjeù
* 
m‘hodArgs
 = (A¼ayObjeù*è
¬gs
[2];

300 
Objeù
* 
m‘hodObj
;

302 
m‘hodObj
 = 
	`dvmG‘Deş¬edCÚ¡ruùÜOrM‘hod
(
şazz
, 
ÇmeObj
, 
m‘hodArgs
);

303 
	`dvmR–—£T¿ckedAÎoc
(
m‘hodObj
, 
NULL
);

305 
	`RETURN_PTR
(
m‘hodObj
);

306 
	}
}

311 
	$D®vik_java_Ïng_CÏss_g‘IÁ”çûs
(cÚ¡ 
u4
* 
¬gs
,

312 
JV®ue
* 
pResuÉ
)

314 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

315 
A¼ayObjeù
* 
š‹rçûs
;

317 
š‹rçûs
 = 
	`dvmG‘IÁ”çûs
(
şazz
);

318 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
š‹rçûs
, 
NULL
);

320 
	`RETURN_PTR
(
š‹rçûs
);

321 
	}
}

331 
	$D®vik_java_Ïng_CÏss_g‘Modif›rs
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

333 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

334 
boŞ
 
ignÜeIÂ”
 = 
¬gs
[1];

335 
u4
 
acûssFÏgs
;

337 
acûssFÏgs
 = 
şazz
->acûssFÏg & 
JAVA_FLAGS_MASK
;

339 ià(!
ignÜeIÂ”
) {

341 
SŒšgObjeù
* 
şassName
 = 
NULL
;

342 
šÃrFÏgs
;

344 ià(
	`dvmG‘IÂ”CÏss
(
şazz
, &
şassName
, &
šÃrFÏgs
))

345 
acûssFÏgs
 = 
šÃrFÏgs
 & 
JAVA_FLAGS_MASK
;

347 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

350 
	`RETURN_INT
(
acûssFÏgs
);

351 
	}
}

362 
	$D®vik_java_Ïng_CÏss_g‘NameN©ive
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

364 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

365 cÚ¡ * 
desütÜ
 = 
şazz
->descriptor;

366 
SŒšgObjeù
* 
ÇmeObj
;

368 ià((
desütÜ
[0] != 'L') && (descriptor[0] != '[')) {

373 cÚ¡ * 
Çme
;

374 
desütÜ
[0]) {

375 'Z': 
Çme
 = "boolean"; ;

376 'B': 
Çme
 = "byte"; ;

377 'C': 
Çme
 = "char"; ;

378 'S': 
Çme
 = "short"; ;

379 'I': 
Çme
 = "int"; ;

380 'J': 
Çme
 = "long"; ;

381 'F': 
Çme
 = "float"; ;

382 'D': 
Çme
 = "double"; ;

383 'V': 
Çme
 = "void"; ;

385 
	`ALOGE
("UnknowÀ´im™ivty³ '%c'", 
desütÜ
[0]);

386 
	`as£¹
(
çl£
);

387 
	`RETURN_PTR
(
NULL
);

391 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
Çme
);

402 * 
dÙName
 = 
	`dvmDesütÜToDÙ
(
şazz
->
desütÜ
);

403 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
);

404 
	`ä“
(
dÙName
);

407 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

408 
	`RETURN_PTR
(
ÇmeObj
);

409 
	}
}

419 
	$D®vik_java_Ïng_CÏss_g‘Su³rşass
(cÚ¡ 
u4
* 
¬gs
,

420 
JV®ue
* 
pResuÉ
)

422 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

424 ià(
	`dvmIsPrim™iveCÏss
(
şazz
è|| 
	`dvmIsIÁ”çûCÏss
(clazz))

425 
	`RETURN_PTR
(
NULL
);

427 
	`RETURN_PTR
(
şazz
->
su³r
);

428 
	}
}

436 
	$D®vik_java_Ïng_CÏss_isAssigÇbËFrom
(cÚ¡ 
u4
* 
¬gs
,

437 
JV®ue
* 
pResuÉ
)

439 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

440 
CÏssObjeù
* 
‹¡CÏss
 = (CÏssObjeù*è
¬gs
[1];

442 ià(
‹¡CÏss
 =ğ
NULL
) {

443 
	`dvmThrowNuÎPoš‹rExû±iÚ
("cls ==‚ull");

444 
	`RETURN_INT
(
çl£
);

446 
	`RETURN_INT
(
	`dvmIn¡ªûof
(
‹¡CÏss
, 
thisPŒ
));

447 
	}
}

454 
	$D®vik_java_Ïng_CÏss_isIn¡ªû
(cÚ¡ 
u4
* 
¬gs
,

455 
JV®ue
* 
pResuÉ
)

457 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

458 
Objeù
* 
‹¡Obj
 = (Objeù*è
¬gs
[1];

460 ià(
‹¡Obj
 =ğ
NULL
)

461 
	`RETURN_INT
(
çl£
);

462 
	`RETURN_INT
(
	`dvmIn¡ªûof
(
‹¡Obj
->
şazz
, 
thisPŒ
));

463 
	}
}

468 
	$D®vik_java_Ïng_CÏss_isIÁ”çû
(cÚ¡ 
u4
* 
¬gs
,

469 
JV®ue
* 
pResuÉ
)

471 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

473 
	`RETURN_INT
(
	`dvmIsIÁ”çûCÏss
(
thisPŒ
));

474 
	}
}

479 
	$D®vik_java_Ïng_CÏss_isPrim™ive
(cÚ¡ 
u4
* 
¬gs
,

480 
JV®ue
* 
pResuÉ
)

482 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

484 
	`RETURN_INT
(
	`dvmIsPrim™iveCÏss
(
thisPŒ
));

485 
	}
}

492 
	$D®vik_java_Ïng_CÏss_ÃwIn¡ªû
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

494 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

495 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

496 
M‘hod
* 
š™
;

497 
Objeù
* 
ÃwObj
;

500 ià(
	`dvmIsPrim™iveCÏss
(
şazz
è|| 
	`dvmIsIÁ”çûCÏss
(clazz)

501 || 
	`dvmIsA¼ayCÏss
(
şazz
è|| 
	`dvmIsAb¡¿ùCÏss
(clazz))

503 
	`ALOGD
("newInstance failed:…%d i%d [%d‡%d",

504 
	`dvmIsPrim™iveCÏss
(
şazz
), 
	`dvmIsIÁ”çûCÏss
(clazz),

505 
	`dvmIsA¼ayCÏss
(
şazz
), 
	`dvmIsAb¡¿ùCÏss
(clazz));

506 
	`dvmThrowIn¡ªtŸtiÚExû±iÚ
(
şazz
, 
NULL
);

507 
	`RETURN_VOID
();

511 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
)) {

512 ià(!
	`dvmIn™CÏss
(
şazz
)) {

513 
	`ALOGW
("Class init failed in‚ewInstance call (%s)",

514 
şazz
->
desütÜ
);

515 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

516 
	`RETURN_VOID
();

521 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<init>", "()V");

522 ià(
š™
 =ğ
NULL
) {

524 
	`ALOGD
("newInstance failed:‚o <init>()");

525 
	`dvmThrowIn¡ªtŸtiÚExû±iÚ
(
şazz
, "noƒmpty constructor");

526 
	`RETURN_VOID
();

539 
CÏssObjeù
* 
ÿÎ”CÏss
 = 
	`dvmG‘C®Ër2CÏss
(
£lf
->
š‹½Save
.
curF¿me
);

541 ià(!
	`dvmCheckCÏssAcûss
(
ÿÎ”CÏss
, 
şazz
)) {

542 
	`ALOGD
("newInstance failed: %s‚ot‡ccessibleo %s",

543 
şazz
->
desütÜ
, 
ÿÎ”CÏss
->descriptor);

544 
	`dvmThrowIÎeg®AcûssExû±iÚ
("accesso class‚ot‡llowed");

545 
	`RETURN_VOID
();

547 ià(!
	`dvmCheckM‘hodAcûss
(
ÿÎ”CÏss
, 
š™
)) {

548 
	`ALOGD
("newInstance failed: %s.<init>()‚ot‡ccessibleo %s",

549 
şazz
->
desütÜ
, 
ÿÎ”CÏss
->descriptor);

550 
	`dvmThrowIÎeg®AcûssExû±iÚ
("accesso constructor‚ot‡llowed");

551 
	`RETURN_VOID
();

554 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DEFAULT
);

555 
JV®ue
 
unu£d
;

558 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
ÃwObj
, &
unu£d
);

559 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

561 
	`RETURN_PTR
(
ÃwObj
);

562 
	}
}

569 
	$D®vik_java_Ïng_CÏss_g‘SigÇtu»AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

570 
JV®ue
* 
pResuÉ
)

572 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

573 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(
şazz
);

575 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

576 
	`RETURN_PTR
(
¬r
);

577 
	}
}

584 
	$D®vik_java_Ïng_CÏss_g‘Deş¬šgCÏss
(cÚ¡ 
u4
* 
¬gs
,

585 
JV®ue
* 
pResuÉ
)

587 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

589 
CÏssObjeù
* 
’şosšg
 = 
	`dvmG‘Deş¬šgCÏss
(
şazz
);

590 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
’şosšg
, 
NULL
);

591 
	`RETURN_PTR
(
’şosšg
);

592 
	}
}

599 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgCÏss
(cÚ¡ 
u4
* 
¬gs
,

600 
JV®ue
* 
pResuÉ
)

602 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

604 
CÏssObjeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgCÏss
(
şazz
);

605 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
’şosšg
, 
NULL
);

606 
	`RETURN_PTR
(
’şosšg
);

607 
	}
}

614 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
,

615 
JV®ue
* 
pResuÉ
)

617 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

619 
Objeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgM‘hod
(
şazz
);

620 ià(
’şosšg
 !ğ
NULL
) {

621 
	`dvmR–—£T¿ckedAÎoc
(
’şosšg
, 
NULL
);

622 ià(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
) {

623 
	`RETURN_PTR
(
’şosšg
);

625 
	`as£¹
(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

627 
	`RETURN_PTR
(
NULL
);

628 
	}
}

635 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgM‘hod
(cÚ¡ 
u4
* 
¬gs
,

636 
JV®ue
* 
pResuÉ
)

638 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

640 
Objeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgM‘hod
(
şazz
);

641 ià(
’şosšg
 !ğ
NULL
) {

642 
	`dvmR–—£T¿ckedAÎoc
(
’şosšg
, 
NULL
);

643 ià(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
) {

644 
	`RETURN_PTR
(
’şosšg
);

646 
	`as£¹
(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

648 
	`RETURN_PTR
(
NULL
);

649 
	}
}

652 
	$D®vik_java_Ïng_CÏss_g‘G’”icIÁ”çûs
(cÚ¡ 
u4
* 
¬gs
,

653 
JV®ue
* 
pResuÉ
)

655 
	`dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
("native method‚ot implemented");

657 
	`RETURN_PTR
(
NULL
);

658 
	}
}

660 
	$D®vik_java_Ïng_CÏss_g‘G’”icSu³rşass
(cÚ¡ 
u4
* 
¬gs
,

661 
JV®ue
* 
pResuÉ
)

663 
	`dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
("native method‚ot implemented");

665 
	`RETURN_PTR
(
NULL
);

666 
	}
}

668 
	$D®vik_java_Ïng_CÏss_g‘Ty³P¬am‘”s
(cÚ¡ 
u4
* 
¬gs
,

669 
JV®ue
* 
pResuÉ
)

671 
	`dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
("native method‚ot implemented");

673 
	`RETURN_PTR
(
NULL
);

674 
	}
}

682 
	$D®vik_java_Ïng_CÏss_isAnÚymousCÏss
(cÚ¡ 
u4
* 
¬gs
,

683 
JV®ue
* 
pResuÉ
)

685 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

686 
SŒšgObjeù
* 
şassName
 = 
NULL
;

687 
acûssFÏgs
;

694 ià(!
	`dvmG‘IÂ”CÏss
(
şazz
, &
şassName
, &
acûssFÏgs
))

695 
	`RETURN_BOOLEAN
(
çl£
);

697 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

698 
	`RETURN_BOOLEAN
(
şassName
 =ğ
NULL
);

699 
	}
}

706 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚs
(cÚ¡ 
u4
* 
¬gs
,

707 
JV®ue
* 
pResuÉ
)

709 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

711 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘CÏssAÂÙ©iÚs
(
şazz
);

712 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnos
, 
NULL
);

713 
	`RETURN_PTR
(
ªnos
);

714 
	}
}

719 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

720 
JV®ue
* 
pResuÉ
)

722 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

723 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[1];

725 
	`RETURN_PTR
(
	`dvmG‘CÏssAÂÙ©iÚ
(
şazz
, 
ªnÙ©iÚCÏzz
));

726 
	}
}

731 
	$D®vik_java_Ïng_CÏss_isDeş¬edAÂÙ©iÚP»£Á
(cÚ¡ 
u4
* 
¬gs
,

732 
JV®ue
* 
pResuÉ
)

734 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

735 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[1];

737 
	`RETURN_BOOLEAN
(
	`dvmIsCÏssAÂÙ©iÚP»£Á
(
şazz
, 
ªnÙ©iÚCÏzz
));

738 
	}
}

745 
	$D®vik_java_Ïng_CÏss_g‘IÂ”CÏssName
(cÚ¡ 
u4
* 
¬gs
,

746 
JV®ue
* 
pResuÉ
)

748 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

749 
SŒšgObjeù
* 
ÇmeObj
;

750 
æags
;

752 ià(
	`dvmG‘IÂ”CÏss
(
şazz
, &
ÇmeObj
, &
æags
)) {

753 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

754 
	`RETURN_PTR
(
ÇmeObj
);

756 
	`RETURN_PTR
(
NULL
);

758 
	}
}

760 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_CÏss
[] = {

762 
D®vik_java_Ïng_CÏss_desœedAs£¹iÚStus
 },

764 
D®vik_java_Ïng_CÏss_şassFÜName
 },

766 
D®vik_java_Ïng_CÏss_g‘CÏssLßd”
 },

768 
D®vik_java_Ïng_CÏss_g‘CompÚ’tTy³
 },

770 
D®vik_java_Ïng_CÏss_g‘SigÇtu»AÂÙ©iÚ
 },

772 
D®vik_java_Ïng_CÏss_g‘Deş¬edCÏs£s
 },

774 
D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜs
 },

776 
D®vik_java_Ïng_CÏss_g‘Deş¬edF›lds
 },

778 
D®vik_java_Ïng_CÏss_g‘Deş¬edM‘hods
 },

780 
D®vik_java_Ïng_CÏss_g‘Deş¬edF›ld
 },

782 
D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜOrM‘hod
 },

784 
D®vik_java_Ïng_CÏss_g‘IÁ”çûs
 },

786 
D®vik_java_Ïng_CÏss_g‘Modif›rs
 },

788 
D®vik_java_Ïng_CÏss_g‘NameN©ive
 },

790 
D®vik_java_Ïng_CÏss_g‘Su³rşass
 },

792 
D®vik_java_Ïng_CÏss_isAssigÇbËFrom
 },

794 
D®vik_java_Ïng_CÏss_isIn¡ªû
 },

796 
D®vik_java_Ïng_CÏss_isIÁ”çû
 },

798 
D®vik_java_Ïng_CÏss_isPrim™ive
 },

800 
D®vik_java_Ïng_CÏss_ÃwIn¡ªû
 },

802 
D®vik_java_Ïng_CÏss_g‘Deş¬šgCÏss
 },

804 
D®vik_java_Ïng_CÏss_g‘EnşosšgCÏss
 },

806 
D®vik_java_Ïng_CÏss_g‘EnşosšgCÚ¡ruùÜ
 },

808 
D®vik_java_Ïng_CÏss_g‘EnşosšgM‘hod
 },

811 
D®vik_java_Ïng_CÏss_g‘G’”icIÁ”çûs
 },

813 
D®vik_java_Ïng_CÏss_g‘G’”icSu³rşass
 },

815 
D®vik_java_Ïng_CÏss_g‘Ty³P¬am‘”s
 },

818 
D®vik_java_Ïng_CÏss_isAnÚymousCÏss
 },

820 
D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚs
 },

822 
D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚ
 },

824 
D®vik_java_Ïng_CÏss_isDeş¬edAÂÙ©iÚP»£Á
 },

826 
D®vik_java_Ïng_CÏss_g‘IÂ”CÏssName
 },

827 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Double.cpp

17 
	~"D®vik.h
"

18 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

20 
	$DoubË_doubËToLÚgB™s
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

22 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgDoubË_doubËToLÚgB™s
);

23 
	}
}

25 
	$DoubË_doubËToRawLÚgB™s
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

27 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgDoubË_doubËToRawLÚgB™s
);

28 
	}
}

30 
	$DoubË_lÚgB™sToDoubË
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgDoubË_lÚgB™sToDoubË
);

33 
	}
}

35 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_DoubË
[] = {

36 { "doubËToLÚgB™s", "(D)J", 
DoubË_doubËToLÚgB™s
 },

37 { "doubËToRawLÚgB™s", "(D)J", 
DoubË_doubËToRawLÚgB™s
 },

38 { "lÚgB™sToDoubË", "(J)D", 
DoubË_lÚgB™sToDoubË
 },

39 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Float.cpp

17 
	~"D®vik.h
"

18 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

20 
	$Flßt_æßtToIÁB™s
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

22 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgFlßt_æßtToIÁB™s
);

23 
	}
}

25 
	$Flßt_æßtToRawIÁB™s
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

27 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgFlßt_æßtToRawIÁB™s
);

28 
	}
}

30 
	$Flßt_štB™sToFlßt
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgFlßt_štB™sToFlßt
);

33 
	}
}

35 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Flßt
[] = {

36 { "æßtToIÁB™s", "(F)I", 
Flßt_æßtToIÁB™s
 },

37 { "æßtToRawIÁB™s", "(F)I", 
Flßt_æßtToRawIÁB™s
 },

38 { "štB™sToFlßt", "(I)F", 
Flßt_štB™sToFlßt
 },

39 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Math.cpp

17 
	~"D®vik.h
"

18 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

20 
	$M©h_absD
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

22 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_abs_doubË
);

23 
	}
}

25 
	$M©h_absF
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

27 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_abs_æßt
);

28 
	}
}

30 
	$M©h_absI
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_abs_št
);

33 
	}
}

35 
	$M©h_absJ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

37 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_abs_lÚg
);

38 
	}
}

40 
	$M©h_cos
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

42 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_cos
);

43 
	}
}

45 
	$M©h_maxI
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

47 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_max_št
);

48 
	}
}

50 
	$M©h_mšI
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

52 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_mš_št
);

53 
	}
}

55 
	$M©h_sš
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

57 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_sš
);

58 
	}
}

60 
	$M©h_sq¹
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

62 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgM©h_sq¹
);

63 
	}
}

65 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_M©h
[] = {

66 { "abs", "(D)D", 
M©h_absD
 },

67 { "abs", "(F)F", 
M©h_absF
 },

68 { "abs", "(I)I", 
M©h_absI
 },

69 { "abs", "(J)J", 
M©h_absJ
 },

70 { "cos", "(D)D", 
M©h_cos
 },

71 { "max", "(II)I", 
M©h_maxI
 },

72 { "mš", "(II)I", 
M©h_mšI
 },

73 { "sš", "(D)D", 
M©h_sš
 },

74 { "sq¹", "(D)D", 
M©h_sq¹
 },

75 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Object.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_java_Ïng_Objeù_š‹º®ClÚe
(cÚ¡ 
u4
* 
¬gs
,

30 
JV®ue
* 
pResuÉ
)

32 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

33 
Objeù
* 
şÚe
 = 
	`dvmClÚeObjeù
(
thisPŒ
, 
ALLOC_DONT_TRACK
);

35 
	`RETURN_PTR
(
şÚe
);

36 
	}
}

41 
	$D®vik_java_Ïng_Objeù_hashCode
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

43 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

44 
	`RETURN_INT
(
	`dvmId’t™yHashCode
(
thisPŒ
));

45 
	}
}

50 
	$D®vik_java_Ïng_Objeù_g‘CÏss
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

52 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

54 
	`RETURN_PTR
(
thisPŒ
->
şazz
);

55 
	}
}

63 
	$D®vik_java_Ïng_Objeù_nÙify
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

64 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

66 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

68 
	`dvmObjeùNÙify
(
£lf
, 
thisPŒ
);

69 
	`RETURN_VOID
();

70 
	}
}

75 
	$D®vik_java_Ïng_Objeù_nÙifyAÎ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

76 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

78 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

80 
	`dvmObjeùNÙifyAÎ
(
£lf
, 
thisPŒ
);

81 
	`RETURN_VOID
();

82 
	}
}

87 
	$D®vik_java_Ïng_Objeù_wa™
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

88 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

90 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

92 
	`dvmObjeùWa™
(
£lf
, 
thisPŒ
, 
	`GET_ARG_LONG
(
¬gs
,1), (
s4
ïrgs[3], 
Œue
);

93 
	`RETURN_VOID
();

94 
	}
}

96 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Objeù
[] = {

98 
D®vik_java_Ïng_Objeù_š‹º®ClÚe
 },

100 
D®vik_java_Ïng_Objeù_hashCode
 },

102 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_nÙify
 },

104 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_nÙifyAÎ
 },

106 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_wa™
 },

108 
D®vik_java_Ïng_Objeù_g‘CÏss
 },

109 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Runtime.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

22 
	~<uni¡d.h
>

23 
	~<lim™s.h
>

30 
	$D®vik_java_Ïng_RuÁime_gc
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`UNUSED_PARAMETER
(
¬gs
);

34 
	`dvmCŞËùG¬bage
();

35 
	`RETURN_VOID
();

36 
	}
}

44 
	$D®vik_java_Ïng_RuÁime_ÇtiveEx™
(cÚ¡ 
u4
* 
¬gs
,

45 
JV®ue
* 
pResuÉ
)

47 
¡©us
 = 
¬gs
[0];

48 ià(
gDvm
.
ex™Hook
 !ğ
NULL
) {

49 
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
);

50 (*
gDvm
.
ex™Hook
)(
¡©us
);

51 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

52 
	`ALOGW
("JNIƒxit hook„eturned");

54 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

55 
	`dvmComp”DumpSts
();

57 
	`ALOGD
("C®lšgƒx™(%d)", 
¡©us
);

58 
	`ex™
(
¡©us
);

59 
	}
}

68 
	$D®vik_java_Ïng_RuÁime_ÇtiveLßd
(cÚ¡ 
u4
* 
¬gs
,

69 
JV®ue
* 
pResuÉ
)

71 
SŒšgObjeù
* 
feNameObj
 = (SŒšgObjeù*è
¬gs
[0];

72 
Objeù
* 
şassLßd”
 = (Objeù*è
¬gs
[1];

73 * 
feName
 = 
NULL
;

74 
SŒšgObjeù
* 
»suÉ
 = 
NULL
;

75 * 
»asÚ
 = 
NULL
;

76 
boŞ
 
sucûss
;

78 
	`as£¹
(
feNameObj
 !ğ
NULL
);

79 
feName
 = 
	`dvmC»©eC¡rFromSŒšg
(
feNameObj
);

81 
sucûss
 = 
	`dvmLßdN©iveCode
(
feName
, 
şassLßd”
, &
»asÚ
);

82 ià(!
sucûss
) {

83 cÚ¡ * 
msg
 = (
»asÚ
 !ğ
NULL
) ?„eason : "unknown failure";

84 
»suÉ
 = 
	`dvmC»©eSŒšgFromC¡r
(
msg
);

85 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

88 
	`ä“
(
»asÚ
);

89 
	`ä“
(
feName
);

90 
	`RETURN_PTR
(
»suÉ
);

91 
	}
}

98 
	$D®vik_java_Ïng_RuÁime_maxMemÜy
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

100 
	`RETURN_LONG
(
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pMaximumSize
));

101 
	}
}

108 
	$D®vik_java_Ïng_RuÁime_tÙ®MemÜy
(cÚ¡ 
u4
* 
¬gs
,

109 
JV®ue
* 
pResuÉ
)

111 
	`RETURN_LONG
(
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pSize
));

112 
	}
}

119 
	$D®vik_java_Ïng_RuÁime_ä“MemÜy
(cÚ¡ 
u4
* 
¬gs
,

120 
JV®ue
* 
pResuÉ
)

122 
size_t
 
size
 = 
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pSize
);

123 
size_t
 
®loÿ‹d
 = 
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pAÎoÿ‹d
);

124 
»suÉ
 = 
size
 - 
®loÿ‹d
;

125 ià(
»suÉ
 < 0) {

126 
»suÉ
 = 0;

128 
	`RETURN_LONG
(
»suÉ
);

129 
	}
}

131 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_RuÁime
[] = {

133 
D®vik_java_Ïng_RuÁime_ä“MemÜy
 },

135 
D®vik_java_Ïng_RuÁime_gc
 },

137 
D®vik_java_Ïng_RuÁime_maxMemÜy
 },

139 
D®vik_java_Ïng_RuÁime_ÇtiveEx™
 },

141 
D®vik_java_Ïng_RuÁime_ÇtiveLßd
 },

143 
D®vik_java_Ïng_RuÁime_tÙ®MemÜy
 },

144 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_String.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

23 
	$SŒšg_ch¬At
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

25 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_ch¬At
);

26 
	}
}

28 
	$SŒšg_com·»To
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

30 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_com·»To
);

31 
	}
}

33 
	$SŒšg_equ®s
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

35 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_equ®s
);

36 
	}
}

38 
	$SŒšg_ç¡IndexOf
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

40 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_ç¡IndexOf_II
);

41 
	}
}

43 
	$SŒšg_š‹º
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

45 
SŒšgObjeù
* 
¡r
 = (SŒšgObjeù*è
¬gs
[0];

46 
SŒšgObjeù
* 
š‹ºed
 = 
	`dvmLookupIÁ”ÃdSŒšg
(
¡r
);

47 
	`RETURN_PTR
(
š‹ºed
);

48 
	}
}

50 
	$SŒšg_isEm±y
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

52 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_isEm±y
);

53 
	}
}

55 
	$SŒšg_Ëngth
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

57 
	`MAKE_INTRINSIC_TRAMPOLINE
(
javaLªgSŒšg_Ëngth
);

58 
	}
}

60 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_SŒšg
[] = {

61 { "ch¬At", "(I)C", 
SŒšg_ch¬At
 },

62 { "com·»To", "(Ljava/Ïng/SŒšg;)I", 
SŒšg_com·»To
 },

63 { "equ®s", "(Ljava/Ïng/Objeù;)Z", 
SŒšg_equ®s
 },

64 { "ç¡IndexOf", "(II)I", 
SŒšg_ç¡IndexOf
 },

65 { "š‹º", "()Ljava/Ïng/SŒšg;", 
SŒšg_š‹º
 },

66 { "isEm±y", "()Z", 
SŒšg_isEm±y
 },

67 { "Ëngth", "()I", 
SŒšg_Ëngth
 },

68 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_System.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

48 #ifdeà
__BIONIC__


50 
	#HAVE_MEMMOVE_WORDS


	)

53 #ifdeà
HAVE_MEMMOVE_WORDS


54 "C" 
_memmove_wÜds
(* 
de¡
, cÚ¡ * 
¤c
, 
size_t
 
n
);

55 
	#move16
 
_memmove_wÜds


	)

56 
	#move32
 
_memmove_wÜds


	)

58 
	$move16
(* 
de¡
, cÚ¡ * 
¤c
, 
size_t
 
n
)

60 
	`as£¹
((((
ušŒ_t
è
de¡
 | (ušŒ_tè
¤c
 | 
n
) & 0x01) == 0);

62 
ušt16_t
* 
d
 = (ušt16_t*è
de¡
;

63 cÚ¡ 
ušt16_t
* 
s
 = (ušt16_t*è
¤c
;

65 
n
 /ğ(
ušt16_t
);

67 ià(
d
 < 
s
) {

69 
n
--) {

70 *
d
++ = *
s
++;

74 
d
 +ğ
n
;

75 
s
 +ğ
n
;

76 
n
--) {

77 *--
d
 = *--
s
;

80 
	}
}

82 
	$move32
(* 
de¡
, cÚ¡ * 
¤c
, 
size_t
 
n
)

84 
	`as£¹
((((
ušŒ_t
è
de¡
 | (ušŒ_tè
¤c
 | 
n
) & 0x03) == 0);

86 
ušt32_t
* 
d
 = (ušt32_t*è
de¡
;

87 cÚ¡ 
ušt32_t
* 
s
 = (ušt32_t*è
¤c
;

89 
n
 /ğ(
ušt32_t
);

91 ià(
d
 < 
s
) {

93 
n
--) {

94 *
d
++ = *
s
++;

98 
d
 +ğ
n
;

99 
s
 +ğ
n
;

100 
n
--) {

101 *--
d
 = *--
s
;

104 
	}
}

114 
	$D®vik_java_Ïng_Sy¡em_¬¿ycİy
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

116 
A¼ayObjeù
* 
¤cA¼ay
 = (A¼ayObjeù*è
¬gs
[0];

117 
¤cPos
 = 
¬gs
[1];

118 
A¼ayObjeù
* 
d¡A¼ay
 = (A¼ayObjeù*è
¬gs
[2];

119 
d¡Pos
 = 
¬gs
[3];

120 
Ëngth
 = 
¬gs
[4];

123 ià(
¤cA¼ay
 =ğ
NULL
) {

124 
	`dvmThrowNuÎPoš‹rExû±iÚ
("src ==‚ull");

125 
	`RETURN_VOID
();

127 ià(
d¡A¼ay
 =ğ
NULL
) {

128 
	`dvmThrowNuÎPoš‹rExû±iÚ
("dst ==‚ull");

129 
	`RETURN_VOID
();

133 ià(!
	`dvmIsA¼ay
(
¤cA¼ay
)) {

134 
	`dvmThrowA¼ayStÜeExû±iÚNÙA¼ay
(((
Objeù
*)
¤cA¼ay
)->
şazz
, "source");

135 
	`RETURN_VOID
();

137 ià(!
	`dvmIsA¼ay
(
d¡A¼ay
)) {

138 
	`dvmThrowA¼ayStÜeExû±iÚNÙA¼ay
(((
Objeù
*)
d¡A¼ay
)->
şazz
, "destination");

139 
	`RETURN_VOID
();

143 ià(
¤cPos
 < 0 || 
d¡Pos
 < 0 || 
Ëngth
 < 0 ||

144 
¤cPos
 > (è
¤cA¼ay
->
Ëngth
 -†ength ||

145 
d¡Pos
 > (è
d¡A¼ay
->
Ëngth
 -†ength)

147 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exA¼ayIndexOutOfBoundsExû±iÚ
,

149 
¤cA¼ay
->
Ëngth
, 
¤cPos
, 
d¡A¼ay
->Ëngth, 
d¡Pos
,†ength);

150 
	`RETURN_VOID
();

153 
CÏssObjeù
* 
¤cCÏss
 = 
¤cA¼ay
->
şazz
;

154 
CÏssObjeù
* 
d¡CÏss
 = 
d¡A¼ay
->
şazz
;

155 
¤cTy³
 = 
¤cCÏss
->
desütÜ
[1];

156 
d¡Ty³
 = 
d¡CÏss
->
desütÜ
[1];

162 
boŞ
 
¤cPrim
 = (
¤cTy³
 != '[' && srcType != 'L');

163 
boŞ
 
d¡Prim
 = (
d¡Ty³
 != '[' && dstType != 'L');

164 ià(
¤cPrim
 || 
d¡Prim
) {

165 ià(
¤cPrim
 !ğ
d¡Prim
 || 
¤cTy³
 !ğ
d¡Ty³
) {

166 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ays
(
¤cCÏss
, 
d¡CÏss
);

167 
	`RETURN_VOID
();

170 ià(
çl£
è
	`ALOGD
("arraycopy…rim[%c] dst=%p %d src=%p %d†en=%d",

171 
¤cTy³
, 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
,

172 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
, 
Ëngth
);

174 
¤cTy³
) {

178 
	`memmove
((
u1
*è
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
,

179 (cÚ¡ 
u1
*è
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
,

180 
Ëngth
);

185 
	`move16
((
u1
*è
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 2,

186 (cÚ¡ 
u1
*è
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 2,

187 
Ëngth
 * 2);

192 
	`move32
((
u1
*è
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 4,

193 (cÚ¡ 
u1
*è
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 4,

194 
Ëngth
 * 4);

202 
	`move32
((
u1
*è
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 8,

203 (cÚ¡ 
u1
*è
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 8,

204 
Ëngth
 * 8);

207 
	`ALOGE
("Weœd‡¼ayy³ '%s'", 
¤cCÏss
->
desütÜ
);

208 
	`dvmAbÜt
();

216 cÚ¡ 
width
 = (
Objeù
*);

218 ià(
¤cCÏss
->
¬¿yDim
 =ğ
d¡CÏss
->arrayDim &&

219 
	`dvmIn¡ªûof
(
¤cCÏss
, 
d¡CÏss
))

224 ià(
çl£
è
	`ALOGD
("arraycopy„ef dst=%p %d src=%p %d†en=%d",

225 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
 * 
width
,

226 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
 * 
width
,

227 
Ëngth
 * 
width
);

228 
	`move32
((
u1
*)
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 
width
,

229 (cÚ¡ 
u1
*)
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 
width
,

230 
Ëngth
 * 
width
);

231 
	`dvmWr™eB¬r›rA¼ay
(
d¡A¼ay
, 
d¡Pos
, d¡Pos+
Ëngth
);

245 
Objeù
** 
¤cObj
;

246 
cİyCouÁ
;

247 
CÏssObjeù
* 
şazz
 = 
NULL
;

249 
¤cObj
 = ((
Objeù
**)(*)
¤cA¼ay
->
cÚ‹Ás
è+ 
¤cPos
;

251 ià(
Ëngth
 > 0 && 
¤cObj
[0] !ğ
NULL
)

253 
şazz
 = 
¤cObj
[0]->clazz;

254 ià(!
	`dvmCªPutA¼ayEËm’t
(
şazz
, 
d¡CÏss
))

255 
şazz
 = 
NULL
;

258 
cİyCouÁ
 = 0; cİyCouÁ < 
Ëngth
; copyCount++)

260 ià(
¤cObj
[
cİyCouÁ
] !ğ
NULL
 &&

261 
¤cObj
[
cİyCouÁ
]->
şazz
 != clazz &&

262 !
	`dvmCªPutA¼ayEËm’t
(
¤cObj
[
cİyCouÁ
]->
şazz
, 
d¡CÏss
))

269 ià(
çl£
è
	`ALOGD
("arraycopy iref dst=%p %d src=%p %d count=%d of %d",

270 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
 * 
width
,

271 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
 * 
width
,

272 
cİyCouÁ
, 
Ëngth
);

273 
	`move32
((
u1
*)
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 
width
,

274 (cÚ¡ 
u1
*)
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 
width
,

275 
cİyCouÁ
 * 
width
);

276 
	`dvmWr™eB¬r›rA¼ay
(
d¡A¼ay
, 0, 
cİyCouÁ
);

277 ià(
cİyCouÁ
 !ğ
Ëngth
) {

278 
	`dvmThrowA¼ayStÜeExû±iÚIncom·tibËA¼ayEËm’t
(
¤cPos
 + 
cİyCouÁ
,

279 
¤cObj
[
cİyCouÁ
]->
şazz
, 
d¡CÏss
);

280 
	`RETURN_VOID
();

285 
	`RETURN_VOID
();

286 
	}
}

294 
	$D®vik_java_Ïng_Sy¡em_cu¼’tTimeMlis
(cÚ¡ 
u4
* 
¬gs
,

295 
JV®ue
* 
pResuÉ
)

297 
timev®
 
tv
;

299 
	`UNUSED_PARAMETER
(
¬gs
);

301 
	`g‘timeofday
(&
tv
, (
timezÚe
 *è
NULL
);

302 
wh’
 = 
tv
.
tv_£c
 * 1000LL +v.
tv_u£c
 / 1000;

304 
	`RETURN_LONG
(
wh’
);

305 
	}
}

314 
	$D®vik_java_Ïng_Sy¡em_ÇnoTime
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

316 
	`UNUSED_PARAMETER
(
¬gs
);

318 
u8
 
wh’
 = 
	`dvmG‘R–©iveTimeN£c
();

319 
	`RETURN_LONG
(
wh’
);

320 
	}
}

329 
	$D®vik_java_Ïng_Sy¡em_id’t™yHashCode
(cÚ¡ 
u4
* 
¬gs
,

330 
JV®ue
* 
pResuÉ
)

332 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

333 
	`RETURN_INT
(
	`dvmId’t™yHashCode
(
thisPŒ
));

334 
	}
}

336 
	$D®vik_java_Ïng_Sy¡em_m­Lib¿ryName
(cÚ¡ 
u4
* 
¬gs
,

337 
JV®ue
* 
pResuÉ
)

339 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

340 
SŒšgObjeù
* 
»suÉ
 = 
NULL
;

341 * 
Çme
;

342 * 
m­³dName
;

344 ià(
ÇmeObj
 =ğ
NULL
) {

345 
	`dvmThrowNuÎPoš‹rExû±iÚ
("userLibName ==‚ull");

346 
	`RETURN_VOID
();

349 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

350 
m­³dName
 = 
	`dvmC»©eSy¡emLib¿ryName
(
Çme
);

351 ià(
m­³dName
 !ğ
NULL
) {

352 
»suÉ
 = 
	`dvmC»©eSŒšgFromC¡r
(
m­³dName
);

353 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

356 
	`ä“
(
Çme
);

357 
	`ä“
(
m­³dName
);

358 
	`RETURN_PTR
(
»suÉ
);

359 
	}
}

361 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Sy¡em
[] = {

363 
D®vik_java_Ïng_Sy¡em_¬¿ycİy
 },

365 
D®vik_java_Ïng_Sy¡em_cu¼’tTimeMlis
 },

367 
D®vik_java_Ïng_Sy¡em_id’t™yHashCode
 },

369 
D®vik_java_Ïng_Sy¡em_m­Lib¿ryName
 },

371 
D®vik_java_Ïng_Sy¡em_ÇnoTime
 },

372 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_Throwable.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_java_Ïng_ThrowabË_ÇtiveFlInSckT¿û
(cÚ¡ 
u4
* 
¬gs
,

28 
JV®ue
* 
pResuÉ
)

30 
Objeù
* 
¡ackS‹
 = 
NULL
;

32 
	`UNUSED_PARAMETER
(
¬gs
);

34 
¡ackS‹
 = 
	`dvmFlInSckT¿û
(
	`dvmTh»adS–f
());

35 
	`RETURN_PTR
(
¡ackS‹
);

36 
	}
}

44 
	$D®vik_java_Ïng_ThrowabË_ÇtiveG‘SckT¿û
(cÚ¡ 
u4
* 
¬gs
,

45 
JV®ue
* 
pResuÉ
)

47 
Objeù
* 
¡ackS‹
 = (Objeù*è
¬gs
[0];

48 
A¼ayObjeù
* 
–em’ts
 = 
NULL
;

50 ià(
¡ackS‹
 =ğ
NULL
) {

51 
	`ALOGW
("getStackTrace() called but‚orace‡vailable");

52 
	`RETURN_PTR
(
NULL
);

55 
–em’ts
 = 
	`dvmG‘SckT¿û
(
¡ackS‹
);

56 
	`RETURN_PTR
(
–em’ts
);

57 
	}
}

59 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_ThrowabË
[] = {

61 
D®vik_java_Ïng_ThrowabË_ÇtiveFlInSckT¿û
 },

63 
D®vik_java_Ïng_ThrowabË_ÇtiveG‘SckT¿û
 },

64 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_VMClassLoader.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

35 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

36 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
¬gs
[2];

37 
off£t
 = 
¬gs
[3];

38 
Ën
 = 
¬gs
[4];

39 * 
Çme
 = 
NULL
;

41 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

42 
	`ALOGE
("ERROR: defineClass(%p, %s, %p, %d, %d)",

43 
lßd”
, 
Çme
, 
d©a
, 
off£t
, 
Ën
);

44 
	`dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
(

47 
	`ä“
(
Çme
);

48 
	`RETURN_VOID
();

49 
	}
}

59 
	$D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss2
(cÚ¡ 
u4
* 
¬gs
,

60 
JV®ue
* 
pResuÉ
)

62 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

63 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
¬gs
[1];

64 
off£t
 = 
¬gs
[2];

65 
Ën
 = 
¬gs
[3];

67 
	`ALOGE
("ERROR: defineClass(%p, %p, %d, %d)",

68 
lßd”
, 
d©a
, 
off£t
, 
Ën
);

69 
	`dvmThrowUnsuµÜ‹dO³¿tiÚExû±iÚ
(

72 
	`RETURN_VOID
();

73 
	}
}

78 
	$D®vik_java_Ïng_VMCÏssLßd”_fšdLßdedCÏss
(cÚ¡ 
u4
* 
¬gs
,

79 
JV®ue
* 
pResuÉ
)

81 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

82 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

83 
CÏssObjeù
* 
şazz
 = 
NULL
;

84 * 
Çme
 = 
NULL
;

85 * 
desütÜ
 = 
NULL
;

87 ià(
ÇmeObj
 =ğ
NULL
) {

88 
	`dvmThrowNuÎPoš‹rExû±iÚ
("name ==‚ull");

89 
ba
;

95 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

96 ià(
Çme
 =ğ
NULL
)

97 
ba
;

99 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

100 ià(
desütÜ
 =ğ
NULL
)

101 
ba
;

103 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

104 
	`LOGVV
("look: % ldr=%°--> %p", 
desütÜ
, 
lßd”
, 
şazz
);

106 
ba
:

107 
	`ä“
(
Çme
);

108 
	`ä“
(
desütÜ
);

109 
	`RETURN_PTR
(
şazz
);

110 
	}
}

117 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hSize
(cÚ¡ 
u4
* 
¬gs
,

118 
JV®ue
* 
pResuÉ
)

120 
couÁ
 = 
	`dvmG‘BoÙP©hSize
();

121 
	`RETURN_INT
(
couÁ
);

122 
	}
}

131 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hResourû
(

132 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

134 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

135 
SŒšgObjeù
* 
»suÉ
;

136 
idx
 = 
¬gs
[1];

137 * 
Çme
;

139 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

140 ià(
Çme
 =ğ
NULL
)

141 
	`RETURN_PTR
(
NULL
);

143 
»suÉ
 = 
	`dvmG‘BoÙP©hResourû
(
Çme
, 
idx
);

144 
	`ä“
(
Çme
);

145 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
»suÉ
, 
NULL
);

146 
	`RETURN_PTR
(
»suÉ
);

147 
	}
}

152 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘Prim™iveCÏss
(cÚ¡ 
u4
* 
¬gs
,

153 
JV®ue
* 
pResuÉ
)

155 
´imTy³
 = 
¬gs
[0];

157 
pResuÉ
->
l
 = (
Objeù
*)
	`dvmFšdPrim™iveCÏss
(
´imTy³
);

158 
	}
}

171 
	$D®vik_java_Ïng_VMCÏssLßd”_lßdCÏss
(cÚ¡ 
u4
* 
¬gs
,

172 
JV®ue
* 
pResuÉ
)

174 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

175 
boŞ
 
»sŞve
 = (
¬gs
[1] != 0);

176 
CÏssObjeù
* 
şazz
;

178 
şazz
 = 
	`dvmFšdCÏssByName
(
ÇmeObj
, 
NULL
, 
»sŞve
);

179 
	`as£¹
(
şazz
 =ğ
NULL
 || 
	`dvmIsCÏssLšked
(clazz));

180 
	`RETURN_PTR
(
şazz
);

181 
	}
}

183 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_VMCÏssLßd”
[] = {

185 
D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss
 },

187 
D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss2
 },

189 
D®vik_java_Ïng_VMCÏssLßd”_fšdLßdedCÏss
 },

191 
D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hSize
 },

193 
D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hResourû
 },

195 
D®vik_java_Ïng_VMCÏssLßd”_g‘Prim™iveCÏss
 },

197 
D®vik_java_Ïng_VMCÏssLßd”_lßdCÏss
 },

198 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_VMThread.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_VMTh»ad_ü—‹
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
Objeù
* 
th»adObj
 = (Objeù*è
¬gs
[0];

34 
s8
 
¡ackSize
 = 
	`GET_ARG_LONG
(
¬gs
, 1);

36 
boŞ
 
tmp
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
);

37 if(
tmp
){

38 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s, gDvm i shadow i Œuš %d", 
__FUNCTION__
,
	`g‘pid
());

40 
	`ALOG
(
LOG_DEBUG
,"HAIYANG","IN %s, gDvm i shadow i çl£ iÀ%d", 
__FUNCTION__
,
	`g‘pid
());

42 
	`dvmS‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_by·ss
, gDvm.
isShadow
);

45 
	`dvmC»©eIÁ”pTh»ad
(
th»adObj
, (è
¡ackSize
);

46 
	`RETURN_VOID
();

47 
	}
}

52 
	$D®vik_java_Ïng_VMTh»ad_cu¼’tTh»ad
(cÚ¡ 
u4
* 
¬gs
,

53 
JV®ue
* 
pResuÉ
)

55 
	`UNUSED_PARAMETER
(
¬gs
);

57 
	`RETURN_PTR
(
	`dvmTh»adS–f
()->
th»adObj
);

58 
	}
}

66 
	$D®vik_java_Ïng_VMTh»ad_g‘Stus
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

68 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

69 
Th»ad
* 
th»ad
;

70 
»suÉ
;

72 
	`dvmLockTh»adLi¡
(
NULL
);

73 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

74 ià(
th»ad
 !ğ
NULL
)

75 
»suÉ
 = 
th»ad
->
¡©us
;

77 
»suÉ
 = 
THREAD_ZOMBIE
;

78 
	`dvmUÆockTh»adLi¡
();

80 
	`RETURN_INT
(
»suÉ
);

81 
	}
}

89 
	$D®vik_java_Ïng_VMTh»ad_hŞdsLock
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

91 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

92 
Objeù
* 
objeù
 = (Objeù*è
¬gs
[1];

93 
Th»ad
* 
th»ad
;

95 ià(
objeù
 =ğ
NULL
) {

96 
	`dvmThrowNuÎPoš‹rExû±iÚ
("object ==‚ull");

97 
	`RETURN_VOID
();

100 
	`dvmLockTh»adLi¡
(
NULL
);

101 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

102 
»suÉ
 = 
	`dvmHŞdsLock
(
th»ad
, 
objeù
);

103 
	`dvmUÆockTh»adLi¡
();

105 
	`RETURN_BOOLEAN
(
»suÉ
);

106 
	}
}

113 
	$D®vik_java_Ïng_VMTh»ad_š‹¼u±
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

115 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

116 
Th»ad
* 
th»ad
;

118 
	`dvmLockTh»adLi¡
(
NULL
);

119 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

120 ià(
th»ad
 !ğ
NULL
)

121 
	`dvmTh»adIÁ”ru±
(
th»ad
);

122 
	`dvmUÆockTh»adLi¡
();

123 
	`RETURN_VOID
();

124 
	}
}

131 
	$D®vik_java_Ïng_VMTh»ad_š‹¼u±ed
(cÚ¡ 
u4
* 
¬gs
,

132 
JV®ue
* 
pResuÉ
)

134 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

135 
boŞ
 
š‹¼u±ed
;

137 
	`UNUSED_PARAMETER
(
¬gs
);

139 
š‹¼u±ed
 = 
£lf
->interrupted;

140 
£lf
->
š‹¼u±ed
 = 
çl£
;

141 
	`RETURN_BOOLEAN
(
š‹¼u±ed
);

142 
	}
}

150 
	$D®vik_java_Ïng_VMTh»ad_isIÁ”ru±ed
(cÚ¡ 
u4
* 
¬gs
,

151 
JV®ue
* 
pResuÉ
)

153 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

154 
Th»ad
* 
th»ad
;

155 
boŞ
 
š‹¼u±ed
;

157 
	`dvmLockTh»adLi¡
(
NULL
);

158 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

159 ià(
th»ad
 !ğ
NULL
)

160 
š‹¼u±ed
 = 
th»ad
->interrupted;

162 
š‹¼u±ed
 = 
çl£
;

163 
	`dvmUÆockTh»adLi¡
();

165 
	`RETURN_BOOLEAN
(
š‹¼u±ed
);

166 
	}
}

173 
	$D®vik_java_Ïng_VMTh»ad_ÇmeChªged
(cÚ¡ 
u4
* 
¬gs
,

174 
JV®ue
* 
pResuÉ
)

176 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

177 
SŒšgObjeù
* 
ÇmeSŒ
 = (SŒšgObjeù*è
¬gs
[1];

178 
Th»ad
* 
th»ad
;

179 
th»adId
 = -1;

182 
	`dvmLockTh»adLi¡
(
NULL
);

183 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

184 ià(
th»ad
 !ğ
NULL
)

185 
th»adId
 = 
th»ad
->threadId;

186 
	`dvmUÆockTh»adLi¡
();

188 
	`dvmDdmS’dTh»adNameChªge
(
th»adId
, 
ÇmeSŒ
);

193 
	`RETURN_VOID
();

194 
	}
}

203 
	$D®vik_java_Ïng_VMTh»ad_£tPriÜ™y
(cÚ¡ 
u4
* 
¬gs
,

204 
JV®ue
* 
pResuÉ
)

206 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

207 
ÃwPriÜ™y
 = 
¬gs
[1];

208 
Th»ad
* 
th»ad
;

210 
	`dvmLockTh»adLi¡
(
NULL
);

211 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

212 ià(
th»ad
 !ğ
NULL
)

213 
	`dvmChªgeTh»adPriÜ™y
(
th»ad
, 
ÃwPriÜ™y
);

215 
	`dvmUÆockTh»adLi¡
();

217 
	`RETURN_VOID
();

218 
	}
}

223 
	$D®vik_java_Ïng_VMTh»ad_¦“p
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

225 
	`dvmTh»adSË•
(
	`GET_ARG_LONG
(
¬gs
,0),‡rgs[2]);

226 
	`RETURN_VOID
();

227 
	}
}

237 
	$D®vik_java_Ïng_VMTh»ad_y›ld
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

239 
	`UNUSED_PARAMETER
(
¬gs
);

241 
	`sched_y›ld
();

243 
	`RETURN_VOID
();

244 
	}
}

246 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_VMTh»ad
[] = {

248 
D®vik_java_Ïng_VMTh»ad_ü—‹
 },

250 
D®vik_java_Ïng_VMTh»ad_cu¼’tTh»ad
 },

252 
D®vik_java_Ïng_VMTh»ad_g‘Stus
 },

254 
D®vik_java_Ïng_VMTh»ad_hŞdsLock
 },

256 
D®vik_java_Ïng_VMTh»ad_š‹¼u±
 },

258 
D®vik_java_Ïng_VMTh»ad_š‹¼u±ed
 },

260 
D®vik_java_Ïng_VMTh»ad_isIÁ”ru±ed
 },

262 
D®vik_java_Ïng_VMTh»ad_ÇmeChªged
 },

264 
D®vik_java_Ïng_VMTh»ad_£tPriÜ™y
 },

266 
D®vik_java_Ïng_VMTh»ad_¦“p
 },

268 
D®vik_java_Ïng_VMTh»ad_y›ld
 },

269 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_AccessibleObject.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_AcûssibËObjeù_g‘CÏssSigÇtu»AÂÙ©iÚ
(

31 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

34 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(
şazz
);

36 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

37 
	`RETURN_PTR
(
¬r
);

38 
	}
}

40 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_AcûssibËObjeù
[] = {

42 
D®vik_java_Ïng_»æeù_AcûssibËObjeù_g‘CÏssSigÇtu»AÂÙ©iÚ
 },

43 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_Array.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_A¼ay_ü—‹ObjeùA¼ay
(cÚ¡ 
u4
* 
¬gs
,

31 
JV®ue
* 
pResuÉ
)

33 
CÏssObjeù
* 
–em’tCÏss
 = (CÏssObjeù*è
¬gs
[0];

34 
Ëngth
 = 
¬gs
[1];

36 
	`as£¹
(
–em’tCÏss
 !ğ
NULL
);

37 ià(
Ëngth
 < 0) {

38 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
Ëngth
);

39 
	`RETURN_VOID
();

42 
CÏssObjeù
* 
¬¿yCÏss
 =

43 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
–em’tCÏss
);

44 
A¼ayObjeù
* 
ÃwA¼ay
 =

45 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DEFAULT
);

46 ià(
ÃwA¼ay
 =ğ
NULL
) {

47 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

48 
	`RETURN_VOID
();

50 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

52 
	`RETURN_PTR
(
ÃwA¼ay
);

53 
	}
}

66 
	$D®vik_java_Ïng_»æeù_A¼ay_ü—‹MuÉiA¼ay
(cÚ¡ 
u4
* 
¬gs
,

67 
JV®ue
* 
pResuÉ
)

69 
CÏssObjeù
* 
–em’tCÏss
 = (CÏssObjeù*è
¬gs
[0];

70 
A¼ayObjeù
* 
dimA¼ay
 = (A¼ayObjeù*è
¬gs
[1];

71 
CÏssObjeù
* 
¬¿yCÏss
;

72 
A¼ayObjeù
* 
ÃwA¼ay
;

73 * 
acDesütÜ
;

74 
numDim
, 
i
;

75 * 
dim’siÚs
;

77 
	`ALOGV
("createMultiArray: '%s' [%d]",

78 
–em’tCÏss
->
desütÜ
, 
dimA¼ay
->
Ëngth
);

80 
	`as£¹
(
–em’tCÏss
 !ğ
NULL
);

88 
	`as£¹
(
dimA¼ay
 !ğ
NULL
);

89 
numDim
 = 
dimA¼ay
->
Ëngth
;

90 
	`as£¹
(
numDim
 > 0 &&‚umDim <= 255);

92 
dim’siÚs
 = (*)(*)
dimA¼ay
->
cÚ‹Ás
;

93 
i
 = 0; i < 
numDim
; i++) {

94 ià(
dim’siÚs
[
i
] < 0) {

95 
	`dvmThrowNeg©iveA¼aySizeExû±iÚ
(
dim’siÚs
[
i
]);

96 
	`RETURN_VOID
();

98 
	`LOGVV
("DIM %d: %d", 
i
, 
dim’siÚs
[i]);

104 
acDesütÜ
 =

105 (*è
	`m®loc
(
	`¡¾’
(
–em’tCÏss
->
desütÜ
è+ 
numDim
 + 1);

106 
	`mem£t
(
acDesütÜ
, '[', 
numDim
);

108 
	`LOGVV
("####ƒËm’ˆÇmğ'%s'", 
–em’tCÏss
->
desütÜ
);

109 ià(
	`dvmIsPrim™iveCÏss
(
–em’tCÏss
)) {

110 
	`as£¹
(
–em’tCÏss
->
´im™iveTy³
 !ğ
PRIM_NOT
);

111 
acDesütÜ
[
numDim
] = 
	`dexG‘Prim™iveTy³DesütÜCh¬
(
–em’tCÏss
->
´im™iveTy³
);

112 
acDesütÜ
[
numDim
+1] = '\0';

114 
	`¡rıy
(
acDesütÜ
+
numDim
, 
–em’tCÏss
->
desütÜ
);

116 
	`LOGVV
("####‡¼ay‚amğ'%s'", 
acDesütÜ
);

121 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏss
(
acDesütÜ
, 
–em’tCÏss
->
şassLßd”
);

122 ià(
¬¿yCÏss
 =ğ
NULL
) {

123 
	`ALOGW
("UÇbËØfšd o¸g’”©¬¿y cÏs '%s'", 
acDesütÜ
);

124 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

125 
	`ä“
(
acDesütÜ
);

126 
	`RETURN_VOID
();

128 
	`ä“
(
acDesütÜ
);

131 
ÃwA¼ay
 = 
	`dvmAÎocMuÉiA¼ay
(
¬¿yCÏss
, 
numDim
-1, 
dim’siÚs
);

132 ià(
ÃwA¼ay
 =ğ
NULL
) {

133 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

134 
	`RETURN_VOID
();

137 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

138 
	`RETURN_PTR
(
ÃwA¼ay
);

139 
	}
}

141 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_A¼ay
[] = {

143 
D®vik_java_Ïng_»æeù_A¼ay_ü—‹ObjeùA¼ay
 },

145 
D®vik_java_Ïng_»æeù_A¼ay_ü—‹MuÉiA¼ay
 },

146 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_Constructor.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

34 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_cÚ¡ruùN©ive
(

35 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

38 
A¼ayObjeù
* 
¬gLi¡
 = (A¼ayObjeù*è
¬gs
[1];

39 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

40 
A¼ayObjeù
* 
·¿ms
 = (A¼ayObjeù*è
¬gs
[3];

41 
¦Ù
 = 
¬gs
[4];

42 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

43 
Objeù
* 
ÃwObj
;

44 
M‘hod
* 
m‘h
;

46 ià(
	`dvmIsAb¡¿ùCÏss
(
deş¬šgCÏss
)) {

47 
	`dvmThrowIn¡ªtŸtiÚExû±iÚ
(
deş¬šgCÏss
, 
NULL
);

48 
	`RETURN_VOID
();

52 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

53 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
)) {

54 
	`ALOGW
("Class init failed in Constructor.constructNative (%s)",

55 
deş¬šgCÏss
->
desütÜ
);

56 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

57 
	`RETURN_VOID
();

61 
ÃwObj
 = 
	`dvmAÎocObjeù
(
deş¬šgCÏss
, 
ALLOC_DEFAULT
);

62 ià(
ÃwObj
 =ğ
NULL
)

63 
	`RETURN_PTR
(
NULL
);

65 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

66 
	`as£¹
(
m‘h
 !ğ
NULL
);

68 (è
	`dvmInvokeM‘hod
(
ÃwObj
, 
m‘h
, 
¬gLi¡
, 
·¿ms
, 
NULL
, 
noAcûssCheck
);

69 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

70 
	`RETURN_PTR
(
ÃwObj
);

71 
	}
}

73 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_CÚ¡ruùÜ
[] = {

75 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_cÚ¡ruùN©ive
 },

76 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_Field.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

58 
F›ld
* 
	$v®id©eF›ldAcûss
(
Objeù
* 
obj
, 
CÏssObjeù
* 
deş¬šgCÏss
,

59 
¦Ù
, 
boŞ
 
isS‘O³¿tiÚ
, boŞ 
noAcûssCheck
)

61 
F›ld
* 
f›ld
;

63 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

64 
	`as£¹
(
f›ld
 !ğ
NULL
);

67 ià(!
noAcûssCheck
) {

68 ià(
isS‘O³¿tiÚ
 && 
	`dvmIsFš®F›ld
(
f›ld
)) {

69 
	`dvmThrowIÎeg®AcûssExû±iÚ
("field is marked 'final'");

70  
NULL
;

73 
CÏssObjeù
* 
ÿÎ”CÏss
 =

74 
	`dvmG‘C®Ër2CÏss
(
	`dvmTh»adS–f
()->
š‹½Save
.
curF¿me
);

87 ià(!
	`dvmCheckF›ldAcûss
(
ÿÎ”CÏss
, 
f›ld
)) {

88 
	`dvmThrowIÎeg®AcûssExû±iÚ
("accesso field‚ot‡llowed");

89  
NULL
;

91 ià(
	`dvmIsPrÙeùedF›ld
(
f›ld
)) {

92 
boŞ
 
isIn¡ªû
, 
§mePackage
;

94 ià(
obj
 !ğ
NULL
)

95 
isIn¡ªû
 = 
	`dvmIn¡ªûof
(
obj
->
şazz
, 
ÿÎ”CÏss
);

97 
isIn¡ªû
 = 
çl£
;

98 
§mePackage
 = 
	`dvmInSamePackage
(
deş¬šgCÏss
, 
ÿÎ”CÏss
);

100 ià(!
isIn¡ªû
 && !
§mePackage
) {

101 
	`dvmThrowIÎeg®AcûssExû±iÚ
(

103  
NULL
;

108 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

110 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

111 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
)) {

112 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

113  
NULL
;

123 ià(!
	`dvmV”ifyObjeùInCÏss
(
obj
, 
deş¬šgCÏss
)) {

124 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

125  
NULL
;

129  
f›ld
;

130 
	}
}

138 
	$g‘SticF›ldV®ue
(cÚ¡ 
SticF›ld
* 
sf›ld
, 
JV®ue
* 
v®ue
)

140 ià(!
	`dvmIsVŞ©eF›ld
(
sf›ld
)) {

142 *
v®ue
 = 
sf›ld
->value;

145 
sf›ld
->
sigÇtu»
[0]) {

147 
v®ue
->
i
 = 
	`dvmG‘SticF›ldBoŞ—nVŞ©e
(
sf›ld
);

150 
v®ue
->
i
 = 
	`dvmG‘SticF›ldBy‹VŞ©e
(
sf›ld
);

153 
v®ue
->
i
 = 
	`dvmG‘SticF›ldShÜtVŞ©e
(
sf›ld
);

156 
v®ue
->
i
 = 
	`dvmG‘SticF›ldCh¬VŞ©e
(
sf›ld
);

159 
v®ue
->
i
 = 
	`dvmG‘SticF›ldIÁVŞ©e
(
sf›ld
);

162 
v®ue
->
f
 = 
	`dvmG‘SticF›ldFlßtVŞ©e
(
sf›ld
);

165 
v®ue
->
j
 = 
	`dvmG‘SticF›ldLÚgVŞ©e
(
sf›ld
);

168 
v®ue
->
d
 = 
	`dvmG‘SticF›ldDoubËVŞ©e
(
sf›ld
);

172 
v®ue
->
l
 = 
	`dvmG‘SticF›ldObjeùVŞ©e
(
sf›ld
);

175 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
sf›ld
->
sigÇtu»
);

176 
	`dvmAbÜt
();

179 
	}
}

187 
	$g‘In¡F›ldV®ue
(cÚ¡ 
In¡F›ld
* 
if›ld
, 
Objeù
* 
obj
,

188 
JV®ue
* 
v®ue
)

190 ià(!
	`dvmIsVŞ©eF›ld
(
if›ld
)) {

192 
if›ld
->
sigÇtu»
[0]) {

194 
v®ue
->
i
 = 
	`dvmG‘F›ldBoŞ—n
(
obj
, 
if›ld
->
by‹Off£t
);

197 
v®ue
->
i
 = 
	`dvmG‘F›ldBy‹
(
obj
, 
if›ld
->
by‹Off£t
);

200 
v®ue
->
i
 = 
	`dvmG‘F›ldShÜt
(
obj
, 
if›ld
->
by‹Off£t
);

203 
v®ue
->
i
 = 
	`dvmG‘F›ldCh¬
(
obj
, 
if›ld
->
by‹Off£t
);

206 
v®ue
->
i
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
if›ld
->
by‹Off£t
);

209 
v®ue
->
f
 = 
	`dvmG‘F›ldFlßt
(
obj
, 
if›ld
->
by‹Off£t
);

212 
v®ue
->
j
 = 
	`dvmG‘F›ldLÚg
(
obj
, 
if›ld
->
by‹Off£t
);

215 
v®ue
->
d
 = 
	`dvmG‘F›ldDoubË
(
obj
, 
if›ld
->
by‹Off£t
);

219 
v®ue
->
l
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
if›ld
->
by‹Off£t
);

222 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
if›ld
->
sigÇtu»
);

223 
	`dvmAbÜt
();

227 
if›ld
->
sigÇtu»
[0]) {

229 
v®ue
->
i
 = 
	`dvmG‘F›ldBoŞ—nVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

232 
v®ue
->
i
 = 
	`dvmG‘F›ldBy‹VŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

235 
v®ue
->
i
 = 
	`dvmG‘F›ldShÜtVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

238 
v®ue
->
i
 = 
	`dvmG‘F›ldCh¬VŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

241 
v®ue
->
i
 = 
	`dvmG‘F›ldIÁVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

244 
v®ue
->
f
 = 
	`dvmG‘F›ldFlßtVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

247 
v®ue
->
j
 = 
	`dvmG‘F›ldLÚgVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

250 
v®ue
->
d
 = 
	`dvmG‘F›ldDoubËVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

254 
v®ue
->
l
 = 
	`dvmG‘F›ldObjeùVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
);

257 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
if›ld
->
sigÇtu»
);

258 
	`dvmAbÜt
();

261 
	}
}

266 
	$g‘F›ldV®ue
(cÚ¡ 
F›ld
* 
f›ld
, 
Objeù
* 
obj
, 
JV®ue
* 
v®ue
)

268 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

269  
	`g‘SticF›ldV®ue
((cÚ¡ 
SticF›ld
*è
f›ld
, 
v®ue
);

271  
	`g‘In¡F›ldV®ue
((cÚ¡ 
In¡F›ld
*è
f›ld
, 
obj
, 
v®ue
);

273 
	}
}

279 
	$£tSticF›ldV®ue
(
SticF›ld
* 
sf›ld
, cÚ¡ 
JV®ue
* 
v®ue
)

281 ià(!
	`dvmIsVŞ©eF›ld
(
sf›ld
)) {

282 
sf›ld
->
sigÇtu»
[0]) {

285 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, (
Objeù
*)
v®ue
->
l
);

289 
sf›ld
->
v®ue
 = *value;

294 
sf›ld
->
sigÇtu»
[0]) {

296 
	`dvmS‘SticF›ldBoŞ—nVŞ©e
(
sf›ld
, 
v®ue
->
z
);

299 
	`dvmS‘SticF›ldBy‹VŞ©e
(
sf›ld
, 
v®ue
->
b
);

302 
	`dvmS‘SticF›ldShÜtVŞ©e
(
sf›ld
, 
v®ue
->
s
);

305 
	`dvmS‘SticF›ldCh¬VŞ©e
(
sf›ld
, 
v®ue
->
c
);

308 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
v®ue
->
i
);

311 
	`dvmS‘SticF›ldFlßtVŞ©e
(
sf›ld
, 
v®ue
->
f
);

314 
	`dvmS‘SticF›ldLÚgVŞ©e
(
sf›ld
, 
v®ue
->
j
);

317 
	`dvmS‘SticF›ldDoubËVŞ©e
(
sf›ld
, 
v®ue
->
d
);

321 
	`dvmS‘SticF›ldObjeùVŞ©e
(
sf›ld
, (
Objeù
*)
v®ue
->
l
);

324 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
sf›ld
->
sigÇtu»
);

325 
	`dvmAbÜt
();

328 
	}
}

334 
	$£tIn¡F›ldV®ue
(
In¡F›ld
* 
if›ld
, 
Objeù
* 
obj
,

335 cÚ¡ 
JV®ue
* 
v®ue
)

337 ià(!
	`dvmIsVŞ©eF›ld
(
if›ld
)) {

339 
if›ld
->
sigÇtu»
[0]) {

341 
	`dvmS‘F›ldBoŞ—n
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
z
);

344 
	`dvmS‘F›ldBy‹
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
b
);

347 
	`dvmS‘F›ldShÜt
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
s
);

350 
	`dvmS‘F›ldCh¬
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
c
);

353 
	`dvmS‘F›ldIÁ
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
i
);

356 
	`dvmS‘F›ldFlßt
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
f
);

359 
	`dvmS‘F›ldLÚg
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
j
);

362 
	`dvmS‘F›ldDoubË
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
d
);

366 
	`dvmS‘F›ldObjeù
(
obj
, 
if›ld
->
by‹Off£t
, (
Objeù
 *)
v®ue
->
l
);

369 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
if›ld
->
sigÇtu»
);

370 
	`dvmAbÜt
();

372 #ià
ANDROID_SMP
 != 0

377 ià(
	`dvmIsFš®F›ld
(
if›ld
)) {

378 
	`ANDROID_MEMBAR_STORE
();

383 
if›ld
->
sigÇtu»
[0]) {

385 
	`dvmS‘F›ldBoŞ—nVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
z
);

388 
	`dvmS‘F›ldBy‹VŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
b
);

391 
	`dvmS‘F›ldShÜtVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
s
);

394 
	`dvmS‘F›ldCh¬VŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
c
);

397 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
i
);

400 
	`dvmS‘F›ldFlßtVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
f
);

403 
	`dvmS‘F›ldLÚgVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
j
);

406 
	`dvmS‘F›ldDoubËVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ue
->
d
);

410 
	`dvmS‘F›ldObjeùVŞ©e
(
obj
, 
if›ld
->
by‹Off£t
, (
Objeù
*)
v®ue
->
l
);

413 
	`ALOGE
("UnhªdËd f›ld sigÇtu» '%s'", 
if›ld
->
sigÇtu»
);

414 
	`dvmAbÜt
();

417 
	}
}

422 
	$£tF›ldV®ue
(
F›ld
* 
f›ld
, 
Objeù
* 
obj
, cÚ¡ 
JV®ue
* 
v®ue
)

424 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

425  
	`£tSticF›ldV®ue
((
SticF›ld
*è
f›ld
, 
v®ue
);

427  
	`£tIn¡F›ldV®ue
((
In¡F›ld
*è
f›ld
, 
obj
, 
v®ue
);

429 
	}
}

436 
	$D®vik_java_Ïng_»æeù_F›ld_g‘F›ldModif›rs
(cÚ¡ 
u4
* 
¬gs
,

437 
JV®ue
* 
pResuÉ
)

440 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

441 
¦Ù
 = 
¬gs
[2];

442 
F›ld
* 
f›ld
;

444 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

445 
	`RETURN_INT
(
f›ld
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

446 
	}
}

454 
	$D®vik_java_Ïng_»æeù_F›ld_g‘F›ld
(cÚ¡ 
u4
* 
¬gs
,

455 
JV®ue
* 
pResuÉ
)

458 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

459 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

460 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

461 
¦Ù
 = 
¬gs
[4];

462 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

463 
F›ld
* 
f›ld
;

464 
JV®ue
 
v®ue
;

465 
D©aObjeù
* 
»suÉ
;

470 
f›ld
 = 
	`v®id©eF›ldAcûss
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
çl£
,
noAcûssCheck
);

471 ià(
f›ld
 =ğ
NULL
)

472 
	`RETURN_VOID
();

474 
	`g‘F›ldV®ue
(
f›ld
, 
obj
, &
v®ue
);

477 
»suÉ
 = 
	`dvmBoxPrim™ive
(
v®ue
, 
f›ldTy³
);

478 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

479 
	`RETURN_PTR
(
»suÉ
);

480 
	}
}

489 
	$D®vik_java_Ïng_»æeù_F›ld_£tF›ld
(cÚ¡ 
u4
* 
¬gs
,

490 
JV®ue
* 
pResuÉ
)

493 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

494 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

495 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

496 
¦Ù
 = 
¬gs
[4];

497 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

498 
Objeù
* 
v®ueObj
 = (Objeù*è
¬gs
[6];

499 
F›ld
* 
f›ld
;

500 
JV®ue
 
v®ue
;

503 ià(!
	`dvmUnboxPrim™ive
(
v®ueObj
, 
f›ldTy³
, &
v®ue
)) {

504 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("invalid value for field");

505 
	`RETURN_VOID
();

509 
f›ld
 = 
	`v®id©eF›ldAcûss
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
Œue
, 
noAcûssCheck
);

511 ià(
f›ld
 !ğ
NULL
) {

512 
	`£tF›ldV®ue
(
f›ld
, 
obj
, &
v®ue
);

514 
	`RETURN_VOID
();

515 
	}
}

522 
	$D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
(cÚ¡ 
u4
* 
¬gs
,

523 
JV®ue
* 
pResuÉ
)

526 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

527 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

528 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

529 
¦Ù
 = 
¬gs
[4];

530 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

531 
jch¬
 
desütÜ
 = 
¬gs
[6];

532 
Prim™iveTy³
 
rg‘Ty³
 = 
	`dexG‘Prim™iveTy³FromDesütÜCh¬
(
desütÜ
);

533 cÚ¡ 
F›ld
* 
f›ld
;

534 
JV®ue
 
v®ue
;

536 ià(!
	`dvmIsPrim™iveCÏss
(
f›ldTy³
)) {

537 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("not‡…rimitive field");

538 
	`RETURN_VOID
();

542 
f›ld
 = 
	`v®id©eF›ldAcûss
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
çl£
,
noAcûssCheck
);

543 ià(
f›ld
 =ğ
NULL
)

544 
	`RETURN_VOID
();

546 
	`g‘F›ldV®ue
(
f›ld
, 
obj
, &
v®ue
);

549 ià(
	`dvmCÚv”tPrim™iveV®ue
(
f›ldTy³
->
´im™iveTy³
, 
rg‘Ty³
,

550 &(
v®ue
.
i
), &(
pResuÉ
->i)) < 0)

552 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("invalid…rimitive conversion");

553 
	`RETURN_VOID
();

555 
	}
}

562 
	$D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
(cÚ¡ 
u4
* 
¬gs
,

563 
JV®ue
* 
pResuÉ
)

566 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

567 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

568 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

569 
¦Ù
 = 
¬gs
[4];

570 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

571 
jch¬
 
desütÜ
 = 
¬gs
[6];

572 cÚ¡ 
s4
* 
v®uePŒ
 = (s4*è&
¬gs
[7];

573 
Prim™iveTy³
 
¤cTy³
 = 
	`dexG‘Prim™iveTy³FromDesütÜCh¬
(
desütÜ
);

574 
F›ld
* 
f›ld
;

575 
JV®ue
 
v®ue
;

577 ià(!
	`dvmIsPrim™iveCÏss
(
f›ldTy³
)) {

578 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("not‡…rimitive field");

579 
	`RETURN_VOID
();

583 ià(
	`dvmCÚv”tPrim™iveV®ue
(
¤cTy³
, 
f›ldTy³
->
´im™iveTy³
,

584 
v®uePŒ
, &(
v®ue
.
i
)) < 0)

586 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("invalid…rimitive conversion");

587 
	`RETURN_VOID
();

591 
f›ld
 = 
	`v®id©eF›ldAcûss
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
Œue
, 
noAcûssCheck
);

593 ià(
f›ld
 !ğ
NULL
) {

594 
	`£tF›ldV®ue
(
f›ld
, 
obj
, &
v®ue
);

596 
	`RETURN_VOID
();

597 
	}
}

605 
	$D®vik_java_Ïng_»æeù_F›ld_g‘Deş¬edAÂÙ©iÚs
(

606 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

608 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[0];

609 
¦Ù
 = 
¬gs
[1];

610 
F›ld
* 
f›ld
;

612 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

613 
	`as£¹
(
f›ld
 !ğ
NULL
);

615 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘F›ldAÂÙ©iÚs
(
f›ld
);

616 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnos
, 
NULL
);

617 
	`RETURN_PTR
(
ªnos
);

618 
	}
}

624 
	$D®vik_java_Ïng_»æeù_F›ld_g‘AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

625 
JV®ue
* 
pResuÉ
)

627 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

628 
¦Ù
 = 
¬gs
[1];

629 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[2];

631 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
şazz
, 
¦Ù
);

632 
	`RETURN_PTR
(
	`dvmG‘F›ldAÂÙ©iÚ
(
şazz
, 
f›ld
, 
ªnÙ©iÚCÏzz
));

633 
	}
}

639 
	$D®vik_java_Ïng_»æeù_F›ld_isAÂÙ©iÚP»£Á
(cÚ¡ 
u4
* 
¬gs
,

640 
JV®ue
* 
pResuÉ
)

642 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

643 
¦Ù
 = 
¬gs
[1];

644 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[2];

646 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
şazz
, 
¦Ù
);

647 
	`RETURN_BOOLEAN
(
	`dvmIsF›ldAÂÙ©iÚP»£Á
(
şazz
, 
f›ld
, 
ªnÙ©iÚCÏzz
));

648 
	}
}

655 
	$D®vik_java_Ïng_»æeù_F›ld_g‘SigÇtu»AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

656 
JV®ue
* 
pResuÉ
)

659 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

660 
¦Ù
 = 
¬gs
[2];

661 
F›ld
* 
f›ld
;

663 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

664 
	`as£¹
(
f›ld
 !ğ
NULL
);

666 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(
f›ld
);

667 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

668 
	`RETURN_PTR
(
¬r
);

669 
	}
}

671 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_F›ld
[] = {

673 
D®vik_java_Ïng_»æeù_F›ld_g‘F›ldModif›rs
 },

675 
D®vik_java_Ïng_»æeù_F›ld_g‘F›ld
 },

677 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

679 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

681 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

683 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

685 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

687 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

689 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

691 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

693 
D®vik_java_Ïng_»æeù_F›ld_£tF›ld
 },

695 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

697 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

699 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

701 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

703 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

705 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

707 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

709 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

711 
D®vik_java_Ïng_»æeù_F›ld_g‘Deş¬edAÂÙ©iÚs
 },

713 
D®vik_java_Ïng_»æeù_F›ld_g‘AÂÙ©iÚ
 },

715 
D®vik_java_Ïng_»æeù_F›ld_isAÂÙ©iÚP»£Á
 },

717 
D®vik_java_Ïng_»æeù_F›ld_g‘SigÇtu»AÂÙ©iÚ
 },

718 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_Method.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘M‘hodModif›rs
(cÚ¡ 
u4
* 
¬gs
,

31 
JV®ue
* 
pResuÉ
)

33 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[0];

34 
¦Ù
 = 
¬gs
[1];

35 
M‘hod
* 
m‘h
;

37 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

38 
	`RETURN_INT
(
	`dvmFixM‘hodFÏgs
(
m‘h
->
acûssFÏgs
));

39 
	}
}

47 
	$D®vik_java_Ïng_»æeù_M‘hod_švokeN©ive
(cÚ¡ 
u4
* 
¬gs
,

48 
JV®ue
* 
pResuÉ
)

51 
Objeù
* 
m‘hObj
 = (Objeù*è
¬gs
[1];

52 
A¼ayObjeù
* 
¬gLi¡
 = (A¼ayObjeù*è
¬gs
[2];

53 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[3];

54 
A¼ayObjeù
* 
·¿ms
 = (A¼ayObjeù*è
¬gs
[4];

55 
CÏssObjeù
* 
»tuºTy³
 = (CÏssObjeù*è
¬gs
[5];

56 
¦Ù
 = 
¬gs
[6];

57 
boŞ
 
noAcûssCheck
 = (
¬gs
[7] != 0);

58 cÚ¡ 
M‘hod
* 
m‘h
;

59 
Objeù
* 
»suÉ
;

65 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

66 
	`as£¹
(
m‘h
 !ğ
NULL
);

68 ià(
	`dvmIsSticM‘hod
(
m‘h
)) {

69 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

70 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
))

71 
š™_çed
;

75 ià(
	`dvmIsIÁ”çûCÏss
(
deş¬šgCÏss
) &&

76 !
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
))

78 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
))

79 
š™_çed
;

83 ià(!
	`dvmV”ifyObjeùInCÏss
(
m‘hObj
, 
deş¬šgCÏss
)) {

84 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

85 
	`RETURN_VOID
();

89 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
m‘hObj
->
şazz
, meth);

90 ià(
m‘h
 =ğ
NULL
) {

91 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

92 
	`RETURN_VOID
();

100 
»suÉ
 = 
	`dvmInvokeM‘hod
(
m‘hObj
, 
m‘h
, 
¬gLi¡
, 
·¿ms
, 
»tuºTy³
,

101 
noAcûssCheck
);

103 
	`RETURN_PTR
(
»suÉ
);

105 
š™_çed
:

109 
	`ALOGD
("Method.invoke() on bad class %s failed",

110 
deş¬šgCÏss
->
desütÜ
);

111 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

112 
	`RETURN_VOID
();

113 
	}
}

120 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘Deş¬edAÂÙ©iÚs
(

121 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

123 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[0];

124 
¦Ù
 = 
¬gs
[1];

125 
M‘hod
* 
m‘h
;

127 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

128 
	`as£¹
(
m‘h
 !ğ
NULL
);

130 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘M‘hodAÂÙ©iÚs
(
m‘h
);

131 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

132 
	`RETURN_PTR
(
ªnos
);

133 
	}
}

139 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

140 
JV®ue
* 
pResuÉ
)

142 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

143 
¦Ù
 = 
¬gs
[1];

144 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[2];

146 
M‘hod
* 
m‘h
 = 
	`dvmSlÙToM‘hod
(
şazz
, 
¦Ù
);

147 
	`RETURN_PTR
(
	`dvmG‘M‘hodAÂÙ©iÚ
(
şazz
, 
m‘h
, 
ªnÙ©iÚCÏzz
));

148 
	}
}

154 
	$D®vik_java_Ïng_»æeù_M‘hod_isAÂÙ©iÚP»£Á
(cÚ¡ 
u4
* 
¬gs
,

155 
JV®ue
* 
pResuÉ
)

157 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

158 
¦Ù
 = 
¬gs
[1];

159 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
 = (CÏssObjeù*è
¬gs
[2];

161 
M‘hod
* 
m‘h
 = 
	`dvmSlÙToM‘hod
(
şazz
, 
¦Ù
);

162 
	`RETURN_BOOLEAN
(
	`dvmIsM‘hodAÂÙ©iÚP»£Á
(
şazz
, 
m‘h
, 
ªnÙ©iÚCÏzz
));

163 
	}
}

170 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘P¬am‘”AÂÙ©iÚs
(

171 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

173 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[0];

174 
¦Ù
 = 
¬gs
[1];

175 
M‘hod
* 
m‘h
;

177 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

178 
	`as£¹
(
m‘h
 !ğ
NULL
);

180 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘P¬am‘”AÂÙ©iÚs
(
m‘h
);

181 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

182 
	`RETURN_PTR
(
ªnos
);

183 
	}
}

191 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘DeçuÉV®ue
(cÚ¡ 
u4
* 
¬gs
,

192 
JV®ue
* 
pResuÉ
)

195 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

196 
¦Ù
 = 
¬gs
[2];

197 
M‘hod
* 
m‘h
;

200 ià(!
	`dvmIsAÂÙ©iÚCÏss
(
deş¬šgCÏss
))

201 
	`RETURN_PTR
(
NULL
);

203 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

204 
	`as£¹
(
m‘h
 !ğ
NULL
);

206 
Objeù
* 
def
 = 
	`dvmG‘AÂÙ©iÚDeçuÉV®ue
(
m‘h
);

207 
	`dvmR–—£T¿ckedAÎoc
(
def
, 
NULL
);

208 
	`RETURN_PTR
(
def
);

209 
	}
}

216 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘SigÇtu»AÂÙ©iÚ
(

217 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

219 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[0];

220 
¦Ù
 = 
¬gs
[1];

221 
M‘hod
* 
m‘h
;

223 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

224 
	`as£¹
(
m‘h
 !ğ
NULL
);

226 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(
m‘h
);

227 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

228 
	`RETURN_PTR
(
¬r
);

229 
	}
}

231 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_M‘hod
[] = {

233 
D®vik_java_Ïng_»æeù_M‘hod_g‘M‘hodModif›rs
 },

235 
D®vik_java_Ïng_»æeù_M‘hod_švokeN©ive
 },

237 
D®vik_java_Ïng_»æeù_M‘hod_g‘Deş¬edAÂÙ©iÚs
 },

239 
D®vik_java_Ïng_»æeù_M‘hod_g‘AÂÙ©iÚ
 },

241 
D®vik_java_Ïng_»æeù_M‘hod_isAÂÙ©iÚP»£Á
 },

243 
D®vik_java_Ïng_»æeù_M‘hod_g‘P¬am‘”AÂÙ©iÚs
 },

245 
D®vik_java_Ïng_»æeù_M‘hod_g‘DeçuÉV®ue
 },

247 
D®vik_java_Ïng_»æeù_M‘hod_g‘SigÇtu»AÂÙ©iÚ
 },

248 { 
NULL
, NULL, NULL },

	@vm/native/java_lang_reflect_Proxy.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_»æeù_Proxy_g’”©eProxy
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
SŒšgObjeù
* 
¡r
 = (SŒšgObjeù*è
¬gs
[0];

35 
A¼ayObjeù
* 
š‹rçûs
 = (A¼ayObjeù*è
¬gs
[1];

36 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[2];

37 
CÏssObjeù
* 
»suÉ
;

39 
»suÉ
 = 
	`dvmG’”©eProxyCÏss
(
¡r
, 
š‹rçûs
, 
lßd”
);

40 
	`RETURN_PTR
(
»suÉ
);

41 
	}
}

43 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_Proxy
[] = {

45 
D®vik_java_Ïng_»æeù_Proxy_g’”©eProxy
 },

46 { 
NULL
, NULL, NULL },

	@vm/native/java_util_concurrent_atomic_AtomicLong.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_java_ut_cÚcu¼’t_©omic_AtomicLÚg_VMSuµÜtsCS8
(

28 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

30 
	`UNUSED_PARAMETER
(
¬gs
);

31 
	`RETURN_BOOLEAN
(1);

32 
	}
}

34 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
[] = {

36 
D®vik_java_ut_cÚcu¼’t_©omic_AtomicLÚg_VMSuµÜtsCS8
 },

37 { 
NULL
, NULL, NULL },

	@vm/native/org_apache_harmony_dalvik_NativeTestTarget.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÁ”ÇlM‘hod
(

30 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`UNUSED_PARAMETER
(
¬gs
);

34 
	`RETURN_VOID
();

35 
	}
}

37 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
[] =

40 
D®vik_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÁ”ÇlM‘hod
 },

41 { 
NULL
, NULL, NULL },

	@vm/native/org_apache_harmony_dalvik_ddmc_DdmServer.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”_ÇtiveS’dChunk
(

31 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
ty³
 = 
¬gs
[0];

34 
A¼ayObjeù
* 
d©a
 = (A¼ayObjeù*è
¬gs
[1];

35 
off£t
 = 
¬gs
[2];

36 
Ëngth
 = 
¬gs
[3];

38 
	`as£¹
(
off£t
+
Ëngth
 <ğ()
d©a
->length);

40 
	`dvmDbgDdmS’dChunk
(
ty³
, 
Ëngth
, (cÚ¡ 
u1
*)
d©a
->
cÚ‹Ás
 + 
off£t
);

41 
	`RETURN_VOID
();

42 
	}
}

44 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
[] = {

46 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”_ÇtiveS’dChunk
 },

47 { 
NULL
, NULL, NULL },

	@vm/native/org_apache_harmony_dalvik_ddmc_DdmVmInternal.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_th»adNÙify
(

30 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
boŞ
 
’abË
 = (
¬gs
[0] != 0);

35 
	`dvmDdmS‘Th»adNÙifiÿtiÚ
(
’abË
);

36 
	`RETURN_VOID
();

37 
	}
}

44 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘Th»adSts
(

45 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

47 
	`UNUSED_PARAMETER
(
¬gs
);

49 
A¼ayObjeù
* 
»suÉ
 = 
	`dvmDdmG’”©eTh»adSts
();

50 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

51 
	`RETURN_PTR
(
»suÉ
);

52 
	}
}

59 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pInfoNÙify
(

60 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

62 
wh’
 = 
¬gs
[0];

63 
boŞ
 
»t
;

65 
»t
 = 
	`dvmDdmHªdËHpifChunk
(
wh’
);

66 
	`RETURN_BOOLEAN
(
»t
);

67 
	}
}

75 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pSegm’tNÙify
(

76 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

78 
wh’
 = 
¬gs
[0];

79 
wh©
 = 
¬gs
[1];

80 
boŞ
 
Çtive
 = (
¬gs
[2] != 0);

81 
boŞ
 
»t
;

83 
»t
 = 
	`dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, 
Çtive
);

84 
	`RETURN_BOOLEAN
(
»t
);

85 
	}
}

94 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘SckT¿ûById
(

95 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

97 
u4
 
th»adId
 = 
¬gs
[0];

98 
A¼ayObjeù
* 
Œaû
;

100 
Œaû
 = 
	`dvmDdmG‘SckT¿ûById
(
th»adId
);

101 
	`RETURN_PTR
(
Œaû
);

102 
	}
}

110 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_’abËReûÁAÎoÿtiÚs
(

111 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

113 
boŞ
 
’abË
 = (
¬gs
[0] != 0);

115 ià(
’abË
)

116 (è
	`dvmEÇbËAÎocT¿ck”
();

118 (è
	`dvmDi§bËAÎocT¿ck”
();

119 
	`RETURN_VOID
();

120 
	}
}

128 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚStus
(

129 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

131 
	`UNUSED_PARAMETER
(
¬gs
);

132 
	`RETURN_BOOLEAN
(
gDvm
.
®locRecÜds
 !ğ
NULL
);

133 
	}
}

141 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚs
(

142 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

144 
A¼ayObjeù
* 
d©a
;

146 
d©a
 = 
	`dvmDdmG‘ReûÁAÎoÿtiÚs
();

147 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
d©a
, 
NULL
);

148 
	`RETURN_PTR
(
d©a
);

149 
	}
}

151 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
[] = {

153 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_th»adNÙify
 },

155 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘Th»adSts
 },

157 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pInfoNÙify
 },

159 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pSegm’tNÙify
 },

161 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘SckT¿ûById
 },

163 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_’abËReûÁAÎoÿtiÚs
 },

165 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚStus
 },

167 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚs
 },

168 { 
NULL
, NULL, NULL },

	@vm/native/sun_misc_Unsafe.cpp

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_sun_misc_Un§ã_objeùF›ldOff£t0
(cÚ¡ 
u4
* 
¬gs
,

28 
JV®ue
* 
pResuÉ
)

30 
Objeù
* 
f›ldObjeù
 = (Objeù*è
¬gs
[0];

31 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
	`dvmG‘F›ldFromReæeùObj
(
f›ldObjeù
);

32 
s8
 
»suÉ
 = ((s8è
f›ld
->
by‹Off£t
);

34 
	`RETURN_LONG
(
»suÉ
);

35 
	}
}

40 
	$D®vik_sun_misc_Un§ã_¬¿yBa£Off£t0
(cÚ¡ 
u4
* 
¬gs
,

41 
JV®ue
* 
pResuÉ
)

44 
	`UNUSED_PARAMETER
(
¬gs
);

45 
	`RETURN_INT
(
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
));

46 
	}
}

51 
	$D®vik_sun_misc_Un§ã_¬¿yIndexSÿË0
(cÚ¡ 
u4
* 
¬gs
,

52 
JV®ue
* 
pResuÉ
)

54 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

55 
	`RETURN_INT
(
	`dvmA¼ayCÏssEËm’tWidth
(
şazz
));

56 
	}
}

62 
	$D®vik_sun_misc_Un§ã_com·»AndSw­IÁ
(cÚ¡ 
u4
* 
¬gs
,

63 
JV®ue
* 
pResuÉ
)

66 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

67 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

68 
s4
 
ex³ùedV®ue
 = 
¬gs
[4];

69 
s4
 
ÃwV®ue
 = 
¬gs
[5];

70 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

73 
»suÉ
 = 
	`ªdroid_©omic_»Ëa£_ÿs
(
ex³ùedV®ue
, 
ÃwV®ue
, 
add»ss
);

75 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

76 
	}
}

82 
	$D®vik_sun_misc_Un§ã_com·»AndSw­LÚg
(cÚ¡ 
u4
* 
¬gs
,

83 
JV®ue
* 
pResuÉ
)

86 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

87 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

88 
s8
 
ex³ùedV®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

89 
s8
 
ÃwV®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 6);

90 vŞ©
št64_t
* 
add»ss
 = (vŞ©št64_t*è(((
u1
*è
obj
è+ 
off£t
);

93 
»suÉ
 =

94 
	`dvmQuasiAtomicCas64
(
ex³ùedV®ue
, 
ÃwV®ue
, 
add»ss
);

96 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

97 
	}
}

103 
	$D®vik_sun_misc_Un§ã_com·»AndSw­Objeù
(cÚ¡ 
u4
* 
¬gs
,

104 
JV®ue
* 
pResuÉ
)

107 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

108 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

109 
Objeù
* 
ex³ùedV®ue
 = (Objeù*è
¬gs
[4];

110 
Objeù
* 
ÃwV®ue
 = (Objeù*è
¬gs
[5];

111 
št32_t
* 
add»ss
 = (št32_t*è(((
u1
*è
obj
è+ 
off£t
);

114 
»suÉ
 = 
	`ªdroid_©omic_»Ëa£_ÿs
((
št32_t
è
ex³ùedV®ue
,

115 (
št32_t
è
ÃwV®ue
, 
add»ss
);

116 
	`dvmWr™eB¬r›rF›ld
(
obj
, 
add»ss
);

117 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

118 
	}
}

123 
	$D®vik_sun_misc_Un§ã_g‘IÁVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

124 
JV®ue
* 
pResuÉ
)

127 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

128 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

129 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

131 
št32_t
 
v®ue
 = 
	`ªdroid_©omic_acquœe_lßd
(
add»ss
);

132 
	`RETURN_INT
(
v®ue
);

133 
	}
}

138 
	$D®vik_sun_misc_Un§ã_putIÁVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

139 
JV®ue
* 
pResuÉ
)

142 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

143 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

144 
s4
 
v®ue
 = (s4è
¬gs
[4];

145 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

147 
	`ªdroid_©omic_»Ëa£_¡Üe
(
v®ue
, 
add»ss
);

148 
	`RETURN_VOID
();

149 
	}
}

154 
	$D®vik_sun_misc_Un§ã_g‘LÚgVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

155 
JV®ue
* 
pResuÉ
)

158 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

159 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

160 vŞ©
št64_t
* 
add»ss
 = (vŞ©št64_t*è(((
u1
*è
obj
è+ 
off£t
);

162 
	`as£¹
((
off£t
 & 7) == 0);

163 
	`RETURN_LONG
(
	`dvmQuasiAtomicR—d64
(
add»ss
));

164 
	}
}

169 
	$D®vik_sun_misc_Un§ã_putLÚgVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

170 
JV®ue
* 
pResuÉ
)

173 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

174 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

175 
s8
 
v®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

176 vŞ©
št64_t
* 
add»ss
 = (vŞ©št64_t*è(((
u1
*è
obj
è+ 
off£t
);

178 
	`as£¹
((
off£t
 & 7) == 0);

179 
	`dvmQuasiAtomicSw­64
(
v®ue
, 
add»ss
);

180 
	`RETURN_VOID
();

181 
	}
}

186 
	$D®vik_sun_misc_Un§ã_g‘ObjeùVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

187 
JV®ue
* 
pResuÉ
)

190 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

191 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

192 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

194 
	`RETURN_PTR
((
Objeù
*è
	`ªdroid_©omic_acquœe_lßd
(
add»ss
));

195 
	}
}

201 
	$D®vik_sun_misc_Un§ã_putObjeùVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

202 
JV®ue
* 
pResuÉ
)

205 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

206 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

207 
Objeù
* 
v®ue
 = (Objeù*è
¬gs
[4];

208 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

210 
	`ªdroid_©omic_»Ëa£_¡Üe
((
št32_t
)
v®ue
, 
add»ss
);

211 
	`dvmWr™eB¬r›rF›ld
(
obj
, (*)
add»ss
);

212 
	`RETURN_VOID
();

213 
	}
}

218 
	$D®vik_sun_misc_Un§ã_g‘IÁ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

221 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

222 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

223 
s4
* 
add»ss
 = (s4*è(((
u1
*è
obj
è+ 
off£t
);

225 
	`RETURN_INT
(*
add»ss
);

226 
	}
}

231 
	$D®vik_sun_misc_Un§ã_putIÁ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

234 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

235 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

236 
s4
 
v®ue
 = (s4è
¬gs
[4];

237 
s4
* 
add»ss
 = (s4*è(((
u1
*è
obj
è+ 
off£t
);

239 *
add»ss
 = 
v®ue
;

240 
	`RETURN_VOID
();

241 
	}
}

246 
	$D®vik_sun_misc_Un§ã_putOrd”edIÁ
(cÚ¡ 
u4
* 
¬gs
,

247 
JV®ue
* 
pResuÉ
)

250 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

251 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

252 
s4
 
v®ue
 = (s4è
¬gs
[4];

253 
s4
* 
add»ss
 = (s4*è(((
u1
*è
obj
è+ 
off£t
);

255 
	`ANDROID_MEMBAR_STORE
();

256 *
add»ss
 = 
v®ue
;

257 
	`RETURN_VOID
();

258 
	}
}

263 
	$D®vik_sun_misc_Un§ã_g‘LÚg
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

266 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

267 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

268 
s8
* 
add»ss
 = (s8*è(((
u1
*è
obj
è+ 
off£t
);

270 
	`RETURN_LONG
(*
add»ss
);

271 
	}
}

276 
	$D®vik_sun_misc_Un§ã_putLÚg
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

279 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

280 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

281 
s8
 
v®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

282 
s8
* 
add»ss
 = (s8*è(((
u1
*è
obj
è+ 
off£t
);

284 *
add»ss
 = 
v®ue
;

285 
	`RETURN_VOID
();

286 
	}
}

291 
	$D®vik_sun_misc_Un§ã_putOrd”edLÚg
(cÚ¡ 
u4
* 
¬gs
,

292 
JV®ue
* 
pResuÉ
)

295 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

296 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

297 
s8
 
v®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

298 
s8
* 
add»ss
 = (s8*è(((
u1
*è
obj
è+ 
off£t
);

300 
	`ANDROID_MEMBAR_STORE
();

301 *
add»ss
 = 
v®ue
;

302 
	`RETURN_VOID
();

303 
	}
}

308 
	$D®vik_sun_misc_Un§ã_g‘Objeù
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

311 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

312 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

313 
Objeù
** 
add»ss
 = (Objeù**è(((
u1
*è
obj
è+ 
off£t
);

315 
	`RETURN_PTR
(*
add»ss
);

316 
	}
}

321 
	$D®vik_sun_misc_Un§ã_putObjeù
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

324 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

325 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

326 
Objeù
* 
v®ue
 = (Objeù*è
¬gs
[4];

327 
Objeù
** 
add»ss
 = (Objeù**è(((
u1
*è
obj
è+ 
off£t
);

329 *
add»ss
 = 
v®ue
;

330 
	`dvmWr™eB¬r›rF›ld
(
obj
, 
add»ss
);

331 
	`RETURN_VOID
();

332 
	}
}

338 
	$D®vik_sun_misc_Un§ã_putOrd”edObjeù
(cÚ¡ 
u4
* 
¬gs
,

339 
JV®ue
* 
pResuÉ
)

342 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

343 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

344 
Objeù
* 
v®ue
 = (Objeù*è
¬gs
[4];

345 
Objeù
** 
add»ss
 = (Objeù**è(((
u1
*è
obj
è+ 
off£t
);

347 
	`ANDROID_MEMBAR_STORE
();

348 *
add»ss
 = 
v®ue
;

349 
	`dvmWr™eB¬r›rF›ld
(
obj
, 
add»ss
);

350 
	`RETURN_VOID
();

351 
	}
}

353 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_sun_misc_Un§ã
[] = {

355 
D®vik_sun_misc_Un§ã_objeùF›ldOff£t0
 },

357 
D®vik_sun_misc_Un§ã_¬¿yBa£Off£t0
 },

359 
D®vik_sun_misc_Un§ã_¬¿yIndexSÿË0
 },

361 
D®vik_sun_misc_Un§ã_com·»AndSw­IÁ
 },

363 
D®vik_sun_misc_Un§ã_com·»AndSw­LÚg
 },

366 
D®vik_sun_misc_Un§ã_com·»AndSw­Objeù
 },

368 
D®vik_sun_misc_Un§ã_g‘IÁVŞ©e
 },

370 
D®vik_sun_misc_Un§ã_putIÁVŞ©e
 },

372 
D®vik_sun_misc_Un§ã_g‘LÚgVŞ©e
 },

374 
D®vik_sun_misc_Un§ã_putLÚgVŞ©e
 },

376 
D®vik_sun_misc_Un§ã_g‘ObjeùVŞ©e
 },

378 
D®vik_sun_misc_Un§ã_putObjeùVŞ©e
 },

380 
D®vik_sun_misc_Un§ã_g‘IÁ
 },

382 
D®vik_sun_misc_Un§ã_putIÁ
 },

384 
D®vik_sun_misc_Un§ã_putOrd”edIÁ
 },

386 
D®vik_sun_misc_Un§ã_g‘LÚg
 },

388 
D®vik_sun_misc_Un§ã_putLÚg
 },

390 
D®vik_sun_misc_Un§ã_putOrd”edLÚg
 },

392 
D®vik_sun_misc_Un§ã_g‘Objeù
 },

394 
D®vik_sun_misc_Un§ã_putObjeù
 },

396 
D®vik_sun_misc_Un§ã_putOrd”edObjeù
 },

397 { 
NULL
, NULL, NULL },

	@vm/oo/AccessCheck.cpp

19 
	~"D®vik.h
"

24 
	$¡rcmpCouÁ
(cÚ¡ * 
¡r1
, cÚ¡ * 
¡r2
)

26 
couÁ
 = 0;

28 
Œue
) {

29 
ch
 = 
¡r1
[
couÁ
];

30 ià(
ch
 =ğ'\0' || ch !ğ
¡r2
[
couÁ
])

31  
couÁ
;

32 
couÁ
++;

34 
	}
}

39 
boŞ
 
	$dvmInSamePackage
(cÚ¡ 
CÏssObjeù
* 
şass1
, cÚ¡ CÏssObjeù* 
şass2
)

42 ià(
şass1
 =ğ
şass2
)

43  
Œue
;

46 ià(
şass1
->
şassLßd”
 !ğ
şass2
->classLoader)

47  
çl£
;

55 ià(
	`dvmIsA¼ayCÏss
(
şass1
))

56 
şass1
 = cÏss1->
–em’tCÏss
;

57 ià(
	`dvmIsA¼ayCÏss
(
şass2
))

58 
şass2
 = cÏss2->
–em’tCÏss
;

61 ià(
şass1
 =ğ
şass2
)

62  
Œue
;

73 
commÚL’
;

75 
commÚL’
 = 
	`¡rcmpCouÁ
(
şass1
->
desütÜ
, 
şass2
->descriptor);

76 ià(
	`¡rchr
(
şass1
->
desütÜ
 + 
commÚL’
, '/'è!ğ
NULL
 ||

77 
	`¡rchr
(
şass2
->
desütÜ
 + 
commÚL’
, '/'è!ğ
NULL
)

79  
çl£
;

82  
Œue
;

83 
	}
}

88 
boŞ
 
	$checkAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

89 cÚ¡ 
CÏssObjeù
* 
acûssTo
, 
u4
 
acûssFÏgs
)

92 ià(
acûssFÏgs
 & 
ACC_PUBLIC
)

93  
Œue
;

96 ià(
acûssFrom
 =ğ
acûssTo
)

97  
Œue
;

100 ià(
acûssFÏgs
 & 
ACC_PRIVATE
)

101  
çl£
;

107 ià(
acûssFÏgs
 & 
ACC_PROTECTED
)

108 ià(
	`dvmIsSubCÏss
(
acûssFrom
, 
acûssTo
))

109  
Œue
;

115  
	`dvmInSamePackage
(
acûssFrom
, 
acûssTo
);

116 
	}
}

125 
boŞ
 
	$dvmCheckCÏssAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

126 cÚ¡ 
CÏssObjeù
* 
şazz
)

128 ià(
	`dvmIsPublicCÏss
(
şazz
))

129  
Œue
;

130  
	`dvmInSamePackage
(
acûssFrom
, 
şazz
);

131 
	}
}

136 
boŞ
 
	$dvmCheckM‘hodAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
M‘hod
* 
m‘hod
)

138  
	`checkAcûss
(
acûssFrom
, 
m‘hod
->
şazz
, m‘hod->
acûssFÏgs
);

139 
	}
}

144 
boŞ
 
	$dvmCheckF›ldAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
F›ld
* 
f›ld
)

149  
	`checkAcûss
(
acûssFrom
, 
f›ld
->
şazz
, f›ld->
acûssFÏgs
);

150 
	}
}

	@vm/oo/AccessCheck.h

19 #iâdeà
DALVIK_OO_ACCESSCHECK_H_


20 
	#DALVIK_OO_ACCESSCHECK_H_


	)

25 
boŞ
 
dvmCheckCÏssAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

26 cÚ¡ 
CÏssObjeù
* 
şazz
);

31 
boŞ
 
dvmCheckM‘hodAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
M‘hod
* 
m‘hod
);

36 
boŞ
 
dvmCheckF›ldAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
F›ld
* 
f›ld
);

41 
boŞ
 
dvmInSamePackage
(cÚ¡ 
CÏssObjeù
* 
şass1
, cÚ¡ CÏssObjeù* 
şass2
);

	@vm/oo/Array.cpp

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

22 
	~<¡ddef.h
>

23 
	~<lim™s.h
>

26 
size_t
 
	gkObjeùA¼ayRefWidth
 = (
Objeù
*);

28 
CÏssObjeù
* 
ü—‹A¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

38 
A¼ayObjeù
* 
	$®locA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
size_t
 
Ëngth
,

39 
size_t
 
–emWidth
, 
®locFÏgs
)

41 
	`as£¹
(
¬¿yCÏss
 !ğ
NULL
);

42 
	`as£¹
(
¬¿yCÏss
->
desütÜ
 !ğ
NULL
);

43 
	`as£¹
(
¬¿yCÏss
->
desütÜ
[0] == '[');

44 
	`as£¹
(
Ëngth
 <= 0x7fffffff);

45 
	`as£¹
(
–emWidth
 > 0);

46 
	`as£¹
(
–emWidth
 <= 8);

47 
	`as£¹
((
–emWidth
 & (elemWidth - 1)) == 0);

48 
size_t
 
–em’tShiá
 = (size_tè* 
CHAR_BIT
 - 1 - 
	`CLZ
(
–emWidth
);

49 
size_t
 
–em’tSize
 = 
Ëngth
 << 
–em’tShiá
;

50 
size_t
 
h—d”Size
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

51 
size_t
 
tÙ®Size
 = 
–em’tSize
 + 
h—d”Size
;

52 ià(
–em’tSize
 >> 
–em’tShiá
 !ğ
Ëngth
 || 
tÙ®Size
 <ƒlementSize) {

53 
¡d
::
¡ršg
 
	`desütÜ
(
	`dvmHumªR—dabËDesütÜ
(
¬¿yCÏss
->
desütÜ
));

54 
	`dvmThrowExû±iÚFmt
(
gDvm
.
exOutOfMemÜyE¼Ü
,

55 "% oàËngth %zdƒxûed thVM†im™", 
desütÜ
.
	`c_¡r
(), 
Ëngth
);

56  
NULL
;

58 
A¼ayObjeù
* 
ÃwA¼ay
 = (A¼ayObjeù*)
	`dvmM®loc
(
tÙ®Size
, 
®locFÏgs
);

59 ià(
ÃwA¼ay
 !ğ
NULL
) {

60 
	`DVM_OBJECT_INIT
(
ÃwA¼ay
, 
¬¿yCÏss
);

61 
ÃwA¼ay
->
Ëngth
 =†ength;

62 
	`dvmT¿ckAÎoÿtiÚ
(
¬¿yCÏss
, 
tÙ®Size
);

64  
ÃwA¼ay
;

65 
	}
}

71 
A¼ayObjeù
* 
	$dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

72 
size_t
 
Ëngth
, 
®locFÏgs
)

74 cÚ¡ * 
desütÜ
 = 
¬¿yCÏss
->descriptor;

76 
	`as£¹
(
desütÜ
[0] == '[');

77 ià(
desütÜ
[1] != '[' && descriptor[1] != 'L') {

79 
	`as£¹
(
desütÜ
[2] == '\0');

80  
	`dvmAÎocPrim™iveA¼ay
(
desütÜ
[1], 
Ëngth
, 
®locFÏgs
);

82  
	`®locA¼ay
(
¬¿yCÏss
, 
Ëngth
, 
kObjeùA¼ayRefWidth
,

83 
®locFÏgs
);

85 
	}
}

91 
CÏssObjeù
* 
	$dvmFšdA¼ayCÏssFÜEËm’t
(
CÏssObjeù
* 
–emCÏssObj
)

93 
CÏssObjeù
* 
¬¿yCÏss
;

95 
	`as£¹
(
–emCÏssObj
 !ğ
NULL
);

98 
ÇmeL’
 = 
	`¡¾’
(
–emCÏssObj
->
desütÜ
);

99 
şassName
[
ÇmeL’
 + 2];

101 
şassName
[0] = '[';

102 
	`memıy
(
şassName
+1, 
–emCÏssObj
->
desütÜ
, 
ÇmeL’
+1);

103 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏss
(
şassName
, 
–emCÏssObj
->
şassLßd”
);

105  
¬¿yCÏss
;

106 
	}
}

113 
A¼ayObjeù
* 
	$dvmAÎocPrim™iveA¼ay
(
ty³
, 
size_t
 
Ëngth
, 
®locFÏgs
)

115 
A¼ayObjeù
* 
ÃwA¼ay
;

116 
CÏssObjeù
* 
¬¿yCÏss
;

117 
width
;

119 
ty³
) {

121 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayIÁ
;

122 
width
 = 4;

125 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayCh¬
;

126 
width
 = 2;

129 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayBy‹
;

130 
width
 = 1;

133 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayBoŞ—n
;

134 
width
 = 1;

137 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayFlßt
;

138 
width
 = 4;

141 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayDoubË
;

142 
width
 = 8;

145 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayShÜt
;

146 
width
 = 2;

149 
¬¿yCÏss
 = 
gDvm
.
şassA¼ayLÚg
;

150 
width
 = 8;

153 
	`ALOGE
("UnknowÀ´im™ivty³ '%c'", 
ty³
);

154 
	`dvmAbÜt
();

155  
NULL
;

158 
ÃwA¼ay
 = 
	`®locA¼ay
(
¬¿yCÏss
, 
Ëngth
, 
width
, 
®locFÏgs
);

161  
ÃwA¼ay
;

162 
	}
}

171 
A¼ayObjeù
* 
	$dvmAÎocMuÉiA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
curDim
,

172 cÚ¡ * 
dim’siÚs
)

174 
A¼ayObjeù
* 
ÃwA¼ay
;

175 cÚ¡ * 
–emName
 = 
¬¿yCÏss
->
desütÜ
 + 1;

177 
	`LOGVV
("dvmAllocMultiArray: class='%s' curDim=%d *dimensions=%d",

178 
¬¿yCÏss
->
desütÜ
, 
curDim
, *
dim’siÚs
);

180 ià(
curDim
 == 0) {

181 ià(*
–emName
 == 'L' || *elemName == '[') {

182 
	`LOGVV
("ƒnd:‡rray class (obj) is '%s'",

183 
¬¿yCÏss
->
desütÜ
);

184 
ÃwA¼ay
 = 
	`®locA¼ay
(
¬¿yCÏss
, *
dim’siÚs
,

185 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

187 
	`LOGVV
("ƒnd:‡rray class (prim) is '%s'",

188 
¬¿yCÏss
->
desütÜ
);

189 
ÃwA¼ay
 = 
	`dvmAÎocPrim™iveA¼ay
(

190 
	`dexG‘Prim™iveTy³DesütÜCh¬
(
¬¿yCÏss
->
–em’tCÏss
->
´im™iveTy³
),

191 *
dim’siÚs
, 
ALLOC_DEFAULT
);

194 
CÏssObjeù
* 
subA¼ayCÏss
;

195 
i
;

198 
subA¼ayCÏss
 = 
	`dvmFšdA¼ayCÏss
(
–emName
, 
¬¿yCÏss
->
şassLßd”
);

199 ià(
subA¼ayCÏss
 =ğ
NULL
) {

201 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

202  
NULL
;

204 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
subA¼ayCÏss
));

207 
ÃwA¼ay
 = 
	`®locA¼ay
(
¬¿yCÏss
, *
dim’siÚs
, 
kObjeùA¼ayRefWidth
,

208 
ALLOC_DEFAULT
);

209 ià(
ÃwA¼ay
 =ğ
NULL
) {

210 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

211  
NULL
;

217 
i
 = 0; i < *
dim’siÚs
; i++) {

218 
A¼ayObjeù
* 
ÃwSubA¼ay
;

219 
ÃwSubA¼ay
 = 
	`dvmAÎocMuÉiA¼ay
(
subA¼ayCÏss
, 
curDim
-1,

220 
dim’siÚs
+1);

221 ià(
ÃwSubA¼ay
 =ğ
NULL
) {

222 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

223 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

224  
NULL
;

226 
	`dvmS‘ObjeùA¼ayEËm’t
(
ÃwA¼ay
, 
i
, (
Objeù
 *)
ÃwSubA¼ay
);

227 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwSubA¼ay
, 
NULL
);

232  
ÃwA¼ay
;

233 
	}
}

243 
CÏssObjeù
* 
	$dvmFšdA¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

245 
CÏssObjeù
* 
şazz
;

247 
	`as£¹
(
desütÜ
[0] == '[');

250 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

251 ià(
şazz
 =ğ
NULL
) {

252 
	`ALOGV
("A¼ay cÏs '%s' %°nÙ found; c»©šg", 
desütÜ
, 
lßd”
);

253 
şazz
 = 
	`ü—‹A¼ayCÏss
(
desütÜ
, 
lßd”
);

254 ià(
şazz
 !ğ
NULL
)

255 
	`dvmAddIn™ŸtšgLßd”
(
şazz
, 
lßd”
);

258  
şazz
;

259 
	}
}

275 
CÏssObjeù
* 
	$ü—‹A¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

277 
CÏssObjeù
* 
ÃwCÏss
 = 
NULL
;

278 
CÏssObjeù
* 
–em’tCÏss
 = 
NULL
;

279 
¬¿yDim
;

280 
u4
 
exŒaFÏgs
;

282 
	`as£¹
(
desütÜ
[0] == '[');

283 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

284 
	`as£¹
(
gDvm
.
şassJavaLªgObjeù
 !ğ
NULL
);

289 
exŒaFÏgs
 = 
CLASS_ISARRAY
;

290 ià(
desütÜ
[1] == '[') {

292 
CÏssObjeù
* 
ou‹r
;

294 
ou‹r
 = 
	`dvmFšdCÏssNoIn™
(&
desütÜ
[1], 
lßd”
);

295 ià(
ou‹r
 !ğ
NULL
) {

297 
–em’tCÏss
 = 
ou‹r
->elementClass;

298 
¬¿yDim
 = 
ou‹r
->arrayDim + 1;

299 
exŒaFÏgs
 |ğ
CLASS_ISOBJECTARRAY
;

301 
	`as£¹
(
–em’tCÏss
 =ğ
NULL
);

304 
¬¿yDim
 = 1;

305 ià(
desütÜ
[1] == 'L') {

307 cÚ¡ * 
subDesütÜ
 = &
desütÜ
[1];

308 
	`LOGVV
("£¬chšg fÜƒËm’ˆşas '%s'", 
subDesütÜ
);

309 
–em’tCÏss
 = 
	`dvmFšdCÏssNoIn™
(
subDesütÜ
, 
lßd”
);

310 
exŒaFÏgs
 |ğ
CLASS_ISOBJECTARRAY
;

313 
–em’tCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
desütÜ
[1]);

317 ià(
–em’tCÏss
 =ğ
NULL
) {

319 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

320 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

321 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

322  
NULL
;

343 ià(
lßd”
 !ğ
–em’tCÏss
->
şassLßd”
) {

344 
	`LOGVV
("--- checking for '%s' in %p vs.ƒlem %p",

345 
desütÜ
, 
lßd”
, 
–em’tCÏss
->
şassLßd”
);

346 
ÃwCÏss
 = 
	`dvmLookupCÏss
(
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
çl£
);

347 ià(
ÃwCÏss
 !ğ
NULL
) {

348 
	`ALOGV
("--- we‡lready have %s in %p, don't‚eed in %p",

349 
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
lßd”
);

350  
ÃwCÏss
;

365 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_NON_MOVING
);

366 ià(
ÃwCÏss
 =ğ
NULL
)

367  
NULL
;

368 
	`DVM_OBJECT_INIT
(
ÃwCÏss
, 
gDvm
.
şassJavaLªgCÏss
);

369 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

370 
ÃwCÏss
->
desütÜAÎoc
 = 
	`¡rdup
(
desütÜ
);

371 
ÃwCÏss
->
desütÜ
 =‚ewCÏss->
desütÜAÎoc
;

372 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

373 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
su³r
),

374 (
Objeù
 *)
gDvm
.
şassJavaLªgObjeù
);

375 
ÃwCÏss
->
vbËCouÁ
 = 
gDvm
.
şassJavaLªgObjeù
->vtableCount;

376 
ÃwCÏss
->
vbË
 = 
gDvm
.
şassJavaLªgObjeù
->vtable;

377 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

378 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

379 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
–em’tCÏss
),

380 (
Objeù
 *)
–em’tCÏss
);

381 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

382 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
şassLßd”
),

383 (
Objeù
 *)
–em’tCÏss
->
şassLßd”
);

384 
ÃwCÏss
->
¬¿yDim
 =‡rrayDim;

385 
ÃwCÏss
->
¡©us
 = 
CLASS_INITIALIZED
;

406 
ÃwCÏss
->
š‹rçûCouÁ
 = 2;

407 
ÃwCÏss
->
š‹rçûs
 = (
CÏssObjeù
**)
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

408 (
CÏssObjeù
*) * 2);

409 
	`mem£t
(
ÃwCÏss
->
š‹rçûs
, 0, (
CÏssObjeù
*) * 2);

410 
ÃwCÏss
->
š‹rçûs
[0] =

411 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Cloneable;");

412 
ÃwCÏss
->
š‹rçûs
[1] =

413 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/io/Serializable;");

414 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
š‹rçûs
);

415 ià(
ÃwCÏss
->
š‹rçûs
[0] =ğ
NULL
 ||‚ewClass->interfaces[1] == NULL) {

416 
	`ALOGE
("Unableo create‡rray class '%s': missing interfaces",

417 
desütÜ
);

418 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

419 
	`dvmThrowIÁ”ÇlE¼Ü
("missing‡rray ifaces");

420 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

421  
NULL
;

429 
ÃwCÏss
->
iáabËCouÁ
 = 2;

430 
ÃwCÏss
->
iáabË
 = (
IÁ”çûEÁry
*è
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

431 (
IÁ”çûEÁry
) * 2);

432 
	`mem£t
(
ÃwCÏss
->
iáabË
, 0, (
IÁ”çûEÁry
) * 2);

433 
ÃwCÏss
->
iáabË
[0].
şazz
 =‚ewCÏss->
š‹rçûs
[0];

434 
ÃwCÏss
->
iáabË
[1].
şazz
 =‚ewCÏss->
š‹rçûs
[1];

435 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
iáabË
);

446 
ÃwCÏss
->
acûssFÏgs
 = (ÒewCÏss->
–em’tCÏss
->accessFlags &

447 ~
ACC_INTERFACE
è| 
ACC_FINAL
è& 
JAVA_FLAGS_MASK
;

452 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
exŒaFÏgs
);

454 ià(!
	`dvmAddCÏssToHash
(
ÃwCÏss
)) {

466 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

470 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

474 
ÃwCÏss
 = 
	`dvmLookupCÏss
(
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
çl£
);

475 
	`as£¹
(
ÃwCÏss
 !ğ
NULL
);

476  
ÃwCÏss
;

478 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

480 
	`ALOGV
("Created‡rray class '%s' %p (access=0x%04x.%04x)",

481 
desütÜ
, 
ÃwCÏss
->
şassLßd”
,

482 
ÃwCÏss
->
acûssFÏgs
 >> 16,

483 
ÃwCÏss
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

485  
ÃwCÏss
;

486 
	}
}

492 
boŞ
 
	$dvmCİyObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

493 
CÏssObjeù
* 
d¡EËmCÏss
)

495 
Objeù
** 
¤c
 = (Objeù**)(*)
¤cA¼ay
->
cÚ‹Ás
;

496 
u4
 
Ëngth
, 
couÁ
;

498 
	`as£¹
(
¤cA¼ay
->
Ëngth
 =ğ
d¡A¼ay
->length);

499 
	`as£¹
(
d¡A¼ay
->
şazz
->
–em’tCÏss
 =ğ
d¡EËmCÏss
 ||

500 (
d¡A¼ay
->
şazz
->
–em’tCÏss
 =ğ
d¡EËmCÏss
->elementClass &&

501 
d¡A¼ay
->
şazz
->
¬¿yDim
 =ğ
d¡EËmCÏss
->arrayDim+1));

503 
Ëngth
 = 
d¡A¼ay
->length;

504 
couÁ
 = 0; couÁ < 
Ëngth
; count++) {

505 ià(!
	`dvmIn¡ªûof
(
¤c
[
couÁ
]->
şazz
, 
d¡EËmCÏss
)) {

506 
	`ALOGW
("dvmCopyObjectArray: can't store %s in %s",

507 
¤c
[
couÁ
]->
şazz
->
desütÜ
, 
d¡EËmCÏss
->descriptor);

508  
çl£
;

510 
	`dvmS‘ObjeùA¼ayEËm’t
(
d¡A¼ay
, 
couÁ
, 
¤c
[count]);

513  
Œue
;

514 
	}
}

521 
boŞ
 
	$dvmUnboxObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

522 
CÏssObjeù
* 
d¡EËmCÏss
)

524 
Objeù
** 
¤c
 = (Objeù**)(*)
¤cA¼ay
->
cÚ‹Ás
;

525 * 
d¡
 = (*)
d¡A¼ay
->
cÚ‹Ás
;

526 
u4
 
couÁ
 = 
d¡A¼ay
->
Ëngth
;

527 
Prim™iveTy³
 
ty³Index
 = 
d¡EËmCÏss
->
´im™iveTy³
;

529 
	`as£¹
(
ty³Index
 !ğ
PRIM_NOT
);

530 
	`as£¹
(
¤cA¼ay
->
Ëngth
 =ğ
d¡A¼ay
->length);

532 
couÁ
--) {

533 
JV®ue
 
»suÉ
;

541 ià(!
	`dvmUnboxPrim™ive
(*
¤c
, 
d¡EËmCÏss
, &
»suÉ
)) {

542 
	`ALOGW
("dvmCopyObjectArray: can't store %s in %s",

543 (*
¤c
)->
şazz
->
desütÜ
, 
d¡EËmCÏss
->descriptor);

544  
çl£
;

548 
ty³Index
) {

549 
PRIM_BOOLEAN
:

550 
PRIM_BYTE
:

552 
u1
* 
tmp
 = (u1*)
d¡
;

553 *
tmp
++ = 
»suÉ
.
b
;

554 
d¡
 = 
tmp
;

557 
PRIM_CHAR
:

558 
PRIM_SHORT
:

560 
u2
* 
tmp
 = (u2*)
d¡
;

561 *
tmp
++ = 
»suÉ
.
s
;

562 
d¡
 = 
tmp
;

565 
PRIM_FLOAT
:

566 
PRIM_INT
:

568 
u4
* 
tmp
 = (u4*)
d¡
;

569 *
tmp
++ = 
»suÉ
.
i
;

570 
d¡
 = 
tmp
;

573 
PRIM_DOUBLE
:

574 
PRIM_LONG
:

576 
u8
* 
tmp
 = (u8*)
d¡
;

577 *
tmp
++ = 
»suÉ
.
j
;

578 
d¡
 = 
tmp
;

583 
	`dvmAbÜt
();

586 
¤c
++;

589  
Œue
;

590 
	}
}

596 
size_t
 
	$dvmA¼ayCÏssEËm’tWidth
(cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
)

598 cÚ¡ *
desütÜ
;

600 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

602 ià(
	`dvmIsObjeùA¼ayCÏss
(
¬¿yCÏss
)) {

603  (
Objeù
 *);

605 
desütÜ
 = 
¬¿yCÏss
->descriptor;

606 
desütÜ
[1]) {

617 
	`ALOGE
("şas %°ha ª unhªdËd desütÜ '%s'", 
¬¿yCÏss
, 
desütÜ
);

618 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

619 
	`dvmAbÜt
();

621 
	}
}

623 
size_t
 
	$dvmA¼ayObjeùSize
(cÚ¡ 
A¼ayObjeù
 *
¬¿y
)

625 
	`as£¹
(
¬¿y
 !ğ
NULL
);

626 
size_t
 
size
 = 
	`OFFSETOF_MEMBER
(
A¼ayObjeù
, 
cÚ‹Ás
);

627 
size
 +ğ
¬¿y
->
Ëngth
 * 
	`dvmA¼ayCÏssEËm’tWidth
×¼ay->
şazz
);

628  
size
;

629 
	}
}

	@vm/oo/Array.h

19 #iâdeà
DALVIK_OO_ARRAY_H_


20 
	#DALVIK_OO_ARRAY_H_


	)

30 
CÏssObjeù
* 
dvmFšdA¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

36 
CÏssObjeù
* 
dvmFšdA¼ayCÏssFÜEËm’t
(CÏssObjeù* 
–emCÏssObj
);

44 "C" 
A¼ayObjeù
* 
dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

45 
size_t
 
Ëngth
, 
®locFÏgs
);

56 
A¼ayObjeù
* 
dvmAÎocPrim™iveA¼ay
(
ty³
, 
size_t
 
Ëngth
, 
®locFÏgs
);

66 
A¼ayObjeù
* 
dvmAÎocMuÉiA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
curDim
,

67 cÚ¡ * 
dim’siÚs
);

74 
INLINE
 
boŞ
 
	$dvmIsA¼ay
(cÚ¡ 
A¼ayObjeù
* 
¬¿yObj
)

76  ( ((
Objeù
*)
¬¿yObj
)->
şazz
->
desütÜ
[0] == '[' );

77 
	}
}

84 
INLINE
 
boŞ
 
	$dvmIsObjeùA¼ayCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

86 cÚ¡ * 
desütÜ
 = 
şazz
->descriptor;

87  
desütÜ
[0] == '[' && (descriptor[1] == 'L' ||

88 
desütÜ
[1] == '[');

89 
	}
}

96 
INLINE
 
boŞ
 
	$dvmIsObjeùA¼ay
(cÚ¡ 
A¼ayObjeù
* 
¬¿yObj
)

98  
	`dvmIsObjeùA¼ayCÏss
(
¬¿yObj
->
şazz
);

99 
	}
}

107 
INLINE
 
boŞ
 
	$dvmIsA¼ayCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

109  (
şazz
->
desütÜ
[0] == '[');

110 
	}
}

118 
boŞ
 
dvmCİyObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

119 
CÏssObjeù
* 
d¡EËmCÏss
);

126 
boŞ
 
dvmUnboxObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

127 
CÏssObjeù
* 
d¡EËmCÏss
);

132 
size_t
 
dvmA¼ayObjeùSize
(cÚ¡ 
A¼ayObjeù
 *
¬¿y
);

138 
size_t
 
dvmA¼ayCÏssEËm’tWidth
(cÚ¡ 
CÏssObjeù
* 
şazz
);

	@vm/oo/Class.cpp

22 
	#LOG_CLASS_LOADING
 0

	)

24 
	~"D®vik.h
"

25 
	~"libdex/DexCÏss.h
"

26 
	~"ª®ysis/O±imize.h
"

28 
	~<¡dlib.h
>

29 
	~<¡ddef.h
>

30 
	~<sys/¡©.h
>

32 #ià
LOG_CLASS_LOADING


33 
	~<uni¡d.h
>

34 
	~<±h»ad.h
>

35 
	~<cuts/´oûss_Çme.h
>

36 
	~<sys/ty³s.h
>

159 
	#INITIAL_CLASS_SERIAL_NUMBER
 0x50000000

	)

166 
	#ZYGOTE_CLASS_CUTOFF
 2304

	)

168 
	#CLASS_SFIELD_SLOTS
 1

	)

170 
CÏssP©hEÁry
* 
´oûssCÏssP©h
(cÚ¡ * 
·thSŒ
, 
boŞ
 
isBoÙ¡¿p
);

171 
ä“C³A¼ay
(
CÏssP©hEÁry
* 
ıe
);

173 
CÏssObjeù
* 
fšdCÏssFromLßd”NoIn™
(

174 cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

175 
CÏssObjeù
* 
fšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,\

176 
DvmDex
* 
pDvmDex
);

177 
CÏssObjeù
* 
lßdCÏssFromDex
(
DvmDex
* 
pDvmDex
,

178 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
Objeù
* 
lßd”
);

179 
lßdM‘hodFromDex
(
CÏssObjeù
* 
şazz
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
,\

180 
M‘hod
* 
m‘h
);

181 
compu‹JniArgInfo
(cÚ¡ 
DexPrÙo
* 
´Ùo
);

182 
lßdSF›ldFromDex
(
CÏssObjeù
* 
şazz
,

183 cÚ¡ 
DexF›ld
* 
pDexSF›ld
, 
SticF›ld
* 
sf›ld
);

184 
lßdIF›ldFromDex
(
CÏssObjeù
* 
şazz
,

185 cÚ¡ 
DexF›ld
* 
pDexIF›ld
, 
In¡F›ld
* 
f›ld
);

186 
boŞ
 
´eÿcheReã»nûOff£ts
(
CÏssObjeù
* 
şazz
);

187 
compu‹RefOff£ts
(
CÏssObjeù
* 
şazz
);

188 
ä“M‘hodIÂ¬ds
(
M‘hod
* 
m‘h
);

189 
boŞ
 
ü—‹VbË
(
CÏssObjeù
* 
şazz
);

190 
boŞ
 
ü—‹IáabË
(
CÏssObjeù
* 
şazz
);

191 
boŞ
 
š£¹M‘hodStubs
(
CÏssObjeù
* 
şazz
);

192 
boŞ
 
compu‹F›ldOff£ts
(
CÏssObjeù
* 
şazz
);

193 
throwE¬l›rCÏssFau»
(
CÏssObjeù
* 
şazz
);

195 #ià
LOG_CLASS_LOADING


203 
	$logCÏssLßdW™hTime
(
ty³
, 
CÏssObjeù
* 
şazz
, 
u8
 
time
) {

204 
pid_t
 
µid
 = 
	`g‘µid
();

205 
pid_t
 
pid
 = 
	`g‘pid
();

206 
tid
 = (è
	`±h»ad_£lf
();

208 
	`ALOG
(
LOG_INFO
, "PRELOAD", "%c%d:%d:%d:%s:%d:%s:%Îd", 
ty³
, 
µid
, 
pid
, 
tid
,

209 
	`g‘_´oûss_Çme
(), (è
şazz
->
şassLßd”
, cÏzz->
desütÜ
,

210 
time
);

211 
	}
}

216 
	$logCÏssLßd
(
ty³
, 
CÏssObjeù
* 
şazz
) {

217 
	`logCÏssLßdW™hTime
(
ty³
, 
şazz
, 
	`dvmG‘Th»adCpuTimeN£c
());

218 
	}
}

224 
	$lš—rAÎocTe¡s
()

226 * 
fiddË
;

227 
‹¡
 = 1;

229 
‹¡
) {

231 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 3200-28);

232 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

235 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 3200-24);

236 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

239 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 3200-20);

240 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

243 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 3200-16);

244 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

247 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 3200-12);

248 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

251 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 896);

252 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

253 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 20);

254 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

256 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 1);

257 
fiddË
[0] = 'q';

258 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

259 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 4096);

260 
fiddË
[0] = 'x';

261 
fiddË
[4095] = 'y';

262 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

263 
	`dvmLš—rF»e
(
NULL
, 
fiddË
);

264 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 0);

265 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

266 
fiddË
 = (*)
	`dvmLš—rR—Îoc
(
NULL
, fiddle, 12);

267 
fiddË
[11] = 'z';

268 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

269 
fiddË
 = (*)
	`dvmLš—rR—Îoc
(
NULL
, fiddle, 5);

270 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

271 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 17001);

272 
fiddË
[0] = 'x';

273 
fiddË
[17000] = 'y';

274 
	`dvmLš—rR—dOÆy
(
NULL
, (*)
fiddË
);

276 * 
¡r
 = (*)
	`dvmLš—rSŒdup
(
NULL
, "This is‡est!");

277 
	`ALOGI
("GOT: '%s'", 
¡r
);

280 
fiddË
 = (*)
	`dvmLš—rAÎoc
(
NULL
, 12);

281 
	`ALOGI
("Should b1: %d", 
	`dvmLš—rAÎocCÚšs
(
fiddË
, 12));

282 
	`ALOGI
("Should b0: %d", 
	`dvmLš—rAÎocCÚšs
(
fiddË
, 13));

283 
	`ALOGI
("Should b0: %d", 
	`dvmLš—rAÎocCÚšs
(
fiddË
 - 128*1024, 1));

285 
	`dvmLš—rAÎocDump
(
NULL
);

286 
	`dvmLš—rF»e
(
NULL
, (*)
¡r
);

287 
	}
}

289 
size_t
 
	$şassObjeùSize
(
size_t
 
sf›ldCouÁ
)

291 
size_t
 
off£t
 = 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
sf›lds
);

292  
off£t
 + (
SticF›ld
è* 
sf›ldCouÁ
;

293 
	}
}

295 
size_t
 
	$dvmCÏssObjeùSize
(cÚ¡ 
CÏssObjeù
 *
şazz
)

297 
	`as£¹
(
şazz
 !ğ
NULL
);

298  
	`şassObjeùSize
(
şazz
->
sf›ldCouÁ
);

299 
	}
}

302 
CÏssObjeù
* 
	$dvmFšdPrim™iveCÏss
(
ty³
)

304 
Prim™iveTy³
 
´im™iveTy³
 = 
	`dexG‘Prim™iveTy³FromDesütÜCh¬
(
ty³
);

306 
´im™iveTy³
) {

307 
PRIM_VOID
:  
gDvm
.
ty³Void
;

308 
PRIM_BOOLEAN
:  
gDvm
.
ty³BoŞ—n
;

309 
PRIM_BYTE
:  
gDvm
.
ty³By‹
;

310 
PRIM_SHORT
:  
gDvm
.
ty³ShÜt
;

311 
PRIM_CHAR
:  
gDvm
.
ty³Ch¬
;

312 
PRIM_INT
:  
gDvm
.
ty³IÁ
;

313 
PRIM_LONG
:  
gDvm
.
ty³LÚg
;

314 
PRIM_FLOAT
:  
gDvm
.
ty³Flßt
;

315 
PRIM_DOUBLE
:  
gDvm
.
ty³DoubË
;

317 
	`ALOGW
("UnknowÀ´im™ivty³ '%c'", 
ty³
);

318  
NULL
;

321 
	}
}

328 
boŞ
 
	$ü—‹Prim™iveTy³
(
Prim™iveTy³
 
´im™iveTy³
, 
CÏssObjeù
** 
pCÏss
)

338 cÚ¡ * 
desütÜ
 = 
	`dexG‘Prim™iveTy³DesütÜ
(
´im™iveTy³
);

339 
	`as£¹
(
desütÜ
 !ğ
NULL
);

341 
CÏssObjeù
* 
ÃwCÏss
 = (CÏssObjeù*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_NON_MOVING
);

342 ià(
ÃwCÏss
 =ğ
NULL
) {

343  
çl£
;

346 
	`DVM_OBJECT_INIT
(
ÃwCÏss
, 
gDvm
.
şassJavaLªgCÏss
);

347 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

348 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
ACC_PUBLIC
 | 
ACC_FINAL
 | 
ACC_ABSTRACT
);

349 
ÃwCÏss
->
´im™iveTy³
 =…rimitiveType;

350 
ÃwCÏss
->
desütÜAÎoc
 = 
NULL
;

351 
ÃwCÏss
->
desütÜ
 = descriptor;

352 
ÃwCÏss
->
su³r
 = 
NULL
;

353 
ÃwCÏss
->
¡©us
 = 
CLASS_INITIALIZED
;

357 
	`LOGVV
("CÚ¡ruùed cÏs fÜ…rim™ivty³ '%s'", 
ÃwCÏss
->
desütÜ
);

359 *
pCÏss
 = 
ÃwCÏss
;

360 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

362  
Œue
;

363 
	}
}

369 
boŞ
 
	$ü—‹In™ŸlCÏs£s
() {

370 
	`ALOG
(
LOG_INFO
, "OO_CLASS_CPP", "š %s", 
__FUNCTION__
);

375 
CÏssObjeù
* 
şazz
 = (ClassObject*)

376 
	`dvmM®loc
(
	`şassObjeùSize
(
CLASS_SFIELD_SLOTS
), 
ALLOC_NON_MOVING
);

377 ià(
şazz
 =ğ
NULL
) {

378  
çl£
;

380 
	`DVM_OBJECT_INIT
(
şazz
, clazz);

381 
	`SET_CLASS_FLAG
(
şazz
, 
ACC_PUBLIC
 | 
ACC_FINAL
 | 
CLASS_ISCLASS
);

382 
şazz
->
desütÜ
 = "Ljava/lang/Class;";

383 
gDvm
.
şassJavaLªgCÏss
 = 
şazz
;

384 
	`LOGVV
("Constructedhe class Class.");

391 
boŞ
 
ok
 = 
Œue
;

392 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_VOID
, &
gDvm
.
ty³Void
);

393 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_BOOLEAN
, &
gDvm
.
ty³BoŞ—n
);

394 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_BYTE
, &
gDvm
.
ty³By‹
);

395 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_SHORT
, &
gDvm
.
ty³ShÜt
);

396 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_CHAR
, &
gDvm
.
ty³Ch¬
);

397 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_INT
, &
gDvm
.
ty³IÁ
);

398 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_LONG
, &
gDvm
.
ty³LÚg
);

399 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_FLOAT
, &
gDvm
.
ty³Flßt
);

400 
ok
 &ğ
	`ü—‹Prim™iveTy³
(
PRIM_DOUBLE
, &
gDvm
.
ty³DoubË
);

402  
ok
;

403 
	}
}

410 
boŞ
 
	$dvmCÏssS¹up
()

412 
	`ALOG
(
LOG_INFO
, "OO_CLASS_CPP", "š % CLASS LOADING START", 
__FUNCTION__
);

414 ià(
	`¡rcmp
(
gDvm
.
boÙCÏssP©hSŒ
, ".") == 0) {

415 
	`ALOGE
("ERROR: must specify‚on-'.' bootclasspath");

416  
çl£
;

419 
gDvm
.
lßdedCÏs£s
 =

420 
	`dvmHashTabËC»©e
(256, (
HashF»eFunc
è
dvmF»eCÏssIÂ¬ds
);

422 
gDvm
.
pBoÙLßd”AÎoc
 = 
	`dvmLš—rAÎocC»©e
(
NULL
);

423 ià(
gDvm
.
pBoÙLßd”AÎoc
 =ğ
NULL
)

424  
çl£
;

426 ià(
çl£
) {

427 
	`lš—rAÎocTe¡s
();

428 
	`ex™
(0);

435 
gDvm
.
şassS”ŸlNumb”
 = 
INITIAL_CLASS_SERIAL_NUMBER
;

443 
gDvm
.
š™ŸtšgLßd”Li¡
 = (
In™ŸtšgLßd”Li¡
*)

444 
	`ÿÎoc
(
ZYGOTE_CLASS_CUTOFF
, (
In™ŸtšgLßd”Li¡
));

450 ià(!
	`ü—‹In™ŸlCÏs£s
()) {

451  
çl£
;

458 
	`as£¹
(
gDvm
.
boÙCÏssP©h
 =ğ
NULL
);

459 
	`´oûssCÏssP©h
(
gDvm
.
boÙCÏssP©hSŒ
, 
Œue
);

460 
	`ALOG
(
LOG_INFO
, "OO_CLASS_CPP", "IN %s, PROCESS CLASSPATH FINISH", 
__FUNCTION__
);

462 ià(
gDvm
.
boÙCÏssP©h
 =ğ
NULL
)

463  
çl£
;

465  
Œue
;

466 
	}
}

471 
	$dvmCÏssShutdown
()

474 
	`dvmHashTabËF»e
(
gDvm
.
lßdedCÏs£s
);

475 
gDvm
.
lßdedCÏs£s
 = 
NULL
;

478 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³Void
);

479 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³BoŞ—n
);

480 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³By‹
);

481 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³ShÜt
);

482 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³Ch¬
);

483 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³IÁ
);

484 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³LÚg
);

485 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³Flßt
);

486 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
ty³DoubË
);

489 
	`ä“C³A¼ay
(
gDvm
.
boÙCÏssP©h
);

490 
gDvm
.
boÙCÏssP©h
 = 
NULL
;

492 
	`dvmLš—rAÎocDe¡roy
(
NULL
);

494 
	`ä“
(
gDvm
.
š™ŸtšgLßd”Li¡
);

495 
	}
}

507 
	$dumpCÏssP©h
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

509 
idx
 = 0;

511 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

512 cÚ¡ * 
kšdSŒ
;

514 
ıe
->
kšd
) {

515 
kC³J¬
: 
kšdSŒ
 = "jar"; ;

516 
kC³Dex
: 
kšdSŒ
 = "dex"; ;

517 : 
kšdSŒ
 = "???"; ;

520 
	`ALOGI
(" %2d:y³=% % %p", 
idx
, 
kšdSŒ
, 
ıe
->
feName
, c³->
±r
);

521 ià(
CALC_CACHE_STATS
 && 
ıe
->
kšd
 =ğ
kC³J¬
) {

522 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

523 
DvmDex
* 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pJ¬Fe
);

524 
	`dvmDumpAtomicCacheSts
(
pDvmDex
->
pIÁ”çûCache
);

527 
ıe
++;

528 
idx
++;

530 
	}
}

535 
	$dvmDumpBoÙCÏssP©h
()

537 
	`dumpCÏssP©h
(
gDvm
.
boÙCÏssP©h
);

538 
	}
}

543 
boŞ
 
	$dvmCÏssP©hCÚšs
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
, cÚ¡ * 
·th
)

545 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

546 ià(
	`¡rcmp
(
ıe
->
feName
, 
·th
) == 0)

547  
Œue
;

549 
ıe
++;

551  
çl£
;

552 
	}
}

559 
	$ä“C³A¼ay
(
CÏssP©hEÁry
* 
ıe
)

561 
CÏssP©hEÁry
* 
ıeS¹
 = 
ıe
;

563 ià(
ıe
 =ğ
NULL
)

566 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

567 
ıe
->
kšd
) {

568 
kC³J¬
:

570 
	`dvmJ¬FeF»e
((
J¬Fe
*è
ıe
->
±r
);

572 
kC³Dex
:

574 
	`dvmRawDexFeF»e
((
RawDexFe
*è
ıe
->
±r
);

577 
	`as£¹
(
çl£
);

581 
	`ä“
(
ıe
->
feName
);

582 
ıe
++;

585 
	`ä“
(
ıeS¹
);

586 
	}
}

593 
	$g‘FeNameSuffix
(cÚ¡ * 
feName
, * 
suffixBuf
, 
size_t
 
suffixBufL’
)

595 cÚ¡ * 
Ï¡DÙ
 = 
	`¡¼chr
(
feName
, '.');

597 
	`¡¾ıy
(
suffixBuf
, (
Ï¡DÙ
 =ğ
NULL
è? "<nÚe>" : (Ï¡DÙ + 1), 
suffixBufL’
);

598 
	}
}

606 
boŞ
 
	$´•¬eC³
(
CÏssP©hEÁry
* 
ıe
, 
boŞ
 
isBoÙ¡¿p
)

608 
¡©
 
sb
;

610 ià(
	`¡©
(
ıe
->
feName
, &
sb
) < 0) {

611 
	`ALOGD
("UÇbËØ¡© cÏs¥©hƒËm’ˆ'%s'", 
ıe
->
feName
);

612  
çl£
;

614 ià(
	`S_ISDIR
(
sb
.
¡_mode
)) {

615 
	`ALOGE
("DœeùÜy cÏs¥©hƒËm’t ¬nÙ suµÜ‹d: %s", 
ıe
->
feName
);

616  
çl£
;

619 
suffix
[10];

620 
	`g‘FeNameSuffix
(
ıe
->
feName
, 
suffix
, (suffix));

622 ià((
	`¡rcmp
(
suffix
, "jar") == 0) || (strcmp(suffix, "zip") == 0) ||

623 (
	`¡rcmp
(
suffix
, "apk") == 0)) {

624 
J¬Fe
* 
pJ¬Fe
 = 
NULL
;

625 ià(
	`dvmJ¬FeO³n
(
ıe
->
feName
, 
NULL
, &
pJ¬Fe
, 
isBoÙ¡¿p
) == 0) {

626 
ıe
->
kšd
 = 
kC³J¬
;

627 
ıe
->
±r
 = 
pJ¬Fe
;

628  
Œue
;

630 } ià(
	`¡rcmp
(
suffix
, "dex") == 0) {

631 
RawDexFe
* 
pRawDexFe
 = 
NULL
;

632 ià(
	`dvmRawDexFeO³n
(
ıe
->
feName
, 
NULL
, &
pRawDexFe
, 
isBoÙ¡¿p
) == 0) {

633 
ıe
->
kšd
 = 
kC³Dex
;

634 
ıe
->
±r
 = 
pRawDexFe
;

635  
Œue
;

638 
	`ALOGE
("UnknowÀty³ suffix '%s'", 
suffix
);

641 
	`ALOGD
("UÇbËØ´oûs şas¥©hƒËm’ˆ'%s'", 
ıe
->
feName
);

642  
çl£
;

643 
	}
}

657 
CÏssP©hEÁry
* 
	$´oûssCÏssP©h
(cÚ¡ * 
·thSŒ
, 
boŞ
 
isBoÙ¡¿p
)

659 
CÏssP©hEÁry
* 
ıe
 = 
NULL
;

660 * 
mªgË
;

661 * 
ı
;

662 cÚ¡ * 
’d
;

663 
idx
, 
couÁ
;

665 
	`as£¹
(
·thSŒ
 !ğ
NULL
);

667 
mªgË
 = 
	`¡rdup
(
·thSŒ
);

676 
couÁ
 = 1;

677 
ı
 = 
mªgË
; *cp != '\0'; cp++) {

678 ià(*
ı
 == ':') {

679 
couÁ
++;

680 *
ı
 = '\0';

683 
’d
 = 
ı
;

688 
ıe
 = (
CÏssP©hEÁry
*è
	`ÿÎoc
(
couÁ
+1, (ClassPathEntry));

693 
gDvm
.
boÙCÏssP©h
 = 
ıe
;

698 
ı
 = 
mªgË
;

699 
idx
 = 0;

700 
ı
 < 
’d
) {

701 ià(*
ı
 == '\0') {

704 ià(
isBoÙ¡¿p
 &&

705 
	`dvmP©hToAbsŞu‹PÜtiÚ
(
ı
è=ğ
NULL
) {

706 
	`ALOGE
("NÚ-absŞu‹ boÙşas¥©hƒÁry '%s'", 
ı
);

707 
	`ä“
(
ıe
);

708 
ıe
 = 
NULL
;

709 
ba
;

712 
CÏssP©hEÁry
 
tmp
;

713 
tmp
.
kšd
 = 
kC³Unknown
;

714 
tmp
.
feName
 = 
	`¡rdup
(
ı
);

715 
tmp
.
±r
 = 
NULL
;

721 
ıe
[
idx
].
kšd
 = 
kC³La¡EÁry
;

722 
ıe
[
idx
].
feName
 = 
NULL
;

723 
ıe
[
idx
].
±r
 = 
NULL
;

725 ià(!
	`´•¬eC³
(&
tmp
, 
isBoÙ¡¿p
)) {

727 
	`ä“
(
tmp
.
feName
);

730 
ıe
[
idx
] = 
tmp
;

731 
idx
++;

735 
ı
 +ğ
	`¡¾’
(cp) +1;

737 
	`as£¹
(
idx
 <ğ
couÁ
);

738 ià(
idx
 =ğ0 && !
gDvm
.
İtimizšg
) {

743 
	`ALOGE
("NØv®idƒÁr› found iÀboÙşas¥©h '%s'", 
·thSŒ
);

744 
gDvm
.
Ï¡Mes§ge
 = 
·thSŒ
;

745 
	`dvmAbÜt
();

748 
	`LOGVV
(" (fËd %d oà%d slÙs)", 
idx
, 
couÁ
);

751 
ıe
[
idx
].
kšd
 = 
kC³La¡EÁry
;

752 
ıe
[
idx
].
feName
 = 
NULL
;

753 
ıe
[
idx
].
±r
 = 
NULL
;

757 
ba
:

758 
	`ä“
(
mªgË
);

759 
gDvm
.
boÙCÏssP©h
 = 
ıe
;

761  
ıe
;

762 
	}
}

771 
DvmDex
* 
	$£¬chBoÙP©hFÜCÏss
(cÚ¡ * 
desütÜ
,

772 cÚ¡ 
DexCÏssDef
** 
µCÏssDef
)

774 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

775 cÚ¡ 
DexCÏssDef
* 
pFoundDef
 = 
NULL
;

776 
DvmDex
* 
pFoundFe
 = 
NULL
;

778 
	`LOGVV
("+++ class '%s'‚ot yet†oaded, scanning bootclasspath...",

779 
desütÜ
);

781 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

784 
ıe
->
kšd
) {

785 
kC³J¬
:

787 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

788 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

789 
DvmDex
* 
pDvmDex
;

791 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pJ¬Fe
);

792 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

793 ià(
pCÏssDef
 !ğ
NULL
) {

795 
pFoundDef
 = 
pCÏssDef
;

796 
pFoundFe
 = 
pDvmDex
;

797 
found
;

801 
kC³Dex
:

803 
RawDexFe
* 
pRawDexFe
 = (RawDexFe*è
ıe
->
±r
;

804 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

805 
DvmDex
* 
pDvmDex
;

807 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pRawDexFe
);

808 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

809 ià(
pCÏssDef
 !ğ
NULL
) {

811 
pFoundDef
 = 
pCÏssDef
;

812 
pFoundFe
 = 
pDvmDex
;

813 
found
;

818 
	`ALOGE
("UnknowÀkšd %d", 
ıe
->
kšd
);

819 
	`as£¹
(
çl£
);

823 
ıe
++;

835 ià(
gDvm
.
boÙCÏssP©hO±ExŒa
 !ğ
NULL
) {

836 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

838 
pCÏssDef
 =

839 
	`dexFšdCÏss
(
gDvm
.
boÙCÏssP©hO±ExŒa
->
pDexFe
, 
desütÜ
);

840 ià(
pCÏssDef
 !ğ
NULL
) {

842 
pFoundDef
 = 
pCÏssDef
;

843 
pFoundFe
 = 
gDvm
.
boÙCÏssP©hO±ExŒa
;

847 
found
:

848 *
µCÏssDef
 = 
pFoundDef
;

849  
pFoundFe
;

850 
	}
}

856 
	$dvmS‘BoÙP©hExŒaDex
(
DvmDex
* 
pDvmDex
)

858 
gDvm
.
boÙCÏssP©hO±ExŒa
 = 
pDvmDex
;

859 
	}
}

867 
	$dvmG‘BoÙP©hSize
()

869 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

871 
ıe
->
kšd
 !ğ
kC³La¡EÁry
)

872 
ıe
++;

874  
ıe
 - 
gDvm
.
boÙCÏssP©h
;

875 
	}
}

888 
SŒšgObjeù
* 
	$dvmG‘BoÙP©hResourû
(cÚ¡ * 
Çme
, 
idx
)

890 cÚ¡ 
kU¾Ov”h—d
 = 13;

891 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

892 
SŒšgObjeù
* 
u¾Obj
 = 
NULL
;

894 
	`ALOGV
("+++ searching for„esource '%s' in %d(%s)",

895 
Çme
, 
idx
, 
ıe
[idx].
feName
);

898 
idx
-- && 
ıe
->
kšd
 !ğ
kC³La¡EÁry
)

899 
ıe
++;

900 ià(
ıe
->
kšd
 =ğ
kC³La¡EÁry
) {

901 
	`as£¹
(
çl£
);

902  
NULL
;

905 
u¾Buf
[
	`¡¾’
(
Çme
è+ sŒËn(
ıe
->
feName
è+ 
kU¾Ov”h—d
 +1];

907 
ıe
->
kšd
) {

908 
kC³J¬
:

910 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

911 ià(
	`dexZFšdEÁry
(&
pJ¬Fe
->
¬chive
, 
Çme
è=ğ
NULL
)

912 
ba
;

913 
	`¥rštf
(
u¾Buf
, "j¬:fe://%s!/%s", 
ıe
->
feName
, 
Çme
);

916 
kC³Dex
:

917 
	`ALOGV
("No„esources in DEX files");

918 
ba
;

920 
	`as£¹
(
çl£
);

921 
ba
;

924 
	`ALOGV
("+++ usšg URL='%s'", 
u¾Buf
);

925 
u¾Obj
 = 
	`dvmC»©eSŒšgFromC¡r
(
u¾Buf
);

927 
ba
:

928  
u¾Obj
;

929 
	}
}

939 
	sCÏssM©chCr™”Ÿ
 {

940 cÚ¡ * 
	mdesütÜ
;

941 
Objeù
* 
	mlßd”
;

944 
	#kIn™Lßd”Inc
 4

	)

946 
In™ŸtšgLßd”Li¡
 *
	$dvmG‘In™ŸtšgLßd”Li¡
(
CÏssObjeù
* 
şazz
)

948 
	`as£¹
(
şazz
->
£rŸlNumb”
 >ğ
INITIAL_CLASS_SERIAL_NUMBER
);

949 
şassIndex
 = 
şazz
->
£rŸlNumb”
-
INITIAL_CLASS_SERIAL_NUMBER
;

950 ià(
gDvm
.
š™ŸtšgLßd”Li¡
 !ğ
NULL
 &&

951 
şassIndex
 < 
ZYGOTE_CLASS_CUTOFF
) {

952  &(
gDvm
.
š™ŸtšgLßd”Li¡
[
şassIndex
]);

954  &(
şazz
->
š™ŸtšgLßd”Li¡
);

956 
	}
}

968 
boŞ
 
	$dvmLßd”InIn™ŸtšgLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
Objeù
* 
lßd”
)

975 ià(
lßd”
 =ğ
NULL
)

976  
çl£
;

982 
CÏssObjeù
* 
nÚCÚ¡CÏzz
 = (CÏssObjeù*è
şazz
;

983 cÚ¡ 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 =

984 
	`dvmG‘In™ŸtšgLßd”Li¡
(
nÚCÚ¡CÏzz
);

985 
i
;

986 
i
 = 
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
-1; i >= 0; --i) {

987 ià(
lßd”Li¡
->
š™ŸtšgLßd”s
[
i
] =ğ
lßd”
) {

990  
Œue
;

993  
çl£
;

994 
	}
}

1006 
	$dvmAddIn™ŸtšgLßd”
(
CÏssObjeù
* 
şazz
, 
Objeù
* 
lßd”
)

1008 ià(
lßd”
 !ğ
şazz
->
şassLßd”
) {

1009 
	`as£¹
(
lßd”
 !ğ
NULL
);

1011 
	`LOGVV
("Addšg %°tØ'%s' in™†i¡", 
lßd”
, 
şazz
->
desütÜ
);

1012 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1032 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 = 
	`dvmG‘In™ŸtšgLßd”Li¡
(
şazz
);

1033 ià((
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 & (
kIn™Lßd”Inc
-1)) == 0) {

1034 
Objeù
** 
ÃwLi¡
;

1036 
ÃwLi¡
 = (
Objeù
**è
	`»®loc
(
lßd”Li¡
->
š™ŸtšgLßd”s
,

1037 (
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 + 
kIn™Lßd”Inc
)

1038 * (
Objeù
*));

1039 ià(
ÃwLi¡
 =ğ
NULL
) {

1041 
	`as£¹
(
çl£
);

1042 
ba_uÆock
;

1044 
lßd”Li¡
->
š™ŸtšgLßd”s
 = 
ÃwLi¡
;

1050 
lßd”Li¡
->
š™ŸtšgLßd”s
[lßd”Li¡->
š™ŸtšgLßd”CouÁ
++] =

1051 
lßd”
;

1053 
ba_uÆock
:

1054 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1056 
	}
}

1072 
	$hashcmpCÏssByCr™
(cÚ¡ * 
vşazz
, cÚ¡ * 
vü™
)

1074 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

1075 cÚ¡ 
CÏssM©chCr™”Ÿ
* 
pCr™
 = (cÚ¡ CÏssM©chCr™”Ÿ*è
vü™
;

1076 
boŞ
 
m©ch
;

1078 
m©ch
 = (
	`¡rcmp
(
şazz
->
desütÜ
, 
pCr™
->descriptor) == 0 &&

1079 (
şazz
->
şassLßd”
 =ğ
pCr™
->
lßd”
 ||

1080 (
pCr™
->
lßd”
 !ğ
NULL
 &&

1081 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
pCr™
->
lßd”
)) ));

1086  !
m©ch
;

1087 
	}
}

1093 
	$hashcmpCÏssByCÏss
(cÚ¡ * 
vşazz
, cÚ¡ * 
vaddşazz
)

1095 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

1096 cÚ¡ 
CÏssObjeù
* 
addCÏzz
 = (cÚ¡ CÏssObjeù*è
vaddşazz
;

1097 
boŞ
 
m©ch
;

1099 
m©ch
 = (
	`¡rcmp
(
şazz
->
desütÜ
, 
addCÏzz
->descriptor) == 0 &&

1100 (
şazz
->
şassLßd”
 =ğ
addCÏzz
->classLoader ||

1101 (
addCÏzz
->
şassLßd”
 !ğ
NULL
 &&

1102 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
addCÏzz
->
şassLßd”
)) ));

1103  !
m©ch
;

1104 
	}
}

1125 
CÏssObjeù
* 
	$dvmLookupCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

1126 
boŞ
 
uÅ»pOkay
)

1129 
CÏssM©chCr™”Ÿ
 
ü™
;

1130 * 
found
;

1131 
u4
 
hash
;

1133 
ü™
.
desütÜ
 = descriptor;

1134 
ü™
.
lßd”
 =†oader;

1135 
hash
 = 
	`dvmCompu‹Utf8Hash
(
desütÜ
);

1137 
	`LOGVV
("threadid=%d: dvmLookupClass searching for '%s' %p",

1138 
	`dvmTh»adS–f
()->
th»adId
, 
desütÜ
, 
lßd”
);

1140 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1141 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
lßdedCÏs£s
, 
hash
, &
ü™
,

1142 
hashcmpCÏssByCr™
, 
çl£
);

1143 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1153 ià(
found
 && !
uÅ»pOkay
 && !
	`dvmIsCÏssLšked
((
CÏssObjeù
*)found)) {

1154 
	`ALOGV
("Ignoring‚ot-yet-ready %s, using slow…ath",

1155 ((
CÏssObjeù
*)
found
)->
desütÜ
);

1156 
found
 = 
NULL
;

1159  (
CÏssObjeù
*è
found
;

1160 
	}
}

1174 
boŞ
 
	$dvmAddCÏssToHash
(
CÏssObjeù
* 
şazz
)

1176 * 
found
;

1177 
u4
 
hash
;

1179 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şazz
->
desütÜ
);

1181 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1182 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
lßdedCÏs£s
, 
hash
, 
şazz
,

1183 
hashcmpCÏssByCÏss
, 
Œue
);

1184 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1186 
	`ALOGV
("+++ dvmAddClassToHash '%s' %p (isnew=%d) --> %p",

1187 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

1188 (
found
 =ğ(*è
şazz
), clazz);

1193  (
found
 =ğ(*è
şazz
);

1194 
	}
}

1200 
u4
 
	$hashÿlcCÏss
(cÚ¡ * 
™em
)

1202  
	`dvmCompu‹Utf8Hash
(((cÚ¡ 
CÏssObjeù
*è
™em
)->
desütÜ
);

1203 
	}
}

1208 
	$dvmCheckCÏssTabËP”f
()

1210 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1211 
	`dvmHashTabËProbeCouÁ
(
gDvm
.
lßdedCÏs£s
, 
hashÿlcCÏss
,

1212 
hashcmpCÏssByCÏss
);

1213 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1214 
	}
}

1220 
	$»moveCÏssFromHash
(
CÏssObjeù
* 
şazz
)

1222 
	`ALOGV
("+++„emoveCÏssFromHash '%s'", 
şazz
->
desütÜ
);

1224 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şazz
->
desütÜ
);

1226 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1227 ià(!
	`dvmHashTabËRemove
(
gDvm
.
lßdedCÏs£s
, 
hash
, 
şazz
))

1228 
	`ALOGW
("HashabË„emovçed oÀşas '%s'", 
şazz
->
desütÜ
);

1229 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1230 
	}
}

1245 
	$dvmS‘CÏssS”ŸlNumb”
(
CÏssObjeù
* 
şazz
)

1247 
	`as£¹
(
şazz
->
£rŸlNumb”
 == 0);

1248 
şazz
->
£rŸlNumb”
 = 
	`ªdroid_©omic_šc
(&
gDvm
.
şassS”ŸlNumb”
);

1249 
	}
}

1262 
CÏssObjeù
* 
	$dvmFšdCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

1265 
CÏssObjeù
* 
şazz
;

1267 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

1268 ià(
şazz
 !ğ
NULL
 && cÏzz->
¡©us
 < 
CLASS_INITIALIZED
) {

1270 ià(!
	`dvmIn™CÏss
(
şazz
)) {

1272 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1273 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

1274  
NULL
;

1277 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

1278 if(
gDvm
.
şassIn™Hook
)

1279 
gDvm
.
	`şassIn™Hook
(
şazz
);

1280 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

1282  
şazz
;

1283 
	}
}

1295 
CÏssObjeù
* 
	$dvmFšdCÏssNoIn™
(cÚ¡ * 
desütÜ
,

1296 
Objeù
* 
lßd”
)

1298 
	`as£¹
(
desütÜ
 !ğ
NULL
);

1301 
	`LOGVV
("FšdCÏssNoIn™ '%s' %p", 
desütÜ
, 
lßd”
);

1303 ià(*
desütÜ
 == '[') {

1307  
	`dvmFšdA¼ayCÏss
(
desütÜ
, 
lßd”
);

1312 ià(
lßd”
 !ğ
NULL
) {

1313  
	`fšdCÏssFromLßd”NoIn™
(
desütÜ
, 
lßd”
);

1315  
	`dvmFšdSy¡emCÏssNoIn™
(
desütÜ
);

1318 
	}
}

1326 
CÏssObjeù
* 
	$fšdCÏssFromLßd”NoIn™
(cÚ¡ * 
desütÜ
,

1327 
Objeù
* 
lßd”
)

1333 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1335 
	`as£¹
(
lßd”
 !ğ
NULL
);

1347 
CÏssObjeù
* 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

1348 ià(
şazz
 !ğ
NULL
) {

1349 
	`LOGVV
("AÌ—dy†ßded: % %p", 
desütÜ
, 
lßd”
);

1350  
şazz
;

1352 
	`LOGVV
("NÙ‡Ì—dy†ßded: % %p", 
desütÜ
, 
lßd”
);

1355 * 
dÙName
 = 
NULL
;

1356 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

1359 
dÙName
 = 
	`dvmDesütÜToDÙ
(
desütÜ
);

1360 ià(
dÙName
 =ğ
NULL
) {

1361 
	`dvmThrowOutOfMemÜyE¼Ü
(
NULL
);

1362  
NULL
;

1364 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
);

1365 ià(
ÇmeObj
 =ğ
NULL
) {

1366 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1367 
ba
;

1370 
	`dvmM‘hodT¿ûCÏssP»pBegš
();

1378 
	`LOGVV
("--- Invokšg†ßdCÏss(%s, %p)", 
dÙName
, 
lßd”
);

1380 cÚ¡ 
M‘hod
* 
lßdCÏss
 =

1381 
lßd”
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgCÏssLßd”_lßdCÏss
];

1382 
JV®ue
 
»suÉ
;

1383 
	`dvmC®lM‘hod
(
£lf
, 
lßdCÏss
, 
lßd”
, &
»suÉ
, 
ÇmeObj
);

1384 
şazz
 = (
CÏssObjeù
*è
»suÉ
.
l
;

1386 
	`dvmM‘hodT¿ûCÏssP»pEnd
();

1387 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1388 ià(
exûp
 !ğ
NULL
) {

1389 #ià
DVM_SHOW_EXCEPTION
 >= 2

1390 
	`ALOGD
("NOTE:†oadClass '%s' %phrewƒxception %s",

1391 
dÙName
, 
lßd”
, 
exûp
->
şazz
->
desütÜ
);

1393 
	`dvmAddT¿ckedAÎoc
(
exûp
, 
£lf
);

1394 
	`dvmCË¬Exû±iÚ
(
£lf
);

1395 
	`dvmThrowChašedNoCÏssDefFoundE¼Ü
(
desütÜ
, 
exûp
);

1396 
	`dvmR–—£T¿ckedAÎoc
(
exûp
, 
£lf
);

1397 
şazz
 = 
NULL
;

1398 
ba
;

1399 } ià(
şazz
 =ğ
NULL
) {

1400 
	`ALOGW
("ClassLoader„eturned NULL w/oƒxception…ending");

1401 
	`dvmThrowNuÎPoš‹rExû±iÚ
("ClassLoader„eturned‚ull");

1402 
ba
;

1408 
	`dvmAddIn™ŸtšgLßd”
(
şazz
, 
lßd”
);

1410 
	`LOGVV
("--- Successfully†oaded %s %p (thisldr=%p clazz=%p)",

1411 
desütÜ
, 
şazz
->
şassLßd”
, 
lßd”
, clazz);

1413 
ba
:

1414 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÇmeObj
, 
NULL
);

1415 
	`ä“
(
dÙName
);

1416  
şazz
;

1417 
	}
}

1424 
CÏssObjeù
* 
	$dvmDefšeCÏss
(
DvmDex
* 
pDvmDex
, cÚ¡ * 
desütÜ
,

1425 
Objeù
* 
şassLßd”
)

1427 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

1429  
	`fšdCÏssNoIn™
(
desütÜ
, 
şassLßd”
, 
pDvmDex
);

1430 
	}
}

1441 
CÏssObjeù
* 
	$dvmFšdSy¡emCÏss
(cÚ¡ * 
desütÜ
)

1443 
CÏssObjeù
* 
şazz
;

1445 
şazz
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
desütÜ
);

1446 ià(
şazz
 !ğ
NULL
 && cÏzz->
¡©us
 < 
CLASS_INITIALIZED
) {

1448 ià(!
	`dvmIn™CÏss
(
şazz
)) {

1450 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1451 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

1452  
NULL
;

1456  
şazz
;

1457 
	}
}

1465 
CÏssObjeù
* 
	$dvmFšdSy¡emCÏssNoIn™
(cÚ¡ * 
desütÜ
)

1467  
	`fšdCÏssNoIn™
(
desütÜ
, 
NULL
, NULL);

1468 
	}
}

1484 
CÏssObjeù
* 
	$fšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

1485 
DvmDex
* 
pDvmDex
)

1487 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1488 
CÏssObjeù
* 
şazz
;

1489 
boŞ
 
´of”NÙif›d
 = 
çl£
;

1491 ià(
lßd”
 !ğ
NULL
) {

1492 
	`LOGVV
("#### fšdCÏssNoIn™(%s,%p,%p)", 
desütÜ
, 
lßd”
,

1493 
pDvmDex
->
pDexFe
);

1508 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1509 
	`ALOGE
("CÏs looku°% ©‹m±ed w™hƒxû±iÚ…’dšg", 
desütÜ
);

1510 
	`ALOGW
("Pendingƒxception is:");

1511 
	`dvmLogExû±iÚSckT¿û
();

1512 
	`dvmDumpAÎTh»ads
(
çl£
);

1513 
	`dvmAbÜt
();

1516 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
Œue
);

1517 ià(
şazz
 =ğ
NULL
) {

1518 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1520 
	`dvmM‘hodT¿ûCÏssP»pBegš
();

1521 
´of”NÙif›d
 = 
Œue
;

1523 #ià
LOG_CLASS_LOADING


1524 
u8
 
¡¬tTime
 = 
	`dvmG‘Th»adCpuTimeN£c
();

1527 ià(
pDvmDex
 =ğ
NULL
) {

1528 
	`as£¹
(
lßd”
 =ğ
NULL
);

1529 
pDvmDex
 = 
	`£¬chBoÙP©hFÜCÏss
(
desütÜ
, &
pCÏssDef
);

1531 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

1534 ià(
pDvmDex
 =ğ
NULL
 || 
pCÏssDef
 == NULL) {

1535 ià(
gDvm
.
noCÏssDefFoundE¼ÜObj
 !ğ
NULL
) {

1537 
	`dvmS‘Exû±iÚ
(
£lf
, 
gDvm
.
noCÏssDefFoundE¼ÜObj
);

1540 
	`dvmThrowNoCÏssDefFoundE¼Ü
(
desütÜ
);

1542 
ba
;

1546 
şazz
 = 
	`lßdCÏssFromDex
(
pDvmDex
, 
pCÏssDef
, 
lßd”
);

1547 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1549 ià(
şazz
 !ğ
NULL
) {

1550 
	`dvmF»eCÏssIÂ¬ds
(
şazz
);

1551 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1553 
ba
;

1562 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1563 
şazz
->
š™Th»adId
 = 
£lf
->
th»adId
;

1570 
	`as£¹
(
şazz
->
şassLßd”
 =ğ
lßd”
);

1571 ià(!
	`dvmAddCÏssToHash
(
şazz
)) {

1580 
şazz
->
š™Th»adId
 = 0;

1581 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1585 
	`dvmF»eCÏssIÂ¬ds
(
şazz
);

1586 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1590 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
Œue
);

1591 
	`as£¹
(
şazz
 !ğ
NULL
);

1592 
gÙ_şass
;

1594 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1596 #ià
LOG_CLASS_LOADING


1597 
	`logCÏssLßdW™hTime
('>', 
şazz
, 
¡¬tTime
);

1602 ià(!
	`dvmLškCÏss
(
şazz
)) {

1603 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1607 
	`»moveCÏssFromHash
(
şazz
);

1608 
şazz
->
¡©us
 = 
CLASS_ERROR
;

1609 
	`dvmF»eCÏssIÂ¬ds
(
şazz
);

1613 
şazz
->
š™Th»adId
 = 0;

1614 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

1615 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1617 #ià
LOG_CLASS_LOADING


1618 
	`ALOG
(
LOG_INFO
, "DVMLINK FAILED FOR CLASS ", "%s in %s",

1619 
şazz
->
desütÜ
, 
	`g‘_´oûss_Çme
());

1626 
	`logCÏssLßd
('<', 
şazz
);

1628 
şazz
 = 
NULL
;

1629 ià(
gDvm
.
İtimizšg
) {

1631 
	`ALOGV
("Lšk oàşas '%s' faed", 
desütÜ
);

1633 
	`ALOGW
("Lšk oàşas '%s' faed", 
desütÜ
);

1635 
ba
;

1637 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

1638 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1645 
gDvm
.
numLßdedCÏs£s
++;

1646 
gDvm
.
numDeş¬edM‘hods
 +=

1647 
şazz
->
vœtu®M‘hodCouÁ
 + cÏzz->
dœeùM‘hodCouÁ
;

1648 
gDvm
.
numDeş¬edIn¡F›lds
 +ğ
şazz
->
if›ldCouÁ
;

1649 
gDvm
.
numDeş¬edSticF›lds
 +ğ
şazz
->
sf›ldCouÁ
;

1657 ià(
gDvm
.
şassJavaLªgObjeù
 =ğ
NULL
 &&

1658 
	`¡rcmp
(
desütÜ
, "Ljava/lang/Object;") == 0)

1663 
	`as£¹
(
lßd”
 =ğ
NULL
);

1664 
gDvm
.
şassJavaLªgObjeù
 = 
şazz
;

1667 #ià
LOG_CLASS_LOADING


1668 
	`logCÏssLßd
('<', 
şazz
);

1671 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

1672 if(
gDvm
.
şassfeLßdHook
){

1673 (*
gDvm
.
şassfeLßdHook
)(
şazz
->
desütÜ
, 
	`¡¾’
(clazz->descriptor));

1675 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

1678 
gÙ_şass
:

1679 ià(!
	`dvmIsCÏssLšked
(
şazz
è&& cÏzz->
¡©us
 !ğ
CLASS_ERROR
) {

1692 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1693 ià(!
	`dvmIsCÏssLšked
(
şazz
) &&

1694 
şazz
->
š™Th»adId
 =ğ
£lf
->
th»adId
)

1696 
	`ALOGW
("Recursivlšk oÀşas %s", 
şazz
->
desütÜ
);

1697 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1698 
	`dvmThrowCÏssCœcuÏr™yE¼Ü
(
şazz
->
desütÜ
);

1699 
şazz
 = 
NULL
;

1700 
ba
;

1704 !
	`dvmIsCÏssLšked
(
şazz
è&& cÏzz->
¡©us
 !ğ
CLASS_ERROR
) {

1705 
	`dvmObjeùWa™
(
£lf
, (
Objeù
*è
şazz
, 0, 0, 
çl£
);

1707 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1709 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

1714 
	`throwE¬l›rCÏssFau»
(
şazz
);

1715 
şazz
 = 
NULL
;

1716 
ba
;

1721 
	`as£¹
(
	`dvmIsCÏssLšked
(
şazz
));

1722 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

1723 
	`as£¹
(
şazz
->şazz =ğ
gDvm
.
şassJavaLªgCÏss
);

1724 
	`as£¹
(
	`dvmIsCÏssObjeù
(
şazz
));

1725 
	`as£¹
(
şazz
 =ğ
gDvm
.
şassJavaLªgObjeù
 || cÏzz->
su³r
 !ğ
NULL
);

1726 ià(!
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

1730 
	`as£¹
(
şazz
->
vbËCouÁ
 >ğşazz->
vœtu®M‘hodCouÁ
);

1733 
ba
:

1734 ià(
´of”NÙif›d
)

1735 
	`dvmM‘hodT¿ûCÏssP»pEnd
();

1736 
	`as£¹
(
şazz
 !ğ
NULL
 || 
	`dvmCheckExû±iÚ
(
£lf
));

1737  
şazz
;

1738 
	}
}

1744 
CÏssObjeù
* 
	$lßdCÏssFromDex0
(
DvmDex
* 
pDvmDex
,

1745 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, cÚ¡ 
DexCÏssD©aH—d”
* 
pH—d”
,

1746 cÚ¡ 
u1
* 
pEncodedD©a
, 
Objeù
* 
şassLßd”
)

1748 
CÏssObjeù
* 
ÃwCÏss
 = 
NULL
;

1749 cÚ¡ 
DexFe
* 
pDexFe
;

1750 cÚ¡ * 
desütÜ
;

1751 
i
;

1753 
pDexFe
 = 
pDvmDex
->pDexFile;

1754 
desütÜ
 = 
	`dexG‘CÏssDesütÜ
(
pDexFe
, 
pCÏssDef
);

1760 ià((
pCÏssDef
->
acûssFÏgs
 & ~
EXPECTED_FILE_FLAGS
) != 0) {

1761 
	`ALOGW
("Invalid file flags in class %s: %04x",

1762 
desütÜ
, 
pCÏssDef
->
acûssFÏgs
);

1763  
NULL
;

1775 
	`as£¹
(
desütÜ
 !ğ
NULL
);

1776 ià(
şassLßd”
 =ğ
NULL
 &&

1777 
	`¡rcmp
(
desütÜ
, "Ljava/lang/Class;") == 0) {

1778 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

1779 
ÃwCÏss
 = 
gDvm
.
şassJavaLªgCÏss
;

1781 
size_t
 
size
 = 
	`şassObjeùSize
(
pH—d”
->
¡©icF›ldsSize
);

1782 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
(
size
, 
ALLOC_NON_MOVING
);

1784 ià(
ÃwCÏss
 =ğ
NULL
)

1785  
NULL
;

1787 
	`DVM_OBJECT_INIT
(
ÃwCÏss
, 
gDvm
.
şassJavaLªgCÏss
);

1788 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

1789 
ÃwCÏss
->
desütÜ
 = descriptor;

1790 
	`as£¹
(
ÃwCÏss
->
desütÜAÎoc
 =ğ
NULL
);

1791 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
pCÏssDef
->
acûssFÏgs
);

1792 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

1793 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
şassLßd”
),

1794 (
Objeù
 *)
şassLßd”
);

1795 
ÃwCÏss
->
pDvmDex
 =…DvmDex;

1796 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

1797 
ÃwCÏss
->
¡©us
 = 
CLASS_IDX
;

1808 
	`as£¹
((
u4
è=ğ(
CÏssObjeù
*));

1809 
ÃwCÏss
->
su³r
 = (
CÏssObjeù
*è
pCÏssDef
->
su³rşassIdx
;

1817 cÚ¡ 
DexTy³Li¡
* 
pIÁ”çûsLi¡
;

1818 
pIÁ”çûsLi¡
 = 
	`dexG‘IÁ”çûsLi¡
(
pDexFe
, 
pCÏssDef
);

1819 ià(
pIÁ”çûsLi¡
 !ğ
NULL
) {

1820 
ÃwCÏss
->
š‹rçûCouÁ
 = 
pIÁ”çûsLi¡
->
size
;

1821 
ÃwCÏss
->
š‹rçûs
 = (
CÏssObjeù
**è
	`dvmLš—rAÎoc
(
şassLßd”
,

1822 
ÃwCÏss
->
š‹rçûCouÁ
 * (
CÏssObjeù
*));

1824 
i
 = 0; i < 
ÃwCÏss
->
š‹rçûCouÁ
; i++) {

1825 cÚ¡ 
DexTy³I‹m
* 
pTy³
 = 
	`dexG‘Ty³I‹m
(
pIÁ”çûsLi¡
, 
i
);

1826 
ÃwCÏss
->
š‹rçûs
[
i
] = (
CÏssObjeù
*)(
u4
è
pTy³
->
ty³Idx
;

1828 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
š‹rçûs
);

1842 ià(
pH—d”
->
¡©icF›ldsSize
 != 0) {

1844 
couÁ
 = (è
pH—d”
->
¡©icF›ldsSize
;

1845 
u4
 
Ï¡Index
 = 0;

1846 
DexF›ld
 
f›ld
;

1848 
ÃwCÏss
->
sf›ldCouÁ
 = 
couÁ
;

1849 
i
 = 0; i < 
couÁ
; i++) {

1850 
	`dexR—dCÏssD©aF›ld
(&
pEncodedD©a
, &
f›ld
, &
Ï¡Index
);

1851 
	`lßdSF›ldFromDex
(
ÃwCÏss
, &
f›ld
, &ÃwCÏss->
sf›lds
[
i
]);

1855 ià(
pH—d”
->
š¡ªûF›ldsSize
 != 0) {

1856 
couÁ
 = (è
pH—d”
->
š¡ªûF›ldsSize
;

1857 
u4
 
Ï¡Index
 = 0;

1858 
DexF›ld
 
f›ld
;

1860 
ÃwCÏss
->
if›ldCouÁ
 = 
couÁ
;

1861 
ÃwCÏss
->
if›lds
 = (
In¡F›ld
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1862 
couÁ
 * (
In¡F›ld
));

1863 
i
 = 0; i < 
couÁ
; i++) {

1864 
	`dexR—dCÏssD©aF›ld
(&
pEncodedD©a
, &
f›ld
, &
Ï¡Index
);

1865 
	`lßdIF›ldFromDex
(
ÃwCÏss
, &
f›ld
, &ÃwCÏss->
if›lds
[
i
]);

1867 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
if›lds
);

1882 
u4
 
şassDefIdx
 = 
	`dexG‘IndexFÜCÏssDef
(
pDexFe
, 
pCÏssDef
);

1883 cÚ¡ * 
şassM­D©a
;

1884 
u4
 
numM‘hods
;

1886 ià(
gDvm
.
´eci£Gc
) {

1887 
şassM­D©a
 =

1888 
	`dvmRegi¡”M­G‘CÏssD©a
(
pDexFe
, 
şassDefIdx
, &
numM‘hods
);

1891 ià(
şassM­D©a
 !ğ
NULL
 &&

1892 
pH—d”
->
dœeùM‘hodsSize
 +…H—d”->
vœtu®M‘hodsSize
 !ğ
numM‘hods
)

1894 
	`ALOGE
("ERROR: in %s, direct=%d virtual=%d, maps have %d",

1895 
ÃwCÏss
->
desütÜ
, 
pH—d”
->
dœeùM‘hodsSize
,

1896 
pH—d”
->
vœtu®M‘hodsSize
, 
numM‘hods
);

1897 
	`as£¹
(
çl£
);

1898 
şassM­D©a
 = 
NULL
;

1901 
şassM­D©a
 = 
NULL
;

1904 ià(
pH—d”
->
dœeùM‘hodsSize
 != 0) {

1905 
couÁ
 = (è
pH—d”
->
dœeùM‘hodsSize
;

1906 
u4
 
Ï¡Index
 = 0;

1907 
DexM‘hod
 
m‘hod
;

1909 
ÃwCÏss
->
dœeùM‘hodCouÁ
 = 
couÁ
;

1910 
ÃwCÏss
->
dœeùM‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1911 
couÁ
 * (
M‘hod
));

1912 
i
 = 0; i < 
couÁ
; i++) {

1913 
	`dexR—dCÏssD©aM‘hod
(&
pEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

1914 
	`lßdM‘hodFromDex
(
ÃwCÏss
, &
m‘hod
, &ÃwCÏss->
dœeùM‘hods
[
i
]);

1915 ià(
şassM­D©a
 !ğ
NULL
) {

1916 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmRegi¡”M­G‘Next
(&
şassM­D©a
);

1917 ià(
	`dvmRegi¡”M­G‘FÜm©
(
pM­
è!ğ
kRegM­FÜm©NÚe
) {

1918 
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”M­
 = 
pM­
;

1920 
	`as£¹
((
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”sSize
+7) / 8 ==

1921 
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”M­
->
»gWidth
);

1925 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
dœeùM‘hods
);

1928 ià(
pH—d”
->
vœtu®M‘hodsSize
 != 0) {

1929 
couÁ
 = (è
pH—d”
->
vœtu®M‘hodsSize
;

1930 
u4
 
Ï¡Index
 = 0;

1931 
DexM‘hod
 
m‘hod
;

1933 
ÃwCÏss
->
vœtu®M‘hodCouÁ
 = 
couÁ
;

1934 
ÃwCÏss
->
vœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1935 
couÁ
 * (
M‘hod
));

1936 
i
 = 0; i < 
couÁ
; i++) {

1937 
	`dexR—dCÏssD©aM‘hod
(&
pEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

1938 
	`lßdM‘hodFromDex
(
ÃwCÏss
, &
m‘hod
, &ÃwCÏss->
vœtu®M‘hods
[
i
]);

1939 ià(
şassM­D©a
 !ğ
NULL
) {

1940 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmRegi¡”M­G‘Next
(&
şassM­D©a
);

1941 ià(
	`dvmRegi¡”M­G‘FÜm©
(
pM­
è!ğ
kRegM­FÜm©NÚe
) {

1942 
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”M­
 = 
pM­
;

1944 
	`as£¹
((
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”sSize
+7) / 8 ==

1945 
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”M­
->
»gWidth
);

1949 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
vœtu®M‘hods
);

1952 
ÃwCÏss
->
sourûFe
 = 
	`dexG‘SourûFe
(
pDexFe
, 
pCÏssDef
);

1955  
ÃwCÏss
;

1956 
	}
}

1967 
CÏssObjeù
* 
	$lßdCÏssFromDex
(
DvmDex
* 
pDvmDex
,

1968 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
Objeù
* 
şassLßd”
)

1970 
CÏssObjeù
* 
»suÉ
;

1971 
DexCÏssD©aH—d”
 
h—d”
;

1972 cÚ¡ 
u1
* 
pEncodedD©a
;

1973 cÚ¡ 
DexFe
* 
pDexFe
;

1975 
	`as£¹
((
pDvmDex
 !ğ
NULL
è&& (
pCÏssDef
 != NULL));

1976 
pDexFe
 = 
pDvmDex
->pDexFile;

1978 ià(
gDvm
.
v”bo£CÏss
) {

1979 
	`ALOGV
("CLASS:†oading '%s'...",

1980 
	`dexG‘CÏssDesütÜ
(
pDexFe
, 
pCÏssDef
));

1983 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

1985 ià(
pEncodedD©a
 !ğ
NULL
) {

1986 
	`dexR—dCÏssD©aH—d”
(&
pEncodedD©a
, &
h—d”
);

1989 
	`mem£t
(&
h—d”
, 0, (header));

1992 
»suÉ
 = 
	`lßdCÏssFromDex0
(
pDvmDex
, 
pCÏssDef
, &
h—d”
, 
pEncodedD©a
,

1993 
şassLßd”
);

1995 ià(
gDvm
.
v”bo£CÏss
 && (
»suÉ
 !ğ
NULL
)) {

1996 
	`ALOGI
("[Loaded %s from DEX %p (cl=%p)]",

1997 
»suÉ
->
desütÜ
, 
pDvmDex
, 
şassLßd”
);

2002  
»suÉ
;

2003 
	}
}

2015 
	$dvmF»eCÏssIÂ¬ds
(
CÏssObjeù
* 
şazz
)

2017 *

;

2018 
i
;

2020 ià(
şazz
 =ğ
NULL
)

2023 
	`as£¹
(
şazz
->şazz =ğ
gDvm
.
şassJavaLªgCÏss
);

2024 
	`as£¹
(
	`dvmIsCÏssObjeù
(
şazz
));

2037 
	#NULL_AND_FREE
(
p
) \

2039 ià((
p
è!ğ
NULL
) { \

2040 

 = (
p
); \

2041 (
p
èğ
NULL
; \

2042 
	`ä“
(

); \

2044 } 0)

	)

2045 
	#NULL_AND_LINEAR_FREE
(
p
) \

2047 ià((
p
è!ğ
NULL
) { \

2048 

 = (
p
); \

2049 (
p
èğ
NULL
; \

2050 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 

); \

2052 } 0)

	)

2056 
şazz
->
vbËCouÁ
 = -1;

2057 ià(
şazz
->
vbË
 =ğ
gDvm
.
şassJavaLªgObjeù
->vtable) {

2058 
şazz
->
vbË
 = 
NULL
;

2060 
	`NULL_AND_LINEAR_FREE
(
şazz
->
vbË
);

2063 
şazz
->
desütÜ
 = 
NULL
;

2064 
	`NULL_AND_FREE
(
şazz
->
desütÜAÎoc
);

2066 ià(
şazz
->
dœeùM‘hods
 !ğ
NULL
) {

2067 
M‘hod
 *
dœeùM‘hods
 = 
şazz
->directMethods;

2068 
dœeùM‘hodCouÁ
 = 
şazz
->directMethodCount;

2069 
şazz
->
dœeùM‘hods
 = 
NULL
;

2070 
şazz
->
dœeùM‘hodCouÁ
 = -1;

2071 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

2072 
i
 = 0; i < 
dœeùM‘hodCouÁ
; i++) {

2073 
	`ä“M‘hodIÂ¬ds
(&
dœeùM‘hods
[
i
]);

2075 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

2076 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

2078 ià(
şazz
->
vœtu®M‘hods
 !ğ
NULL
) {

2079 
M‘hod
 *
vœtu®M‘hods
 = 
şazz
->virtualMethods;

2080 
vœtu®M‘hodCouÁ
 = 
şazz
->virtualMethodCount;

2081 
şazz
->
vœtu®M‘hodCouÁ
 = -1;

2082 
şazz
->
vœtu®M‘hods
 = 
NULL
;

2083 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

2084 
i
 = 0; i < 
vœtu®M‘hodCouÁ
; i++) {

2085 
	`ä“M‘hodIÂ¬ds
(&
vœtu®M‘hods
[
i
]);

2087 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

2088 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

2091 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 = 
	`dvmG‘In™ŸtšgLßd”Li¡
(
şazz
);

2092 
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 = -1;

2093 
	`NULL_AND_FREE
(
lßd”Li¡
->
š™ŸtšgLßd”s
);

2095 
şazz
->
š‹rçûCouÁ
 = -1;

2096 
	`NULL_AND_LINEAR_FREE
(
şazz
->
š‹rçûs
);

2098 
şazz
->
iáabËCouÁ
 = -1;

2099 
	`NULL_AND_LINEAR_FREE
(
şazz
->
iáabË
);

2101 
şazz
->
ifviPoŞCouÁ
 = -1;

2102 
	`NULL_AND_LINEAR_FREE
(
şazz
->
ifviPoŞ
);

2104 
şazz
->
sf›ldCouÁ
 = -1;

2108 
şazz
->
if›ldCouÁ
 = -1;

2109 
	`NULL_AND_LINEAR_FREE
(
şazz
->
if›lds
);

2111 #undeà
NULL_AND_FREE


2112 #undeà
NULL_AND_LINEAR_FREE


2113 
	}
}

2120 
	$ä“M‘hodIÂ¬ds
(
M‘hod
* 
m‘h
)

2123 
	`ä“
(
m‘h
->
exû±iÚs
);

2124 
	`ä“
(
m‘h
->
lšes
);

2125 
	`ä“
(
m‘h
->
loÿls
);

2132 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
m‘h
->
»gi¡”M­
;

2133 ià(
pM­
 !ğ
NULL
 && 
	`dvmRegi¡”M­G‘OnH—p
(pMap)) {

2134 
	`dvmF»eRegi¡”M­
((
Regi¡”M­
*è
pM­
);

2135 
m‘h
->
»gi¡”M­
 = 
NULL
;

2141 ià(
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

2142 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2143 
	`dvmLš—rF»e
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2145 
	}
}

2151 
	$şÚeM‘hod
(
M‘hod
* 
d¡
, cÚ¡ M‘hod* 
¤c
)

2153 ià(
¤c
->
»gi¡”M­
 !ğ
NULL
) {

2154 
	`ALOGE
("GLITCH: onlyƒxpected‡bstract methods here");

2155 
	`ALOGE
(" clÚšg %s.%s", 
¤c
->
şazz
->
desütÜ
, src->
Çme
);

2156 
	`dvmAbÜt
();

2158 
	`memıy
(
d¡
, 
¤c
, (
M‘hod
));

2159 
	}
}

2167 
	$lßdM‘hodFromDex
(
CÏssObjeù
* 
şazz
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
,

2168 
M‘hod
* 
m‘h
)

2170 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2171 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

2172 cÚ¡ 
DexCode
* 
pDexCode
;

2174 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

2176 
m‘h
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

2177 
	`dexPrÙoS‘FromM‘hodId
(&
m‘h
->
´ÙÙy³
, 
pDexFe
, 
pM‘hodId
);

2178 
m‘h
->
shÜty
 = 
	`dexPrÙoG‘ShÜty
(&m‘h->
´ÙÙy³
);

2179 
m‘h
->
acûssFÏgs
 = 
pDexM‘hod
->accessFlags;

2180 
m‘h
->
şazz
 = clazz;

2181 
m‘h
->
jniArgInfo
 = 0;

2183 ià(
	`dvmCom·»NameDesütÜAndM‘hod
("fš®ize", "()V", 
m‘h
) == 0) {

2193 ià(
şazz
->
şassLßd”
 !ğ
NULL
 ||

2194 
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Enum;") != 0)

2196 
	`SET_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2200 
pDexCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

2201 ià(
pDexCode
 !ğ
NULL
) {

2203 
m‘h
->
»gi¡”sSize
 = 
pDexCode
->registersSize;

2204 
m‘h
->
šsSize
 = 
pDexCode
->insSize;

2205 
m‘h
->
outsSize
 = 
pDexCode
->outsSize;

2208 
m‘h
->
š¢s
 = 
pDexCode
->insns;

2219 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
m‘h
);

2220 ià(!
	`dvmIsSticM‘hod
(
m‘h
))

2221 
¬gsSize
++;

2222 
m‘h
->
»gi¡”sSize
 = m‘h->
šsSize
 = 
¬gsSize
;

2223 
	`as£¹
(
m‘h
->
outsSize
 == 0);

2224 
	`as£¹
(
m‘h
->
š¢s
 =ğ
NULL
);

2226 ià(
	`dvmIsN©iveM‘hod
(
m‘h
)) {

2227 
m‘h
->
ÇtiveFunc
 = 
dvmResŞveN©iveM‘hod
;

2228 
m‘h
->
jniArgInfo
 = 
	`compu‹JniArgInfo
(&m‘h->
´ÙÙy³
);

2231 
	}
}

2246 
	$dvmMakeCodeR—dWr™e
(
M‘hod
* 
m‘h
)

2248 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2250 ià(
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

2251 
	`dvmLš—rR—dWr™e
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2255 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘h
è&& !
	`dvmIsAb¡¿ùM‘hod
(meth));

2257 
size_t
 
dexCodeSize
 = 
	`dexG‘DexCodeSize
(
m‘hodDexCode
);

2258 
	`ALOGD
("Making‡ copy of %s.%s code (%d bytes)",

2259 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
dexCodeSize
);

2261 
DexCode
* 
ÃwCode
 =

2262 (
DexCode
*è
	`dvmLš—rAÎoc
(
m‘h
->
şazz
->
şassLßd”
, 
dexCodeSize
);

2263 
	`memıy
(
ÃwCode
, 
m‘hodDexCode
, 
dexCodeSize
);

2265 
m‘h
->
š¢s
 = 
ÃwCode
->insns;

2266 
	`SET_METHOD_FLAG
(
m‘h
, 
METHOD_ISWRITABLE
);

2267 
	}
}

2275 
	$dvmMakeCodeR—dOÆy
(
M‘hod
* 
m‘h
)

2277 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2278 
	`ALOGV
("+++ m¬kšg %°»ad-Úly", 
m‘hodDexCode
);

2279 
	`dvmLš—rR—dOÆy
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2280 
	}
}

2299 
	$compu‹JniArgInfo
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

2301 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

2302 
»tuºTy³
, 
jniArgInfo
;

2303 
u4
 
hšts
;

2306 *(
sig
++)) {

2308 
»tuºTy³
 = 
DALVIK_JNI_RETURN_VOID
;

2311 
»tuºTy³
 = 
DALVIK_JNI_RETURN_FLOAT
;

2314 
»tuºTy³
 = 
DALVIK_JNI_RETURN_DOUBLE
;

2317 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S8
;

2321 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S1
;

2324 
»tuºTy³
 = 
DALVIK_JNI_RETURN_U2
;

2327 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S2
;

2330 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S4
;

2334 
jniArgInfo
 = 
»tuºTy³
 << 
DALVIK_JNI_RETURN_SHIFT
;

2336 
hšts
 = 
	`dvmPÏtfÜmInvokeHšts
(
´Ùo
);

2338 ià(
hšts
 & 
DALVIK_JNI_NO_ARG_INFO
) {

2339 
jniArgInfo
 |ğ
DALVIK_JNI_NO_ARG_INFO
;

2341 
	`as£¹
((
hšts
 & 
DALVIK_JNI_RETURN_MASK
) == 0);

2342 
jniArgInfo
 |ğ
hšts
;

2345  
jniArgInfo
;

2346 
	}
}

2354 
	$lßdSF›ldFromDex
(
CÏssObjeù
* 
şazz
,

2355 cÚ¡ 
DexF›ld
* 
pDexSF›ld
, 
SticF›ld
* 
sf›ld
)

2357 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2358 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2360 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
pDexSF›ld
->
f›ldIdx
);

2362 
sf›ld
->
şazz
 = clazz;

2363 
sf›ld
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

2364 
sf›ld
->
sigÇtu»
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

2365 
sf›ld
->
acûssFÏgs
 = 
pDexSF›ld
->accessFlags;

2372 
	`as£¹
(
sf›ld
->
v®ue
.
j
 == 0LL);

2373 
	}
}

2378 
	$lßdIF›ldFromDex
(
CÏssObjeù
* 
şazz
,

2379 cÚ¡ 
DexF›ld
* 
pDexIF›ld
, 
In¡F›ld
* 
if›ld
)

2381 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2382 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2384 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
pDexIF›ld
->
f›ldIdx
);

2386 
if›ld
->
şazz
 = clazz;

2387 
if›ld
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

2388 
if›ld
->
sigÇtu»
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

2389 
if›ld
->
acûssFÏgs
 = 
pDexIF›ld
->accessFlags;

2390 #iâdeà
NDEBUG


2391 
	`as£¹
(
if›ld
->
by‹Off£t
 == 0);

2392 
if›ld
->
by‹Off£t
 = -1;

2394 
	}
}

2399 
boŞ
 
	$´eÿcheReã»nûOff£ts
(
CÏssObjeù
* 
şazz
)

2401 
i
;

2411 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

2412 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; i++) {

2413 
In¡F›ld
 *
pF›ld
 = &
şazz
->
if›lds
[
i
];

2414 ià(
	`¡rcmp
(
pF›ld
->
Çme
, "referent") == 0) {

2415 
rg‘Index
;

2419 
rg‘Index
 = 
şazz
->
if›ldRefCouÁ
 - 1;

2420 ià(
i
 !ğ
rg‘Index
) {

2421 
In¡F›ld
 *
sw­F›ld
 = &
şazz
->
if›lds
[
rg‘Index
];

2422 
In¡F›ld
 
tmpF›ld
;

2423 
tmpBy‹Off£t
;

2429 
tmpBy‹Off£t
 = 
sw­F›ld
->
by‹Off£t
;

2430 
sw­F›ld
->
by‹Off£t
 = 
pF›ld
->byteOffset;

2431 
pF›ld
->
by‹Off£t
 = 
tmpBy‹Off£t
;

2433 
tmpF›ld
 = *
sw­F›ld
;

2434 *
sw­F›ld
 = *
pF›ld
;

2435 *
pF›ld
 = 
tmpF›ld
;

2440 
şazz
->
if›ldRefCouÁ
--;

2441 
i
--;

2445 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

2446 ià(
i
 =ğ
şazz
->
if›ldRefCouÁ
) {

2447 
	`ALOGE
("UÇbËØ»Üd” '»ã»Á' iÀ%s", 
şazz
->
desütÜ
);

2448  
çl£
;

2455 ià(!
	`dvmFšdReã»nûMemb”s
(
şazz
)) {

2456 
	`ALOGE
("Trouble with Reference setup");

2457  
çl£
;

2460  
Œue
;

2461 
	}
}

2468 
	$compu‹RefOff£ts
(
CÏssObjeù
* 
şazz
)

2470 ià(
şazz
->
su³r
 !ğ
NULL
) {

2471 
şazz
->
»fOff£ts
 = cÏzz->
su³r
->refOffsets;

2473 
şazz
->
»fOff£ts
 = 0;

2478 ià(
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

2479 
In¡F›ld
 *
f
;

2480 
i
;

2485 
f
 = 
şazz
->
if›lds
;

2486 cÚ¡ 
if›ldRefCouÁ
 = 
şazz
->ifieldRefCount;

2487 
i
 = 0; i < 
if›ldRefCouÁ
; i++) {

2493 
	`as£¹
(
f
->
by‹Off£t
 >ğ(è
CLASS_SMALLEST_OFFSET
);

2494 
	`as£¹
((
f
->
by‹Off£t
 & (
CLASS_OFFSET_ALIGNMENT
 - 1)) == 0);

2495 ià(
	`CLASS_CAN_ENCODE_OFFSET
(
f
->
by‹Off£t
)) {

2496 
u4
 
ÃwB™
 = 
	`CLASS_BIT_FROM_OFFSET
(
f
->
by‹Off£t
);

2497 
	`as£¹
(
ÃwB™
 != 0);

2498 
şazz
->
»fOff£ts
 |ğ
ÃwB™
;

2500 
şazz
->
»fOff£ts
 = 
CLASS_WALK_SUPER
;

2503 
f
++;

2506 
	}
}

2523 
boŞ
 
	$dvmLškCÏss
(
CÏssObjeù
* 
şazz
)

2525 
u4
 
su³rşassIdx
 = 0;

2526 
u4
 *
š‹rçûIdxA¼ay
 = 
NULL
;

2527 
boŞ
 
okay
 = 
çl£
;

2528 
i
;

2530 
	`as£¹
(
şazz
 !ğ
NULL
);

2531 
	`as£¹
(
şazz
->
desütÜ
 !ğ
NULL
);

2532 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_IDX
 || cÏzz->¡©u =ğ
CLASS_LOADED
);

2533 ià(
gDvm
.
v”bo£CÏss
)

2534 
	`ALOGV
("CLASS:†škšg '%s'...", 
şazz
->
desütÜ
);

2536 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

2537 
	`as£¹
(
şazz
->şazz =ğ
gDvm
.
şassJavaLªgCÏss
);

2538 
	`as£¹
(
	`dvmIsCÏssObjeù
(
şazz
));

2539 ià(
şazz
->
şassLßd”
 =ğ
NULL
 &&

2540 (
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Class;") == 0))

2542 ià(
gDvm
.
şassJavaLªgCÏss
->
if›ldCouÁ
 > 
CLASS_FIELD_SLOTS
) {

2543 
	`ALOGE
("java.lang.Class has %d instance fields (expected‡t most %d)",

2544 
gDvm
.
şassJavaLªgCÏss
->
if›ldCouÁ
, 
CLASS_FIELD_SLOTS
);

2545 
	`dvmAbÜt
();

2547 ià(
gDvm
.
şassJavaLªgCÏss
->
sf›ldCouÁ
 !ğ
CLASS_SFIELD_SLOTS
) {

2548 
	`ALOGE
("java.lang.Class has %d static fields (expected %d)",

2549 
gDvm
.
şassJavaLªgCÏss
->
sf›ldCouÁ
, 
CLASS_SFIELD_SLOTS
);

2550 
	`dvmAbÜt
();

2562 ià(
şazz
->
¡©us
 =ğ
CLASS_IDX
) {

2563 ià(
şazz
->
š‹rçûCouÁ
 > 0) {

2567 
	`as£¹
((*
š‹rçûIdxA¼ay
è=ğ(*
şazz
->
š‹rçûs
));

2568 
size_t
 
Ën
 = 
şazz
->
š‹rçûCouÁ
 * (*
š‹rçûIdxA¼ay
);

2569 
š‹rçûIdxA¼ay
 = (
u4
*)
	`m®loc
(
Ën
);

2570 ià(
š‹rçûIdxA¼ay
 =ğ
NULL
) {

2571 
	`ALOGW
("UÇbËØ®loÿ‹ memÜyØlšk %s", 
şazz
->
desütÜ
);

2572 
ba
;

2574 
	`memıy
(
š‹rçûIdxA¼ay
, 
şazz
->
š‹rçûs
, 
Ën
);

2576 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2577 
	`mem£t
(
şazz
->
š‹rçûs
, 0, 
Ën
);

2578 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2581 
	`as£¹
((
su³rşassIdx
è=ğ(
şazz
->
su³r
));

2582 
su³rşassIdx
 = (
u4
è
şazz
->
su³r
;

2583 
şazz
->
su³r
 = 
NULL
;

2587 
şazz
->
¡©us
 = 
CLASS_LOADED
;

2589 ià(
su³rşassIdx
 !ğ
kDexNoIndex
) {

2590 
CÏssObjeù
* 
su³r
 = 
	`dvmResŞveCÏss
(
şazz
, 
su³rşassIdx
, 
çl£
);

2591 ià(
su³r
 =ğ
NULL
) {

2592 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

2593 ià(
gDvm
.
İtimizšg
) {

2595 
	`ALOGV
("Unableo„esolve superclass of %s (%d)",

2596 
şazz
->
desütÜ
, 
su³rşassIdx
);

2598 
	`ALOGW
("Unableo„esolve superclass of %s (%d)",

2599 
şazz
->
desütÜ
, 
su³rşassIdx
);

2601 
ba
;

2603 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
şazz
,

2604 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
su³r
),

2605 (
Objeù
 *)
su³r
);

2608 ià(
şazz
->
š‹rçûCouÁ
 > 0) {

2610 
	`as£¹
(
š‹rçûIdxA¼ay
 !ğ
NULL
);

2611 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2612 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++) {

2613 
	`as£¹
(
š‹rçûIdxA¼ay
[
i
] !ğ
kDexNoIndex
);

2614 
şazz
->
š‹rçûs
[
i
] =

2615 
	`dvmResŞveCÏss
(
şazz
, 
š‹rçûIdxA¼ay
[
i
], 
çl£
);

2616 ià(
şazz
->
š‹rçûs
[
i
] =ğ
NULL
) {

2617 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2619 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

2620 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2622 cÚ¡ * 
şassDesütÜ
;

2623 
şassDesütÜ
 =

2624 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
š‹rçûIdxA¼ay
[
i
]);

2625 ià(
gDvm
.
İtimizšg
) {

2627 
	`ALOGV
("Failed„esolving %s interface %d '%s'",

2628 
şazz
->
desütÜ
, 
š‹rçûIdxA¼ay
[
i
],

2629 
şassDesütÜ
);

2631 
	`ALOGI
("Failed„esolving %s interface %d '%s'",

2632 
şazz
->
desütÜ
, 
š‹rçûIdxA¼ay
[
i
],

2633 
şassDesütÜ
);

2635 
ba
;

2639 ià(!
	`dvmCheckCÏssAcûss
(
şazz
, cÏzz->
š‹rçûs
[
i
])) {

2640 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2641 
	`ALOGW
("Interface '%s' is‚ot‡ccessibleo '%s'",

2642 
şazz
->
š‹rçûs
[
i
]->
desütÜ
, clazz->descriptor);

2643 
	`dvmThrowIÎeg®AcûssE¼Ü
("interface‚ot‡ccessible");

2644 
ba
;

2646 
	`LOGVV
("+++ found interface '%s'",

2647 
şazz
->
š‹rçûs
[
i
]->
desütÜ
);

2649 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2662 
	`as£¹
(
şazz
->
´im™iveTy³
 =ğ
PRIM_NOT
);

2663 ià(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Object;") == 0) {

2664 ià(
şazz
->
su³r
 !ğ
NULL
) {

2668 
	`dvmThrowCÏssFÜm©E¼Ü
("java.lang.Object has‡ superclass");

2669 
ba
;

2675 
	`CLEAR_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2677 ià(
şazz
->
su³r
 =ğ
NULL
) {

2678 
	`dvmThrowLškageE¼Ü
("no superclass defined");

2679 
ba
;

2682 ià(
	`dvmIsFš®CÏss
(
şazz
->
su³r
)) {

2683 
	`ALOGW
("Superclass of '%s' is final '%s'",

2684 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2685 
	`dvmThrowIncom·tibËCÏssChªgeE¼Ü
("superclass is final");

2686 
ba
;

2687 } ià(
	`dvmIsIÁ”çûCÏss
(
şazz
->
su³r
)) {

2688 
	`ALOGW
("Superclass of '%s' is interface '%s'",

2689 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2690 
	`dvmThrowIncom·tibËCÏssChªgeE¼Ü
("superclass is‡n interface");

2691 
ba
;

2692 } ià(!
	`dvmCheckCÏssAcûss
(
şazz
, cÏzz->
su³r
)) {

2693 
	`ALOGW
("Superclass of '%s' (%s) is‚ot‡ccessible",

2694 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2695 
	`dvmThrowIÎeg®AcûssE¼Ü
("superclass‚ot‡ccessible");

2696 
ba
;

2703 ià(
	`IS_CLASS_FLAG_SET
(
şazz
->
su³r
, 
CLASS_ISFINALIZABLE
)) {

2704 
	`SET_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2710 ià(
	`IS_CLASS_FLAG_SET
(
şazz
->
su³r
, 
CLASS_ISREFERENCE
)) {

2711 
u4
 
su³rRefFÏgs
;

2716 
su³rRefFÏgs
 = 
	`GET_CLASS_FLAG_GROUP
(
şazz
->
su³r
,

2717 
CLASS_ISREFERENCE
 |

2718 
CLASS_ISWEAKREFERENCE
 |

2719 
CLASS_ISFINALIZERREFERENCE
 |

2720 
CLASS_ISPHANTOMREFERENCE
);

2721 
	`SET_CLASS_FLAG
(
şazz
, 
su³rRefFÏgs
);

2722 } ià(
şazz
->
şassLßd”
 =ğ
NULL
 &&

2723 
şazz
->
su³r
->
şassLßd”
 =ğ
NULL
 &&

2724 
	`¡rcmp
(
şazz
->
su³r
->
desütÜ
,

2727 
u4
 
»fFÏgs
;

2732 
»fFÏgs
 = 
CLASS_ISREFERENCE
;

2733 ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2738 } ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2741 
»fFÏgs
 |ğ
CLASS_ISWEAKREFERENCE
;

2742 } ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2745 
»fFÏgs
 |ğ
CLASS_ISFINALIZERREFERENCE
;

2746 } ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2749 
»fFÏgs
 |ğ
CLASS_ISPHANTOMREFERENCE
;

2755 
	`dvmThrowLškageE¼Ü
("illegal inheritance from Reference");

2756 
ba
;

2761 
	`as£¹
(
	`GET_CLASS_FLAG_GROUP
(
şazz
,

2762 
CLASS_ISREFERENCE
 |

2763 
CLASS_ISWEAKREFERENCE
 |

2764 
CLASS_ISFINALIZERREFERENCE
 |

2765 
CLASS_ISPHANTOMREFERENCE
) == 0);

2767 
	`SET_CLASS_FLAG
(
şazz
, 
»fFÏgs
);

2774 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

2776 
couÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2778 ià(
couÁ
 !ğ(
u2
) count) {

2779 
	`ALOGE
("ToØmªy m‘hod (%dèš iÁ”çû '%s'", 
couÁ
,

2780 
şazz
->
desütÜ
);

2781 
ba
;

2784 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2786 
i
 = 0; i < 
couÁ
; i++)

2787 
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
 = (
u2
) i;

2789 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2791 ià(!
	`ü—‹VbË
(
şazz
)) {

2792 
	`ALOGW
("failed creating vtable");

2793 
ba
;

2800 ià(!
	`ü—‹IáabË
(
şazz
))

2801 
ba
;

2806 ià(!
	`š£¹M‘hodStubs
(
şazz
))

2807 
ba
;

2812 ià(!
	`compu‹F›ldOff£ts
(
şazz
))

2813 
ba
;

2820 ià((
şazz
->
şassLßd”
 =ğ
NULL
)

2821 && (
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/ref/Reference;") == 0)) {

2822 ià(!
	`´eÿcheReã»nûOff£ts
(
şazz
)) {

2823 
	`ALOGE
("failed…re-caching Reference offsets");

2824 
	`dvmThrowIÁ”ÇlE¼Ü
(
NULL
);

2825 
ba
;

2834 
	`compu‹RefOff£ts
(
şazz
);

2839 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISPREVERIFIED
))

2840 
şazz
->
¡©us
 = 
CLASS_VERIFIED
;

2842 
şazz
->
¡©us
 = 
CLASS_RESOLVED
;

2843 
okay
 = 
Œue
;

2844 ià(
gDvm
.
v”bo£CÏss
)

2845 
	`ALOGV
("CLASS:†šked '%s'", 
şazz
->
desütÜ
);

2858 ià(
gDvm
.
debugg”Aùive
) {

2859 
	`dvmDbgPo¡CÏssP»·»
(
şazz
);

2862 
ba
:

2863 ià(!
okay
) {

2864 
şazz
->
¡©us
 = 
CLASS_ERROR
;

2865 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

2866 
	`dvmThrowVœtu®MachšeE¼Ü
(
NULL
);

2869 ià(
š‹rçûIdxA¼ay
 !ğ
NULL
) {

2870 
	`ä“
(
š‹rçûIdxA¼ay
);

2873  
okay
;

2874 
	}
}

2883 
boŞ
 
	$ü—‹VbË
(
CÏssObjeù
* 
şazz
)

2885 
boŞ
 
»suÉ
 = 
çl£
;

2886 
maxCouÁ
;

2887 
i
;

2889 ià(
şazz
->
su³r
 !ğ
NULL
) {

2895 
maxCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2896 ià(
şazz
->
su³r
 !ğ
NULL
) {

2897 
maxCouÁ
 +ğ
şazz
->
su³r
->
vbËCouÁ
;

2902 
	`as£¹
(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Object;") == 0);

2912 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2913 
şazz
->
vbË
 = (
M‘hod
**è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

2914 (
M‘hod
*è* 
maxCouÁ
);

2915 ià(
şazz
->
vbË
 =ğ
NULL
)

2916 
ba
;

2918 ià(
şazz
->
su³r
 !ğ
NULL
) {

2919 
aùu®CouÁ
;

2921 
	`memıy
(
şazz
->
vbË
, cÏzz->
su³r
->vtable,

2922 (*(
şazz
->
vbË
)è* cÏzz->
su³r
->
vbËCouÁ
);

2923 
aùu®CouÁ
 = 
şazz
->
su³r
->
vbËCouÁ
;

2928 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

2929 
M‘hod
* 
loÿlM‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

2930 
si
;

2932 
si
 = 0; s˜< 
şazz
->
su³r
->
vbËCouÁ
; si++) {

2933 
M‘hod
* 
su³rM‘h
 = 
şazz
->
vbË
[
si
];

2935 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(
loÿlM‘h
, 
su³rM‘h
) == 0)

2938 ià(
	`dvmIsFš®M‘hod
(
su³rM‘h
)) {

2939 
	`ALOGW
("Method %s.%s overrides final %s.%s",

2940 
loÿlM‘h
->
şazz
->
desütÜ
,†oÿlM‘h->
Çme
,

2941 
su³rM‘h
->
şazz
->
desütÜ
, su³rM‘h->
Çme
);

2942 
ba
;

2944 
şazz
->
vbË
[
si
] = 
loÿlM‘h
;

2945 
loÿlM‘h
->
m‘hodIndex
 = (
u2
è
si
;

2952 ià(
si
 =ğ
şazz
->
su³r
->
vbËCouÁ
) {

2954 
şazz
->
vbË
[
aùu®CouÁ
] = 
loÿlM‘h
;

2955 
loÿlM‘h
->
m‘hodIndex
 = (
u2
è
aùu®CouÁ
;

2956 
aùu®CouÁ
++;

2963 ià(
aùu®CouÁ
 !ğ(
u2
)‡ctualCount) {

2964 
	`ALOGE
("ToØmªy m‘hod (%dèš cÏs '%s'", 
aùu®CouÁ
,

2965 
şazz
->
desütÜ
);

2966 
ba
;

2969 
	`as£¹
(
aùu®CouÁ
 <ğ
maxCouÁ
);

2971 ià(
aùu®CouÁ
 < 
maxCouÁ
) {

2972 
	`as£¹
(
şazz
->
vbË
 !ğ
NULL
);

2973 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

2974 
şazz
->
vbË
 = (
M‘hod
 **)
	`dvmLš—rR—Îoc
(şazz->
şassLßd”
,

2975 
şazz
->
vbË
, (*(şazz->vbË)è* 
aùu®CouÁ
);

2976 ià(
şazz
->
vbË
 =ğ
NULL
) {

2977 
	`ALOGE
("vtable„ealloc failed");

2978 
ba
;

2980 
	`LOGVV
("+++„educed vtable from %do %d",

2981 
maxCouÁ
, 
aùu®CouÁ
);

2985 
şazz
->
vbËCouÁ
 = 
aùu®CouÁ
;

2988 
couÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2989 ià(
couÁ
 !ğ(
u2
) count) {

2990 
	`ALOGE
("ToØmªy m‘hod (%dèš ba£ cÏs '%s'", 
couÁ
,

2991 
şazz
->
desütÜ
);

2992 
ba
;

2995 
i
 = 0; i < 
couÁ
; i++) {

2996 
şazz
->
vbË
[
i
] = &şazz->
vœtu®M‘hods
[i];

2997 
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
 = (
u2
) i;

2999 
şazz
->
vbËCouÁ
 = cÏzz->
vœtu®M‘hodCouÁ
;

3002 
»suÉ
 = 
Œue
;

3004 
ba
:

3005 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3006 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3007  
»suÉ
;

3008 
	}
}

3027 
boŞ
 
	$ü—‹IáabË
(
CÏssObjeù
* 
şazz
)

3029 
boŞ
 
»suÉ
 = 
çl£
;

3030 
boŞ
 
z­IáabË
 = 
çl£
;

3031 
boŞ
 
z­VbË
 = 
çl£
;

3032 
boŞ
 
z­IfvoŞ
 = 
çl£
;

3033 
poŞOff£t
 = 0, 
poŞSize
 = 0;

3034 
M‘hod
** 
mœªdaLi¡
 = 
NULL
;

3035 
mœªdaCouÁ
 = 0, 
mœªdaAÎoc
 = 0;

3037 
su³rIfCouÁ
;

3038 ià(
şazz
->
su³r
 !ğ
NULL
)

3039 
su³rIfCouÁ
 = 
şazz
->
su³r
->
iáabËCouÁ
;

3041 
su³rIfCouÁ
 = 0;

3043 
ifCouÁ
 = 
su³rIfCouÁ
;

3044 
ifCouÁ
 +ğ
şazz
->
š‹rçûCouÁ
;

3045 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++)

3046 
ifCouÁ
 +ğ
şazz
->
š‹rçûs
[
i
]->
iáabËCouÁ
;

3048 
	`LOGVV
("INTF: class '%s' direct w/supra=%d super=%dotal=%d",

3049 
şazz
->
desütÜ
, 
ifCouÁ
 - 
su³rIfCouÁ
, superIfCount, ifCount);

3051 ià(
ifCouÁ
 == 0) {

3052 
	`as£¹
(
şazz
->
iáabËCouÁ
 == 0);

3053 
	`as£¹
(
şazz
->
iáabË
 =ğ
NULL
);

3054  
Œue
;

3061 
şazz
->
iáabË
 = (
IÁ”çûEÁry
*è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

3062 (
IÁ”çûEÁry
è* 
ifCouÁ
);

3063 
z­IáabË
 = 
Œue
;

3064 
	`mem£t
(
şazz
->
iáabË
, 0x00, (
IÁ”çûEÁry
è* 
ifCouÁ
);

3065 ià(
su³rIfCouÁ
 != 0) {

3066 
	`memıy
(
şazz
->
iáabË
, cÏzz->
su³r
->iftable,

3067 (
IÁ”çûEÁry
è* 
su³rIfCouÁ
);

3073 
idx
 = 
su³rIfCouÁ
;

3075 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++) {

3076 
CÏssObjeù
* 
š‹rf
 = 
şazz
->
š‹rçûs
[
i
];

3077 
	`as£¹
(
š‹rf
 !ğ
NULL
);

3080 ià(!
	`dvmIsIÁ”çûCÏss
(
š‹rf
)) {

3081 
	`ALOGW
("Class '%s' implements‚on-interface '%s'",

3082 
şazz
->
desütÜ
, 
š‹rf
->descriptor);

3083 
	`dvmThrowIncom·tibËCÏssChªgeE¼ÜW™hCÏssMes§ge
(

3084 
şazz
->
desütÜ
);

3085 
ba
;

3089 
şazz
->
iáabË
[
idx
++].şazz = 
š‹rf
;

3092 
j
 = 0; j < 
š‹rf
->
iáabËCouÁ
; j++) {

3093 
k
;

3094 
CÏssObjeù
 *
ÿnd
;

3096 
ÿnd
 = 
š‹rf
->
iáabË
[
j
].
şazz
;

3106 
k
 = 0; k < 
idx
; k++)

3107 ià(
şazz
->
iáabË
[
k
].şazz =ğ
ÿnd
)

3110 ià(
k
 =ğ
idx
)

3111 
şazz
->
iáabË
[
idx
++].şazz = 
ÿnd
;

3115 
	`as£¹
(
idx
 <ğ
ifCouÁ
);

3122 ià(
çl£
) {

3123 ià(
idx
 !ğ
ifCouÁ
) {

3124 
ÃwIfCouÁ
 = 
idx
;

3125 
IÁ”çûEÁry
* 
Şdmem
 = 
şazz
->
iáabË
;

3127 
şazz
->
iáabË
 = (
IÁ”çûEÁry
*è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

3128 (
IÁ”çûEÁry
è* 
ÃwIfCouÁ
);

3129 
	`memıy
(
şazz
->
iáabË
, 
Şdmem
, (
IÁ”çûEÁry
è* 
ÃwIfCouÁ
);

3130 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
Şdmem
);

3134 
ifCouÁ
 = 
idx
;

3135 
şazz
->
iáabËCouÁ
 = 
ifCouÁ
;

3142 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
è|| 
su³rIfCouÁ
 =ğ
ifCouÁ
) {

3144 
»suÉ
 = 
Œue
;

3145 
ba
;

3165 
i
 = 
su³rIfCouÁ
; i < 
ifCouÁ
; i++) {

3170 
	`LOGVV
("INTF:…ool: %d from %s",

3171 
şazz
->
iáabË
[
i
].şazz->
vœtu®M‘hodCouÁ
,

3172 
şazz
->
iáabË
[
i
].şazz->
desütÜ
);

3173 
poŞSize
 +ğ
şazz
->
iáabË
[
i
].şazz->
vœtu®M‘hodCouÁ
;

3176 ià(
poŞSize
 == 0) {

3177 
	`LOGVV
("INTF: didn't find‡ny‚ew interfaces with methods");

3178 
»suÉ
 = 
Œue
;

3179 
ba
;

3182 
şazz
->
ifviPoŞCouÁ
 = 
poŞSize
;

3183 
şazz
->
ifviPoŞ
 = (*è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

3184 
poŞSize
 * (*));

3185 
z­IfvoŞ
 = 
Œue
;

3191 
i
 = 
su³rIfCouÁ
; i < 
ifCouÁ
; i++) {

3192 
CÏssObjeù
* 
š‹rçû
;

3193 
m‘hIdx
;

3195 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
 = cÏzz->
ifviPoŞ
 + 
poŞOff£t
;

3196 
š‹rçû
 = 
şazz
->
iáabË
[
i
].clazz;

3197 
poŞOff£t
 +ğ
š‹rçû
->
vœtu®M‘hodCouÁ
;

3229 
m‘hIdx
 = 0; m‘hIdx < 
š‹rçû
->
vœtu®M‘hodCouÁ
; methIdx++) {

3230 
M‘hod
* 
im‘h
 = &
š‹rçû
->
vœtu®M‘hods
[
m‘hIdx
];

3231 
j
;

3233 
	`IF_LOGVV
() {

3234 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
im‘h
->
´ÙÙy³
);

3235 
	`LOGVV
("INTF: m©chšg '%s' '%s'", 
im‘h
->
Çme
, 
desc
);

3236 
	`ä“
(
desc
);

3239 
j
 = 
şazz
->
vbËCouÁ
-1; j >= 0; j--) {

3240 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(
im‘h
, 
şazz
->
vbË
[
j
])

3243 
	`LOGVV
("INTF: m©ched‡ˆ%d", 
j
);

3244 ià(!
	`dvmIsPublicM‘hod
(
şazz
->
vbË
[
j
])) {

3245 
	`ALOGW
("Implementation of %s.%s is‚ot…ublic",

3246 
şazz
->
desütÜ
, cÏzz->
vbË
[
j
]->
Çme
);

3247 
	`dvmThrowIÎeg®AcûssE¼Ü
(

3249 
ba
;

3251 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘hIdx
] = 
j
;

3255 ià(
j
 < 0) {

3256 
	`IF_ALOGV
() {

3257 * 
desc
 =

3258 
	`dexPrÙoCİyM‘hodDesütÜ
(&
im‘h
->
´ÙÙy³
);

3259 
	`ALOGV
("No match for '%s' '%s' in '%s' (creating miranda)",

3260 
im‘h
->
Çme
, 
desc
, 
şazz
->
desütÜ
);

3261 
	`ä“
(
desc
);

3266 ià(
mœªdaCouÁ
 =ğ
mœªdaAÎoc
) {

3267 
mœªdaAÎoc
 += 8;

3268 ià(
mœªdaLi¡
 =ğ
NULL
) {

3269 
mœªdaLi¡
 = (
M‘hod
**)
	`dvmLš—rAÎoc
(

3270 
şazz
->
şassLßd”
,

3271 
mœªdaAÎoc
 * (
M‘hod
*));

3273 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3274 
mœªdaLi¡
 = (
M‘hod
**)
	`dvmLš—rR—Îoc
(

3275 
şazz
->
şassLßd”
,

3276 
mœªdaLi¡
, 
mœªdaAÎoc
 * (
M‘hod
*));

3278 
	`as£¹
(
mœªdaLi¡
 !ğ
NULL
);

3287 
mœ
;

3288 
mœ
 = 0; mœ < 
mœªdaCouÁ
; mir++) {

3289 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(

3290 
mœªdaLi¡
[
mœ
], 
im‘h
) == 0)

3292 
	`IF_LOGVV
() {

3293 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

3294 &
im‘h
->
´ÙÙy³
);

3295 
	`LOGVV
("MIRANDA dupe: %s‡nd %s %s%s",

3296 
mœªdaLi¡
[
mœ
]->
şazz
->
desütÜ
,

3297 
im‘h
->
şazz
->
desütÜ
,

3298 
im‘h
->
Çme
, 
desc
);

3299 
	`ä“
(
desc
);

3306 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘hIdx
] =

3307 
şazz
->
vbËCouÁ
 + 
mœ
;

3308 
	`LOGVV
("MIRANDA: %s…oints‡t slot %d",

3309 
im‘h
->
Çme
, 
şazz
->
vbËCouÁ
 + 
mœ
);

3312 ià(
mœ
 =ğ
mœªdaCouÁ
) {

3315 
mœªdaLi¡
[
mœªdaCouÁ
++] = 
im‘h
;

3321 ià(
mœªdaCouÁ
 != 0) {

3322 cÚ¡ 
kMªyMœªdas
 = 150;

3323 
M‘hod
* 
ÃwVœtu®M‘hods
;

3324 
M‘hod
* 
m‘h
;

3325 
ŞdM‘hodCouÁ
, 
ŞdVbËCouÁ
;

3327 
i
 = 0; i < 
mœªdaCouÁ
; i++) {

3328 
	`LOGVV
("MIRANDA %d: %s.%s", 
i
,

3329 
mœªdaLi¡
[
i
]->
şazz
->
desütÜ
, mœªdaLi¡[i]->
Çme
);

3331 ià(
mœªdaCouÁ
 > 
kMªyMœªdas
) {

3339 
	`ALOGD
("Note: class %s has %d unimplemented (abstract) methods",

3340 
şazz
->
desütÜ
, 
mœªdaCouÁ
);

3348 ià(
şazz
->
vœtu®M‘hods
 =ğ
NULL
) {

3349 
ÃwVœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şazz
->
şassLßd”
,

3350 (
M‘hod
è* (
şazz
->
vœtu®M‘hodCouÁ
 + 
mœªdaCouÁ
));

3353 
ÃwVœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rR—Îoc
(
şazz
->
şassLßd”
,

3354 
şazz
->
vœtu®M‘hods
,

3355 (
M‘hod
è* (
şazz
->
vœtu®M‘hodCouÁ
 + 
mœªdaCouÁ
));

3357 ià(
ÃwVœtu®M‘hods
 !ğ
şazz
->
vœtu®M‘hods
) {

3374 
	`LOGVV
("MIRANDA fixing vtable…ointers");

3375 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3376 
M‘hod
* 
m‘h
 = 
ÃwVœtu®M‘hods
;

3377 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++)

3378 
şazz
->
vbË
[
m‘h
->
m‘hodIndex
] = meth;

3379 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3382 
ŞdM‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

3383 
şazz
->
vœtu®M‘hods
 = 
ÃwVœtu®M‘hods
;

3384 
şazz
->
vœtu®M‘hodCouÁ
 +ğ
mœªdaCouÁ
;

3386 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3391 
	`as£¹
(
şazz
->
vbË
 !ğ
NULL
);

3392 
şazz
->
vbË
 = (
M‘hod
**è
	`dvmLš—rR—Îoc
(şazz->
şassLßd”
,

3393 
şazz
->
vbË
,

3394 (
M‘hod
*è* (
şazz
->
vbËCouÁ
 + 
mœªdaCouÁ
));

3395 ià(
şazz
->
vbË
 =ğ
NULL
) {

3396 
	`as£¹
(
çl£
);

3397 
ba
;

3399 
z­VbË
 = 
Œue
;

3401 
ŞdVbËCouÁ
 = 
şazz
->
vbËCouÁ
;

3402 
şazz
->
vbËCouÁ
 +ğ
mœªdaCouÁ
;

3412 
m‘h
 = 
şazz
->
vœtu®M‘hods
 + 
ŞdM‘hodCouÁ
;

3413 
i
 = 0; i < 
mœªdaCouÁ
; i++, 
m‘h
++) {

3414 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3415 
	`şÚeM‘hod
(
m‘h
, 
mœªdaLi¡
[
i
]);

3416 
m‘h
->
şazz
 = clazz;

3417 
m‘h
->
acûssFÏgs
 |ğ
ACC_MIRANDA
;

3418 
m‘h
->
m‘hodIndex
 = (
u2
è(
ŞdVbËCouÁ
 + 
i
);

3419 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3422 
şazz
->
vbË
[
ŞdVbËCouÁ
 + 
i
] = 
m‘h
;

3425 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3426 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3459 
»suÉ
 = 
Œue
;

3461 
ba
:

3462 ià(
z­IáabË
)

3463 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
iáabË
);

3464 ià(
z­VbË
)

3465 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3466 ià(
z­IfvoŞ
)

3467 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
ifviPoŞ
);

3468  
»suÉ
;

3469 
	}
}

3488 
boŞ
 
	$š£¹M‘hodStubs
(
CÏssObjeù
* 
şazz
)

3490 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3492 
M‘hod
* 
m‘h
;

3493 
i
;

3495 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

3496 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

3497 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘h
)) {

3498 
	`as£¹
(
m‘h
->
š¢s
 =ğ
NULL
);

3499 
	`as£¹
(
m‘h
->
ÇtiveFunc
 =ğ
NULL
 ||

3500 
m‘h
->
ÇtiveFunc
 =ğ(
D®vikBridgeFunc
)
dvmAb¡¿ùM‘hodStub
);

3502 
m‘h
->
acûssFÏgs
 |ğ
ACC_NATIVE
;

3503 
m‘h
->
ÇtiveFunc
 = (
D®vikBridgeFunc
è
dvmAb¡¿ùM‘hodStub
;

3507 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3508  
Œue
;

3509 
	}
}

3515 
šlše
 
	$sw­F›ld
(
In¡F›ld
* 
pOÃ
, In¡F›ld* 
pTwo
)

3517 
In¡F›ld
 
sw­
;

3519 
	`LOGVV
(" --- sw­ '%s'‡nd '%s'", 
pOÃ
->
Çme
, 
pTwo
->name);

3520 
sw­
 = *
pOÃ
;

3521 *
pOÃ
 = *
pTwo
;

3522 *
pTwo
 = 
sw­
;

3523 
	}
}

3556 
boŞ
 
	$compu‹F›ldOff£ts
(
CÏssObjeù
* 
şazz
)

3558 
f›ldOff£t
;

3559 
i
, 
j
;

3561 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

3563 ià(
şazz
->
su³r
 !ğ
NULL
)

3564 
f›ldOff£t
 = 
şazz
->
su³r
->
objeùSize
;

3566 
f›ldOff£t
 = 
	`OFFSETOF_MEMBER
(
D©aObjeù
, 
š¡ªûD©a
);

3568 
	`LOGVV
("--- compu‹F›ldOff£t '%s'", 
şazz
->
desütÜ
);

3578 
şazz
->
if›ldRefCouÁ
 = 0;

3579 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3580 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

3581 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3582 
c
 = 
pF›ld
->
sigÇtu»
[0];

3584 ià(
c
 != '[' && c != 'L') {

3589 
j
 > 
i
) {

3590 
In¡F›ld
* 
»fF›ld
 = &
şazz
->
if›lds
[
j
--];

3591 
rc
 = 
»fF›ld
->
sigÇtu»
[0];

3593 ià(
rc
 == '[' ||„c == 'L') {

3599 
	`sw­F›ld
(
pF›ld
, 
»fF›ld
);

3603 
c
 = 
rc
;

3605 
şazz
->
if›ldRefCouÁ
++;

3614 
şazz
->
if›ldRefCouÁ
++;

3620 ià(
c
 != '[' && c != 'L')

3623 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3624 
f›ldOff£t
 +ğ(
u4
);

3625 
	`LOGVV
(" --- off£t1 '%s'=%d", 
pF›ld
->
Çme
,pF›ld->
by‹Off£t
);

3633 ià(
i
 !ğ
şazz
->
if›ldCouÁ
 && (
f›ldOff£t
 & 0x04) != 0) {

3634 
	`LOGVV
(" +++‚ot‡ligned");

3636 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3637 
c
 = 
pF›ld
->
sigÇtu»
[0];

3639 ià(
c
 != 'J' && c != 'D') {

3643 
	`as£¹
(
c
 != '[' && c != 'L');

3644 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3645 
f›ldOff£t
 +ğ(
u4
);

3646 
i
++;

3647 
	`LOGVV
(" --- offset2 '%s'=%d",

3648 
pF›ld
->
Çme
,…F›ld->
by‹Off£t
);

3654 
boŞ
 
found
 = 
çl£
;

3655 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3656 
j
 > 
i
) {

3657 
In¡F›ld
* 
sšgËF›ld
 = &
şazz
->
if›lds
[
j
--];

3658 
rc
 = 
sšgËF›ld
->
sigÇtu»
[0];

3660 ià(
rc
 != 'J' &&„c != 'D') {

3661 
	`sw­F›ld
(
pF›ld
, 
sšgËF›ld
);

3663 
	`LOGVV
(" +++ swapped '%s' for‡lignment",

3664 
pF›ld
->
Çme
);

3665 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3666 
f›ldOff£t
 +ğ(
u4
);

3667 
	`LOGVV
(" --- offset3 '%s'=%d",

3668 
pF›ld
->
Çme
,…F›ld->
by‹Off£t
);

3669 
found
 = 
Œue
;

3670 
i
++;

3674 ià(!
found
) {

3675 
	`ALOGV
(" +++ in£¹šg…ad f›ld iÀ'%s'", 
şazz
->
desütÜ
);

3676 
f›ldOff£t
 +ğ(
u4
);

3685 
	`as£¹
(
i
 =ğ
şazz
->
if›ldCouÁ
 || (
f›ldOff£t
 & 0x04) == 0);

3686 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3687  ; 
i
 < 
şazz
->
if›ldCouÁ
; i++) {

3688 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3689 
c
 = 
pF›ld
->
sigÇtu»
[0];

3691 ià(
c
 != 'D' && c != 'J') {

3696 
j
 > 
i
) {

3697 
In¡F›ld
* 
doubËF›ld
 = &
şazz
->
if›lds
[
j
--];

3698 
rc
 = 
doubËF›ld
->
sigÇtu»
[0];

3700 ià(
rc
 == 'D' ||„c == 'J') {

3706 
	`sw­F›ld
(
pF›ld
, 
doubËF›ld
);

3707 
c
 = 
rc
;

3719 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3720 
	`LOGVV
(" --- off£t4 '%s'=%d", 
pF›ld
->
Çme
,pF›ld->
by‹Off£t
);

3721 
f›ldOff£t
 +ğ(
u4
);

3722 ià(
c
 == 'J' || c == 'D')

3723 
f›ldOff£t
 +ğ(
u4
);

3726 #iâdeà
NDEBUG


3730 
j
 = 0;

3731 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

3732 
In¡F›ld
 *
pF›ld
 = &
şazz
->
if›lds
[
i
];

3733 
c
 = 
pF›ld
->
sigÇtu»
[0];

3735 ià(
c
 == 'D' || c == 'J') {

3736 
	`as£¹
((
pF›ld
->
by‹Off£t
 & 0x07) == 0);

3739 ià(
c
 != '[' && c != 'L') {

3740 ià(!
j
) {

3741 
	`as£¹
(
i
 =ğ
şazz
->
if›ldRefCouÁ
);

3742 
j
 = 1;

3744 } ià(
j
) {

3745 
	`as£¹
(
çl£
);

3748 ià(!
j
) {

3749 
	`as£¹
(
şazz
->
if›ldRefCouÁ
 =ğşazz->
if›ldCouÁ
);

3757 
	`as£¹
(!
	`dvmIsTheCÏssCÏss
(
şazz
è|| (
size_t
)
f›ldOff£t
 <

3758 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
š¡ªûD©a
è+ (
şazz
->instanceData));

3760 
şazz
->
objeùSize
 = 
f›ldOff£t
;

3762 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

3763  
Œue
;

3764 
	}
}

3772 
	$throwE¬l›rCÏssFau»
(
CÏssObjeù
* 
şazz
)

3774 
	`ALOGI
("Rejecting„e-init on…reviously-failed class %s v=%p",

3775 
şazz
->
desütÜ
, cÏzz->
v”ifyE¼ÜCÏss
);

3777 ià(
şazz
->
v”ifyE¼ÜCÏss
 =ğ
NULL
) {

3778 
	`dvmThrowNoCÏssDefFoundE¼Ü
(
şazz
->
desütÜ
);

3780 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(
şazz
->
v”ifyE¼ÜCÏss
,

3781 
şazz
->
desütÜ
);

3783 
	}
}

3789 
	$š™SF›lds
(
CÏssObjeù
* 
şazz
)

3791 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

3792 
DexFe
* 
pDexFe
;

3793 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

3794 cÚ¡ 
DexEncodedA¼ay
* 
pV®ueLi¡
;

3795 
EncodedA¼ayI‹¿tÜ
 
™”©Ü
;

3796 
i
;

3798 ià(
şazz
->
sf›ldCouÁ
 == 0) {

3801 ià(
şazz
->
pDvmDex
 =ğ
NULL
) {

3803 
	`ALOGV
("NÙ in™Ÿlizšg stiøf›ld š %s", 
şazz
->
desütÜ
);

3806 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

3808 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDexFe
, 
şazz
->
desütÜ
);

3809 
	`as£¹
(
pCÏssDef
 !ğ
NULL
);

3811 
pV®ueLi¡
 = 
	`dexG‘SticV®uesLi¡
(
pDexFe
, 
pCÏssDef
);

3812 ià(
pV®ueLi¡
 =ğ
NULL
) {

3816 
	`dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(&
™”©Ü
, 
pV®ueLi¡
, 
şazz
);

3823 
i
 = 0; 
	`dvmEncodedA¼ayI‹¿tÜHasNext
(&
™”©Ü
); i++) {

3824 
AÂÙ©iÚV®ue
 
v®ue
;

3825 
boŞ
 
·r£d
 = 
	`dvmEncodedA¼ayI‹¿tÜG‘Next
(&
™”©Ü
, &
v®ue
);

3826 
SticF›ld
* 
sf›ld
 = &
şazz
->
sf›lds
[
i
];

3827 cÚ¡ * 
desütÜ
 = 
sf›ld
->
sigÇtu»
;

3828 
boŞ
 
isObj
 = 
çl£
;

3830 ià(! 
·r£d
) {

3836 
	`ALOGE
("Static initializer…arse failed for %s‡t index %d",

3837 
şazz
->
desütÜ
, 
i
);

3838 
	`dvmAbÜt
();

3843 
desütÜ
[0]) {

3844 'Z': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚBoŞ—n
); ;

3845 'B': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚBy‹
); ;

3846 'C': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚCh¬
); ;

3847 'S': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚShÜt
); ;

3848 'I': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚIÁ
); ;

3849 'J': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚLÚg
); ;

3850 'F': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚFlßt
); ;

3851 'D': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚDoubË
); ;

3852 '[': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚNuÎ
); ;

3854 
v®ue
.
ty³
) {

3855 
kDexAÂÙ©iÚNuÎ
: {

3859 
kDexAÂÙ©iÚSŒšg
: {

3860 
·r£d
 =

3861 (
	`¡rcmp
(
desütÜ
, "Ljava/lang/String;") == 0);

3862 
isObj
 = 
Œue
;

3865 
kDexAÂÙ©iÚTy³
: {

3866 
·r£d
 =

3867 (
	`¡rcmp
(
desütÜ
, "Ljava/lang/Class;") == 0);

3868 
isObj
 = 
Œue
;

3872 
·r£d
 = 
çl£
;

3879 
·r£d
 = 
çl£
;

3884 ià(
·r£d
) {

3888 ià(
isObj
) {

3889 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, (
Objeù
*)
v®ue
.v®ue.
l
);

3890 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
v®ue
.v®ue.
l
, 
£lf
);

3897 
sf›ld
->
v®ue
 = value.value;

3904 
	`ALOGE
("Bogus static initialization: valueype %d in fieldype "

3906 
v®ue
.
ty³
, 
desütÜ
, 
şazz
->desütÜ, 
i
);

3907 
	`dvmAbÜt
();

3910 
	}
}

3921 
boŞ
 
	$com·»DesütÜCÏs£s
(cÚ¡ * 
desütÜ
,

3922 cÚ¡ 
CÏssObjeù
* 
şazz1
, cÚ¡ CÏssObjeù* 
şazz2
)

3924 
CÏssObjeù
* 
»suÉ1
;

3925 
CÏssObjeù
* 
»suÉ2
;

3930 
»suÉ1
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
şazz1
->
şassLßd”
);

3950 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

3951 
boŞ
 
isIn™
 = 
	`dvmLßd”InIn™ŸtšgLi¡
(
»suÉ1
, 
şazz2
->
şassLßd”
);

3952 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

3954 ià(
isIn™
) {

3958  
Œue
;

3963 
»suÉ2
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
şazz2
->
şassLßd”
);

3966 ià(
»suÉ1
 =ğ
NULL
 || 
»suÉ2
 == NULL) {

3967 
	`dvmCË¬Exû±iÚ
(
	`dvmTh»adS–f
());

3968 ià(
»suÉ1
 =ğ
»suÉ2
) {

3984  
Œue
;

3987  
çl£
;

3991  
»suÉ1
 =ğ
»suÉ2
;

3992 
	}
}

4002 
boŞ
 
	$checkM‘hodDesütÜCÏs£s
(cÚ¡ 
M‘hod
* 
m‘h
,

4003 cÚ¡ 
CÏssObjeù
* 
şazz1
, cÚ¡ CÏssObjeù* 
şazz2
)

4005 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

4006 cÚ¡ * 
desütÜ
;

4009 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
m‘h
->
´ÙÙy³
);

4010 
Œue
) {

4011 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

4013 ià(
desütÜ
 =ğ
NULL
)

4016 ià(
desütÜ
[0] == 'L' || descriptor[0] == '[') {

4018 ià(!
	`com·»DesütÜCÏs£s
(
desütÜ
, 
şazz1
, 
şazz2
))

4019  
çl£
;

4024 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

4025 ià(
desütÜ
[0] == 'L' || descriptor[0] == '[') {

4026 ià(!
	`com·»DesütÜCÏs£s
(
desütÜ
, 
şazz1
, 
şazz2
))

4027  
çl£
;

4029  
Œue
;

4030 
	}
}

4066 
boŞ
 
	$v®id©eSu³rDesütÜs
(cÚ¡ 
CÏssObjeù
* 
şazz
)

4068 
i
;

4070 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

4071  
Œue
;

4076 ià(
şazz
->
su³r
 !ğ
NULL
 &&

4077 
şazz
->
şassLßd”
 !ğşazz->
su³r
->classLoader)

4093 cÚ¡ 
M‘hod
* 
m‘h
;

4098 
i
 = 
şazz
->
su³r
->
vbËCouÁ
 - 1; i >= 0; i--) {

4099 
m‘h
 = 
şazz
->
vbË
[
i
];

4100 ià(
m‘h
 !ğ
şazz
->
su³r
->
vbË
[
i
] &&

4101 !
	`checkM‘hodDesütÜCÏs£s
(
m‘h
, 
şazz
->
su³r
, clazz))

4103 
	`ALOGW
("Method mismatch: %s in %s (cl=%p)‡nd super %s (cl=%p)",

4104 
m‘h
->
Çme
, 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

4105 
şazz
->
su³r
->
desütÜ
, cÏzz->su³r->
şassLßd”
);

4106 
	`dvmThrowLškageE¼Ü
(

4108  
çl£
;

4121 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

4122 cÚ¡ 
IÁ”çûEÁry
* 
iáabË
 = &
şazz
->iáabË[
i
];

4124 ià(
şazz
->
şassLßd”
 !ğ
iáabË
->clazz->classLoader) {

4125 cÚ¡ 
CÏssObjeù
* 
içû
 = 
iáabË
->
şazz
;

4126 
j
;

4128 
j
 = 0; j < 
içû
->
vœtu®M‘hodCouÁ
; j++) {

4129 cÚ¡ 
M‘hod
* 
m‘h
;

4130 
vbËIndex
;

4132 
vbËIndex
 = 
iáabË
->
m‘hodIndexA¼ay
[
j
];

4133 
m‘h
 = 
şazz
->
vbË
[
vbËIndex
];

4135 ià(!
	`checkM‘hodDesütÜCÏs£s
(
m‘h
, 
içû
, m‘h->
şazz
)) {

4136 
	`ALOGW
("Method mismatch: %s in %s (cl=%p)‡nd "

4138 
m‘h
->
Çme
, 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

4139 
içû
->
desütÜ
, içû->
şassLßd”
);

4140 
	`dvmThrowLškageE¼Ü
(

4142  
çl£
;

4148  
Œue
;

4149 
	}
}

4168 
boŞ
 
	$dvmIsCÏssIn™Ÿlizšg
(cÚ¡ 
CÏssObjeù
* 
şazz
)

4170 cÚ¡ 
št32_t
* 
addr
 = (cÚ¡ iÁ32_t*)(cÚ¡ *)&
şazz
->
¡©us
;

4171 
št32_t
 
v®ue
 = 
	`ªdroid_©omic_acquœe_lßd
(
addr
);

4172 
CÏssStus
 
¡©us
 = 
¡©ic_ÿ¡
<CÏssStus>(
v®ue
);

4173  (
¡©us
 =ğ
CLASS_INITIALIZING
 &&

4174 
şazz
->
š™Th»adId
 =ğ
	`dvmTh»adS–f
()->
th»adId
);

4175 
	}
}

4241 
boŞ
 
	$dvmIn™CÏss
(
CÏssObjeù
* 
şazz
)

4243 
	`ALOG
(
LOG_DEBUG
,"CLASSLOAD","IN %s: desütÜ: %s",
__FUNCTION__
, 
şazz
->
desütÜ
);

4244 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

4245 if(
gDvm
.
şassIn™Hook
)

4246 
gDvm
.
	`şassIn™Hook
(
şazz
);

4247 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

4248 
u8
 
¡¬tWh’
 = 0;

4250 #ià
LOG_CLASS_LOADING


4251 
boŞ
 
š™ŸlizedByUs
 = 
çl£
;

4254 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

4255 cÚ¡ 
M‘hod
* 
m‘hod
;

4257 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4258 
	`as£¹
(
	`dvmIsCÏssLšked
(
şazz
è|| cÏzz->
¡©us
 =ğ
CLASS_ERROR
);

4263 ià(
şazz
->
¡©us
 < 
CLASS_VERIFIED
) {

4267 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4268 
	`throwE¬l›rCÏssFau»
(
şazz
);

4269 
ba_uÆock
;

4272 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_RESOLVED
);

4273 
	`as£¹
(!
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISPREVERIFIED
));

4275 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
 ||

4276 (
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
 &&

4277 
şazz
->
şassLßd”
 =ğ
NULL
))

4280 
	`ALOGV
("+++‚ot verifying class %s (cl=%p)",

4281 
şazz
->
desütÜ
, cÏzz->
şassLßd”
);

4282 
şazz
->
¡©us
 = 
CLASS_VERIFIED
;

4283 
nov”ify
;

4286 ià(!
gDvm
.
İtimizšg
)

4287 
	`ALOGV
("+++†©v”ify oÀ%s", 
şazz
->
desütÜ
);

4294 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOPTIMIZED
)) {

4295 
	`ALOGW
("Class '%s' was optimized without verification; "

4297 
şazz
->
desütÜ
);

4298 
	`ALOGW
(" ('rm /data/dalvik-cache/*'‡nd„estarto fixhis)");

4299 
v”ify_çed
;

4302 
şazz
->
¡©us
 = 
CLASS_VERIFYING
;

4303 ià(!
	`dvmV”ifyCÏss
(
şazz
)) {

4304 
v”ify_çed
:

4305 
	`dvmThrowV”ifyE¼Ü
(
şazz
->
desütÜ
);

4306 
	`dvmS‘F›ldObjeù
((
Objeù
*è
şazz
,

4307 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
v”ifyE¼ÜCÏss
),

4308 (
Objeù
*è
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
);

4309 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4310 
ba_uÆock
;

4313 
şazz
->
¡©us
 = 
CLASS_VERIFIED
;

4315 
nov”ify
:

4331 ià(!
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOPTIMIZED
è&& !
gDvm
.
İtimizšg
) {

4332 
	`ALOGV
("+++†ate optimize on %s (pv=%d)",

4333 
şazz
->
desütÜ
, 
	`IS_CLASS_FLAG_SET
(şazz, 
CLASS_ISPREVERIFIED
));

4334 
boŞ
 
es£ÁŸlOÆy
 = (
gDvm
.
dexO±Mode
 !ğ
OPTIMIZE_MODE_FULL
);

4335 
	`dvmO±imizeCÏss
(
şazz
, 
es£ÁŸlOÆy
);

4336 
	`SET_CLASS_FLAG
(
şazz
, 
CLASS_ISOPTIMIZED
);

4340 
	`dvmFlushB»akpošts
(
şazz
);

4342 ià(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
)

4343 
ba_uÆock
;

4345 
şazz
->
¡©us
 =ğ
CLASS_INITIALIZING
) {

4347 ià(
şazz
->
š™Th»adId
 =ğ
£lf
->
th»adId
) {

4349 
ba_uÆock
;

4352 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4353 
	`ALOGW
("GLITCH:ƒxception…ending‡t start of class init");

4354 
	`dvmAbÜt
();

4362 
	`dvmObjeùWa™
(
£lf
, (
Objeù
*è
şazz
, 0, 0, 
çl£
);

4369 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4370 
	`ALOGI
("Class init of '%s' failing with wait()ƒxception",

4371 
şazz
->
desütÜ
);

4384 
	`as£¹
(
çl£
);

4385 
	`dvmThrowExû±iÚInIn™Ÿliz”E¼Ü
();

4386 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4387 
ba_uÆock
;

4389 ià(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZING
) {

4390 
	`ALOGI
("Waiting‡gain for class init");

4393 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
 ||

4394 
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

4395 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4400 
	`dvmThrowUn§tisf›dLškE¼Ü
(

4403 
ba_uÆock
;

4407 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4410 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4411 
	`throwE¬l›rCÏssFau»
(
şazz
);

4412  
çl£
;

4415 ià(
gDvm
.
®locProf
.
’abËd
) {

4416 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeN£c
();

4434 ià(!
	`v®id©eSu³rDesütÜs
(
şazz
)) {

4435 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4436 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4437 
ba_uÆock
;

4447 
	`as£¹
(
şazz
->
¡©us
 < 
CLASS_INITIALIZING
);

4449 #ià
LOG_CLASS_LOADING


4451 
	`logCÏssLßd
('+', 
şazz
);

4452 
š™ŸlizedByUs
 = 
Œue
;

4456 
şazz
->
š™Th»adId
 = 
£lf
->
th»adId
;

4457 
	`ªdroid_©omic_»Ëa£_¡Üe
(
CLASS_INITIALIZING
,

4458 (
št32_t
*)(*)&
şazz
->
¡©us
);

4459 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4462 ià(
şazz
->
su³r
 !ğ
NULL
 && cÏzz->su³r->
¡©us
 !ğ
CLASS_INITIALIZED
) {

4463 
	`as£¹
(!
	`dvmIsIÁ”çûCÏss
(
şazz
));

4464 ià(!
	`dvmIn™CÏss
(
şazz
->
su³r
)) {

4465 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4466 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4468 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4469 
ba_nÙify
;

4481 
	`š™SF›lds
(
şazz
);

4485 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<clinit>", "()V");

4486 ià(
m‘hod
 =ğ
NULL
) {

4487 
	`LOGVV
("NØ<şš™> found fÜ %s", 
şazz
->
desütÜ
);

4489 
	`LOGVV
("Invokšg %s.<şš™>", 
şazz
->
desütÜ
);

4490 
JV®ue
 
unu£d
;

4492 
	`dvmC®lM‘hod
(
£lf
, 
m‘hod
, 
NULL
, &
unu£d
);

4495 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4501 
	`ALOGW
("Exception %shrown while initializing %s",

4502 (
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
)->
desütÜ
, clazz->descriptor);

4503 
	`dvmThrowExû±iÚInIn™Ÿliz”E¼Ü
();

4506 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4507 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4510 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4511 
şazz
->
¡©us
 = 
CLASS_INITIALIZED
;

4512 
	`LOGVV
("In™Ÿlized cÏss: %s", 
şazz
->
desütÜ
);

4517 ià(
gDvm
.
®locProf
.
’abËd
 && 
¡¬tWh’
 != 0) {

4518 
u8
 
š™Du¿tiÚ
 = 
	`dvmG‘R–©iveTimeN£c
(è- 
¡¬tWh’
;

4519 
gDvm
.
®locProf
.
şassIn™Time
 +ğ
š™Du¿tiÚ
;

4520 
£lf
->
®locProf
.
şassIn™Time
 +ğ
š™Du¿tiÚ
;

4521 
gDvm
.
®locProf
.
şassIn™CouÁ
++;

4522 
£lf
->
®locProf
.
şassIn™CouÁ
++;

4526 
ba_nÙify
:

4530 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

4532 
ba_uÆock
:

4534 #ià
LOG_CLASS_LOADING


4535 ià(
š™ŸlizedByUs
) {

4537 
	`logCÏssLßd
('-', 
şazz
);

4541 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4543  (
şazz
->
¡©us
 !ğ
CLASS_ERROR
);

4544 
	}
}

4569 
	$dvmS‘N©iveFunc
(
M‘hod
* 
m‘hod
, 
D®vikBridgeFunc
 
func
,

4570 cÚ¡ 
u2
* 
š¢s
)

4572 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

4574 
	`as£¹
(
func
 !ğ
NULL
);

4577 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4578 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4580 ià(
š¢s
 !ğ
NULL
) {

4582 
m‘hod
->
š¢s
 = insns;

4583 
	`ªdroid_©omic_»Ëa£_¡Üe
((
št32_t
è
func
,

4584 (vŞ©
št32_t
*)(*è&
m‘hod
->
ÇtiveFunc
);

4587 
m‘hod
->
ÇtiveFunc
 = 
func
;

4590 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4591 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4592 
	}
}

4600 
	$dvmS‘Regi¡”M­
(
M‘hod
* 
m‘hod
, cÚ¡ 
Regi¡”M­
* 
pM­
)

4602 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

4604 ià(
m‘hod
->
»gi¡”M­
 !ğ
NULL
) {

4606 
	`ALOGV
("NOTE:„egisterMap‡lready set for %s.%s",

4607 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

4610 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
è&& !
	`dvmIsAb¡¿ùM‘hod
(method));

4613 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4614 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4616 
m‘hod
->
»gi¡”M­
 = 
pM­
;

4618 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4619 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4620 
	}
}

4626 
	$fšdCÏssC®lback
(* 
vşazz
, * 
¬g
)

4628 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*)
vşazz
;

4629 cÚ¡ * 
desütÜ
 = (cÚ¡ *è
¬g
;

4631 ià(
	`¡rcmp
(
şazz
->
desütÜ
, descriptor) == 0)

4632  (è
şazz
;

4634 
	}
}

4646 
CÏssObjeù
* 
	$dvmFšdLßdedCÏss
(cÚ¡ * 
desütÜ
)

4649 
»suÉ
;

4651 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4652 
»suÉ
 = 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
fšdCÏssC®lback
,

4653 (*è
desütÜ
);

4654 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4656  (
CÏssObjeù
*è
»suÉ
;

4657 
	}
}

4664 
Objeù
* 
	$dvmG‘Sy¡emCÏssLßd”
()

4666 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

4667 
CÏssObjeù
* 
şCÏss
 = 
gDvm
.
şassJavaLªgCÏssLßd”
;

4669 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şCÏss
è&& !
	`dvmIn™CÏss
(clClass))

4670  
NULL
;

4672 
JV®ue
 
»suÉ
;

4673 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hJavaLªgCÏssLßd”_g‘Sy¡emCÏssLßd”
,

4674 
NULL
, &
»suÉ
);

4675 
Objeù
* 
lßd”
 = (Objeù*)
»suÉ
.
l
;

4676 
	`dvmAddT¿ckedAÎoc
(
lßd”
, 
£lf
);

4677  
lßd”
;

4678 
	}
}

4684 
	$dumpCÏss
(* 
vşazz
, * 
v¬g
)

4686 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

4687 cÚ¡ 
CÏssObjeù
* 
su³r
;

4688 
æags
 = (è
v¬g
;

4689 * 
desc
;

4690 
i
;

4692 ià(
şazz
 =ğ
NULL
) {

4693 
	`ALOGI
("dumpClass: ignoring„equesto dump‚ull class");

4697 ià((
æags
 & 
kDumpCÏssFuÎD‘a
) == 0) {

4698 
boŞ
 
showIn™
 = (
æags
 & 
kDumpCÏssIn™Ÿlized
) != 0;

4699 
boŞ
 
showLßd”
 = (
æags
 & 
kDumpCÏssCÏssLßd”
) != 0;

4700 cÚ¡ * 
š™SŒ
;

4702 
š™SŒ
 = 
	`dvmIsCÏssIn™Ÿlized
(
şazz
) ? "true" : "false";

4704 ià(
showIn™
 && 
showLßd”
)

4705 
	`ALOGI
("% %°%s", 
şazz
->
desütÜ
, cÏzz->
şassLßd”
, 
š™SŒ
);

4706 ià(
showIn™
)

4707 
	`ALOGI
("% %s", 
şazz
->
desütÜ
, 
š™SŒ
);

4708 ià(
showLßd”
)

4709 
	`ALOGI
("% %p", 
şazz
->
desütÜ
, cÏzz->
şassLßd”
);

4711 
	`ALOGI
("%s", 
şazz
->
desütÜ
);

4717 ià((
u4
)
şazz
->
su³r
 > 0x10000 && (u4) clazz->super != (u4)-1)

4718 
su³r
 = 
şazz
->super;

4720 
su³r
 = 
NULL
;

4722 
	`ALOGI
("----- %s '%s' cl=%p ser=0x%08x -----",

4723 
	`dvmIsIÁ”çûCÏss
(
şazz
) ? "interface" : "class",

4724 
şazz
->
desütÜ
, cÏzz->
şassLßd”
, cÏzz->
£rŸlNumb”
);

4725 
	`ALOGI
(" objeùSize=%d (%d from su³r)", (è
şazz
->
objeùSize
,

4726 
su³r
 !ğ
NULL
 ? (èsu³r->
objeùSize
 : -1);

4727 
	`ALOGI
("‡cûss=0x%04x.%04x", 
şazz
->
acûssFÏgs
 >> 16,

4728 
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

4729 ià(
su³r
 !ğ
NULL
)

4730 
	`ALOGI
(" su³r='%s' (ş=%p)", 
su³r
->
desütÜ
, su³r->
şassLßd”
);

4731 ià(
	`dvmIsA¼ayCÏss
(
şazz
)) {

4732 
	`ALOGI
(" dimensions=%dƒlementClass=%s",

4733 
şazz
->
¬¿yDim
, cÏzz->
–em’tCÏss
->
desütÜ
);

4735 ià(
şazz
->
iáabËCouÁ
 > 0) {

4736 
	`ALOGI
(" iÁ”çû (%d):", 
şazz
->
iáabËCouÁ
);

4737 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

4738 
IÁ”çûEÁry
* 
’t
 = &
şazz
->
iáabË
[
i
];

4739 
j
;

4741 
	`ALOGI
(" %2d: %s (cl=%p)",

4742 
i
, 
’t
->
şazz
->
desütÜ
,ƒÁ->şazz->
şassLßd”
);

4745 ià(
çl£
 && 
’t
->
m‘hodIndexA¼ay
 !ğ
NULL
) {

4746 
j
 = 0; j < 
’t
->
şazz
->
vœtu®M‘hodCouÁ
; j++)

4747 
	`ALOGI
(" %2d: %d %s %s",

4748 
j
, 
’t
->
m‘hodIndexA¼ay
[j],

4749 
’t
->
şazz
->
vœtu®M‘hods
[
j
].
Çme
,

4750 
şazz
->
vbË
[
’t
->
m‘hodIndexA¼ay
[
j
]]->
Çme
);

4754 ià(!
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

4755 
	`ALOGI
(" vbË (%dƒÁr›s, %d iÀsu³r):", 
şazz
->
vbËCouÁ
,

4756 
su³r
 !ğ
NULL
 ? su³r->
vbËCouÁ
 : 0);

4757 
i
 = 0; i < 
şazz
->
vbËCouÁ
; i++) {

4758 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
şazz
->
vbË
[
i
]->
´ÙÙy³
);

4759 
	`ALOGI
(" %s%2d: %p %20s %s",

4760 (
i
 !ğ
şazz
->
vbË
[i]->
m‘hodIndex
) ? "*** " : "",

4761 (
u4
è
şazz
->
vbË
[
i
]->
m‘hodIndex
, clazz->vtable[i],

4762 
şazz
->
vbË
[
i
]->
Çme
, 
desc
);

4763 
	`ä“
(
desc
);

4765 
	`ALOGI
(" dœeù m‘hod (%dƒÁr›s):", 
şazz
->
dœeùM‘hodCouÁ
);

4766 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

4767 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

4768 &
şazz
->
dœeùM‘hods
[
i
].
´ÙÙy³
);

4769 
	`ALOGI
(" %2d: %20 %s", 
i
, 
şazz
->
dœeùM‘hods
[i].
Çme
,

4770 
desc
);

4771 
	`ä“
(
desc
);

4774 
	`ALOGI
(" iÁ”çû m‘hod (%d):", 
şazz
->
vœtu®M‘hodCouÁ
);

4775 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

4776 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

4777 &
şazz
->
vœtu®M‘hods
[
i
].
´ÙÙy³
);

4778 
	`ALOGI
(" %2d: %2d %20 %s", 
i
,

4779 (
u4
è
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
,

4780 
şazz
->
vœtu®M‘hods
[
i
].
Çme
,

4781 
desc
);

4782 
	`ä“
(
desc
);

4785 ià(
şazz
->
sf›ldCouÁ
 > 0) {

4786 
	`ALOGI
(" stiøf›ld (%dƒÁr›s):", 
şazz
->
sf›ldCouÁ
);

4787 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

4788 
	`ALOGI
(" %2d: %20 %s", 
i
, 
şazz
->
sf›lds
[i].
Çme
,

4789 
şazz
->
sf›lds
[
i
].
sigÇtu»
);

4792 ià(
şazz
->
if›ldCouÁ
 > 0) {

4793 
	`ALOGI
(" in¡ªû f›ld (%dƒÁr›s):", 
şazz
->
if›ldCouÁ
);

4794 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

4795 
	`ALOGI
(" %2d: %20 %s", 
i
, 
şazz
->
if›lds
[i].
Çme
,

4796 
şazz
->
if›lds
[
i
].
sigÇtu»
);

4800 
	}
}

4807 
	$dvmDumpCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
æags
)

4809 
	`dumpCÏss
((*è
şazz
, (*è
æags
);

4810 
	}
}

4815 
	$dvmDumpAÎCÏs£s
(
æags
)

4817 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4818 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
dumpCÏss
, (*è
æags
);

4819 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4820 
	}
}

4825 
	$dvmG‘NumLßdedCÏs£s
()

4827 
couÁ
;

4828 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4829 
couÁ
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

4830 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4831  
couÁ
;

4832 
	}
}

4837 
	$dvmDumpLßd”Sts
(cÚ¡ * 
msg
)

4839 
	`ALOGV
("VM stats (%s): cls=%d/%d meth=%d ifld=%d sfld=%d†inear=%d",

4840 
msg
, 
gDvm
.
numLßdedCÏs£s
, 
	`dvmHashTabËNumEÁr›s
(gDvm.
lßdedCÏs£s
),

4841 
gDvm
.
numDeş¬edM‘hods
, gDvm.
numDeş¬edIn¡F›lds
,

4842 
gDvm
.
numDeş¬edSticF›lds
, gDvm.
pBoÙLßd”AÎoc
->
curOff£t
);

4843 #ifdeà
COUNT_PRECISE_METHODS


4844 
	`ALOGI
("GC…recise methods: %d",

4845 
	`dvmPoš‹rS‘G‘CouÁ
(
gDvm
.
´eci£M‘hods
));

4847 
	}
}

4860 
	$dvmCom·»M‘hodNamesAndPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

4861 cÚ¡ 
M‘hod
* 
m‘hod2
)

4863 
»suÉ
 = 
	`¡rcmp
(
m‘hod1
->
Çme
, 
m‘hod2
->name);

4865 ià(
»suÉ
 != 0) {

4866  
»suÉ
;

4869  
	`dvmCom·»M‘hodPrÙos
(
m‘hod1
, 
m‘hod2
);

4870 
	}
}

4878 
	$dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

4879 cÚ¡ 
M‘hod
* 
m‘hod2
)

4881 
»suÉ
 = 
	`¡rcmp
(
m‘hod1
->
Çme
, 
m‘hod2
->name);

4883 ià(
»suÉ
 != 0) {

4884  
»suÉ
;

4887  
	`dvmCom·»M‘hodP¬am‘”PrÙos
(
m‘hod1
, 
m‘hod2
);

4888 
	}
}

4896 
	$dvmCom·»NamePrÙoAndM‘hod
(cÚ¡ * 
Çme
,

4897 cÚ¡ 
DexPrÙo
* 
´Ùo
, cÚ¡ 
M‘hod
* 
m‘hod
)

4899 
»suÉ
 = 
	`¡rcmp
(
Çme
, 
m‘hod
->name);

4901 ià(
»suÉ
 != 0) {

4902  
»suÉ
;

4905  
	`dexPrÙoCom·»
(
´Ùo
, &
m‘hod
->
´ÙÙy³
);

4906 
	}
}

4914 
	$dvmCom·»NameDesütÜAndM‘hod
(cÚ¡ * 
Çme
,

4915 cÚ¡ * 
desütÜ
, cÚ¡ 
M‘hod
* 
m‘hod
)

4917 
»suÉ
 = 
	`¡rcmp
(
Çme
, 
m‘hod
->name);

4919 ià(
»suÉ
 != 0) {

4920  
»suÉ
;

4923  
	`dvmCom·»DesütÜAndM‘hodPrÙo
(
desütÜ
, 
m‘hod
);

4924 
	}
}

	@vm/oo/Class.h

19 #iâdeà
DALVIK_OO_CLASS_H_


20 
	#DALVIK_OO_CLASS_H_


	)

37 
	eCÏssP©hEÁryKšd
 {

38 
	mkC³Unknown
 = 0,

39 
	mkC³J¬
,

40 
	mkC³Dex
,

41 
	mkC³La¡EÁry


44 
	sCÏssP©hEÁry
 {

45 
CÏssP©hEÁryKšd
 
	mkšd
;

46 * 
	mfeName
;

47 * 
	m±r
;

50 
boŞ
 
dvmCÏssS¹up
();

51 
dvmCÏssShutdown
();

52 
boŞ
 
dvmP»pBoÙCÏssP©h
(boŞ 
isNÜm®S¹
);

57 
dvmG‘BoÙP©hSize
();

58 
SŒšgObjeù
* 
dvmG‘BoÙP©hResourû
(cÚ¡ * 
Çme
, 
idx
);

59 
dvmDumpBoÙCÏssP©h
();

64 
boŞ
 
dvmCÏssP©hCÚšs
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
, cÚ¡ * 
·th
);

69 
dvmS‘CÏssS”ŸlNumb”
(
CÏssObjeù
* 
şazz
);

76 
CÏssObjeù
* 
dvmFšdPrim™iveCÏss
(
ty³
);

84 
CÏssObjeù
* 
dvmFšdCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

85 
CÏssObjeù
* 
dvmFšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

90 
CÏssObjeù
* 
dvmFšdSy¡emCÏss
(cÚ¡ * 
desütÜ
);

91 
CÏssObjeù
* 
dvmFšdSy¡emCÏssNoIn™
(cÚ¡ * 
desütÜ
);

103 
CÏssObjeù
* 
dvmFšdLßdedCÏss
(cÚ¡ * 
desütÜ
);

110 
CÏssObjeù
* 
dvmDefšeCÏss
(
DvmDex
* 
pDvmDex
, cÚ¡ * 
desütÜ
,

111 
Objeù
* 
şassLßd”
);

118 
boŞ
 
dvmLškCÏss
(
CÏssObjeù
* 
şazz
);

123 
INLINE
 
boŞ
 
	$dvmIsCÏssIn™Ÿlized
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

124  (
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
);

125 
	}
}

126 
boŞ
 
dvmIsCÏssIn™Ÿlizšg
(cÚ¡ 
CÏssObjeù
* 
şazz
);

131 "C" 
boŞ
 
dvmIn™CÏss
(
CÏssObjeù
* 
şazz
);

136 
Objeù
* 
dvmG‘Sy¡emCÏssLßd”
();

141 
CÏssObjeù
* 
dvmLookupCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

142 
boŞ
 
uÅ»pOkay
);

143 
dvmF»eCÏssIÂ¬ds
(
CÏssObjeù
* 
şazz
);

144 
boŞ
 
dvmAddCÏssToHash
(
CÏssObjeù
* 
şazz
);

145 
dvmAddIn™ŸtšgLßd”
(
CÏssObjeù
* 
şazz
, 
Objeù
* 
lßd”
);

146 
boŞ
 
dvmLßd”InIn™ŸtšgLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
Objeù
* 
lßd”
);

152 
dvmS‘N©iveFunc
(
M‘hod
* 
m‘hod
, 
D®vikBridgeFunc
 
func
, cÚ¡ 
u2
* 
š¢s
);

157 
dvmS‘Regi¡”M­
(
M‘hod
* 
m‘hod
, cÚ¡ 
Regi¡”M­
* 
pM­
);

165 
dvmMakeCodeR—dWr™e
(
M‘hod
* 
m‘h
);

166 
dvmMakeCodeR—dOÆy
(
M‘hod
* 
m‘h
);

171 
dvmS‘BoÙP©hExŒaDex
(
DvmDex
* 
pDvmDex
);

176 
dvmDumpCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
æags
);

177 
dvmDumpAÎCÏs£s
(
æags
);

178 
dvmDumpLßd”Sts
(cÚ¡ * 
msg
);

179 
dvmG‘NumLßdedCÏs£s
();

182 
	#kDumpCÏssFuÎD‘a
 1

	)

183 
	#kDumpCÏssCÏssLßd”
 (1 << 1)

	)

184 
	#kDumpCÏssIn™Ÿlized
 (1 << 2)

	)

192 
INLINE
 * 
	$dvmCİyDesütÜSŒšgFromM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
,

193 
DexSŒšgCache
 *
pCache
)

195 cÚ¡ * 
»suÉ
 =

196 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
, 
pCache
);

197  
	`dexSŒšgCacheEnsu»Cİy
(
pCache
, 
»suÉ
);

198 
	}
}

206 
INLINE
 
	$dvmCompu‹M‘hodArgsSize
(cÚ¡ 
M‘hod
* 
m‘hod
)

208  
	`dexPrÙoCompu‹ArgsSize
(&
m‘hod
->
´ÙÙy³
);

209 
	}
}

215 
INLINE
 
	$dvmCom·»M‘hodPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

216 cÚ¡ 
M‘hod
* 
m‘hod2
)

218  
	`dexPrÙoCom·»
(&
m‘hod1
->
´ÙÙy³
, &
m‘hod2
->prototype);

219 
	}
}

226 
INLINE
 
	$dvmCom·»M‘hodP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

227 cÚ¡ 
M‘hod
* 
m‘hod2
)

229  
	`dexPrÙoCom·»P¬am‘”s
(&
m‘hod1
->
´ÙÙy³
, &
m‘hod2
->prototype);

230 
	}
}

237 
dvmCom·»M‘hodNamesAndPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

238 cÚ¡ 
M‘hod
* 
m‘hod2
);

246 
dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

247 cÚ¡ 
M‘hod
* 
m‘hod2
);

254 
INLINE
 
	$dvmCom·»DesütÜAndM‘hodPrÙo
(cÚ¡ * 
desütÜ
,

255 cÚ¡ 
M‘hod
* 
m‘hod
)

258  -
	`dexPrÙoCom·»ToDesütÜ
(&
m‘hod
->
´ÙÙy³
, 
desütÜ
);

259 
	}
}

267 
dvmCom·»NamePrÙoAndM‘hod
(cÚ¡ * 
Çme
,

268 cÚ¡ 
DexPrÙo
* 
´Ùo
, cÚ¡ 
M‘hod
* 
m‘hod
);

276 
dvmCom·»NameDesütÜAndM‘hod
(cÚ¡ * 
Çme
,

277 cÚ¡ * 
desütÜ
, cÚ¡ 
M‘hod
* 
m‘hod
);

282 
size_t
 
dvmCÏssObjeùSize
(cÚ¡ 
CÏssObjeù
 *
şazz
);

	@vm/oo/Object.cpp

20 
	~"D®vik.h
"

27 
In¡F›ld
* 
	$dvmFšdIn¡ªûF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

28 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

30 
In¡F›ld
* 
pF›ld
;

31 
i
;

33 
	`as£¹
(
şazz
 !ğ
NULL
);

41 
pF›ld
 = 
şazz
->
if›lds
;

42 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++, 
pF›ld
++) {

43 ià(
	`¡rcmp
(
f›ldName
, 
pF›ld
->
Çme
) == 0 &&

44 
	`¡rcmp
(
sigÇtu»
, 
pF›ld
->signature) == 0)

46  
pF›ld
;

50  
NULL
;

51 
	}
}

61 
In¡F›ld
* 
	$dvmFšdIn¡ªûF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

62 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

64 
In¡F›ld
* 
pF›ld
;

69 
pF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

70 ià(
pF›ld
 !ğ
NULL
)

71  
pF›ld
;

73 ià(
şazz
->
su³r
 !ğ
NULL
)

74  
	`dvmFšdIn¡ªûF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

76  
NULL
;

77 
	}
}

85 
SticF›ld
* 
	$dvmFšdSticF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

86 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

88 cÚ¡ 
SticF›ld
* 
pF›ld
;

89 
i
;

91 
	`as£¹
(
şazz
 !ğ
NULL
);

98 
pF›ld
 = &
şazz
->
sf›lds
[0];

99 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++, 
pF›ld
++) {

100 ià(
	`¡rcmp
(
f›ldName
, 
pF›ld
->
Çme
) == 0 &&

101 
	`¡rcmp
(
sigÇtu»
, 
pF›ld
->signature) == 0)

103  (
SticF›ld
*è
pF›ld
;

107  
NULL
;

108 
	}
}

115 
SticF›ld
* 
	$dvmFšdSticF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

116 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

118 
SticF›ld
* 
pF›ld
;

123 
pF›ld
 = 
	`dvmFšdSticF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

124 ià(
pF›ld
 !ğ
NULL
)

125  
pF›ld
;

134 
i
 = 0;

135 ià(
şazz
->
su³r
 !ğ
NULL
) {

136 
	`as£¹
(
şazz
->
iáabËCouÁ
 >ğşazz->
su³r
->iftableCount);

137 
i
 = 
şazz
->
su³r
->
iáabËCouÁ
;

139  ; 
i
 < 
şazz
->
iáabËCouÁ
; i++) {

140 
CÏssObjeù
* 
içû
 = 
şazz
->
iáabË
[
i
].clazz;

141 
pF›ld
 = 
	`dvmFšdSticF›ld
(
içû
, 
f›ldName
, 
sigÇtu»
);

142 ià(
pF›ld
 !ğ
NULL
)

143  
pF›ld
;

146 ià(
şazz
->
su³r
 !ğ
NULL
)

147  
	`dvmFšdSticF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

149  
NULL
;

150 
	}
}

165 
F›ld
* 
	$dvmFšdF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
f›ldName
,

166 cÚ¡ * 
sigÇtu»
)

168 
F›ld
* 
pF›ld
;

174 
pF›ld
 = (
F›ld
*è
	`dvmFšdSticF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

175 ià(
pF›ld
 !ğ
NULL
)

176  
pF›ld
;

177 
pF›ld
 = (
F›ld
*è
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

178 ià(
pF›ld
 !ğ
NULL
)

179  
pF›ld
;

185 
i
 = 0;

186 ià(
şazz
->
su³r
 !ğ
NULL
) {

187 
	`as£¹
(
şazz
->
iáabËCouÁ
 >ğşazz->
su³r
->iftableCount);

188 
i
 = 
şazz
->
su³r
->
iáabËCouÁ
;

190  ; 
i
 < 
şazz
->
iáabËCouÁ
; i++) {

191 
CÏssObjeù
* 
içû
 = 
şazz
->
iáabË
[
i
].clazz;

192 
pF›ld
 = (
F›ld
*è
	`dvmFšdSticF›ld
(
içû
, 
f›ldName
, 
sigÇtu»
);

193 ià(
pF›ld
 !ğ
NULL
)

194  
pF›ld
;

197 ià(
şazz
->
su³r
 !ğ
NULL
)

198  
	`dvmFšdF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

200  
NULL
;

201 
	}
}

208 
šlše
 
	$com·»M‘hodH–³r
(
M‘hod
* 
m‘hod
, cÚ¡ * 
m‘hodName
,

209 cÚ¡ * 
»tuºTy³
, 
size_t
 
¬gCouÁ
, cÚ¡ ** 
¬gTy³s
)

211 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

212 cÚ¡ 
DexPrÙo
* 
´Ùo
;

214 ià(
	`¡rcmp
(
m‘hodName
, 
m‘hod
->
Çme
) != 0) {

218 
´Ùo
 = &
m‘hod
->
´ÙÙy³
;

220 ià(
	`¡rcmp
(
»tuºTy³
, 
	`dexPrÙoG‘R‘uºTy³
(
´Ùo
)) != 0) {

224 ià(
	`dexPrÙoG‘P¬am‘”CouÁ
(
´Ùo
è!ğ
¬gCouÁ
) {

228 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, 
´Ùo
);

230  ; 
¬gCouÁ
 !ğ0;‡rgCouÁ--, 
¬gTy³s
++) {

231 cÚ¡ * 
¬gTy³
 = *
¬gTy³s
;

232 cÚ¡ * 
·¿mTy³
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

234 ià(
·¿mTy³
 =ğ
NULL
) {

237 } ià(
	`¡rcmp
(
¬gTy³
, 
·¿mTy³
) != 0) {

243 ià(
¬gCouÁ
 == 0) {

245 ià(
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
è=ğ
NULL
) {

252 
	}
}

258 
šlše
 
size_t
 
	$couÁArgsAndFšdR‘uºTy³
(cÚ¡ * 
desütÜ
,

259 cÚ¡ ** 
pR‘uºTy³
)

261 
size_t
 
couÁ
 = 0;

262 
boŞ
 
bogus
 = 
çl£
;

263 
boŞ
 
dÚe
 = 
çl£
;

265 
	`as£¹
(*
desütÜ
 == '(');

266 
desütÜ
++;

268 !
dÚe
) {

269 *
desütÜ
) {

272 
couÁ
++;

277 
desütÜ
++;

278 } *
desütÜ
 == '[');

284 
desütÜ
--;

289 
desütÜ
++;

290 } (*
desütÜ
 != ';') && (*descriptor != '\0'));

291 
couÁ
++;

292 ià(*
desütÜ
 == '\0') {

294 
dÚe
 = 
Œue
;

295 
bogus
 = 
Œue
;

304 
dÚe
 = 
Œue
;

309 
dÚe
 = 
Œue
;

310 
bogus
 = 
Œue
;

315 
desütÜ
++;

318 ià(
bogus
) {

319 *
pR‘uºTy³
 = 
NULL
;

323 *
pR‘uºTy³
 = 
desütÜ
;

324  
couÁ
;

325 
	}
}

331 
šlše
 
	$cİyTy³s
(* 
bufãr
, cÚ¡ ** 
¬gTy³s
,

332 
size_t
 
¬gCouÁ
, cÚ¡ * 
desütÜ
)

334 
size_t
 
i
;

335 
c
;

338 
desütÜ
++;

340 
i
 = 0; i < 
¬gCouÁ
; i++) {

341 
¬gTy³s
[
i
] = 
bufãr
;

345 
c
 = *(
desütÜ
++);

346 *(
bufãr
++èğ
c
;

347 } 
c
 == '[');

349 ià(
c
 == 'L') {

352 
c
 = *(
desütÜ
++);

353 *(
bufãr
++èğ
c
;

354 } 
c
 != ';');

357 *(
bufãr
++) = '\0';

359 
	}
}

365 
M‘hod
* 
	$fšdM‘hodInLi¡ByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

366 
boŞ
 
fšdVœtu®
, boŞ 
isH›r
, cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
)

368 cÚ¡ * 
»tuºTy³
;

369 
size_t
 
¬gCouÁ
 = 
	`couÁArgsAndFšdR‘uºTy³
(
desütÜ
, &
»tuºTy³
);

371 ià(
»tuºTy³
 =ğ
NULL
) {

372 
	`ALOGW
("Bogu m‘hod desütÜ: %s", 
desütÜ
);

373  
NULL
;

381 
bufãr
[
¬gCouÁ
 + (
»tuºTy³
 - 
desütÜ
) - 2];

382 cÚ¡ * 
¬gTy³s
[
¬gCouÁ
];

384 
	`cİyTy³s
(
bufãr
, 
¬gTy³s
, 
¬gCouÁ
, 
desütÜ
);

386 
şazz
 !ğ
NULL
) {

387 
M‘hod
* 
m‘hods
;

388 
size_t
 
m‘hodCouÁ
;

389 
size_t
 
i
;

391 ià(
fšdVœtu®
) {

392 
m‘hods
 = 
şazz
->
vœtu®M‘hods
;

393 
m‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

395 
m‘hods
 = 
şazz
->
dœeùM‘hods
;

396 
m‘hodCouÁ
 = 
şazz
->
dœeùM‘hodCouÁ
;

399 
i
 = 0; i < 
m‘hodCouÁ
; i++) {

400 
M‘hod
* 
m‘hod
 = &
m‘hods
[
i
];

401 ià(
	`com·»M‘hodH–³r
(
m‘hod
, 
Çme
, 
»tuºTy³
, 
¬gCouÁ
,

402 
¬gTy³s
) == 0) {

403  
m‘hod
;

407 ià(! 
isH›r
) {

411 
şazz
 = cÏzz->
su³r
;

414  
NULL
;

415 
	}
}

425 
M‘hod
* 
	$fšdM‘hodInLi¡ByPrÙo
(cÚ¡ 
CÏssObjeù
* 
şazz
,

426 
M‘hodTy³
 
wª‹dTy³
, 
boŞ
 
isH›r
, cÚ¡ * 
Çme
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

428 
şazz
 !ğ
NULL
) {

429 
i
;

434 ià(
wª‹dTy³
 =ğ
METHOD_VIRTUAL
 || wª‹dTy³ =ğ
METHOD_UNKNOWN
) {

435 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

436 
M‘hod
* 
m‘hod
 = &
şazz
->
vœtu®M‘hods
[
i
];

437 ià(
	`dvmCom·»NamePrÙoAndM‘hod
(
Çme
, 
´Ùo
, 
m‘hod
) == 0) {

438  
m‘hod
;

442 ià(
wª‹dTy³
 =ğ
METHOD_DIRECT
 || wª‹dTy³ =ğ
METHOD_UNKNOWN
) {

443 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

444 
M‘hod
* 
m‘hod
 = &
şazz
->
dœeùM‘hods
[
i
];

445 ià(
	`dvmCom·»NamePrÙoAndM‘hod
(
Çme
, 
´Ùo
, 
m‘hod
) == 0) {

446  
m‘hod
;

451 ià(! 
isH›r
) {

455 
şazz
 = cÏzz->
su³r
;

458  
NULL
;

459 
	}
}

468 
M‘hod
* 
	$dvmFšdVœtu®M‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

469 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

471  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
Œue
, 
çl£
,

472 
m‘hodName
, 
desütÜ
);

477 
	}
}

489 
M‘hod
* 
	$dvmFšdVœtu®M‘hodByName
(cÚ¡ 
CÏssObjeù
* 
şazz
,

490 cÚ¡ * 
m‘hodName
)

492 
M‘hod
* 
m‘hods
 = 
şazz
->
vœtu®M‘hods
;

493 
m‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

494 
i
;

496 
i
 = 0; i < 
m‘hodCouÁ
; i++) {

497 ià(
	`¡rcmp
(
m‘hods
[
i
].
Çme
, 
m‘hodName
) == 0)

498  &
m‘hods
[
i
];

501  
NULL
;

502 
	}
}

511 
M‘hod
* 
	$dvmFšdVœtu®M‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

512 cÚ¡ 
DexPrÙo
* 
´Ùo
)

514  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_VIRTUAL
, 
çl£
, 
m‘hodName
,

515 
´Ùo
);

516 
	}
}

524 
M‘hod
* 
	$dvmFšdVœtu®M‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

525 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

527  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
Œue
,rue,

528 
m‘hodName
, 
desütÜ
);

529 
	}
}

537 
M‘hod
* 
	$dvmFšdVœtu®M‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

538 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

540  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_VIRTUAL
, 
Œue
, 
m‘hodName
,

541 
´Ùo
);

542 
	}
}

549 
M‘hod
* 
	$dvmFšdIÁ”çûM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
içû
,

550 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

552 
M‘hod
* 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
içû
,

553 
m‘hodName
, 
desütÜ
);

554 ià(
»sM‘hod
 =ğ
NULL
) {

556 
i
;

557 
i
 = 0; i < 
içû
->
iáabËCouÁ
; i++) {

558 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
içû
->
iáabË
[
i
].
şazz
,

559 
m‘hodName
, 
desütÜ
);

560 ià(
»sM‘hod
 !ğ
NULL
)

564  
»sM‘hod
;

565 
	}
}

572 
M‘hod
* 
	$dvmFšdIÁ”çûM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
içû
,

573 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

575 
M‘hod
* 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
içû
, 
m‘hodName
, 
´Ùo
);

576 ià(
»sM‘hod
 =ğ
NULL
) {

578 
i
;

579 
i
 = 0; i < 
içû
->
iáabËCouÁ
; i++) {

580 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
içû
->
iáabË
[
i
].
şazz
,

581 
m‘hodName
, 
´Ùo
);

582 ià(
»sM‘hod
 !ğ
NULL
)

586  
»sM‘hod
;

587 
	}
}

594 
M‘hod
* 
	$dvmFšdDœeùM‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

595 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

597  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
çl£
, false,

598 
m‘hodName
, 
desütÜ
);

599 
	}
}

608 
M‘hod
* 
	$dvmFšdDœeùM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

609 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

611  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
çl£
, 
Œue
,

612 
m‘hodName
, 
desütÜ
);

613 
	}
}

620 
M‘hod
* 
	$dvmFšdDœeùM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

621 cÚ¡ 
DexPrÙo
* 
´Ùo
)

623  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_DIRECT
, 
çl£
, 
m‘hodName
,

624 
´Ùo
);

625 
	}
}

633 
M‘hod
* 
	$dvmFšdDœeùM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

634 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

636  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_DIRECT
, 
Œue
, 
m‘hodName
,

637 
´Ùo
);

638 
	}
}

653 
M‘hod
* 
	$dvmFšdM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

654 cÚ¡ 
DexPrÙo
* 
´Ùo
)

656  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_UNKNOWN
, 
Œue
, 
m‘hodName
,

657 
´Ùo
);

658 
	}
}

672 cÚ¡ 
M‘hod
* 
	$dvmG‘Vœtu®izedM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
,

673 cÚ¡ 
M‘hod
* 
m‘h
)

675 
M‘hod
* 
aùu®M‘h
;

676 
m‘hodIndex
;

678 ià(
	`dvmIsDœeùM‘hod
(
m‘h
)) {

680 
	`as£¹
(!
	`dvmIsSticM‘hod
(
m‘h
));

681  
m‘h
;

691 ià(
	`dvmIsIÁ”çûCÏss
(
m‘h
->
şazz
)) {

692 
i
;

694 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

695 ià(
şazz
->
iáabË
[
i
].şazz =ğ
m‘h
->clazz)

698 ià(
i
 =ğ
şazz
->
iáabËCouÁ
) {

699 
	`dvmThrowIncom·tibËCÏssChªgeE¼Ü
(

701  
NULL
;

704 
m‘hodIndex
 = 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘h
->methodIndex];

706 
m‘hodIndex
 = 
m‘h
->methodIndex;

709 
	`as£¹
(
m‘hodIndex
 >ğ0 && m‘hodIndex < 
şazz
->
vbËCouÁ
);

710 
aùu®M‘h
 = 
şazz
->
vbË
[
m‘hodIndex
];

715 ià(
	`dvmIsAb¡¿ùM‘hod
(
aùu®M‘h
)) {

716 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
(
NULL
);

717  
NULL
;

719 
	`as£¹
(!
	`dvmIsMœªdaM‘hod
(
aùu®M‘h
));

721  
aùu®M‘h
;

722 
	}
}

727 cÚ¡ * 
	$dvmG‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘h
)

734  
m‘h
->
şazz
->
sourûFe
;

735 
	}
}

740 
	$dvmDumpObjeù
(cÚ¡ 
Objeù
* 
obj
)

742 
CÏssObjeù
* 
şazz
;

743 
i
;

745 ià(
obj
 =ğ
NULL
 || obj->
şazz
 == NULL) {

746 
	`ALOGW
("Null or malformed object‚ot dumped");

750 
şazz
 = 
obj
->clazz;

751 
	`ALOGD
("----- Object dump: %p (%s, %d bytes) -----",

752 
obj
, 
şazz
->
desütÜ
, (èşazz->
objeùSize
);

754 
	`ALOGD
(" Fields:");

755 
şazz
 !ğ
NULL
) {

756 
	`ALOGD
(" -- %s", 
şazz
->
desütÜ
);

757 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

758 cÚ¡ 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

759 
ty³
 = 
pF›ld
->
sigÇtu»
[0];

761 ià(
ty³
 == 'F' ||ype == 'D') {

762 
dv®
;

764 ià(
ty³
 == 'F')

765 
dv®
 = 
	`dvmG‘F›ldFlßt
(
obj
, 
pF›ld
->
by‹Off£t
);

767 
dv®
 = 
	`dvmG‘F›ldDoubË
(
obj
, 
pF›ld
->
by‹Off£t
);

769 
	`ALOGD
(" %2d: '%s' '%s'‡f=%04x off=%d %.3f", 
i
,

770 
pF›ld
->
Çme
,…F›ld->
sigÇtu»
,

771 
pF›ld
->
acûssFÏgs
,…F›ld->
by‹Off£t
, 
dv®
);

773 
u8
 
lv®
;

775 ià(
ty³
 == 'J')

776 
lv®
 = 
	`dvmG‘F›ldLÚg
(
obj
, 
pF›ld
->
by‹Off£t
);

777 ià(
ty³
 == 'Z')

778 
lv®
 = 
	`dvmG‘F›ldBoŞ—n
(
obj
, 
pF›ld
->
by‹Off£t
);

780 
lv®
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
pF›ld
->
by‹Off£t
);

782 
	`ALOGD
(" %2d: '%s' '%s'‡f=%04x off=%d 0x%08Îx", 
i
,

783 
pF›ld
->
Çme
,…F›ld->
sigÇtu»
,

784 
pF›ld
->
acûssFÏgs
,…F›ld->
by‹Off£t
, 
lv®
);

788 
şazz
 = cÏzz->
su³r
;

790 ià(
	`dvmIsCÏssObjeù
(
obj
)) {

791 
	`ALOGD
(" Static fields:");

792 cÚ¡ 
SticF›ld
* 
sf›lds
 = &((
CÏssObjeù
 *)
obj
)->sfields[0];

793 
i
 = 0; i < ((
CÏssObjeù
 *)
obj
)->
sf›ldCouÁ
; ++i) {

794 cÚ¡ 
SticF›ld
* 
pF›ld
 = &
sf›lds
[
i
];

795 
size_t
 
by‹Off£t
 = (size_t)
pF›ld
 - (size_t)
sf›lds
;

796 
ty³
 = 
pF›ld
->
sigÇtu»
[0];

798 ià(
ty³
 == 'F' ||ype == 'D') {

799 
dv®
;

801 ià(
ty³
 == 'F')

802 
dv®
 = 
pF›ld
->
v®ue
.
f
;

804 
dv®
 = 
pF›ld
->
v®ue
.
d
;

806 
	`ALOGD
(" %2d: '%s' '%s'‡f=%04x off=%zd %.3f", 
i
,

807 
pF›ld
->
Çme
,…F›ld->
sigÇtu»
,

808 
pF›ld
->
acûssFÏgs
, 
by‹Off£t
, 
dv®
);

810 
u8
 
lv®
;

812 ià(
ty³
 == 'J')

813 
lv®
 = 
pF›ld
->
v®ue
.
j
;

814 ià(
ty³
 == 'Z')

815 
lv®
 = 
pF›ld
->
v®ue
.
z
;

817 
lv®
 = 
pF›ld
->
v®ue
.
i
;

819 
	`ALOGD
(" %2d: '%s' '%s'‡f=%04x off=%zd 0x%08Îx", 
i
,

820 
pF›ld
->
Çme
,…F›ld->
sigÇtu»
,

821 
pF›ld
->
acûssFÏgs
, 
by‹Off£t
, 
lv®
);

825 
	}
}

	@vm/oo/Object.h

21 #iâdeà
DALVIK_OO_OBJECT_H_


22 
	#DALVIK_OO_OBJECT_H_


	)

24 
	~<¡ddef.h
>

25 
	~"Atomic.h
"

28 
	gD©aObjeù
;

29 
	gIn™ŸtšgLßd”Li¡
;

30 
	gCÏssObjeù
;

31 
	gSŒšgObjeù
;

32 
	gA¼ayObjeù
;

33 
	gM‘hod
;

34 
	gExû±iÚEÁry
;

35 
	gLšeNumEÁry
;

36 
	gSticF›ld
;

37 
	gIn¡F›ld
;

38 
	gF›ld
;

39 
	gRegi¡”M­
;

51 (*
	tD®vikBridgeFunc
)(cÚ¡ 
	tu4
* 
	t¬gs
, 
	tJV®ue
* 
	tpResuÉ
,

52 cÚ¡ 
	tM‘hod
* 
	tm‘hod
, 
	tTh»ad
* 
	t£lf
);

53 (*
	tD®vikN©iveFunc
)(cÚ¡ 
	tu4
* 
	t¬gs
, 
	tJV®ue
* 
	tpResuÉ
);

57 
	eAcûssFÏgs
 {

58 
ACC_MIRANDA
 = 0x8000,

59 
JAVA_FLAGS_MASK
 = 0xffff,

66 
	eCÏssFÏgs
 {

67 
CLASS_ISFINALIZABLE
 = (1<<31),

68 
CLASS_ISARRAY
 = (1<<30),

69 
CLASS_ISOBJECTARRAY
 = (1<<29),

70 
CLASS_ISCLASS
 = (1<<28),

72 
CLASS_ISREFERENCE
 = (1<<27),

74 
CLASS_ISWEAKREFERENCE
 = (1<<26),

75 
CLASS_ISFINALIZERREFERENCE
 = (1<<25),

76 
CLASS_ISPHANTOMREFERENCE
 = (1<<24),

78 
CLASS_MULTIPLE_DEFS
 = (1<<23),

81 
CLASS_ISOPTIMIZED
 = (1<<17),

82 
CLASS_ISPREVERIFIED
 = (1<<16),

86 
	#EXPECTED_FILE_FLAGS
 \

87 (
ACC_CLASS_MASK
 | 
CLASS_ISPREVERIFIED
 | 
CLASS_ISOPTIMIZED
)

	)

92 
	#SET_CLASS_FLAG
(
şazz
, 
æag
) \

93 dØ{ (
şazz
)->
acûssFÏgs
 |ğ(
æag
); 
	}
} 0)

	)

95 
	#CLEAR_CLASS_FLAG
(
şazz
, 
æag
) \

96 dØ{ (
şazz
)->
acûssFÏgs
 &ğ~(
æag
); } 0)

	)

98 
	#IS_CLASS_FLAG_SET
(
şazz
, 
æag
) \

99 (((
şazz
)->
acûssFÏgs
 & (
æag
)è!ğ0)

	)

101 
	#GET_CLASS_FLAG_GROUP
(
şazz
, 
æags
) \

102 ((
u4
)((
şazz
)->
acûssFÏgs
 & (
æags
)))

	)

108 
	eM‘hodFÏgs
 {

109 
	mMETHOD_ISWRITABLE
 = (1<<31),

115 
	#SET_METHOD_FLAG
(
m‘hod
, 
æag
) \

116 dØ{ (
m‘hod
)->
acûssFÏgs
 |ğ(
æag
); } 0)

	)

118 
	#CLEAR_METHOD_FLAG
(
m‘hod
, 
æag
) \

119 dØ{ (
m‘hod
)->
acûssFÏgs
 &ğ~(
æag
); } 0)

	)

121 
	#IS_METHOD_FLAG_SET
(
m‘hod
, 
æag
) \

122 (((
m‘hod
)->
acûssFÏgs
 & (
æag
)è!ğ0)

	)

124 
	#GET_METHOD_FLAG_GROUP
(
m‘hod
, 
æags
) \

125 ((
u4
)((
m‘hod
)->
acûssFÏgs
 & (
æags
)))

	)

128 
	eCÏssStus
 {

129 
	mCLASS_ERROR
 = -1,

131 
	mCLASS_NOTREADY
 = 0,

132 
	mCLASS_IDX
 = 1,

133 
	mCLASS_LOADED
 = 2,

134 
	mCLASS_RESOLVED
 = 3,

135 
	mCLASS_VERIFYING
 = 4,

136 
	mCLASS_VERIFIED
 = 5,

137 
	mCLASS_INITIALIZING
 = 6,

138 
	mCLASS_INITIALIZED
 = 7,

150 
	#CLASS_WALK_SUPER
 (()(3))

	)

151 
	#CLASS_SMALLEST_OFFSET
 ((
Objeù
))

	)

152 
	#CLASS_BITS_PER_WORD
 ((è* 8)

	)

153 
	#CLASS_OFFSET_ALIGNMENT
 4

	)

154 
	#CLASS_HIGH_BIT
 (()1 << (
CLASS_BITS_PER_WORD
 - 1))

	)

159 
	#_CLASS_BIT_NUMBER_FROM_OFFSET
(
by‹Off£t
) \

160 ((()(
by‹Off£t
è- 
CLASS_SMALLEST_OFFSET
) / \

161 
CLASS_OFFSET_ALIGNMENT
)

	)

165 
	#CLASS_CAN_ENCODE_OFFSET
(
by‹Off£t
) \

166 (
	`_CLASS_BIT_NUMBER_FROM_OFFSET
(
by‹Off£t
è< 
CLASS_BITS_PER_WORD
)

	)

171 
	#CLASS_BIT_FROM_OFFSET
(
by‹Off£t
) \

172 (
CLASS_HIGH_BIT
 >> 
	`_CLASS_BIT_NUMBER_FROM_OFFSET
(
by‹Off£t
))

	)

176 
	#CLASS_OFFSET_FROM_CLZ
(
rshiá
) \

177 ((()(
rshiá
è* 
CLASS_OFFSET_ALIGNMENT
è+ 
CLASS_SMALLEST_OFFSET
)

	)

183 
	sIÁ”çûEÁry
 {

185 
CÏssObjeù
* 
	mşazz
;

191 * 
	mm‘hodIndexA¼ay
;

208 
	sObjeù
 {

210 
CÏssObjeù
* 
	mşazz
;

216 
u4
 
	mlock
;

217 
u8
 
	muuid
;

224 
	#DVM_OBJECT_INIT
(
obj
, 
şazz_
) \

225 
	`dvmS‘F›ldObjeù
(
obj
, 
	`OFFSETOF_MEMBER
(
Objeù
, 
şazz
), 
şazz_
)

	)

230 
	gD©aObjeù
 : 
Objeù
 {

232 
u4
 
š¡ªûD©a
[1];

246 
	gSŒšgObjeù
 : 
Objeù
 {

248 
u4
 
š¡ªûD©a
[1];

251 
Ëngth
() const;

257 
utfL’gth
() const;

260 
A¼ayObjeù
* 
¬¿y
() const;

263 cÚ¡ 
u2
* 
ch¬s
() const;

274 
	gA¼ayObjeù
 : 
Objeù
 {

276 
u4
 
Ëngth
;

283 
u8
 
	gcÚ‹Ás
[1];

291 
	sIn™ŸtšgLßd”Li¡
 {

293 
Objeù
** 
	mš™ŸtšgLßd”s
;

295 
	mš™ŸtšgLßd”CouÁ
;

303 
	sF›ld
 {

304 
CÏssObjeù
* 
	mşazz
;

305 cÚ¡ * 
	mÇme
;

306 cÚ¡ * 
	msigÇtu»
;

307 
u4
 
	macûssFÏgs
;

313 
	gSticF›ld
 : 
F›ld
 {

314 
JV®ue
 
v®ue
;

320 
	gIn¡F›ld
 : 
F›ld
 {

327 
by‹Off£t
;

335 
	#CLASS_FIELD_SLOTS
 4

	)

351 
	gCÏssObjeù
 : 
Objeù
 {

354 
u4
 
š¡ªûD©a
[
CLASS_FIELD_SLOTS
];

358 cÚ¡ * 
	gdesütÜ
;

359 * 
	gdesütÜAÎoc
;

362 
u4
 
	gacûssFÏgs
;

365 
u4
 
	g£rŸlNumb”
;

369 
DvmDex
* 
	gpDvmDex
;

372 
CÏssStus
 
	g¡©us
;

375 
CÏssObjeù
* 
	gv”ifyE¼ÜCÏss
;

378 
u4
 
	gš™Th»adId
;

384 
size_t
 
	gobjeùSize
;

388 
CÏssObjeù
* 
	g–em’tCÏss
;

391 
	g¬¿yDim
;

394 
Prim™iveTy³
 
	g´im™iveTy³
;

397 
CÏssObjeù
* 
	gsu³r
;

400 
Objeù
* 
	gşassLßd”
;

405 
In™ŸtšgLßd”Li¡
 
	gš™ŸtšgLßd”Li¡
;

408 
	gš‹rçûCouÁ
;

409 
CÏssObjeù
** 
	gš‹rçûs
;

412 
	gdœeùM‘hodCouÁ
;

413 
M‘hod
* 
	gdœeùM‘hods
;

416 
	gvœtu®M‘hodCouÁ
;

417 
M‘hod
* 
	gvœtu®M‘hods
;

424 
	gvbËCouÁ
;

425 
M‘hod
** 
	gvbË
;

441 
	giáabËCouÁ
;

442 
IÁ”çûEÁry
* 
	giáabË
;

449 
	gifviPoŞCouÁ
;

450 * 
	gifviPoŞ
;

463 
	gif›ldCouÁ
;

464 
	gif›ldRefCouÁ
;

465 
In¡F›ld
* 
	gif›lds
;

468 
u4
 
	g»fOff£ts
;

471 cÚ¡ * 
	gsourûFe
;

474 
	gsf›ldCouÁ
;

475 
SticF›ld
 
	gsf›lds
[0];

489 
	sM‘hod
 {

491 
CÏssObjeù
* 
	mşazz
;

494 
u4
 
	macûssFÏgs
;

503 
u2
 
	mm‘hodIndex
;

511 
u2
 
	m»gi¡”sSize
;

512 
u2
 
	moutsSize
;

513 
u2
 
	mšsSize
;

516 cÚ¡ * 
	mÇme
;

526 
DexPrÙo
 
	m´ÙÙy³
;

529 cÚ¡ * 
	mshÜty
;

538 cÚ¡ 
u2
* 
	mš¢s
;

541 
	mjniArgInfo
;

550 
D®vikBridgeFunc
 
	mÇtiveFunc
;

557 
boŞ
 
	mç¡Jni
;

566 
boŞ
 
	mnoRef
;

573 
boŞ
 
	mshouldT¿û
;

580 cÚ¡ 
Regi¡”M­
* 
	m»gi¡”M­
;

583 
boŞ
 
	mšProfe
;

590 
M‘hod
* 
dvmFšdDœeùM‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

591 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

592 
M‘hod
* 
dvmFšdVœtu®M‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

593 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

594 
M‘hod
* 
dvmFšdVœtu®M‘hodByName
(cÚ¡ 
CÏssObjeù
* 
şazz
,

595 cÚ¡ * 
m‘hodName
);

596 
M‘hod
* 
dvmFšdDœeùM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

597 cÚ¡ 
DexPrÙo
* 
´Ùo
);

598 
M‘hod
* 
dvmFšdVœtu®M‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

599 cÚ¡ 
DexPrÙo
* 
´Ùo
);

605 
M‘hod
* 
dvmFšdDœeùM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

606 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
);

607 
M‘hod
* 
dvmFšdVœtu®M‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

608 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

609 
M‘hod
* 
dvmFšdDœeùM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

610 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
);

611 
M‘hod
* 
dvmFšdVœtu®M‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

612 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
);

613 
M‘hod
* 
dvmFšdM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

614 cÚ¡ 
DexPrÙo
* 
´Ùo
);

619 
M‘hod
* 
dvmFšdIÁ”çûM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
içû
,

620 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
);

621 
M‘hod
* 
dvmFšdIÁ”çûM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
içû
,

622 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
);

629 cÚ¡ 
M‘hod
* 
dvmG‘Vœtu®izedM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
,

630 cÚ¡ 
M‘hod
* 
m‘h
);

635 "C" cÚ¡ * 
dvmG‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘h
);

640 
In¡F›ld
* 
dvmFšdIn¡ªûF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

641 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

642 
SticF›ld
* 
dvmFšdSticF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

643 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

648 
In¡F›ld
* 
dvmFšdIn¡ªûF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

649 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

650 
SticF›ld
* 
dvmFšdSticF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

651 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

652 
F›ld
* 
dvmFšdF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
f›ldName
,

653 cÚ¡ * 
sigÇtu»
);

661 
INLINE
 
	$dvmFšdF›ldOff£t
(cÚ¡ 
CÏssObjeù
* 
şazz
,

662 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

664 
In¡F›ld
* 
pF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

665 ià(
pF›ld
 =ğ
NULL
)

668  
pF›ld
->
by‹Off£t
;

669 
	}
}

674 
INLINE
 
boŞ
 
	$dvmIsPublicM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

675  (
m‘hod
->
acûssFÏgs
 & 
ACC_PUBLIC
) != 0;

676 
	}
}

677 
INLINE
 
boŞ
 
	$dvmIsPriv©eM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

678  (
m‘hod
->
acûssFÏgs
 & 
ACC_PRIVATE
) != 0;

679 
	}
}

680 
INLINE
 
boŞ
 
	$dvmIsSticM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

681  (
m‘hod
->
acûssFÏgs
 & 
ACC_STATIC
) != 0;

682 
	}
}

683 
INLINE
 
boŞ
 
	$dvmIsSynchrÚizedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

684  (
m‘hod
->
acûssFÏgs
 & 
ACC_SYNCHRONIZED
) != 0;

685 
	}
}

686 
INLINE
 
boŞ
 
	$dvmIsDeş¬edSynchrÚizedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

687  (
m‘hod
->
acûssFÏgs
 & 
ACC_DECLARED_SYNCHRONIZED
) != 0;

688 
	}
}

689 
INLINE
 
boŞ
 
	$dvmIsFš®M‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

690  (
m‘hod
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

691 
	}
}

692 
INLINE
 
boŞ
 
	$dvmIsN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

693  (
m‘hod
->
acûssFÏgs
 & 
ACC_NATIVE
) != 0;

694 
	}
}

695 
INLINE
 
boŞ
 
	$dvmIsAb¡¿ùM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

696  (
m‘hod
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0;

697 
	}
}

698 
INLINE
 
boŞ
 
	$dvmIsSyÁh‘icM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

699  (
m‘hod
->
acûssFÏgs
 & 
ACC_SYNTHETIC
) != 0;

700 
	}
}

701 
INLINE
 
boŞ
 
	$dvmIsMœªdaM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

702  (
m‘hod
->
acûssFÏgs
 & 
ACC_MIRANDA
) != 0;

703 
	}
}

704 
INLINE
 
boŞ
 
	$dvmIsCÚ¡ruùÜM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

705  *
m‘hod
->
Çme
 == '<';

706 
	}
}

708 
INLINE
 
boŞ
 
	$dvmIsDœeùM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

709  
	`dvmIsPriv©eM‘hod
(
m‘hod
) ||

710 
	`dvmIsSticM‘hod
(
m‘hod
) ||

711 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘hod
);

712 
	}
}

715 
INLINE
 
boŞ
 
	$dvmIsBy‹codeM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

716  (
m‘hod
->
acûssFÏgs
 & (
ACC_NATIVE
 | 
ACC_ABSTRACT
)) == 0;

717 
	}
}

719 
INLINE
 
boŞ
 
	$dvmIsPrÙeùedF›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

720  (
f›ld
->
acûssFÏgs
 & 
ACC_PROTECTED
) != 0;

721 
	}
}

722 
INLINE
 
boŞ
 
	$dvmIsSticF›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

723  (
f›ld
->
acûssFÏgs
 & 
ACC_STATIC
) != 0;

724 
	}
}

725 
INLINE
 
boŞ
 
	$dvmIsFš®F›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

726  (
f›ld
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

727 
	}
}

728 
INLINE
 
boŞ
 
	$dvmIsVŞ©eF›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

729  (
f›ld
->
acûssFÏgs
 & 
ACC_VOLATILE
) != 0;

730 
	}
}

732 
INLINE
 
boŞ
 
	$dvmIsIÁ”çûCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

733  (
şazz
->
acûssFÏgs
 & 
ACC_INTERFACE
) != 0;

734 
	}
}

735 
INLINE
 
boŞ
 
	$dvmIsPublicCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

736  (
şazz
->
acûssFÏgs
 & 
ACC_PUBLIC
) != 0;

737 
	}
}

738 
INLINE
 
boŞ
 
	$dvmIsFš®CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

739  (
şazz
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

740 
	}
}

741 
INLINE
 
boŞ
 
	$dvmIsAb¡¿ùCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

742  (
şazz
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0;

743 
	}
}

744 
INLINE
 
boŞ
 
	$dvmIsAÂÙ©iÚCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

745  (
şazz
->
acûssFÏgs
 & 
ACC_ANNOTATION
) != 0;

746 
	}
}

747 
INLINE
 
boŞ
 
	$dvmIsPrim™iveCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

748  
şazz
->
´im™iveTy³
 !ğ
PRIM_NOT
;

749 
	}
}

752 
INLINE
 
boŞ
 
	$dvmIsCÏssLšked
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

753  
şazz
->
¡©us
 >ğ
CLASS_RESOLVED
;

754 
	}
}

756 
INLINE
 
boŞ
 
	$dvmIsCÏssV”if›d
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

757  
şazz
->
¡©us
 >ğ
CLASS_VERIFIED
;

758 
	}
}

763 
INLINE
 
boŞ
 
	$dvmIsCÏssObjeù
(cÚ¡ 
Objeù
* 
obj
) {

764 
	`as£¹
(
obj
 !ğ
NULL
);

765 
	`as£¹
(
obj
->
şazz
 !ğ
NULL
);

766  
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISCLASS
);

767 
	}
}

773 
INLINE
 
boŞ
 
	$dvmIsTheCÏssCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

774 
	`as£¹
(
şazz
 !ğ
NULL
);

775  
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISCLASS
);

776 
	}
}

782 
INLINE
 cÚ¡ 
DexCode
* 
	$dvmG‘M‘hodCode
(cÚ¡ 
M‘hod
* 
m‘h
) {

783 ià(
	`dvmIsBy‹codeM‘hod
(
m‘h
)) {

789  (cÚ¡ 
DexCode
*)

790 (((cÚ¡ 
u1
*è
m‘h
->
š¢s
è- 
	`off£tof
(
DexCode
, insns));

792  
NULL
;

794 
	}
}

800 
INLINE
 
u4
 
	$dvmG‘M‘hodIn¢sSize
(cÚ¡ 
M‘hod
* 
m‘h
) {

801 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

802  (
pCode
 =ğ
NULL
è? 0 :…Code->
š¢sSize
;

803 
	}
}

806 
dvmDumpObjeù
(cÚ¡ 
Objeù
* 
obj
);

	@vm/oo/ObjectInlines.h

20 #iâdeà
DALVIK_OO_OBJECTINLINES_H_


21 
	#DALVIK_OO_OBJECTINLINES_H_


	)

27 
INLINE
 
	$dvmS‘ObjeùA¼ayEËm’t
(cÚ¡ 
A¼ayObjeù
* 
obj
, 
šdex
,

28 
Objeù
* 
v®
) {

29 ((
Objeù
 **)(*)(
obj
)->
cÚ‹Ás
)[
šdex
] = 
v®
;

30 ià(
v®
 !ğ
NULL
) {

31 
	`dvmWr™eB¬r›rA¼ay
(
obj
, 
šdex
, index + 1);

33 
	}
}

48 
	#BYTE_OFFSET
(
_±r
, 
_off£t
è((*è(((
u1
*)(_±r)è+ (_off£t)))

	)

50 
INLINE
 
JV®ue
* 
	$dvmF›ldPŒ
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

51  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
));

52 
	}
}

54 
INLINE
 
boŞ
 
	$dvmG‘F›ldBoŞ—n
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

55  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
z
;

56 
	}
}

57 
INLINE
 
s1
 
	$dvmG‘F›ldBy‹
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

58  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
b
;

59 
	}
}

60 
INLINE
 
s2
 
	$dvmG‘F›ldShÜt
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

61  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
s
;

62 
	}
}

63 
INLINE
 
u2
 
	$dvmG‘F›ldCh¬
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

64  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
c
;

65 
	}
}

66 
INLINE
 
s4
 
	$dvmG‘F›ldIÁ
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

67  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

68 
	}
}

69 
INLINE
 
s8
 
	$dvmG‘F›ldLÚg
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

70  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
j
;

71 
	}
}

72 
INLINE
 
	$dvmG‘F›ldFlßt
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

73  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
f
;

74 
	}
}

75 
INLINE
 
	$dvmG‘F›ldDoubË
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

76  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
d
;

77 
	}
}

78 
INLINE
 
Objeù
* 
	$dvmG‘F›ldObjeù
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

79  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
l
;

80 
	}
}

81 
INLINE
 
boŞ
 
	$dvmG‘F›ldBoŞ—nVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

82 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

83  (
boŞ
)
	`ªdroid_©omic_acquœe_lßd
(
±r
);

84 
	}
}

85 
INLINE
 
s1
 
	$dvmG‘F›ldBy‹VŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

86 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

87  (
s1
)
	`ªdroid_©omic_acquœe_lßd
(
±r
);

88 
	}
}

89 
INLINE
 
s2
 
	$dvmG‘F›ldShÜtVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

90 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

91  (
s2
)
	`ªdroid_©omic_acquœe_lßd
(
±r
);

92 
	}
}

93 
INLINE
 
u2
 
	$dvmG‘F›ldCh¬VŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

94 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

95  (
u2
)
	`ªdroid_©omic_acquœe_lßd
(
±r
);

96 
	}
}

97 
INLINE
 
s4
 
	$dvmG‘F›ldIÁVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

98 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

99  
	`ªdroid_©omic_acquœe_lßd
(
±r
);

100 
	}
}

101 
INLINE
 
	$dvmG‘F›ldFlßtVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

102 uniÚ { 
s4
 
iv®
; 
fv®
; } 
®Ÿs
;

103 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

104 
®Ÿs
.
iv®
 = 
	`ªdroid_©omic_acquœe_lßd
(
±r
);

105  
®Ÿs
.
fv®
;

106 
	}
}

107 
INLINE
 
s8
 
	$dvmG‘F›ldLÚgVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

108 cÚ¡ 
s8
* 
addr
 = (cÚ¡ s8*)
	`BYTE_OFFSET
(
obj
, 
off£t
);

109 
s8
 
v®
 = 
	`dvmQuasiAtomicR—d64
(
addr
);

110 
	`ANDROID_MEMBAR_FULL
();

111  
v®
;

112 
	}
}

113 
INLINE
 
	$dvmG‘F›ldDoubËVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

114 uniÚ { 
s8
 
lv®
; 
dv®
; } 
®Ÿs
;

115 cÚ¡ 
s8
* 
addr
 = (cÚ¡ s8*)
	`BYTE_OFFSET
(
obj
, 
off£t
);

116 
®Ÿs
.
lv®
 = 
	`dvmQuasiAtomicR—d64
(
addr
);

117 
	`ANDROID_MEMBAR_FULL
();

118  
®Ÿs
.
dv®
;

119 
	}
}

120 
INLINE
 
Objeù
* 
	$dvmG‘F›ldObjeùVŞ©e
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

121 
Objeù
** 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
l
;

122  (
Objeù
*)
	`ªdroid_©omic_acquœe_lßd
((
št32_t
*)
±r
);

123 
	}
}

125 
INLINE
 
	$dvmS‘F›ldBoŞ—n
(
Objeù
* 
obj
, 
off£t
, 
boŞ
 
v®
) {

126 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

127 
	}
}

128 
INLINE
 
	$dvmS‘F›ldBy‹
(
Objeù
* 
obj
, 
off£t
, 
s1
 
v®
) {

129 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

130 
	}
}

131 
INLINE
 
	$dvmS‘F›ldShÜt
(
Objeù
* 
obj
, 
off£t
, 
s2
 
v®
) {

132 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

133 
	}
}

134 
INLINE
 
	$dvmS‘F›ldCh¬
(
Objeù
* 
obj
, 
off£t
, 
u2
 
v®
) {

135 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

136 
	}
}

137 
INLINE
 
	$dvmS‘F›ldIÁ
(
Objeù
* 
obj
, 
off£t
, 
s4
 
v®
) {

138 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

139 
	}
}

140 
INLINE
 
	$dvmS‘F›ldFlßt
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

141 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
f
 = 
v®
;

142 
	}
}

143 
INLINE
 
	$dvmS‘F›ldLÚg
(
Objeù
* 
obj
, 
off£t
, 
s8
 
v®
) {

144 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
j
 = 
v®
;

145 
	}
}

146 
INLINE
 
	$dvmS‘F›ldDoubË
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

147 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
d
 = 
v®
;

148 
	}
}

149 
INLINE
 
	$dvmS‘F›ldObjeù
(
Objeù
* 
obj
, 
off£t
, Objeù* 
v®
) {

150 
JV®ue
* 
lhs
 = (JV®ue*)
	`BYTE_OFFSET
(
obj
, 
off£t
);

151 
lhs
->
l
 = 
v®
;

152 ià(
v®
 !ğ
NULL
) {

153 
	`dvmWr™eB¬r›rF›ld
(
obj
, &
lhs
->
l
);

155 
	}
}

156 
INLINE
 
	$dvmS‘F›ldIÁVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
s4
 
v®
) {

157 
s4
* 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

163 
	`ANDROID_MEMBAR_STORE
();

164 *
±r
 = 
v®
;

165 
	`ANDROID_MEMBAR_FULL
();

166 
	}
}

167 
INLINE
 
	$dvmS‘F›ldBoŞ—nVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
boŞ
 
v®
) {

168 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
off£t
, 
v®
);

169 
	}
}

170 
INLINE
 
	$dvmS‘F›ldBy‹VŞ©e
(
Objeù
* 
obj
, 
off£t
, 
s1
 
v®
) {

171 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
off£t
, 
v®
);

172 
	}
}

173 
INLINE
 
	$dvmS‘F›ldShÜtVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
s2
 
v®
) {

174 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
off£t
, 
v®
);

175 
	}
}

176 
INLINE
 
	$dvmS‘F›ldCh¬VŞ©e
(
Objeù
* 
obj
, 
off£t
, 
u2
 
v®
) {

177 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
off£t
, 
v®
);

178 
	}
}

179 
INLINE
 
	$dvmS‘F›ldFlßtVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

180 uniÚ { 
s4
 
iv®
; 
fv®
; } 
®Ÿs
;

181 
®Ÿs
.
fv®
 = 
v®
;

182 
	`dvmS‘F›ldIÁVŞ©e
(
obj
, 
off£t
, 
®Ÿs
.
iv®
);

183 
	}
}

184 
INLINE
 
	$dvmS‘F›ldLÚgVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
s8
 
v®
) {

185 
s8
* 
addr
 = (s8*)
	`BYTE_OFFSET
(
obj
, 
off£t
);

186 
	`dvmQuasiAtomicSw­64Sync
(
v®
, 
addr
);

187 
	}
}

188 
INLINE
 
	$dvmS‘F›ldDoubËVŞ©e
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

189 uniÚ { 
s8
 
lv®
; 
dv®
; } 
®Ÿs
;

190 
®Ÿs
.
dv®
 = 
v®
;

191 
	`dvmS‘F›ldLÚgVŞ©e
(
obj
, 
off£t
, 
®Ÿs
.
lv®
);

192 
	}
}

193 
INLINE
 
	$dvmS‘F›ldObjeùVŞ©e
(
Objeù
* 
obj
, 
off£t
, Objeù* 
v®
) {

194 
Objeù
** 
±r
 = &((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
l
;

195 
	`ANDROID_MEMBAR_STORE
();

196 *
±r
 = 
v®
;

197 
	`ANDROID_MEMBAR_FULL
();

198 ià(
v®
 !ğ
NULL
) {

199 
	`dvmWr™eB¬r›rF›ld
(
obj
, 
±r
);

201 
	}
}

206 
INLINE
 
JV®ue
* 
	$dvmSticF›ldPŒ
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

207  (
JV®ue
*)&
sf›ld
->
v®ue
;

208 
	}
}

210 
INLINE
 
boŞ
 
	$dvmG‘SticF›ldBoŞ—n
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

211  
sf›ld
->
v®ue
.
z
;

212 
	}
}

213 
INLINE
 
s1
 
	$dvmG‘SticF›ldBy‹
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

214  
sf›ld
->
v®ue
.
b
;

215 
	}
}

216 
INLINE
 
s2
 
	$dvmG‘SticF›ldShÜt
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

217  
sf›ld
->
v®ue
.
s
;

218 
	}
}

219 
INLINE
 
u2
 
	$dvmG‘SticF›ldCh¬
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

220  
sf›ld
->
v®ue
.
c
;

221 
	}
}

222 
INLINE
 
s4
 
	$dvmG‘SticF›ldIÁ
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

223  
sf›ld
->
v®ue
.
i
;

224 
	}
}

225 
INLINE
 
	$dvmG‘SticF›ldFlßt
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

226  
sf›ld
->
v®ue
.
f
;

227 
	}
}

228 
INLINE
 
s8
 
	$dvmG‘SticF›ldLÚg
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

229  
sf›ld
->
v®ue
.
j
;

230 
	}
}

231 
INLINE
 
	$dvmG‘SticF›ldDoubË
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

232  
sf›ld
->
v®ue
.
d
;

233 
	}
}

234 
INLINE
 
Objeù
* 
	$dvmG‘SticF›ldObjeù
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

235  
sf›ld
->
v®ue
.
l
;

236 
	}
}

237 
INLINE
 
boŞ
 
	$dvmG‘SticF›ldBoŞ—nVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

238 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

239  (
boŞ
)
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

240 
	}
}

241 
INLINE
 
s1
 
	$dvmG‘SticF›ldBy‹VŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

242 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

243  (
s1
)
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

244 
	}
}

245 
INLINE
 
s2
 
	$dvmG‘SticF›ldShÜtVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

246 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

247  (
s2
)
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

248 
	}
}

249 
INLINE
 
u2
 
	$dvmG‘SticF›ldCh¬VŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

250 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

251  (
u2
)
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

252 
	}
}

253 
INLINE
 
s4
 
	$dvmG‘SticF›ldIÁVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

254 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

255  
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

256 
	}
}

257 
INLINE
 
	$dvmG‘SticF›ldFlßtVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

258 uniÚ { 
s4
 
iv®
; 
fv®
; } 
®Ÿs
;

259 cÚ¡ 
s4
* 
±r
 = &(
sf›ld
->
v®ue
.
i
);

260 
®Ÿs
.
iv®
 = 
	`ªdroid_©omic_acquœe_lßd
((
s4
*)
±r
);

261  
®Ÿs
.
fv®
;

262 
	}
}

263 
INLINE
 
s8
 
	$dvmG‘SticF›ldLÚgVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

264 cÚ¡ 
s8
* 
addr
 = &
sf›ld
->
v®ue
.
j
;

265 
s8
 
v®
 = 
	`dvmQuasiAtomicR—d64
(
addr
);

266 
	`ANDROID_MEMBAR_FULL
();

267  
v®
;

268 
	}
}

269 
INLINE
 
	$dvmG‘SticF›ldDoubËVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

270 uniÚ { 
s8
 
lv®
; 
dv®
; } 
®Ÿs
;

271 cÚ¡ 
s8
* 
addr
 = &
sf›ld
->
v®ue
.
j
;

272 
®Ÿs
.
lv®
 = 
	`dvmQuasiAtomicR—d64
(
addr
);

273 
	`ANDROID_MEMBAR_FULL
();

274  
®Ÿs
.
dv®
;

275 
	}
}

276 
INLINE
 
Objeù
* 
	$dvmG‘SticF›ldObjeùVŞ©e
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

277 
Objeù
* cÚ¡* 
±r
 = &(
sf›ld
->
v®ue
.
l
);

278  (
Objeù
*)
	`ªdroid_©omic_acquœe_lßd
((
št32_t
*)
±r
);

279 
	}
}

281 
INLINE
 
	$dvmS‘SticF›ldBoŞ—n
(
SticF›ld
* 
sf›ld
, 
boŞ
 
v®
) {

282 
sf›ld
->
v®ue
.
i
 = 
v®
;

283 
	}
}

284 
INLINE
 
	$dvmS‘SticF›ldBy‹
(
SticF›ld
* 
sf›ld
, 
s1
 
v®
) {

285 
sf›ld
->
v®ue
.
i
 = 
v®
;

286 
	}
}

287 
INLINE
 
	$dvmS‘SticF›ldShÜt
(
SticF›ld
* 
sf›ld
, 
s2
 
v®
) {

288 
sf›ld
->
v®ue
.
i
 = 
v®
;

289 
	}
}

290 
INLINE
 
	$dvmS‘SticF›ldCh¬
(
SticF›ld
* 
sf›ld
, 
u2
 
v®
) {

291 
sf›ld
->
v®ue
.
i
 = 
v®
;

292 
	}
}

293 
INLINE
 
	$dvmS‘SticF›ldIÁ
(
SticF›ld
* 
sf›ld
, 
s4
 
v®
) {

294 
sf›ld
->
v®ue
.
i
 = 
v®
;

295 
	}
}

296 
INLINE
 
	$dvmS‘SticF›ldFlßt
(
SticF›ld
* 
sf›ld
, 
v®
) {

297 
sf›ld
->
v®ue
.
f
 = 
v®
;

298 
	}
}

299 
INLINE
 
	$dvmS‘SticF›ldLÚg
(
SticF›ld
* 
sf›ld
, 
s8
 
v®
) {

300 
sf›ld
->
v®ue
.
j
 = 
v®
;

301 
	}
}

302 
INLINE
 
	$dvmS‘SticF›ldDoubË
(
SticF›ld
* 
sf›ld
, 
v®
) {

303 
sf›ld
->
v®ue
.
d
 = 
v®
;

304 
	}
}

305 
INLINE
 
	$dvmS‘SticF›ldObjeù
(
SticF›ld
* 
sf›ld
, 
Objeù
* 
v®
) {

306 
sf›ld
->
v®ue
.
l
 = 
v®
;

307 ià(
v®
 !ğ
NULL
) {

308 
	`dvmWr™eB¬r›rF›ld
(
sf›ld
->
şazz
, &sf›ld->
v®ue
.
l
);

310 
	}
}

311 
INLINE
 
	$dvmS‘SticF›ldIÁVŞ©e
(
SticF›ld
* 
sf›ld
, 
s4
 
v®
) {

312 
s4
* 
±r
 = &
sf›ld
->
v®ue
.
i
;

313 
	`ANDROID_MEMBAR_STORE
();

314 *
±r
 = 
v®
;

315 
	`ANDROID_MEMBAR_FULL
();

316 
	}
}

317 
INLINE
 
	$dvmS‘SticF›ldBoŞ—nVŞ©e
(
SticF›ld
* 
sf›ld
, 
boŞ
 
v®
) {

318 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
v®
);

319 
	}
}

320 
INLINE
 
	$dvmS‘SticF›ldBy‹VŞ©e
(
SticF›ld
* 
sf›ld
, 
s1
 
v®
) {

321 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
v®
);

322 
	}
}

323 
INLINE
 
	$dvmS‘SticF›ldShÜtVŞ©e
(
SticF›ld
* 
sf›ld
, 
s2
 
v®
) {

324 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
v®
);

325 
	}
}

326 
INLINE
 
	$dvmS‘SticF›ldCh¬VŞ©e
(
SticF›ld
* 
sf›ld
, 
u2
 
v®
) {

327 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
v®
);

328 
	}
}

329 
INLINE
 
	$dvmS‘SticF›ldFlßtVŞ©e
(
SticF›ld
* 
sf›ld
, 
v®
) {

330 uniÚ { 
s4
 
iv®
; 
fv®
; } 
®Ÿs
;

331 
®Ÿs
.
fv®
 = 
v®
;

332 
	`dvmS‘SticF›ldIÁVŞ©e
(
sf›ld
, 
®Ÿs
.
iv®
);

333 
	}
}

334 
INLINE
 
	$dvmS‘SticF›ldLÚgVŞ©e
(
SticF›ld
* 
sf›ld
, 
s8
 
v®
) {

335 
s8
* 
addr
 = &
sf›ld
->
v®ue
.
j
;

336 
	`dvmQuasiAtomicSw­64Sync
(
v®
, 
addr
);

337 
	}
}

338 
INLINE
 
	$dvmS‘SticF›ldDoubËVŞ©e
(
SticF›ld
* 
sf›ld
, 
v®
) {

339 uniÚ { 
s8
 
lv®
; 
dv®
; } 
®Ÿs
;

340 
®Ÿs
.
dv®
 = 
v®
;

341 
	`dvmS‘SticF›ldLÚgVŞ©e
(
sf›ld
, 
®Ÿs
.
lv®
);

342 
	}
}

343 
INLINE
 
	$dvmS‘SticF›ldObjeùVŞ©e
(
SticF›ld
* 
sf›ld
, 
Objeù
* 
v®
) {

344 
Objeù
** 
±r
 = &(
sf›ld
->
v®ue
.
l
);

345 
	`ANDROID_MEMBAR_STORE
();

346 *
±r
 = 
v®
;

347 
	`ANDROID_MEMBAR_FULL
();

348 ià(
v®
 !ğ
NULL
) {

349 
	`dvmWr™eB¬r›rF›ld
(
sf›ld
->
şazz
, &sf›ld->
v®ue
.
l
);

351 
	}
}

	@vm/oo/Resolve.cpp

30 
	~"D®vik.h
"

32 
	~<¡dlib.h
>

63 
CÏssObjeù
* 
	$dvmResŞveCÏss
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
şassIdx
,

64 
boŞ
 
äomUnv”if›dCÚ¡ªt
)

66 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

67 
CÏssObjeù
* 
»sCÏss
;

68 cÚ¡ * 
şassName
;

74 
»sCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
);

75 ià(
»sCÏss
 !ğ
NULL
)

76  
»sCÏss
;

78 
	`LOGVV
("---„esolving class %u (referrer=%s cl=%p)",

79 
şassIdx
, 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
);

90 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
);

91 ià(
şassName
[0] != '\0' && className[1] == '\0') {

93 
»sCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
şassName
[0]);

95 
»sCÏss
 = 
	`dvmFšdCÏssNoIn™
(
şassName
, 
»ã¼”
->
şassLßd”
);

98 ià(
»sCÏss
 !ğ
NULL
) {

118 ià(!
äomUnv”if›dCÚ¡ªt
 &&

119 
	`IS_CLASS_FLAG_SET
(
»ã¼”
, 
CLASS_ISPREVERIFIED
))

121 
CÏssObjeù
* 
»sCÏssCheck
 = 
»sCÏss
;

122 ià(
	`dvmIsA¼ayCÏss
(
»sCÏssCheck
))

123 
»sCÏssCheck
 =„esCÏssCheck->
–em’tCÏss
;

125 ià(
»ã¼”
->
pDvmDex
 !ğ
»sCÏssCheck
->pDvmDex &&

126 
»sCÏssCheck
->
şassLßd”
 !ğ
NULL
)

128 
	`ALOGW
("Class„esolved by unexpected DEX:"

130 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
,

131 
»ã¼”
->
pDvmDex
,

132 
»sCÏss
->
desütÜ
, 
»sCÏssCheck
->descriptor,

133 
»sCÏssCheck
->
şassLßd”
,„esCÏssCheck->
pDvmDex
);

134 
	`ALOGW
("(%s had used‡ different %s during…re-verification)",

135 
»ã¼”
->
desütÜ
, 
»sCÏss
->descriptor);

136 
	`dvmThrowIÎeg®AcûssE¼Ü
(

139  
NULL
;

143 
	`LOGVV
("##### +ResolveClass(%s):„eferrer=%s dex=%p†dr=%p„ef=%d",

144 
»sCÏss
->
desütÜ
, 
»ã¼”
->desütÜ,„eã¼”->
pDvmDex
,

145 
»ã¼”
->
şassLßd”
, 
şassIdx
);

154 
	`dvmDexS‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
, 
»sCÏss
);

157 
	`LOGVV
("Class‚ot found: %s",

158 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
));

159 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

162  
»sCÏss
;

163 
	}
}

176 
M‘hod
* 
	$dvmResŞveM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

177 
M‘hodTy³
 
m‘hodTy³
)

179 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

180 
CÏssObjeù
* 
»sCÏss
;

181 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

182 
M‘hod
* 
»sM‘hod
;

184 
	`as£¹
(
m‘hodTy³
 !ğ
METHOD_INTERFACE
);

186 
	`LOGVV
("---„esŞvšg m‘hod %u (»ã¼”=%s)", 
m‘hodIdx
,

187 
»ã¼”
->
desütÜ
);

188 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

190 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
çl£
);

191 ià(
»sCÏss
 =ğ
NULL
) {

193 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

194  
NULL
;

196 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

198 
	`dvmThrowIncom·tibËCÏssChªgeE¼ÜW™hCÏssMes§ge
(

199 
»sCÏss
->
desütÜ
);

200  
NULL
;

203 cÚ¡ * 
Çme
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

204 
DexPrÙo
 
´Ùo
;

205 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

213 ià(
m‘hodTy³
 =ğ
METHOD_DIRECT
) {

214 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
, 
Çme
, &
´Ùo
);

215 } ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

216 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

218 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

221 ià(
»sM‘hod
 =ğ
NULL
) {

222 
	`dvmThrowNoSuchM‘hodE¼Ü
(
Çme
);

223  
NULL
;

226 
	`LOGVV
("--- found method %d (%s.%s)",

227 
m‘hodIdx
, 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

230 ià(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
è&& !
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
)) {

231 
	`dvmThrowAb¡¿ùM‘hodE¼Ü
(
Çme
);

232  
NULL
;

239 ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

240 ià(!
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
) &&

241 !
	`dvmIn™CÏss
(
»sM‘hod
->
şazz
))

243 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

244  
NULL
;

246 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

254 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
) ||

255 
	`dvmIsCÏssIn™Ÿlizšg
(
»sM‘hod
->
şazz
));

265 ià(
m‘hodTy³
 =ğ
METHOD_STATIC
 && !
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
))

267 
	`LOGVV
("---‚ot caching„esolved method %s.%s (class init=%d/%d)",

268 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
,

269 
	`dvmIsCÏssIn™Ÿlizšg
(
»sM‘hod
->
şazz
),

270 
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
));

272 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

275  
»sM‘hod
;

276 
	}
}

283 
M‘hod
* 
	$dvmResŞveIÁ”çûM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

285 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

286 
CÏssObjeù
* 
»sCÏss
;

287 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

288 
M‘hod
* 
»sM‘hod
;

290 
	`LOGVV
("---„esolving interface method %d (referrer=%s)",

291 
m‘hodIdx
, 
»ã¼”
->
desütÜ
);

292 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

294 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
çl£
);

295 ià(
»sCÏss
 =ğ
NULL
) {

297 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

298  
NULL
;

300 ià(!
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

302 
	`dvmThrowIncom·tibËCÏssChªgeE¼ÜW™hCÏssMes§ge
(

303 
»sCÏss
->
desütÜ
);

304  
NULL
;

330 cÚ¡ * 
m‘hodName
 =

331 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

333 
DexPrÙo
 
´Ùo
;

334 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

336 
	`LOGVV
("+++†ooking for '%s' '%s' in„esClass='%s'",

337 
m‘hodName
, 
m‘hodSig
, 
»sCÏss
->
desütÜ
);

338 
»sM‘hod
 = 
	`dvmFšdIÁ”çûM‘hodH›r
(
»sCÏss
, 
m‘hodName
, &
´Ùo
);

339 ià(
»sM‘hod
 =ğ
NULL
) {

340 
	`dvmThrowNoSuchM‘hodE¼Ü
(
m‘hodName
);

341  
NULL
;

344 
	`LOGVV
("--- found interface method %d (%s.%s)",

345 
m‘hodIdx
, 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

348 
	`as£¹
(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
));

371 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

373  
»sM‘hod
;

374 
	}
}

382 
In¡F›ld
* 
	$dvmResŞveIn¡F›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
)

384 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

385 
CÏssObjeù
* 
»sCÏss
;

386 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

387 
In¡F›ld
* 
»sF›ld
;

389 
	`LOGVV
("---„esolving field %u (referrer=%s cl=%p)",

390 
if›ldIdx
, 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
);

392 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
if›ldIdx
);

397 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
çl£
);

398 ià(
»sCÏss
 =ğ
NULL
) {

399 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

400  
NULL
;

403 
»sF›ld
 = 
	`dvmFšdIn¡ªûF›ldH›r
(
»sCÏss
,

404 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

405 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

406 ià(
»sF›ld
 =ğ
NULL
) {

407 
	`dvmThrowNoSuchF›ldE¼Ü
(

408 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

409  
NULL
;

417 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
şazz
) ||

418 
	`dvmIsCÏssIn™Ÿlizšg
(
»sF›ld
->
şazz
));

430 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
, (
F›ld
*)
»sF›ld
);

431 
	`LOGVV
(" field %u is %s.%s",

432 
if›ldIdx
, 
»sF›ld
->
şazz
->
desütÜ
,„esF›ld->
Çme
);

434  
»sF›ld
;

435 
	}
}

444 
SticF›ld
* 
	$dvmResŞveSticF›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
)

446 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

447 
CÏssObjeù
* 
»sCÏss
;

448 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

449 
SticF›ld
* 
»sF›ld
;

451 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
sf›ldIdx
);

456 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
çl£
);

457 ià(
»sCÏss
 =ğ
NULL
) {

458 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

459  
NULL
;

462 
»sF›ld
 = 
	`dvmFšdSticF›ldH›r
(
»sCÏss
,

463 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

464 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

465 ià(
»sF›ld
 =ğ
NULL
) {

466 
	`dvmThrowNoSuchF›ldE¼Ü
(

467 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

468  
NULL
;

476 ià(!
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
şazz
) &&

477 !
	`dvmIn™CÏss
(
»sF›ld
->
şazz
))

479 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

480  
NULL
;

490 ià(
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
şazz
)) {

491 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
, (
F›ld
*è
»sF›ld
);

493 
	`LOGVV
("---‚ot caching„esolved field %s.%s (class init=%d/%d)",

494 
»sF›ld
->
şazz
->
desütÜ
,„esF›ld->
Çme
,

495 
	`dvmIsCÏssIn™Ÿlizšg
(
»sF›ld
->
şazz
),

496 
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
şazz
));

499  
»sF›ld
;

500 
	}
}

510 
SŒšgObjeù
* 
	$dvmResŞveSŒšg
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
¡ršgIdx
)

512 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

513 
SŒšgObjeù
* 
¡rObj
;

514 
SŒšgObjeù
* 
š‹ºSŒObj
;

515 cÚ¡ * 
utf8
;

516 
u4
 
utf16Size
;

518 
	`LOGVV
("+++„esŞvšg sŒšg,„eã¼” i %s", 
»ã¼”
->
desütÜ
);

524 
utf8
 = 
	`dexSŒšgAndSizeById
(
pDvmDex
->
pDexFe
, 
¡ršgIdx
, &
utf16Size
);

525 
¡rObj
 = 
	`dvmC»©eSŒšgFromC¡rAndL’gth
(
utf8
, 
utf16Size
);

526 ià(
¡rObj
 =ğ
NULL
) {

528 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

529 
ba
;

543 
š‹ºSŒObj
 = 
	`dvmLookupImmÜlIÁ”ÃdSŒšg
(
¡rObj
);

544 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡rObj
, 
NULL
);

545 
¡rObj
 = 
š‹ºSŒObj
;

546 ià(
¡rObj
 =ğ
NULL
) {

547 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

548 
ba
;

552 
	`dvmDexS‘ResŞvedSŒšg
(
pDvmDex
, 
¡ršgIdx
, 
¡rObj
);

554 
ba
:

555  
¡rObj
;

556 
	}
}

561 cÚ¡ * 
	$dvmM‘hodTy³SŒ
(
M‘hodTy³
 
m‘hodTy³
)

563 
m‘hodTy³
) {

564 
METHOD_DIRECT
:  "direct";

565 
METHOD_STATIC
:  "static";

566 
METHOD_VIRTUAL
:  "virtual";

567 
METHOD_INTERFACE
:  "interface";

568 
METHOD_UNKNOWN
:  "UNKNOWN";

570 
	`as£¹
(
çl£
);

572 
	}
}

	@vm/oo/Resolve.h

19 #iâdeà
DALVIK_OO_RESOLVE_H_


20 
	#DALVIK_OO_RESOLVE_H_


	)

30 
	eM‘hodTy³
 {

31 
	mMETHOD_UNKNOWN
 = 0,

32 
	mMETHOD_DIRECT
,

33 
	mMETHOD_STATIC
,

34 
	mMETHOD_VIRTUAL
,

35 
	mMETHOD_INTERFACE


46 "C" 
CÏssObjeù
* 
dvmResŞveCÏss
(cÚ¡ CÏssObjeù* 
»ã¼”
,

47 
u4
 
şassIdx
,

48 
boŞ
 
äomUnv”if›dCÚ¡ªt
);

58 "C" 
M‘hod
* 
dvmResŞveM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

59 
M‘hodTy³
 
m‘hodTy³
);

66 
M‘hod
* 
dvmResŞveIÁ”çûM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
);

73 "C" 
In¡F›ld
* 
dvmResŞveIn¡F›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
,

74 
u4
 
if›ldIdx
);

83 "C" 
SticF›ld
* 
dvmResŞveSticF›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
,

84 
u4
 
sf›ldIdx
);

91 "C" 
SŒšgObjeù
* 
dvmResŞveSŒšg
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
¡ršgIdx
);

96 cÚ¡ * 
dvmM‘hodTy³SŒ
(
M‘hodTy³
 
m‘hodTy³
);

	@vm/oo/TypeCheck.cpp

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

27 
	#BOOL_TO_INT
(
x
è(x)

	)

33 
	#INSTANCEOF_CACHE_SIZE
 1024

	)

39 
boŞ
 
	$dvmIn¡ªûofS¹up
()

41 
gDvm
.
š¡ªûofCache
 = 
	`dvmAÎocAtomicCache
(
INSTANCEOF_CACHE_SIZE
);

42 ià(
gDvm
.
š¡ªûofCache
 =ğ
NULL
)

43  
çl£
;

44  
Œue
;

45 
	}
}

50 
	$dvmIn¡ªûofShutdown
()

52 
	`dvmF»eAtomicCache
(
gDvm
.
š¡ªûofCache
);

53 
	}
}

81 
	$isA¼ayIn¡ªûOfA¼ay
(cÚ¡ 
CÏssObjeù
* 
subEËmCÏss
, 
subDim
,

82 cÚ¡ 
CÏssObjeù
* 
şazz
)

85 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
şazz
));

94 
	`as£¹
(
subDim
 > 0 && 
şazz
->
¬¿yDim
 > 0);

95 ià(
subDim
 =ğ
şazz
->
¬¿yDim
) {

100  
	`dvmIn¡ªûof
(
subEËmCÏss
, 
şazz
->
–em’tCÏss
);

101 } ià(
subDim
 > 
şazz
->
¬¿yDim
) {

108 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
->
–em’tCÏss
)) {

114  
	`dvmIm¶em’ts
(
şazz
, cÏzz->
–em’tCÏss
);

121  (
şazz
->
–em’tCÏss
 =ğşazz->
su³r
);

127  
çl£
;

129 
	}
}

137 
	$isA¼ayIn¡ªûOf
(cÚ¡ 
CÏssObjeù
* 
sub
, cÚ¡ CÏssObjeù* 
şazz
)

139 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
sub
));

148 
	`as£¹
(!
	`dvmIsIÁ”çûCÏss
(
şazz
));

155 ià(!
	`dvmIsA¼ayCÏss
(
şazz
))

156  
	`BOOL_TO_INT
(
şazz
 =ğ
sub
->
su³r
);

161  
	`isA¼ayIn¡ªûOfA¼ay
(
sub
->
–em’tCÏss
, sub->
¬¿yDim
, 
şazz
);

162 
	}
}

170 
	$dvmIm¶em’ts
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
š‹rçû
)

172 
i
;

174 
	`as£¹
(
	`dvmIsIÁ”çûCÏss
(
š‹rçû
));

181 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

182 ià(
şazz
->
iáabË
[
i
].şazz =ğ
š‹rçû
)

187 
	}
}

197 
boŞ
 
	$dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
objeùCÏss
,

198 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
)

200 ià(
	`dvmIsA¼ayCÏss
(
objeùCÏss
)) {

207  
	`isA¼ayIn¡ªûOfA¼ay
(
objeùCÏss
->
–em’tCÏss
,

208 
objeùCÏss
->
¬¿yDim
 + 1, 
¬¿yCÏss
);

216  
	`isA¼ayIn¡ªûOfA¼ay
(
objeùCÏss
, 1, 
¬¿yCÏss
);

218 
	}
}

224 
šlše
 
	$isIn¡ªûof
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

225 cÚ¡ 
CÏssObjeù
* 
şazz
)

227 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

228  
	`dvmIm¶em’ts
(
š¡ªû
, 
şazz
);

229 } ià(
	`dvmIsA¼ayCÏss
(
š¡ªû
)) {

230  
	`isA¼ayIn¡ªûOf
(
š¡ªû
, 
şazz
);

232  
	`dvmIsSubCÏss
(
š¡ªû
, 
şazz
);

234 
	}
}

241 
	$dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

242 cÚ¡ 
CÏssObjeù
* 
şazz
)

244 
	#ATOMIC_CACHE_CALC
 
	`isIn¡ªûof
(
š¡ªû
, 
şazz
)

	)

245  
	`ATOMIC_CACHE_LOOKUP
(
gDvm
.
š¡ªûofCache
,

246 
INSTANCEOF_CACHE_SIZE
, 
š¡ªû
, 
şazz
);

247 #undeà
ATOMIC_CACHE_CALC


248 
	}
}

	@vm/oo/TypeCheck.h

19 #iâdeà
DALVIK_OO_TYPECHECK_H_


20 
	#DALVIK_OO_TYPECHECK_H_


	)

23 
boŞ
 
dvmIn¡ªûofS¹up
();

24 
dvmIn¡ªûofShutdown
();

28 "C" 
dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

29 cÚ¡ 
CÏssObjeù
* 
şazz
);

36 
INLINE
 
	$dvmIn¡ªûof
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
, cÚ¡ CÏssObjeù* 
şazz
)

38 ià(
š¡ªû
 =ğ
şazz
) {

39 ià(
CALC_CACHE_STATS
)

40 
gDvm
.
š¡ªûofCache
->
ŒivŸl
++;

43  
	`dvmIn¡ªûofNÚTrivŸl
(
š¡ªû
, 
şazz
);

44 
	}
}

51 
dvmIm¶em’ts
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
š‹rçû
);

58 
INLINE
 
	$dvmIsSubCÏss
(cÚ¡ 
CÏssObjeù
* 
sub
, cÚ¡ CÏssObjeù* 
şazz
) {

61 ià(
sub
 =ğ
şazz
)

63 
sub
 = sub->
su³r
;

64 } 
sub
 !ğ
NULL
);

67 
	}
}

75 "C" 
boŞ
 
dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
–emCÏss
,

76 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
);

	@vm/os/android.cpp

17 
	~"os.h
"

19 
	~"D®vik.h
"

21 
	~<sys/time.h
>

22 
	~<sys/»sourû.h
>

23 
	~<lim™s.h
>

24 
	~<”ºo.h
>

26 
	~<cuts/sched_pŞicy.h
>

27 
	~<uts/th»ads.h
>

35 cÚ¡ 
	gkNiûV®ues
[10] = {

36 
ANDROID_PRIORITY_LOWEST
,

37 
ANDROID_PRIORITY_BACKGROUND
 + 6,

38 
ANDROID_PRIORITY_BACKGROUND
 + 3,

39 
ANDROID_PRIORITY_BACKGROUND
,

40 
ANDROID_PRIORITY_NORMAL
,

41 
ANDROID_PRIORITY_NORMAL
 - 2,

42 
ANDROID_PRIORITY_NORMAL
 - 4,

43 
ANDROID_PRIORITY_URGENT_DISPLAY
 + 3,

44 
ANDROID_PRIORITY_URGENT_DISPLAY
 + 2,

45 
ANDROID_PRIORITY_URGENT_DISPLAY


48 
	$os_chªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
)

50 ià(
ÃwPriÜ™y
 < 1 ||‚ewPriority > 10) {

51 
	`ALOGW
("bad…riÜ™y %d", 
ÃwPriÜ™y
);

52 
ÃwPriÜ™y
 = 5;

55 
ÃwNiû
 = 
kNiûV®ues
[
ÃwPriÜ™y
-1];

56 
pid_t
 
pid
 = 
th»ad
->
sy¡emTid
;

58 ià(
ÃwNiû
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

59 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_BACKGROUND
);

60 } ià(
	`g‘´iÜ™y
(
PRIO_PROCESS
, 
pid
è>ğ
ANDROID_PRIORITY_BACKGROUND
) {

61 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_FOREGROUND
);

64 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
pid
, 
ÃwNiû
) != 0) {

65 
¡d
::
¡ršg
 
	`th»adName
(
	`dvmG‘Th»adName
(
th»ad
));

66 
	`ALOGI
("setPriority(%d) '%s'o…rio=%d(n=%d) failed: %s",

67 
pid
, 
th»adName
.
	`c_¡r
(), 
ÃwPriÜ™y
, 
ÃwNiû
, 
	`¡»¼Ü
(
”ºo
));

69 
	`ALOGV
("£tPriÜ™y(%dètØ´io=%dÒ=%d)", 
pid
, 
ÃwPriÜ™y
, 
ÃwNiû
);

71 
	}
}

73 
	$os_g‘Th»adPriÜ™yFromSy¡em
()

75 
”ºo
 = 0;

76 
sy¥rio
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 0);

77 ià(
sy¥rio
 =ğ-1 && 
”ºo
 != 0) {

78 
	`ALOGW
("g‘´iÜ™y(èçed: %s", 
	`¡»¼Ü
(
”ºo
));

79  
THREAD_NORM_PRIORITY
;

82 
j´io
 = 
THREAD_MIN_PRIORITY
;

83 
i
 = 0; i < 
	`NELEM
(
kNiûV®ues
); i++) {

84 ià(
sy¥rio
 >ğ
kNiûV®ues
[
i
]) {

87 
j´io
++;

89 ià(
j´io
 > 
THREAD_MAX_PRIORITY
) {

90 
j´io
 = 
THREAD_MAX_PRIORITY
;

92  
j´io
;

93 
	}
}

95 
	$os_¿i£Th»adPriÜ™y
()

101 
”ºo
 = 0;

102 
ŞdTh»adPriÜ™y
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 0);

103 ià(
”ºo
 != 0) {

104 
	`ALOGI
("g‘´iÜ™y(£lfèçed: %s", 
	`¡»¼Ü
(
”ºo
));

105 } ià(
ŞdTh»adPriÜ™y
 > 
ANDROID_PRIORITY_NORMAL
) {

109 ià(
ŞdTh»adPriÜ™y
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

110 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_FOREGROUND
);

112 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 0, 
ANDROID_PRIORITY_NORMAL
) != 0) {

113 
	`ALOGI
("Unableoƒlevate…riority from %do %d",

114 
ŞdTh»adPriÜ™y
, 
ANDROID_PRIORITY_NORMAL
);

120 
	`ALOGV
("Elevating…riority from %do %d",

121 
ŞdTh»adPriÜ™y
, 
ANDROID_PRIORITY_NORMAL
);

122  
ŞdTh»adPriÜ™y
;

125  
INT_MAX
;

126 
	}
}

128 
	$os_low”Th»adPriÜ™y
(
ŞdTh»adPriÜ™y
)

130 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 0, 
ŞdTh»adPriÜ™y
) != 0) {

131 
	`ALOGW
("Unableo„eset…riorityo %d: %s",

132 
ŞdTh»adPriÜ™y
, 
	`¡»¼Ü
(
”ºo
));

134 
	`ALOGV
("Re£ˆ´iÜ™yØ%d", 
ŞdTh»adPriÜ™y
);

136 ià(
ŞdTh»adPriÜ™y
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

137 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_BACKGROUND
);

139 
	}
}

	@vm/os/linux.cpp

17 
	~"os.h
"

19 
	~"D®vik.h
"

21 
	$os_¿i£Th»adPriÜ™y
()

24 
	}
}

26 
	$os_low”Th»adPriÜ™y
(
ŞdTh»adPriÜ™y
)

29 
	}
}

31 
	$os_chªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
)

34 
	}
}

36 
	$os_g‘Th»adPriÜ™yFromSy¡em
()

38  
THREAD_NORM_PRIORITY
;

39 
	}
}

	@vm/os/os.h

17 
	gTh»ad
;

26 
os_¿i£Th»adPriÜ™y
();

34 
os_low”Th»adPriÜ™y
(
ŞdTh»adPriÜ™y
);

42 
os_chªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
);

50 
os_g‘Th»adPriÜ™yFromSy¡em
();

	@vm/reflect/Annotation.cpp

35 
	~"D®vik.h
"

38 
Objeù
* 
´oûssEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,\

39 cÚ¡ 
u1
** 
pPŒ
);

40 
boŞ
 
skEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
);

45 cÚ¡ * 
	gkDesüAÂÙ©iÚDeçuÉ


47 cÚ¡ * 
	gkDesüEnşosšgCÏss


49 cÚ¡ * 
	gkDesüEnşosšgM‘hod


51 cÚ¡ * 
	gkDesüIÂ”CÏss
 = "Ldalvik/annotation/InnerClass;";

52 cÚ¡ * 
	gkDesüMemb”CÏs£s


54 cÚ¡ * 
	gkDesüSigÇtu»
 = "Ldalvik/annotation/Signature;";

55 cÚ¡ * 
	gkDesüThrows
 = "Ldalvik/annotation/Throws;";

60 
u4
 
	$»adUËb128
(cÚ¡ 
u1
** 
pBuf
)

62 
u4
 
»suÉ
 = 0;

63 
shiá
 = 0;

64 cÚ¡ 
u1
* 
buf
 = *
pBuf
;

65 
u1
 
v®
;

73 
	`as£¹
(
shiá
 < 32);

75 
v®
 = *
buf
++;

76 
»suÉ
 |ğ(
v®
 & 0x7fè<< 
shiá
;

77 
shiá
 += 7;

78 } (
v®
 & 0x80) != 0);

80 *
pBuf
 = 
buf
;

81  
»suÉ
;

82 
	}
}

87 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
	$g‘AÂoDœeùÜy
(
DexFe
* 
pDexFe
,

88 cÚ¡ 
CÏssObjeù
* 
şazz
)

90 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

96 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDexFe
, 
şazz
->
desütÜ
);

97 
	`as£¹
(
pCÏssDef
 !ğ
NULL
);

98  
	`dexG‘AÂÙ©iÚsDœeùÜyI‹m
(
pDexFe
, 
pCÏssDef
);

99 
	}
}

109 
A¼ayObjeù
* 
	$em±yAÂoA¼ay
()

111  
	`dvmAÎocA¼ayByCÏss
(

112 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
, 0, 
ALLOC_DEFAULT
);

113 
	}
}

120 
A¼ayObjeù
* 
	$em±yAÂoA¼ayA¼ay
(
numEËm’ts
)

122 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

123 
A¼ayObjeù
* 
¬r
;

124 
i
;

126 
¬r
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
,

127 
numEËm’ts
, 
ALLOC_DEFAULT
);

128 ià(
¬r
 !ğ
NULL
) {

129 
A¼ayObjeù
** 
–ems
 = (A¼ayObjeù**)(*)
¬r
->
cÚ‹Ás
;

130 
i
 = 0; i < 
numEËm’ts
; i++) {

131 
–ems
[
i
] = 
	`em±yAÂoA¼ay
();

132 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
–ems
[
i
], 
£lf
);

136  
¬r
;

137 
	}
}

142 
s4
 
	$»adSigÃdIÁ
(cÚ¡ 
u1
* 
±r
, 
zwidth
)

144 
s4
 
v®
 = 0;

145 
i
;

147 
i
 = 
zwidth
; i >= 0; --i)

148 
v®
 = ((
u4
)v® >> 8è| (((
s4
)*
±r
++) << 24);

149 
v®
 >>ğ(3 - 
zwidth
) * 8;

151  
v®
;

152 
	}
}

158 
u4
 
	$»adUnsigÃdIÁ
(cÚ¡ 
u1
* 
±r
, 
zwidth
, 
boŞ
 
flOnRight
)

160 
u4
 
v®
 = 0;

161 
i
;

163 ià(!
flOnRight
) {

164 
i
 = 
zwidth
; i >= 0; --i)

165 
v®
 = (v® >> 8è| (((
u4
)*
±r
++) << 24);

166 
v®
 >>ğ(3 - 
zwidth
) * 8;

168 
i
 = 
zwidth
; i >= 0; --i)

169 
v®
 = (v® >> 8è| (((
u4
)*
±r
++) << 24);

171  
v®
;

172 
	}
}

177 
s8
 
	$»adSigÃdLÚg
(cÚ¡ 
u1
* 
±r
, 
zwidth
)

179 
s8
 
v®
 = 0;

180 
i
;

182 
i
 = 
zwidth
; i >= 0; --i)

183 
v®
 = ((
u8
)v® >> 8è| (((
s8
)*
±r
++) << 56);

184 
v®
 >>ğ(7 - 
zwidth
) * 8;

186  
v®
;

187 
	}
}

193 
u8
 
	$»adUnsigÃdLÚg
(cÚ¡ 
u1
* 
±r
, 
zwidth
, 
boŞ
 
flOnRight
)

195 
u8
 
v®
 = 0;

196 
i
;

198 ià(!
flOnRight
) {

199 
i
 = 
zwidth
; i >= 0; --i)

200 
v®
 = (v® >> 8è| (((
u8
)*
±r
++) << 56);

201 
v®
 >>ğ(7 - 
zwidth
) * 8;

203 
i
 = 
zwidth
; i >= 0; --i)

204 
v®
 = (v® >> 8è| (((
u8
)*
±r
++) << 56);

206  
v®
;

207 
	}
}

230 
M‘hod
* 
	$»sŞveAmbiguousM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

232 
DexFe
* 
pDexFe
;

233 
CÏssObjeù
* 
»sCÏss
;

234 
M‘hod
* 
»sM‘hod
;

235 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

236 cÚ¡ * 
Çme
;

239 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
»ã¼”
->
pDvmDex
, 
m‘hodIdx
);

240 ià(
»sM‘hod
 !ğ
NULL
)

241  
»sM‘hod
;

243 
pDexFe
 = 
»ã¼”
->
pDvmDex
->pDexFile;

244 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
m‘hodIdx
);

245 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
Œue
);

246 ià(
»sCÏss
 =ğ
NULL
) {

248 
	`ALOGD
("»sŞveAmbiguousM‘hod: uÇbËØfšd cÏs %d", 
m‘hodIdx
);

249  
NULL
;

251 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

253 
	`ALOGD
("resolveAmbiguousMethod: method in interface?");

254  
NULL
;

258 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

260 
DexPrÙo
 
´Ùo
;

261 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

263 ià(
Çme
[0] == '<') {

268 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
, 
Çme
, &
´Ùo
);

276 
»sM‘hod
 = 
	`dvmFšdM‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

279  
»sM‘hod
;

280 
	}
}

286 
	eAÂÙ©iÚResuÉStyË
 {

287 
	mkAÎObjeùs
,

288 
	mkAÎRaw
,

289 
	mkPrim™ivesOrObjeùs


317 
boŞ
 
	$´oûssAÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

318 cÚ¡ 
u1
** 
pPŒ
, 
AÂÙ©iÚV®ue
* 
pV®ue
,

319 
AÂÙ©iÚResuÉStyË
 
»suÉStyË
)

321 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

322 
Objeù
* 
–emObj
 = 
NULL
;

323 
boŞ
 
£tObjeù
 = 
çl£
;

324 cÚ¡ 
u1
* 
±r
 = *
pPŒ
;

325 
u1
 
v®ueTy³
, 
v®ueArg
;

326 
width
;

327 
u4
 
idx
;

329 
v®ueTy³
 = *
±r
++;

330 
v®ueArg
 = 
v®ueTy³
 >> 
kDexAÂÙ©iÚV®ueArgShiá
;

331 
width
 = 
v®ueArg
 + 1;

333 
	`ALOGV
("-----ype is 0x%02x %d,…tr=%p [0x%06x]",

334 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
, 
v®ueArg
, 
±r
-1,

335 (
±r
-1è- (
u1
*)
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
);

337 
pV®ue
->
ty³
 = 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
;

339 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
) {

340 
kDexAÂÙ©iÚBy‹
:

341 
pV®ue
->
v®ue
.
i
 = (
s1
è
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

342 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

343 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

344 
	`dvmFšdPrim™iveCÏss
('B'));

345 
£tObjeù
 = 
Œue
;

348 
kDexAÂÙ©iÚShÜt
:

349 
pV®ue
->
v®ue
.
i
 = (
s2
è
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

350 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

351 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

352 
	`dvmFšdPrim™iveCÏss
('S'));

353 
£tObjeù
 = 
Œue
;

356 
kDexAÂÙ©iÚCh¬
:

357 
pV®ue
->
v®ue
.
i
 = (
u2
è
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

358 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

359 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

360 
	`dvmFšdPrim™iveCÏss
('C'));

361 
£tObjeù
 = 
Œue
;

364 
kDexAÂÙ©iÚIÁ
:

365 
pV®ue
->
v®ue
.
i
 = 
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

366 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

367 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

368 
	`dvmFšdPrim™iveCÏss
('I'));

369 
£tObjeù
 = 
Œue
;

372 
kDexAÂÙ©iÚLÚg
:

373 
pV®ue
->
v®ue
.
j
 = 
	`»adSigÃdLÚg
(
±r
, 
v®ueArg
);

374 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

375 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

376 
	`dvmFšdPrim™iveCÏss
('J'));

377 
£tObjeù
 = 
Œue
;

380 
kDexAÂÙ©iÚFlßt
:

381 
pV®ue
->
v®ue
.
i
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
Œue
);

382 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

383 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

384 
	`dvmFšdPrim™iveCÏss
('F'));

385 
£tObjeù
 = 
Œue
;

388 
kDexAÂÙ©iÚDoubË
:

389 
pV®ue
->
v®ue
.
j
 = 
	`»adUnsigÃdLÚg
(
±r
, 
v®ueArg
, 
Œue
);

390 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

391 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

392 
	`dvmFšdPrim™iveCÏss
('D'));

393 
£tObjeù
 = 
Œue
;

396 
kDexAÂÙ©iÚBoŞ—n
:

397 
pV®ue
->
v®ue
.
i
 = (
v®ueArg
 != 0);

398 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

399 
–emObj
 = (
Objeù
*è
	`dvmBoxPrim™ive
(
pV®ue
->
v®ue
,

400 
	`dvmFšdPrim™iveCÏss
('Z'));

401 
£tObjeù
 = 
Œue
;

403 
width
 = 0;

406 
kDexAÂÙ©iÚSŒšg
:

407 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

408 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

409 
pV®ue
->
v®ue
.
i
 = 
idx
;

411 
–emObj
 = (
Objeù
*è
	`dvmResŞveSŒšg
(
şazz
, 
idx
);

412 
£tObjeù
 = 
Œue
;

413 ià(
–emObj
 =ğ
NULL
)

414  
çl£
;

415 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

418 
kDexAÂÙ©iÚTy³
:

419 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

420 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

421 
pV®ue
->
v®ue
.
i
 = 
idx
;

423 
–emObj
 = (
Objeù
*è
	`dvmResŞveCÏss
(
şazz
, 
idx
, 
Œue
);

424 
£tObjeù
 = 
Œue
;

425 ià(
–emObj
 =ğ
NULL
) {

427 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

428 cÚ¡ * 
desc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
idx
);

429 
	`dvmCË¬Exû±iÚ
(
£lf
);

430 
	`dvmThrowTy³NÙP»£ÁExû±iÚ
(
desc
);

431  
çl£
;

433 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

437 
kDexAÂÙ©iÚM‘hod
:

438 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

439 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

440 
pV®ue
->
v®ue
.
i
 = 
idx
;

442 
M‘hod
* 
m‘h
 = 
	`»sŞveAmbiguousM‘hod
(
şazz
, 
idx
);

443 ià(
m‘h
 =ğ
NULL
)

444  
çl£
;

445 
–emObj
 = 
	`dvmC»©eReæeùObjFÜM‘hod
(
şazz
, 
m‘h
);

446 
£tObjeù
 = 
Œue
;

447 ià(
–emObj
 =ğ
NULL
)

448  
çl£
;

451 
kDexAÂÙ©iÚF›ld
:

452 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

453 
	`as£¹
(
çl£
);

455 
kDexAÂÙ©iÚEnum
:

457 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

458 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

459 
pV®ue
->
v®ue
.
i
 = 
idx
;

461 
SticF›ld
* 
sf›ld
;

463 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
şazz
, 
idx
);

464 ià(
sf›ld
 =ğ
NULL
) {

465  
çl£
;

467 
	`as£¹
(
sf›ld
->
şazz
->
desütÜ
[0] == 'L');

468 
–emObj
 = 
sf›ld
->
v®ue
.
l
;

469 
£tObjeù
 = 
Œue
;

470 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

474 
kDexAÂÙ©iÚA¼ay
:

481 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

482  
çl£
;

484 
A¼ayObjeù
* 
ÃwA¼ay
;

485 
u4
 
size
, 
couÁ
;

487 
size
 = 
	`»adUËb128
(&
±r
);

488 
	`LOGVV
("---‡ÂÙ©iÚ‡¼ay, sizi %u‡ˆ%p", 
size
, 
±r
);

489 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgObjeùA¼ay
,

490 
size
, 
ALLOC_DEFAULT
);

491 ià(
ÃwA¼ay
 =ğ
NULL
) {

492 
	`ALOGE
("ªnÙ©iÚƒËm’ˆ¬¿y‡Îoøçed (%d)", 
size
);

493  
çl£
;

496 
AÂÙ©iÚV®ue
 
av®ue
;

497 
couÁ
 = 0; couÁ < 
size
; count++) {

498 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
,

499 
kAÎObjeùs
)) {

500 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwA¼ay
, 
£lf
);

501  
çl£
;

503 
Objeù
* 
obj
 = (Objeù*)
av®ue
.
v®ue
.
l
;

504 
	`dvmS‘ObjeùA¼ayEËm’t
(
ÃwA¼ay
, 
couÁ
, 
obj
);

505 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

508 
–emObj
 = (
Objeù
*è
ÃwA¼ay
;

509 
£tObjeù
 = 
Œue
;

511 
width
 = 0;

513 
kDexAÂÙ©iÚAÂÙ©iÚ
:

515 ià(
»suÉStyË
 =ğ
kAÎRaw
)

516  
çl£
;

517 
–emObj
 = 
	`´oûssEncodedAÂÙ©iÚ
(
şazz
, &
±r
);

518 
£tObjeù
 = 
Œue
;

519 ià(
–emObj
 =ğ
NULL
)

520  
çl£
;

521 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

522 
width
 = 0;

524 
kDexAÂÙ©iÚNuÎ
:

525 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

526 
pV®ue
->
v®ue
.
i
 = 0;

528 
	`as£¹
(
–emObj
 =ğ
NULL
);

529 
£tObjeù
 = 
Œue
;

531 
width
 = 0;

534 
	`ALOGE
("Bad‡nnotationƒlement value byte 0x%02x (0x%02x)",

535 
v®ueTy³
, v®ueTy³ & 
kDexAÂÙ©iÚV®ueTy³Mask
);

536 
	`as£¹
(
çl£
);

537  
çl£
;

540 
±r
 +ğ
width
;

542 *
pPŒ
 = 
±r
;

543 ià(
£tObjeù
)

544 
pV®ue
->
v®ue
.
l
 = 
–emObj
;

545  
Œue
;

546 
	}
}

565 
Objeù
* 
	$cÚv”tR‘uºTy³
(
Objeù
* 
v®ueObj
, 
CÏssObjeù
* 
m‘hodR‘uº
)

567 ià(
v®ueObj
 =ğ
NULL
 ||

568 !
	`dvmIsA¼ay
((
A¼ayObjeù
*)
v®ueObj
è|| !
	`dvmIsA¼ayCÏss
(
m‘hodR‘uº
))

570  
v®ueObj
;

573 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

574 
CÏssObjeù
* 
¤cEËmCÏss
;

575 
CÏssObjeù
* 
d¡EËmCÏss
;

582 ià(
	`¡rcmp
(
v®ueObj
->
şazz
->
desütÜ
, "[Ljava/lang/Object;") != 0) {

583 
	`ALOGE
("UÃx³ùed srøty³ cÏs (%s)", 
v®ueObj
->
şazz
->
desütÜ
);

584  
NULL
;

586 
¤cEËmCÏss
 = 
gDvm
.
şassJavaLªgObjeù
;

592 
fœ¡Ch¬
 = 
m‘hodR‘uº
->
desütÜ
[1];

593 ià(
fœ¡Ch¬
 == 'L' || firstChar == '[') {

594 
d¡EËmCÏss
 = 
	`dvmFšdCÏss
(
m‘hodR‘uº
->
desütÜ
+1,

595 
m‘hodR‘uº
->
şassLßd”
);

597 
d¡EËmCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
fœ¡Ch¬
);

599 
	`ALOGV
("HEY: converting valueObj from [%so [%s",

600 
¤cEËmCÏss
->
desütÜ
, 
d¡EËmCÏss
->descriptor);

602 
A¼ayObjeù
* 
¤cA¼ay
 = (A¼ayObjeù*è
v®ueObj
;

603 
u4
 
Ëngth
 = 
¤cA¼ay
->length;

604 
A¼ayObjeù
* 
ÃwA¼ay
;

606 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
m‘hodR‘uº
, 
Ëngth
, 
ALLOC_DEFAULT
);

607 ià(
ÃwA¼ay
 =ğ
NULL
) {

608 
	`ALOGE
("Failed creating duplicate‡nnotation class (%s %d)",

609 
m‘hodR‘uº
->
desütÜ
, 
Ëngth
);

610 
ba
;

613 
boŞ
 
sucûss
;

614 ià(
d¡EËmCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
) {

615 
sucûss
 = 
	`dvmCİyObjeùA¼ay
(
ÃwA¼ay
, 
¤cA¼ay
, 
d¡EËmCÏss
);

617 
sucûss
 = 
	`dvmUnboxObjeùA¼ay
(
ÃwA¼ay
, 
¤cA¼ay
, 
d¡EËmCÏss
);

619 ià(!
sucûss
) {

620 
	`ALOGE
("Annotation‡rray copy failed");

621 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwA¼ay
, 
£lf
);

622 
ÃwA¼ay
 = 
NULL
;

623 
ba
;

626 
ba
:

628 
	`dvmR–—£T¿ckedAÎoc
(
v®ueObj
, 
£lf
);

629  (
Objeù
*è
ÃwA¼ay
;

630 
	}
}

644 
Objeù
* 
	$ü—‹AÂÙ©iÚMemb”
(cÚ¡ 
CÏssObjeù
* 
şazz
,

645 cÚ¡ 
CÏssObjeù
* 
ªnoCÏss
, cÚ¡ 
u1
** 
pPŒ
)

647 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

648 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

649 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

650 
Objeù
* 
v®ueObj
 = 
NULL
;

651 
Objeù
* 
ÃwMemb”
 = 
NULL
;

652 
Objeù
* 
m‘hodObj
 = 
NULL
;

653 
CÏssObjeù
* 
m‘hodR‘uº
 = 
NULL
;

654 
u4
 
–em’tNameIdx
;

655 cÚ¡ * 
Çme
;

656 
AÂÙ©iÚV®ue
 
av®ue
;

657 
JV®ue
 
unu£d
;

658 
boŞ
 
çed
 = 
Œue
;

660 
–em’tNameIdx
 = 
	`»adUËb128
(
pPŒ
);

662 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, 
pPŒ
, &
av®ue
, 
kAÎObjeùs
)) {

663 
	`ALOGW
("Failed…rocessing‡nnotation value");

664 
ba
;

666 
v®ueObj
 = (
Objeù
*)
av®ue
.
v®ue
.
l
;

669 
ÃwMemb”
 =

670 
	`dvmAÎocObjeù
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
,

671 
ALLOC_DEFAULT
);

672 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
–em’tNameIdx
);

673 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
Çme
);

676 ià(
Çme
 !ğ
NULL
) {

677 
M‘hod
* 
ªnoM‘h
 = 
	`dvmFšdVœtu®M‘hodByName
(
ªnoCÏss
, 
Çme
);

678 ià(
ªnoM‘h
 =ğ
NULL
) {

679 
	`ALOGW
("WARNING: could‚ot find‡nnotation member %s in %s",

680 
Çme
, 
ªnoCÏss
->
desütÜ
);

682 
m‘hodObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
ªnoM‘h
);

683 
m‘hodR‘uº
 = 
	`dvmG‘BoxedR‘uºTy³
(
ªnoM‘h
);

686 ià(
ÃwMemb”
 =ğ
NULL
 || 
ÇmeObj
 =ğNULL || 
m‘hodObj
 == NULL ||

687 
m‘hodR‘uº
 =ğ
NULL
)

689 
	`ALOGE
("Failed creating‡nnotationƒlement (m=%p‚=%p‡=%p„=%p)",

690 
ÃwMemb”
, 
ÇmeObj
, 
m‘hodObj
, 
m‘hodR‘uº
);

691 
ba
;

695 
v®ueObj
 = 
	`cÚv”tR‘uºTy³
(v®ueObj, 
m‘hodR‘uº
);

696 ià(
v®ueObj
 =ğ
NULL
)

697 
ba
;

700 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
,

701 
ÃwMemb”
, &
unu£d
, 
ÇmeObj
, 
v®ueObj
, 
m‘hodR‘uº
, 
m‘hodObj
);

702 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

703 
	`ALOGD
("Failed constructing‡nnotationƒlement");

704 
ba
;

707 
çed
 = 
çl£
;

709 
ba
:

711 
	`dvmR–—£T¿ckedAÎoc
(
ÃwMemb”
, 
£lf
);

712 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÇmeObj
, 
£lf
);

713 
	`dvmR–—£T¿ckedAÎoc
(
v®ueObj
, 
£lf
);

714 
	`dvmR–—£T¿ckedAÎoc
(
m‘hodObj
, 
£lf
);

715 ià(
çed
)

716  
NULL
;

718  
ÃwMemb”
;

719 
	}
}

738 
Objeù
* 
	$´oûssEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

739 cÚ¡ 
u1
** 
pPŒ
)

741 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

742 
Objeù
* 
ÃwAÂo
 = 
NULL
;

743 
A¼ayObjeù
* 
–em’tA¼ay
 = 
NULL
;

744 cÚ¡ 
CÏssObjeù
* 
ªnoCÏss
;

745 cÚ¡ 
u1
* 
±r
;

746 
u4
 
ty³Idx
, 
size
, 
couÁ
;

748 
±r
 = *
pPŒ
;

749 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

750 
size
 = 
	`»adUËb128
(&
±r
);

752 
	`LOGVV
("-----…roûssEnø±r=%°ty³=%d size=%d", 
±r
, 
ty³Idx
, 
size
);

754 
ªnoCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
şazz
->
pDvmDex
, 
ty³Idx
);

755 ià(
ªnoCÏss
 =ğ
NULL
) {

756 
ªnoCÏss
 = 
	`dvmResŞveCÏss
(
şazz
, 
ty³Idx
, 
Œue
);

757 ià(
ªnoCÏss
 =ğ
NULL
) {

758 
	`ALOGE
("Unableo„esolve %s‡nnotation class %d",

759 
şazz
->
desütÜ
, 
ty³Idx
);

760 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

761  
NULL
;

765 
	`ALOGV
("-----…rocessEnc…tr=%p [0x%06x]ypeIdx=%d size=%d class=%s",

766 *
pPŒ
, *pPŒ - (
u1
*è
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
,

767 
ty³Idx
, 
size
, 
ªnoCÏss
->
desütÜ
);

774 
JV®ue
 
»suÉ
;

776 ià(
size
 > 0) {

777 
–em’tA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

778 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
,

779 
size
, 
ALLOC_DEFAULT
);

780 ià(
–em’tA¼ay
 =ğ
NULL
) {

781 
	`ALOGE
("failedo‡llocate‡nnotation member‡rray (%dƒlements)",

782 
size
);

783 
ba
;

791 
couÁ
 = 0; couÁ < 
size
; count++) {

792 
Objeù
* 
ÃwMemb”
 = 
	`ü—‹AÂÙ©iÚMemb”
(
şazz
, 
ªnoCÏss
, &
±r
);

793 ià(
ÃwMemb”
 =ğ
NULL
)

794 
ba
;

797 
	`dvmS‘ObjeùA¼ayEËm’t
(
–em’tA¼ay
, 
couÁ
, 
ÃwMemb”
);

800 
	`dvmC®lM‘hod
(
£lf
,

801 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
,

802 
NULL
, &
»suÉ
, 
ªnoCÏss
, 
–em’tA¼ay
);

803 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

804 
	`ALOGD
("Failed creating‡n‡nnotation");

806 
ba
;

809 
ÃwAÂo
 = (
Objeù
*)
»suÉ
.
l
;

811 
ba
:

812 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
–em’tA¼ay
, 
NULL
);

813 *
pPŒ
 = 
±r
;

814 ià(
ÃwAÂo
 =ğ
NULL
 && !
	`dvmCheckExû±iÚ
(
£lf
)) {

816 
	`dvmThrowRuÁimeExû±iÚ
("failure in…rocessEncodedAnnotation");

818  
ÃwAÂo
;

819 
	}
}

828 
A¼ayObjeù
* 
	$´oûssAÂÙ©iÚS‘
(cÚ¡ 
CÏssObjeù
* 
şazz
,

829 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, 
visib™y
)

831 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

832 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

833 
A¼ayObjeù
* 
ªnoA¼ay
;

834 
i
, 
couÁ
;

835 
u4
 
d¡Index
;

838 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
))

839 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
);

840 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
))

841 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
);

844 
i
 = 
couÁ
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

845 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

846 ià(
pAÂoI‹m
->
visib™y
 == visibility)

847 
couÁ
++;

850 
ªnoA¼ay
 =

851 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
,

852 
couÁ
, 
ALLOC_DEFAULT
);

853 ià(
ªnoA¼ay
 =ğ
NULL
)

854  
NULL
;

860 
d¡Index
 = 0;

861 
i
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

862 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

863 ià(
pAÂoI‹m
->
visib™y
 != visibility)

865 cÚ¡ 
u1
* 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

866 
Objeù
 *
ªno
 = 
	`´oûssEncodedAÂÙ©iÚ
(
şazz
, &
±r
);

867 ià(
ªno
 =ğ
NULL
) {

868 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnoA¼ay
, 
NULL
);

869  
NULL
;

871 
	`dvmS‘ObjeùA¼ayEËm’t
(
ªnoA¼ay
, 
d¡Index
, 
ªno
);

872 ++
d¡Index
;

875  
ªnoA¼ay
;

876 
	}
}

882 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
	$g‘AÂÙ©iÚI‹mFromAÂÙ©iÚS‘
(

883 cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
,

884 
visib™y
, cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

886 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

887 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

888 
i
;

889 cÚ¡ 
CÏssObjeù
* 
ªnoCÏss
;

890 cÚ¡ 
u1
* 
±r
;

891 
u4
 
ty³Idx
;

894 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
))

895 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
);

896 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
))

897 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
);

899 
i
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

900 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

901 ià(
pAÂoI‹m
->
visib™y
 != visibility)

904 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

905 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

907 
ªnoCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
şazz
->
pDvmDex
, 
ty³Idx
);

908 ià(
ªnoCÏss
 =ğ
NULL
) {

909 
ªnoCÏss
 = 
	`dvmResŞveCÏss
(
şazz
, 
ty³Idx
, 
Œue
);

910 ià(
ªnoCÏss
 =ğ
NULL
) {

911  
NULL
;

915 ià(
ªnoCÏss
 =ğ
ªnÙ©iÚCÏzz
) {

916  
pAÂoI‹m
;

920  
NULL
;

921 
	}
}

927 
Objeù
* 
	$g‘AÂÙ©iÚObjeùFromAÂÙ©iÚS‘
(cÚ¡ 
CÏssObjeù
* 
şazz
,

928 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, 
visib™y
,

929 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

931 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
 = 
	`g‘AÂÙ©iÚI‹mFromAÂÙ©iÚS‘
(

932 
şazz
, 
pAÂoS‘
, 
visib™y
, 
ªnÙ©iÚCÏzz
);

933 ià(
pAÂoI‹m
 =ğ
NULL
) {

934  
NULL
;

936 cÚ¡ 
u1
* 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

937  
	`´oûssEncodedAÂÙ©iÚ
(
şazz
, &
±r
);

938 
	}
}

953 
boŞ
 
	$skAÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
)

955 cÚ¡ 
u1
* 
±r
 = *
pPŒ
;

956 
u1
 
v®ueTy³
, 
v®ueArg
;

957 
width
;

959 
v®ueTy³
 = *
±r
++;

960 
v®ueArg
 = 
v®ueTy³
 >> 
kDexAÂÙ©iÚV®ueArgShiá
;

961 
width
 = 
v®ueArg
 + 1;

963 
	`ALOGV
("-----ype is 0x%02x %d,…tr=%p [0x%06x]",

964 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
, 
v®ueArg
, 
±r
-1,

965 (
±r
-1è- (
u1
*)
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
);

967 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
) {

968 
kDexAÂÙ©iÚBy‹
: ;

969 
kDexAÂÙ©iÚShÜt
: ;

970 
kDexAÂÙ©iÚCh¬
: ;

971 
kDexAÂÙ©iÚIÁ
: ;

972 
kDexAÂÙ©iÚLÚg
: ;

973 
kDexAÂÙ©iÚFlßt
: ;

974 
kDexAÂÙ©iÚDoubË
: ;

975 
kDexAÂÙ©iÚSŒšg
: ;

976 
kDexAÂÙ©iÚTy³
: ;

977 
kDexAÂÙ©iÚM‘hod
: ;

978 
kDexAÂÙ©iÚF›ld
: ;

979 
kDexAÂÙ©iÚEnum
: ;

981 
kDexAÂÙ©iÚA¼ay
:

984 
u4
 
size
 = 
	`»adUËb128
(&
±r
);

985 
size
--) {

986 ià(!
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
))

987  
çl£
;

990 
width
 = 0;

992 
kDexAÂÙ©iÚAÂÙ©iÚ
:

994 ià(!
	`skEncodedAÂÙ©iÚ
(
şazz
, &
±r
))

995  
çl£
;

996 
width
 = 0;

998 
kDexAÂÙ©iÚBoŞ—n
:

999 
kDexAÂÙ©iÚNuÎ
:

1000 
width
 = 0;

1003 
	`ALOGE
("Bad‡ÂÙ©iÚƒËm’ˆv®uby‹ 0x%02x", 
v®ueTy³
);

1004 
	`as£¹
(
çl£
);

1005  
çl£
;

1008 
±r
 +ğ
width
;

1010 *
pPŒ
 = 
±r
;

1011  
Œue
;

1012 
	}
}

1018 
boŞ
 
	$skEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
)

1020 cÚ¡ 
u1
* 
±r
;

1021 
u4
 
size
;

1023 
±r
 = *
pPŒ
;

1024 (è
	`»adUËb128
(&
±r
);

1025 
size
 = 
	`»adUËb128
(&
±r
);

1031 
size
--) {

1032 (è
	`»adUËb128
(&
±r
);

1034 ià(!
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
))

1035  
çl£
;

1038 *
pPŒ
 = 
±r
;

1039  
Œue
;

1040 
	}
}

1047 
	$com·»CÏssDesütÜ
(
DexFe
* 
pDexFe
, 
u4
 
ty³Idx
,

1048 cÚ¡ * 
desütÜ
)

1050 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
ty³Idx
);

1052  
	`¡rcmp
(
¡r
, 
desütÜ
);

1053 
	}
}

1066 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
	$£¬chAÂÙ©iÚS‘
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1067 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, cÚ¡ * 
desütÜ
,

1068 
visib™y
)

1070 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1071 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
»suÉ
 = 
NULL
;

1072 
u4
 
ty³Idx
;

1073 
i
;

1077 
i
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

1078 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1080 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

1081 ià(
pAÂoI‹m
->
visib™y
 != visibility)

1083 cÚ¡ 
u1
* 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

1084 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

1086 ià(
	`com·»CÏssDesütÜ
(
pDexFe
, 
ty³Idx
, 
desütÜ
) == 0) {

1088 
»suÉ
 = 
pAÂoI‹m
;

1093  
»suÉ
;

1094 
	}
}

1100 cÚ¡ 
u1
* 
	$£¬chEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1101 cÚ¡ 
u1
* 
±r
, cÚ¡ * 
Çme
)

1103 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1104 
u4
 
ty³Idx
, 
size
;

1106 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

1107 
size
 = 
	`»adUËb128
(&
±r
);

1110 
size
--) {

1111 
u4
 
–em’tNameIdx
;

1112 cÚ¡ * 
–emName
;

1114 
–em’tNameIdx
 = 
	`»adUËb128
(&
±r
);

1115 
–emName
 = 
	`dexSŒšgById
(
pDexFe
, 
–em’tNameIdx
);

1116 ià(
	`¡rcmp
(
Çme
, 
–emName
) == 0) {

1118  
±r
;

1121 
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
);

1125  
NULL
;

1126 
	}
}

1128 
	#GAV_FAILED
 ((
Objeù
*è0x10000001)

	)

1139 
Objeù
* 
	$g‘AÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1140 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
, cÚ¡ * 
ªnoName
,

1141 
ex³ùedTy³
, cÚ¡ * 
debugAÂoName
)

1143 cÚ¡ 
u1
* 
±r
;

1144 
AÂÙ©iÚV®ue
 
av®ue
;

1147 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, 
ªnoName
);

1148 ià(
±r
 =ğ
NULL
) {

1149 
	`ALOGW
("% ªnÙ©iÚ†ack '%s' memb”", 
debugAÂoName
, 
ªnoName
);

1150  
GAV_FAILED
;

1153 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
))

1154  
GAV_FAILED
;

1157 ià(
av®ue
.
ty³
 !ğ
ex³ùedTy³
) {

1158 
	`ALOGW
("%s %s has wrongype (0x%02x,ƒxpected 0x%02x)",

1159 
debugAÂoName
, 
ªnoName
, 
av®ue
.
ty³
, 
ex³ùedTy³
);

1160  
GAV_FAILED
;

1163  (
Objeù
*)
av®ue
.
v®ue
.
l
;

1164 
	}
}

1176 
A¼ayObjeù
* 
	$g‘SigÇtu»V®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1177 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
)

1179 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1180 
Objeù
* 
obj
;

1182 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüSigÇtu»
,

1183 
kDexVisib™ySy¡em
);

1184 ià(
pAÂoI‹m
 =ğ
NULL
)

1185  
NULL
;

1190 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚA¼ay
,

1192 ià(
obj
 =ğ
GAV_FAILED
)

1193  
NULL
;

1194 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgObjeùA¼ay
);

1196  (
A¼ayObjeù
*)
obj
;

1197 
	}
}

1209 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜCÏss
(

1210 cÚ¡ 
CÏssObjeù
* 
şazz
)

1212 
DexFe
* 
pDexFe
;

1213 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1215 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

1216  
NULL
;

1218 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1219 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1220 ià(
pAÂoDœ
 !ğ
NULL
)

1221  
	`dexG‘CÏssAÂÙ©iÚS‘
(
pDexFe
, 
pAÂoDœ
);

1223  
NULL
;

1224 
	}
}

1234 
A¼ayObjeù
* 
	$dvmG‘CÏssAÂÙ©iÚs
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1236 
A¼ayObjeù
* 
ªnoA¼ay
;

1237 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1239 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1240 ià(
pAÂoS‘
 =ğ
NULL
) {

1242 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

1244 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

1245 
kDexVisib™yRuÁime
);

1248  
ªnoA¼ay
;

1249 
	}
}

1254 
Objeù
* 
	$dvmG‘CÏssAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1255 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

1257 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1258 ià(
pAÂoS‘
 =ğ
NULL
) {

1259  
NULL
;

1261  
	`g‘AÂÙ©iÚObjeùFromAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

1262 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

1263 
	}
}

1268 
boŞ
 
	$dvmIsCÏssAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1269 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

1271 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1272 ià(
pAÂoS‘
 =ğ
NULL
) {

1273  
NULL
;

1275 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
 = 
	`g‘AÂÙ©iÚI‹mFromAÂÙ©iÚS‘
(

1276 
şazz
, 
pAÂoS‘
, 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

1277  (
pAÂoI‹m
 !ğ
NULL
);

1278 
	}
}

1286 
A¼ayObjeù
* 
	$dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1288 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

1289 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1291 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1292 ià(
pAÂoS‘
 !ğ
NULL
)

1293 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

1295  
sigÇtu»
;

1296 
	}
}

1304 
Objeù
* 
	$dvmG‘EnşosšgM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1306 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1307 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1308 
Objeù
* 
obj
;

1310 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1311 ià(
pAÂoS‘
 =ğ
NULL
)

1312  
NULL
;

1314 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgM‘hod
,

1315 
kDexVisib™ySy¡em
);

1316 ià(
pAÂoI‹m
 =ğ
NULL
)

1317  
NULL
;

1322 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚM‘hod
,

1324 ià(
obj
 =ğ
GAV_FAILED
)

1325  
NULL
;

1326 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
 ||

1327 
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

1329  
obj
;

1330 
	}
}

1340 
CÏssObjeù
* 
	$dvmG‘Deş¬šgCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1342 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1343 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1344 
Objeù
* 
obj
;

1346 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1347 ià(
pAÂoS‘
 =ğ
NULL
)

1348  
NULL
;

1350 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgCÏss
,

1351 
kDexVisib™ySy¡em
);

1352 ià(
pAÂoI‹m
 =ğ
NULL
)

1353  
NULL
;

1358 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚTy³
,

1360 ià(
obj
 =ğ
GAV_FAILED
)

1361  
NULL
;

1363 
	`as£¹
(
	`dvmIsCÏssObjeù
(
obj
));

1364  (
CÏssObjeù
*)
obj
;

1365 
	}
}

1375 
CÏssObjeù
* 
	$dvmG‘EnşosšgCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1377 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1378 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1379 
Objeù
* 
obj
;

1381 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1382 ià(
pAÂoS‘
 =ğ
NULL
)

1383  
NULL
;

1385 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgCÏss
,

1386 
kDexVisib™ySy¡em
);

1387 ià(
pAÂoI‹m
 !ğ
NULL
) {

1391 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚTy³
,

1393 ià(
obj
 !ğ
GAV_FAILED
) {

1394 
	`as£¹
(
	`dvmIsCÏssObjeù
(
obj
));

1395  (
CÏssObjeù
*)
obj
;

1406 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgM‘hod
,

1407 
kDexVisib™ySy¡em
);

1408 ià(
pAÂoI‹m
 =ğ
NULL
)

1409  
NULL
;

1412 cÚ¡ 
u1
* 
±r
;

1413 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "value");

1414 ià(
±r
 =ğ
NULL
) {

1415 
	`ALOGW
("EnclosingMethod‡nnotation†acks 'value' member");

1416  
NULL
;

1420 
AÂÙ©iÚV®ue
 
av®ue
;

1421 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎRaw
)) {

1422 
	`ALOGW
("EnclosingMethod…arse failed");

1423  
NULL
;

1425 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚM‘hod
) {

1426 
	`ALOGW
("EnclosingMethod value has wrongype (0x%02x,ƒxpected 0x%02x)",

1427 
av®ue
.
ty³
, 
kDexAÂÙ©iÚM‘hod
);

1428  
NULL
;

1432 
M‘hod
* 
m‘h
 = 
	`»sŞveAmbiguousM‘hod
(
şazz
, 
av®ue
.
v®ue
.
i
);

1433 ià(
m‘h
 =ğ
NULL
)

1434  
NULL
;

1436 
CÏssObjeù
* 
m‘hCÏzz
 = 
m‘h
->
şazz
;

1437 
	`dvmAddT¿ckedAÎoc
((
Objeù
*è
m‘hCÏzz
, 
NULL
);

1438  
m‘hCÏzz
;

1439 
	}
}

1449 
boŞ
 
	$dvmG‘IÂ”CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
** 
pName
,

1450 * 
pAcûssFÏgs
)

1452 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1453 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1455 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1456 ià(
pAÂoS‘
 =ğ
NULL
)

1457  
çl£
;

1459 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüIÂ”CÏss
,

1460 
kDexVisib™ySy¡em
);

1461 ià(
pAÂoI‹m
 =ğ
NULL
)

1462  
çl£
;

1469 cÚ¡ 
u1
* 
±r
;

1470 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "name");

1471 ià(
±r
 =ğ
NULL
) {

1472 
	`ALOGW
("InnerClass‡nnotation†acks 'name' member");

1473  
çl£
;

1477 
AÂÙ©iÚV®ue
 
av®ue
;

1478 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
)) {

1479 
	`ALOGD
("processAnnotationValue failed on InnerClass member 'name'");

1480  
çl£
;

1484 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚNuÎ
 &&

1485 
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚSŒšg
)

1487 
	`ALOGW
("InnerClass‚ame has badype (0x%02x,ƒxpected STRING or NULL)",

1488 
av®ue
.
ty³
);

1489  
çl£
;

1492 *
pName
 = (
SŒšgObjeù
*è
av®ue
.
v®ue
.
l
;

1493 
	`as£¹
(*
pName
 =ğ
NULL
 || (*pName)->
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
);

1495 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "accessFlags");

1496 ià(
±r
 =ğ
NULL
) {

1497 
	`ALOGW
("InnerClass‡nnotation†acks 'accessFlags' member");

1498  
çl£
;

1502 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎRaw
)) {

1503 
	`ALOGW
("InnerClass‡ccessFlags…arse failed");

1504  
çl£
;

1506 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚIÁ
) {

1507 
	`ALOGW
("InnerClass value has wrongype (0x%02x,ƒxpected 0x%02x)",

1508 
av®ue
.
ty³
, 
kDexAÂÙ©iÚIÁ
);

1509  
çl£
;

1512 *
pAcûssFÏgs
 = 
av®ue
.
v®ue
.
i
;

1514  
Œue
;

1515 
	}
}

1525 
A¼ayObjeù
* 
	$dvmG‘Deş¬edCÏs£s
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1527 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1528 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1529 
Objeù
* 
obj
;

1531 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1532 ià(
pAÂoS‘
 =ğ
NULL
)

1533  
NULL
;

1535 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüMemb”CÏs£s
,

1536 
kDexVisib™ySy¡em
);

1537 ià(
pAÂoI‹m
 =ğ
NULL
)

1538  
NULL
;

1543 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "value",

1544 
kDexAÂÙ©iÚA¼ay
, "MemberClasses");

1545 ià(
obj
 =ğ
GAV_FAILED
)

1546  
NULL
;

1547 
	`as£¹
(
	`dvmIsA¼ay
((
A¼ayObjeù
*)
obj
));

1548 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
gDvm
.
şassJavaLªgCÏssA¼ay
);

1549  (
A¼ayObjeù
*)
obj
;

1550 
	}
}

1563 
	$com·»M‘hodSŒ
(
DexFe
* 
pDexFe
, 
u4
 
m‘hodIdx
,

1564 cÚ¡ 
M‘hod
* 
m‘hod
)

1566 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
m‘hodIdx
);

1567 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

1568 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
m‘hod
->
şazz
->
desütÜ
);

1570 ià(
»suÉ
 == 0) {

1571 
¡r
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1572 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
m‘hod
->
Çme
);

1573 ià(
»suÉ
 == 0) {

1574 
DexPrÙo
 
´Ùo
;

1575 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

1576 
»suÉ
 = 
	`dexPrÙoCom·»
(&
´Ùo
, &
m‘hod
->
´ÙÙy³
);

1580  
»suÉ
;

1581 
	}
}

1595 
u4
 
	$g‘M‘hodIdx
(cÚ¡ 
M‘hod
* 
m‘hod
)

1597 
DexFe
* 
pDexFe
 = 
m‘hod
->
şazz
->
pDvmDex
->pDexFile;

1598 
u4
 
hi
 = 
pDexFe
->
pH—d”
->
m‘hodIdsSize
 -1;

1599 
u4
 
lo
 = 0;

1600 
u4
 
cur
;

1602 
hi
 >ğ
lo
) {

1603 
cmp
;

1604 
cur
 = (
lo
 + 
hi
) / 2;

1606 
cmp
 = 
	`com·»M‘hodSŒ
(
pDexFe
, 
cur
, 
m‘hod
);

1607 ià(
cmp
 < 0) {

1608 
lo
 = 
cur
 + 1;

1609 } ià(
cmp
 > 0) {

1610 
hi
 = 
cur
 - 1;

1616 ià(
hi
 < 
lo
) {

1618 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1619 
	`ALOGE
("Unableo find method %s.%s %s in DEX file!",

1620 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

1621 
	`ä“
(
desc
);

1622 
	`dvmAbÜt
();

1625  
cur
;

1626 
	}
}

1633 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜM‘hod
(

1634 cÚ¡ 
M‘hod
* 
m‘hod
)

1636 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1637 
DexFe
* 
pDexFe
;

1638 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1639 cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
pM‘hodLi¡
;

1640 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1642 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

1643  
NULL
;

1644 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1646 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1647 ià(
pAÂoDœ
 !ğ
NULL
) {

1648 
pM‘hodLi¡
 = 
	`dexG‘M‘hodAÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

1649 ià(
pM‘hodLi¡
 !ğ
NULL
) {

1661 
u4
 
m‘hodIdx
 = 
	`g‘M‘hodIdx
(
m‘hod
);

1662 
u4
 
couÁ
 = 
	`dexG‘M‘hodAÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

1663 
u4
 
idx
;

1665 
idx
 = 0; idx < 
couÁ
; idx++) {

1666 ià(
pM‘hodLi¡
[
idx
].
m‘hodIdx
 == methodIdx) {

1668 
pAÂoS‘
 = 
	`dexG‘M‘hodAÂÙ©iÚS‘I‹m
(
pDexFe
,

1669 &
pM‘hodLi¡
[
idx
]);

1676  
pAÂoS‘
;

1677 
	}
}

1687 
A¼ayObjeù
* 
	$dvmG‘M‘hodAÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
)

1689 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1690 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1691 
A¼ayObjeù
* 
ªnoA¼ay
 = 
NULL
;

1693 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1694 ià(
pAÂoS‘
 =ğ
NULL
) {

1696 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

1698 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,
kDexVisib™yRuÁime
);

1701  
ªnoA¼ay
;

1702 
	}
}

1707 
Objeù
* 
	$dvmG‘M‘hodAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
M‘hod
* 
m‘hod
,

1708 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

1710 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1711 ià(
pAÂoS‘
 =ğ
NULL
) {

1712  
NULL
;

1714  
	`g‘AÂÙ©iÚObjeùFromAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

1715 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

1716 
	}
}

1721 
boŞ
 
	$dvmIsM‘hodAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1722 cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

1724 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1725 ià(
pAÂoS‘
 =ğ
NULL
) {

1726  
NULL
;

1728 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
 = 
	`g‘AÂÙ©iÚI‹mFromAÂÙ©iÚS‘
(

1729 
şazz
, 
pAÂoS‘
, 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

1730  (
pAÂoI‹m
 !ğ
NULL
);

1731 
	}
}

1739 
A¼ayObjeù
* 
	$dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
)

1741 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1742 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1743 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

1745 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1746 ià(
pAÂoS‘
 !ğ
NULL
)

1747 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

1749  
sigÇtu»
;

1750 
	}
}

1760 
A¼ayObjeù
* 
	$dvmG‘M‘hodThrows
(cÚ¡ 
M‘hod
* 
m‘hod
)

1762 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1763 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1764 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1767 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1768 ià(
pAÂoS‘
 =ğ
NULL
)

1769  
NULL
;

1772 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüThrows
,

1773 
kDexVisib™ySy¡em
);

1774 ià(
pAÂoI‹m
 =ğ
NULL
)

1775  
NULL
;

1780 
Objeù
* 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "value",

1781 
kDexAÂÙ©iÚA¼ay
, "Throws");

1782 ià(
obj
 =ğ
GAV_FAILED
)

1783  
NULL
;

1784 
	`as£¹
(
	`dvmIsA¼ay
((
A¼ayObjeù
*)
obj
));

1785 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
gDvm
.
şassJavaLªgCÏssA¼ay
);

1786  (
A¼ayObjeù
*)
obj
;

1787 
	}
}

1797 
Objeù
* 
	$dvmG‘AÂÙ©iÚDeçuÉV®ue
(cÚ¡ 
M‘hod
* 
m‘hod
)

1799 cÚ¡ 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1800 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1801 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1802 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1810 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1811 ià(
pAÂoDœ
 !ğ
NULL
)

1812 
pAÂoS‘
 = 
	`dexG‘CÏssAÂÙ©iÚS‘
(
pDexFe
, 
pAÂoDœ
);

1813 ià(
pAÂoS‘
 =ğ
NULL
) {

1815  
NULL
;

1819 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1820 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüAÂÙ©iÚDeçuÉ
,

1821 
kDexVisib™ySy¡em
);

1822 ià(
pAÂoI‹m
 =ğ
NULL
) {

1826  
NULL
;

1833 cÚ¡ 
u1
* 
±r
;

1834 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "value");

1835 ià(
±r
 =ğ
NULL
) {

1836 
	`ALOGW
("AnnotationDefault‡nnotation†acks 'value'");

1837  
NULL
;

1839 ià((*
±r
 & 
kDexAÂÙ©iÚV®ueTy³Mask
è!ğ
kDexAÂÙ©iÚAÂÙ©iÚ
) {

1840 
	`ALOGW
("AnnotationDefault value has wrongype (0x%02x)",

1841 *
±r
 & 
kDexAÂÙ©iÚV®ueTy³Mask
);

1842  
NULL
;

1850 
±r
++;

1851 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
,…Œ, 
m‘hod
->
Çme
);

1852 ià(
±r
 =ğ
NULL
)

1853  
NULL
;

1856 
AÂÙ©iÚV®ue
 
av®ue
;

1857 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
)) {

1858 
	`ALOGD
("processAnnotationValue failed on default for '%s'",

1859 
m‘hod
->
Çme
);

1860  
NULL
;

1864 
CÏssObjeù
* 
m‘hodR‘uº
 = 
	`dvmG‘BoxedR‘uºTy³
(
m‘hod
);

1865 
Objeù
* 
obj
 = (Objeù*)
av®ue
.
v®ue
.
l
;

1866 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
m‘hodR‘uº
);

1868  
obj
;

1869 
	}
}

1882 
	$com·»F›ldSŒ
(
DexFe
* 
pDexFe
, 
u4
 
idx
, cÚ¡ 
F›ld
* 
f›ld
)

1884 cÚ¡ 
DexF›ldId
* 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
idx
);

1885 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
);

1886 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
şazz
->
desütÜ
);

1888 ià(
»suÉ
 == 0) {

1889 
¡r
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

1890 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
Çme
);

1891 ià(
»suÉ
 == 0) {

1892 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

1893 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
sigÇtu»
);

1897  
»suÉ
;

1898 
	}
}

1905 
u4
 
	$g‘F›ldIdx
(cÚ¡ 
F›ld
* 
f›ld
)

1907 
DexFe
* 
pDexFe
 = 
f›ld
->
şazz
->
pDvmDex
->pDexFile;

1908 
u4
 
hi
 = 
pDexFe
->
pH—d”
->
f›ldIdsSize
 -1;

1909 
u4
 
lo
 = 0;

1910 
u4
 
cur
;

1912 
hi
 >ğ
lo
) {

1913 
cmp
;

1914 
cur
 = (
lo
 + 
hi
) / 2;

1916 
cmp
 = 
	`com·»F›ldSŒ
(
pDexFe
, 
cur
, 
f›ld
);

1917 ià(
cmp
 < 0) {

1918 
lo
 = 
cur
 + 1;

1919 } ià(
cmp
 > 0) {

1920 
hi
 = 
cur
 - 1;

1926 ià(
hi
 < 
lo
) {

1928 
	`ALOGE
("Unableo find field %s.%s %s in DEX file!",

1929 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
, f›ld->
sigÇtu»
);

1930 
	`dvmAbÜt
();

1933  
cur
;

1934 
	}
}

1941 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜF›ld
(cÚ¡ 
F›ld
* 
f›ld
)

1943 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

1944 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1945 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1946 cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
pF›ldLi¡
;

1948 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1949 ià(
pAÂoDœ
 =ğ
NULL
)

1950  
NULL
;

1952 
pF›ldLi¡
 = 
	`dexG‘F›ldAÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

1953 ià(
pF›ldLi¡
 =ğ
NULL
)

1954  
NULL
;

1967 
u4
 
f›ldIdx
 = 
	`g‘F›ldIdx
(
f›ld
);

1968 
u4
 
couÁ
 = 
	`dexG‘F›ldAÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

1969 
u4
 
idx
;

1971 
idx
 = 0; idx < 
couÁ
; idx++) {

1972 ià(
pF›ldLi¡
[
idx
].
f›ldIdx
 == fieldIdx) {

1974  
	`dexG‘F›ldAÂÙ©iÚS‘I‹m
(
pDexFe
, &
pF›ldLi¡
[
idx
]);

1978  
NULL
;

1979 
	}
}

1989 
A¼ayObjeù
* 
	$dvmG‘F›ldAÂÙ©iÚs
(cÚ¡ 
F›ld
* 
f›ld
)

1991 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

1992 
A¼ayObjeù
* 
ªnoA¼ay
 = 
NULL
;

1993 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1995 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

1996 ià(
pAÂoS‘
 =ğ
NULL
) {

1998 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

2000 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

2001 
kDexVisib™yRuÁime
);

2004  
ªnoA¼ay
;

2005 
	}
}

2010 
Objeù
* 
	$dvmG‘F›ldAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
F›ld
* 
f›ld
,

2011 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

2013 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

2014 ià(
pAÂoS‘
 =ğ
NULL
) {

2015  
NULL
;

2017  
	`g‘AÂÙ©iÚObjeùFromAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

2018 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

2019 
	}
}

2024 
boŞ
 
	$dvmIsF›ldAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
,

2025 cÚ¡ 
F›ld
* 
f›ld
, cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
)

2027 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

2028 ià(
pAÂoS‘
 =ğ
NULL
) {

2029  
NULL
;

2031 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
 = 
	`g‘AÂÙ©iÚI‹mFromAÂÙ©iÚS‘
(

2032 
şazz
, 
pAÂoS‘
, 
kDexVisib™yRuÁime
, 
ªnÙ©iÚCÏzz
);

2033  (
pAÂoI‹m
 !ğ
NULL
);

2034 
	}
}

2042 
A¼ayObjeù
* 
	$dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(cÚ¡ 
F›ld
* 
f›ld
)

2044 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

2045 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

2046 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

2048 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

2049 ià(
pAÂoS‘
 !ğ
NULL
)

2050 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

2052  
sigÇtu»
;

2053 
	}
}

2068 
A¼ayObjeù
* 
	$´oûssAÂÙ©iÚS‘RefLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
,

2069 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
pAÂoS‘Li¡
, 
u4
 
couÁ
)

2071 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2072 
A¼ayObjeù
* 
ªnoA¼ayA¼ay
 = 
NULL
;

2073 
u4
 
idx
;

2076 
ªnoA¼ayA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

2077 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
, 
couÁ
, 
ALLOC_DEFAULT
);

2078 ià(
ªnoA¼ayA¼ay
 =ğ
NULL
) {

2079 
	`ALOGW
("annotation set„ef‡rray‡lloc failed");

2080 
ba
;

2083 
idx
 = 0; idx < 
couÁ
; idx++) {

2084 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2085 cÚ¡ 
DexAÂÙ©iÚS‘RefI‹m
* 
pI‹m
;

2086 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

2087 
Objeù
 *
ªnoS‘
;

2089 
pI‹m
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘Ref
(
pAÂoS‘Li¡
, 
idx
);

2090 
pAÂoS‘
 = 
	`dexG‘S‘RefI‹mI‹m
(
pDexFe
, 
pI‹m
);

2091 
ªnoS‘
 = (
Objeù
 *)
	`´oûssAÂÙ©iÚS‘
(
şazz
,

2092 
pAÂoS‘
,

2093 
kDexVisib™yRuÁime
);

2094 ià(
ªnoS‘
 =ğ
NULL
) {

2095 
	`ALOGW
("processAnnotationSet failed");

2096 
ªnoA¼ayA¼ay
 = 
NULL
;

2097 
ba
;

2099 
	`dvmS‘ObjeùA¼ayEËm’t
(
ªnoA¼ayA¼ay
, 
idx
, 
ªnoS‘
);

2100 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnoS‘
, 
£lf
);

2103 
ba
:

2104  
ªnoA¼ayA¼ay
;

2105 
	}
}

2112 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
	$fšdAÂÙ©iÚsI‹mFÜM‘hod
(

2113 cÚ¡ 
M‘hod
* 
m‘hod
)

2115 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2116 
DexFe
* 
pDexFe
;

2117 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

2118 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pP¬am‘”Li¡
;

2120 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

2121  
NULL
;

2123 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2124 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

2125 ià(
pAÂoDœ
 =ğ
NULL
)

2126  
NULL
;

2128 
pP¬am‘”Li¡
 = 
	`dexG‘P¬am‘”AÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

2129 ià(
pP¬am‘”Li¡
 =ğ
NULL
)

2130  
NULL
;

2143 
u4
 
m‘hodIdx
 = 
	`g‘M‘hodIdx
(
m‘hod
);

2144 
u4
 
couÁ
 = 
	`dexG‘P¬am‘”AÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

2145 
u4
 
idx
;

2147 
idx
 = 0; idx < 
couÁ
; idx++) {

2148 ià(
pP¬am‘”Li¡
[
idx
].
m‘hodIdx
 == methodIdx) {

2150  &
pP¬am‘”Li¡
[
idx
];

2154  
NULL
;

2155 
	}
}

2162 
	$couÁM‘hodArgum’ts
(cÚ¡ 
M‘hod
* 
m‘hod
)

2165  
	`¡¾’
(
m‘hod
->
shÜty
 + 1);

2166 
	}
}

2180 
A¼ayObjeù
* 
	$dvmG‘P¬am‘”AÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
)

2182 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2183 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pI‹m
;

2184 
A¼ayObjeù
* 
ªnoA¼ayA¼ay
 = 
NULL
;

2186 
pI‹m
 = 
	`fšdAÂÙ©iÚsI‹mFÜM‘hod
(
m‘hod
);

2187 ià(
pI‹m
 !ğ
NULL
) {

2188 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2189 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
pAÂoS‘Li¡
;

2190 
u4
 
size
;

2192 
size
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘RefSize
(
pDexFe
, 
pI‹m
);

2193 
pAÂoS‘Li¡
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘RefLi¡
(
pDexFe
, 
pI‹m
);

2194 
ªnoA¼ayA¼ay
 = 
	`´oûssAÂÙ©iÚS‘RefLi¡
(
şazz
, 
pAÂoS‘Li¡
, 
size
);

2197 
ªnoA¼ayA¼ay
 = 
	`em±yAÂoA¼ayA¼ay
(
	`couÁM‘hodArgum’ts
(
m‘hod
));

2200  
ªnoA¼ayA¼ay
;

2201 
	}
}

2217 
	$dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

2218 cÚ¡ 
DexEncodedA¼ay
* 
’codedA¼ay
, cÚ¡ 
CÏssObjeù
* 
şazz
) {

2219 
™”©Ü
->
’codedA¼ay
 =ƒncodedArray;

2220 
™”©Ü
->
cursÜ
 = 
’codedA¼ay
->
¬¿y
;

2221 
™”©Ü
->
size
 = 
	`»adUËb128
(&™”©Ü->
cursÜ
);

2222 
™”©Ü
->
–em’tsLeá
 = i‹¿tÜ->
size
;

2223 
™”©Ü
->
şazz
 = clazz;

2224 
	}
}

2229 
boŞ
 
	$dvmEncodedA¼ayI‹¿tÜHasNext
(cÚ¡ 
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
) {

2230  (
™”©Ü
->
–em’tsLeá
 != 0);

2231 
	}
}

2245 
boŞ
 
	$dvmEncodedA¼ayI‹¿tÜG‘Next
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

2246 
AÂÙ©iÚV®ue
* 
v®ue
) {

2247 
boŞ
 
´oûs£d
;

2249 ià(
™”©Ü
->
–em’tsLeá
 == 0) {

2250  
çl£
;

2253 
´oûs£d
 = 
	`´oûssAÂÙ©iÚV®ue
(
™”©Ü
->
şazz
, &™”©Ü->
cursÜ
,

2254 
v®ue
, 
kPrim™ivesOrObjeùs
);

2256 ià(! 
´oûs£d
) {

2257 
	`ALOGE
("Failedo…rocess‡rrayƒlement %d from %p",

2258 
™”©Ü
->
size
 - i‹¿tÜ->
–em’tsLeá
,

2259 
™”©Ü
->
’codedA¼ay
);

2260 
™”©Ü
->
–em’tsLeá
 = 0;

2261  
çl£
;

2264 
™”©Ü
->
–em’tsLeá
--;

2265  
Œue
;

2266 
	}
}

	@vm/reflect/Proxy.cpp

26 
	~"D®vik.h
"

28 
	~<¡dlib.h
>

31 
boŞ
 
»tuºTy³sA»Com·tibË
(
M‘hod
* 
ba£M‘hod
, M‘hod* 
subM‘hod
);

32 
boŞ
 
g©h”M‘hods
(
A¼ayObjeù
* 
š‹rçûs
, 
M‘hod
*** 
pM‘hods
,\

33 
A¼ayObjeù
** 
pThrows
, * 
pM‘hodCouÁ
);

34 
cİyW™houtDu¶iÿ‹s
(
M‘hod
** 
®lM‘hods
, 
®lCouÁ
,

35 
M‘hod
** 
outM‘hods
, 
A¼ayObjeù
* 
throws
);

36 
boŞ
 
ü—‹Exû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
,

37 
Poš‹rS‘
** 
pThrows
);

38 
upd©eExû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
* 
throws
);

39 
ü—‹CÚ¡ruùÜ
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘h
);

40 
ü—‹HªdËrM‘hod
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
d¡M‘h
,

41 cÚ¡ 
M‘hod
* 
¤cM‘h
);

42 
´oxyCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

43 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

44 
´oxyInvok”
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

45 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

46 
boŞ
 
mu¡W¿pExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
Objeù
* 
throwabË
);

49 
	#kThrowsF›ld
 0

	)

50 
	#kProxySF›ldCouÁ
 1

	)

66 
CÏssObjeù
* 
	$dvmG’”©eProxyCÏss
(
SŒšgObjeù
* 
¡r
, 
A¼ayObjeù
* 
š‹rçûs
,

67 
Objeù
* 
lßd”
)

69 
»suÉ
 = -1;

70 
A¼ayObjeù
* 
throws
 = 
NULL
;

72 * 
ÇmeSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡r
);

73 ià(
ÇmeSŒ
 =ğ
NULL
) {

74 
	`dvmThrowIÎeg®Argum’tExû±iÚ
("missing‚ame");

75  
NULL
;

78 
	`ALOGV
("+++ Generate…roxy class '%s' %p from %d interface classes",

79 
ÇmeSŒ
, 
lßd”
, 
š‹rçûs
->
Ëngth
);

105 
size_t
 
ÃwCÏssSize
 =

106 (
CÏssObjeù
è+ 
kProxySF›ldCouÁ
 * (
SticF›ld
);

107 
CÏssObjeù
* 
ÃwCÏss
 =

108 (
CÏssObjeù
*è
	`dvmM®loc
(
ÃwCÏssSize
, 
ALLOC_NON_MOVING
);

109 ià(
ÃwCÏss
 =ğ
NULL
)

110 
ba
;

111 
	`DVM_OBJECT_INIT
(
ÃwCÏss
, 
gDvm
.
şassJavaLªgCÏss
);

112 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

113 
ÃwCÏss
->
desütÜAÎoc
 = 
	`dvmNameToDesütÜ
(
ÇmeSŒ
);

114 
ÃwCÏss
->
desütÜ
 =‚ewCÏss->
desütÜAÎoc
;

115 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
ACC_PUBLIC
 | 
ACC_FINAL
);

116 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

117 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
su³r
),

118 (
Objeù
 *)
gDvm
.
şassJavaLªgReæeùProxy
);

119 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

120 
	`dvmS‘F›ldObjeù
((
Objeù
 *)
ÃwCÏss
,

121 
	`OFFSETOF_MEMBER
(
CÏssObjeù
, 
şassLßd”
),

122 (
Objeù
 *)
lßd”
);

127 
ÃwCÏss
->
dœeùM‘hodCouÁ
 = 1;

128 
ÃwCÏss
->
dœeùM‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

129 1 * (
M‘hod
));

130 
	`ü—‹CÚ¡ruùÜ
(
ÃwCÏss
, &ÃwCÏss->
dœeùM‘hods
[0]);

131 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
dœeùM‘hods
);

140 
m‘hodCouÁ
;

141 
M‘hod
 **
m‘hods
;

142 ià(!
	`g©h”M‘hods
(
š‹rçûs
, &
m‘hods
, &
throws
, &
m‘hodCouÁ
)) {

143 
ba
;

145 
ÃwCÏss
->
vœtu®M‘hodCouÁ
 = 
m‘hodCouÁ
;

146 
size_t
 
vœtu®M‘hodsSize
 = 
m‘hodCouÁ
 * (
M‘hod
);

147 
ÃwCÏss
->
vœtu®M‘hods
 =

148 (
M‘hod
*)
	`dvmLš—rAÎoc
(
ÃwCÏss
->
şassLßd”
, 
vœtu®M‘hodsSize
);

149 
i
 = 0; i < 
ÃwCÏss
->
vœtu®M‘hodCouÁ
; i++) {

150 
	`ü—‹HªdËrM‘hod
(
ÃwCÏss
, &ÃwCÏss->
vœtu®M‘hods
[
i
], 
m‘hods
[i]);

152 
	`ä“
(
m‘hods
);

153 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
vœtu®M‘hods
);

160 
size_t
 
š‹rçûCouÁ
 = 
š‹rçûs
->
Ëngth
;

161 
CÏssObjeù
** 
ifA¼ay
 = (CÏssObjeù**)(*)
š‹rçûs
->
cÚ‹Ás
;

162 
ÃwCÏss
->
š‹rçûCouÁ
 = interfaceCount;

163 
size_t
 
š‹rçûsSize
 = (
CÏssObjeù
*è* 
š‹rçûCouÁ
;

164 
ÃwCÏss
->
š‹rçûs
 =

165 (
CÏssObjeù
**)
	`dvmLš—rAÎoc
(
ÃwCÏss
->
şassLßd”
, 
š‹rçûsSize
);

166 
size_t
 
i
 = 0; i < 
š‹rçûCouÁ
; i++)

167 
ÃwCÏss
->
š‹rçûs
[
i
] = 
ifA¼ay
[i];

168 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
š‹rçûs
);

175 
	`as£¹
(
kProxySF›ldCouÁ
 == 1);

176 
ÃwCÏss
->
sf›ldCouÁ
 = 
kProxySF›ldCouÁ
;

178 
SticF›ld
* 
sf›ld
 = &
ÃwCÏss
->
sf›lds
[
kThrowsF›ld
];

179 
sf›ld
->
şazz
 = 
ÃwCÏss
;

180 
sf›ld
->
Çme
 = "throws";

181 
sf›ld
->
sigÇtu»
 = "[[Ljava/lang/Throwable;";

182 
sf›ld
->
acûssFÏgs
 = 
ACC_STATIC
 | 
ACC_PRIVATE
;

183 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, (
Objeù
*)
throws
);

191 
ÃwCÏss
->
¡©us
 = 
CLASS_LOADED
;

192 ià(!
	`dvmLškCÏss
(
ÃwCÏss
)) {

193 
	`ALOGD
("Proxy class†ink failed");

194 
ba
;

202 ià(!
	`dvmAddCÏssToHash
(
ÃwCÏss
)) {

203 
	`ALOGE
("ERROR:‡ttemptedo generate %s morehan once",

204 
ÃwCÏss
->
desütÜ
);

205 
ba
;

208 
»suÉ
 = 0;

210 
ba
:

211 
	`ä“
(
ÇmeSŒ
);

212 ià(
»suÉ
 != 0) {

214 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

215 
ÃwCÏss
 = 
NULL
;

216 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

218 
	`dvmThrowRuÁimeExû±iÚ
(
NULL
);

223 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
throws
, 
NULL
);

224 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

226  
ÃwCÏss
;

227 
	}
}

239 
boŞ
 
	$g©h”M‘hods
(
A¼ayObjeù
* 
š‹rçûs
, 
M‘hod
*** 
pM‘hods
,

240 
A¼ayObjeù
** 
pThrows
, * 
pM‘hodCouÁ
)

242 
CÏssObjeù
** 
şas£s
;

243 
A¼ayObjeù
* 
throws
 = 
NULL
;

244 
M‘hod
** 
m‘hods
 = 
NULL
;

245 
M‘hod
** 
®lM‘hods
 = 
NULL
;

246 
numIÁ”çûs
, 
maxCouÁ
, 
aùu®CouÁ
, 
®lCouÁ
;

247 
boŞ
 
»suÉ
 = 
çl£
;

248 
i
;

254 
maxCouÁ
 = 3;

255 
numIÁ”çûs
 = 
š‹rçûs
->
Ëngth
;

256 
şas£s
 = (
CÏssObjeù
**)(*)
š‹rçûs
->
cÚ‹Ás
;

258 
i
 = 0; i < 
numIÁ”çûs
; i++, 
şas£s
++) {

259 
CÏssObjeù
* 
şazz
 = *
şas£s
;

261 
	`LOGVV
("--- %s virtualMethodCount=%d",

262 
şazz
->
desütÜ
, cÏzz->
vœtu®M‘hodCouÁ
);

263 
maxCouÁ
 +ğ
şazz
->
vœtu®M‘hodCouÁ
;

265 
j
;

266 
j
 = 0; j < 
şazz
->
iáabËCouÁ
; j++) {

267 
CÏssObjeù
* 
işass
 = 
şazz
->
iáabË
[
j
].clazz;

269 
	`LOGVV
("--- +%s %d",

270 
işass
->
desütÜ
, işass->
vœtu®M‘hodCouÁ
);

271 
maxCouÁ
 +ğ
işass
->
vœtu®M‘hodCouÁ
;

275 
m‘hods
 = (
M‘hod
**è
	`m®loc
(
maxCouÁ
 * (*methods));

276 
®lM‘hods
 = (
M‘hod
**è
	`m®loc
(
maxCouÁ
 * (*
m‘hods
));

277 ià(
m‘hods
 =ğ
NULL
 || 
®lM‘hods
 == NULL)

278 
ba
;

284 
CÏssObjeù
* 
obj
 = 
gDvm
.
şassJavaLªgObjeù
;

285 
®lM‘hods
[0] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_equ®s
];

286 
®lM‘hods
[1] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_hashCode
];

287 
®lM‘hods
[2] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_toSŒšg
];

288 
®lCouÁ
 = 3;

294 
şas£s
 = (
CÏssObjeù
**)(*)
š‹rçûs
->
cÚ‹Ás
;

295 
i
 = 0; i < 
numIÁ”çûs
; i++, 
şas£s
++) {

296 
CÏssObjeù
* 
şazz
 = *
şas£s
;

297 
j
;

299 
j
 = 0; j < 
şazz
->
vœtu®M‘hodCouÁ
; j++) {

300 
®lM‘hods
[
®lCouÁ
++] = &
şazz
->
vœtu®M‘hods
[
j
];

303 
j
 = 0; j < 
şazz
->
iáabËCouÁ
; j++) {

304 
CÏssObjeù
* 
işass
 = 
şazz
->
iáabË
[
j
].clazz;

305 
k
;

307 
k
 = 0; k < 
işass
->
vœtu®M‘hodCouÁ
; k++) {

308 
®lM‘hods
[
®lCouÁ
++] = &
işass
->
vœtu®M‘hods
[
k
];

312 
	`as£¹
(
®lCouÁ
 =ğ
maxCouÁ
);

319 
CÏssObjeù
* 
¬rA¼CÏss
;

320 
¬rA¼CÏss
 = 
	`dvmFšdA¼ayCÏss
("[[Ljava/Ïng/ThrowabË;", 
NULL
);

321 ià(
¬rA¼CÏss
 =ğ
NULL
)

322 
ba
;

323 
throws
 = 
	`dvmAÎocA¼ayByCÏss
(
¬rA¼CÏss
, 
®lCouÁ
, 
ALLOC_DEFAULT
);

328 
aùu®CouÁ
 = 
	`cİyW™houtDu¶iÿ‹s
(
®lM‘hods
, 
®lCouÁ
, 
m‘hods
, 
throws
);

329 ià(
aùu®CouÁ
 < 0)

330 
ba
;

338 *
pM‘hods
 = 
m‘hods
;

339 *
pM‘hodCouÁ
 = 
aùu®CouÁ
;

340 *
pThrows
 = 
throws
;

341 
»suÉ
 = 
Œue
;

343 
ba
:

344 
	`ä“
(
®lM‘hods
);

345 ià(!
»suÉ
) {

346 
	`ä“
(
m‘hods
);

347 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
throws
, 
NULL
);

349  
»suÉ
;

350 
	}
}

374 
	$cİyW™houtDu¶iÿ‹s
(
M‘hod
** 
®lM‘hods
, 
®lCouÁ
,

375 
M‘hod
** 
outM‘hods
, 
A¼ayObjeù
* 
throwLi¡s
)

377 
outCouÁ
 = 0;

378 
i
, 
j
;

393 
i
 = 0; i < 
®lCouÁ
; i++) {

394 
boŞ
 
be¡
, 
du³
;

396 ià(
®lM‘hods
[
i
] =ğ
NULL
)

406 
du³
 = 
çl£
;

407 
be¡
 = 
Œue
;

408 
j
 = 0; j < 
®lCouÁ
; j++) {

409 ià(
i
 =ğ
j
)

411 ià(
®lM‘hods
[
j
] =ğ
NULL
)

414 ià(
	`dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(
®lM‘hods
[
i
],

415 
®lM‘hods
[
j
]) == 0)

422 
	`ALOGV
("MATCH on %s.%s‡nd %s.%s",

423 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

424 
®lM‘hods
[
j
]->
şazz
->
desütÜ
,‡ÎM‘hods[j]->
Çme
);

425 
du³
 = 
Œue
;

426 ià(!
	`»tuºTy³sA»Com·tibË
(
®lM‘hods
[
i
],‡ÎM‘hods[
j
]))

427 
be¡
 = 
çl£
;

438 ià(
du³
) {

439 ià(
be¡
) {

440 
	`ALOGV
("BEST %d %s.% -> %d", 
i
,

441 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

442 
outCouÁ
);

445 
Poš‹rS‘
* 
commÚThrows
 = 
NULL
;

446 ià(!
	`ü—‹Exû±iÚCÏssLi¡
(
®lM‘hods
[
i
], &
commÚThrows
))

453 
j
 = 0; j < 
®lCouÁ
; j++) {

454 ià(
i
 =ğ
j
)

456 ià(
®lM‘hods
[
j
] =ğ
NULL
)

458 ià(
	`dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(
®lM‘hods
[
i
],

459 
®lM‘hods
[
j
]) == 0)

461 
	`ALOGV
("DEL %d %s.%s", 
j
,

462 
®lM‘hods
[
j
]->
şazz
->
desütÜ
,

463 
®lM‘hods
[
j
]->
Çme
);

469 ià(
commÚThrows
 !ğ
NULL
) {

470 
	`upd©eExû±iÚCÏssLi¡
(
®lM‘hods
[
j
],

471 
commÚThrows
);

474 
®lM‘hods
[
j
] = 
NULL
;

483 ià(
commÚThrows
 !ğ
NULL
 &&

484 
	`dvmPoš‹rS‘G‘CouÁ
(
commÚThrows
) > 0)

486 
commÚCouÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
commÚThrows
);

487 
A¼ayObjeù
* 
throwA¼ay
;

488 
Objeù
** 
cÚ‹Ás
;

489 
’t
;

491 
throwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

492 
gDvm
.
şassJavaLªgCÏssA¼ay
, 
commÚCouÁ
,

493 
ALLOC_DEFAULT
);

494 ià(
throwA¼ay
 =ğ
NULL
) {

495 
	`ALOGE
("common-throw‡rray‡lloc failed");

499 
cÚ‹Ás
 = (
Objeù
**)(*)
throwA¼ay
->contents;

500 
’t
 = 0;ƒÁ < 
commÚCouÁ
;ƒnt++) {

501 
cÚ‹Ás
[
’t
] = (
Objeù
*)

502 
	`dvmPoš‹rS‘G‘EÁry
(
commÚThrows
, 
’t
);

506 
cÚ‹Ás
 = (
Objeù
**)(*)
throwLi¡s
->contents;

507 
cÚ‹Ás
[
outCouÁ
] = (
Objeù
*è
throwA¼ay
;

508 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
throwA¼ay
, 
NULL
);

512 
outM‘hods
[
outCouÁ
++] = 
®lM‘hods
[
i
];

513 
®lM‘hods
[
i
] = 
NULL
;

515 
	`dvmPoš‹rS‘F»e
(
commÚThrows
);

517 
	`ALOGV
("BEST‚Ù %d", 
i
);

523 
	`ALOGV
("COPY sšgËtÚ %d %s.% -> %d", 
i
,

524 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

525 
outCouÁ
);

528 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
®lM‘hods
[
i
]);

529 ià(
exû±iÚA¼ay
 !ğ
NULL
) {

530 
Objeù
** 
cÚ‹Ás
;

532 
cÚ‹Ás
 = (
Objeù
**)(*)
throwLi¡s
->contents;

533 
cÚ‹Ás
[
outCouÁ
] = (
Objeù
*è
exû±iÚA¼ay
;

534 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

537 
outM‘hods
[
outCouÁ
++] = 
®lM‘hods
[
i
];

538 
®lM‘hods
[
i
] = 
NULL
;

545 
i
 = 0; i < 
®lCouÁ
; i++) {

546 ià(
®lM‘hods
[
i
] !ğ
NULL
) {

547 
	`ALOGV
("BAD DUPE: %d %s.%s", 
i
,

548 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
);

549 
	`dvmThrowIÎeg®Argum’tExû±iÚ
(

555  
outCouÁ
;

556 
	}
}

568 
	$»duûExû±iÚCÏssLi¡
(
A¼ayObjeù
* 
exû±iÚA¼ay
)

570 cÚ¡ 
CÏssObjeù
** 
şas£s
 =

571 (cÚ¡ 
CÏssObjeù
**)(*)
exû±iÚA¼ay
->
cÚ‹Ás
;

577 
size_t
 
Ën
 = 
exû±iÚA¼ay
->
Ëngth
;

578 
size_t
 
i
 = 0; i < 
Ën
 - 1; i++) {

579 ià(
şas£s
[
i
] =ğ
NULL
)

581 
size_t
 
j
 = 
i
 + 1; j < 
Ën
; j++) {

582 ià(
şas£s
[
j
] =ğ
NULL
)

585 ià(
	`dvmIn¡ªûof
(
şas£s
[
i
], cÏs£s[
j
])) {

586 
şas£s
[
i
] = 
NULL
;

588 } ià(
	`dvmIn¡ªûof
(
şas£s
[
j
], cÏs£s[
i
])) {

589 
şas£s
[
j
] = 
NULL
;

593 
	}
}

601 
boŞ
 
	$ü—‹Exû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
** 
pThrows
)

603 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
NULL
;

604 
boŞ
 
»suÉ
 = 
çl£
;

606 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
m‘hod
);

607 ià(
exû±iÚA¼ay
 !ğ
NULL
 &&ƒxû±iÚA¼ay->
Ëngth
 > 0) {

609 
	`»duûExû±iÚCÏssLi¡
(
exû±iÚA¼ay
);

611 *
pThrows
 = 
	`dvmPoš‹rS‘AÎoc
(
exû±iÚA¼ay
->
Ëngth
);

612 ià(*
pThrows
 =ğ
NULL
)

613 
ba
;

615 cÚ¡ 
CÏssObjeù
** 
cÚ‹Ás
;

617 
cÚ‹Ás
 = (cÚ¡ 
CÏssObjeù
**)(*)
exû±iÚA¼ay
->contents;

618 
size_t
 
i
 = 0; i < 
exû±iÚA¼ay
->
Ëngth
; i++) {

619 ià(
cÚ‹Ás
[
i
] !ğ
NULL
)

620 
	`dvmPoš‹rS‘AddEÁry
(*
pThrows
, 
cÚ‹Ás
[
i
]);

623 *
pThrows
 = 
NULL
;

626 
»suÉ
 = 
Œue
;

628 
ba
:

629 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

630  
»suÉ
;

631 
	}
}

642 
	$upd©eExû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
* 
throws
)

644 
£tSize
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
throws
);

645 ià(
£tSize
 == 0)

648 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
m‘hod
);

649 ià(
exû±iÚA¼ay
 =ğ
NULL
) {

651 
	`dvmPoš‹rS‘CË¬
(
throws
);

656 
	`»duûExû±iÚCÏssLi¡
(
exû±iÚA¼ay
);

658 
size_t
 
mixL’
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
throws
);

659 cÚ¡ 
CÏssObjeù
* 
mixS‘
[
mixL’
];

661 
size_t
 
deşL’
 = 
exû±iÚA¼ay
->
Ëngth
;

662 cÚ¡ 
CÏssObjeù
** 
deşS‘
 = (cÚ¡ CÏssObjeù**)(*)
exû±iÚA¼ay
->
cÚ‹Ás
;

665 
size_t
 
i
 = 0; i < 
mixL’
; i++) {

666 
mixS‘
[
i
] = (
CÏssObjeù
*)
	`dvmPoš‹rS‘G‘EÁry
(
throws
, i);

669 
size_t
 
i
 = 0; i < 
mixL’
; i++) {

670 
size_t
 
j
;

671 
j
 = 0; j < 
deşL’
; j++) {

672 ià(
deşS‘
[
j
] =ğ
NULL
)

675 ià(
mixS‘
[
i
] =ğ
deşS‘
[
j
]) {

678 } ià(
	`dvmIn¡ªûof
(
mixS‘
[
i
], 
deşS‘
[
j
])) {

681 } ià(
	`dvmIn¡ªûof
(
deşS‘
[
j
], 
mixS‘
[
i
])) {

683 
mixS‘
[
i
] = 
deşS‘
[
j
];

688 ià(
j
 =ğ
deşL’
) {

690 
mixS‘
[
i
] = 
NULL
;

695 
	`dvmPoš‹rS‘CË¬
(
throws
);

696 
size_t
 
i
 = 0; i < 
mixL’
; i++) {

697 ià(
mixS‘
[
i
] !ğ
NULL
)

698 
	`dvmPoš‹rS‘AddEÁry
(
throws
, 
mixS‘
[
i
]);

701 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

702 
	}
}

713 
boŞ
 
	$»tuºTy³sA»Com·tibË
(
M‘hod
* 
subM‘hod
, M‘hod* 
ba£M‘hod
)

715 cÚ¡ * 
ba£Sig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
ba£M‘hod
->
´ÙÙy³
);

716 cÚ¡ * 
subSig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
subM‘hod
->
´ÙÙy³
);

717 
CÏssObjeù
* 
ba£CÏss
;

718 
CÏssObjeù
* 
subCÏss
;

720 ià(
ba£Sig
[1] =ğ'\0' || 
subSig
[1] == '\0') {

722  (
ba£Sig
[0] =ğ
subSig
[0] && baseSig[1] == subSig[1]);

725 
ba£CÏss
 = 
	`dvmFšdCÏss
(
ba£Sig
, 
ba£M‘hod
->
şazz
->
şassLßd”
);

726 
subCÏss
 = 
	`dvmFšdCÏss
(
subSig
, 
subM‘hod
->
şazz
->
şassLßd”
);

727 
boŞ
 
»suÉ
 = 
	`dvmIn¡ªûof
(
subCÏss
, 
ba£CÏss
);

728  
»suÉ
;

729 
	}
}

735 
	$ü—‹CÚ¡ruùÜ
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘h
)

744 
m‘h
->
şazz
 = clazz;

745 
m‘h
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_NATIVE
;

746 
m‘h
->
Çme
 = "<init>";

747 
m‘h
->
´ÙÙy³
 =

748 
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
->
´ÙÙy³
;

749 
m‘h
->
shÜty
 =

750 
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
->
shÜty
;

753 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
m‘h
) + 1;

754 
m‘h
->
»gi¡”sSize
 = m‘h->
šsSize
 = 
¬gsSize
;

756 
m‘h
->
ÇtiveFunc
 = 
´oxyCÚ¡ruùÜ
;

757 
	}
}

763 
	$ü—‹HªdËrM‘hod
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
d¡M‘h
,

764 cÚ¡ 
M‘hod
* 
¤cM‘h
)

766 
d¡M‘h
->
şazz
 = clazz;

767 
d¡M‘h
->
š¢s
 = (
u2
*è
¤cM‘h
;

768 
d¡M‘h
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_NATIVE
;

769 
d¡M‘h
->
Çme
 = 
¤cM‘h
->name;

770 
d¡M‘h
->
´ÙÙy³
 = 
¤cM‘h
->prototype;

771 
d¡M‘h
->
shÜty
 = 
¤cM‘h
->shorty;

774 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
d¡M‘h
) + 1;

775 
d¡M‘h
->
»gi¡”sSize
 = d¡M‘h->
šsSize
 = 
¬gsSize
;

777 
d¡M‘h
->
ÇtiveFunc
 = 
´oxyInvok”
;

778 
	}
}

791 
A¼ayObjeù
* 
	$boxM‘hodArgs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
¬gs
)

793 cÚ¡ * 
desc
 = &
m‘hod
->
shÜty
[1];

796 
size_t
 
¬gCouÁ
 = 
	`dexPrÙoG‘P¬am‘”CouÁ
(&
m‘hod
->
´ÙÙy³
);

799 
A¼ayObjeù
* 
¬gA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgObjeùA¼ay
,

800 
¬gCouÁ
, 
ALLOC_DEFAULT
);

801 ià(
¬gA¼ay
 =ğ
NULL
)

802  
NULL
;

803 
Objeù
** 
¬gObjeùs
 = (Objeù**)(*)
¬gA¼ay
->
cÚ‹Ás
;

809 
size_t
 
¤cIndex
 = 0;

810 
size_t
 
d¡Index
 = 0;

811 *
desc
 != '\0') {

812 
descCh¬
 = *(
desc
++);

813 
JV®ue
 
v®ue
;

815 
descCh¬
) {

822 
v®ue
.
i
 = 
¬gs
[
¤cIndex
++];

823 
¬gObjeùs
[
d¡Index
] = (
Objeù
*è
	`dvmBoxPrim™ive
(
v®ue
,

824 
	`dvmFšdPrim™iveCÏss
(
descCh¬
));

826 
	`dvmR–—£T¿ckedAÎoc
(
¬gObjeùs
[
d¡Index
], 
NULL
);

827 
d¡Index
++;

831 
v®ue
.
j
 = 
	`dvmG‘ArgLÚg
(
¬gs
, 
¤cIndex
);

832 
¤cIndex
 += 2;

833 
¬gObjeùs
[
d¡Index
] = (
Objeù
*è
	`dvmBoxPrim™ive
(
v®ue
,

834 
	`dvmFšdPrim™iveCÏss
(
descCh¬
));

835 
	`dvmR–—£T¿ckedAÎoc
(
¬gObjeùs
[
d¡Index
], 
NULL
);

836 
d¡Index
++;

840 
¬gObjeùs
[
d¡Index
++] = (
Objeù
*è
¬gs
[
¤cIndex
++];

845  
¬gA¼ay
;

846 
	}
}

852 
	$´oxyCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

853 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

855 
Objeù
* 
obj
 = (Objeù*è
¬gs
[0];

856 
Objeù
* 
hªdËr
 = (Objeù*è
¬gs
[1];

858 
	`dvmS‘F›ldObjeù
(
obj
, 
gDvm
.
offJavaLªgReæeùProxy_h
, 
hªdËr
);

859 
	}
}

871 
	$´oxyInvok”
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

872 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

874 
Objeù
* 
thisObj
 = (Objeù*è
¬gs
[0];

875 
Objeù
* 
m‘hodObj
 = 
NULL
;

876 
A¼ayObjeù
* 
¬gA¼ay
 = 
NULL
;

877 
Objeù
* 
hªdËr
;

878 
M‘hod
* 
švoke
;

879 
CÏssObjeù
* 
»tuºTy³
;

880 
JV®ue
 
švokeResuÉ
;

886 
hªdËr
 = 
	`dvmG‘F›ldObjeù
(
thisObj
, 
gDvm
.
offJavaLªgReæeùProxy_h
);

893 
švoke
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
hªdËr
->
şazz
, "invoke",

895 ià(
švoke
 =ğ
NULL
) {

896 
	`ALOGE
("Unableo find invoke()");

897 
	`dvmAbÜt
();

900 
	`ALOGV
("invoke: %s.%s,his=%p, handler=%s",

901 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

902 
thisObj
, 
hªdËr
->
şazz
->
desütÜ
);

914 
m‘hodObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
((
M‘hod
*è
m‘hod
->
š¢s
);

915 ià(
m‘hodObj
 =ğ
NULL
) {

916 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

917 
ba
;

925 
»tuºTy³
 = 
	`dvmG‘BoxedR‘uºTy³
(
m‘hod
);

926 ià(
»tuºTy³
 =ğ
NULL
) {

927 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

928 
	`ALOGE
("Could‚Ù d‘”mš»tuºy³ fÜ '%s'", 
desc
);

929 
	`ä“
(
desc
);

930 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

931 
ba
;

933 
	`ALOGV
("„‘uºy³ wÈb%s", 
»tuºTy³
->
desütÜ
);

940 
¬gA¼ay
 = 
	`boxM‘hodArgs
(
m‘hod
, 
¬gs
+1);

941 ià(
	`dvmCheckExû±iÚ
(
£lf
))

942 
ba
;

954 
	`dvmC®lM‘hod
(
£lf
, 
švoke
, 
hªdËr
, &
švokeResuÉ
,

955 
thisObj
, 
m‘hodObj
, 
¬gA¼ay
);

956 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

957 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

958 ià(
	`mu¡W¿pExû±iÚ
(
m‘hod
, 
exûp
)) {

960 
	`dvmW¿pExû±iÚ
("Ljava/lang/reflect/UndeclaredThrowableException;");

962 
ba
;

970 ià(
»tuºTy³
->
´im™iveTy³
 =ğ
PRIM_VOID
) {

971 
	`LOGVV
("+++ ignoring„eturno void");

972 } ià(
švokeResuÉ
.
l
 =ğ
NULL
) {

973 ià(
	`dvmIsPrim™iveCÏss
(
»tuºTy³
)) {

974 
	`dvmThrowNuÎPoš‹rExû±iÚ
(

976 
ba
;

978 
pResuÉ
->
l
 = 
NULL
;

980 ià(!
	`dvmUnboxPrim™ive
((
Objeù
*)
švokeResuÉ
.
l
, 
»tuºTy³
, 
pResuÉ
)) {

981 
	`dvmThrowCÏssCa¡Exû±iÚ
(((
Objeù
*)
švokeResuÉ
.
l
)->
şazz
,

982 
»tuºTy³
);

983 
ba
;

987 
ba
:

988 
	`dvmR–—£T¿ckedAÎoc
(
m‘hodObj
, 
£lf
);

989 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
¬gA¼ay
, 
£lf
);

990 
	}
}

998 
boŞ
 
	$mu¡W¿pExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
Objeù
* 
throwabË
)

1000 ià(!
	`dvmIsCheckedExû±iÚ
(
throwabË
))

1001  
çl£
;

1003 cÚ¡ 
SticF›ld
* 
sf›ld
 = &
m‘hod
->
şazz
->
sf›lds
[
kThrowsF›ld
];

1004 cÚ¡ 
A¼ayObjeù
* 
throws
 = (A¼ayObjeù*è
	`dvmG‘SticF›ldObjeù
(
sf›ld
);

1006 
m‘hodIndex
 = 
m‘hod
 - m‘hod->
şazz
->
vœtu®M‘hods
;

1007 
	`as£¹
(
m‘hodIndex
 >ğ0 && m‘hodIndex < 
m‘hod
->
şazz
->
vœtu®M‘hodCouÁ
);

1009 cÚ¡ 
Objeù
** 
cÚ‹Ás
 = (cÚ¡ Objeù**)(*)
throws
->contents;

1010 cÚ¡ 
A¼ayObjeù
* 
m‘hodThrows
 = (A¼ayObjeù*è
cÚ‹Ás
[
m‘hodIndex
];

1012 ià(
m‘hodThrows
 =ğ
NULL
) {

1014  
Œue
;

1017 
size_t
 
throwCouÁ
 = 
m‘hodThrows
->
Ëngth
;

1018 cÚ¡ 
CÏssObjeù
** 
şas£s
 =

1019 (cÚ¡ 
CÏssObjeù
**)(*)
m‘hodThrows
->
cÚ‹Ás
;

1021 
size_t
 
i
 = 0; i < 
throwCouÁ
; i++) {

1022 ià(
	`dvmIn¡ªûof
(
throwabË
->
şazz
, 
şas£s
[
i
])) {

1024  
çl£
;

1029  
Œue
;

1030 
	}
}

	@vm/reflect/Reflect.cpp

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

32 
boŞ
 
	$dvmV®id©eBoxCÏs£s
()

34 cÚ¡ * 
şas£s
[] = {

43 
NULL


45 cÚ¡ ** 
cı
;

47 
cı
 = 
şas£s
; *cı !ğ
NULL
; ccp++) {

48 
CÏssObjeù
* 
şazz
;

50 
şazz
 = 
	`dvmFšdCÏssNoIn™
(*
cı
, 
NULL
);

51 ià(
şazz
 =ğ
NULL
) {

52 
	`ALOGE
("Couldn'ˆfšd '%s'", *
cı
);

53  
çl£
;

56 ià(
şazz
->
if›ldCouÁ
 != 1) {

57 
	`ALOGE
("Found %d instance fields in '%s'",

58 
şazz
->
if›ldCouÁ
, *
cı
);

59  
çl£
;

63  
Œue
;

64 
	}
}

74 
CÏssObjeù
* 
	$cÚv”tSigÇtu»P¬tToCÏss
(** 
pSigÇtu»
,

75 cÚ¡ 
CÏssObjeù
* 
defCÏss
)

77 
CÏssObjeù
* 
şazz
 = 
NULL
;

78 * 
sigÇtu»
 = *
pSigÇtu»
;

80 ià(*
sigÇtu»
 == '[') {

82 
§vedCh¬
;

84 *++
sigÇtu»
 == '[')

86 ià(*
sigÇtu»
 == 'L') {

87 *++
sigÇtu»
 != ';')

92 
§vedCh¬
 = *++
sigÇtu»
;

93 *
sigÇtu»
 = '\0';

94 
şazz
 = 
	`dvmFšdA¼ayCÏss
(*
pSigÇtu»
, 
defCÏss
->
şassLßd”
);

95 *
sigÇtu»
 = 
§vedCh¬
;

96 } ià(*
sigÇtu»
 == 'L') {

98 
§vedCh¬
;

99 *++
sigÇtu»
 != ';')

101 
§vedCh¬
 = *++
sigÇtu»
;

102 *
sigÇtu»
 = '\0';

103 
şazz
 = 
	`dvmFšdCÏssNoIn™
(*
pSigÇtu»
, 
defCÏss
->
şassLßd”
);

104 *
sigÇtu»
 = 
§vedCh¬
;

106 
şazz
 = 
	`dvmFšdPrim™iveCÏss
(*
sigÇtu»
++);

109 ià(
şazz
 =ğ
NULL
) {

110 
	`ALOGW
("UÇbËØm©ch cÏs fÜ…¬t: '%s'", *
pSigÇtu»
);

112 *
pSigÇtu»
 = 
sigÇtu»
;

113  
şazz
;

114 
	}
}

125 
A¼ayObjeù
* 
	$cÚv”tSigÇtu»ToCÏssA¼ay
(** 
pSigÇtu»
,

126 
CÏssObjeù
* 
defCÏss
)

128 * 
sigÇtu»
 = *
pSigÇtu»
;

130 
	`as£¹
(*
sigÇtu»
 == '(');

131 
sigÇtu»
++;

134 
size_t
 
couÁ
 = 0;

135 * 
ı
 = 
sigÇtu»
;

136 *
ı
 != ')') {

137 
couÁ
++;

139 ià(*
ı
 == '[') {

140 *++
ı
 == '[')

143 ià(*
ı
 == 'L') {

144 *++
ı
 != ';')

147 
ı
++;

149 
	`LOGVV
("REFLECT found %d…¬am‘” š '%s'", 
couÁ
, *
pSigÇtu»
);

152 
A¼ayObjeù
* 
şassA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
,

153 
couÁ
, 
ALLOC_DEFAULT
);

154 ià(
şassA¼ay
 =ğ
NULL
)

155  
NULL
;

158 
ı
 = 
sigÇtu»
;

159 
size_t
 
i
 = 0; i < 
couÁ
; i++) {

160 
CÏssObjeù
* 
şazz
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
defCÏss
);

161 ià(
şazz
 =ğ
NULL
) {

162 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

163  
NULL
;

165 
	`LOGVV
("REFLECT %d: '%s'", 
i
, 
şazz
->
desütÜ
);

166 
	`dvmS‘ObjeùA¼ayEËm’t
(
şassA¼ay
, 
i
, (
Objeù
 *)
şazz
);

169 *
pSigÇtu»
 = 
ı
;

172  
şassA¼ay
;

173 
	}
}

182 
	$f›ldToSlÙ
(cÚ¡ 
F›ld
* 
f›ld
, cÚ¡ 
CÏssObjeù
* 
şazz
)

184 
¦Ù
;

186 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

187 
¦Ù
 = (
SticF›ld
*)
f›ld
 - &
şazz
->
sf›lds
[0];

188 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
sf›ldCouÁ
);

189 
¦Ù
 = -(slot+1);

191 
¦Ù
 = (
In¡F›ld
*)
f›ld
 - 
şazz
->
if›lds
;

192 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
if›ldCouÁ
);

195  
¦Ù
;

196 
	}
}

201 
F›ld
* 
	$dvmSlÙToF›ld
(
CÏssObjeù
* 
şazz
, 
¦Ù
)

203 ià(
¦Ù
 < 0) {

204 
¦Ù
 = -(slot+1);

205 
	`as£¹
(
¦Ù
 < 
şazz
->
sf›ldCouÁ
);

206  (
F›ld
*)(*)&
şazz
->
sf›lds
[
¦Ù
];

208 
	`as£¹
(
¦Ù
 < 
şazz
->
if›ldCouÁ
);

209  (
F›ld
*)(*)&
şazz
->
if›lds
[
¦Ù
];

211 
	}
}

221 
Objeù
* 
	$ü—‹F›ldObjeù
(
F›ld
* 
f›ld
, cÚ¡ 
CÏssObjeù
* 
şazz
)

223 
Objeù
* 
»suÉ
 = 
NULL
;

224 
Objeù
* 
f›ldObj
 = 
NULL
;

225 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

226 
CÏssObjeù
* 
ty³
;

227 * 
mªgË
;

228 * 
ı
;

229 
¦Ù
;

231 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
));

233 
f›ldObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùF›ld
, 
ALLOC_DEFAULT
);

234 ià(
f›ldObj
 =ğ
NULL
)

235 
ba
;

237 
ı
 = 
mªgË
 = 
	`¡rdup
(
f›ld
->
sigÇtu»
);

238 
ty³
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
şazz
);

239 
	`ä“
(
mªgË
);

240 ià(
ty³
 =ğ
NULL
)

241 
ba
;

243 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
f›ld
->
Çme
);

244 ià(
ÇmeObj
 =ğ
NULL
)

245 
ba
;

247 
¦Ù
 = 
	`f›ldToSlÙ
(
f›ld
, 
şazz
);

249 
JV®ue
 
unu£d
;

250 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùF›ld_š™
,

251 
f›ldObj
, &
unu£d
, 
şazz
, 
ty³
, 
ÇmeObj
, 
¦Ù
);

252 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

253 
	`ALOGD
("Field class inithrewƒxception");

254 
ba
;

257 
»suÉ
 = 
f›ldObj
;

259 
ba
:

260 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

261 ià(
»suÉ
 =ğ
NULL
)

262 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›ldObj
, 
NULL
);

264  
»suÉ
;

265 
	}
}

273 
A¼ayObjeù
* 
	$dvmG‘Deş¬edF›lds
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

275 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
))

276 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùF›ld
);

279 
size_t
 
couÁ
;

280 ià(!
publicOÆy
)

281 
couÁ
 = 
şazz
->
sf›ldCouÁ
 + cÏzz->
if›ldCouÁ
;

283 
couÁ
 = 0;

284 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

285 ià((
şazz
->
sf›lds
[
i
].
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

286 
couÁ
++;

288 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

289 ià((
şazz
->
if›lds
[
i
].
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

290 
couÁ
++;

295 
A¼ayObjeù
* 
f›ldA¼ay
 =

296 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgReæeùF›ldA¼ay
, 
couÁ
, 
ALLOC_DEFAULT
);

297 ià(
f›ldA¼ay
 =ğ
NULL
)

298  
NULL
;

301 
size_t
 
f›ldCouÁ
 = 0;

302 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

303 ià(!
publicOÆy
 ||

304 (
şazz
->
sf›lds
[
i
].
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

306 
Objeù
* 
f›ld
 = 
	`ü—‹F›ldObjeù
(&
şazz
->
sf›lds
[
i
], clazz);

307 ià(
f›ld
 =ğ
NULL
) {

308 
ç
;

310 
	`dvmS‘ObjeùA¼ayEËm’t
(
f›ldA¼ay
, 
f›ldCouÁ
, 
f›ld
);

311 
	`dvmR–—£T¿ckedAÎoc
(
f›ld
, 
NULL
);

312 ++
f›ldCouÁ
;

315 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

316 ià(!
publicOÆy
 ||

317 (
şazz
->
if›lds
[
i
].
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

319 
Objeù
* 
f›ld
 = 
	`ü—‹F›ldObjeù
(&
şazz
->
if›lds
[
i
], clazz);

320 ià(
f›ld
 =ğ
NULL
) {

321 
ç
;

323 
	`dvmS‘ObjeùA¼ayEËm’t
(
f›ldA¼ay
, 
f›ldCouÁ
, 
f›ld
);

324 
	`dvmR–—£T¿ckedAÎoc
(
f›ld
, 
NULL
);

325 ++
f›ldCouÁ
;

329 
	`as£¹
(
f›ldCouÁ
 =ğ
f›ldA¼ay
->
Ëngth
);

332  
f›ldA¼ay
;

334 
ç
:

335 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›ldA¼ay
, 
NULL
);

336  
NULL
;

337 
	}
}

346 
	$m‘hodToSlÙ
(cÚ¡ 
M‘hod
* 
m‘h
)

348 
CÏssObjeù
* 
şazz
 = 
m‘h
->clazz;

349 
¦Ù
;

351 ià(
	`dvmIsDœeùM‘hod
(
m‘h
)) {

352 
¦Ù
 = 
m‘h
 - 
şazz
->
dœeùM‘hods
;

353 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
dœeùM‘hodCouÁ
);

354 
¦Ù
 = -(slot+1);

356 
¦Ù
 = 
m‘h
 - 
şazz
->
vœtu®M‘hods
;

357 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
vœtu®M‘hodCouÁ
);

360  
¦Ù
;

361 
	}
}

366 
M‘hod
* 
	$dvmSlÙToM‘hod
(
CÏssObjeù
* 
şazz
, 
¦Ù
)

368 ià(
¦Ù
 < 0) {

369 
¦Ù
 = -(slot+1);

370 
	`as£¹
(
¦Ù
 < 
şazz
->
dœeùM‘hodCouÁ
);

371  &
şazz
->
dœeùM‘hods
[
¦Ù
];

373 
	`as£¹
(
¦Ù
 < 
şazz
->
vœtu®M‘hodCouÁ
);

374  &
şazz
->
vœtu®M‘hods
[
¦Ù
];

376 
	}
}

388 
Objeù
* 
	$ü—‹CÚ¡ruùÜObjeù
(
M‘hod
* 
m‘h
)

390 
Objeù
* 
»suÉ
 = 
NULL
;

391 
A¼ayObjeù
* 
·¿ms
 = 
NULL
;

392 
A¼ayObjeù
* 
exû±iÚs
 = 
NULL
;

393 
Objeù
* 
cÚsObj
;

394 
DexSŒšgCache
 
mªgË
;

395 * 
ı
;

396 
¦Ù
;

398 
	`dexSŒšgCacheIn™
(&
mªgË
);

401 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
));

403 
cÚsObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
,

404 
ALLOC_DEFAULT
);

405 ià(
cÚsObj
 =ğ
NULL
)

406 
ba
;

412 
ı
 = 
	`dvmCİyDesütÜSŒšgFromM‘hod
(
m‘h
, &
mªgË
);

413 
·¿ms
 = 
	`cÚv”tSigÇtu»ToCÏssA¼ay
(&
ı
, 
m‘h
->
şazz
);

414 ià(
·¿ms
 =ğ
NULL
)

415 
ba
;

416 
	`as£¹
(*
ı
 == ')');

417 
	`as£¹
(*(
ı
+1) == 'V');

423 
exû±iÚs
 = 
	`dvmG‘M‘hodThrows
(
m‘h
);

424 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()))

425 
ba
;

427 
¦Ù
 = 
	`m‘hodToSlÙ
(
m‘h
);

429 
JV®ue
 
unu£d
;

430 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùCÚ¡ruùÜ_š™
,

431 
cÚsObj
, &
unu£d
, 
m‘h
->
şazz
, 
·¿ms
, 
exû±iÚs
, 
¦Ù
);

432 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

433 
	`ALOGD
("Constructor class inithrewƒxception");

434 
ba
;

437 
»suÉ
 = 
cÚsObj
;

439 
ba
:

440 
	`dexSŒšgCacheR–—£
(&
mªgË
);

441 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
·¿ms
, 
NULL
);

442 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚs
, 
NULL
);

443 ià(
»suÉ
 =ğ
NULL
) {

444 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

445 
	`dvmR–—£T¿ckedAÎoc
(
cÚsObj
, 
NULL
);

448  
»suÉ
;

449 
	}
}

454 
A¼ayObjeù
* 
	$dvmG‘Deş¬edCÚ¡ruùÜs
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

456 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
))

457 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

463 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
))

464 
	`dvmIn™CÏss
(
şazz
);

469 
size_t
 
couÁ
 = 0;

470 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; ++i) {

471 
M‘hod
* 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

472 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

473 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘h
è&& !
	`dvmIsSticM‘hod
(meth))

475 
couÁ
++;

482 
CÏssObjeù
* 
¬¿yCÏss
 = 
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜA¼ay
;

483 
A¼ayObjeù
* 
ùÜA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
couÁ
, 
ALLOC_DEFAULT
);

484 ià(
ùÜA¼ay
 =ğ
NULL
)

485  
NULL
;

490 
size_t
 
ùÜObjCouÁ
 = 0;

491 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; ++i) {

492 
M‘hod
* 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

493 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

494 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘h
è&& !
	`dvmIsSticM‘hod
(meth))

496 
Objeù
* 
ùÜObj
 = 
	`ü—‹CÚ¡ruùÜObjeù
(
m‘h
);

497 ià(
ùÜObj
 =ğ
NULL
) {

498 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ùÜA¼ay
, 
NULL
);

499  
NULL
;

501 
	`dvmS‘ObjeùA¼ayEËm’t
(
ùÜA¼ay
, 
ùÜObjCouÁ
, 
ùÜObj
);

502 ++
ùÜObjCouÁ
;

503 
	`dvmR–—£T¿ckedAÎoc
(
ùÜObj
, 
NULL
);

507 
	`as£¹
(
ùÜObjCouÁ
 =ğ
ùÜA¼ay
->
Ëngth
);

510  
ùÜA¼ay
;

511 
	}
}

525 
Objeù
* 
	$dvmC»©eReæeùM‘hodObjeù
(cÚ¡ 
M‘hod
* 
m‘h
)

527 
Objeù
* 
»suÉ
 = 
NULL
;

528 
A¼ayObjeù
* 
·¿ms
 = 
NULL
;

529 
A¼ayObjeù
* 
exû±iÚs
 = 
NULL
;

530 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

531 
Objeù
* 
m‘hObj
;

532 
CÏssObjeù
* 
»tuºTy³
;

533 
DexSŒšgCache
 
mªgË
;

534 * 
ı
;

535 
¦Ù
;

537 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

538 
	`ALOGW
("WARNING: dvmCreateReflectMethodObject called with "

540  
NULL
;

543 
	`dexSŒšgCacheIn™
(&
mªgË
);

546 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
));

548 
m‘hObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùM‘hod
, 
ALLOC_DEFAULT
);

549 ià(
m‘hObj
 =ğ
NULL
)

550 
ba
;

556 
ı
 = 
	`dvmCİyDesütÜSŒšgFromM‘hod
(
m‘h
, &
mªgË
);

557 
·¿ms
 = 
	`cÚv”tSigÇtu»ToCÏssA¼ay
(&
ı
, 
m‘h
->
şazz
);

558 ià(
·¿ms
 =ğ
NULL
)

559 
ba
;

560 
	`as£¹
(*
ı
 == ')');

561 
ı
++;

562 
»tuºTy³
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
m‘h
->
şazz
);

563 ià(
»tuºTy³
 =ğ
NULL
)

564 
ba
;

570 
exû±iÚs
 = 
	`dvmG‘M‘hodThrows
(
m‘h
);

571 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()))

572 
ba
;

575 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
m‘h
->
Çme
);

576 ià(
ÇmeObj
 =ğ
NULL
)

577 
ba
;

579 
¦Ù
 = 
	`m‘hodToSlÙ
(
m‘h
);

581 
JV®ue
 
unu£d
;

582 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùM‘hod_š™
,

583 
m‘hObj
, &
unu£d
, 
m‘h
->
şazz
, 
·¿ms
, 
exû±iÚs
, 
»tuºTy³
,

584 
ÇmeObj
, 
¦Ù
);

585 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

586 
	`ALOGD
("Method class inithrewƒxception");

587 
ba
;

590 
»suÉ
 = 
m‘hObj
;

592 
ba
:

593 
	`dexSŒšgCacheR–—£
(&
mªgË
);

594 ià(
»suÉ
 =ğ
NULL
) {

595 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

597 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

598 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
·¿ms
, 
NULL
);

599 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚs
, 
NULL
);

600 ià(
»suÉ
 =ğ
NULL
)

601 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

602  
»suÉ
;

603 
	}
}

612 
A¼ayObjeù
* 
	$dvmG‘Deş¬edM‘hods
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

614 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

615 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

622 
size_t
 
couÁ
 = 0;

623 
M‘hod
* 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

624 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

625 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

626 !
	`dvmIsMœªdaM‘hod
(
m‘h
))

628 
couÁ
++;

631 
m‘h
 = 
şazz
->
dœeùM‘hods
;

632 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

633 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)è&& m‘h->
Çme
[0] != '<') {

634 
couÁ
++;

641 
A¼ayObjeù
* 
m‘hodA¼ay
 =

642 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgReæeùM‘hodA¼ay
, 
couÁ
, 
ALLOC_DEFAULT
);

643 ià(
m‘hodA¼ay
 =ğ
NULL
)

644  
NULL
;

649 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

650 
size_t
 
m‘hObjCouÁ
 = 0;

651 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

652 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

653 !
	`dvmIsMœªdaM‘hod
(
m‘h
))

655 
Objeù
* 
m‘hObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
m‘h
);

656 ià(
m‘hObj
 =ğ
NULL
)

657 
ç
;

658 
	`dvmS‘ObjeùA¼ayEËm’t
(
m‘hodA¼ay
, 
m‘hObjCouÁ
, 
m‘hObj
);

659 ++
m‘hObjCouÁ
;

660 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

663 
m‘h
 = 
şazz
->
dœeùM‘hods
;

664 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

665 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

666 
m‘h
->
Çme
[0] != '<')

668 
Objeù
* 
m‘hObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
m‘h
);

669 ià(
m‘hObj
 =ğ
NULL
)

670 
ç
;

671 
	`dvmS‘ObjeùA¼ayEËm’t
(
m‘hodA¼ay
, 
m‘hObjCouÁ
, 
m‘hObj
);

672 ++
m‘hObjCouÁ
;

673 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

677 
	`as£¹
(
m‘hObjCouÁ
 =ğ
m‘hodA¼ay
->
Ëngth
);

680  
m‘hodA¼ay
;

682 
ç
:

683 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hodA¼ay
, 
NULL
);

684  
NULL
;

685 
	}
}

692 
	$ü—‹T¬g‘DesütÜ
(
A¼ayObjeù
* 
¬gs
,

693 
DexSŒšgCache
* 
rg‘DesütÜCache
)

695 
CÏssObjeù
** 
¬gsA¼ay
 = (CÏssObjeù**)(*)
¬gs
->
cÚ‹Ás
;

696 
size_t
 
Ëngth
 = 1;

697 
size_t
 
i
 = 0; i < 
¬gs
->
Ëngth
; ++i) {

698 
Ëngth
 +ğ
	`¡¾’
(
¬gsA¼ay
[
i
]->
desütÜ
);

701 
	`dexSŒšgCacheAÎoc
(
rg‘DesütÜCache
, 
Ëngth
);

703 * 
©
 = (*è
rg‘DesütÜCache
->
v®ue
;

704 
size_t
 
i
 = 0; i < 
¬gs
->
Ëngth
; ++i) {

705 cÚ¡ * 
desütÜ
 = 
¬gsA¼ay
[
i
]->descriptor;

706 
	`¡rıy
(
©
, 
desütÜ
);

707 
©
 +ğ
	`¡¾’
(
desütÜ
);

709 
	}
}

711 
Objeù
* 
	$fšdCÚ¡ruùÜOrM‘hodInA¼ay
(
m‘hodsCouÁ
, 
M‘hod
* 
m‘hods
,

712 cÚ¡ * 
Çme
, cÚ¡ * 
·¿m‘”DesütÜs
)

714 
M‘hod
* 
m‘hod
 = 
NULL
;

715 
M‘hod
* 
»suÉ
 = 
NULL
;

716 
i
;

718 
i
 = 0; i < 
m‘hodsCouÁ
; ++i) {

719 
m‘hod
 = &
m‘hods
[
i
];

720 ià(
	`¡rcmp
(
Çme
, 
m‘hod
->name) != 0

721 || 
	`dvmIsMœªdaM‘hod
(
m‘hod
)

722 || 
	`dexPrÙoCom·»ToP¬am‘”DesütÜs
(&
m‘hod
->
´ÙÙy³
,

723 
·¿m‘”DesütÜs
) != 0) {

727 
»suÉ
 = 
m‘hod
;

735 ià(!
	`dvmIsSyÁh‘icM‘hod
(
m‘hod
)) {

740 ià(
»suÉ
 !ğ
NULL
) {

741  
	`dvmC»©eReæeùObjFÜM‘hod
(
»suÉ
->
şazz
,„esult);

744  
NULL
;

745 
	}
}

750 
Objeù
* 
	$dvmG‘Deş¬edCÚ¡ruùÜOrM‘hod
(
CÏssObjeù
* 
şazz
,

751 
SŒšgObjeù
* 
ÇmeObj
, 
A¼ayObjeù
* 
¬gs
)

753 
Objeù
* 
»suÉ
 = 
NULL
;

754 
DexSŒšgCache
 
rg‘DesütÜCache
;

755 * 
Çme
;

756 cÚ¡ * 
rg‘DesütÜ
;

758 
	`dexSŒšgCacheIn™
(&
rg‘DesütÜCache
);

760 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

761 
	`ü—‹T¬g‘DesütÜ
(
¬gs
, &
rg‘DesütÜCache
);

762 
rg‘DesütÜ
 = 
rg‘DesütÜCache
.
v®ue
;

764 
»suÉ
 = 
	`fšdCÚ¡ruùÜOrM‘hodInA¼ay
(
şazz
->
dœeùM‘hodCouÁ
,

765 
şazz
->
dœeùM‘hods
, 
Çme
, 
rg‘DesütÜ
);

766 ià(
»suÉ
 =ğ
NULL
) {

767 
»suÉ
 = 
	`fšdCÚ¡ruùÜOrM‘hodInA¼ay
(
şazz
->
vœtu®M‘hodCouÁ
,

768 
şazz
->
vœtu®M‘hods
, 
Çme
, 
rg‘DesütÜ
);

771 
	`ä“
(
Çme
);

772 
	`dexSŒšgCacheR–—£
(&
rg‘DesütÜCache
);

773  
»suÉ
;

774 
	}
}

779 
Objeù
* 
	$dvmG‘Deş¬edF›ld
(
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
* 
ÇmeObj
)

781 
i
;

782 
Objeù
* 
f›ldObj
 = 
NULL
;

783 * 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

785 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
))

786 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùF›ld
);

788 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

789 
F›ld
* 
f›ld
 = &
şazz
->
sf›lds
[
i
];

790 ià(
	`¡rcmp
(
Çme
, 
f›ld
->name) == 0) {

791 
f›ldObj
 = 
	`ü—‹F›ldObjeù
(
f›ld
, 
şazz
);

795 ià(
f›ldObj
 =ğ
NULL
) {

796 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

797 
F›ld
* 
f›ld
 = &
şazz
->
if›lds
[
i
];

798 ià(
	`¡rcmp
(
Çme
, 
f›ld
->name) == 0) {

799 
f›ldObj
 = 
	`ü—‹F›ldObjeù
(
f›ld
, 
şazz
);

805 
	`ä“
(
Çme
);

806  
f›ldObj
;

807 
	}
}

813 
A¼ayObjeù
* 
	$dvmG‘IÁ”çûs
(
CÏssObjeù
* 
şazz
)

815 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

816 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

821 
size_t
 
couÁ
 = 
şazz
->
š‹rçûCouÁ
;

822 
A¼ayObjeù
* 
š‹rçûA¼ay
 =

823 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
, 
couÁ
, 
ALLOC_DEFAULT
);

824 ià(
š‹rçûA¼ay
 =ğ
NULL
)

825  
NULL
;

830 
	`memıy
(
š‹rçûA¼ay
->
cÚ‹Ás
, 
şazz
->
š‹rçûs
,

831 
couÁ
 * (
Objeù
 *));

832 
	`dvmWr™eB¬r›rA¼ay
(
š‹rçûA¼ay
, 0, 
couÁ
);

835  
š‹rçûA¼ay
;

836 
	}
}

844 
Prim™iveTy³
 
	$g‘BoxedTy³
(
D©aObjeù
* 
¬g
)

846 cÚ¡ 
kJavaLªgL’
 = 11;

848 ià(
¬g
 =ğ
NULL
)

849  
PRIM_NOT
;

851 cÚ¡ * 
Çme
 = 
¬g
->
şazz
->
desütÜ
;

853 ià(
	`¡ºcmp
(
Çme
, "Ljava/Ïng/", 
kJavaLªgL’
) != 0)

854  
PRIM_NOT
;

856 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Boolean;") == 0)

857  
PRIM_BOOLEAN
;

858 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Character;") == 0)

859  
PRIM_CHAR
;

860 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Float;") == 0)

861  
PRIM_FLOAT
;

862 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Double;") == 0)

863  
PRIM_DOUBLE
;

864 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Byte;") == 0)

865  
PRIM_BYTE
;

866 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Short;") == 0)

867  
PRIM_SHORT
;

868 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Integer;") == 0)

869  
PRIM_INT
;

870 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Long;") == 0)

871  
PRIM_LONG
;

872  
PRIM_NOT
;

873 
	}
}

896 
	$dvmCÚv”tPrim™iveV®ue
(
Prim™iveTy³
 
¤cTy³
,

897 
Prim™iveTy³
 
d¡Ty³
, cÚ¡ 
s4
* 
¤cPŒ
, s4* 
d¡PŒ
)

899 
	eCÚv”siÚ
 {

900 
OK4
, 
OK8
, 
ItoJ
, 
ItoD
, 
JtoD
, 
FtoD
, 
ItoF
, 
JtoF
, 
bad


903 
CÚv”siÚ
 
cÚv
;

905 
	`as£¹
((
¤cTy³
 !ğ
PRIM_VOID
è&& (¤cTy³ !ğ
PRIM_NOT
));

906 
	`as£¹
((
d¡Ty³
 !ğ
PRIM_VOID
è&& (d¡Ty³ !ğ
PRIM_NOT
));

908 
d¡Ty³
) {

909 
PRIM_BOOLEAN
:

910 
PRIM_CHAR
:

911 
PRIM_BYTE
: {

912 
cÚv
 = (
¤cTy³
 =ğ
d¡Ty³
è? 
OK4
 : 
bad
;

915 
PRIM_SHORT
: {

916 
¤cTy³
) {

917 
PRIM_BYTE
:

918 
PRIM_SHORT
: 
cÚv
 = 
OK4
; ;

919 : 
cÚv
 = 
bad
; ;

923 
PRIM_INT
: {

924 
¤cTy³
) {

925 
PRIM_BYTE
:

926 
PRIM_CHAR
:

927 
PRIM_SHORT
:

928 
PRIM_INT
: 
cÚv
 = 
OK4
; ;

929 : 
cÚv
 = 
bad
; ;

933 
PRIM_LONG
: {

934 
¤cTy³
) {

935 
PRIM_BYTE
:

936 
PRIM_CHAR
:

937 
PRIM_SHORT
:

938 
PRIM_INT
: 
cÚv
 = 
ItoJ
; ;

939 
PRIM_LONG
: 
cÚv
 = 
OK8
; ;

940 : 
cÚv
 = 
bad
; ;

944 
PRIM_FLOAT
: {

945 
¤cTy³
) {

946 
PRIM_BYTE
:

947 
PRIM_CHAR
:

948 
PRIM_SHORT
:

949 
PRIM_INT
: 
cÚv
 = 
ItoF
; ;

950 
PRIM_LONG
: 
cÚv
 = 
JtoF
; ;

951 
PRIM_FLOAT
: 
cÚv
 = 
OK4
; ;

952 : 
cÚv
 = 
bad
; ;

956 
PRIM_DOUBLE
: {

957 
¤cTy³
) {

958 
PRIM_BYTE
:

959 
PRIM_CHAR
:

960 
PRIM_SHORT
:

961 
PRIM_INT
: 
cÚv
 = 
ItoD
; ;

962 
PRIM_LONG
: 
cÚv
 = 
JtoD
; ;

963 
PRIM_FLOAT
: 
cÚv
 = 
FtoD
; ;

964 
PRIM_DOUBLE
: 
cÚv
 = 
OK8
; ;

965 : 
cÚv
 = 
bad
; ;

969 
PRIM_VOID
:

970 
PRIM_NOT
:

972 
cÚv
 = 
bad
;

977 
cÚv
) {

978 
OK4
: *
d¡PŒ
 = *
¤cPŒ
;  1;

979 
OK8
: *(
s8
*è
d¡PŒ
 = *(s8*)
¤cPŒ
;  2;

980 
ItoJ
: *(
s8
*è
d¡PŒ
 = (s8è(*(
s4
*è
¤cPŒ
);  2;

981 
ItoD
: *(*è
d¡PŒ
 = (è(*(
s4
*è
¤cPŒ
);  2;

982 
JtoD
: *(*è
d¡PŒ
 = (è(*(*è
¤cPŒ
);  2;

983 
FtoD
: *(*è
d¡PŒ
 = (è(*(*è
¤cPŒ
);  2;

984 
ItoF
: *(*è
d¡PŒ
 = (è(*(*è
¤cPŒ
);  1;

985 
JtoF
: *(*è
d¡PŒ
 = (è(*(*è
¤cPŒ
);  1;

986 
bad
: {

987 
	`ALOGV
("illegal…rimitive conversion: '%s'o '%s'",

988 
	`dexG‘Prim™iveTy³DesütÜ
(
¤cTy³
),

989 
	`dexG‘Prim™iveTy³DesütÜ
(
d¡Ty³
));

993 
	`dvmAbÜt
();

997 
	}
}

1005 
	$dvmCÚv”tArgum’t
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
s4
* 
de¡PŒ
)

1007 
»tV®
;

1009 ià(
	`dvmIsPrim™iveCÏss
(
ty³
)) {

1011 
Prim™iveTy³
 
¤cTy³
;

1012 
s4
* 
v®uePŒ
;

1014 
¤cTy³
 = 
	`g‘BoxedTy³
(
¬g
);

1015 ià(
¤cTy³
 =ğ
PRIM_NOT
) {

1016 
	`LOGVV
("conv‡rg:ype '%s'‚ot boxed…rimitive",

1017 
¬g
->
şazz
->
desütÜ
);

1022 
v®uePŒ
 = (
s4
*è
¬g
->
š¡ªûD©a
;

1024 
»tV®
 = 
	`dvmCÚv”tPrim™iveV®ue
(
¤cTy³
, 
ty³
->
´im™iveTy³
,

1025 
v®uePŒ
, 
de¡PŒ
);

1028 ià((
¬g
 =ğ
NULL
è|| 
	`dvmIn¡ªûof
×rg->
şazz
, 
ty³
)) {

1029 *
de¡PŒ
 = (
s4
è
¬g
;

1030 
»tV®
 = 1;

1032 
	`LOGVV
("Arg %p (%s)‚ot compatible with %s",

1033 
¬g
,‡rg->
şazz
->
desütÜ
, 
ty³
->descriptor);

1034 
»tV®
 = -1;

1038  
»tV®
;

1039 
	}
}

1051 
D©aObjeù
* 
	$dvmBoxPrim™ive
(
JV®ue
 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
)

1053 
CÏssObjeù
* 
w¿µ”CÏss
;

1054 
D©aObjeù
* 
w¿µ”Obj
;

1055 
s4
* 
d©aPŒ
;

1056 
Prim™iveTy³
 
ty³Index
 = 
»tuºTy³
->
´im™iveTy³
;

1057 cÚ¡ * 
şassDesütÜ
;

1059 ià(
ty³Index
 =ğ
PRIM_NOT
) {

1061 ià(
v®ue
.
l
 !ğ
NULL
)

1062 
	`dvmAddT¿ckedAÎoc
((
Objeù
*)
v®ue
.
l
, 
NULL
);

1063  (
D©aObjeù
*è
v®ue
.
l
;

1066 
şassDesütÜ
 = 
	`dexG‘BoxedTy³DesütÜ
(
ty³Index
);

1067 ià(
şassDesütÜ
 =ğ
NULL
) {

1068  
NULL
;

1071 
w¿µ”CÏss
 = 
	`dvmFšdSy¡emCÏss
(
şassDesütÜ
);

1072 ià(
w¿µ”CÏss
 =ğ
NULL
) {

1073 
	`ALOGW
("UÇbËØfšd '%s'", 
şassDesütÜ
);

1074 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1075  
NULL
;

1078 
w¿µ”Obj
 = (
D©aObjeù
*è
	`dvmAÎocObjeù
(
w¿µ”CÏss
, 
ALLOC_DEFAULT
);

1079 ià(
w¿µ”Obj
 =ğ
NULL
)

1080  
NULL
;

1081 
d©aPŒ
 = (
s4
*è
w¿µ”Obj
->
š¡ªûD©a
;

1085 ià(
ty³Index
 =ğ
PRIM_LONG
 ||y³Index =ğ
PRIM_DOUBLE
)

1086 *(
s8
*)
d©aPŒ
 = 
v®ue
.
j
;

1088 *
d©aPŒ
 = 
v®ue
.
i
;

1090  
w¿µ”Obj
;

1091 
	}
}

1104 
boŞ
 
	$dvmUnboxPrim™ive
(
Objeù
* 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
,

1105 
JV®ue
* 
pResuÉ
)

1107 
Prim™iveTy³
 
ty³Index
 = 
»tuºTy³
->
´im™iveTy³
;

1108 
Prim™iveTy³
 
v®ueIndex
;

1110 ià(
ty³Index
 =ğ
PRIM_NOT
) {

1111 ià(
v®ue
 !ğ
NULL
 && !
	`dvmIn¡ªûof
(v®ue->
şazz
, 
»tuºTy³
)) {

1112 
	`ALOGD
("wrong objectype: %s %s",

1113 
v®ue
->
şazz
->
desütÜ
, 
»tuºTy³
->descriptor);

1114  
çl£
;

1116 
pResuÉ
->
l
 = 
v®ue
;

1117  
Œue
;

1118 } ià(
ty³Index
 =ğ
PRIM_VOID
) {

1120  
çl£
;

1123 
v®ueIndex
 = 
	`g‘BoxedTy³
((
D©aObjeù
*)
v®ue
);

1124 ià(
v®ueIndex
 =ğ
PRIM_NOT
)

1125  
çl£
;

1129 ià(
	`dvmCÚv”tPrim™iveV®ue
(
v®ueIndex
, 
ty³Index
,

1130 (
s4
*è((
D©aObjeù
*)
v®ue
)->
š¡ªûD©a
, (s4*)
pResuÉ
) < 0)

1132 
	`ALOGV
("Prim conversion failed");

1133  
çl£
;

1136  
Œue
;

1137 
	}
}

1147 
CÏssObjeù
* 
	$dvmG‘BoxedR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
)

1149 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

1151 *
sig
) {

1161  
	`dvmFšdPrim™iveCÏss
(*
sig
);

1164  
	`dvmFšdCÏss
(
sig
, 
m‘h
->
şazz
->
şassLßd”
);

1167 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

1168 
	`ALOGE
("Bad„‘uºy³ iÀsigÇtu» '%s'", 
desc
);

1169 
	`ä“
(
desc
);

1170 
	`dvmThrowIÁ”ÇlE¼Ü
(
NULL
);

1171  
NULL
;

1174 
	}
}

1180 
F›ld
* 
	$dvmG‘F›ldFromReæeùObj
(
Objeù
* 
obj
)

1182 
CÏssObjeù
* 
şazz
;

1183 
¦Ù
;

1185 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùF›ld
);

1186 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1187 
gDvm
.
offJavaLªgReæeùF›ld_deşCÏss
);

1188 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùF›ld_¦Ù
);

1191 ià(!
	`dvmIn™CÏss
(
şazz
))

1192  
NULL
;

1194  
	`dvmSlÙToF›ld
(
şazz
, 
¦Ù
);

1195 
	}
}

1200 
M‘hod
* 
	$dvmG‘M‘hodFromReæeùObj
(
Objeù
* 
obj
)

1202 
CÏssObjeù
* 
şazz
;

1203 
¦Ù
;

1205 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
) {

1206 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1207 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
);

1208 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_¦Ù
);

1209 } ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
) {

1210 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1211 
gDvm
.
offJavaLªgReæeùM‘hod_deşCÏss
);

1212 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùM‘hod_¦Ù
);

1214 
	`as£¹
(
çl£
);

1215  
NULL
;

1219 ià(!
	`dvmIn™CÏss
(
şazz
))

1220  
NULL
;

1222  
	`dvmSlÙToM‘hod
(
şazz
, 
¦Ù
);

1223 
	}
}

1232 
Objeù
* 
	$dvmC»©eReæeùObjFÜF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
F›ld
* 
f›ld
)

1234 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
))

1235 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùF›ld
);

1238  
	`ü—‹F›ldObjeù
(
f›ld
, 
şazz
);

1239 
	}
}

1251 
Objeù
* 
	$dvmC»©eReæeùObjFÜM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘hod
)

1253 
	`UNUSED_PARAMETER
(
şazz
);

1255 ià(
	`¡rcmp
(
m‘hod
->
Çme
, "<init>") == 0) {

1256 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
))

1257 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

1259  
	`ü—‹CÚ¡ruùÜObjeù
(
m‘hod
);

1261 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

1262 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

1264  
	`dvmC»©eReæeùM‘hodObjeù
(
m‘hod
);

1266 
	}
}

	@vm/reflect/Reflect.h

19 #iâdeà
DALVIK_REFLECT_REFLECT_H_


20 
	#DALVIK_REFLECT_REFLECT_H_


	)

25 
boŞ
 
dvmV®id©eBoxCÏs£s
();

32 
A¼ayObjeù
* 
dvmG‘Deş¬edF›lds
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

37 
Objeù
* 
dvmG‘Deş¬edF›ld
(
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
* 
ÇmeObj
);

42 
A¼ayObjeù
* 
dvmG‘Deş¬edCÚ¡ruùÜs
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

51 
A¼ayObjeù
* 
dvmG‘Deş¬edM‘hods
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

56 
Objeù
* 
dvmG‘Deş¬edCÚ¡ruùÜOrM‘hod
(
CÏssObjeù
* 
şazz
,

57 
SŒšgObjeù
* 
ÇmeObj
, 
A¼ayObjeù
* 
¬gs
);

63 
A¼ayObjeù
* 
dvmG‘IÁ”çûs
(
CÏssObjeù
* 
şazz
);

68 
F›ld
* 
dvmSlÙToF›ld
(
CÏssObjeù
* 
şazz
, 
¦Ù
);

69 
M‘hod
* 
dvmSlÙToM‘hod
(
CÏssObjeù
* 
şazz
, 
¦Ù
);

74 
dvmCÚv”tPrim™iveV®ue
(
Prim™iveTy³
 
¤cTy³
,

75 
Prim™iveTy³
 
d¡Ty³
, cÚ¡ 
s4
* 
¤cPŒ
, s4* 
d¡PŒ
);

83 
dvmCÚv”tArgum’t
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
s4
* 
šs
);

89 
D©aObjeù
* 
dvmBoxPrim™ive
(
JV®ue
 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
);

95 
boŞ
 
dvmUnboxPrim™ive
(
Objeù
* 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
,

96 
JV®ue
* 
pResuÉ
);

102 
CÏssObjeù
* 
dvmG‘BoxedR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
);

107 
F›ld
* 
dvmG‘F›ldFromReæeùObj
(
Objeù
* 
obj
);

108 
M‘hod
* 
dvmG‘M‘hodFromReæeùObj
(
Objeù
* 
obj
);

109 
Objeù
* 
dvmC»©eReæeùObjFÜF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
F›ld
* 
f›ld
);

110 
Objeù
* 
dvmC»©eReæeùObjFÜM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘hod
);

117 
INLINE
 
boŞ
 
	$dvmIsReæeùiÚM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

119  (
m‘hod
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

120 
	}
}

125 
CÏssObjeù
* 
dvmG’”©eProxyCÏss
(
SŒšgObjeù
* 
¡r
, 
A¼ayObjeù
* 
š‹rçûs
,

126 
Objeù
* 
lßd”
);

131 
Objeù
* 
dvmC»©eReæeùM‘hodObjeù
(cÚ¡ 
M‘hod
* 
m‘h
);

139 
A¼ayObjeù
* 
dvmG‘CÏssAÂÙ©iÚs
(cÚ¡ 
CÏssObjeù
* 
şazz
);

140 
A¼ayObjeù
* 
dvmG‘M‘hodAÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
);

141 
A¼ayObjeù
* 
dvmG‘F›ldAÂÙ©iÚs
(cÚ¡ 
F›ld
* 
f›ld
);

142 
A¼ayObjeù
* 
dvmG‘P¬am‘”AÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
);

147 
Objeù
* 
dvmG‘CÏssAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
ªnÙ©iÚCÏzz
);

148 
Objeù
* 
dvmG‘M‘hodAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
M‘hod
* 
m‘hod
,

149 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
);

150 
Objeù
* 
dvmG‘F›ldAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
F›ld
* 
m‘hod
,

151 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
);

156 
boŞ
 
dvmIsCÏssAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
ªnÙ©iÚCÏzz
);

157 
boŞ
 
dvmIsM‘hodAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
M‘hod
* 
m‘hod
,

158 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
);

159 
boŞ
 
dvmIsF›ldAÂÙ©iÚP»£Á
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
F›ld
* 
m‘hod
,

160 cÚ¡ 
CÏssObjeù
* 
ªnÙ©iÚCÏzz
);

165 
Objeù
* 
dvmG‘AÂÙ©iÚDeçuÉV®ue
(cÚ¡ 
M‘hod
* 
m‘hod
);

171 
A¼ayObjeù
* 
dvmG‘M‘hodThrows
(cÚ¡ 
M‘hod
* 
m‘hod
);

176 
A¼ayObjeù
* 
dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
);

177 
A¼ayObjeù
* 
dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
);

178 
A¼ayObjeù
* 
dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(cÚ¡ 
F›ld
* 
f›ld
);

184 
Objeù
* 
dvmG‘EnşosšgM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
);

189 
CÏssObjeù
* 
dvmG‘Deş¬šgCÏss
(cÚ¡ CÏssObjeù* 
şazz
);

194 
CÏssObjeù
* 
dvmG‘EnşosšgCÏss
(cÚ¡ CÏssObjeù* 
şazz
);

202 
boŞ
 
dvmG‘IÂ”CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
** 
pName
,

203 * 
pAcûssFÏgs
);

209 
A¼ayObjeù
* 
dvmG‘Deş¬edCÏs£s
(cÚ¡ 
CÏssObjeù
* 
şazz
);

215 
	sAÂÙ©iÚV®ue
 {

216 
JV®ue
 
	mv®ue
;

217 
u1
 
	mty³
;

225 
	sEncodedA¼ayI‹¿tÜ
 {

226 cÚ¡ 
u1
* 
	mcursÜ
;

227 
u4
 
	m–em’tsLeá
;

228 cÚ¡ 
DexEncodedA¼ay
* 
	m’codedA¼ay
;

229 
u4
 
	msize
;

230 cÚ¡ 
CÏssObjeù
* 
	mşazz
;

240 
dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

241 cÚ¡ 
DexEncodedA¼ay
* 
’codedA¼ay
, cÚ¡ 
CÏssObjeù
* 
şazz
);

246 
boŞ
 
dvmEncodedA¼ayI‹¿tÜHasNext
(cÚ¡ 
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
);

260 
boŞ
 
dvmEncodedA¼ayI‹¿tÜG‘Next
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

261 
AÂÙ©iÚV®ue
* 
v®ue
);

	@vm/shadowlib/Buffer.h

1 #iâdeà
_BUFFER_H_


2 
	#_BUFFER_H_


	)

4 
	#BUF_SIZE
 1024

	)

6 şas 
	cBufãr
{

7 
	mpublic
:

8 
	$Bufãr
(
ÿ·c™y
=
BUF_SIZE
):
	`buf_ÿ·c™y
(ÿ·c™y),
	$buf_occup›d
(0){

9 
buf_d©a
 = 
Ãw
 [
ÿ·c™y
];

11 ~
	$Bufãr
(){

12 
d–‘e
 []
buf_d©a
;

13 
buf_d©a
 = 
NULL
;

14 
	}
}

15 
	$Push
(cÚ¡ * 
d©a
, 
Ën
){

16 if(
buf_occup›d
+
Ën
 > 
buf_ÿ·c™y
){

17 
	`DoubËC­ac™y
();

18 
	`Push
(
d©a
,
Ën
);

20 
	`memıy
(
buf_d©a
+
buf_occup›d
, 
d©a
, 
Ën
);

21 
buf_occup›d
 +ğ
Ën
;

23 
	}
}

24 
	g´iv©e
:

25 
	$DoubËC­ac™y
(){

26 * 
Ãw_buf
 = 
Ãw
 [
buf_ÿ·c™y
*2];

27 
	`memıy
(
Ãw_buf
, 
buf_d©a
, 
buf_occup›d
);

28 
d–‘e
 []
buf_d©a
;

29 
buf_d©a
 = 
Ãw_buf
;

30 
buf_ÿ·c™y
 *= 2;

31 
	}
}

32 * 
	gbuf_d©a
;

33 * 
	gbuf_ÿ·c™y
;

34 * 
	gbuf_occup›d
;

	@vm/shadowlib/DalvikHeader.h

1 #iâdeà
_DALVIKHEADER_H_


2 
	#_DALVIKHEADER_H_


	)

3 
	~<D®vik.h
>

4 
	~<JniIÁ”Çl.h
>

5 
	~<cuts/log.h
>

7 
	#MY_LOG_TAG
 "SHADOW"

	)

9 
	#LOGASSERT
(
cÚd
, ...èdo{if(!cÚdè
	`ALOG
(
LOG_ERROR
,
MY_LOG_TAG
,
__VA_ARGS__
);}0)

	)

11 
	#LOGERROR
(...èdo{
	`ALOG
(
LOG_ERROR
,
MY_LOG_TAG
,
__VA_ARGS__
);}0)

	)

13 
	#LOGDEBUG
(...èdo{
	`ALOG
(
LOG_DEBUG
,
MY_LOG_TAG
,
__VA_ARGS__
);}0)

	)

	@vm/shadowlib/HashTable.h

	@vm/shadowlib/JniUtility.h

1 #iâdeà
_BUFFPACK_H


2 
	#_BUFFPACK_H


	)

4 #ià
defšed
 (
__APPLE__
è&& defšed (
__MACH__
)

6 
	~<machše/’dŸn.h
>

8 #ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


9 
	#htobe64
(
x
è(x)

	)

11 
	#htobe64
(
x
è
	`__DARWIN_OSSw­IÁ64
((x))

	)

15 
	~<’dŸn.h
>

23 
	~"Bufãr.h
"

26 
	uæßt_jšt
 {

27 
	mf
;

28 
jšt
 
	mi
;

32 
	udoubË_jlÚg
 {

33 
	md
;

34 
jlÚg
 
	ml
;

37 
	$·ck_boŞ—n
(
Bufãr
 * 
buff
, 
jboŞ—n
 
to_£nd
) {

38 
buff
->
	`Push
(&
to_£nd
, (
jboŞ—n
));

39 
	}
}

41 
	$·ck_by‹
(
Bufãr
 * 
buff
, 
jby‹
 
to_£nd
) {

42 
buff
->
	`Push
(&
to_£nd
, (
jby‹
));

43 
	}
}

45 
	$·ck_ch¬
(
Bufãr
 * 
buff
, 
jch¬
 
to_£nd
) {

46 
jch¬
 
Ás
 = 
	`htÚs
(
to_£nd
);

47 
buff
->
	`Push
(&
Ás
, (
jch¬
));

48 
	}
}

50 
	$·ck_shÜt
(
Bufãr
 * 
buff
, 
jshÜt
 
to_£nd
) {

51 
jshÜt
 
Ás
 = 
	`htÚs
(
to_£nd
);

52 
buff
->
	`Push
(&
Ás
, (
jshÜt
));

53 
	}
}

55 
	$·ck_št
(
Bufãr
 * 
buff
, 
jšt
 
to_£nd
) {

56 
jšt
 
Ás
 = 
	`htÚl
(
to_£nd
);

57 
buff
->
	`Push
(&
Ás
, (
jšt
));

58 
	}
}

60 
	$·ck_lÚg
(
Bufãr
 * 
buff
, 
jlÚg
 
to_£nd
) {

61 
jlÚg
 
Ás
 = 
	`htobe64
(
to_£nd
);

62 
buff
->
	`Push
(&
Ás
, (
jlÚg
));

63 
	}
}

65 
	$·ck_æßt
(
Bufãr
 * 
buff
, 
jæßt
 
to_£nd
) {

68 
æßt_jšt
 
cÚv”t
;

69 
cÚv”t
.
f
 = 
to_£nd
;

70 
	`·ck_št
(
buff
, 
cÚv”t
.
i
);

71 
	}
}

73 
	$·ck_doubË
(
Bufãr
 * 
buff
, 
jdoubË
 
to_£nd
) {

76 
doubË_jlÚg
 
cÚv”t
;

77 
cÚv”t
.
d
 = 
to_£nd
;

78 
	`·ck_lÚg
(
buff
, 
cÚv”t
.
l
);

79 
	}
}

81 
	$·ck_¡ršg_utf8
(
Bufãr
 * 
buff
, cÚ¡ * 
¡ršg_utf8
,

82 
ušt16_t
 
size_š_by‹s
) {

85 
ušt16_t
 
nsize
 = 
	`htÚs
(
size_š_by‹s
);

86 
buff
->
	`Push
(&
nsize
, (
ušt16_t
));

88 
buff
->
	`Push
(
¡ršg_utf8
, 
size_š_by‹s
);

89 
	}
}

91 
	$·ck_by‹s
(
Bufãr
 * 
buff
, cÚ¡ * 
d©a
, 
jšt
 
size
) {

92 
buff
->
	`Push
(
d©a
, 
size
);

93 
	}
}

	@vm/shadowlib/Lock.h

1 #iâdeà
_RE_LOCK_H_


2 
	#_RE_LOCK_H_


	)

4 
	~<±h»ad.h
>

5 
	~"ShadowLib.h
"

7 
	#DEFAULT_LOCK_BUFFER
 1024

	)

9 şas 
	cLockBufãr
{

10 
	mpublic
:

11 
	$LockBufãr
(
ÿ·c™y
=
DEFAULT_LOCK_BUFFER
):
	`b_ÿ·c™y
(ÿ·c™y),
	$b_occup›d
(0){

12 
b_ids
 = 
Ãw
 
lock_id_ty³
[
ÿ·c™y
];

13 
b_locks
 = 
Ãw
 
±h»ad_mu‹x_t
[
ÿ·c™y
];

14 
	`±h»ad_mu‹x_š™
(&
gl_mtx
,
NULL
);

16 ~
	$LockBufãr
(){

17 
d–‘e
 []
b_ids
;

18 
i
 = 0; i < 
b_occup›d
; i++)

19 
	`±h»ad_mu‹x_de¡roy
(&
b_locks
[
i
]);

20 
d–‘e
 []
b_locks
;

21 
	`±h»ad_mu‹x_de¡roy
(&
gl_mtx
);

22 
	}
}

23 
	$Lock
(
lock_id_ty³
 
lockid
){

24 
	`LOGDEBUG
("š % %d",
__FUNCTION__
, ()
lockid
);

25 
±h»ad_mu‹x_t
 *
lock
 = 
	`G‘Lock
(
lockid
);

26 if(
lock
)

27 
	`±h»ad_mu‹x_lock
(
lock
);

28 
	}
}

29 
	$UÆock
(
lock_id_ty³
 
lockid
){

30 
	`LOGDEBUG
("š % %d",
__FUNCTION__
, ()
lockid
);

31 
±h»ad_mu‹x_t
 *
lock
 = 
	`G‘Lock
(
lockid
);

32 if(
lock
)

33 
	`±h»ad_mu‹x_uÆock
(
lock
);

34 
	}
}

35 
	g´iv©e
:

36 
±h»ad_mu‹x_t
* 
	$G‘Lock
(
lock_id_ty³
 
lockid
){

37 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

38 
i
 = 0; i < 
b_occup›d
; i++){

39 if(
b_ids
[
i
] =ğ
lockid
)

40  &
b_locks
[
i
];

42 if(
b_occup›d
 =ğ
b_ÿ·c™y
){

43 
	`LOGERROR
("run out of†ock buffer");

44  
NULL
;

46 
b_ids
[
b_occup›d
] = 
lockid
;

47 
	`±h»ad_mu‹x_š™
(&
b_locks
[
b_occup›d
], 
NULL
);

48 
b_occup›d
++;

49  &
b_locks
[
b_occup›d
-1];

50 
	}
}

51 
	gb_ÿ·c™y
;

52 
	gb_occup›d
;

53 
lock_id_ty³
 *
	gb_ids
;

54 
±h»ad_mu‹x_t
 *
	gb_locks
;

55 
±h»ad_mu‹x_t
 
	ggl_mtx
;

	@vm/shadowlib/Map.h

1 #iâdeà
_RE_MAP_H_


2 
	#_RE_MAP_H_


	)

4 
	~<±h»ad.h
>

5 
	~"ShadowLib.h
"

6 
	~<¡dlib.h
>

7 
	~<¡dio.h
>

9 
	#DEFAULT_MAP_SIZE
 5

	)

11 
	g‹m¶©e
<
şass
 
	gK
, cÏs 
	gV
>

12 şas 
	cM­
{

13 
	mpublic
:

14 
	$M­
(
ÿ·c™y
=
DEFAULT_MAP_SIZE
):
	`b_ÿ·c™y
(ÿ·c™y),
	$b_occup›d
(0){

15 
b_keys
 = 
Ãw
 
K
[
ÿ·c™y
];

16 
b_v®ues
 = 
Ãw
 
V
[
ÿ·c™y
];

17 
	`±h»ad_mu‹x_š™
(&
gl_mtx
,
NULL
);

19 ~
	$M­
(){

20 
d–‘e
 []
b_keys
;

21 
d–‘e
 []
b_v®ues
;

22 
	`±h»ad_mu‹x_de¡roy
(&
gl_mtx
);

23 
	}
}

24 
boŞ
 
	$Exi¡
(cÚ¡ 
K
 &
key
){

26 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

27  
	`_Exi¡
(
key
);

28 
	}
}

29 
	gV
& 
	$G‘
(cÚ¡ 
K
 &
key
){

31 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

32  
	`_G‘
(
key
);

33 
	}
}

34 
	$S‘
(cÚ¡ 
K
 &
key
, cÚ¡ 
V
 &
v®ue
) {

36 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

37 
	`_S‘
(
key
, 
v®ue
);

38 
	}
}

39 
	gV
& 
	gİ”©Ü
[](cÚ¡ 
	gK
& 
	gkey
){

41 
ScİedMu‹x
 
mtx
(&
gl_mtx
);

42  
_G‘
(
key
);

44 
	$Pršt
(){

45 
	`LOGDEBUG
("PRINTING MAP: %s",
__FUNCTION__
);

46 
i
 = 0; i < 
b_occup›d
; i++){

47 
	`LOGDEBUG
("\ˆ%d:%d",()
b_keys
[
i
],()
b_v®ues
[i]);

49 
	}
}

50 
	g´iv©e
:

51 
boŞ
 
	$_Exi¡
(cÚ¡ 
K
& 
key
){

52 
boŞ
 
»s
 = 
çl£
;

53 
i
 = 0; i < 
b_occup›d
; i++){

54 if(
b_keys
[
i
] =ğ
key
) {

55 
»s
 = 
Œue
;

60  
»s
;

61 
	}
}

62 
	gV
& 
	$_G‘
(cÚ¡ 
K
 &
key
){

63 
i
 = 0; i < 
b_occup›d
; i++){

64 if(
b_keys
[
i
] =ğ
key
)

65  
b_v®ues
[
i
];

67 
	`LOGERROR
("should checkƒxist before use Get ");

68  
b_v®ues
[0];

70 
	}
}

71 
	$_S‘
(cÚ¡ 
K
 &
key
, cÚ¡ 
V
 &
v®ue
) {

72 if(
	`_Exi¡
(
key
)){

73 
V
 &
»s
 = 
	`_G‘
(
key
);

74 
»s
 = 
v®ue
;

77 if(
b_occup›d
 =ğ
b_ÿ·c™y
){

78 
	`_DoubËC­ac™y
();

80 
b_keys
[
b_occup›d
] = 
key
;

81 
b_v®ues
[
b_occup›d
] = 
v®ue
;

82 
b_occup›d
++;

84 
	}
}

85 
	$_DoubËC­ac™y
(){

86 
K
* 
Ãw_keys
 = 
Ãw
 K[
b_ÿ·c™y
*2];

87 
V
* 
Ãw_v®ues
 = 
Ãw
 V[
b_ÿ·c™y
*2];

88 
	`memıy
(
Ãw_keys
, 
b_keys
, 
b_occup›d
 * (
K
));

89 
	`memıy
(
Ãw_v®ues
, 
b_v®ues
, 
b_occup›d
 * (
V
));

90 
d–‘e
 []
b_keys
;

91 
d–‘e
 []
b_v®ues
;

92 
b_keys
 = 
Ãw_keys
;

93 
b_v®ues
 = 
Ãw_v®ues
;

94 
b_ÿ·c™y
 *= 2;

95 
	}
}

96 
	gb_ÿ·c™y
;

97 
	gb_occup›d
;

98 
K
 *
	gb_keys
;

99 
V
 *
	gb_v®ues
;

100 
±h»ad_mu‹x_t
 
	ggl_mtx
;

	@vm/shadowlib/Netref.h

1 #iâdeà
_NETREF_H


2 
	#_NETREF_H


	)

4 
	~"ShadowLib.h
"

5 
	~<¡dšt.h
>

8 vŞ©
jlÚg
 
	gava_objeù_id
;

11 vŞ©
jšt
 
	gava_şass_id
;

25 cÚ¡ 
ušt8_t
 
	gOBJECT_ID_POS
 = 0;

26 cÚ¡ 
ušt8_t
 
	gCLASS_ID_POS
 = 40;

27 cÚ¡ 
ušt8_t
 
	gCLASS_INSTANCE_POS
 = 62;

28 cÚ¡ 
ušt8_t
 
	gSPEC_POS
 = 63;

30 cÚ¡ 
ušt64_t
 
	gOBJECT_ID_MASK
 = 0xFFFFFFFFFFL;

31 cÚ¡ 
ušt64_t
 
	gCLASS_ID_MASK
 = 0x3FFFFF;

32 cÚ¡ 
ušt64_t
 
	gCLASS_INSTANCE_MASK
 = 0x1;

33 cÚ¡ 
ušt64_t
 
	gSPEC_MASK
 = 0x1;

37 
šlše
 
ušt64_t
 
	$g‘_b™s
(
ušt64_t
 
äom
, ušt64_ˆ
b™_mask
,

38 
ušt8_t
 
low_¡¬t
) {

41 
ušt64_t
 
b™s_shiáed
 = 
äom
 >> 
low_¡¬t
;

44  
b™s_shiáed
 & 
b™_mask
;

45 
	}
}

49 
šlše
 
	$£t_b™s
(
ušt64_t
 * 
to
, ušt64_ˆ
b™s
,

50 
ušt64_t
 
b™_mask
, 
ušt8_t
 
low_¡¬t
) {

53 
ušt64_t
 
b™s_Ën
 = 
b™s
 & 
b™_mask
;

55 
ušt64_t
 
b™s_pos
 = 
b™s_Ën
 << 
low_¡¬t
;

57 *
to
 |ğ
b™s_pos
;

58 
	}
}

60 
šlše
 
jlÚg
 
	$Ãt_»f_g‘_objeù_id
(
jlÚg
 
Ãt_»f
) {

62  
	`g‘_b™s
(
Ãt_»f
, 
OBJECT_ID_MASK
, 
OBJECT_ID_POS
);

63 
	}
}

65 
šlše
 
jšt
 
	$Ãt_»f_g‘_şass_id
(
jlÚg
 
Ãt_»f
) {

67  
	`g‘_b™s
(
Ãt_»f
, 
CLASS_ID_MASK
, 
CLASS_ID_POS
);

68 
	}
}

70 
šlše
 
	$Ãt_»f_g‘_¥ec
(
jlÚg
 
Ãt_»f
) {

72  
	`g‘_b™s
(
Ãt_»f
, 
SPEC_MASK
, 
SPEC_POS
);

73 
	}
}

75 
šlše
 
	$Ãt_»f_g‘_şass_š¡ªû_b™
(
jlÚg
 
Ãt_»f
) {

77  
	`g‘_b™s
(
Ãt_»f
, 
CLASS_INSTANCE_MASK
, 
CLASS_INSTANCE_POS
);

78 
	}
}

80 
šlše
 
	$Ãt_»f_£t_objeù_id
(
jlÚg
 * 
Ãt_»f
, jlÚg 
objeù_id
) {

82 
	`£t_b™s
((
ušt64_t
 *)
Ãt_»f
, 
objeù_id
, 
OBJECT_ID_MASK
, 
OBJECT_ID_POS
);

83 
	}
}

85 
šlše
 
	$Ãt_»f_£t_şass_id
(
jlÚg
 * 
Ãt_»f
, 
jšt
 
şass_id
) {

87 
	`£t_b™s
((
ušt64_t
 *)
Ãt_»f
, 
şass_id
, 
CLASS_ID_MASK
, 
CLASS_ID_POS
);

88 
	}
}

90 
šlše
 
	$Ãt_»f_£t_şass_š¡ªû
(
jlÚg
 * 
Ãt_»f
, 
cib™
) {

92 
	`£t_b™s
((
ušt64_t
 *)
Ãt_»f
, 
cib™
, 
CLASS_INSTANCE_MASK
, 
CLASS_INSTANCE_POS
);

93 
	}
}

95 
šlše
 
	$Ãt_»f_£t_¥ec
(
jlÚg
 * 
Ãt_»f
, 
¥ec
) {

97 
	`£t_b™s
((
ušt64_t
 *)
Ãt_»f
, 
¥ec
, 
SPEC_MASK
, 
SPEC_POS
);

98 
	}
}

101 
jlÚg
 
	$_£t_Ãt_»ã»nû
(
jlÚg
 
objeù_id
, 
jšt
 
şass_id
, 
¥ec
, 
cb™
) {

103 
jlÚg
 
Ãt_»f
 = 0;

105 
	`Ãt_»f_£t_objeù_id
(&
Ãt_»f
, 
objeù_id
);

106 
	`Ãt_»f_£t_şass_id
(&
Ãt_»f
, 
şass_id
);

107 
	`Ãt_»f_£t_¥ec
(&
Ãt_»f
, 
¥ec
);

108 
	`Ãt_»f_£t_şass_š¡ªû
(&
Ãt_»f
, 
cb™
);

110  
Ãt_»f
;

111 
	}
}

	@vm/shadowlib/ReAgent.cpp

1 
	~<¡dio.h
>

2 
	~"ShadowLib.h
"

3 
	~"D®vikH—d”.h
"

4 
	~"RePrÙocŞ.h
"

5 
	~"N‘»f.h
"

6 
	~"¡dlib.h
"

7 
	~"¡dio.h
"

8 
	~"Sock‘.h
"

9 
	~<sched.h
>

11 
RePrÙocŞ
 
»mÙe
("/dev/socket/instrument",11218);

13 
boŞ
 
	gisZygÙe
 = 
Œue
;

15 
Sock‘
 *
	gsock
 = 
NULL
;

17 
Bufãr
* 
	gzygÙe_buff
;

21 
±h»ad_mu‹x_t
 
	ggl_mtx
;

22 vŞ©
jšt
 
	gÙ_şass_id
 = 1;

23 vŞ©
jlÚg
 
	gÙ_objeù_id
 = 1;

24 vŞ©
jshÜt
 
	gm‘hod_id
 = 1;

28 
boŞ
 
	gisDecided
 = 
çl£
;

37 
	$_m­PID
(
pid
, cÚ¡ * 
²ame
){

38 
Sock‘
 *
tmpsock
 = 
Ãw
 
	`Sock‘
();

39 !
tmpsock
->
	`CÚÃù
()){

40 
	`LOGDEBUG
("Cannot connecthrough UDS");

41 
	`¦“p
(2);

43 
sigÇl
 = -4;

44 
tmpsock
->
	`S’d
((*)&
sigÇl
,());

45 
sigÇl
 = 
	`¡¾’
(
²ame
);

46 
tmpsock
->
	`S’d
((*)&
sigÇl
,());

47 
tmpsock
->
	`S’d
(
²ame
, 
	`¡¾’
(pname));

48 
sigÇl
 = 
pid
;

49 
tmpsock
->
	`S’d
((*)&
sigÇl
,());

51 
bp
 = -2;

52 
tmpsock
->
	`RecvIÁ
(
bp
);

53 
	`ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","MAPPID BYPASS is:%d PID: %d NAME: %s", 
bp
, 
pid
, 
²ame
);

54 
gDvm
.
isShadow
 = 
bp
==0?
çl£
:
Œue
;

57 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

58 if(
gDvm
.
isShadow
) {

59 
	`ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","MAPPID SETTING THE HOOKS TO NULL");

60 
gDvm
.
ÃwObjHook
 = 
NULL
;

61 
gDvm
.
ä“ObjHook
 = 
NULL
;

62 
gDvm
.
th»adEndHook
 = 
NULL
;

63 
gDvm
.
vmEndHook
 = 
NULL
;

65 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

66 
isDecided
 = 
Œue
;

67 
d–‘e
 
tmpsock
;

68 
	}
}

70 
	gm­PID_2


71 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
j¡ršg
 
	g²ame
) {

72 
jsize
 
	g¡r_Ën
 = 
jni_’v
->
G‘SŒšgUTFL’gth
(
²ame
);

73 cÚ¡ * 
	g¡r
 = 
jni_’v
->
G‘SŒšgUTFCh¬s
(
²ame
, 
NULL
);

74 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","MAPPING PID: %d NAME: %s", 
g‘pid
(), 
¡r
);

75 
Sock‘
 *
	gtmpsock
 = 
Ãw
 Socket();

76 !
	gtmpsock
->
CÚÃù
()){

77 
LOGDEBUG
("Cannot connecthrough UDS");

78 
¦“p
(2);

80 
	gsigÇl
 = -4;

81 
	gtmpsock
->
S’d
((*)&
sigÇl
,());

82 
	gsigÇl
 = 
¡r_Ën
;

83 
	gtmpsock
->
S’d
((*)&
sigÇl
,());

84 
	gtmpsock
->
S’d
(
¡r
, 
¡r_Ën
);

85 
	gsigÇl
 = 
g‘pid
();

86 
	gtmpsock
->
S’d
((*)&
sigÇl
,());

88 
	gbp
 = -2;

89 
	gtmpsock
->
RecvIÁ
(
bp
);

90 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","BYPASS is:%d PID: %d NAME: %s", 
bp
, 
g‘pid
(), 
¡r
);

91 
	ggDvm
.
	gisShadow
 = 
bp
==0?
çl£
:
Œue
;

94 
	gjni_’v
->
R–—£SŒšgUTFCh¬s
(
²ame
,
¡r
);

95 
±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

96 if(
	ggDvm
.
	gisShadow
) {

97 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","SETTING THE HOOKS TO NULL");

98 
	ggDvm
.
	gÃwObjHook
 = 
NULL
;

99 
	ggDvm
.
	gä“ObjHook
 = 
NULL
;

100 
	ggDvm
.
	gth»adEndHook
 = 
NULL
;

101 
	ggDvm
.
	gvmEndHook
 = 
NULL
;

103 
±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

104 
	gisDecided
 = 
Œue
;

105 
d–‘e
 
	gtmpsock
;

107 
	gm­PID


108 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
j¡ršg
 
	g²ame
, 
jšt
 
	gpid
) {

111 cÚ¡ * 
	g¡r
 = 
jni_’v
->
G‘SŒšgUTFCh¬s
(
²ame
, 
NULL
);

112 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","PID: %d NAME: %s", 
pid
, 
¡r
);

131 
jshÜt
 
	g»gi¡”M‘hod


132 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
j¡ršg
 
	gª®ysis_m‘hod_desc
) {

133 
jsize
 
	g¡r_Ën
 = 
jni_’v
->
G‘SŒšgUTFL’gth
(
ª®ysis_m‘hod_desc
);

134 cÚ¡ * 
	g¡r
 = 
jni_’v
->
G‘SŒšgUTFCh¬s
(
ª®ysis_m‘hod_desc
, 
NULL
);

135 
	gtmp
[100];

136 
	gtmpsize
 = 
¡r_Ën
<100?str_len:99;

137 
memıy
(
tmp
, 
¡r
, 
tmpsize
);

138 
	gtmp
[
tmpsize
] = 0;

140 
	gm‘hod_id
++;

141 
	g»mÙe
.
M‘hodRegi¡”Ev’t
(
dvmTh»adS–f
()->
th»adId
, 
m‘hod_id
, 
¡r
, 
¡r_Ën
);

142 
	gjni_’v
->
R–—£SŒšgUTFCh¬s
(
ª®ysis_m‘hod_desc
,
¡r
);

143 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT:»gi¡” m‘hod % pid:%did:%d", 
tmp
, 
g‘pid
(),
dvmTh»adS–f
()->
th»adId
);

146  
	gm‘hod_id
;

149 
	gÚFÜk


150 (
	g·»Á
) {

151 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","ONFORK h­³n pid-cid: %d-%d",
·»Á
, 
g‘pid
());

152 
	g»mÙe
.
OnFÜkEv’t
(
·»Á
);

155 
	gª®ysisS¹__S


156 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jshÜt
 
	gª®ysis_m‘hod_id
) {

157 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT:‡Çlysi ¡¬ˆfÜ m‘hod %d,id:%d", ()
ª®ysis_m‘hod_id
,
dvmTh»adS–f
()->
th»adId
);

158 
	g»mÙe
.
AÇlysisS¹Ev’t
(
dvmTh»adS–f
()->
th»adId
, 0, 
ª®ysis_m‘hod_id
);

159 
dvmDumpAÎTh»ads
(
çl£
);

162 
	gª®ysisS¹__SB


163 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jshÜt
 
	gª®ysis_m‘hod_id
,

164 
jby‹
 
	gÜd”šg_id
) {

165 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT:‡Çlysi ¡¬ˆfÜ m‘hod %d w™h ord”šg %d", ()
ª®ysis_m‘hod_id
, ()
Üd”šg_id
);

166 
	g»mÙe
.
AÇlysisS¹Ev’t
(
dvmTh»adS–f
()->
th»adId
, 
Üd”šg_id
, 
ª®ysis_m‘hod_id
);

167 
dvmDumpAÎTh»ads
(
çl£
);

169 
	$O³nCÚÃùiÚ
(){

170 
	`ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT: open connection");

172 if(
sock
) {

175 
sock
 = 
Ãw
 
	`Sock‘
();

176 !
sock
->
	`CÚÃù
()){

177 
	`LOGDEBUG
("Cannot connecthrough UDS");

178 
	`¦“p
(2);

180 
sigÇl
 = -3;

181 
sock
->
	`S’d
((*)&
sigÇl
,());

182 
	}
}

183 
	gmªu®lyO³n


184 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
) {

185 
O³nCÚÃùiÚ
();

187 
	gmªu®lyClo£


188 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
) {

189 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT: close connection");

192 
	gtmp
 = 
MSG_CLOSE
;

193 
	gsock
->
S’d
(&
tmp
, 1);

194 
d–‘e
 
	gsock
;

195 
	gsock
 = 
NULL
;

196 
ex™
(0);

198 
	gª®ysisEnd


199 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
) {

200 
ALOG
(
LOG_INFO
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","EVENT:‡nalysisƒnd for method");

201 
	g»mÙe
.
AÇlysisEndEv’t
(
dvmTh»adS–f
()->
th»adId
);

204 
	g£ndBoŞ—n


205 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jboŞ—n
 
	gto_£nd
) {

206 
	g»mÙe
.
S’dJboŞ—n
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

209 
	g£ndBy‹


210 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jby‹
 
	gto_£nd
) {

211 
	g»mÙe
.
S’dJby‹
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

214 
	g£ndCh¬


215 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jch¬
 
	gto_£nd
) {

216 
	g»mÙe
.
S’dJch¬
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

219 
	g£ndShÜt


220 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jshÜt
 
	gto_£nd
) {

221 
	g»mÙe
.
S’dJshÜt
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

224 
	g£ndIÁ


225 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jšt
 
	gto_£nd
) {

226 
	g»mÙe
.
S’dJšt
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

229 
	g£ndLÚg


230 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jlÚg
 
	gto_£nd
) {

231 
	g»mÙe
.
S’dJlÚg
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

234 
	g£ndFlßt


235 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jæßt
 
	gto_£nd
) {

236 
	g»mÙe
.
S’dJæßt
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

239 
	g£ndDoubË


240 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jdoubË
 
	gto_£nd
) {

241 
	g»mÙe
.
S’dJdoubË
(
dvmTh»adS–f
()->
th»adId
, 
to_£nd
);

244 
jlÚg
 
S‘AndG‘N‘»f
(
Objeù
* 
obj
);

245 
jlÚg
 
	$ÃwCÏss
(
CÏssObjeù
 *
obj
){

246 if(
obj
 =ğ
NULL
) {

249 
jlÚg
 
su³rid
 = 
	`S‘AndG‘N‘»f
(
obj
->
su³r
);

250 
jlÚg
 
lßd”id
 = 
	`S‘AndG‘N‘»f
(
obj
->
şassLßd”
);

251 
obj
->
uuid
 = 
	`_£t_Ãt_»ã»nû
(
Ù_objeù_id
++,
Ù_şass_id
++,1,1);

252 
tmp
;

254 
»mÙe
.
	`NewCÏssEv’t
(
obj
->
desütÜ
, 
	`¡¾’
(obj->desütÜ), 
lßd”id
, 0, &
tmp
);

255 
»mÙe
.
	`NewCÏssInfo
(
obj
->
uuid
, obj->
desütÜ
, 
	`¡¾’
(obj->desütÜ), "", 0, 
lßd”id
, 
su³rid
);

257  
obj
->
uuid
;

258 
	}
}

260 
jlÚg
 
	$S‘AndG‘N‘»f
(
Objeù
* 
obj
){

261 
jlÚg
 
»s
;

262 if(
obj
 =ğ
NULL
)

264 
»s
 = 0;

265 }if(
obj
->
uuid
 != 0){

266 
»s
 = 
obj
->
uuid
;

267 }if(
	`dvmIsCÏssObjeù
(
obj
)){

268 
»s
 = 
	`ÃwCÏss
((
CÏssObjeù
*)
obj
);

271 if(
obj
->
şazz
->
uuid
 == 0){

272 
	`ÃwCÏss
(
obj
->
şazz
);

274 
obj
->
uuid
 = 
	`_£t_Ãt_»ã»nû
(
Ù_objeù_id
++,
	`Ãt_»f_g‘_şass_id
(obj->
şazz
->uuid),0,0);

275 
»s
 = 
obj
->
uuid
;

278  
»s
;

279 
	}
}

281 
	g£ndObjeù


282 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jobjeù
 
	gto_£nd
) {

283 
ScİedMu‹x
 
mtx
(&
gl_mtx
);

284 
Th»ad
 *
	g£lf
 = 
dvmTh»adS–f
();

285 
Objeù
* 
	gobj
 = 
dvmDecodeIndœeùRef
(
£lf
, 
to_£nd
);

286 
jlÚg
 
	gÃŒef
 = 
S‘AndG‘N‘»f
(
obj
);

288 if(
	gobj
 =ğ
NULL
){

289 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","send NULL object");

290 
	g»mÙe
.
S’dJobjeù
(
£lf
->
th»adId
, 0);

310 
	g»mÙe
.
S’dJobjeù
(
£lf
->
th»adId
, 
ÃŒef
);

313 
	g£ndObjeùPlusD©a


314 (
JNIEnv
 * 
	gjni_’v
, 
jşass
 
	gthis_şass
, 
jobjeù
 
	gto_£nd
) {

316 
ScİedMu‹x
 
mtx
(&
gl_mtx
);

317 
Th»ad
 *
	g£lf
 = 
dvmTh»adS–f
();

318 
Objeù
* 
	gobj
 = 
dvmDecodeIndœeùRef
(
£lf
, 
to_£nd
);

319 
jlÚg
 
	gÃŒef
 = 
S‘AndG‘N‘»f
(
obj
);

321 if(
	gobj
 =ğ
NULL
){

322 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","send NULL object");

323 
	g»mÙe
.
S’dJobjeù
(
£lf
->
th»adId
, 0);

326 if(
	gobj
->
	gşazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
){

327 
Ën
=((
SŒšgObjeù
*)
obj
)->
Ëngth
();

328 
	gutæ’
 = ((
SŒšgObjeù
*)
obj
)->
utfL’gth
();

329 cÚ¡ 
u2
* 
	gtmp
 = ((
SŒšgObjeù
*)
obj
)->
ch¬s
();

331 * 
	g¡r
 = 
Ãw
 [
utæ’
+1];

332 
	gi
 = 0; i < 
	gutæ’
; i++){

333 
	g¡r
[
i
] = 
tmp
[i];

335 
	g¡r
[
utæ’
] = 0;

336 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","£nd sŒšg objeù %s, %d, %d",
¡r
, 
Ën
, 
utæ’
);

338 
	g»mÙe
.
S’dSŒšgObjeù
(
£lf
->
th»adId
, 
obj
->
uuid
, 
¡r
, 
utæ’
);

340 if(
	gobj
->
	gşazz
 =ğ
gDvm
.
şassJavaLªgTh»ad
){

341 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","sendhread object");

343 
boŞ
 
	gisD«mÚ
 = 
çl£
;

344 *
	gÇme
 = 
dvmG‘Th»adName_c¡r
(
£lf
);

345 if(
	gÇme
!=
NULL
) {

346 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","£ndh»ad objeù‚ami %s", 
Çme
);

347 
	g»mÙe
.
S’dTh»adObjeù
(
£lf
->
th»adId
, 
obj
->
uuid
, 
Çme
, 
¡¾’
Òame), 
isD«mÚ
);

348 
ä“
(
Çme
);

350 
ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","sendhread object‚ame is‚ull");

351 
	g»mÙe
.
S’dTh»adObjeù
(
£lf
->
th»adId
, 
obj
->
uuid
, "deçuÉ", 
¡¾’
("deçuÉ"), 
isD«mÚ
);

355 
	g»mÙe
.
S’dJobjeù
(
£lf
->
th»adId
, 
ÃŒef
);

358 cÚ¡ *
	gşassP©hName
 = "ch/usi/dag/dislre/AREDispatch";

360 
JNIN©iveM‘hod
 
	gm‘hods
[]= {

362 {"m­PID", "(Ljava/Ïng/SŒšg;I)V", (*)
m­PID
},

363 {"m­PID", "(Ljava/Ïng/SŒšg;)V", (*)
m­PID_2
},

364 {"»gi¡”M‘hod", "(Ljava/Ïng/SŒšg;)S", (*)
»gi¡”M‘hod
},

365 {"ª®ysisS¹", "(S)V", (*)
ª®ysisS¹__S
},

366 {"ª®ysisS¹", "(SB)V", (*)
ª®ysisS¹__SB
},

367 {"ª®ysisEnd", "()V", (*)
ª®ysisEnd
},

368 {"£ndBoŞ—n", "(Z)V", (*)
£ndBoŞ—n
},

369 {"£ndBy‹", "(B)V", (*)
£ndBy‹
},

370 {"£ndCh¬", "(C)V", (*)
£ndCh¬
},

371 {"£ndShÜt", "(S)V", (*)
£ndShÜt
},

372 {"£ndIÁ", "(I)V", (*)
£ndIÁ
},

373 {"£ndLÚg", "(J)V", (*)
£ndLÚg
},

374 {"£ndFlßt", "(F)V", (*)
£ndFlßt
},

375 {"£ndDoubË", "(D)V", (*)
£ndDoubË
},

376 {"£ndObjeù", "(Ljava/Ïng/Objeù;)V", (*)
£ndObjeù
},

377 {"£ndObjeùPlusD©a", "(Ljava/Ïng/Objeù;)V", (*)
£ndObjeùPlusD©a
},

378 {"mªu®lyO³n", "()V", (*)
mªu®lyO³n
},

379 {"mªu®lyClo£", "()V", (*)
mªu®lyClo£
},

385 
JNIEnv
* 
	m’v
;

386 * 
	mv’v
;

387 }
	tUniÚJNIEnvToVoid
;

389 
	$»gi¡”N©iveM‘hods
(
JNIEnv
* 
’v
, cÚ¡ * 
şassName
,

390 
JNIN©iveM‘hod
* 
gM‘hods
, 
numM‘hods
){

392 
jşass
 
şazz
;

393 
şazz
 = 
’v
->
	`FšdCÏss
(
şassName
);

395 ià(
şazz
 =ğ
NULL
)

396  
JNI_FALSE
;

397 ià(
’v
->
	`Regi¡”N©ives
(
şazz
, 
gM‘hods
, 
numM‘hods
)<0)

398  
JNI_FALSE
;

399  
JNI_TRUE
;

401 
	}
}

403 
	$»gi¡”ShadowN©ives
(
JNIEnv
 *
’v
){

405 ià(!
	`»gi¡”N©iveM‘hods
(
’v
, 
şassP©hName
,

406 
m‘hods
, (methods)/(methods[0])))

408  
JNI_FALSE
;

411  
JNI_TRUE
;

413 
	}
}

415 
	$objNewHook
(
Objeù
* 
obj
){

417 
	`S‘AndG‘N‘»f
(
obj
);

419 
	}
}

420 
	$th»adEndHook
(
Th»ad
* 
£lf
){

422 
boŞ
 
isD«mÚ
 = 
çl£
;

423 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","š hook % %d %s", 
__FUNCTION__
, 
£lf
->
th»adId
, 
isD«mÚ
?"daemon":"not daemon");

424 
	}
}

425 
	$vmEndHook
(
JavaVM
* 
vm
){

426 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","š hook %s", 
__FUNCTION__
);

427 
	}
}

428 
	$objF»eHook
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
){

429 if(
obj
 =ğ
NULL
)

431 if(
obj
->
uuid
 == 0)

433 
	`S‘AndG‘N‘»f
(
obj
);

435 if(!
	`dvmIsCÏssObjeù
(
obj
))

436 
»mÙe
.
	`ObjF»eEv’t
(
obj
->
uuid
);

437 
	}
}

438 
	$şassfeLßdHook
(cÚ¡ * 
Çme
, 
Ën
){

439 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","LOADING CLASS %s", 
Çme
);

441 
	}
}

442 
	$şassIn™Hook
(
CÏssObjeù
* 
co
){

443 
	`S‘AndG‘N‘»f
(
co
);

445 
	}
}

458 * 
	$£nd_th»ad_loİ
(* 
obj
) {

459 
Bufãr
 *
undecidedBuf
 = 
Ãw
 
	`Bufãr
(1024);

460 
Œue
){

461 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","IN WHILE LOOOP");

462 
Bufãr
* 
tmp
 = 
NULL
;

463 
tmp
 = 
»mÙe
.
	`R‘uºAndRe£tBufãr
();

464 if(!
isDecided
){

465 
undecidedBuf
->
	`Enqueue
(
tmp
->
q_d©a
,mp->
q_occup›d
);

466 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","PUTTING UNDECIDED EVENTS INTO BUFFER SIZED: %d", 
undecidedBuf
->
q_occup›d
);

468 if(
gDvm
.
isShadow
){

469 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","DROP THE BUFFER FOR UNOBSERVED PROCESS SIZED %d", 
undecidedBuf
->
q_occup›d
);

470 
d–‘e
 
tmp
;

474 if(!
sock
){

475 
	`O³nCÚÃùiÚ
();

477 if(
undecidedBuf
){

478 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","SENDING UNDECIDED BUFFER SIZED: %d", 
undecidedBuf
->
q_occup›d
);

479 if(!
sock
->
	`S’d
(
undecidedBuf
->
q_d©a
, undecidedBuf->
q_occup›d
)){

480 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","SERVER ERROR DURING SEND");

481 
d–‘e
 
sock
;

482 
sock
 = 
NULL
;

484 
d–‘e
 
undecidedBuf
;

485 
undecidedBuf
 = 
NULL
;

487 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","SENDING BUFFER SIZED: %d", 
tmp
->
q_occup›d
);

488 if(!
sock
->
	`S’d
(
tmp
->
q_d©a
,mp->
q_occup›d
)){

489 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","SERVER ERROR DURING SEND");

490 
d–‘e
 
sock
;

491 
sock
 = 
NULL
;

494 if(
tmp
)

495 
d–‘e
 
tmp
;

496 
	`¦“p
(1);

500 if(
undecidedBuf
)

501 
d–‘e
 
undecidedBuf
;

503 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","SENDING LOOP END");

505 
	`±h»ad_d‘ach
(
	`±h»ad_£lf
());

506 
	`±h»ad_ex™
(
NULL
);

508  
NULL
;

509 
	}
}

510 
jšt
 
	$ShadowLib_ZygÙe_OnLßd
(
JavaVM
* 
vm
, * 
»£rved
){

511 
isZygÙe
 = 
Œue
;

512 
UniÚJNIEnvToVoid
 
u’v
;

513 
u’v
.
v’v
 = 
NULL
;

514 
jšt
 
»suÉ
 = -1;

515 
JNIEnv
 *
’v
 = 
NULL
;

516 
zygÙe_buff
 = 
NULL
;

519 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","IN ONLOAD, ZygÙPID: %d", 
	`g‘pid
());

521 
gDvm
.
ÃwObjHook
 = &
objNewHook
;

522 
gDvm
.
ä“ObjHook
 = &
objF»eHook
;

523 
gDvm
.
th»adEndHook
 = &threadEndHook;

524 
gDvm
.
vmEndHook
 = &vmEndHook;

525 
gDvm
.
şassIn™Hook
 = &classInitHook;

526 
gDvm
.
şassfeLßdHook
 = &classfileLoadHook;

528 
	`±h»ad_mu‹x_š™
(&
gl_mtx
, 
NULL
);

530 ià(
vm
->
	`G‘Env
(&
u’v
.
v’v
, 
JNI_VERSION_1_4
è!ğ
JNI_OK
){

531 
ba
;

534 
’v
 = 
u’v
.env;

536 
’v
 = 
u’v
.env;

538 ià(
	`»gi¡”ShadowN©ives
(
’v
è!ğ
JNI_TRUE
){

540 
ba
;

543 
»suÉ
 = 
JNI_VERSION_1_4
;

549 
ba
:

550  
»suÉ
;

551 
	}
}

553 
	$BefÜeFÜk
(){

554 
	`±h»ad_mu‹x_lock
(&
gl_mtx
);

555 
zygÙe_buff
 = 
»mÙe
.
	`R‘uºAndRe£tBufãr
();

556 
	`ALOG
(
LOG_DEBUG
,"SHADOWDEBUG","BEFORE FORK, BUFF OF ZYGOTE: %d", 
zygÙe_buff
->
q_occup›d
);

557 if(!
sock
){

558 
	`O³nCÚÃùiÚ
();

560 
sock
->
	`S’d
(
zygÙe_buff
->
q_d©a
,zygÙe_buff->
q_occup›d
);

561 if(
zygÙe_buff
)

562 
d–‘e
 
zygÙe_buff
;

563 
zygÙe_buff
=
NULL
;

564 
	`±h»ad_mu‹x_uÆock
(&
gl_mtx
);

565 
	}
}

567 
jšt
 
	$ShadowLib_OnLßd
(
JavaVM
* 
vm
, * 
»£rved
){

568 
isZygÙe
 = 
çl£
;

569 
sock
 = 
NULL
;

570 
UniÚJNIEnvToVoid
 
u’v
;

571 
u’v
.
v’v
 = 
NULL
;

572 
jšt
 
»suÉ
 = -1;

573 
JNIEnv
 *
’v
 = 
NULL
;

576 
	`ALOG
(
LOG_DEBUG
,
isZygÙe
?"SHADOWZYGOTE":"SHADOW","IN ONLOAD, PID: %d", 
	`g‘pid
());

577 
	`±h»ad_mu‹x_š™
(&
gl_mtx
, 
NULL
);

581 
	`±h»ad_mu‹x_lock
(&
gDvm
.
s_mtx
);

582 
gDvm
.
ÃwObjHook
 = &
objNewHook
;

583 
gDvm
.
ä“ObjHook
 = &
objF»eHook
;

584 
gDvm
.
th»adEndHook
 = &threadEndHook;

585 
gDvm
.
vmEndHook
 = &vmEndHook;

587 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
s_mtx
);

588 
±h»ad_t
 
£nd_th»ad
;

589 
	`±h»ad_ü—‹
(&
£nd_th»ad
, 
NULL
, 
£nd_th»ad_loİ
, NULL);

592 ià(
vm
->
	`G‘Env
(&
u’v
.
v’v
, 
JNI_VERSION_1_4
è!ğ
JNI_OK
){

593 
ba
;

596 
’v
 = 
u’v
.env;

598 
’v
 = 
u’v
.env;

600 ià(
	`»gi¡”ShadowN©ives
(
’v
è!ğ
JNI_TRUE
){

602 
ba
;

605 
»suÉ
 = 
JNI_VERSION_1_4
;

608 
ba
:

610 
	}
}

	@vm/shadowlib/ReProtocol.h

1 #iâdeà
_REPROTOCOL_H_


2 
	#_REPROTOCOL_H_


	)

4 
	~"ShadowLib.h
"

5 
	~"ReQueue.h
"

7 
	~"M­.h
"

8 
	~"Lock.h
"

10 
usšg
 
Çme¥aû
 
	g¡d
;

12 
	#INVALID_ORDERING_ID
 -1

	)

13 
	#INVALID_THREAD_ID
 -1

	)

15 
	#ANALYSIS_QUEUE_SIZE
 64

	)

16 
	#INVOCATION_SIZE
 32

	)

18 
	#BUFFER_INIT_SIZE
 100

	)

20 
	#MP
 1

	)

22 
	eMsgTy³
{

24 
	mMSG_CLOSE
,

26 
	mMSG_ANALYZE
,

28 
	mMSG_OBJ_FREE
,

30 
	mMSG_NEW_CLASS
,

32 
	mMSG_CLASS_INFO
,

34 
	mMSG_STRING_INFO
,

36 
	mMSG_REG_ANALYSIS
,

38 
	mMSG_THREAD_INFO
,

40 
	mMSG_THREAD_END
,

42 
	mMSG_FORK


45 
	eQueueTy³
{

46 
	mQUEUE_INVOCATION
,

47 
	mQUEUE_OBJFREE


50 şas 
	cRePrÙocŞ
{

51 
	mpublic
:

52 
	$RePrÙocŞ
(cÚ¡ * 
ho¡
, 
pÜt
){

53 
	`±h»ad_mu‹x_š™
(&
gl_mtx
, 
NULL
);

54 
	`±h»ad_mu‹x_š™
(&
objä“_mtx
, 
NULL
);

55 
	`±h»ad_mu‹x_š™
(&
ª®ysis_mtx
, 
NULL
);

61 
£ndBuf
 = 
Ãw
 
	`Bufãr
(
BUFFER_INIT_SIZE
);

62 
isClo£d
 = 
çl£
;

65 ~
	$RePrÙocŞ
(){

66 
	`±h»ad_mu‹x_de¡roy
(&
gl_mtx
);

67 
	`±h»ad_mu‹x_de¡roy
(&
ª®ysis_mtx
);

68 
	`±h»ad_mu‹x_de¡roy
(&
objä“_mtx
);

71 
d–‘e
 
£ndBuf
;

73 
	}
}

91 
boŞ
 
	$IsClo£d
(){

92  
isClo£d
;

93 
	}
}

94 
boŞ
 
	$CÚÃùiÚClo£
(){

95 
isClo£d
 = 
Œue
;

98 
Bufãr
 
	`tmp
(10);

99 if(
MP
)

100 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

101 
tmp
.
	`EnqueueJby‹
(
MSG_CLOSE
);

103 
	`S’d
(
tmp
.
q_d©a
,tmp.
q_occup›d
);

104  
Œue
;

105 
	}
}

107 
boŞ
 
	$OnFÜkEv’t
(
·»Á
){

108 
Bufãr
 
	`tmp
(20);

110 
tmp
.
	`EnqueueJšt
(
·»Á
);

111 
tmp
.
	`EnqueueJby‹
(
MSG_FORK
);

112 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

114 if(
MP
)

115 
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

116  
Œue
;

117 
	}
}

121 
boŞ
 
	$AÇlysisS¹Ev’t
(
th»ad_id_ty³
 
tid
, 
Üd”šg_id_ty³
 
oid
, 
m‘hodId
){

122 if(
	`G‘Ord”šgId
(
tid
è!ğ
INVALID_ORDERING_ID
) {

123  
çl£
;

125 
	`LOGDEBUG
("IN %s", 
__FUNCTION__
);

127 
lock_buf
.
	`Lock
(
oid
);

128 
	`S‘Ord”šgId
(
tid
, 
oid
);

129 if(!
ª®ysis_queue
.
	`Exi¡
(
oid
))

130 
ª®ysis_queue
.
	`S‘
(
oid
, 
Ãw
 
	`ReQueue
(
ANALYSIS_QUEUE_SIZE
));

132 if(
ª®ysis_queue
[
oid
]->
	`IsEm±y
()){

133 
	`LOGASSERT
((
jby‹
)
MSG_ANALYZE
 == MSG_ANALYZE, "WRONG TYPE CONVERSION");

134 if(
MP
)

135 
ª®ysis_queue
[
oid
]->
	`EnqueueJšt
(
	`g‘pid
());

137 
ª®ysis_queue
[
oid
]->
	`EnqueueJby‹
(
MSG_ANALYZE
);

138 
ª®ysis_queue
[
oid
]->
	`EnqueueJlÚg
(oid);

139 
ª®ysis_queue
[
oid
]->
	`EnqueueJšt
(0);

140 
ª®ysis_queue
[
oid
]->
ev’t_couÁ
=0;

142 
ª®ysis_queue
[
oid
]->
ev’t_couÁ
++;

143 
jšt
 
tmp
 = 
	`htÚl
(
ª®ysis_queue
[
oid
]->
ev’t_couÁ
);

145 if(
MP
)

146 
ª®ysis_queue
[
oid
]->
	`Upd©e
((
jšt
)+(
jby‹
)+(
jlÚg
),(*)&
tmp
, (jint));

148 
ª®ysis_queue
[
oid
]->
	`Upd©e
((
jby‹
)+(
jlÚg
),(*)&
tmp
, (
jšt
));

149 if(!
švoÿtiÚ_buf
.
	`Exi¡
(
oid
)){

150 
švoÿtiÚ_buf
.
	`S‘
(
oid
, 
Ãw
 
	`Bufãr
(
INVOCATION_SIZE
));

152 
švoÿtiÚ_buf
[
oid
]->
	`Re£t
();

153 
	`LOGDEBUG
("ª®ysi Id: %d",()
m‘hodId
);

154 
švoÿtiÚ_buf
[
oid
]->
	`EnqueueJshÜt
(
m‘hodId
);

155 
švoÿtiÚ_buf
[
oid
]->
	`EnqueueJshÜt
(0);

157  
Œue
;

158 
	}
}

159 
	$S’dJboŞ—n
(
th»ad_id_ty³
 
tid
, 
jboŞ—n
 
d©a
){

160  
	`S’dArgum’t
(
tid
, (*)&
d©a
, (
jboŞ—n
));

161 
	}
}

162 
	$S’dJby‹
(
th»ad_id_ty³
 
tid
, 
jby‹
 
d©a
){

163  
	`S’dArgum’t
(
tid
, (*)&
d©a
, (
jby‹
));

164 
	}
}

165 
	$S’dJch¬
(
th»ad_id_ty³
 
tid
, 
jch¬
 
d©a
){

166 
jch¬
 
Ás
 = 
	`htÚs
(
d©a
);

167  
	`S’dArgum’t
(
tid
, (*)&
Ás
, (
jch¬
));

168 
	}
}

169 
	$S’dJshÜt
(
th»ad_id_ty³
 
tid
, 
jshÜt
 
d©a
){

170 
jshÜt
 
Ás
 = 
	`htÚs
(
d©a
);

171  
	`S’dArgum’t
(
tid
, (*)&
Ás
, (
jshÜt
));

172 
	}
}

173 
	$S’dJšt
(
th»ad_id_ty³
 
tid
, 
jšt
 
d©a
){

174 
jšt
 
Ás
 = 
	`htÚl
(
d©a
);

175  
	`S’dArgum’t
(
tid
, (*)&
Ás
, (
jšt
));

176 
	}
}

177 
	$S’dJlÚg
(
th»ad_id_ty³
 
tid
, 
jlÚg
 
d©a
){

178 
jlÚg
 
Ás
 = 
	`htobe64
(
d©a
);

179  
	`S’dArgum’t
(
tid
, (*)&
Ás
, (
jlÚg
));

180 
	}
}

181 
	$S’dJæßt
(
th»ad_id_ty³
 
tid
, 
jæßt
 
d©a
){

182 
æßt_jšt
 
cÚv”t
;

183 
cÚv”t
.
f
 = 
d©a
;

184  
	`S’dJšt
(
tid
, 
cÚv”t
.
i
);

185 
	}
}

186 
	$S’dJdoubË
(
th»ad_id_ty³
 
tid
, 
jdoubË
 
d©a
){

187 
doubË_jlÚg
 
cÚv”t
;

188 
cÚv”t
.
d
 = 
d©a
;

189  
	`S’dJlÚg
(
tid
, 
cÚv”t
.
l
);

190 
	}
}

191 
	$S’dSŒšgUtf8
(
th»ad_id_ty³
 
tid
, cÚ¡ * 
¡ršg_utf8
, 
ušt16_t
 
size_š_by‹s
){

192 
ušt16_t
 
nsize
 = 
	`htÚs
(
size_š_by‹s
);

193  
	`S’dArgum’t
(
tid
, (*)&
nsize
, (
ušt16_t
))+S’dArgum’tÑid, (*)
¡ršg_utf8
, 
size_š_by‹s
);

194 
	}
}

195 
	$S’dJobjeù
(
th»ad_id_ty³
 
tid
, 
jlÚg
 
ÃŒef
){

196  
	`S’dJlÚg
(
tid
, 
ÃŒef
);

197 
	}
}

198 
boŞ
 
	$S’dSŒšgObjeù
(
th»ad_id_ty³
 
tid
, 
jlÚg
 
ÃŒef
, cÚ¡ 
jch¬
* 
utf8
, 
Ën
){

199 
Bufãr
 
	`tmp
(100);

200 if(
MP
)

201 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

202 
tmp
.
	`EnqueueJby‹
(
MSG_STRING_INFO
);

203 
tmp
.
	`EnqueueJlÚg
(
ÃŒef
);

204 
tmp
.
	`EnqueueSŒšgUtf8
((cÚ¡ *)
utf8
, 
Ën
*(
jch¬
));

205 
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

211  
Œue
;

213 
	}
}

214 
	$S’dSŒšgObjeù
(
th»ad_id_ty³
 
tid
, 
jlÚg
 
ÃŒef
, cÚ¡ * 
utf8
, 
Ën
){

216 
Bufãr
 
	`tmp
(100);

217 if(
MP
)

218 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

219 
tmp
.
	`EnqueueJby‹
(
MSG_STRING_INFO
);

220 
tmp
.
	`EnqueueJlÚg
(
ÃŒef
);

221 
tmp
.
	`EnqueueSŒšgUtf8
(
utf8
, 
Ën
);

222 
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

223  
tmp
.
q_occup›d
;

232 
	}
}

233 
	$S’dTh»adObjeù
(
th»ad_id_ty³
 
tid
, 
jlÚg
 
ÃŒef
, cÚ¡ * 
th»adName
, 
Ën
, 
jboŞ—n
 
isD«mÚ
){

235 
Bufãr
 
	`tmp
(100);

236 if(
MP
)

237 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

238 
tmp
.
	`EnqueueJby‹
(
MSG_THREAD_INFO
);

239 
tmp
.
	`EnqueueJlÚg
(
ÃŒef
);

240 
tmp
.
	`EnqueueSŒšgUtf8
(
th»adName
, 
Ën
);

241 
tmp
.
	`EnqueueJboŞ—n
(
isD«mÚ
);

242 
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

243  
tmp
.
q_occup›d
;

251 
	}
}

252 
boŞ
 
	$S’dArgum’t
(
th»ad_id_ty³
 
tid
, cÚ¡ * 
d©a
, 
Ëngth
){

253 
Üd”šg_id_ty³
 
oid
 = 
	`G‘Ord”šgId
(
tid
);

254 if(
oid
 =ğ
INVALID_ORDERING_ID
)

255  
çl£
;

256 
švoÿtiÚ_buf
[
oid
]->
	`Enqueue
(
d©a
, 
Ëngth
);

257  
Œue
;

258 
	}
}

259 
boŞ
 
	$AÇlysisEndEv’t
(
th»ad_id_ty³
 
tid
){

260 
Üd”šg_id_ty³
 
oid
 = 
	`G‘Ord”šgId
(
tid
);

261 if(
oid
 =ğ
INVALID_ORDERING_ID
) {

263 
	`LOGERROR
("invalidid inƒndƒvent");

265  
çl£
;

267 *
buf
=
NULL
;

268 
Ën_buf
;

269 
švoÿtiÚ_buf
[
oid
]->
	`G‘D©a
(
buf
, 
Ën_buf
);

270 
jshÜt
 
¬gËn
 = 
Ën_buf
 - (jshort)*2;

271 
¬gËn
 = 
	`htÚs
(arglen);

272 
švoÿtiÚ_buf
[
oid
]->
	`Upd©e
((
jshÜt
),(*)&
¬gËn
, (jshort));

273 
švoÿtiÚ_buf
[
oid
]->
	`G‘D©a
(
buf
, 
Ën_buf
);

276 
boŞ
 
fuÎ
 = !(
ª®ysis_queue
[
oid
]->
	`Enqueue
(
buf
, 
Ën_buf
));

277 if(
fuÎ
){

278 * 
q
=
NULL
;

279 
Ën_q
;

280 
ª®ysis_queue
[
oid
]->
	`G‘D©a
(
q
, 
Ën_q
);

281 
	`S’d
(
q
, 
Ën_q
, (*)
buf
, 
Ën_buf
);

283 
ª®ysis_queue
[
oid
]->
	`Re£t
();

286 
švoÿtiÚ_buf
[
oid
]->
	`Re£t
();

287 
	`S‘Ord”šgId
(
tid
, 
INVALID_ORDERING_ID
);

288 
lock_buf
.
	`UÆock
(
oid
);

289  
Œue
;

290 
	}
}

291 
boŞ
 
	$NewCÏssInfo
(
jlÚg
 
ÃŒef
, cÚ¡ * 
şassName
, 
Çm–’
, cÚ¡ * 
g’”ic
, 
gËn
, jlÚg 
ÃŒefCÏssLßd”
, jlÚg 
ÃŒefSu³rCÏss
){

295 
Bufãr
 
	`tmp
(100);

296 if(
MP
)

297 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

298 
tmp
.
	`EnqueueJby‹
(
MSG_CLASS_INFO
);

299 
tmp
.
	`EnqueueJlÚg
(
ÃŒef
);

310 
tmp
.
	`EnqueueSŒšgUtf8
(
şassName
, 
Çm–’
);

311 
tmp
.
	`EnqueueSŒšgUtf8
(
g’”ic
, 
gËn
);

312 
tmp
.
	`EnqueueJlÚg
(
ÃŒefCÏssLßd”
);

313 
tmp
.
	`EnqueueJlÚg
(
ÃŒefSu³rCÏss
);

317  
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

318 
	}
}

319 
	$ObjF»eEv’t
(
jlÚg
 
objeùId
){

321 
ScİedMu‹x
 
	`mtx
(&
objä“_mtx
);

322 if(
q_objä“
.
	`IsEm±y
()) {

323 if(
MP
)

324 
q_objä“
.
	`EnqueueJšt
(
	`g‘pid
());

326 
q_objä“
.
	`EnqueueJby‹
(
MSG_OBJ_FREE
);

327 
q_objä“
.
ev’t_couÁ
 = 0;

328 
q_objä“
.
	`EnqueueJšt
(0);

330 
q_objä“
.
ev’t_couÁ
++;

331 if(!
q_objä“
.
	`EnqueueJlÚg
(
objeùId
)){

332 
jšt
 
tmpšt
 = 
	`htÚl
(
q_objä“
.
ev’t_couÁ
);

333 if(
MP
)

334 
q_objä“
.
	`Upd©e
((
jšt
)+(
jby‹
), (*)&
tmpšt
, (jint));

336 
q_objä“
.
	`Upd©e
((
jby‹
), (*)&
tmpšt
, (
jšt
));

337 * 
tmp
=
NULL
;

338 
Ën
=0;

339 
q_objä“
.
	`G‘D©a
(
tmp
, 
Ën
);

340 
	`LOGASSERT
(
tmp
 && 
Ën
, "Error‡fter Get Data");

341 
jlÚg
 
Ás
 = 
	`htobe64
(
objeùId
);

342 
	`S’d
(
tmp
, 
Ën
, (*)&
Ás
, (
jlÚg
));

343 
q_objä“
.
	`Re£t
();

346 
	}
}

347 
boŞ
 
	$NewCÏssEv’t
(cÚ¡ * 
Çme
, 
ušt16_t
 
ÇmeL’gth
, 
jlÚg
 
şassLßd”Id
, 
jšt
 
codeL’gth
, cÚ¡ *
by‹s
){

351 
Bufãr
 
	`tmp
(100);

352 if(
MP
)

353 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

354 
tmp
.
	`EnqueueJby‹
(
MSG_NEW_CLASS
);

355 cÚ¡ *
tm²ame
 = 
Çme
;

356 
tm¶’
 = 
ÇmeL’gth
;

357 if(
Çme
[0]=='L'){

358 
tm²ame
++;

359 
tm¶’
--;

361 if(
Çme
[
ÇmeL’gth
-1] == ';')

362 
tm¶’
--;

364 
tmp
.
	`EnqueueSŒšgUtf8
(
tm²ame
, 
tm¶’
);

365 
tmp
.
	`EnqueueJlÚg
(
şassLßd”Id
);

366 
tmp
.
	`EnqueueJšt
(
codeL’gth
);

367 
tmp
.
	`Enqueue
(
by‹s
, 
codeL’gth
);

371  
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

373 
	}
}

374 
boŞ
 
	$M‘hodRegi¡”Ev’t
(
th»adId
, 
jshÜt
 
m‘hodId
, cÚ¡ * 
Çme
, 
Ëngth
){

376 
Bufãr
 
	`tmp
(40);

377 if(
MP
)

378 
tmp
.
	`EnqueueJšt
(
	`g‘pid
());

379 
tmp
.
	`EnqueueJby‹
(
MSG_REG_ANALYSIS
);

380 
tmp
.
	`EnqueueJshÜt
(
m‘hodId
);

381 
tmp
.
	`EnqueueSŒšgUtf8
(
Çme
, 
Ëngth
);

385  
	`S’d
(
tmp
.
q_d©a
,mp.
q_occup›d
);

387 
	}
}

388 
Bufãr
* 
	$R‘uºAndRe£tBufãr
(){

389 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

390 
Bufãr
 *
»s
 = 
£ndBuf
;

391 
£ndBuf
 = 
Ãw
 
	`Bufãr
(
BUFFER_INIT_SIZE
);

392  
»s
;

393 
	}
}

394 
	g´iv©e
:

395 
Üd”šg_id_ty³
 
	$G‘Ord”šgId
(
th»ad_id_ty³
 
tid
){

397 if(!
ruÂšg_oid
.
	`Exi¡
(
tid
))

398 
ruÂšg_oid
.
	`S‘
(
tid
, 
INVALID_ORDERING_ID
);

400  
ruÂšg_oid
[
tid
];

401 
	}
}

402 
	$S‘Ord”šgId
(
th»ad_id_ty³
 
tid
, 
Üd”šg_id_ty³
 
oid
){

405 
ruÂšg_oid
.
	`S‘
(
tid
, 
oid
);

406 
	}
}

407 
boŞ
 
	$S’d
(
MsgTy³
 
msg
){

409 
ty³
 = 
msg
;

410  
	`S’d
(&
ty³
, 1);

411 
	}
}

412 
boŞ
 
	$S’d
(cÚ¡ * 
d©a
, 
Ëngth
){

413 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

426 if(!
isClo£d
)

427 
£ndBuf
->
	`Enqueue
(
d©a
,
Ëngth
);

428 
	`ALOG
(
LOG_DEBUG
, "PACKET", "FIRST 10 BYTES:\t\t: %d %d %d %d, %d, %d %d %d %d", 
d©a
[0], data[1], data[2], data[3], data[4], data[5], data[6], data[7], data[8]);

436  
Œue
;

437 
	}
}

438 
boŞ
 
	$S’d
(cÚ¡ * 
d©a
, 
Ëngth
, cÚ¡ * 
Ï¡d©a
, 
Ï¡Ëngth
){

439 
ScİedMu‹x
 
	`mtx
(&
gl_mtx
);

466 if(!
isClo£d
){

467 
£ndBuf
->
	`Enqueue
(
d©a
,
Ëngth
);

468 
£ndBuf
->
	`Enqueue
(
Ï¡d©a
, 
Ï¡Ëngth
);

470 
	`ALOG
(
LOG_DEBUG
, "PACKET", "FIRST 5 BYTES:\t\t: %d %d %d %d, %d", 
d©a
[0], data[1], data[2], data[3], data[4]);

471  
Œue
;

472 
	}
}

473 
±h»ad_mu‹x_t
 
	ggl_mtx
;

475 
ReQueue
 
	gq_objä“
;

476 
±h»ad_mu‹x_t
 
	gobjä“_mtx
;

479 
	gM­
<
	gth»ad_id_ty³
, 
	gÜd”šg_id_ty³
> 
	gruÂšg_oid
;

480 
±h»ad_mu‹x_t
 
	gª®ysis_mtx
;

482 
	gM­
<
	gÜd”šg_id_ty³
, 
	gReQueue
*> 
	gª®ysis_queue
;

483 
LockBufãr
 
	glock_buf
;

484 
	gM­
<
	gÜd”šg_id_ty³
, 
	gBufãr
*> 
	gšvoÿtiÚ_buf
;

490 
Bufãr
 *
	g£ndBuf
;

491 
boŞ
 
	gisClo£d
;

	@vm/shadowlib/ReQueue.h

1 #iâdeà
_REQUEUE_H_


2 
	#_REQUEUE_H_


	)

4 
	~"ShadowLib.h
"

5 
usšg
 
Çme¥aû
 
	g¡d
;

7 
	#DEFAULT_QUEUE_SIZE
 1024

	)

9 
	uæßt_jšt
 {

10 
	mf
;

11 
jšt
 
	mi
;

14 
	udoubË_jlÚg
 {

15 
	md
;

16 
jlÚg
 
	ml
;

19 şas 
	cBa£Queue
{

20 
	mpublic
:

21 
	$Ba£Queue
(){

22 
q_ÿ·c™y
 = 
DEFAULT_QUEUE_SIZE
;

23 
q_occup›d
 = 0;

24 
q_d©a
 = 
Ãw
 [
q_ÿ·c™y
];

26 
	$Ba£Queue
(
ÿ·c™y
):
	`q_ÿ·c™y
(ÿ·c™y),
	$q_occup›d
(0){

27 
q_d©a
 = 
Ãw
 [
ÿ·c™y
];

28 
	}
}

29 
	gvœtu®
 ~
	$Ba£Queue
(){

30 
d–‘e
 []
q_d©a
;

31 
q_d©a
 = 
NULL
;

32 
	}
}

33 
	$EnqueueJboŞ—n
(
jboŞ—n
 
d©a
){

34  
	`Enqueue
((*)&
d©a
, (
jboŞ—n
));

35 
	}
}

36 
	$EnqueueJby‹
(
jby‹
 
d©a
){

37  
	`Enqueue
((*)&
d©a
, (
jby‹
));

38 
	}
}

39 
	$EnqueueJch¬
(
jch¬
 
d©a
){

40 
jch¬
 
Ás
 = 
	`htÚs
(
d©a
);

41  
	`Enqueue
((*)&
Ás
, (
jch¬
));

42 
	}
}

43 
	$EnqueueJshÜt
(
jshÜt
 
d©a
){

44 
jshÜt
 
Ás
 = 
	`htÚs
(
d©a
);

45  
	`Enqueue
((*)&
Ás
, (
jshÜt
));

46 
	}
}

47 
	$EnqueueJšt
(
jšt
 
d©a
){

48 
jšt
 
Ás
 = 
	`htÚl
(
d©a
);

49  
	`Enqueue
((*)&
Ás
, (
jšt
));

50 
	}
}

51 
	$EnqueueJlÚg
(
jlÚg
 
d©a
){

52 
jlÚg
 
Ás
 = 
	`htobe64
(
d©a
);

53  
	`Enqueue
((*)&
Ás
, (
jlÚg
));

54 
	}
}

55 
	$EnqueueJæßt
(
jæßt
 
d©a
){

56 
æßt_jšt
 
cÚv”t
;

57 
cÚv”t
.
f
 = 
d©a
;

58  
	`EnqueueJšt
(
cÚv”t
.
i
);

59 
	}
}

60 
	$EnqueueJdoubË
(
jdoubË
 
d©a
){

61 
doubË_jlÚg
 
cÚv”t
;

62 
cÚv”t
.
d
 = 
d©a
;

63  
	`EnqueueJlÚg
(
cÚv”t
.
l
);

64 
	}
}

65 
	$EnqueueSŒšgUtf8
(cÚ¡ * 
¡ršg_utf8
, 
ušt16_t
 
size_š_by‹s
){

66 
ušt16_t
 
nsize
 = 
	`htÚs
(
size_š_by‹s
);

67  
	`Enqueue
((*)&
nsize
, (
ušt16_t
))+Enqueue((*)
¡ršg_utf8
, 
size_š_by‹s
);

68 
	}
}

70 
vœtu®
 
	$Enqueue
(cÚ¡ * 
d©a
, 
Ëngth
){

72 
	}
}

73 
boŞ
 
	$IsEm±y
(){

74  
q_occup›d
 == 0;

75 
	}
}

76 
vœtu®
 
	$Re£t
(){

77 
q_occup›d
 = 0;

78 
	}
}

79 
vœtu®
 
	$G‘D©a
(* &
d©a
, &
Ëngth
){

80 
d©a
 = 
q_d©a
;

81 
Ëngth
 = 
q_occup›d
;

82 
	}
}

83 
vœtu®
 
boŞ
 
	$Upd©e
(
pos
, cÚ¡ * 
šput
, 
Ën
){

84 if(
pos
+
Ën
 > 
q_occup›d
){

85  
çl£
;

87 
	`memıy
(
q_d©a
+
pos
, 
šput
, 
Ën
);

88  
Œue
;

89 
	}
}

90 
vœtu®
 
	$Pršt
(){

91 
	`LOGDEBUG
("Print Queue");

92 
i
 = 0; i < 
q_occup›d
; i++)

93 
	`LOGDEBUG
("\ˆ%d:%d",
i
, ()
q_d©a
[i]);

94 
	}
}

96 
	gq_ÿ·c™y
;

97 
	gq_occup›d
;

98 * 
	gq_d©a
;

101 şas 
	cReQueue
: 
public
 
Ba£Queue
{

102 
public
:

103 
	$ReQueue
():
	$Ba£Queue
(){ 
ev’t_couÁ
 = 0; }

104 
	$ReQueue
(
ÿ·c™y
):
	$Ba£Queue
(
ÿ·c™y
){ 
ev’t_couÁ
 = 0; 
	}
}

105 
vœtu®
 
	$Enqueue
(cÚ¡ * 
d©a
, 
Ëngth
){

107 if(
Ëngth
 > 
q_ÿ·c™y
 - 
q_occup›d
) {

108  
çl£
;

110 
	`memıy
(
q_d©a
+
q_occup›d
, 
d©a
, 
Ëngth
);

111 
q_occup›d
+=
Ëngth
;

113  
Œue
;

114 
	}
}

115 
vœtu®
 
	$Re£t
(){

116 
q_occup›d
 = 0;

117 
ev’t_couÁ
 = 0;

118 
	}
}

119 
jšt
 
	gev’t_couÁ
;

122 şas 
	cBufãr
: 
public
 
Ba£Queue
{

123 
public
:

124 
	$Bufãr
(
ÿ·c™y
):
	$Ba£Queue
(
ÿ·c™y
){}

125 
vœtu®
 
	$Enqueue
(cÚ¡ * 
d©a
, 
Ëngth
){

126 if(
q_occup›d
 + 
Ëngth
 > 
q_ÿ·c™y
){

127 
	`DoubËC­ac™y
();

128  
	`Enqueue
(
d©a
, 
Ëngth
);

130 
	`memıy
(
q_d©a
 + 
q_occup›d
, 
d©a
, 
Ëngth
);

131 
q_occup›d
 +ğ
Ëngth
;

132  
Ëngth
;

134 
	}
}

135 
Bufãr
* 
	$Du¶iÿ‹
(){

136 
Bufãr
* 
»s
 = 
Ãw
 
	`Bufãr
(
q_ÿ·c™y
);

137 
	`memıy
(
»s
->
q_d©a
, q_d©a, 
q_occup›d
);

138  
»s
;

139 
	}
}

140 
	g´iv©e
:

141 
	$DoubËC­ac™y
(){

142 * 
Ãw_buf
 = 
Ãw
 [
q_ÿ·c™y
*2];

143 
	`memıy
(
Ãw_buf
, 
q_d©a
, 
q_occup›d
);

144 
d–‘e
 []
q_d©a
;

145 
q_d©a
 = 
Ãw_buf
;

146 
q_ÿ·c™y
 *= 2;

147 
	}
}

	@vm/shadowlib/ShadowLib.h

1 #iâdeà
_SHADOWLIB_H_


2 
	#_SHADOWLIB_H_


	)

4 
	~<jni.h
>

5 
	~<±h»ad.h
>

6 
	~<Ãtš‘/š.h
>

7 
	~<’dŸn.h
>

8 #iâdeà
htobe64


9 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


10 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

11 
	#htŞe64
(
x
è(x)

	)

12 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

13 
	#Ë64toh
(
x
è(x)

	)

15 
	#htobe64
(
x
è(x)

	)

16 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

17 
	#be64toh
(
x
è(x)

	)

18 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

22 şas 
	cScİedMu‹x
{

23 
	mpublic
:

24 
	$ScİedMu‹x
(
±h»ad_mu‹x_t
 *
mtx
):
	$loÿl_mtx
(
mtx
){

25 
	`±h»ad_mu‹x_lock
(
loÿl_mtx
);

27 ~
	$ScİedMu‹x
(){

28 
	`±h»ad_mu‹x_uÆock
(
loÿl_mtx
);

29 
	}
}

30 
	g´iv©e
:

31 
±h»ad_mu‹x_t
 *
loÿl_mtx
;

32 
	$ScİedMu‹x
(){
	}
}

63 
	tÜd”šg_id_ty³
;

65 
Üd”šg_id_ty³
 
	tlock_id_ty³
;

67 
	tth»ad_id_ty³
;

69 
BefÜeFÜk
();

70 
jšt
 
ShadowLib_OnLßd
(
JavaVM
* 
vm
, * 
»£rved
);

71 
jšt
 
ShadowLib_ZygÙe_OnLßd
(
JavaVM
* 
vm
, * 
»£rved
);

73 
_m­PID
(
pid
, cÚ¡ * 
²ame
);

74 
ÚFÜk
(
·»Á
);

75 
»gi¡”ShadowN©ives
(
JNIEnv
 *
’v
);

	@vm/shadowlib/Socket.cpp

4 
	~"Sock‘.h
"

5 
	~<¡ršg.h
>

6 
	~<”ºo.h
>

7 
	~<fú.h
>

9 
	~<Ãtš‘/š.h
>

10 
	~<sys/ty³s.h
>

11 
	~<sys/sock‘.h
>

12 
	~<¡dio.h
>

13 
	~<¡dlib.h
>

14 
	~<¡ršg.h
>

15 
	~<uni¡d.h
>

16 
	~<Ãtš‘/š.h
>

17 
	~<¬·/š‘.h
>

19 
	~<sys/un.h
>

20 
	#UNIX_PATH_MAX
 108

	)

21 
	#SERVER_SOCK
 "/dev/sock‘/š¡rum’t"

	)

25 
	gSock‘
::
	$Sock‘
() :

26 
	`m_sock
 ( -1 )

29 
	`mem£t
 ( &
m_addr
,

31  ( 
m_addr
 ) );

33 
	}
}

35 
	gSock‘
::~
	$Sock‘
()

37 iàĞ
	`is_v®id
() )

38 ::
	`şo£
 ( 
m_sock
 );

39 
	}
}

41 
boŞ
 
	gSock‘
::
	$ü—‹
()

43 
m_sock
 = 
	`sock‘
 ( 
AF_INET
,

44 
SOCK_STREAM
,

47 iàĞ! 
	`is_v®id
() )

48  
çl£
;

52 
Ú
 = 1;

53 iàĞ
	`£tsockİt
 ( 
m_sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
, ( cÚ¡ * ) &
Ú
,  ( on ) ) == -1 )

54  
çl£
;

57  
Œue
;

59 
	}
}

63 
boŞ
 
	gSock‘
::
	$bšd
 ( cÚ¡ 
pÜt
 )

66 iàĞ! 
	`is_v®id
() )

68  
çl£
;

73 
m_addr
.
sš_çmy
 = 
AF_INET
;

74 
m_addr
.
sš_addr
.
s_addr
 = 
INADDR_ANY
;

75 
m_addr
.
sš_pÜt
 = 
	`htÚs
 ( 
pÜt
 );

77 *
tmp
 = &
m_addr
;

78 
bšd_»tuº
 = ::
	`bšd
 ( 
m_sock
,

79 Ğ
sockaddr
 * ) 
tmp
,

80  ( 
m_addr
 ) );

83 iàĞ
bšd_»tuº
 == -1 )

85  
çl£
;

88  
Œue
;

89 
	}
}

92 
boŞ
 
	gSock‘
::
	$li¡’
() const

94 iàĞ! 
	`is_v®id
() )

96  
çl£
;

99 
li¡’_»tuº
 = ::
	`li¡’
 ( 
m_sock
, 
MAXCONNECTIONS
 );

102 iàĞ
li¡’_»tuº
 == -1 )

104  
çl£
;

107  
Œue
;

108 
	}
}

111 
boŞ
 
	gSock‘
::
	$acû±
 ( 
Sock‘
& 
Ãw_sock‘
 ) const

113 
addr_Ëngth
 =  ( 
m_addr
 );

114 cÚ¡ * 
tmp
 = &
m_addr
;

115 
Ãw_sock‘
.
m_sock
 = ::
	`acû±
 ( m_sock, ( 
sockaddr
 * ) 
tmp
, ( 
sockËn_t
 * ) &
addr_Ëngth
 );

117 iàĞ
Ãw_sock‘
.
m_sock
 <= 0 )

118  
çl£
;

120  
Œue
;

121 
	}
}

123 
boŞ
 
	gSock‘
::
	$S’d
 ( cÚ¡ * 
s
, 
Ëngth
 ) const

125 
¡©us
 = ::
	`£nd
 ( 
m_sock
, 
s
, 
Ëngth
, 
MSG_NOSIGNAL
 );

126 iàĞ
¡©us
 == -1 )

128  
çl£
;

132  
Œue
;

134 
	}
}

149 
	gSock‘
::
	$RecvIÁ
 ( & 
œes
) const

151 
¡©us
 = ::
	`»cv
 ( 
m_sock
, &
œes
, (), 0 );

152  
¡©us
;

153 
	}
}

183 
boŞ
 
	gSock‘
::
	$CÚÃù
 ()

185 #iâdeà
DEBUG_MODE


186 
sockaddr_un
 
add»ss
;

188 
m_sock
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

189 if(
m_sock
 < 0)

192  
çl£
;

196 
	`mem£t
(&
add»ss
, 0, (
sockaddr_un
));

198 
add»ss
.
sun_çmy
 = 
AF_UNIX
;

199 
	`¢´štf
(
add»ss
.
sun_·th
, 
UNIX_PATH_MAX
, 
SERVER_SOCK
);

201 * 
tmp
 = &
add»ss
;

202 if(
	`cÚÃù
(
m_sock
,

203 (
sockaddr
 *è
tmp
,

204 (
sockaddr_un
)) != 0)

208  
çl£
;

210  
Œue
;

212 
	`´štf
("in debug mode \n");

213 
m_sock
 = 
	`sock‘
 ( 
AF_INET
,

214 
SOCK_STREAM
,

216 iàĞ! 
	`is_v®id
(èè 
çl£
;

218 
m_addr
.
sš_çmy
 = 
AF_INET
;

219 
m_addr
.
sš_pÜt
 = 
	`htÚs
 ( 
pÜt
 );

221 
¡©us
 = 
	`š‘_±Ú
 ( 
AF_INET
, 
ho¡
, &
m_addr
.
sš_addr
 );

223 iàĞ
”ºo
 =ğ
EAFNOSUPPORT
 )  
çl£
;

225 
¡©us
 = ::
	`cÚÃù
 ( 
m_sock
, ( 
sockaddr
 * ) &
m_addr
,  ( m_addr ) );

227 iàĞ
¡©us
 == 0 )

228  
Œue
;

230  
çl£
;

233 
	}
}

254 
	gSock‘
::
	$£t_nÚ_blockšg
 ( cÚ¡ 
boŞ
 
b
 )

257 
İts
;

259 
İts
 = 
	`fú
 ( 
m_sock
,

260 
F_GETFL
 );

262 iàĞ
İts
 < 0 )

267 iàĞ
b
 )

268 
İts
 = ( o± | 
O_NONBLOCK
 );

270 
İts
 = ( o± & ~
O_NONBLOCK
 );

272 
	`fú
 ( 
m_sock
,

273 
F_SETFL
,
İts
 );

275 
	}
}

	@vm/shadowlib/Socket.h

3 #iâdeà
_SOCKET_H_


4 
	#_SOCKET_H_


	)

7 
	~<sys/ty³s.h
>

8 
	~<sys/sock‘.h
>

9 
	~<Ãtš‘/š.h
>

10 
	~<Ãtdb.h
>

11 
	~<uni¡d.h
>

12 
	~<¬·/š‘.h
>

16 cÚ¡ 
	gMAXHOSTNAME
 = 200;

17 cÚ¡ 
	gMAXCONNECTIONS
 = 5;

18 cÚ¡ 
	gMAXRECV
 = 500;

21 şas 
	cSock‘


23 
	mpublic
:

24 
Sock‘
();

25 
	mvœtu®
 ~
Sock‘
();

28 
boŞ
 
ü—‹
();

29 
boŞ
 
bšd
 ( cÚ¡ 
pÜt
 );

30 
boŞ
 
	$li¡’
() const;

31 
boŞ
 
	$acû±
 ( 
Sock‘
& ) const;

35 
boŞ
 
	`CÚÃù
 ();

39 
boŞ
 
	$S’d
 ( cÚ¡ * 
d©a
, cÚ¡ 
Ëngth
 ) const;

42 
	$RecvIÁ
 ( & ) const;

44 
	`£t_nÚ_blockšg
 ( cÚ¡ 
boŞ
 );

46 
boŞ
 
	$is_v®id
(ècÚ¡ {  
m_sock
 != -1; }

48 
´iv©e
:

50 
m_sock
;

51 
sockaddr_š
 
m_addr
;

54 
	}
};

	@vm/shadowlib/buffpack.h

1 #iâdeà
_BUFFPACK_H


2 
	#_BUFFPACK_H


	)

4 #ià
defšed
 (
__APPLE__
è&& defšed (
__MACH__
)

6 
	~<machše/’dŸn.h
>

8 #ià
BYTE_ORDER
 =ğ
BIG_ENDIAN


9 
	#htobe64
(
x
è(x)

	)

11 
	#htobe64
(
x
è
	`__DARWIN_OSSw­IÁ64
((x))

	)

15 
	~<’dŸn.h
>

24 
	~"bufãr.h
"

27 
	uæßt_jšt
 {

29 
	mf
;

30 
jšt
 
	mi
;

34 
	udoubË_jlÚg
 {

36 
	md
;

37 
jlÚg
 
	ml
;

40 
	$·ck_boŞ—n
(
bufãr
 * 
buff
, 
jboŞ—n
 
to_£nd
) {

41 
	`bufãr_fl
(
buff
, &
to_£nd
, (
jboŞ—n
));

42 
	}
}

44 
	$·ck_by‹
(
bufãr
 * 
buff
, 
jby‹
 
to_£nd
) {

45 
	`bufãr_fl
(
buff
, &
to_£nd
, (
jby‹
));

46 
	}
}

48 
	$·ck_ch¬
(
bufãr
 * 
buff
, 
jch¬
 
to_£nd
) {

49 
jch¬
 
Ás
 = 
	`htÚs
(
to_£nd
);

50 
	`bufãr_fl
(
buff
, &
Ás
, (
jch¬
));

51 
	}
}

53 
	$·ck_shÜt
(
bufãr
 * 
buff
, 
jshÜt
 
to_£nd
) {

54 
jshÜt
 
Ás
 = 
	`htÚs
(
to_£nd
);

55 
	`bufãr_fl
(
buff
, &
Ás
, (
jshÜt
));

56 
	}
}

58 
	$·ck_št
(
bufãr
 * 
buff
, 
jšt
 
to_£nd
) {

59 
jšt
 
Ás
 = 
	`htÚl
(
to_£nd
);

60 
	`bufãr_fl
(
buff
, &
Ás
, (
jšt
));

61 
	}
}

63 
	$·ck_lÚg
(
bufãr
 * 
buff
, 
jlÚg
 
to_£nd
) {

64 
jlÚg
 
Ás
 = 
	`htobe64
(
to_£nd
);

65 
	`bufãr_fl
(
buff
, &
Ás
, (
jlÚg
));

66 
	}
}

68 
	$·ck_æßt
(
bufãr
 * 
buff
, 
jæßt
 
to_£nd
) {

71 
æßt_jšt
 
cÚv”t
;

72 
cÚv”t
.
f
 = 
to_£nd
;

73 
	`·ck_št
(
buff
, 
cÚv”t
.
i
);

74 
	}
}

76 
	$·ck_doubË
(
bufãr
 * 
buff
, 
jdoubË
 
to_£nd
) {

79 
doubË_jlÚg
 
cÚv”t
;

80 
cÚv”t
.
d
 = 
to_£nd
;

81 
	`·ck_lÚg
(
buff
, 
cÚv”t
.
l
);

82 
	}
}

84 
	$·ck_¡ršg_utf8
(
bufãr
 * 
buff
, cÚ¡ * 
¡ršg_utf8
,

85 
ušt16_t
 
size_š_by‹s
) {

88 
ušt16_t
 
nsize
 = 
	`htÚs
(
size_š_by‹s
);

89 
	`bufãr_fl
(
buff
, &
nsize
, (
ušt16_t
));

91 
	`bufãr_fl
(
buff
, 
¡ršg_utf8
, 
size_š_by‹s
);

92 
	}
}

94 
	$·ck_by‹s
(
bufãr
 * 
buff
, cÚ¡ * 
d©a
, 
jšt
 
size
) {

95 
	`bufãr_fl
(
buff
, 
d©a
, 
size
);

96 
	}
}

	@vm/test/AtomicTest.cpp

24 
	~"D®vik.h
"

26 
	~<¡dlib.h
>

27 
	~<¡dio.h
>

28 
	~<±h»ad.h
>

29 
	~<uni¡d.h
>

30 
	~<cuts/©omic.h
>

31 #ifdeà
__¬m__


32 
	~<machše/ıu-ã©u»s.h
>

35 
	#USE_ATOMIC
 1

	)

36 
	#THREAD_COUNT
 10

	)

37 
	#ITERATION_COUNT
 500000

	)

39 #ifdeà
HAVE_ANDROID_OS


44 #ifdeà
TEST_BIONIC


45 
__©omic_cmpxchg
(
Şd
, 
_Ãw
, vŞ©*
±r
);

46 
__©omic_sw­
(
_Ãw
, vŞ©*
±r
);

47 
__©omic_dec
(vŞ©*
±r
);

48 
__©omic_šc
(vŞ©*
±r
);

51 
±h»ad_mu‹x_t
 
	gwa™Lock
 = 
PTHREAD_MUTEX_INITIALIZER
;

52 
±h»ad_cÚd_t
 
	gwa™CÚd
 = 
PTHREAD_COND_INITIALIZER
;

54 vŞ©
	gth»adsS¹ed
 = 0;

57 
	gšcTe¡
 = 0;

58 
	gdecTe¡
 = 0;

59 
	gaddTe¡
 = 0;

60 
	gªdTe¡
 = 0;

61 
	gÜTe¡
 = 0;

62 
	gÿsTe¡
 = 0;

63 
	gçšgCasTe¡
 = 0;

64 
št64_t
 
	gwideCasTe¡
 = 0x6600000077000000LL;

69 
št64_t
 
	$g‘R–©iveTimeN£c
()

71 
	#HAVE_POSIX_CLOCKS


	)

72 #ifdeà
HAVE_POSIX_CLOCKS


73 
time¥ec
 
now
;

74 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

75  (
št64_t
è
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

77 
timev®
 
now
;

78 
	`g‘timeofday
(&
now
, 
NULL
);

79  (
št64_t
è
now
.
tv_£c
*1000000000LL +‚ow.
tv_u£c
 * 1000LL;

81 
	}
}

90 
	$šü
(è
	`__©Œibu‹__
((
nošlše
));

91 
	$deü
(è
	`__©Œibu‹__
((
nošlše
));

92 
	$add
(
addV®
è
	`__©Œibu‹__
((
nošlše
));

93 
	$com·»AndSw­
(
ŞdV®
, 
ÃwV®
, * 
addr
è
	`__©Œibu‹__
((
nošlše
));

94 
	$com·»AndSw­Wide
(
št64_t
 
ŞdV®
, iÁ64_ˆ
ÃwV®
, iÁ64_t* 
addr
è
	`__©Œibu‹__
((
nošlše
));

96 
	$šü
()

98 
šcTe¡
++;

99 
	}
}

100 
	$deü
()

102 
decTe¡
--;

103 
	}
}

104 
	$add
(
št32_t
 
addV®
)

106 
addTe¡
 +ğ
addV®
;

107 
	}
}

108 
	$com·»AndSw­
(
št32_t
 
ŞdV®
, iÁ32_ˆ
ÃwV®
, iÁ32_t* 
addr
)

110 ià(*
addr
 =ğ
ŞdV®
) {

111 *
addr
 = 
ÃwV®
;

115 
	}
}

116 
	$com·»AndSw­Wide
(
št64_t
 
ŞdV®
, iÁ64_ˆ
ÃwV®
, iÁ64_t* 
addr
)

118 ià(*
addr
 =ğ
ŞdV®
) {

119 *
addr
 = 
ÃwV®
;

123 
	}
}

128 
	$doAtomicTe¡
(
num
)

130 
addV®
 = (
num
 & 0x01) + 1;

132 
i
;

133 
i
 = 0; i < 
ITERATION_COUNT
; i++) {

134 ià(
USE_ATOMIC
) {

135 
	`ªdroid_©omic_šc
(&
šcTe¡
);

136 
	`ªdroid_©omic_dec
(&
decTe¡
);

137 
	`ªdroid_©omic_add
(
addV®
, &
addTe¡
);

139 
v®
;

141 
v®
 = 
ÿsTe¡
;

142 } 
	`ªdroid_©omic_»Ëa£_ÿs
(
v®
, v®+3, &
ÿsTe¡
) != 0);

144 
v®
 = 
ÿsTe¡
;

145 } 
	`ªdroid_©omic_acquœe_ÿs
(
v®
, v®-1, &
ÿsTe¡
) != 0);

147 
št64_t
 
wv®
;

149 
wv®
 = 
	`dvmQuasiAtomicR—d64
(&
wideCasTe¡
);

150 } 
	`dvmQuasiAtomicCas64
(
wv®
,

151 
wv®
 + 0x0000002000000001LL, &
wideCasTe¡
) != 0);

153 
wv®
 = 
	`dvmQuasiAtomicR—d64
(&
wideCasTe¡
);

154 } 
	`dvmQuasiAtomicCas64
(
wv®
,

155 
wv®
 - 0x0000002000000001LL, &
wideCasTe¡
) != 0);

157 
	`šü
();

158 
	`deü
();

159 
	`add
(
addV®
);

161 
v®
;

163 
v®
 = 
ÿsTe¡
;

164 } 
	`com·»AndSw­
(
v®
, v®+3, &
ÿsTe¡
) != 0);

166 
v®
 = 
ÿsTe¡
;

167 } 
	`com·»AndSw­
(
v®
, v®-1, &
ÿsTe¡
) != 0);

169 
št64_t
 
wv®
;

171 
wv®
 = 
wideCasTe¡
;

172 } 
	`com·»AndSw­Wide
(
wv®
,

173 
wv®
 + 0x0000002000000001LL, &
wideCasTe¡
) != 0);

175 
wv®
 = 
wideCasTe¡
;

176 } 
	`com·»AndSw­Wide
(
wv®
,

177 
wv®
 - 0x0000002000000001LL, &
wideCasTe¡
) != 0);

180 
	}
}

185 * 
	$©omicTe¡
(* 
¬g
)

187 
	`±h»ad_mu‹x_lock
(&
wa™Lock
);

188 
th»adsS¹ed
++;

189 
	`±h»ad_cÚd_wa™
(&
wa™CÚd
, &
wa™Lock
);

190 
	`±h»ad_mu‹x_uÆock
(&
wa™Lock
);

192 
	`doAtomicTe¡
((è
¬g
);

194  
NULL
;

195 
	}
}

198 
št64_t
 
	$‹¡AtomicS³edSub
(
»³©CouÁ
)

200 
v®ue
 = 7;

201 * 
v®uePŒ
 = &
v®ue
;

202 
št64_t
 
¡¬t
, 
’d
;

203 
i
;

205 
¡¬t
 = 
	`g‘R–©iveTimeN£c
();

207 
i
 = 
»³©CouÁ
 / 10; i != 0; i--) {

208 ià(
USE_ATOMIC
) {

210 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

211 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

212 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

213 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

214 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

215 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

216 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

217 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

218 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

219 
	`ªdroid_©omic_»Ëa£_ÿs
(7, 7, 
v®uePŒ
);

222 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

223 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

224 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

225 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

226 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

227 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

228 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

229 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

230 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

231 
	`com·»AndSw­
(7, 7, 
v®uePŒ
);

235 
’d
 = 
	`g‘R–©iveTimeN£c
();

237 
	`dvmF´štf
(
¡dout
, ".");

238 
	`fæush
(
¡dout
);

239  
’d
 - 
¡¬t
;

240 
	}
}

242 
	$‹¡AtomicS³ed
()

244 cÚ¡ 
kI‹¿tiÚs
 = 10;

245 cÚ¡ 
kR•—tCouÁ
 = 5 * 1000 * 1000;

246 cÚ¡ 
kD–ay
 = 50 * 1000;

247 
št64_t
 
»suÉs
[
kI‹¿tiÚs
];

248 
i
;

250 
i
 = 0; i < 
kI‹¿tiÚs
; i++) {

251 
»suÉs
[
i
] = 
	`‹¡AtomicS³edSub
(
kR•—tCouÁ
);

252 
	`u¦“p
(
kD–ay
);

255 
	`dvmF´štf
(
¡dout
, "\n");

256 
	`dvmF´štf
(
¡dout
, "%s speedest„esults (%d…er iteration):\n",

257 
USE_ATOMIC
 ? "Atomic" : "NÚ-©omic", 
kR•—tCouÁ
);

258 
i
 = 0; i < 
kI‹¿tiÚs
; i++) {

259 
	`dvmF´štf
(
¡dout
,

260 " %2d: %.3âs\n", 
i
, (è
»suÉs
[i] / 
kR•—tCouÁ
);

262 
	}
}

267 
boŞ
 
	$dvmTe¡AtomicS³ed
()

269 
±h»ad_t
 
th»ads
[
THREAD_COUNT
];

270 *(*
¡¬tRoutše
)(*èğ
©omicTe¡
;

271 
št64_t
 
¡¬tWh’
, 
’dWh’
;

273 #ià
	`defšed
(
__ARM_ARCH__
)

274 
	`dvmF´štf
(
¡dout
, "__ARM_ARCH__ i %d\n", 
__ARM_ARCH__
);

276 #ià
	`defšed
(
ANDROID_SMP
)

277 
	`dvmF´štf
(
¡dout
, "ANDROID_SMP i %d\n", 
ANDROID_SMP
);

279 
	`dvmF´štf
(
¡dout
, "Creatinghreads\n");

281 
i
;

282 
i
 = 0; i < 
THREAD_COUNT
; i++) {

283 * 
¬g
 = (*è
i
;

284 ià(
	`±h»ad_ü—‹
(&
th»ads
[
i
], 
NULL
, 
¡¬tRoutše
, 
¬g
) != 0) {

285 
	`dvmF´štf
(
¡d”r
, "thread create failed\n");

291 
	`±h»ad_mu‹x_lock
(&
wa™Lock
);

292 ià(
th»adsS¹ed
 =ğ
THREAD_COUNT
) {

293 
	`dvmF´štf
(
¡dout
, "Startingest\n");

294 
¡¬tWh’
 = 
	`g‘R–©iveTimeN£c
();

295 
	`±h»ad_cÚd_brßdÿ¡
(&
wa™CÚd
);

296 
	`±h»ad_mu‹x_uÆock
(&
wa™Lock
);

299 
	`±h»ad_mu‹x_uÆock
(&
wa™Lock
);

300 
	`u¦“p
(100000);

303 
i
 = 0; i < 
THREAD_COUNT
; i++) {

304 * 
»tv®
;

305 ià(
	`±h»ad_još
(
th»ads
[
i
], &
»tv®
) != 0) {

306 
	`dvmF´štf
(
¡d”r
, "th»ad još (%dèçed\n", 
i
);

310 
’dWh’
 = 
	`g‘R–©iveTimeN£c
();

311 
	`dvmF´štf
(
¡dout
, "Allhreads stopped,ime is %.6fms\n",

312 (
’dWh’
 - 
¡¬tWh’
) / 1000000.0);

323 
	`dvmF´štf
(
¡dout
, "šcTe¡ = %d\n", 
šcTe¡
);

324 
	`dvmF´štf
(
¡dout
, "decTe¡ = %d\n", 
decTe¡
);

325 
	`dvmF´štf
(
¡dout
, "addTe¡ = %d\n", 
addTe¡
);

326 
	`dvmF´štf
(
¡dout
, "ÿsTe¡ = %d\n", 
ÿsTe¡
);

327 
	`dvmF´štf
(
¡dout
, "wideCasTe¡ = 0x%Îx\n", 
wideCasTe¡
);

330 
¡¬tWh’
 = 
	`g‘R–©iveTimeN£c
();

331 
i
 = 0; i < 
THREAD_COUNT
; i++) {

332 
	`doAtomicTe¡
(
i
);

334 
’dWh’
 = 
	`g‘R–©iveTimeN£c
();

335 
	`dvmF´štf
(
¡dout
, "Same iterations done serially:ime is %.6fms\n",

336 (
’dWh’
 - 
¡¬tWh’
) / 1000000.0);

342 
ªdTe¡
 = 0xffd7fa96;

343 
ÜTe¡
 = 0x122221ff;

344 
	`ªdroid_©omic_ªd
(0xfffdaf96, &
ªdTe¡
);

345 
	`ªdroid_©omic_Ü
(0xd—«b00, &
ÜTe¡
);

346 ià(
	`ªdroid_©omic_»Ëa£_ÿs
(
çšgCasTe¡
+1, failingCasTest-1,

347 &
çšgCasTe¡
) == 0)

348 
	`dvmF´štf
(
¡dout
, "failingest did‚ot fail!\n");

350 
	`dvmF´štf
(
¡dout
, "ªdTe¡ = %#x\n", 
ªdTe¡
);

351 
	`dvmF´štf
(
¡dout
, "ÜTe¡ = %#x\n", 
ÜTe¡
);

352 
	`dvmF´štf
(
¡dout
, "çšgCasTe¡ = %d\n", 
çšgCasTe¡
);

354 #ifdeà
TEST_BIONIC


358 
´ev
;

359 
‹¡”
 = 7;

360 
´ev
 = 
	`__©omic_šc
(&
‹¡”
);

361 
	`__©omic_šc
(&
‹¡”
);

362 
	`__©omic_šc
(&
‹¡”
);

363 
	`dvmF´štf
(
¡dout
, "biÚiø3 inc: %d -> %d\n", 
´ev
, 
‹¡”
);

364 
´ev
 = 
	`__©omic_dec
(&
‹¡”
);

365 
	`__©omic_dec
(&
‹¡”
);

366 
	`__©omic_dec
(&
‹¡”
);

367 
	`dvmF´štf
(
¡dout
, "biÚiø3 dec: %d -> %d\n", 
´ev
, 
‹¡”
);

368 
´ev
 = 
	`__©omic_sw­
(27, &
‹¡”
);

369 
	`dvmF´štf
(
¡dout
, "biÚiøsw­: %d -> %d\n", 
´ev
, 
‹¡”
);

370 
sw­ok
 = 
	`__©omic_cmpxchg
(27, 72, &
‹¡”
);

371 
	`dvmF´štf
(
¡dout
, "biÚiøcmpxchg: %d (%d)\n", 
‹¡”
, 
sw­ok
);

374 
	`‹¡AtomicS³ed
();

377 
	}
}

	@vm/test/Test.h

20 #iâdeà
DALVIK_TEST_TEST_H_


21 
	#DALVIK_TEST_TEST_H_


	)

23 
boŞ
 
dvmTe¡Hash
();

24 
boŞ
 
dvmTe¡AtomicS³ed
();

25 
boŞ
 
dvmTe¡IndœeùRefTabË
();

	@vm/test/TestHash.cpp

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

24 #iâdeà
NDEBUG


26 
	#kNumTe¡EÁr›s
 14

	)

31 
	$´štFunc
(* 
d©a
, * 
¬g
)

36 * 
couÁ
 = (*è
¬g
;

37 (*
couÁ
)++;

39 
	}
}

40 
	$dumpFÜ—ch
(
HashTabË
* 
pTab
)

42 
couÁ
 = 0;

45 
	`dvmHashFÜ—ch
(
pTab
, 
´štFunc
, &
couÁ
);

46 ià(
couÁ
 !ğ
kNumTe¡EÁr›s
) {

47 
	`ALOGE
("TestHash foreachest failed");

48 
	`as£¹
(
çl£
);

50 
	}
}

55 
	$dumpI‹¿tÜ
(
HashTabË
* 
pTab
)

57 
couÁ
 = 0;

60 
HashI‹r
 
™”
;

61 
	`dvmHashI‹rBegš
(
pTab
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

62 
	`dvmHashI‹rNext
(&
™”
))

67 
couÁ
++;

69 ià(
couÁ
 !ğ
kNumTe¡EÁr›s
) {

70 
	`ALOGE
("TestHash iteratorest failed");

71 
	`as£¹
(
çl£
);

73 
	}
}

78 
boŞ
 
	$dvmTe¡Hash
()

80 
HashTabË
* 
pTab
;

81 
tmpSŒ
[64];

82 cÚ¡ * 
¡r
;

83 
u4
 
hash
;

84 
i
;

86 
	`ALOGV
("TestHash BEGIN");

88 
pTab
 = 
	`dvmHashTabËC»©e
(
	`dvmHashSize
(12), 
ä“
);

89 ià(
pTab
 =ğ
NULL
)

90  
çl£
;

92 
	`dvmHashTabËLock
(
pTab
);

95 
i
 = 0; i < 
kNumTe¡EÁr›s
; i++) {

96 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

97 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

98 
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
(
tmpSŒ
),

99 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

102 
	`dvmHashTabËUÆock
(
pTab
);

105 
i
 = 0; i < 
kNumTe¡EÁr›s
; i++) {

106 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

107 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

108 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
tmpSŒ
,

109 (
HashCom·»Func
è
¡rcmp
, 
çl£
);

110 ià(
¡r
 =ğ
NULL
) {

111 
	`ALOGE
("Te¡Hash: fau»: could‚Ù fšd '%s'", 
tmpSŒ
);

117 
	`¥rštf
(
tmpSŒ
, "entry %d", 17);

118 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

119 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
tmpSŒ
,

120 (
HashCom·»Func
è
¡rcmp
, 
çl£
);

121 ià(
¡r
 =ğ
NULL
) {

124 
	`ALOGE
("TestHash found‚onexistent string (improper‡dd?)");

127 
	`dumpFÜ—ch
(
pTab
);

128 
	`dumpI‹¿tÜ
(
pTab
);

131 
	`dvmHashTabËF»e
(
pTab
);

137 
pTab
 = 
	`dvmHashTabËC»©e
(
	`dvmHashSize
(2), 
ä“
);

138 ià(
pTab
 =ğ
NULL
)

139  
çl£
;

141 
hash
 = 0;

144 cÚ¡ * 
¡r1
;

145 
¡r1
 = (*è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
("one"),

146 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

147 
	`as£¹
(
¡r1
 !ğ
NULL
);

148 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
("two"),

149 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

152 ià(!
	`dvmHashTabËRemove
(
pTab
, 
hash
, (*)
¡r1
))

153 
	`ALOGE
("TestHash failedo delete item");

155 
	`ä“
((*)
¡r1
);

158 
couÁ
 = 0;

159 
HashI‹r
 
™”
;

160 
	`dvmHashI‹rBegš
(
pTab
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

161 
	`dvmHashI‹rNext
(&
™”
))

163 
couÁ
++;

165 ià(
couÁ
 != 1) {

166 
	`ALOGE
("Te¡Hash wrÚg‚umb” oà’Œ› (%d)", 
couÁ
);

170 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, (*)"one",

171 (
HashCom·»Func
è
¡rcmp
,
çl£
);

172 ià(
¡r
 !ğ
NULL
)

173 
	`ALOGE
("TestHash deletedƒntry has„eturned!");

174 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, (*)"two",

175 (
HashCom·»Func
è
¡rcmp
,
çl£
);

176 ià(
¡r
 =ğ
NULL
)

177 
	`ALOGE
("TestHashƒntry vanished");

180 
i
 = 0; i < 20; i++) {

181 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

182 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
(
tmpSŒ
),

183 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

184 
	`as£¹
(
¡r
 !ğ
NULL
);

187 
	`dvmHashTabËF»e
(
pTab
);

188 
	`ALOGV
("TestHash END");

190  
Œue
;

191 
	}
}

	@vm/test/TestIndirectRefTable.cpp

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

23 
	~<sys/time.h
>

25 #iâdeà
NDEBUG


27 
	#DBUG_MSG
 
ALOGI


	)

29 şas 
	cStİw©ch
 {

30 
	mpublic
:

31 
	$Stİw©ch
() {

32 
	`»£t
();

35 
	$»£t
() {

36 
¡¬t_
 = 
	`now
();

37 
	}
}

39 
	$–­£dSecÚds
() {

40  (
	`now
(è- 
¡¬t_
) * 0.000001f;

41 
	}
}

43 
	g´iv©e
:

44 
u8
 
¡¬t_
;

46 
u8
 
	$now
() {

47 #ifdeà
HAVE_POSIX_CLOCKS


48 
time¥ec
 
tm
;

49 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
tm
);

50  
tm
.
tv_£c
 * 1000000LL +m.
tv_n£c
 / 1000;

52 
timev®
 
tv
;

53 
	`g‘timeofday
(&
tv
, 
NULL
);

54  
tv
.
tv_£c
 * 1000000LL +v.
tv_u£c
;

56 
	}
}

62 
boŞ
 
	$basicTe¡
()

64 cÚ¡ 
kTabËMax
 = 20;

65 
IndœeùRefTabË
 
œt
;

66 
IndœeùRef
 
œef0
, 
œef1
, 
œef2
, 
œef3
;

67 
IndœeùRef
 
mªyRefs
[
kTabËMax
];

68 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏss
("Ljava/Ïng/Objeù;", 
NULL
);

69 
Objeù
* 
obj0
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

70 
Objeù
* 
obj1
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

71 
Objeù
* 
obj2
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

72 
Objeù
* 
obj3
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

73 cÚ¡ 
u4
 
cook›
 = 
IRT_FIRST_SEGMENT
;

74 
boŞ
 
»suÉ
 = 
çl£
;

76 ià(!
œt
.
	`š™
(
kTabËMax
/2, kTabËMax, 
kIndœeùKšdGlob®
)) {

77  
çl£
;

80 
œef0
 = (
IndœeùRef
) 0x11110;

81 ià(
œt
.
	`»move
(
cook›
, 
œef0
)) {

82 
	`ALOGE
("unexpectedly successful„emoval");

83 
ba
;

89 
	`DBUG_MSG
("+++ START fifo\n");

90 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

91 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

92 
œef2
 = 
œt
.
	`add
(
cook›
, 
obj2
);

93 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

94 
	`ALOGE
("trivial‡dd1 failed");

95 
ba
;

98 ià(
œt
.
	`g‘
(
œef0
è!ğ
obj0
 ||

99 
œt
.
	`g‘
(
œef1
è!ğ
obj1
 ||

100 
œt
.
	`g‘
(
œef2
è!ğ
obj2
) {

101 
	`ALOGE
("objects don't matchƒxpected values %p %p %p vs. %p %p %p",

102 
œt
.
	`g‘
(
œef0
), i¹.g‘(
œef1
), i¹.g‘(
œef2
),

103 
obj0
, 
obj1
, 
obj2
);

104 
ba
;

106 
	`DBUG_MSG
("+++ obj1=%°--> i»f1=%p\n", 
obj1
, 
œef1
);

109 ià(!
œt
.
	`»move
(
cook›
, 
œef0
) ||

110 !
œt
.
	`»move
(
cook›
, 
œef1
) ||

111 !
œt
.
	`»move
(
cook›
, 
œef2
))

113 
	`ALOGE
("fifo deletion failed");

114 
ba
;

118 ià(
œt
.
	`ÿ·c™y
() != 0) {

119 
	`ALOGE
("fifo del‚otƒmpty");

120 
ba
;

124 ià(
œt
.
	`g‘
(
œef0
è!ğ
kInv®idIndœeùRefObjeù
) {

125 
	`ALOGE
("staleƒntry get succeeded unexpectedly");

126 
ba
;

132 
	`DBUG_MSG
("+++ START†ifo\n");

133 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

134 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

135 
œef2
 = 
œt
.
	`add
(
cook›
, 
obj2
);

136 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

137 
	`ALOGE
("trivial‡dd2 failed");

138 
ba
;

141 ià(!
œt
.
	`»move
(
cook›
, 
œef2
) ||

142 !
œt
.
	`»move
(
cook›
, 
œef1
) ||

143 !
œt
.
	`»move
(
cook›
, 
œef0
))

145 
	`ALOGE
("lifo deletion failed");

146 
ba
;

150 ià(
œt
.
	`ÿ·c™y
() != 0) {

151 
	`ALOGE
("lifo del‚otƒmpty");

152 
ba
;

159 
	`DBUG_MSG
("+++ START unorder\n");

160 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

161 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

162 
œef2
 = 
œt
.
	`add
(
cook›
, 
obj2
);

163 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

164 
	`ALOGE
("trivial‡dd3 failed");

165 
ba
;

168 ià(
œt
.
	`ÿ·c™y
() != 3) {

169 
	`ALOGE
("ex³ùed 3ƒÁr›s, found %d", 
œt
.
	`ÿ·c™y
());

170 
ba
;

173 ià(!
œt
.
	`»move
(
cook›
, 
œef1
) || irt.remove(cookie, iref1)) {

174 
	`ALOGE
("unorder deletion1 failed");

175 
ba
;

179 ià(
œt
.
	`g‘
(
œef1
è!ğ
kInv®idIndœeùRefObjeù
) {

180 
	`ALOGE
("hole get succeeded unexpectedly");

181 
ba
;

184 ià(!
œt
.
	`»move
(
cook›
, 
œef2
è|| !œt.»move(cook›, 
œef0
)) {

185 
	`ALOGE
("unorder deletion2 failed");

186 
ba
;

190 ià(
œt
.
	`ÿ·c™y
() != 0) {

191 
	`ALOGE
("unorder del‚otƒmpty");

192 
ba
;

200 
	`DBUG_MSG
("+++ START hole fill\n");

201 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

202 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

203 
œef2
 = 
œt
.
	`add
(
cook›
, 
obj2
);

204 
œef3
 = 
œt
.
	`add
(
cook›
, 
obj3
);

205 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 =ğNULL || 
œef3
 == NULL) {

206 
	`ALOGE
("trivial‡dd4 failed");

207 
ba
;

209 ià(!
œt
.
	`»move
(
cook›
, 
œef1
)) {

210 
	`ALOGE
("remove 1 of 4 failed");

211 
ba
;

213 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

214 ià(
œt
.
	`ÿ·c™y
() != 4) {

215 
	`ALOGE
("hole‚ot filled");

216 
ba
;

218 ià(!
œt
.
	`»move
(
cook›
, 
œef1
è|| !œt.»move(cook›, 
œef3
)) {

219 
	`ALOGE
("remove 1/3 failed");

220 
ba
;

222 ià(
œt
.
	`ÿ·c™y
() != 3) {

223 
	`ALOGE
("should be 3‡fterwo deletions");

224 
ba
;

226 ià(!
œt
.
	`»move
(
cook›
, 
œef2
è|| !œt.»move(cook›, 
œef0
)) {

227 
	`ALOGE
("remove 2/0 failed");

228 
ba
;

230 ià(
œt
.
	`ÿ·c™y
() != 0) {

231 
	`ALOGE
("notƒmpty‡fter split„emove");

232 
ba
;

240 
	`DBUG_MSG
("+++ START switched\n");

241 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

242 
œt
.
	`»move
(
cook›
, 
œef0
);

243 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj1
);

244 ià(
œt
.
	`»move
(
cook›
, 
œef0
)) {

245 
	`ALOGE
("mism©ched d– sucûeded (%°v %p)", 
œef0
, 
œef1
);

246 
ba
;

248 ià(!
œt
.
	`»move
(
cook›
, 
œef1
)) {

249 
	`ALOGE
("switched del failed");

250 
ba
;

252 ià(
œt
.
	`ÿ·c™y
() != 0) {

253 
	`ALOGE
("switching del‚otƒmpty");

254 
ba
;

261 
	`DBUG_MSG
("+++ START switched same object\n");

262 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

263 
œt
.
	`»move
(
cook›
, 
œef0
);

264 
œef1
 = 
œt
.
	`add
(
cook›
, 
obj0
);

265 ià(
œef0
 !ğ
œef1
) {

267 ià(
œt
.
	`»move
(
cook›
, 
œef0
)) {

268 
	`ALOGE
("‹mpÜ® d– sucûeded (%°v %p)", 
œef0
, 
œef1
);

269 
ba
;

272 ià(!
œt
.
	`»move
(
cook›
, 
œef1
)) {

273 
	`ALOGE
("temporal cleanup failed");

274 
ba
;

276 ià(
œt
.
	`ÿ·c™y
() != 0) {

277 
	`ALOGE
("temporal del‚otƒmpty");

278 
ba
;

281 
	`DBUG_MSG
("+++ START‚ull†ookup\n");

282 ià(
œt
.
	`g‘
(
NULL
è!ğ
kInv®idIndœeùRefObjeù
) {

283 
	`ALOGE
("null†ookup succeeded");

284 
ba
;

287 
	`DBUG_MSG
("+++ START stale†ookup\n");

288 
œef0
 = 
œt
.
	`add
(
cook›
, 
obj0
);

289 
œt
.
	`»move
(
cook›
, 
œef0
);

290 ià(
œt
.
	`g‘
(
œef0
è!ğ
kInv®idIndœeùRefObjeù
) {

291 
	`ALOGE
("stale†ookup succeeded");

292 
ba
;

298 
	`DBUG_MSG
("+++ START overflow\n");

299 
i
;

300 
i
 = 0; i < 
kTabËMax
; i++) {

301 
mªyRefs
[
i
] = 
œt
.
	`add
(
cook›
, 
obj0
);

302 ià(
mªyRefs
[
i
] =ğ
NULL
) {

303 
	`ALOGE
("Faed‡ddšg %d oà%d", 
i
, 
kTabËMax
);

304 
ba
;

307 ià(
œt
.
	`add
(
cook›
, 
obj0
è!ğ
NULL
) {

308 
	`ALOGE
("Table overflow succeeded");

309 
ba
;

311 ià(
œt
.
	`ÿ·c™y
(è!ğ(
size_t
)
kTabËMax
) {

312 
	`ALOGE
("Ex³ùed %dƒÁr›s, found %d", 
kTabËMax
, 
œt
.
	`ÿ·c™y
());

313 
ba
;

315 
œt
.
	`dump
("table with 20ƒntries,‡ll filled");

316 
i
 = 0; i < 
kTabËMax
-1; i++) {

317 ià(!
œt
.
	`»move
(
cook›
, 
mªyRefs
[
i
])) {

318 
	`ALOGE
("muÉi-»movçed‡ˆ%d", 
i
);

319 
ba
;

322 
œt
.
	`dump
("table with 20ƒntries, 19 ofhem holes");

324 ià(
œt
.
	`ÿ·c™y
(è!ğ(
size_t
)
kTabËMax
) {

325 
	`ALOGE
("Expected %dƒntries (with holes), found %d",

326 
kTabËMax
, 
œt
.
	`ÿ·c™y
());

327 
ba
;

329 ià(!
œt
.
	`»move
(
cook›
, 
mªyRefs
[
kTabËMax
-1])) {

330 
	`ALOGE
("multi-remove final failed");

331 
ba
;

333 ià(
œt
.
	`ÿ·c™y
() != 0) {

334 
	`ALOGE
("multi-del‚otƒmpty");

335 
ba
;

339 
	`DBUG_MSG
("+++ basicest complete\n");

340 
»suÉ
 = 
Œue
;

342 
ba
:

343 
œt
.
	`de¡roy
();

344  
»suÉ
;

345 
	}
}

347 
boŞ
 
	$³rfÜmªûTe¡
()

349 cÚ¡ 
kTabËMax
 = 100;

350 
IndœeùRefTabË
 
œt
;

351 
IndœeùRef
 
mªyRefs
[
kTabËMax
];

352 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏss
("Ljava/Ïng/Objeù;", 
NULL
);

353 
Objeù
* 
obj0
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

354 cÚ¡ 
u4
 
cook›
 = 
IRT_FIRST_SEGMENT
;

355 cÚ¡ 
kLoİs
 = 100000;

356 
Stİw©ch
 
¡İw©ch
;

358 
	`DBUG_MSG
("+++ START…erformance\n");

360 ià(!
œt
.
	`š™
(
kTabËMax
, kTabËMax, 
kIndœeùKšdGlob®
)) {

361  
çl£
;

364 
¡İw©ch
.
	`»£t
();

365 
loİ
 = 0;†oİ < 
kLoİs
;†oop++) {

366 
i
 = 0; i < 
kTabËMax
; i++) {

367 
mªyRefs
[
i
] = 
œt
.
	`add
(
cook›
, 
obj0
);

369 
i
 = 0; i < 
kTabËMax
; i++) {

370 
œt
.
	`»move
(
cook›
, 
mªyRefs
[
i
]);

373 
	`DBUG_MSG
("Add/remove %d objects FIFO order, %d iterations, %0.3fms / iteration",

374 
kTabËMax
, 
kLoİs
, 
¡İw©ch
.
	`–­£dSecÚds
() * 1000 / kLoops);

376 
¡İw©ch
.
	`»£t
();

377 
loİ
 = 0;†oİ < 
kLoİs
;†oop++) {

378 
i
 = 0; i < 
kTabËMax
; i++) {

379 
mªyRefs
[
i
] = 
œt
.
	`add
(
cook›
, 
obj0
);

381 
i
 = 
kTabËMax
; i-- > 0; ) {

382 
œt
.
	`»move
(
cook›
, 
mªyRefs
[
i
]);

385 
	`DBUG_MSG
("Add/remove %d objects LIFO order, %d iterations, %0.3fms / iteration",

386 
kTabËMax
, 
kLoİs
, 
¡İw©ch
.
	`–­£dSecÚds
() * 1000 / kLoops);

388 
i
 = 0; i < 
kTabËMax
; i++) {

389 
mªyRefs
[
i
] = 
œt
.
	`add
(
cook›
, 
obj0
);

391 
¡İw©ch
.
	`»£t
();

392 
loİ
 = 0;†oİ < 
kLoİs
;†oop++) {

393 
i
 = 0; i < 
kTabËMax
; i++) {

394 
œt
.
	`g‘
(
mªyRefs
[
i
]);

397 
	`DBUG_MSG
("Get %d objects, %d iterations, %0.3fms / iteration",

398 
kTabËMax
, 
kLoİs
, 
¡İw©ch
.
	`–­£dSecÚds
() * 1000 / kLoops);

399 
i
 = 
kTabËMax
; i-- > 0; ) {

400 
œt
.
	`»move
(
cook›
, 
mªyRefs
[
i
]);

403 
œt
.
	`de¡roy
();

404  
Œue
;

405 
	}
}

410 
boŞ
 
	$dvmTe¡IndœeùRefTabË
()

412 ià(!
	`basicTe¡
()) {

413 
	`ALOGE
("IRT basicest failed");

414  
çl£
;

417 ià(!
	`³rfÜmªûTe¡
()) {

418 
	`ALOGE
("IRT…erformanceest failed");

419  
çl£
;

422  
Œue
;

423 
	}
}

	@/usr/include/arpa/inet.h

18 #iâdeà
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<Ãtš‘/š.h
>

25 #iâdeà
__sockËn_t_defšed


26 
__sockËn_t
 
	tsockËn_t
;

27 
	#__sockËn_t_defšed


	)

30 
__BEGIN_DECLS


34 
š_addr_t
 
	$š‘_addr
 (cÚ¡ *
__ı
è
__THROW
;

37 
š_addr_t
 
	$š‘_Êaof
 (
š_addr
 
__š
è
__THROW
;

41 
š_addr
 
	$š‘_mak—ddr
 (
š_addr_t
 
__Ãt
, in_addr_ˆ
__ho¡
)

42 
__THROW
;

45 
š_addr_t
 
	$š‘_Ãtof
 (
š_addr
 
__š
è
__THROW
;

49 
š_addr_t
 
	$š‘_ÃtwÜk
 (cÚ¡ *
__ı
è
__THROW
;

53 *
	$š‘_Áß
 (
š_addr
 
__š
è
__THROW
;

58 
	$š‘_±Ú
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

59 *
__»¡riù
 
__buf
è
__THROW
;

64 cÚ¡ *
	$š‘_Áİ
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

65 *
__»¡riù
 
__buf
, 
sockËn_t
 
__Ën
)

66 
__THROW
;

70 #ifdeà
__USE_MISC


73 
	$š‘_©Ú
 (cÚ¡ *
__ı
, 
š_addr
 *
__šp
è
__THROW
;

77 *
	$š‘_Ã
 (
š_addr_t
 
__Ãt
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

82 *
	$š‘_Ãt_Áİ
 (
__af
, cÚ¡ *
__ı
, 
__b™s
,

83 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

88 
	$š‘_Ãt_±Ú
 (
__af
, cÚ¡ *
__ı
,

89 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

94 
	$š‘_n§p_addr
 (cÚ¡ *
__ı
,

95 *
__buf
, 
__Ën
è
__THROW
;

99 *
	$š‘_n§p_Áß
 (
__Ën
, cÚ¡ *
__ı
,

100 *
__buf
è
__THROW
;

103 
__END_DECLS


	@/usr/include/assert.h

23 #ifdef 
_ASSERT_H


25 #undeà
_ASSERT_H


26 #undeà
as£¹


27 #undeà
__ASSERT_VOID_CAST


29 #ifdef 
__USE_GNU


30 #undeà
as£¹_³¼Ü


35 
	#_ASSERT_H
 1

	)

36 
	~<ã©u»s.h
>

38 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

39 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

41 
	#__ASSERT_VOID_CAST
 ()

	)

49 #ifdef 
NDEBUG


51 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

59 #ifdef 
__USE_GNU


60 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

65 #iâdeà
_ASSERT_H_DECLS


66 
	#_ASSERT_H_DECLS


	)

67 
__BEGIN_DECLS


70 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

71 
__lše
, cÚ¡ *
__funùiÚ
)

72 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

75 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

76 
__lše
, cÚ¡ *
__funùiÚ
)

77 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

82 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

83 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

86 
__END_DECLS


89 
	#as£¹
(
ex´
) \

90 ((
ex´
) \

91 ? 
	`__ASSERT_VOID_CAST
 (0) \

92 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

94 #ifdef 
__USE_GNU


95 
	#as£¹_³¼Ü
(
”ºum
) \

96 (!(
”ºum
) \

97 ? 
	`__ASSERT_VOID_CAST
 (0) \

98 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

106 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

107 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

109 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

110 
	#__ASSERT_FUNCTION
 
__func__


	)

112 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

119 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


121 #undeà
¡©ic_as£¹


122 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/ctype.h

23 #iâdef 
_CTYPE_H


24 
	#_CTYPE_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 
	g__BEGIN_DECLS


31 #iâdeà
_ISb™


40 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#_ISb™
(
b™
è(1 << (b™))

	)

44 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

49 
	m_ISuµ”
 = 
_ISb™
 (0),

50 
	m_ISlow”
 = 
_ISb™
 (1),

51 
	m_IS®pha
 = 
_ISb™
 (2),

52 
	m_ISdig™
 = 
_ISb™
 (3),

53 
	m_ISxdig™
 = 
_ISb™
 (4),

54 
	m_IS¥aû
 = 
_ISb™
 (5),

55 
	m_IS´št
 = 
_ISb™
 (6),

56 
	m_ISg¿ph
 = 
_ISb™
 (7),

57 
	m_ISbÏnk
 = 
_ISb™
 (8),

58 
	m_ISúŒl
 = 
_ISb™
 (9),

59 
	m_ISpunù
 = 
_ISb™
 (10),

60 
	m_IS®num
 = 
_ISb™
 (11)

80 cÚ¡ **
	$__ùy³_b_loc
 ()

81 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

82 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

83 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

84 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

85 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

88 #iâdeà
__ılu¥lus


89 
	#__isùy³
(
c
, 
ty³
) \

90 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 #–ià
defšed
 
__USE_EXTERN_INLINES


92 
	#__isùy³_f
(
ty³
) \

93 
__ex‹º_šlše
 \

94 
is
##
	`ty³
 (
__c
è
__THROW
 \

96  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

97 
	}

	)
}

100 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

101 
	#__tßscii
(
c
è((cè& 0x7fè

	)

103 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

105 
__BEGIN_NAMESPACE_STD


111 
__exùy³
 (
i§Êum
);

112 
__exùy³
 (
i§Íha
);

113 
__exùy³
 (
isúŒl
);

114 
__exùy³
 (
isdig™
);

115 
__exùy³
 (
i¦ow”
);

116 
__exùy³
 (
isg¿ph
);

117 
__exùy³
 (
i¥ršt
);

118 
__exùy³
 (
i¥unù
);

119 
__exùy³
 (
is¥aû
);

120 
__exùy³
 (
isuµ”
);

121 
__exùy³
 (
isxdig™
);

125 
	$tŞow”
 (
__c
è
__THROW
;

128 
	$touµ”
 (
__c
è
__THROW
;

130 
__END_NAMESPACE_STD


134 #ifdef 
__USE_ISOC99


135 
__BEGIN_NAMESPACE_C99


137 
	`__exùy³
 (
isbÏnk
);

139 
__END_NAMESPACE_C99


142 #ifdeà
__USE_GNU


144 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

147 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


151 
	$i§scii
 (
__c
è
__THROW
;

155 
	$tßscii
 (
__c
è
__THROW
;

159 
	`__exùy³
 (
_touµ”
);

160 
	`__exùy³
 (
_tŞow”
);

164 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

165 (
__ex‹nsiÚ__
 \

166 ({ 
__»s
; \

167 ià( (
c
) > 1) \

169 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

171 
__c
 = (
c
); \

172 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

175 
__»s
 = 
f
 
¬gs
; \

178 
__»s
 = (
a
)[(è(
c
)]; \

179 
__»s
; 
	}
}))

	)

181 #ià!
defšed
 
__NO_CTYPE


182 #ifdeà
__isùy³_f


183 
	$__isùy³_f
 (
®num
)

184 
	$__isùy³_f
 (
®pha
)

185 
	$__isùy³_f
 (
úŒl
)

186 
	$__isùy³_f
 (
dig™
)

187 
	$__isùy³_f
 (
low”
)

188 
	$__isùy³_f
 (
g¿ph
)

189 
	$__isùy³_f
 (
´št
)

190 
	$__isùy³_f
 (
punù
)

191 
	$__isùy³_f
 (
¥aû
)

192 
	$__isùy³_f
 (
uµ”
)

193 
	$__isùy³_f
 (
xdig™
)

194 #ifdeà
__USE_ISOC99


195 
	$__isùy³_f
 (
bÏnk
)

197 #–ià
defšed
 
__isùy³


198 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

199 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

200 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

201 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

202 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

203 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

204 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

205 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

206 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

207 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

208 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

209 #ifdeà
__USE_ISOC99


210 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

214 #ifdeà
__USE_EXTERN_INLINES


215 
__ex‹º_šlše
 

216 
	`__NTH
 (
	$tŞow”
 (
__c
))

218  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

219 
	}
}

221 
__ex‹º_šlše
 

222 
__NTH
 (
	$touµ”
 (
__c
))

224  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

225 
	}
}

228 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


229 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

230 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

233 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


234 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

235 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

237 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

238 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

244 #ifdeà
__USE_XOPEN2K8


258 
	~<xloÿË.h
>

262 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

263 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

265 
	#__exùy³_l
(
Çme
) \

266 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

272 
__exùy³_l
 (
i§Êum_l
);

273 
__exùy³_l
 (
i§Íha_l
);

274 
__exùy³_l
 (
isúŒl_l
);

275 
__exùy³_l
 (
isdig™_l
);

276 
__exùy³_l
 (
i¦ow”_l
);

277 
__exùy³_l
 (
isg¿ph_l
);

278 
__exùy³_l
 (
i¥ršt_l
);

279 
__exùy³_l
 (
i¥unù_l
);

280 
__exùy³_l
 (
is¥aû_l
);

281 
__exùy³_l
 (
isuµ”_l
);

282 
__exùy³_l
 (
isxdig™_l
);

284 
__exùy³_l
 (
isbÏnk_l
);

288 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

289 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

293 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

295 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


296 
	#__tŞow”_l
(
c
, 
loÿË
) \

297 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

298 
	#__touµ”_l
(
c
, 
loÿË
) \

299 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

300 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

301 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

305 #iâdeà
__NO_CTYPE


306 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

307 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

308 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

309 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

310 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

311 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

312 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

313 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

314 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

315 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

316 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

318 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

320 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


321 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

322 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

325 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

326 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

327 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

328 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

329 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

330 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

331 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

332 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

333 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

334 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

335 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

337 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

339 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


340 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

341 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

348 
__END_DECLS


	@/usr/include/dirent.h

23 #iâdef 
_DIRENT_H


24 
	#_DIRENT_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ty³s.h
>

32 #ifdeà
__USE_XOPEN


33 #iâdeà
__šo_t_defšed


34 #iâdeà
__USE_FILE_OFFSET64


35 
__šo_t
 
	tšo_t
;

37 
__šo64_t
 
	tšo_t
;

39 
	#__šo_t_defšed


	)

41 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


42 
__šo64_t
 
	tšo64_t
;

43 
	#__šo64_t_defšed


	)

62 
	~<b™s/dœ’t.h
>

64 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
è&& !defšed 
d_f’o


65 
	#d_šo
 
d_f’o


	)

82 #ifdeà
_DIRENT_HAVE_D_NAMLEN


83 
	#_D_EXACT_NAMLEN
(
d
è((d)->
d_ÇmËn
)

	)

84 
	#_D_ALLOC_NAMLEN
(
d
è(
	`_D_EXACT_NAMLEN
 (dè+ 1)

	)

86 
	#_D_EXACT_NAMLEN
(
d
è(
	`¡¾’
 ((d)->
d_Çme
))

	)

87 #ifdeà
_DIRENT_HAVE_D_RECLEN


88 
	#_D_ALLOC_NAMLEN
(
d
è(((*è(dè+ (d)->
d_»ş’
è- &(d)->
d_Çme
[0])

	)

90 
	#_D_ALLOC_NAMLEN
(
d
è( (d)->
d_Çme
 > 1 ?  (d)->d_name : \

91 
	`_D_EXACT_NAMLEN
 (
d
è+ 1)

	)

96 #ifdeà
__USE_BSD


100 
	mDT_UNKNOWN
 = 0,

101 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

102 
	mDT_FIFO
 = 1,

103 
	#DT_FIFO
 
DT_FIFO


	)

104 
	mDT_CHR
 = 2,

105 
	#DT_CHR
 
DT_CHR


	)

106 
	mDT_DIR
 = 4,

107 
	#DT_DIR
 
DT_DIR


	)

108 
	mDT_BLK
 = 6,

109 
	#DT_BLK
 
DT_BLK


	)

110 
	mDT_REG
 = 8,

111 
	#DT_REG
 
DT_REG


	)

112 
	mDT_LNK
 = 10,

113 
	#DT_LNK
 
DT_LNK


	)

114 
	mDT_SOCK
 = 12,

115 
	#DT_SOCK
 
DT_SOCK


	)

116 
	mDT_WHT
 = 14

117 
	#DT_WHT
 
DT_WHT


	)

121 
	#IFTODT
(
mode
è(((modeè& 0170000è>> 12)

	)

122 
	#DTTOIF
(
dœty³
è((dœty³è<< 12)

	)

128 
__dœ¡»am
 
	tDIR
;

135 
DIR
 *
	$İ’dœ
 (cÚ¡ *
__Çme
è
	`__nÚnuÎ
 ((1));

137 #ifdeà
__USE_XOPEN2K8


142 
DIR
 *
	`fdİ’dœ
 (
__fd
);

150 
	$şo£dœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

162 #iâdeà
__USE_FILE_OFFSET64


163 
dœ’t
 *
	$»addœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

165 #ifdeà
__REDIRECT


166 
dœ’t
 *
	`__REDIRECT
 (
»addœ
, (
DIR
 *
__dœp
), 
»addœ64
)

167 
	`__nÚnuÎ
 ((1));

169 
	#»addœ
 
»addœ64


	)

173 #ifdeà
__USE_LARGEFILE64


174 
dœ’t64
 *
	$»addœ64
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

177 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


183 #iâdeà
__USE_FILE_OFFSET64


184 
	$»addœ_r
 (
DIR
 *
__»¡riù
 
__dœp
,

185 
dœ’t
 *
__»¡riù
 
__’Œy
,

186 
dœ’t
 **
__»¡riù
 
__»suÉ
)

187 
	`__nÚnuÎ
 ((1, 2, 3));

189 #ifdeà
__REDIRECT


190 
	`__REDIRECT
 (
»addœ_r
,

191 (
DIR
 *
__»¡riù
 
__dœp
,

192 
dœ’t
 *
__»¡riù
 
__’Œy
,

193 
dœ’t
 **
__»¡riù
 
__»suÉ
),

194 
»addœ64_r
è
	`__nÚnuÎ
 ((1, 2, 3));

196 
	#»addœ_r
 
»addœ64_r


	)

200 #ifdeà
__USE_LARGEFILE64


201 
	$»addœ64_r
 (
DIR
 *
__»¡riù
 
__dœp
,

202 
dœ’t64
 *
__»¡riù
 
__’Œy
,

203 
dœ’t64
 **
__»¡riù
 
__»suÉ
)

204 
	`__nÚnuÎ
 ((1, 2, 3));

209 
	$»wšddœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

211 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


212 
	~<b™s/ty³s.h
>

215 
	$£ekdœ
 (
DIR
 *
__dœp
, 
__pos
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$‹Îdœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


224 
	$dœfd
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

226 #ià
defšed
 
__OPTIMIZE__
 && defšed 
_DIR_dœfd


227 
	#dœfd
(
dœp
è
	`_DIR_dœfd
 (dœp)

	)

230 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


231 #iâdeà
MAXNAMLEN


233 
	~<b™s/posix1_lim.h
>

236 #ifdeà
NAME_MAX


237 
	#MAXNAMLEN
 
NAME_MAX


	)

239 
	#MAXNAMLEN
 255

	)

244 
	#__Ãed_size_t


	)

245 
	~<¡ddef.h
>

254 #iâdeà
__USE_FILE_OFFSET64


255 
	`sÿndœ
 (cÚ¡ *
__»¡riù
 
__dœ
,

256 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

257 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

258 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

259 cÚ¡ 
dœ’t
 **))

260 
	`__nÚnuÎ
 ((1, 2));

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
sÿndœ
,

264 (cÚ¡ *
__»¡riù
 
__dœ
,

265 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

266 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

267 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

268 cÚ¡ 
dœ’t
 **)),

269 
sÿndœ64
è
	`__nÚnuÎ
 ((1, 2));

271 
	#sÿndœ
 
sÿndœ64


	)

275 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


278 
	`sÿndœ64
 (cÚ¡ *
__»¡riù
 
__dœ
,

279 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

280 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

281 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

282 cÚ¡ 
dœ’t64
 **))

283 
	`__nÚnuÎ
 ((1, 2));

286 #ifdeà
__USE_GNU


292 #iâdeà
__USE_FILE_OFFSET64


293 
	`sÿndœ©
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

294 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

295 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

296 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

297 cÚ¡ 
dœ’t
 **))

298 
	`__nÚnuÎ
 ((2, 3));

300 #ifdeà
__REDIRECT


301 
	`__REDIRECT
 (
sÿndœ©
,

302 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

303 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

304 (*
__£ËùÜ
è(cÚ¡ 
dœ’t
 *),

305 (*
__cmp
è(cÚ¡ 
dœ’t
 **,

306 cÚ¡ 
dœ’t
 **)),

307 
sÿndœ©64
è
	`__nÚnuÎ
 ((2, 3));

309 
	#sÿndœ©
 
sÿndœ©64


	)

315 
	`sÿndœ©64
 (
__dfd
, cÚ¡ *
__»¡riù
 
__dœ
,

316 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

317 (*
__£ËùÜ
è(cÚ¡ 
dœ’t64
 *),

318 (*
__cmp
è(cÚ¡ 
dœ’t64
 **,

319 cÚ¡ 
dœ’t64
 **))

320 
	`__nÚnuÎ
 ((2, 3));

324 #iâdeà
__USE_FILE_OFFSET64


325 
	$®phasÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

326 cÚ¡ 
dœ’t
 **
__e2
)

327 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

329 #ifdeà
__REDIRECT


330 
	`__REDIRECT_NTH
 (
®phasÜt
,

331 (cÚ¡ 
dœ’t
 **
__e1
,

332 cÚ¡ 
dœ’t
 **
__e2
),

333 
®phasÜt64
è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

335 
	#®phasÜt
 
®phasÜt64


	)

339 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


340 
	$®phasÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

341 cÚ¡ 
dœ’t64
 **
__e2
)

342 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

347 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


352 #iâdeà
__USE_FILE_OFFSET64


353 
__ssize_t
 
	$g‘dœ’Œ›s
 (
__fd
, *
__»¡riù
 
__buf
,

354 
size_t
 
__nby‹s
,

355 
__off_t
 *
__»¡riù
 
__ba£p
)

356 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

358 #ifdeà
__REDIRECT


359 
__ssize_t
 
	`__REDIRECT_NTH
 (
g‘dœ’Œ›s
,

360 (
__fd
, *
__»¡riù
 
__buf
,

361 
size_t
 
__nby‹s
,

362 
__off64_t
 *
__»¡riù
 
__ba£p
),

363 
g‘dœ’Œ›s64
è
	`__nÚnuÎ
 ((2, 4));

365 
	#g‘dœ’Œ›s
 
g‘dœ’Œ›s64


	)

369 #ifdeà
__USE_LARGEFILE64


370 
__ssize_t
 
	$g‘dœ’Œ›s64
 (
__fd
, *
__»¡riù
 
__buf
,

371 
size_t
 
__nby‹s
,

372 
__off64_t
 *
__»¡riù
 
__ba£p
)

373 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

377 #ifdeà
__USE_GNU


379 #iâdeà
__USE_FILE_OFFSET64


380 
	$v”siÚsÜt
 (cÚ¡ 
dœ’t
 **
__e1
,

381 cÚ¡ 
dœ’t
 **
__e2
)

382 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

384 #ifdeà
__REDIRECT


385 
	`__REDIRECT_NTH
 (
v”siÚsÜt
,

386 (cÚ¡ 
dœ’t
 **
__e1
,

387 cÚ¡ 
dœ’t
 **
__e2
),

388 
v”siÚsÜt64
)

389 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

391 
	#v”siÚsÜt
 
v”siÚsÜt64


	)

395 #ifdeà
__USE_LARGEFILE64


396 
	$v”siÚsÜt64
 (cÚ¡ 
dœ’t64
 **
__e1
,

397 cÚ¡ 
dœ’t64
 **
__e2
)

398 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

402 
__END_DECLS


	@/usr/include/dlfcn.h

20 #iâdef 
_DLFCN_H


21 
	#_DLFCN_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

28 
	~<b™s/dlfú.h
>

31 #ifdeà
__USE_GNU


36 
	#RTLD_NEXT
 ((*è-1l)

	)

41 
	#RTLD_DEFAULT
 ((*è0)

	)

45 
	tLmid_t
;

48 
	#LM_ID_BASE
 0

	)

49 
	#LM_ID_NEWLM
 -1

	)

53 
__BEGIN_DECLS


57 *
	$dlİ’
 (cÚ¡ *
__fe
, 
__mode
è
__THROW
;

61 
	$dlşo£
 (*
__hªdË
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 *
	$dlsym
 (*
__»¡riù
 
__hªdË
,

66 cÚ¡ *
__»¡riù
 
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((2));

68 #ifdeà
__USE_GNU


70 *
	$dlmİ’
 (
Lmid_t
 
__nsid
, cÚ¡ *
__fe
, 
__mode
è
__THROW
;

74 *
	$dlvsym
 (*
__»¡riù
 
__hªdË
,

75 cÚ¡ *
__»¡riù
 
__Çme
,

76 cÚ¡ *
__»¡riù
 
__v”siÚ
)

77 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

83 *
	$dË¼Ü
 (è
__THROW
;

86 #ifdeà
__USE_GNU


91 cÚ¡ *
dli_âame
;

92 *
dli_fba£
;

93 cÚ¡ *
dli_¢ame
;

94 *
dli_§ddr
;

95 } 
	tDl_šfo
;

99 
	$dÏddr
 (cÚ¡ *
__add»ss
, 
Dl_šfo
 *
__šfo
)

100 
__THROW
 
	`__nÚnuÎ
 ((2));

103 
	$dÏddr1
 (cÚ¡ *
__add»ss
, 
Dl_šfo
 *
__šfo
,

104 **
__exŒa_šfo
, 
__æags
è
__THROW
 
	`__nÚnuÎ
 ((2));

112 
RTLD_DL_SYMENT
 = 1,

115 
RTLD_DL_LINKMAP
 = 2

124 
	$dlšfo
 (*
__»¡riù
 
__hªdË
,

125 
__»que¡
, *
__»¡riù
 
__¬g
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

132 
RTLD_DI_LMID
 = 1,

136 
RTLD_DI_LINKMAP
 = 2,

138 
RTLD_DI_CONFIGADDR
 = 3,

145 
RTLD_DI_SERINFO
 = 4,

146 
RTLD_DI_SERINFOSIZE
 = 5,

150 
RTLD_DI_ORIGIN
 = 6,

152 
RTLD_DI_PROFILENAME
 = 7,

153 
RTLD_DI_PROFILEOUT
 = 8,

158 
RTLD_DI_TLS_MODID
 = 9,

164 
RTLD_DI_TLS_DATA
 = 10,

166 
RTLD_DI_MAX
 = 10

174 *
dls_Çme
;

175 
dls_æags
;

176 } 
	tDl_£½©h
;

182 
size_t
 
dls_size
;

183 
dls_út
;

184 
Dl_£½©h
 
dls_£½©h
[1];

185 } 
	tDl_£ršfo
;

189 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 #ià
__GLIBC_HAVE_LONG_LONG


74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

81 
	#htobe16
(
x
è(x)

	)

82 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

83 
	#be16toh
(
x
è(x)

	)

84 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

86 
	#htobe32
(
x
è(x)

	)

87 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

88 
	#be32toh
(
x
è(x)

	)

89 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

91 #ià
__GLIBC_HAVE_LONG_LONG


92 
	#htobe64
(
x
è(x)

	)

93 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

94 
	#be64toh
(
x
è(x)

	)

95 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/errno.h

22 #iâdef 
_ERRNO_H


26 #iâdef 
__Ãed_Em©h


27 
	#_ERRNO_H
 1

	)

28 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


35 
	~<b™s/”ºo.h
>

36 #undeà
__Ãed_Em©h


38 #ifdef 
_ERRNO_H


45 #iâdef 
”ºo


46 
”ºo
;

49 #ifdeà
__USE_GNU


54 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

58 
	g__END_DECLS


66 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


67 #iâdeà
__”rÜ_t_defšed


68 
	t”rÜ_t
;

69 
	#__”rÜ_t_defšed
 1

	)

71 #undeà
__Ãed_”rÜ_t


	@/usr/include/execinfo.h

18 #iâdeà
_EXECINFO_H


19 
	#_EXECINFO_H
 1

	)

21 
	~<ã©u»s.h
>

23 
__BEGIN_DECLS


27 
	$backŒaû
 (**
__¬¿y
, 
__size
è
	`__nÚnuÎ
 ((1));

32 **
	$backŒaû_symbŞs
 (*cÚ¡ *
__¬¿y
, 
__size
)

33 
__THROW
 
	`__nÚnuÎ
 ((1));

38 
	$backŒaû_symbŞs_fd
 (*cÚ¡ *
__¬¿y
, 
__size
, 
__fd
)

39 
__THROW
 
	`__nÚnuÎ
 ((1));

41 
__END_DECLS


	@/usr/include/fcntl.h

22 #iâdef 
_FCNTL_H


23 
	#_FCNTL_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

35 
	~<b™s/fú.h
>

40 #iâdeà
__mode_t_defšed


41 
__mode_t
 
	tmode_t
;

42 
	#__mode_t_defšed


	)

45 #iâdeà
__off_t_defšed


46 #iâdeà
__USE_FILE_OFFSET64


47 
__off_t
 
	toff_t
;

49 
__off64_t
 
	toff_t
;

51 
	#__off_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


55 
__off64_t
 
	toff64_t
;

56 
	#__off64_t_defšed


	)

59 #iâdeà
__pid_t_defšed


60 
__pid_t
 
	tpid_t
;

61 
	#__pid_t_defšed


	)

65 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


66 
	#__Ãed_time¥ec


	)

67 
	~<time.h
>

68 
	~<b™s/¡©.h
>

70 
	#S_IFMT
 
__S_IFMT


	)

71 
	#S_IFDIR
 
__S_IFDIR


	)

72 
	#S_IFCHR
 
__S_IFCHR


	)

73 
	#S_IFBLK
 
__S_IFBLK


	)

74 
	#S_IFREG
 
__S_IFREG


	)

75 #ifdeà
__S_IFIFO


76 
	#S_IFIFO
 
__S_IFIFO


	)

78 #ifdeà
__S_IFLNK


79 
	#S_IFLNK
 
__S_IFLNK


	)

81 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


82 
	#S_IFSOCK
 
__S_IFSOCK


	)

87 
	#S_ISUID
 
__S_ISUID


	)

88 
	#S_ISGID
 
__S_ISGID


	)

90 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


92 
	#S_ISVTX
 
__S_ISVTX


	)

95 
	#S_IRUSR
 
__S_IREAD


	)

96 
	#S_IWUSR
 
__S_IWRITE


	)

97 
	#S_IXUSR
 
__S_IEXEC


	)

99 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

101 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

102 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

103 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

105 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

107 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

108 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

109 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

111 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

114 #ifdef 
__USE_MISC


115 #iâdeà
R_OK


118 
	#R_OK
 4

	)

119 
	#W_OK
 2

	)

120 
	#X_OK
 1

	)

121 
	#F_OK
 0

	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#SEEK_SET
 0

	)

128 
	#SEEK_CUR
 1

	)

129 
	#SEEK_END
 2

	)

137 
fú
 (
__fd
, 
__cmd
, ...);

145 #iâdeà
__USE_FILE_OFFSET64


146 
	$İ’
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

148 #ifdeà
__REDIRECT


149 
	`__REDIRECT
 (
İ’
, (cÚ¡ *
__fe
, 
__oæag
, ...), 
İ’64
)

150 
	`__nÚnuÎ
 ((1));

152 
	#İ’
 
İ’64


	)

155 #ifdeà
__USE_LARGEFILE64


156 
	$İ’64
 (cÚ¡ *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

159 #ifdeà
__USE_ATFILE


169 #iâdeà
__USE_FILE_OFFSET64


170 
	$İ’©
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

171 
	`__nÚnuÎ
 ((2));

173 #ifdeà
__REDIRECT


174 
	`__REDIRECT
 (
İ’©
, (
__fd
, cÚ¡ *
__fe
, 
__oæag
,

175 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

177 
	#İ’©
 
İ’©64


	)

180 #ifdeà
__USE_LARGEFILE64


181 
	$İ’©64
 (
__fd
, cÚ¡ *
__fe
, 
__oæag
, ...)

182 
	`__nÚnuÎ
 ((2));

191 #iâdeà
__USE_FILE_OFFSET64


192 
	$ü—t
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

194 #ifdeà
__REDIRECT


195 
	`__REDIRECT
 (
ü—t
, (cÚ¡ *
__fe
, 
mode_t
 
__mode
),

196 
ü—t64
è
	`__nÚnuÎ
 ((1));

198 
	#ü—t
 
ü—t64


	)

201 #ifdeà
__USE_LARGEFILE64


202 
	$ü—t64
 (cÚ¡ *
__fe
, 
mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

205 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

206 && !
defšed
 
__USE_POSIX
))

215 
	#F_ULOCK
 0

	)

216 
	#F_LOCK
 1

	)

217 
	#F_TLOCK
 2

	)

218 
	#F_TEST
 3

	)

220 #iâdeà
__USE_FILE_OFFSET64


221 
	`lockf
 (
__fd
, 
__cmd
, 
off_t
 
__Ën
);

223 #ifdeà
__REDIRECT


224 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

226 
	#lockf
 
lockf64


	)

229 #ifdeà
__USE_LARGEFILE64


230 
	`lockf64
 (
__fd
, 
__cmd
, 
off64_t
 
__Ën
);

234 #ifdeà
__USE_XOPEN2K


237 #iâdeà
__USE_FILE_OFFSET64


238 
	$posix_çdvi£
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
,

239 
__advi£
è
__THROW
;

241 #ifdeà
__REDIRECT_NTH


242 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

243 
__off64_t
 
__Ën
, 
__advi£
),

244 
posix_çdvi£64
);

246 
	#posix_çdvi£
 
posix_çdvi£64


	)

249 #ifdeà
__USE_LARGEFILE64


250 
	$posix_çdvi£64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
,

251 
__advi£
è
__THROW
;

259 #iâdeà
__USE_FILE_OFFSET64


260 
	`posix_çÎoÿ‹
 (
__fd
, 
off_t
 
__off£t
, off_ˆ
__Ën
);

262 #ifdeà
__REDIRECT


263 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

264 
__off64_t
 
__Ën
),

265 
posix_çÎoÿ‹64
);

267 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

270 #ifdeà
__USE_LARGEFILE64


271 
	`posix_çÎoÿ‹64
 (
__fd
, 
off64_t
 
__off£t
, off64_ˆ
__Ën
);

277 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
 \

278 && 
defšed
 
__va_¬g_·ck_Ën


279 
	~<b™s/fú2.h
>

282 
__END_DECLS


	@/usr/include/getopt.h

20 #iâdeà
_GETOPT_H


22 #iâdeà
__Ãed_g‘İt


23 
	#_GETOPT_H
 1

	)

33 #ià!
defšed
 
__GNU_LIBRARY__


34 
	~<ùy³.h
>

37 #iâdeà
__THROW


38 #iâdeà
__GNUC_PREREQ


39 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

41 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

42 
	#__THROW
 
	`throw
 ()

	)

44 
	#__THROW


	)

48 #ifdef 
__ılu¥lus


58 *
İrg
;

72 
İtšd
;

77 
İ‹¼
;

81 
İtİt
;

83 #iâdeà
__Ãed_g‘İt


105 
	sİtiÚ


107 cÚ¡ *
	gÇme
;

110 
	ghas_¬g
;

111 *
	gæag
;

112 
	gv®
;

117 
	#no_¬gum’t
 0

	)

118 
	#»quœed_¬gum’t
 1

	)

119 
	#İtiÚ®_¬gum’t
 2

	)

147 #ifdeà
__GNU_LIBRARY__


151 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

152 
__THROW
;

154 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

155 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


159 #ifdeà
__REDIRECT


160 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

161 cÚ¡ *
__shÜtİts
),

162 
__posix_g‘İt
);

164 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

165 cÚ¡ *
__shÜtİts
è
__THROW
;

166 
	#g‘İt
 
__posix_g‘İt


	)

170 
g‘İt
 ();

173 #iâdeà
__Ãed_g‘İt


174 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

175 cÚ¡ *
__shÜtİts
,

176 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

177 
__THROW
;

178 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

179 cÚ¡ *
__shÜtİts
,

180 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

181 
__THROW
;

185 #ifdef 
__ılu¥lus


190 #undeà
__Ãed_g‘İt


	@/usr/include/grp.h

23 #iâdef 
_GRP_H


24 
	#_GRP_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ty³s.h
>

32 
	#__Ãed_size_t


	)

33 
	~<¡ddef.h
>

37 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
è&& !defšed 
__gid_t_defšed


38 
__gid_t
 
	tgid_t
;

39 
	#__gid_t_defšed


	)

43 
	sgroup


45 *
	mgr_Çme
;

46 *
	mgr_·sswd
;

47 
__gid_t
 
	mgr_gid
;

48 **
	mgr_mem
;

52 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_GNU


53 
	#__Ãed_FILE


	)

54 
	~<¡dio.h
>

58 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


63 
£tg»Á
 ();

66 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

67 || 
defšed
 
__USE_XOPEN2K8


72 
’dg»Á
 ();

78 
group
 *
g‘g»Á
 ();

81 #ifdef 
__USE_SVID


88 
group
 *
fg‘g»Á
 (
FILE
 *
__¡»am
);

91 #ifdeà
__USE_GNU


98 
putg»Á
 (cÚ¡ 
group
 *
__»¡riù
 
__p
,

99 
FILE
 *
__»¡riù
 
__f
);

106 
group
 *
g‘grgid
 (
__gid_t
 
__gid
);

112 
group
 *
g‘gºam
 (cÚ¡ *
__Çme
);

114 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


116 #ifdeà
__USE_MISC


119 
	#NSS_BUFLEN_GROUP
 1024

	)

135 #ifdeà
__USE_GNU


136 
g‘g»Á_r
 (
group
 *
__»¡riù
 
__»suÉbuf
,

137 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

138 
group
 **
__»¡riù
 
__»suÉ
);

145 
g‘grgid_r
 (
__gid_t
 
__gid
, 
group
 *
__»¡riù
 
__»suÉbuf
,

146 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

147 
group
 **
__»¡riù
 
__»suÉ
);

153 
g‘gºam_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

154 
group
 *
__»¡riù
 
__»suÉbuf
,

155 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

156 
group
 **
__»¡riù
 
__»suÉ
);

158 #ifdef 
__USE_SVID


166 
fg‘g»Á_r
 (
FILE
 *
__»¡riù
 
__¡»am
,

167 
group
 *
__»¡riù
 
__»suÉbuf
,

168 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

169 
group
 **
__»¡riù
 
__»suÉ
);

175 #ifdef 
__USE_BSD


177 
	#__Ãed_size_t


	)

178 
	~<¡ddef.h
>

181 
	$£tgroups
 (
size_t
 
__n
, cÚ¡ 
__gid_t
 *
__groups
è
__THROW
;

191 
	`g‘grou¶i¡
 (cÚ¡ *
__u£r
, 
__gid_t
 
__group
,

192 
__gid_t
 *
__groups
, *
__ngroups
);

202 
	`š™groups
 (cÚ¡ *
__u£r
, 
__gid_t
 
__group
);

206 
__END_DECLS


	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

46 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_FORMAT_MACROS


48 #ià
__WORDSIZE
 == 64

49 
	#__PRI64_PREFIX
 "l"

	)

50 
	#__PRIPTR_PREFIX
 "l"

	)

52 
	#__PRI64_PREFIX
 "Î"

	)

53 
	#__PRIPTR_PREFIX


	)

59 
	#PRId8
 "d"

	)

60 
	#PRId16
 "d"

	)

61 
	#PRId32
 "d"

	)

62 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdLEAST8
 "d"

	)

65 
	#PRIdLEAST16
 "d"

	)

66 
	#PRIdLEAST32
 "d"

	)

67 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

69 
	#PRIdFAST8
 "d"

	)

70 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

71 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

72 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

75 
	#PRIi8
 "i"

	)

76 
	#PRIi16
 "i"

	)

77 
	#PRIi32
 "i"

	)

78 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiLEAST8
 "i"

	)

81 
	#PRIiLEAST16
 "i"

	)

82 
	#PRIiLEAST32
 "i"

	)

83 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

85 
	#PRIiFAST8
 "i"

	)

86 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

87 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

88 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

91 
	#PRIo8
 "o"

	)

92 
	#PRIo16
 "o"

	)

93 
	#PRIo32
 "o"

	)

94 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoLEAST8
 "o"

	)

97 
	#PRIoLEAST16
 "o"

	)

98 
	#PRIoLEAST32
 "o"

	)

99 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

101 
	#PRIoFAST8
 "o"

	)

102 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

103 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

104 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

107 
	#PRIu8
 "u"

	)

108 
	#PRIu16
 "u"

	)

109 
	#PRIu32
 "u"

	)

110 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuLEAST8
 "u"

	)

113 
	#PRIuLEAST16
 "u"

	)

114 
	#PRIuLEAST32
 "u"

	)

115 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

117 
	#PRIuFAST8
 "u"

	)

118 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

119 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

120 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

123 
	#PRIx8
 "x"

	)

124 
	#PRIx16
 "x"

	)

125 
	#PRIx32
 "x"

	)

126 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxLEAST8
 "x"

	)

129 
	#PRIxLEAST16
 "x"

	)

130 
	#PRIxLEAST32
 "x"

	)

131 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

133 
	#PRIxFAST8
 "x"

	)

134 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

135 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

136 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

139 
	#PRIX8
 "X"

	)

140 
	#PRIX16
 "X"

	)

141 
	#PRIX32
 "X"

	)

142 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXLEAST8
 "X"

	)

145 
	#PRIXLEAST16
 "X"

	)

146 
	#PRIXLEAST32
 "X"

	)

147 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

149 
	#PRIXFAST8
 "X"

	)

150 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

151 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

152 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

156 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

157 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

158 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

159 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

160 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

161 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

165 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

166 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

167 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

168 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

169 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

170 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

176 
	#SCNd8
 "hhd"

	)

177 
	#SCNd16
 "hd"

	)

178 
	#SCNd32
 "d"

	)

179 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdLEAST8
 "hhd"

	)

182 
	#SCNdLEAST16
 "hd"

	)

183 
	#SCNdLEAST32
 "d"

	)

184 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

186 
	#SCNdFAST8
 "hhd"

	)

187 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

188 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

189 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

192 
	#SCNi8
 "hhi"

	)

193 
	#SCNi16
 "hi"

	)

194 
	#SCNi32
 "i"

	)

195 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiLEAST8
 "hhi"

	)

198 
	#SCNiLEAST16
 "hi"

	)

199 
	#SCNiLEAST32
 "i"

	)

200 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

202 
	#SCNiFAST8
 "hhi"

	)

203 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

204 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

205 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

208 
	#SCNu8
 "hhu"

	)

209 
	#SCNu16
 "hu"

	)

210 
	#SCNu32
 "u"

	)

211 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuLEAST8
 "hhu"

	)

214 
	#SCNuLEAST16
 "hu"

	)

215 
	#SCNuLEAST32
 "u"

	)

216 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

218 
	#SCNuFAST8
 "hhu"

	)

219 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

220 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

221 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

224 
	#SCNo8
 "hho"

	)

225 
	#SCNo16
 "ho"

	)

226 
	#SCNo32
 "o"

	)

227 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoLEAST8
 "hho"

	)

230 
	#SCNoLEAST16
 "ho"

	)

231 
	#SCNoLEAST32
 "o"

	)

232 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

234 
	#SCNoFAST8
 "hho"

	)

235 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

236 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

237 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

240 
	#SCNx8
 "hhx"

	)

241 
	#SCNx16
 "hx"

	)

242 
	#SCNx32
 "x"

	)

243 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxLEAST8
 "hhx"

	)

246 
	#SCNxLEAST16
 "hx"

	)

247 
	#SCNxLEAST32
 "x"

	)

248 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

250 
	#SCNxFAST8
 "hhx"

	)

251 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

252 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

253 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

257 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

258 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

259 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

260 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

261 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

264 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

265 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

266 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

267 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

268 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

273 
	g__BEGIN_DECLS


275 #ià
__WORDSIZE
 == 64

280 
	mquÙ
;

281 
	m»m
;

282 } 
	timaxdiv_t
;

289 
	mquÙ
;

290 
	m»m
;

291 } 
	timaxdiv_t
;

297 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

300 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

301 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

304 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

305 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

308 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

309 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

312 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

313 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

314 
__THROW
;

317 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

318 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

319 
__THROW
;

321 #ifdeà
__USE_EXTERN_INLINES


323 #ià
__WORDSIZE
 == 64

325 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

326 **
__»¡riù
 
__’d±r
,

327 
__ba£
, 
__group
)

328 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

330 
__ex‹º_šlše
 
štmax_t


331 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

332 
ba£
))

334  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

335 
	}
}

337 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

338 ** 
__»¡riù
 
__’d±r
,

339 
__ba£
, 
__group
)

340 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

342 
__ex‹º_šlše
 
uštmax_t


343 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

344 
ba£
))

346  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

347 
	}
}

349 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

350 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

351 
__ba£
, 
__group
)

352 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

354 
__ex‹º_šlše
 
štmax_t


355 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

356 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

358  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

359 
	}
}

361 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

362 
__»¡riù
 
__ÅŒ
,

363 
__gwch¬_t
 **

364 
__»¡riù
 
__’d±r
,

365 
__ba£
, 
__group
)

366 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

368 
__ex‹º_šlše
 
uštmax_t


369 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

370 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

372  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

373 
	}
}

377 
__ex‹nsiÚ__


378 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

379 **
__»¡riù
 
__’d±r
,

380 
__ba£
, 
__group
)

381 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

383 
__ex‹º_šlše
 
štmax_t


384 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

385 
ba£
))

387  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

388 
	}
}

390 
__ex‹nsiÚ__


391 
	$__¡¹ouÎ_š‹º®
 (const *

392 
__»¡riù
 
__ÅŒ
,

394 
__»¡riù
 
__’d±r
,

395 
__ba£
,

396 
__group
)

397 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

399 
__ex‹º_šlše
 
uštmax_t


400 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

401 
ba£
))

403  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

404 
	}
}

406 
__ex‹nsiÚ__


407 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

408 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

409 
__ba£
, 
__group
)

410 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

412 
__ex‹º_šlše
 
štmax_t


413 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

414 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

416  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

417 
	}
}

420 
__ex‹nsiÚ__


421 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

422 
__»¡riù
 
__ÅŒ
,

423 
__gwch¬_t
 **

424 
__»¡riù
 
__’d±r
,

425 
__ba£
,

426 
__group
)

427 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

429 
__ex‹º_šlše
 
uštmax_t


430 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

431 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

433  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

434 
	}
}

439 
	g__END_DECLS


	@/usr/include/libgen.h

18 #iâdeà
_LIBGEN_H


19 
	#_LIBGEN_H
 1

	)

21 
	~<ã©u»s.h
>

23 
__BEGIN_DECLS


26 *
	$dœÇme
 (*
__·th
è
__THROW
;

34 *
	$__xpg_ba£Çme
 (*
__·th
è
__THROW
;

35 
	#ba£Çme
 
__xpg_ba£Çme


	)

37 
__END_DECLS


	@/usr/include/limits.h

23 #iâdeà
_LIBC_LIMITS_H_


24 
	#_LIBC_LIMITS_H_
 1

	)

26 
	~<ã©u»s.h
>

32 
	#MB_LEN_MAX
 16

	)

37 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

42 #iâdeà
_LIMITS_H


43 
	#_LIMITS_H
 1

	)

45 
	~<b™s/wÜdsize.h
>

54 
	#CHAR_BIT
 8

	)

57 
	#SCHAR_MIN
 (-128)

	)

58 
	#SCHAR_MAX
 127

	)

61 
	#UCHAR_MAX
 255

	)

64 #ifdeà
__CHAR_UNSIGNED__


65 
	#CHAR_MIN
 0

	)

66 
	#CHAR_MAX
 
UCHAR_MAX


	)

68 
	#CHAR_MIN
 
SCHAR_MIN


	)

69 
	#CHAR_MAX
 
SCHAR_MAX


	)

73 
	#SHRT_MIN
 (-32768)

	)

74 
	#SHRT_MAX
 32767

	)

77 
	#USHRT_MAX
 65535

	)

80 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

81 
	#INT_MAX
 2147483647

	)

84 
	#UINT_MAX
 4294967295U

	)

87 #ià
__WORDSIZE
 == 64

88 
	#LONG_MAX
 9223372036854775807L

	)

90 
	#LONG_MAX
 2147483647L

	)

92 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

95 #ià
__WORDSIZE
 == 64

96 
	#ULONG_MAX
 18446744073709551615UL

	)

98 
	#ULONG_MAX
 4294967295UL

	)

101 #ifdeà
__USE_ISOC99


104 
	#LLONG_MAX
 9223372036854775807LL

	)

105 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

108 
	#ULLONG_MAX
 18446744073709551615ULL

	)

122 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


124 #šşude_Ãxˆ<
lim™s
.
h
>

130 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


131 #iâdeà
LLONG_MIN


132 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

134 #iâdeà
LLONG_MAX


135 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

137 #iâdeà
ULLONG_MAX


138 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

142 #ifdef 
__USE_POSIX


144 
	~<b™s/posix1_lim.h
>

147 #ifdef 
__USE_POSIX2


148 
	~<b™s/posix2_lim.h
>

151 #ifdef 
__USE_XOPEN


152 
	~<b™s/xİ’_lim.h
>

	@/usr/include/linux/unistd.h

1 #iâdeà
_LINUX_UNISTD_H_


2 
	#_LINUX_UNISTD_H_


	)

7 
	~<asm/uni¡d.h
>

	@/usr/include/malloc.h

20 #iâdeà
_MALLOC_H


21 
	#_MALLOC_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<¡ddef.h
>

25 
	~<¡dio.h
>

26 
	#__m®loc_±r_t
 *

	)

29 
	#__m®loc_size_t
 
size_t


	)

30 
	#__m®loc_±rdiff_t
 
±rdiff_t


	)

32 #ifdeà
__GNUC__


34 
	#__MALLOC_P
(
¬gs
è¬g 
__THROW


	)

37 
	#__MALLOC_PMT
(
¬gs
è
	)
args

39 #ifdeà
_LIBC


40 
	#__MALLOC_HOOK_VOLATILE


	)

41 
	#__MALLOC_DEPRECATED


	)

43 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

44 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

49 
	#__MALLOC_P
(
¬gs
è
	)
args

50 
	#__MALLOC_PMT
(
¬gs
è
	)
args

51 
	#__MALLOC_HOOK_VOLATILE


	)

52 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

57 
__BEGIN_DECLS


60 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

64 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

72 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

75 
	$ä“
 (*
__±r
è
__THROW
;

78 
	$cä“
 (*
__±r
è
__THROW
;

81 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

82 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

85 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

89 * 
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

93 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

96 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

97 
__THROW
 
__©Œibu‹_m®loc__
;

101 
	sm®lšfo


103 
¬’a
;

104 
Üdblks
;

105 
smblks
;

106 
hblks
;

107 
hblkhd
;

108 
usmblks
;

109 
fsmblks
;

110 
uÜdblks
;

111 
fÜdblks
;

112 
k“pco¡
;

116 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

119 #iâdeà
M_MXFAST


120 
	#M_MXFAST
 1

	)

122 #iâdeà
M_NLBLKS


123 
	#M_NLBLKS
 2

	)

125 #iâdeà
M_GRAIN


126 
	#M_GRAIN
 3

	)

128 #iâdeà
M_KEEP


129 
	#M_KEEP
 4

	)

133 
	#M_TRIM_THRESHOLD
 -1

	)

134 
	#M_TOP_PAD
 -2

	)

135 
	#M_MMAP_THRESHOLD
 -3

	)

136 
	#M_MMAP_MAX
 -4

	)

137 
	#M_CHECK_ACTION
 -5

	)

138 
	#M_PERTURB
 -6

	)

139 
	#M_ARENA_TEST
 -7

	)

140 
	#M_ARENA_MAX
 -8

	)

143 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

147 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

151 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

154 
	$m®loc_¡©s
 (è
__THROW
;

157 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

160 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

164 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

169 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

170 
__MALLOC_DEPRECATED
;

172 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

173 cÚ¡ 
__m®loc_±r_t
)

174 
__MALLOC_DEPRECATED
;

175 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
è(
size_t
 
__size
,

176 cÚ¡ 
__m®loc_±r_t
)

177 
__MALLOC_DEPRECATED
;

178 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
è(*
__±r
,

179 
size_t
 
__size
,

180 cÚ¡ 
__m®loc_±r_t
)

181 
__MALLOC_DEPRECATED
;

182 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
è(
size_t
 
__®ignm’t
,

183 
size_t
 
__size
,

184 cÚ¡ 
__m®loc_±r_t
)

185 
__MALLOC_DEPRECATED
;

186 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

189 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

192 
__END_DECLS


	@/usr/include/math.h

24 #iâdef 
_MATH_H


25 
	#_MATH_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 
	~<b™s/huge_v®.h
>

34 #ifdeà
__USE_ISOC99


35 
	~<b™s/huge_v®f.h
>

36 
	~<b™s/huge_v®l.h
>

39 
	~<b™s/šf.h
>

42 
	~<b™s/Çn.h
>

46 
	~<b™s/m©hdef.h
>

53 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

54 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

55 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

56 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

57 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

58 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

59 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

60 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

61 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

62 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

63 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

64 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

66 
	#_MdoubË_
 

	)

67 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

68 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

69 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

70 
	~<b™s/m©hÿÎs.h
>

71 #undeà
_MdoubË_


72 #undeà
_MdoubË_BEGIN_NAMESPACE


73 #undeà
_MdoubË_END_NAMESPACE


74 #undeà
__MATH_PRECNAME


76 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


82 #iâdeà
_Mæßt_


83 
	#_Mæßt_
 

	)

85 
	#_MdoubË_
 
_Mæßt_


	)

86 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

87 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

88 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

89 
	~<b™s/m©hÿÎs.h
>

90 #undeà
_MdoubË_


91 #undeà
_MdoubË_BEGIN_NAMESPACE


92 #undeà
_MdoubË_END_NAMESPACE


93 #undeà
__MATH_PRECNAME


95 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

96 || 
defšed
 
__LDBL_COMPAT


97 #ifdeà
__LDBL_COMPAT


99 #ifdeà
__USE_ISOC99


100 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

101 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

102 #ifdeà
__REDIRECT_NTH


103 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

104 
__Ædbl_Ãx‰ow¬df
)

105 
	`__©Œibu‹__
 ((
__cÚ¡__
));

106 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

107 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

108 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

109 (
__x
, 
__y
),

110 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

115 #ià
defšed
 
__LDBL_COMPAT
 || defšed 
__NO_LONG_DOUBLE_MATH


117 #undeà
__MATHDECL_1


118 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

119 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

120 
¬gs
, 
®Ÿs
)

	)

121 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

122 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

128 #iâdeà
_MlÚg_doubË_


129 
	#_MlÚg_doubË_
 

	)

131 
	#_MdoubË_
 
_MlÚg_doubË_


	)

132 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

133 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

134 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

135 
	#__MATH_DECLARE_LDOUBLE
 1

	)

136 
	~<b™s/m©hÿÎs.h
>

137 #undeà
_MdoubË_


138 #undeà
_MdoubË_BEGIN_NAMESPACE


139 #undeà
_MdoubË_END_NAMESPACE


140 #undeà
__MATH_PRECNAME


145 #undeà
__MATHDECL_1


146 #undeà
__MATHDECL


147 #undeà
__MATHCALL


150 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


152 
signgam
;

157 #ifdeà
__USE_ISOC99


195 
FP_NAN
 =

196 
	#FP_NAN
 0

	)

197 
FP_NAN
,

198 
FP_INFINITE
 =

199 
	#FP_INFINITE
 1

	)

200 
FP_INFINITE
,

201 
FP_ZERO
 =

202 
	#FP_ZERO
 2

	)

203 
FP_ZERO
,

204 
FP_SUBNORMAL
 =

205 
	#FP_SUBNORMAL
 3

	)

206 
FP_SUBNORMAL
,

207 
FP_NORMAL
 =

208 
	#FP_NORMAL
 4

	)

209 
FP_NORMAL


213 #ifdeà
__NO_LONG_DOUBLE_MATH


214 
	#åşassify
(
x
) \

215 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

217 
	#åşassify
(
x
) \

218 ( (
x
) ==  () \

219 ? 
	`__åşassifyf
 (
x
) \

220 :  (
x
) ==  () \

221 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

225 #ifdeà
__NO_LONG_DOUBLE_MATH


226 
	#signb™
(
x
) \

227 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

229 
	#signb™
(
x
) \

230 ( (
x
) ==  () \

231 ? 
	`__signb™f
 (
x
) \

232 :  (
x
) ==  () \

233 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

237 #ifdeà
__NO_LONG_DOUBLE_MATH


238 
	#isfš™e
(
x
) \

239 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

241 
	#isfš™e
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__fš™ef
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

249 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

253 #ifdeà
__NO_LONG_DOUBLE_MATH


254 
	#i¢ª
(
x
) \

255 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

257 
	#i¢ª
(
x
) \

258 ( (
x
) ==  () \

259 ? 
	`__i¢ªf
 (
x
) \

260 :  (
x
) ==  () \

261 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

265 #ifdeà
__NO_LONG_DOUBLE_MATH


266 
	#isšf
(
x
) \

267 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

269 
	#isšf
(
x
) \

270 ( (
x
) ==  () \

271 ? 
	`__isšff
 (
x
) \

272 :  (
x
) ==  () \

273 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

277 
	#MATH_ERRNO
 1

	)

278 
	#MATH_ERREXCEPT
 2

	)

283 #iâdeà
__FAST_MATH__


284 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

289 #ifdef 
__USE_MISC


293 
_IEEE_
 = -1,

294 
_SVID_
,

295 
_XOPEN_
,

296 
_POSIX_
,

297 
_ISOC_


298 } 
	t_LIB_VERSION_TYPE
;

303 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

307 #ifdeà
__USE_SVID


313 #ifdeà
__ılu¥lus


314 
__exû±iÚ


316 
exû±iÚ


319 
ty³
;

320 *
Çme
;

321 
¬g1
;

322 
¬g2
;

323 
»tv®
;

324 
	}
};

326 #ifdeà
__ılu¥lus


327 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

329 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

332 
	#X_TLOSS
 1.41484755040568800000e+16

	)

335 
	#DOMAIN
 1

	)

336 
	#SING
 2

	)

337 
	#OVERFLOW
 3

	)

338 
	#UNDERFLOW
 4

	)

339 
	#TLOSS
 5

	)

340 
	#PLOSS
 6

	)

343 
	#HUGE
 3.40282347e+38F

	)

347 #ifdeà
__USE_XOPEN


349 
	#MAXFLOAT
 3.40282347e+38F

	)

356 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


357 
	#M_E
 2.7182818284590452354

	)

358 
	#M_LOG2E
 1.4426950408889634074

	)

359 
	#M_LOG10E
 0.43429448190325182765

	)

360 
	#M_LN2
 0.69314718055994530942

	)

361 
	#M_LN10
 2.30258509299404568402

	)

362 
	#M_PI
 3.14159265358979323846

	)

363 
	#M_PI_2
 1.57079632679489661923

	)

364 
	#M_PI_4
 0.78539816339744830962

	)

365 
	#M_1_PI
 0.31830988618379067154

	)

366 
	#M_2_PI
 0.63661977236758134308

	)

367 
	#M_2_SQRTPI
 1.12837916709551257390

	)

368 
	#M_SQRT2
 1.41421356237309504880

	)

369 
	#M_SQRT1_2
 0.70710678118654752440

	)

375 #ifdeà
__USE_GNU


376 
	#M_El
 2.718281828459045235360287471352662498L

	)

377 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

378 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

379 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

380 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

381 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

382 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

383 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

384 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

385 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

386 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

387 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

388 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

395 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


396 
	#__NO_MATH_INLINES
 1

	)

399 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

406 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

407 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

408 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

409 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

410 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

411 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

415 #ifdeà
__USE_EXTERN_INLINES


416 
	~<b™s/m©hšlše.h
>

421 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

422 
	~<b™s/m©h-fš™e.h
>

425 #ifdeà
__USE_ISOC99


429 #iâdeà
isg»©”


430 
	#isg»©”
(
x
, 
y
) \

431 (
__ex‹nsiÚ__
 \

432 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

433 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

437 #iâdeà
isg»©”equ®


438 
	#isg»©”equ®
(
x
, 
y
) \

439 (
__ex‹nsiÚ__
 \

440 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

441 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

445 #iâdeà
i¦ess


446 
	#i¦ess
(
x
, 
y
) \

447 (
__ex‹nsiÚ__
 \

448 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

449 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

453 #iâdeà
i¦es£qu®


454 
	#i¦es£qu®
(
x
, 
y
) \

455 (
__ex‹nsiÚ__
 \

456 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

457 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

461 #iâdeà
i¦essg»©”


462 
	#i¦essg»©”
(
x
, 
y
) \

463 (
__ex‹nsiÚ__
 \

464 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

465 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

469 #iâdeà
isunÜd”ed


470 
	#isunÜd”ed
(
u
, 
v
) \

471 (
__ex‹nsiÚ__
 \

472 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

473 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

478 
	g__END_DECLS


	@/usr/include/netdb.h

22 #iâdef 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<Ãtš‘/š.h
>

28 
	~<¡dšt.h
>

29 #ifdeà
__USE_MISC


32 
	~<½c/Ãtdb.h
>

35 #ifdeà
__USE_GNU


36 
	#__Ãed_sigev’t_t


	)

37 
	~<b™s/sigšfo.h
>

38 
	#__Ãed_time¥ec


	)

39 
	~<time.h
>

42 
	~<b™s/Ãtdb.h
>

45 
	#_PATH_HEQUIV
 "/‘c/ho¡s.equiv"

	)

46 
	#_PATH_HOSTS
 "/‘c/ho¡s"

	)

47 
	#_PATH_NETWORKS
 "/‘c/ÃtwÜks"

	)

48 
	#_PATH_NSSWITCH_CONF
 "/‘c/nssw™ch.cÚf"

	)

49 
	#_PATH_PROTOCOLS
 "/‘c/´ÙocŞs"

	)

50 
	#_PATH_SERVICES
 "/‘c/£rviûs"

	)

53 
	g__BEGIN_DECLS


55 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


58 
	#h_”ºo
 (*
	`__h_”ºo_loÿtiÚ
 ())

	)

61 *
	$__h_”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

73 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


74 
	#NETDB_INTERNAL
 -1

	)

75 
	#NETDB_SUCCESS
 0

	)

76 
	#NO_ADDRESS
 
NO_DATA


	)

79 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_XOPEN_EXTENDED


81 
	#IPPORT_RESERVED
 1024

	)

84 #ifdeà
__USE_GNU


86 
	#SCOPE_DELIMITER
 '%'

	)

89 #ifdeà
__USE_MISC


92 
	$h”rÜ
 (cÚ¡ *
__¡r
è
__THROW
;

95 cÚ¡ *
	$h¡»¼Ü
 (
__”r_num
è
__THROW
;

100 
	sho¡’t


102 *
h_Çme
;

103 **
h_®Ÿ£s
;

104 
h_add¹y³
;

105 
h_Ëngth
;

106 **
h_addr_li¡
;

107 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


108 
	#h_addr
 
h_addr_li¡
[0]

	)

117 
	`£tho¡’t
 (
__¡ay_İ’
);

123 
	`’dho¡’t
 ();

130 
ho¡’t
 *
	`g‘ho¡’t
 ();

137 
ho¡’t
 *
	`g‘ho¡byaddr
 (cÚ¡ *
__addr
, 
__sockËn_t
 
__Ën
,

138 
__ty³
);

144 
ho¡’t
 *
	`g‘ho¡byÇme
 (cÚ¡ *
__Çme
);

146 #ifdeà
__USE_MISC


155 
ho¡’t
 *
	`g‘ho¡byÇme2
 (cÚ¡ *
__Çme
, 
__af
);

167 
	`g‘ho¡’t_r
 (
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

168 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

169 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

170 *
__»¡riù
 
__h_”ºİ
);

172 
	`g‘ho¡byaddr_r
 (cÚ¡ *
__»¡riù
 
__addr
, 
__sockËn_t
 
__Ën
,

173 
__ty³
,

174 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

176 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

177 *
__»¡riù
 
__h_”ºİ
);

179 
	`g‘ho¡byÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

180 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

181 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

182 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

183 *
__»¡riù
 
__h_”ºİ
);

185 
	`g‘ho¡byÇme2_r
 (cÚ¡ *
__»¡riù
 
__Çme
, 
__af
,

186 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

187 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

188 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

189 *
__»¡riù
 
__h_”ºİ
);

198 
	`£Š‘’t
 (
__¡ay_İ’
);

204 
	`’dÃ‹Á
 ();

211 
Ã‹Á
 *
	`g‘Ã‹Á
 ();

218 
Ã‹Á
 *
	`g‘Ãtbyaddr
 (
ušt32_t
 
__Ãt
, 
__ty³
);

224 
Ã‹Á
 *
	`g‘ÃtbyÇme
 (cÚ¡ *
__Çme
);

226 #ifdef 
__USE_MISC


237 
	`g‘Ã‹Á_r
 (
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

238 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

239 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

240 *
__»¡riù
 
__h_”ºİ
);

242 
	`g‘Ãtbyaddr_r
 (
ušt32_t
 
__Ãt
, 
__ty³
,

243 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

244 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

245 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

246 *
__»¡riù
 
__h_”ºİ
);

248 
	`g‘ÃtbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

249 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

250 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

251 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

252 *
__»¡riù
 
__h_”ºİ
);

257 
	s£rv’t


259 *
s_Çme
;

260 **
s_®Ÿ£s
;

261 
s_pÜt
;

262 *
s_´Ùo
;

270 
	`£t£rv’t
 (
__¡ay_İ’
);

276 
	`’d£rv’t
 ();

283 
£rv’t
 *
	`g‘£rv’t
 ();

290 
£rv’t
 *
	`g‘£rvbyÇme
 (cÚ¡ *
__Çme
, cÚ¡ *
__´Ùo
);

297 
£rv’t
 *
	`g‘£rvbypÜt
 (
__pÜt
, cÚ¡ *
__´Ùo
);

300 #ifdef 
__USE_MISC


308 
	`g‘£rv’t_r
 (
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

309 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

310 
£rv’t
 **
__»¡riù
 
__»suÉ
);

312 
	`g‘£rvbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

313 cÚ¡ *
__»¡riù
 
__´Ùo
,

314 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

315 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

316 
£rv’t
 **
__»¡riù
 
__»suÉ
);

318 
	`g‘£rvbypÜt_r
 (
__pÜt
, cÚ¡ *
__»¡riù
 
__´Ùo
,

319 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

320 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

321 
£rv’t
 **
__»¡riù
 
__»suÉ
);

326 
	s´ÙÛÁ


328 *
p_Çme
;

329 **
p_®Ÿ£s
;

330 
p_´Ùo
;

338 
	`£rÙÛÁ
 (
__¡ay_İ’
);

344 
	`’d´ÙÛÁ
 ();

351 
´ÙÛÁ
 *
	`g‘´ÙÛÁ
 ();

357 
´ÙÛÁ
 *
	`g‘´ÙobyÇme
 (cÚ¡ *
__Çme
);

363 
´ÙÛÁ
 *
	`g‘´Ùobynumb”
 (
__´Ùo
);

366 #ifdef 
__USE_MISC


374 
	`g‘´ÙÛÁ_r
 (
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

375 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

376 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

378 
	`g‘´ÙobyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

379 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

380 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

381 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

383 
	`g‘´Ùobynumb”_r
 (
__´Ùo
,

384 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

385 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

386 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

395 
	`£Š‘g»Á
 (cÚ¡ *
__Ãtgroup
);

403 
	`’dÃtg»Á
 ();

412 
	`g‘Ãtg»Á
 (**
__»¡riù
 
__ho¡p
,

413 **
__»¡riù
 
__u£½
,

414 **
__»¡riù
 
__domašp
);

423 
	`šÃtgr
 (cÚ¡ *
__Ãtgroup
, cÚ¡ *
__ho¡
,

424 cÚ¡ *
__u£r
, cÚ¡ *
__domaš
);

432 
	`g‘Ãtg»Á_r
 (**
__»¡riù
 
__ho¡p
,

433 **
__»¡riù
 
__u£½
,

434 **
__»¡riù
 
__domašp
,

435 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
);

439 #ifdeà
__USE_BSD


451 
	`rcmd
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

452 cÚ¡ *
__»¡riù
 
__locu£r
,

453 cÚ¡ *
__»¡riù
 
__»mu£r
,

454 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

463 
	`rcmd_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

464 cÚ¡ *
__»¡riù
 
__locu£r
,

465 cÚ¡ *
__»¡riù
 
__»mu£r
,

466 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

467 
§_çmy_t
 
__af
);

479 
	`»xec
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

480 cÚ¡ *
__»¡riù
 
__Çme
,

481 cÚ¡ *
__»¡riù
 
__·ss
,

482 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

491 
	`»xec_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

492 cÚ¡ *
__»¡riù
 
__Çme
,

493 cÚ¡ *
__»¡riù
 
__·ss
,

494 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

495 
§_çmy_t
 
__af
);

505 
	`ru£rok
 (cÚ¡ *
__rho¡
, 
__su£r
,

506 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

515 
	`ru£rok_af
 (cÚ¡ *
__rho¡
, 
__su£r
,

516 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

517 
§_çmy_t
 
__af
);

528 
	`œu£rok
 (
ušt32_t
 
__¿ddr
, 
__su£r
,

529 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

539 
	`œu£rok_af
 (cÚ¡ *
__¿ddr
, 
__su£r
,

540 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

541 
§_çmy_t
 
__af
);

551 
	`¼esvpÜt
 (*
__®pÜt
);

560 
	`¼esvpÜt_af
 (*
__®pÜt
, 
§_çmy_t
 
__af
);

565 #ifdef 
__USE_POSIX


567 
	saddršfo


569 
ai_æags
;

570 
ai_çmy
;

571 
ai_sockty³
;

572 
ai_´ÙocŞ
;

573 
sockËn_t
 
ai_add¾’
;

574 
sockaddr
 *
ai_addr
;

575 *
ai_ÿnÚÇme
;

576 
addršfo
 *
ai_Ãxt
;

579 #ifdeà
__USE_GNU


581 
	sgaicb


583 cÚ¡ *
¬_Çme
;

584 cÚ¡ *
¬_£rviû
;

585 cÚ¡ 
addršfo
 *
¬_»que¡
;

586 
addršfo
 *
¬_»suÉ
;

588 
__»tuº
;

589 
__unu£d
[5];

593 
	#GAI_WAIT
 0

	)

594 
	#GAI_NOWAIT
 1

	)

598 
	#AI_PASSIVE
 0x0001

	)

599 
	#AI_CANONNAME
 0x0002

	)

600 
	#AI_NUMERICHOST
 0x0004

	)

601 
	#AI_V4MAPPED
 0x0008

	)

602 
	#AI_ALL
 0x0010

	)

603 
	#AI_ADDRCONFIG
 0x0020

	)

605 #ifdeà
__USE_GNU


606 
	#AI_IDN
 0x0040

	)

609 
	#AI_CANONIDN
 0x0080

	)

610 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

612 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

615 
	#AI_NUMERICSERV
 0x0400

	)

618 
	#EAI_BADFLAGS
 -1

	)

619 
	#EAI_NONAME
 -2

	)

620 
	#EAI_AGAIN
 -3

	)

621 
	#EAI_FAIL
 -4

	)

622 
	#EAI_FAMILY
 -6

	)

623 
	#EAI_SOCKTYPE
 -7

	)

624 
	#EAI_SERVICE
 -8

	)

625 
	#EAI_MEMORY
 -10

	)

626 
	#EAI_SYSTEM
 -11

	)

627 
	#EAI_OVERFLOW
 -12

	)

628 #ifdeà
__USE_GNU


629 
	#EAI_NODATA
 -5

	)

630 
	#EAI_ADDRFAMILY
 -9

	)

631 
	#EAI_INPROGRESS
 -100

	)

632 
	#EAI_CANCELED
 -101

	)

633 
	#EAI_NOTCANCELED
 -102

	)

634 
	#EAI_ALLDONE
 -103

	)

635 
	#EAI_INTR
 -104

	)

636 
	#EAI_IDN_ENCODE
 -105

	)

639 #ifdeà
__USE_MISC


640 
	#NI_MAXHOST
 1025

	)

641 
	#NI_MAXSERV
 32

	)

644 
	#NI_NUMERICHOST
 1

	)

645 
	#NI_NUMERICSERV
 2

	)

646 
	#NI_NOFQDN
 4

	)

647 
	#NI_NAMEREQD
 8

	)

648 
	#NI_DGRAM
 16

	)

649 #ifdeà
__USE_GNU


650 
	#NI_IDN
 32

	)

651 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

653 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

662 
	`g‘addršfo
 (cÚ¡ *
__»¡riù
 
__Çme
,

663 cÚ¡ *
__»¡riù
 
__£rviû
,

664 cÚ¡ 
addršfo
 *
__»¡riù
 
__»q
,

665 
addršfo
 **
__»¡riù
 
__·i
);

668 
	$ä“addršfo
 (
addršfo
 *
__ai
è
__THROW
;

671 cÚ¡ *
	$gai_¡»¼Ü
 (
__ecode
è
__THROW
;

677 
	`g‘Çmešfo
 (cÚ¡ 
sockaddr
 *
__»¡riù
 
__§
,

678 
sockËn_t
 
__§Ën
, *
__»¡riù
 
__ho¡
,

679 
sockËn_t
 
__ho¡Ën
, *
__»¡riù
 
__£rv
,

680 
sockËn_t
 
__£rvËn
, 
__æags
);

683 #ifdeà
__USE_GNU


692 
	`g‘addršfo_a
 (
__mode
, 
gaicb
 *
__li¡
[
__»¡riù_¬r
],

693 
__’t
, 
sigev’t
 *
__»¡riù
 
__sig
);

703 
	`gai_su¥’d
 (cÚ¡ 
gaicb
 *cÚ¡ 
__li¡
[], 
__’t
,

704 cÚ¡ 
time¥ec
 *
__timeout
);

707 
	$gai_”rÜ
 (
gaicb
 *
__»q
è
__THROW
;

710 
	$gai_ÿnûl
 (
gaicb
 *
__gaicbp
è
__THROW
;

713 
__END_DECLS


	@/usr/include/netinet/in.h

19 #iâdef 
_NETINET_IN_H


20 
	#_NETINET_IN_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡dšt.h
>

24 
	~<sys/sock‘.h
>

25 
	~<b™s/ty³s.h
>

28 
__BEGIN_DECLS


33 
	mIPPROTO_IP
 = 0,

34 
	#IPPROTO_IP
 
IPPROTO_IP


	)

35 
	mIPPROTO_HOPOPTS
 = 0,

36 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

37 
	mIPPROTO_ICMP
 = 1,

38 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

39 
	mIPPROTO_IGMP
 = 2,

40 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

41 
	mIPPROTO_IPIP
 = 4,

42 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

43 
	mIPPROTO_TCP
 = 6,

44 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

45 
	mIPPROTO_EGP
 = 8,

46 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

47 
	mIPPROTO_PUP
 = 12,

48 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

49 
	mIPPROTO_UDP
 = 17,

50 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

51 
	mIPPROTO_IDP
 = 22,

52 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

53 
	mIPPROTO_TP
 = 29,

54 
	#IPPROTO_TP
 
IPPROTO_TP


	)

55 
	mIPPROTO_DCCP
 = 33,

56 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

57 
	mIPPROTO_IPV6
 = 41,

58 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

59 
	mIPPROTO_ROUTING
 = 43,

60 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

61 
	mIPPROTO_FRAGMENT
 = 44,

62 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

63 
	mIPPROTO_RSVP
 = 46,

64 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

65 
	mIPPROTO_GRE
 = 47,

66 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

67 
	mIPPROTO_ESP
 = 50,

68 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

69 
	mIPPROTO_AH
 = 51,

70 
	#IPPROTO_AH
 
IPPROTO_AH


	)

71 
	mIPPROTO_ICMPV6
 = 58,

72 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

73 
	mIPPROTO_NONE
 = 59,

74 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

75 
	mIPPROTO_DSTOPTS
 = 60,

76 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

77 
	mIPPROTO_MTP
 = 92,

78 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

79 
	mIPPROTO_ENCAP
 = 98,

80 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

81 
	mIPPROTO_PIM
 = 103,

82 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

83 
	mIPPROTO_COMP
 = 108,

84 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

85 
	mIPPROTO_SCTP
 = 132,

86 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

87 
	mIPPROTO_UDPLITE
 = 136,

88 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

89 
	mIPPROTO_RAW
 = 255,

90 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

91 
	mIPPROTO_MAX


96 
ušt16_t
 
	tš_pÜt_t
;

101 
	mIPPORT_ECHO
 = 7,

102 
	mIPPORT_DISCARD
 = 9,

103 
	mIPPORT_SYSTAT
 = 11,

104 
	mIPPORT_DAYTIME
 = 13,

105 
	mIPPORT_NETSTAT
 = 15,

106 
	mIPPORT_FTP
 = 21,

107 
	mIPPORT_TELNET
 = 23,

108 
	mIPPORT_SMTP
 = 25,

109 
	mIPPORT_TIMESERVER
 = 37,

110 
	mIPPORT_NAMESERVER
 = 42,

111 
	mIPPORT_WHOIS
 = 43,

112 
	mIPPORT_MTP
 = 57,

114 
	mIPPORT_TFTP
 = 69,

115 
	mIPPORT_RJE
 = 77,

116 
	mIPPORT_FINGER
 = 79,

117 
	mIPPORT_TTYLINK
 = 87,

118 
	mIPPORT_SUPDUP
 = 95,

121 
	mIPPORT_EXECSERVER
 = 512,

122 
	mIPPORT_LOGINSERVER
 = 513,

123 
	mIPPORT_CMDSERVER
 = 514,

124 
	mIPPORT_EFSSERVER
 = 520,

127 
	mIPPORT_BIFFUDP
 = 512,

128 
	mIPPORT_WHOSERVER
 = 513,

129 
	mIPPORT_ROUTESERVER
 = 520,

132 
	mIPPORT_RESERVED
 = 1024,

135 
	mIPPORT_USERRESERVED
 = 5000

140 
ušt32_t
 
	tš_addr_t
;

141 
	sš_addr


143 
š_addr_t
 
	ms_addr
;

152 
	#IN_CLASSA
(
a
è((((
š_addr_t
)×)è& 0x80000000è=ğ0)

	)

153 
	#IN_CLASSA_NET
 0xff000000

	)

154 
	#IN_CLASSA_NSHIFT
 24

	)

155 
	#IN_CLASSA_HOST
 (0xfffffffà& ~
IN_CLASSA_NET
)

	)

156 
	#IN_CLASSA_MAX
 128

	)

158 
	#IN_CLASSB
(
a
è((((
š_addr_t
)×)è& 0xc0000000è=ğ0x80000000)

	)

159 
	#IN_CLASSB_NET
 0xffff0000

	)

160 
	#IN_CLASSB_NSHIFT
 16

	)

161 
	#IN_CLASSB_HOST
 (0xfffffffà& ~
IN_CLASSB_NET
)

	)

162 
	#IN_CLASSB_MAX
 65536

	)

164 
	#IN_CLASSC
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xc0000000)

	)

165 
	#IN_CLASSC_NET
 0xffffff00

	)

166 
	#IN_CLASSC_NSHIFT
 8

	)

167 
	#IN_CLASSC_HOST
 (0xfffffffà& ~
IN_CLASSC_NET
)

	)

169 
	#IN_CLASSD
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xe0000000)

	)

170 
	#IN_MULTICAST
(
a
è
	`IN_CLASSD
×)

	)

172 
	#IN_EXPERIMENTAL
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xe0000000)

	)

173 
	#IN_BADCLASS
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xf0000000)

	)

176 
	#INADDR_ANY
 ((
š_addr_t
è0x00000000)

	)

178 
	#INADDR_BROADCAST
 ((
š_addr_t
è0xffffffff)

	)

180 
	#INADDR_NONE
 ((
š_addr_t
è0xffffffff)

	)

183 
	#IN_LOOPBACKNET
 127

	)

185 #iâdeà
INADDR_LOOPBACK


186 
	#INADDR_LOOPBACK
 ((
š_addr_t
è0x7f000001è

	)

190 
	#INADDR_UNSPEC_GROUP
 ((
š_addr_t
è0xe0000000è

	)

191 
	#INADDR_ALLHOSTS_GROUP
 ((
š_addr_t
è0xe0000001è

	)

192 
	#INADDR_ALLRTRS_GROUP
 ((
š_addr_t
è0xe0000002è

	)

193 
	#INADDR_MAX_LOCAL_GROUP
 ((
š_addr_t
è0xe00000ffè

	)

197 
	sš6_addr


201 
ušt8_t
 
	m__u6_addr8
[16];

202 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


203 
ušt16_t
 
	m__u6_addr16
[8];

204 
ušt32_t
 
	m__u6_addr32
[4];

206 } 
	m__š6_u
;

207 
	#s6_addr
 
__š6_u
.
__u6_addr8


	)

208 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


209 
	#s6_addr16
 
__š6_u
.
__u6_addr16


	)

210 
	#s6_addr32
 
__š6_u
.
__u6_addr32


	)

214 cÚ¡ 
š6_addr
 
š6addr_ªy
;

215 cÚ¡ 
š6_addr
 
š6addr_loİback
;

216 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

217 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

219 
	#INET_ADDRSTRLEN
 16

	)

220 
	#INET6_ADDRSTRLEN
 46

	)

224 
	ssockaddr_š


226 
__SOCKADDR_COMMON
 (
sš_
);

227 
š_pÜt_t
 
	msš_pÜt
;

228 
š_addr
 
	msš_addr
;

231 
	msš_z”o
[ (
sockaddr
) -

232 
__SOCKADDR_COMMON_SIZE
 -

233  (
š_pÜt_t
) -

234  (
š_addr
)];

238 
	ssockaddr_š6


240 
__SOCKADDR_COMMON
 (
sš6_
);

241 
š_pÜt_t
 
	msš6_pÜt
;

242 
ušt32_t
 
	msš6_æowšfo
;

243 
š6_addr
 
	msš6_addr
;

244 
ušt32_t
 
	msš6_scİe_id
;

248 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


250 
	s_m»q


253 
š_addr
 
	mimr_muÉŸddr
;

256 
š_addr
 
	mimr_š‹rçû
;

259 
	s_m»q_sourû


262 
š_addr
 
	mimr_muÉŸddr
;

265 
š_addr
 
	mimr_š‹rçû
;

268 
š_addr
 
	mimr_sourûaddr
;

274 
	sv6_m»q


277 
š6_addr
 
	mv6mr_muÉŸddr
;

280 
	mv6mr_š‹rçû
;

284 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


286 
	sgroup_»q


289 
ušt32_t
 
	mgr_š‹rçû
;

292 
sockaddr_¡Üage
 
	mgr_group
;

295 
	sgroup_sourû_»q


298 
ušt32_t
 
	mg¤_š‹rçû
;

301 
sockaddr_¡Üage
 
	mg¤_group
;

304 
sockaddr_¡Üage
 
	mg¤_sourû
;

309 
	s_msf‹r


312 
š_addr
 
	mimsf_muÉŸddr
;

315 
š_addr
 
	mimsf_š‹rçû
;

318 
ušt32_t
 
	mimsf_fmode
;

321 
ušt32_t
 
	mimsf_num¤c
;

323 
š_addr
 
	mimsf_¦i¡
[1];

326 
	#IP_MSFILTER_SIZE
(
num¤c
è( (
_msf‹r
) \

327 -  (
š_addr
) \

328 + (
num¤c
è*  (
š_addr
))

	)

330 
	sgroup_f‹r


333 
ušt32_t
 
	mgf_š‹rçû
;

336 
sockaddr_¡Üage
 
	mgf_group
;

339 
ušt32_t
 
	mgf_fmode
;

342 
ušt32_t
 
	mgf_num¤c
;

344 
sockaddr_¡Üage
 
	mgf_¦i¡
[1];

347 
	#GROUP_FILTER_SIZE
(
num¤c
è( (
group_f‹r
) \

348 -  (
sockaddr_¡Üage
) \

349 + ((
num¤c
) \

350 *  (
sockaddr_¡Üage
)))

	)

355 
	~<b™s/š.h
>

364 
ušt32_t
 
	$Áohl
 (
ušt32_t
 
__ÃÚg
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

365 
ušt16_t
 
	$Áohs
 (
ušt16_t
 
__ÃtshÜt
)

366 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

367 
ušt32_t
 
	$htÚl
 (
ušt32_t
 
__ho¡lÚg
)

368 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

369 
ušt16_t
 
	$htÚs
 (
ušt16_t
 
__ho¡shÜt
)

370 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

372 
	~<’dŸn.h
>

375 
	~<b™s/by‹sw­.h
>

377 #ifdeà
__OPTIMIZE__


381 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


384 
	#Áohl
(
x
è(x)

	)

385 
	#Áohs
(
x
è(x)

	)

386 
	#htÚl
(
x
è(x)

	)

387 
	#htÚs
(
x
è(x)

	)

389 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


390 
	#Áohl
(
x
è
	`__bsw­_32
 (x)

	)

391 
	#Áohs
(
x
è
	`__bsw­_16
 (x)

	)

392 
	#htÚl
(
x
è
	`__bsw­_32
 (x)

	)

393 
	#htÚs
(
x
è
	`__bsw­_16
 (x)

	)

398 #ifdeà
__GNUC__


399 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

400 (
__ex‹nsiÚ__
 \

401 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

402 
__a
->
s6_addr32
[0] == 0 \

403 && 
__a
->
s6_addr32
[1] == 0 \

404 && 
__a
->
s6_addr32
[2] == 0 \

405 && 
__a
->
s6_addr32
[3] =ğ0; 
	}
}))

	)

407 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

408 (
__ex‹nsiÚ__
 \

409 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

410 
__a
->
s6_addr32
[0] == 0 \

411 && 
__a
->
s6_addr32
[1] == 0 \

412 && 
__a
->
s6_addr32
[2] == 0 \

413 && 
__a
->
s6_addr32
[3] =ğ
	`htÚl
 (1); }))

	)

415 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

416 (
__ex‹nsiÚ__
 \

417 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

418 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xã800000); }))

	)

420 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

421 (
__ex‹nsiÚ__
 \

422 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

423 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xãc00000); }))

	)

425 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

426 (
__ex‹nsiÚ__
 \

427 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

428 
__a
->
s6_addr32
[0] == 0 \

429 && 
__a
->
s6_addr32
[1] == 0 \

430 && 
__a
->
s6_addr32
[2] =ğ
	`htÚl
 (0xffff); }))

	)

432 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

433 (
__ex‹nsiÚ__
 \

434 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

435 
__a
->
s6_addr32
[0] == 0 \

436 && 
__a
->
s6_addr32
[1] == 0 \

437 && 
__a
->
s6_addr32
[2] == 0 \

438 && 
	`Áohl
 (
__a
->
s6_addr32
[3]è> 1; }))

	)

440 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

441 (
__ex‹nsiÚ__
 \

442 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

443 cÚ¡ 
š6_addr
 *
__b
 = (cÚ¡ š6_add¸*è(
b
); \

444 
__a
->
s6_addr32
[0] =ğ
__b
->s6_addr32[0] \

445 && 
__a
->
s6_addr32
[1] =ğ
__b
->s6_addr32[1] \

446 && 
__a
->
s6_addr32
[2] =ğ
__b
->s6_addr32[2] \

447 && 
__a
->
s6_addr32
[3] =ğ
__b
->s6_addr32[3]; }))

	)

449 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

450 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

451 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

452 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

453 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ0)

	)

455 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

456 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

457 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

458 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

459 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ
	`htÚl
 (1))

	)

461 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

462 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

463 =ğ
	`htÚl
 (0xã800000))

	)

465 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

466 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

467 =ğ
	`htÚl
 (0xãc00000))

	)

469 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

470 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

471 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

472 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ
	`htÚl
 (0xffff)))

	)

474 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

475 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

476 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

477 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0) \

478 && (
	`Áohl
 (((cÚ¡ 
ušt32_t
 *è(
a
))[3]è> 1))

	)

480 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

481 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[0]) \

482 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[1]) \

483 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[2]) \

484 && (((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[3]))

	)

487 
	#IN6_IS_ADDR_MULTICAST
(
a
è(((cÚ¡ 
ušt8_t
 *è×))[0] =ğ0xff)

	)

489 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


491 
	$bšd»svpÜt
 (
__sockfd
, 
sockaddr_š
 *
__sock_š
è
__THROW
;

494 
	$bšd»svpÜt6
 (
__sockfd
, 
sockaddr_š6
 *
__sock_š
)

495 
__THROW
;

499 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

500 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

501 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x1))

	)

503 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

504 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

505 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x2))

	)

507 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

508 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

509 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x5))

	)

511 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

512 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

513 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x8))

	)

515 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

516 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

517 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0xe))

	)

520 #ifdeà
__USE_GNU


521 
cmsghdr
;

524 
	sš6_pktšfo


526 
š6_addr
 
i6_addr
;

527 
i6_ifšdex
;

531 
	s6_mtušfo


533 
sockaddr_š6
 
6m_addr
;

534 
ušt32_t
 
6m_mtu
;

539 
	$š‘6_İtiÚ_¥aû
 (
__nby‹s
)

540 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

541 
	$š‘6_İtiÚ_š™
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

542 
__ty³
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

543 
	$š‘6_İtiÚ_­³nd
 (
cmsghdr
 *
__cmsg
,

544 cÚ¡ 
ušt8_t
 *
__ty³p
, 
__muÉx
,

545 
__¶usy
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

546 
ušt8_t
 *
	$š‘6_İtiÚ_®loc
 (
cmsghdr
 *
__cmsg
, 
__d©®’
,

547 
__muÉx
, 
__¶usy
)

548 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

549 
	$š‘6_İtiÚ_Ãxt
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

550 
ušt8_t
 **
__Œp
)

551 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

552 
	$š‘6_İtiÚ_fšd
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

553 
ušt8_t
 **
__Œp
, 
__ty³
)

554 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

558 
	$š‘6_İt_š™
 (*
__extbuf
, 
sockËn_t
 
__ex’
è
__THROW
;

559 
	$š‘6_İt_­³nd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

560 
ušt8_t
 
__ty³
, 
sockËn_t
 
__Ën
, ušt8_ˆ
__®ign
,

561 **
__d©abuå
è
__THROW
;

562 
	$š‘6_İt_fšish
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
)

563 
__THROW
;

564 
	$š‘6_İt_£t_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

565 
sockËn_t
 
__v®Ën
è
__THROW
;

566 
	$š‘6_İt_Ãxt
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

567 
ušt8_t
 *
__ty³p
, 
sockËn_t
 *
__ËÅ
,

568 **
__d©abuå
è
__THROW
;

569 
	$š‘6_İt_fšd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

570 
ušt8_t
 
__ty³
, 
sockËn_t
 *
__ËÅ
,

571 **
__d©abuå
è
__THROW
;

572 
	$š‘6_İt_g‘_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

573 
sockËn_t
 
__v®Ën
è
__THROW
;

577 
sockËn_t
 
	$š‘6_¹h_¥aû
 (
__ty³
, 
__£gm’ts
è
__THROW
;

578 *
	$š‘6_¹h_š™
 (*
__bp
, 
sockËn_t
 
__bp_Ën
, 
__ty³
,

579 
__£gm’ts
è
__THROW
;

580 
	$š‘6_¹h_add
 (*
__bp
, cÚ¡ 
š6_addr
 *
__addr
è
__THROW
;

581 
	$š‘6_¹h_»v”£
 (cÚ¡ *
__š
, *
__out
è
__THROW
;

582 
	$š‘6_¹h_£gm’ts
 (cÚ¡ *
__bp
è
__THROW
;

583 
š6_addr
 *
	$š‘6_¹h_g‘addr
 (cÚ¡ *
__bp
, 
__šdex
)

584 
__THROW
;

590 
	$g‘v4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

591 
š_addr
 
__group
, 
ušt32_t
 *
__fmode
,

592 
ušt32_t
 *
__num¤c
, 
š_addr
 *
__¦i¡
)

593 
__THROW
;

596 
	$£tv4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

597 
š_addr
 
__group
, 
ušt32_t
 
__fmode
,

598 
ušt32_t
 
__num¤c
,

599 cÚ¡ 
š_addr
 *
__¦i¡
)

600 
__THROW
;

604 
	$g‘sourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

605 cÚ¡ 
sockaddr
 *
__group
,

606 
sockËn_t
 
__grou¶’
, 
ušt32_t
 *
__fmode
,

607 
ušt32_t
 *
__num¤c
,

608 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

611 
	$£tsourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

612 cÚ¡ 
sockaddr
 *
__group
,

613 
sockËn_t
 
__grou¶’
, 
ušt32_t
 
__fmode
,

614 
ušt32_t
 
__num¤c
,

615 cÚ¡ 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

618 
__END_DECLS


	@/usr/include/netinet/tcp.h

32 #iâdeà
_NETINET_TCP_H


33 
	#_NETINET_TCP_H
 1

	)

35 
	~<ã©u»s.h
>

40 
	#TCP_NODELAY
 1

	)

41 
	#TCP_MAXSEG
 2

	)

42 
	#TCP_CORK
 3

	)

43 
	#TCP_KEEPIDLE
 4

	)

44 
	#TCP_KEEPINTVL
 5

	)

45 
	#TCP_KEEPCNT
 6

	)

46 
	#TCP_SYNCNT
 7

	)

47 
	#TCP_LINGER2
 8

	)

48 
	#TCP_DEFER_ACCEPT
 9

	)

49 
	#TCP_WINDOW_CLAMP
 10

	)

50 
	#TCP_INFO
 11

	)

51 
	#TCP_QUICKACK
 12

	)

52 
	#TCP_CONGESTION
 13

	)

53 
	#TCP_MD5SIG
 14

	)

54 
	#TCP_COOKIE_TRANSACTIONS
 15

	)

55 
	#TCP_THIN_LINEAR_TIMEOUTS
 16

	)

56 
	#TCP_THIN_DUPACK
 17

	)

57 
	#TCP_USER_TIMEOUT
 18

	)

58 
	#TCP_REPAIR
 19

	)

59 
	#TCP_REPAIR_QUEUE
 20

	)

60 
	#TCP_QUEUE_SEQ
 21

	)

61 
	#TCP_REPAIR_OPTIONS
 22

	)

62 
	#TCP_FASTOPEN
 23

	)

64 #ifdeà
__USE_MISC


65 
	~<sys/ty³s.h
>

66 
	~<sys/sock‘.h
>

68 #ifdeà
__FAVOR_BSD


69 
u_št32_t
 
	ttı_£q
;

74 
	stıhdr


76 
u_št16_t
 
	mth_¥Üt
;

77 
u_št16_t
 
	mth_dpÜt
;

78 
tı_£q
 
	mth_£q
;

79 
tı_£q
 
	mth_ack
;

80 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


81 
u_št8_t
 
	mth_x2
:4;

82 
u_št8_t
 
	mth_off
:4;

84 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


85 
u_št8_t
 
	mth_off
:4;

86 
u_št8_t
 
	mth_x2
:4;

88 
u_št8_t
 
	mth_æags
;

89 
	#TH_FIN
 0x01

	)

90 
	#TH_SYN
 0x02

	)

91 
	#TH_RST
 0x04

	)

92 
	#TH_PUSH
 0x08

	)

93 
	#TH_ACK
 0x10

	)

94 
	#TH_URG
 0x20

	)

95 
u_št16_t
 
	mth_wš
;

96 
u_št16_t
 
	mth_sum
;

97 
u_št16_t
 
	mth_u½
;

101 
	stıhdr


103 
u_št16_t
 
	msourû
;

104 
u_št16_t
 
	mde¡
;

105 
u_št32_t
 
	m£q
;

106 
u_št32_t
 
	mack_£q
;

107 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


108 
u_št16_t
 
	m»s1
:4;

109 
u_št16_t
 
	mdoff
:4;

110 
u_št16_t
 
	mfš
:1;

111 
u_št16_t
 
	msyn
:1;

112 
u_št16_t
 
	mr¡
:1;

113 
u_št16_t
 
	mpsh
:1;

114 
u_št16_t
 
	mack
:1;

115 
u_št16_t
 
	murg
:1;

116 
u_št16_t
 
	m»s2
:2;

117 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


118 
u_št16_t
 
	mdoff
:4;

119 
u_št16_t
 
	m»s1
:4;

120 
u_št16_t
 
	m»s2
:2;

121 
u_št16_t
 
	murg
:1;

122 
u_št16_t
 
	mack
:1;

123 
u_št16_t
 
	mpsh
:1;

124 
u_št16_t
 
	mr¡
:1;

125 
u_št16_t
 
	msyn
:1;

126 
u_št16_t
 
	mfš
:1;

130 
u_št16_t
 
	mwšdow
;

131 
u_št16_t
 
	mcheck
;

132 
u_št16_t
 
	murg_±r
;

138 
	mTCP_ESTABLISHED
 = 1,

139 
	mTCP_SYN_SENT
,

140 
	mTCP_SYN_RECV
,

141 
	mTCP_FIN_WAIT1
,

142 
	mTCP_FIN_WAIT2
,

143 
	mTCP_TIME_WAIT
,

144 
	mTCP_CLOSE
,

145 
	mTCP_CLOSE_WAIT
,

146 
	mTCP_LAST_ACK
,

147 
	mTCP_LISTEN
,

148 
	mTCP_CLOSING


151 
	#TCPOPT_EOL
 0

	)

152 
	#TCPOPT_NOP
 1

	)

153 
	#TCPOPT_MAXSEG
 2

	)

154 
	#TCPOLEN_MAXSEG
 4

	)

155 
	#TCPOPT_WINDOW
 3

	)

156 
	#TCPOLEN_WINDOW
 3

	)

157 
	#TCPOPT_SACK_PERMITTED
 4

	)

158 
	#TCPOLEN_SACK_PERMITTED
 2

	)

159 
	#TCPOPT_SACK
 5

	)

160 
	#TCPOPT_TIMESTAMP
 8

	)

161 
	#TCPOLEN_TIMESTAMP
 10

	)

162 
	#TCPOLEN_TSTAMP_APPA
 (
TCPOLEN_TIMESTAMP
+2è

	)

164 
	#TCPOPT_TSTAMP_HDR
 \

165 (
TCPOPT_NOP
<<24|TCPOPT_NOP<<16|
TCPOPT_TIMESTAMP
<<8|
TCPOLEN_TIMESTAMP
)

	)

173 
	#TCP_MSS
 512

	)

175 
	#TCP_MAXWIN
 65535

	)

177 
	#TCP_MAX_WINSHIFT
 14

	)

179 
	#SOL_TCP
 6

	)

182 
	#TCPI_OPT_TIMESTAMPS
 1

	)

183 
	#TCPI_OPT_SACK
 2

	)

184 
	#TCPI_OPT_WSCALE
 4

	)

185 
	#TCPI_OPT_ECN
 8

	)

186 
	#TCPI_OPT_ECN_SEEN
 16

	)

187 
	#TCPI_OPT_SYN_DATA
 32

	)

190 
	etı_ÿ_¡©e


192 
	mTCP_CA_O³n
 = 0,

193 
	mTCP_CA_DisÜd”
 = 1,

194 
	mTCP_CA_CWR
 = 2,

195 
	mTCP_CA_Recov”y
 = 3,

196 
	mTCP_CA_Loss
 = 4

199 
	stı_šfo


201 
u_št8_t
 
	mtıi_¡©e
;

202 
u_št8_t
 
	mtıi_ÿ_¡©e
;

203 
u_št8_t
 
	mtıi_»Œªsm™s
;

204 
u_št8_t
 
	mtıi_´obes
;

205 
u_št8_t
 
	mtıi_backoff
;

206 
u_št8_t
 
	mtıi_İtiÚs
;

207 
u_št8_t
 
	mtıi_¢d_wsÿË
 : 4, 
	mtıi_rcv_wsÿË
 : 4;

209 
u_št32_t
 
	mtıi_¹o
;

210 
u_št32_t
 
	mtıi_©o
;

211 
u_št32_t
 
	mtıi_¢d_mss
;

212 
u_št32_t
 
	mtıi_rcv_mss
;

214 
u_št32_t
 
	mtıi_uÇcked
;

215 
u_št32_t
 
	mtıi_§cked
;

216 
u_št32_t
 
	mtıi_lo¡
;

217 
u_št32_t
 
	mtıi_»Œªs
;

218 
u_št32_t
 
	mtıi_çck‘s
;

221 
u_št32_t
 
	mtıi_Ï¡_d©a_£Á
;

222 
u_št32_t
 
	mtıi_Ï¡_ack_£Á
;

223 
u_št32_t
 
	mtıi_Ï¡_d©a_»cv
;

224 
u_št32_t
 
	mtıi_Ï¡_ack_»cv
;

227 
u_št32_t
 
	mtıi_pmtu
;

228 
u_št32_t
 
	mtıi_rcv_s¡h»sh
;

229 
u_št32_t
 
	mtıi_¹t
;

230 
u_št32_t
 
	mtıi_¹tv¬
;

231 
u_št32_t
 
	mtıi_¢d_s¡h»sh
;

232 
u_št32_t
 
	mtıi_¢d_cwnd
;

233 
u_št32_t
 
	mtıi_advmss
;

234 
u_št32_t
 
	mtıi_»Üd”šg
;

236 
u_št32_t
 
	mtıi_rcv_¹t
;

237 
u_št32_t
 
	mtıi_rcv_¥aû
;

239 
u_št32_t
 
	mtıi_tÙ®_»Œªs
;

244 
	#TCP_MD5SIG_MAXKEYLEN
 80

	)

246 
	stı_md5sig


248 
sockaddr_¡Üage
 
	mtım_addr
;

249 
u_št16_t
 
	m__tım_·d1
;

250 
u_št16_t
 
	mtım_keyËn
;

251 
u_št32_t
 
	m__tım_·d2
;

252 
u_št8_t
 
	mtım_key
[
TCP_MD5SIG_MAXKEYLEN
];

256 
	stı_»·œ_İt


258 
u_št32_t
 
	mİt_code
;

259 
u_št32_t
 
	mİt_v®
;

265 
	mTCP_NO_QUEUE
,

266 
	mTCP_RECV_QUEUE
,

267 
	mTCP_SEND_QUEUE
,

268 
	mTCP_QUEUES_NR
,

272 
	#TCP_COOKIE_MIN
 8

	)

273 
	#TCP_COOKIE_MAX
 16

	)

274 
	#TCP_COOKIE_PAIR_SIZE
 (2*
TCP_COOKIE_MAX
)

	)

277 
	#TCP_COOKIE_IN_ALWAYS
 (1 << 0è

	)

278 
	#TCP_COOKIE_OUT_NEVER
 (1 << 1è

	)

282 
	#TCP_S_DATA_IN
 (1 << 2è

	)

283 
	#TCP_S_DATA_OUT
 (1 << 3è

	)

285 
	#TCP_MSS_DEFAULT
 536U

	)

286 
	#TCP_MSS_DESIRED
 1220U

	)

288 
	stı_cook›_Œª§ùiÚs


290 
u_št16_t
 
	mtıù_æags
;

291 
u_št8_t
 
	m__tıù_·d1
;

292 
u_št8_t
 
	mtıù_cook›_desœed
;

293 
u_št16_t
 
	mtıù_s_d©a_desœed
;

294 
u_št16_t
 
	mtıù_u£d
;

295 
u_št8_t
 
	mtıù_v®ue
[
TCP_MSS_DEFAULT
];

	@/usr/include/paths.h

32 #iâdeà
_PATHS_H_


33 
	#_PATHS_H_


	)

36 
	#_PATH_DEFPATH
 "/u¤/bš:/bš"

	)

38 
	#_PATH_STDPATH
 \

39 "/u¤/bš:/bš:/u¤/sbš:/sbš"

	)

41 
	#_PATH_BSHELL
 "/bš/sh"

	)

42 
	#_PATH_CONSOLE
 "/dev/cÚsŞe"

	)

43 
	#_PATH_CSHELL
 "/bš/csh"

	)

44 
	#_PATH_DEVDB
 "/v¬/run/dev.db"

	)

45 
	#_PATH_DEVNULL
 "/dev/nuÎ"

	)

46 
	#_PATH_DRUM
 "/dev/drum"

	)

47 
	#_PATH_GSHADOW
 "/‘c/gshadow"

	)

48 
	#_PATH_KLOG
 "/´oc/kmsg"

	)

49 
	#_PATH_KMEM
 "/dev/kmem"

	)

50 
	#_PATH_LASTLOG
 "/v¬/log/Ï¡log"

	)

51 
	#_PATH_MAILDIR
 "/v¬/ma"

	)

52 
	#_PATH_MAN
 "/u¤/sh¬e/mª"

	)

53 
	#_PATH_MEM
 "/dev/mem"

	)

54 
	#_PATH_MNTTAB
 "/‘c/f¡ab"

	)

55 
	#_PATH_MOUNTED
 "/‘c/mb"

	)

56 
	#_PATH_NOLOGIN
 "/‘c/nŞogš"

	)

57 
	#_PATH_PRESERVE
 "/v¬/lib"

	)

58 
	#_PATH_RWHODIR
 "/v¬/¥oŞ/rwho"

	)

59 
	#_PATH_SENDMAIL
 "/u¤/sbš/£ndma"

	)

60 
	#_PATH_SHADOW
 "/‘c/shadow"

	)

61 
	#_PATH_SHELLS
 "/‘c/sh–ls"

	)

62 
	#_PATH_TTY
 "/dev/‰y"

	)

63 
	#_PATH_UNIX
 "/boÙ/vmlšux"

	)

64 
	#_PATH_UTMP
 "/v¬/run/utmp"

	)

65 
	#_PATH_VI
 "/u¤/bš/vi"

	)

66 
	#_PATH_WTMP
 "/v¬/log/wtmp"

	)

69 
	#_PATH_DEV
 "/dev/"

	)

70 
	#_PATH_TMP
 "/tmp/"

	)

71 
	#_PATH_VARDB
 "/v¬/lib/misc/"

	)

72 
	#_PATH_VARRUN
 "/v¬/run/"

	)

73 
	#_PATH_VARTMP
 "/v¬/tmp/"

	)

	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


86 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


87 
	#PTHREAD_MUTEX_INITIALIZER
 \

88 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

89 #ifdeà
__USE_GNU


90 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

91 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

92 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

93 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

94 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

98 
	#PTHREAD_MUTEX_INITIALIZER
 \

99 { { 0, 0, 0, 0, 0, { 0 } } }

	)

100 #ifdeà
__USE_GNU


101 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

102 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

103 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

105 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

112 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


115 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

116 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

118 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


124 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


125 #ià
__WORDSIZE
 == 64

126 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

131 
	#PTHREAD_RWLOCK_INITIALIZER
 \

132 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

133 #ifdeà
__USE_GNU


134 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


135 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

139 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


140 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

141 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

142 0, 0, 0, 0 } }

	)

144 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

145 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

146 0 } }

	)

156 
	mPTHREAD_INHERIT_SCHED
,

157 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

158 
	mPTHREAD_EXPLICIT_SCHED


159 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

166 
	mPTHREAD_SCOPE_SYSTEM
,

167 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

168 
	mPTHREAD_SCOPE_PROCESS


169 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

176 
	mPTHREAD_PROCESS_PRIVATE
,

177 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

178 
	mPTHREAD_PROCESS_SHARED


179 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

185 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

189 
	s_±h»ad_ş—nup_bufãr


191 (*
	m__routše
) (*);

192 *
	m__¬g
;

193 
	m__ÿnûÉy³
;

194 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

200 
	mPTHREAD_CANCEL_ENABLE
,

201 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

202 
	mPTHREAD_CANCEL_DISABLE


203 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

207 
	mPTHREAD_CANCEL_DEFERRED
,

208 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

209 
	mPTHREAD_CANCEL_ASYNCHRONOUS


210 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

212 
	#PTHREAD_CANCELED
 ((*è-1)

	)

216 
	#PTHREAD_ONCE_INIT
 0

	)

219 #ifdeà
__USE_XOPEN2K


223 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

227 
__BEGIN_DECLS


232 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

233 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

234 *(*
__¡¬t_routše
) (*),

235 *
__»¡riù
 
__¬g
è
__THROWNL
 
__nÚnuÎ
 ((1, 3));

241 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

249 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

251 #ifdeà
__USE_GNU


254 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

262 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

263 cÚ¡ 
time¥ec
 *
__ab¡ime
);

270 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

274 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

277 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

278 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

286 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

290 
__THROW
 
	`__nÚnuÎ
 ((1));

293 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

294 *
__d‘ach¡©e
)

295 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

298 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

299 
__d‘ach¡©e
)

300 
__THROW
 
	`__nÚnuÎ
 ((1));

304 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

305 
size_t
 *
__gu¬dsize
)

306 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

309 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

310 
size_t
 
__gu¬dsize
)

311 
__THROW
 
	`__nÚnuÎ
 ((1));

315 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

316 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

317 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

320 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

321 cÚ¡ 
sched_·¿m
 *
__»¡riù


322 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

325 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


326 
__©Œ
, *
__»¡riù
 
__pŞicy
)

327 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

330 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

331 
__THROW
 
	`__nÚnuÎ
 ((1));

334 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


335 
__©Œ
, *
__»¡riù
 
__šh”™
)

336 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

339 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

340 
__šh”™
)

341 
__THROW
 
	`__nÚnuÎ
 ((1));

345 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

346 *
__»¡riù
 
__scİe
)

347 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

350 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

351 
__THROW
 
	`__nÚnuÎ
 ((1));

354 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


355 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

356 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

362 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

363 *
__¡ackaddr
)

364 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

367 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


368 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

369 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

374 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

375 
size_t
 
__¡acksize
)

376 
__THROW
 
	`__nÚnuÎ
 ((1));

378 #ifdeà
__USE_XOPEN2K


380 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

381 **
__»¡riù
 
__¡ackaddr
,

382 
size_t
 *
__»¡riù
 
__¡acksize
)

383 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

388 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

389 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

392 #ifdeà
__USE_GNU


395 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

396 
size_t
 
__ıu£tsize
,

397 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

398 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

402 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

403 
size_t
 
__ıu£tsize
,

404 
ıu_£t_t
 *
__ıu£t
)

405 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

411 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

412 
__THROW
 
	`__nÚnuÎ
 ((2));

420 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

421 cÚ¡ 
sched_·¿m
 *
__·¿m
)

422 
__THROW
 
	`__nÚnuÎ
 ((3));

425 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

426 *
__»¡riù
 
__pŞicy
,

427 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

428 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

431 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

432 
__THROW
;

435 #ifdeà
__USE_GNU


437 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

438 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2));

442 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

443 
__THROW
 
	`__nÚnuÎ
 ((2));

447 #ifdeà
__USE_UNIX98


449 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

452 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

455 #ifdeà
__USE_GNU


460 
	$±h»ad_y›ld
 (è
__THROW
;

465 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

466 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

467 
__THROW
 
	`__nÚnuÎ
 ((3));

470 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

471 
ıu_£t_t
 *
__ıu£t
)

472 
__THROW
 
	`__nÚnuÎ
 ((3));

485 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

486 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

497 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

501 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

504 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

509 
	`±h»ad_‹¡ÿnûl
 ();

518 
__jmp_buf
 
__ÿnûl_jmp_buf
;

519 
__mask_was_§ved
;

520 } 
__ÿnûl_jmp_buf
[1];

521 *
__·d
[4];

522 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

525 #iâdeà
__ş—nup_fù_©Œibu‹


526 
	#__ş—nup_fù_©Œibu‹


	)

531 
	s__±h»ad_ş—nup_äame


533 (*
__ÿnûl_routše
) (*);

534 *
__ÿnûl_¬g
;

535 
__do_™
;

536 
__ÿnûl_ty³
;

539 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


540 #ifdeà
__ılu¥lus


542 şas 
	c__±h»ad_ş—nup_şass


544 (*
__ÿnûl_routše
) (*);

545 *
__ÿnûl_¬g
;

546 
__do_™
;

547 
__ÿnûl_ty³
;

549 
public
:

550 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

551 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

552 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

553 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

554 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

555 &
__ÿnûl_ty³
); 
	}
}

556 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

566 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

568 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

572 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

573 
__şäame
.
	`__£tdo™
 (
execu‹
); \

574 } 0)

	)

576 #ifdeà
__USE_GNU


580 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

582 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

583 
__şäame
.
	`__deãr
 ()

	)

588 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

589 
__şäame
.
	`__»¡Üe
 (); \

590 
__şäame
.
	`__£tdo™
 (
execu‹
); \

591 } 0)

	)

598 
__ex‹º_šlše
 

599 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

601 ià(
__äame
->
__do_™
)

602 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

603 
	}
}

612 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

614 
__±h»ad_ş—nup_äame
 
__şäame
 \

615 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

616 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

617 .
__do_™
 = 1 };

	)

621 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

622 
__şäame
.
__do_™
 = (
execu‹
); \

623 } 0)

	)

625 #ifdeà
__USE_GNU


629 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

631 
__±h»ad_ş—nup_äame
 
__şäame
 \

632 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

633 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

634 .
__do_™
 = 1 }; \

635 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

636 &
__şäame
.
__ÿnûl_ty³
)

	)

641 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

642 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

643 
__şäame
.
__do_™
 = (
execu‹
); \

644 } 0)

	)

655 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

657 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

658 (*
__ÿnûl_routše
è(*èğ(
routše
); \

659 *
__ÿnûl_¬g
 = (
¬g
); \

660 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

661 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

662 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

664 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

665 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

669 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

670 dØ{

	)

671 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

672 
__ş—nup_fù_©Œibu‹
;

676 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

679 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

680 ià(
execu‹
) \

681 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

682 } 0)

	)

683 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

684 
__ş—nup_fù_©Œibu‹
;

686 #ifdeà
__USE_GNU


690 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

692 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

693 (*
__ÿnûl_routše
è(*èğ(
routše
); \

694 *
__ÿnûl_¬g
 = (
¬g
); \

695 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

696 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

697 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

699 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

700 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

704 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

705 dØ{

	)

706 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

707 
__ş—nup_fù_©Œibu‹
;

712 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

715 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

716 ià(
execu‹
) \

717 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

718 
	}
} 0)

	)

719 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

720 
__ş—nup_fù_©Œibu‹
;

724 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

725 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

726 #iâdeà
SHARED


727 
	`__©Œibu‹__
 ((
__w—k__
))

733 
__jmp_buf_g
;

734 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

740 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

741 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

742 
__THROW
 
	`__nÚnuÎ
 ((1));

745 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

746 
__THROW
 
	`__nÚnuÎ
 ((1));

749 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

750 
__THROWNL
 
	`__nÚnuÎ
 ((1));

753 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

754 
__THROWNL
 
	`__nÚnuÎ
 ((1));

756 #ifdeà
__USE_XOPEN2K


758 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

759 cÚ¡ 
time¥ec
 *
__»¡riù


760 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

764 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

765 
__THROWNL
 
	`__nÚnuÎ
 ((1));

769 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

770 
__»¡riù
 
__mu‹x
,

771 *
__»¡riù
 
__´ioûšg
)

772 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

776 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

777 
__´ioûšg
,

778 *
__»¡riù
 
__Şd_ûšg
)

779 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

782 #ifdeà
__USE_XOPEN2K8


784 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

785 
__THROW
 
	`__nÚnuÎ
 ((1));

786 #ifdeà
__USE_GNU


787 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

788 
__THROW
 
	`__nÚnuÎ
 ((1));

797 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

798 
__THROW
 
	`__nÚnuÎ
 ((1));

801 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

802 
__THROW
 
	`__nÚnuÎ
 ((1));

805 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

806 
__»¡riù
 
__©Œ
,

807 *
__»¡riù
 
__psh¬ed
)

808 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

811 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

812 
__psh¬ed
)

813 
__THROW
 
	`__nÚnuÎ
 ((1));

815 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


817 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


818 
__©Œ
, *
__»¡riù
 
__kšd
)

819 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

824 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

825 
__THROW
 
	`__nÚnuÎ
 ((1));

829 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

830 
__»¡riù
 
__©Œ
,

831 *
__»¡riù
 
__´ÙocŞ
)

832 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

836 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

837 
__´ÙocŞ
)

838 
__THROW
 
	`__nÚnuÎ
 ((1));

841 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

842 
__»¡riù
 
__©Œ
,

843 *
__»¡riù
 
__´ioûšg
)

844 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

847 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

848 
__´ioûšg
)

849 
__THROW
 
	`__nÚnuÎ
 ((1));

851 #ifdeà
__USE_XOPEN2K


853 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

854 *
__robu¡Ãss
)

855 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 #ifdeà
__USE_GNU


857 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

858 *
__robu¡Ãss
)

859 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

863 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

864 
__robu¡Ãss
)

865 
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdeà
__USE_GNU


867 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

868 
__robu¡Ãss
)

869 
__THROW
 
	`__nÚnuÎ
 ((1));

874 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

880 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


881 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

884 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

885 
__THROW
 
	`__nÚnuÎ
 ((1));

888 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

889 
__THROWNL
 
	`__nÚnuÎ
 ((1));

892 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

893 
__THROWNL
 
	`__nÚnuÎ
 ((1));

895 #ifdeà
__USE_XOPEN2K


897 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

898 cÚ¡ 
time¥ec
 *
__»¡riù


899 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

903 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

904 
__THROWNL
 
	`__nÚnuÎ
 ((1));

907 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

908 
__THROWNL
 
	`__nÚnuÎ
 ((1));

910 #ifdeà
__USE_XOPEN2K


912 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

913 cÚ¡ 
time¥ec
 *
__»¡riù


914 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

918 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

919 
__THROWNL
 
	`__nÚnuÎ
 ((1));

925 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

926 
__THROW
 
	`__nÚnuÎ
 ((1));

929 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

930 
__THROW
 
	`__nÚnuÎ
 ((1));

933 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

934 
__»¡riù
 
__©Œ
,

935 *
__»¡riù
 
__psh¬ed
)

936 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

939 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

940 
__psh¬ed
)

941 
__THROW
 
	`__nÚnuÎ
 ((1));

944 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

945 
__»¡riù
 
__©Œ
,

946 *
__»¡riù
 
__´ef
)

947 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

950 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

951 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

959 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

960 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

961 
__THROW
 
	`__nÚnuÎ
 ((1));

964 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

965 
__THROW
 
	`__nÚnuÎ
 ((1));

968 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

969 
__THROWNL
 
	`__nÚnuÎ
 ((1));

972 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

973 
__THROWNL
 
	`__nÚnuÎ
 ((1));

980 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

981 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

982 
	`__nÚnuÎ
 ((1, 2));

991 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

992 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

993 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

994 
	`__nÚnuÎ
 ((1, 2, 3));

999 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1000 
__THROW
 
	`__nÚnuÎ
 ((1));

1003 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1004 
__THROW
 
	`__nÚnuÎ
 ((1));

1007 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1008 
__»¡riù
 
__©Œ
,

1009 *
__»¡riù
 
__psh¬ed
)

1010 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1013 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1014 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1016 #ifdeà
__USE_XOPEN2K


1018 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1019 
__»¡riù
 
__©Œ
,

1020 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1021 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1024 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1025 
__şockid_t
 
__şock_id
)

1026 
__THROW
 
	`__nÚnuÎ
 ((1));

1030 #ifdeà
__USE_XOPEN2K


1035 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1036 
__THROW
 
	`__nÚnuÎ
 ((1));

1039 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1040 
__THROW
 
	`__nÚnuÎ
 ((1));

1043 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1044 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1047 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1048 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1051 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1052 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1060 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1061 
__©Œ
, 
__couÁ
)

1062 
__THROW
 
	`__nÚnuÎ
 ((1));

1065 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1066 
__THROW
 
	`__nÚnuÎ
 ((1));

1069 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1070 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1074 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1078 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1079 
__THROW
 
	`__nÚnuÎ
 ((1));

1082 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1083 
__»¡riù
 
__©Œ
,

1084 *
__»¡riù
 
__psh¬ed
)

1085 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1088 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1089 
__psh¬ed
)

1090 
__THROW
 
	`__nÚnuÎ
 ((1));

1102 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1103 (*
__de¡r_funùiÚ
) (*))

1104 
__THROW
 
	`__nÚnuÎ
 ((1));

1107 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1110 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1113 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1114 cÚ¡ *
__poš‹r
è
__THROW
 ;

1117 #ifdeà
__USE_XOPEN2K


1119 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1120 
__şockid_t
 *
__şock_id
)

1121 
__THROW
 
	`__nÚnuÎ
 ((2));

1136 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1137 (*
__·»Á
) (),

1138 (*
__chd
è()è
__THROW
;

1141 #ifdeà
__USE_EXTERN_INLINES


1143 
__ex‹º_šlše
 

1144 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1146  
__th»ad1
 =ğ
__th»ad2
;

1147 
	}
}

1150 
	g__END_DECLS


	@/usr/include/sched.h

20 #iâdef 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	#__Ãed_time_t


	)

32 
	#__Ãed_time¥ec


	)

33 
	~<time.h
>

35 #iâdeà
__pid_t_defšed


36 
__pid_t
 
	tpid_t
;

37 
	#__pid_t_defšed


	)

42 
	~<b™s/sched.h
>

44 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

47 
__BEGIN_DECLS


50 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

51 
__THROW
;

54 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

57 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

58 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

61 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

64 
	$sched_y›ld
 (è
__THROW
;

67 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

70 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

73 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

76 #ifdeà
__USE_GNU


78 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

79 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

80 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

81 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

82 
ıu£
)

	)

83 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

84 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

86 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

87 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

88 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

89 
ıu£
)

	)

90 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

91 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

93 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

94 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

95 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

96 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

98 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

99 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

100 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

101 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

102 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

103 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

104 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

105 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

106 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

107 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

108 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

109 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

111 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

112 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

113 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

117 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

118 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

121 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

122 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

125 
__END_DECLS


	@/usr/include/setjmp.h

22 #iâdef 
_SETJMP_H


23 
	#_SETJMP_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/£tjmp.h
>

30 
	~<b™s/sig£t.h
>

34 
	s__jmp_buf_g


40 
__jmp_buf
 
	m__jmpbuf
;

41 
	m__mask_was_§ved
;

42 
__sig£t_t
 
	m__§ved_mask
;

46 
__BEGIN_NAMESPACE_STD


48 
__jmp_buf_g
 
	tjmp_buf
[1];

52 
	$£tjmp
 (
jmp_buf
 
__’v
è
__THROWNL
;

54 
__END_NAMESPACE_STD


59 
	$__sig£tjmp
 (
__jmp_buf_g
 
__’v
[1], 
__§vemask
è
__THROWNL
;

61 #iâdef 
__FAVOR_BSD


64 
	$_£tjmp
 (
__jmp_buf_g
 
__’v
[1]è
__THROWNL
;

68 
	#£tjmp
(
’v
è
	`_£tjmp
 (’v)

	)

73 
	#£tjmp
(
’v
è
	`£tjmp
 (’v)

	)

77 
__BEGIN_NAMESPACE_STD


81 
	$lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

82 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

84 
__END_NAMESPACE_STD


86 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


90 
	$_lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

91 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

95 #ifdef 
__USE_POSIX


99 
__jmp_buf_g
 
	tsigjmp_buf
[1];

103 
	#sig£tjmp
(
’v
, 
§vemask
è
	`__sig£tjmp
 (’v, savemask)

	)

109 
	$siglÚgjmp
 (
sigjmp_buf
 
__’v
, 
__v®
)

110 
__THROWNL
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

115 #ià
__USE_FORTIFY_LEVEL
 > 0

116 
	~<b™s/£tjmp2.h
>

119 
__END_DECLS


	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


24 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	~<b™s/sig£t.h
>

36 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


37 #iâdeà
__sig_©omic_t_defšed


38 
	#__sig_©omic_t_defšed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #undeà
__Ãed_sig_©omic_t


46 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

47 #iâdeà
__sig£t_t_defšed


48 
	#__sig£t_t_defšed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #undeà
__Ãed_sig£t_t


54 #ifdeà
_SIGNAL_H


56 
	~<b™s/ty³s.h
>

57 
	~<b™s/signum.h
>

59 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


60 #iâdeà
__pid_t_defšed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_defšed


	)

64 #ifdeà
__USE_XOPEN


66 #iâdeà
__uid_t_defšed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_defšed


	)

72 #ifdeà
__USE_POSIX199309


74 
	#__Ãed_time¥ec


	)

75 
	~<time.h
>

78 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


80 
	~<b™s/sigšfo.h
>

85 (*
	t__sighªdËr_t
) ();

90 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

91 
__THROW
;

92 #ifdeà
__USE_GNU


93 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifdeà
__USE_BSD


102 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

103 
__THROW
;

106 #ifdeà
__REDIRECT_NTH


107 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

108 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

109 
__sysv_sigÇl
);

111 
	#sigÇl
 
__sysv_sigÇl


	)

114 
__END_NAMESPACE_STD


116 #ifdeà
__USE_XOPEN


119 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

120 
__THROW
;

126 #ifdeà
__USE_POSIX


127 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

130 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


134 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$¿i£
 (
__sig
è
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifdeà
__USE_SVID


144 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

145 
__THROW
;

146 
	$gsigÇl
 (
__sig
è
__THROW
;

149 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


151 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

154 #ifdeà
__USE_XOPEN2K


156 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

169 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

171 #ifdeà
__FAVOR_BSD


174 
	$sig·u£
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

176 #ifdeà
__USE_XOPEN


177 #ifdeà
__GNUC__


178 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

181 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

187 #ifdeà
__USE_BSD


194 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

197 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

200 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

203 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

207 #ifdeà
__USE_MISC


208 
	#NSIG
 
_NSIG


	)

211 #ifdeà
__USE_GNU


212 
__sighªdËr_t
 
	tsighªdËr_t
;

216 #ifdeà
__USE_BSD


217 
__sighªdËr_t
 
	tsig_t
;

220 #ifdeà
__USE_POSIX


223 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

226 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

229 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

232 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

235 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

236 
__THROW
 
	`__nÚnuÎ
 ((1));

238 #ifdeà
__USE_GNU


240 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

243 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

244 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

247 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

248 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

253 
	~<b™s/sigaùiÚ.h
>

256 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

257 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

264 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

267 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

268 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

271 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

278 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

279 
	`__nÚnuÎ
 ((1, 2));

281 #ifdeà
__USE_POSIX199309


286 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

287 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

294 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

295 
sigšfo_t
 *
__»¡riù
 
__šfo
,

296 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

297 
	`__nÚnuÎ
 ((1));

301 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

302 
__THROW
;

307 #ifdeà
__USE_BSD


311 cÚ¡ *cÚ¡ 
_sys_sigli¡
[
_NSIG
];

312 cÚ¡ *cÚ¡ 
sys_sigli¡
[
_NSIG
];

315 
	ssigvec


317 
__sighªdËr_t
 
sv_hªdËr
;

318 
sv_mask
;

320 
sv_æags
;

321 
	#sv_Ú¡ack
 
sv_æags


	)

325 
	#SV_ONSTACK
 (1 << 0)

	)

326 
	#SV_INTERRUPT
 (1 << 1)

	)

327 
	#SV_RESETHAND
 (1 << 2)

	)

335 
	$sigvec
 (
__sig
, cÚ¡ 
sigvec
 *
__vec
,

336 
sigvec
 *
__ovec
è
__THROW
;

340 
	~<b™s/sigcÚ‹xt.h
>

343 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

348 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


349 
	#__Ãed_size_t


	)

350 
	~<¡ddef.h
>

355 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

357 
	~<b™s/sig¡ack.h
>

358 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


360 
	~<sys/ucÚ‹xt.h
>

366 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

367 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

371 
	$sig®t¡ack
 (cÚ¡ 
sig®t¡ack
 *
__»¡riù
 
__ss
,

372 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

376 #ifdeà
__USE_XOPEN_EXTENDED


380 
	$sighŞd
 (
__sig
è
__THROW
;

383 
	$sig»l£
 (
__sig
è
__THROW
;

386 
	$sigignÜe
 (
__sig
è
__THROW
;

389 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

392 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


395 
	~<b™s/±h»adty³s.h
>

396 
	~<b™s/sigth»ad.h
>

403 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

405 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

409 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

146 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_LIMIT_MACROS


148 #ià
__WORDSIZE
 == 64

149 
	#__INT64_C
(
c
èø## 
L


	)

150 
	#__UINT64_C
(
c
èø## 
UL


	)

152 
	#__INT64_C
(
c
èø## 
LL


	)

153 
	#__UINT64_C
(
c
èø## 
ULL


	)

159 
	#INT8_MIN
 (-128)

	)

160 
	#INT16_MIN
 (-32767-1)

	)

161 
	#INT32_MIN
 (-2147483647-1)

	)

162 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

164 
	#INT8_MAX
 (127)

	)

165 
	#INT16_MAX
 (32767)

	)

166 
	#INT32_MAX
 (2147483647)

	)

167 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

170 
	#UINT8_MAX
 (255)

	)

171 
	#UINT16_MAX
 (65535)

	)

172 
	#UINT32_MAX
 (4294967295U)

	)

173 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

177 
	#INT_LEAST8_MIN
 (-128)

	)

178 
	#INT_LEAST16_MIN
 (-32767-1)

	)

179 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

180 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

182 
	#INT_LEAST8_MAX
 (127)

	)

183 
	#INT_LEAST16_MAX
 (32767)

	)

184 
	#INT_LEAST32_MAX
 (2147483647)

	)

185 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

188 
	#UINT_LEAST8_MAX
 (255)

	)

189 
	#UINT_LEAST16_MAX
 (65535)

	)

190 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

191 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

195 
	#INT_FAST8_MIN
 (-128)

	)

196 #ià
__WORDSIZE
 == 64

197 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

198 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

200 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

201 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

203 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

205 
	#INT_FAST8_MAX
 (127)

	)

206 #ià
__WORDSIZE
 == 64

207 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

208 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

210 
	#INT_FAST16_MAX
 (2147483647)

	)

211 
	#INT_FAST32_MAX
 (2147483647)

	)

213 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

216 
	#UINT_FAST8_MAX
 (255)

	)

217 #ià
__WORDSIZE
 == 64

218 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

219 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

221 
	#UINT_FAST16_MAX
 (4294967295U)

	)

222 
	#UINT_FAST32_MAX
 (4294967295U)

	)

224 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

228 #ià
__WORDSIZE
 == 64

229 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

230 
	#INTPTR_MAX
 (9223372036854775807L)

	)

231 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

233 
	#INTPTR_MIN
 (-2147483647-1)

	)

234 
	#INTPTR_MAX
 (2147483647)

	)

235 
	#UINTPTR_MAX
 (4294967295U)

	)

240 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

242 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

245 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

251 #ià
__WORDSIZE
 == 64

252 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

253 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

255 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

256 
	#PTRDIFF_MAX
 (2147483647)

	)

260 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

261 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

264 #ià
__WORDSIZE
 == 64

265 
	#SIZE_MAX
 (18446744073709551615UL)

	)

267 
	#SIZE_MAX
 (4294967295U)

	)

271 #iâdeà
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

286 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_CONSTANT_MACROS


289 
	#INT8_C
(
c
è
	)
c

290 
	#INT16_C
(
c
è
	)
c

291 
	#INT32_C
(
c
è
	)
c

292 #ià
__WORDSIZE
 == 64

293 
	#INT64_C
(
c
èø## 
L


	)

295 
	#INT64_C
(
c
èø## 
LL


	)

299 
	#UINT8_C
(
c
è
	)
c

300 
	#UINT16_C
(
c
è
	)
c

301 
	#UINT32_C
(
c
èø## 
U


	)

302 #ià
__WORDSIZE
 == 64

303 
	#UINT64_C
(
c
èø## 
UL


	)

305 
	#UINT64_C
(
c
èø## 
ULL


	)

309 #ià
__WORDSIZE
 == 64

310 
	#INTMAX_C
(
c
èø## 
L


	)

311 
	#UINTMAX_C
(
c
èø## 
UL


	)

313 
	#INTMAX_C
(
c
èø## 
LL


	)

314 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__a
;

422 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

423 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

424 
	$”ªd48_r
 (
__xsubi
[3],

425 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

426 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

429 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

430 *
__»¡riù
 
__»suÉ
)

431 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

432 
	$Äªd48_r
 (
__xsubi
[3],

433 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

434 *
__»¡riù
 
__»suÉ
)

435 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

439 *
__»¡riù
 
__»suÉ
)

440 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

441 
	$j¿nd48_r
 (
__xsubi
[3],

442 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

443 *
__»¡riù
 
__»suÉ
)

444 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

448 
__THROW
 
	`__nÚnuÎ
 ((2));

450 
	$£ed48_r
 (
__£ed16v
[3],

451 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$lcÚg48_r
 (
__·¿m
[7],

454 
d¿nd48_d©a
 *
__bufãr
)

455 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

461 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


462 
	#__m®loc_ªd_ÿÎoc_defšed


	)

463 
__BEGIN_NAMESPACE_STD


465 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

467 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

468 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

469 
__END_NAMESPACE_STD


472 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


473 
__BEGIN_NAMESPACE_STD


479 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

480 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

482 
	$ä“
 (*
__±r
è
__THROW
;

483 
__END_NAMESPACE_STD


485 #ifdef 
__USE_MISC


487 
	$cä“
 (*
__±r
è
__THROW
;

490 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


491 
	~<®loÿ.h
>

494 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

495 || 
defšed
 
__USE_BSD


497 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

500 #ifdeà
__USE_XOPEN2K


502 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

503 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

506 #ifdeà
__USE_ISOC11


508 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

509 
__THROW
 
__wur
 
	`__©Œibu‹__
 ((
__m®loc__
, 
	`__®loc_size__
 (2)));

512 
__BEGIN_NAMESPACE_STD


514 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

518 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

520 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


522 #ifdeà
__ılu¥lus


523 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

524 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

526 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

529 
__END_NAMESPACE_STD


531 #ifdef 
__USE_MISC


534 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

535 
__THROW
 
	`__nÚnuÎ
 ((1));

538 
__BEGIN_NAMESPACE_STD


542 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

544 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


548 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

550 
__END_NAMESPACE_STD


552 #ifdeà
__USE_ISOC99


553 
__BEGIN_NAMESPACE_C99


556 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

557 
__END_NAMESPACE_C99


561 
__BEGIN_NAMESPACE_STD


563 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

564 
__END_NAMESPACE_STD


566 #ifdeà
__USE_GNU


569 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

570 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

573 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


577 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

580 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


583 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

584 
__THROW
 
	`__nÚnuÎ
 ((2));

587 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

590 #ifdef 
__USE_MISC


594 
	$ş—»nv
 (è
__THROW
;

598 #ià
defšed
 
__USE_MISC
 \

599 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

605 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

609 || 
defšed
 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

760 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

761 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

762 #ifdeà
__USE_GNU


763 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

764 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

765 
	`__nÚnuÎ
 ((1, 4));

770 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

771 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

772 
__END_NAMESPACE_STD


774 #ifdeà
__USE_ISOC99


775 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

776 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

780 
__BEGIN_NAMESPACE_STD


784 
div_t
 
	$div
 (
__num”
, 
__d’om
)

785 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

786 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

787 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_ISOC99


791 
__BEGIN_NAMESPACE_C99


792 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

793 
__d’om
)

794 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

795 
__END_NAMESPACE_C99


799 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

800 || 
defšed
 
__USE_SVID


807 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

808 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

813 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

814 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

819 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

820 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

823 #ifdeà
__USE_MISC


825 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

826 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

827 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

828 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

829 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

830 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

831 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

832 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

837 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

838 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

839 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

840 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

841 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

842 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

845 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

846 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

847 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

856 
__BEGIN_NAMESPACE_STD


859 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

862 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

863 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

866 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

870 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

871 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

873 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

874 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

875 
__THROW
;

876 
__END_NAMESPACE_STD


879 #ifdeà
__USE_SVID


884 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

888 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


895 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

896 *cÚ¡ *
__»¡riù
 
__tok’s
,

897 **
__»¡riù
 
__v®u•
)

898 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

902 #ifdeà
__USE_XOPEN


904 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

910 #ifdeà
__USE_XOPEN2KXSI


912 
	$posix_İ’±
 (
__oæag
è
__wur
;

915 #ifdeà
__USE_XOPEN


920 
	$g¿Á±
 (
__fd
è
__THROW
;

924 
	$uÆock±
 (
__fd
è
__THROW
;

929 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

932 #ifdeà
__USE_GNU


936 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

937 
__THROW
 
	`__nÚnuÎ
 ((2));

940 
	`g‘±
 ();

943 #ifdeà
__USE_BSD


947 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

948 
__THROW
 
	`__nÚnuÎ
 ((1));

951 
	~<b™s/¡dlib-æßt.h
>

954 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


955 
	~<b™s/¡dlib.h
>

957 #ifdeà
__LDBL_COMPAT


958 
	~<b™s/¡dlib-ldbl.h
>

962 #undeà
__Ãed_m®loc_ªd_ÿÎoc


964 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

35 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

36 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

40 
__BEGIN_NAMESPACE_STD


42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 
__END_NAMESPACE_STD


53 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


54 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

55 
__c
, 
size_t
 
__n
)

56 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 
__BEGIN_NAMESPACE_STD


62 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

66 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

69 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


72 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

74 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 #ifdeà
__OPTIMIZE__


78 
__ex‹º_®ways_šlše
 *

79 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


81  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

84 
__ex‹º_®ways_šlše
 const *

85 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


87  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

90 
	}
}

92 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

93 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

95 
__END_NAMESPACE_STD


97 #ifdeà
__USE_GNU


100 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


101 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

102 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

107 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


112 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

113 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

123 
__BEGIN_NAMESPACE_STD


125 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

128 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

129 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

133 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

137 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

141 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

151 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
 
	`__nÚnuÎ
 ((2));

153 
__END_NAMESPACE_STD


155 #ifdeà
__USE_XOPEN2K8


159 
	~<xloÿË.h
>

162 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

163 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

165 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

166 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

169 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

170 || 
defšed
 
__USE_XOPEN2K8


172 *
	$¡rdup
 (cÚ¡ *
__s
)

173 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

179 #ià
defšed
 
__USE_XOPEN2K8


180 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

181 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

184 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


186 
	#¡rdu·
(
s
) \

187 (
__ex‹nsiÚ__
 \

189 cÚ¡ *
__Şd
 = (
s
); \

190 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

191 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

192 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

193 
	}
}))

	)

196 
	#¡ºdu·
(
s
, 
n
) \

197 (
__ex‹nsiÚ__
 \

199 cÚ¡ *
__Şd
 = (
s
); \

200 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

201 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

202 
__Ãw
[
__Ën
] = '\0'; \

203 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

204 }))

	)

207 
	g__BEGIN_NAMESPACE_STD


209 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


212 *
¡rchr
 (*
__s
, 
__c
)

213 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

214 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

215 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

217 #ifdeà
__OPTIMIZE__


218 
__ex‹º_®ways_šlše
 *

219 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


221  
__butš_¡rchr
 (
__s
, 
__c
);

224 
__ex‹º_®ways_šlše
 const *

225 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


227  
__butš_¡rchr
 (
__s
, 
__c
);

232 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

233 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

236 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


239 *
	`¡¼chr
 (*
__s
, 
__c
)

240 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

241 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

242 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

244 #ifdeà
__OPTIMIZE__


245 
__ex‹º_®ways_šlše
 *

246 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


248  
	`__butš_¡¼chr
 (
__s
, 
__c
);

251 
__ex‹º_®ways_šlše
 const *

252 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


254  
	`__butš_¡¼chr
 (
__s
, 
__c
);

257 
	}
}

259 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

260 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

262 
__END_NAMESPACE_STD


264 #ifdeà
__USE_GNU


267 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


268 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

269 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

270 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

271 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

274 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

278 
__BEGIN_NAMESPACE_STD


281 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

282 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

285 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


291 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

292 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

293 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

294 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

296 #ifdeà
__OPTIMIZE__


297 
__ex‹º_®ways_šlše
 *

298 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


300  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

303 
__ex‹º_®ways_šlše
 const *

304 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


306  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

309 
	}
}

311 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

312 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

315 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


318 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

319 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

320 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

321 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

323 #ifdeà
__OPTIMIZE__


324 
__ex‹º_®ways_šlše
 *

325 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


327  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

330 
__ex‹º_®ways_šlše
 const *

331 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


333  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

336 
	}
}

338 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

339 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

344 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

345 
__THROW
 
	`__nÚnuÎ
 ((2));

346 
__END_NAMESPACE_STD


350 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

351 cÚ¡ *
__»¡riù
 
__d–im
,

352 **
__»¡riù
 
__§ve_±r
)

353 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

354 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


355 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

360 #ifdeà
__USE_GNU


362 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


363 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

364 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

365 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

366 cÚ¡ *
__ÃedË
)

367 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

370 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

374 #ifdeà
__USE_GNU


378 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

379 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

380 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

384 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

385 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

386 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

387 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

388 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

389 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

393 
__BEGIN_NAMESPACE_STD


395 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

396 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

397 
__END_NAMESPACE_STD


399 #ifdef 
__USE_XOPEN2K8


402 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

403 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

407 
__BEGIN_NAMESPACE_STD


409 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

410 
__END_NAMESPACE_STD


411 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


419 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


422 #ifdeà
__REDIRECT_NTH


423 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

424 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

425 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

427 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

428 
__THROW
 
	`__nÚnuÎ
 ((2));

429 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

434 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

435 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

439 #ifdeà
__USE_XOPEN2K8


441 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

447 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

449 #ifdeà
__USE_BSD


451 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

452 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

455 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

458 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

459 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

462 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


465 *
	`šdex
 (*
__s
, 
__c
)

466 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

467 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

470 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


471 
__ex‹º_®ways_šlše
 *

472 
	`šdex
 (*
__s
, 
__c
è
__THROW


474  
	`__butš_šdex
 (
__s
, 
__c
);

477 
__ex‹º_®ways_šlše
 const *

478 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


480  
	`__butš_šdex
 (
__s
, 
__c
);

483 
	}
}

485 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

486 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

490 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


493 *
	`ršdex
 (*
__s
, 
__c
)

494 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

495 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

498 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


499 
__ex‹º_®ways_šlše
 *

500 
	`ršdex
 (*
__s
, 
__c
è
__THROW


502  
	`__butš_ršdex
 (
__s
, 
__c
);

505 
__ex‹º_®ways_šlše
 const *

506 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


508  
	`__butš_ršdex
 (
__s
, 
__c
);

511 
	}
}

513 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

514 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

519 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

523 #ifdef 
__USE_GNU


524 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

525 #ifdeà
__GNUC__


526 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

527 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

532 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

533 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

536 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

537 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

540 #ifdef 
__USE_GNU


543 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

544 
__loÿË_t
 
__loc
)

545 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

547 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

548 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

549 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

552 #ifdef 
__USE_BSD


555 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

556 cÚ¡ *
__»¡riù
 
__d–im
)

557 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

560 #ifdef 
__USE_XOPEN2K8


562 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

565 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

566 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

567 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

572 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

573 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

575 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

576 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

577 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

580 #ifdef 
__USE_GNU


582 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

583 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

586 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

589 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #iâdeà
ba£Çme


596 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


597 "C++" *
	$ba£Çme
 (*
__f’ame
)

598 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

599 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

602 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

608 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

609 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

610 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


630 
	~<b™s/¡ršg.h
>

633 
	~<b™s/¡ršg2.h
>

636 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


638 
	~<b™s/¡ršg3.h
>

642 
__END_DECLS


	@/usr/include/strings.h

19 #iâdef 
_STRINGS_H


20 
	#_STRINGS_H
 1

	)

25 #ià!
defšed
 
_STRING_H
 || !defšed 
__USE_BSD


27 
	~<ã©u»s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

32 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

33 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

36 
	g__BEGIN_DECLS


38 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


40 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

41 
__THROW
 
__©Œibu‹_pu»__
;

44 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
è
__THROW
;

47 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
;

50 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


53 *
	`šdex
 (*
__s
, 
__c
)

54 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

55 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

56 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

58 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


59 
__ex‹º_®ways_šlše
 *

60 
	`šdex
 (*
__s
, 
__c
è
__THROW


62  
	`__butš_šdex
 (
__s
, 
__c
);

65 
__ex‹º_®ways_šlše
 const *

66 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


68  
	`__butš_šdex
 (
__s
, 
__c
);

71 
	}
}

73 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

74 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


81 *
	`ršdex
 (*
__s
, 
__c
)

82 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

83 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

84 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

86 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRING_H_PROTO


87 
__ex‹º_®ways_šlše
 *

88 
	`ršdex
 (*
__s
, 
__c
è
__THROW


90  
	`__butš_ršdex
 (
__s
, 
__c
);

93 
__ex‹º_®ways_šlše
 const *

94 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


96  
	`__butš_ršdex
 (
__s
, 
__c
);

99 
	}
}

101 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

102 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


109 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((const));

113 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

114 
__THROW
 
__©Œibu‹_pu»__
;

117 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

118 
__THROW
 
__©Œibu‹_pu»__
;

120 #ifdef 
__USE_XOPEN2K8


124 
	~<xloÿË.h
>

128 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__loc
)

129 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

131 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

132 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

133 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

136 
__END_DECLS


	@/usr/include/sys/file.h

18 #iâdef 
_SYS_FILE_H


19 
	#_SYS_FILE_H
 1

	)

21 
	~<ã©u»s.h
>

23 #iâdef 
_FCNTL_H


24 
	~<fú.h
>

27 
	g__BEGIN_DECLS


32 #iâdeà
L_SET


33 
	#L_SET
 0

	)

34 
	#L_INCR
 1

	)

35 
	#L_XTND
 2

	)

40 
	#LOCK_SH
 1

	)

41 
	#LOCK_EX
 2

	)

42 
	#LOCK_UN
 8

	)

45 
	#LOCK_NB
 4

	)

50 
	$æock
 (
__fd
, 
__İ”©iÚ
è
__THROW
;

53 
__END_DECLS


	@/usr/include/sys/mman.h

19 #iâdef 
_SYS_MMAN_H


20 
	#_SYS_MMAN_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<b™s/ty³s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 #iâdeà
__off_t_defšed


28 #iâdeà
__USE_FILE_OFFSET64


29 
__off_t
 
	toff_t
;

31 
__off64_t
 
	toff_t
;

33 
	#__off_t_defšed


	)

36 #iâdeà
__mode_t_defšed


37 
__mode_t
 
	tmode_t
;

38 
	#__mode_t_defšed


	)

41 
	~<b™s/mmª.h
>

44 
	#MAP_FAILED
 ((*è-1)

	)

46 
	g__BEGIN_DECLS


56 #iâdeà
__USE_FILE_OFFSET64


57 *
	$mm­
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

58 
__æags
, 
__fd
, 
__off_t
 
__off£t
è
__THROW
;

60 #ifdeà
__REDIRECT_NTH


61 * 
	`__REDIRECT_NTH
 (
mm­
,

62 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

63 
__æags
, 
__fd
, 
__off64_t
 
__off£t
),

64 
mm­64
);

66 
	#mm­
 
mm­64


	)

69 #ifdeà
__USE_LARGEFILE64


70 *
	$mm­64
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

71 
__æags
, 
__fd
, 
__off64_t
 
__off£t
è
__THROW
;

76 
	$munm­
 (*
__addr
, 
size_t
 
__Ën
è
__THROW
;

81 
	$m´Ùeù
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
è
__THROW
;

89 
	`msync
 (*
__addr
, 
size_t
 
__Ën
, 
__æags
);

91 #ifdeà
__USE_BSD


94 
	$madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

96 #ifdeà
__USE_XOPEN2K


98 
	$posix_madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

103 
	$mlock
 (cÚ¡ *
__addr
, 
size_t
 
__Ën
è
__THROW
;

106 
	$muÆock
 (cÚ¡ *
__addr
, 
size_t
 
__Ën
è
__THROW
;

111 
	$mlock®l
 (
__æags
è
__THROW
;

115 
	$muÆock®l
 (è
__THROW
;

117 #ifdeà
__USE_MISC


123 
	$mšcÜe
 (*
__¡¬t
, 
size_t
 
__Ën
, *
__vec
)

124 
__THROW
;

127 #ifdeà
__USE_GNU


133 *
	$m»m­
 (*
__addr
, 
size_t
 
__Şd_Ën
, size_ˆ
__Ãw_Ën
,

134 
__æags
, ...è
__THROW
;

138 
	$»m­_fe_·ges
 (*
__¡¬t
, 
size_t
 
__size
, 
__´Ù
,

139 
size_t
 
__pgoff
, 
__æags
è
__THROW
;

144 
	`shm_İ’
 (cÚ¡ *
__Çme
, 
__oæag
, 
mode_t
 
__mode
);

147 
	`shm_uÆšk
 (cÚ¡ *
__Çme
);

149 
__END_DECLS


	@/usr/include/sys/personality.h

20 #iâdeà
_SYS_PERSONALITY_H


21 
	#_SYS_PERSONALITY_H
 1

	)

23 
	~<ã©u»s.h
>

29 
	mADDR_NO_RANDOMIZE
 = 0x0040000,

30 
	mMMAP_PAGE_ZERO
 = 0x0100000,

31 
	mADDR_COMPAT_LAYOUT
 = 0x0200000,

32 
	mREAD_IMPLIES_EXEC
 = 0x0400000,

33 
	mADDR_LIMIT_32BIT
 = 0x0800000,

34 
	mSHORT_INODE
 = 0x1000000,

35 
	mWHOLE_SECONDS
 = 0x2000000,

36 
	mSTICKY_TIMEOUTS
 = 0x4000000,

37 
	mADDR_LIMIT_3GB
 = 0x8000000

46 
	mPER_LINUX
 = 0x0000,

47 
	mPER_LINUX_32BIT
 = 0x0000 | 
ADDR_LIMIT_32BIT
,

48 
	mPER_SVR4
 = 0x0001 | 
STICKY_TIMEOUTS
 | 
MMAP_PAGE_ZERO
,

49 
	mPER_SVR3
 = 0x0002 | 
STICKY_TIMEOUTS
 | 
SHORT_INODE
,

50 
	mPER_SCOSVR3
 = 0x0003 | 
STICKY_TIMEOUTS
 | 
WHOLE_SECONDS
 | 
SHORT_INODE
,

51 
	mPER_OSR5
 = 0x0003 | 
STICKY_TIMEOUTS
 | 
WHOLE_SECONDS
,

52 
	mPER_WYSEV386
 = 0x0004 | 
STICKY_TIMEOUTS
 | 
SHORT_INODE
,

53 
	mPER_ISCR4
 = 0x0005 | 
STICKY_TIMEOUTS
,

54 
	mPER_BSD
 = 0x0006,

55 
	mPER_SUNOS
 = 0x0006 | 
STICKY_TIMEOUTS
,

56 
	mPER_XENIX
 = 0x0007 | 
STICKY_TIMEOUTS
 | 
SHORT_INODE
,

57 
	mPER_LINUX32
 = 0x0008,

58 
	mPER_LINUX32_3GB
 = 0x0008 | 
ADDR_LIMIT_3GB
,

59 
	mPER_IRIX32
 = 0x0009 | 
STICKY_TIMEOUTS
,

60 
	mPER_IRIXN32
 = 0x000¨| 
STICKY_TIMEOUTS
,

61 
	mPER_IRIX64
 = 0x000b | 
STICKY_TIMEOUTS
,

62 
	mPER_RISCOS
 = 0x000c,

63 
	mPER_SOLARIS
 = 0x000d | 
STICKY_TIMEOUTS
,

64 
	mPER_UW7
 = 0x000| 
STICKY_TIMEOUTS
 | 
MMAP_PAGE_ZERO
,

65 
	mPER_OSF4
 = 0x000f,

66 
	mPER_HPUX
 = 0x0010,

67 
	mPER_MASK
 = 0x00ff,

70 
__BEGIN_DECLS


73 
	$³rsÚ®™y
 (
__³rsÚa
è
__THROW
;

75 
__END_DECLS


	@/usr/include/sys/prctl.h

18 #iâdeà
_SYS_PRCTL_H


19 
	#_SYS_PRCTL_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<lšux/´ùl.h
>

24 
__BEGIN_DECLS


27 
	$´ùl
 (
__İtiÚ
, ...è
__THROW
;

29 
__END_DECLS


	@/usr/include/sys/resource.h

19 #iâdef 
_SYS_RESOURCE_H


20 
	#_SYS_RESOURCE_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/»sourû.h
>

27 #iâdeà
__id_t_defšed


28 
__id_t
 
	tid_t
;

29 
	#__id_t_defšed


	)

32 
	g__BEGIN_DECLS


38 #ià
defšed
 
__USE_GNU
 && !defšed 
__ılu¥lus


39 
__¾im™_»sourû
 
	t__¾im™_»sourû_t
;

40 
__ru§ge_who
 
	t__ru§ge_who_t
;

41 
__´iÜ™y_which
 
	t__´iÜ™y_which_t
;

43 
	t__¾im™_»sourû_t
;

44 
	t__ru§ge_who_t
;

45 
	t__´iÜ™y_which_t
;

50 #iâdeà
__USE_FILE_OFFSET64


51 
	$g‘¾im™
 (
__¾im™_»sourû_t
 
__»sourû
,

52 
¾im™
 *
__¾im™s
è
__THROW
;

54 #ifdeà
__REDIRECT_NTH


55 
	`__REDIRECT_NTH
 (
g‘¾im™
, (
__¾im™_»sourû_t
 
__»sourû
,

56 
¾im™
 *
__¾im™s
), 
g‘¾im™64
);

58 
	#g‘¾im™
 
g‘¾im™64


	)

61 #ifdeà
__USE_LARGEFILE64


62 
	$g‘¾im™64
 (
__¾im™_»sourû_t
 
__»sourû
,

63 
¾im™64
 *
__¾im™s
è
__THROW
;

69 #iâdeà
__USE_FILE_OFFSET64


70 
	$£Œlim™
 (
__¾im™_»sourû_t
 
__»sourû
,

71 cÚ¡ 
¾im™
 *
__¾im™s
è
__THROW
;

73 #ifdeà
__REDIRECT_NTH


74 
	`__REDIRECT_NTH
 (
£Œlim™
, (
__¾im™_»sourû_t
 
__»sourû
,

75 cÚ¡ 
¾im™
 *
__¾im™s
),

76 
£Œlim™64
);

78 
	#£Œlim™
 
£Œlim™64


	)

81 #ifdeà
__USE_LARGEFILE64


82 
	$£Œlim™64
 (
__¾im™_»sourû_t
 
__»sourû
,

83 cÚ¡ 
¾im™64
 *
__¾im™s
è
__THROW
;

88 
	$g‘ru§ge
 (
__ru§ge_who_t
 
__who
, 
ru§ge
 *
__u§ge
è
__THROW
;

94 
	$g‘´iÜ™y
 (
__´iÜ™y_which_t
 
__which
, 
id_t
 
__who
è
__THROW
;

98 
	$£riÜ™y
 (
__´iÜ™y_which_t
 
__which
, 
id_t
 
__who
, 
__´io
)

99 
__THROW
;

101 
__END_DECLS


	@/usr/include/sys/socket.h

20 #iâdef 
_SYS_SOCKET_H


21 
	#_SYS_SOCKET_H
 1

	)

23 
	~<ã©u»s.h
>

25 
	g__BEGIN_DECLS


27 
	~<sys/uio.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

30 #ifdeà
__USE_GNU


32 
	~<b™s/sig£t.h
>

39 
	~<b™s/sock‘.h
>

41 #ifdeà
__USE_BSD


44 
	sosockaddr


46 
	m§_çmy
;

47 
	m§_d©a
[14];

55 
	mSHUT_RD
 = 0,

56 
	#SHUT_RD
 
SHUT_RD


	)

57 
	mSHUT_WR
,

58 
	#SHUT_WR
 
SHUT_WR


	)

59 
	mSHUT_RDWR


60 
	#SHUT_RDWR
 
SHUT_RDWR


	)

69 #ià
defšed
 
__ılu¥lus
 || !
__GNUC_PREREQ
 (2, 7è|| !defšed 
__USE_GNU


70 
	#__SOCKADDR_ARG
 
sockaddr
 *
__»¡riù


	)

71 
	#__CONST_SOCKADDR_ARG
 cÚ¡ 
sockaddr
 *

	)

75 
	#__SOCKADDR_ALLTYPES
 \

76 
	`__SOCKADDR_ONETYPE
 (
sockaddr
) \

77 
	`__SOCKADDR_ONETYPE
 (
sockaddr_©
) \

78 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ax25
) \

79 
	`__SOCKADDR_ONETYPE
 (
sockaddr_dl
) \

80 
	`__SOCKADDR_ONETYPE
 (
sockaddr_eÚ
) \

81 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š
) \

82 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š6
) \

83 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š¬p
) \

84 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x
) \

85 
	`__SOCKADDR_ONETYPE
 (
sockaddr_iso
) \

86 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ns
) \

87 
	`__SOCKADDR_ONETYPE
 (
sockaddr_un
) \

88 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x25
)

	)

90 
	#__SOCKADDR_ONETYPE
(
ty³
èty³ *
__»¡riù
 
__
##ty³##__;

	)

91 uniÚ { 
	m__SOCKADDR_ALLTYPES


92 } 
	t__SOCKADDR_ARG
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

93 #undeà
__SOCKADDR_ONETYPE


94 
	#__SOCKADDR_ONETYPE
(
ty³
ècÚ¡ ty³ *
__»¡riù
 
__
##ty³##__;

	)

95 uniÚ { 
	m__SOCKADDR_ALLTYPES


96 } 
	t__CONST_SOCKADDR_ARG
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

97 #undeà
__SOCKADDR_ONETYPE


100 #ifdeà
__USE_GNU


102 
	smmsghdr


104 
msghdr
 
	mmsg_hdr
;

105 
	mmsg_Ën
;

114 
	$sock‘
 (
__domaš
, 
__ty³
, 
__´ÙocŞ
è
__THROW
;

120 
	$sock‘·œ
 (
__domaš
, 
__ty³
, 
__´ÙocŞ
,

121 
__fds
[2]è
__THROW
;

124 
	$bšd
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockËn_t
 
__Ën
)

125 
__THROW
;

128 
	$g‘sockÇme
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

129 
sockËn_t
 *
__»¡riù
 
__Ën
è
__THROW
;

138 
	`cÚÃù
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockËn_t
 
__Ën
);

142 
	$g‘³”Çme
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

143 
sockËn_t
 *
__»¡riù
 
__Ën
è
__THROW
;

150 
ssize_t
 
	`£nd
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
, 
__æags
);

157 
ssize_t
 
	`»cv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__æags
);

164 
ssize_t
 
	`£ndto
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

165 
__æags
, 
__CONST_SOCKADDR_ARG
 
__addr
,

166 
sockËn_t
 
__addr_Ën
);

175 
ssize_t
 
	`»cväom
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

176 
__æags
, 
__SOCKADDR_ARG
 
__addr
,

177 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

185 
ssize_t
 
	`£ndmsg
 (
__fd
, cÚ¡ 
msghdr
 *
__mes§ge
,

186 
__æags
);

188 #ifdeà
__USE_GNU


194 
	`£ndmmsg
 (
__fd
, 
mmsghdr
 *
__vmes§ges
,

195 
__vËn
, 
__æags
);

203 
ssize_t
 
	`»cvmsg
 (
__fd
, 
msghdr
 *
__mes§ge
, 
__æags
);

205 #ifdeà
__USE_GNU


211 
	`»cvmmsg
 (
__fd
, 
mmsghdr
 *
__vmes§ges
,

212 
__vËn
, 
__æags
,

213 cÚ¡ 
time¥ec
 *
__tmo
);

220 
	$g‘sockİt
 (
__fd
, 
__Ëv–
, 
__İŠame
,

221 *
__»¡riù
 
__İtv®
,

222 
sockËn_t
 *
__»¡riù
 
__İ’
è
__THROW
;

227 
	$£tsockİt
 (
__fd
, 
__Ëv–
, 
__İŠame
,

228 cÚ¡ *
__İtv®
, 
sockËn_t
 
__İ’
è
__THROW
;

234 
	$li¡’
 (
__fd
, 
__n
è
__THROW
;

244 
	`acû±
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

245 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

247 #ifdeà
__USE_GNU


252 
	`acû±4
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

253 
sockËn_t
 *
__»¡riù
 
__addr_Ën
, 
__æags
);

262 
	$shutdown
 (
__fd
, 
__how
è
__THROW
;

265 #ifdeà
__USE_XOPEN2K


267 
	$sock©m¬k
 (
__fd
è
__THROW
;

271 #ifdeà
__USE_MISC


275 
	$isfdty³
 (
__fd
, 
__fdty³
è
__THROW
;

280 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


281 
	~<b™s/sock‘2.h
>

284 
__END_DECLS


	@/usr/include/sys/stat.h

23 #iâdef 
_SYS_STAT_H


24 
	#_SYS_STAT_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
 || defšed 
__USE_MISC
 \

31 || 
defšed
 
	g__USE_ATFILE


32 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


33 
	#__Ãed_time_t


	)

35 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ATFILE


36 
	#__Ãed_time¥ec


	)

38 
	~<time.h
>

41 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


44 #iâdeà
__dev_t_defšed


45 
__dev_t
 
	tdev_t
;

46 
	#__dev_t_defšed


	)

49 #iâdeà
__gid_t_defšed


50 
__gid_t
 
	tgid_t
;

51 
	#__gid_t_defšed


	)

54 #iâdeà
__šo_t_defšed


55 #iâdeà
__USE_FILE_OFFSET64


56 
__šo_t
 
	tšo_t
;

58 
__šo64_t
 
	tšo_t
;

60 
	#__šo_t_defšed


	)

63 #iâdeà
__mode_t_defšed


64 
__mode_t
 
	tmode_t
;

65 
	#__mode_t_defšed


	)

68 #iâdeà
__Æšk_t_defšed


69 
__Æšk_t
 
	tÆšk_t
;

70 
	#__Æšk_t_defšed


	)

73 #iâdeà
__off_t_defšed


74 #iâdeà
__USE_FILE_OFFSET64


75 
__off_t
 
	toff_t
;

77 
__off64_t
 
	toff_t
;

79 
	#__off_t_defšed


	)

82 #iâdeà
__uid_t_defšed


83 
__uid_t
 
	tuid_t
;

84 
	#__uid_t_defšed


	)

88 #ifdeà
__USE_UNIX98


89 #iâdeà
__blkút_t_defšed


90 #iâdeà
__USE_FILE_OFFSET64


91 
__blkút_t
 
	tblkút_t
;

93 
__blkút64_t
 
	tblkút_t
;

95 
	#__blkút_t_defšed


	)

98 #iâdeà
__blksize_t_defšed


99 
__blksize_t
 
	tblksize_t
;

100 
	#__blksize_t_defšed


	)

104 
	g__BEGIN_DECLS


106 
	~<b™s/¡©.h
>

108 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


109 
	#S_IFMT
 
__S_IFMT


	)

110 
	#S_IFDIR
 
__S_IFDIR


	)

111 
	#S_IFCHR
 
__S_IFCHR


	)

112 
	#S_IFBLK
 
__S_IFBLK


	)

113 
	#S_IFREG
 
__S_IFREG


	)

114 #ifdeà
__S_IFIFO


115 
	#S_IFIFO
 
__S_IFIFO


	)

117 #ifdeà
__S_IFLNK


118 
	#S_IFLNK
 
__S_IFLNK


	)

120 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_UNIX98
) \

121 && 
defšed
 
	g__S_IFSOCK


122 
	#S_IFSOCK
 
__S_IFSOCK


	)

128 
	#__S_ISTYPE
(
mode
, 
mask
è(((modeè& 
__S_IFMT
è=ğ(mask))

	)

130 
	#S_ISDIR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

131 
	#S_ISCHR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

132 
	#S_ISBLK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

133 
	#S_ISREG
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

134 #ifdeà
__S_IFIFO


135 
	#S_ISFIFO
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

137 #ifdeà
__S_IFLNK


138 
	#S_ISLNK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

141 #ià
defšed
 
__USE_BSD
 && !defšed 
__S_IFLNK


142 
	#S_ISLNK
(
mode
è0

	)

145 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K
) \

146 && 
defšed
 
	g__S_IFSOCK


147 
	#S_ISSOCK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

148 #–ià
defšed
 
__USE_XOPEN2K


149 
	#S_ISSOCK
(
mode
è0

	)

156 #ifdef 
__USE_POSIX199309


157 
	#S_TYPEISMQ
(
buf
è
	`__S_TYPEISMQ
(buf)

	)

158 
	#S_TYPEISSEM
(
buf
è
	`__S_TYPEISSEM
(buf)

	)

159 
	#S_TYPEISSHM
(
buf
è
	`__S_TYPEISSHM
(buf)

	)

165 
	#S_ISUID
 
__S_ISUID


	)

166 
	#S_ISGID
 
__S_ISGID


	)

168 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


170 
	#S_ISVTX
 
__S_ISVTX


	)

173 
	#S_IRUSR
 
__S_IREAD


	)

174 
	#S_IWUSR
 
__S_IWRITE


	)

175 
	#S_IXUSR
 
__S_IEXEC


	)

177 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

179 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_BSD


180 
	#S_IREAD
 
S_IRUSR


	)

181 
	#S_IWRITE
 
S_IWUSR


	)

182 
	#S_IEXEC
 
S_IXUSR


	)

185 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

186 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

187 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

189 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

191 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

192 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

193 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

195 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

198 #ifdef 
__USE_BSD


200 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
è

	)

201 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

202 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

204 
	#S_BLKSIZE
 512

	)

208 #iâdeà
__USE_FILE_OFFSET64


210 
	$¡©
 (cÚ¡ *
__»¡riù
 
__fe
,

211 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

215 
	$f¡©
 (
__fd
, 
¡©
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

217 #ifdeà
__REDIRECT_NTH


218 
	`__REDIRECT_NTH
 (
¡©
, (cÚ¡ *
__»¡riù
 
__fe
,

219 
¡©
 *
__»¡riù
 
__buf
), 
¡©64
)

220 
	`__nÚnuÎ
 ((1, 2));

221 
	`__REDIRECT_NTH
 (
f¡©
, (
__fd
, 
¡©
 *
__buf
), 
f¡©64
)

222 
	`__nÚnuÎ
 ((2));

224 
	#¡©
 
¡©64


	)

225 
	#f¡©
 
f¡©64


	)

228 #ifdeà
__USE_LARGEFILE64


229 
	$¡©64
 (cÚ¡ *
__»¡riù
 
__fe
,

230 
¡©64
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

231 
	$f¡©64
 (
__fd
, 
¡©64
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

234 #ifdeà
__USE_ATFILE


238 #iâdeà
__USE_FILE_OFFSET64


239 
	$f¡©©
 (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

240 
¡©
 *
__»¡riù
 
__buf
, 
__æag
)

241 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

243 #ifdeà
__REDIRECT_NTH


244 
	`__REDIRECT_NTH
 (
f¡©©
, (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

245 
¡©
 *
__»¡riù
 
__buf
,

246 
__æag
),

247 
f¡©©64
è
	`__nÚnuÎ
 ((2, 3));

249 
	#f¡©©
 
f¡©©64


	)

253 #ifdeà
__USE_LARGEFILE64


254 
	$f¡©©64
 (
__fd
, cÚ¡ *
__»¡riù
 
__fe
,

255 
¡©64
 *
__»¡riù
 
__buf
, 
__æag
)

256 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

260 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


261 #iâdeà
__USE_FILE_OFFSET64


264 
	$l¡©
 (cÚ¡ *
__»¡riù
 
__fe
,

265 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

267 #ifdeà
__REDIRECT_NTH


268 
	`__REDIRECT_NTH
 (
l¡©
,

269 (cÚ¡ *
__»¡riù
 
__fe
,

270 
¡©
 *
__»¡riù
 
__buf
), 
l¡©64
)

271 
	`__nÚnuÎ
 ((1, 2));

273 
	#l¡©
 
l¡©64


	)

276 #ifdeà
__USE_LARGEFILE64


277 
	$l¡©64
 (cÚ¡ *
__»¡riù
 
__fe
,

278 
¡©64
 *
__»¡riù
 
__buf
)

279 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

285 
	$chmod
 (cÚ¡ *
__fe
, 
__mode_t
 
__mode
)

286 
__THROW
 
	`__nÚnuÎ
 ((1));

288 #ifdeà
__USE_BSD


292 
	$lchmod
 (cÚ¡ *
__fe
, 
__mode_t
 
__mode
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

297 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX


298 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
è
__THROW
;

301 #ifdeà
__USE_ATFILE


304 
	$fchmod©
 (
__fd
, cÚ¡ *
__fe
, 
__mode_t
 
__mode
,

305 
__æag
)

306 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

313 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
è
__THROW
;

315 #ifdef 
__USE_GNU


318 
__mode_t
 
	$g‘umask
 (è
__THROW
;

322 
	$mkdœ
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

323 
__THROW
 
	`__nÚnuÎ
 ((1));

325 #ifdeà
__USE_ATFILE


329 
	$mkdœ©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

330 
__THROW
 
	`__nÚnuÎ
 ((2));

336 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


337 
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

338 
__THROW
 
	`__nÚnuÎ
 ((1));

340 #ifdeà
__USE_ATFILE


344 
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

345 
__dev_t
 
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2));

351 
	$mkfifo
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

352 
__THROW
 
	`__nÚnuÎ
 ((1));

354 #ifdeà
__USE_ATFILE


358 
	$mkfifßt
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
)

359 
__THROW
 
	`__nÚnuÎ
 ((2));

362 #ifdeà
__USE_ATFILE


365 
	$utim’§t
 (
__fd
, cÚ¡ *
__·th
,

366 cÚ¡ 
time¥ec
 
__times
[2],

367 
__æags
)

368 
__THROW
 
	`__nÚnuÎ
 ((2));

371 #ifdeà
__USE_XOPEN2K8


373 
	$futim’s
 (
__fd
, cÚ¡ 
time¥ec
 
__times
[2]è
__THROW
;

391 #iâdeà
_STAT_VER


392 
	#_STAT_VER
 0

	)

394 #iâdeà
_MKNOD_VER


395 
	#_MKNOD_VER
 0

	)

399 #iâdeà
__USE_FILE_OFFSET64


400 
	$__fx¡©
 (
__v”
, 
__fdes
, 
¡©
 *
__¡©_buf
)

401 
__THROW
 
	`__nÚnuÎ
 ((3));

402 
	$__x¡©
 (
__v”
, cÚ¡ *
__f’ame
,

403 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

404 
	$__lx¡©
 (
__v”
, cÚ¡ *
__f’ame
,

405 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

406 
	$__fx¡©©
 (
__v”
, 
__fdes
, cÚ¡ *
__f’ame
,

407 
¡©
 *
__¡©_buf
, 
__æag
)

408 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

410 #ifdeà
__REDIRECT_NTH


411 
	`__REDIRECT_NTH
 (
__fx¡©
, (
__v”
, 
__fdes
,

412 
¡©
 *
__¡©_buf
), 
__fx¡©64
)

413 
	`__nÚnuÎ
 ((3));

414 
	`__REDIRECT_NTH
 (
__x¡©
, (
__v”
, cÚ¡ *
__f’ame
,

415 
¡©
 *
__¡©_buf
), 
__x¡©64
)

416 
	`__nÚnuÎ
 ((2, 3));

417 
	`__REDIRECT_NTH
 (
__lx¡©
, (
__v”
, cÚ¡ *
__f’ame
,

418 
¡©
 *
__¡©_buf
), 
__lx¡©64
)

419 
	`__nÚnuÎ
 ((2, 3));

420 
	`__REDIRECT_NTH
 (
__fx¡©©
, (
__v”
, 
__fdes
,

421 cÚ¡ *
__f’ame
,

422 
¡©
 *
__¡©_buf
, 
__æag
),

423 
__fx¡©©64
è
	`__nÚnuÎ
 ((3, 4));

426 
	#__fx¡©
 
__fx¡©64


	)

427 
	#__x¡©
 
__x¡©64


	)

428 
	#__lx¡©
 
__lx¡©64


	)

432 #ifdeà
__USE_LARGEFILE64


433 
	$__fx¡©64
 (
__v”
, 
__fdes
, 
¡©64
 *
__¡©_buf
)

434 
__THROW
 
	`__nÚnuÎ
 ((3));

435 
	$__x¡©64
 (
__v”
, cÚ¡ *
__f’ame
,

436 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

437 
	$__lx¡©64
 (
__v”
, cÚ¡ *
__f’ame
,

438 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

439 
	$__fx¡©©64
 (
__v”
, 
__fdes
, cÚ¡ *
__f’ame
,

440 
¡©64
 *
__¡©_buf
, 
__æag
)

441 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

443 
	$__xmknod
 (
__v”
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

444 
__dev_t
 *
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

446 
	$__xmknod©
 (
__v”
, 
__fd
, cÚ¡ *
__·th
,

447 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

448 
__THROW
 
	`__nÚnuÎ
 ((3, 5));

450 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


453 
__ex‹º_šlše
 

454 
	`__NTH
 (
	$¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

456  
	`__x¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

457 
	}
}

459 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


460 
__ex‹º_šlše
 

461 
__NTH
 (
	$l¡©
 (cÚ¡ *
__·th
, 
¡©
 *
__¡©buf
))

463  
	`__lx¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

464 
	}
}

467 
__ex‹º_šlše
 

468 
__NTH
 (
	$f¡©
 (
__fd
, 
¡©
 *
__¡©buf
))

470  
	`__fx¡©
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

471 
	}
}

473 #ifdeà
__USE_ATFILE


474 
__ex‹º_šlše
 

475 
__NTH
 (
	$f¡©©
 (
__fd
, cÚ¡ *
__f’ame
, 
¡©
 *
__¡©buf
,

476 
__æag
))

478  
	`__fx¡©©
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

479 
	}
}

482 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD


483 
__ex‹º_šlše
 

484 
__NTH
 (
	$mknod
 (cÚ¡ *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

486  
	`__xmknod
 (
_MKNOD_VER
, 
__·th
, 
__mode
, &
__dev
);

487 
	}
}

490 #ifdeà
__USE_ATFILE


491 
__ex‹º_šlše
 

492 
__NTH
 (
	$mknod©
 (
__fd
, cÚ¡ *
__·th
, 
__mode_t
 
__mode
,

493 
__dev_t
 
__dev
))

495  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__·th
, 
__mode
, &
__dev
);

496 
	}
}

499 #ià
defšed
 
__USE_LARGEFILE64
 \

500 && (! 
defšed
 
	g__USE_FILE_OFFSET64
 \

501 || (
defšed
 
	g__REDIRECT_NTH
 && defšed 
	g__OPTIMIZE__
))

502 
__ex‹º_šlše
 

503 
__NTH
 (
	$¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

505  
	`__x¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

506 
	}
}

508 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


509 
__ex‹º_šlše
 

510 
__NTH
 (
	$l¡©64
 (cÚ¡ *
__·th
, 
¡©64
 *
__¡©buf
))

512  
	`__lx¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

513 
	}
}

516 
__ex‹º_šlše
 

517 
__NTH
 (
	$f¡©64
 (
__fd
, 
¡©64
 *
__¡©buf
))

519  
	`__fx¡©64
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

520 
	}
}

522 #ifdeà
__USE_ATFILE


523 
__ex‹º_šlše
 

524 
__NTH
 (
	$f¡©©64
 (
__fd
, cÚ¡ *
__f’ame
, 
¡©64
 *
__¡©buf
,

525 
__æag
))

527  
	`__fx¡©©64
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

528 
	}
}

535 
	g__END_DECLS


	@/usr/include/sys/time.h

19 #iâdeà
_SYS_TIME_H


20 
	#_SYS_TIME_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	~<b™s/ty³s.h
>

25 
	#__Ãed_time_t


	)

26 
	~<time.h
>

27 
	#__Ãed_timev®


	)

28 
	~<b™s/time.h
>

30 
	~<sys/£Ëù.h
>

32 #iâdeà
__su£cÚds_t_defšed


33 
__su£cÚds_t
 
	tsu£cÚds_t
;

34 
	#__su£cÚds_t_defšed


	)

38 
	g__BEGIN_DECLS


40 #ifdeà
__USE_GNU


42 
	#TIMEVAL_TO_TIMESPEC
(
tv
, 
ts
) { \

43 (
ts
)->
tv_£c
 = (
tv
)->tv_sec; \

44 (
ts
)->
tv_n£c
 = (
tv
)->
tv_u£c
 * 1000; \

45 }

	)

46 
	#TIMESPEC_TO_TIMEVAL
(
tv
, 
ts
) { \

47 (
tv
)->
tv_£c
 = (
ts
)->tv_sec; \

48 (
tv
)->
tv_u£c
 = (
ts
)->
tv_n£c
 / 1000; \

49 }

	)

53 #ifdeà
__USE_BSD


56 
	stimezÚe


58 
	mtz_mšu‹swe¡
;

59 
	mtz_d¡time
;

62 
timezÚe
 *
	t__»¡riù
 
	t__timezÚe_±r_t
;

64 *
	t__»¡riù
 
	t__timezÚe_±r_t
;

72 
	$g‘timeofday
 (
timev®
 *
__»¡riù
 
__tv
,

73 
__timezÚe_±r_t
 
__tz
è
__THROW
 
	`__nÚnuÎ
 ((1));

75 #ifdeà
__USE_BSD


78 
	$£‰imeofday
 (cÚ¡ 
timev®
 *
__tv
,

79 cÚ¡ 
timezÚe
 *
__tz
)

80 
__THROW
;

86 
	$adjtime
 (cÚ¡ 
timev®
 *
__d–
,

87 
timev®
 *
__Şdd–
è
__THROW
;

92 
	e__™im”_which


95 
ITIMER_REAL
 = 0,

96 
	#ITIMER_REAL
 
ITIMER_REAL


	)

98 
ITIMER_VIRTUAL
 = 1,

99 
	#ITIMER_VIRTUAL
 
ITIMER_VIRTUAL


	)

102 
ITIMER_PROF
 = 2

103 
	#ITIMER_PROF
 
ITIMER_PROF


	)

108 
	s™im”v®


111 
timev®
 
™_š‹rv®
;

113 
timev®
 
™_v®ue
;

116 #ià
defšed
 
__USE_GNU
 && !defšed 
__ılu¥lus


119 
__™im”_which
 
	t__™im”_which_t
;

121 
	t__™im”_which_t
;

126 
	$g‘™im”
 (
__™im”_which_t
 
__which
,

127 
™im”v®
 *
__v®ue
è
__THROW
;

132 
	$£t™im”
 (
__™im”_which_t
 
__which
,

133 cÚ¡ 
™im”v®
 *
__»¡riù
 
__Ãw
,

134 
™im”v®
 *
__»¡riù
 
__Şd
è
__THROW
;

139 
	$utimes
 (cÚ¡ *
__fe
, cÚ¡ 
timev®
 
__tvp
[2])

140 
__THROW
 
	`__nÚnuÎ
 ((1));

142 #ifdeà
__USE_BSD


144 
	$lutimes
 (cÚ¡ *
__fe
, cÚ¡ 
timev®
 
__tvp
[2])

145 
__THROW
 
	`__nÚnuÎ
 ((1));

148 
	$futimes
 (
__fd
, cÚ¡ 
timev®
 
__tvp
[2]è
__THROW
;

151 #ifdeà
__USE_GNU


155 
	$futime§t
 (
__fd
, cÚ¡ *
__fe
,

156 cÚ¡ 
timev®
 
__tvp
[2]è
__THROW
;

160 #ifdeà
__USE_BSD


163 
	#tim”is£t
(
tvp
è(Ñvp)->
tv_£c
 || (tvp)->
tv_u£c
)

	)

164 
	#tim”ş—r
(
tvp
è(Ñvp)->
tv_£c
 = (tvp)->
tv_u£c
 = 0)

	)

165 
	#tim”cmp
(
a
, 
b
, 
CMP
) \

166 (((
a
)->
tv_£c
 =ğ(
b
)->tv_sec) ? \

167 ((
a
)->
tv_u£c
 
	`CMP
 (
b
)->tv_usec) : \

168 ((
a
)->
tv_£c
 
	`CMP
 (
b
)->tv_£c))

	)

169 
	#tim”add
(
a
, 
b
, 
»suÉ
) \

171 (
»suÉ
)->
tv_£c
 = (
a
)->tv_£ø+ (
b
)->tv_sec; \

172 (
»suÉ
)->
tv_u£c
 = (
a
)->tv_u£ø+ (
b
)->tv_usec; \

173 ià((
»suÉ
)->
tv_u£c
 >= 1000000) \

175 ++(
»suÉ
)->
tv_£c
; \

176 (
»suÉ
)->
tv_u£c
 -= 1000000; \

178 
	}
} 0)

	)

179 
	#tim”sub
(
a
, 
b
, 
»suÉ
) \

181 (
»suÉ
)->
tv_£c
 = (
a
)->tv_£ø- (
b
)->tv_sec; \

182 (
»suÉ
)->
tv_u£c
 = (
a
)->tv_u£ø- (
b
)->tv_usec; \

183 ià((
»suÉ
)->
tv_u£c
 < 0) { \

184 --(
»suÉ
)->
tv_£c
; \

185 (
»suÉ
)->
tv_u£c
 += 1000000; \

187 } 0)

	)

190 
	g__END_DECLS


	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_BSD


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_BSD


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_şock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_şockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

167 #–ià
__GLIBC_HAVE_LONG_LONG


168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

178 #–ià
__GLIBC_HAVE_LONG_LONG


179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_BSD


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/sys/uio.h

19 #iâdeà
_SYS_UIO_H


20 
	#_SYS_UIO_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	~<sys/ty³s.h
>

26 
	g__BEGIN_DECLS


29 
	~<b™s/uio.h
>

40 
ssize_t
 
	$»adv
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
)

41 
__wur
;

51 
ssize_t
 
	$wr™ev
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
)

52 
__wur
;

55 #ifdeà
__USE_BSD


56 #iâdeà
__USE_FILE_OFFSET64


66 
ssize_t
 
	$´—dv
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
,

67 
__off_t
 
__off£t
è
__wur
;

78 
ssize_t
 
	$pwr™ev
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
,

79 
__off_t
 
__off£t
è
__wur
;

81 #ifdeà
__REDIRECT


82 
ssize_t
 
	`__REDIRECT
 (
´—dv
, (
__fd
, cÚ¡ 
iovec
 *
__iovec
,

83 
__couÁ
, 
__off64_t
 
__off£t
),

84 
´—dv64
è
__wur
;

85 
ssize_t
 
	`__REDIRECT
 (
pwr™ev
, (
__fd
, cÚ¡ 
iovec
 *
__iovec
,

86 
__couÁ
, 
__off64_t
 
__off£t
),

87 
pwr™ev64
è
__wur
;

89 
	#´—dv
 
´—dv64


	)

90 
	#pwr™ev
 
pwr™ev64


	)

94 #ifdeà
__USE_LARGEFILE64


104 
ssize_t
 
	$´—dv64
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
,

105 
__off64_t
 
__off£t
è
__wur
;

116 
ssize_t
 
	$pwr™ev64
 (
__fd
, cÚ¡ 
iovec
 *
__iovec
, 
__couÁ
,

117 
__off64_t
 
__off£t
è
__wur
;

121 
__END_DECLS


	@/usr/include/sys/un.h

18 #iâdef 
_SYS_UN_H


19 
	#_SYS_UN_H
 1

	)

21 
	~<sys/cdefs.h
>

24 
	~<b™s/sockaddr.h
>

26 
__BEGIN_DECLS


29 
	ssockaddr_un


31 
__SOCKADDR_COMMON
 (
sun_
);

32 
	msun_·th
[108];

36 #ifdeà
__USE_MISC


37 
	~<¡ršg.h
>

40 
	#SUN_LEN
(
±r
è((
size_t
è(((
sockaddr_un
 *è0)->
sun_·th
) \

41 + 
	`¡¾’
 ((
±r
)->
sun_·th
))

	)

44 
	g__END_DECLS


	@/usr/include/sys/wait.h

23 #iâdef 
_SYS_WAIT_H


24 
	#_SYS_WAIT_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<sigÇl.h
>

33 #ià!
defšed
 
_STDLIB_H
 || (!defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K8
)

36 
	~<b™s/wa™æags.h
>

38 #ifdef 
__USE_BSD


43 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


44 
	#__WAIT_INT
(
¡©us
) \

45 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

46 { .
__š
 = (
¡©us
è}).
__i
))

	)

48 
	#__WAIT_INT
(
¡©us
è(*(cÚ¡ *è&(¡©us))

	)

56 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


57 
	#__WAIT_STATUS
 *

	)

58 
	#__WAIT_STATUS_DEFN
 *

	)

63 
wa™
 *
	m__u±r
;

64 *
	m__Œ
;

65 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

66 
	#__WAIT_STATUS_DEFN
 *

	)

71 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

72 
	#__WAIT_STATUS
 *

	)

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	~<b™s/wa™¡©us.h
>

80 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

81 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

82 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

83 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

84 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

86 #ifdeà
__WIFCONTINUED


87 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

91 #ifdef 
__USE_BSD


92 
	#WCOREFLAG
 
__WCOREFLAG


	)

93 
	#WCOREDUMP
(
¡©us
è
	`__WCOREDUMP
 (
	`__WAIT_INT
 (¡©us))

	)

94 
	#W_EXITCODE
(
»t
, 
sig
è
	`__W_EXITCODE
 (»t, sig)

	)

95 
	#W_STOPCODE
(
sig
è
	`__W_STOPCODE
 (sig)

	)

99 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


102 
	mP_ALL
,

103 
	mP_PID
,

104 
	mP_PGID


105 } 
	tidty³_t
;

114 
__pid_t
 
wa™
 (
__WAIT_STATUS
 
__¡©_loc
);

116 #ifdef 
__USE_BSD


118 
	#WAIT_ANY
 (-1è

	)

119 
	#WAIT_MYPGRP
 0

	)

137 
__pid_t
 
wa™pid
 (__pid_ˆ
__pid
, *
__¡©_loc
, 
__İtiÚs
);

139 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


140 #iâdeà
__id_t_defšed


141 
	~<b™s/ty³s.h
>

142 
__id_t
 
	tid_t
;

143 
	#__id_t_defšed


	)

146 
	#__Ãed_sigšfo_t


	)

147 
	~<b™s/sigšfo.h
>

160 
wa™id
 (
idty³_t
 
__idty³
, 
__id_t
 
__id
, 
sigšfo_t
 *
__šfİ
,

161 
__İtiÚs
);

164 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


167 
	gru§ge
;

174 
__pid_t
 
	$wa™3
 (
__WAIT_STATUS
 
__¡©_loc
, 
__İtiÚs
,

175 
ru§ge
 * 
__u§ge
è
__THROWNL
;

178 #ifdeà
__USE_BSD


180 
__pid_t
 
	$wa™4
 (
__pid_t
 
__pid
, 
__WAIT_STATUS
 
__¡©_loc
, 
__İtiÚs
,

181 
ru§ge
 *
__u§ge
è
__THROWNL
;

185 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

635 #iâdeà
__FAVOR_BSD


636 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

638 #ifdeà
__REDIRECT_NTH


639 
__pid_t
 
	`__REDIRECT_NTH
 (
g‘pg½
, (__pid_ˆ
__pid
), 
__g‘pgid
);

641 
	#g‘pg½
 
__g‘pgid


	)

646 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

647 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


648 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

655 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

657 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


668 #iâdeà
__FAVOR_BSD


672 
	$£g½
 (è
__THROW
;

677 #ifdeà
__REDIRECT_NTH


678 
	`__REDIRECT_NTH
 (
£g½
, (
__pid_t
 
__pid
, __pid_ˆ
__pg½
), 
£gid
);

680 
	#£g½
 
£gid


	)

689 
__pid_t
 
	$£tsid
 (è
__THROW
;

691 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


693 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

697 
__uid_t
 
	$g‘uid
 (è
__THROW
;

700 
__uid_t
 
	$g‘euid
 (è
__THROW
;

703 
__gid_t
 
	$g‘gid
 (è
__THROW
;

706 
__gid_t
 
	$g‘egid
 (è
__THROW
;

711 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

713 #ifdef 
__USE_GNU


715 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

722 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

724 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


727 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

730 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


732 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

739 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

741 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


744 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

747 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


749 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

752 #ifdeà
__USE_GNU


755 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

756 
__THROW
;

760 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

761 
__THROW
;

765 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

766 
__THROW
 
__wur
;

770 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

771 
__THROW
 
__wur
;

778 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

780 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

781 || 
defšed
 
__USE_BSD


786 
__pid_t
 
	$vfÜk
 (è
__THROW
;

792 *
	$‰yÇme
 (
__fd
è
__THROW
;

796 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

797 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

801 
	$i§‰y
 (
__fd
è
__THROW
;

803 #ià
defšed
 
__USE_BSD
 \

804 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

807 
	$‰y¦Ù
 (è
__THROW
;

812 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

813 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

815 #ifdeà
__USE_ATFILE


818 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

819 cÚ¡ *
__to
, 
__æags
)

820 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

823 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


825 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

826 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

831 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

832 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

833 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

836 #ifdeà
__USE_ATFILE


838 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

839 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

842 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

843 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

844 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

848 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

850 #ifdeà
__USE_ATFILE


852 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

853 
__THROW
 
	`__nÚnuÎ
 ((2));

857 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

861 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

864 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

871 *
	`g‘logš
 ();

872 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


879 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

882 #ifdef 
__USE_BSD


884 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

888 #ifdef 
__USE_POSIX2


892 
	#__Ãed_g‘İt


	)

893 
	~<g‘İt.h
>

897 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


901 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

905 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

908 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

909 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

913 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

919 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

920 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

921 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

922 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

928 
	$vhªgup
 (è
__THROW
;

931 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

939 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

940 
size_t
 
__off£t
, 
__sÿË
)

941 
__THROW
 
	`__nÚnuÎ
 ((1));

947 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

951 *
	$g‘u£rsh–l
 (è
__THROW
;

952 
	$’du£rsh–l
 (è
__THROW
;

953 
	$£tu£rsh–l
 (è
__THROW
;

959 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

963 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

966 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

970 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

978 
	`fsync
 (
__fd
);

981 #ifdeà
__USE_GNU


984 
	$syncfs
 (
__fd
è
__THROW
;

988 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


991 
	`g‘ho¡id
 ();

994 
	$sync
 (è
__THROW
;

997 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


1000 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

1005 
	$g‘dbËsize
 (è
__THROW
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


1014 #iâdeà
__USE_FILE_OFFSET64


1015 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

1016 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1020 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

1021 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1023 
	#Œunÿ‹
 
Œunÿ‹64


	)

1026 #ifdeà
__USE_LARGEFILE64


1027 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1028 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1033 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1034 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1037 #iâdeà
__USE_FILE_OFFSET64


1038 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1040 #ifdeà
__REDIRECT_NTH


1041 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1042 
árunÿ‹64
è
__wur
;

1044 
	#árunÿ‹
 
árunÿ‹64


	)

1047 #ifdeà
__USE_LARGEFILE64


1048 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1054 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1055 || 
defšed
 
__USE_MISC


1059 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1065 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1069 #ifdeà
__USE_MISC


1080 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1085 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1097 
	#F_ULOCK
 0

	)

1098 
	#F_LOCK
 1

	)

1099 
	#F_TLOCK
 2

	)

1100 
	#F_TEST
 3

	)

1102 #iâdeà
__USE_FILE_OFFSET64


1103 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1105 #ifdeà
__REDIRECT


1106 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1107 
lockf64
è
__wur
;

1109 
	#lockf
 
lockf64


	)

1112 #ifdeà
__USE_LARGEFILE64


1113 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1118 #ifdeà
__USE_GNU


1123 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1124 (
__ex‹nsiÚ__
 \

1125 ({ 
__»suÉ
; \

1126 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1127 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1128 
__»suÉ
; 
	}
}))

	)

1131 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1134 
fd©async
 (
__fdes
);

1140 #ifdef 
__USE_XOPEN


1142 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1143 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1147 
	$’üy±
 (*
__libc_block
, 
__edæag
è
__THROW
 
	`__nÚnuÎ
 ((1));

1154 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1155 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1161 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1163 *
	$ù”mid
 (*
__s
è
__THROW
;

1168 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1169 
	~<b™s/uni¡d.h
>

1172 
__END_DECLS


	@/usr/include/zlib.h

31 #iâdeà
ZLIB_H


32 
	#ZLIB_H


	)

34 
	~"zcÚf.h
"

36 #ifdeà
__ılu¥lus


40 
	#ZLIB_VERSION
 "1.2.7"

	)

41 
	#ZLIB_VERNUM
 0x1270

	)

42 
	#ZLIB_VER_MAJOR
 1

	)

43 
	#ZLIB_VER_MINOR
 2

	)

44 
	#ZLIB_VER_REVISION
 7

	)

45 
	#ZLIB_VER_SUBREVISION
 0

	)

80 
voidpf
 (*
	t®loc_func
è
	tOF
((
	tvoidpf
 
	tİaque
, 
	tuIÁ
 
	t™ems
, uIÁ 
	tsize
));

81 (*
ä“_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	tadd»ss
));

83 
š‹º®_¡©e
;

85 
	sz_¡»am_s
 {

86 
z_cÚ¡
 
By‹f
 *
Ãxt_š
;

87 
uIÁ
 
ava_š
;

88 
uLÚg
 
tÙ®_š
;

90 
By‹f
 *
Ãxt_out
;

91 
uIÁ
 
ava_out
;

92 
uLÚg
 
tÙ®_out
;

94 
z_cÚ¡
 *
msg
;

95 
š‹º®_¡©e
 
FAR
 *
¡©e
;

97 
®loc_func
 
z®loc
;

98 
ä“_func
 
zä“
;

99 
voidpf
 
İaque
;

101 
d©a_ty³
;

102 
uLÚg
 
adËr
;

103 
uLÚg
 
»£rved
;

104 } 
	tz_¡»am
;

106 
z_¡»am
 
	tFAR
 *
	tz_¡»amp
;

112 
	sgz_h—d”_s
 {

113 
‹xt
;

114 
uLÚg
 
time
;

115 
xæags
;

116 
os
;

117 
By‹f
 *
exŒa
;

118 
uIÁ
 
exŒa_Ën
;

119 
uIÁ
 
exŒa_max
;

120 
By‹f
 *
Çme
;

121 
uIÁ
 
Çme_max
;

122 
By‹f
 *
comm’t
;

123 
uIÁ
 
comm_max
;

124 
hüc
;

125 
dÚe
;

127 } 
	tgz_h—d”
;

129 
gz_h—d”
 
	tFAR
 *
	tgz_h—d”p
;

164 
	#Z_NO_FLUSH
 0

	)

165 
	#Z_PARTIAL_FLUSH
 1

	)

166 
	#Z_SYNC_FLUSH
 2

	)

167 
	#Z_FULL_FLUSH
 3

	)

168 
	#Z_FINISH
 4

	)

169 
	#Z_BLOCK
 5

	)

170 
	#Z_TREES
 6

	)

173 
	#Z_OK
 0

	)

174 
	#Z_STREAM_END
 1

	)

175 
	#Z_NEED_DICT
 2

	)

176 
	#Z_ERRNO
 (-1)

	)

177 
	#Z_STREAM_ERROR
 (-2)

	)

178 
	#Z_DATA_ERROR
 (-3)

	)

179 
	#Z_MEM_ERROR
 (-4)

	)

180 
	#Z_BUF_ERROR
 (-5)

	)

181 
	#Z_VERSION_ERROR
 (-6)

	)

186 
	#Z_NO_COMPRESSION
 0

	)

187 
	#Z_BEST_SPEED
 1

	)

188 
	#Z_BEST_COMPRESSION
 9

	)

189 
	#Z_DEFAULT_COMPRESSION
 (-1)

	)

192 
	#Z_FILTERED
 1

	)

193 
	#Z_HUFFMAN_ONLY
 2

	)

194 
	#Z_RLE
 3

	)

195 
	#Z_FIXED
 4

	)

196 
	#Z_DEFAULT_STRATEGY
 0

	)

199 
	#Z_BINARY
 0

	)

200 
	#Z_TEXT
 1

	)

201 
	#Z_ASCII
 
Z_TEXT


	)

202 
	#Z_UNKNOWN
 2

	)

205 
	#Z_DEFLATED
 8

	)

208 
	#Z_NULL
 0

	)

210 
	#zlib_v”siÚ
 
	`zlibV”siÚ
()

	)

216 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zlibV”siÚ
 
OF
(());

246 
ZEXTERN
 
ZEXPORT
 
deæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

353 
ZEXTERN
 
ZEXPORT
 
deæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

392 
ZEXTERN
 
ZEXPORT
 
šæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

508 
ZEXTERN
 
ZEXPORT
 
šæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

587 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

588 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

589 
uIÁ
 
diùL’gth
));

631 
ZEXTERN
 
ZEXPORT
 
deæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

632 
z_¡»amp
 
sourû
));

649 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

660 
ZEXTERN
 
ZEXPORT
 
deæ©eP¬ams
 
OF
((
z_¡»amp
 
¡rm
,

661 
Ëv–
,

662 
¡¿‹gy
));

681 
ZEXTERN
 
ZEXPORT
 
deæ©eTuÃ
 
OF
((
z_¡»amp
 
¡rm
,

682 
good_Ëngth
,

683 
max_Ïzy
,

684 
niû_Ëngth
,

685 
max_chaš
));

698 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
deæ©eBound
 
OF
((
z_¡»amp
 
¡rm
,

699 
uLÚg
 
sourûL’
));

713 
ZEXTERN
 
ZEXPORT
 
deæ©eP’dšg
 
OF
((
z_¡»amp
 
¡rm
,

714 *
³ndšg
,

715 *
b™s
));

728 
ZEXTERN
 
ZEXPORT
 
deæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

729 
b™s
,

730 
v®ue
));

745 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

746 
gz_h—d”p
 
h—d
));

819 
ZEXTERN
 
ZEXPORT
 
šæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

820 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

821 
uIÁ
 
diùL’gth
));

842 
ZEXTERN
 
ZEXPORT
 
šæ©eSync
 
OF
((
z_¡»amp
 
¡rm
));

861 
ZEXTERN
 
ZEXPORT
 
šæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

862 
z_¡»amp
 
sourû
));

877 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

887 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t2
 
OF
((
z_¡»amp
 
¡rm
,

888 
wšdowB™s
));

899 
ZEXTERN
 
ZEXPORT
 
šæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

900 
b™s
,

901 
v®ue
));

920 
ZEXTERN
 
ZEXPORT
 
šæ©eM¬k
 
OF
((
z_¡»amp
 
¡rm
));

948 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

949 
gz_h—d”p
 
h—d
));

1010 (*
š_func
è
	tOF
((
	tFAR
 *, FAR * FAR *));

1011 (*
out_func
è
	tOF
((
	tFAR
 *, FAR *, ));

1013 
ZEXTERN
 
ZEXPORT
 
šæ©eBack
 
OF
((
z_¡»amp
 
¡rm
,

1014 
š_func
 
š
, 
FAR
 *
š_desc
,

1015 
out_func
 
out
, 
FAR
 *
out_desc
));

1082 
ZEXTERN
 
ZEXPORT
 
šæ©eBackEnd
 
OF
((
z_¡»amp
 
¡rm
));

1090 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
zlibCompeFÏgs
 
OF
(());

1131 #iâdeà
Z_SOLO


1143 
ZEXTERN
 
ZEXPORT
 
com´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1144 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1157 
ZEXTERN
 
ZEXPORT
 
com´ess2
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1158 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
,

1159 
Ëv–
));

1173 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
com´essBound
 
OF
((uLÚg 
sourûL’
));

1180 
ZEXTERN
 
ZEXPORT
 
uncom´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1181 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1207 
gzFe_s
 *
	tgzFe
;

1247 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzdİ’
 
OF
((
fd
, cÚ¡ *
mode
));

1270 
ZEXTERN
 
ZEXPORT
 
gzbufãr
 
OF
((
gzFe
 
fe
, 
size
));

1287 
ZEXTERN
 
ZEXPORT
 
gz£¬ams
 
OF
((
gzFe
 
fe
, 
Ëv–
, 
¡¿‹gy
));

1296 
ZEXTERN
 
ZEXPORT
 
gz»ad
 
OF
((
gzFe
 
fe
, 
voidp
 
buf
, 
Ën
));

1324 
ZEXTERN
 
ZEXPORT
 
gzwr™e
 
OF
((
gzFe
 
fe
,

1325 
voidpc
 
buf
, 
Ën
));

1332 
ZEXTERN
 
ZEXPORTVA
 
gz´štf
 
Z_ARG
((
gzFe
 
fe
, cÚ¡ *
fÜm©
, ...));

1347 
ZEXTERN
 
ZEXPORT
 
gzputs
 
OF
((
gzFe
 
fe
, cÚ¡ *
s
));

1355 
ZEXTERN
 * 
ZEXPORT
 
gzg‘s
 
OF
((
gzFe
 
fe
, *
buf
, 
Ën
));

1368 
ZEXTERN
 
ZEXPORT
 
gzputc
 
OF
((
gzFe
 
fe
, 
c
));

1374 
ZEXTERN
 
ZEXPORT
 
gzg‘c
 
OF
((
gzFe
 
fe
));

1383 
ZEXTERN
 
ZEXPORT
 
gzung‘c
 
OF
((
c
, 
gzFe
 
fe
));

1395 
ZEXTERN
 
ZEXPORT
 
gzæush
 
OF
((
gzFe
 
fe
, 
æush
));

1430 
ZEXTERN
 
ZEXPORT
 
gz»wšd
 
OF
((
gzFe
 
fe
));

1458 
ZEXTERN
 
ZEXPORT
 
gzeof
 
OF
((
gzFe
 
fe
));

1473 
ZEXTERN
 
ZEXPORT
 
gzdœeù
 
OF
((
gzFe
 
fe
));

1494 
ZEXTERN
 
ZEXPORT
 
gzşo£
 
OF
((
gzFe
 
fe
));

1507 
ZEXTERN
 
ZEXPORT
 
gzşo£_r
 
OF
((
gzFe
 
fe
));

1508 
ZEXTERN
 
ZEXPORT
 
gzşo£_w
 
OF
((
gzFe
 
fe
));

1519 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
gz”rÜ
 
OF
((
gzFe
 
fe
, *
”ºum
));

1535 
ZEXTERN
 
ZEXPORT
 
gzş—»¼
 
OF
((
gzFe
 
fe
));

1552 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32
 
OF
((uLÚg 
adËr
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1583 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32
 
OF
((uLÚg 
üc
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1616 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
,

1617 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1618 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
,

1619 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1620 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
, 
m‘hod
,

1621 
wšdowB™s
, 
memLev–
,

1622 
¡¿‹gy
, cÚ¡ *
v”siÚ
,

1623 
¡»am_size
));

1624 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1625 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1626 
ZEXTERN
 
ZEXPORT
 
šæ©eBackIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1627 
FAR
 *
wšdow
,

1628 cÚ¡ *
v”siÚ
,

1629 
¡»am_size
));

1630 
	#deæ©eIn™
(
¡rm
, 
Ëv–
) \

1631 
	`deæ©eIn™_
((
¡rm
), (
Ëv–
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1632 
	#šæ©eIn™
(
¡rm
) \

1633 
	`šæ©eIn™_
((
¡rm
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1634 
	#deæ©eIn™2
(
¡rm
, 
Ëv–
, 
m‘hod
, 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
) \

1635 
	`deæ©eIn™2_
((
¡rm
),(
Ëv–
),(
m‘hod
),(
wšdowB™s
),(
memLev–
),\

1636 (
¡¿‹gy
), 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1637 
	#šæ©eIn™2
(
¡rm
, 
wšdowB™s
) \

1638 
	`šæ©eIn™2_
((
¡rm
), (
wšdowB™s
), 
ZLIB_VERSION
, \

1639 ()(
z_¡»am
))

	)

1640 
	#šæ©eBackIn™
(
¡rm
, 
wšdowB™s
, 
wšdow
) \

1641 
	`šæ©eBackIn™_
((
¡rm
), (
wšdowB™s
), (
wšdow
), \

1642 
ZLIB_VERSION
, ()(
z_¡»am
))

	)

1644 #iâdeà
Z_SOLO


1653 
	sgzFe_s
 {

1654 
have
;

1655 *
Ãxt
;

1656 
z_off64_t
 
pos
;

1658 
ZEXTERN
 
ZEXPORT
 
gzg‘c_
 
OF
((
gzFe
 
fe
));

1659 #ifdeà
Z_PREFIX_SET


1660 #undeà
z_gzg‘c


1661 
	#z_gzg‘c
(
g
) \

1662 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1664 
	#gzg‘c
(
g
) \

1665 ((
g
)->
have
 ? ((g)->have--, (g)->
pos
++, *((g)->
Ãxt
)++è: 
	`gzg‘c
(g))

	)

1674 #ifdeà
Z_LARGE64


1675 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1676 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off64_t, ));

1677 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1678 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1679 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1680 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1683 #ià!
defšed
(
ZLIB_INTERNAL
è&& defšed(
Z_WANT64
)

1684 #ifdeà
Z_PREFIX_SET


1685 
	#z_gzİ’
 
z_gzİ’64


	)

1686 
	#z_gz£ek
 
z_gz£ek64


	)

1687 
	#z_gz‹Î
 
z_gz‹Î64


	)

1688 
	#z_gzoff£t
 
z_gzoff£t64


	)

1689 
	#z_adËr32_combše
 
z_adËr32_combše64


	)

1690 
	#z_üc32_combše
 
z_üc32_combše64


	)

1692 
	#gzİ’
 
gzİ’64


	)

1693 
	#gz£ek
 
gz£ek64


	)

1694 
	#gz‹Î
 
gz‹Î64


	)

1695 
	#gzoff£t
 
gzoff£t64


	)

1696 
	#adËr32_combše
 
adËr32_combše64


	)

1697 
	#üc32_combše
 
üc32_combše64


	)

1699 #iâdeà
Z_LARGE64


1700 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1701 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off_t, ));

1702 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1703 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t64
 
OF
((
gzFe
));

1704 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1705 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1708 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’
 
OF
((const *, const *));

1709 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek
 
OF
((
gzFe
, z_off_t, ));

1710 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î
 
OF
((
gzFe
));

1711 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzoff£t
 
OF
((
gzFe
));

1712 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1713 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1718 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1719 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1724 #ià!
defšed
(
ZUTIL_H
è&& !defšed(
NO_DUMMY_DECL
)

1725 
	sš‹º®_¡©e
 {
dummy
;};

1729 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zE¼Ü
 
OF
(());

1730 
ZEXTERN
 
ZEXPORT
 
šæ©eSyncPošt
 
OF
((
z_¡»amp
));

1731 
ZEXTERN
 cÚ¡ 
z_üc_t
 
FAR
 * 
ZEXPORT
 
g‘_üc_bË
 
OF
(());

1732 
ZEXTERN
 
ZEXPORT
 
šæ©eUnd”mše
 
OF
((
z_¡»amp
, ));

1733 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1734 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£tK“p
 
OF
((
z_¡»amp
));

1735 #ià
defšed
(
_WIN32
è&& !defšed(
Z_SOLO
)

1736 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’_w
 
OF
((cÚ¡ 
wch¬_t
 *
·th
,

1737 cÚ¡ *
mode
));

1740 #ifdeà
__ılu¥lus


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/asm/unistd.h

1 #iâdeà
_ASM_X86_UNISTD_H


2 
	#_ASM_X86_UNISTD_H


	)

5 
	#__X32_SYSCALL_BIT
 0x40000000

	)

7 #ifdeà
__i386__


8 
	~<asm/uni¡d_32.h
>

9 #–ià
defšed
(
__ILP32__
)

10 
	~<asm/uni¡d_x32.h
>

12 
	~<asm/uni¡d_64.h
>

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__butš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__butš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

137 #–ià
__GLIBC_HAVE_LONG_LONG


138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/confname.h

20 #iâdeà
_UNISTD_H


27 
	m_PC_LINK_MAX
,

28 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

29 
	m_PC_MAX_CANON
,

30 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

31 
	m_PC_MAX_INPUT
,

32 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

33 
	m_PC_NAME_MAX
,

34 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

35 
	m_PC_PATH_MAX
,

36 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

37 
	m_PC_PIPE_BUF
,

38 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

39 
	m_PC_CHOWN_RESTRICTED
,

40 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

41 
	m_PC_NO_TRUNC
,

42 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

43 
	m_PC_VDISABLE
,

44 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

45 
	m_PC_SYNC_IO
,

46 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

47 
	m_PC_ASYNC_IO
,

48 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

49 
	m_PC_PRIO_IO
,

50 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

51 
	m_PC_SOCK_MAXBUF
,

52 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

53 
	m_PC_FILESIZEBITS
,

54 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

55 
	m_PC_REC_INCR_XFER_SIZE
,

56 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

57 
	m_PC_REC_MAX_XFER_SIZE
,

58 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

59 
	m_PC_REC_MIN_XFER_SIZE
,

60 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

61 
	m_PC_REC_XFER_ALIGN
,

62 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

63 
	m_PC_ALLOC_SIZE_MIN
,

64 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

65 
	m_PC_SYMLINK_MAX
,

66 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

67 
	m_PC_2_SYMLINKS


68 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

74 
	m_SC_ARG_MAX
,

75 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

76 
	m_SC_CHILD_MAX
,

77 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

78 
	m_SC_CLK_TCK
,

79 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

80 
	m_SC_NGROUPS_MAX
,

81 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

82 
	m_SC_OPEN_MAX
,

83 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

84 
	m_SC_STREAM_MAX
,

85 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

86 
	m_SC_TZNAME_MAX
,

87 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

88 
	m_SC_JOB_CONTROL
,

89 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

90 
	m_SC_SAVED_IDS
,

91 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

92 
	m_SC_REALTIME_SIGNALS
,

93 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

94 
	m_SC_PRIORITY_SCHEDULING
,

95 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

96 
	m_SC_TIMERS
,

97 
	#_SC_TIMERS
 
_SC_TIMERS


	)

98 
	m_SC_ASYNCHRONOUS_IO
,

99 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

100 
	m_SC_PRIORITIZED_IO
,

101 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

102 
	m_SC_SYNCHRONIZED_IO
,

103 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

104 
	m_SC_FSYNC
,

105 
	#_SC_FSYNC
 
_SC_FSYNC


	)

106 
	m_SC_MAPPED_FILES
,

107 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

108 
	m_SC_MEMLOCK
,

109 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

110 
	m_SC_MEMLOCK_RANGE
,

111 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

112 
	m_SC_MEMORY_PROTECTION
,

113 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

114 
	m_SC_MESSAGE_PASSING
,

115 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

116 
	m_SC_SEMAPHORES
,

117 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

118 
	m_SC_SHARED_MEMORY_OBJECTS
,

119 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

120 
	m_SC_AIO_LISTIO_MAX
,

121 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

122 
	m_SC_AIO_MAX
,

123 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

124 
	m_SC_AIO_PRIO_DELTA_MAX
,

125 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

126 
	m_SC_DELAYTIMER_MAX
,

127 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

128 
	m_SC_MQ_OPEN_MAX
,

129 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

130 
	m_SC_MQ_PRIO_MAX
,

131 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

132 
	m_SC_VERSION
,

133 
	#_SC_VERSION
 
_SC_VERSION


	)

134 
	m_SC_PAGESIZE
,

135 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

136 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

137 
	m_SC_RTSIG_MAX
,

138 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

139 
	m_SC_SEM_NSEMS_MAX
,

140 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

141 
	m_SC_SEM_VALUE_MAX
,

142 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

143 
	m_SC_SIGQUEUE_MAX
,

144 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

145 
	m_SC_TIMER_MAX
,

146 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

150 
	m_SC_BC_BASE_MAX
,

151 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

152 
	m_SC_BC_DIM_MAX
,

153 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

154 
	m_SC_BC_SCALE_MAX
,

155 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

156 
	m_SC_BC_STRING_MAX
,

157 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

158 
	m_SC_COLL_WEIGHTS_MAX
,

159 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

160 
	m_SC_EQUIV_CLASS_MAX
,

161 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

162 
	m_SC_EXPR_NEST_MAX
,

163 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

164 
	m_SC_LINE_MAX
,

165 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

166 
	m_SC_RE_DUP_MAX
,

167 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

168 
	m_SC_CHARCLASS_NAME_MAX
,

169 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

171 
	m_SC_2_VERSION
,

172 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

173 
	m_SC_2_C_BIND
,

174 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

175 
	m_SC_2_C_DEV
,

176 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

177 
	m_SC_2_FORT_DEV
,

178 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

179 
	m_SC_2_FORT_RUN
,

180 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

181 
	m_SC_2_SW_DEV
,

182 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

183 
	m_SC_2_LOCALEDEF
,

184 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

186 
	m_SC_PII
,

187 
	#_SC_PII
 
_SC_PII


	)

188 
	m_SC_PII_XTI
,

189 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

190 
	m_SC_PII_SOCKET
,

191 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

192 
	m_SC_PII_INTERNET
,

193 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

194 
	m_SC_PII_OSI
,

195 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

196 
	m_SC_POLL
,

197 
	#_SC_POLL
 
_SC_POLL


	)

198 
	m_SC_SELECT
,

199 
	#_SC_SELECT
 
_SC_SELECT


	)

200 
	m_SC_UIO_MAXIOV
,

201 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

202 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

203 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

204 
	m_SC_PII_INTERNET_STREAM
,

205 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

206 
	m_SC_PII_INTERNET_DGRAM
,

207 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

208 
	m_SC_PII_OSI_COTS
,

209 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

210 
	m_SC_PII_OSI_CLTS
,

211 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

212 
	m_SC_PII_OSI_M
,

213 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

214 
	m_SC_T_IOV_MAX
,

215 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

218 
	m_SC_THREADS
,

219 
	#_SC_THREADS
 
_SC_THREADS


	)

220 
	m_SC_THREAD_SAFE_FUNCTIONS
,

221 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

222 
	m_SC_GETGR_R_SIZE_MAX
,

223 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

224 
	m_SC_GETPW_R_SIZE_MAX
,

225 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

226 
	m_SC_LOGIN_NAME_MAX
,

227 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

228 
	m_SC_TTY_NAME_MAX
,

229 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

230 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

231 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

232 
	m_SC_THREAD_KEYS_MAX
,

233 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

234 
	m_SC_THREAD_STACK_MIN
,

235 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

236 
	m_SC_THREAD_THREADS_MAX
,

237 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

238 
	m_SC_THREAD_ATTR_STACKADDR
,

239 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

240 
	m_SC_THREAD_ATTR_STACKSIZE
,

241 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

242 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

243 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

244 
	m_SC_THREAD_PRIO_INHERIT
,

245 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

246 
	m_SC_THREAD_PRIO_PROTECT
,

247 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

248 
	m_SC_THREAD_PROCESS_SHARED
,

249 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

251 
	m_SC_NPROCESSORS_CONF
,

252 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

253 
	m_SC_NPROCESSORS_ONLN
,

254 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

255 
	m_SC_PHYS_PAGES
,

256 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

257 
	m_SC_AVPHYS_PAGES
,

258 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

259 
	m_SC_ATEXIT_MAX
,

260 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

261 
	m_SC_PASS_MAX
,

262 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

264 
	m_SC_XOPEN_VERSION
,

265 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

266 
	m_SC_XOPEN_XCU_VERSION
,

267 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

268 
	m_SC_XOPEN_UNIX
,

269 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

270 
	m_SC_XOPEN_CRYPT
,

271 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

272 
	m_SC_XOPEN_ENH_I18N
,

273 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

274 
	m_SC_XOPEN_SHM
,

275 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

277 
	m_SC_2_CHAR_TERM
,

278 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

279 
	m_SC_2_C_VERSION
,

280 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

281 
	m_SC_2_UPE
,

282 
	#_SC_2_UPE
 
_SC_2_UPE


	)

284 
	m_SC_XOPEN_XPG2
,

285 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

286 
	m_SC_XOPEN_XPG3
,

287 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

288 
	m_SC_XOPEN_XPG4
,

289 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

291 
	m_SC_CHAR_BIT
,

292 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

293 
	m_SC_CHAR_MAX
,

294 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

295 
	m_SC_CHAR_MIN
,

296 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

297 
	m_SC_INT_MAX
,

298 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

299 
	m_SC_INT_MIN
,

300 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

301 
	m_SC_LONG_BIT
,

302 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

303 
	m_SC_WORD_BIT
,

304 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

305 
	m_SC_MB_LEN_MAX
,

306 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

307 
	m_SC_NZERO
,

308 
	#_SC_NZERO
 
_SC_NZERO


	)

309 
	m_SC_SSIZE_MAX
,

310 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

311 
	m_SC_SCHAR_MAX
,

312 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

313 
	m_SC_SCHAR_MIN
,

314 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

315 
	m_SC_SHRT_MAX
,

316 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

317 
	m_SC_SHRT_MIN
,

318 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

319 
	m_SC_UCHAR_MAX
,

320 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

321 
	m_SC_UINT_MAX
,

322 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

323 
	m_SC_ULONG_MAX
,

324 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

325 
	m_SC_USHRT_MAX
,

326 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

328 
	m_SC_NL_ARGMAX
,

329 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

330 
	m_SC_NL_LANGMAX
,

331 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

332 
	m_SC_NL_MSGMAX
,

333 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

334 
	m_SC_NL_NMAX
,

335 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

336 
	m_SC_NL_SETMAX
,

337 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

338 
	m_SC_NL_TEXTMAX
,

339 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

341 
	m_SC_XBS5_ILP32_OFF32
,

342 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

343 
	m_SC_XBS5_ILP32_OFFBIG
,

344 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

345 
	m_SC_XBS5_LP64_OFF64
,

346 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

347 
	m_SC_XBS5_LPBIG_OFFBIG
,

348 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

350 
	m_SC_XOPEN_LEGACY
,

351 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

352 
	m_SC_XOPEN_REALTIME
,

353 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

354 
	m_SC_XOPEN_REALTIME_THREADS
,

355 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

357 
	m_SC_ADVISORY_INFO
,

358 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

359 
	m_SC_BARRIERS
,

360 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

361 
	m_SC_BASE
,

362 
	#_SC_BASE
 
_SC_BASE


	)

363 
	m_SC_C_LANG_SUPPORT
,

364 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

365 
	m_SC_C_LANG_SUPPORT_R
,

366 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

367 
	m_SC_CLOCK_SELECTION
,

368 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

369 
	m_SC_CPUTIME
,

370 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

371 
	m_SC_THREAD_CPUTIME
,

372 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

373 
	m_SC_DEVICE_IO
,

374 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

375 
	m_SC_DEVICE_SPECIFIC
,

376 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

377 
	m_SC_DEVICE_SPECIFIC_R
,

378 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

379 
	m_SC_FD_MGMT
,

380 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

381 
	m_SC_FIFO
,

382 
	#_SC_FIFO
 
_SC_FIFO


	)

383 
	m_SC_PIPE
,

384 
	#_SC_PIPE
 
_SC_PIPE


	)

385 
	m_SC_FILE_ATTRIBUTES
,

386 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

387 
	m_SC_FILE_LOCKING
,

388 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

389 
	m_SC_FILE_SYSTEM
,

390 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

391 
	m_SC_MONOTONIC_CLOCK
,

392 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

393 
	m_SC_MULTI_PROCESS
,

394 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

395 
	m_SC_SINGLE_PROCESS
,

396 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

397 
	m_SC_NETWORKING
,

398 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

399 
	m_SC_READER_WRITER_LOCKS
,

400 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

401 
	m_SC_SPIN_LOCKS
,

402 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

403 
	m_SC_REGEXP
,

404 
	#_SC_REGEXP
 
_SC_REGEXP


	)

405 
	m_SC_REGEX_VERSION
,

406 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

407 
	m_SC_SHELL
,

408 
	#_SC_SHELL
 
_SC_SHELL


	)

409 
	m_SC_SIGNALS
,

410 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

411 
	m_SC_SPAWN
,

412 
	#_SC_SPAWN
 
_SC_SPAWN


	)

413 
	m_SC_SPORADIC_SERVER
,

414 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

415 
	m_SC_THREAD_SPORADIC_SERVER
,

416 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

417 
	m_SC_SYSTEM_DATABASE
,

418 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

419 
	m_SC_SYSTEM_DATABASE_R
,

420 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

421 
	m_SC_TIMEOUTS
,

422 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

423 
	m_SC_TYPED_MEMORY_OBJECTS
,

424 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

425 
	m_SC_USER_GROUPS
,

426 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

427 
	m_SC_USER_GROUPS_R
,

428 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

429 
	m_SC_2_PBS
,

430 
	#_SC_2_PBS
 
_SC_2_PBS


	)

431 
	m_SC_2_PBS_ACCOUNTING
,

432 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

433 
	m_SC_2_PBS_LOCATE
,

434 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

435 
	m_SC_2_PBS_MESSAGE
,

436 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

437 
	m_SC_2_PBS_TRACK
,

438 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

439 
	m_SC_SYMLOOP_MAX
,

440 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

441 
	m_SC_STREAMS
,

442 
	#_SC_STREAMS
 
_SC_STREAMS


	)

443 
	m_SC_2_PBS_CHECKPOINT
,

444 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

446 
	m_SC_V6_ILP32_OFF32
,

447 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

448 
	m_SC_V6_ILP32_OFFBIG
,

449 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

450 
	m_SC_V6_LP64_OFF64
,

451 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

452 
	m_SC_V6_LPBIG_OFFBIG
,

453 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

455 
	m_SC_HOST_NAME_MAX
,

456 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

457 
	m_SC_TRACE
,

458 
	#_SC_TRACE
 
_SC_TRACE


	)

459 
	m_SC_TRACE_EVENT_FILTER
,

460 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

461 
	m_SC_TRACE_INHERIT
,

462 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

463 
	m_SC_TRACE_LOG
,

464 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

466 
	m_SC_LEVEL1_ICACHE_SIZE
,

467 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

468 
	m_SC_LEVEL1_ICACHE_ASSOC
,

469 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

470 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

471 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

472 
	m_SC_LEVEL1_DCACHE_SIZE
,

473 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

474 
	m_SC_LEVEL1_DCACHE_ASSOC
,

475 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

476 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

477 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

478 
	m_SC_LEVEL2_CACHE_SIZE
,

479 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

480 
	m_SC_LEVEL2_CACHE_ASSOC
,

481 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

482 
	m_SC_LEVEL2_CACHE_LINESIZE
,

483 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

484 
	m_SC_LEVEL3_CACHE_SIZE
,

485 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

486 
	m_SC_LEVEL3_CACHE_ASSOC
,

487 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

488 
	m_SC_LEVEL3_CACHE_LINESIZE
,

489 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

490 
	m_SC_LEVEL4_CACHE_SIZE
,

491 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

492 
	m_SC_LEVEL4_CACHE_ASSOC
,

493 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

494 
	m_SC_LEVEL4_CACHE_LINESIZE
,

495 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

498 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

499 
	#_SC_IPV6
 
_SC_IPV6


	)

500 
	m_SC_RAW_SOCKETS
,

501 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

503 
	m_SC_V7_ILP32_OFF32
,

504 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

505 
	m_SC_V7_ILP32_OFFBIG
,

506 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

507 
	m_SC_V7_LP64_OFF64
,

508 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

509 
	m_SC_V7_LPBIG_OFFBIG
,

510 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

512 
	m_SC_SS_REPL_MAX
,

513 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

515 
	m_SC_TRACE_EVENT_NAME_MAX
,

516 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

517 
	m_SC_TRACE_NAME_MAX
,

518 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

519 
	m_SC_TRACE_SYS_MAX
,

520 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

521 
	m_SC_TRACE_USER_EVENT_MAX
,

522 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

524 
	m_SC_XOPEN_STREAMS
,

525 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

527 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

528 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

529 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


530 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

536 
	m_CS_PATH
,

537 
	#_CS_PATH
 
_CS_PATH


	)

539 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

540 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

541 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

543 
	m_CS_GNU_LIBC_VERSION
,

544 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

545 
	m_CS_GNU_LIBPTHREAD_VERSION
,

546 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

548 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

549 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

550 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

552 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

553 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

554 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

556 
	m_CS_LFS_CFLAGS
 = 1000,

557 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

558 
	m_CS_LFS_LDFLAGS
,

559 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

560 
	m_CS_LFS_LIBS
,

561 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

562 
	m_CS_LFS_LINTFLAGS
,

563 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

564 
	m_CS_LFS64_CFLAGS
,

565 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

566 
	m_CS_LFS64_LDFLAGS
,

567 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

568 
	m_CS_LFS64_LIBS
,

569 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

570 
	m_CS_LFS64_LINTFLAGS
,

571 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

573 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

574 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

575 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

576 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

577 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

578 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

579 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

580 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

581 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

582 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

583 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

584 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

585 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

586 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

587 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

588 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

589 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

590 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

591 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

592 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

593 
	m_CS_XBS5_LP64_OFF64_LIBS
,

594 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

595 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

596 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

597 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

598 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

599 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

600 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

601 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

602 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

603 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

604 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

606 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

607 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

608 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

609 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

610 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

611 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

612 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

613 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

614 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

615 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

616 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

617 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

618 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

619 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

620 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

621 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

622 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

623 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

624 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

625 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

626 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

627 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

628 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

629 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

630 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

631 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

632 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

633 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

634 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

635 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

636 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

637 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

639 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

640 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

641 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

642 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

643 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

644 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

645 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

646 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

647 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

648 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

649 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

650 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

651 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

652 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

653 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

654 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

655 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

656 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

657 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

658 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

659 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

660 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

661 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

662 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

663 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

664 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

665 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

666 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

667 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

668 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

669 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

670 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

672 
	m_CS_V6_ENV
,

673 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

674 
	m_CS_V7_ENV


675 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/dirent.h

18 #iâdeà
_DIRENT_H


22 
	sdœ’t


24 #iâdeà
__USE_FILE_OFFSET64


25 
__šo_t
 
	md_šo
;

26 
__off_t
 
	md_off
;

28 
__šo64_t
 
	md_šo
;

29 
__off64_t
 
	md_off
;

31 
	md_»ş’
;

32 
	md_ty³
;

33 
	md_Çme
[256];

36 #ifdeà
__USE_LARGEFILE64


37 
	sdœ’t64


39 
__šo64_t
 
	md_šo
;

40 
__off64_t
 
	md_off
;

41 
	md_»ş’
;

42 
	md_ty³
;

43 
	md_Çme
[256];

47 
	#d_f’o
 
d_šo


	)

49 #undeà
_DIRENT_HAVE_D_NAMLEN


50 
	#_DIRENT_HAVE_D_RECLEN


	)

51 
	#_DIRENT_HAVE_D_OFF


	)

52 
	#_DIRENT_HAVE_D_TYPE


	)

54 #ià
defšed
 
__OFF_T_MATCHES_OFF64_T
 && defšed 
__INO_T_MATCHES_INO64_T


56 
	#_DIRENT_MATCHES_DIRENT64
 1

	)

	@/usr/include/bits/dlfcn.h

19 #iâdeà
_DLFCN_H


24 
	#RTLD_LAZY
 0x00001

	)

25 
	#RTLD_NOW
 0x00002

	)

26 
	#RTLD_BINDING_MASK
 0x3

	)

27 
	#RTLD_NOLOAD
 0x00004

	)

28 
	#RTLD_DEEPBIND
 0x00008

	)

33 
	#RTLD_GLOBAL
 0x00100

	)

38 
	#RTLD_LOCAL
 0

	)

41 
	#RTLD_NODELETE
 0x01000

	)

43 #ifdeà
__USE_GNU


54 
	#DL_CALL_FCT
(
fùp
, 
¬gs
) \

55 (
	`_dl_mcouÁ_w¿µ”_check
 ((*è(
fùp
)), (*(fùp)è
¬gs
)

	)

57 
__BEGIN_DECLS


60 
	$_dl_mcouÁ_w¿µ”_check
 (*
__£låc
è
__THROW
;

62 
__END_DECLS


	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/environments.h

18 #iâdeà
_UNISTD_H


22 
	~<b™s/wÜdsize.h
>

42 #ià
__WORDSIZE
 == 64

56 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

57 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

58 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

61 
	#_POSIX_V7_LP64_OFF64
 1

	)

62 
	#_POSIX_V6_LP64_OFF64
 1

	)

63 
	#_XBS5_LP64_OFF64
 1

	)

69 
	#_POSIX_V7_ILP32_OFF32
 1

	)

70 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

71 
	#_POSIX_V6_ILP32_OFF32
 1

	)

72 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

73 
	#_XBS5_ILP32_OFF32
 1

	)

74 
	#_XBS5_ILP32_OFFBIG
 1

	)

91 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

92 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

93 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

94 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

95 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

96 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

19 #ifdeà
_ERRNO_H


21 #undeà
EDOM


22 #undeà
EILSEQ


23 #undeà
ERANGE


24 
	~<lšux/”ºo.h
>

27 
	#ENOTSUP
 
EOPNOTSUPP


	)

30 #iâdeà
ECANCELED


31 
	#ECANCELED
 125

	)

35 #iâdeà
EOWNERDEAD


36 
	#EOWNERDEAD
 130

	)

37 
	#ENOTRECOVERABLE
 131

	)

40 #iâdeà
ERFKILL


41 
	#ERFKILL
 132

	)

44 #iâdeà
EHWPOISON


45 
	#EHWPOISON
 133

	)

48 #iâdeà
__ASSEMBLER__


50 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

52 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


54 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

59 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


63 
	#EDOM
 33

	)

64 
	#EILSEQ
 84

	)

65 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

19 #iâdeà
_FCNTL_H


23 #ifdeà
__x86_64__


24 
	#__O_LARGEFILE
 0

	)

27 #ifdeà
__x86_64__


29 
	#F_GETLK64
 5

	)

30 
	#F_SETLK64
 6

	)

31 
	#F_SETLKW64
 7

	)

35 
	sæock


37 
	ml_ty³
;

38 
	ml_wh’û
;

39 #iâdeà
__USE_FILE_OFFSET64


40 
__off_t
 
	ml_¡¬t
;

41 
__off_t
 
	ml_Ën
;

43 
__off64_t
 
	ml_¡¬t
;

44 
__off64_t
 
	ml_Ën
;

46 
__pid_t
 
	ml_pid
;

49 #ifdeà
__USE_LARGEFILE64


50 
	sæock64


52 
	ml_ty³
;

53 
	ml_wh’û
;

54 
__off64_t
 
	ml_¡¬t
;

55 
__off64_t
 
	ml_Ën
;

56 
__pid_t
 
	ml_pid
;

61 
	~<b™s/fú-lšux.h
>

	@/usr/include/bits/fcntl2.h

19 #iâdef 
_FCNTL_H


25 #iâdeà
__USE_FILE_OFFSET64


26 
	$__İ’_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

27 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

28 
İ’
è
	`__nÚnuÎ
 ((1));

30 
	`__REDIRECT
 (
__İ’_2
, (cÚ¡ *
__·th
, 
__oæag
),

31 
__İ’64_2
è
	`__nÚnuÎ
 ((1));

32 
	`__REDIRECT
 (
__İ’_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
, ...),

33 
İ’64
è
	`__nÚnuÎ
 ((1));

35 
	`__”rÜdeş
 (
__İ’_too_mªy_¬gs
,

37 
	`__”rÜdeş
 (
__İ’_missšg_mode
,

40 
__fÜtify_funùiÚ
 

41 
	$İ’
 (cÚ¡ *
__·th
, 
__oæag
, ...)

43 ià(
	`__va_¬g_·ck_Ën
 () > 1)

44 
	`__İ’_too_mªy_¬gs
 ();

46 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

48 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

50 
	`__İ’_missšg_mode
 ();

51  
	`__İ’_2
 (
__·th
, 
__oæag
);

53  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

56 ià(
	`__va_¬g_·ck_Ën
 () < 1)

57  
	`__İ’_2
 (
__·th
, 
__oæag
);

59  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

60 
	}
}

63 #ifdeà
__USE_LARGEFILE64


64 
	$__İ’64_2
 (cÚ¡ *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

65 
	`__REDIRECT
 (
__İ’64_®Ÿs
, (cÚ¡ *
__·th
, 
__oæag
,

66 ...), 
İ’64
è
	`__nÚnuÎ
 ((1));

67 
	`__”rÜdeş
 (
__İ’64_too_mªy_¬gs
,

69 
	`__”rÜdeş
 (
__İ’64_missšg_mode
,

72 
__fÜtify_funùiÚ
 

73 
	$İ’64
 (cÚ¡ *
__·th
, 
__oæag
, ...)

75 ià(
	`__va_¬g_·ck_Ën
 () > 1)

76 
	`__İ’64_too_mªy_¬gs
 ();

78 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

80 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

82 
	`__İ’64_missšg_mode
 ();

83  
	`__İ’64_2
 (
__·th
, 
__oæag
);

85  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

88 ià(
	`__va_¬g_·ck_Ën
 () < 1)

89  
	`__İ’64_2
 (
__·th
, 
__oæag
);

91  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

92 
	}
}

96 #ifdeà
__USE_ATFILE


97 #iâdeà
__USE_FILE_OFFSET64


98 
	$__İ’©_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

99 
	`__nÚnuÎ
 ((2));

100 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

101 
__oæag
, ...), 
İ’©
)

102 
	`__nÚnuÎ
 ((2));

104 
	`__REDIRECT
 (
__İ’©_2
, (
__fd
, cÚ¡ *
__·th
,

105 
__oæag
), 
__İ’©64_2
)

106 
	`__nÚnuÎ
 ((2));

107 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

108 
__oæag
, ...), 
İ’©64
)

109 
	`__nÚnuÎ
 ((2));

111 
	`__”rÜdeş
 (
__İ’©_too_mªy_¬gs
,

113 
	`__”rÜdeş
 (
__İ’©_missšg_mode
,

116 
__fÜtify_funùiÚ
 

117 
	$İ’©
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

119 ià(
	`__va_¬g_·ck_Ën
 () > 1)

120 
	`__İ’©_too_mªy_¬gs
 ();

122 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

124 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

126 
	`__İ’©_missšg_mode
 ();

127  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

129  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

132 ià(
	`__va_¬g_·ck_Ën
 () < 1)

133  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

135  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

136 
	}
}

139 #ifdeà
__USE_LARGEFILE64


140 
	$__İ’©64_2
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
)

141 
	`__nÚnuÎ
 ((2));

142 
	`__REDIRECT
 (
__İ’©64_®Ÿs
, (
__fd
, cÚ¡ *
__·th
,

143 
__oæag
, ...), 
İ’©64
)

144 
	`__nÚnuÎ
 ((2));

145 
	`__”rÜdeş
 (
__İ’©64_too_mªy_¬gs
,

147 
	`__”rÜdeş
 (
__İ’©64_missšg_mode
,

150 
__fÜtify_funùiÚ
 

151 
	$İ’©64
 (
__fd
, cÚ¡ *
__·th
, 
__oæag
, ...)

153 ià(
	`__va_¬g_·ck_Ën
 () > 1)

154 
	`__İ’©64_too_mªy_¬gs
 ();

156 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

158 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

160 
	`__İ’©64_missšg_mode
 ();

161  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

163  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

166 ià(
	`__va_¬g_·ck_Ën
 () < 1)

167  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

169  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

170 
	}
}

	@/usr/include/bits/huge_val.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VAL
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

36 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

44 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


45 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

47 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


48 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

51 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

52 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

21 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

28 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

29 #–ià
__GNUC_PREREQ
(2,96)

30 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

31 #–ià
defšed
 
__GNUC__


33 
	#HUGE_VALF
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7f800000UL }).
__d
)

	)

40 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


46 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

49 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

50 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

27 #–ià
__GNUC_PREREQ
(2,96)

28 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 0x1.0
p32767L
)

	)

31 
	#__HUGE_VALL_by‹s
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

33 
	#__huge_v®l_t
 uniÚ { 
__c
[12]; 
__ld
; }

	)

34 #ifdeà
__GNUC__


35 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 \

36 ((
__huge_v®l_t
è{ 
__c
: 
__HUGE_VALL_by‹s
 }).
__ld
)

	)

38 
__huge_v®l_t
 
	g__huge_v®l
 = { 
__HUGE_VALL_by‹s
 };

39 
	#HUGE_VALL
 (
__huge_v®l
.
__ld
)

	)

	@/usr/include/bits/in.h

20 #iâdeà
_NETINET_IN_H


27 
	#IP_OPTIONS
 4

	)

28 
	#IP_HDRINCL
 3

	)

29 
	#IP_TOS
 1

	)

30 
	#IP_TTL
 2

	)

31 
	#IP_RECVOPTS
 6

	)

33 
	#IP_RECVRETOPTS
 
IP_RETOPTS


	)

34 
	#IP_RETOPTS
 7

	)

35 
	#IP_MULTICAST_IF
 32

	)

36 
	#IP_MULTICAST_TTL
 33

	)

37 
	#IP_MULTICAST_LOOP
 34

	)

38 
	#IP_ADD_MEMBERSHIP
 35

	)

39 
	#IP_DROP_MEMBERSHIP
 36

	)

40 
	#IP_UNBLOCK_SOURCE
 37

	)

41 
	#IP_BLOCK_SOURCE
 38

	)

42 
	#IP_ADD_SOURCE_MEMBERSHIP
 39

	)

43 
	#IP_DROP_SOURCE_MEMBERSHIP
 40

	)

44 
	#IP_MSFILTER
 41

	)

45 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


46 
	#MCAST_JOIN_GROUP
 42

	)

47 
	#MCAST_BLOCK_SOURCE
 43

	)

48 
	#MCAST_UNBLOCK_SOURCE
 44

	)

49 
	#MCAST_LEAVE_GROUP
 45

	)

50 
	#MCAST_JOIN_SOURCE_GROUP
 46

	)

51 
	#MCAST_LEAVE_SOURCE_GROUP
 47

	)

52 
	#MCAST_MSFILTER
 48

	)

53 
	#IP_MULTICAST_ALL
 49

	)

54 
	#IP_UNICAST_IF
 50

	)

56 
	#MCAST_EXCLUDE
 0

	)

57 
	#MCAST_INCLUDE
 1

	)

60 
	#IP_ROUTER_ALERT
 5

	)

61 
	#IP_PKTINFO
 8

	)

62 
	#IP_PKTOPTIONS
 9

	)

63 
	#IP_PMTUDISC
 10

	)

64 
	#IP_MTU_DISCOVER
 10

	)

65 
	#IP_RECVERR
 11

	)

66 
	#IP_RECVTTL
 12

	)

67 
	#IP_RECVTOS
 13

	)

68 
	#IP_MTU
 14

	)

69 
	#IP_FREEBIND
 15

	)

70 
	#IP_IPSEC_POLICY
 16

	)

71 
	#IP_XFRM_POLICY
 17

	)

72 
	#IP_PASSSEC
 18

	)

73 
	#IP_TRANSPARENT
 19

	)

74 
	#IP_MULTICAST_ALL
 49

	)

77 
	#IP_ORIGDSTADDR
 20

	)

78 
	#IP_RECVORIGDSTADDR
 
IP_ORIGDSTADDR


	)

80 
	#IP_MINTTL
 21

	)

84 
	#IP_PMTUDISC_DONT
 0

	)

85 
	#IP_PMTUDISC_WANT
 1

	)

86 
	#IP_PMTUDISC_DO
 2

	)

87 
	#IP_PMTUDISC_PROBE
 3

	)

90 
	#SOL_IP
 0

	)

92 
	#IP_DEFAULT_MULTICAST_TTL
 1

	)

93 
	#IP_DEFAULT_MULTICAST_LOOP
 1

	)

94 
	#IP_MAX_MEMBERSHIPS
 20

	)

96 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


100 
	s_İts


102 
š_addr
 
	m_d¡
;

103 
	m_İts
[40];

107 
	s_m»qn


109 
š_addr
 
	mimr_muÉŸddr
;

110 
š_addr
 
	mimr_add»ss
;

111 
	mimr_ifšdex
;

115 
	sš_pktšfo


117 
	mi_ifšdex
;

118 
š_addr
 
	mi_¥ec_d¡
;

119 
š_addr
 
	mi_addr
;

126 
	#IPV6_ADDRFORM
 1

	)

127 
	#IPV6_2292PKTINFO
 2

	)

128 
	#IPV6_2292HOPOPTS
 3

	)

129 
	#IPV6_2292DSTOPTS
 4

	)

130 
	#IPV6_2292RTHDR
 5

	)

131 
	#IPV6_2292PKTOPTIONS
 6

	)

132 
	#IPV6_CHECKSUM
 7

	)

133 
	#IPV6_2292HOPLIMIT
 8

	)

135 
	#SCM_SRCRT
 
IPV6_RXSRCRT


	)

137 
	#IPV6_NEXTHOP
 9

	)

138 
	#IPV6_AUTHHDR
 10

	)

139 
	#IPV6_UNICAST_HOPS
 16

	)

140 
	#IPV6_MULTICAST_IF
 17

	)

141 
	#IPV6_MULTICAST_HOPS
 18

	)

142 
	#IPV6_MULTICAST_LOOP
 19

	)

143 
	#IPV6_JOIN_GROUP
 20

	)

144 
	#IPV6_LEAVE_GROUP
 21

	)

145 
	#IPV6_ROUTER_ALERT
 22

	)

146 
	#IPV6_MTU_DISCOVER
 23

	)

147 
	#IPV6_MTU
 24

	)

148 
	#IPV6_RECVERR
 25

	)

149 
	#IPV6_V6ONLY
 26

	)

150 
	#IPV6_JOIN_ANYCAST
 27

	)

151 
	#IPV6_LEAVE_ANYCAST
 28

	)

152 
	#IPV6_IPSEC_POLICY
 34

	)

153 
	#IPV6_XFRM_POLICY
 35

	)

155 
	#IPV6_RECVPKTINFO
 49

	)

156 
	#IPV6_PKTINFO
 50

	)

157 
	#IPV6_RECVHOPLIMIT
 51

	)

158 
	#IPV6_HOPLIMIT
 52

	)

159 
	#IPV6_RECVHOPOPTS
 53

	)

160 
	#IPV6_HOPOPTS
 54

	)

161 
	#IPV6_RTHDRDSTOPTS
 55

	)

162 
	#IPV6_RECVRTHDR
 56

	)

163 
	#IPV6_RTHDR
 57

	)

164 
	#IPV6_RECVDSTOPTS
 58

	)

165 
	#IPV6_DSTOPTS
 59

	)

167 
	#IPV6_RECVTCLASS
 66

	)

168 
	#IPV6_TCLASS
 67

	)

171 
	#IPV6_ADD_MEMBERSHIP
 
IPV6_JOIN_GROUP


	)

172 
	#IPV6_DROP_MEMBERSHIP
 
IPV6_LEAVE_GROUP


	)

173 
	#IPV6_RXHOPOPTS
 
IPV6_HOPOPTS


	)

174 
	#IPV6_RXDSTOPTS
 
IPV6_DSTOPTS


	)

177 
	#IPV6_PMTUDISC_DONT
 0

	)

178 
	#IPV6_PMTUDISC_WANT
 1

	)

179 
	#IPV6_PMTUDISC_DO
 2

	)

180 
	#IPV6_PMTUDISC_PROBE
 3

	)

183 
	#SOL_IPV6
 41

	)

184 
	#SOL_ICMPV6
 58

	)

187 
	#IPV6_RTHDR_LOOSE
 0

	)

188 
	#IPV6_RTHDR_STRICT
 1

	)

190 
	#IPV6_RTHDR_TYPE_0
 0

	)

	@/usr/include/bits/inf.h

19 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__butš_šff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #iâdeà
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_fš™e
);

25 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_fš™e
);

26 #ifdeà
__MATH_DECLARE_LDOUBLE


27 #ifdeà
__NO_LONG_DOUBLE_MATH


28 
__REDIRECT_NTH
 (
aco¦
, (), 
__acos_fš™e
);

30 
__REDIRECT_NTH
 (
aco¦
, (), 
__aco¦_fš™e
);

34 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


36 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_fš™e
);

37 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_fš™e
);

38 #ifdeà
__MATH_DECLARE_LDOUBLE


39 #ifdeà
__NO_LONG_DOUBLE_MATH


40 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_fš™e
);

42 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_fš™e
);

48 
__REDIRECT_NTH
 (
asš
, (), 
__asš_fš™e
);

49 
__REDIRECT_NTH
 (
asšf
, (), 
__asšf_fš™e
);

50 #ifdeà
__MATH_DECLARE_LDOUBLE


51 #ifdeà
__NO_LONG_DOUBLE_MATH


52 
__REDIRECT_NTH
 (
asšl
, (), 
__asš_fš™e
);

54 
__REDIRECT_NTH
 (
asšl
, (), 
__asšl_fš™e
);

59 
__REDIRECT_NTH
 (
©ª2
, (, ), 
__©ª2_fš™e
);

60 
__REDIRECT_NTH
 (
©ª2f
, (, ), 
__©ª2f_fš™e
);

61 #ifdeà
__MATH_DECLARE_LDOUBLE


62 #ifdeà
__NO_LONG_DOUBLE_MATH


63 
__REDIRECT_NTH
 (
©ª2l
, (, ),

64 
__©ª2_fš™e
);

66 
__REDIRECT_NTH
 (
©ª2l
, (, ),

67 
__©ª2l_fš™e
);

71 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


73 
__REDIRECT_NTH
 (
©ªh
, (), 
__©ªh_fš™e
);

74 
__REDIRECT_NTH
 (
©ªhf
, (), 
__©ªhf_fš™e
);

75 #ifdeà
__MATH_DECLARE_LDOUBLE


76 #ifdeà
__NO_LONG_DOUBLE_MATH


77 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªh_fš™e
);

79 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªhl_fš™e
);

85 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_fš™e
);

86 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_fš™e
);

87 #ifdeà
__MATH_DECLARE_LDOUBLE


88 #ifdeà
__NO_LONG_DOUBLE_MATH


89 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_fš™e
);

91 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_fš™e
);

96 
__REDIRECT_NTH
 (
exp
, (), 
__exp_fš™e
);

97 
__REDIRECT_NTH
 (
expf
, (), 
__expf_fš™e
);

98 #ifdeà
__MATH_DECLARE_LDOUBLE


99 #ifdeà
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
ex¶
, (), 
__exp_fš™e
);

102 
__REDIRECT_NTH
 (
ex¶
, (), 
__ex¶_fš™e
);

106 #ifdeà
__USE_GNU


108 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_fš™e
);

109 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_fš™e
);

110 #ifdeà
__MATH_DECLARE_LDOUBLE


111 #ifdeà
__NO_LONG_DOUBLE_MATH


112 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_fš™e
);

114 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_fš™e
);

119 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_fš™e
);

120 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_fš™e
);

121 #ifdeà
__MATH_DECLARE_LDOUBLE


122 #ifdeà
__NO_LONG_DOUBLE_MATH


123 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_fš™e
);

125 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_fš™e
);

130 #ifdeà
__USE_ISOC99


132 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_fš™e
);

133 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_fš™e
);

134 #ifdeà
__MATH_DECLARE_LDOUBLE


135 #ifdeà
__NO_LONG_DOUBLE_MATH


136 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_fš™e
);

138 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_fš™e
);

144 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_fš™e
);

145 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_fš™e
);

146 #ifdeà
__MATH_DECLARE_LDOUBLE


147 #ifdeà
__NO_LONG_DOUBLE_MATH


148 
__REDIRECT_NTH
 (
fmodl
, (, ),

149 
__fmod_fš™e
);

151 
__REDIRECT_NTH
 (
fmodl
, (, ),

152 
__fmodl_fš™e
);

156 #ifdeà
__USE_ISOC99


158 
__REDIRECT_NTH
 (
hypÙ
, (, ), 
__hypÙ_fš™e
);

159 
__REDIRECT_NTH
 (
hypÙf
, (, ), 
__hypÙf_fš™e
);

160 #ifdeà
__MATH_DECLARE_LDOUBLE


161 #ifdeà
__NO_LONG_DOUBLE_MATH


162 
__REDIRECT_NTH
 (
hypÙl
, (, ),

163 
__hypÙ_fš™e
);

165 
__REDIRECT_NTH
 (
hypÙl
, (, ),

166 
__hypÙl_fš™e
);

171 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


173 
__REDIRECT_NTH
 (
j0
, (), 
__j0_fš™e
);

174 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_fš™e
);

175 #ifdeà
__MATH_DECLARE_LDOUBLE


176 #ifdeà
__NO_LONG_DOUBLE_MATH


177 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_fš™e
);

179 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_fš™e
);

184 
__REDIRECT_NTH
 (
y0
, (), 
__y0_fš™e
);

185 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_fš™e
);

186 #ifdeà
__MATH_DECLARE_LDOUBLE


187 #ifdeà
__NO_LONG_DOUBLE_MATH


188 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_fš™e
);

190 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_fš™e
);

195 
__REDIRECT_NTH
 (
j1
, (), 
__j1_fš™e
);

196 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_fš™e
);

197 #ifdeà
__MATH_DECLARE_LDOUBLE


198 #ifdeà
__NO_LONG_DOUBLE_MATH


199 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_fš™e
);

201 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_fš™e
);

206 
__REDIRECT_NTH
 (
y1
, (), 
__y1_fš™e
);

207 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_fš™e
);

208 #ifdeà
__MATH_DECLARE_LDOUBLE


209 #ifdeà
__NO_LONG_DOUBLE_MATH


210 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_fš™e
);

212 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_fš™e
);

217 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_fš™e
);

218 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_fš™e
);

219 #ifdeà
__MATH_DECLARE_LDOUBLE


220 #ifdeà
__NO_LONG_DOUBLE_MATH


221 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jn_fš™e
);

223 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jÆ_fš™e
);

228 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_fš™e
);

229 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_fš™e
);

230 #ifdeà
__MATH_DECLARE_LDOUBLE


231 #ifdeà
__NO_LONG_DOUBLE_MATH


232 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yn_fš™e
);

234 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yÆ_fš™e
);

239 #ifdeà
__USE_MISC


241 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_fš™e
);

242 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_fš™e
);

243 #ifdeà
__MATH_DECLARE_LDOUBLE


244 #ifdeà
__NO_LONG_DOUBLE_MATH


245 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

246 
__lgamma_r_fš™e
);

248 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

249 
__lgamm®_r_fš™e
);

254 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


256 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamma
 (
__d
))

258 #ifdeà
__USE_ISOC99


259 
__loÿl_signgam
 = 0;

260  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

262  
	`lgamma_r
 (
__d
, &
signgam
);

264 
	}
}

265 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgammaf
 (
__d
))

267 #ifdeà
__USE_ISOC99


268 
__loÿl_signgam
 = 0;

269  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

271  
	`lgammaf_r
 (
__d
, &
signgam
);

273 
	}
}

274 #ifdeà
__MATH_DECLARE_LDOUBLE


275 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamm®
 (
__d
))

277 #ifdeà
__USE_ISOC99


278 
__loÿl_signgam
 = 0;

279  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

281  
	`lgamm®_r
 (
__d
, &
signgam
);

283 
	}
}

287 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


289 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamma
 (
__d
))

291 #ifdeà
__USE_ISOC99


292 
__loÿl_signgam
 = 0;

293  
	`lgamma_r
 (
__d
, &
__loÿl_signgam
);

295  
	`lgamma_r
 (
__d
, &
signgam
);

297 
	}
}

298 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gammaf
 (
__d
))

300 #ifdeà
__USE_ISOC99


301 
__loÿl_signgam
 = 0;

302  
	`lgammaf_r
 (
__d
, &
__loÿl_signgam
);

304  
	`lgammaf_r
 (
__d
, &
signgam
);

306 
	}
}

307 #ifdeà
__MATH_DECLARE_LDOUBLE


308 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamm®
 (
__d
))

310 #ifdeà
__USE_ISOC99


311 
__loÿl_signgam
 = 0;

312  
	`lgamm®_r
 (
__d
, &
__loÿl_signgam
);

314  
	`lgamm®_r
 (
__d
, &
signgam
);

316 
	}
}

321 
__REDIRECT_NTH
 (
log
, (), 
__log_fš™e
);

322 
__REDIRECT_NTH
 (
logf
, (), 
__logf_fš™e
);

323 #ifdeà
__MATH_DECLARE_LDOUBLE


324 #ifdeà
__NO_LONG_DOUBLE_MATH


325 
__REDIRECT_NTH
 (
logl
, (), 
__log_fš™e
);

327 
__REDIRECT_NTH
 (
logl
, (), 
__logl_fš™e
);

332 
__REDIRECT_NTH
 (
log10
, (), 
__log10_fš™e
);

333 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_fš™e
);

334 #ifdeà
__MATH_DECLARE_LDOUBLE


335 #ifdeà
__NO_LONG_DOUBLE_MATH


336 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_fš™e
);

338 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_fš™e
);

342 #ifdeà
__USE_ISOC99


344 
__REDIRECT_NTH
 (
log2
, (), 
__log2_fš™e
);

345 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_fš™e
);

346 #ifdeà
__MATH_DECLARE_LDOUBLE


347 #ifdeà
__NO_LONG_DOUBLE_MATH


348 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_fš™e
);

350 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_fš™e
);

356 
__REDIRECT_NTH
 (
ldexp
, (, ), 
sÿlbn
);

357 
__REDIRECT_NTH
 (
ldexpf
, (, ), 
sÿlbnf
);

358 #ifdeà
__MATH_DECLARE_LDOUBLE


359 
__REDIRECT_NTH
 (
ldex¶
, (, ), 
sÿlbÆ
);

363 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_fš™e
);

364 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_fš™e
);

365 #ifdeà
__MATH_DECLARE_LDOUBLE


366 #ifdeà
__NO_LONG_DOUBLE_MATH


367 
__REDIRECT_NTH
 (
powl
, (, ),

368 
__pow_fš™e
);

370 
__REDIRECT_NTH
 (
powl
, (, ),

371 
__powl_fš™e
);

376 
__REDIRECT_NTH
 (
»mašd”
, (, ), 
__»mašd”_fš™e
);

377 
__REDIRECT_NTH
 (
»mašd”f
, (, ), 
__»mašd”f_fš™e
);

378 #ifdeà
__MATH_DECLARE_LDOUBLE


379 #ifdeà
__NO_LONG_DOUBLE_MATH


380 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

381 
__»mašd”_fš™e
);

383 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

384 
__»mašd”l_fš™e
);

388 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


390 
__REDIRECT_NTH
 (
sÿlb
, (, ), 
__sÿlb_fš™e
);

391 
__REDIRECT_NTH
 (
sÿlbf
, (, ), 
__sÿlbf_fš™e
);

392 #ifdeà
__MATH_DECLARE_LDOUBLE


393 #ifdeà
__NO_LONG_DOUBLE_MATH


394 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

395 
__sÿlb_fš™e
);

397 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

398 
__sÿlbl_fš™e
);

404 
__REDIRECT_NTH
 (
sšh
, (), 
__sšh_fš™e
);

405 
__REDIRECT_NTH
 (
sšhf
, (), 
__sšhf_fš™e
);

406 #ifdeà
__MATH_DECLARE_LDOUBLE


407 #ifdeà
__NO_LONG_DOUBLE_MATH


408 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšh_fš™e
);

410 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšhl_fš™e
);

415 
__REDIRECT_NTH
 (
sq¹
, (), 
__sq¹_fš™e
);

416 
__REDIRECT_NTH
 (
sq¹f
, (), 
__sq¹f_fš™e
);

417 #ifdeà
__MATH_DECLARE_LDOUBLE


418 #ifdeà
__NO_LONG_DOUBLE_MATH


419 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹_fš™e
);

421 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹l_fš™e
);

425 #ifdeà
__USE_ISOC99


427 
__gamma_r_fš™e
 (, *);

428 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamma
 (
__d
))

430 
__loÿl_signgam
 = 0;

431 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

432  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

433 
	}
}

434 
__gammaf_r_fš™e
 (, *);

435 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgammaf
 (
__d
))

437 
__loÿl_signgam
 = 0;

438 
__»s
 = 
	`__gammaf_r_fš™e
 (
__d
, &
__loÿl_signgam
);

439  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

440 
	}
}

441 #ifdeà
__MATH_DECLARE_LDOUBLE


442 
__gamm®_r_fš™e
 (, *);

443 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamm®
 (
__d
))

445 
__loÿl_signgam
 = 0;

446 #ifdeà
__NO_LONG_DOUBLE_MATH


447 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

449 
__»s
 = 
	`__gamm®_r_fš™e
 (
__d
, &
__loÿl_signgam
);

451  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

452 
	}
}

	@/usr/include/bits/mathcalls.h

45 #iâdeà
_MATH_H


52 
_MdoubË_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

56 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

58 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

60 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

63 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

65 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

67 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

74 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

76 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

77 
	g_MdoubË_END_NAMESPACE


79 #ifdeà
__USE_GNU


81 
__MATHDECL
 (,
sšcos
,,

82 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

85 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

90 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

92 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubË_BEGIN_NAMESPACE


100 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

103 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

109 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
))

116 
__©Œibu‹__
 ((
__nÚnuÎ__
 (2)));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (cÚ¡ *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALLX
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

342 
__MATHCALLX
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

346 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


22 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #ià
defšed
 
__x86_64__
 || (defšed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tæßt_t
;

29 
	tdoubË_t
;

35 
	tæßt_t
;

37 
	tdoubË_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #ià
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #ià
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #ià
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #iâdeà
_MATH_H


23 #iâdeà
__ex‹º_®ways_šlše


24 
	#__MATH_INLINE
 
__šlše


	)

26 
	#__MATH_INLINE
 
__ex‹º_®ways_šlše


	)

30 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

32 #ià!
__GNUC_PREREQ
 (2,97)

37 #undeà
isg»©”


38 #undeà
isg»©”equ®


39 #undeà
i¦ess


40 #undeà
i¦es£qu®


41 #undeà
i¦essg»©”


42 #undeà
isunÜd”ed


43 #ifdeà
__i686__


46 
	#isg»©”
(
x
, 
y
) \

47 ({ 
__»suÉ
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__»suÉ
; })

	)

51 
	#isg»©”equ®
(
x
, 
y
) \

52 ({ 
__»suÉ
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__»suÉ
; })

	)

57 
	#i¦ess
(
x
, 
y
) \

58 ({ 
__»suÉ
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__»suÉ
; })

	)

63 
	#i¦es£qu®
(
x
, 
y
) \

64 ({ 
__»suÉ
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__»suÉ
; })

	)

69 
	#i¦essg»©”
(
x
, 
y
) \

70 ({ 
__»suÉ
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__»suÉ
; })

	)

75 
	#isunÜd”ed
(
x
, 
y
) \

76 ({ 
__»suÉ
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__»suÉ
; })

	)

82 
	#isg»©”
(
x
, 
y
) \

83 ({ 
__»suÉ
; \

84 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

85 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__»suÉ
; })

	)

88 
	#isg»©”equ®
(
x
, 
y
) \

89 ({ 
__»suÉ
; \

90 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

91 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__»suÉ
; })

	)

94 
	#i¦ess
(
x
, 
y
) \

95 ({ 
__»suÉ
; \

96 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

97 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__»suÉ
; })

	)

100 
	#i¦es£qu®
(
x
, 
y
) \

101 ({ 
__»suÉ
; \

102 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

103 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__»suÉ
; })

	)

106 
	#i¦essg»©”
(
x
, 
y
) \

107 ({ 
__»suÉ
; \

108 
	`__asm__
 ("fucompp; fnstsw;estb $0x44, %%ah; setz %%al" \

109 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__»suÉ
; })

	)

112 
	#isunÜd”ed
(
x
, 
y
) \

113 ({ 
__»suÉ
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__»suÉ
; })

	)

122 #ià
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signb™f
 (
__x
))

129 #ifdeà
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signb™
 (
__x
))

141 #ifdeà
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signb™l
 (
__x
))

153 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #ià
__GNUC_PREREQ
 (2, 8)

165 #ià!
__GNUC_PREREQ
 (3, 4è&& !
defšed
 
__NO_MATH_INLINES
 \

166 && 
defšed
 
	g__OPTIMIZE__


170 #ifdeà
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifdeà
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ìštf
 (
__x
))

178 
__»s
;

183 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

184  
__»s
;

185 
	}
}

187 #ifdeà
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ìšt
 (
__x
))

191 
__»s
;

196 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

197  
__»s
;

198 
	}
}

200 #ifdeà
__x86_64__


201 
__MATH_INLINE
 

202 
__NTH
 (
	$Îrštf
 (
__x
))

204 
__»s
;

209 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

210  
__»s
;

211 
	}
}

212 
__MATH_INLINE
 

213 
__NTH
 (
	$Îršt
 (
__x
))

215 
__»s
;

220 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

221  
__»s
;

222 
	}
}

225 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

226 && 
defšed
 
__SSE2_MATH__


228 
__MATH_INLINE
 

229 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

231 #ifdeà
__AVX__


232 
__»s
;

233 
	`__asm
 ("vmaxs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

234  
__»s
;

236 
	`__asm
 ("maxs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

237  
__x
;

239 
	}
}

240 
__MATH_INLINE
 

241 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

243 #ifdeà
__AVX__


244 
__»s
;

245 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

246  
__»s
;

248 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

249  
__x
;

251 
	}
}

254 
__MATH_INLINE
 

255 
__NTH
 (
	$fmšf
 (
__x
, 
__y
))

257 #ifdeà
__AVX__


258 
__»s
;

259 
	`__asm
 ("vmšs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

260  
__»s
;

262 
	`__asm
 ("mšs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

263  
__x
;

265 
	}
}

266 
__MATH_INLINE
 

267 
__NTH
 (
	$fmš
 (
__x
, 
__y
))

269 #ifdeà
__AVX__


270 
__»s
;

271 
	`__asm
 ("vmšsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

272  
__»s
;

274 
	`__asm
 ("mšsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

275  
__x
;

277 
	}
}

280 
	g__END_NAMESPACE_C99


283 #ià
defšed
 
__SSE4_1__
 && defšed 
__SSE2_MATH__


284 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


285 
__BEGIN_NAMESPACE_C99


288 
__MATH_INLINE
 

289 
__NTH
 (
	$ršt
 (
__x
))

291 
__»s
;

296 
__asm
 
	`__vŞ©e__
 ("roundsd $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

297  
__»s
;

298 
	}
}

299 
__MATH_INLINE
 

300 
__NTH
 (
	$rštf
 (
__x
))

302 
__»s
;

307 
__asm
 
	`__vŞ©e__
 ("rounds $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

308  
__»s
;

309 
	}
}

311 #ifdeà
__USE_ISOC99


313 
__MATH_INLINE
 

314 
__NTH
 (
	$Ã¬byšt
 (
__x
))

316 
__»s
;

321 
__asm
 
	`__vŞ©e__
 ("roundsd $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

322  
__»s
;

323 
	}
}

324 
__MATH_INLINE
 

325 
__NTH
 (
	$Ã¬byštf
 (
__x
))

327 
__»s
;

332 
__asm
 
	`__vŞ©e__
 ("rounds $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

333  
__»s
;

334 
	}
}

337 
	g__END_NAMESPACE_C99


340 
__BEGIN_NAMESPACE_STD


342 
__MATH_INLINE
 

343 
__NTH
 (
	$û
 (
__x
))

345 
__»s
;

346 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

347  
__»s
;

348 
	}
}

349 
__END_NAMESPACE_STD


351 
__BEGIN_NAMESPACE_C99


352 
__MATH_INLINE
 

353 
__NTH
 (
	$ûf
 (
__x
))

355 
__»s
;

356 
	`__asm
 ("rounds $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

357  
__»s
;

358 
	}
}

359 
__END_NAMESPACE_C99


361 
__BEGIN_NAMESPACE_STD


363 
__MATH_INLINE
 

364 
__NTH
 (
	$æoÜ
 (
__x
))

366 
__»s
;

367 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

368  
__»s
;

369 
	}
}

370 
__END_NAMESPACE_STD


372 
__BEGIN_NAMESPACE_C99


373 
__MATH_INLINE
 

374 
__NTH
 (
	$æoÜf
 (
__x
))

376 
__»s
;

377 
	`__asm
 ("rounds $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

378  
__»s
;

379 
	}
}

380 
	g__END_NAMESPACE_C99


385 #iâdeà
__x86_64__


386 #ià((!
defšed
 
__NO_MATH_INLINES
 || defšed 
__LIBC_INTERNAL_MATH_INLINES
) \

387 && 
defšed
 
	g__OPTIMIZE__
)

391 #undeà
m©h_”rhªdlšg


400 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


401 
	#__šlše_m©hİ
(
func
, 
İ
) \

402 
	`__šlše_m©hİ_
 (, 
func
, 
İ
) \

403 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

404 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

405 
	#__šlše_m©hİNP
(
func
, 
İ
) \

406 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
) \

407 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

408 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

410 
	#__šlše_m©hİ
(
func
, 
İ
) \

411 
	`__šlše_m©hİ_
 (, 
func
, 
İ
)

	)

412 
	#__šlše_m©hİNP
(
func
, 
İ
) \

413 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
)

	)

416 
	#__šlše_m©hİ_
(
æßt_ty³
, 
func
, 
İ
) \

417 
	`__šlše_m©hİ_deş_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

418 
	#__šlše_m©hİNP_
(
æßt_ty³
, 
func
, 
İ
) \

419 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

422 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


423 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

424 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
) \

425 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

426 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

427 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

428 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
) \

429 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

430 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

432 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

433 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
)

	)

434 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

435 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
)

	)

438 
	#__šlše_m©hİ_deş_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

439 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

440 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, 
·¿ms
)

	)

442 
	#__šlše_m©hİ_deşNP_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

443 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
__x
)) \

445 
æßt_ty³
 
__»suÉ
; \

446 
__asm
 
	`__vŞ©e__
 (
İ
 : "ñ" (
__»suÉ
è: 
·¿ms
); \

447  
__»suÉ
; \

448 }

	)

451 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


452 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

453 
	`__šlše_m©hcode_
 (, 
func
, 
¬g
, 
code
) \

454 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

455 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

456 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

457 
	`__šlše_m©hcodeNP_
 (, 
func
, 
¬g
, 
code
) \

458 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

459 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

460 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

461 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

462 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

463 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

464 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

465 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

466 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

467 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

468 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

469 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

470 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

471 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

472 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

473 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

474 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

475 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

477 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

478 
	`__šlše_m©hcode_
 (, 
func
, (
¬g
), 
code
)

	)

479 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

480 
	`__šlše_m©hcodeNP_
 (, 
func
, (
¬g
), 
code
)

	)

481 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

482 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

483 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

484 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

485 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

486 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

487 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

488 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

491 
	#__šlše_m©hcode_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

492 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

493 
	`__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
)

	)

495 
	#__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

496 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g
)) \

498 
code
; \

499 }

	)

502 
	#__šlše_m©hcode2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

503 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³è
__THROW
; \

504 
	`__šlše_m©hcodeNP2_
 (
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

506 
	#__šlše_m©hcodeNP2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

507 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
)) \

509 
code
; \

510 }

	)

512 
	#__šlše_m©hcode3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

513 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³, flßt_ty³è
__THROW
; \

514 
	`__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

516 
	#__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

517 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
, \

518 
æßt_ty³
 
¬g3
)) \

520 
code
; \

521 }

	)

525 #ià!
defšed
 
__NO_MATH_INLINES
 && defšed 
__OPTIMIZE__


529 #ifdeà
__FAST_MATH__


530 #ifdeà
__USE_GNU


531 
	#__sšcos_code
 \

532 
__co¤
; \

533 
__sšr
; \

534 
__swtmp
; \

535 
__asm
 
__vŞ©e__
 \

550 : "ñ" (
__co¤
), "=u" (
__sšr
), "÷" (
__swtmp
è: "0" (
__x
)); \

551 *
__sšx
 = 
__sšr
; \

552 *
__cosx
 = 
__co¤


	)

554 
__MATH_INLINE
 

555 
__NTH
 (
	$__sšcos
 (
__x
, *
__sšx
, *
__cosx
))

557 
__sšcos_code
;

558 
	}
}

560 
__MATH_INLINE
 

561 
__NTH
 (
	$__sšcosf
 (
__x
, *
__sšx
, *
__cosx
))

563 
__sšcos_code
;

564 
	}
}

566 
__MATH_INLINE
 

567 
__NTH
 (
	$__sšco¦
 (
__x
, *
__sšx
, *
__cosx
))

569 
__sšcos_code
;

570 
	}
}

577 #ià
__GNUC_PREREQ
 (3, 5)

578 
	#__expm1_code
 \

579 
__‹mp
; \

580 
__‹mp
 = 
	`__butš_expm1l
 (
__x
); \

581  
__‹mp
 ? __‹m°: 
__x


	)

583 
	#__expm1_code
 \

584 
__v®ue
; \

585 
__expÚ’t
; \

586 
__‹mp
; \

587 
__asm
 
__vŞ©e__
 \

596 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

597 
__asm
 
__vŞ©e__
 \

599 : "ñ" (
__‹mp
è: "0" (1.0), "u" (
__expÚ’t
)); \

600 
__‹mp
 -= 1.0; \

601 
__‹mp
 +ğ
__v®ue
; \

602  
__‹mp
 ? __‹m°: 
__x


	)

604 
	$__šlše_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

606 #ià
	`__GNUC_PREREQ
 (3, 4)

607 
	`__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
,  
	$__butš_ex¶
 (
__x
))

609 
	#__exp_code
 \

610 
__v®ue
; \

611 
__expÚ’t
; \

612 
__asm
 
__vŞ©e__
 \

620 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

621 
__v®ue
 += 1.0; \

622 
__asm
 
__vŞ©e__
 \

624 : "ñ" (
__v®ue
è: "0" (__v®ue), "u" (
__expÚ’t
)); \

625  
__v®ue


	)

626 
	$__šlše_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

627 
	$__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
, 
__exp_code
)

631 #ià!
	`__GNUC_PREREQ
 (3, 5)

632 
	`__šlše_m©hcodeNP
 (
n
, 
__x
, \

633 
__v®ue
; \

634 
__v®ue2
 
	`__©Œibu‹__
 ((
__unu£d__
)); \

635 
__asm
 
__vŞ©e__
 \

637 : "ñ" (
__v®ue2
), "=u" (
__v®ue
è: "0" (
__x
)); \

638  
__v®ue
)

643 #ià
	`__GNUC_PREREQ
 (3, 4)

644 
	`__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
,

645  
	$__butš_©ª2l
 (
__y
, 
__x
))

647 
	#__©ª2_code
 \

648 
__v®ue
; \

649 
__asm
 
__vŞ©e__
 \

651 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "st(1)"); \

652  
__v®ue


	)

653 #ifdeà
__FAST_MATH__


654 
	$__šlše_m©hcodeNP2
 (
©ª2
, 
__y
, 
__x
, 
__©ª2_code
)

656 
	$__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
, 
__©ª2_code
)

660 #ià
defšed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

661 
	`__šlše_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

662 
__v®ue
; \

663 
__asm
 
__vŞ©e__
 \

668 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

669  
__v®ue
)

673 #ifdeà
__FAST_MATH__


674 #ià!
	`__GNUC_PREREQ
 (3,3)

675 
	`__šlše_m©hİNP
 (
sq¹
, "fsqrt")

676 
	`__šlše_m©hİNP_
 (, 
__sq¹l
, "fsqrt")

677 
	#__libc_sq¹l
(
n
è
	`__sq¹l
 (n)

	)

679 
	#__libc_sq¹l
(
n
è
	`__butš_sq¹l
 (n)

	)

683 #ià
	`__GNUC_PREREQ
 (2, 8)

684 
	`__šlše_m©hcodeNP_
 (, 
çbs
, 
__x
,  
	$__butš_çbs
 (
__x
))

685 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


686 
	`__šlše_m©hcodeNP_
 (, 
çbsf
, 
__x
,  
	$__butš_çbsf
 (
__x
))

687 
	`__šlše_m©hcodeNP_
 (, 
çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

689 
	`__šlše_m©hcodeNP_
 (, 
__çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

691 
	`__šlše_m©hİ
 (
çbs
, "fabs")

692 
	`__šlše_m©hİ_
 (, 
__çb¦
, "fabs")

695 #ifdeà
__FAST_MATH__


696 #ià!
	`__GNUC_PREREQ
 (3, 4)

698 
	`__šlše_m©hİNP
 (
sš
, "fsin")

700 
	`__šlše_m©hİNP
 (
cos
, "fcos")

702 
	`__šlše_m©hİ_deşNP
 (
log
, "ædÊ2; fxch; fyl2x", "0" (
__x
) : "st(1)")

705 #ià!
	`__GNUC_PREREQ
 (3, 5)

706 
	`__šlše_m©hİ_deşNP
 (
log10
, "ædlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

708 
	`__šlše_m©hcodeNP
 (
asš
, 
__x
,  
	`__©ª2l
 (__x, 
	`__libc_sq¹l
 (1.0 - __x * __x)))

709 
	`__šlše_m©hcodeNP
 (
acos
, 
__x
,  
	`__©ª2l
 (
	`__libc_sq¹l
 (1.0 - __x * __x), __x))

712 #ià!
	`__GNUC_PREREQ
 (3, 4)

713 
	`__šlše_m©hİ_deşNP
 (
©ª
, "æd1; f·n", "0" (
__x
) : "st(1)")

717 
	`__šlše_m©hcode_
 (, 
__sgn1l
, 
__x
, \

718 
__ex‹nsiÚ__
 uniÚ { 
__xld
; 
__xi
[3]; } 
__n
 = \

719 { 
__xld
: 
__x
 
	}
}; \

720 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

721 
	g__n
.
	g__xi
[1] = 0x80000000; \

722 
	g__n
.
	g__xi
[0] = 0; \

723  
	g__n
.
	g__xld
)

726 #ifdeà
__FAST_MATH__


728 
__šlše_m©hcodeNP
 (
sšh
, 
__x
, \

729 
__exm1
 = 
__expm1l
 (
__çb¦
 (
__x
)); \

730  0.5 * (
__exm1
 / (__exm1 + 1.0è+ __exm1è* 
	$__sgn1l
 (
__x
))

732 
	`__šlše_m©hcodeNP
 (
cosh
, 
__x
, \

733 
__ex
 = 
	`__ex¶
 (
__x
); \

734  0.5 * (
__ex
 + 1.0 / __ex))

736 
	`__šlše_m©hcodeNP
 (
nh
, 
__x
, \

737 
__exm1
 = 
	`__expm1l
 (-
	`__çb¦
 (
__x
 + __x)); \

738  
__exm1
 / (__exm1 + 2.0è* 
	`__sgn1l
 (-
__x
))

741 
	`__šlše_m©hcodeNP
 (
æoÜ
, 
__x
, \

742 
__v®ue
; \

743 
__ignÜe
; \

744 
__cw
; \

745 
__cwtmp
; \

746 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

754 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

755 "=m" (
__cw
) \

756 : "0" (
__x
)); \

757  
__v®ue
)

759 
	`__šlše_m©hcodeNP
 (
û
, 
__x
, \

760 
__v®ue
; \

761 
__ignÜe
; \

762 
__cw
; \

763 
__cwtmp
; \

764 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

772 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

773 "=m" (
__cw
) \

774 : "0" (
__x
)); \

775  
__v®ue
)

777 #ifdeà
__FAST_MATH__


778 
	#__ldexp_code
 \

779 
__v®ue
; \

780 
__asm
 
__vŞ©e__
 \

782 : "ñ" (
__v®ue
è: "0" (
__x
), "u" ((è
__y
)); \

783  
__v®ue


	)

785 
__MATH_INLINE
 

786 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

788 
__ldexp_code
;

789 
	}
}

794 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


796 #ifdeà
__FAST_MATH__


797 
	$__šlše_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

801 
	#__M_SQRT2
 1.41421356237309504880L

	)

803 #ià!
	`__GNUC_PREREQ
 (3, 5)

804 
	`__šlše_m©hcodeNP
 (
log1p
, 
__x
, \

805 
__v®ue
; \

806 ià(
	`__çb¦
 (
__x
è>ğ1.0 - 0.5 * 
__M_SQRT2
) \

807 
__v®ue
 = 
	`logl
 (1.0 + 
__x
); \

809 
__asm
 
__vŞ©e__
 \

813 : "ñ" (
__v®ue
è: "0" (
__x
) : "st(1)"); \

814  
__v®ue
)

819 
	`__šlše_m©hcodeNP
 (
asšh
, 
__x
, \

820 
__y
 = 
	`__çb¦
 (
__x
); \

821  (
	`log1¶
 (
__y
 * __y / (
	`__libc_sq¹l
 (__y * __y + 1.0) + 1.0) + __y) \

822 * 
	$__sgn1l
 (
__x
)))

824 
	`__šlše_m©hcodeNP
 (
acosh
, 
__x
, \

825  
	`logl
 (
__x
 + 
	`__libc_sq¹l
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

827 
	`__šlše_m©hcodeNP
 (
©ªh
, 
__x
, \

828 
__y
 = 
	`__çb¦
 (
__x
); \

829  -0.5 * 
	`log1¶
 (-(
__y
 + __yè/ (1.0 + __y)è* 
	$__sgn1l
 (
__x
))

832 
	`__šlše_m©hcodeNP2
 (
hypÙ
, 
__x
, 
__y
,

833  
	`__libc_sq¹l
 (
__x
 * __x + 
__y
 * __y))

835 #ià!
	`__GNUC_PREREQ
 (3, 5)

836 
	`__šlše_m©hcodeNP
(
logb
, 
__x
, \

837 
__v®ue
; \

838 
__junk
; \

839 
__asm
 
__vŞ©e__
 \

841 : "ñ" (
__junk
), "=u" (
__v®ue
è: "0" (
__x
)); \

842  
__v®ue
)

848 #ifdeà
__USE_ISOC99


849 #ifdeà
__FAST_MATH__


851 #ià!
	`__GNUC_PREREQ
 (3, 5)

852 
	`__šlše_m©hİ_deşNP
 (
log2
, "æd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

855 
__MATH_INLINE
 

856 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

858 
__ldexp_code
;

859 
	}
}

861 
__MATH_INLINE
 

862 
__NTH
 (
	$ldex¶
 (
__x
, 
__y
))

864 
__ldexp_code
;

865 
	}
}

867 
__šlše_m©hİNP
 (
ršt
, "frndint")

870 
	#__Ìšt_code
 \

871 
__ÌšŒes
; \

872 
__asm__
 
__vŞ©e__
 \

874 : "=m" (
__ÌšŒes
è: "t" (
__x
) : "st"); \

875  
__ÌšŒes


	)

876 
__MATH_INLINE
 

877 
__NTH
 (
	$Ìštf
 (
__x
))

879 
__Ìšt_code
;

880 
	}
}

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ìšt
 (
__x
))

884 
__Ìšt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$Ìš
 (
__x
))

889 
__Ìšt_code
;

890 
	}
}

891 #undeà
__Ìšt_code


893 
	#__Îršt_code
 \

894 
__ÎršŒes
; \

895 
__asm__
 
__vŞ©e__
 \

897 : "=m" (
__ÎršŒes
è: "t" (
__x
) : "st"); \

898  
__ÎršŒes


	)

899 
__MATH_INLINE
 

900 
__NTH
 (
	$Îrštf
 (
__x
))

902 
__Îršt_code
;

903 
	}
}

904 
__MATH_INLINE
 

905 
__NTH
 (
	$Îršt
 (
__x
))

907 
__Îršt_code
;

908 
	}
}

909 
__MATH_INLINE
 

910 
__NTH
 (
	$Îrš
 (
__x
))

912 
__Îršt_code
;

913 
	}
}

914 #undeà
__Îršt_code


919 #ifdeà
__USE_MISC


921 #ià
defšed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

922 
__šlše_m©hcodeNP2
 (
d»m
, 
__x
, 
__y
, \

923 
__v®ue
; \

924 
__şobb”ed
; \

925 
__asm
 
__vŞ©e__
 \

930 : "ñ" (
__v®ue
), "=&a" (
__şobb”ed
è: "0" (
__x
), "u" (
__y
) : "cc"); \

931  
__v®ue
)

936 
__MATH_INLINE
 

937 
__NTH
 (
	$__fš™e
 (
__x
))

939  (
__ex‹nsiÚ__


940 (((((uniÚ { 
__d
; 
__i
[2]; }è{__d: 
__x
}).__i[1]

942 
	}
}

947 #undeà
__©ª2_code


948 #ifdeà
__FAST_MATH__


949 #undeà
__expm1_code


950 #undeà
__exp_code


951 #undeà
__sšcos_code


958 #ifdeà
__LIBC_INTERNAL_MATH_INLINES


959 
__šlše_m©hİ
 (
__›“754_sq¹
, "fsqrt")

960 
__šlše_m©hcode2
 (
__›“754_©ª2
, 
__y
, 
__x
,

961 
__v®ue
;

962 
__asm
 
__vŞ©e__
 ("fpatan\n\t"

963 : "ñ" (
__v®ue
)

964 : "0" (
__x
), "u" (
__y
) : "st(1)");

965  
__v®ue
;)

	@/usr/include/bits/mman.h

19 #iâdeà
_SYS_MMAN_H


32 
	#PROT_READ
 0x1

	)

33 
	#PROT_WRITE
 0x2

	)

34 
	#PROT_EXEC
 0x4

	)

35 
	#PROT_NONE
 0x0

	)

36 
	#PROT_GROWSDOWN
 0x01000000

	)

38 
	#PROT_GROWSUP
 0x02000000

	)

42 
	#MAP_SHARED
 0x01

	)

43 
	#MAP_PRIVATE
 0x02

	)

44 #ifdeà
__USE_MISC


45 
	#MAP_TYPE
 0x0à

	)

49 
	#MAP_FIXED
 0x10

	)

50 #ifdeà
__USE_MISC


51 
	#MAP_FILE
 0

	)

52 
	#MAP_ANONYMOUS
 0x20

	)

53 
	#MAP_ANON
 
MAP_ANONYMOUS


	)

54 
	#MAP_32BIT
 0x40

	)

58 #ifdeà
__USE_MISC


59 
	#MAP_GROWSDOWN
 0x00100

	)

60 
	#MAP_DENYWRITE
 0x00800

	)

61 
	#MAP_EXECUTABLE
 0x01000

	)

62 
	#MAP_LOCKED
 0x02000

	)

63 
	#MAP_NORESERVE
 0x04000

	)

64 
	#MAP_POPULATE
 0x08000

	)

65 
	#MAP_NONBLOCK
 0x10000

	)

66 
	#MAP_STACK
 0x20000

	)

67 
	#MAP_HUGETLB
 0x40000

	)

71 
	#MS_ASYNC
 1

	)

72 
	#MS_SYNC
 4

	)

73 
	#MS_INVALIDATE
 2

	)

76 
	#MCL_CURRENT
 1

	)

77 
	#MCL_FUTURE
 2

	)

81 #ifdeà
__USE_GNU


82 
	#MREMAP_MAYMOVE
 1

	)

83 
	#MREMAP_FIXED
 2

	)

87 #ifdeà
__USE_BSD


88 
	#MADV_NORMAL
 0

	)

89 
	#MADV_RANDOM
 1

	)

90 
	#MADV_SEQUENTIAL
 2

	)

91 
	#MADV_WILLNEED
 3

	)

92 
	#MADV_DONTNEED
 4

	)

93 
	#MADV_REMOVE
 9

	)

94 
	#MADV_DONTFORK
 10

	)

95 
	#MADV_DOFORK
 11

	)

96 
	#MADV_MERGEABLE
 12

	)

97 
	#MADV_UNMERGEABLE
 13

	)

98 
	#MADV_HUGEPAGE
 14

	)

99 
	#MADV_NOHUGEPAGE
 15

	)

100 
	#MADV_DONTDUMP
 16

	)

102 
	#MADV_DODUMP
 17

	)

103 
	#MADV_HWPOISON
 100

	)

107 #ifdeà
__USE_XOPEN2K


108 
	#POSIX_MADV_NORMAL
 0

	)

109 
	#POSIX_MADV_RANDOM
 1

	)

110 
	#POSIX_MADV_SEQUENTIAL
 2

	)

111 
	#POSIX_MADV_WILLNEED
 3

	)

112 
	#POSIX_MADV_DONTNEED
 4

	)

	@/usr/include/bits/nan.h

19 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

30 #–ià
defšed
 
__GNUC__


32 
	#NAN
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

44 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


45 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

48 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


49 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

50 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/netdb.h

18 #iâdeà
_NETDB_H


26 
	sÃ‹Á


28 *
	mn_Çme
;

29 **
	mn_®Ÿ£s
;

30 
	mn_add¹y³
;

31 
ušt32_t
 
	mn_Ãt
;

	@/usr/include/bits/posix1_lim.h

24 #iâdef 
_BITS_POSIX1_LIM_H


25 
	#_BITS_POSIX1_LIM_H
 1

	)

31 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

34 
	#_POSIX_AIO_MAX
 1

	)

37 
	#_POSIX_ARG_MAX
 4096

	)

40 #ifdeà
__USE_XOPEN2K


41 
	#_POSIX_CHILD_MAX
 25

	)

43 
	#_POSIX_CHILD_MAX
 6

	)

47 
	#_POSIX_DELAYTIMER_MAX
 32

	)

51 
	#_POSIX_HOST_NAME_MAX
 255

	)

54 
	#_POSIX_LINK_MAX
 8

	)

57 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

60 
	#_POSIX_MAX_CANON
 255

	)

64 
	#_POSIX_MAX_INPUT
 255

	)

67 
	#_POSIX_MQ_OPEN_MAX
 8

	)

70 
	#_POSIX_MQ_PRIO_MAX
 32

	)

73 
	#_POSIX_NAME_MAX
 14

	)

76 #ifdeà
__USE_XOPEN2K


77 
	#_POSIX_NGROUPS_MAX
 8

	)

79 
	#_POSIX_NGROUPS_MAX
 0

	)

83 #ifdeà
__USE_XOPEN2K


84 
	#_POSIX_OPEN_MAX
 20

	)

86 
	#_POSIX_OPEN_MAX
 16

	)

89 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


92 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

96 
	#_POSIX_PATH_MAX
 256

	)

99 
	#_POSIX_PIPE_BUF
 512

	)

103 
	#_POSIX_RE_DUP_MAX
 255

	)

106 
	#_POSIX_RTSIG_MAX
 8

	)

109 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

112 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

115 
	#_POSIX_SIGQUEUE_MAX
 32

	)

118 
	#_POSIX_SSIZE_MAX
 32767

	)

121 
	#_POSIX_STREAM_MAX
 8

	)

124 
	#_POSIX_SYMLINK_MAX
 255

	)

128 
	#_POSIX_SYMLOOP_MAX
 8

	)

131 
	#_POSIX_TIMER_MAX
 32

	)

134 
	#_POSIX_TTY_NAME_MAX
 9

	)

137 #ifdeà
__USE_XOPEN2K


138 
	#_POSIX_TZNAME_MAX
 6

	)

140 
	#_POSIX_TZNAME_MAX
 3

	)

143 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


145 
	#_POSIX_QLIMIT
 1

	)

149 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

152 
	#_POSIX_UIO_MAXIOV
 16

	)

156 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

160 
	~<b™s/loÿl_lim.h
>

163 #iâdef 
SSIZE_MAX


164 
	#SSIZE_MAX
 
LONG_MAX


	)

171 #iâdef 
NGROUPS_MAX


172 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

22 #iâdef 
_BITS_POSIX2_LIM_H


23 
	#_BITS_POSIX2_LIM_H
 1

	)

27 
	#_POSIX2_BC_BASE_MAX
 99

	)

30 
	#_POSIX2_BC_DIM_MAX
 2048

	)

33 
	#_POSIX2_BC_SCALE_MAX
 99

	)

36 
	#_POSIX2_BC_STRING_MAX
 1000

	)

40 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

44 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

47 
	#_POSIX2_LINE_MAX
 2048

	)

51 
	#_POSIX2_RE_DUP_MAX
 255

	)

55 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

62 #iâdef 
BC_BASE_MAX


63 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

65 #iâdef 
BC_DIM_MAX


66 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

68 #iâdef 
BC_SCALE_MAX


69 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

71 #iâdef 
BC_STRING_MAX


72 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

74 #iâdef 
COLL_WEIGHTS_MAX


75 
	#COLL_WEIGHTS_MAX
 255

	)

77 #iâdef 
EXPR_NEST_MAX


78 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

80 #iâdef 
LINE_MAX


81 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

83 #iâdef 
CHARCLASS_NAME_MAX


84 
	#CHARCLASS_NAME_MAX
 2048

	)

88 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/posix_opt.h

19 #iâdef 
_BITS_POSIX_OPT_H


20 
	#_BITS_POSIX_OPT_H
 1

	)

23 
	#_POSIX_JOB_CONTROL
 1

	)

26 
	#_POSIX_SAVED_IDS
 1

	)

29 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

32 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

35 
	#_POSIX_FSYNC
 200809L

	)

38 
	#_POSIX_MAPPED_FILES
 200809L

	)

41 
	#_POSIX_MEMLOCK
 200809L

	)

44 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

47 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

50 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

54 
	#_POSIX_VDISABLE
 '\0'

	)

57 
	#_POSIX_NO_TRUNC
 1

	)

60 
	#_XOPEN_REALTIME
 1

	)

63 
	#_XOPEN_REALTIME_THREADS
 1

	)

66 
	#_XOPEN_SHM
 1

	)

69 
	#_POSIX_THREADS
 200809L

	)

72 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

73 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

76 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

79 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

82 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

85 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

89 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

91 #ifdeà
__USE_XOPEN2K8


93 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

96 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

100 
	#_POSIX_SEMAPHORES
 200809L

	)

103 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

106 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

107 
	#_POSIX_ASYNC_IO
 1

	)

109 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

111 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

114 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

117 
	#_LFS_LARGEFILE
 1

	)

118 
	#_LFS64_LARGEFILE
 1

	)

119 
	#_LFS64_STDIO
 1

	)

122 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

125 
	#_POSIX_CPUTIME
 0

	)

128 
	#_POSIX_THREAD_CPUTIME
 0

	)

131 
	#_POSIX_REGEXP
 1

	)

134 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

137 
	#_POSIX_SHELL
 1

	)

140 
	#_POSIX_TIMEOUTS
 200809L

	)

143 
	#_POSIX_SPIN_LOCKS
 200809L

	)

146 
	#_POSIX_SPAWN
 200809L

	)

149 
	#_POSIX_TIMERS
 200809L

	)

152 
	#_POSIX_BARRIERS
 200809L

	)

155 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

158 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

161 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

164 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

167 
	#_POSIX_ADVISORY_INFO
 200809L

	)

170 
	#_POSIX_IPV6
 200809L

	)

173 
	#_POSIX_RAW_SOCKETS
 200809L

	)

176 
	#_POSIX2_CHAR_TERM
 200809L

	)

179 
	#_POSIX_SPORADIC_SERVER
 -1

	)

180 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

183 
	#_POSIX_TRACE
 -1

	)

184 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

185 
	#_POSIX_TRACE_INHERIT
 -1

	)

186 
	#_POSIX_TRACE_LOG
 -1

	)

189 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
__±h»ad_li¡_t
 
	m__li¡
;

106 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

108 
	m__nu£rs
;

109 
__ex‹nsiÚ__
 union

111 
	m__¥šs
;

112 
__±h»ad_¦i¡_t
 
	m__li¡
;

115 } 
	m__d©a
;

116 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

117 
	m__®ign
;

118 } 
	t±h»ad_mu‹x_t
;

122 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

123 
	m__®ign
;

124 } 
	t±h»ad_mu‹x©Œ_t
;

133 
	m__lock
;

134 
	m__fu‹x
;

135 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

136 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

137 
__ex‹nsiÚ__
 
	m__wok’_£q
;

138 *
	m__mu‹x
;

139 
	m__nwa™”s
;

140 
	m__brßdÿ¡_£q
;

141 } 
	m__d©a
;

142 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

143 
__ex‹nsiÚ__
 
	m__®ign
;

144 } 
	t±h»ad_cÚd_t
;

148 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

149 
	m__®ign
;

150 } 
	t±h»ad_cÚd©Œ_t
;

154 
	t±h»ad_key_t
;

158 
	t±h»ad_Úû_t
;

161 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


166 #ifdeà
__x86_64__


169 
	m__lock
;

170 
	m__Ä_»ad”s
;

171 
	m__»ad”s_wakeup
;

172 
	m__wr™”_wakeup
;

173 
	m__Ä_»ad”s_queued
;

174 
	m__Ä_wr™”s_queued
;

175 
	m__wr™”
;

176 
	m__sh¬ed
;

177 
	m__·d1
;

178 
	m__·d2
;

181 
	m__æags
;

182 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

183 } 
	m__d©a
;

187 
	m__lock
;

188 
	m__Ä_»ad”s
;

189 
	m__»ad”s_wakeup
;

190 
	m__wr™”_wakeup
;

191 
	m__Ä_»ad”s_queued
;

192 
	m__Ä_wr™”s_queued
;

195 
	m__æags
;

196 
	m__sh¬ed
;

197 
	m__·d1
;

198 
	m__·d2
;

199 
	m__wr™”
;

200 } 
	m__d©a
;

202 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

203 
	m__®ign
;

204 } 
	t±h»ad_rwlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_rwlock©Œ_t
;

214 #ifdeà
__USE_XOPEN2K


216 vŞ©
	t±h»ad_¥šlock_t
;

223 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

224 
	m__®ign
;

225 } 
	t±h»ad_b¬r›r_t
;

229 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

230 
	m__®ign
;

231 } 
	t±h»ad_b¬r›¿‰r_t
;

235 #iâdeà
__x86_64__


237 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/resource.h

19 #iâdeà
_SYS_RESOURCE_H


23 
	~<b™s/ty³s.h
>

31 
	e__¾im™_»sourû


34 
	mRLIMIT_CPU
 = 0,

35 
	#RLIMIT_CPU
 
RLIMIT_CPU


	)

38 
	mRLIMIT_FSIZE
 = 1,

39 
	#RLIMIT_FSIZE
 
RLIMIT_FSIZE


	)

42 
	mRLIMIT_DATA
 = 2,

43 
	#RLIMIT_DATA
 
RLIMIT_DATA


	)

46 
	mRLIMIT_STACK
 = 3,

47 
	#RLIMIT_STACK
 
RLIMIT_STACK


	)

50 
	mRLIMIT_CORE
 = 4,

51 
	#RLIMIT_CORE
 
RLIMIT_CORE


	)

57 
	m__RLIMIT_RSS
 = 5,

58 
	#RLIMIT_RSS
 
__RLIMIT_RSS


	)

61 
	mRLIMIT_NOFILE
 = 7,

62 
	m__RLIMIT_OFILE
 = 
RLIMIT_NOFILE
,

63 
	#RLIMIT_NOFILE
 
RLIMIT_NOFILE


	)

64 
	#RLIMIT_OFILE
 
__RLIMIT_OFILE


	)

67 
	mRLIMIT_AS
 = 9,

68 
	#RLIMIT_AS
 
RLIMIT_AS


	)

71 
	m__RLIMIT_NPROC
 = 6,

72 
	#RLIMIT_NPROC
 
__RLIMIT_NPROC


	)

75 
	m__RLIMIT_MEMLOCK
 = 8,

76 
	#RLIMIT_MEMLOCK
 
__RLIMIT_MEMLOCK


	)

79 
	m__RLIMIT_LOCKS
 = 10,

80 
	#RLIMIT_LOCKS
 
__RLIMIT_LOCKS


	)

83 
	m__RLIMIT_SIGPENDING
 = 11,

84 
	#RLIMIT_SIGPENDING
 
__RLIMIT_SIGPENDING


	)

87 
	m__RLIMIT_MSGQUEUE
 = 12,

88 
	#RLIMIT_MSGQUEUE
 
__RLIMIT_MSGQUEUE


	)

93 
	m__RLIMIT_NICE
 = 13,

94 
	#RLIMIT_NICE
 
__RLIMIT_NICE


	)

98 
	m__RLIMIT_RTPRIO
 = 14,

99 
	#RLIMIT_RTPRIO
 
__RLIMIT_RTPRIO


	)

104 
	m__RLIMIT_RTTIME
 = 15,

105 
	#RLIMIT_RTTIME
 
__RLIMIT_RTTIME


	)

107 
	m__RLIMIT_NLIMITS
 = 16,

108 
	m__RLIM_NLIMITS
 = 
__RLIMIT_NLIMITS


109 
	#RLIMIT_NLIMITS
 
__RLIMIT_NLIMITS


	)

110 
	#RLIM_NLIMITS
 
__RLIM_NLIMITS


	)

114 #iâdeà
__USE_FILE_OFFSET64


115 
	#RLIM_INFINITY
 ((
__¾im_t
è-1)

	)

117 
	#RLIM_INFINITY
 0xffffffffffffffffuLL

	)

120 #ifdeà
__USE_LARGEFILE64


121 
	#RLIM64_INFINITY
 0xffffffffffffffffuLL

	)

125 
	#RLIM_SAVED_MAX
 
RLIM_INFINITY


	)

126 
	#RLIM_SAVED_CUR
 
RLIM_INFINITY


	)

130 #iâdeà
__USE_FILE_OFFSET64


131 
__¾im_t
 
	t¾im_t
;

133 
__¾im64_t
 
	t¾im_t
;

135 #ifdeà
__USE_LARGEFILE64


136 
__¾im64_t
 
	t¾im64_t
;

139 
	s¾im™


142 
¾im_t
 
	m¾im_cur
;

144 
¾im_t
 
	m¾im_max
;

147 #ifdeà
__USE_LARGEFILE64


148 
	s¾im™64


151 
¾im64_t
 
	m¾im_cur
;

153 
¾im64_t
 
	m¾im_max
;

158 
	e__ru§ge_who


161 
	mRUSAGE_SELF
 = 0,

162 
	#RUSAGE_SELF
 
RUSAGE_SELF


	)

165 
	mRUSAGE_CHILDREN
 = -1

166 
	#RUSAGE_CHILDREN
 
RUSAGE_CHILDREN


	)

168 #ifdeà
__USE_GNU


171 
	mRUSAGE_THREAD
 = 1

172 
	#RUSAGE_THREAD
 
RUSAGE_THREAD


	)

174 
	#RUSAGE_LWP
 
RUSAGE_THREAD


	)

178 
	#__Ãed_timev®


	)

179 
	~<b™s/time.h
>

187 
	sru§ge


190 
timev®
 
	mru_utime
;

192 
timev®
 
	mru_¡ime
;

194 
__ex‹nsiÚ__
 union

196 
	mru_maxrss
;

197 
__sysÿÎ_¦Úg_t
 
	m__ru_maxrss_wÜd
;

202 
__ex‹nsiÚ__
 union

204 
	mru_ixrss
;

205 
__sysÿÎ_¦Úg_t
 
	m__ru_ixrss_wÜd
;

208 
__ex‹nsiÚ__
 union

210 
	mru_idrss
;

211 
__sysÿÎ_¦Úg_t
 
	m__ru_idrss_wÜd
;

214 
__ex‹nsiÚ__
 union

216 
	mru_i¤ss
;

217 
__sysÿÎ_¦Úg_t
 
	m__ru_i¤ss_wÜd
;

221 
__ex‹nsiÚ__
 union

223 
	mru_mšæt
;

224 
__sysÿÎ_¦Úg_t
 
	m__ru_mšæt_wÜd
;

227 
__ex‹nsiÚ__
 union

229 
	mru_majæt
;

230 
__sysÿÎ_¦Úg_t
 
	m__ru_majæt_wÜd
;

233 
__ex‹nsiÚ__
 union

235 
	mru_nsw­
;

236 
__sysÿÎ_¦Úg_t
 
	m__ru_nsw­_wÜd
;

240 
__ex‹nsiÚ__
 union

242 
	mru_šblock
;

243 
__sysÿÎ_¦Úg_t
 
	m__ru_šblock_wÜd
;

246 
__ex‹nsiÚ__
 union

248 
	mru_oublock
;

249 
__sysÿÎ_¦Úg_t
 
	m__ru_oublock_wÜd
;

252 
__ex‹nsiÚ__
 union

254 
	mru_msg¢d
;

255 
__sysÿÎ_¦Úg_t
 
	m__ru_msg¢d_wÜd
;

258 
__ex‹nsiÚ__
 union

260 
	mru_msgrcv
;

261 
__sysÿÎ_¦Úg_t
 
	m__ru_msgrcv_wÜd
;

264 
__ex‹nsiÚ__
 union

266 
	mru_nsigÇls
;

267 
__sysÿÎ_¦Úg_t
 
	m__ru_nsigÇls_wÜd
;

272 
__ex‹nsiÚ__
 union

274 
	mru_nvcsw
;

275 
__sysÿÎ_¦Úg_t
 
	m__ru_nvcsw_wÜd
;

279 
__ex‹nsiÚ__
 union

281 
	mru_nivcsw
;

282 
__sysÿÎ_¦Úg_t
 
	m__ru_nivcsw_wÜd
;

287 
	#PRIO_MIN
 -20

	)

288 
	#PRIO_MAX
 20

	)

292 
	e__´iÜ™y_which


294 
	mPRIO_PROCESS
 = 0,

295 
	#PRIO_PROCESS
 
PRIO_PROCESS


	)

296 
	mPRIO_PGRP
 = 1,

297 
	#PRIO_PGRP
 
PRIO_PGRP


	)

298 
	mPRIO_USER
 = 2

299 
	#PRIO_USER
 
PRIO_USER


	)

303 
	g__BEGIN_DECLS


305 #ifdeà
__USE_GNU


307 #iâdeà
__USE_FILE_OFFSET64


308 
	$´lim™
 (
__pid_t
 
__pid
, 
__¾im™_»sourû
 
__»sourû
,

309 cÚ¡ 
¾im™
 *
__Ãw_lim™
,

310 
¾im™
 *
__Şd_lim™
è
__THROW
;

312 #ifdeà
__REDIRECT_NTH


313 
	`__REDIRECT_NTH
 (
´lim™
, (
__pid_t
 
__pid
,

314 
__¾im™_»sourû
 
__»sourû
,

315 cÚ¡ 
¾im™
 *
__Ãw_lim™
,

316 
¾im™
 *
__Şd_lim™
), 
´lim™64
);

318 
	#´lim™
 
´lim™64


	)

321 #ifdeà
__USE_LARGEFILE64


322 
	$´lim™64
 (
__pid_t
 
__pid
, 
__¾im™_»sourû
 
__»sourû
,

323 cÚ¡ 
¾im™64
 *
__Ãw_lim™
,

324 
¾im™64
 *
__Şd_lim™
è
__THROW
;

328 
__END_DECLS


	@/usr/include/bits/sched.h

21 #iâdeà
__Ãed_sched·¿m


23 #iâdeà
_SCHED_H


29 
	#SCHED_OTHER
 0

	)

30 
	#SCHED_FIFO
 1

	)

31 
	#SCHED_RR
 2

	)

32 #ifdeà
__USE_GNU


33 
	#SCHED_BATCH
 3

	)

34 
	#SCHED_IDLE
 5

	)

36 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

39 #ifdeà
__USE_GNU


41 
	#CSIGNAL
 0x000000fà

	)

42 
	#CLONE_VM
 0x00000100

	)

43 
	#CLONE_FS
 0x00000200

	)

44 
	#CLONE_FILES
 0x00000400

	)

45 
	#CLONE_SIGHAND
 0x00000800

	)

46 
	#CLONE_PTRACE
 0x00002000

	)

47 
	#CLONE_VFORK
 0x00004000

	)

49 
	#CLONE_PARENT
 0x00008000

	)

51 
	#CLONE_THREAD
 0x00010000

	)

52 
	#CLONE_NEWNS
 0x00020000

	)

53 
	#CLONE_SYSVSEM
 0x00040000

	)

54 
	#CLONE_SETTLS
 0x00080000

	)

55 
	#CLONE_PARENT_SETTID
 0x00100000

	)

57 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

59 
	#CLONE_DETACHED
 0x00400000

	)

60 
	#CLONE_UNTRACED
 0x00800000

	)

62 
	#CLONE_CHILD_SETTID
 0x01000000

	)

64 
	#CLONE_NEWUTS
 0x04000000

	)

65 
	#CLONE_NEWIPC
 0x08000000

	)

66 
	#CLONE_NEWUSER
 0x10000000

	)

67 
	#CLONE_NEWPID
 0x20000000

	)

68 
	#CLONE_NEWNET
 0x40000000

	)

69 
	#CLONE_IO
 0x80000000

	)

73 
	ssched_·¿m


75 
	m__sched_´iÜ™y
;

78 
	g__BEGIN_DECLS


80 #ifdeà
__USE_GNU


82 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

83 
__æags
, *
__¬g
, ...è
__THROW
;

86 
	$unsh¬e
 (
__æags
è
__THROW
;

89 
	$sched_g‘ıu
 (è
__THROW
;

92 
	$£Šs
 (
__fd
, 
__n¡y³
è
__THROW
;

96 
__END_DECLS


100 #ià!
defšed
 
__defšed_sched·¿m
 \

101 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

102 
	#__defšed_sched·¿m
 1

	)

104 
	s__sched_·¿m


106 
__sched_´iÜ™y
;

108 #undeà
__Ãed_sched·¿m


112 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


113 
	#__ıu_£t_t_defšed


	)

115 
	#__CPU_SETSIZE
 1024

	)

116 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

119 
	t__ıu_mask
;

122 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

123 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

128 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

129 } 
	tıu_£t_t
;

132 #ià
	`__GNUC_PREREQ
 (2, 91)

133 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

134 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

136 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

138 
size_t
 
__i
; \

139 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

140 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

141 
__i
 = 0; __˜< 
__imax
; ++__i) \

142 
__b™s
[
__i
] = 0; \

143 
	}
} 0)

	)

145 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

146 (
__ex‹nsiÚ__
 \

147 ({ 
size_t
 
__ıu
 = (
ıu
); \

148 
__ıu
 < 8 * (
£tsize
) \

149 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

150 |ğ
	`__CPUMASK
 (
__ıu
)) \

151 : 0; }))

	)

152 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

153 (
__ex‹nsiÚ__
 \

154 ({ 
size_t
 
__ıu
 = (
ıu
); \

155 
__ıu
 < 8 * (
£tsize
) \

156 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

157 &ğ~
	`__CPUMASK
 (
__ıu
)) \

158 : 0; }))

	)

159 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

160 (
__ex‹nsiÚ__
 \

161 ({ 
size_t
 
__ıu
 = (
ıu
); \

162 
__ıu
 < 8 * (
£tsize
) \

163 ? ((((cÚ¡ 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

164 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

165 : 0; }))

	)

167 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

168 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

170 #ià
__GNUC_PREREQ
 (2, 91)

171 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

172 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

174 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

175 (
__ex‹nsiÚ__
 \

176 ({ cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

177 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

178 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

179 
size_t
 
__i
; \

180 
__i
 = 0; __˜< 
__imax
; ++__i) \

181 ià(
__¬r1
[
__i
] !ğ
__¬r2
[__i]) \

183 
__i
 =ğ
__imax
; }))

	)

186 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

187 (
__ex‹nsiÚ__
 \

188 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

189 cÚ¡ 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

190 cÚ¡ 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

191 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

192 
size_t
 
__i
; \

193 
__i
 = 0; __˜< 
__imax
; ++__i) \

194 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

195 
__de¡
; }))

	)

197 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

198 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

199 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

200 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

202 
__BEGIN_DECLS


204 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

205 
__THROW
;

206 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

207 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

209 
__END_DECLS


	@/usr/include/bits/setjmp.h

19 #iâdeà
_BITS_SETJMP_H


20 
	#_BITS_SETJMP_H
 1

	)

22 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


26 
	~<b™s/wÜdsize.h
>

28 #iâdeà
_ASM


30 #ià
__WORDSIZE
 == 64

31 
	t__jmp_buf
[8];

32 #–ià
defšed
 
__x86_64__


33 
	t__jmp_buf
[8];

35 
	t__jmp_buf
[6];

	@/usr/include/bits/setjmp2.h

19 #iâdeà
_SETJMP_H


24 #ifdeà
__REDIRECT_NTH


25 
__REDIRECT_NTHNL
 (
lÚgjmp
,

26 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

27 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

28 
__REDIRECT_NTHNL
 (
_lÚgjmp
,

29 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

30 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

31 
__REDIRECT_NTHNL
 (
siglÚgjmp
,

32 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

33 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

35 
__lÚgjmp_chk
 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

36 
__THROWNL
 
__©Œibu‹__
 ((
__nÜ‘uº__
));

37 
	#lÚgjmp
 
__lÚgjmp_chk


	)

38 
	#_lÚgjmp
 
__lÚgjmp_chk


	)

39 
	#siglÚgjmp
 
__lÚgjmp_chk


	)

	@/usr/include/bits/sigaction.h

19 #iâdeà
_SIGNAL_H


24 
	ssigaùiÚ


27 #ifdeà
__USE_POSIX199309


31 
__sighªdËr_t
 
	m§_hªdËr
;

33 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

35 
	m__sigaùiÚ_hªdËr
;

36 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

37 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

39 
__sighªdËr_t
 
	m§_hªdËr
;

43 
__sig£t_t
 
	m§_mask
;

46 
	m§_æags
;

49 (*
	m§_»¡Ü”
) ();

53 
	#SA_NOCLDSTOP
 1

	)

54 
	#SA_NOCLDWAIT
 2

	)

55 
	#SA_SIGINFO
 4

	)

57 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


58 
	#SA_ONSTACK
 0x08000000

	)

60 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


61 
	#SA_RESTART
 0x10000000

	)

62 
	#SA_NODEFER
 0x40000000

	)

64 
	#SA_RESETHAND
 0x80000000

	)

66 #ifdeà
__USE_MISC


67 
	#SA_INTERRUPT
 0x20000000

	)

70 
	#SA_NOMASK
 
SA_NODEFER


	)

71 
	#SA_ONESHOT
 
SA_RESETHAND


	)

72 
	#SA_STACK
 
SA_ONSTACK


	)

76 
	#SIG_BLOCK
 0

	)

77 
	#SIG_UNBLOCK
 1

	)

78 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

18 #iâdeà
_BITS_SIGCONTEXT_H


19 
	#_BITS_SIGCONTEXT_H
 1

	)

21 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


25 
	#FP_XSTATE_MAGIC1
 0x46505853U

	)

26 
	#FP_XSTATE_MAGIC2
 0x46505845U

	)

27 
	#FP_XSTATE_MAGIC2_SIZE
 (
FP_XSTATE_MAGIC2
)

	)

29 
	s_åx_sw_by‹s


31 
__ušt32_t
 
	mmagic1
;

32 
__ušt32_t
 
	mex‹nded_size
;

33 
__ušt64_t
 
	mx¡©e_bv
;

34 
__ušt32_t
 
	mx¡©e_size
;

35 
__ušt32_t
 
	m·ddšg
[7];

38 
	s_å»g


40 
	msignifiÿnd
[4];

41 
	mexpÚ’t
;

44 
	s_åx»g


46 
	msignifiÿnd
[4];

47 
	mexpÚ’t
;

48 
	m·ddšg
[3];

51 
	s_xmm»g


53 
__ušt32_t
 
	m–em’t
[4];

58 #iâdeà
__x86_64__


60 
	s_å¡©e


63 
__ušt32_t
 
	mcw
;

64 
__ušt32_t
 
	msw
;

65 
__ušt32_t
 
	mg
;

66 
__ušt32_t
 
	moff
;

67 
__ušt32_t
 
	mcs£l
;

68 
__ušt32_t
 
	md©aoff
;

69 
__ušt32_t
 
	md©a£l
;

70 
_å»g
 
	m_¡
[8];

71 
	m¡©us
;

72 
	mmagic
;

75 
__ušt32_t
 
	m_fx¤_’v
[6];

76 
__ušt32_t
 
	mmxc¤
;

77 
__ušt32_t
 
	m»£rved
;

78 
_åx»g
 
	m_fx¤_¡
[8];

79 
_xmm»g
 
	m_xmm
[8];

80 
__ušt32_t
 
	m·ddšg
[56];

83 #iâdeà
sigcÚ‹xt_¡ruù


88 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

91 
	#X86_FXSR_MAGIC
 0x0000

	)

93 
	ssigcÚ‹xt


95 
	mgs
, 
	m__gsh
;

96 
	mfs
, 
	m__fsh
;

97 
	mes
, 
	m__esh
;

98 
	mds
, 
	m__dsh
;

99 
	medi
;

100 
	mesi
;

101 
	mebp
;

102 
	me¥
;

103 
	mebx
;

104 
	medx
;

105 
	mecx
;

106 
	m—x
;

107 
	mŒ­no
;

108 
	m”r
;

109 
	me
;

110 
	mcs
, 
	m__csh
;

111 
	meæags
;

112 
	me¥_©_sigÇl
;

113 
	mss
, 
	m__ssh
;

114 
_å¡©e
 * 
	må¡©e
;

115 
	mŞdmask
;

116 
	mü2
;

121 
	s_å¡©e


124 
__ušt16_t
 
	mcwd
;

125 
__ušt16_t
 
	mswd
;

126 
__ušt16_t
 
	máw
;

127 
__ušt16_t
 
	mfİ
;

128 
__ušt64_t
 
	mr
;

129 
__ušt64_t
 
	mrdp
;

130 
__ušt32_t
 
	mmxc¤
;

131 
__ušt32_t
 
	mmxü_mask
;

132 
_åx»g
 
	m_¡
[8];

133 
_xmm»g
 
	m_xmm
[16];

134 
__ušt32_t
 
	m·ddšg
[24];

137 
	ssigcÚ‹xt


139 
__ušt64_t
 
	mr8
;

140 
__ušt64_t
 
	mr9
;

141 
__ušt64_t
 
	mr10
;

142 
__ušt64_t
 
	mr11
;

143 
__ušt64_t
 
	mr12
;

144 
__ušt64_t
 
	mr13
;

145 
__ušt64_t
 
	mr14
;

146 
__ušt64_t
 
	mr15
;

147 
__ušt64_t
 
	mrdi
;

148 
__ušt64_t
 
	mrsi
;

149 
__ušt64_t
 
	mrbp
;

150 
__ušt64_t
 
	mrbx
;

151 
__ušt64_t
 
	mrdx
;

152 
__ušt64_t
 
	m¿x
;

153 
__ušt64_t
 
	mrcx
;

154 
__ušt64_t
 
	mr¥
;

155 
__ušt64_t
 
	mr
;

156 
__ušt64_t
 
	meæags
;

157 
	mcs
;

158 
	mgs
;

159 
	mfs
;

160 
	m__·d0
;

161 
__ušt64_t
 
	m”r
;

162 
__ušt64_t
 
	mŒ­no
;

163 
__ušt64_t
 
	mŞdmask
;

164 
__ušt64_t
 
	mü2
;

165 
__ex‹nsiÚ__
 union

167 
_å¡©e
 * 
	må¡©e
;

168 
__ušt64_t
 
	m__å¡©e_wÜd
;

170 
__ušt64_t
 
	m__»£rved1
 [8];

175 
	s_x§ve_hdr


177 
__ušt64_t
 
	mx¡©e_bv
;

178 
__ušt64_t
 
	m»£rved1
[2];

179 
__ušt64_t
 
	m»£rved2
[5];

182 
	s_ymmh_¡©e


184 
__ušt32_t
 
	mymmh_¥aû
[64];

187 
	s_x¡©e


189 
_å¡©e
 
	må¡©e
;

190 
_x§ve_hdr
 
	mx¡©e_hdr
;

191 
_ymmh_¡©e
 
	mymmh
;

	@/usr/include/bits/siginfo.h

19 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

20 && !
defšed
 
	g__Ãed_sigev’t_t


24 
	~<b™s/wÜdsize.h
>

26 #ià(!
defšed
 
__have_sigv®_t
 \

27 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

28 || 
defšed
 
	g__Ãed_sigev’t_t
))

29 
	#__have_sigv®_t
 1

	)

32 
	usigv®


34 
	msiv®_št
;

35 *
	msiv®_±r
;

36 } 
	tsigv®_t
;

39 #ià(!
defšed
 
__have_sigšfo_t
 \

40 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

41 
	#__have_sigšfo_t
 1

	)

43 
	#__SI_MAX_SIZE
 128

	)

44 #ià
__WORDSIZE
 == 64

45 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

47 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

50 #ià
defšed
 
__x86_64__
 && 
__WORDSIZE
 == 32

55 
__şock_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
 (4))è
	t__sigchld_şock_t
;

56 
	#__SI_ALIGNMENT
 
	`__©Œibu‹__
 ((
	`__®igÃd__
 (8)))

	)

58 
__şock_t
 
	t__sigchld_şock_t
;

59 
	#__SI_ALIGNMENT


	)

64 
si_signo
;

65 
si_”ºo
;

67 
si_code
;

71 
_·d
[
__SI_PAD_SIZE
];

76 
__pid_t
 
si_pid
;

77 
__uid_t
 
si_uid
;

78 } 
_kl
;

83 
si_tid
;

84 
si_ov”run
;

85 
sigv®_t
 
si_sigv®
;

86 } 
_tim”
;

91 
__pid_t
 
si_pid
;

92 
__uid_t
 
si_uid
;

93 
sigv®_t
 
si_sigv®
;

94 } 
_¹
;

99 
__pid_t
 
si_pid
;

100 
__uid_t
 
si_uid
;

101 
si_¡©us
;

102 
__sigchld_şock_t
 
si_utime
;

103 
__sigchld_şock_t
 
si_¡ime
;

104 } 
_sigchld
;

109 *
si_addr
;

110 } 
_sigçuÉ
;

115 
si_bªd
;

116 
si_fd
;

117 } 
_sigpŞl
;

122 *
_ÿÎ_addr
;

123 
_sysÿÎ
;

124 
_¬ch
;

125 } 
_sigsys
;

126 } 
_sif›lds
;

127 } 
	tsigšfo_t
 
	t__SI_ALIGNMENT
;

131 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

132 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

133 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

134 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

135 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

136 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

137 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

138 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

139 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

140 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

141 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

142 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

143 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

144 
	#si_ÿÎ_addr
 
_sif›lds
.
_sigsys
.
_ÿÎ_addr


	)

145 
	#si_sysÿÎ
 
_sif›lds
.
_sigsys
.
_sysÿÎ


	)

146 
	#si_¬ch
 
_sif›lds
.
_sigsys
.
_¬ch


	)

153 
SI_ASYNCNL
 = -60,

154 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

155 
SI_TKILL
 = -6,

156 
	#SI_TKILL
 
SI_TKILL


	)

157 
SI_SIGIO
,

158 
	#SI_SIGIO
 
SI_SIGIO


	)

159 
SI_ASYNCIO
,

160 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

161 
SI_MESGQ
,

162 
	#SI_MESGQ
 
SI_MESGQ


	)

163 
SI_TIMER
,

164 
	#SI_TIMER
 
SI_TIMER


	)

165 
SI_QUEUE
,

166 
	#SI_QUEUE
 
SI_QUEUE


	)

167 
SI_USER
,

168 
	#SI_USER
 
SI_USER


	)

169 
SI_KERNEL
 = 0x80

170 
	#SI_KERNEL
 
SI_KERNEL


	)

177 
ILL_ILLOPC
 = 1,

178 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

179 
ILL_ILLOPN
,

180 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

181 
ILL_ILLADR
,

182 
	#ILL_ILLADR
 
ILL_ILLADR


	)

183 
ILL_ILLTRP
,

184 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

185 
ILL_PRVOPC
,

186 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

187 
ILL_PRVREG
,

188 
	#ILL_PRVREG
 
ILL_PRVREG


	)

189 
ILL_COPROC
,

190 
	#ILL_COPROC
 
ILL_COPROC


	)

191 
ILL_BADSTK


192 
	#ILL_BADSTK
 
ILL_BADSTK


	)

198 
FPE_INTDIV
 = 1,

199 
	#FPE_INTDIV
 
FPE_INTDIV


	)

200 
FPE_INTOVF
,

201 
	#FPE_INTOVF
 
FPE_INTOVF


	)

202 
FPE_FLTDIV
,

203 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

204 
FPE_FLTOVF
,

205 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

206 
FPE_FLTUND
,

207 
	#FPE_FLTUND
 
FPE_FLTUND


	)

208 
FPE_FLTRES
,

209 
	#FPE_FLTRES
 
FPE_FLTRES


	)

210 
FPE_FLTINV
,

211 
	#FPE_FLTINV
 
FPE_FLTINV


	)

212 
FPE_FLTSUB


213 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

219 
SEGV_MAPERR
 = 1,

220 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

221 
SEGV_ACCERR


222 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

228 
BUS_ADRALN
 = 1,

229 
	#BUS_ADRALN
 
BUS_ADRALN


	)

230 
BUS_ADRERR
,

231 
	#BUS_ADRERR
 
BUS_ADRERR


	)

232 
BUS_OBJERR


233 
	#BUS_OBJERR
 
BUS_OBJERR


	)

239 
TRAP_BRKPT
 = 1,

240 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

241 
TRAP_TRACE


242 
	#TRAP_TRACE
 
TRAP_TRACE


	)

248 
CLD_EXITED
 = 1,

249 
	#CLD_EXITED
 
CLD_EXITED


	)

250 
CLD_KILLED
,

251 
	#CLD_KILLED
 
CLD_KILLED


	)

252 
CLD_DUMPED
,

253 
	#CLD_DUMPED
 
CLD_DUMPED


	)

254 
CLD_TRAPPED
,

255 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

256 
CLD_STOPPED
,

257 
	#CLD_STOPPED
 
CLD_STOPPED


	)

258 
CLD_CONTINUED


259 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

265 
POLL_IN
 = 1,

266 
	#POLL_IN
 
POLL_IN


	)

267 
POLL_OUT
,

268 
	#POLL_OUT
 
POLL_OUT


	)

269 
POLL_MSG
,

270 
	#POLL_MSG
 
POLL_MSG


	)

271 
POLL_ERR
,

272 
	#POLL_ERR
 
POLL_ERR


	)

273 
POLL_PRI
,

274 
	#POLL_PRI
 
POLL_PRI


	)

275 
POLL_HUP


276 
	#POLL_HUP
 
POLL_HUP


	)

279 #undeà
__Ãed_sigšfo_t


283 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

284 && !
defšed
 
__have_sigev’t_t


285 
	#__have_sigev’t_t
 1

	)

288 
	#__SIGEV_MAX_SIZE
 64

	)

289 #ià
__WORDSIZE
 == 64

290 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

292 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

296 #iâdeà
__have_±h»ad_©Œ_t


297 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

298 
	#__have_±h»ad_©Œ_t
 1

	)

301 
	ssigev’t


303 
sigv®_t
 
sigev_v®ue
;

304 
sigev_signo
;

305 
sigev_nÙify
;

309 
_·d
[
__SIGEV_PAD_SIZE
];

313 
__pid_t
 
_tid
;

317 (*
_funùiÚ
è(
sigv®_t
);

318 
±h»ad_©Œ_t
 *
_©Œibu‹
;

319 } 
_sigev_th»ad
;

320 } 
_sigev_un
;

321 } 
	tsigev’t_t
;

324 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

325 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

330 
SIGEV_SIGNAL
 = 0,

331 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

332 
SIGEV_NONE
,

333 
	#SIGEV_NONE
 
SIGEV_NONE


	)

334 
SIGEV_THREAD
,

335 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

337 
SIGEV_THREAD_ID
 = 4

338 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

19 #ifdef 
_SIGNAL_H


22 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

23 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

24 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

26 #ifdeà
__USE_UNIX98


27 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

32 
	#SIGHUP
 1

	)

33 
	#SIGINT
 2

	)

34 
	#SIGQUIT
 3

	)

35 
	#SIGILL
 4

	)

36 
	#SIGTRAP
 5

	)

37 
	#SIGABRT
 6

	)

38 
	#SIGIOT
 6

	)

39 
	#SIGBUS
 7

	)

40 
	#SIGFPE
 8

	)

41 
	#SIGKILL
 9

	)

42 
	#SIGUSR1
 10

	)

43 
	#SIGSEGV
 11

	)

44 
	#SIGUSR2
 12

	)

45 
	#SIGPIPE
 13

	)

46 
	#SIGALRM
 14

	)

47 
	#SIGTERM
 15

	)

48 
	#SIGSTKFLT
 16

	)

49 
	#SIGCLD
 
SIGCHLD


	)

50 
	#SIGCHLD
 17

	)

51 
	#SIGCONT
 18

	)

52 
	#SIGSTOP
 19

	)

53 
	#SIGTSTP
 20

	)

54 
	#SIGTTIN
 21

	)

55 
	#SIGTTOU
 22

	)

56 
	#SIGURG
 23

	)

57 
	#SIGXCPU
 24

	)

58 
	#SIGXFSZ
 25

	)

59 
	#SIGVTALRM
 26

	)

60 
	#SIGPROF
 27

	)

61 
	#SIGWINCH
 28

	)

62 
	#SIGPOLL
 
SIGIO


	)

63 
	#SIGIO
 29

	)

64 
	#SIGPWR
 30

	)

65 
	#SIGSYS
 31

	)

66 
	#SIGUNUSED
 31

	)

68 
	#_NSIG
 65

	)

71 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

72 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

76 
	#__SIGRTMIN
 32

	)

77 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

20 #iâdef 
_SIGSET_H_ty³s


21 
	#_SIGSET_H_ty³s
 1

	)

23 
	t__sig_©omic_t
;

27 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

30 
	m__v®
[
_SIGSET_NWORDS
];

31 } 
	t__sig£t_t
;

42 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


43 
	#_SIGSET_H_âs
 1

	)

45 #iâdeà
_EXTERN_INLINE


46 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

50 
	#__sigmask
(
sig
) \

51 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

54 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

56 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

57 
	#__sigem±y£t
(
£t
) \

58 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

59 
sig£t_t
 *
__£t
 = (
£t
); \

60 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

61 0; }))

	)

62 
	#__sigfl£t
(
£t
) \

63 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

64 
sig£t_t
 *
__£t
 = (
£t
); \

65 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

66 0; }))

	)

68 #ifdeà
__USE_GNU


72 
	#__sigi£m±y£t
(
£t
) \

73 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

74 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

75 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

76 !
__»t
 && --
__út
 >= 0) \

77 
__»t
 = 
__£t
->
__v®
[
__út
]; \

78 
__»t
 =ğ0; }))

	)

79 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

80 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

81 
sig£t_t
 *
__de¡
 = (
de¡
); \

82 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

83 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

84 --
__út
 >= 0) \

85 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

86 & 
__right
->
__v®
[
__út
]); \

87 0; }))

	)

88 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

89 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

90 
sig£t_t
 *
__de¡
 = (
de¡
); \

91 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

92 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

93 --
__út
 >= 0) \

94 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

95 | 
__right
->
__v®
[
__út
]); \

96 0; }))

	)

103 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

104 
__sigadd£t
 (
__sig£t_t
 *, );

105 
__sigd–£t
 (
__sig£t_t
 *, );

107 #ifdeà
__USE_EXTERN_INLINES


108 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

109 
_EXTERN_INLINE
 \

110 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

112 
__mask
 = 
	`__sigmask
 (
__sig
); \

113 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

114  
BODY
; \

115 }

	)

117 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

118 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

119 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

121 #undeà
__SIGSETFN


	@/usr/include/bits/sigstack.h

19 #iâdeà
_SIGNAL_H


25 
	ssig¡ack


27 *
	mss_¥
;

28 
	mss_Ú¡ack
;

35 
	mSS_ONSTACK
 = 1,

36 
	#SS_ONSTACK
 
SS_ONSTACK


	)

37 
	mSS_DISABLE


38 
	#SS_DISABLE
 
SS_DISABLE


	)

42 
	#MINSIGSTKSZ
 2048

	)

45 
	#SIGSTKSZ
 8192

	)

49 
	ssig®t¡ack


51 *
	mss_¥
;

52 
	mss_æags
;

53 
size_t
 
	mss_size
;

54 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

19 #iâdeà
_BITS_SIGTHREAD_H


20 
	#_BITS_SIGTHREAD_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


30 
	$±h»ad_sigmask
 (
__how
,

31 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

32 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

35 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

37 #ifdeà
__USE_GNU


39 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

40 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/bits/sockaddr.h

23 #iâdeà
_BITS_SOCKADDR_H


24 
	#_BITS_SOCKADDR_H
 1

	)

28 
	t§_çmy_t
;

34 
	#__SOCKADDR_COMMON
(
§_´efix
) \

35 
§_çmy_t
 
§_´efix
##
çmy


	)

37 
	#__SOCKADDR_COMMON_SIZE
 ( ())

	)

	@/usr/include/bits/socket.h

19 #iâdeà
__BITS_SOCKET_H


20 
	#__BITS_SOCKET_H


	)

22 #iâdeà
_SYS_SOCKET_H


26 
	#__Ãed_size_t


	)

27 
	~<¡ddef.h
>

29 
	~<sys/ty³s.h
>

32 #iâdeà
__sockËn_t_defšed


33 
__sockËn_t
 
	tsockËn_t
;

34 
	#__sockËn_t_defšed


	)

38 
	~<b™s/sock‘_ty³.h
>

41 
	#PF_UNSPEC
 0

	)

42 
	#PF_LOCAL
 1

	)

43 
	#PF_UNIX
 
PF_LOCAL


	)

44 
	#PF_FILE
 
PF_LOCAL


	)

45 
	#PF_INET
 2

	)

46 
	#PF_AX25
 3

	)

47 
	#PF_IPX
 4

	)

48 
	#PF_APPLETALK
 5

	)

49 
	#PF_NETROM
 6

	)

50 
	#PF_BRIDGE
 7

	)

51 
	#PF_ATMPVC
 8

	)

52 
	#PF_X25
 9

	)

53 
	#PF_INET6
 10

	)

54 
	#PF_ROSE
 11

	)

55 
	#PF_DECÃt
 12

	)

56 
	#PF_NETBEUI
 13

	)

57 
	#PF_SECURITY
 14

	)

58 
	#PF_KEY
 15

	)

59 
	#PF_NETLINK
 16

	)

60 
	#PF_ROUTE
 
PF_NETLINK


	)

61 
	#PF_PACKET
 17

	)

62 
	#PF_ASH
 18

	)

63 
	#PF_ECONET
 19

	)

64 
	#PF_ATMSVC
 20

	)

65 
	#PF_RDS
 21

	)

66 
	#PF_SNA
 22

	)

67 
	#PF_IRDA
 23

	)

68 
	#PF_PPPOX
 24

	)

69 
	#PF_WANPIPE
 25

	)

70 
	#PF_LLC
 26

	)

71 
	#PF_CAN
 29

	)

72 
	#PF_TIPC
 30

	)

73 
	#PF_BLUETOOTH
 31

	)

74 
	#PF_IUCV
 32

	)

75 
	#PF_RXRPC
 33

	)

76 
	#PF_ISDN
 34

	)

77 
	#PF_PHONET
 35

	)

78 
	#PF_IEEE802154
 36

	)

79 
	#PF_CAIF
 37

	)

80 
	#PF_ALG
 38

	)

81 
	#PF_NFC
 39

	)

82 
	#PF_MAX
 40

	)

85 
	#AF_UNSPEC
 
PF_UNSPEC


	)

86 
	#AF_LOCAL
 
PF_LOCAL


	)

87 
	#AF_UNIX
 
PF_UNIX


	)

88 
	#AF_FILE
 
PF_FILE


	)

89 
	#AF_INET
 
PF_INET


	)

90 
	#AF_AX25
 
PF_AX25


	)

91 
	#AF_IPX
 
PF_IPX


	)

92 
	#AF_APPLETALK
 
PF_APPLETALK


	)

93 
	#AF_NETROM
 
PF_NETROM


	)

94 
	#AF_BRIDGE
 
PF_BRIDGE


	)

95 
	#AF_ATMPVC
 
PF_ATMPVC


	)

96 
	#AF_X25
 
PF_X25


	)

97 
	#AF_INET6
 
PF_INET6


	)

98 
	#AF_ROSE
 
PF_ROSE


	)

99 
	#AF_DECÃt
 
PF_DECÃt


	)

100 
	#AF_NETBEUI
 
PF_NETBEUI


	)

101 
	#AF_SECURITY
 
PF_SECURITY


	)

102 
	#AF_KEY
 
PF_KEY


	)

103 
	#AF_NETLINK
 
PF_NETLINK


	)

104 
	#AF_ROUTE
 
PF_ROUTE


	)

105 
	#AF_PACKET
 
PF_PACKET


	)

106 
	#AF_ASH
 
PF_ASH


	)

107 
	#AF_ECONET
 
PF_ECONET


	)

108 
	#AF_ATMSVC
 
PF_ATMSVC


	)

109 
	#AF_RDS
 
PF_RDS


	)

110 
	#AF_SNA
 
PF_SNA


	)

111 
	#AF_IRDA
 
PF_IRDA


	)

112 
	#AF_PPPOX
 
PF_PPPOX


	)

113 
	#AF_WANPIPE
 
PF_WANPIPE


	)

114 
	#AF_LLC
 
PF_LLC


	)

115 
	#AF_CAN
 
PF_CAN


	)

116 
	#AF_TIPC
 
PF_TIPC


	)

117 
	#AF_BLUETOOTH
 
PF_BLUETOOTH


	)

118 
	#AF_IUCV
 
PF_IUCV


	)

119 
	#AF_RXRPC
 
PF_RXRPC


	)

120 
	#AF_ISDN
 
PF_ISDN


	)

121 
	#AF_PHONET
 
PF_PHONET


	)

122 
	#AF_IEEE802154
 
PF_IEEE802154


	)

123 
	#AF_CAIF
 
PF_CAIF


	)

124 
	#AF_ALG
 
PF_ALG


	)

125 
	#AF_NFC
 
PF_NFC


	)

126 
	#AF_MAX
 
PF_MAX


	)

132 
	#SOL_RAW
 255

	)

133 
	#SOL_DECNET
 261

	)

134 
	#SOL_X25
 262

	)

135 
	#SOL_PACKET
 263

	)

136 
	#SOL_ATM
 264

	)

137 
	#SOL_AAL
 265

	)

138 
	#SOL_IRDA
 266

	)

141 
	#SOMAXCONN
 128

	)

144 
	~<b™s/sockaddr.h
>

147 
	ssockaddr


149 
__SOCKADDR_COMMON
 (
§_
);

150 
	m§_d©a
[14];

156 
	#__ss_®igÁy³
 

	)

157 
	#_SS_SIZE
 128

	)

158 
	#_SS_PADSIZE
 (
_SS_SIZE
 - (2 *  (
__ss_®igÁy³
)))

	)

160 
	ssockaddr_¡Üage


162 
__SOCKADDR_COMMON
 (
ss_
);

163 
__ss_®igÁy³
 
	m__ss_®ign
;

164 
	m__ss_·ddšg
[
_SS_PADSIZE
];

171 
	mMSG_OOB
 = 0x01,

172 
	#MSG_OOB
 
MSG_OOB


	)

173 
	mMSG_PEEK
 = 0x02,

174 
	#MSG_PEEK
 
MSG_PEEK


	)

175 
	mMSG_DONTROUTE
 = 0x04,

176 
	#MSG_DONTROUTE
 
MSG_DONTROUTE


	)

177 #ifdeà
__USE_GNU


179 
	mMSG_TRYHARD
 = 
MSG_DONTROUTE
,

180 
	#MSG_TRYHARD
 
MSG_DONTROUTE


	)

182 
	mMSG_CTRUNC
 = 0x08,

183 
	#MSG_CTRUNC
 
MSG_CTRUNC


	)

184 
	mMSG_PROXY
 = 0x10,

185 
	#MSG_PROXY
 
MSG_PROXY


	)

186 
	mMSG_TRUNC
 = 0x20,

187 
	#MSG_TRUNC
 
MSG_TRUNC


	)

188 
	mMSG_DONTWAIT
 = 0x40,

189 
	#MSG_DONTWAIT
 
MSG_DONTWAIT


	)

190 
	mMSG_EOR
 = 0x80,

191 
	#MSG_EOR
 
MSG_EOR


	)

192 
	mMSG_WAITALL
 = 0x100,

193 
	#MSG_WAITALL
 
MSG_WAITALL


	)

194 
	mMSG_FIN
 = 0x200,

195 
	#MSG_FIN
 
MSG_FIN


	)

196 
	mMSG_SYN
 = 0x400,

197 
	#MSG_SYN
 
MSG_SYN


	)

198 
	mMSG_CONFIRM
 = 0x800,

199 
	#MSG_CONFIRM
 
MSG_CONFIRM


	)

200 
	mMSG_RST
 = 0x1000,

201 
	#MSG_RST
 
MSG_RST


	)

202 
	mMSG_ERRQUEUE
 = 0x2000,

203 
	#MSG_ERRQUEUE
 
MSG_ERRQUEUE


	)

204 
	mMSG_NOSIGNAL
 = 0x4000,

205 
	#MSG_NOSIGNAL
 
MSG_NOSIGNAL


	)

206 
	mMSG_MORE
 = 0x8000,

207 
	#MSG_MORE
 
MSG_MORE


	)

208 
	mMSG_WAITFORONE
 = 0x10000,

209 
	#MSG_WAITFORONE
 
MSG_WAITFORONE


	)

210 
	mMSG_FASTOPEN
 = 0x20000000,

211 
	#MSG_FASTOPEN
 
MSG_FASTOPEN


	)

213 
	mMSG_CMSG_CLOEXEC
 = 0x40000000

216 
	#MSG_CMSG_CLOEXEC
 
MSG_CMSG_CLOEXEC


	)

222 
	smsghdr


224 *
	mmsg_Çme
;

225 
sockËn_t
 
	mmsg_Çm–’
;

227 
iovec
 *
	mmsg_iov
;

228 
size_t
 
	mmsg_iovËn
;

230 *
	mmsg_cÚŒŞ
;

231 
size_t
 
	mmsg_cÚŒŞËn
;

236 
	mmsg_æags
;

240 
	scmsghdr


242 
size_t
 
	mcmsg_Ën
;

247 
	mcmsg_Ëv–
;

248 
	mcmsg_ty³
;

249 #ià(!
defšed
 
__STRICT_ANSI__
 && 
__GNUC__
 >ğ2è|| 
__STDC_VERSION__
 >= 199901L

250 
__ex‹nsiÚ__
 
__cmsg_d©a
 
	m__æex¬r
;

255 #ià(!
defšed
 
__STRICT_ANSI__
 && 
__GNUC__
 >ğ2è|| 
__STDC_VERSION__
 >= 199901L

256 
	#CMSG_DATA
(
cmsg
è((cmsg)->
__cmsg_d©a
)

	)

258 
	#CMSG_DATA
(
cmsg
è((*è((
cmsghdr
 *è(cmsgè+ 1))

	)

260 
	#CMSG_NXTHDR
(
mhdr
, 
cmsg
è
	`__cmsg_nxthdr
 (mhdr, cmsg)

	)

261 
	#CMSG_FIRSTHDR
(
mhdr
) \

262 ((
size_t
è(
mhdr
)->
msg_cÚŒŞËn
 >ğ (
cmsghdr
) \

263 ? (
cmsghdr
 *è(
mhdr
)->
msg_cÚŒŞ
 : (cmsghd¸*è0)

	)

264 
	#CMSG_ALIGN
(
Ën
è((Ö’è+  (
size_t
) - 1) \

265 & (
size_t
è~( (size_tè- 1))

	)

266 
	#CMSG_SPACE
(
Ën
è(
	`CMSG_ALIGN
 (len) \

267 + 
	`CMSG_ALIGN
 ( (
cmsghdr
)))

	)

268 
	#CMSG_LEN
(
Ën
è(
	`CMSG_ALIGN
 ( (
cmsghdr
)è+ (Ën))

	)

270 
cmsghdr
 *
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
,

271 
cmsghdr
 *
__cmsg
è
__THROW
;

272 #ifdeà
__USE_EXTERN_INLINES


273 #iâdeà
_EXTERN_INLINE


274 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

276 
_EXTERN_INLINE
 
cmsghdr
 *

277 
	`__NTH
 (
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
, 
cmsghdr
 *
__cmsg
))

279 ià((
size_t
è
__cmsg
->
cmsg_Ën
 <  (
cmsghdr
))

281  (
cmsghdr
 *) 0;

283 
__cmsg
 = (
cmsghdr
 *) ((*) __cmsg

284 + 
	`CMSG_ALIGN
 (
__cmsg
->
cmsg_Ën
));

285 ià((*è(
__cmsg
 + 1è> ((*è
__mhdr
->
msg_cÚŒŞ


286 + 
__mhdr
->
msg_cÚŒŞËn
)

287 || ((*è
__cmsg
 + 
	`CMSG_ALIGN
 (__cmsg->
cmsg_Ën
)

288 > ((*è
__mhdr
->
msg_cÚŒŞ
 + __mhdr->
msg_cÚŒŞËn
)))

290  (
cmsghdr
 *) 0;

291  
__cmsg
;

292 
	}
}

299 
	mSCM_RIGHTS
 = 0x01

300 
	#SCM_RIGHTS
 
SCM_RIGHTS


	)

301 #ifdeà
__USE_GNU


302 , 
	mSCM_CREDENTIALS
 = 0x02

303 
	#SCM_CREDENTIALS
 
SCM_CREDENTIALS


	)

307 #ifdeà
__USE_GNU


309 
	suüed


311 
pid_t
 
	mpid
;

312 
uid_t
 
	muid
;

313 
gid_t
 
	mgid
;

318 #ià!
defšed
 
__USE_MISC
 && !defšed 
__USE_GNU


319 #iâdeà
FIOGETOWN


320 
	#__SYS_SOCKET_H_undef_FIOGETOWN


	)

322 #iâdeà
FIOSETOWN


323 
	#__SYS_SOCKET_H_undef_FIOSETOWN


	)

325 #iâdeà
SIOCATMARK


326 
	#__SYS_SOCKET_H_undef_SIOCATMARK


	)

328 #iâdeà
SIOCGPGRP


329 
	#__SYS_SOCKET_H_undef_SIOCGPGRP


	)

331 #iâdeà
SIOCGSTAMP


332 
	#__SYS_SOCKET_H_undef_SIOCGSTAMP


	)

334 #iâdeà
SIOCGSTAMPNS


335 
	#__SYS_SOCKET_H_undef_SIOCGSTAMPNS


	)

337 #iâdeà
SIOCSPGRP


338 
	#__SYS_SOCKET_H_undef_SIOCSPGRP


	)

343 
	~<asm/sock‘.h
>

345 #ià!
defšed
 
__USE_MISC
 && !defšed 
__USE_GNU


346 #ifdeà
__SYS_SOCKET_H_undef_FIOGETOWN


347 #undeà
__SYS_SOCKET_H_undef_FIOGETOWN


348 #undeà
FIOGETOWN


350 #ifdeà
__SYS_SOCKET_H_undef_FIOSETOWN


351 #undeà
__SYS_SOCKET_H_undef_FIOSETOWN


352 #undeà
FIOSETOWN


354 #ifdeà
__SYS_SOCKET_H_undef_SIOCATMARK


355 #undeà
__SYS_SOCKET_H_undef_SIOCATMARK


356 #undeà
SIOCATMARK


358 #ifdeà
__SYS_SOCKET_H_undef_SIOCGPGRP


359 #undeà
__SYS_SOCKET_H_undef_SIOCGPGRP


360 #undeà
SIOCGPGRP


362 #ifdeà
__SYS_SOCKET_H_undef_SIOCGSTAMP


363 #undeà
__SYS_SOCKET_H_undef_SIOCGSTAMP


364 #undeà
SIOCGSTAMP


366 #ifdeà
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


367 #undeà
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


368 #undeà
SIOCGSTAMPNS


370 #ifdeà
__SYS_SOCKET_H_undef_SIOCSPGRP


371 #undeà
__SYS_SOCKET_H_undef_SIOCSPGRP


372 #undeà
SIOCSPGRP


377 
	slšg”


379 
	ml_Úoff
;

380 
	ml_lšg”
;

	@/usr/include/bits/socket2.h

19 #iâdeà
_SYS_SOCKET_H


23 
ssize_t
 
__»cv_chk
 (
__fd
, *
__buf
, 
size_t
 
__n
, size_ˆ
__buæ’
,

24 
__æags
);

25 
ssize_t
 
__REDIRECT
 (
__»cv_®Ÿs
, (
__fd
, *
__buf
, 
size_t
 
__n
,

26 
__æags
), 
»cv
);

27 
ssize_t
 
__REDIRECT
 (
__»cv_chk_w¬n
,

28 (
__fd
, *
__buf
, 
size_t
 
__n
, size_ˆ
__buæ’
,

29 
__æags
), 
__»cv_chk
)

30 
__w¬Ç‰r
 ("recv called with bigger†engthhan size of destination "

33 
__fÜtify_funùiÚ
 
ssize_t


34 
	$»cv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__æags
)

36 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

38 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

39  
	`__»cv_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
);

41 ià(
__n
 > 
	`__bos0
 (
__buf
))

42  
	`__»cv_chk_w¬n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
);

44  
	`__»cv_®Ÿs
 (
__fd
, 
__buf
, 
__n
, 
__æags
);

45 
	}
}

47 
ssize_t
 
__»cväom_chk
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

48 
size_t
 
__buæ’
, 
__æags
,

49 
__SOCKADDR_ARG
 
__addr
,

50 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

51 
ssize_t
 
__REDIRECT
 (
__»cväom_®Ÿs
,

52 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

53 
__æags
, 
__SOCKADDR_ARG
 
__addr
,

54 
sockËn_t
 *
__»¡riù
 
__addr_Ën
), 
»cväom
);

55 
ssize_t
 
__REDIRECT
 (
__»cväom_chk_w¬n
,

56 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

57 
size_t
 
__buæ’
, 
__æags
,

58 
__SOCKADDR_ARG
 
__addr
,

59 
sockËn_t
 *
__»¡riù
 
__addr_Ën
), 
__»cväom_chk
)

60 
__w¬Ç‰r
 ("recvfrom called with bigger†engthhan size of "

63 
__fÜtify_funùiÚ
 
ssize_t


64 
	$»cväom
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
, 
__æags
,

65 
__SOCKADDR_ARG
 
__addr
, 
sockËn_t
 *
__»¡riù
 
__addr_Ën
)

67 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

69 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

70  
	`__»cväom_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
,

71 
__addr
, 
__addr_Ën
);

72 ià(
__n
 > 
	`__bos0
 (
__buf
))

73  
	`__»cväom_chk_w¬n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
,

74 
__addr
, 
__addr_Ën
);

76  
	`__»cväom_®Ÿs
 (
__fd
, 
__buf
, 
__n
, 
__æags
, 
__addr
, 
__addr_Ën
);

77 
	}
}

	@/usr/include/bits/stat.h

18 #ià!
defšed
 
_SYS_STAT_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_STAT_H


23 
	#_BITS_STAT_H
 1

	)

26 #iâdeà
__x86_64__


27 
	#_STAT_VER_LINUX_OLD
 1

	)

28 
	#_STAT_VER_KERNEL
 1

	)

29 
	#_STAT_VER_SVR4
 2

	)

30 
	#_STAT_VER_LINUX
 3

	)

33 
	#_MKNOD_VER_LINUX
 1

	)

34 
	#_MKNOD_VER_SVR4
 2

	)

35 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

37 
	#_STAT_VER_KERNEL
 0

	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s¡©


48 
__dev_t
 
	m¡_dev
;

49 #iâdeà
__x86_64__


50 
	m__·d1
;

52 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


53 
__šo_t
 
	m¡_šo
;

55 
__šo_t
 
	m__¡_šo
;

57 #iâdeà
__x86_64__


58 
__mode_t
 
	m¡_mode
;

59 
__Æšk_t
 
	m¡_Æšk
;

61 
__Æšk_t
 
	m¡_Æšk
;

62 
__mode_t
 
	m¡_mode
;

64 
__uid_t
 
	m¡_uid
;

65 
__gid_t
 
	m¡_gid
;

66 #ifdeà
__x86_64__


67 
	m__·d0
;

69 
__dev_t
 
	m¡_rdev
;

70 #iâdeà
__x86_64__


71 
	m__·d2
;

73 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


74 
__off_t
 
	m¡_size
;

76 
__off64_t
 
	m¡_size
;

78 
__blksize_t
 
	m¡_blksize
;

79 #ià
defšed
 
__x86_64__
 || !defšed 
__USE_FILE_OFFSET64


80 
__blkút_t
 
	m¡_blocks
;

82 
__blkút64_t
 
	m¡_blocks
;

84 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


91 
time¥ec
 
	m¡_©im
;

92 
time¥ec
 
	m¡_mtim
;

93 
time¥ec
 
	m¡_ùim
;

94 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

95 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

96 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

98 
__time_t
 
	m¡_©ime
;

99 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

100 
__time_t
 
	m¡_mtime
;

101 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

102 
__time_t
 
	m¡_ùime
;

103 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

105 #ifdeà
__x86_64__


106 
__sysÿÎ_¦Úg_t
 
	m__unu£d
[3];

108 #iâdeà
__USE_FILE_OFFSET64


109 
	m__unu£d4
;

110 
	m__unu£d5
;

112 
__šo64_t
 
	m¡_šo
;

117 #ifdeà
__USE_LARGEFILE64


119 
	s¡©64


121 
__dev_t
 
	m¡_dev
;

122 #ifdeà
__x86_64__


123 
__šo64_t
 
	m¡_šo
;

124 
__Æšk_t
 
	m¡_Æšk
;

125 
__mode_t
 
	m¡_mode
;

127 
	m__·d1
;

128 
__šo_t
 
	m__¡_šo
;

129 
__mode_t
 
	m¡_mode
;

130 
__Æšk_t
 
	m¡_Æšk
;

132 
__uid_t
 
	m¡_uid
;

133 
__gid_t
 
	m¡_gid
;

134 #ifdeà
__x86_64__


135 
	m__·d0
;

136 
__dev_t
 
	m¡_rdev
;

137 
__off_t
 
	m¡_size
;

139 
__dev_t
 
	m¡_rdev
;

140 
	m__·d2
;

141 
__off64_t
 
	m¡_size
;

143 
__blksize_t
 
	m¡_blksize
;

144 
__blkút64_t
 
	m¡_blocks
;

145 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


152 
time¥ec
 
	m¡_©im
;

153 
time¥ec
 
	m¡_mtim
;

154 
time¥ec
 
	m¡_ùim
;

156 
__time_t
 
	m¡_©ime
;

157 
__sysÿÎ_ulÚg_t
 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
__sysÿÎ_ulÚg_t
 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
__sysÿÎ_ulÚg_t
 
	m¡_ùim’£c
;

163 #ifdeà
__x86_64__


164 
__sysÿÎ_¦Úg_t
 
	m__unu£d
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

19 #iâdeà
_STDIO_H


23 
__BEGIN_NAMESPACE_STD


24 
	$__LDBL_REDIR_DECL
 (
årštf
)

25 
	$__LDBL_REDIR_DECL
 (
´štf
)

26 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

27 
	$__LDBL_REDIR_DECL
 (
vårštf
)

28 
	$__LDBL_REDIR_DECL
 (
v´štf
)

29 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

30 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

31 && !
defšed
 
__REDIRECT
 \

32 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

33 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

34 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

37 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

41 
__END_NAMESPACE_STD


43 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

46 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

47 
__END_NAMESPACE_C99


50 #ifdef 
__USE_ISOC99


51 
__BEGIN_NAMESPACE_C99


52 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

53 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

54 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

55 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

58 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

62 
__END_NAMESPACE_C99


65 #ifdeà
__USE_XOPEN2K8


66 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

67 
	$__LDBL_REDIR_DECL
 (
d´štf
)

70 #ifdeà
__USE_GNU


71 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

73 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

74 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

75 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

78 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


79 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

80 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

81 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


82 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

83 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

85 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

88 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

89 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

90 #ifdeà
__USE_XOPEN2K8


91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

94 #ifdeà
__USE_GNU


95 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

96 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

97 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

98 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

19 #iâdeà
_STDIO_H


23 #iâdeà
__ex‹º_šlše


24 
	#__STDIO_INLINE
 
šlše


	)

26 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

30 #ifdeà
__USE_EXTERN_INLINES


33 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ
)

35 
__STDIO_INLINE
 

36 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

38  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

39 
	}
}

43 
__STDIO_INLINE
 

44 
	$g‘ch¬
 ()

46  
	`_IO_g‘c
 (
¡dš
);

47 
	}
}

50 #ifdeà
__USE_MISC


52 
__STDIO_INLINE
 

53 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

55  
	`_IO_g‘c_uÆocked
 (
__å
);

56 
	}
}

60 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


62 
__STDIO_INLINE
 

63 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

65  
	`_IO_g‘c_uÆocked
 (
__å
);

66 
	}
}

69 
__STDIO_INLINE
 

70 
	$g‘ch¬_uÆocked
 ()

72  
	`_IO_g‘c_uÆocked
 (
¡dš
);

73 
	}
}

78 
__STDIO_INLINE
 

79 
	$putch¬
 (
__c
)

81  
	`_IO_putc
 (
__c
, 
¡dout
);

82 
	}
}

85 #ifdeà
__USE_MISC


87 
__STDIO_INLINE
 

88 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

90  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

91 
	}
}

95 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


97 
__STDIO_INLINE
 

98 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

100  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

101 
	}
}

104 
__STDIO_INLINE
 

105 
	$putch¬_uÆocked
 (
__c
)

107  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

108 
	}
}

112 #ifdef 
__USE_GNU


114 
__STDIO_INLINE
 
_IO_ssize_t


115 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

117  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

118 
	}
}

122 #ifdeà
__USE_MISC


124 
__STDIO_INLINE
 

125 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

127  
	`_IO_ãof_uÆocked
 (
__¡»am
);

128 
	}
}

131 
__STDIO_INLINE
 

132 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

134  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

135 
	}
}

141 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

142 && !
defšed
 
	g__ılu¥lus


144 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

145 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

146 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

147 && (
size_t
è(
size
) != 0) \

148 ? ({ *
__±r
 = (*è(
±r
); \

149 
FILE
 *
__¡»am
 = (
¡»am
); \

150 
size_t
 
__út
; \

151 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

152 
__út
 > 0; --__cnt) \

154 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

155 ià(
__c
 =ğ
EOF
) \

157 *
__±r
++ = 
__c
; \

159 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

160 / (
size_t
è(
size
); }) \

161 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

162 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

164 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

165 (è(
n
), (
size_t
) 0) \

166 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

168 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

169 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

170 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

171 && (
size_t
è(
size
) != 0) \

172 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

173 
FILE
 *
__¡»am
 = (
¡»am
); \

174 
size_t
 
__út
; \

175 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

176 
__út
 > 0; --__cnt) \

177 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

179 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

180 / (
size_t
è(
size
); }) \

181 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

182 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

184 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

185 (è(
n
), (
size_t
) 0) \

186 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

190 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

19 #iâdeà
_STDIO_H


23 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

24 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

25 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

26 cÚ¡ *
__»¡riù
 
__fÜm©
,

27 
_G_va_li¡
 
__­
è
__THROW
;

29 #ifdeà
__va_¬g_·ck


30 
__fÜtify_funùiÚ
 

31 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
, ...))

33  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

34 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

35 
	}
}

36 #–ià!
defšed
 
__ılu¥lus


37 
	#¥rštf
(
¡r
, ...) \

38 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

39 
__VA_ARGS__
)

	)

42 
__fÜtify_funùiÚ
 

43 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fmt
,

44 
_G_va_li¡
 
__­
))

46  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

47 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

48 
	}
}

50 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


52 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

53 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

54 ...è
__THROW
;

55 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

56 
size_t
 
__¦’
, cÚ¡ *
__»¡riù
 
__fÜm©
,

57 
_G_va_li¡
 
__­
è
__THROW
;

59 #ifdeà
__va_¬g_·ck


60 
__fÜtify_funùiÚ
 

61 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

62 cÚ¡ *
__»¡riù
 
__fmt
, ...))

64  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

65 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

66 
	}
}

67 #–ià!
defšed
 
__ılu¥lus


68 
	#¢´štf
(
¡r
, 
Ën
, ...) \

69 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

70 
__VA_ARGS__
)

	)

73 
__fÜtify_funùiÚ
 

74 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

75 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

77  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

78 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

79 
	}
}

83 #ià
__USE_FORTIFY_LEVEL
 > 1

85 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

86 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

87 
__´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

88 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

89 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

90 
__v´štf_chk
 (
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

91 
_G_va_li¡
 
__­
);

93 #ifdeà
__va_¬g_·ck


94 
__fÜtify_funùiÚ
 

95 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ *__»¡riù 
__fmt
, ...)

97  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

98 
	`__va_¬g_·ck
 ());

99 
	}
}

101 
__fÜtify_funùiÚ
 

102 
	$´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, ...)

104  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

105 
	}
}

106 #–ià!
defšed
 
__ılu¥lus


107 
	#´štf
(...) \

108 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

109 
	#årštf
(
¡»am
, ...) \

110 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

113 
__fÜtify_funùiÚ
 

114 
	$v´štf
 (cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

116 #ifdeà
__USE_EXTERN_INLINES


117  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

119  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

121 
	}
}

123 
__fÜtify_funùiÚ
 

124 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

125 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

127  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

128 
	}
}

130 #ifdeà
__USE_XOPEN2K8


131 
	$__d´štf_chk
 (
__fd
, 
__æag
, cÚ¡ *
__»¡riù
 
__fmt
,

132 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

133 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

134 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

135 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

137 #ifdeà
__va_¬g_·ck


138 
__fÜtify_funùiÚ
 

139 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

141  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

142 
	`__va_¬g_·ck
 ());

143 
	}
}

144 #–ià!
defšed
 
__ılu¥lus


145 
	#d´štf
(
fd
, ...) \

146 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

149 
__fÜtify_funùiÚ
 

150 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

152  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

153 
	}
}

156 #ifdeà
__USE_GNU


158 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

159 cÚ¡ *
__»¡riù
 
__fmt
, ...)

160 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

161 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

162 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

163 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

164 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

165 
__æag
, cÚ¡ *
__»¡riù
 
__fÜm©
,

167 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

168 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

169 
__æag
,

170 cÚ¡ *
__»¡riù
 
__fÜm©
,

171 
_G_va_li¡
 
__¬gs
)

172 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

174 #ifdeà
__va_¬g_·ck


175 
__fÜtify_funùiÚ
 

176 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
, ...))

178  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

179 
	`__va_¬g_·ck
 ());

180 
	}
}

182 
__fÜtify_funùiÚ
 

183 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

186  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

187 
	`__va_¬g_·ck
 ());

188 
	}
}

190 
__fÜtify_funùiÚ
 

191 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

192 cÚ¡ *
__»¡riù
 
__fmt
, ...))

194  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

195 
	`__va_¬g_·ck
 ());

196 
	}
}

197 #–ià!
defšed
 
__ılu¥lus


198 
	#a¥rštf
(
±r
, ...) \

199 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

200 
	#__a¥rštf
(
±r
, ...) \

201 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

202 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

203 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

206 
__fÜtify_funùiÚ
 

207 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__fmt
,

208 
_G_va_li¡
 
__­
))

210  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

211 
	}
}

213 
__fÜtify_funùiÚ
 

214 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

215 cÚ¡ *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

217  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

218 
__­
);

219 
	}
}

225 #ià!
defšed
 
__USE_ISOC11
 \

226 || (
defšed
 
	g__ılu¥lus
 && __ılu¥lu <ğ201103L && !defšed 
__USE_GNU
)

227 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

228 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

229 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

232 
__fÜtify_funùiÚ
 
__wur
 *

233 
	$g‘s
 (*
__¡r
)

235 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

236  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

237  
	`__g‘s_w¬n
 (
__¡r
);

238 
	}
}

241 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

242 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

243 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

244 (*
__»¡riù
 
__s
, 
__n
,

245 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

246 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

247 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

248 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

249 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

252 
__fÜtify_funùiÚ
 
__wur
 *

253 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

255 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

257 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

258  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

260 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

261  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

263  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

264 
	}
}

266 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

269 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

270 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

271 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

272 
ä—d
è
__wur
;

273 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

274 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

275 
size_t
 
__size
, size_ˆ
__n
,

276 
FILE
 *
__»¡riù
 
__¡»am
),

277 
__ä—d_chk
)

278 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

281 
__fÜtify_funùiÚ
 
__wur
 
size_t


282 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

283 
FILE
 *
__»¡riù
 
__¡»am
)

285 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

287 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

288 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

289 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

290  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

292 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

293  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

295  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

296 
	}
}

298 #ifdeà
__USE_GNU


299 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

300 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

301 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

302 (*
__»¡riù
 
__s
, 
__n
,

303 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

304 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

305 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

306 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

307 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

310 
__fÜtify_funùiÚ
 
__wur
 *

311 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

313 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

315 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

316  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

318 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

319  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

321  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

322 
	}
}

325 #ifdeà
__USE_MISC


326 #undeà
ä—d_uÆocked


327 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

330 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

331 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

332 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

333 
ä—d_uÆocked
è
__wur
;

334 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

335 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

336 
size_t
 
__size
, size_ˆ
__n
,

337 
FILE
 *
__»¡riù
 
__¡»am
),

338 
__ä—d_uÆocked_chk
)

339 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

342 
__fÜtify_funùiÚ
 
__wur
 
size_t


343 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

344 
FILE
 *
__»¡riù
 
__¡»am
)

346 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

349 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

350 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

351  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

352 
__¡»am
);

354 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

355  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

356 
__¡»am
);

359 #ifdeà
__USE_EXTERN_INLINES


360 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

361 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

362 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

363 && 
__size
 * 
__n
 <= 8)

365 
size_t
 
__út
 = 
__size
 * 
__n
;

366 *
__ıŒ
 = (*è
__±r
;

367 ià(
__út
 == 0)

370 ; 
__út
 > 0; --__cnt)

372 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

373 ià(
__c
 =ğ
EOF
)

375 *
__ıŒ
++ = 
__c
;

377  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

380  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

381 
	}
}

	@/usr/include/bits/stdio_lim.h

18 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


22 #ifdeà
_STDIO_H


23 
	#L_tm²am
 20

	)

24 
	#TMP_MAX
 238328

	)

25 
	#FILENAME_MAX
 4096

	)

27 #ifdeà
__USE_POSIX


28 
	#L_ù”mid
 9

	)

29 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


30 
	#L_cu£rid
 9

	)

35 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


36 #undeà
FOPEN_MAX


37 
	#FOPEN_MAX
 16

	)

40 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


41 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__ex‹º_šlše
 

26 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

28  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

26 
__END_NAMESPACE_C99


29 #ifdeà
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

33 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


34 #ifdeà
__USE_MISC


35 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

39 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sŞved
,

25 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sŞved
,

32 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

39 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

68 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

118 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

149 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/string.h

19 #iâdeà
_STRING_H


24 
	#_STRING_ARCH_uÇligÃd
 1

	)

28 #ià!
defšed
 
__x86_64__
 && (defšed 
__i486__
 || defšed 
__³Áium__
 \

29 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

30 || 
defšed
 
	g__nocÚa__
 || defšed 
	g__©om__
 \

31 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__cÜei7__
 \

32 || 
defšed
 
	g__k6__
 || defšed 
	g__geode__
 \

33 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

34 || 
defšed
 
	g__amdçm10__
)

38 #ià!
defšed
 
__NO_STRING_INLINES
 && defšed 
__USE_STRING_INLINES
 \

39 && 
defšed
 
	g__GNUC__
 && __GNUC__ >ğ2 && !
__BOUNDED_POINTERS__


41 #iâdeà
__STRING_INLINE


42 #iâdeà
__ex‹º_šlše


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 
	#__STRING_SMALL_GET16
(
¤c
, 
idx
) \

51 ((((cÚ¡ *è(
¤c
))[
idx
 + 1] << 8) \

52 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

53 
	#__STRING_SMALL_GET32
(
¤c
, 
idx
) \

54 (((((cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

55 | ((cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

56 | ((cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

57 | ((cÚ¡ *è(
¤c
))[
idx
])

	)

61 
	#_HAVE_STRING_ARCH_memıy
 1

	)

62 
	#memıy
(
de¡
, 
¤c
, 
n
) \

63 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

64 ? 
	`__memıy_c
 ((
de¡
), (
¤c
), (
n
)) \

65 : 
	`__memıy_g
 ((
de¡
), (
¤c
), (
n
))))

	)

66 
	#__memıy_c
(
de¡
, 
¤c
, 
n
) \

67 ((
n
) == 0 \

68 ? (
de¡
) \

69 : (((
n
) % 4 == 0) \

70 ? 
	`__memıy_by4
 (
de¡
, 
¤c
, 
n
) \

71 : (((
n
) % 2 == 0) \

72 ? 
	`__memıy_by2
 (
de¡
, 
¤c
, 
n
) \

73 : 
	`__memıy_g
 (
de¡
, 
¤c
, 
n
))))

	)

75 
__STRING_INLINE
 *
__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

76 
size_t
 
__n
);

78 
__STRING_INLINE
 *

79 
	$__memıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

81 
__d0
, 
__d1
;

82 *
__tmp
 = 
__de¡
;

83 
__asm__
 
__vŞ©e__


91 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

92 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 4)

94  
__de¡
;

95 
	}
}

97 
__STRING_INLINE
 *
__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

98 
size_t
 
__n
);

100 
__STRING_INLINE
 *

101 
	$__memıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

103 
__d0
, 
__d1
;

104 *
__tmp
 = 
__de¡
;

105 
__asm__
 
__vŞ©e__


118 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

119 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
 / 2)

121  
__de¡
;

122 
	}
}

124 
__STRING_INLINE
 *
__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
);

126 
__STRING_INLINE
 *

127 
	$__memıy_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

129 
__d0
, 
__d1
, 
__d2
;

130 *
__tmp
 = 
__de¡
;

131 
__asm__
 
__vŞ©e__


142 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

143 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

144 : "0" (
__n
), "1" (
__tmp
), "2" (
__¤c
),

145 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
)

147  
__de¡
;

148 
	}
}

150 
	#_HAVE_STRING_ARCH_memmove
 1

	)

151 #iâdeà
_FORCE_INLINES


154 
	#memmove
(
de¡
, 
¤c
, 
n
è
	`__memmove_g
 (de¡, src,‚)

	)

156 
__STRING_INLINE
 *
	$__memmove_g
 (*, cÚ¡ *, 
size_t
)

157 
	`__asm__
 ("memmove");

159 
__STRING_INLINE
 *

160 
	$__memmove_g
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

162 
__d0
, 
__d1
, 
__d2
;

163 *
__tmp
 = 
__de¡
;

164 ià(
__de¡
 < 
__¤c
)

165 
__asm__
 
__vŞ©e__


168 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

169 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

170 : "0" (
__n
), "1" (
__¤c
), "2" (
__tmp
),

171 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

173 
__asm__
 
__vŞ©e__


177 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

178 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__de¡
)

179 : "0" (
__n
), "1" (__À- 1 + (cÚ¡ *è
__¤c
),

180 "2" (
__n
 - 1 + (*è
__tmp
),

181 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__¤c
));

182  
__de¡
;

183 
	}
}

187 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

188 #iâdeà
_FORCE_INLINES


189 #iâdeà
__PIC__


191 
__STRING_INLINE
 

192 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

194 
__d0
, 
__d1
, 
__d2
;

195 
__»s
;

196 
__asm__
 
__vŞ©e__


204 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

205 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

206 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

207 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

209  
__»s
;

210 
	}
}

215 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

216 
	#_USE_STRING_ARCH_mem£t
 1

	)

217 
	#mem£t
(
s
, 
c
, 
n
) \

218 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

219 ? ((
n
) == 1 \

220 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

221 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

222 : (
	`__butš_cÚ¡ªt_p
 (
c
) \

223 ? (
	`__butš_cÚ¡ªt_p
 (
n
) \

224 ? 
	`__mem£t_cú
 ((
s
), (
c
), (
n
)) \

225 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

226 : (
	`__butš_cÚ¡ªt_p
 (
n
) \

227 ? 
	`__mem£t_gú
 ((
s
), (
c
), (
n
)) \

228 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

230 
	#__mem£t_c1
(
s
, 
c
è({ *
__s
 = (s); \

231 *((*è
__s
èğ(è(
c
); \

232 
__s
; })

	)

234 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

235 ({ *
__s
 = (
s
); \

237 
__ui
; \

238 
__usi
; \

239 
__uc
; \

240 } *
__u
 = 
__s
; \

241 
__c
 = ((è((è(
c
))) * 0x01010101; \

247 ià((
n
) == 3 || (n) >= 5) \

248 
__asm__
 
	`__vŞ©e__
 ("" : "ô" (
__c
) : "0" (__c)); \

251 
n
) \

254 
__u
->
__ui
 = 
__c
; \

255 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

257 
__u
->
__ui
 = 
__c
; \

258 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

260 
__u
->
__ui
 = 
__c
; \

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

263 
__u
->
__usi
 = (è
__c
; \

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

265 
__u
->
__uc
 = (è
__c
; \

269 
__u
->
__ui
 = 
__c
; \

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

272 
__u
->
__ui
 = 
__c
; \

273 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

275 
__u
->
__ui
 = 
__c
; \

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

278 
__u
->
__usi
 = (è
__c
; \

282 
__u
->
__ui
 = 
__c
; \

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

285 
__u
->
__ui
 = 
__c
; \

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

288 
__u
->
__ui
 = 
__c
; \

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

291 
__u
->
__uc
 = (è
__c
; \

295 
__u
->
__ui
 = 
__c
; \

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

298 
__u
->
__ui
 = 
__c
; \

299 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

301 
__u
->
__ui
 = 
__c
; \

302 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

304 
__u
->
__ui
 = 
__c
; \

309 
__s
; })

	)

311 
	#__mem£t_cú
(
s
, 
c
, 
n
) \

312 (((
n
) % 4 == 0) \

313 ? 
	`__mem£t_cú_by4
 (
s
, ((è((è(
c
))) * 0x01010101,\

314 
n
) \

315 : (((
n
) % 2 == 0) \

316 ? 
	`__mem£t_cú_by2
 (
s
, \

317 ((è((è(
c
))) * 0x01010101,\

318 
n
) \

319 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

321 
__STRING_INLINE
 *
__mem£t_cú_by4
 (*
__s
, 
__c
,

322 
size_t
 
__n
);

324 
__STRING_INLINE
 *

325 
	$__mem£t_cú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

327 *
__tmp
 = 
__s
;

328 
__d0
;

329 #ifdeà
__i686__


330 
__asm__
 
__vŞ©e__


333 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

334 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338 
__asm__
 
__vŞ©e__


344 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

345 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

346 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

349  
__s
;

350 
	}
}

352 
__STRING_INLINE
 *
__mem£t_cú_by2
 (*
__s
, 
__c
,

353 
size_t
 
__n
);

355 
__STRING_INLINE
 *

356 
	$__mem£t_cú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

358 
__d0
, 
__d1
;

359 *
__tmp
 = 
__s
;

360 #ifdeà
__i686__


361 
__asm__
 
__vŞ©e__


365 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

366 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370 
__asm__
 
__vŞ©e__


376 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

377 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

378 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

381  
__s
;

382 
	}
}

384 
	#__mem£t_gú
(
s
, 
c
, 
n
) \

385 (((
n
) % 4 == 0) \

386 ? 
	`__mem£t_gú_by4
 (
s
, 
c
, 
n
) \

387 : (((
n
) % 2 == 0) \

388 ? 
	`__mem£t_gú_by2
 (
s
, 
c
, 
n
) \

389 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

391 
__STRING_INLINE
 *
__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

393 
__STRING_INLINE
 *

394 
	$__mem£t_gú_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

396 *
__tmp
 = 
__s
;

397 
__d0
;

398 
__asm__
 
__vŞ©e__


408 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

409 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

410 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

412  
__s
;

413 
	}
}

415 
__STRING_INLINE
 *
__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

417 
__STRING_INLINE
 *

418 
	$__mem£t_gú_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

420 
__d0
, 
__d1
;

421 *
__tmp
 = 
__s
;

422 
__asm__
 
__vŞ©e__


433 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

434 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

435 : "0" ((è
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

437  
__s
;

438 
	}
}

442 
	#_HAVE_STRING_ARCH_memchr
 1

	)

443 #iâdeà
_FORCE_INLINES


444 
__STRING_INLINE
 *

445 
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

447 
__d0
;

448 #ifdeà
__i686__


449 
__d1
;

451 *
__»s
;

452 ià(
__n
 == 0)

453  
NULL
;

454 #ifdeà
__i686__


455 
__asm__
 
__vŞ©e__


459 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

461 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

464 
__asm__
 
__vŞ©e__


470 : "=D" (
__»s
), "=&c" (
__d0
)

471 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

472 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

475  
__»s
 - 1;

476 
	}
}

479 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

480 #iâdeà
_FORCE_INLINES


481 
__STRING_INLINE
 *
__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
);

483 
__STRING_INLINE
 *

484 
	$__memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

486 
__d0
;

487 #ifdeà
__i686__


488 
__d1
;

490 *
__»s
;

491 ià(
__n
 == 0)

492  
NULL
;

493 #ifdeà
__i686__


494 
__asm__
 
__vŞ©e__


500 : "=D" (
__»s
), "=&c" (
__d0
), "=&r" (
__d1
)

501 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

502 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

505 
__asm__
 
__vŞ©e__


512 : "=D" (
__»s
), "=&c" (
__d0
)

513 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

514 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s
)

517  
__»s
;

518 
	}
}

519 #ifdeà
__USE_GNU


520 
	#memrchr
(
s
, 
c
, 
n
è
	`__memrchr
 ((s), (c), (n))

	)

525 
	#_HAVE_STRING_ARCH_¿wmemchr
 1

	)

526 
__STRING_INLINE
 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

528 #iâdeà
_FORCE_INLINES


529 
__STRING_INLINE
 *

530 
	$__¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

532 
__d0
;

533 *
__»s
;

534 
__asm__
 
__vŞ©e__


537 : "=D" (
__»s
), "=&c" (
__d0
)

538 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

539 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

541  
__»s
 - 1;

542 
	}
}

543 #ifdeà
__USE_GNU


544 
__STRING_INLINE
 *

545 
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

547  
	`__¿wmemchr
 (
__s
, 
__c
);

548 
	}
}

554 
	#_HAVE_STRING_ARCH_¡¾’
 1

	)

555 
	#¡¾’
(
¡r
) \

556 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¡r
) \

557 ? 
	`__butš_¡¾’
 (
¡r
) \

558 : 
	`__¡¾’_g
 (
¡r
)))

	)

559 
__STRING_INLINE
 
size_t
 
__¡¾’_g
 (cÚ¡ *
__¡r
);

561 
__STRING_INLINE
 
size_t


562 
	$__¡¾’_g
 (cÚ¡ *
__¡r
)

564 
__dummy
;

565 cÚ¡ *
__tmp
 = 
__¡r
;

566 
__asm__
 
__vŞ©e__


572 : "ô" (
__tmp
), "=&q" (
__dummy
)

573 : "0" (
__¡r
),

574 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¡r
)

576  
__tmp
 - 
__¡r
 - 1;

577 
	}
}

581 
	#_HAVE_STRING_ARCH_¡rıy
 1

	)

582 
	#¡rıy
(
de¡
, 
¤c
) \

583 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

584 ? ( ((
¤c
)[0]è=ğ1 && 
	`¡¾’
 (src) + 1 <= 8 \

585 ? 
	`__¡rıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

586 : (*è
	`memıy
 ((*è(
de¡
), \

587 (cÚ¡ *è(
¤c
), \

588 
	`¡¾’
 (
¤c
) + 1)) \

589 : 
	`__¡rıy_g
 ((
de¡
), (
¤c
))))

	)

591 
	#__¡rıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

592 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

594 
__ui
; \

595 
__usi
; \

596 
__uc
; \

597 
__c
; \

598 } *
__u
 = (*è
__de¡
; \

599 
¤ş’
) \

602 
__u
->
__uc
 = '\0'; \

605 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

608 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

609 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

610 
__u
->
__uc
 = '\0'; \

613 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

616 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

617 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

618 
__u
->
__uc
 = '\0'; \

621 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

622 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

623 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

626 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

627 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

628 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

629 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

630 
__u
->
__uc
 = '\0'; \

633 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

635 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

638 (*è
__de¡
; }))

	)

640 
__STRING_INLINE
 *
__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

642 
__STRING_INLINE
 *

643 
	$__¡rıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

645 *
__tmp
 = 
__de¡
;

646 
__dummy
;

647 
__asm__
 
__vŞ©e__


656 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

657 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

658 : "0" (
__¤c
), "1" (
__tmp
),

659 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

661  
__de¡
;

662 
	}
}

665 #ifdeà
__USE_GNU


666 
	#_HAVE_STRING_ARCH_¡pıy
 1

	)

668 
	#__¡pıy
(
de¡
, 
¤c
) \

669 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

670 ? (
	`¡¾’
 (
¤c
) + 1 <= 8 \

671 ? 
	`__¡pıy_a_sm®l
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

672 : 
	`__¡pıy_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1)) \

673 : 
	`__¡pıy_g
 ((
de¡
), (
¤c
))))

	)

674 
	#__¡pıy_c
(
de¡
, 
¤c
, 
¤ş’
) \

675 ((
¤ş’
) % 4 == 0 \

676 ? 
	`__mempıy_by4
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

677 : ((
¤ş’
) % 2 == 0 \

678 ? 
	`__mempıy_by2
 (
de¡
, 
¤c
, 
¤ş’
) - 1 \

679 : 
	`__mempıy_byn
 (
de¡
, 
¤c
, 
¤ş’
è- 1))

	)

682 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 ((de¡), (¤c))

	)

684 
	#__¡pıy_a_sm®l
(
de¡
, 
¤c
, 
¤ş’
) \

685 (
	`__ex‹nsiÚ__
 ({ union { \

686 
__ui
; \

687 
__usi
; \

688 
__uc
; \

689 
__c
; \

690 } *
__u
 = (*è(
de¡
); \

691 
¤ş’
) \

694 
__u
->
__uc
 = '\0'; \

697 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

698 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

701 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 0); \

702 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

703 
__u
->
__uc
 = '\0'; \

706 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

707 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

711 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

712 
__u
->
__uc
 = '\0'; \

715 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

716 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

717 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

718 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1); \

721 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

722 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

723 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
¤c
, 4); \

724 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

725 
__u
->
__uc
 = '\0'; \

728 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 0); \

729 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

730 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
¤c
, 4); \

731 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3); \

734 (*è
__u
; }))

	)

736 
__STRING_INLINE
 *
__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
,

737 
size_t
 
__¤ş’
);

739 
__STRING_INLINE
 *

740 
	$__mempıy_by4
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

742 *
__tmp
 = 
__de¡
;

743 
__d0
, 
__d1
;

744 
__asm__
 
__vŞ©e__


752 : "=&r" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
)

753 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4)

755  
__tmp
;

756 
	}
}

758 
__STRING_INLINE
 *
__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
,

759 
size_t
 
__¤ş’
);

761 
__STRING_INLINE
 *

762 
	$__mempıy_by2
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

764 *
__tmp
 = 
__de¡
;

765 
__d0
, 
__d1
;

766 
__asm__
 
__vŞ©e__


779 : "=&q" (
__d0
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__d1
),

780 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

781 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

782 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

784  
__tmp
 + 2;

785 
	}
}

787 
__STRING_INLINE
 *
__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
,

788 
size_t
 
__¤ş’
);

790 
__STRING_INLINE
 *

791 
	$__mempıy_byn
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__¤ş’
)

793 
__d0
, 
__d1
;

794 *
__tmp
 = 
__de¡
;

795 
__asm__
 
__vŞ©e__


806 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

807 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

808 : "0" (
__tmp
), "1" (
__¤ş’
), "2" (
__¤c
),

809 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

811  
__tmp
;

812 
	}
}

814 
__STRING_INLINE
 *
__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
);

816 
__STRING_INLINE
 *

817 
	$__¡pıy_g
 (*
__de¡
, cÚ¡ *
__¤c
)

819 *
__tmp
 = 
__de¡
;

820 
__dummy
;

821 
__asm__
 
__vŞ©e__


830 : "=&r" (
__¤c
), "ô" (
__tmp
), "=&q" (
__dummy
),

831 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

832 : "0" (
__¤c
), "1" (
__tmp
),

833 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

835  
__tmp
 - 1;

836 
	}
}

841 
	#_HAVE_STRING_ARCH_¡ºıy
 1

	)

842 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

843 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

844 ? ((
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

845 ? (*è
	`memıy
 ((*è(
de¡
), \

846 (cÚ¡ *è(
¤c
), 
n
) \

847 : 
	`__¡ºıy_cg
 ((
de¡
), (
¤c
), 
	`¡¾’
 (¤cè+ 1, 
n
))) \

848 : 
	`__¡ºıy_gg
 ((
de¡
), (
¤c
), 
n
)))

	)

849 
	#__¡ºıy_cg
(
de¡
, 
¤c
, 
¤ş’
, 
n
) \

850 (((
¤ş’
) % 4 == 0) \

851 ? 
	`__¡ºıy_by4
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

852 : (((
¤ş’
) % 2 == 0) \

853 ? 
	`__¡ºıy_by2
 (
de¡
, 
¤c
, 
¤ş’
, 
n
) \

854 : 
	`__¡ºıy_byn
 (
de¡
, 
¤c
, 
¤ş’
, 
n
)))

	)

856 
__STRING_INLINE
 *
__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[],

857 
size_t
 
__¤ş’
, size_ˆ
__n
);

859 
__STRING_INLINE
 *

860 
	$__¡ºıy_by4
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

862 *
__tmp
 = 
__de¡
;

863 
__dummy1
, 
__dummy2
;

864 
__asm__
 
__vŞ©e__


872 : "=&r" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

873 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

874 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 4),

875 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

877 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

878  
__de¡
;

879 
	}
}

881 
__STRING_INLINE
 *
__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[],

882 
size_t
 
__¤ş’
, size_ˆ
__n
);

884 
__STRING_INLINE
 *

885 
	$__¡ºıy_by2
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

887 *
__tmp
 = 
__de¡
;

888 
__dummy1
, 
__dummy2
;

889 
__asm__
 
__vŞ©e__


902 : "=&q" (
__dummy1
), "ô" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__dummy2
),

903 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

904 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__¤ş’
 / 2),

905 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

907 (è
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__¤ş’
);

908  
__de¡
;

909 
	}
}

911 
__STRING_INLINE
 *
__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[],

912 
size_t
 
__¤ş’
, size_ˆ
__n
);

914 
__STRING_INLINE
 *

915 
	$__¡ºıy_byn
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
, size_ˆ
__n
)

917 
__d0
, 
__d1
;

918 *
__tmp
 = 
__de¡
;

919 
__asm__
 
__vŞ©e__


930 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

931 "=m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__de¡
)

932 : "1" (
__¤ş’
), "0" (
__tmp
),"2" (
__¤c
),

933 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

935 (è
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__¤ş’
);

936  
__de¡
;

937 
	}
}

939 
__STRING_INLINE
 *
__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
,

940 
size_t
 
__n
);

942 
__STRING_INLINE
 *

943 
	$__¡ºıy_gg
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

945 *
__tmp
 = 
__de¡
;

946 
__dummy
;

947 ià(
__n
 > 0)

948 
__asm__
 
__vŞ©e__


964 : "=&r" (
__¤c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

965 : "0" (
__¤c
), "1" (
__tmp
), "3" (
__n
)

968  
__de¡
;

969 
	}
}

973 
	#_HAVE_STRING_ARCH_¡rÿt
 1

	)

974 
	#¡rÿt
(
de¡
, 
¤c
) \

975 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

976 ? 
	`__¡rÿt_c
 ((
de¡
), (
¤c
), 
	`¡¾’
 (src) + 1) \

977 : 
	`__¡rÿt_g
 ((
de¡
), (
¤c
))))

	)

979 
__STRING_INLINE
 *
__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[],

980 
size_t
 
__¤ş’
);

982 
__STRING_INLINE
 *

983 
	$__¡rÿt_c
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__¤ş’
)

985 #ifdeà
__i686__


986 
__d0
;

987 *
__tmp
;

988 
__asm__
 
__vŞ©e__


990 : "=D" (
__tmp
), "=&c" (
__d0
),

991 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

992 : "0" (
__de¡
), "1" (0xffffffff), "a" (0),

993 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

995 --
__tmp
;

997 *
__tmp
 = 
__de¡
 - 1;

998 
__asm__
 
__vŞ©e__


1003 : "ô" (
__tmp
),

1004 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1005 : "0" (
__tmp
),

1006 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__¤ş’
]; } *)
__¤c
)

1009 (è
	`memıy
 (
__tmp
, 
__¤c
, 
__¤ş’
);

1010  
__de¡
;

1011 
	}
}

1013 
__STRING_INLINE
 *
__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
);

1015 
__STRING_INLINE
 *

1016 
	$__¡rÿt_g
 (*
__de¡
, cÚ¡ *
__¤c
)

1018 *
__tmp
 = 
__de¡
 - 1;

1019 
__dummy
;

1020 
__asm__
 
__vŞ©e__


1032 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
),

1033 "=m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__de¡
)

1034 : "1" (
__tmp
), "2" (
__¤c
),

1035 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__¤c
)

1037  
__de¡
;

1038 
	}
}

1042 
	#_HAVE_STRING_ARCH_¡ºÿt
 1

	)

1043 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

1044 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

1045 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

1046 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

1047 ? 
	`¡rÿt
 (
__de¡
, (
¤c
)) \

1048 : (*(*)
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

1049 (cÚ¡ *è(
¤c
), \

1050 (
n
)èğ0, 
__de¡
)) \

1051 : 
	`__¡ºÿt_g
 (
__de¡
, (
¤c
), (
n
)); }))

	)

1053 
__STRING_INLINE
 *
__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[],

1054 
size_t
 
__n
);

1056 
__STRING_INLINE
 *

1057 
	$__¡ºÿt_g
 (*
__de¡
, cÚ¡ 
__¤c
[], 
size_t
 
__n
)

1059 *
__tmp
 = 
__de¡
;

1060 
__dummy
;

1061 #ifdeà
__i686__


1062 
__asm__
 
__vŞ©e__


1076 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__¤c
), "=&c" (
__n
)

1077 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__¤c
), "3" (0xffffffff)

1080 --
__tmp
;

1081 
__asm__
 
__vŞ©e__


1098 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__¤c
), "=&r" (
__n
)

1099 : "1" (
__tmp
), "2" (
__¤c
), "3" (
__n
)

1102  
__de¡
;

1103 
	}
}

1107 
	#_HAVE_STRING_ARCH_¡rcmp
 1

	)

1108 
	#¡rcmp
(
s1
, 
s2
) \

1109 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

1110 && ( ((
s1
)[0]è!ğ1 || 
	`¡¾’
 (s1) >= 4) \

1111 && ( ((
s2
)[0]è!ğ1 || 
	`¡¾’
 (s2) >= 4) \

1112 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

1113 (
	`¡¾’
 (
s1
è< sŒËÀ(
s2
) \

1114 ? 
	`¡¾’
 (
s1
è: sŒËÀ(
s2
)) + 1) \

1115 : (
	`__butš_cÚ¡ªt_p
 (
s1
) &&  ((s1)[0]) == 1 \

1116 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (
s1
) < 4 \

1117 ? (
	`__butš_cÚ¡ªt_p
 (
s2
) &&  ((s2)[0]) == 1 \

1118 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1119 (cÚ¡ *è(
s2
), \

1120 
	`¡¾’
 (
s1
)) \

1121 : 
	`__¡rcmp_cg
 ((cÚ¡ *è(
s1
), \

1122 (cÚ¡ *è(
s2
), \

1123 
	`¡¾’
 (
s1
))) \

1124 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&&  ((
s1
)[0]) == 1 \

1125 &&  ((
s2
)[0]è=ğ1 && 
	`¡¾’
 (s2) < 4 \

1126 ? (
	`__butš_cÚ¡ªt_p
 (
s1
) \

1127 ? 
	`__¡rcmp_cc
 ((cÚ¡ *è(
s1
), \

1128 (cÚ¡ *è(
s2
), \

1129 
	`¡¾’
 (
s2
)) \

1130 : 
	`__¡rcmp_gc
 ((cÚ¡ *è(
s1
), \

1131 (cÚ¡ *è(
s2
), \

1132 
	`¡¾’
 (
s2
))) \

1133 : 
	`__¡rcmp_gg
 ((
s1
), (
s2
))))))

	)

1135 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

1136 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = (
s1
)[0] - (
s2
)[0]; \

1137 ià(
l
 > 0 && 
__»suÉ
 == 0) \

1139 
__»suÉ
 = (
s1
)[1] - (
s2
)[1]; \

1140 ià(
l
 > 1 && 
__»suÉ
 == 0) \

1142 
__»suÉ
 = (
s1
)[2] - (
s2
)[2]; \

1143 ià(
l
 > 2 && 
__»suÉ
 == 0) \

1144 
__»suÉ
 = (
s1
)[3] - (
s2
)[3]; \

1147 
__»suÉ
; }))

	)

1149 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

1150 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = (
s2
); \

1151 
__»suÉ
 = (
s1
)[0] - 
__s2
[0]; \

1152 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

1154 
__»suÉ
 = (
s1
)[1] - 
__s2
[1]; \

1155 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

1157 
__»suÉ
 = (
s1
)[2] - 
__s2
[2]; \

1158 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

1159 
__»suÉ
 = (
s1
)[3] - 
__s2
[3]; \

1162 
__»suÉ
; }))

	)

1164 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

1165 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = (
s1
); \

1166 
__»suÉ
 = 
__s1
[0] - (
s2
)[0]; \

1167 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

1169 
__»suÉ
 = 
__s1
[1] - (
s2
)[1]; \

1170 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

1172 
__»suÉ
 = 
__s1
[2] - (
s2
)[2]; \

1173 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

1174 
__»suÉ
 = 
__s1
[3] - (
s2
)[3]; \

1177 
__»suÉ
; }))

	)

1179 
__STRING_INLINE
 
__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
);

1181 
__STRING_INLINE
 

1182 
	$__¡rcmp_gg
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

1184 
__»s
;

1185 
__asm__
 
__vŞ©e__


1201 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
)

1202 : "1" (
__s1
), "2" (
__s2
),

1203 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s1
),

1204 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s2
)

1206  
__»s
;

1207 
	}
}

1211 
	#_HAVE_STRING_ARCH_¡ºcmp
 1

	)

1212 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

1213 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`¡¾’
 (s1è< ((
size_t
è(
n
)) \

1214 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1215 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`¡¾’
 (s2è< ((
size_t
è(
n
))\

1216 ? 
	`¡rcmp
 ((
s1
), (
s2
)) \

1217 : 
	`__¡ºcmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1219 
__STRING_INLINE
 
__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

1220 
size_t
 
__n
);

1222 
__STRING_INLINE
 

1223 
	$__¡ºcmp_g
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

1225 
__»s
;

1226 
__asm__
 
__vŞ©e__


1245 : "=q" (
__»s
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1246 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1247 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s1
),

1248 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__n
]; } *)
__s2
)

1250  
__»s
;

1251 
	}
}

1255 
	#_HAVE_STRING_ARCH_¡rchr
 1

	)

1256 
	#_USE_STRING_ARCH_¡rchr
 1

	)

1257 
	#¡rchr
(
s
, 
c
) \

1258 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1259 ? ((
c
) == '\0' \

1260 ? (*è
	`__¿wmemchr
 ((
s
), (
c
)) \

1261 : 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1262 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1264 
__STRING_INLINE
 *
__¡rchr_c
 (cÚ¡ *
__s
, 
__c
);

1266 
__STRING_INLINE
 *

1267 
	$__¡rchr_c
 (cÚ¡ *
__s
, 
__c
)

1269 
__d0
;

1270 *
__»s
;

1271 
__asm__
 
__vŞ©e__


1281 : "ô" (
__»s
), "=&a" (
__d0
)

1282 : "0" (
__s
), "1" (
__c
),

1283 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1285  
__»s
;

1286 
	}
}

1288 
__STRING_INLINE
 *
__¡rchr_g
 (cÚ¡ *
__s
, 
__c
);

1290 
__STRING_INLINE
 *

1291 
	$__¡rchr_g
 (cÚ¡ *
__s
, 
__c
)

1293 
__d0
;

1294 *
__»s
;

1295 
__asm__
 
__vŞ©e__


1306 : "ô" (
__»s
), "=&a" (
__d0
)

1307 : "0" (
__s
), "1" (
__c
),

1308 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1310  
__»s
;

1311 
	}
}

1315 
	#_HAVE_STRING_ARCH_¡rchºul
 1

	)

1316 
	#__¡rchºul
(
s
, 
c
) \

1317 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1318 ? ((
c
) == '\0' \

1319 ? (*è
	`__¿wmemchr
 ((
s
), 
c
) \

1320 : 
	`__¡rchºul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1321 : 
	`__¡rchºul_g
 ((
s
), 
c
)))

	)

1323 
__STRING_INLINE
 *
__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
);

1325 
__STRING_INLINE
 *

1326 
	$__¡rchºul_c
 (cÚ¡ *
__s
, 
__c
)

1328 
__d0
;

1329 *
__»s
;

1330 
__asm__
 
__vŞ©e__


1340 : "ô" (
__»s
), "=&a" (
__d0
)

1341 : "0" (
__s
), "1" (
__c
),

1342 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1344  
__»s
;

1345 
	}
}

1347 
__STRING_INLINE
 *
__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
);

1349 
__STRING_INLINE
 *

1350 
	$__¡rchºul_g
 (cÚ¡ *
__s
, 
__c
)

1352 
__d0
;

1353 *
__»s
;

1354 
__asm__
 
__vŞ©e__


1365 : "ô" (
__»s
), "=&a" (
__d0
)

1366 : "0" (
__s
), "1" (
__c
),

1367 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1369  
__»s
;

1370 
	}
}

1371 #ifdeà
__USE_GNU


1372 
	#¡rchºul
(
s
, 
c
è
	`__¡rchºul
 ((s), (c))

	)

1376 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1378 
	#_HAVE_STRING_ARCH_šdex
 1

	)

1379 
	#šdex
(
s
, 
c
) \

1380 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1381 ? 
	`__¡rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1382 : 
	`__¡rchr_g
 ((
s
), (
c
))))

	)

1387 
	#_HAVE_STRING_ARCH_¡¼chr
 1

	)

1388 
	#¡¼chr
(
s
, 
c
) \

1389 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1390 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1391 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1393 #ifdeà
__i686__


1394 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1396 
__STRING_INLINE
 *

1397 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1399 
__d0
, 
__d1
;

1400 *
__»s
;

1401 
__asm__
 
__vŞ©e__


1409 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1410 : "0" (1), "1" (
__s
), "2" (
__c
),

1411 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1413  
__»s
 - 1;

1414 
	}
}

1416 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1418 
__STRING_INLINE
 *

1419 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1421 
__d0
, 
__d1
;

1422 *
__»s
;

1423 
__asm__
 
__vŞ©e__


1432 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1433 : "0" (1), "1" (
__s
), "2" (
__c
),

1434 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1436  
__»s
 - 1;

1437 
	}
}

1439 
__STRING_INLINE
 *
__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
);

1441 
__STRING_INLINE
 *

1442 
	$__¡¼chr_c
 (cÚ¡ *
__s
, 
__c
)

1444 
__d0
, 
__d1
;

1445 *
__»s
;

1446 
__asm__
 
__vŞ©e__


1456 : "=d" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1457 : "0" (0), "1" (
__s
), "2" (
__c
),

1458 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1460  
__»s
;

1461 
	}
}

1463 
__STRING_INLINE
 *
__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
);

1465 
__STRING_INLINE
 *

1466 
	$__¡¼chr_g
 (cÚ¡ *
__s
, 
__c
)

1468 
__d0
, 
__d1
;

1469 *
__»s
;

1470 
__asm__
 
__vŞ©e__


1481 : "ô" (
__»s
), "=&S" (
__d0
), "=&a" (
__d1
)

1482 : "0" (0), "1" (
__s
), "2" (
__c
),

1483 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1485  
__»s
;

1486 
	}
}

1490 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1492 
	#_HAVE_STRING_ARCH_ršdex
 1

	)

1493 
	#ršdex
(
s
, 
c
) \

1494 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) \

1495 ? 
	`__¡¼chr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1496 : 
	`__¡¼chr_g
 ((
s
), (
c
))))

	)

1502 
	#_HAVE_STRING_ARCH_¡rc¥n
 1

	)

1503 
	#¡rc¥n
(
s
, 
»jeù
) \

1504 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
»jeù
) &&  ((reject)[0]) == 1 \

1505 ? ((
»jeù
)[0] == '\0' \

1506 ? 
	`¡¾’
 (
s
) \

1507 : ((
»jeù
)[1] == '\0' \

1508 ? 
	`__¡rc¥n_c1
 ((
s
), (((
»jeù
)[0] << 8) & 0xff00)) \

1509 : 
	`__¡rc¥n_cg
 ((
s
), (
»jeù
), 
	`¡¾’
 (reject)))) \

1510 : 
	`__¡rc¥n_g
 ((
s
), (
»jeù
))))

	)

1512 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

1514 #iâdeà
_FORCE_INLINES


1515 
__STRING_INLINE
 
size_t


1516 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

1518 
__d0
;

1519 *
__»s
;

1520 
__asm__
 
__vŞ©e__


1529 : "ô" (
__»s
), "=&a" (
__d0
)

1530 : "0" (
__s
), "1" (
__»jeù
),

1531 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1533  (
__»s
 - 1è- 
__s
;

1534 
	}
}

1537 
__STRING_INLINE
 
size_t
 
__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[],

1538 
size_t
 
__»jeù_Ën
);

1540 
__STRING_INLINE
 
size_t


1541 
	$__¡rc¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__»jeù
[], 
size_t
 
__»jeù_Ën
)

1543 
__d0
, 
__d1
, 
__d2
;

1544 cÚ¡ *
__»s
;

1545 
__asm__
 
__vŞ©e__


1556 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1557 : "0" (
__s
), "d" (
__»jeù
), "g" (
__»jeù_Ën
)

1559  (
__»s
 - 1è- 
__s
;

1560 
	}
}

1562 
__STRING_INLINE
 
size_t
 
__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
);

1563 #ifdeà
__PIC__


1565 
__STRING_INLINE
 
size_t


1566 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1568 
__d0
, 
__d1
, 
__d2
;

1569 cÚ¡ *
__»s
;

1570 
__asm__
 
__vŞ©e__


1587 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1588 : "r" (
__»jeù
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1590  (
__»s
 - 1è- 
__s
;

1591 
	}
}

1593 
__STRING_INLINE
 
size_t


1594 
	$__¡rc¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

1596 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1597 cÚ¡ *
__»s
;

1598 
__asm__
 
__vŞ©e__


1612 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1613 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__»jeù
), "b" (__reject)

1616  (
__»s
 - 1è- 
__s
;

1617 
	}
}

1623 
	#_HAVE_STRING_ARCH_¡r¥n
 1

	)

1624 
	#¡r¥n
(
s
, 
acû±
) \

1625 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1626 ? ((
acû±
)[0] == '\0' \

1627 ? ((è(
s
), 0) \

1628 : ((
acû±
)[1] == '\0' \

1629 ? 
	`__¡r¥n_c1
 ((
s
), (((
acû±
)[0] << 8 ) & 0xff00)) \

1630 : 
	`__¡r¥n_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1631 : 
	`__¡r¥n_g
 ((
s
), (
acû±
))))

	)

1633 #iâdeà
_FORCE_INLINES


1634 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1636 
__STRING_INLINE
 
size_t


1637 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1639 
__d0
;

1640 *
__»s
;

1642 
__asm__
 
__vŞ©e__


1648 : "ô" (
__»s
), "=&q" (
__d0
)

1649 : "0" (
__s
), "1" (
__acû±
),

1650 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
)

1652  (
__»s
 - 1è- 
__s
;

1653 
	}
}

1656 
__STRING_INLINE
 
size_t
 
__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1657 
size_t
 
__acû±_Ën
);

1659 
__STRING_INLINE
 
size_t


1660 
	$__¡r¥n_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1662 
__d0
, 
__d1
, 
__d2
;

1663 cÚ¡ *
__»s
;

1664 
__asm__
 
__vŞ©e__


1675 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1676 : "0" (
__s
), "g" (
__acû±
), "g" (
__acû±_Ën
),

1679 "m" ( *(¡ruù { 
__x
[0xfffffff]; } *)
__s
),

1680 "m" ( *(¡ruù { 
__ex‹nsiÚ__
 
__x
[
__acû±_Ën
]; } *)
__acû±
)

1682  (
__»s
 - 1è- 
__s
;

1683 
	}
}

1685 
__STRING_INLINE
 
size_t
 
__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1686 #ifdeà
__PIC__


1688 
__STRING_INLINE
 
size_t


1689 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1691 
__d0
, 
__d1
, 
__d2
;

1692 cÚ¡ *
__»s
;

1693 
__asm__
 
__vŞ©e__


1709 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1710 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1712  (
__»s
 - 1è- 
__s
;

1713 
	}
}

1715 
__STRING_INLINE
 
size_t


1716 
	$__¡r¥n_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1718 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1719 cÚ¡ *
__»s
;

1720 
__asm__
 
__vŞ©e__


1734 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1735 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__acû±
), "b" (__accept)

1737  (
__»s
 - 1è- 
__s
;

1738 
	}
}

1743 
	#_HAVE_STRING_ARCH_¡½brk
 1

	)

1744 
	#¡½brk
(
s
, 
acû±
) \

1745 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
acû±
) &&  ((accept)[0]) == 1 \

1746 ? ((
acû±
)[0] == '\0' \

1747 ? ((è(
s
), (*) 0) \

1748 : ((
acû±
)[1] == '\0' \

1749 ? 
	`¡rchr
 ((
s
), (
acû±
)[0]) \

1750 : 
	`__¡½brk_cg
 ((
s
), (
acû±
), 
	`¡¾’
 (accept)))) \

1751 : 
	`__¡½brk_g
 ((
s
), (
acû±
))))

	)

1753 
__STRING_INLINE
 *
__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[],

1754 
size_t
 
__acû±_Ën
);

1756 
__STRING_INLINE
 *

1757 
	$__¡½brk_cg
 (cÚ¡ *
__s
, cÚ¡ 
__acû±
[], 
size_t
 
__acû±_Ën
)

1759 
__d0
, 
__d1
, 
__d2
;

1760 *
__»s
;

1761 
__asm__
 
__vŞ©e__


1776 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1777 : "0" (
__s
), "d" (
__acû±
), "g" (
__acû±_Ën
)

1779  
__»s
;

1780 
	}
}

1782 
__STRING_INLINE
 *
__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
);

1783 #ifdeà
__PIC__


1785 
__STRING_INLINE
 *

1786 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1788 
__d0
, 
__d1
, 
__d2
;

1789 *
__»s
;

1790 
__asm__
 
__vŞ©e__


1811 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1812 : "d" (
__acû±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1814  
__»s
;

1815 
	}
}

1817 
__STRING_INLINE
 *

1818 
	$__¡½brk_g
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

1820 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1821 *
__»s
;

1822 
__asm__
 
__vŞ©e__


1841 : "=S" (
__»s
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1842 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__acû±
)

1844  
__»s
;

1845 
	}
}

1850 
	#_HAVE_STRING_ARCH_¡r¡r
 1

	)

1851 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1852 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
) &&  ((needle)[0]) == 1 \

1853 ? ((
ÃedË
)[0] == '\0' \

1854 ? (
hay¡ack
) \

1855 : ((
ÃedË
)[1] == '\0' \

1856 ? 
	`¡rchr
 ((
hay¡ack
), (
ÃedË
)[0]) \

1857 : 
	`__¡r¡r_cg
 ((
hay¡ack
), (
ÃedË
), \

1858 
	`¡¾’
 (
ÃedË
)))) \

1859 : 
	`__¡r¡r_g
 ((
hay¡ack
), (
ÃedË
))))

	)

1863 
__STRING_INLINE
 *
__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
,

1864 cÚ¡ 
__ÃedË
[],

1865 
size_t
 
__ÃedË_Ën
);

1867 
__STRING_INLINE
 *

1868 
	$__¡r¡r_cg
 (cÚ¡ *
__hay¡ack
, cÚ¡ 
__ÃedË
[],

1869 
size_t
 
__ÃedË_Ën
)

1871 
__d0
, 
__d1
, 
__d2
;

1872 *
__»s
;

1873 
__asm__
 
__vŞ©e__


1886 : "=&a" (
__»s
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1887 : "g" (
__ÃedË_Ën
), "1" (
__hay¡ack
), "d" (
__ÃedË
)

1889  
__»s
;

1890 
	}
}

1892 
__STRING_INLINE
 *
__¡r¡r_g
 (cÚ¡ *
__hay¡ack
,

1893 cÚ¡ *
__ÃedË
);

1894 #ifdeà
__PIC__


1896 
__STRING_INLINE
 *

1897 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1899 
__d0
, 
__d1
, 
__d2
;

1900 *
__»s
;

1901 
__asm__
 
__vŞ©e__


1920 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1921 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1922 "d" (
__ÃedË
)

1924  
__»s
;

1925 
	}
}

1927 
__STRING_INLINE
 *

1928 
	$__¡r¡r_g
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

1930 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1931 *
__»s
;

1932 
__asm__
 
__vŞ©e__


1949 : "=&a" (
__»s
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1950 : "0" (0), "1" (0xffffffff), "2" (
__hay¡ack
), "3" (
__ÃedË
),

1951 "b" (
__ÃedË
)

1953  
__»s
;

1954 
	}
}

1960 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1961 #ifdeà
__i686__


1962 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1963 
	#ffs
(
wÜd
è(
	`__butš_cÚ¡ªt_p
 (word) \

1964 ? 
	`__butš_ffs
 (
wÜd
) \

1965 : ({ 
__út
, 
__tmp
; \

1966 
__asm__
 
__vŞ©e__
 \

1969 : "=&r" (
__út
), "ô" (
__tmp
) \

1970 : "rm" (
wÜd
), "1" (-1)); \

1971 
__út
 + 1; }))

	)

1973 #iâdeà
ff¦


1974 
	#ff¦
(
wÜd
è
	`ffs
(wÜd)

	)

1979 #iâdeà
_FORCE_INLINES


1980 #undeà
__STRING_INLINE


	@/usr/include/bits/string2.h

20 #iâdeà
_STRING_H


24 #ià!
defšed
 
__NO_STRING_INLINES
 && !defšed 
__BOUNDED_POINTERS__


41 #iâdeà
__STRING_INLINE


42 #ifdeà
__ılu¥lus


43 
	#__STRING_INLINE
 
šlše


	)

45 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

49 #ià
_STRING_ARCH_uÇligÃd


51 
	~<’dŸn.h
>

52 
	~<b™s/ty³s.h
>

54 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


55 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

56 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

57 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

58 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

59 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

60 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

61 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

62 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
])

	)

64 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

65 (((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

66 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

67 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

68 (((((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
] << 8 \

69 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

70 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

71 | ((cÚ¡ *è(cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

76 
	#__STRING2_COPY_TYPE
(
N
) \

77 ¡ruù { 
__¬r
[
N
]; } \

78 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

79 
	t__STRING2_COPY_TYPE
 (2);

80 
__STRING2_COPY_TYPE
 (3);

81 
__STRING2_COPY_TYPE
 (4);

82 
__STRING2_COPY_TYPE
 (5);

83 
__STRING2_COPY_TYPE
 (6);

84 
__STRING2_COPY_TYPE
 (7);

85 
__STRING2_COPY_TYPE
 (8);

86 #undeà
__STRING2_COPY_TYPE


92 
	#__¡ršg2_1b±r_p
(
__x
) \

93 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ğ1)

	)

96 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


97 #ià!
__GNUC_PREREQ
 (3, 0)

98 #ià
_STRING_ARCH_uÇligÃd


99 
	#mem£t
(
s
, 
c
, 
n
) \

100 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

101 ? ((
n
) == 1 \

102 ? 
	`__mem£t_1
 (
s
, 
c
) \

103 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

104 : (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

105 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

106 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

108 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

109 *((
__ušt8_t
 *è
__s
èğ(__ušt8_tè
c
; __s; })

	)

111 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

112 ({ *
__s
 = (
s
); \

114 
__ui
; \

115 
__usi
; \

116 
__uc
; \

117 } *
__u
 = 
__s
; \

118 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

121 (è(
n
)) \

124 
__u
->
__ui
 = 
__c
 * 0x01010101; \

125 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

127 
__u
->
__ui
 = 
__c
 * 0x01010101; \

128 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

130 
__u
->
__ui
 = 
__c
 * 0x01010101; \

131 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

133 
__u
->
__usi
 = (è
__c
 * 0x0101; \

134 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

135 
__u
->
__uc
 = (è
__c
; \

139 
__u
->
__ui
 = 
__c
 * 0x01010101; \

140 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

142 
__u
->
__ui
 = 
__c
 * 0x01010101; \

143 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

145 
__u
->
__ui
 = 
__c
 * 0x01010101; \

146 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

148 
__u
->
__usi
 = (è
__c
 * 0x0101; \

152 
__u
->
__ui
 = 
__c
 * 0x01010101; \

153 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

155 
__u
->
__ui
 = 
__c
 * 0x01010101; \

156 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

158 
__u
->
__ui
 = 
__c
 * 0x01010101; \

159 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

161 
__u
->
__uc
 = (è
__c
; \

165 
__u
->
__ui
 = 
__c
 * 0x01010101; \

166 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

168 
__u
->
__ui
 = 
__c
 * 0x01010101; \

169 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

171 
__u
->
__ui
 = 
__c
 * 0x01010101; \

172 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

174 
__u
->
__ui
 = 
__c
 * 0x01010101; \

179 
__s
; })

	)

181 
	#mem£t
(
s
, 
c
, 
n
) \

182 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

183 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

184 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

193 #ià
__GNUC_PREREQ
 (2, 91)

194 
	#__bz”o
(
s
, 
n
è
	`__butš_mem£t
 (s, '\0',‚)

	)

202 #ifdeà
__USE_GNU


203 #ià!
defšed
 
_HAVE_STRING_ARCH_mempıy
 || defšed 
_FORCE_INLINES


204 #iâdeà
_HAVE_STRING_ARCH_mempıy


205 #ià
__GNUC_PREREQ
 (3, 4)

206 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__butš_mempıy
 (de¡, src,‚)

	)

207 #–ià
__GNUC_PREREQ
 (3, 0)

208 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

209 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

210 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

211 ? 
	`__butš_memıy
 (
de¡
, 
¤c
, 
n
) + (n) \

212 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

214 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

215 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

216 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

217 ? 
	`__mempıy_sm®l
 (
de¡
, 
	`__mempıy_¬gs
 (
¤c
), 
n
) \

218 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

222 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy
 (de¡, src,‚)

	)

225 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


226 #ià
_STRING_ARCH_uÇligÃd


227 #iâdeà
_FORCE_INLINES


228 
	#__mempıy_¬gs
(
¤c
) \

229 ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[2], \

230 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[6], \

231 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

236 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , , , ,

237 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

238 
__ušt32_t
, 
size_t
);

239 
__STRING_INLINE
 *

240 
	$__mempıy_sm®l
 (*
__de¡1
,

241 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

242 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

243 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

244 
size_t
 
__¤ş’
)

247 
__ušt32_t
 
__ui
;

248 
__ušt16_t
 
__usi
;

249 
__uc
;

250 
__c
;

251 } *
__u
 = 
__de¡1
;

252 (è
__¤ş’
)

255 
__u
->
__c
 = 
__¤c0_1
;

256 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

259 
__u
->
__usi
 = 
__¤c0_2
;

260 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

263 
__u
->
__usi
 = 
__¤c0_2
;

264 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

265 
__u
->
__c
 = 
__¤c2_1
;

266 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

269 
__u
->
__ui
 = 
__¤c0_4
;

270 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

273 
__u
->
__ui
 = 
__¤c0_4
;

274 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

275 
__u
->
__c
 = 
__¤c4_1
;

276 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

279 
__u
->
__ui
 = 
__¤c0_4
;

280 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

281 
__u
->
__usi
 = 
__¤c4_2
;

282 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

285 
__u
->
__ui
 = 
__¤c0_4
;

286 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

287 
__u
->
__usi
 = 
__¤c4_2
;

288 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

289 
__u
->
__c
 = 
__¤c6_1
;

290 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

293 
__u
->
__ui
 = 
__¤c0_4
;

294 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

295 
__u
->
__ui
 = 
__¤c4_4
;

296 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

299  (*è
__u
;

300 
	}
}

302 #iâdeà
_FORCE_INLINES


303 
	#__mempıy_¬gs
(
¤c
) \

304 ((cÚ¡ *è(
¤c
))[0], \

305 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

306 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1] } }), \

307 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

308 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

309 ((cÚ¡ *è(
¤c
))[2] } }), \

310 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

311 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

312 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3] } }), \

313 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

314 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

315 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

316 ((cÚ¡ *è(
¤c
))[4] } }), \

317 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

318 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

319 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

320 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5] } }), \

321 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

322 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

323 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

324 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

325 ((cÚ¡ *è(
¤c
))[6] } }), \

326 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

327 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

328 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

329 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

330 ((cÚ¡ *è(
¤c
))[6], ((cÚ¡ *è(¤c))[7] } })

	)

332 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

333 
__STRING2_COPY_ARR3
,

334 
__STRING2_COPY_ARR4
,

335 
__STRING2_COPY_ARR5
,

336 
__STRING2_COPY_ARR6
,

337 
__STRING2_COPY_ARR7
,

338 
__STRING2_COPY_ARR8
, 
size_t
);

339 
__STRING_INLINE
 *

340 
	$__mempıy_sm®l
 (*
__de¡
, 
__¤c1
,

341 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

342 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

343 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

344 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

347 
__c
;

348 
__STRING2_COPY_ARR2
 
__sÿ2
;

349 
__STRING2_COPY_ARR3
 
__sÿ3
;

350 
__STRING2_COPY_ARR4
 
__sÿ4
;

351 
__STRING2_COPY_ARR5
 
__sÿ5
;

352 
__STRING2_COPY_ARR6
 
__sÿ6
;

353 
__STRING2_COPY_ARR7
 
__sÿ7
;

354 
__STRING2_COPY_ARR8
 
__sÿ8
;

355 } *
__u
 = 
__de¡
;

356 (è
__¤ş’
)

359 
__u
->
__c
 = 
__¤c1
;

362 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

365 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

368 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

371 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

374 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

377 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

380 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

383  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤ş’
);

384 
	}
}

392 #iâdeà
_HAVE_STRING_ARCH_¡rchr


393 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

394 #ià
__GNUC_PREREQ
 (3, 2)

395 
	#¡rchr
(
s
, 
c
) \

396 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
è&& !__butš_cÚ¡ªt_°(
s
) \

397 && (
c
) == '\0' \

398 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

399 : 
	`__butš_¡rchr
 (
s
, 
c
)))

	)

401 
	#¡rchr
(
s
, 
c
) \

402 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

403 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

404 : 
	`¡rchr
 (
s
, 
c
)))

	)

410 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)) \

411 || 
defšed
 
	g_FORCE_INLINES


412 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)

413 
	#¡rıy
(
de¡
, 
¤c
) \

414 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

415 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

416 ? 
	`__¡rıy_sm®l
 (
de¡
, 
	`__¡rıy_¬gs
 (
¤c
), \

417 
	`¡¾’
 (
¤c
) + 1) \

418 : (*è
	`memıy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

419 : 
	`¡rıy
 (
de¡
, 
¤c
)))

	)

422 #ià
_STRING_ARCH_uÇligÃd


423 #iâdeà
_FORCE_INLINES


424 
	#__¡rıy_¬gs
(
¤c
) \

425 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

430 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

431 
__ušt32_t
, __ušt32_t, 
size_t
);

432 
__STRING_INLINE
 *

433 
	$__¡rıy_sm®l
 (*
__de¡
,

434 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

435 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

436 
size_t
 
__¤ş’
)

439 
__ušt32_t
 
__ui
;

440 
__ušt16_t
 
__usi
;

441 
__uc
;

442 } *
__u
 = (*è
__de¡
;

443 (è
__¤ş’
)

446 
__u
->
__uc
 = '\0';

449 
__u
->
__usi
 = 
__¤c0_2
;

452 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

454 
__u
->
__uc
 = '\0';

457 
__u
->
__ui
 = 
__¤c0_4
;

460 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

462 
__u
->
__uc
 = '\0';

465 
__u
->
__ui
 = 
__¤c0_4
;

466 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

467 
__u
->
__usi
 = 
__¤c4_2
;

470 
__u
->
__ui
 = 
__¤c0_4
;

471 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

472 
__u
->
__usi
 = 
__¤c4_2
;

473 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

474 
__u
->
__uc
 = '\0';

477 
__u
->
__ui
 = 
__¤c0_4
;

478 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

479 
__u
->
__ui
 = 
__¤c4_4
;

482  
__de¡
;

483 
	}
}

485 #iâdeà
_FORCE_INLINES


486 
	#__¡rıy_¬gs
(
¤c
) \

487 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

488 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

489 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

490 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

492 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

493 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

494 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

495 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

496 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

497 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

499 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

500 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

501 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

502 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

503 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

504 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

505 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

506 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

508 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

509 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

510 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

511 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

512 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

514 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

515 
__STRING2_COPY_ARR3
,

516 
__STRING2_COPY_ARR4
,

517 
__STRING2_COPY_ARR5
,

518 
__STRING2_COPY_ARR6
,

519 
__STRING2_COPY_ARR7
,

520 
__STRING2_COPY_ARR8
, 
size_t
);

521 
__STRING_INLINE
 *

522 
	$__¡rıy_sm®l
 (*
__de¡
,

523 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

524 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

525 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

526 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

529 
__c
;

530 
__STRING2_COPY_ARR2
 
__sÿ2
;

531 
__STRING2_COPY_ARR3
 
__sÿ3
;

532 
__STRING2_COPY_ARR4
 
__sÿ4
;

533 
__STRING2_COPY_ARR5
 
__sÿ5
;

534 
__STRING2_COPY_ARR6
 
__sÿ6
;

535 
__STRING2_COPY_ARR7
 
__sÿ7
;

536 
__STRING2_COPY_ARR8
 
__sÿ8
;

537 } *
__u
 = (*è
__de¡
;

538 (è
__¤ş’
)

541 
__u
->
__c
 = '\0';

544 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

547 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

550 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

553 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

556 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

559 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

562 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

565  
__de¡
;

566 
	}
}

572 #ifdeà
__USE_GNU


573 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pıy
 || defšed 
_FORCE_INLINES


574 #iâdeà
_HAVE_STRING_ARCH_¡pıy


575 #ià
__GNUC_PREREQ
 (3, 4)

576 
	#__¡pıy
(
de¡
, 
¤c
è
	`__butš_¡pıy
 (de¡, src)

	)

577 #–ià
__GNUC_PREREQ
 (3, 0)

578 
	#__¡pıy
(
de¡
, 
¤c
) \

579 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

580 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

581 ? 
	`__butš_¡rıy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

582 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

584 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

586 
	#__¡pıy
(
de¡
, 
¤c
) \

587 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

588 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

589 ? 
	`__¡pıy_sm®l
 (
de¡
, 
	`__¡pıy_¬gs
 (
¤c
), \

590 
	`¡¾’
 (
¤c
) + 1) \

591 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

593 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

597 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 (de¡, src)

	)

600 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


601 #ià
_STRING_ARCH_uÇligÃd


602 #iâdeà
_FORCE_INLINES


603 
	#__¡pıy_¬gs
(
¤c
) \

604 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

609 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

610 
__ušt32_t
, __ušt32_t, 
size_t
);

611 
__STRING_INLINE
 *

612 
	$__¡pıy_sm®l
 (*
__de¡
,

613 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

614 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

615 
size_t
 
__¤ş’
)

618 
__ui
;

619 
__usi
;

620 
__uc
;

621 
__c
;

622 } *
__u
 = (*è
__de¡
;

623 (è
__¤ş’
)

626 
__u
->
__uc
 = '\0';

629 
__u
->
__usi
 = 
__¤c0_2
;

630 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

633 
__u
->
__usi
 = 
__¤c0_2
;

634 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

635 
__u
->
__uc
 = '\0';

638 
__u
->
__ui
 = 
__¤c0_4
;

639 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

642 
__u
->
__ui
 = 
__¤c0_4
;

643 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

644 
__u
->
__uc
 = '\0';

647 
__u
->
__ui
 = 
__¤c0_4
;

648 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

649 
__u
->
__usi
 = 
__¤c4_2
;

650 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

653 
__u
->
__ui
 = 
__¤c0_4
;

654 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

655 
__u
->
__usi
 = 
__¤c4_2
;

656 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

657 
__u
->
__uc
 = '\0';

660 
__u
->
__ui
 = 
__¤c0_4
;

661 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

662 
__u
->
__ui
 = 
__¤c4_4
;

663 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

666  &
__u
->
__c
;

667 
	}
}

669 #iâdeà
_FORCE_INLINES


670 
	#__¡pıy_¬gs
(
¤c
) \

671 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

672 { { ((cÚ¡ *è(
¤c
))[0], '\0' } }), \

673 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

674 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

676 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

677 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

678 ((cÚ¡ *è(
¤c
))[2], '\0' } }), \

679 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

680 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

681 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

683 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

684 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

685 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

686 ((cÚ¡ *è(
¤c
))[4], '\0' } }), \

687 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

688 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

689 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

690 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

692 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

693 { { ((cÚ¡ *è(
¤c
))[0], ((const *) (src))[1], \

694 ((cÚ¡ *è(
¤c
))[2], ((const *) (src))[3], \

695 ((cÚ¡ *è(
¤c
))[4], ((const *) (src))[5], \

696 ((cÚ¡ *è(
¤c
))[6], '\0' } })

	)

698 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

699 
__STRING2_COPY_ARR3
,

700 
__STRING2_COPY_ARR4
,

701 
__STRING2_COPY_ARR5
,

702 
__STRING2_COPY_ARR6
,

703 
__STRING2_COPY_ARR7
,

704 
__STRING2_COPY_ARR8
, 
size_t
);

705 
__STRING_INLINE
 *

706 
	$__¡pıy_sm®l
 (*
__de¡
,

707 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

708 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

709 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

710 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

713 
__c
;

714 
__STRING2_COPY_ARR2
 
__sÿ2
;

715 
__STRING2_COPY_ARR3
 
__sÿ3
;

716 
__STRING2_COPY_ARR4
 
__sÿ4
;

717 
__STRING2_COPY_ARR5
 
__sÿ5
;

718 
__STRING2_COPY_ARR6
 
__sÿ6
;

719 
__STRING2_COPY_ARR7
 
__sÿ7
;

720 
__STRING2_COPY_ARR8
 
__sÿ8
;

721 } *
__u
 = (*è
__de¡
;

722 (è
__¤ş’
)

725 
__u
->
__c
 = '\0';

728 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

731 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

734 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

737 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

740 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

743 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

746 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

749  
__de¡
 + 
__¤ş’
 - 1;

750 
	}
}

758 #iâdeà
_HAVE_STRING_ARCH_¡ºıy


759 #ià
__GNUC_PREREQ
 (3, 2)

760 
	#¡ºıy
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºıy
 (de¡, src,‚)

	)

762 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

763 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

764 ? (
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

765 ? (*è
	`memıy
 (
de¡
, 
¤c
, 
n
) \

766 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)) \

767 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)))

	)

773 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


774 #ifdeà
_USE_STRING_ARCH_¡rchr


775 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

776 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

777 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

778 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

779 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

780 : (*((*è
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

781 
¤c
, 
n
)èğ'\0', 
__de¡
)) \

782 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

783 #–ià
__GNUC_PREREQ
 (3, 2)

784 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºÿt
 (de¡, src,‚)

	)

786 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

787 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

788 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

789 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

790 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

797 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


798 #ià
__GNUC_PREREQ
 (3, 2)

799 
	#¡rcmp
(
s1
, 
s2
) \

800 
__ex‹nsiÚ__
 \

801 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

802 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

803 && (
__s1_Ën
 = 
	`__butš_¡¾’
 (
s1
), 
__s2_Ën
 = __butš_¡¾’ (
s2
), \

804 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

805 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

806 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

807 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

808 && (
__s1_Ën
 = 
	`__butš_¡¾’
 (
s1
), __s1_len < 4) \

809 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

810 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

811 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

812 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

813 && (
__s2_Ën
 = 
	`__butš_¡¾’
 (
s2
), __s2_len < 4) \

814 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

815 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

816 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

817 : 
	`__butš_¡rcmp
 (
s1
, 
s2
)))); })

	)

819 
	#¡rcmp
(
s1
, 
s2
) \

820 
__ex‹nsiÚ__
 \

821 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

822 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

823 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

824 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

825 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

826 ? 
	`memcmp
 ((cÚ¡ *è(
s1
), (cÚ¡ *è(
s2
), \

827 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

828 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

829 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

830 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

831 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

832 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

833 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

834 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

835 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

836 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

837 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

838 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

841 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

842 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

843 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

844 - ((cÚ¡ *è(cÚ¡ *)(
s2
))[0]); \

845 ià(
l
 > 0 && 
__»suÉ
 == 0) \

847 
__»suÉ
 = (((const *) \

848 (cÚ¡ *è(
s1
))[1] \

850 (cÚ¡ *è(
s2
))[1]); \

851 ià(
l
 > 1 && 
__»suÉ
 == 0) \

853 
__»suÉ
 = \

855 (cÚ¡ *è(
s1
))[2] \

857 (cÚ¡ *è(
s2
))[2]); \

858 ià(
l
 > 2 && 
__»suÉ
 == 0) \

859 
__»suÉ
 = \

861 (cÚ¡ *è(
s1
))[3] \

863 (cÚ¡ *è(
s2
))[3]); \

866 
__»suÉ
; }))

	)

868 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

869 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s2
 = \

870 (cÚ¡ *è(cÚ¡ *è(
s2
); \

871 
__»suÉ
 = \

872 (((cÚ¡ *è(cÚ¡ *è(
s1
))[0] \

873 - 
__s2
[0]); \

874 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

876 
__»suÉ
 = (((const *) \

877 (cÚ¡ *è(
s1
))[1] - 
__s2
[1]); \

878 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

880 
__»suÉ
 = (((const *) \

881 (cÚ¡ *è(
s1
))[2] - 
__s2
[2]); \

882 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

883 
__»suÉ
 = (((const *) \

884 (cÚ¡ *è(
s1
))[3] \

885 - 
__s2
[3]); \

888 
__»suÉ
; }))

	)

890 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

891 (
	`__ex‹nsiÚ__
 ({ cÚ¡ *
__s1
 = \

892 (cÚ¡ *è(cÚ¡ *è(
s1
); \

893 
__»suÉ
 = \

894 
__s1
[0] - ((const *) \

895 (cÚ¡ *è(
s2
))[0]; \

896 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

898 
__»suÉ
 = (
__s1
[1] \

900 (cÚ¡ *è(
s2
))[1]); \

901 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

903 
__»suÉ
 = \

904 (
__s1
[2] - ((const *) \

905 (cÚ¡ *è(
s2
))[2]); \

906 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

907 
__»suÉ
 = \

908 (
__s1
[3] \

910 (cÚ¡ *è(
s2
))[3]); \

913 
__»suÉ
; }))

	)

918 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


919 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

920 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

921 && ((
	`__butš_cÚ¡ªt_p
 (
s1
) \

922 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

923 || (
	`__butš_cÚ¡ªt_p
 (
s2
) \

924 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

925 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

931 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


932 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


933 #ià
__GNUC_PREREQ
 (3, 2)

934 
	#¡rc¥n
(
s
, 
»jeù
) \

935 
__ex‹nsiÚ__
 \

936 ({ 
__r0
, 
__r1
, 
__r2
; \

937 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

938 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

939 ? 
	`__butš_¡rc¥n
 (
s
, 
»jeù
) \

940 : ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

941 ? 
	`¡¾’
 (
s
) \

942 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

943 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

944 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

945 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

946 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

947 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

948 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)))))) \

949 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

951 
	#¡rc¥n
(
s
, 
»jeù
) \

952 
__ex‹nsiÚ__
 \

953 ({ 
__r0
, 
__r1
, 
__r2
; \

954 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

955 ? ((
__r0
 = ((cÚ¡ *è(
»jeù
))[0], __r0 == '\0') \

956 ? 
	`¡¾’
 (
s
) \

957 : ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], __r1 == '\0') \

958 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

959 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

960 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

961 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

962 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

963 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

964 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

968 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
);

969 
__STRING_INLINE
 
size_t


970 
	$__¡rc¥n_c1
 (cÚ¡ *
__s
, 
__»jeù
)

972 
size_t
 
__»suÉ
 = 0;

973 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù
)

974 ++
__»suÉ
;

975  
__»suÉ
;

976 
	}
}

978 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
,

979 
__»jeù2
);

980 
__STRING_INLINE
 
size_t


981 
	$__¡rc¥n_c2
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
)

983 
size_t
 
__»suÉ
 = 0;

984 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


985 && 
__s
[
__»suÉ
] !ğ
__»jeù2
)

986 ++
__»suÉ
;

987  
__»suÉ
;

988 
	}
}

990 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
,

991 
__»jeù2
, 
__»jeù3
);

992 
__STRING_INLINE
 
size_t


993 
	$__¡rc¥n_c3
 (cÚ¡ *
__s
, 
__»jeù1
, 
__»jeù2
,

994 
__»jeù3
)

996 
size_t
 
__»suÉ
 = 0;

997 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


998 && 
__s
[
__»suÉ
] !ğ
__»jeù2
 && __s[__»suÉ] !ğ
__»jeù3
)

999 ++
__»suÉ
;

1000  
__»suÉ
;

1001 
	}
}

1007 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


1008 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


1009 #ià
__GNUC_PREREQ
 (3, 2)

1010 
	#¡r¥n
(
s
, 
acû±
) \

1011 
__ex‹nsiÚ__
 \

1012 ({ 
__a0
, 
__a1
, 
__a2
; \

1013 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1014 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1015 ? 
	`__butš_¡r¥n
 (
s
, 
acû±
) \

1016 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1017 ? ((è(
s
), (
size_t
) 0) \

1018 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1019 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1020 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1021 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1022 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1023 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1024 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)))))) \

1025 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)); })

	)

1027 
	#¡r¥n
(
s
, 
acû±
) \

1028 
__ex‹nsiÚ__
 \

1029 ({ 
__a0
, 
__a1
, 
__a2
; \

1030 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1031 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1032 ? ((è(
s
), (
size_t
) 0) \

1033 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1034 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1035 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1036 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1037 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1038 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1039 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1040 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1044 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
);

1045 
__STRING_INLINE
 
size_t


1046 
	$__¡r¥n_c1
 (cÚ¡ *
__s
, 
__acû±
)

1048 
size_t
 
__»suÉ
 = 0;

1050 
__s
[
__»suÉ
] =ğ
__acû±
)

1051 ++
__»suÉ
;

1052  
__»suÉ
;

1053 
	}
}

1055 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1056 
__acû±2
);

1057 
__STRING_INLINE
 
size_t


1058 
	$__¡r¥n_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1060 
size_t
 
__»suÉ
 = 0;

1062 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2
)

1063 ++
__»suÉ
;

1064  
__»suÉ
;

1065 
	}
}

1067 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1068 
__acû±2
, 
__acû±3
);

1069 
__STRING_INLINE
 
size_t


1070 
	$__¡r¥n_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1072 
size_t
 
__»suÉ
 = 0;

1074 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2


1075 || 
__s
[
__»suÉ
] =ğ
__acû±3
)

1076 ++
__»suÉ
;

1077  
__»suÉ
;

1078 
	}
}

1083 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1084 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1085 #ià
__GNUC_PREREQ
 (3, 2)

1086 
	#¡½brk
(
s
, 
acû±
) \

1087 
__ex‹nsiÚ__
 \

1088 ({ 
__a0
, 
__a1
, 
__a2
; \

1089 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1090 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1091 ? 
	`__butš_¡½brk
 (
s
, 
acû±
) \

1092 : ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1093 ? ((è(
s
), (*è
NULL
) \

1094 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1095 ? 
	`__butš_¡rchr
 (
s
, 
__a0
) \

1096 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1097 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1098 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1099 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1100 : 
	`__butš_¡½brk
 (
s
, 
acû±
)))))) \

1101 : 
	`__butš_¡½brk
 (
s
, 
acû±
)); })

	)

1103 
	#¡½brk
(
s
, 
acû±
) \

1104 
__ex‹nsiÚ__
 \

1105 ({ 
__a0
, 
__a1
, 
__a2
; \

1106 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1107 ? ((
__a0
 = ((cÚ¡ *è(
acû±
))[0], __a0 == '\0') \

1108 ? ((è(
s
), (*è
NULL
) \

1109 : ((
__a1
 = ((cÚ¡ *è(
acû±
))[1], __a1 == '\0') \

1110 ? 
	`¡rchr
 (
s
, 
__a0
) \

1111 : ((
__a2
 = ((cÚ¡ *è(
acû±
))[2], __a2 == '\0') \

1112 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1113 : (((cÚ¡ *è(
acû±
))[3] == '\0' \

1114 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1115 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1116 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1120 
__STRING_INLINE
 *
__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
,

1121 
__acû±2
);

1122 
__STRING_INLINE
 *

1123 
	$__¡½brk_c2
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
)

1126 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2
)

1127 ++
__s
;

1128  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1129 
	}
}

1131 
__STRING_INLINE
 *
__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
,

1132 
__acû±2
, 
__acû±3
);

1133 
__STRING_INLINE
 *

1134 
	$__¡½brk_c3
 (cÚ¡ *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1137 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2


1138 && *
__s
 !ğ
__acû±3
)

1139 ++
__s
;

1140  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1141 
	}
}

1147 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1148 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1149 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1150 ? (((cÚ¡ *è(
ÃedË
))[0] == '\0' \

1151 ? (*è(
size_t
è(
hay¡ack
) \

1152 : (((cÚ¡ *è(
ÃedË
))[1] == '\0' \

1153 ? 
	`¡rchr
 (
hay¡ack
, \

1154 ((cÚ¡ *è(
ÃedË
))[0]) \

1155 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1156 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1160 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1161 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1162 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1163 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1164 && ((cÚ¡ *è(
£p
))[0] != '\0' \

1165 && ((cÚ¡ *è(
£p
))[1] == '\0' \

1166 ? 
	`__¡¹ok_r_1c
 (
s
, ((cÚ¡ *è(
£p
))[0], 
Ãx
) \

1167 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1170 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1171 
__STRING_INLINE
 *

1172 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1174 *
__»suÉ
;

1175 ià(
__s
 =ğ
NULL
)

1176 
__s
 = *
__Ãx
;

1177 *
__s
 =ğ
__£p
)

1178 ++
__s
;

1179 
__»suÉ
 = 
NULL
;

1180 ià(*
__s
 != '\0')

1182 
__»suÉ
 = 
__s
++;

1183 *
__s
 != '\0')

1184 ià(*
__s
++ =ğ
__£p
)

1186 
__s
[-1] = '\0';

1190 *
__Ãx
 = 
__s
;

1191  
__»suÉ
;

1192 
	}
}

1193 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1194 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1199 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1200 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1202 *
__¡r£p_g
 (**
__¡ršgp
, cÚ¡ *
__d–im
);

1203 
	#__¡r£p
(
s
, 
»jeù
) \

1204 
__ex‹nsiÚ__
 \

1205 ({ 
__r0
, 
__r1
, 
__r2
; \

1206 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1207 && (
__r0
 = ((cÚ¡ *è(
»jeù
))[0], \

1208 ((cÚ¡ *è(
»jeù
))[0] != '\0') \

1209 ? ((
__r1
 = ((cÚ¡ *è(
»jeù
))[1], \

1210 ((cÚ¡ *è(
»jeù
))[1] == '\0') \

1211 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1212 : ((
__r2
 = ((cÚ¡ *è(
»jeù
))[2], __r2 == '\0') \

1213 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1214 : (((cÚ¡ *è(
»jeù
))[3] == '\0' \

1215 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1216 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1217 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1220 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1221 
__STRING_INLINE
 *

1222 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1224 *
__»tv®
 = *
__s
;

1225 ià(
__»tv®
 !ğ
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1226 *(*
__s
)++ = '\0';

1227  
__»tv®
;

1228 
	}
}

1230 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1231 
__STRING_INLINE
 *

1232 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1234 *
__»tv®
 = *
__s
;

1235 ià(
__»tv®
 !ğ
NULL
)

1237 *
__ı
 = 
__»tv®
;

1240 ià(*
__ı
 == '\0')

1242 
__ı
 = 
NULL
;

1245 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
)

1247 *
__ı
++ = '\0';

1250 ++
__ı
;

1252 *
__s
 = 
__ı
;

1254  
__»tv®
;

1255 
	}
}

1257 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1258 
__»jeù3
);

1259 
__STRING_INLINE
 *

1260 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1262 *
__»tv®
 = *
__s
;

1263 ià(
__»tv®
 !ğ
NULL
)

1265 *
__ı
 = 
__»tv®
;

1268 ià(*
__ı
 == '\0')

1270 
__ı
 = 
NULL
;

1273 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
 || *__ı =ğ
__»jeù3
)

1275 *
__ı
++ = '\0';

1278 ++
__ı
;

1280 *
__s
 = 
__ı
;

1282  
__»tv®
;

1283 
	}
}

1284 #ifdeà
__USE_BSD


1285 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1292 #ifdeà
__USE_MISC


1294 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1295 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1296 
	~<¡dlib.h
>

1299 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1301 *
	$__¡rdup
 (cÚ¡ *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1302 
	#__¡rdup
(
s
) \

1303 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1304 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1305 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1306 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1307 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1308 ià(
__»tv®
 !ğ
NULL
) \

1309 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, 
__Ën
); \

1310 
__»tv®
; 
	}
})) \

1311 : 
	`__¡rdup
 (
s
)))

	)

1313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1314 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1318 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1320 *
	$__¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

1321 
__THROW
 
__©Œibu‹_m®loc__
;

1322 
	#__¡ºdup
(
s
, 
n
) \

1323 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1324 ? (((cÚ¡ *è(
s
))[0] == '\0' \

1325 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1326 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1327 
size_t
 
__n
 = (
n
); \

1328 *
__»tv®
; \

1329 ià(
__n
 < 
__Ën
) \

1330 
__Ën
 = 
__n
 + 1; \

1331 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1332 ià(
__»tv®
 !ğ
NULL
) \

1334 
__»tv®
[
__Ën
 - 1] = '\0'; \

1335 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, \

1336 
__Ën
 - 1); \

1338 
__»tv®
; 
	}
})) \

1339 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1341 #ifdeà
__USE_GNU


1342 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1348 #iâdeà
_FORCE_INLINES


1349 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

18 #iâdeà
_STRING_H


22 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

25 #iâdeà
__ılu¥lus


29 #undeà
memıy


30 #undeà
memmove


31 #undeà
mem£t


32 #undeà
¡rÿt


33 #undeà
¡rıy


34 #undeà
¡ºÿt


35 #undeà
¡ºıy


36 #ifdeà
__USE_GNU


37 #undeà
mempıy


38 #undeà
¡pıy


40 #ifdeà
__USE_BSD


41 #undeà
bcİy


42 #undeà
bz”o


47 
__fÜtify_funùiÚ
 *

48 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

49 
size_t
 
__Ën
))

51  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

52 
	}
}

54 
__fÜtify_funùiÚ
 *

55 
__NTH
 (
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__Ën
))

57  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

58 
	}
}

60 #ifdeà
__USE_GNU


61 
__fÜtify_funùiÚ
 *

62 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

63 
size_t
 
__Ën
))

65  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

66 
	}
}

75 
__fÜtify_funùiÚ
 *

76 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

78 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

79 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

81 
	`__w¬n_mem£t_z”o_Ën
 ();

82  
__de¡
;

84  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

85 
	}
}

87 #ifdeà
__USE_BSD


88 
__fÜtify_funùiÚ
 

89 
__NTH
 (
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

91 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

92 
	}
}

94 
__fÜtify_funùiÚ
 

95 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

97 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

98 
	}
}

101 
__fÜtify_funùiÚ
 *

102 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

104  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

105 
	}
}

107 #ifdeà
__USE_GNU


108 
__fÜtify_funùiÚ
 *

109 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

111  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

112 
	}
}

116 
__fÜtify_funùiÚ
 *

117 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

118 
size_t
 
__Ën
))

120  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

121 
	}
}

124 *
	$__¡²ıy_chk
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

125 
size_t
 
__de¡Ën
è
__THROW
;

126 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
, cÚ¡ *
__¤c
,

127 
size_t
 
__n
), 
¡²ıy
);

129 
__fÜtify_funùiÚ
 *

130 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
))

132 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

133 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À<ğ
	`__bos
 (
__de¡
)))

134  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

135  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

136 
	}
}

139 
__fÜtify_funùiÚ
 *

140 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
))

142  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

143 
	}
}

146 
__fÜtify_funùiÚ
 *

147 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

148 
size_t
 
__Ën
))

150  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

151 
	}
}

	@/usr/include/bits/sys_errlist.h

19 #iâdeà
_STDIO_H


25 #ifdeà 
__USE_BSD


26 
sys_Ã¼
;

27 cÚ¡ *cÚ¡ 
sys_”¾i¡
[];

29 #ifdeà 
__USE_GNU


30 
_sys_Ã¼
;

31 cÚ¡ *cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 1000000l

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

82 
	#TIMER_ABSTIME
 1

	)

85 #ifdeà
__USE_GNU


86 
	~<b™s/timex.h
>

88 
__BEGIN_DECLS


91 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

93 
__END_DECLS


99 #undeà
__Ãed_timev®


	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

45 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

54 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

60 
	m__v®
[2];

61 } 
	t__quad_t
;

64 
__u_lÚg
 
	m__v®
[2];

65 } 
	t__u_quad_t
;

98 
	#__S16_TYPE
 

	)

99 
	#__U16_TYPE
 

	)

100 
	#__S32_TYPE
 

	)

101 
	#__U32_TYPE
 

	)

102 
	#__SLONGWORD_TYPE
 

	)

103 
	#__ULONGWORD_TYPE
 

	)

104 #ià
__WORDSIZE
 == 32

105 
	#__SQUAD_TYPE
 
__quad_t


	)

106 
	#__UQUAD_TYPE
 
__u_quad_t


	)

107 
	#__SWORD_TYPE
 

	)

108 
	#__UWORD_TYPE
 

	)

109 
	#__SLONG32_TYPE
 

	)

110 
	#__ULONG32_TYPE
 

	)

111 
	#__S64_TYPE
 
__quad_t


	)

112 
	#__U64_TYPE
 
__u_quad_t


	)

115 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

116 #–ià
__WORDSIZE
 == 64

117 
	t__SQUAD_TYPE
 

	)

118 
	t__UQUAD_TYPE
 

	)

119 
	t__SWORD_TYPE
 

	)

120 
	t__UWORD_TYPE
 

	)

121 
	t__SLONG32_TYPE
 

	)

122 
	t__ULONG32_TYPE
 

	)

123 
	t__S64_TYPE
 

	)

124 
	t__U64_TYPE
 

	)

126 
	t__STD_TYPE
 

	)

130 
	~<b™s/ty³sizes.h
>

133 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

134 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

135 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

136 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

137 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

138 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

139 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

140 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

141 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

142 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

143 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

144 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

145 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

146 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

147 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

148 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

149 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

150 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

152 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

153 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

156 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

159 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

162 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

167 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

168 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

171 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

172 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

175 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

176 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

179 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

181 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

186 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

190 
__off64_t
 
	t__loff_t
;

191 
__quad_t
 *
	t__qaddr_t
;

192 *
	t__ÿddr_t
;

195 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

198 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

201 #undeà
__STD_TYPE


	@/usr/include/bits/uio.h

18 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


22 #iâdeà
_BITS_UIO_H


23 
	#_BITS_UIO_H
 1

	)

25 
	~<sys/ty³s.h
>

39 
	#UIO_MAXIOV
 1024

	)

43 
	siovec


45 *
	miov_ba£
;

46 
size_t
 
	miov_Ën
;

52 #ifdeà
__USE_GNU


53 #ià
defšed
 
_SYS_UIO_H
 && !defšed 
_BITS_UIO_H_FOR_SYS_UIO_H


54 
	#_BITS_UIO_H_FOR_SYS_UIO_H
 1

	)

56 
__BEGIN_DECLS


59 
ssize_t
 
	$´oûss_vm_»adv
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

60 
__liovút
,

61 cÚ¡ 
iovec
 *
__rvec
,

62 
__riovút
,

63 
__æags
)

64 
__THROW
;

67 
ssize_t
 
	$´oûss_vm_wr™ev
 (
pid_t
 
__pid
, cÚ¡ 
iovec
 *
__lvec
,

68 
__liovút
,

69 cÚ¡ 
iovec
 *
__rvec
,

70 
__riovút
,

71 
__æags
)

72 
__THROW
;

74 
__END_DECLS


	@/usr/include/bits/unistd.h

19 #iâdeà
_UNISTD_H


23 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

24 
size_t
 
__buæ’
è
__wur
;

25 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

26 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

27 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

28 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

29 
size_t
 
__buæ’
), 
__»ad_chk
)

30 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

33 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


34 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

36 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

38 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

39  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

41 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

42  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

44  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

45 
	}
}

47 #ifdeà
__USE_UNIX98


48 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

49 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

50 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

51 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

52 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

53 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

54 
__off_t
 
__off£t
), 
´—d
è
__wur
;

55 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

56 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

57 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

58 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

60 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

61 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

63 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

64 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

65 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

66 
__´—d64_chk
)

67 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

70 #iâdeà
__USE_FILE_OFFSET64


71 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


72 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

74 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

76 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

77  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

79 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

80  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

81 
	`__bos0
 (
__buf
));

83  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

84 
	}
}

86 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


87 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

89 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

91 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

92  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

94 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

95  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

96 
	`__bos0
 (
__buf
));

99  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

100 
	}
}

103 #ifdeà
__USE_LARGEFILE64


104 
__fÜtify_funùiÚ
 
__wur
 
ssize_t


105 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

107 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

109 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

110  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

112 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

113  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

114 
	`__bos0
 (
__buf
));

117  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

118 
	}
}

122 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


123 
ssize_t
 
	$__»adlšk_chk
 (cÚ¡ *
__»¡riù
 
__·th
,

124 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

125 
size_t
 
__buæ’
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

127 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

128 (cÚ¡ *
__»¡riù
 
__·th
,

129 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

130 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

131 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

132 (cÚ¡ *
__»¡riù
 
__·th
,

133 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

134 
size_t
 
__buæ’
), 
__»adlšk_chk
)

135 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

138 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


139 
	`__NTH
 (
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

140 
size_t
 
__Ën
))

142 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

144 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

145  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

147 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

148  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

150  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

151 
	}
}

154 #ifdeà
__USE_ATFILE


155 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

156 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

157 
size_t
 
__buæ’
)

158 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

159 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

160 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

161 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

162 
»adlšk©
)

163 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

164 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

165 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

166 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

167 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

168 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

172 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


173 
	`__NTH
 (
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

174 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

176 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

178 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

179  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

181 ià(
__Ën
 > 
	`__bos
 (
__buf
))

182  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

183 
	`__bos
 (
__buf
));

185  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

186 
	}
}

189 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

190 
__THROW
 
__wur
;

191 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

192 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

193 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

194 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

195 
__g‘cwd_chk
)

196 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

199 
__fÜtify_funùiÚ
 
__wur
 *

200 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

202 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

204 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

205  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

207 ià(
__size
 > 
	`__bos
 (
__buf
))

208  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

210  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

211 
	}
}

213 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


214 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

215 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

216 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

217 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

220 
__fÜtify_funùiÚ
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

221 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

223 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

224  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

225  
	`__g‘wd_w¬n
 (
__buf
);

226 
	}
}

229 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

230 
size_t
 
__buæ’
è
__THROW
;

231 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

232 
size_t
 
__Ën
), 
cÚf¡r
);

233 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

234 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

235 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

236 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

239 
__fÜtify_funùiÚ
 
size_t


240 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

242 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

244 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

245  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

247 ià(
	`__bos
 (
__buf
è< 
__Ën
)

248  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

250  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

251 
	}
}

254 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

255 
__THROW
 
__wur
;

256 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

257 
g‘groups
è
__wur
;

258 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

259 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

260 
__g‘groups_chk
)

261 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

264 
__fÜtify_funùiÚ
 

265 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

267 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

269 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

270  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

272 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

273  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

275  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

276 
	}
}

279 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

280 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

281 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

282 
size_t
 
__buæ’
), 
‰yÇme_r
)

283 
	`__nÚnuÎ
 ((2));

284 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

285 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

286 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

287 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

290 
__fÜtify_funùiÚ
 

291 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

293 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

295 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

296  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

298 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

299  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

301  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

302 
	}
}

305 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


306 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

307 
	`__nÚnuÎ
 ((1));

308 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

309 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

310 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

311 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

312 
__g‘logš_r_chk
)

313 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

316 
__fÜtify_funùiÚ
 

317 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

319 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

321 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

322  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

324 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

325  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

327  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

328 
	}
}

332 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


333 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

335 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

336 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

337 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

338 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

339 
__g‘ho¡Çme_chk
)

340 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

343 
__fÜtify_funùiÚ
 

344 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

346 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

348 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

349  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

351 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

352  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

354  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

355 
	}
}

359 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

360 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

361 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

362 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

363 
size_t
 
__buæ’
),

364 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

365 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

366 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

367 
__g‘domašÇme_chk
)

368 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

372 
__fÜtify_funùiÚ
 

373 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

375 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

377 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

378  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

380 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

381  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

383  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

384 
	}
}

	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_BSD


64 
	~<’dŸn.h
>

66 
	uwa™


68 
	mw_¡©us
;

71 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


72 
	m__w_‹rmsig
:7;

73 
	m__w_cÜedump
:1;

74 
	m__w_»tcode
:8;

77 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


79 
	m__w_»tcode
:8;

80 
	m__w_cÜedump
:1;

81 
	m__w_‹rmsig
:7;

83 } 
	m__wa™_‹rmš©ed
;

86 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


87 
	m__w_¡İv®
:8;

88 
	m__w_¡İsig
:8;

91 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


93 
	m__w_¡İsig
:8;

94 
	m__w_¡İv®
:8;

96 } 
	m__wa™_¡İ³d
;

99 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

100 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

101 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

102 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

103 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/bits/wchar.h

19 #iâdeà
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifdeà
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #–ià
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffffà+ 
L
'\0')

	)

41 #ifdeà
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #–ià
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/bits/xopen_lim.h

29 #iâdeà
_XOPEN_LIM_H


30 
	#_XOPEN_LIM_H
 1

	)

32 
	#__Ãed_IOV_MAX


	)

33 
	~<b™s/¡dio_lim.h
>

65 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

70 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

73 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

76 
	#NL_MSGMAX
 
INT_MAX


	)

80 
	#NL_NMAX
 
INT_MAX


	)

83 
	#NL_SETMAX
 
INT_MAX


	)

86 
	#NL_TEXTMAX
 
INT_MAX


	)

89 
	#NZERO
 20

	)

93 #ifdeà
INT_MAX


94 #ià
INT_MAX
 == 32767

95 
	#WORD_BIT
 16

	)

97 #ià
INT_MAX
 == 2147483647

98 
	#WORD_BIT
 32

	)

101 
	#WORD_BIT
 64

	)

104 #–ià
defšed
 
__INT_MAX__


105 #ià
__INT_MAX__
 == 32767

106 
	#WORD_BIT
 16

	)

108 #ià
__INT_MAX__
 == 2147483647

109 
	#WORD_BIT
 32

	)

112 
	#WORD_BIT
 64

	)

116 
	#WORD_BIT
 32

	)

120 #ifdeà
LONG_MAX


121 #ià
LONG_MAX
 == 2147483647

122 
	#LONG_BIT
 32

	)

125 
	#LONG_BIT
 64

	)

127 #–ià
defšed
 
__LONG_MAX__


128 #ià
__LONG_MAX__
 == 2147483647

129 
	#LONG_BIT
 32

	)

132 
	#LONG_BIT
 64

	)

135 
	~<b™s/wÜdsize.h
>

136 #ià
__WORDSIZE
 == 64

137 
	#LONG_BIT
 64

	)

139 
	#LONG_BIT
 32

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

98 #undeà
__USE_ISOC11


99 #undeà
__USE_ISOC99


100 #undeà
__USE_ISOC95


101 #undeà
__USE_ISOCXX11


102 #undeà
__USE_POSIX


103 #undeà
__USE_POSIX2


104 #undeà
__USE_POSIX199309


105 #undeà
__USE_POSIX199506


106 #undeà
__USE_XOPEN


107 #undeà
__USE_XOPEN_EXTENDED


108 #undeà
__USE_UNIX98


109 #undeà
__USE_XOPEN2K


110 #undeà
__USE_XOPEN2KXSI


111 #undeà
__USE_XOPEN2K8


112 #undeà
__USE_XOPEN2K8XSI


113 #undeà
__USE_LARGEFILE


114 #undeà
__USE_LARGEFILE64


115 #undeà
__USE_FILE_OFFSET64


116 #undeà
__USE_BSD


117 #undeà
__USE_SVID


118 #undeà
__USE_MISC


119 #undeà
__USE_ATFILE


120 #undeà
__USE_GNU


121 #undeà
__USE_REENTRANT


122 #undeà
__USE_FORTIFY_LEVEL


123 #undeà
__FAVOR_BSD


124 #undeà
__KERNEL_STRICT_NAMES


128 #iâdeà
_LOOSE_KERNEL_NAMES


129 
	#__KERNEL_STRICT_NAMES


	)

133 
	#__USE_ANSI
 1

	)

142 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


143 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

144 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

146 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

151 #ià
defšed
 
_BSD_SOURCE
 && \

152 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

153 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

154 
	#__FAVOR_BSD
 1

	)

158 #ifdeà
_GNU_SOURCE


159 #undeà
_ISOC95_SOURCE


160 
	#_ISOC95_SOURCE
 1

	)

161 #undeà
_ISOC99_SOURCE


162 
	#_ISOC99_SOURCE
 1

	)

163 #undeà
_ISOC11_SOURCE


164 
	#_ISOC11_SOURCE
 1

	)

165 #undeà
_POSIX_SOURCE


166 
	#_POSIX_SOURCE
 1

	)

167 #undeà
_POSIX_C_SOURCE


168 
	#_POSIX_C_SOURCE
 200809L

	)

169 #undeà
_XOPEN_SOURCE


170 
	#_XOPEN_SOURCE
 700

	)

171 #undeà
_XOPEN_SOURCE_EXTENDED


172 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

173 #undeà
_LARGEFILE64_SOURCE


174 
	#_LARGEFILE64_SOURCE
 1

	)

175 #undeà
_BSD_SOURCE


176 
	#_BSD_SOURCE
 1

	)

177 #undeà
_SVID_SOURCE


178 
	#_SVID_SOURCE
 1

	)

179 #undeà
_ATFILE_SOURCE


180 
	#_ATFILE_SOURCE
 1

	)

185 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

186 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

187 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

188 
	#_BSD_SOURCE
 1

	)

189 
	#_SVID_SOURCE
 1

	)

193 #ià(
defšed
 
_ISOC11_SOURCE
 \

194 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

195 
	#__USE_ISOC11
 1

	)

199 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

200 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

201 
	#__USE_ISOC99
 1

	)

205 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

206 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

207 
	#__USE_ISOC95
 1

	)

214 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

215 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

216 
	#__USE_ISOCXX11
 1

	)

221 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

222 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

223 
	#_POSIX_SOURCE
 1

	)

224 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

225 
	#_POSIX_C_SOURCE
 2

	)

226 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

227 
	#_POSIX_C_SOURCE
 199506L

	)

228 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

229 
	#_POSIX_C_SOURCE
 200112L

	)

231 
	#_POSIX_C_SOURCE
 200809L

	)

233 
	#__USE_POSIX_IMPLICITLY
 1

	)

236 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


237 
	#__USE_POSIX
 1

	)

240 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


241 
	#__USE_POSIX2
 1

	)

244 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

245 
	#__USE_POSIX199309
 1

	)

248 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

249 
	#__USE_POSIX199506
 1

	)

252 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

253 
	#__USE_XOPEN2K
 1

	)

254 #undeà
__USE_ISOC95


255 
	#__USE_ISOC95
 1

	)

256 #undeà
__USE_ISOC99


257 
	#__USE_ISOC99
 1

	)

260 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

261 
	#__USE_XOPEN2K8
 1

	)

262 #undeà
_ATFILE_SOURCE


263 
	#_ATFILE_SOURCE
 1

	)

266 #ifdef 
_XOPEN_SOURCE


267 
	#__USE_XOPEN
 1

	)

268 #ià(
_XOPEN_SOURCE
 - 0) >= 500

269 
	#__USE_XOPEN_EXTENDED
 1

	)

270 
	#__USE_UNIX98
 1

	)

271 #undeà
_LARGEFILE_SOURCE


272 
	#_LARGEFILE_SOURCE
 1

	)

273 #ià(
_XOPEN_SOURCE
 - 0) >= 600

274 #ià(
_XOPEN_SOURCE
 - 0) >= 700

275 
	#__USE_XOPEN2K8
 1

	)

276 
	#__USE_XOPEN2K8XSI
 1

	)

278 
	#__USE_XOPEN2K
 1

	)

279 
	#__USE_XOPEN2KXSI
 1

	)

280 #undeà
__USE_ISOC95


281 
	#__USE_ISOC95
 1

	)

282 #undeà
__USE_ISOC99


283 
	#__USE_ISOC99
 1

	)

286 #ifdeà
_XOPEN_SOURCE_EXTENDED


287 
	#__USE_XOPEN_EXTENDED
 1

	)

292 #ifdeà
_LARGEFILE_SOURCE


293 
	#__USE_LARGEFILE
 1

	)

296 #ifdeà
_LARGEFILE64_SOURCE


297 
	#__USE_LARGEFILE64
 1

	)

300 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

301 
	#__USE_FILE_OFFSET64
 1

	)

304 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


305 
	#__USE_MISC
 1

	)

308 #ifdef 
_BSD_SOURCE


309 
	#__USE_BSD
 1

	)

312 #ifdef 
_SVID_SOURCE


313 
	#__USE_SVID
 1

	)

316 #ifdef 
_ATFILE_SOURCE


317 
	#__USE_ATFILE
 1

	)

320 #ifdef 
_GNU_SOURCE


321 
	#__USE_GNU
 1

	)

324 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


325 
	#__USE_REENTRANT
 1

	)

328 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

329 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

330 #ià
_FORTIFY_SOURCE
 > 1

331 
	#__USE_FORTIFY_LEVEL
 2

	)

333 
	#__USE_FORTIFY_LEVEL
 1

	)

336 
	#__USE_FORTIFY_LEVEL
 0

	)

341 
	~<¡dc-´edef.h
>

349 #undeà
__GNU_LIBRARY__


350 
	#__GNU_LIBRARY__
 6

	)

354 
	#__GLIBC__
 2

	)

355 
	#__GLIBC_MINOR__
 17

	)

357 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

358 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

361 #ià
defšed
 
__GNUC__
 \

362 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

363 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

364 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

365 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

369 #iâdeà
__ASSEMBLER__


370 #iâdeà
_SYS_CDEFS_H


371 
	~<sys/cdefs.h
>

376 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


377 
	#__USE_LARGEFILE
 1

	)

378 
	#__USE_LARGEFILE64
 1

	)

384 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

385 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

386 && 
defšed
 
	g__ex‹º_šlše


387 
	#__USE_EXTERN_INLINES
 1

	)

395 
	~<gnu/¡ubs.h
>

	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_åos_t
 
_G_åos_t


	)

35 
	#_IO_åos64_t
 
_G_åos64_t


	)

36 
	#_IO_size_t
 
size_t


	)

37 
	#_IO_ssize_t
 
__ssize_t


	)

38 
	#_IO_off_t
 
__off_t


	)

39 
	#_IO_off64_t
 
__off64_t


	)

40 
	#_IO_pid_t
 
__pid_t


	)

41 
	#_IO_uid_t
 
__uid_t


	)

42 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

43 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

44 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

45 
	#_IO_va_li¡
 
_G_va_li¡


	)

46 
	#_IO_wšt_t
 
wšt_t


	)

49 
	#__Ãed___va_li¡


	)

50 
	~<¡d¬g.h
>

51 #ifdeà
__GNUC_VA_LIST


52 #undeà
_IO_va_li¡


53 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

56 #iâdeà
__P


57 
	~<sys/cdefs.h
>

60 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

62 #iâdeà
EOF


63 
	#EOF
 (-1)

	)

65 #iâdeà
NULL


66 #ià
defšed
 
__GNUG__
 && \

67 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

68 
	#NULL
 (
__nuÎ
)

	)

70 #ià!
defšed
(
__ılu¥lus
)

71 
	#NULL
 ((*)0)

	)

73 
	#NULL
 (0)

	)

78 
	#_IOS_INPUT
 1

	)

79 
	#_IOS_OUTPUT
 2

	)

80 
	#_IOS_ATEND
 4

	)

81 
	#_IOS_APPEND
 8

	)

82 
	#_IOS_TRUNC
 16

	)

83 
	#_IOS_NOCREATE
 32

	)

84 
	#_IOS_NOREPLACE
 64

	)

85 
	#_IOS_BIN
 128

	)

93 
	#_IO_MAGIC
 0xFBAD0000

	)

94 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

95 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

96 
	#_IO_USER_BUF
 1

	)

97 
	#_IO_UNBUFFERED
 2

	)

98 
	#_IO_NO_READS
 4

	)

99 
	#_IO_NO_WRITES
 8

	)

100 
	#_IO_EOF_SEEN
 0x10

	)

101 
	#_IO_ERR_SEEN
 0x20

	)

102 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

103 
	#_IO_LINKED
 0x80

	)

104 
	#_IO_IN_BACKUP
 0x100

	)

105 
	#_IO_LINE_BUF
 0x200

	)

106 
	#_IO_TIED_PUT_GET
 0x400

	)

107 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

108 
	#_IO_IS_APPENDING
 0x1000

	)

109 
	#_IO_IS_FILEBUF
 0x2000

	)

110 
	#_IO_BAD_SEEN
 0x4000

	)

111 
	#_IO_USER_LOCK
 0x8000

	)

113 
	#_IO_FLAGS2_MMAP
 1

	)

114 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

115 #ifdeà
_LIBC


116 
	#_IO_FLAGS2_FORTIFY
 4

	)

118 
	#_IO_FLAGS2_USER_WBUF
 8

	)

119 #ifdeà
_LIBC


120 
	#_IO_FLAGS2_SCANF_STD
 16

	)

121 
	#_IO_FLAGS2_NOCLOSE
 32

	)

122 
	#_IO_FLAGS2_CLOEXEC
 64

	)

126 
	#_IO_SKIPWS
 01

	)

127 
	#_IO_LEFT
 02

	)

128 
	#_IO_RIGHT
 04

	)

129 
	#_IO_INTERNAL
 010

	)

130 
	#_IO_DEC
 020

	)

131 
	#_IO_OCT
 040

	)

132 
	#_IO_HEX
 0100

	)

133 
	#_IO_SHOWBASE
 0200

	)

134 
	#_IO_SHOWPOINT
 0400

	)

135 
	#_IO_UPPERCASE
 01000

	)

136 
	#_IO_SHOWPOS
 02000

	)

137 
	#_IO_SCIENTIFIC
 04000

	)

138 
	#_IO_FIXED
 010000

	)

139 
	#_IO_UNITBUF
 020000

	)

140 
	#_IO_STDIO
 040000

	)

141 
	#_IO_DONT_CLOSE
 0100000

	)

142 
	#_IO_BOOLALPHA
 0200000

	)

145 
_IO_jump_t
; 
	g_IO_FILE
;

148 #ifdeà
_IO_MTSAFE_IO


149 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

150 
	~<b™s/¡dio-lock.h
>

155 
	t_IO_lock_t
;

161 
	s_IO_m¬k”
 {

162 
_IO_m¬k”
 *
	m_Ãxt
;

163 
_IO_FILE
 *
	m_sbuf
;

167 
	m_pos
;

169 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

170 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

171 
	mpublic
:

172 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

173 ~
¡»amm¬k”
();

174 
§všg
(è{  
	m_¥os
 == -2; }

175 
d–
(
¡»amm¬k”
&);

176 
d–
();

181 
	e__codecvt_»suÉ


183 
	m__codecvt_ok
,

184 
	m__codecvt_·¹Ÿl
,

185 
	m__codecvt_”rÜ
,

186 
	m__codecvt_nocÚv


189 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


192 
	s_IO_codecvt


194 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

195 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

196 
	m__mb¡©e_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 *,

199 cÚ¡ 
	mwch¬_t
 **, *,

201 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

202 
	m__mb¡©e_t
 *, *,

204 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

205 
	m__mb¡©e_t
 *,

207 cÚ¡ **, 
	mwch¬_t
 *,

208 
	mwch¬_t
 *, wchar_t **);

209 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

211 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

212 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

213 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

215 
_IO_icÚv_t
 
	m__cd_š
;

216 
_IO_icÚv_t
 
	m__cd_out
;

220 
	s_IO_wide_d©a


222 
wch¬_t
 *
	m_IO_»ad_±r
;

223 
wch¬_t
 *
	m_IO_»ad_’d
;

224 
wch¬_t
 *
	m_IO_»ad_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_ba£
;

226 
wch¬_t
 *
	m_IO_wr™e_±r
;

227 
wch¬_t
 *
	m_IO_wr™e_’d
;

228 
wch¬_t
 *
	m_IO_buf_ba£
;

229 
wch¬_t
 *
	m_IO_buf_’d
;

231 
wch¬_t
 *
	m_IO_§ve_ba£
;

232 
wch¬_t
 *
	m_IO_backup_ba£
;

234 
wch¬_t
 *
	m_IO_§ve_’d
;

236 
__mb¡©e_t
 
	m_IO_¡©e
;

237 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

238 
_IO_codecvt
 
	m_codecvt
;

240 
wch¬_t
 
	m_shÜtbuf
[1];

242 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

246 
	s_IO_FILE
 {

247 
	m_æags
;

248 
	#_IO_fe_æags
 
_æags


	)

252 * 
	m_IO_»ad_±r
;

253 * 
	m_IO_»ad_’d
;

254 * 
	m_IO_»ad_ba£
;

255 * 
	m_IO_wr™e_ba£
;

256 * 
	m_IO_wr™e_±r
;

257 * 
	m_IO_wr™e_’d
;

258 * 
	m_IO_buf_ba£
;

259 * 
	m_IO_buf_’d
;

261 *
	m_IO_§ve_ba£
;

262 *
	m_IO_backup_ba£
;

263 *
	m_IO_§ve_’d
;

265 
_IO_m¬k”
 *
	m_m¬k”s
;

267 
_IO_FILE
 *
	m_chaš
;

269 
	m_f’o
;

271 
	m_blksize
;

273 
	m_æags2
;

275 
_IO_off_t
 
	m_Şd_off£t
;

277 
	#__HAVE_COLUMN


	)

279 
	m_cur_cŞumn
;

280 sigÃd 
	m_vbË_off£t
;

281 
	m_shÜtbuf
[1];

285 
_IO_lock_t
 *
	m_lock
;

286 #ifdeà
_IO_USE_OLD_IO_FILE


289 
	s_IO_FILE_com¶‘e


291 
_IO_FILE
 
	m_fe
;

293 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

294 
_IO_off64_t
 
	m_off£t
;

295 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


297 
_IO_codecvt
 *
	m_codecvt
;

298 
_IO_wide_d©a
 *
	m_wide_d©a
;

299 
_IO_FILE
 *
	m_ä“»s_li¡
;

300 *
	m_ä“»s_buf
;

301 
size_t
 
	m_ä“»s_size
;

303 *
	m__·d1
;

304 *
	m__·d2
;

305 *
	m__·d3
;

306 *
	m__·d4
;

307 
size_t
 
	m__·d5
;

309 
	m_mode
;

311 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

315 #iâdeà
__ılu¥lus


316 
_IO_FILE
 
	t_IO_FILE
;

319 
	g_IO_FILE_¶us
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

323 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

324 #iâdeà
_LIBC


325 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

326 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

327 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

329 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

331 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

339 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

347 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

348 
	tsize_t
 
	t__n
);

356 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

359 
	t__io_şo£_â
 (*
	t__cook›
);

362 #ifdeà
_GNU_SOURCE


364 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

365 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

366 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

367 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

372 
__io_»ad_â
 *
	m»ad
;

373 
__io_wr™e_â
 *
	mwr™e
;

374 
__io_£ek_â
 *
	m£ek
;

375 
__io_şo£_â
 *
	mşo£
;

376 } 
	t_IO_cook›_io_funùiÚs_t
;

377 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

379 
	g_IO_cook›_fe
;

382 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

383 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

387 #ifdeà
__ılu¥lus


391 
__und”æow
 (
_IO_FILE
 *);

392 
__uæow
 (
_IO_FILE
 *);

393 
__ov”æow
 (
_IO_FILE
 *, );

394 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


395 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

397 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

400 #ià 
__GNUC__
 >= 3

401 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

403 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

406 
	#_IO_g‘c_uÆocked
(
_å
) \

407 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

408 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

409 
	#_IO_³ekc_uÆocked
(
_å
) \

410 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

411 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

412 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

413 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

414 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

415 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

416 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

418 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


419 
	#_IO_g‘wc_uÆocked
(
_å
) \

420 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

421 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

422 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

423 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

424 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

425 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

426 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

427 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

428 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

429 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

432 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

433 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

435 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

436 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

437 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

438 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

440 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

443 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

444 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

446 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

448 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

450 #ifdeà
_IO_MTSAFE_IO


451 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

452 
	#_IO_æockfe
(
_å
) \

453 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

454 
	#_IO_fuÆockfe
(
_å
) \

455 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

457 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

458 
	#_IO_æockfe
(
_å
è

	)

459 
	#_IO_fuÆockfe
(
_å
è

	)

460 
	#_IO_árylockfe
(
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

462 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

465 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

466 
_IO_va_li¡
, *
__»¡riù
);

467 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

468 
_IO_va_li¡
);

469 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

470 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

472 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

473 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

475 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

477 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


478 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

479 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

480 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

481 #ià
__GNUC__
 >= 2

484 #ià
defšed
 
_LIBC
 && defšed 
SHARED


485 
	~<shlib-com·t.h
>

486 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

487 
	#_IO_fwide_maybe_šcom·tibË
 \

488 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

489 cÚ¡ 
_IO_¡dš_u£d
;

490 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

493 #iâdeà
_IO_fwide_maybe_šcom·tibË


494 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

498 
	#_IO_fwide
(
__å
, 
__mode
) \

499 ({ 
__»suÉ
 = (
__mode
); \

500 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

502 ià((
__å
)->
_mode
 == 0) \

504 (
__å
)->
_mode
 = -1; \

505 
__»suÉ
 = (
__å
)->
_mode
; \

507 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

508 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

510 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

511 
__»suÉ
; })

	)

514 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

515 
_IO_va_li¡
, *
__»¡riù
);

516 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

517 
_IO_va_li¡
);

518 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

519 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

522 #ifdeà
__LDBL_COMPAT


523 
	~<b™s/libio-ldbl.h
>

526 #ifdeà
__ılu¥lus


	@/usr/include/linux/prctl.h

1 #iâdeà
_LINUX_PRCTL_H


2 
	#_LINUX_PRCTL_H


	)

6 
	#PR_SET_PDEATHSIG
 1

	)

7 
	#PR_GET_PDEATHSIG
 2

	)

10 
	#PR_GET_DUMPABLE
 3

	)

11 
	#PR_SET_DUMPABLE
 4

	)

14 
	#PR_GET_UNALIGN
 5

	)

15 
	#PR_SET_UNALIGN
 6

	)

16 
	#PR_UNALIGN_NOPRINT
 1

	)

17 
	#PR_UNALIGN_SIGBUS
 2

	)

21 
	#PR_GET_KEEPCAPS
 7

	)

22 
	#PR_SET_KEEPCAPS
 8

	)

25 
	#PR_GET_FPEMU
 9

	)

26 
	#PR_SET_FPEMU
 10

	)

27 
	#PR_FPEMU_NOPRINT
 1

	)

28 
	#PR_FPEMU_SIGFPE
 2

	)

31 
	#PR_GET_FPEXC
 11

	)

32 
	#PR_SET_FPEXC
 12

	)

33 
	#PR_FP_EXC_SW_ENABLE
 0x80

	)

34 
	#PR_FP_EXC_DIV
 0x010000

	)

35 
	#PR_FP_EXC_OVF
 0x020000

	)

36 
	#PR_FP_EXC_UND
 0x040000

	)

37 
	#PR_FP_EXC_RES
 0x080000

	)

38 
	#PR_FP_EXC_INV
 0x100000

	)

39 
	#PR_FP_EXC_DISABLED
 0

	)

40 
	#PR_FP_EXC_NONRECOV
 1

	)

41 
	#PR_FP_EXC_ASYNC
 2

	)

42 
	#PR_FP_EXC_PRECISE
 3

	)

46 
	#PR_GET_TIMING
 13

	)

47 
	#PR_SET_TIMING
 14

	)

48 
	#PR_TIMING_STATISTICAL
 0

	)

50 
	#PR_TIMING_TIMESTAMP
 1

	)

53 
	#PR_SET_NAME
 15

	)

54 
	#PR_GET_NAME
 16

	)

57 
	#PR_GET_ENDIAN
 19

	)

58 
	#PR_SET_ENDIAN
 20

	)

59 
	#PR_ENDIAN_BIG
 0

	)

60 
	#PR_ENDIAN_LITTLE
 1

	)

61 
	#PR_ENDIAN_PPC_LITTLE
 2

	)

64 
	#PR_GET_SECCOMP
 21

	)

65 
	#PR_SET_SECCOMP
 22

	)

68 
	#PR_CAPBSET_READ
 23

	)

69 
	#PR_CAPBSET_DROP
 24

	)

72 
	#PR_GET_TSC
 25

	)

73 
	#PR_SET_TSC
 26

	)

74 
	#PR_TSC_ENABLE
 1

	)

75 
	#PR_TSC_SIGSEGV
 2

	)

78 
	#PR_GET_SECUREBITS
 27

	)

79 
	#PR_SET_SECUREBITS
 28

	)

85 
	#PR_SET_TIMERSLACK
 29

	)

86 
	#PR_GET_TIMERSLACK
 30

	)

88 
	#PR_TASK_PERF_EVENTS_DISABLE
 31

	)

89 
	#PR_TASK_PERF_EVENTS_ENABLE
 32

	)

95 
	#PR_MCE_KILL
 33

	)

96 
	#PR_MCE_KILL_CLEAR
 0

	)

97 
	#PR_MCE_KILL_SET
 1

	)

99 
	#PR_MCE_KILL_LATE
 0

	)

100 
	#PR_MCE_KILL_EARLY
 1

	)

101 
	#PR_MCE_KILL_DEFAULT
 2

	)

103 
	#PR_MCE_KILL_GET
 34

	)

108 
	#PR_SET_MM
 35

	)

109 
	#PR_SET_MM_START_CODE
 1

	)

110 
	#PR_SET_MM_END_CODE
 2

	)

111 
	#PR_SET_MM_START_DATA
 3

	)

112 
	#PR_SET_MM_END_DATA
 4

	)

113 
	#PR_SET_MM_START_STACK
 5

	)

114 
	#PR_SET_MM_START_BRK
 6

	)

115 
	#PR_SET_MM_BRK
 7

	)

116 
	#PR_SET_MM_ARG_START
 8

	)

117 
	#PR_SET_MM_ARG_END
 9

	)

118 
	#PR_SET_MM_ENV_START
 10

	)

119 
	#PR_SET_MM_ENV_END
 11

	)

120 
	#PR_SET_MM_AUXV
 12

	)

121 
	#PR_SET_MM_EXE_FILE
 13

	)

127 
	#PR_SET_PTRACER
 0x59616d61

	)

128 
	#PR_SET_PTRACER_ANY
 (()-1)

	)

130 
	#PR_SET_CHILD_SUBREAPER
 36

	)

131 
	#PR_GET_CHILD_SUBREAPER
 37

	)

147 
	#PR_SET_NO_NEW_PRIVS
 38

	)

148 
	#PR_GET_NO_NEW_PRIVS
 39

	)

150 
	#PR_GET_TID_ADDRESS
 40

	)

	@/usr/include/rpc/netdb.h

36 #iâdeà
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<ã©u»s.h
>

41 
	#__Ãed_size_t


	)

42 
	~<¡ddef.h
>

44 
__BEGIN_DECLS


46 
	s½ûÁ


48 *
	mr_Çme
;

49 **
	mr_®Ÿ£s
;

50 
	mr_numb”
;

53 
	$£ŒpûÁ
 (
__¡ayİ’
è
__THROW
;

54 
	$’d½ûÁ
 (è
__THROW
;

55 
½ûÁ
 *
	$g‘½cbyÇme
 (cÚ¡ *
__Çme
è
__THROW
;

56 
½ûÁ
 *
	$g‘½cbynumb”
 (
__numb”
è
__THROW
;

57 
½ûÁ
 *
	$g‘½ûÁ
 (è
__THROW
;

59 #ifdeà
__USE_MISC


60 
	$g‘½cbyÇme_r
 (cÚ¡ *
__Çme
, 
½ûÁ
 *
__»suÉ_buf
,

61 *
__bufãr
, 
size_t
 
__buæ’
,

62 
½ûÁ
 **
__»suÉ
è
__THROW
;

64 
	$g‘½cbynumb”_r
 (
__numb”
, 
½ûÁ
 *
__»suÉ_buf
,

65 *
__bufãr
, 
size_t
 
__buæ’
,

66 
½ûÁ
 **
__»suÉ
è
__THROW
;

68 
	$g‘½ûÁ_r
 (
½ûÁ
 *
__»suÉ_buf
, *
__bufãr
,

69 
size_t
 
__buæ’
, 
½ûÁ
 **
__»suÉ
è
__THROW
;

72 
__END_DECLS


	@/usr/include/sys/cdefs.h

19 #iâdef 
_SYS_CDEFS_H


20 
	#_SYS_CDEFS_H
 1

	)

23 #iâdeà
_FEATURES_H


24 
	~<ã©u»s.h
>

30 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


35 #undeà
__P


36 #undeà
__PMT


38 #ifdeà
__GNUC__


42 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


43 
	#__LEAF
 , 
__Ëaf__


	)

44 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

46 
	#__LEAF


	)

47 
	#__LEAF_ATTR


	)

55 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

56 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

57 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

58 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

60 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

65 
	#__THROW


	)

66 
	#__THROWNL


	)

67 
	#__NTH
(
fù
è
	)
fct

73 
	#__šlše


	)

75 
	#__THROW


	)

76 
	#__THROWNL


	)

77 
	#__NTH
(
fù
è
	)
fct

83 
	#__P
(
¬gs
è
	)
args

84 
	#__PMT
(
¬gs
è
	)
args

89 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

90 
	#__STRING
(
x
è#x

	)

93 
	#__±r_t
 *

	)

94 
	#__lÚg_doubË_t
 

	)

98 #ifdef 
__ılu¥lus


99 
	#__BEGIN_DECLS
 "C" {

	)

100 
	#__END_DECLS
 }

	)

102 
	#__BEGIN_DECLS


	)

103 
	#__END_DECLS


	)

112 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


113 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

114 
	#__END_NAMESPACE_STD
 }

	)

115 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

116 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

117 
	#__END_NAMESPACE_C99
 }

	)

118 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

123 
	#__BEGIN_NAMESPACE_STD


	)

124 
	#__END_NAMESPACE_STD


	)

125 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

126 
	#__BEGIN_NAMESPACE_C99


	)

127 
	#__END_NAMESPACE_C99


	)

128 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

133 #iâdeà
__BOUNDED_POINTERS__


134 
	#__bounded


	)

135 
	#__unbounded


	)

136 
	#__±rv®ue


	)

141 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

142 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

143 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

145 #ià
__GNUC_PREREQ
 (4,3)

146 
	#__w¬ndeş
(
Çme
, 
msg
) \

147 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

148 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

149 
	#__”rÜdeş
(
Çme
, 
msg
) \

150 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

152 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

153 
	#__w¬Ç‰r
(
msg
)

	)

154 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

158 #ià
__GNUC_PREREQ
 (2,97)

160 
	#__æex¬r
 []

	)

162 #ifdeà
__GNUC__


163 
	#__æex¬r
 [0]

	)

165 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

166 
	#__æex¬r
 []

	)

169 
	#__æex¬r
 [1]

	)

185 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

187 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

188 #ifdeà
__ılu¥lus


189 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

190 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

191 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

192 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

194 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

195 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

196 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

197 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

199 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

200 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

213 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

214 
	#__©Œibu‹__
(
xyz
è

	)

220 #ià
__GNUC_PREREQ
 (2,96)

221 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

223 
	#__©Œibu‹_m®loc__


	)

229 #ià
__GNUC_PREREQ
 (2,96)

230 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

232 
	#__©Œibu‹_pu»__


	)

236 #ià
__GNUC_PREREQ
 (2,5)

237 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

239 
	#__©Œibu‹_cÚ¡__


	)

245 #ià
__GNUC_PREREQ
 (3,1)

246 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

247 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

249 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

250 
	#__©Œibu‹_nošlše__


	)

254 #ià
__GNUC_PREREQ
 (3,2)

255 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

257 
	#__©Œibu‹_d•»ÿ‹d__


	)

266 #ià
__GNUC_PREREQ
 (2,8)

267 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

269 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

276 #ià
__GNUC_PREREQ
 (2,97)

277 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

278 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

280 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

285 #ià
__GNUC_PREREQ
 (3,3)

286 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

288 
	#__nÚnuÎ
(
·¿ms
)

	)

293 #ià
__GNUC_PREREQ
 (3,4)

294 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

295 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

296 #ià
__USE_FORTIFY_LEVEL
 > 0

297 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

300 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

302 #iâdeà
__wur


303 
	#__wur


	)

307 #ià
__GNUC_PREREQ
 (3,2)

308 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

310 
	#__®ways_šlše
 
__šlše


	)

315 #ià
__GNUC_PREREQ
 (4,3)

316 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

318 
	#__©Œibu‹_¬tificŸl__


	)

323 #ià(!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3)è&& defšed 
__GNUC__


324 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


325 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

326 
	#__ex‹º_®ways_šlše
 \

327 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

329 
	#__ex‹º_šlše
 
__šlše


	)

330 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

332 #–ià
defšed
 
__GNUC__


333 
	#__ex‹º_šlše
 
__šlše


	)

334 
	#__ex‹º_®ways_šlše
 \

335 
__®ways_šlše


	)

337 
	#__ex‹º_šlše


	)

338 
	#__ex‹º_®ways_šlše


	)

343 #ià
__GNUC_PREREQ
 (4,3)

344 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

345 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

352 #ià!
__GNUC_PREREQ
 (2,8)

353 
	#__ex‹nsiÚ__


	)

357 #ià!
__GNUC_PREREQ
 (2,92)

358 
	#__»¡riù


	)

364 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


365 
	#__»¡riù_¬r
 
__»¡riù


	)

367 #ifdeà
__GNUC__


368 
	#__»¡riù_¬r


	)

370 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

371 
	#__»¡riù_¬r
 
»¡riù


	)

374 
	#__»¡riù_¬r


	)

379 #ià
__GNUC__
 >= 3

380 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
((cÚd), 0)

	)

382 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

385 
	~<b™s/wÜdsize.h
>

387 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


388 
	#__LDBL_COMPAT
 1

	)

389 #ifdeà
__REDIRECT


390 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

391 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

392 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

393 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

394 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

395 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

396 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

397 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

398 
	#__LDBL_REDIR_DECL
(
Çme
) \

399 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

400 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

401 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

402 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

403 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

406 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


407 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

408 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

409 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

410 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

411 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

412 #ifdeà
__REDIRECT


413 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

414 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

415 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

20 #iâdeà
_SYS_SYSMACROS_H


21 
	#_SYS_SYSMACROS_H
 1

	)

23 
	~<ã©u»s.h
>

28 #ifdeà
__GLIBC_HAVE_LONG_LONG


29 
__BEGIN_DECLS


31 
__ex‹nsiÚ__


32 
	$gnu_dev_majÜ
 (
__dev
)

33 
__THROW
 
__©Œibu‹_cÚ¡__
;

34 
__ex‹nsiÚ__


35 
	$gnu_dev_mšÜ
 (
__dev
)

36 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 
__ex‹nsiÚ__


38 
	$gnu_dev_makedev
 (
__majÜ
,

39 
__mšÜ
)

40 
__THROW
 
__©Œibu‹_cÚ¡__
;

42 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


43 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

44 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

46  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

47 
	}
}

49 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

50 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

52  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

53 
	}
}

55 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

56 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

58  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

59 | (((è(
__mšÜ
 & ~0xff)) << 12)

60 | (((è(
__majÜ
 & ~0xfff)) << 32));

61 
	}
}

63 
	g__END_DECLS


66 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

67 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

68 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/sys/ucontext.h

18 #iâdeà
_SYS_UCONTEXT_H


19 
	#_SYS_UCONTEXT_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sigÇl.h
>

26 
	~<b™s/sigcÚ‹xt.h
>

28 #ifdeà
__x86_64__


31 
__ex‹nsiÚ__
 
	tg»g_t
;

34 
	#NGREG
 23

	)

37 
g»g_t
 
	tg»g£t_t
[
NGREG
];

39 #ifdeà
__USE_GNU


43 
	mREG_R8
 = 0,

44 
	#REG_R8
 
REG_R8


	)

45 
	mREG_R9
,

46 
	#REG_R9
 
REG_R9


	)

47 
	mREG_R10
,

48 
	#REG_R10
 
REG_R10


	)

49 
	mREG_R11
,

50 
	#REG_R11
 
REG_R11


	)

51 
	mREG_R12
,

52 
	#REG_R12
 
REG_R12


	)

53 
	mREG_R13
,

54 
	#REG_R13
 
REG_R13


	)

55 
	mREG_R14
,

56 
	#REG_R14
 
REG_R14


	)

57 
	mREG_R15
,

58 
	#REG_R15
 
REG_R15


	)

59 
	mREG_RDI
,

60 
	#REG_RDI
 
REG_RDI


	)

61 
	mREG_RSI
,

62 
	#REG_RSI
 
REG_RSI


	)

63 
	mREG_RBP
,

64 
	#REG_RBP
 
REG_RBP


	)

65 
	mREG_RBX
,

66 
	#REG_RBX
 
REG_RBX


	)

67 
	mREG_RDX
,

68 
	#REG_RDX
 
REG_RDX


	)

69 
	mREG_RAX
,

70 
	#REG_RAX
 
REG_RAX


	)

71 
	mREG_RCX
,

72 
	#REG_RCX
 
REG_RCX


	)

73 
	mREG_RSP
,

74 
	#REG_RSP
 
REG_RSP


	)

75 
	mREG_RIP
,

76 
	#REG_RIP
 
REG_RIP


	)

77 
	mREG_EFL
,

78 
	#REG_EFL
 
REG_EFL


	)

79 
	mREG_CSGSFS
,

80 
	#REG_CSGSFS
 
REG_CSGSFS


	)

81 
	mREG_ERR
,

82 
	#REG_ERR
 
REG_ERR


	)

83 
	mREG_TRAPNO
,

84 
	#REG_TRAPNO
 
REG_TRAPNO


	)

85 
	mREG_OLDMASK
,

86 
	#REG_OLDMASK
 
REG_OLDMASK


	)

87 
	mREG_CR2


88 
	#REG_CR2
 
REG_CR2


	)

92 
	s_libc_åx»g


94 
	msignifiÿnd
[4];

95 
	mexpÚ’t
;

96 
	m·ddšg
[3];

99 
	s_libc_xmm»g


101 
__ušt32_t
 
	m–em’t
[4];

104 
	s_libc_å¡©e


107 
__ušt16_t
 
	mcwd
;

108 
__ušt16_t
 
	mswd
;

109 
__ušt16_t
 
	máw
;

110 
__ušt16_t
 
	mfİ
;

111 
__ušt64_t
 
	mr
;

112 
__ušt64_t
 
	mrdp
;

113 
__ušt32_t
 
	mmxc¤
;

114 
__ušt32_t
 
	mmxü_mask
;

115 
_libc_åx»g
 
	m_¡
[8];

116 
_libc_xmm»g
 
	m_xmm
[16];

117 
__ušt32_t
 
	m·ddšg
[24];

121 
_libc_å¡©e
 *
	tå»g£t_t
;

126 
g»g£t_t
 
	mg»gs
;

128 
å»g£t_t
 
	må»gs
;

129 
__ex‹nsiÚ__
 
	m__»£rved1
 [8];

130 } 
	tmcÚ‹xt_t
;

133 
	sucÚ‹xt


135 
	muc_æags
;

136 
ucÚ‹xt
 *
	muc_lšk
;

137 
¡ack_t
 
	muc_¡ack
;

138 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

139 
__sig£t_t
 
	muc_sigmask
;

140 
_libc_å¡©e
 
	m__å»gs_mem
;

141 } 
	tucÚ‹xt_t
;

146 
	tg»g_t
;

149 
	#NGREG
 19

	)

152 
g»g_t
 
	tg»g£t_t
[
NGREG
];

154 #ifdeà
__USE_GNU


158 
	mREG_GS
 = 0,

159 
	#REG_GS
 
REG_GS


	)

160 
	mREG_FS
,

161 
	#REG_FS
 
REG_FS


	)

162 
	mREG_ES
,

163 
	#REG_ES
 
REG_ES


	)

164 
	mREG_DS
,

165 
	#REG_DS
 
REG_DS


	)

166 
	mREG_EDI
,

167 
	#REG_EDI
 
REG_EDI


	)

168 
	mREG_ESI
,

169 
	#REG_ESI
 
REG_ESI


	)

170 
	mREG_EBP
,

171 
	#REG_EBP
 
REG_EBP


	)

172 
	mREG_ESP
,

173 
	#REG_ESP
 
REG_ESP


	)

174 
	mREG_EBX
,

175 
	#REG_EBX
 
REG_EBX


	)

176 
	mREG_EDX
,

177 
	#REG_EDX
 
REG_EDX


	)

178 
	mREG_ECX
,

179 
	#REG_ECX
 
REG_ECX


	)

180 
	mREG_EAX
,

181 
	#REG_EAX
 
REG_EAX


	)

182 
	mREG_TRAPNO
,

183 
	#REG_TRAPNO
 
REG_TRAPNO


	)

184 
	mREG_ERR
,

185 
	#REG_ERR
 
REG_ERR


	)

186 
	mREG_EIP
,

187 
	#REG_EIP
 
REG_EIP


	)

188 
	mREG_CS
,

189 
	#REG_CS
 
REG_CS


	)

190 
	mREG_EFL
,

191 
	#REG_EFL
 
REG_EFL


	)

192 
	mREG_UESP
,

193 
	#REG_UESP
 
REG_UESP


	)

194 
	mREG_SS


195 
	#REG_SS
 
REG_SS


	)

200 
	s_libc_å»g


202 
	msignifiÿnd
[4];

203 
	mexpÚ’t
;

206 
	s_libc_å¡©e


208 
	mcw
;

209 
	msw
;

210 
	mg
;

211 
	moff
;

212 
	mcs£l
;

213 
	md©aoff
;

214 
	md©a£l
;

215 
_libc_å»g
 
	m_¡
[8];

216 
	m¡©us
;

220 
_libc_å¡©e
 *
	tå»g£t_t
;

225 
g»g£t_t
 
	mg»gs
;

228 
å»g£t_t
 
	må»gs
;

229 
	mŞdmask
;

230 
	mü2
;

231 } 
	tmcÚ‹xt_t
;

234 
	sucÚ‹xt


236 
	muc_æags
;

237 
ucÚ‹xt
 *
	muc_lšk
;

238 
¡ack_t
 
	muc_¡ack
;

239 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

240 
__sig£t_t
 
	muc_sigmask
;

241 
_libc_å¡©e
 
	m__å»gs_mem
;

242 } 
	tucÚ‹xt_t
;

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/asm/socket.h

1 
	~<asm-g’”ic/sock‘.h
>

	@/usr/include/asm/unistd_32.h

1 #iâdeà
_ASM_X86_UNISTD_32_H


2 
	#_ASM_X86_UNISTD_32_H
 1

	)

4 
	#__NR_»¡¬t_sysÿÎ
 0

	)

5 
	#__NR_ex™
 1

	)

6 
	#__NR_fÜk
 2

	)

7 
	#__NR_»ad
 3

	)

8 
	#__NR_wr™e
 4

	)

9 
	#__NR_İ’
 5

	)

10 
	#__NR_şo£
 6

	)

11 
	#__NR_wa™pid
 7

	)

12 
	#__NR_ü—t
 8

	)

13 
	#__NR_lšk
 9

	)

14 
	#__NR_uÆšk
 10

	)

15 
	#__NR_execve
 11

	)

16 
	#__NR_chdœ
 12

	)

17 
	#__NR_time
 13

	)

18 
	#__NR_mknod
 14

	)

19 
	#__NR_chmod
 15

	)

20 
	#__NR_lchown
 16

	)

21 
	#__NR_b»ak
 17

	)

22 
	#__NR_Şd¡©
 18

	)

23 
	#__NR_l£ek
 19

	)

24 
	#__NR_g‘pid
 20

	)

25 
	#__NR_mouÁ
 21

	)

26 
	#__NR_umouÁ
 22

	)

27 
	#__NR_£tuid
 23

	)

28 
	#__NR_g‘uid
 24

	)

29 
	#__NR_¡ime
 25

	)

30 
	#__NR_±¿û
 26

	)

31 
	#__NR_®¬m
 27

	)

32 
	#__NR_Şdf¡©
 28

	)

33 
	#__NR_·u£
 29

	)

34 
	#__NR_utime
 30

	)

35 
	#__NR_¡ty
 31

	)

36 
	#__NR_g‰y
 32

	)

37 
	#__NR_acûss
 33

	)

38 
	#__NR_niû
 34

	)

39 
	#__NR_áime
 35

	)

40 
	#__NR_sync
 36

	)

41 
	#__NR_kl
 37

	)

42 
	#__NR_»Çme
 38

	)

43 
	#__NR_mkdœ
 39

	)

44 
	#__NR_rmdœ
 40

	)

45 
	#__NR_dup
 41

	)

46 
	#__NR_pe
 42

	)

47 
	#__NR_times
 43

	)

48 
	#__NR_´of
 44

	)

49 
	#__NR_brk
 45

	)

50 
	#__NR_£tgid
 46

	)

51 
	#__NR_g‘gid
 47

	)

52 
	#__NR_sigÇl
 48

	)

53 
	#__NR_g‘euid
 49

	)

54 
	#__NR_g‘egid
 50

	)

55 
	#__NR_acù
 51

	)

56 
	#__NR_umouÁ2
 52

	)

57 
	#__NR_lock
 53

	)

58 
	#__NR_ioùl
 54

	)

59 
	#__NR_fú
 55

	)

60 
	#__NR_mpx
 56

	)

61 
	#__NR_£gid
 57

	)

62 
	#__NR_ulim™
 58

	)

63 
	#__NR_ŞdŞduÇme
 59

	)

64 
	#__NR_umask
 60

	)

65 
	#__NR_chroÙ
 61

	)

66 
	#__NR_u¡©
 62

	)

67 
	#__NR_dup2
 63

	)

68 
	#__NR_g‘µid
 64

	)

69 
	#__NR_g‘pg½
 65

	)

70 
	#__NR_£tsid
 66

	)

71 
	#__NR_sigaùiÚ
 67

	)

72 
	#__NR_sg‘mask
 68

	)

73 
	#__NR_s£tmask
 69

	)

74 
	#__NR_£Œeuid
 70

	)

75 
	#__NR_£Œegid
 71

	)

76 
	#__NR_sigsu¥’d
 72

	)

77 
	#__NR_sig³ndšg
 73

	)

78 
	#__NR_£tho¡Çme
 74

	)

79 
	#__NR_£Œlim™
 75

	)

80 
	#__NR_g‘¾im™
 76

	)

81 
	#__NR_g‘ru§ge
 77

	)

82 
	#__NR_g‘timeofday
 78

	)

83 
	#__NR_£‰imeofday
 79

	)

84 
	#__NR_g‘groups
 80

	)

85 
	#__NR_£tgroups
 81

	)

86 
	#__NR_£Ëù
 82

	)

87 
	#__NR_symlšk
 83

	)

88 
	#__NR_Şdl¡©
 84

	)

89 
	#__NR_»adlšk
 85

	)

90 
	#__NR_u£lib
 86

	)

91 
	#__NR_sw­Ú
 87

	)

92 
	#__NR_»boÙ
 88

	)

93 
	#__NR_»addœ
 89

	)

94 
	#__NR_mm­
 90

	)

95 
	#__NR_munm­
 91

	)

96 
	#__NR_Œunÿ‹
 92

	)

97 
	#__NR_árunÿ‹
 93

	)

98 
	#__NR_fchmod
 94

	)

99 
	#__NR_fchown
 95

	)

100 
	#__NR_g‘´iÜ™y
 96

	)

101 
	#__NR_£riÜ™y
 97

	)

102 
	#__NR_´of
 98

	)

103 
	#__NR_¡©fs
 99

	)

104 
	#__NR_f¡©fs
 100

	)

105 
	#__NR_iİ”m
 101

	)

106 
	#__NR_sock‘ÿÎ
 102

	)

107 
	#__NR_sy¦og
 103

	)

108 
	#__NR_£t™im”
 104

	)

109 
	#__NR_g‘™im”
 105

	)

110 
	#__NR_¡©
 106

	)

111 
	#__NR_l¡©
 107

	)

112 
	#__NR_f¡©
 108

	)

113 
	#__NR_ŞduÇme
 109

	)

114 
	#__NR_iİl
 110

	)

115 
	#__NR_vhªgup
 111

	)

116 
	#__NR_idË
 112

	)

117 
	#__NR_vm86Şd
 113

	)

118 
	#__NR_wa™4
 114

	)

119 
	#__NR_sw­off
 115

	)

120 
	#__NR_sysšfo
 116

	)

121 
	#__NR_c
 117

	)

122 
	#__NR_fsync
 118

	)

123 
	#__NR_sig»tuº
 119

	)

124 
	#__NR_şÚe
 120

	)

125 
	#__NR_£tdomašÇme
 121

	)

126 
	#__NR_uÇme
 122

	)

127 
	#__NR_modify_ldt
 123

	)

128 
	#__NR_adjtimex
 124

	)

129 
	#__NR_m´Ùeù
 125

	)

130 
	#__NR_sig´ocmask
 126

	)

131 
	#__NR_ü—‹_moduË
 127

	)

132 
	#__NR_š™_moduË
 128

	)

133 
	#__NR_d–‘e_moduË
 129

	)

134 
	#__NR_g‘_k”Ãl_syms
 130

	)

135 
	#__NR_quÙaùl
 131

	)

136 
	#__NR_g‘pgid
 132

	)

137 
	#__NR_fchdœ
 133

	)

138 
	#__NR_bdæush
 134

	)

139 
	#__NR_sysfs
 135

	)

140 
	#__NR_³rsÚ®™y
 136

	)

141 
	#__NR_afs_sysÿÎ
 137

	)

142 
	#__NR_£tfsuid
 138

	)

143 
	#__NR_£tfsgid
 139

	)

144 
	#__NR__Î£ek
 140

	)

145 
	#__NR_g‘d’ts
 141

	)

146 
	#__NR__Ãw£Ëù
 142

	)

147 
	#__NR_æock
 143

	)

148 
	#__NR_msync
 144

	)

149 
	#__NR_»adv
 145

	)

150 
	#__NR_wr™ev
 146

	)

151 
	#__NR_g‘sid
 147

	)

152 
	#__NR_fd©async
 148

	)

153 
	#__NR__sysùl
 149

	)

154 
	#__NR_mlock
 150

	)

155 
	#__NR_muÆock
 151

	)

156 
	#__NR_mlock®l
 152

	)

157 
	#__NR_muÆock®l
 153

	)

158 
	#__NR_sched_£¬am
 154

	)

159 
	#__NR_sched_g‘·¿m
 155

	)

160 
	#__NR_sched_£tscheduËr
 156

	)

161 
	#__NR_sched_g‘scheduËr
 157

	)

162 
	#__NR_sched_y›ld
 158

	)

163 
	#__NR_sched_g‘_´iÜ™y_max
 159

	)

164 
	#__NR_sched_g‘_´iÜ™y_mš
 160

	)

165 
	#__NR_sched_¼_g‘_š‹rv®
 161

	)

166 
	#__NR_Çno¦“p
 162

	)

167 
	#__NR_m»m­
 163

	)

168 
	#__NR_£Œesuid
 164

	)

169 
	#__NR_g‘»suid
 165

	)

170 
	#__NR_vm86
 166

	)

171 
	#__NR_qu”y_moduË
 167

	)

172 
	#__NR_pŞl
 168

	)

173 
	#__NR_nfs£rvùl
 169

	)

174 
	#__NR_£Œesgid
 170

	)

175 
	#__NR_g‘»sgid
 171

	)

176 
	#__NR_´ùl
 172

	)

177 
	#__NR_¹_sig»tuº
 173

	)

178 
	#__NR_¹_sigaùiÚ
 174

	)

179 
	#__NR_¹_sig´ocmask
 175

	)

180 
	#__NR_¹_sig³ndšg
 176

	)

181 
	#__NR_¹_sigtimedwa™
 177

	)

182 
	#__NR_¹_sigqueuešfo
 178

	)

183 
	#__NR_¹_sigsu¥’d
 179

	)

184 
	#__NR_´—d64
 180

	)

185 
	#__NR_pwr™e64
 181

	)

186 
	#__NR_chown
 182

	)

187 
	#__NR_g‘cwd
 183

	)

188 
	#__NR_ÿpg‘
 184

	)

189 
	#__NR_ÿp£t
 185

	)

190 
	#__NR_sig®t¡ack
 186

	)

191 
	#__NR_£ndfe
 187

	)

192 
	#__NR_g‘pmsg
 188

	)

193 
	#__NR_pumsg
 189

	)

194 
	#__NR_vfÜk
 190

	)

195 
	#__NR_ug‘¾im™
 191

	)

196 
	#__NR_mm­2
 192

	)

197 
	#__NR_Œunÿ‹64
 193

	)

198 
	#__NR_árunÿ‹64
 194

	)

199 
	#__NR_¡©64
 195

	)

200 
	#__NR_l¡©64
 196

	)

201 
	#__NR_f¡©64
 197

	)

202 
	#__NR_lchown32
 198

	)

203 
	#__NR_g‘uid32
 199

	)

204 
	#__NR_g‘gid32
 200

	)

205 
	#__NR_g‘euid32
 201

	)

206 
	#__NR_g‘egid32
 202

	)

207 
	#__NR_£Œeuid32
 203

	)

208 
	#__NR_£Œegid32
 204

	)

209 
	#__NR_g‘groups32
 205

	)

210 
	#__NR_£tgroups32
 206

	)

211 
	#__NR_fchown32
 207

	)

212 
	#__NR_£Œesuid32
 208

	)

213 
	#__NR_g‘»suid32
 209

	)

214 
	#__NR_£Œesgid32
 210

	)

215 
	#__NR_g‘»sgid32
 211

	)

216 
	#__NR_chown32
 212

	)

217 
	#__NR_£tuid32
 213

	)

218 
	#__NR_£tgid32
 214

	)

219 
	#__NR_£tfsuid32
 215

	)

220 
	#__NR_£tfsgid32
 216

	)

221 
	#__NR_pivÙ_roÙ
 217

	)

222 
	#__NR_mšcÜe
 218

	)

223 
	#__NR_madvi£
 219

	)

224 
	#__NR_g‘d’ts64
 220

	)

225 
	#__NR_fú64
 221

	)

226 
	#__NR_g‘tid
 224

	)

227 
	#__NR_»adah—d
 225

	)

228 
	#__NR_£tx©Œ
 226

	)

229 
	#__NR_l£tx©Œ
 227

	)

230 
	#__NR_f£tx©Œ
 228

	)

231 
	#__NR_g‘x©Œ
 229

	)

232 
	#__NR_lg‘x©Œ
 230

	)

233 
	#__NR_fg‘x©Œ
 231

	)

234 
	#__NR_li¡x©Œ
 232

	)

235 
	#__NR_Îi¡x©Œ
 233

	)

236 
	#__NR_æi¡x©Œ
 234

	)

237 
	#__NR_»movex©Œ
 235

	)

238 
	#__NR_Ìemovex©Œ
 236

	)

239 
	#__NR_äemovex©Œ
 237

	)

240 
	#__NR_tkl
 238

	)

241 
	#__NR_£ndfe64
 239

	)

242 
	#__NR_fu‹x
 240

	)

243 
	#__NR_sched_£ffš™y
 241

	)

244 
	#__NR_sched_g‘affš™y
 242

	)

245 
	#__NR_£t_th»ad_¬—
 243

	)

246 
	#__NR_g‘_th»ad_¬—
 244

	)

247 
	#__NR_io_£tup
 245

	)

248 
	#__NR_io_de¡roy
 246

	)

249 
	#__NR_io_g‘ev’ts
 247

	)

250 
	#__NR_io_subm™
 248

	)

251 
	#__NR_io_ÿnûl
 249

	)

252 
	#__NR_çdvi£64
 250

	)

253 
	#__NR_ex™_group
 252

	)

254 
	#__NR_lookup_dcook›
 253

	)

255 
	#__NR_•Şl_ü—‹
 254

	)

256 
	#__NR_•Şl_ùl
 255

	)

257 
	#__NR_•Şl_wa™
 256

	)

258 
	#__NR_»m­_fe_·ges
 257

	)

259 
	#__NR_£t_tid_add»ss
 258

	)

260 
	#__NR_tim”_ü—‹
 259

	)

261 
	#__NR_tim”_£‰ime
 260

	)

262 
	#__NR_tim”_g‘time
 261

	)

263 
	#__NR_tim”_g‘ov”run
 262

	)

264 
	#__NR_tim”_d–‘e
 263

	)

265 
	#__NR_şock_£‰ime
 264

	)

266 
	#__NR_şock_g‘time
 265

	)

267 
	#__NR_şock_g‘»s
 266

	)

268 
	#__NR_şock_Çno¦“p
 267

	)

269 
	#__NR_¡©fs64
 268

	)

270 
	#__NR_f¡©fs64
 269

	)

271 
	#__NR_tgkl
 270

	)

272 
	#__NR_utimes
 271

	)

273 
	#__NR_çdvi£64_64
 272

	)

274 
	#__NR_v£rv”
 273

	)

275 
	#__NR_mbšd
 274

	)

276 
	#__NR_g‘_mempŞicy
 275

	)

277 
	#__NR_£t_mempŞicy
 276

	)

278 
	#__NR_mq_İ’
 277

	)

279 
	#__NR_mq_uÆšk
 278

	)

280 
	#__NR_mq_timed£nd
 279

	)

281 
	#__NR_mq_timed»ûive
 280

	)

282 
	#__NR_mq_nÙify
 281

	)

283 
	#__NR_mq_g‘£‰r
 282

	)

284 
	#__NR_kexec_lßd
 283

	)

285 
	#__NR_wa™id
 284

	)

286 
	#__NR_add_key
 286

	)

287 
	#__NR_»que¡_key
 287

	)

288 
	#__NR_keyùl
 288

	)

289 
	#__NR_iİrio_£t
 289

	)

290 
	#__NR_iİrio_g‘
 290

	)

291 
	#__NR_šÙify_š™
 291

	)

292 
	#__NR_šÙify_add_w©ch
 292

	)

293 
	#__NR_šÙify_rm_w©ch
 293

	)

294 
	#__NR_mig¿‹_·ges
 294

	)

295 
	#__NR_İ’©
 295

	)

296 
	#__NR_mkdœ©
 296

	)

297 
	#__NR_mknod©
 297

	)

298 
	#__NR_fchowÇt
 298

	)

299 
	#__NR_futime§t
 299

	)

300 
	#__NR_f¡©©64
 300

	)

301 
	#__NR_uÆšk©
 301

	)

302 
	#__NR_»Çm—t
 302

	)

303 
	#__NR_lšk©
 303

	)

304 
	#__NR_symlšk©
 304

	)

305 
	#__NR_»adlšk©
 305

	)

306 
	#__NR_fchmod©
 306

	)

307 
	#__NR_çcûs§t
 307

	)

308 
	#__NR_p£Ëù6
 308

	)

309 
	#__NR_µŞl
 309

	)

310 
	#__NR_unsh¬e
 310

	)

311 
	#__NR_£t_robu¡_li¡
 311

	)

312 
	#__NR_g‘_robu¡_li¡
 312

	)

313 
	#__NR_¥liû
 313

	)

314 
	#__NR_sync_fe_¿nge
 314

	)

315 
	#__NR_‹e
 315

	)

316 
	#__NR_vm¥liû
 316

	)

317 
	#__NR_move_·ges
 317

	)

318 
	#__NR_g‘ıu
 318

	)

319 
	#__NR_•Şl_pwa™
 319

	)

320 
	#__NR_utim’§t
 320

	)

321 
	#__NR_sigÇlfd
 321

	)

322 
	#__NR_tim”fd_ü—‹
 322

	)

323 
	#__NR_ev’tfd
 323

	)

324 
	#__NR_çÎoÿ‹
 324

	)

325 
	#__NR_tim”fd_£‰ime
 325

	)

326 
	#__NR_tim”fd_g‘time
 326

	)

327 
	#__NR_sigÇlfd4
 327

	)

328 
	#__NR_ev’tfd2
 328

	)

329 
	#__NR_•Şl_ü—‹1
 329

	)

330 
	#__NR_dup3
 330

	)

331 
	#__NR_pe2
 331

	)

332 
	#__NR_šÙify_š™1
 332

	)

333 
	#__NR_´—dv
 333

	)

334 
	#__NR_pwr™ev
 334

	)

335 
	#__NR_¹_tgsigqueuešfo
 335

	)

336 
	#__NR_³rf_ev’t_İ’
 336

	)

337 
	#__NR_»cvmmsg
 337

	)

338 
	#__NR_çnÙify_š™
 338

	)

339 
	#__NR_çnÙify_m¬k
 339

	)

340 
	#__NR_´lim™64
 340

	)

341 
	#__NR_Çme_to_hªdË_©
 341

	)

342 
	#__NR_İ’_by_hªdË_©
 342

	)

343 
	#__NR_şock_adjtime
 343

	)

344 
	#__NR_syncfs
 344

	)

345 
	#__NR_£ndmmsg
 345

	)

346 
	#__NR_£Šs
 346

	)

347 
	#__NR_´oûss_vm_»adv
 347

	)

348 
	#__NR_´oûss_vm_wr™ev
 348

	)

349 
	#__NR_kcmp
 349

	)

350 
	#__NR_fš™_moduË
 350

	)

	@/usr/include/asm/unistd_64.h

1 #iâdeà
_ASM_X86_UNISTD_64_H


2 
	#_ASM_X86_UNISTD_64_H
 1

	)

4 
	#__NR_»ad
 0

	)

5 
	#__NR_wr™e
 1

	)

6 
	#__NR_İ’
 2

	)

7 
	#__NR_şo£
 3

	)

8 
	#__NR_¡©
 4

	)

9 
	#__NR_f¡©
 5

	)

10 
	#__NR_l¡©
 6

	)

11 
	#__NR_pŞl
 7

	)

12 
	#__NR_l£ek
 8

	)

13 
	#__NR_mm­
 9

	)

14 
	#__NR_m´Ùeù
 10

	)

15 
	#__NR_munm­
 11

	)

16 
	#__NR_brk
 12

	)

17 
	#__NR_¹_sigaùiÚ
 13

	)

18 
	#__NR_¹_sig´ocmask
 14

	)

19 
	#__NR_¹_sig»tuº
 15

	)

20 
	#__NR_ioùl
 16

	)

21 
	#__NR_´—d64
 17

	)

22 
	#__NR_pwr™e64
 18

	)

23 
	#__NR_»adv
 19

	)

24 
	#__NR_wr™ev
 20

	)

25 
	#__NR_acûss
 21

	)

26 
	#__NR_pe
 22

	)

27 
	#__NR_£Ëù
 23

	)

28 
	#__NR_sched_y›ld
 24

	)

29 
	#__NR_m»m­
 25

	)

30 
	#__NR_msync
 26

	)

31 
	#__NR_mšcÜe
 27

	)

32 
	#__NR_madvi£
 28

	)

33 
	#__NR_shmg‘
 29

	)

34 
	#__NR_shm©
 30

	)

35 
	#__NR_shmùl
 31

	)

36 
	#__NR_dup
 32

	)

37 
	#__NR_dup2
 33

	)

38 
	#__NR_·u£
 34

	)

39 
	#__NR_Çno¦“p
 35

	)

40 
	#__NR_g‘™im”
 36

	)

41 
	#__NR_®¬m
 37

	)

42 
	#__NR_£t™im”
 38

	)

43 
	#__NR_g‘pid
 39

	)

44 
	#__NR_£ndfe
 40

	)

45 
	#__NR_sock‘
 41

	)

46 
	#__NR_cÚÃù
 42

	)

47 
	#__NR_acû±
 43

	)

48 
	#__NR_£ndto
 44

	)

49 
	#__NR_»cväom
 45

	)

50 
	#__NR_£ndmsg
 46

	)

51 
	#__NR_»cvmsg
 47

	)

52 
	#__NR_shutdown
 48

	)

53 
	#__NR_bšd
 49

	)

54 
	#__NR_li¡’
 50

	)

55 
	#__NR_g‘sockÇme
 51

	)

56 
	#__NR_g‘³”Çme
 52

	)

57 
	#__NR_sock‘·œ
 53

	)

58 
	#__NR_£tsockİt
 54

	)

59 
	#__NR_g‘sockİt
 55

	)

60 
	#__NR_şÚe
 56

	)

61 
	#__NR_fÜk
 57

	)

62 
	#__NR_vfÜk
 58

	)

63 
	#__NR_execve
 59

	)

64 
	#__NR_ex™
 60

	)

65 
	#__NR_wa™4
 61

	)

66 
	#__NR_kl
 62

	)

67 
	#__NR_uÇme
 63

	)

68 
	#__NR_£mg‘
 64

	)

69 
	#__NR_£mİ
 65

	)

70 
	#__NR_£mùl
 66

	)

71 
	#__NR_shmdt
 67

	)

72 
	#__NR_msgg‘
 68

	)

73 
	#__NR_msg¢d
 69

	)

74 
	#__NR_msgrcv
 70

	)

75 
	#__NR_msgùl
 71

	)

76 
	#__NR_fú
 72

	)

77 
	#__NR_æock
 73

	)

78 
	#__NR_fsync
 74

	)

79 
	#__NR_fd©async
 75

	)

80 
	#__NR_Œunÿ‹
 76

	)

81 
	#__NR_árunÿ‹
 77

	)

82 
	#__NR_g‘d’ts
 78

	)

83 
	#__NR_g‘cwd
 79

	)

84 
	#__NR_chdœ
 80

	)

85 
	#__NR_fchdœ
 81

	)

86 
	#__NR_»Çme
 82

	)

87 
	#__NR_mkdœ
 83

	)

88 
	#__NR_rmdœ
 84

	)

89 
	#__NR_ü—t
 85

	)

90 
	#__NR_lšk
 86

	)

91 
	#__NR_uÆšk
 87

	)

92 
	#__NR_symlšk
 88

	)

93 
	#__NR_»adlšk
 89

	)

94 
	#__NR_chmod
 90

	)

95 
	#__NR_fchmod
 91

	)

96 
	#__NR_chown
 92

	)

97 
	#__NR_fchown
 93

	)

98 
	#__NR_lchown
 94

	)

99 
	#__NR_umask
 95

	)

100 
	#__NR_g‘timeofday
 96

	)

101 
	#__NR_g‘¾im™
 97

	)

102 
	#__NR_g‘ru§ge
 98

	)

103 
	#__NR_sysšfo
 99

	)

104 
	#__NR_times
 100

	)

105 
	#__NR_±¿û
 101

	)

106 
	#__NR_g‘uid
 102

	)

107 
	#__NR_sy¦og
 103

	)

108 
	#__NR_g‘gid
 104

	)

109 
	#__NR_£tuid
 105

	)

110 
	#__NR_£tgid
 106

	)

111 
	#__NR_g‘euid
 107

	)

112 
	#__NR_g‘egid
 108

	)

113 
	#__NR_£gid
 109

	)

114 
	#__NR_g‘µid
 110

	)

115 
	#__NR_g‘pg½
 111

	)

116 
	#__NR_£tsid
 112

	)

117 
	#__NR_£Œeuid
 113

	)

118 
	#__NR_£Œegid
 114

	)

119 
	#__NR_g‘groups
 115

	)

120 
	#__NR_£tgroups
 116

	)

121 
	#__NR_£Œesuid
 117

	)

122 
	#__NR_g‘»suid
 118

	)

123 
	#__NR_£Œesgid
 119

	)

124 
	#__NR_g‘»sgid
 120

	)

125 
	#__NR_g‘pgid
 121

	)

126 
	#__NR_£tfsuid
 122

	)

127 
	#__NR_£tfsgid
 123

	)

128 
	#__NR_g‘sid
 124

	)

129 
	#__NR_ÿpg‘
 125

	)

130 
	#__NR_ÿp£t
 126

	)

131 
	#__NR_¹_sig³ndšg
 127

	)

132 
	#__NR_¹_sigtimedwa™
 128

	)

133 
	#__NR_¹_sigqueuešfo
 129

	)

134 
	#__NR_¹_sigsu¥’d
 130

	)

135 
	#__NR_sig®t¡ack
 131

	)

136 
	#__NR_utime
 132

	)

137 
	#__NR_mknod
 133

	)

138 
	#__NR_u£lib
 134

	)

139 
	#__NR_³rsÚ®™y
 135

	)

140 
	#__NR_u¡©
 136

	)

141 
	#__NR_¡©fs
 137

	)

142 
	#__NR_f¡©fs
 138

	)

143 
	#__NR_sysfs
 139

	)

144 
	#__NR_g‘´iÜ™y
 140

	)

145 
	#__NR_£riÜ™y
 141

	)

146 
	#__NR_sched_£¬am
 142

	)

147 
	#__NR_sched_g‘·¿m
 143

	)

148 
	#__NR_sched_£tscheduËr
 144

	)

149 
	#__NR_sched_g‘scheduËr
 145

	)

150 
	#__NR_sched_g‘_´iÜ™y_max
 146

	)

151 
	#__NR_sched_g‘_´iÜ™y_mš
 147

	)

152 
	#__NR_sched_¼_g‘_š‹rv®
 148

	)

153 
	#__NR_mlock
 149

	)

154 
	#__NR_muÆock
 150

	)

155 
	#__NR_mlock®l
 151

	)

156 
	#__NR_muÆock®l
 152

	)

157 
	#__NR_vhªgup
 153

	)

158 
	#__NR_modify_ldt
 154

	)

159 
	#__NR_pivÙ_roÙ
 155

	)

160 
	#__NR__sysùl
 156

	)

161 
	#__NR_´ùl
 157

	)

162 
	#__NR_¬ch_´ùl
 158

	)

163 
	#__NR_adjtimex
 159

	)

164 
	#__NR_£Œlim™
 160

	)

165 
	#__NR_chroÙ
 161

	)

166 
	#__NR_sync
 162

	)

167 
	#__NR_acù
 163

	)

168 
	#__NR_£‰imeofday
 164

	)

169 
	#__NR_mouÁ
 165

	)

170 
	#__NR_umouÁ2
 166

	)

171 
	#__NR_sw­Ú
 167

	)

172 
	#__NR_sw­off
 168

	)

173 
	#__NR_»boÙ
 169

	)

174 
	#__NR_£tho¡Çme
 170

	)

175 
	#__NR_£tdomašÇme
 171

	)

176 
	#__NR_iİl
 172

	)

177 
	#__NR_iİ”m
 173

	)

178 
	#__NR_ü—‹_moduË
 174

	)

179 
	#__NR_š™_moduË
 175

	)

180 
	#__NR_d–‘e_moduË
 176

	)

181 
	#__NR_g‘_k”Ãl_syms
 177

	)

182 
	#__NR_qu”y_moduË
 178

	)

183 
	#__NR_quÙaùl
 179

	)

184 
	#__NR_nfs£rvùl
 180

	)

185 
	#__NR_g‘pmsg
 181

	)

186 
	#__NR_pumsg
 182

	)

187 
	#__NR_afs_sysÿÎ
 183

	)

188 
	#__NR_tuxÿÎ
 184

	)

189 
	#__NR_£cur™y
 185

	)

190 
	#__NR_g‘tid
 186

	)

191 
	#__NR_»adah—d
 187

	)

192 
	#__NR_£tx©Œ
 188

	)

193 
	#__NR_l£tx©Œ
 189

	)

194 
	#__NR_f£tx©Œ
 190

	)

195 
	#__NR_g‘x©Œ
 191

	)

196 
	#__NR_lg‘x©Œ
 192

	)

197 
	#__NR_fg‘x©Œ
 193

	)

198 
	#__NR_li¡x©Œ
 194

	)

199 
	#__NR_Îi¡x©Œ
 195

	)

200 
	#__NR_æi¡x©Œ
 196

	)

201 
	#__NR_»movex©Œ
 197

	)

202 
	#__NR_Ìemovex©Œ
 198

	)

203 
	#__NR_äemovex©Œ
 199

	)

204 
	#__NR_tkl
 200

	)

205 
	#__NR_time
 201

	)

206 
	#__NR_fu‹x
 202

	)

207 
	#__NR_sched_£ffš™y
 203

	)

208 
	#__NR_sched_g‘affš™y
 204

	)

209 
	#__NR_£t_th»ad_¬—
 205

	)

210 
	#__NR_io_£tup
 206

	)

211 
	#__NR_io_de¡roy
 207

	)

212 
	#__NR_io_g‘ev’ts
 208

	)

213 
	#__NR_io_subm™
 209

	)

214 
	#__NR_io_ÿnûl
 210

	)

215 
	#__NR_g‘_th»ad_¬—
 211

	)

216 
	#__NR_lookup_dcook›
 212

	)

217 
	#__NR_•Şl_ü—‹
 213

	)

218 
	#__NR_•Şl_ùl_Şd
 214

	)

219 
	#__NR_•Şl_wa™_Şd
 215

	)

220 
	#__NR_»m­_fe_·ges
 216

	)

221 
	#__NR_g‘d’ts64
 217

	)

222 
	#__NR_£t_tid_add»ss
 218

	)

223 
	#__NR_»¡¬t_sysÿÎ
 219

	)

224 
	#__NR_£mtimedİ
 220

	)

225 
	#__NR_çdvi£64
 221

	)

226 
	#__NR_tim”_ü—‹
 222

	)

227 
	#__NR_tim”_£‰ime
 223

	)

228 
	#__NR_tim”_g‘time
 224

	)

229 
	#__NR_tim”_g‘ov”run
 225

	)

230 
	#__NR_tim”_d–‘e
 226

	)

231 
	#__NR_şock_£‰ime
 227

	)

232 
	#__NR_şock_g‘time
 228

	)

233 
	#__NR_şock_g‘»s
 229

	)

234 
	#__NR_şock_Çno¦“p
 230

	)

235 
	#__NR_ex™_group
 231

	)

236 
	#__NR_•Şl_wa™
 232

	)

237 
	#__NR_•Şl_ùl
 233

	)

238 
	#__NR_tgkl
 234

	)

239 
	#__NR_utimes
 235

	)

240 
	#__NR_v£rv”
 236

	)

241 
	#__NR_mbšd
 237

	)

242 
	#__NR_£t_mempŞicy
 238

	)

243 
	#__NR_g‘_mempŞicy
 239

	)

244 
	#__NR_mq_İ’
 240

	)

245 
	#__NR_mq_uÆšk
 241

	)

246 
	#__NR_mq_timed£nd
 242

	)

247 
	#__NR_mq_timed»ûive
 243

	)

248 
	#__NR_mq_nÙify
 244

	)

249 
	#__NR_mq_g‘£‰r
 245

	)

250 
	#__NR_kexec_lßd
 246

	)

251 
	#__NR_wa™id
 247

	)

252 
	#__NR_add_key
 248

	)

253 
	#__NR_»que¡_key
 249

	)

254 
	#__NR_keyùl
 250

	)

255 
	#__NR_iİrio_£t
 251

	)

256 
	#__NR_iİrio_g‘
 252

	)

257 
	#__NR_šÙify_š™
 253

	)

258 
	#__NR_šÙify_add_w©ch
 254

	)

259 
	#__NR_šÙify_rm_w©ch
 255

	)

260 
	#__NR_mig¿‹_·ges
 256

	)

261 
	#__NR_İ’©
 257

	)

262 
	#__NR_mkdœ©
 258

	)

263 
	#__NR_mknod©
 259

	)

264 
	#__NR_fchowÇt
 260

	)

265 
	#__NR_futime§t
 261

	)

266 
	#__NR_Ãwf¡©©
 262

	)

267 
	#__NR_uÆšk©
 263

	)

268 
	#__NR_»Çm—t
 264

	)

269 
	#__NR_lšk©
 265

	)

270 
	#__NR_symlšk©
 266

	)

271 
	#__NR_»adlšk©
 267

	)

272 
	#__NR_fchmod©
 268

	)

273 
	#__NR_çcûs§t
 269

	)

274 
	#__NR_p£Ëù6
 270

	)

275 
	#__NR_µŞl
 271

	)

276 
	#__NR_unsh¬e
 272

	)

277 
	#__NR_£t_robu¡_li¡
 273

	)

278 
	#__NR_g‘_robu¡_li¡
 274

	)

279 
	#__NR_¥liû
 275

	)

280 
	#__NR_‹e
 276

	)

281 
	#__NR_sync_fe_¿nge
 277

	)

282 
	#__NR_vm¥liû
 278

	)

283 
	#__NR_move_·ges
 279

	)

284 
	#__NR_utim’§t
 280

	)

285 
	#__NR_•Şl_pwa™
 281

	)

286 
	#__NR_sigÇlfd
 282

	)

287 
	#__NR_tim”fd_ü—‹
 283

	)

288 
	#__NR_ev’tfd
 284

	)

289 
	#__NR_çÎoÿ‹
 285

	)

290 
	#__NR_tim”fd_£‰ime
 286

	)

291 
	#__NR_tim”fd_g‘time
 287

	)

292 
	#__NR_acû±4
 288

	)

293 
	#__NR_sigÇlfd4
 289

	)

294 
	#__NR_ev’tfd2
 290

	)

295 
	#__NR_•Şl_ü—‹1
 291

	)

296 
	#__NR_dup3
 292

	)

297 
	#__NR_pe2
 293

	)

298 
	#__NR_šÙify_š™1
 294

	)

299 
	#__NR_´—dv
 295

	)

300 
	#__NR_pwr™ev
 296

	)

301 
	#__NR_¹_tgsigqueuešfo
 297

	)

302 
	#__NR_³rf_ev’t_İ’
 298

	)

303 
	#__NR_»cvmmsg
 299

	)

304 
	#__NR_çnÙify_š™
 300

	)

305 
	#__NR_çnÙify_m¬k
 301

	)

306 
	#__NR_´lim™64
 302

	)

307 
	#__NR_Çme_to_hªdË_©
 303

	)

308 
	#__NR_İ’_by_hªdË_©
 304

	)

309 
	#__NR_şock_adjtime
 305

	)

310 
	#__NR_syncfs
 306

	)

311 
	#__NR_£ndmmsg
 307

	)

312 
	#__NR_£Šs
 308

	)

313 
	#__NR_g‘ıu
 309

	)

314 
	#__NR_´oûss_vm_»adv
 310

	)

315 
	#__NR_´oûss_vm_wr™ev
 311

	)

316 
	#__NR_kcmp
 312

	)

317 
	#__NR_fš™_moduË
 313

	)

	@/usr/include/asm/unistd_x32.h

1 #iâdeà
_ASM_X86_UNISTD_X32_H


2 
	#_ASM_X86_UNISTD_X32_H
 1

	)

4 
	#__NR_»ad
 (
__X32_SYSCALL_BIT
 + 0)

	)

5 
	#__NR_wr™e
 (
__X32_SYSCALL_BIT
 + 1)

	)

6 
	#__NR_İ’
 (
__X32_SYSCALL_BIT
 + 2)

	)

7 
	#__NR_şo£
 (
__X32_SYSCALL_BIT
 + 3)

	)

8 
	#__NR_¡©
 (
__X32_SYSCALL_BIT
 + 4)

	)

9 
	#__NR_f¡©
 (
__X32_SYSCALL_BIT
 + 5)

	)

10 
	#__NR_l¡©
 (
__X32_SYSCALL_BIT
 + 6)

	)

11 
	#__NR_pŞl
 (
__X32_SYSCALL_BIT
 + 7)

	)

12 
	#__NR_l£ek
 (
__X32_SYSCALL_BIT
 + 8)

	)

13 
	#__NR_mm­
 (
__X32_SYSCALL_BIT
 + 9)

	)

14 
	#__NR_m´Ùeù
 (
__X32_SYSCALL_BIT
 + 10)

	)

15 
	#__NR_munm­
 (
__X32_SYSCALL_BIT
 + 11)

	)

16 
	#__NR_brk
 (
__X32_SYSCALL_BIT
 + 12)

	)

17 
	#__NR_¹_sig´ocmask
 (
__X32_SYSCALL_BIT
 + 14)

	)

18 
	#__NR_´—d64
 (
__X32_SYSCALL_BIT
 + 17)

	)

19 
	#__NR_pwr™e64
 (
__X32_SYSCALL_BIT
 + 18)

	)

20 
	#__NR_acûss
 (
__X32_SYSCALL_BIT
 + 21)

	)

21 
	#__NR_pe
 (
__X32_SYSCALL_BIT
 + 22)

	)

22 
	#__NR_£Ëù
 (
__X32_SYSCALL_BIT
 + 23)

	)

23 
	#__NR_sched_y›ld
 (
__X32_SYSCALL_BIT
 + 24)

	)

24 
	#__NR_m»m­
 (
__X32_SYSCALL_BIT
 + 25)

	)

25 
	#__NR_msync
 (
__X32_SYSCALL_BIT
 + 26)

	)

26 
	#__NR_mšcÜe
 (
__X32_SYSCALL_BIT
 + 27)

	)

27 
	#__NR_madvi£
 (
__X32_SYSCALL_BIT
 + 28)

	)

28 
	#__NR_shmg‘
 (
__X32_SYSCALL_BIT
 + 29)

	)

29 
	#__NR_shm©
 (
__X32_SYSCALL_BIT
 + 30)

	)

30 
	#__NR_shmùl
 (
__X32_SYSCALL_BIT
 + 31)

	)

31 
	#__NR_dup
 (
__X32_SYSCALL_BIT
 + 32)

	)

32 
	#__NR_dup2
 (
__X32_SYSCALL_BIT
 + 33)

	)

33 
	#__NR_·u£
 (
__X32_SYSCALL_BIT
 + 34)

	)

34 
	#__NR_Çno¦“p
 (
__X32_SYSCALL_BIT
 + 35)

	)

35 
	#__NR_g‘™im”
 (
__X32_SYSCALL_BIT
 + 36)

	)

36 
	#__NR_®¬m
 (
__X32_SYSCALL_BIT
 + 37)

	)

37 
	#__NR_£t™im”
 (
__X32_SYSCALL_BIT
 + 38)

	)

38 
	#__NR_g‘pid
 (
__X32_SYSCALL_BIT
 + 39)

	)

39 
	#__NR_£ndfe
 (
__X32_SYSCALL_BIT
 + 40)

	)

40 
	#__NR_sock‘
 (
__X32_SYSCALL_BIT
 + 41)

	)

41 
	#__NR_cÚÃù
 (
__X32_SYSCALL_BIT
 + 42)

	)

42 
	#__NR_acû±
 (
__X32_SYSCALL_BIT
 + 43)

	)

43 
	#__NR_£ndto
 (
__X32_SYSCALL_BIT
 + 44)

	)

44 
	#__NR_shutdown
 (
__X32_SYSCALL_BIT
 + 48)

	)

45 
	#__NR_bšd
 (
__X32_SYSCALL_BIT
 + 49)

	)

46 
	#__NR_li¡’
 (
__X32_SYSCALL_BIT
 + 50)

	)

47 
	#__NR_g‘sockÇme
 (
__X32_SYSCALL_BIT
 + 51)

	)

48 
	#__NR_g‘³”Çme
 (
__X32_SYSCALL_BIT
 + 52)

	)

49 
	#__NR_sock‘·œ
 (
__X32_SYSCALL_BIT
 + 53)

	)

50 
	#__NR_şÚe
 (
__X32_SYSCALL_BIT
 + 56)

	)

51 
	#__NR_fÜk
 (
__X32_SYSCALL_BIT
 + 57)

	)

52 
	#__NR_vfÜk
 (
__X32_SYSCALL_BIT
 + 58)

	)

53 
	#__NR_ex™
 (
__X32_SYSCALL_BIT
 + 60)

	)

54 
	#__NR_wa™4
 (
__X32_SYSCALL_BIT
 + 61)

	)

55 
	#__NR_kl
 (
__X32_SYSCALL_BIT
 + 62)

	)

56 
	#__NR_uÇme
 (
__X32_SYSCALL_BIT
 + 63)

	)

57 
	#__NR_£mg‘
 (
__X32_SYSCALL_BIT
 + 64)

	)

58 
	#__NR_£mİ
 (
__X32_SYSCALL_BIT
 + 65)

	)

59 
	#__NR_£mùl
 (
__X32_SYSCALL_BIT
 + 66)

	)

60 
	#__NR_shmdt
 (
__X32_SYSCALL_BIT
 + 67)

	)

61 
	#__NR_msgg‘
 (
__X32_SYSCALL_BIT
 + 68)

	)

62 
	#__NR_msg¢d
 (
__X32_SYSCALL_BIT
 + 69)

	)

63 
	#__NR_msgrcv
 (
__X32_SYSCALL_BIT
 + 70)

	)

64 
	#__NR_msgùl
 (
__X32_SYSCALL_BIT
 + 71)

	)

65 
	#__NR_fú
 (
__X32_SYSCALL_BIT
 + 72)

	)

66 
	#__NR_æock
 (
__X32_SYSCALL_BIT
 + 73)

	)

67 
	#__NR_fsync
 (
__X32_SYSCALL_BIT
 + 74)

	)

68 
	#__NR_fd©async
 (
__X32_SYSCALL_BIT
 + 75)

	)

69 
	#__NR_Œunÿ‹
 (
__X32_SYSCALL_BIT
 + 76)

	)

70 
	#__NR_árunÿ‹
 (
__X32_SYSCALL_BIT
 + 77)

	)

71 
	#__NR_g‘d’ts
 (
__X32_SYSCALL_BIT
 + 78)

	)

72 
	#__NR_g‘cwd
 (
__X32_SYSCALL_BIT
 + 79)

	)

73 
	#__NR_chdœ
 (
__X32_SYSCALL_BIT
 + 80)

	)

74 
	#__NR_fchdœ
 (
__X32_SYSCALL_BIT
 + 81)

	)

75 
	#__NR_»Çme
 (
__X32_SYSCALL_BIT
 + 82)

	)

76 
	#__NR_mkdœ
 (
__X32_SYSCALL_BIT
 + 83)

	)

77 
	#__NR_rmdœ
 (
__X32_SYSCALL_BIT
 + 84)

	)

78 
	#__NR_ü—t
 (
__X32_SYSCALL_BIT
 + 85)

	)

79 
	#__NR_lšk
 (
__X32_SYSCALL_BIT
 + 86)

	)

80 
	#__NR_uÆšk
 (
__X32_SYSCALL_BIT
 + 87)

	)

81 
	#__NR_symlšk
 (
__X32_SYSCALL_BIT
 + 88)

	)

82 
	#__NR_»adlšk
 (
__X32_SYSCALL_BIT
 + 89)

	)

83 
	#__NR_chmod
 (
__X32_SYSCALL_BIT
 + 90)

	)

84 
	#__NR_fchmod
 (
__X32_SYSCALL_BIT
 + 91)

	)

85 
	#__NR_chown
 (
__X32_SYSCALL_BIT
 + 92)

	)

86 
	#__NR_fchown
 (
__X32_SYSCALL_BIT
 + 93)

	)

87 
	#__NR_lchown
 (
__X32_SYSCALL_BIT
 + 94)

	)

88 
	#__NR_umask
 (
__X32_SYSCALL_BIT
 + 95)

	)

89 
	#__NR_g‘timeofday
 (
__X32_SYSCALL_BIT
 + 96)

	)

90 
	#__NR_g‘¾im™
 (
__X32_SYSCALL_BIT
 + 97)

	)

91 
	#__NR_g‘ru§ge
 (
__X32_SYSCALL_BIT
 + 98)

	)

92 
	#__NR_sysšfo
 (
__X32_SYSCALL_BIT
 + 99)

	)

93 
	#__NR_times
 (
__X32_SYSCALL_BIT
 + 100)

	)

94 
	#__NR_g‘uid
 (
__X32_SYSCALL_BIT
 + 102)

	)

95 
	#__NR_sy¦og
 (
__X32_SYSCALL_BIT
 + 103)

	)

96 
	#__NR_g‘gid
 (
__X32_SYSCALL_BIT
 + 104)

	)

97 
	#__NR_£tuid
 (
__X32_SYSCALL_BIT
 + 105)

	)

98 
	#__NR_£tgid
 (
__X32_SYSCALL_BIT
 + 106)

	)

99 
	#__NR_g‘euid
 (
__X32_SYSCALL_BIT
 + 107)

	)

100 
	#__NR_g‘egid
 (
__X32_SYSCALL_BIT
 + 108)

	)

101 
	#__NR_£gid
 (
__X32_SYSCALL_BIT
 + 109)

	)

102 
	#__NR_g‘µid
 (
__X32_SYSCALL_BIT
 + 110)

	)

103 
	#__NR_g‘pg½
 (
__X32_SYSCALL_BIT
 + 111)

	)

104 
	#__NR_£tsid
 (
__X32_SYSCALL_BIT
 + 112)

	)

105 
	#__NR_£Œeuid
 (
__X32_SYSCALL_BIT
 + 113)

	)

106 
	#__NR_£Œegid
 (
__X32_SYSCALL_BIT
 + 114)

	)

107 
	#__NR_g‘groups
 (
__X32_SYSCALL_BIT
 + 115)

	)

108 
	#__NR_£tgroups
 (
__X32_SYSCALL_BIT
 + 116)

	)

109 
	#__NR_£Œesuid
 (
__X32_SYSCALL_BIT
 + 117)

	)

110 
	#__NR_g‘»suid
 (
__X32_SYSCALL_BIT
 + 118)

	)

111 
	#__NR_£Œesgid
 (
__X32_SYSCALL_BIT
 + 119)

	)

112 
	#__NR_g‘»sgid
 (
__X32_SYSCALL_BIT
 + 120)

	)

113 
	#__NR_g‘pgid
 (
__X32_SYSCALL_BIT
 + 121)

	)

114 
	#__NR_£tfsuid
 (
__X32_SYSCALL_BIT
 + 122)

	)

115 
	#__NR_£tfsgid
 (
__X32_SYSCALL_BIT
 + 123)

	)

116 
	#__NR_g‘sid
 (
__X32_SYSCALL_BIT
 + 124)

	)

117 
	#__NR_ÿpg‘
 (
__X32_SYSCALL_BIT
 + 125)

	)

118 
	#__NR_ÿp£t
 (
__X32_SYSCALL_BIT
 + 126)

	)

119 
	#__NR_¹_sigsu¥’d
 (
__X32_SYSCALL_BIT
 + 130)

	)

120 
	#__NR_utime
 (
__X32_SYSCALL_BIT
 + 132)

	)

121 
	#__NR_mknod
 (
__X32_SYSCALL_BIT
 + 133)

	)

122 
	#__NR_³rsÚ®™y
 (
__X32_SYSCALL_BIT
 + 135)

	)

123 
	#__NR_u¡©
 (
__X32_SYSCALL_BIT
 + 136)

	)

124 
	#__NR_¡©fs
 (
__X32_SYSCALL_BIT
 + 137)

	)

125 
	#__NR_f¡©fs
 (
__X32_SYSCALL_BIT
 + 138)

	)

126 
	#__NR_sysfs
 (
__X32_SYSCALL_BIT
 + 139)

	)

127 
	#__NR_g‘´iÜ™y
 (
__X32_SYSCALL_BIT
 + 140)

	)

128 
	#__NR_£riÜ™y
 (
__X32_SYSCALL_BIT
 + 141)

	)

129 
	#__NR_sched_£¬am
 (
__X32_SYSCALL_BIT
 + 142)

	)

130 
	#__NR_sched_g‘·¿m
 (
__X32_SYSCALL_BIT
 + 143)

	)

131 
	#__NR_sched_£tscheduËr
 (
__X32_SYSCALL_BIT
 + 144)

	)

132 
	#__NR_sched_g‘scheduËr
 (
__X32_SYSCALL_BIT
 + 145)

	)

133 
	#__NR_sched_g‘_´iÜ™y_max
 (
__X32_SYSCALL_BIT
 + 146)

	)

134 
	#__NR_sched_g‘_´iÜ™y_mš
 (
__X32_SYSCALL_BIT
 + 147)

	)

135 
	#__NR_sched_¼_g‘_š‹rv®
 (
__X32_SYSCALL_BIT
 + 148)

	)

136 
	#__NR_mlock
 (
__X32_SYSCALL_BIT
 + 149)

	)

137 
	#__NR_muÆock
 (
__X32_SYSCALL_BIT
 + 150)

	)

138 
	#__NR_mlock®l
 (
__X32_SYSCALL_BIT
 + 151)

	)

139 
	#__NR_muÆock®l
 (
__X32_SYSCALL_BIT
 + 152)

	)

140 
	#__NR_vhªgup
 (
__X32_SYSCALL_BIT
 + 153)

	)

141 
	#__NR_modify_ldt
 (
__X32_SYSCALL_BIT
 + 154)

	)

142 
	#__NR_pivÙ_roÙ
 (
__X32_SYSCALL_BIT
 + 155)

	)

143 
	#__NR_´ùl
 (
__X32_SYSCALL_BIT
 + 157)

	)

144 
	#__NR_¬ch_´ùl
 (
__X32_SYSCALL_BIT
 + 158)

	)

145 
	#__NR_adjtimex
 (
__X32_SYSCALL_BIT
 + 159)

	)

146 
	#__NR_£Œlim™
 (
__X32_SYSCALL_BIT
 + 160)

	)

147 
	#__NR_chroÙ
 (
__X32_SYSCALL_BIT
 + 161)

	)

148 
	#__NR_sync
 (
__X32_SYSCALL_BIT
 + 162)

	)

149 
	#__NR_acù
 (
__X32_SYSCALL_BIT
 + 163)

	)

150 
	#__NR_£‰imeofday
 (
__X32_SYSCALL_BIT
 + 164)

	)

151 
	#__NR_mouÁ
 (
__X32_SYSCALL_BIT
 + 165)

	)

152 
	#__NR_umouÁ2
 (
__X32_SYSCALL_BIT
 + 166)

	)

153 
	#__NR_sw­Ú
 (
__X32_SYSCALL_BIT
 + 167)

	)

154 
	#__NR_sw­off
 (
__X32_SYSCALL_BIT
 + 168)

	)

155 
	#__NR_»boÙ
 (
__X32_SYSCALL_BIT
 + 169)

	)

156 
	#__NR_£tho¡Çme
 (
__X32_SYSCALL_BIT
 + 170)

	)

157 
	#__NR_£tdomašÇme
 (
__X32_SYSCALL_BIT
 + 171)

	)

158 
	#__NR_iİl
 (
__X32_SYSCALL_BIT
 + 172)

	)

159 
	#__NR_iİ”m
 (
__X32_SYSCALL_BIT
 + 173)

	)

160 
	#__NR_š™_moduË
 (
__X32_SYSCALL_BIT
 + 175)

	)

161 
	#__NR_d–‘e_moduË
 (
__X32_SYSCALL_BIT
 + 176)

	)

162 
	#__NR_quÙaùl
 (
__X32_SYSCALL_BIT
 + 179)

	)

163 
	#__NR_g‘pmsg
 (
__X32_SYSCALL_BIT
 + 181)

	)

164 
	#__NR_pumsg
 (
__X32_SYSCALL_BIT
 + 182)

	)

165 
	#__NR_afs_sysÿÎ
 (
__X32_SYSCALL_BIT
 + 183)

	)

166 
	#__NR_tuxÿÎ
 (
__X32_SYSCALL_BIT
 + 184)

	)

167 
	#__NR_£cur™y
 (
__X32_SYSCALL_BIT
 + 185)

	)

168 
	#__NR_g‘tid
 (
__X32_SYSCALL_BIT
 + 186)

	)

169 
	#__NR_»adah—d
 (
__X32_SYSCALL_BIT
 + 187)

	)

170 
	#__NR_£tx©Œ
 (
__X32_SYSCALL_BIT
 + 188)

	)

171 
	#__NR_l£tx©Œ
 (
__X32_SYSCALL_BIT
 + 189)

	)

172 
	#__NR_f£tx©Œ
 (
__X32_SYSCALL_BIT
 + 190)

	)

173 
	#__NR_g‘x©Œ
 (
__X32_SYSCALL_BIT
 + 191)

	)

174 
	#__NR_lg‘x©Œ
 (
__X32_SYSCALL_BIT
 + 192)

	)

175 
	#__NR_fg‘x©Œ
 (
__X32_SYSCALL_BIT
 + 193)

	)

176 
	#__NR_li¡x©Œ
 (
__X32_SYSCALL_BIT
 + 194)

	)

177 
	#__NR_Îi¡x©Œ
 (
__X32_SYSCALL_BIT
 + 195)

	)

178 
	#__NR_æi¡x©Œ
 (
__X32_SYSCALL_BIT
 + 196)

	)

179 
	#__NR_»movex©Œ
 (
__X32_SYSCALL_BIT
 + 197)

	)

180 
	#__NR_Ìemovex©Œ
 (
__X32_SYSCALL_BIT
 + 198)

	)

181 
	#__NR_äemovex©Œ
 (
__X32_SYSCALL_BIT
 + 199)

	)

182 
	#__NR_tkl
 (
__X32_SYSCALL_BIT
 + 200)

	)

183 
	#__NR_time
 (
__X32_SYSCALL_BIT
 + 201)

	)

184 
	#__NR_fu‹x
 (
__X32_SYSCALL_BIT
 + 202)

	)

185 
	#__NR_sched_£ffš™y
 (
__X32_SYSCALL_BIT
 + 203)

	)

186 
	#__NR_sched_g‘affš™y
 (
__X32_SYSCALL_BIT
 + 204)

	)

187 
	#__NR_io_£tup
 (
__X32_SYSCALL_BIT
 + 206)

	)

188 
	#__NR_io_de¡roy
 (
__X32_SYSCALL_BIT
 + 207)

	)

189 
	#__NR_io_g‘ev’ts
 (
__X32_SYSCALL_BIT
 + 208)

	)

190 
	#__NR_io_subm™
 (
__X32_SYSCALL_BIT
 + 209)

	)

191 
	#__NR_io_ÿnûl
 (
__X32_SYSCALL_BIT
 + 210)

	)

192 
	#__NR_lookup_dcook›
 (
__X32_SYSCALL_BIT
 + 212)

	)

193 
	#__NR_•Şl_ü—‹
 (
__X32_SYSCALL_BIT
 + 213)

	)

194 
	#__NR_»m­_fe_·ges
 (
__X32_SYSCALL_BIT
 + 216)

	)

195 
	#__NR_g‘d’ts64
 (
__X32_SYSCALL_BIT
 + 217)

	)

196 
	#__NR_£t_tid_add»ss
 (
__X32_SYSCALL_BIT
 + 218)

	)

197 
	#__NR_»¡¬t_sysÿÎ
 (
__X32_SYSCALL_BIT
 + 219)

	)

198 
	#__NR_£mtimedİ
 (
__X32_SYSCALL_BIT
 + 220)

	)

199 
	#__NR_çdvi£64
 (
__X32_SYSCALL_BIT
 + 221)

	)

200 
	#__NR_tim”_£‰ime
 (
__X32_SYSCALL_BIT
 + 223)

	)

201 
	#__NR_tim”_g‘time
 (
__X32_SYSCALL_BIT
 + 224)

	)

202 
	#__NR_tim”_g‘ov”run
 (
__X32_SYSCALL_BIT
 + 225)

	)

203 
	#__NR_tim”_d–‘e
 (
__X32_SYSCALL_BIT
 + 226)

	)

204 
	#__NR_şock_£‰ime
 (
__X32_SYSCALL_BIT
 + 227)

	)

205 
	#__NR_şock_g‘time
 (
__X32_SYSCALL_BIT
 + 228)

	)

206 
	#__NR_şock_g‘»s
 (
__X32_SYSCALL_BIT
 + 229)

	)

207 
	#__NR_şock_Çno¦“p
 (
__X32_SYSCALL_BIT
 + 230)

	)

208 
	#__NR_ex™_group
 (
__X32_SYSCALL_BIT
 + 231)

	)

209 
	#__NR_•Şl_wa™
 (
__X32_SYSCALL_BIT
 + 232)

	)

210 
	#__NR_•Şl_ùl
 (
__X32_SYSCALL_BIT
 + 233)

	)

211 
	#__NR_tgkl
 (
__X32_SYSCALL_BIT
 + 234)

	)

212 
	#__NR_utimes
 (
__X32_SYSCALL_BIT
 + 235)

	)

213 
	#__NR_mbšd
 (
__X32_SYSCALL_BIT
 + 237)

	)

214 
	#__NR_£t_mempŞicy
 (
__X32_SYSCALL_BIT
 + 238)

	)

215 
	#__NR_g‘_mempŞicy
 (
__X32_SYSCALL_BIT
 + 239)

	)

216 
	#__NR_mq_İ’
 (
__X32_SYSCALL_BIT
 + 240)

	)

217 
	#__NR_mq_uÆšk
 (
__X32_SYSCALL_BIT
 + 241)

	)

218 
	#__NR_mq_timed£nd
 (
__X32_SYSCALL_BIT
 + 242)

	)

219 
	#__NR_mq_timed»ûive
 (
__X32_SYSCALL_BIT
 + 243)

	)

220 
	#__NR_mq_g‘£‰r
 (
__X32_SYSCALL_BIT
 + 245)

	)

221 
	#__NR_add_key
 (
__X32_SYSCALL_BIT
 + 248)

	)

222 
	#__NR_»que¡_key
 (
__X32_SYSCALL_BIT
 + 249)

	)

223 
	#__NR_keyùl
 (
__X32_SYSCALL_BIT
 + 250)

	)

224 
	#__NR_iİrio_£t
 (
__X32_SYSCALL_BIT
 + 251)

	)

225 
	#__NR_iİrio_g‘
 (
__X32_SYSCALL_BIT
 + 252)

	)

226 
	#__NR_šÙify_š™
 (
__X32_SYSCALL_BIT
 + 253)

	)

227 
	#__NR_šÙify_add_w©ch
 (
__X32_SYSCALL_BIT
 + 254)

	)

228 
	#__NR_šÙify_rm_w©ch
 (
__X32_SYSCALL_BIT
 + 255)

	)

229 
	#__NR_mig¿‹_·ges
 (
__X32_SYSCALL_BIT
 + 256)

	)

230 
	#__NR_İ’©
 (
__X32_SYSCALL_BIT
 + 257)

	)

231 
	#__NR_mkdœ©
 (
__X32_SYSCALL_BIT
 + 258)

	)

232 
	#__NR_mknod©
 (
__X32_SYSCALL_BIT
 + 259)

	)

233 
	#__NR_fchowÇt
 (
__X32_SYSCALL_BIT
 + 260)

	)

234 
	#__NR_futime§t
 (
__X32_SYSCALL_BIT
 + 261)

	)

235 
	#__NR_Ãwf¡©©
 (
__X32_SYSCALL_BIT
 + 262)

	)

236 
	#__NR_uÆšk©
 (
__X32_SYSCALL_BIT
 + 263)

	)

237 
	#__NR_»Çm—t
 (
__X32_SYSCALL_BIT
 + 264)

	)

238 
	#__NR_lšk©
 (
__X32_SYSCALL_BIT
 + 265)

	)

239 
	#__NR_symlšk©
 (
__X32_SYSCALL_BIT
 + 266)

	)

240 
	#__NR_»adlšk©
 (
__X32_SYSCALL_BIT
 + 267)

	)

241 
	#__NR_fchmod©
 (
__X32_SYSCALL_BIT
 + 268)

	)

242 
	#__NR_çcûs§t
 (
__X32_SYSCALL_BIT
 + 269)

	)

243 
	#__NR_p£Ëù6
 (
__X32_SYSCALL_BIT
 + 270)

	)

244 
	#__NR_µŞl
 (
__X32_SYSCALL_BIT
 + 271)

	)

245 
	#__NR_unsh¬e
 (
__X32_SYSCALL_BIT
 + 272)

	)

246 
	#__NR_¥liû
 (
__X32_SYSCALL_BIT
 + 275)

	)

247 
	#__NR_‹e
 (
__X32_SYSCALL_BIT
 + 276)

	)

248 
	#__NR_sync_fe_¿nge
 (
__X32_SYSCALL_BIT
 + 277)

	)

249 
	#__NR_utim’§t
 (
__X32_SYSCALL_BIT
 + 280)

	)

250 
	#__NR_•Şl_pwa™
 (
__X32_SYSCALL_BIT
 + 281)

	)

251 
	#__NR_sigÇlfd
 (
__X32_SYSCALL_BIT
 + 282)

	)

252 
	#__NR_tim”fd_ü—‹
 (
__X32_SYSCALL_BIT
 + 283)

	)

253 
	#__NR_ev’tfd
 (
__X32_SYSCALL_BIT
 + 284)

	)

254 
	#__NR_çÎoÿ‹
 (
__X32_SYSCALL_BIT
 + 285)

	)

255 
	#__NR_tim”fd_£‰ime
 (
__X32_SYSCALL_BIT
 + 286)

	)

256 
	#__NR_tim”fd_g‘time
 (
__X32_SYSCALL_BIT
 + 287)

	)

257 
	#__NR_acû±4
 (
__X32_SYSCALL_BIT
 + 288)

	)

258 
	#__NR_sigÇlfd4
 (
__X32_SYSCALL_BIT
 + 289)

	)

259 
	#__NR_ev’tfd2
 (
__X32_SYSCALL_BIT
 + 290)

	)

260 
	#__NR_•Şl_ü—‹1
 (
__X32_SYSCALL_BIT
 + 291)

	)

261 
	#__NR_dup3
 (
__X32_SYSCALL_BIT
 + 292)

	)

262 
	#__NR_pe2
 (
__X32_SYSCALL_BIT
 + 293)

	)

263 
	#__NR_šÙify_š™1
 (
__X32_SYSCALL_BIT
 + 294)

	)

264 
	#__NR_³rf_ev’t_İ’
 (
__X32_SYSCALL_BIT
 + 298)

	)

265 
	#__NR_çnÙify_š™
 (
__X32_SYSCALL_BIT
 + 300)

	)

266 
	#__NR_çnÙify_m¬k
 (
__X32_SYSCALL_BIT
 + 301)

	)

267 
	#__NR_´lim™64
 (
__X32_SYSCALL_BIT
 + 302)

	)

268 
	#__NR_Çme_to_hªdË_©
 (
__X32_SYSCALL_BIT
 + 303)

	)

269 
	#__NR_İ’_by_hªdË_©
 (
__X32_SYSCALL_BIT
 + 304)

	)

270 
	#__NR_şock_adjtime
 (
__X32_SYSCALL_BIT
 + 305)

	)

271 
	#__NR_syncfs
 (
__X32_SYSCALL_BIT
 + 306)

	)

272 
	#__NR_£Šs
 (
__X32_SYSCALL_BIT
 + 308)

	)

273 
	#__NR_g‘ıu
 (
__X32_SYSCALL_BIT
 + 309)

	)

274 
	#__NR_kcmp
 (
__X32_SYSCALL_BIT
 + 312)

	)

275 
	#__NR_fš™_moduË
 (
__X32_SYSCALL_BIT
 + 313)

	)

276 
	#__NR_¹_sigaùiÚ
 (
__X32_SYSCALL_BIT
 + 512)

	)

277 
	#__NR_¹_sig»tuº
 (
__X32_SYSCALL_BIT
 + 513)

	)

278 
	#__NR_ioùl
 (
__X32_SYSCALL_BIT
 + 514)

	)

279 
	#__NR_»adv
 (
__X32_SYSCALL_BIT
 + 515)

	)

280 
	#__NR_wr™ev
 (
__X32_SYSCALL_BIT
 + 516)

	)

281 
	#__NR_»cväom
 (
__X32_SYSCALL_BIT
 + 517)

	)

282 
	#__NR_£ndmsg
 (
__X32_SYSCALL_BIT
 + 518)

	)

283 
	#__NR_»cvmsg
 (
__X32_SYSCALL_BIT
 + 519)

	)

284 
	#__NR_execve
 (
__X32_SYSCALL_BIT
 + 520)

	)

285 
	#__NR_±¿û
 (
__X32_SYSCALL_BIT
 + 521)

	)

286 
	#__NR_¹_sig³ndšg
 (
__X32_SYSCALL_BIT
 + 522)

	)

287 
	#__NR_¹_sigtimedwa™
 (
__X32_SYSCALL_BIT
 + 523)

	)

288 
	#__NR_¹_sigqueuešfo
 (
__X32_SYSCALL_BIT
 + 524)

	)

289 
	#__NR_sig®t¡ack
 (
__X32_SYSCALL_BIT
 + 525)

	)

290 
	#__NR_tim”_ü—‹
 (
__X32_SYSCALL_BIT
 + 526)

	)

291 
	#__NR_mq_nÙify
 (
__X32_SYSCALL_BIT
 + 527)

	)

292 
	#__NR_kexec_lßd
 (
__X32_SYSCALL_BIT
 + 528)

	)

293 
	#__NR_wa™id
 (
__X32_SYSCALL_BIT
 + 529)

	)

294 
	#__NR_£t_robu¡_li¡
 (
__X32_SYSCALL_BIT
 + 530)

	)

295 
	#__NR_g‘_robu¡_li¡
 (
__X32_SYSCALL_BIT
 + 531)

	)

296 
	#__NR_vm¥liû
 (
__X32_SYSCALL_BIT
 + 532)

	)

297 
	#__NR_move_·ges
 (
__X32_SYSCALL_BIT
 + 533)

	)

298 
	#__NR_´—dv
 (
__X32_SYSCALL_BIT
 + 534)

	)

299 
	#__NR_pwr™ev
 (
__X32_SYSCALL_BIT
 + 535)

	)

300 
	#__NR_¹_tgsigqueuešfo
 (
__X32_SYSCALL_BIT
 + 536)

	)

301 
	#__NR_»cvmmsg
 (
__X32_SYSCALL_BIT
 + 537)

	)

302 
	#__NR_£ndmmsg
 (
__X32_SYSCALL_BIT
 + 538)

	)

303 
	#__NR_´oûss_vm_»adv
 (
__X32_SYSCALL_BIT
 + 539)

	)

304 
	#__NR_´oûss_vm_wr™ev
 (
__X32_SYSCALL_BIT
 + 540)

	)

305 
	#__NR_£tsockİt
 (
__X32_SYSCALL_BIT
 + 541)

	)

306 
	#__NR_g‘sockİt
 (
__X32_SYSCALL_BIT
 + 542)

	)

	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/fcntl-linux.h

19 #iâdef 
_FCNTL_H


37 #ifdeà
__USE_GNU


38 
	~<b™s/uio.h
>

42 
	#O_ACCMODE
 0003

	)

43 
	#O_RDONLY
 00

	)

44 
	#O_WRONLY
 01

	)

45 
	#O_RDWR
 02

	)

46 #iâdeà
O_CREAT


47 
	#O_CREAT
 0100

	)

49 #iâdeà
O_EXCL


50 
	#O_EXCL
 0200

	)

52 #iâdeà
O_NOCTTY


53 
	#O_NOCTTY
 0400

	)

55 #iâdeà
O_TRUNC


56 
	#O_TRUNC
 01000

	)

58 #iâdeà
O_APPEND


59 
	#O_APPEND
 02000

	)

61 #iâdeà
O_NONBLOCK


62 
	#O_NONBLOCK
 04000

	)

64 #iâdeà
O_NDELAY


65 
	#O_NDELAY
 
O_NONBLOCK


	)

67 #iâdeà
O_SYNC


68 
	#O_SYNC
 04010000

	)

70 
	#O_FSYNC
 
O_SYNC


	)

71 #iâdeà
O_ASYNC


72 
	#O_ASYNC
 020000

	)

74 #iâdeà
__O_LARGEFILE


75 
	#__O_LARGEFILE
 0100000

	)

78 #iâdeà
__O_DIRECTORY


79 
	#__O_DIRECTORY
 0200000

	)

81 #iâdeà
__O_NOFOLLOW


82 
	#__O_NOFOLLOW
 0400000

	)

84 #iâdeà
__O_CLOEXEC


85 
	#__O_CLOEXEC
 02000000

	)

87 #iâdeà
__O_DIRECT


88 
	#__O_DIRECT
 040000

	)

90 #iâdeà
__O_NOATIME


91 
	#__O_NOATIME
 01000000

	)

93 #iâdeà
__O_PATH


94 
	#__O_PATH
 010000000

	)

96 #iâdeà
__O_DSYNC


97 
	#__O_DSYNC
 010000

	)

100 #iâdeà
F_GETLK


101 #iâdeà
__USE_FILE_OFFSET64


102 
	#F_GETLK
 5

	)

103 
	#F_SETLK
 6

	)

104 
	#F_SETLKW
 7

	)

106 
	#F_GETLK
 
F_GETLK64


	)

107 
	#F_SETLK
 
F_SETLK64


	)

108 
	#F_SETLKW
 
F_SETLKW64


	)

111 #iâdeà
F_GETLK64


112 
	#F_GETLK64
 12

	)

113 
	#F_SETLK64
 13

	)

114 
	#F_SETLKW64
 14

	)

117 #ifdeà
__USE_LARGEFILE64


118 
	#O_LARGEFILE
 
__O_LARGEFILE


	)

121 #ifdeà
__USE_XOPEN2K8


122 
	#O_DIRECTORY
 
__O_DIRECTORY


	)

123 
	#O_NOFOLLOW
 
__O_NOFOLLOW


	)

124 
	#O_CLOEXEC
 
__O_CLOEXEC


	)

127 #ifdeà
__USE_GNU


128 
	#O_DIRECT
 
__O_DIRECT


	)

129 
	#O_NOATIME
 
__O_NOATIME


	)

130 
	#O_PATH
 
__O_PATH


	)

136 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


137 
	#O_DSYNC
 
__O_DSYNC


	)

138 #ià
defšed
 
__O_RSYNC


139 
	#O_RSYNC
 
__O_RSYNC


	)

141 
	#O_RSYNC
 
O_SYNC


	)

146 
	#F_DUPFD
 0

	)

147 
	#F_GETFD
 1

	)

148 
	#F_SETFD
 2

	)

149 
	#F_GETFL
 3

	)

150 
	#F_SETFL
 4

	)

152 #iâdeà
__F_SETOWN


153 
	#__F_SETOWN
 8

	)

154 
	#__F_GETOWN
 9

	)

157 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


158 
	#F_SETOWN
 
__F_SETOWN


	)

159 
	#F_GETOWN
 
__F_GETOWN


	)

162 #iâdeà
__F_SETSIG


163 
	#__F_SETSIG
 10

	)

164 
	#__F_GETSIG
 11

	)

166 #iâdeà
__F_SETOWN_EX


167 
	#__F_SETOWN_EX
 15

	)

168 
	#__F_GETOWN_EX
 16

	)

171 #ifdeà
__USE_GNU


172 
	#F_SETSIG
 
__F_SETSIG


	)

173 
	#F_GETSIG
 
__F_GETSIG


	)

174 
	#F_SETOWN_EX
 
__F_SETOWN_EX


	)

175 
	#F_GETOWN_EX
 
__F_GETOWN_EX


	)

178 #ifdeà
__USE_GNU


179 
	#F_SETLEASE
 1024

	)

180 
	#F_GETLEASE
 1025

	)

181 
	#F_NOTIFY
 1026

	)

182 
	#F_SETPIPE_SZ
 1031

	)

183 
	#F_GETPIPE_SZ
 1032

	)

185 #ifdeà
__USE_XOPEN2K8


186 
	#F_DUPFD_CLOEXEC
 1030

	)

191 
	#FD_CLOEXEC
 1

	)

193 #iâdeà
F_RDLCK


195 
	#F_RDLCK
 0

	)

196 
	#F_WRLCK
 1

	)

197 
	#F_UNLCK
 2

	)

202 #iâdeà
F_EXLCK


203 
	#F_EXLCK
 4

	)

204 
	#F_SHLCK
 8

	)

207 #ifdeà
__USE_BSD


209 
	#LOCK_SH
 1

	)

210 
	#LOCK_EX
 2

	)

211 
	#LOCK_NB
 4

	)

213 
	#LOCK_UN
 8

	)

216 #ifdeà
__USE_GNU


217 
	#LOCK_MAND
 32

	)

218 
	#LOCK_READ
 64

	)

219 
	#LOCK_WRITE
 128

	)

220 
	#LOCK_RW
 192

	)

223 #ifdeà
__USE_GNU


225 
	#DN_ACCESS
 0x00000001

	)

226 
	#DN_MODIFY
 0x00000002

	)

227 
	#DN_CREATE
 0x00000004

	)

228 
	#DN_DELETE
 0x00000008

	)

229 
	#DN_RENAME
 0x00000010

	)

230 
	#DN_ATTRIB
 0x00000020

	)

231 
	#DN_MULTISHOT
 0x80000000

	)

235 #ifdeà
__USE_GNU


237 
	e__pid_ty³


239 
	mF_OWNER_TID
 = 0,

240 
	mF_OWNER_PID
,

241 
	mF_OWNER_PGRP
,

242 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


246 
	sf_owÃr_ex


248 
__pid_ty³
 
	mty³
;

249 
__pid_t
 
	mpid
;

255 #ifdef 
__USE_BSD


256 
	#FAPPEND
 
O_APPEND


	)

257 
	#FFSYNC
 
O_FSYNC


	)

258 
	#FASYNC
 
O_ASYNC


	)

259 
	#FNONBLOCK
 
O_NONBLOCK


	)

260 
	#FNDELAY
 
O_NDELAY


	)

263 #iâdeà
__POSIX_FADV_DONTNEED


264 
	#__POSIX_FADV_DONTNEED
 4

	)

265 
	#__POSIX_FADV_NOREUSE
 5

	)

268 #ifdeà
__USE_XOPEN2K


269 
	#POSIX_FADV_NORMAL
 0

	)

270 
	#POSIX_FADV_RANDOM
 1

	)

271 
	#POSIX_FADV_SEQUENTIAL
 2

	)

272 
	#POSIX_FADV_WILLNEED
 3

	)

273 
	#POSIX_FADV_DONTNEED
 
__POSIX_FADV_DONTNEED


	)

274 
	#POSIX_FADV_NOREUSE
 
__POSIX_FADV_NOREUSE


	)

278 #ifdeà
__USE_GNU


280 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

283 
	#SYNC_FILE_RANGE_WRITE
 2

	)

286 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

291 
	#SPLICE_F_MOVE
 1

	)

292 
	#SPLICE_F_NONBLOCK
 2

	)

295 
	#SPLICE_F_MORE
 4

	)

296 
	#SPLICE_F_GIFT
 8

	)

300 
	sfe_hªdË


302 
	mhªdË_by‹s
;

303 
	mhªdË_ty³
;

305 
	mf_hªdË
[0];

309 
	#MAX_HANDLE_SZ
 128

	)

313 #ifdeà
__USE_ATFILE


314 
	#AT_FDCWD
 -100

	)

317 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

318 
	#AT_REMOVEDIR
 0x200

	)

320 
	#AT_SYMLINK_FOLLOW
 0x400

	)

321 #ifdeà
__USE_GNU


322 
	#AT_NO_AUTOMOUNT
 0x800

	)

324 
	#AT_EMPTY_PATH
 0x1000

	)

326 
	#AT_EACCESS
 0x200

	)

330 
	g__BEGIN_DECLS


332 #ifdeà
__USE_GNU


335 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

336 
__THROW
;

343 
	`sync_fe_¿nge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__couÁ
,

344 
__æags
);

351 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

352 
size_t
 
__couÁ
, 
__æags
);

358 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

359 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

360 
__æags
);

366 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

367 
__æags
);

373 #iâdeà
__USE_FILE_OFFSET64


374 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

376 #ifdeà
__REDIRECT


377 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

378 
__off64_t
 
__Ën
),

379 
çÎoÿ‹64
);

381 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

384 #ifdeà
__USE_LARGEFILE64


385 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

386 
__off64_t
 
__Ën
);

391 
	$Çme_to_hªdË_©
 (
__dfd
, cÚ¡ *
__Çme
,

392 
fe_hªdË
 *
__hªdË
, *
__mÁ_id
,

393 
__æags
è
__THROW
;

399 
	`İ’_by_hªdË_©
 (
__mouÁdœfd
, 
fe_hªdË
 *
__hªdË
,

400 
__æags
);

404 
__END_DECLS


	@/usr/include/bits/libio-ldbl.h

19 #iâdeà
_IO_STDIO_H


23 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

24 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/local_lim.h

24 #iâdeà
NR_OPEN


25 
	#__undef_NR_OPEN


	)

27 #iâdeà
LINK_MAX


28 
	#__undef_LINK_MAX


	)

30 #iâdeà
OPEN_MAX


31 
	#__undef_OPEN_MAX


	)

33 #iâdeà
ARG_MAX


34 
	#__undef_ARG_MAX


	)

38 
	~<lšux/lim™s.h
>

41 #ifdeà
__undef_NR_OPEN


42 #undeà
NR_OPEN


43 #undeà
__undef_NR_OPEN


46 #ifdeà
__undef_LINK_MAX


47 #undeà
LINK_MAX


48 #undeà
__undef_LINK_MAX


51 #ifdeà
__undef_OPEN_MAX


52 #undeà
OPEN_MAX


53 #undeà
__undef_OPEN_MAX


56 #ifdeà
__undef_ARG_MAX


57 #undeà
ARG_MAX


58 #undeà
__undef_ARG_MAX


62 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

64 
	#PTHREAD_KEYS_MAX
 1024

	)

67 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

69 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

72 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

74 #undeà
PTHREAD_THREADS_MAX


78 
	#AIO_PRIO_DELTA_MAX
 20

	)

81 
	#PTHREAD_STACK_MIN
 16384

	)

84 
	#DELAYTIMER_MAX
 2147483647

	)

87 
	#TTY_NAME_MAX
 32

	)

90 
	#LOGIN_NAME_MAX
 256

	)

93 
	#HOST_NAME_MAX
 64

	)

96 
	#MQ_PRIO_MAX
 32768

	)

99 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/socket_type.h

19 #iâdeà
_SYS_SOCKET_H


24 
	e__sock‘_ty³


26 
	mSOCK_STREAM
 = 1,

28 
	#SOCK_STREAM
 
SOCK_STREAM


	)

29 
	mSOCK_DGRAM
 = 2,

31 
	#SOCK_DGRAM
 
SOCK_DGRAM


	)

32 
	mSOCK_RAW
 = 3,

33 
	#SOCK_RAW
 
SOCK_RAW


	)

34 
	mSOCK_RDM
 = 4,

35 
	#SOCK_RDM
 
SOCK_RDM


	)

36 
	mSOCK_SEQPACKET
 = 5,

38 
	#SOCK_SEQPACKET
 
SOCK_SEQPACKET


	)

39 
	mSOCK_DCCP
 = 6,

40 
	#SOCK_DCCP
 
SOCK_DCCP


	)

41 
	mSOCK_PACKET
 = 10,

44 
	#SOCK_PACKET
 
SOCK_PACKET


	)

49 
	mSOCK_CLOEXEC
 = 02000000,

51 
	#SOCK_CLOEXEC
 
SOCK_CLOEXEC


	)

52 
	mSOCK_NONBLOCK
 = 00004000

54 
	#SOCK_NONBLOCK
 
SOCK_NONBLOCK


	)

	@/usr/include/bits/stdio-lock.h

19 #iâdeà
_BITS_STDIO_LOCK_H


20 
	#_BITS_STDIO_LOCK_H
 1

	)

22 
	~<b™s/libc-lock.h
>

23 
	~<lowËv–lock.h
>

27 
	#_IO_lock_šex³nsive
 1

	)

29 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t_IO_lock_t
;

31 
	#_IO_lock_š™Ÿliz”
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

33 
	#_IO_lock_š™
(
_Çme
) \

34 ((
_Çme
èğ(
_IO_lock_t
è
_IO_lock_š™Ÿliz”
 , 0)

	)

36 
	#_IO_lock_fši
(
_Çme
) \

37 ((è0)

	)

39 
	#_IO_lock_lock
(
_Çme
) \

41 *
__£lf
 = 
THREAD_SELF
; \

42 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

44 
	`Îl_lock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

45 (
_Çme
).
owÃr
 = 
__£lf
; \

47 ++(
_Çme
).
út
; \

48 } 0)

	)

50 
	#_IO_lock_Œylock
(
_Çme
) \

52 
__»suÉ
 = 0; \

53 *
__£lf
 = 
THREAD_SELF
; \

54 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

56 ià(
	`Îl_Œylock
 ((
_Çme
).
lock
) == 0) \

58 (
_Çme
).
owÃr
 = 
__£lf
; \

59 (
_Çme
).
út
 = 1; \

62 
__»suÉ
 = 
EBUSY
; \

65 ++(
_Çme
).
út
; \

66 
__»suÉ
; \

67 })

	)

69 
	#_IO_lock_uÆock
(
_Çme
) \

71 ià(--(
_Çme
).
út
 == 0) \

73 (
_Çme
).
owÃr
 = 
NULL
; \

74 
	`Îl_uÆock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

76 } 0)

	)

80 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
) \

81 
	`__libc_ş—nup_»giÚ_¡¬t
 (((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0, 
_fù
, _å)

	)

82 
	#_IO_ş—nup_»giÚ_¡¬t_nßrg
(
_fù
) \

83 
	`__libc_ş—nup_»giÚ_¡¬t
 (1, 
_fù
, 
NULL
)

	)

84 
	#_IO_ş—nup_»giÚ_’d
(
_do™
) \

85 
	`__libc_ş—nup_»giÚ_’d
 (
_do™
)

	)

87 #ià
defšed
 
_LIBC
 && !defšed 
NOT_IN_libc


89 #ifdeà
__EXCEPTIONS


90 
	#_IO_acquœe_lock
(
_å
) \

92 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

93 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_fù
))) \

94 ğ(
_å
); \

95 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

96 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
) \

98 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

99 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_ş—r_æags2_fù
))) \

100 ğ(
_å
); \

101 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

103 
	#_IO_acquœe_lock
(
_å
è
_IO_acquœe_lock_Ãeds_exû±iÚs_’abËd


	)

104 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
è
	`_IO_acquœe_lock
 (_å)

	)

106 
	#_IO_»Ëa£_lock
(
_å
è; } 0)

	)

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_MICRO
 0x1000

	)

64 
	#ADJ_NANO
 0x2000

	)

65 
	#ADJ_TICK
 0x4000

	)

66 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

67 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

70 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

71 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

72 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

73 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

74 
	#MOD_STATUS
 
ADJ_STATUS


	)

75 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

76 
	#MOD_CLKB
 
ADJ_TICK


	)

77 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

78 
	#MOD_TAI
 
ADJ_TAI


	)

79 
	#MOD_MICRO
 
ADJ_MICRO


	)

80 
	#MOD_NANO
 
ADJ_NANO


	)

84 
	#STA_PLL
 0x0001

	)

85 
	#STA_PPSFREQ
 0x0002

	)

86 
	#STA_PPSTIME
 0x0004

	)

87 
	#STA_FLL
 0x0008

	)

89 
	#STA_INS
 0x0010

	)

90 
	#STA_DEL
 0x0020

	)

91 
	#STA_UNSYNC
 0x0040

	)

92 
	#STA_FREQHOLD
 0x0080

	)

94 
	#STA_PPSSIGNAL
 0x0100

	)

95 
	#STA_PPSJITTER
 0x0200

	)

96 
	#STA_PPSWANDER
 0x0400

	)

97 
	#STA_PPSERROR
 0x0800

	)

99 
	#STA_CLOCKERR
 0x1000

	)

100 
	#STA_NANO
 0x2000

	)

101 
	#STA_MODE
 0x4000

	)

102 
	#STA_CLK
 0x8000

	)

105 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

106 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

75 #ifdeà
__x86_64__


79 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

82 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/linux/errno.h

1 
	~<asm/”ºo.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

30 
	~<b™s/´edefs.h
>

34 
	#__STDC_ISO_10646__
 201103L

	)

37 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/asm-generic/socket.h

1 #iâdeà
__ASM_GENERIC_SOCKET_H


2 
	#__ASM_GENERIC_SOCKET_H


	)

4 
	~<asm/sockios.h
>

7 
	#SOL_SOCKET
 1

	)

9 
	#SO_DEBUG
 1

	)

10 
	#SO_REUSEADDR
 2

	)

11 
	#SO_TYPE
 3

	)

12 
	#SO_ERROR
 4

	)

13 
	#SO_DONTROUTE
 5

	)

14 
	#SO_BROADCAST
 6

	)

15 
	#SO_SNDBUF
 7

	)

16 
	#SO_RCVBUF
 8

	)

17 
	#SO_SNDBUFFORCE
 32

	)

18 
	#SO_RCVBUFFORCE
 33

	)

19 
	#SO_KEEPALIVE
 9

	)

20 
	#SO_OOBINLINE
 10

	)

21 
	#SO_NO_CHECK
 11

	)

22 
	#SO_PRIORITY
 12

	)

23 
	#SO_LINGER
 13

	)

24 
	#SO_BSDCOMPAT
 14

	)

27 #iâdeà
SO_PASSCRED


28 
	#SO_PASSCRED
 16

	)

29 
	#SO_PEERCRED
 17

	)

30 
	#SO_RCVLOWAT
 18

	)

31 
	#SO_SNDLOWAT
 19

	)

32 
	#SO_RCVTIMEO
 20

	)

33 
	#SO_SNDTIMEO
 21

	)

37 
	#SO_SECURITY_AUTHENTICATION
 22

	)

38 
	#SO_SECURITY_ENCRYPTION_TRANSPORT
 23

	)

39 
	#SO_SECURITY_ENCRYPTION_NETWORK
 24

	)

41 
	#SO_BINDTODEVICE
 25

	)

44 
	#SO_ATTACH_FILTER
 26

	)

45 
	#SO_DETACH_FILTER
 27

	)

46 
	#SO_GET_FILTER
 
SO_ATTACH_FILTER


	)

48 
	#SO_PEERNAME
 28

	)

49 
	#SO_TIMESTAMP
 29

	)

50 
	#SCM_TIMESTAMP
 
SO_TIMESTAMP


	)

52 
	#SO_ACCEPTCONN
 30

	)

54 
	#SO_PEERSEC
 31

	)

55 
	#SO_PASSSEC
 34

	)

56 
	#SO_TIMESTAMPNS
 35

	)

57 
	#SCM_TIMESTAMPNS
 
SO_TIMESTAMPNS


	)

59 
	#SO_MARK
 36

	)

61 
	#SO_TIMESTAMPING
 37

	)

62 
	#SCM_TIMESTAMPING
 
SO_TIMESTAMPING


	)

64 
	#SO_PROTOCOL
 38

	)

65 
	#SO_DOMAIN
 39

	)

67 
	#SO_RXQ_OVFL
 40

	)

69 
	#SO_WIFI_STATUS
 41

	)

70 
	#SCM_WIFI_STATUS
 
SO_WIFI_STATUS


	)

71 
	#SO_PEEK_OFF
 42

	)

74 
	#SO_NOFCS
 43

	)

	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/bits/libc-lock.h

19 #iâdeà
_BITS_LIBC_LOCK_H


20 
	#_BITS_LIBC_LOCK_H
 1

	)

22 
	~<±h»ad.h
>

23 
	#__Ãed_NULL


	)

24 
	~<¡ddef.h
>

27 #ifdeà
_LIBC


28 
	~<lowËv–lock.h
>

29 
	~<s.h
>

30 
	~<±h»ad-funùiÚs.h
>

31 
	~<”ºo.h
>

32 
	~<gnu/İtiÚ-groups.h
>

36 #ià
defšed
 
_LIBC
 || defšed 
_IO_MTSAFE_IO


37 #ià(
defšed
 
NOT_IN_libc
 && !defšed 
IS_IN_lib±h»ad
è|| !defšed 
_LIBC


38 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

40 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t__libc_lock_»cursive_t
;

43 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

53 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

54 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

58 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

59 #ià
LLL_LOCK_INITIALIZER
 == 0

60 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

61 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

63 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

64 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

66 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

67 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

69 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

70 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

71 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

72 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

76 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

77 
	#__libc_lock_š™_»cursive
(
NAME
) \

78 ((
NAME
èğ(
__libc_lock_»cursive_t
è
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

80 
	#__libc_lock_š™_»cursive
(
NAME
) \

82 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

84 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

85 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

86 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

87 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

88 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

90 } 0)

	)

94 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

95 
	#__libc_lock_fši_»cursive
(
NAME
è((è0)

	)

97 
	#__libc_lock_fši_»cursive
(
NAME
) \

98 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

102 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

103 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

107 
__libc_lock_lock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

108 
libc_hidd’_´Ùo
 (
__libc_lock_lock_»cursive_â
);

110 #ià
__OPTION_EGLIBC_BIG_MACROS


111 
	#__libc_lock_lock_»cursive
(
NAME
) \

113 *
£lf
 = 
THREAD_SELF
; \

114 ià((
NAME
).
owÃr
 !ğ
£lf
) \

116 
	`Îl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

117 (
NAME
).
owÃr
 = 
£lf
; \

119 ++(
NAME
).
út
; \

120 } 0)

	)

122 
	#__libc_lock_lock_»cursive
(
NAME
) \

123 
	`__libc_lock_lock_»cursive_â
 (&(
NAME
))

	)

126 
	#__libc_lock_lock_»cursive
(
NAME
) \

127 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

131 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

132 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

136 
__libc_lock_Œylock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

137 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_»cursive_â
);

139 #ià
__OPTION_EGLIBC_BIG_MACROS


140 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

142 
»suÉ
 = 0; \

143 *
£lf
 = 
THREAD_SELF
; \

144 ià((
NAME
).
owÃr
 !ğ
£lf
) \

146 ià(
	`Îl_Œylock
 ((
NAME
).
lock
) == 0) \

148 (
NAME
).
owÃr
 = 
£lf
; \

149 (
NAME
).
út
 = 1; \

152 
»suÉ
 = 
EBUSY
; \

155 ++(
NAME
).
út
; \

156 
»suÉ
; \

157 })

	)

159 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

160 
	`__libc_lock_Œylock_»cursive_â
 (&(
NAME
))

	)

163 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

164 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

168 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

169 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

173 
__libc_lock_uÆock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

174 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_»cursive_â
);

176 #ià
__OPTION_EGLIBC_BIG_MACROS


178 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

180 ià(--(
NAME
).
út
 == 0) \

182 (
NAME
).
owÃr
 = 
NULL
; \

183 
	`Îl_uÆock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

185 } 0)

	)

187 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

188 
	`__libc_lock_uÆock_»cursive_â
 (&(
NAME
))

	)

191 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

192 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

199 
_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

200 (*
routše
è(*), *
¬g
);

201 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

202 
execu‹
);

205 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

206 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

207 
_ava
; \

208 ià(
DOIT
) { \

209 
_ava
 = 
	`PTFAVAIL
 (
_±h»ad_ş—nup_push_deãr
); \

210 ià(
_ava
) { \

211 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_push_deãr
, (&
_bufãr
, 
FCT
, \

212 
ARG
)); \

214 
_bufãr
.
__routše
 = (
FCT
); \

215 
_bufãr
.
__¬g
 = (
ARG
); \

218 
_ava
 = 0; \

219 }

	)

222 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

223 ià(
_ava
) { \

224 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

225 } ià(
DOIT
) \

226 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
); \

227 
	}

	)
}

232 #ifdeà
_LIBC


233 
	~"libc-lockP.h
"

	@/usr/include/bits/predefs.h

19 #iâdeà
_PREDEFS_H


20 
	#_PREDEFS_H


	)

22 #iâdeà
_STDC_PREDEF_H


27 
	#__STDC_IEC_559__
 1

	)

28 
	#__STDC_IEC_559_COMPLEX__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_ç‰ach


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_fd‘ach


	)

14 
	#__¡ub_g‰y


	)

15 
	#__¡ub_lchmod


	)

16 
	#__¡ub_»voke


	)

17 
	#__¡ub_£ogš


	)

18 
	#__¡ub_sig»tuº


	)

19 
	#__¡ub_s¡k


	)

20 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ü—‹_moduË


	)

13 
	#__¡ub_ç‰ach


	)

14 
	#__¡ub_fchæags


	)

15 
	#__¡ub_fd‘ach


	)

16 
	#__¡ub_g‘_k”Ãl_syms


	)

17 
	#__¡ub_g‘msg


	)

18 
	#__¡ub_g‰y


	)

19 
	#__¡ub_lchmod


	)

20 
	#__¡ub_nfs£rvùl


	)

21 
	#__¡ub_putmsg


	)

22 
	#__¡ub_qu”y_moduË


	)

23 
	#__¡ub_»voke


	)

24 
	#__¡ub_£ogš


	)

25 
	#__¡ub_sig»tuº


	)

26 
	#__¡ub_s¡k


	)

27 
	#__¡ub_¡ty


	)

28 
	#__¡ub_u£lib


	)

	@/usr/include/linux/limits.h

1 #iâdeà
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

111 
	#EHWPOISON
 133

	)

	@/usr/include/asm/sockios.h

1 
	~<asm-g’”ic/sockios.h
>

	@/usr/include/bits/wchar-ldbl.h

19 #iâdeà
_WCHAR_H


23 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


24 
__BEGIN_NAMESPACE_C99


25 
__LDBL_REDIR_DECL
 (
fw´štf
);

26 
__LDBL_REDIR_DECL
 (
w´štf
);

27 
__LDBL_REDIR_DECL
 (
sw´štf
);

28 
__LDBL_REDIR_DECL
 (
vfw´štf
);

29 
__LDBL_REDIR_DECL
 (
vw´štf
);

30 
__LDBL_REDIR_DECL
 (
vsw´štf
);

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
	g__REDIRECT
 \

33 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

38 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

39 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

42 
__END_NAMESPACE_C99


45 #ifdeà
__USE_ISOC99


46 
__BEGIN_NAMESPACE_C99


47 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

48 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

49 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

50 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

51 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

54 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

55 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

58 
__END_NAMESPACE_C99


61 #ifdeà
__USE_GNU


62 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

65 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


66 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

67 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

68 #ià
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar2.h

19 #iâdeà
_WCHAR_H


24 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

25 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

26 
size_t
 
__ns1
è
__THROW
;

27 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

28 (
wch¬_t
 *
__»¡riù
 
__s1
,

29 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

30 
wmemıy
);

31 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

32 (
wch¬_t
 *
__»¡riù
 
__s1
,

33 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

34 
size_t
 
__ns1
), 
__wmemıy_chk
)

35 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

38 
__fÜtify_funùiÚ
 
wch¬_t
 *

39 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

40 
size_t
 
__n
))

42 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

44 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

45  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

46 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

48 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

49  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

50 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

52  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

53 
	}
}

56 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

57 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

58 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

59 cÚ¡ 
wch¬_t
 *
__s2
,

60 
size_t
 
__n
), 
wmemmove
);

61 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

62 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

63 
size_t
 
__n
, size_ˆ
__ns1
), 
__wmemmove_chk
)

64 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

67 
__fÜtify_funùiÚ
 
wch¬_t
 *

68 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
))

70 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

72 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

73  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

74 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

76 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

77  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

78 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

80  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

81 
	}
}

84 #ifdeà
__USE_GNU


85 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

86 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

87 
size_t
 
__ns1
è
__THROW
;

88 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

89 (
wch¬_t
 *
__»¡riù
 
__s1
,

90 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
,

91 
size_t
 
__n
), 
wmempıy
);

92 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

93 (
wch¬_t
 *
__»¡riù
 
__s1
,

94 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

95 
size_t
 
__ns1
), 
__wmempıy_chk
)

96 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

99 
__fÜtify_funùiÚ
 
wch¬_t
 *

100 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, cÚ¡ wch¬_ˆ*__»¡riù 
__s2
,

101 
size_t
 
__n
))

103 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

105 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

106  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

107 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

109 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

110  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

111 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

113  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

114 
	}
}

118 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

119 
size_t
 
__ns
è
__THROW
;

120 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

121 
size_t
 
__n
), 
wmem£t
);

122 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

123 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

124 
size_t
 
__ns
), 
__wmem£t_chk
)

125 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

128 
__fÜtify_funùiÚ
 
wch¬_t
 *

129 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

131 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

133 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

134  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

136 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

137  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

138 
	`__bos0
 (
__s
è/  (
wch¬_t
));

140  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

141 
	}
}

144 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

146 
size_t
 
__n
è
__THROW
;

147 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

148 (
wch¬_t
 *
__»¡riù
 
__de¡
,

149 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

151 
__fÜtify_funùiÚ
 
wch¬_t
 *

152 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

154 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

155  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

156  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

157 
	}
}

160 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

161 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

162 
size_t
 
__de¡Ën
è
__THROW
;

163 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
,

164 (
wch¬_t
 *
__»¡riù
 
__de¡
,

165 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wııy
);

167 
__fÜtify_funùiÚ
 
wch¬_t
 *

168 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

170 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

171  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

172  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

173 
	}
}

176 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

177 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

178 
size_t
 
__de¡Ën
è
__THROW
;

179 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

180 (
wch¬_t
 *
__»¡riù
 
__de¡
,

181 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

182 
size_t
 
__n
), 
wc¢ıy
);

183 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

184 (
wch¬_t
 *
__»¡riù
 
__de¡
,

185 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

186 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

187 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

190 
__fÜtify_funùiÚ
 
wch¬_t
 *

191 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

192 
size_t
 
__n
))

194 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

196 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

197  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

198 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

199 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

200  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

201 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

203  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

204 
	}
}

207 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

208 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

209 
size_t
 
__de¡Ën
è
__THROW
;

210 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

211 (
wch¬_t
 *
__»¡riù
 
__de¡
,

212 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

213 
size_t
 
__n
), 
wınıy
);

214 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

215 (
wch¬_t
 *
__»¡riù
 
__de¡
,

216 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

217 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

218 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

221 
__fÜtify_funùiÚ
 
wch¬_t
 *

222 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

223 
size_t
 
__n
))

225 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

227 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

228  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

229 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

230 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

231  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

232 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

234  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

235 
	}
}

238 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

239 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

240 
size_t
 
__de¡Ën
è
__THROW
;

241 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

242 (
wch¬_t
 *
__»¡riù
 
__de¡
,

243 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

245 
__fÜtify_funùiÚ
 
wch¬_t
 *

246 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
))

248 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

249  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

250  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

251 
	}
}

254 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

255 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

256 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

257 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

258 (
wch¬_t
 *
__»¡riù
 
__de¡
,

259 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

260 
size_t
 
__n
), 
wc¢ÿt
);

262 
__fÜtify_funùiÚ
 
wch¬_t
 *

263 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, cÚ¡ wch¬_ˆ*__»¡riù 
__¤c
,

264 
size_t
 
__n
))

266 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

267  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

268 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

269  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

270 
	}
}

273 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

274 
__æag
, 
size_t
 
__s_Ën
,

275 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

276 
__THROW
 ;

278 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

279 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

280 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

281 
sw´štf
);

283 #ifdeà
__va_¬g_·ck


284 
__fÜtify_funùiÚ
 

285 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

286 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

288 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

289  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

290 
	`__bos
 (
__s
è/  (
wch¬_t
),

291 
__fmt
, 
	`__va_¬g_·ck
 ());

292  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

293 
	}
}

294 #–ià!
defšed
 
__ılu¥lus


296 
	#sw´štf
(
s
, 
n
, ...) \

297 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

298 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

299 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

300 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

303 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

304 
__æag
, 
size_t
 
__s_Ën
,

305 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

306 
__gnuc_va_li¡
 
__¬g
)

307 
__THROW
 ;

309 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

310 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

311 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
,

312 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

314 
__fÜtify_funùiÚ
 

315 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

316 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

318 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

319  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

320 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

321  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

322 
	}
}

325 #ià
__USE_FORTIFY_LEVEL
 > 1

327 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

328 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

329 
__w´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

331 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

332 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

333 
__gnuc_va_li¡
 
__­
);

334 
__vw´štf_chk
 (
__æag
, cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

335 
__gnuc_va_li¡
 
__­
);

337 #ifdeà
__va_¬g_·ck


338 
__fÜtify_funùiÚ
 

339 
	$w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

341  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

342 
	}
}

344 
__fÜtify_funùiÚ
 

345 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, cÚ¡ 
wch¬_t
 *__»¡riù 
__fmt
, ...)

347  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

348 
	`__va_¬g_·ck
 ());

349 
	}
}

350 #–ià!
defšed
 
__ılu¥lus


351 
	#w´štf
(...) \

352 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

353 
	#fw´štf
(
¡»am
, ...) \

354 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

357 
__fÜtify_funùiÚ
 

358 
	$vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

360  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

361 
	}
}

363 
__fÜtify_funùiÚ
 

364 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

365 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

367  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

368 
	}
}

372 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

373 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

374 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

375 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

376 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

377 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

378 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

379 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

380 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

383 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

384 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

386 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

388 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

389  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

390 
__n
, 
__¡»am
);

392 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

393  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

394 
__n
, 
__¡»am
);

396  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

397 
	}
}

399 #ifdeà
__USE_GNU


400 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

401 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

402 
__wur
;

403 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

404 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

405 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

406 
__wur
;

407 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

408 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

409 
__FILE
 *
__»¡riù
 
__¡»am
),

410 
__fg‘ws_uÆocked_chk
)

411 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

414 
__fÜtify_funùiÚ
 
__wur
 
wch¬_t
 *

415 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

417 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

419 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

420  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

421 
__n
, 
__¡»am
);

423 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

424  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

425 
__n
, 
__¡»am
);

427  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

428 
	}
}

432 
size_t
 
	$__wütomb_chk
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

433 
mb¡©e_t
 *
__»¡riù
 
__p
,

434 
size_t
 
__buæ’
è
__THROW
 
__wur
;

435 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

436 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

437 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

439 
__fÜtify_funùiÚ
 
__wur
 
size_t


440 
	`__NTH
 (
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

441 
mb¡©e_t
 *
__»¡riù
 
__ps
))

446 
	#__WCHAR_MB_LEN_MAX
 16

	)

447 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


450 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

451  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

452  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

453 
	}
}

456 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

457 cÚ¡ **
__»¡riù
 
__¤c
,

458 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

459 
size_t
 
__d¡Ën
è
__THROW
;

460 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

461 (
wch¬_t
 *
__»¡riù
 
__d¡
,

462 cÚ¡ **
__»¡riù
 
__¤c
,

463 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

464 
mb¤towcs
);

465 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

466 (
wch¬_t
 *
__»¡riù
 
__d¡
,

467 cÚ¡ **
__»¡riù
 
__¤c
,

468 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

469 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

470 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

473 
__fÜtify_funùiÚ
 
size_t


474 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

475 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

477 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

479 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

480  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

481 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

483 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

484  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

485 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

487  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

488 
	}
}

491 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

492 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

493 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

494 
size_t
 
__d¡Ën
è
__THROW
;

495 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

496 (*
__»¡riù
 
__d¡
,

497 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

498 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

499 
wc¤tombs
);

500 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

501 (*
__»¡riù
 
__d¡
,

502 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

503 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

504 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

505 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

507 
__fÜtify_funùiÚ
 
size_t


508 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

509 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

511 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

513 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

514  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

516 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

517  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

519  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

520 
	}
}

523 #ifdeà
__USE_GNU


524 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

525 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

526 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

527 
size_t
 
__d¡Ën
è
__THROW
;

528 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

529 (
wch¬_t
 *
__»¡riù
 
__d¡
,

530 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

531 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

532 
mb¢¹owcs
);

533 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

534 (
wch¬_t
 *
__»¡riù
 
__d¡
,

535 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

536 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

537 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

538 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

541 
__fÜtify_funùiÚ
 
size_t


542 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ **__»¡riù 
__¤c
,

543 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

545 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

547 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

548  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

549 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

551 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

552  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

553 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

555  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

556 
	}
}

559 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

560 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

561 
size_t
 
__nwc
, size_ˆ
__Ën
,

562 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

563 
__THROW
;

564 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

565 (*
__»¡riù
 
__d¡
,

566 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

567 
size_t
 
__nwc
, size_ˆ
__Ën
,

568 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

569 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

570 (*
__»¡riù
 
__d¡
,

571 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

572 
size_t
 
__nwc
, size_ˆ
__Ën
,

573 
mb¡©e_t
 *
__»¡riù
 
__ps
,

574 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

575 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

577 
__fÜtify_funùiÚ
 
size_t


578 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 **__»¡riù 
__¤c
,

579 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

581 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

583 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

584  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

585 
	`__bos
 (
__d¡
));

587 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

588  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

589 
	`__bos
 (
__d¡
));

591  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

592 
	}
}

	@/usr/include/gnu/option-groups.h

10 #iâdeà
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CRYPT
 1

	)

20 
	#__OPTION_EGLIBC_CRYPT_UFC
 1

	)

21 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

22 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

23 
	#__OPTION_EGLIBC_ENVZ
 1

	)

24 
	#__OPTION_EGLIBC_FCVT
 1

	)

25 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

26 
	#__OPTION_EGLIBC_FSTAB
 1

	)

27 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

28 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

29 
	#__OPTION_EGLIBC_IDN
 1

	)

30 
	#__OPTION_EGLIBC_INET
 1

	)

31 
	#__OPTION_EGLIBC_INET_ANL
 1

	)

32 
	#__OPTION_EGLIBC_LIBM
 1

	)

33 
	#__OPTION_EGLIBC_LIBM_BIG
 1

	)

34 
	#__OPTION_EGLIBC_LOCALES
 1

	)

35 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

36 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

37 
	#__OPTION_EGLIBC_NIS
 1

	)

38 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

39 
	#__OPTION_EGLIBC_RCMD
 1

	)

40 
	#__OPTION_EGLIBC_RTLD_DEBUG
 1

	)

41 
	#__OPTION_EGLIBC_SPAWN
 1

	)

42 
	#__OPTION_EGLIBC_STREAMS
 1

	)

43 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

44 
	#__OPTION_EGLIBC_UTMP
 1

	)

45 
	#__OPTION_EGLIBC_UTMPX
 1

	)

46 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

47 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

48 
	#__OPTION_POSIX_REGEXP
 1

	)

49 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

50 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/asm-generic/sockios.h

1 #iâdeà
__ASM_GENERIC_SOCKIOS_H


2 
	#__ASM_GENERIC_SOCKIOS_H


	)

5 
	#FIOSETOWN
 0x8901

	)

6 
	#SIOCSPGRP
 0x8902

	)

7 
	#FIOGETOWN
 0x8903

	)

8 
	#SIOCGPGRP
 0x8904

	)

9 
	#SIOCATMARK
 0x8905

	)

10 
	#SIOCGSTAMP
 0x8906

	)

11 
	#SIOCGSTAMPNS
 0x8907

	)

	@
1
.
1
/usr/include
755
20911
dalvikvm/Main.cpp
dexdump/DexDump.cpp
dexlist/DexList.cpp
dexopt/OptMain.cpp
dvz/dvz.cpp
libdex/CmdUtils.cpp
libdex/CmdUtils.h
libdex/DexCatch.cpp
libdex/DexCatch.h
libdex/DexClass.cpp
libdex/DexClass.h
libdex/DexDataMap.cpp
libdex/DexDataMap.h
libdex/DexDebugInfo.cpp
libdex/DexDebugInfo.h
libdex/DexFile.cpp
libdex/DexFile.h
libdex/DexInlines.cpp
libdex/DexOpcodes.cpp
libdex/DexOpcodes.h
libdex/DexOptData.cpp
libdex/DexOptData.h
libdex/DexProto.cpp
libdex/DexProto.h
libdex/DexSwapVerify.cpp
libdex/DexUtf.cpp
libdex/DexUtf.h
libdex/InstrUtils.cpp
libdex/InstrUtils.h
libdex/Leb128.cpp
libdex/Leb128.h
libdex/OptInvocation.cpp
libdex/OptInvocation.h
libdex/SysUtil.cpp
libdex/SysUtil.h
libdex/ZipArchive.cpp
libdex/ZipArchive.h
libdex/sha1.cpp
libdex/sha1.h
tests/023-many-interfaces/iface-gen.c
tools/dmtracedump/CreateTestTrace.c
tools/dmtracedump/TraceDump.c
tools/gdbjithelper/gdbjithelper.c
tools/hprof-conv/HprofConv.c
unit-tests/dvmHumanReadableDescriptor_test.cpp
vm/AllocTracker.cpp
vm/AllocTracker.h
vm/Atomic.cpp
vm/Atomic.h
vm/AtomicCache.cpp
vm/AtomicCache.h
vm/BitVector.cpp
vm/BitVector.h
vm/Bits.h
vm/CheckJni.cpp
vm/Common.h
vm/Dalvik.h
vm/DalvikVersion.h
vm/Ddm.cpp
vm/Ddm.h
vm/Debugger.cpp
vm/Debugger.h
vm/DvmDex.cpp
vm/DvmDex.h
vm/Exception.cpp
vm/Exception.h
vm/Globals.h
vm/Hash.cpp
vm/Hash.h
vm/IndirectRefTable.cpp
vm/IndirectRefTable.h
vm/Init.cpp
vm/Init.h
vm/InitRefs.cpp
vm/InlineNative.cpp
vm/InlineNative.h
vm/Inlines.cpp
vm/Inlines.h
vm/Intern.cpp
vm/Intern.h
vm/JarFile.cpp
vm/JarFile.h
vm/Jni.cpp
vm/JniInternal.h
vm/LinearAlloc.cpp
vm/LinearAlloc.h
vm/Misc.cpp
vm/Misc.h
vm/Native.cpp
vm/Native.h
vm/PointerSet.cpp
vm/PointerSet.h
vm/Profile.cpp
vm/Profile.h
vm/RawDexFile.cpp
vm/RawDexFile.h
vm/ReferenceTable.cpp
vm/ReferenceTable.h
vm/ShadowAPI.cpp
vm/ShadowAPI.h
vm/SignalCatcher.cpp
vm/SignalCatcher.h
vm/StdioConverter.cpp
vm/StdioConverter.h
vm/Sync.cpp
vm/Sync.h
vm/Thread.cpp
vm/Thread.h
vm/UtfString.cpp
vm/UtfString.h
vm/alloc/Alloc.cpp
vm/alloc/Alloc.h
vm/alloc/CardTable.cpp
vm/alloc/CardTable.h
vm/alloc/Copying.cpp
vm/alloc/DdmHeap.cpp
vm/alloc/DdmHeap.h
vm/alloc/Heap.cpp
vm/alloc/Heap.h
vm/alloc/HeapBitmap.cpp
vm/alloc/HeapBitmap.h
vm/alloc/HeapBitmapInlines.h
vm/alloc/HeapDebug.cpp
vm/alloc/HeapDebug.h
vm/alloc/HeapInternal.h
vm/alloc/HeapSource.cpp
vm/alloc/HeapSource.h
vm/alloc/MarkSweep.cpp
vm/alloc/MarkSweep.h
vm/alloc/TEST/HeapBitmapTest/include/Dalvik.h
vm/alloc/TEST/HeapBitmapTest/include/cutils/ashmem.h
vm/alloc/TEST/HeapBitmapTest/main.c
vm/alloc/Verify.cpp
vm/alloc/Verify.h
vm/alloc/Visit.cpp
vm/alloc/Visit.h
vm/alloc/VisitInlines.h
vm/alloc/WriteBarrier.h
vm/analysis/CodeVerify.cpp
vm/analysis/CodeVerify.h
vm/analysis/DexPrepare.cpp
vm/analysis/DexPrepare.h
vm/analysis/DexVerify.cpp
vm/analysis/DexVerify.h
vm/analysis/Liveness.cpp
vm/analysis/Liveness.h
vm/analysis/Optimize.cpp
vm/analysis/Optimize.h
vm/analysis/RegisterMap.cpp
vm/analysis/RegisterMap.h
vm/analysis/VerifySubs.cpp
vm/analysis/VerifySubs.h
vm/analysis/VfyBasicBlock.cpp
vm/analysis/VfyBasicBlock.h
vm/arch/arm/HintsEABI.cpp
vm/arch/generic/Call.cpp
vm/arch/generic/Hints.cpp
vm/arch/x86-atom/Hints386ABI.cpp
vm/arch/x86/Hints386ABI.cpp
vm/compiler/Compiler.cpp
vm/compiler/Compiler.h
vm/compiler/CompilerIR.h
vm/compiler/CompilerInternals.h
vm/compiler/CompilerUtility.h
vm/compiler/Dataflow.cpp
vm/compiler/Dataflow.h
vm/compiler/Frontend.cpp
vm/compiler/InlineTransformation.cpp
vm/compiler/IntermediateRep.cpp
vm/compiler/Loop.cpp
vm/compiler/Loop.h
vm/compiler/Ralloc.cpp
vm/compiler/SSATransformation.cpp
vm/compiler/Utility.cpp
vm/compiler/codegen/CodegenFactory.cpp
vm/compiler/codegen/CompilerCodegen.h
vm/compiler/codegen/Optimizer.h
vm/compiler/codegen/Ralloc.h
vm/compiler/codegen/RallocUtil.cpp
vm/compiler/codegen/arm/ArchFactory.cpp
vm/compiler/codegen/arm/ArchUtility.cpp
vm/compiler/codegen/arm/ArmLIR.h
vm/compiler/codegen/arm/ArmRallocUtil.cpp
vm/compiler/codegen/arm/Assemble.cpp
vm/compiler/codegen/arm/CalloutHelper.h
vm/compiler/codegen/arm/Codegen.h
vm/compiler/codegen/arm/CodegenCommon.cpp
vm/compiler/codegen/arm/CodegenDriver.cpp
vm/compiler/codegen/arm/FP/Thumb2VFP.cpp
vm/compiler/codegen/arm/FP/ThumbPortableFP.cpp
vm/compiler/codegen/arm/FP/ThumbVFP.cpp
vm/compiler/codegen/arm/GlobalOptimizations.cpp
vm/compiler/codegen/arm/LocalOptimizations.cpp
vm/compiler/codegen/arm/Thumb/Factory.cpp
vm/compiler/codegen/arm/Thumb/Gen.cpp
vm/compiler/codegen/arm/Thumb/Ralloc.cpp
vm/compiler/codegen/arm/Thumb2/Factory.cpp
vm/compiler/codegen/arm/Thumb2/Gen.cpp
vm/compiler/codegen/arm/Thumb2/Ralloc.cpp
vm/compiler/codegen/arm/armv5te-vfp/ArchVariant.cpp
vm/compiler/codegen/arm/armv5te-vfp/ArchVariant.h
vm/compiler/codegen/arm/armv5te-vfp/Codegen.cpp
vm/compiler/codegen/arm/armv5te/ArchVariant.cpp
vm/compiler/codegen/arm/armv5te/ArchVariant.h
vm/compiler/codegen/arm/armv5te/Codegen.cpp
vm/compiler/codegen/arm/armv5te/MethodCodegenDriver.cpp
vm/compiler/codegen/arm/armv7-a-neon/ArchVariant.cpp
vm/compiler/codegen/arm/armv7-a-neon/ArchVariant.h
vm/compiler/codegen/arm/armv7-a-neon/Codegen.cpp
vm/compiler/codegen/arm/armv7-a-neon/MethodCodegenDriver.cpp
vm/compiler/codegen/arm/armv7-a/ArchVariant.cpp
vm/compiler/codegen/arm/armv7-a/ArchVariant.h
vm/compiler/codegen/arm/armv7-a/Codegen.cpp
vm/compiler/codegen/x86/ArchUtility.cpp
vm/compiler/codegen/x86/Assemble.cpp
vm/compiler/codegen/x86/CalloutHelper.h
vm/compiler/codegen/x86/Codegen.h
vm/compiler/codegen/x86/CodegenDriver.cpp
vm/compiler/codegen/x86/X86LIR.h
vm/compiler/codegen/x86/ia32/ArchVariant.cpp
vm/compiler/codegen/x86/ia32/ArchVariant.h
vm/compiler/codegen/x86/ia32/Codegen.cpp
vm/compiler/template/armv5te-vfp/TemplateOpList.h
vm/compiler/template/armv5te/TemplateOpList.h
vm/compiler/template/armv7-a-neon/TemplateOpList.h
vm/compiler/template/armv7-a/TemplateOpList.h
vm/compiler/template/ia32/TemplateOpList.h
vm/hprof/Hprof.cpp
vm/hprof/Hprof.h
vm/hprof/HprofClass.cpp
vm/hprof/HprofHeap.cpp
vm/hprof/HprofOutput.cpp
vm/hprof/HprofString.cpp
vm/interp/Interp.cpp
vm/interp/Interp.h
vm/interp/InterpDefs.h
vm/interp/InterpState.h
vm/interp/Jit.cpp
vm/interp/Jit.h
vm/interp/Stack.cpp
vm/interp/Stack.h
vm/jdwp/ExpandBuf.cpp
vm/jdwp/ExpandBuf.h
vm/jdwp/Jdwp.h
vm/jdwp/JdwpAdb.cpp
vm/jdwp/JdwpConstants.cpp
vm/jdwp/JdwpConstants.h
vm/jdwp/JdwpEvent.cpp
vm/jdwp/JdwpEvent.h
vm/jdwp/JdwpHandler.cpp
vm/jdwp/JdwpHandler.h
vm/jdwp/JdwpMain.cpp
vm/jdwp/JdwpPriv.h
vm/jdwp/JdwpSocket.cpp
vm/mterp/Mterp.cpp
vm/mterp/Mterp.h
vm/mterp/armv5te/debug.cpp
vm/mterp/c/OP_ADD_DOUBLE.cpp
vm/mterp/c/OP_ADD_DOUBLE_2ADDR.cpp
vm/mterp/c/OP_ADD_FLOAT.cpp
vm/mterp/c/OP_ADD_FLOAT_2ADDR.cpp
vm/mterp/c/OP_ADD_INT.cpp
vm/mterp/c/OP_ADD_INT_2ADDR.cpp
vm/mterp/c/OP_ADD_INT_LIT16.cpp
vm/mterp/c/OP_ADD_INT_LIT8.cpp
vm/mterp/c/OP_ADD_LONG.cpp
vm/mterp/c/OP_ADD_LONG_2ADDR.cpp
vm/mterp/c/OP_AGET.cpp
vm/mterp/c/OP_AGET_BOOLEAN.cpp
vm/mterp/c/OP_AGET_BYTE.cpp
vm/mterp/c/OP_AGET_CHAR.cpp
vm/mterp/c/OP_AGET_OBJECT.cpp
vm/mterp/c/OP_AGET_SHORT.cpp
vm/mterp/c/OP_AGET_WIDE.cpp
vm/mterp/c/OP_AND_INT.cpp
vm/mterp/c/OP_AND_INT_2ADDR.cpp
vm/mterp/c/OP_AND_INT_LIT16.cpp
vm/mterp/c/OP_AND_INT_LIT8.cpp
vm/mterp/c/OP_AND_LONG.cpp
vm/mterp/c/OP_AND_LONG_2ADDR.cpp
vm/mterp/c/OP_APUT.cpp
vm/mterp/c/OP_APUT_BOOLEAN.cpp
vm/mterp/c/OP_APUT_BYTE.cpp
vm/mterp/c/OP_APUT_CHAR.cpp
vm/mterp/c/OP_APUT_OBJECT.cpp
vm/mterp/c/OP_APUT_SHORT.cpp
vm/mterp/c/OP_APUT_WIDE.cpp
vm/mterp/c/OP_ARRAY_LENGTH.cpp
vm/mterp/c/OP_BREAKPOINT.cpp
vm/mterp/c/OP_CHECK_CAST.cpp
vm/mterp/c/OP_CMPG_DOUBLE.cpp
vm/mterp/c/OP_CMPG_FLOAT.cpp
vm/mterp/c/OP_CMPL_DOUBLE.cpp
vm/mterp/c/OP_CMPL_FLOAT.cpp
vm/mterp/c/OP_CMP_LONG.cpp
vm/mterp/c/OP_CONST.cpp
vm/mterp/c/OP_CONST_16.cpp
vm/mterp/c/OP_CONST_4.cpp
vm/mterp/c/OP_CONST_CLASS.cpp
vm/mterp/c/OP_CONST_HIGH16.cpp
vm/mterp/c/OP_CONST_STRING.cpp
vm/mterp/c/OP_CONST_STRING_JUMBO.cpp
vm/mterp/c/OP_CONST_WIDE.cpp
vm/mterp/c/OP_CONST_WIDE_16.cpp
vm/mterp/c/OP_CONST_WIDE_32.cpp
vm/mterp/c/OP_CONST_WIDE_HIGH16.cpp
vm/mterp/c/OP_DIV_DOUBLE.cpp
vm/mterp/c/OP_DIV_DOUBLE_2ADDR.cpp
vm/mterp/c/OP_DIV_FLOAT.cpp
vm/mterp/c/OP_DIV_FLOAT_2ADDR.cpp
vm/mterp/c/OP_DIV_INT.cpp
vm/mterp/c/OP_DIV_INT_2ADDR.cpp
vm/mterp/c/OP_DIV_INT_LIT16.cpp
vm/mterp/c/OP_DIV_INT_LIT8.cpp
vm/mterp/c/OP_DIV_LONG.cpp
vm/mterp/c/OP_DIV_LONG_2ADDR.cpp
vm/mterp/c/OP_DOUBLE_TO_FLOAT.cpp
vm/mterp/c/OP_DOUBLE_TO_INT.cpp
vm/mterp/c/OP_DOUBLE_TO_LONG.cpp
vm/mterp/c/OP_EXECUTE_INLINE.cpp
vm/mterp/c/OP_EXECUTE_INLINE_RANGE.cpp
vm/mterp/c/OP_FILLED_NEW_ARRAY.cpp
vm/mterp/c/OP_FILLED_NEW_ARRAY_RANGE.cpp
vm/mterp/c/OP_FILL_ARRAY_DATA.cpp
vm/mterp/c/OP_FLOAT_TO_DOUBLE.cpp
vm/mterp/c/OP_FLOAT_TO_INT.cpp
vm/mterp/c/OP_FLOAT_TO_LONG.cpp
vm/mterp/c/OP_GOTO.cpp
vm/mterp/c/OP_GOTO_16.cpp
vm/mterp/c/OP_GOTO_32.cpp
vm/mterp/c/OP_IF_EQ.cpp
vm/mterp/c/OP_IF_EQZ.cpp
vm/mterp/c/OP_IF_GE.cpp
vm/mterp/c/OP_IF_GEZ.cpp
vm/mterp/c/OP_IF_GT.cpp
vm/mterp/c/OP_IF_GTZ.cpp
vm/mterp/c/OP_IF_LE.cpp
vm/mterp/c/OP_IF_LEZ.cpp
vm/mterp/c/OP_IF_LT.cpp
vm/mterp/c/OP_IF_LTZ.cpp
vm/mterp/c/OP_IF_NE.cpp
vm/mterp/c/OP_IF_NEZ.cpp
vm/mterp/c/OP_IGET.cpp
vm/mterp/c/OP_IGET_BOOLEAN.cpp
vm/mterp/c/OP_IGET_BYTE.cpp
vm/mterp/c/OP_IGET_CHAR.cpp
vm/mterp/c/OP_IGET_OBJECT.cpp
vm/mterp/c/OP_IGET_OBJECT_QUICK.cpp
vm/mterp/c/OP_IGET_OBJECT_VOLATILE.cpp
vm/mterp/c/OP_IGET_QUICK.cpp
vm/mterp/c/OP_IGET_SHORT.cpp
vm/mterp/c/OP_IGET_VOLATILE.cpp
vm/mterp/c/OP_IGET_WIDE.cpp
vm/mterp/c/OP_IGET_WIDE_QUICK.cpp
vm/mterp/c/OP_IGET_WIDE_VOLATILE.cpp
vm/mterp/c/OP_INSTANCE_OF.cpp
vm/mterp/c/OP_INT_TO_BYTE.cpp
vm/mterp/c/OP_INT_TO_CHAR.cpp
vm/mterp/c/OP_INT_TO_DOUBLE.cpp
vm/mterp/c/OP_INT_TO_FLOAT.cpp
vm/mterp/c/OP_INT_TO_LONG.cpp
vm/mterp/c/OP_INT_TO_SHORT.cpp
vm/mterp/c/OP_INVOKE_DIRECT.cpp
vm/mterp/c/OP_INVOKE_DIRECT_RANGE.cpp
vm/mterp/c/OP_INVOKE_INTERFACE.cpp
vm/mterp/c/OP_INVOKE_INTERFACE_RANGE.cpp
vm/mterp/c/OP_INVOKE_OBJECT_INIT_RANGE.cpp
vm/mterp/c/OP_INVOKE_STATIC.cpp
vm/mterp/c/OP_INVOKE_STATIC_RANGE.cpp
vm/mterp/c/OP_INVOKE_SUPER.cpp
vm/mterp/c/OP_INVOKE_SUPER_QUICK.cpp
vm/mterp/c/OP_INVOKE_SUPER_QUICK_RANGE.cpp
vm/mterp/c/OP_INVOKE_SUPER_RANGE.cpp
vm/mterp/c/OP_INVOKE_VIRTUAL.cpp
vm/mterp/c/OP_INVOKE_VIRTUAL_QUICK.cpp
vm/mterp/c/OP_INVOKE_VIRTUAL_QUICK_RANGE.cpp
vm/mterp/c/OP_INVOKE_VIRTUAL_RANGE.cpp
vm/mterp/c/OP_IPUT.cpp
vm/mterp/c/OP_IPUT_BOOLEAN.cpp
vm/mterp/c/OP_IPUT_BYTE.cpp
vm/mterp/c/OP_IPUT_CHAR.cpp
vm/mterp/c/OP_IPUT_OBJECT.cpp
vm/mterp/c/OP_IPUT_OBJECT_QUICK.cpp
vm/mterp/c/OP_IPUT_OBJECT_VOLATILE.cpp
vm/mterp/c/OP_IPUT_QUICK.cpp
vm/mterp/c/OP_IPUT_SHORT.cpp
vm/mterp/c/OP_IPUT_VOLATILE.cpp
vm/mterp/c/OP_IPUT_WIDE.cpp
vm/mterp/c/OP_IPUT_WIDE_QUICK.cpp
vm/mterp/c/OP_IPUT_WIDE_VOLATILE.cpp
vm/mterp/c/OP_LONG_TO_DOUBLE.cpp
vm/mterp/c/OP_LONG_TO_FLOAT.cpp
vm/mterp/c/OP_LONG_TO_INT.cpp
vm/mterp/c/OP_MONITOR_ENTER.cpp
vm/mterp/c/OP_MONITOR_EXIT.cpp
vm/mterp/c/OP_MOVE.cpp
vm/mterp/c/OP_MOVE_16.cpp
vm/mterp/c/OP_MOVE_EXCEPTION.cpp
vm/mterp/c/OP_MOVE_FROM16.cpp
vm/mterp/c/OP_MOVE_OBJECT.cpp
vm/mterp/c/OP_MOVE_OBJECT_16.cpp
vm/mterp/c/OP_MOVE_OBJECT_FROM16.cpp
vm/mterp/c/OP_MOVE_RESULT.cpp
vm/mterp/c/OP_MOVE_RESULT_OBJECT.cpp
vm/mterp/c/OP_MOVE_RESULT_WIDE.cpp
vm/mterp/c/OP_MOVE_WIDE.cpp
vm/mterp/c/OP_MOVE_WIDE_16.cpp
vm/mterp/c/OP_MOVE_WIDE_FROM16.cpp
vm/mterp/c/OP_MUL_DOUBLE.cpp
vm/mterp/c/OP_MUL_DOUBLE_2ADDR.cpp
vm/mterp/c/OP_MUL_FLOAT.cpp
vm/mterp/c/OP_MUL_FLOAT_2ADDR.cpp
vm/mterp/c/OP_MUL_INT.cpp
vm/mterp/c/OP_MUL_INT_2ADDR.cpp
vm/mterp/c/OP_MUL_INT_LIT16.cpp
vm/mterp/c/OP_MUL_INT_LIT8.cpp
vm/mterp/c/OP_MUL_LONG.cpp
vm/mterp/c/OP_MUL_LONG_2ADDR.cpp
vm/mterp/c/OP_NEG_DOUBLE.cpp
vm/mterp/c/OP_NEG_FLOAT.cpp
vm/mterp/c/OP_NEG_INT.cpp
vm/mterp/c/OP_NEG_LONG.cpp
vm/mterp/c/OP_NEW_ARRAY.cpp
vm/mterp/c/OP_NEW_INSTANCE.cpp
vm/mterp/c/OP_NOP.cpp
vm/mterp/c/OP_NOT_INT.cpp
vm/mterp/c/OP_NOT_LONG.cpp
vm/mterp/c/OP_OR_INT.cpp
vm/mterp/c/OP_OR_INT_2ADDR.cpp
vm/mterp/c/OP_OR_INT_LIT16.cpp
vm/mterp/c/OP_OR_INT_LIT8.cpp
vm/mterp/c/OP_OR_LONG.cpp
vm/mterp/c/OP_OR_LONG_2ADDR.cpp
vm/mterp/c/OP_PACKED_SWITCH.cpp
vm/mterp/c/OP_REM_DOUBLE.cpp
vm/mterp/c/OP_REM_DOUBLE_2ADDR.cpp
vm/mterp/c/OP_REM_FLOAT.cpp
vm/mterp/c/OP_REM_FLOAT_2ADDR.cpp
vm/mterp/c/OP_REM_INT.cpp
vm/mterp/c/OP_REM_INT_2ADDR.cpp
vm/mterp/c/OP_REM_INT_LIT16.cpp
vm/mterp/c/OP_REM_INT_LIT8.cpp
vm/mterp/c/OP_REM_LONG.cpp
vm/mterp/c/OP_REM_LONG_2ADDR.cpp
vm/mterp/c/OP_RETURN.cpp
vm/mterp/c/OP_RETURN_OBJECT.cpp
vm/mterp/c/OP_RETURN_VOID.cpp
vm/mterp/c/OP_RETURN_VOID_BARRIER.cpp
vm/mterp/c/OP_RETURN_WIDE.cpp
vm/mterp/c/OP_RSUB_INT.cpp
vm/mterp/c/OP_RSUB_INT_LIT8.cpp
vm/mterp/c/OP_SGET.cpp
vm/mterp/c/OP_SGET_BOOLEAN.cpp
vm/mterp/c/OP_SGET_BYTE.cpp
vm/mterp/c/OP_SGET_CHAR.cpp
vm/mterp/c/OP_SGET_OBJECT.cpp
vm/mterp/c/OP_SGET_OBJECT_VOLATILE.cpp
vm/mterp/c/OP_SGET_SHORT.cpp
vm/mterp/c/OP_SGET_VOLATILE.cpp
vm/mterp/c/OP_SGET_WIDE.cpp
vm/mterp/c/OP_SGET_WIDE_VOLATILE.cpp
vm/mterp/c/OP_SHL_INT.cpp
vm/mterp/c/OP_SHL_INT_2ADDR.cpp
vm/mterp/c/OP_SHL_INT_LIT8.cpp
vm/mterp/c/OP_SHL_LONG.cpp
vm/mterp/c/OP_SHL_LONG_2ADDR.cpp
vm/mterp/c/OP_SHR_INT.cpp
vm/mterp/c/OP_SHR_INT_2ADDR.cpp
vm/mterp/c/OP_SHR_INT_LIT8.cpp
vm/mterp/c/OP_SHR_LONG.cpp
vm/mterp/c/OP_SHR_LONG_2ADDR.cpp
vm/mterp/c/OP_SPARSE_SWITCH.cpp
vm/mterp/c/OP_SPUT.cpp
vm/mterp/c/OP_SPUT_BOOLEAN.cpp
vm/mterp/c/OP_SPUT_BYTE.cpp
vm/mterp/c/OP_SPUT_CHAR.cpp
vm/mterp/c/OP_SPUT_OBJECT.cpp
vm/mterp/c/OP_SPUT_OBJECT_VOLATILE.cpp
vm/mterp/c/OP_SPUT_SHORT.cpp
vm/mterp/c/OP_SPUT_VOLATILE.cpp
vm/mterp/c/OP_SPUT_WIDE.cpp
vm/mterp/c/OP_SPUT_WIDE_VOLATILE.cpp
vm/mterp/c/OP_SUB_DOUBLE.cpp
vm/mterp/c/OP_SUB_DOUBLE_2ADDR.cpp
vm/mterp/c/OP_SUB_FLOAT.cpp
vm/mterp/c/OP_SUB_FLOAT_2ADDR.cpp
vm/mterp/c/OP_SUB_INT.cpp
vm/mterp/c/OP_SUB_INT_2ADDR.cpp
vm/mterp/c/OP_SUB_LONG.cpp
vm/mterp/c/OP_SUB_LONG_2ADDR.cpp
vm/mterp/c/OP_THROW.cpp
vm/mterp/c/OP_THROW_VERIFICATION_ERROR.cpp
vm/mterp/c/OP_UNUSED_3E.cpp
vm/mterp/c/OP_UNUSED_3F.cpp
vm/mterp/c/OP_UNUSED_40.cpp
vm/mterp/c/OP_UNUSED_41.cpp
vm/mterp/c/OP_UNUSED_42.cpp
vm/mterp/c/OP_UNUSED_43.cpp
vm/mterp/c/OP_UNUSED_73.cpp
vm/mterp/c/OP_UNUSED_79.cpp
vm/mterp/c/OP_UNUSED_7A.cpp
vm/mterp/c/OP_UNUSED_FF.cpp
vm/mterp/c/OP_USHR_INT.cpp
vm/mterp/c/OP_USHR_INT_2ADDR.cpp
vm/mterp/c/OP_USHR_INT_LIT8.cpp
vm/mterp/c/OP_USHR_LONG.cpp
vm/mterp/c/OP_USHR_LONG_2ADDR.cpp
vm/mterp/c/OP_XOR_INT.cpp
vm/mterp/c/OP_XOR_INT_2ADDR.cpp
vm/mterp/c/OP_XOR_INT_LIT16.cpp
vm/mterp/c/OP_XOR_INT_LIT8.cpp
vm/mterp/c/OP_XOR_LONG.cpp
vm/mterp/c/OP_XOR_LONG_2ADDR.cpp
vm/mterp/c/gotoTargets.cpp
vm/mterp/c/header.cpp
vm/mterp/c/opcommon.cpp
vm/mterp/common/FindInterface.h
vm/mterp/common/asm-constants.h
vm/mterp/common/jit-config.h
vm/mterp/cstubs/enddefs.cpp
vm/mterp/cstubs/entry.cpp
vm/mterp/cstubs/stubdefs.cpp
vm/mterp/out/InterpC-allstubs.cpp
vm/mterp/out/InterpC-armv5te-vfp.cpp
vm/mterp/out/InterpC-armv5te.cpp
vm/mterp/out/InterpC-armv7-a-neon.cpp
vm/mterp/out/InterpC-armv7-a.cpp
vm/mterp/out/InterpC-portable.cpp
vm/mterp/out/InterpC-x86-atom.cpp
vm/mterp/out/InterpC-x86.cpp
vm/mterp/portable/enddefs.cpp
vm/mterp/portable/entry.cpp
vm/mterp/portable/stubdefs.cpp
vm/native/InternalNative.cpp
vm/native/InternalNative.h
vm/native/InternalNativePriv.h
vm/native/Test.cpp
vm/native/dalvik_bytecode_OpcodeInfo.cpp
vm/native/dalvik_system_DexFile.cpp
vm/native/dalvik_system_VMDebug.cpp
vm/native/dalvik_system_VMRuntime.cpp
vm/native/dalvik_system_VMStack.cpp
vm/native/dalvik_system_Zygote.cpp
vm/native/java_lang_Class.cpp
vm/native/java_lang_Double.cpp
vm/native/java_lang_Float.cpp
vm/native/java_lang_Math.cpp
vm/native/java_lang_Object.cpp
vm/native/java_lang_Runtime.cpp
vm/native/java_lang_String.cpp
vm/native/java_lang_System.cpp
vm/native/java_lang_Throwable.cpp
vm/native/java_lang_VMClassLoader.cpp
vm/native/java_lang_VMThread.cpp
vm/native/java_lang_reflect_AccessibleObject.cpp
vm/native/java_lang_reflect_Array.cpp
vm/native/java_lang_reflect_Constructor.cpp
vm/native/java_lang_reflect_Field.cpp
vm/native/java_lang_reflect_Method.cpp
vm/native/java_lang_reflect_Proxy.cpp
vm/native/java_util_concurrent_atomic_AtomicLong.cpp
vm/native/org_apache_harmony_dalvik_NativeTestTarget.cpp
vm/native/org_apache_harmony_dalvik_ddmc_DdmServer.cpp
vm/native/org_apache_harmony_dalvik_ddmc_DdmVmInternal.cpp
vm/native/sun_misc_Unsafe.cpp
vm/oo/AccessCheck.cpp
vm/oo/AccessCheck.h
vm/oo/Array.cpp
vm/oo/Array.h
vm/oo/Class.cpp
vm/oo/Class.h
vm/oo/Object.cpp
vm/oo/Object.h
vm/oo/ObjectInlines.h
vm/oo/Resolve.cpp
vm/oo/Resolve.h
vm/oo/TypeCheck.cpp
vm/oo/TypeCheck.h
vm/os/android.cpp
vm/os/linux.cpp
vm/os/os.h
vm/reflect/Annotation.cpp
vm/reflect/Proxy.cpp
vm/reflect/Reflect.cpp
vm/reflect/Reflect.h
vm/shadowlib/Buffer.h
vm/shadowlib/DalvikHeader.h
vm/shadowlib/HashTable.h
vm/shadowlib/JniUtility.h
vm/shadowlib/Lock.h
vm/shadowlib/Map.h
vm/shadowlib/Netref.h
vm/shadowlib/ReAgent.cpp
vm/shadowlib/ReProtocol.h
vm/shadowlib/ReQueue.h
vm/shadowlib/ShadowLib.h
vm/shadowlib/Socket.cpp
vm/shadowlib/Socket.h
vm/shadowlib/buffpack.h
vm/test/AtomicTest.cpp
vm/test/Test.h
vm/test/TestHash.cpp
vm/test/TestIndirectRefTable.cpp
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dirent.h
/usr/include/dlfcn.h
/usr/include/endian.h
/usr/include/errno.h
/usr/include/execinfo.h
/usr/include/fcntl.h
/usr/include/getopt.h
/usr/include/grp.h
/usr/include/inttypes.h
/usr/include/libgen.h
/usr/include/limits.h
/usr/include/linux/unistd.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/netinet/tcp.h
/usr/include/paths.h
/usr/include/pthread.h
/usr/include/sched.h
/usr/include/setjmp.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/sys/file.h
/usr/include/sys/mman.h
/usr/include/sys/personality.h
/usr/include/sys/prctl.h
/usr/include/sys/resource.h
/usr/include/sys/socket.h
/usr/include/sys/stat.h
/usr/include/sys/time.h
/usr/include/sys/types.h
/usr/include/sys/uio.h
/usr/include/sys/un.h
/usr/include/sys/wait.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/zlib.h
/usr/include/alloca.h
/usr/include/asm/unistd.h
/usr/include/bits/byteswap.h
/usr/include/bits/confname.h
/usr/include/bits/dirent.h
/usr/include/bits/dlfcn.h
/usr/include/bits/endian.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/in.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/mman.h
/usr/include/bits/nan.h
/usr/include/bits/netdb.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/resource.h
/usr/include/bits/sched.h
/usr/include/bits/setjmp.h
/usr/include/bits/setjmp2.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/sockaddr.h
/usr/include/bits/socket.h
/usr/include/bits/socket2.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/uio.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/bits/xopen_lim.h
/usr/include/features.h
/usr/include/libio.h
/usr/include/linux/prctl.h
/usr/include/rpc/netdb.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/sys/ucontext.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/asm/socket.h
/usr/include/asm/unistd_32.h
/usr/include/asm/unistd_64.h
/usr/include/asm/unistd_x32.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/fcntl-linux.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/socket_type.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/timex.h
/usr/include/bits/typesizes.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/stdc-predef.h
/usr/include/asm-generic/socket.h
/usr/include/asm/errno.h
/usr/include/bits/libc-lock.h
/usr/include/bits/predefs.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/linux/limits.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/asm/sockios.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/gnu/option-groups.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
/usr/include/asm-generic/sockios.h
